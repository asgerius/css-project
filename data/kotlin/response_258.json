[{"tags": ["android", "android-layout", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11047, "user_id": 208273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65129b14ad4a755ba297a84f0ea03727?s=128&d=identicon&r=PG", "display_name": "Ryan M", "link": "https://stackoverflow.com/users/208273/ryan-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1576718364, "creation_date": 1576718364, "answer_id": 59402135, "question_id": 59400936, "link": "https://stackoverflow.com/questions/59400936/is-it-possible-to-call-the-class-for-only-android-module/59402135#59402135", "title": "Is it possible to call the class for only Android Module?", "body": "<p>Yes - you just need to mark the class <code>internal</code> (e.g., <code>internal class CenterLockHorizontalScrollview</code>).  See <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/visibility-modifiers.html</a> for more information on visibility modifiers like <code>internal</code>.</p>\n"}], "owner": {"reputation": 643, "user_id": 12482756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nCaZH.jpg?s=128&g=1", "display_name": "Burak", "link": "https://stackoverflow.com/users/12482756/burak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59402135, "answer_count": 1, "score": 0, "last_activity_date": 1576718364, "creation_date": 1576708651, "question_id": 59400936, "link": "https://stackoverflow.com/questions/59400936/is-it-possible-to-call-the-class-for-only-android-module", "title": "Is it possible to call the class for only Android Module?", "body": "<p>I have 2 classes named <code>DateTimePicker</code> and <code>CenterLockHorizontalScrollview</code>. <code>CenterLockHorizontalScrollview</code> is the child of <code>DateTimePicker</code>. I don't want to access <code>CenterLockHorizontalScrollview</code> outside of the module. </p>\n\n<p>Is there a way to this?</p>\n"}, {"tags": ["kotlin", "kdoc", "dokka"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 2, "creation_date": 1580469797, "post_id": 59400005, "comment_id": 106116512, "body": "Related <a href=\"https://github.com/Kotlin/dokka/issues/80\" rel=\"nofollow noreferrer\">bug/missing feature</a>"}, {"owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "edited": false, "score": 0, "creation_date": 1580725898, "post_id": 59400005, "comment_id": 106178717, "body": "See also <a href=\"https://youtrack.jetbrains.com/issue/KT-15984\" rel=\"nofollow noreferrer\">KT-15984</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3093, "user_id": 2859957, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b637cd3bccf9798e67e0e97523f81ec3?s=128&d=identicon&r=PG&f=1", "display_name": "treesAreEverywhere", "link": "https://stackoverflow.com/users/2859957/treesareeverywhere"}, "is_accepted": true, "score": 6, "last_activity_date": 1576703336, "creation_date": 1576703336, "answer_id": 59400006, "question_id": 59400005, "link": "https://stackoverflow.com/questions/59400005/in-kotlin-documentation-kdoc-is-it-possible-to-link-to-a-specific-overloaded/59400006#59400006", "title": "In Kotlin documentation (KDoc), is it possible to link to a specific overloaded method?", "body": "<p>Just found this answer: </p>\n\n<blockquote>\n  <p>Note that KDoc does not have any syntax for resolving overloaded members in links. Since the Kotlin documentation generation tool puts the documentation for all overloads of a function on the same page, identifying a specific overloaded function is not required for the link to work.</p>\n</blockquote>\n\n<p>From <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/kotlin-doc.html</a></p>\n\n<p>... but I don't really understand the reasoning.</p>\n\n<p>Sounds like this makes sense in the context where docs are read separately from code, but most of the time when I read or use comments it's in the IDE UI.</p>\n"}], "owner": {"reputation": 3093, "user_id": 2859957, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b637cd3bccf9798e67e0e97523f81ec3?s=128&d=identicon&r=PG&f=1", "display_name": "treesAreEverywhere", "link": "https://stackoverflow.com/users/2859957/treesareeverywhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 59400006, "answer_count": 1, "score": 7, "last_activity_date": 1576703336, "creation_date": 1576703336, "question_id": 59400005, "link": "https://stackoverflow.com/questions/59400005/in-kotlin-documentation-kdoc-is-it-possible-to-link-to-a-specific-overloaded", "title": "In Kotlin documentation (KDoc), is it possible to link to a specific overloaded method?", "body": "<p>Consider the <strong><em>class comment</em></strong> of this Kotlin class:</p>\n\n<pre><code>/**\n * This class has two methods, one that takes one parameters ([foo]),\n * and another one that takes two parameters ([foo]).\n **/\nclass Clazz {\n    /* Foo with one. */\n    fun foo(a: Int) {  }\n\n    /* Foo with two. */\n    fun foo(a: Int, b: Int) {  }\n}\n</code></pre>\n\n<p>I'd like the second link to point to the 2nd function ( the one with the two parameters ).</p>\n\n<p>Is this possible in the Kotlin documentation language? </p>\n"}, {"tags": ["intellij-idea", "kotlin", "companion-object"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1576697725, "post_id": 59398934, "comment_id": 104986943, "body": "Well, it doesn&#39;t create the unnecessary class that a class with a companion object would have."}], "answers": [{"tags": [], "owner": {"reputation": 2261, "user_id": 7327572, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111afeb457014dbcc846245eec06e492?s=128&d=identicon&r=PG&f=1", "display_name": "FilipRistic", "link": "https://stackoverflow.com/users/7327572/filipristic"}, "is_accepted": true, "score": 1, "last_activity_date": 1576698625, "creation_date": 1576698625, "answer_id": 59399126, "question_id": 59398934, "link": "https://stackoverflow.com/questions/59398934/internal-objects-for-utility-classes/59399126#59399126", "title": "Internal Objects for Utility Classes?", "body": "<p>I agree with what JB Nizet said that is avoids creating unnecessary class, and there is one more benefit which is usage of <code>internal</code> which means you won't expose that utility class in case your project is to be used as dependency for some other project. Of course there are cases when you would like to have a library with some helpful utility methods and in such situation you could remove <code>internal</code> modifier, but in many other cases it's better to provide only nice and clean API, while hiding utility methods that you are using.</p>\n"}], "owner": {"reputation": 872, "user_id": 8028053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15de9fe8c80dd7161db137e389b0e3d2?s=128&d=identicon&r=PG&f=1", "display_name": "fileyfood500", "link": "https://stackoverflow.com/users/8028053/fileyfood500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59399126, "answer_count": 1, "score": 0, "last_activity_date": 1576698625, "creation_date": 1576697528, "question_id": 59398934, "link": "https://stackoverflow.com/questions/59398934/internal-objects-for-utility-classes", "title": "Internal Objects for Utility Classes?", "body": "<p>I used IntelliJ's Kotlin to Java conversion tool to convert a Java Utility Class (all class methods are static, it can't be instantiated) to Kotlin.</p>\n\n<p>IntelliJ created an internal object of the form:</p>\n\n<pre><code>internal object MyObject {  \n    const val FIELD1: String = \"constant string\"\n\n    fun myStaticFn(): String {\n        return \"hi\"\n    }\n}\n</code></pre>\n\n<p>How is this different from making a class with a companion object?</p>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576699446, "post_id": 59398689, "comment_id": 104987653, "body": "Pls try to find missing dependencies here and cache them locally: <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">mvnrepository.com</a>"}, {"owner": {"reputation": 1, "user_id": 12560739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v6z59uNb7FI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reH7HtDldDvPRFeygMruQBQExqmtQ/photo.jpg?sz=128", "display_name": "JHladik", "link": "https://stackoverflow.com/users/12560739/jhladik"}, "reply_to_user": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576706631, "post_id": 59398689, "comment_id": 104990253, "body": "Went to repository and got the .pom and .jar files that AS says are missing, and created the paths as it specified.  Dropped the files in the directory and tested navigation with a cut and paste, so the directory structure is definitely correct, as well as the naming.  Same errors, however, and cleared cache and restarted, too."}], "owner": {"reputation": 1, "user_id": 12560739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v6z59uNb7FI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reH7HtDldDvPRFeygMruQBQExqmtQ/photo.jpg?sz=128", "display_name": "JHladik", "link": "https://stackoverflow.com/users/12560739/jhladik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576707070, "creation_date": 1576696388, "last_edit_date": 1576707070, "question_id": 59398689, "link": "https://stackoverflow.com/questions/59398689/cannot-sync-gradle-with-standalone-installation-missing-kotlin", "title": "Cannot sync gradle with standalone installation; missing kotlin", "body": "<p>So this is my first attempt to do anything on Android, but because I'm behind a firewall I've tried to set up a local version of the environment, per the Android Studio download site, and have followed their instructions and have the latest build of Android Studio, 3.5.3.  </p>\n\n<p>The first problem I solved was the classpath seemed to be using a version of Gradle that wasn't included in the installations.   Now that that has been solved, I'm getting the following errors regarding Kotlin missing (and I can confirm that these files do not exist).</p>\n\n<p>So far, Hello World Fail... not sure why the configs provided all point to libraries that aren't included, but I'm definitely frustrated, and it's a steep learning curve to understand all of the dependencies involved.</p>\n\n<p>Here's the errors when I sync Gradle:</p>\n\n<pre><code>Gradle sync failed: Could not find org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.21.\nSearched in the following locations:\n    - file:/C:/Users/jhladik/.android/manual-offline-m2/gmaven_stable/org/jetbrains/kotlin/kotlin-stdlib-jdk8/1.3.21/kotlin-stdlib-jdk8-1.3.21.pom\n    - file:/C:/Users/jhladik/.android/manual-offline-m2/gmaven_stable/org/jetbrains/kotlin/kotlin-stdlib-jdk8/1.3.21/kotlin-stdlib-jdk8-1.3.21.jar\nRequired by:\n    project : &gt; com.android.tools.build:gradle:3.4.0\n    project : &gt; com.android.tools.build:gradle:3.4.0 &gt; com.android.tools.build:builder:3.4.0\n    project : &gt; com.android.tools.build:gradle:3.4.0 &gt; com.android.tools.analytics-library:shared:26.4.0\n    project : &gt; com.android.tools.build:gradle:3.4.0 &gt; com.android.tools.lint:lint-gradle-api:26.4.0\n    project : &gt; com.android.tools.build:gradle:3.4.0 &gt; com.android.tools.build:gradle-api:3.4.0\n    project : &gt; com.android.tools.build:gradle:3.4.0 &gt; androidx.databinding:databinding-compiler-common:3.4.0\n</code></pre>\n"}, {"tags": ["android", "rest", "api", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 810, "user_id": 9266283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788af174dcb871790dc21141a6490328?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/9266283/dinesh"}, "is_accepted": true, "score": 10, "last_activity_date": 1576695546, "creation_date": 1576695546, "answer_id": 59398507, "question_id": 59397166, "link": "https://stackoverflow.com/questions/59397166/how-to-resolve-fatal-exception-while-calling-web-request-from-retrofit2/59398507#59398507", "title": "How to resolve FATAL EXCEPTION while calling web request from retrofit2?", "body": "<p>Retrofit 2 uses OKhttp3.\nIn that case you need to add </p>\n\n<pre><code>android {\n    compileOptions {\n        targetCompatibility = \"8\"\n        sourceCompatibility = \"8\"\n    }\n}\n</code></pre>\n\n<p>in your application build.gradle.</p>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 4693438, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/--_necHUe554/AAAAAAAAAAI/AAAAAAAAABE/EXOc8HPe4pg/photo.jpg?sz=128", "display_name": "Kenny Dabiri", "link": "https://stackoverflow.com/users/4693438/kenny-dabiri"}, "edited": false, "score": 1, "creation_date": 1593059239, "post_id": 62369794, "comment_id": 110647883, "body": "I can believe this 4 lines of code will actually solve my 2days headache. Thanks @H.Fa8"}], "tags": [], "owner": {"reputation": 109, "user_id": 7205711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0268ef27f45f0ad9fd0c0fafece68ea8?s=128&d=identicon&r=PG&f=1", "display_name": "H.Fa8", "link": "https://stackoverflow.com/users/7205711/h-fa8"}, "is_accepted": false, "score": 1, "last_activity_date": 1592120937, "creation_date": 1592120937, "answer_id": 62369794, "question_id": 59397166, "link": "https://stackoverflow.com/questions/59397166/how-to-resolve-fatal-exception-while-calling-web-request-from-retrofit2/62369794#62369794", "title": "How to resolve FATAL EXCEPTION while calling web request from retrofit2?", "body": "<p>Just Add this to Your <code>build.gradle(app)</code> :</p>\n\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8;\n    targetCompatibility JavaVersion.VERSION_1_8;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 10340870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cqYFCus3wUE/AAAAAAAAAAI/AAAAAAAAAXk/cSn9sHVj9cg/photo.jpg?sz=128", "display_name": "M Azam Khan", "link": "https://stackoverflow.com/users/10340870/m-azam-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1599729789, "last_edit_date": 1599729789, "creation_date": 1599727872, "answer_id": 63826121, "question_id": 59397166, "link": "https://stackoverflow.com/questions/59397166/how-to-resolve-fatal-exception-while-calling-web-request-from-retrofit2/63826121#63826121", "title": "How to resolve FATAL EXCEPTION while calling web request from retrofit2?", "body": "<pre><code>android{\n    compileOptions{\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 7805268, "user_type": "registered", "profile_image": "https://graph.facebook.com/738069876351418/picture?type=large", "display_name": "Shashank Mishra", "link": "https://stackoverflow.com/users/7805268/shashank-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 1, "accepted_answer_id": 59398507, "answer_count": 3, "score": 4, "last_activity_date": 1599729789, "creation_date": 1576689549, "question_id": 59397166, "link": "https://stackoverflow.com/questions/59397166/how-to-resolve-fatal-exception-while-calling-web-request-from-retrofit2", "title": "How to resolve FATAL EXCEPTION while calling web request from retrofit2?", "body": "<p>I am trying to call a GET request to an API but retrofit throws a <code>FATAL EXCEPTION</code></p>\n\n<p><strong>Error</strong>:</p>\n\n<pre><code>2019-12-18 22:26:55.733 27892-29449/com.shashank.foe E/AndroidRuntime: FATAL EXCEPTION: OkHttp Dispatcher\n    Process: com.shashank.foe, PID: 27892\n    java.lang.BootstrapMethodError: Exception from call site #1 bootstrap method\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.onResponse(DefaultCallAdapterFactory.java:76)\n        at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:129)\n        at okhttp3.RealCall$AsyncCall.run(RealCall.kt:138)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n        at java.lang.Thread.run(Thread.java:764)\n     Caused by: java.lang.NoClassDefFoundError: Invalid descriptor: VLLLLLZ.\n        at retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.onResponse(DefaultCallAdapterFactory.java:76)\u00a0\n        at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:129)\u00a0\n        at okhttp3.RealCall$AsyncCall.run(RealCall.kt:138)\u00a0\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\u00a0\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\u00a0\n        at java.lang.Thread.run(Thread.java:764)\u00a0\n</code></pre>\n\n<p>Here's my code:</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>val retrofitService = RetrofitService()\nval userApi = retrofitService.createService(UserApi::class.java)\n\nval call = userApi.get()\n\ncall.enqueue(object : Callback&lt;Temp&gt; {\n   override fun onResponse(call: Call&lt;Temp&gt;,response: Response&lt;Temp&gt;) {\n      Log.d(TAG, response.body()!!.id.toString())\n   }\n\n   override fun onFailure(call: Call&lt;Temp&gt;,t: Throwable) {\n      Log.e(TAG, t.message, t)\n   }\n})\n</code></pre>\n\n<p><strong>UserApi.kt</strong></p>\n\n<pre><code>interface UserApi {\n    @GET(\"todos/1\")\n    fun get():Call&lt;Temp&gt;\n}\n</code></pre>\n\n<p><strong>Temp.kt</strong></p>\n\n<pre><code>data class Temp (\n    @SerializedName(\"userId\") val userId : Int,\n    @SerializedName(\"id\") val id : Int,\n    @SerializedName(\"title\") val title : String,\n    @SerializedName(\"completed\") val completed : Boolean\n)\n</code></pre>\n\n<p><strong>RetrofitService.kt</strong></p>\n\n<pre><code>class RetrofitService {\n\n    private val BASE_URL = \"https://jsonplaceholder.typicode.com/\"\n\n\n    private val loggingInterceptor = HttpLoggingInterceptor()\n\n\n    private val httpClient = OkHttpClient.Builder().addInterceptor(loggingInterceptor).build()\n\n    private val builder = Retrofit.Builder()\n        .baseUrl(BASE_URL)\n        .addConverterFactory(GsonConverterFactory.create())\n        .client(httpClient)\n\n    private val retrofit = builder.build()\n\n    init {\n        loggingInterceptor.level = HttpLoggingInterceptor.Level.BODY\n    }\n\n    fun &lt;S&gt; createService(\n        serviceClass: Class&lt;S&gt;\n    ): S {\n        return retrofit.create(serviceClass)\n    }\n}\n</code></pre>\n\n<p><strong>build.gradle</strong>:</p>\n\n<pre><code>implementation 'com.google.code.gson:gson:2.8.6'\nimplementation 'com.squareup.retrofit2:retrofit:2.7.0'\nimplementation 'com.squareup.retrofit2:converter-gson:2.7.0'\nimplementation 'com.squareup.okhttp3:logging-interceptor:4.2.1'\nimplementation 'org.conscrypt:conscrypt-android:2.2.1'\n</code></pre>\n\n<p>I have tried searching online to resolve the issue but wasn't able to find any solution.</p>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["kotlin", "micronaut"], "answers": [{"comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1576694121, "post_id": 59397230, "comment_id": 104985472, "body": "Kotlin objects are lazy, so they won&#39;t be allocated unless invoked."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1576697939, "post_id": 59397230, "comment_id": 104987028, "body": "I&#39;d also expect DI framework to be <i>less</i> optimized than writing equivalent code manually. The tradeoff is that you need to write and change less code."}], "tags": [], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "is_accepted": false, "score": -1, "last_activity_date": 1576689814, "creation_date": 1576689814, "answer_id": 59397230, "question_id": 59396819, "link": "https://stackoverflow.com/questions/59396819/why-use-singleton-instead-using-simply-object/59397230#59397230", "title": "Why use @singleton instead using simply object", "body": "<p>Because if you are going to use some DI framework then it makes sense to let it control and manage the life cycle of your beans, instead of doing things yourself. Even though object and @Singleton may both effectively create a singleton object, there may be a lot difference in how and when its done.</p>\n\n<p>if you do it manually you may create objects proactively, that is you will allocate them when you load your program, but those objects may not be required until a special condition is met. </p>\n\n<p>a DI framework on the other hand can apply lot of optimizations that can not be done manually.</p>\n\n<p>PS: I am not saying that manual bean management is not a good thing, but its only warranted for some very specific use cases and in such cases you are better off without any DI in first place</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1576697796, "creation_date": 1576697796, "answer_id": 59398988, "question_id": 59396819, "link": "https://stackoverflow.com/questions/59396819/why-use-singleton-instead-using-simply-object/59398988#59398988", "title": "Why use @singleton instead using simply object", "body": "<p>With a <code>@Singleton</code>, Micronaut can automatically manage dependencies between beans. If you go with the other class in <a href=\"https://docs.micronaut.io/latest/guide/ioc.html#beans\" rel=\"nofollow noreferrer\">https://docs.micronaut.io/latest/guide/ioc.html#beans</a>, translated to Kotlin:</p>\n\n<pre><code>@Singleton\nclass Vehicle(private val engine: Engine) {\n    public fun start() = engine.start()\n}\n</code></pre>\n\n<ol>\n<li><p>It can't be just an <code>object</code> because takes a parameter.</p></li>\n<li><p>This parameter is discovered by Micronaut to be the singleton instance of <code>V8Engine</code>, which needs <em>that</em> to be a <code>@Singleton</code> and not an <code>object</code>.</p></li>\n</ol>\n\n<p>Of course, in this case you could just directly use <code>V8Engine</code> in <code>Vehicle</code>; but it's easier to change e.g. if you want <code>Engine</code> not to be a singleton anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 21901, "user_id": 3533584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6683339fd1680ef0de6cbcadaa49fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Scott Brown", "link": "https://stackoverflow.com/users/3533584/jeff-scott-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1576765194, "creation_date": 1576765194, "answer_id": 59411582, "question_id": 59396819, "link": "https://stackoverflow.com/questions/59396819/why-use-singleton-instead-using-simply-object/59411582#59411582", "title": "Why use @singleton instead using simply object", "body": "<blockquote>\n  <p>Why can't I use simply object instead of using annotation @Singleton\n  with a class?</p>\n</blockquote>\n\n<p>You can use object instead of using <code>@Singleton</code> with a class.  Micronaut won't manage instances for you, but that is allowed.</p>\n"}], "owner": {"reputation": 84, "user_id": 438087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556ee999a88b29ab0c5cbc0c24556f2d?s=128&d=identicon&r=PG", "display_name": "eduardosouza", "link": "https://stackoverflow.com/users/438087/eduardosouza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 1, "accepted_answer_id": 59398988, "answer_count": 3, "score": 1, "last_activity_date": 1576765194, "creation_date": 1576688199, "question_id": 59396819, "link": "https://stackoverflow.com/questions/59396819/why-use-singleton-instead-using-simply-object", "title": "Why use @singleton instead using simply object", "body": "<p>In Kotlin, a common use for <strong>object</strong> is using it for singletons, like:  </p>\n\n<pre><code>object MyObject {\n   ...\n}\n</code></pre>\n\n<p>However, when using micronaut framework, the official documentation recommends using something like this:</p>\n\n<pre><code>@Singleton\nclass V8Engine : Engine {\n\n  override var cylinders = 8\n  override fun start(): String {\n    return \"Starting V8\"\n  }\n}\n</code></pre>\n\n<p>Why can't I use simply object instead of using annotation @Singleton with a class?</p>\n"}, {"tags": ["kotlin", "polymorphism", "abstract-class"], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 5388004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaf79f63d1305ec881cb790103c999d?s=128&d=identicon&r=PG", "display_name": "ZeitPolizei", "link": "https://stackoverflow.com/users/5388004/zeitpolizei"}, "is_accepted": true, "score": 0, "last_activity_date": 1576686670, "creation_date": 1576686670, "answer_id": 59396358, "question_id": 59396357, "link": "https://stackoverflow.com/questions/59396357/is-there-a-way-to-override-an-abstract-property-with-a-subtype-of-the-declared-t/59396358#59396358", "title": "Is there a way to override an abstract property with a subtype of the declared type?", "body": "<p>Similar problems are addressed <a href=\"https://stackoverflow.com/questions/46104233/kotlin-override-fun-with-subtype\">here</a> and <a href=\"https://stackoverflow.com/questions/49184239/override-function-with-concrete-type-parameter\">here</a>.\nThe solution is to use a generic parameter:</p>\n\n<pre><code>abstract class Animal&lt;MouthType: Mouth&gt; {\n    var numberLegs: Int = 4\n    abstract var mouth: MouthType\n} \n\nclass Dog: Animal&lt;DogMouth&gt;() {\n    override var mouth: DogMouth = DogMouth()\n}\n</code></pre>\n\n<p>This makes <code>dog.mouth = CatMouth()</code> fail with a type mismatch.</p>\n\n<p>With more body parts extra generics need to be added:</p>\n\n<pre><code>abstract class Animal&lt;MouthType: Mouth, EarType: Ear, TailType: Tail&gt; {\n    var numberLegs: Int = 4\n    abstract var mouth: MouthType\n    abstract var ear: EarType\n    abstract var tail: TailType\n}\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 5388004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beaf79f63d1305ec881cb790103c999d?s=128&d=identicon&r=PG", "display_name": "ZeitPolizei", "link": "https://stackoverflow.com/users/5388004/zeitpolizei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59396358, "answer_count": 1, "score": 0, "last_activity_date": 1576686670, "creation_date": 1576686670, "question_id": 59396357, "link": "https://stackoverflow.com/questions/59396357/is-there-a-way-to-override-an-abstract-property-with-a-subtype-of-the-declared-t", "title": "Is there a way to override an abstract property with a subtype of the declared type?", "body": "<p>Consider the following example: I have an abstract class for Animal, and every animal has a mouth, but because every animal's mouth is different, the mouth class is also abstract:</p>\n\n<pre><code>abstract class Animal {\n    var numberLegs: Int = 4\n    var mouth: Mouth? = null\n} \n\nabstract class Mouth {\n    abstract fun makeSound()\n}\n\n</code></pre>\n\n<p>I can now create a Dog and a DogMouth:</p>\n\n<pre><code>class Dog: Animal() {\n    override var mouth: Mouth = DogMouth()\n}\n\nclass DogMouth: Mouth() {\n    override fun makeSound() {\n        println(\"Bark!\")\n    }\n}\n</code></pre>\n\n<p>But this allows me to also assign other types of mouths to the dog, which I don't want, e.g.:</p>\n\n<pre><code>class CatMouth: Mouth() {\n    override fun makeSound() {\n        println(\"Meow!\")\n    }\n}\n\nfun main() {\n    val dog = Dog()\n    dog.mouth.makeSound()   // will print \"Bark!\"\n    dog.mouth = CatMouth()  // I don't want this to work\n    dog.mouth.makeSound()   // will print \"Meow!\"\n}\n</code></pre>\n\n<p>And setting <code>override var mouth: DogMouth = DogMouth()</code> doesn't work.</p>\n\n<p>How can I make sure that Dogs only have DogMouths (and other dog body parts)?</p>\n"}, {"tags": ["android", "kotlin", "nfc"], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576691925, "post_id": 59397667, "comment_id": 104984515, "body": "They are cards that are going to be recorded with basic data such as date and time and the rest are whole and strings. After those same cards are recorded they will be used again to be recorded with the same fields but different values. The example you gave me is an activity but I&#39;m using Fragment, what changes?"}, {"owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "reply_to_user": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576692705, "post_id": 59397667, "comment_id": 104984857, "body": "In a Fragment is a bit more complicated, it depends a bit on how the fragment is being used (shown), but A fragment can have the same lifecycle methods as an activity and the Callback and actual reading code and be anywhere (I have mine in a separate class)"}, {"owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576693503, "post_id": 59397667, "comment_id": 104985214, "body": "Mmmm okay, tomorrow I&#39;ll try to take a look at it and see if I can get it."}, {"owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "reply_to_user": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576699837, "post_id": 59397667, "comment_id": 104987813, "body": "If you give us an idea how you are using a fragment (Is it the only fragment in your activity or is it displayed as part of a viewpager view) then it might help me adjust the example to match your needs"}, {"owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576701203, "post_id": 59397667, "comment_id": 104988327, "body": "In my application I only have a BaseActivity that extends a BaseFragment and all fragments extend from that BaseFragment. The navigation is done through Navigation Component but everything is fragment, there is only one activity in the whole application."}, {"owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "reply_to_user": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576702440, "post_id": 59397667, "comment_id": 104988763, "body": "Is the data the been written to the card coming from one of the fragments? Because even with <code>enableReaderMode</code> the OS is still handling tag discover and if you use NDEF format even with a custom mime type if your App has not claimed the NFC hardware then the OS will display a screen over your app if the user presents the card at the wrong time (e.g. when in Fragment that has not claimed NFC). Thus I would actually still put a lot of the code in the Activity and then <code>onTagDiscovered</code> only does stuff when it has the right data from the Fragment."}, {"owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576703455, "post_id": 59397667, "comment_id": 104989120, "body": "The data written to the card comes from a local file (such as SharedPreferences) in which it has previously been saved, and to save it in NFC it is retrieved from that same file."}, {"owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "reply_to_user": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "edited": false, "score": 0, "creation_date": 1576708861, "post_id": 59397667, "comment_id": 104991005, "body": "Ok, data from a file make it easier to read/write from Activity as I think that is the best place to handle it even when using fragments, but you still need a Fragment to prompt the user to present the card and provide feedback when written. You could handle it without visual prompts. But would really need to a flow diagram of how you want card reading/writing to happen to best advise but most of the card handling is best done in the Activity in all cases anyway only possibly some user interaction in a Fragment."}], "tags": [], "owner": {"reputation": 3606, "user_id": 2373819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2373819/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1576712948, "last_edit_date": 1576712948, "creation_date": 1576691680, "answer_id": 59397667, "question_id": 59395861, "link": "https://stackoverflow.com/questions/59395861/write-nfc-data-on-an-tag-with-android-studio/59397667#59397667", "title": "Write NFC data on an tag with Android Studio", "body": "<p>The first place I would start is thinking about how to store the data.</p>\n\n<p>Is the data custom to your application or do you want to share it with other App's?</p>\n\n<p>Will the App be just writing the data once or will it be updating it (wanting to Append Data to existing data stored on the card?</p>\n\n<p><strong>Update:</strong> from your comments about the data type you are probably better using the higher level NDEF format to store your Data using a custom mime type. This is assuming your chosen card type supports this.\nNote the example I gave is reading/writing using low level commands read and writing page by page.</p>\n\n<p>How many bytes of data do you want to store (Influences the card technology)</p>\n\n<p>You probably want to also think about what NFC card technology you want to use, probably a good choice of one of the NTAG 21x series of cards.</p>\n\n<p>What is the minimum version of Android you want to target?</p>\n\n<p>I would not use the newIntent method as this is very unreliable for writing data, I would use the <code>enableReaderMode</code> if you are targeting a high enough version of Android.</p>\n\n<p><a href=\"https://developer.android.com/reference/android/nfc/NfcAdapter.html#enableReaderMode(android.app.Activity,%20android.nfc.NfcAdapter.ReaderCallback,%20int,%20android.os.Bundle)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/nfc/NfcAdapter.html#enableReaderMode(android.app.Activity,%20android.nfc.NfcAdapter.ReaderCallback,%20int,%20android.os.Bundle)</a></p>\n\n<p>Some of the answers to what you need to think about will affect some of the details of the example.</p>\n\n<p><strong>Update: based on comments</strong> Even though you are using Fragments I would still put the mechanics of NFC handling in the Activity.</p>\n\n<p>The reason for this is because the OS is still handling tag discovery, if you don't \"claim\" the NFC hardware in every Fragment then it is possible especially with the NDEF data format, for the OS to display a screen over your App if the user present a card at the wrong time, giving a bad user experience.</p>\n\n<p>In my multi Activity App I \"claim\" the NFC hardware in every Activity even if a lot of them do \"On Tag discovered, do nothing\" because they are not the NFC Activity.</p>\n\n<p>So unless you want to write the same code in every Fragment, it would be much better to call the NFC stuff from your one Activity and then in <code>onTagDiscovered</code> does something like (pseudo code):-</p>\n\n<p><strong>Updated:</strong></p>\n\n<pre><code>if displaying the NFC user prompt Fragment.\nget data to file.\nwrite data to the card.\nNotify user that it is done.\nelse\ndo nothing when other fragments are displayed.\n</code></pre>\n\n<p>or you could have card writing at any time the App is open (again best done in activity not in any fragment)</p>\n\n<pre><code>If card is presented no matter what fragment is being display\nget data from the file\nwrite data to the card\nNotify user that it is done.\n</code></pre>\n\n<p>Sorry I cannot do an example in Kotlin but here is a barebone of a Java Example, extracted from my App (not tested, so there could be copy and pasted errors)</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class MainActivity extends AppCompatActivity implements NfcAdapter.ReaderCallback{\n\nprivate NfcAdapter mNfcAdapter;\n\n@Override\n    protected void onCreate(Bundle savedInstanceState) {\n    // All normal onCreate Stuff\n\n    // Listen to NFC setting changes\n    this.registerReceiver(mReceiver, filter);\n    }\n\n    // Listen for NFC being turned on while in the App\n    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            final String action = intent.getAction();\n\n            if (action.equals(NfcAdapter.ACTION_ADAPTER_STATE_CHANGED)) {\n                final int state = intent.getIntExtra(NfcAdapter.EXTRA_ADAPTER_STATE,\n                        NfcAdapter.STATE_OFF);\n                switch (state) {\n                    case NfcAdapter.STATE_OFF:\n                    // Tell the user to turn NFC on if App requires it\n                        break;\n                    case NfcAdapter.STATE_TURNING_OFF:\n                        break;\n                    case NfcAdapter.STATE_ON:\n                        enableNfc();\n                        break;\n                    case NfcAdapter.STATE_TURNING_ON:\n                        break;\n                }\n            }\n        }\n    };\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n\n        enableNfc();\n\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        if(mNfcAdapter!= null)\n            mNfcAdapter.disableReaderMode(this);\n    }\n\n\n\n\n    private void enableNfc(){\n        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);\n\n        if(mNfcAdapter!= null &amp;&amp; mNfcAdapter.isEnabled()) {\n\n            // Work around some buggy hardware that checks for cards too fast\n            Bundle options = new Bundle();\n            options.putInt(NfcAdapter.EXTRA_READER_PRESENCE_CHECK_DELAY, 1000);\n\n\n            // Listen for all types of card when this App is in the foreground\n            // Turn platform sounds off as they misdirect users when writing to the card\n            // Turn of the platform decoding any NDEF data\n            mNfcAdapter.enableReaderMode(this,\n                    this,\n                    NfcAdapter.FLAG_READER_NFC_A |\n                            NfcAdapter.FLAG_READER_NFC_B |\n                            NfcAdapter.FLAG_READER_NFC_F |\n                            NfcAdapter.FLAG_READER_NFC_V |\n                            NfcAdapter.FLAG_READER_NFC_BARCODE |\n                            NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK |\n                            NfcAdapter.FLAG_READER_NO_PLATFORM_SOUNDS,\n                    options);\n        } else {\n            // Tell the user to turn NFC on if App requires it\n        }\n    }\n\n    public void onTagDiscovered(Tag tag) {\n\n        // This is run in a separate Thread to UI\n\n        StringBuilder Uid = new StringBuilder();\n\n        boolean successUid = getUID(tag, Uid);\n        if (!successUid){\n            // Not a successful read\n            return;\n        } else {\n            // Feedback to user about successful read\n\n            Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);\n            v.vibrate(500);\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    // Update the UI / notify user  \n                }\n            });\n            // Finish Task\n            try {\n                Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n                Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);\n                r.play();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public boolean getUID(Tag tag, StringBuilder Uid){\n        NfcA mNfcA = NfcA.get(tag);\n\n        if (mNfcA != null) {\n            // The tag is NfcA capable\n            try {\n                mNfcA.connect();\n                // Do a Read operation at page 0 an 1\n                byte[] result = mNfcA.transceive(new byte[] {\n                        (byte)0x3A,  // FAST_READ\n                        (byte)(0 &amp; 0x0ff),\n                        (byte)(1 &amp; 0x0ff),\n                });\n\n                if (result == null) {\n                    // either communication to the tag was lost or a NACK was received\n                    // Log and return\n                    return false;\n                } else if ((result.length == 1) &amp;&amp; ((result[0] &amp; 0x00A) != 0x00A)) {\n                    // NACK response according to Digital Protocol/T2TOP\n                    // Log and return\n                    return false;\n                } else {\n                    // success: response contains ACK or actual data\n                    for (int i = 0; i &lt; result.length; i++) {\n                        // byte 4 is a check byte\n                        if (i == 3) continue;\n                        Uid.append(String.format(\"%02X \", result[i]));\n                    }\n\n                    // Close and return\n                    try {\n                        mNfcA.close();\n                    } catch (IOException e) {\n                    }\n                    return true;\n                }\n\n            } catch (TagLostException e) {\n                // Log and return\n                return false;\n            } catch (IOException e){\n                // Log and return\n                return false;\n            } finally {\n                try {\n                    mNfcA.close();\n                } catch (IOException e) {\n                }\n            }\n        } else {\n            // Log error\n            return false;\n        }\n    }\n\n}\n\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 11567968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4BVh.jpg?s=128&g=1", "display_name": "Ludiras", "link": "https://stackoverflow.com/users/11567968/ludiras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576712948, "creation_date": 1576684877, "question_id": 59395861, "link": "https://stackoverflow.com/questions/59395861/write-nfc-data-on-an-tag-with-android-studio", "title": "Write NFC data on an tag with Android Studio", "body": "<p>I'm creating an application in which I have to write a series of values that come to me from a file to an NFC card and I've been reading and I don't know where to really start, I have a few doubts.</p>\n\n<p>First of all I understand that the ideal is to create a class that handles the NFC, although I suppose this is optional and can be done in the same class. The problem is that the tutorials I see are only using activities and make use of the onNewIntent method.</p>\n\n<p>Being in a fragment I can not call this method so it is the first step in which I lose, and I do not know if this method is necessary because as I understand this is to launch the application even if it is closed as if it were a reader, correct me if I'm wrong. I appreciate if you can guide me a little in what I should do because after so much reading I've gone a little crazy.</p>\n"}, {"tags": ["android", "kotlin", "android-listview", "android-arrayadapter"], "comments": [{"owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "edited": false, "score": 0, "creation_date": 1576684727, "post_id": 59395713, "comment_id": 104980740, "body": "can you consider moving this line   <code>var array = arrayOf(resources.getString(R.string.item_a), resources.getString(R.string.item_b), resources.getString(R.string.item_c), resources.getString(R.string.item_d), )</code>  inside the <code>onCreate()</code> method"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "edited": false, "score": 0, "creation_date": 1576685396, "post_id": 59395713, "comment_id": 104981173, "body": "I did but why does <code>array</code> in <code>if (array[position] == resources.getString(R.string.item_a))</code> give this error now? <code>Unresolved reference: array</code>"}, {"owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "edited": false, "score": 0, "creation_date": 1576686449, "post_id": 59395713, "comment_id": 104981771, "body": "maybe because you have not defined a variable named array in the scope you are refering."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "edited": false, "score": 0, "creation_date": 1576686682, "post_id": 59395713, "comment_id": 104981925, "body": "@mightyWOZ Does this need to be define before <code>onCreate</code>?"}, {"owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "edited": false, "score": 0, "creation_date": 1576686887, "post_id": 59395713, "comment_id": 104982039, "body": "you can declare it as a class variable then you will be able to access it in any function."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "edited": false, "score": 0, "creation_date": 1576687494, "post_id": 59395713, "comment_id": 104982368, "body": "@mightyWOZ would I do something like <code>lateinit var array: Array</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1576690572, "creation_date": 1576690572, "answer_id": 59397401, "question_id": 59395713, "link": "https://stackoverflow.com/questions/59395713/null-object-reference-when-using-string-resources-for-listview/59397401#59397401", "title": "Null object reference when using string resources for ListView", "body": "<p>Two things going on here.</p>\n\n<p>First, if you declare and initialize an array of string resources at the class level of your activity, you will get an error. Your activity isn't \"ready\" immediately when it is constructed; it needs to have <code>super.onCreate()</code> called before you'll be able to access resources.</p>\n\n<p>Second, if you move the entire array inside <code>onCreate()</code> then you won't be able to access it from <code>onItemClick()</code> (since now it is local to onCreate).</p>\n\n<p>The solution is to use a <code>lateinit var</code> so that you can declare your array at the class level but then initialize it inside <code>onCreate()</code>:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private lateinit var array: Array&lt;String&gt;\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        this.array = arrayOf(...)\n        // ...\n    }\n\n    override fun onItemClick(view: View, position: Int) {\n        if (array[position] == resources.getString(R.string.item_a)){\n            // ...\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576690572, "creation_date": 1576684418, "last_edit_date": 1576685190, "question_id": 59395713, "link": "https://stackoverflow.com/questions/59395713/null-object-reference-when-using-string-resources-for-listview", "title": "Null object reference when using string resources for ListView", "body": "<p>Why is it that whenever I try to use a simple array for a <code>ListView</code>, I get this error?:</p>\n\n<blockquote>\n  <p>Attempt to invoke virtual method 'android.content.res.Resources android.content.Context.getResources()' on a null object reference</p>\n</blockquote>\n\n<p>I really don't get what I'm doing wrong here as I've tried using different contexts (<code>base</code> and <code>application</code>) but still no change in solving this issue.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var array = arrayOf(resources.getString(R.string.item_a), \n        resources.getString(R.string.item_b), \n        resources.getString(R.string.item_c), \n        resources.getString(R.string.item_d))\n\n        val adapter = ArrayAdapter(this,\n                R.layout.listview_item, array)\n\n        val listView:ListView = findViewById(R.id.listview_1)\n        listView.setAdapter(adapter)\n    }\n\noverride fun onItemClick(view: View, position: Int) {\n    if (array[position] == resources.getString(R.string.item_a)){\n        Toast.makeText(this, \"Hi there! This is a Toast.\", Toast.LENGTH_SHORT).show()\n    }\n}\n\n} \n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room"], "owner": {"reputation": 1208, "user_id": 1035292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0072ce61d8a1ff9160299d52ca855a?s=128&d=identicon&r=PG", "display_name": "user1035292", "link": "https://stackoverflow.com/users/1035292/user1035292"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576684165, "creation_date": 1576684165, "question_id": 59395631, "link": "https://stackoverflow.com/questions/59395631/androidx-room-invalidationtracker-eror-while-building-the-kotlin-app", "title": "androidx.room.InvalidationTracker eror while building the kotlin app", "body": "<p>error: androidx.room.InvalidationTracker needs to have either an empty constructor or a constructor that takes Database as its only parameter. - androidx.room.InvalidationTracker\ngetting the above error while building the app with kotlin</p>\n"}, {"tags": ["android", "kotlin", "android-viewpager", "adapter"], "comments": [{"owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 0, "creation_date": 1576683542, "post_id": 59395351, "comment_id": 104980075, "body": "&quot;But he also called multiple times&quot; - how many times? Are you aware that ViewPager caches a certain number of Fragments to make swiping possible?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 0, "creation_date": 1576683878, "post_id": 59395351, "comment_id": 104980255, "body": "<code>destroyItem</code> called 3 times"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 0, "creation_date": 1576684181, "post_id": 59395351, "comment_id": 104980435, "body": "@Anatolii  It will be more difficult, maybe there is a way not to create a map variable and use the container itself?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 0, "creation_date": 1576684421, "post_id": 59395351, "comment_id": 104980569, "body": "@Anatolii to prevent instantiating items android instantiateItem. I have due to the fact that the view is redrawn, the picture starts to flicker"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 0, "creation_date": 1576684916, "post_id": 59395351, "comment_id": 104980869, "body": "@Anatolii ViewPager, second question don t understand"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576686488, "creation_date": 1576683231, "question_id": 59395351, "link": "https://stackoverflow.com/questions/59395351/remove-from-map-in-adapter", "title": "Remove from map in adapter", "body": "<p>Write next method for stop redrawing my view multiple times in <code>instantiateItem</code>.</p>\n\n<pre><code>override fun instantiateItem(container: ViewGroup, position: Int): Any {\n    val view = map.getOrPut(position) {\n        AuthorizationHeaderView(context = context)\n    }\n    updateViewContent(view, data[position])\n    timeUpdateListeners.add(view as TimeUpdateListener)\n    container.addView(view, 0)\n    return view\n}\n</code></pre>\n\n<p>Now want to add next code <code>map.remove(position)</code> in my <code>destroyItem()</code>.\nBut he also called multiple times.</p>\n\n<p>How i can make remove from map and don t redraw my view?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 6, "last_activity_date": 1576683259, "creation_date": 1576683259, "answer_id": 59395361, "question_id": 59395236, "link": "https://stackoverflow.com/questions/59395236/increase-all-elements-in-mutablelist-by-1-the-kotlin-way/59395361#59395361", "title": "Increase all elements in MutableList by 1 the Kotlin way", "body": "<p>\"Kotlin way\" would be not to mutate lists at all, but to produce a new list instead using something like <code>.map{ it + 1 }</code></p>\n\n<p>But if you do want to use <code>mutableList</code> for some reason, <code>replaceAll</code> is a valid option:</p>\n\n<pre><code>result.replaceAll { it + 1 }\n</code></pre>\n"}], "owner": {"reputation": 1896, "user_id": 3952994, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c2fc6a69e19964667f321ec499bdb18c?s=128&d=identicon&r=PG&f=1", "display_name": "HungUnicorn", "link": "https://stackoverflow.com/users/3952994/hungunicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 59395361, "answer_count": 1, "score": 0, "last_activity_date": 1576702231, "creation_date": 1576682870, "last_edit_date": 1576702231, "question_id": 59395236, "link": "https://stackoverflow.com/questions/59395236/increase-all-elements-in-mutablelist-by-1-the-kotlin-way", "title": "Increase all elements in MutableList by 1 the Kotlin way", "body": "<p>I have a list</p>\n\n<pre><code>val result = MutableList(N) { 0 }\n</code></pre>\n\n<p>I want to increase 1 for elements in the list <code>result</code></p>\n\n<p>this works</p>\n\n<pre><code>for (item in result.withIndex()) {\n                result[item.index] = result[item.index] + 1\n}\n</code></pre>\n\n<p>but is there more kotlin way of doing it? like <code>it-&gt; it+=1</code> ? I got val cannot be reassigned using this</p>\n"}, {"tags": ["spring-boot", "maven", "intellij-idea", "kotlin", "compilation"], "comments": [{"owner": {"reputation": 8717, "user_id": 6413377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/J4tD1.png?s=128&g=1", "display_name": "pirho", "link": "https://stackoverflow.com/users/6413377/pirho"}, "edited": false, "score": 0, "creation_date": 1576686894, "post_id": 59394934, "comment_id": 104982043, "body": "Does this happen if your class <code>User</code> is <code>public</code>?"}, {"owner": {"reputation": 303, "user_id": 10039586, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u042e\u0440\u0438\u0439 \u0411\u0430\u0440\u0438\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/10039586/%d0%ae%d1%80%d0%b8%d0%b9-%d0%91%d0%b0%d1%80%d0%b8%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1576688536, "post_id": 59394934, "comment_id": 104982914, "body": "It looks like something that shouldn&#39;t happen. You can try to decompile this class to check which argument Kotlin cannot move to default constructor or something like that.   And also you can try to add <code>@JvmOverloads</code> to constructor."}, {"owner": {"reputation": 47, "user_id": 744836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc451cf43f56f131ff615e61ebb72c2a?s=128&d=identicon&r=PG", "display_name": "Iwaneez", "link": "https://stackoverflow.com/users/744836/iwaneez"}, "edited": false, "score": 0, "creation_date": 1576703945, "post_id": 59394934, "comment_id": 104989293, "body": "nothing of this makes any change. I have tried to decompile to java and the no arg constructor is present, but with additional two params:   <code>public User() {       this((Long)null, (String)null, (String)null, (String)null, (Set)null, (ExchangeProfile)null, 63, (DefaultConstructorMarker)null);    }</code>"}], "owner": {"reputation": 47, "user_id": 744836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc451cf43f56f131ff615e61ebb72c2a?s=128&d=identicon&r=PG", "display_name": "Iwaneez", "link": "https://stackoverflow.com/users/744836/iwaneez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576686571, "creation_date": 1576681886, "question_id": 59394934, "link": "https://stackoverflow.com/questions/59394934/no-arg-constructor-missing-but-should-be-present", "title": "No-arg constructor missing, but should be present", "body": "<p>In my Spring Boot app I have an entity class without no-arg constructor, but with fields initialzed.</p>\n\n<pre><code>@Entity\n@Table(name = \"users\")\ndata class User(\n        @Id\n        @GeneratedValue(strategy = GenerationType.AUTO)\n        var id: Long? = null,\n        @Column(name = \"username\", unique = true, nullable = false)\n        var username: String = \"\",\n        @Column(name = \"password\", nullable = false)\n        var password: String = \"\",\n        @Column(name = \"language\")\n        var language: String? = null,\n        @ManyToMany(fetch = FetchType.EAGER)\n        @JoinTable(name = \"user_role\", joinColumns = [JoinColumn(name = \"user_id\", referencedColumnName = \"id\", nullable = false)], inverseJoinColumns = [JoinColumn(name = \"role_id\", referencedColumnName = \"id\", nullable = false)])\n        var roles: Set&lt;Role&gt; = HashSet(),\n        @OneToOne\n        @JoinColumn(name = \"active_profile\")\n        var activeProfile: ExchangeProfile? = null\n)\n</code></pre>\n\n<p>Then I have a generic method which creates instances of these classes:</p>\n\n<pre><code>private fun createNewInstance(): T = itemClass.createInstance()\n</code></pre>\n\n<p>As I have read compiler should generate no-arg constructor and there should be no problem in this code.\nRunning this code in IntelliJ Idea using \"Run configuration\" button works without problem.</p>\n\n<p>But running it from console using </p>\n\n<pre><code>mvn clean compile spring-boot:run\n</code></pre>\n\n<p>(or in docker) throws an exception:</p>\n\n<pre><code>Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Class should have a single no-arg constructor: class com.iwaneez.stuffer.core.persistence.entity.User\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:213) ~[spring-beans-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117) ~[spring-beans-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:308) ~[spring-beans-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n        ... 75 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Class should have a single no-arg constructor: class com.iwaneez.stuffer.core.persistence.entity.User\n        at kotlin.reflect.full.KClasses.createInstance(KClasses.kt:281) ~[kotlin-reflect-1.3.61.jar:1.3.61-release-180 (1.3.61)]\n        at com.iwaneez.stuffer.core.ui.component.masterdetail.DetailComponent.createNewInstance(DetailComponent.kt:104) ~[classes/:na]\n</code></pre>\n\n<p>Do you have any ideas, how to fix it without explicitly define no-arg constructor?</p>\n"}, {"tags": ["kotlin", "hashmap", "nullable"], "comments": [{"owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "edited": false, "score": 0, "creation_date": 1576681919, "post_id": 59394864, "comment_id": 104979116, "body": "you call <code>HashMap.remove</code>, no?"}, {"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 1, "creation_date": 1576682148, "post_id": 59394864, "comment_id": 104979231, "body": "It is legal as long as you haven&#39;t tried to <code>put(key, 1)</code> ;-). You could remove this key, but you cannot create an entry with it, so no need to worry about this."}, {"owner": {"reputation": 109, "user_id": 8132069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AMTTX.jpg?s=128&g=1", "display_name": "AlexanderShirshov", "link": "https://stackoverflow.com/users/8132069/alexandershirshov"}, "edited": false, "score": 0, "creation_date": 1576682428, "post_id": 59394864, "comment_id": 104979390, "body": "Adding MutableMap interface gives the same result.   I think it&#39;s not about how Map works, it&#39;s about how this method call is possible?"}], "answers": [{"tags": [], "owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "is_accepted": false, "score": 1, "last_activity_date": 1576682934, "creation_date": 1576682934, "answer_id": 59395257, "question_id": 59394864, "link": "https://stackoverflow.com/questions/59394864/kotlin-non-nullable-map-allows-remove-null/59395257#59395257", "title": "Kotlin non nullable map allows remove null", "body": "<p>Kotlin could warn or refuse to compile (would be good), but it doesn't (for now).</p>\n\n<p>The reason for it being not as bad as it looks from a first glance is that you cannot <code>put</code> an <code>Int?</code> into a <code>MutableMap&lt;Int, Long&gt;</code> because</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val map = HashMap&lt;Int, Long&gt;()\nval key :Int? = null\nmap.put(key, 1) // &lt;--- WON'T COMPILE [Type mismatch: inferred type was Int? but Int was expected]\nmap.remove(key)\n</code></pre>\n\n<p>Nevertheless, I think you are right by wondering about that method being compiled.</p>\n"}, {"tags": [], "owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "is_accepted": false, "score": 4, "last_activity_date": 1576694549, "last_edit_date": 1576694549, "creation_date": 1576683267, "answer_id": 59395363, "question_id": 59394864, "link": "https://stackoverflow.com/questions/59394864/kotlin-non-nullable-map-allows-remove-null/59395363#59395363", "title": "Kotlin non nullable map allows remove null", "body": "<p>Your code is perfectly fine as <code>remove()</code> allows nullable arguments - your map <strong>contents</strong> definition got nothing to it. When <code>remove()</code> is invoked, it would try to find matching requested key in the map and as it's not there (it's completely irrelevant why it's not there - it's valid case for key to be not present) nothing will happen. Where compiler will complain is on any attempt to <strong>put</strong> such key into your map. Then map definition kicks in and since it's known that nullable keys not allowed, such code won't even compile as this is clearly buggy code.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 8132069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AMTTX.jpg?s=128&g=1", "display_name": "AlexanderShirshov", "link": "https://stackoverflow.com/users/8132069/alexandershirshov"}, "is_accepted": false, "score": 0, "last_activity_date": 1576687259, "creation_date": 1576687259, "answer_id": 59396554, "question_id": 59394864, "link": "https://stackoverflow.com/questions/59394864/kotlin-non-nullable-map-allows-remove-null/59396554#59396554", "title": "Kotlin non nullable map allows remove null", "body": "<p>Eventually asking this question helped to find <a href=\"https://stackoverflow.com/a/55885615/8132069\">another</a> question with explanation. In short, what actually happens is call of the extension function which have it's own type inference.</p>\n"}, {"tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": true, "score": 1, "last_activity_date": 1576698604, "creation_date": 1576698604, "answer_id": 59399122, "question_id": 59394864, "link": "https://stackoverflow.com/questions/59394864/kotlin-non-nullable-map-allows-remove-null/59399122#59399122", "title": "Kotlin non nullable map allows remove null", "body": "<p>In this case, <code>map.remove(key)</code> doesn't not calls</p>\n\n<pre><code>public fun remove(key: K): V?\n</code></pre>\n\n<p>It calls an extension <code>remove</code> function:</p>\n\n<pre><code>public inline fun &lt;@OnlyInputTypes K, V&gt; MutableMap&lt;out K, V&gt;.remove(key: K): V? =\n    @Suppress(\"UNCHECKED_CAST\") (this as MutableMap&lt;K, V&gt;).remove(key)\n</code></pre>\n\n<p>This function documentation says that it <em>allows to overcome type-safety restriction of <code>remove</code> that requires to pass a key of type <code>K</code>.</em></p>\n\n<hr>\n\n<p>It allows overcoming type-safety restriction because the key of the entry you are removing does not have to be the same type as the object that you pass into <code>remove(key)</code>; the specification of the method only requires that they be equal. This follows from how the <code>equals()</code> method takes in an <code>Any</code> as a parameter, not just the same type as the object.</p>\n\n<p>Although it may be commonly true that many classes have <code>equals()</code> defined so that its objects can only be equal to objects of its own class, there are many places where this is not the case. For example, the specification for <code>List.equals()</code> says that two <code>List</code> objects are equal if they are both <code>List</code>s and have the same contents, even if they are different implementations of <code>List</code>. So, for example, according to the specification of the method, it is possible to have a <code>MutableMap&lt;ArrayList&lt;Something&gt;, Something&gt;</code> and call <code>remove(key)</code> with a <code>LinkedList</code> as an argument, and it should retrieve the key which is a list with the same contents. This would not be possible if this extension <code>remove(key)</code> didn't exist.<sup><a href=\"https://stackoverflow.com/a/859239/10536125\">[1]</a></sup></p>\n"}], "owner": {"reputation": 109, "user_id": 8132069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AMTTX.jpg?s=128&g=1", "display_name": "AlexanderShirshov", "link": "https://stackoverflow.com/users/8132069/alexandershirshov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 59399122, "answer_count": 4, "score": 1, "last_activity_date": 1576698604, "creation_date": 1576681673, "question_id": 59394864, "link": "https://stackoverflow.com/questions/59394864/kotlin-non-nullable-map-allows-remove-null", "title": "Kotlin non nullable map allows remove null", "body": "<p>Why this code can be compiled and executed without erros?</p>\n\n<pre><code>val map = HashMap&lt;Int, Long&gt;()\nval key :Int? = null\nmap.remove(key)\n</code></pre>\n\n<p>In MutableMap <em>remove</em> declared as accepting only non nullable key, so it shouldn't even compile. Is it a Kotlin type inference bug or am I missing something?</p>\n\n<pre><code>public fun remove(key: K): V?\n</code></pre>\n"}, {"tags": ["kotlin", "spring-data-jpa"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576681511, "post_id": 59394363, "comment_id": 104978901, "body": "<a href=\"https://kotlinexpertise.com/hibernate-with-kotlin-spring-boot/\" rel=\"nofollow noreferrer\">This blog</a> seems to give an answer by <i>The equals/hashCode dilemma: Don&#39;t use data classes as Hibernate entities</i>, but for an additional reason. So for now, you may want to choose your 2. stylistic option."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1576683136, "post_id": 59394363, "comment_id": 104979829, "body": "The question is a bit broad, so help me here. How would you&#39;d like it to look, say in some perfect future language?"}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "reply_to_user": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576749137, "post_id": 59394363, "comment_id": 105002054, "body": "@deHaar: This question is not about data classes. I know said blog article, and while the author chose <i>not</i> to implement Spring Data\u2019s <code>Persistable</code>, his approach looks very much similar to what I have written: Fields first, super-class at the end."}, {"owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "reply_to_user": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1576749364, "post_id": 59394363, "comment_id": 105002182, "body": "@AlexeySoshin: All other languages that I\u2019ve used put the super-classes/interfaces first, before the attributes of the class. Ideally, I would like to keep it that way (just like in Java, C++, you name it), but keep the cool feature of the primary constructor, as Kotlin has it."}], "answers": [{"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576749980, "creation_date": 1576749980, "answer_id": 59407368, "question_id": 59394363, "link": "https://stackoverflow.com/questions/59394363/kotlin-long-primary-constructor-and-inheritance/59407368#59407368", "title": "Kotlin long primary constructor and inheritance", "body": "<p>From my understanding the closest you could get to what you're looking for is this:</p>\n\n<pre><code>class Book private constructor(): AbstractPersistable&lt;Int&gt;() {\n    constructor(\n        author: String? = null,\n        title: String? = null\n    ) : this()\n}\n</code></pre>\n\n<p>Basically making the primary constructor private, and forcing to use secondary constructor.</p>\n\n<p>I would like to point this part: </p>\n\n<blockquote>\n  <p>\"this moves the focus of class definition from inheritance to data\"</p>\n</blockquote>\n\n<p>That is actually one of Kotlin intentions, have more composition over inheritance. Same goes for how they built <code>by</code> into the language.</p>\n"}], "owner": {"reputation": 14274, "user_id": 2621917, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ecd16dbe555b9596651e94668f71466?s=128&d=identicon&r=PG", "display_name": "Michael Piefel", "link": "https://stackoverflow.com/users/2621917/michael-piefel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576749980, "creation_date": 1576679991, "question_id": 59394363, "link": "https://stackoverflow.com/questions/59394363/kotlin-long-primary-constructor-and-inheritance", "title": "Kotlin long primary constructor and inheritance", "body": "<p>This question could be generalized, but it crept up while creating a Kotlin <code>@Entity</code> class within the Spring Data framework. Each entity shall extend <code>AbstractPersistable</code>, and it usually has quite a number of fields:</p>\n\n<pre><code>@Entity\nclass Book(\n        var author: String? = null,\n        var title: String? = null\n): AbstractPersistable&lt;Int&gt;()\n</code></pre>\n\n<p>Now this snippet shows a tiny table. You can easily imagine more fields (columns), and usually each field has a comment, a <code>@Column</code> or <code>@OneToMany</code> annotation, and then blank lines between them. It soon will fill a page. That\u2019s not the bad thing (in my opinion).</p>\n\n<p>What bugs me with that code is that the super-class (or any implemented interfaces) get separated from the <code>class Book</code> line so much \u2013 it becomes hidden. This happens whenever you use Kotlin\u2019s primary constructor feature. It\u2019s great in general, but moves the focus of class definition from inheritance to data.</p>\n\n<p>What are the stylistic options?</p>\n\n<ol>\n<li>Get used to it. New language, new patterns.</li>\n<li>Do not use this syntax. Use the <code>constructor</code> keyword instead. Mirrors what Java would look like. However, to use the class as before, you have to swallow a bitter pill: Create the constructor by hand, including not only all the assigments, but ideally also all the default values for all the fields as well, basically duplicating the code.</li>\n<li>The third perfect way that I cannot think of at the moment.</li>\n</ol>\n"}, {"tags": ["android", "gradle", "kotlin", "android-productflavors"], "owner": {"reputation": 31, "user_id": 2409702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0993e2941de65d4ae87fe9dabdd4c3b?s=128&d=identicon&r=PG", "display_name": "PhilipR", "link": "https://stackoverflow.com/users/2409702/philipr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1576833481, "creation_date": 1576679770, "question_id": 59394306, "link": "https://stackoverflow.com/questions/59394306/productflavor-in-module-library-only", "title": "ProductFlavor in Module Library only", "body": "<p>I have a Library Module that has 2 flavors. What I want is that the flavors are only containing the module and not in the app itself but i get dependency issues.\nThis is the gradle file of my module \"testlib\":</p>\n\n<pre><code>android {\n    compileSdkVersion 29\n\n    flavorDimensions \"exampleflav\"\n    publishNonDefault true\n    productFlavors {\n        flav1 {}\n        flav2 {}\n    }\n</code></pre>\n\n<p>the app gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n\n    compileSdkVersion 29\n    defaultConfig {\n        applicationId \"com.prose.flavortest\"\n        minSdkVersion 22\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.core:core-ktx:1.1.0'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n    implementation project(path:':testlib', configuration: 'flav1Release')\n}\n</code></pre>\n\n<p>When i try to sync i get the following error:\n...</p>\n\n<pre><code>ERROR: Unable to resolve dependency for ':app@debug/compileClasspath': Could not resolve project :testlib.\nShow Details\nAffected Modules: app\n\n\nERROR: Unable to resolve dependency for ':app@debugAndroidTest/compileClasspath': Could not resolve project :testlib.\nShow Details\nAffected Modules: app\n</code></pre>\n\n<p>...</p>\n\n<p>Iam aware that it will work when i add</p>\n\n<pre><code>flavorDimensions \"exampleflav\"\npublishNonDefault true\nproductFlavors {\n    flav1 {}\n    flav2 {}\n}\n</code></pre>\n\n<p>to my app gradle file but that is exactly what I Dont want. Is there any chance to have the flavors in the lib only without adding them to the app itself?</p>\n"}, {"tags": ["java", "kotlin", "collections", "interop"], "comments": [{"owner": {"reputation": 2039, "user_id": 502214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e26ce1fd9b907aa156d7e8e2cdd6401?s=128&d=identicon&r=PG", "display_name": "V&#245; Quang H&#242;a", "link": "https://stackoverflow.com/users/502214/v%c3%b5-quang-h%c3%b2a"}, "edited": false, "score": 0, "creation_date": 1576679571, "post_id": 59394115, "comment_id": 104977723, "body": "I don&#39;t have your full code so I don&#39;t know, but base on the error message I can say that on kotlin MutableList is an interface and it extended from the interface List.   So,  - a MutableList is also a List - a List may not be a MutableList"}, {"owner": {"reputation": 5138, "user_id": 7109162, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eaf2daca9ef0a1751603bd0f707f0139?s=128&d=identicon&r=PG&f=1", "display_name": "XtremeBaumer", "link": "https://stackoverflow.com/users/7109162/xtremebaumer"}, "edited": false, "score": 0, "creation_date": 1576679688, "post_id": 59394115, "comment_id": 104977786, "body": "Wild guess that <code>reverse()</code> and <code>swap()</code> don&#39;t change the overall content of the list. They only change the order. <code>fill()</code> would change the content of the list"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576681087, "post_id": 59394115, "comment_id": 104978622, "body": "Why are you getting a Kotlin compiler error for a Java method?"}, {"owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576681213, "post_id": 59394115, "comment_id": 104978719, "body": "@Tenfour04 I am sorry, but my knowledge of the interop is so bad, that I do not even know if that is supposed to happen or not."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576685223, "post_id": 59394115, "comment_id": 104981067, "body": "Oh, do you mean calling that method from Kotlin doesn&#39;t compile?"}, {"owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576685314, "post_id": 59394115, "comment_id": 104981122, "body": "@Tenfour04 Yes, I will update to clarify."}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1576685694, "post_id": 59394115, "comment_id": 104981331, "body": "The question is how does Kotlin decide whether a Java method takes a <code>List</code> or <code>MutableList</code> parameter. I searched for it and only found lots of talks about nullability, but nothing about the decision for <code>List</code> or <code>MutableList</code>."}, {"owner": {"reputation": 303, "user_id": 10039586, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u042e\u0440\u0438\u0439 \u0411\u0430\u0440\u0438\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/10039586/%d0%ae%d1%80%d0%b8%d0%b9-%d0%91%d0%b0%d1%80%d0%b8%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1576685896, "post_id": 59394115, "comment_id": 104981451, "body": "It&#39;s because of Kotlin heuristic. It is common practice to use constructions such as <code>List&lt;? super T&gt;</code> to add something generic to list. Kotlin changed this construction to <code>List&lt;in T&gt;</code>. But you always can just cast Immutable list to Mutable one and it will compile. For example this code <code>Hm.fill(listOf(1) as MutableList&lt;Int&gt;, 2)</code> will compile."}], "answers": [{"comments": [{"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1576686871, "post_id": 59396132, "comment_id": 104982032, "body": "\u201c<i>then compiler will not let you put anything into that variable</i>\u201d\u2014well except for <code>null</code> or for a value taken from the same list, as <code>swap</code>, <code>sort</code>, <code>reverse</code> or <code>rotate</code> do. And as you said, even when adding didn\u2019t work, removing still did."}], "tags": [], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "is_accepted": true, "score": 4, "last_activity_date": 1579415750, "last_edit_date": 1579415750, "creation_date": 1576685877, "answer_id": 59396132, "question_id": 59394115, "link": "https://stackoverflow.com/questions/59394115/why-are-some-java-functions-able-to-change-an-immutable-kotlin-object/59396132#59396132", "title": "Why are some Java functions able to change an immutable Kotlin object?", "body": "<p><strong>functions that doesn't compile has nothing to do with kotlin but how covariant and contravariant collections are handled by java.</strong></p>\n\n<p>from <a href=\"http://shop.oreilly.com/product/9780596527754.do\" rel=\"nofollow noreferrer\">Java Generics and Collections</a></p>\n\n<blockquote>\n  <p>You cannot put anything into a type declared with an extends\n  wildcard\u2014except for the value null, which belongs to every reference\n  type</p>\n</blockquote>\n\n<p>for example if you have following code.</p>\n\n<pre><code>List&lt;? extends Number&gt; numbers = new ArrayList&lt;Integer&gt;();\n</code></pre>\n\n<p>Then you can do this</p>\n\n<pre><code> numbers.add(null);\n</code></pre>\n\n<p>but if you tried to do any of the following</p>\n\n<pre><code>numbers.set(0, Integer.valueOf(10)); // case 1\nnumbers.set(1, numbers.get(0)); // case 2\n</code></pre>\n\n<p>in <strong>case 1</strong> compiler will not let you do it because there is no way for the compiler to know the exact type of list, in this case its a list of integers in some other case it may be assigned a list of doubles based on some runtime condition.</p>\n\n<p>in <strong>case 2</strong> the compiler is not able to confirm the type of object that is being inserted into the list, and an error is produced. you can solve the problem in case 2 using <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/capture.html\" rel=\"nofollow noreferrer\">Wildcard Capture</a>.</p>\n\n<p><strong>Second is your question about mutating kotlin lists in java methods.</strong></p>\n\n<p>we have to understand that kotlin collections classes are same old java collection classes and kotlin doesn't have its own collections implementation. what kotlin does is that it divides the java collection interfaces into mutable and read only.\nif you create an array list in kotlin and then check its class you will get same java.util.ArrayList</p>\n\n<p>Now given that java doesn't have any notion of mutable list and read only list as kotlin does, there is no way to stop java methods from mutating your read only kotlin list. because for java code that is just a list implementation.</p>\n\n<p><strong>following is the relevant text from book</strong> <a href=\"https://www.manning.com/books/kotlin-in-action\" rel=\"nofollow noreferrer\">Kotlin in Action</a></p>\n\n<blockquote>\n  <p>When you need to call a Java method and pass a collection as an\n  argument, you can do so directly without any extra steps. For example,\n  if you have a Java method that takes a java.util.Collection as a\n  parameter, you can pass any Collection or Mutable Collection value as\n  an argument to that parameter. </p>\n  \n  <p>This has important consequences with  regard to mutability of\n  collections. Because Java doesn\u2019t distinguish between read-only and\n  mutable collections, Java code can modify the collection even if it\u2019s\n  declared as a read-only Collection on the Kotlin side. The Kotlin\n  compiler can\u2019t fully analyze what\u2019s being done to the collection in\n  the Java code, and <strong>therefore there\u2019s no way for Kotlin to reject a\n  call passing a read-only Collection to Java code that modifies it</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 1, "last_activity_date": 1576696907, "last_edit_date": 1576696907, "creation_date": 1576686829, "answer_id": 59396412, "question_id": 59394115, "link": "https://stackoverflow.com/questions/59394115/why-are-some-java-functions-able-to-change-an-immutable-kotlin-object/59396412#59396412", "title": "Why are some Java functions able to change an immutable Kotlin object?", "body": "<p>It should be noted that your version of <code>swap</code> is not compileable. It is the result of decompiling the actual library code that casts the List to a raw type so it can read and write with it despite the wildcard.</p>\n\n<p>The <code>swap</code> method uses a wildcard type, and so there is no limitation between the interface mapping in the interop. Kotlin maps both List and MutableList to Java's List, so it unfortunately allows misuse like this. I suppose it is necessary to avoid preventing use of Java libraries.</p>\n\n<p>Your <code>fill</code> method uses a contravariant (consumer) bounded type <code>&lt;? super T&gt;</code> which is incompatible with Kotlin's List. Kotlin's List is declared with a covariant (producer) type only: <code>List&lt;out T&gt;</code>. So they are not a match for each other.</p>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 59396132, "answer_count": 2, "score": 6, "last_activity_date": 1579415750, "creation_date": 1576679124, "last_edit_date": 1576685697, "question_id": 59394115, "link": "https://stackoverflow.com/questions/59394115/why-are-some-java-functions-able-to-change-an-immutable-kotlin-object", "title": "Why are some Java functions able to change an immutable Kotlin object?", "body": "<p>I was surprised to see that this program even compiles, but the result surprised me even more:</p>\n\n<pre><code>import java.util.Collections.swap\n\nfun main(args: Array&lt;String&gt;) \n{\n    val immutableList = List(2) { it } // contents are [0, 1] \n    swap(immutableList, 0, 1)\n    println(immutableList) // prints [1, 0]\n}\n</code></pre>\n\n<p>The <code>swap</code> function is implemented in the library as:</p>\n\n<pre><code>public static void swap(List&lt;?&gt; list, int i, int j) {\n        list.set(i, list.set(j, list.get(i)));\n    }\n</code></pre>\n\n<p>where the <code>List</code> is a mutable Java list, not an immutable Kotlin one. So I thought that other Java functions will work as well. For instance:</p>\n\n<pre><code>reverse(immutableList)\n</code></pre>\n\n<p>works, but others, such as the <code>fill</code> function, does not even compile:</p>\n\n<pre><code>fill(immutableList, 3)\n</code></pre>\n\n<p>produces the following error message:</p>\n\n<blockquote>\n  <p>Type inference failed: fun  fill(p0: MutableList!,\n  p1: T!): Unit cannot be applied to (List,Int) Type mismatch:\n  inferred type is List but MutableList! was expected</p>\n</blockquote>\n\n<p>The <code>List</code> argument of the <code>fill</code> function however has different type bounds than <code>reverse</code>:</p>\n\n<pre><code>public static &lt;T&gt; void fill(List&lt;? super T&gt; list, T obj)\n\npublic static void reverse(List&lt;?&gt; list)\n</code></pre>\n\n<p>so it seems that without the type bounds, the Java functions can do whatever they want.</p>\n\n<p>Can someone explain how is this possible? Is this by design, or is it just a limitation of the interop?</p>\n"}, {"tags": ["spring-boot", "kotlin", "gson", "swagger-ui", "openapi"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 0, "creation_date": 1585509090, "post_id": 60846304, "comment_id": 107778505, "body": "OK, I tried this and seems be OK. I have different problem with page - I got 404 :). When I go to <a href=\"http://localhost:8062/api/swagger-ui.html\" rel=\"nofollow noreferrer\">localhost:8062/api/swagger-ui.html</a> (another project, another port :D), I have similar redirect problem: &quot;Could not resolve view with name &#39;redirect:/api/swagger-ui/index.html?configUrl=/api-docs/swa&zwnj;&#8203;gger-config&#39; in servlet with name &#39;dispatcherServlet&#39;&quot;. When I go to this link I have: &quot;There was an unexpected error (type=Not Found, status=404).&quot;. <code>&#47;api-docs&#47;</code> is in valid format (pretty JSON), but I don&#39;t have &quot;/api-docs/swagger-config&quot;. I will try downgrade Springdoc OpenApi."}, {"owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 0, "creation_date": 1585656347, "post_id": 60846304, "comment_id": 107832220, "body": "OK. I add  ``` override fun configureViewResolvers(registry: ViewResolverRegistry) =         super.configureViewResolvers(registry.apply { viewResolver(InternalResourceViewResolver()) }) ```  to resolve issue with redirection."}, {"owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "edited": false, "score": 0, "creation_date": 1585656430, "post_id": 60846304, "comment_id": 107832276, "body": "this:   <code>override fun addResourceHandlers(registry: ResourceHandlerRegistry) {         registry.addResourceHandler(&quot;&#47;swagger-ui&#47;**&quot;).addResourceLoc&zwnj;&#8203;ations(&quot;classpath:&#47;M&zwnj;&#8203;ETA-INF&#47;resources&#47;we&zwnj;&#8203;bjars&#47;swagger-ui&#47;3.2&zwnj;&#8203;5.0&#47;&quot;)     } </code>  resolve to view <a href=\"http://localhost:8062/swagger-ui/index.html?configUrl=/api-docs/swagger-config\" rel=\"nofollow noreferrer\">localhost:8062/swagger-ui/index.html?configUrl=/api-docs/&hellip;</a> page"}], "tags": [], "owner": {"reputation": 26, "user_id": 5251740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2U8DS.jpg?s=128&g=1", "display_name": "anselmoalves", "link": "https://stackoverflow.com/users/5251740/anselmoalves"}, "is_accepted": true, "score": 1, "last_activity_date": 1585129554, "creation_date": 1585129554, "answer_id": 60846304, "question_id": 59393191, "link": "https://stackoverflow.com/questions/59393191/endpoint-api-docs-doesnt-work-with-custom-gsonhttpmessageconverter/60846304#60846304", "title": "Endpoint &quot;/api-docs&quot; doesn&#39;t work with custom GsonHttpMessageConverter", "body": "<p>I had the same issue with a project written in Java, and I've just solved that by defining a filter to format my springdoc-openapi json documentation using Gson. I guess you can easily port this workaround to Kotlin.</p>\n\n<pre><code>@Override\npublic void doFilter(final ServletRequest request, final ServletResponse response, final FilterChain chain)\n        throws IOException, ServletException {\n    ByteResponseWrapper byteResponseWrapper = new ByteResponseWrapper((HttpServletResponse) response);\n    ByteRequestWrapper byteRequestWrapper = new ByteRequestWrapper((HttpServletRequest) request);\n\n    chain.doFilter(byteRequestWrapper, byteResponseWrapper);\n\n    String jsonResponse = new String(byteResponseWrapper.getBytes(), response.getCharacterEncoding());\n\n    response.getOutputStream().write((new com.google.gson.JsonParser().parse(jsonResponse).getAsString())\n            .getBytes(response.getCharacterEncoding()));\n}\n\n@Override\npublic void destroy() {\n\n}\n\nstatic class ByteResponseWrapper extends HttpServletResponseWrapper {\n\n    private PrintWriter writer;\n    private ByteOutputStream output;\n\n    public byte[] getBytes() {\n        writer.flush();\n        return output.getBytes();\n    }\n\n    public ByteResponseWrapper(HttpServletResponse response) {\n        super(response);\n        output = new ByteOutputStream();\n        writer = new PrintWriter(output);\n    }\n\n    @Override\n    public PrintWriter getWriter() {\n        return writer;\n    }\n\n    @Override\n    public ServletOutputStream getOutputStream() {\n        return output;\n    }\n}\n\nstatic class ByteRequestWrapper extends HttpServletRequestWrapper {\n\n    byte[] requestBytes = null;\n    private ByteInputStream byteInputStream;\n\n\n    public ByteRequestWrapper(HttpServletRequest request) throws IOException {\n        super(request);\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n\n        InputStream inputStream = request.getInputStream();\n\n        byte[] buffer = new byte[4096];\n        int read = 0;\n        while ((read = inputStream.read(buffer)) != -1) {\n            baos.write(buffer, 0, read);\n        }\n\n        replaceRequestPayload(baos.toByteArray());\n    }\n\n    @Override\n    public BufferedReader getReader() {\n        return new BufferedReader(new InputStreamReader(getInputStream()));\n    }\n\n    @Override\n    public ServletInputStream getInputStream() {\n        return byteInputStream;\n    }\n\n    public void replaceRequestPayload(byte[] newPayload) {\n        requestBytes = newPayload;\n        byteInputStream = new ByteInputStream(new ByteArrayInputStream(requestBytes));\n    }\n}\n\nstatic class ByteOutputStream extends ServletOutputStream {\n\n    private ByteArrayOutputStream bos = new ByteArrayOutputStream();\n\n    @Override\n    public void write(int b) {\n        bos.write(b);\n    }\n\n    public byte[] getBytes() {\n        return bos.toByteArray();\n    }\n\n    @Override\n    public boolean isReady() {\n        return false;\n    }\n\n    @Override\n    public void setWriteListener(WriteListener writeListener) {\n\n    }\n}\n\nstatic class ByteInputStream extends ServletInputStream {\n\n    private InputStream inputStream;\n\n    public ByteInputStream(final InputStream inputStream) {\n        this.inputStream = inputStream;\n    }\n\n    @Override\n    public int read() throws IOException {\n        return inputStream.read();\n    }\n\n    @Override\n    public boolean isFinished() {\n        return false;\n    }\n\n    @Override\n    public boolean isReady() {\n        return false;\n    }\n\n    @Override\n    public void setReadListener(ReadListener readListener) {\n\n    }\n}\n</code></pre>\n\n<p>You will also have to register your filter only for your documentation url pattern.</p>\n\n<pre><code>@Bean\npublic FilterRegistrationBean&lt;DocsFormatterFilter&gt; loggingFilter() {\n    FilterRegistrationBean&lt;DocsFormatterFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n\n    registrationBean.setFilter(new DocsFormatterFilter());\n    registrationBean.addUrlPatterns(\"/v3/api-docs\");\n\n    return registrationBean;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10313787, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RCGiEVB8gwQ/AAAAAAAAAAI/AAAAAAAAHp4/BL2OXEQFqtQ/photo.jpg?sz=128", "display_name": "powermilk", "link": "https://stackoverflow.com/users/10313787/powermilk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2868, "favorite_count": 1, "accepted_answer_id": 60846304, "answer_count": 1, "score": 4, "last_activity_date": 1612785299, "creation_date": 1576676100, "last_edit_date": 1612785299, "question_id": 59393191, "link": "https://stackoverflow.com/questions/59393191/endpoint-api-docs-doesnt-work-with-custom-gsonhttpmessageconverter", "title": "Endpoint &quot;/api-docs&quot; doesn&#39;t work with custom GsonHttpMessageConverter", "body": "<p>I migrated from Springfox Swagger to Springdoc OpenApi. I have added few lines in my configuration about springdoc:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>springdoc:\n  pathsToMatch: /api/**\n  api-docs:\n    path: /api-docs\n  swagger-ui:\n    path: /swagger-ui.html\n</code></pre>\n<p>In configuration class <code>MainConfig.kt</code> I have following code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val customGson: Gson = GsonBuilder()\n        .registerTypeAdapter(LocalDateTime::class.java, DateSerializer())\n        .registerTypeAdapter(ZonedDateTime::class.java, ZonedDateSerializer())\n        .addSerializationExclusionStrategy(AnnotationExclusionStrategy())\n        .enableComplexMapKeySerialization()\n        .setPrettyPrinting()\n        .create()\n\n    override fun configureMessageConverters(converters: MutableList&lt;HttpMessageConverter&lt;*&gt;&gt;) {\n        converters.add(GsonHttpMessageConverter(customGson))\n    }\n</code></pre>\n<p>When I go to http://localhost:8013/swagger-ui.html (in configuration I have <code>server.port: 8013</code>) the page is not redirect to <code>swagger-ui/index.html?url=/api-docs&amp;validatorUrl=</code>. But this is not  my main problem :). When I go to <code>swagger-ui/index.html?url=/api-docs&amp;validatorUrl=</code> I got page with this information:</p>\n<pre>\nUnable to render this definition\nThe provided definition does not specify a valid version field.\n\nPlease indicate a valid Swagger or OpenAPI version field. Supported version fields are swagger: \"2.0\" and those that match openapi: 3.0.n (for example, openapi: 3.0.0).\n</pre>\n<p>But when I go to http://localhost:8013/api-docs I have this result:</p>\n<pre><code>&quot;{\\&quot;openapi\\&quot;:\\&quot;3.0.1\\&quot;,\\&quot;info\\&quot;:{(...)}}&quot;\n</code></pre>\n<p>I tried using default config and I commented <code>configureMessageConverters()</code> method and result of <code>\\api-docs</code> now looks like normal JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>// 20191218134933\n// http://localhost:8013/api-docs\n\n{\n  &quot;openapi&quot;: &quot;3.0.1&quot;,\n  &quot;info&quot;: {(...)}\n}\n</code></pre>\n<p>I remember when I was using Springfox there was something wrong with serialization and my <code>customGson</code> had additional line: <code>.registerTypeAdapter(Json::class.java, JsonSerializer&lt;Json&gt; { src, _, _ -&gt; JsonParser.parseString(src.value()) })</code></p>\n<p>I was wondering that I should have special <code>JsonSerializer</code>. After debugging my first thought was leading to <code>OpenApi</code> class in <code>io.swagger.v3.oas.models</code> package. I added this code: <code>.registerTypeAdapter(OpenAPI::class.java, JsonSerializer&lt;OpenAPI&gt; { _, _, _ -&gt; JsonParser.parseString(&quot;&quot;) })</code> to <code>customGson</code> and nothing changed... So, I was digging deeper...</p>\n<p>After when I ran my Swagger tests:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@EnableAutoConfiguration\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\n@ExtendWith(SpringExtension::class)\n@ActiveProfiles(&quot;test&quot;)\nclass SwaggerIntegrationTest(@Autowired private val mockMvc: MockMvc) {\n    @Test\n    fun `should display Swagger UI page`() {\n        val result = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/swagger-ui/index.html&quot;))\n                .andExpect(status().isOk)\n                .andReturn()\n\n        assertTrue(result.response.contentAsString.contains(&quot;Swagger UI&quot;))\n    }\n\n    @Disabled(&quot;Redirect doesn't work. Check it later&quot;)\n    @Test\n    fun `should display Swagger UI page with redirect`() {\n        mockMvc.perform(MockMvcRequestBuilders.get(&quot;/swagger-ui.html&quot;))\n                .andExpect(status().isOk)\n                .andExpect(MockMvcResultMatchers.content().contentTypeCompatibleWith(MediaType.TEXT_HTML))\n    }\n\n    @Test\n    fun `should get api docs`() {\n        mockMvc.perform(MockMvcRequestBuilders.get(&quot;/api-docs&quot;))\n                .andExpect(status().isOk)\n                .andExpect(MockMvcResultMatchers.content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON))\n                .andExpect(MockMvcResultMatchers.jsonPath(&quot;\\$.openapi&quot;).exists())\n    }\n}\n</code></pre>\n<p>I saw in console this:</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = GET\n      Request URI = /api-docs\n       Parameters = {}\n          Headers = []\n             Body = null\n    Session Attrs = {}\n\nHandler:\n             Type = org.springdoc.api.OpenApiResource\n           Method = org.springdoc.api.OpenApiResource#openapiJson(HttpServletRequest, String)\n</code></pre>\n<p>Next I check <code>openapiJson</code> in <code>OpenApiResource</code> and...</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Operation(hidden = true)\n    @GetMapping(value = API_DOCS_URL, produces = MediaType.APPLICATION_JSON_VALUE)\n    public String openapiJson(HttpServletRequest request, @Value(API_DOCS_URL) String apiDocsUrl)\n            throws JsonProcessingException {\n        calculateServerUrl(request, apiDocsUrl);\n        OpenAPI openAPI = this.getOpenApi();\n        return Json.mapper().writeValueAsString(openAPI);\n    }\n</code></pre>\n<p>OK, Jackson... I have disabled Jackson by <code>@EnableAutoConfiguration(exclude = [(JacksonAutoConfiguration::class)])</code> because I (and my colleagues) prefer GSON, but it doesn't explain why serialization go wrong after adding custom <code>GsonHttpMessageConverter</code>. I have no idea what I made bad. This <code>openapiJson()</code> is endpoint and maybe it mess something... I don't know. I haven't any idea. Did you have a similar problem? Can you give some advice or hint?</p>\n<p>PS. Sorry for my bad English :).</p>\n"}, {"tags": ["kotlin", "foreach", "return"], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "edited": false, "score": 0, "creation_date": 1576676259, "post_id": 59393110, "comment_id": 104975897, "body": "thaank you, tried with find, this is better, much thanks"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "edited": false, "score": 0, "creation_date": 1576676328, "post_id": 59393110, "comment_id": 104975934, "body": "<code>find</code> uses <code>firstOrNull</code>: <code>public inline fun &lt;T&gt; Iterable&lt;T&gt;.find(predicate: (T) -&gt; Boolean): T? {     return firstOrNull(predicate) }</code>"}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 3, "last_activity_date": 1576675801, "creation_date": 1576675801, "answer_id": 59393110, "question_id": 59392931, "link": "https://stackoverflow.com/questions/59392931/return-single-value-from-foreach-kotlin/59393110#59393110", "title": "Return single value from forEach kotlin", "body": "<p>You can do it with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/first-or-null.html\" rel=\"nofollow noreferrer\"><code>firstOrNull</code></a> like this:</p>\n\n<pre><code>val asd = listOfStuff.firstOrNull { it.name == name }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9757074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818f1da39798ddcd7cd8fea11ed59dab?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Brunner", "link": "https://stackoverflow.com/users/9757074/sebastian-brunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1579524431, "last_edit_date": 1579524431, "creation_date": 1576676135, "answer_id": 59393202, "question_id": 59392931, "link": "https://stackoverflow.com/questions/59392931/return-single-value-from-foreach-kotlin/59393202#59393202", "title": "Return single value from forEach kotlin", "body": "<p>Have you tried using the <code>Array.find</code> function?</p>\n\n<p>You can find more information here: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/index.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/index.html</a></p>\n\n<p>In your example you should get the element with: </p>\n\n<pre><code>val asd = listOfStuff.find(name) \n</code></pre>\n\n<p>I'm not sure how your array looks like. But it seems like you have multiple objects with properties (name). Then you probably need to do something like: </p>\n\n<pre><code>val result: asd? = listOfStuff.flatMap { it.name }.firstOrNull { it.name == \"name\" }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1576676852, "post_id": 59393204, "comment_id": 104976223, "body": "<code>find</code> and <code>firstOrNull</code> do exactly the same thing. <code>find</code> is a <a href=\"https://youtrack.jetbrains.com/issue/KT-5185\" rel=\"nofollow noreferrer\">controversial case of redundancy</a> in the standard lib to make the function easier to find for people coming from certain functional languages."}, {"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576676952, "post_id": 59393204, "comment_id": 104976281, "body": "@Tenfour04 Thanks, didn&#39;t know... Then my answer is not that worse than the accepted one ;-)"}], "tags": [], "owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "is_accepted": false, "score": 1, "last_activity_date": 1576676145, "creation_date": 1576676145, "answer_id": 59393204, "question_id": 59392931, "link": "https://stackoverflow.com/questions/59392931/return-single-value-from-foreach-kotlin/59393204#59393204", "title": "Return single value from forEach kotlin", "body": "<p>You can <code>find</code> elements matching a given condition, like this:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    val listOfStuff = listOf(\"1\", \"2\", \"3\", \"4\", \"5\")\n\n    val asd = listOfStuff.find { it == \"1\"}\n\n    print(asd)\n}\n</code></pre>\n\n<p>Output will just be <code>1</code>.</p>\n\n<p>Note that this will find the first value matching the condition or return <code>null</code> if the element is cannot be found, so the answer given by @forpas is better if you don't know for sure the element is present.</p>\n"}], "owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59393110, "answer_count": 3, "score": 1, "last_activity_date": 1579524431, "creation_date": 1576675072, "last_edit_date": 1576675796, "question_id": 59392931, "link": "https://stackoverflow.com/questions/59392931/return-single-value-from-foreach-kotlin", "title": "Return single value from forEach kotlin", "body": "<p>Im wondering, whats the best way to accomplish following:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val asd = listOfStuff.forEach {\n    if ( it.name == name ) return it\n}\n</code></pre>\n\n<p>so that asd will be first value of list where <code>it.name equals name</code></p>\n\n<p>I know there is multiple ways, but since im using kotlin, why not go kotlin way..\nIm just having hard time finding right words to google this problem.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576670192, "post_id": 59391416, "comment_id": 104972833, "body": "Can you show a little more code? How does the type of <code>state</code> look?"}, {"owner": {"reputation": 1807, "user_id": 2399348, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/51c9e5205478e227f330904322bfc340?s=128&d=identicon&r=PG", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/2399348/jeroen"}, "edited": false, "score": 0, "creation_date": 1576670243, "post_id": 59391416, "comment_id": 104972857, "body": "It&#39;s either Java or Kotlin, not both."}, {"owner": {"reputation": 1680, "user_id": 8112679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f9a6f2f75be66f66fe5cb7ced1e0be?s=128&d=identicon&r=PG", "display_name": "Harshvardhan Joshi", "link": "https://stackoverflow.com/users/8112679/harshvardhan-joshi"}, "edited": false, "score": 0, "creation_date": 1576670541, "post_id": 59391416, "comment_id": 104972999, "body": "why do you need <code>while</code> here? By looking at this code, it seems to be updating the value of <code>previousState</code> only once. If the code is executed repetitively, then just use <code>if</code> instead of <code>while</code>."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 1680, "user_id": 8112679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f9a6f2f75be66f66fe5cb7ced1e0be?s=128&d=identicon&r=PG", "display_name": "Harshvardhan Joshi", "link": "https://stackoverflow.com/users/8112679/harshvardhan-joshi"}, "edited": false, "score": 1, "creation_date": 1576677327, "post_id": 59391416, "comment_id": 104976472, "body": "@HarshvardhanJoshi It appears to be walking through something like a linked list."}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "reply_to_user": {"reputation": 1807, "user_id": 2399348, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/51c9e5205478e227f330904322bfc340?s=128&d=identicon&r=PG", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/2399348/jeroen"}, "edited": false, "score": 1, "creation_date": 1576682470, "post_id": 59391416, "comment_id": 104979420, "body": "@JeroenJK, probably <code>Java</code> was there to specify that it&#39;s <code>Kotlin-on-JVM</code>. Not <code>JavaScript</code> or <code>LLVM</code> versions."}], "answers": [{"tags": [], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "is_accepted": false, "score": 1, "last_activity_date": 1576670443, "creation_date": 1576670443, "answer_id": 59391607, "question_id": 59391416, "link": "https://stackoverflow.com/questions/59391416/how-to-avoid-while-in-kotlin/59391607#59391607", "title": "How to avoid while in kotlin?", "body": "<p>I believe something like this will work out:</p>\n\n<pre><code>val seq = generateSequence(state.previousState) { previousState -&gt;\n  previousState.previousState\n}\nval result = seq.firstOrNull { it::class == searchClass }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10948164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02f59cbcfdb3c829b8bef75f544bd33c?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041d\u0438\u043a\u043f\u0443\u043f", "link": "https://stackoverflow.com/users/10948164/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9d%d0%b8%d0%ba%d0%bf%d1%83%d0%bf"}, "edited": false, "score": 0, "creation_date": 1576677167, "post_id": 59392776, "comment_id": 104976387, "body": "In <code>Java</code>, for example, we don&#39;t have tail recursion,"}, {"owner": {"reputation": 43, "user_id": 10948164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02f59cbcfdb3c829b8bef75f544bd33c?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041d\u0438\u043a\u043f\u0443\u043f", "link": "https://stackoverflow.com/users/10948164/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9d%d0%b8%d0%ba%d0%bf%d1%83%d0%bf"}, "edited": false, "score": 0, "creation_date": 1576678046, "post_id": 59392776, "comment_id": 104976874, "body": "I meant tail recursion optimization."}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "reply_to_user": {"reputation": 43, "user_id": 10948164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02f59cbcfdb3c829b8bef75f544bd33c?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041d\u0438\u043a\u043f\u0443\u043f", "link": "https://stackoverflow.com/users/10948164/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9d%d0%b8%d0%ba%d0%bf%d1%83%d0%bf"}, "edited": false, "score": 0, "creation_date": 1576682622, "post_id": 59392776, "comment_id": 104979517, "body": "@\u0412\u0430\u0441\u0438\u043b\u0438\u0439\u041d\u0438\u043a\u043f\u0443\u043f *<code>JVM</code>, not <code>Java</code>, also, look at this: <a href=\"https://medium.com/coding-blocks/tail-call-optimization-in-jvm-with-kotlin-ebdf90b34ec9\" rel=\"nofollow noreferrer\">medium.com/coding-blocks/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": false, "score": 1, "last_activity_date": 1576741112, "last_edit_date": 1576741112, "creation_date": 1576674443, "answer_id": 59392776, "question_id": 59391416, "link": "https://stackoverflow.com/questions/59391416/how-to-avoid-while-in-kotlin/59392776#59392776", "title": "How to avoid while in kotlin?", "body": "<p>What is <em>kotlin way</em>?<br>\nMake your algorithm a recursive function, and it will work in any language without <code>while</code>:</p>\n\n<pre><code>private tailrec fun previousState(state: State?) : State? {\n    if(state != null &amp;&amp; state::class != searchClass) {\n        return previousState(state.previousState)\n    }\n\n    return state\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10948164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02f59cbcfdb3c829b8bef75f544bd33c?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041d\u0438\u043a\u043f\u0443\u043f", "link": "https://stackoverflow.com/users/10948164/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9d%d0%b8%d0%ba%d0%bf%d1%83%d0%bf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576741112, "creation_date": 1576669830, "last_edit_date": 1576677168, "question_id": 59391416, "link": "https://stackoverflow.com/questions/59391416/how-to-avoid-while-in-kotlin", "title": "How to avoid while in kotlin?", "body": "<p>I have this expression:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>var previousState = state.previousState\nwhile (previousState != null &amp;&amp; previousState::class != searchClass) {\n    previousState = previousState.previousState\n}\n</code></pre>\n\n<p>Can I do it without <code>while</code> and <code>var</code> in kotlin way?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "owner": {"reputation": 1896, "user_id": 3952994, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c2fc6a69e19964667f321ec499bdb18c?s=128&d=identicon&r=PG&f=1", "display_name": "HungUnicorn", "link": "https://stackoverflow.com/users/3952994/hungunicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1576761184, "creation_date": 1576667344, "last_edit_date": 1576761184, "question_id": 59390735, "link": "https://stackoverflow.com/questions/59390735/after-upgrade-2019-2-3-to-2019-3-running-kotlin-in-intellij-debugger-gets-stuck", "title": "After upgrade 2019.2.3 to 2019.3, running kotlin in Intellij Debugger gets stuck in Collection data", "body": "<p>I have a <code>test.kts</code> to show the issue I have:</p>\n\n<pre><code>fun solution(A: IntArray): Int {\n    if (A.distinct().size != A.size) {\n        return 0\n    }\n    val expected = (A.size.toDouble()) * (A.size.toDouble() + 1) / 2\n    val real = A.map { it.toDouble() }.sum()\n\n    return if (expected == real) 1 else 0\n}\n\n\ncheck(0 == solution(listOf(1, 4, 1).toIntArray()))\n</code></pre>\n\n<p>In Debugger mode, there is a break point at <code>return if (expected == real) 1 else 0</code></p>\n\n<p>If wanted to check <code>A</code>, it shows <code>collecting data</code> forever.\nSame when I want to evaluate <code>expected == real</code></p>\n\n<p>Basically what I saw is as the following picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/53cGB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53cGB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Based on what I found on internet, I have tried:</p>\n\n<ul>\n<li>disable and enable kotlin plugin</li>\n<li>invalidate cache and restart</li>\n<li>remove <code>.idea</code> and open the project</li>\n<li>rebuild project</li>\n<li>restart computer</li>\n<li>disable all plugins and enable again</li>\n</ul>\n\n<p>None of them work. When using java project, the debugger works fine.</p>\n\n<p>Versions:</p>\n\n<ul>\n<li>intellij: 2019.3</li>\n<li>java: 11.0.5.hs-adpt</li>\n<li>kotlin: 1.3.60-release-IJ2019.3-1</li>\n</ul>\n"}, {"tags": ["android", "kotlin", "android-10.0", "storage-access-framework"], "comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576667731, "post_id": 59390627, "comment_id": 104971664, "body": "Any problems? Any questions? Put all info in your post please."}, {"owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576668104, "post_id": 59390627, "comment_id": 104971827, "body": "@blackapps updated the question . I wanted to know how to use SAF to save files in Download folder ."}, {"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576668154, "post_id": 59390627, "comment_id": 104971851, "body": "You should put your problems and questions in your post. Not in comments. And certainly not only in the subject."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1576670952, "post_id": 59390627, "comment_id": 104973208, "body": "&quot;I wanted to know how to use SAF to save files in Download folder&quot; -- that is not possible, insofar as you do not control where the content gets stored. The user does. <code>ACTION_CREATE_DOCUMENT</code> would let the <i>user</i> control which of the <i>user&#39;s</i> locations on the <i>user&#39;s</i> device or the <i>user&#39;s</i> cloud services the <i>user</i> wants you to store the <i>user&#39;s</i> content. That may or may not be something named <code>Download</code>."}, {"owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1576823408, "post_id": 59390627, "comment_id": 105028209, "body": "@CommonsWare .. thank you !  I am intrigued how gmail is saving attachments directly to download folders ?There isn&#39;t any kind of popup to select where to save attachments ? Are they not using SAF ?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1576843292, "post_id": 59390627, "comment_id": 105035930, "body": "My guess is that they are using <code>MediaStore</code>. That gained a new capability of working with <code>Downloads</code> in Android 10."}, {"owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "edited": false, "score": 0, "creation_date": 1609353677, "post_id": 59390627, "comment_id": 115822764, "body": "You should use <code>MediaStore</code> nowadays."}], "answers": [{"tags": [], "owner": {"reputation": 13508, "user_id": 3922207, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/ktCUi.jpg?s=128&g=1", "display_name": "Anggrayudi H", "link": "https://stackoverflow.com/users/3922207/anggrayudi-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1609348699, "creation_date": 1609348699, "answer_id": 65510940, "question_id": 59390627, "link": "https://stackoverflow.com/questions/59390627/how-to-save-files-to-download-folder-using-storage-access-framework-android/65510940#65510940", "title": "How to Save files to download folder using Storage Access Framework android?", "body": "<p>You can try <code>DocumentFileCompat#createDownloadWithMediaStoreFallback()</code> in <a href=\"https://github.com/anggrayudi/SimpleStorage\" rel=\"nofollow noreferrer\">Simple Storage</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val uri = DocumentFileCompat.createDownloadWithMediaStoreFallback(applicationContext, FileDescription(filename))\nval output = uri?.openOutputStream(applicationContext)\nval input = // get input stream from Response&lt;ResponseBody&gt;\n// then, write input stream to output stream\n</code></pre>\n<p>In Android 10, accessing files in <code>Download</code> directory requires URI, instead of direct file path.</p>\n"}], "owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 860, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1609348699, "creation_date": 1576666994, "last_edit_date": 1576667969, "question_id": 59390627, "link": "https://stackoverflow.com/questions/59390627/how-to-save-files-to-download-folder-using-storage-access-framework-android", "title": "How to Save files to download folder using Storage Access Framework android?", "body": "<p>I am downloading file from server ,and saving to download folder in android ,accessing file path by following way to save</p>\n\n<pre><code> Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\n</code></pre>\n\n<p>is depreceated in Android Q  ,So I have to use Storage access framework .</p>\n\n<pre><code> fun downloadFile(url: String, originalFileName: String) {\n    mDownloadDisposable.add(\n            mRCloudRepository.downloadFile(url)\n                    .flatMap(object : Function1&lt;Response&lt;ResponseBody&gt;, Flowable&lt;File&gt;&gt; {\n                        override fun invoke(p1: Response&lt;ResponseBody&gt;): Flowable&lt;File&gt; {\n                            return Flowable.create({\n                                try {\n                                    val file = File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).absoluteFile, originalFileName)\n                                    val sink = file.sink().buffer() \n                                    sink.writeAll(p1.body()!!.source())\n                                    sink.close()\n                                    it.onNext(file)\n                                    it.onComplete()\n                                } catch (e: IOException) {\n                                    e.printStackTrace()\n                                    it.onError(e)\n                                }\n                            }, BackpressureStrategy.BUFFER)\n                        }\n\n                    })\n                    .subscribeOn(mIoScheduler)\n                    .observeOn(mUiScheduler)\n                    .subscribe(\n                            {\n                                cancelNotification()\n                                val contentIntent: PendingIntent = PendingIntent.getActivity(mContext, NotificationBuilder.NOTIFICATION_DOWNLOAD_ID, getOpenFileIntent(it), PendingIntent.FLAG_CANCEL_CURRENT)\n                                NotificationBuilder.showDownloadedNotification(mContext!!, 2, \"Downloaded $originalFileName \", \"\", contentIntent)\n                            }, {\n                        cancelNotification()\n                        it.printStackTrace()\n                    }\n                    )\n    )\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "edited": false, "score": 0, "creation_date": 1576667333, "post_id": 59390599, "comment_id": 104971452, "body": "Each lambda is functional interface. <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 6948201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qUMwN.png?s=128&g=1", "display_name": "R3J3CT3D", "link": "https://stackoverflow.com/users/6948201/r3j3ct3d"}, "edited": false, "score": 0, "creation_date": 1576668311, "post_id": 59390842, "comment_id": 104971914, "body": "That&#39;s it ! Thank you :)"}, {"owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "reply_to_user": {"reputation": 186, "user_id": 6948201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qUMwN.png?s=128&g=1", "display_name": "R3J3CT3D", "link": "https://stackoverflow.com/users/6948201/r3j3ct3d"}, "edited": false, "score": 0, "creation_date": 1576668481, "post_id": 59390842, "comment_id": 104971981, "body": "@R3J3CT3D you are welcome! Please note, that the method above simply passes objects of <b>Functional Interface</b> to initialize method. In my answer I declared them anonymously, whereas they can also be declared explicitly. You should read about it more"}], "tags": [], "owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1576668098, "last_edit_date": 1576668098, "creation_date": 1576667698, "answer_id": 59390842, "question_id": 59390599, "link": "https://stackoverflow.com/questions/59390599/how-to-call-function-that-takes-callbacks-as-parameters-in-java/59390842#59390842", "title": "How to call function that takes callbacks as parameters in Java", "body": "<p>Try this (put the implementation/logic of your functions instead of dots)</p>\n\n<pre><code>client.initialize((providers) -&gt; {...}, (error) -&gt; {...}); \n</code></pre>\n\n<p>Note that your first method should return an instance of <code>Success&lt;List&lt;Provider&gt;&gt;</code> and your second lambda should return <code>Failure&lt;ReachFiveError&gt;</code>. </p>\n"}], "owner": {"reputation": 186, "user_id": 6948201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qUMwN.png?s=128&g=1", "display_name": "R3J3CT3D", "link": "https://stackoverflow.com/users/6948201/r3j3ct3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59390842, "answer_count": 1, "score": 0, "last_activity_date": 1576668098, "creation_date": 1576666893, "question_id": 59390599, "link": "https://stackoverflow.com/questions/59390599/how-to-call-function-that-takes-callbacks-as-parameters-in-java", "title": "How to call function that takes callbacks as parameters in Java", "body": "<p>I'm trying to implement <a href=\"https://developer.reach5.co/guides/installation/android/\" rel=\"nofollow noreferrer\">ReachFive</a> in my android app and I have to call the initialize method.</p>\n\n<p>This is how they call it in the documentation:</p>\n\n<pre><code>    // Initialize the ReachFive client\n    client.initialize({ providers -&gt;\n        // On success, do something with the retrieved list of providers registered for this ReachFive client\n        // ...\n    }, {\n        // On failure, log the error message returned by the ReachFive client\n        Log.d(\"Reach5_MainActivity\", \"ReachFive init ${it.message}\")\n    })\n</code></pre>\n\n<p>But this code sample is in Kotlin and I have no idea how to call the <code>initialize</code> method in java.</p>\n\n<p>Edit: This is the <code>initialize</code> function find inside the SDK code:</p>\n\n<pre><code>fun initialize(\n    success: Success&lt;List&lt;Provider&gt;&gt; = {},\n    failure: Failure&lt;ReachFiveError&gt; = {}\n): ReachFive {\n    reachFiveApi\n        .clientConfig(mapOf(\"client_id\" to sdkConfig.clientId))\n        .enqueue(\n            ReachFiveApiCallback&lt;ClientConfigResponse&gt;(\n                success = { clientConfig -&gt;\n                    scope = clientConfig.scope.split(\" \").toSet()\n                    providersConfigs(success, failure)\n                },\n                failure = failure\n            )\n        )\n\n    return this\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10364676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2a87c8b39b05dd0dd3eaf34aa4a649c?s=128&d=identicon&r=PG&f=1", "display_name": "petarov", "link": "https://stackoverflow.com/users/10364676/petarov"}, "edited": false, "score": 0, "creation_date": 1576684903, "post_id": 59391945, "comment_id": 104980860, "body": "Excellent! Exactly what I was looking for. Thanks a lot!"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 2, "last_activity_date": 1576671749, "creation_date": 1576671749, "answer_id": 59391945, "question_id": 59390509, "link": "https://stackoverflow.com/questions/59390509/a-shorter-way-to-transform-enumvalues-to-a-multi-value-map/59391945#59391945", "title": "A shorter way to transform enumValues to a multi-value map", "body": "<p>That's good, solid code (especially if you're not experienced in Kotlin): good use of types, and the <code>getOrPut()</code> function.\u00a0 (The only tweak I'd suggest would be to change <code>hashMapOf()</code> to <code>mutableMapOf()</code>, since you don't care about the exact type of map.\u00a0 You could also replace the <code>add()</code> call with <code>+=</code> operator, though that's more disputable.)</p>\n\n<p>However, there's a shorter alternative in a more functional style:</p>\n\n<pre><code>fun androidPermissionsByCategory(): Map&lt;String, List&lt;String&gt;&gt;\n    = enumValues&lt;AndroidPermission&gt;()\n        .groupBy({ it.permissionGroup }, { it.value() })\n</code></pre>\n\n<p><sub>(Disclaimer: I don't have Android libs, so I can't test this exactly.)</sub></p>\n\n<p>This uses the standard library's <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/group-by.html\" rel=\"nofollow noreferrer\"><code>groupBy()</code></a> function, which does exactly what you want: it compares items (using a key-selector lambda you provide), and uses it to create a multimap from them.</p>\n\n<p>Here we're using the enum's <code>permissionGroup</code> field as the key.</p>\n\n<p>We're also using the optional second parameter to transform the values in the multimap, in this case getting their <code>value()</code>.</p>\n\n<p>You'll find that Kotlin has functional alternatives to many of the common imperative patterns for constructing and transforming maps, lists, and similar structures; these are often more concise, more declarative, and easier to read.\u00a0 Any time you find yourself looping over a list or similar, it's worth asking whether there's a better way.\u00a0\u00a0(As you have here!\u00a0 Your intuition is clearly working well :-)</p>\n"}], "owner": {"reputation": 113, "user_id": 10364676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2a87c8b39b05dd0dd3eaf34aa4a649c?s=128&d=identicon&r=PG&f=1", "display_name": "petarov", "link": "https://stackoverflow.com/users/10364676/petarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59391945, "answer_count": 1, "score": 0, "last_activity_date": 1576671749, "creation_date": 1576666543, "question_id": 59390509, "link": "https://stackoverflow.com/questions/59390509/a-shorter-way-to-transform-enumvalues-to-a-multi-value-map", "title": "A shorter way to transform enumValues to a multi-value map", "body": "<p>New to Kotlin. I was thinking if there is a shorter way to write the following piece of code. It means to categorize enum values into a multi-value map.</p>\n\n<pre><code>fun androidPermissionsByCategory(): Map&lt;String, List&lt;String&gt;&gt; {\n    val result = hashMapOf&lt;String, MutableList&lt;String&gt;&gt;()\n    enumValues&lt;AndroidPermission&gt;().onEach {\n        result.getOrPut(it.permissionGroup, { mutableListOf() }).add(it.value())\n    }\n    return result\n}\n</code></pre>\n\n<p>Suggestions?</p>\n"}, {"tags": ["kotlin", "constructor"], "answers": [{"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1576668955, "post_id": 59390485, "comment_id": 104972224, "body": "Indeed.  The whole point of a constructor is to set up each instance, to get it into a consistent state.  Both Java and Kotlin ensure that a constructor is always called (at each level), so that the whole object starts off in a consistent state."}], "tags": [], "owner": {"reputation": 16518, "user_id": 1515052, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87d59872c339c0c66860831e77d764c0?s=128&d=identicon&r=PG", "display_name": "Simulant", "link": "https://stackoverflow.com/users/1515052/simulant"}, "is_accepted": false, "score": 1, "last_activity_date": 1576666459, "creation_date": 1576666459, "answer_id": 59390485, "question_id": 59390294, "link": "https://stackoverflow.com/questions/59390294/what-should-i-do-if-i-dont-want-a-devired-class-call-base-classs-constructor-i/59390485#59390485", "title": "What should I do if I don&#39;t want a devired class call base class&#39;s constructor in Kotlin?", "body": "<p>this is not possible. The constructor of the derived class has to call (any) constructor of the base class in order to initialise the content(fields) of the base class.</p>\n\n<p>This is also the same case in Java. Just that the default constructor is called by default (if no parameters are provided in the constructor), but if you have to choose between constructors with parameters, you always have to call them explicitly, because you have to choose which values to pass into the constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9484026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OtIII.jpg?s=128&g=1", "display_name": "omega1100100", "link": "https://stackoverflow.com/users/9484026/omega1100100"}, "edited": false, "score": 1, "creation_date": 1576683306, "post_id": 59393841, "comment_id": 104979947, "body": "C\u1ea3m \u01a1n by the way."}], "tags": [], "owner": {"reputation": 2039, "user_id": 502214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e26ce1fd9b907aa156d7e8e2cdd6401?s=128&d=identicon&r=PG", "display_name": "V&#245; Quang H&#242;a", "link": "https://stackoverflow.com/users/502214/v%c3%b5-quang-h%c3%b2a"}, "is_accepted": false, "score": 2, "last_activity_date": 1576678153, "creation_date": 1576678153, "answer_id": 59393841, "question_id": 59390294, "link": "https://stackoverflow.com/questions/59390294/what-should-i-do-if-i-dont-want-a-devired-class-call-base-classs-constructor-i/59393841#59393841", "title": "What should I do if I don&#39;t want a devired class call base class&#39;s constructor in Kotlin?", "body": "<p>You actually can do it</p>\n\n<pre><code>import sun.misc.Unsafe\n\nopen class Base(p: Int){\n    init {\n        println(\"Base\")\n    }\n}\n\nclass Derived(p: Int) : Base(p){\n    init {\n        println(\"Derived\")\n    }\n}\n\nfun main() {\n    val unsafe = Unsafe::class.java.getDeclaredField(\"theUnsafe\").apply {\n        isAccessible = true\n    }.get(null) as Unsafe\n\n    val x = unsafe.allocateInstance(Derived::class.java)\n\n    println(\"X = $x\")\n}\n</code></pre>\n\n<p>But don't, this solution is a low-level mechanism that was designed to be used only by the core Java library and not by standard users. You will break the logic of OOP if you use it.</p>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 0, "last_activity_date": 1576697543, "creation_date": 1576697543, "answer_id": 59398936, "question_id": 59390294, "link": "https://stackoverflow.com/questions/59390294/what-should-i-do-if-i-dont-want-a-devired-class-call-base-classs-constructor-i/59398936#59398936", "title": "What should I do if I don&#39;t want a devired class call base class&#39;s constructor in Kotlin?", "body": "<p>You must always call a constructor of a super-class to ensure that the foundation of the class is initialized. But you can work around your issue by providing a no-arg constructor in the base class. Something like this:</p>\n\n<pre><code>open class Base(p: Int?){\n    val p: Int? = p\n    constructor(): this(null)\n}\n\nclass Derived(p: Int) : Base()\n</code></pre>\n\n<p>The way you handle which constructor of the base class is default and which parameters are nullable, etc. will depend highly on the specific case.</p>\n"}], "owner": {"reputation": 39, "user_id": 9484026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OtIII.jpg?s=128&g=1", "display_name": "omega1100100", "link": "https://stackoverflow.com/users/9484026/omega1100100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576697543, "creation_date": 1576665891, "question_id": 59390294, "link": "https://stackoverflow.com/questions/59390294/what-should-i-do-if-i-dont-want-a-devired-class-call-base-classs-constructor-i", "title": "What should I do if I don&#39;t want a devired class call base class&#39;s constructor in Kotlin?", "body": "<p>Is there any way to create an instance of <code>Derived</code> but not call the constructor of <code>Base</code>?</p>\n\n<pre><code>open class Base(p: Int)\n\nclass Derived(p: Int) : Base(p)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dialog", "android-progressbar"], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1576671424, "post_id": 59391144, "comment_id": 104973455, "body": "Your code work with no error, but after dialog dismiss the authentication activity still persist and it get a time to go to main activity"}, {"owner": {"reputation": 26, "user_id": 12460481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/043ad0cc13d220886f923ab1569a3b32?s=128&d=identicon&r=PG&f=1", "display_name": "sweid337", "link": "https://stackoverflow.com/users/12460481/sweid337"}, "reply_to_user": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1576739412, "post_id": 59391144, "comment_id": 104997783, "body": "@Lina OK. You can not dismiss the dialog if result is successful. And after the transition to the main activity, call the method finish() at the authentication activity."}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1576740864, "post_id": 59391144, "comment_id": 104998320, "body": "The problem when the call of  the finish() method,the activity finish and still wait a time to open the main activity, It&#39;s not a solution"}, {"owner": {"reputation": 26, "user_id": 12460481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/043ad0cc13d220886f923ab1569a3b32?s=128&d=identicon&r=PG&f=1", "display_name": "sweid337", "link": "https://stackoverflow.com/users/12460481/sweid337"}, "reply_to_user": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1576743600, "post_id": 59391144, "comment_id": 104999363, "body": "@Lina Have you moved the dialog.dismiss() call to the else statement?"}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 0, "creation_date": 1576744686, "post_id": 59391144, "comment_id": 104999810, "body": "Still have a problem, ,the activity finish and still wait a time to open the main activity"}], "tags": [], "owner": {"reputation": 26, "user_id": 12460481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/043ad0cc13d220886f923ab1569a3b32?s=128&d=identicon&r=PG&f=1", "display_name": "sweid337", "link": "https://stackoverflow.com/users/12460481/sweid337"}, "is_accepted": false, "score": 0, "last_activity_date": 1576743906, "last_edit_date": 1576743906, "creation_date": 1576668806, "answer_id": 59391144, "question_id": 59390121, "link": "https://stackoverflow.com/questions/59390121/dialog-progress-bar-during-the-process-firebaseauthentication-with-kotlin/59391144#59391144", "title": "Dialog Progress Bar during the process FirebaseAuthentication with Kotlin", "body": "<p>Try the following code:</p>\n\n<pre><code>val dialog = Dialog(this)\nval inflate = LayoutInflater.from(this).inflate(R.layout.layout_progress_bar, null)\ndialog.setContentView(inflate)\ndialog.setCancelable(false)\ndialog.window!!.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))\ndialog.show()\nfireBaseAuthentication = FirebaseAuth.getInstance()\nfireBaseAuthentication.signInWithEmailAndPassword(email, password).addOnCompleteListener { task -&gt;\n    if (task.isSuccessful) {\n        ...\n        finish()\n    } else {\n        dialog.dismiss()\n        Toast.makeText(this, \"${task.exception?.message}\", Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p>You must show the dialog before authenticating and dismiss it afterwards. Also, you can\u2019t dismiss the dialog after transition between activities.</p>\n"}], "owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576743906, "creation_date": 1576665271, "question_id": 59390121, "link": "https://stackoverflow.com/questions/59390121/dialog-progress-bar-during-the-process-firebaseauthentication-with-kotlin", "title": "Dialog Progress Bar during the process FirebaseAuthentication with Kotlin", "body": "<p>I create an android app with Kotlin.I use FireBase to authenticate. In the authentication UI,I woukd like to add a ProgressBar during the process FirebaseAuthentication i.e when I click on SignIn Button the progressBar appear until the authentication success. I create a constraint Layout that contains a Progress Bar as the following code :</p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/cp_bg_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@android:color/transparent\"\n .....&gt;\n\n            &lt;ProgressBar\n                android:id=\"@+id/cp_pbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_gravity=\"center\"\n                android:indeterminateTint=\"@color/honey\"\n           ...... /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/cp_title\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n            .... /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>After click on button SignIn, in my authentication activity I put the code to inflate the layout with ProgressBar and then the FirebaseAuthentication with Email and Password :</p>\n\n<pre><code>     val dialog = Dialog(this)\n        val inflate = LayoutInflater.from(this).inflate(R.layout.layout_progress_bar, null)\n        dialog.setContentView(inflate)\n        dialog.setCancelable(false)\n        dialog.window!!.setBackgroundDrawable(\n                ColorDrawable(Color.TRANSPARENT))\n  fireBaseAuthentication = FirebaseAuth.getInstance()\n      fireBaseAuthentication.signInWithEmailAndPassword(email, password).addOnCompleteListener { task -&gt;\n                dialog.show()\n                if (task.isSuccessful) {\n                    fireBaseId = fireBaseAuthentication.currentUser!!.uid\n                    .......\n                } else {\n                    Toast.makeText(this, \"${task.exception?.message}\", Toast.LENGTH_LONG).show()\n                }\n                Handler().postDelayed({dialog.dismiss()},3000)\n</code></pre>\n\n<p>And I get the following error :</p>\n\n<blockquote>\n  <p>E/WindowManager: android.view.WindowLeaked: Activity\n  com.app.honey.activity.user.authentication.Authentication has leaked\n  window DecorView@5287511[Authentication] that was originally added\n  here\n          at android.view.ViewRootImpl.(ViewRootImpl.java:511)\n          at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:346)\n          at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:93)\n          at android.app.Dialog.show(Dialog.java:329)\n          at com.app.honey.activity.user.authentication.Authentication$signIn$1.onComplete(Authentication.kt:96)\n          at com.google.android.gms.tasks.zzj.run(Unknown Source:4)\n          at android.os.Handler.handleCallback(Handler.java:873)\n          at android.os.Handler.dispatchMessage(Handler.java:99)\n          at android.os.Looper.loop(Looper.java:193)\n          at android.app.ActivityThread.main(ActivityThread.java:6669)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n  D/AndroidRuntime: Shutting down VM E/AndroidRuntime: FATAL EXCEPTION:\n  main\n      Process: com.app.honey, PID: 2507\n      java.lang.IllegalArgumentException: View=DecorView@5287511[Authentication] not attached to window manager\n          at android.view.WindowManagerGlobal.findViewLocked(WindowManagerGlobal.java:485)\n          at android.view.WindowManagerGlobal.removeView(WindowManagerGlobal.java:394)\n          at android.view.WindowManagerImpl.removeViewImmediate(WindowManagerImpl.java:124)\n          at android.app.Dialog.dismissDialog(Dialog.java:375)\n          at android.app.Dialog.dismiss(Dialog.java:358)\n          at com.app.honey.activity.user.authentication.Authentication$signIn$1$1.run(Authentication.kt:103)\n          at android.os.Handler.handleCallback(Handler.java:873)\n          at android.os.Handler.dispatchMessage(Handler.java:99)\n          at android.os.Looper.loop(Looper.java:193)\n          at android.app.ActivityThread.main(ActivityThread.java:6669)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n  I want to know what is the problem in my code and How can I correct it.</p>\n</blockquote>\n"}, {"tags": ["android", "android-fragments", "kotlin", "searchview", "android-search"], "answers": [{"tags": [], "owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "is_accepted": false, "score": 0, "last_activity_date": 1576664797, "creation_date": 1576664797, "answer_id": 59389971, "question_id": 59389832, "link": "https://stackoverflow.com/questions/59389832/open-new-activity-for-searchview-when-search-is-clicked/59389971#59389971", "title": "Open new activity for searchview when search is clicked", "body": "<p>there is a method that handles option menu item click it is called </p>\n\n<pre><code>override fun onOptionsItemSelected(item: MenuItem): Boolean {\n    if(item.itemId == R.id.myItemId){\n        startActivity(Intent(applicationContext, searchAcctivity::class.java))\n    }\n    return super.onOptionsItemSelected(item)\n}\n</code></pre>\n\n<p>this code is written in kotlin, it shouldn't be that different in java just press ctrl + o and it should open a list of override methods search for \"onOptionsItemSelected\"</p>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 8864205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d638f59df536e1bcba231a96f3e7d5?s=128&d=identicon&r=PG&f=1", "display_name": "xbass", "link": "https://stackoverflow.com/users/8864205/xbass"}, "is_accepted": false, "score": 0, "last_activity_date": 1597282853, "creation_date": 1597282853, "answer_id": 63386922, "question_id": 59389832, "link": "https://stackoverflow.com/questions/59389832/open-new-activity-for-searchview-when-search-is-clicked/63386922#63386922", "title": "Open new activity for searchview when search is clicked", "body": "<p>I'm not sure what you're trying to do but you can simply pass in the Search query to the intent of the activity at its creation.</p>\n<p>First, add a companion object to your SearchableActivity :</p>\n<pre><code>  companion object {\n        private const val EXTRA_QUERY = &quot;SEARCH_QUERY&quot;\n\n        fun newIntent(context: Context?, query: String): Intent {\n            return Intent(context, SearchableActivity::class.java)\n                .putExtra(EXTRA_QUERY, query)\n        }\n    }\n</code></pre>\n<p>My understanding is that you want to open a new activity with the search query from MainActivity, next thing is handling the intent:</p>\n<pre><code>         private fun handleIntent(intent: Intent) {\n                if (Intent.ACTION_SEARCH == intent.action) {\n                    val query = intent.getStringExtra(EXTRA_QUERY)\n                    Toast.makeText(this@SearchableActivity, &quot;QUERY: $query&quot;, Toast.LENGTH_LONG).show()\n\n            SearchableActivity.newIntent(this, query)            \n    }\n  }\n</code></pre>\n<p>..et voila.</p>\n"}], "owner": {"reputation": 2349, "user_id": 830037, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c570ba170395e39c721461e95553fc96?s=128&d=identicon&r=PG", "display_name": "faizanjehangir", "link": "https://stackoverflow.com/users/830037/faizanjehangir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1597282853, "creation_date": 1576664363, "question_id": 59389832, "link": "https://stackoverflow.com/questions/59389832/open-new-activity-for-searchview-when-search-is-clicked", "title": "Open new activity for searchview when search is clicked", "body": "<p>I want to open a new activity whenever the <code>search icon</code> is clicked on the <code>mainactivity</code>. This new activity called <code>SearchableActivity</code> will handle all the relevant search results in the <code>listview</code>. I have followed the steps described in this <a href=\"https://stackoverflow.com/questions/29540724/start-new-activity-from-searchview\">post</a>. </p>\n\n<p>This is what I currently have:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RbOCO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RbOCO.png\" alt=\"Main activity display\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/I942l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I942l.png\" alt=\"View after search icon is clicked\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/B4R5C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4R5C.png\" alt=\"View after enter is pressed on text query into the search\"></a></p>\n\n<p>I want to open up the <code>SearchableActivity</code> when the user enters into <code>SearchView</code>. </p>\n\n<p>Here is what my code looks like:</p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>     &lt;activity\n            android:name=\".MainActivity\"\n            android:launchMode=\"singleTop\"&gt;\n            &lt;!-- meta tag points to the activity which displays the results --&gt;\n            &lt;meta-data\n                android:name=\"android.app.default_searchable\"\n                android:value=\".SearchableActivity\" /&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=\".SearchableActivity\"\n            android:parentActivityName=\".MainActivity\"&gt;\n            &lt;!-- Parent activity meta-data to support 4.0 and lower --&gt;\n            &lt;meta-data\n                android:name=\"android.support.PARENT_ACTIVITY\"\n                android:value=\".MainActivity\" /&gt;\n            &lt;!-- meta tag and intent filter go into results activity --&gt;\n            &lt;meta-data android:name=\"android.app.searchable\"\n                android:resource=\"@xml/searchable\" /&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.SEARCH\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n</code></pre>\n\n<p><strong>MainActivity</strong></p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n        menuInflater.inflate(R.menu.options_menu, menu)\n        val manager = getSystemService(SEARCH_SERVICE) as SearchManager\n        (menu?.findItem(R.id.search)?.actionView as SearchView).apply {\n            setSearchableInfo(manager.getSearchableInfo(ComponentName(this.context, SearchableActivity::class.java)))\n\n        }\n        return true\n    }\n</code></pre>\n\n<p><strong>SearchableActivity</strong></p>\n\n<pre><code>class SearchableActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_searchable)\n        Toast.makeText(this@SearchableActivity, \"SA created\", Toast.LENGTH_LONG).show()\n        handleIntent(intent)\n    }\n\n    override fun onNewIntent(intent: Intent?) {\n        super.onNewIntent(intent)\n        if (intent !== null)\n            handleIntent(intent)\n    }\n\n    private fun handleIntent(intent: Intent) {\n        if (Intent.ACTION_SEARCH == intent.action) {\n            val query = intent.getStringExtra(SearchManager.QUERY)\n            Toast.makeText(this@SearchableActivity, \"QUERY: $query\", Toast.LENGTH_LONG).show()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["validation", "kotlin", "parameter-passing"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576662270, "post_id": 59388719, "comment_id": 104968885, "body": "You can try to use reflection or delegates as stated in <a href=\"https://stackoverflow.com/questions/53188226/how-to-get-the-name-of-a-variable-in-kotlin\">this question</a>, but I have just tried reflection and received the message <i>references to variables aren&#39;t supported yet</i> on Kotlin playground, may be true... Couldn&#39;t check it out in an IDE."}], "owner": {"reputation": 36698, "user_id": 145989, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0edf9d0f312ec47d27046845580ba4f?s=128&d=identicon&r=PG", "display_name": "Ondra \u017di\u017eka", "link": "https://stackoverflow.com/users/145989/ondra-%c5%bdi%c5%beka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576836400, "creation_date": 1576660348, "last_edit_date": 1576836400, "question_id": 59388719, "link": "https://stackoverflow.com/questions/59388719/kotlin-how-to-get-the-expression-code-passed-to-a-parameter", "title": "Kotlin: How to get the expression (code) passed to a parameter?", "body": "<p>Kotlin has quite a lot of goodies, so I was wondering, if it has the feature, which I have last seen when working with C/C++ macros:</p>\n\n<p>I would like to be able to get the expression passed to a parameter of a called function. This would mostly be used for validation / logging purposes. E.g.:</p>\n\n<pre><code>fun checkNotNull(val value: Any?) {\n    if (value == null)\n        throw IllegalArgumentException(\"${value::passedExpression} is null\")\n}\n\nval foo = Person(name = \"Ada\", surname = null)\n\ncheckNotNull(foo.surname)\n</code></pre>\n\n<p>So this would throw <code>\"foo.surname is null\"</code>. This would save quite a lot of writing, which seems to be Kotlin's mission (or one of). It may have limitations, e.g. only return the expression if it's simple, like object graph navigation, null otherwise.</p>\n\n<p>Is there any such feature? Or a feature request? Or perhaps pre-compiler addon?</p>\n"}, {"tags": ["java", "mongodb", "spring-boot", "kotlin", "jackson"], "comments": [{"owner": {"reputation": 1351, "user_id": 2082004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/122477da819584aa22bbd3bbb945b2f6?s=128&d=identicon&r=PG", "display_name": "MSD", "link": "https://stackoverflow.com/users/2082004/msd"}, "edited": false, "score": 0, "creation_date": 1576662911, "post_id": 59388683, "comment_id": 104969183, "body": "<a href=\"https://github.com/mongodb/mongo/blob/bac3b67d20128e03487680b8d713195a18315d6e/src/mongo/util/time_support.h#L72\" rel=\"nofollow noreferrer\">github.com/mongodb/mongo/blob/&hellip;</a>  -- Can u try using this? Hope this work."}], "answers": [{"tags": [], "owner": {"reputation": 24603, "user_id": 1110423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed86330a464a2bc0069dfdfc35524f2e?s=128&d=identicon&r=PG", "display_name": "Alex Blex", "link": "https://stackoverflow.com/users/1110423/alex-blex"}, "is_accepted": false, "score": 0, "last_activity_date": 1576663046, "creation_date": 1576663046, "answer_id": 59389451, "question_id": 59388683, "link": "https://stackoverflow.com/questions/59388683/mongodb-truncates-milliseconds-in-datetime-after-save/59389451#59389451", "title": "mongodb, truncates milliseconds in datetime after save", "body": "<p>From <a href=\"https://docs.mongodb.com/manual/reference/bson-types/#date\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/reference/bson-types/#date</a>:</p>\n\n<blockquote>\n  <p>BSON Date is a 64-bit integer that represents the number of <strong>milliseconds</strong> since the Unix epoch (Jan 1, 1970).</p>\n</blockquote>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/Millisecond\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Millisecond</a></p>\n\n<blockquote>\n  <p>A millisecond (from milli- and second; symbol: ms) is a thousandth (0.001 or 10\u22123 or 1/1000) of a second.</p>\n</blockquote>\n\n<p>0.939826 - is a microsecond precision.</p>\n\n<p>I couldn't find any docs about whether it should be rounded up to 0.940 or truncated to 0.939. I guess it's up to driver's implementation. </p>\n"}, {"tags": [], "owner": {"reputation": 1926, "user_id": 1526032, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/PpkJN.png?s=128&g=1", "display_name": "jakstack", "link": "https://stackoverflow.com/users/1526032/jakstack"}, "is_accepted": false, "score": 0, "last_activity_date": 1576752460, "creation_date": 1576752460, "answer_id": 59408132, "question_id": 59388683, "link": "https://stackoverflow.com/questions/59388683/mongodb-truncates-milliseconds-in-datetime-after-save/59408132#59408132", "title": "mongodb, truncates milliseconds in datetime after save", "body": "<p>Solution:</p>\n\n<p>When setting a date field use:</p>\n\n<pre><code>LocalDateTime.now(ZoneOffset.UTC).withNano(0)\n</code></pre>\n\n<p>In my application I introduced a central class 'Clock' from which we obtain current time:</p>\n\n<pre><code>Clock.time(ZoneOffset.UTC)\n</code></pre>\n\n<p>This class helps with testability but also is the one place where <code>.withNano(0)</code> is invoked.</p>\n"}], "owner": {"reputation": 1926, "user_id": 1526032, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/PpkJN.png?s=128&g=1", "display_name": "jakstack", "link": "https://stackoverflow.com/users/1526032/jakstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576752460, "creation_date": 1576660187, "last_edit_date": 1576661447, "question_id": 59388683, "link": "https://stackoverflow.com/questions/59388683/mongodb-truncates-milliseconds-in-datetime-after-save", "title": "mongodb, truncates milliseconds in datetime after save", "body": "<p>I have some object with datetime field of type LocalDateTime</p>\n\n<p>before save:</p>\n\n<pre><code>date=date=2019-12-18T09:27:20.939826\n</code></pre>\n\n<p>save and fetch from repository:</p>\n\n<pre><code>date=2019-12-18T09:27:20.939\n</code></pre>\n\n<p>As you can see date was truncated.</p>\n\n<p>This is causing objects to not be the same in unit tests and failing assert.</p>\n\n<p>What's the best way to deal with this? And How?</p>\n\n<p>Edit:</p>\n\n<p>config:</p>\n\n<pre><code>spring:\n  data.mongodb:\n    uri: mongodb://localhost:27017/app-db-test\n  jackson:\n    serialization:\n      write_dates_as_timestamps: false\n</code></pre>\n\n<p>Saved datetime in mongodb:</p>\n\n<pre><code>ISODate(\"2019-12-18T09:27:20.939+0000\")\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 27113, "user_id": 1993204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/n4qZa.jpg?s=128&g=1", "display_name": "Bartek Lipinski", "link": "https://stackoverflow.com/users/1993204/bartek-lipinski"}, "edited": false, "score": 0, "creation_date": 1576657649, "post_id": 59387961, "comment_id": 104966693, "body": "What have you tried so far?"}], "answers": [{"tags": [], "owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1576657692, "creation_date": 1576657692, "answer_id": 59388105, "question_id": 59387961, "link": "https://stackoverflow.com/questions/59387961/how-to-change-tab-on-onscrollchanged-in-android-kotlin/59388105#59388105", "title": "How to change tab on onScrollChanged in android kotlin", "body": "<p>First should add <code>ScrollViewListener</code> to your scroll view </p>\n\n<pre><code>yourscrollview.setScrollViewListener(this)//replace yourscrollview with your scrollview and override onScrollChanged\n</code></pre>\n\n<p>then Create <code>variables</code> for all four <code>viewes</code></p>\n\n<p>Now here is the main part .In this we get height for  all four . And though scroll <code>position</code>  and <code>views heights</code> we check which view currently \n<code>visible</code> on the screen then you can <code>active</code> the tab.</p>\n\n<p>Now in <code>onScrollChanged</code> method </p>\n\n<pre><code>override fun onScrollChanged(scrollView: ScrollViewExt?, x: Int, y: Int, oldx: Int, oldy: Int) {\n    val scrollBounds = Rect()\n    scrollView?.getDrawingRect(scrollBounds)\n    var top4 = 0f\n    var temp4:View = view4\n    while (temp4 !is ScrollView){\n        top4 += (temp4).y\n        temp4 = temp4.parent as View\n    }\n\n    var top3 = 0f\n    var temp3:View = view3\n    while (temp3 !is ScrollView){\n        top3 += (temp3).y\n        temp3 = temp3.parent as View\n    }\n    var top2 = 0f\n    var temp2:View = view2\n    while (temp2 !is ScrollView){\n        top2 += (temp2).y\n        temp2 = temp2.parent as View\n    }\n    var top1 = 0f\n    var temp1:View = view1\n    while (temp1 !is ScrollView){\n        top1 += (temp1).y\n        temp1 = temp1.parent as View\n    }\n\n//this are the height of four views\n    view1_height = top1 + view1.height\n    view2_height = top2 + view2.height\n    view3_height = top3 + view3.height\n    view4_height = top4 + view4.height\n\n//now check which view is visible . we go in descending order\n    if (scrollBounds.bottom + view4.height &gt;= view4_height {\n            //4th view is visible\n            //active your 4th tab    \n        } else if (scrollBounds.bottom + view3.height &gt;= view3_height {\n          //3th view is visible\n          //active your 3rd tab     \n        } else if (scrollBounds.bottom + view2.height &gt;= view2_height) {\n          //2th view is visible\n          //active your 2th tab \n        } else if ( scrollBounds.bottom + view1.height &gt;= view1_height) {\n              //1th view is visible\n            //active your 1st tab   \n        }\n    }\n</code></pre>\n\n<p>I hope this will work for you.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11647365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59388105, "answer_count": 1, "score": 1, "last_activity_date": 1576657692, "creation_date": 1576657144, "question_id": 59387961, "link": "https://stackoverflow.com/questions/59387961/how-to-change-tab-on-onscrollchanged-in-android-kotlin", "title": "How to change tab on onScrollChanged in android kotlin", "body": "<p>I am working on the screen where i have <code>scrollview</code> which contain 4 <code>view</code> and i have four tabs which represent the section. Initially <code>view1 tab</code> active when i scroll <code>view2</code> become <code>visible</code> at that time <code>view2 tab</code> should be active.Let me know if anyone have the solution.  </p>\n"}, {"tags": ["android", "kotlin", "lint"], "comments": [{"owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "edited": false, "score": 0, "creation_date": 1577096017, "post_id": 59387783, "comment_id": 105088666, "body": "I saw you github comment, so I decided to leave an answer, if you have an issue with following answer let me know."}], "answers": [{"comments": [{"owner": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "edited": false, "score": 0, "creation_date": 1577104605, "post_id": 59453490, "comment_id": 105092079, "body": "Its okay, but the answer is if its possible to see the warnings more friendly like eslint, directly on the IDE, instead in the console"}, {"owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "reply_to_user": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "edited": false, "score": 0, "creation_date": 1577106540, "post_id": 59453490, "comment_id": 105092930, "body": "with this method you will not see warnings in the console, since on commit all code is properly formatted. Is not it cool than to manually fix things after seeing a warning?"}, {"owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "reply_to_user": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "edited": false, "score": 0, "creation_date": 1577107146, "post_id": 59453490, "comment_id": 105093181, "body": "Do you still see warnings in terminal when you ran ./gradlew ktlint? If so let me know."}], "tags": [], "owner": {"reputation": 9526, "user_id": 7356355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed89399fa941467104efb9930687aaa?s=128&d=identicon&r=PG&f=1", "display_name": "user158", "link": "https://stackoverflow.com/users/7356355/user158"}, "is_accepted": false, "score": 0, "last_activity_date": 1578322211, "last_edit_date": 1578322211, "creation_date": 1577095926, "answer_id": 59453490, "question_id": 59387783, "link": "https://stackoverflow.com/questions/59387783/real-time-rules-with-ktlint/59453490#59453490", "title": "Real time rules with ktlint", "body": "<p>You will not get an error message like in eslint but using following method you won't need to deal with ktlint styling issues manually. Is not it much better than manually fixing things up?</p>\n\n<ol>\n<li>Install ktlint commandline tools as described <a href=\"https://github.com/pinterest/ktlint#installation\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li>Set IntelliJ IDEA's code styles to align with ktlint's code styles as described <a href=\"https://github.com/pinterest/ktlint#option-2\" rel=\"nofollow noreferrer\">here</a>.</li>\n</ol>\n\n<p>So when you make a commit using IntelliJ IDEA's commit window (<kbd>CTRL</kbd> + <kbd>K</kbd> or <kbd>Command</kbd> + <kbd>K</kbd>) and you have reformat code before commit enabled then your commit will be made with correct code styles.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 2573318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd37d7999a370968b09b42ee84c6b07d?s=128&d=identicon&r=PG", "display_name": "jcflorezr", "link": "https://stackoverflow.com/users/2573318/jcflorezr"}, "is_accepted": false, "score": 1, "last_activity_date": 1588309439, "creation_date": 1588309439, "answer_id": 61537097, "question_id": 59387783, "link": "https://stackoverflow.com/questions/59387783/real-time-rules-with-ktlint/61537097#61537097", "title": "Real time rules with ktlint", "body": "<p>Perhaps the following advice does not directly solve your requirement. But, what about making the auto format process part of the build process? I mean, your code will be auto formatted and then checked according to the <a href=\"https://ktlint.github.io/#rules\" rel=\"nofollow noreferrer\">ktlint rules</a> and you only will be worried about to run the build command (i.e. <code>./gradlew clean build</code>) before committing your code. This is how I have done that:</p>\n\n<p>First of all, I am using Gradle 6.3 and I have implemented the version 9.1.2 of <a href=\"https://github.com/JLLeitschuh/ktlint-gradle\" rel=\"nofollow noreferrer\">org.jlleitschuh.gradle.ktlint</a> plugin.</p>\n\n<p>Once the plugin has been imported to the project, some tasks are added as the <a href=\"https://github.com/JLLeitschuh/ktlint-gradle#main-tasks\" rel=\"nofollow noreferrer\">plugin's documentation</a> describes: </p>\n\n<blockquote>\n  <p>This plugin adds two maintasks to every source set: <strong>ktlint[source set name]SourceSetCheck</strong> and <strong>ktlint[source set name]SourceSetFormat</strong></p>\n</blockquote>\n\n<p>Usually the added tasks are: </p>\n\n<ul>\n<li><code>ktlintMainSourceSetCheck</code> and <code>ktlintMainSourceSetFormat</code> for <code>src/kotlin/main</code> source set</li>\n<li><code>ktlintTestSourceSetCheck</code> and <code>ktlintTestSourceSetFormat</code> for <code>src/kotlin/test</code> source set</li>\n</ul>\n\n<p>In order to make <code>ktlintMainSourceSetFormat</code> and <code>ktlintTestSourceSetFormat</code> part of the build process, you should add the following gradle action inside <code>subprojects { }</code> section:</p>\n\n<p>For kotlin-based gradle scripts (<code>build.gradle.kts</code>):</p>\n\n<pre><code>afterEvaluate {\n    tasks[\"ktlintMainSourceSetCheck\"].dependsOn(tasks[\"ktlintMainSourceSetFormat\"])\n    tasks[\"ktlintTestSourceSetCheck\"].dependsOn(tasks[\"ktlintTestSourceSetFormat\"])\n}\n</code></pre>\n\n<p>For groovy-based gradle scripts (<code>build.gradle</code>):</p>\n\n<pre><code>afterEvaluate {\n    tasks.getByName('ktlintMainSourceSetCheck').dependsOn(tasks.getByName('ktlintMainSourceSetFormat'))\n    tasks.getByName('ktlintTestSourceSetCheck').dependsOn(tasks.getByName('ktlintTestSourceSetFormat'))\n}\n</code></pre>\n\n<p>This makes the \"format\" tasks mentioned above run before the \"check\" tasks after the build process of the current sub project has succeeded. These \"check\" tasks are the ones that display formatting errors in the console whenever the build is run, but making them children of the \"format\" tasks will force the build process to format the code before checking it so that no formatting errors will show up in the console.</p>\n\n<p>Additionally, you can also apply code checks and formats to build script files (<code>build.gradle(.kts)</code>) by adding the following code inside <code>allprojects { }</code> section:</p>\n\n<pre><code>afterEvaluate {\n    tasks[\"ktlintKotlinScriptCheck\"].dependsOn(tasks[\"ktlintKotlinScriptFormat\"])\n}\n</code></pre>\n\n<p><strong>For Git support:</strong></p>\n\n<p>If you want to add the auto formatting feature at pre-commit stage, you can use these tasks: <code>addKtlintCheckGitPreCommitHook</code> and <code>addKtlintFormatGitPreCommitHook</code> as explained <a href=\"https://github.com/JLLeitschuh/ktlint-gradle#additional-helper-tasks\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><strong>For IntelliJ IDEA support:</strong></p>\n\n<p>If you want to apply the <a href=\"https://ktlint.github.io/#rules\" rel=\"nofollow noreferrer\">ktlint rules</a> to your current project, just execute the following gradle command once you have imported the <code>org.jlleitschuh.gradle.ktlint-idea</code> plugin: <code>./gradlew ktlintApplyToIdea</code> and this will replace the <code>codeStyles</code> file inside <code>.idea/</code> folder as described <a href=\"https://github.com/JLLeitschuh/ktlint-gradle#additional-helper-tasks\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Finally, <a href=\"https://github.com/jcflorezr/audio-splitter/blob/feature/implementing-ddd/build.gradle.kts\" rel=\"nofollow noreferrer\">here</a> is an example of a <code>build.gradle.kts</code> where all the mentioned above is applied.</p>\n"}], "owner": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1588309439, "creation_date": 1576656351, "last_edit_date": 1576662354, "question_id": 59387783, "link": "https://stackoverflow.com/questions/59387783/real-time-rules-with-ktlint", "title": "Real time rules with ktlint", "body": "<p>I am trying to use ktlint on my android project.</p>\n\n<p>Currently I am using these gradle plugins:</p>\n\n<pre><code>org.jlleitschuh.gradle.ktlint\norg.jlleitschuh.gradle.ktlint-idea\n</code></pre>\n\n<p>I can check the code using a manual gradle task, where the warnings will be displayed by the terminal.</p>\n\n<p>Is it possible to achive something like eslint in javascript? Example:\n<a href=\"https://i.stack.imgur.com/zYfzB.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYfzB.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "edited": false, "score": 0, "creation_date": 1576655100, "post_id": 59387425, "comment_id": 104965653, "body": "Maybe related to this error in Android Studio 4 Canary 6 - <a href=\"https://stackoverflow.com/questions/57707769/unresolved-reference-in-wrong-test-scope-android-studio-3-5/59311273#59311273\" title=\"unresolved reference in wrong test scope android studio 3 5\">stackoverflow.com/questions/57707769/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 7358866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250a27e4561d673ec0bdee5a90662b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Darotudeen", "link": "https://stackoverflow.com/users/7358866/darotudeen"}, "edited": false, "score": 0, "creation_date": 1576655862, "post_id": 59387508, "comment_id": 104965954, "body": "Does this mean I have to add coroutines to my dependencies?"}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 523, "user_id": 7358866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250a27e4561d673ec0bdee5a90662b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Darotudeen", "link": "https://stackoverflow.com/users/7358866/darotudeen"}, "edited": false, "score": 0, "creation_date": 1576656304, "post_id": 59387508, "comment_id": 104966119, "body": "@Darotudeen you&#39;ve obviously already added them... while I rather think it should work without synchronization, because in Java it also works without doing so."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 523, "user_id": 7358866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250a27e4561d673ec0bdee5a90662b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Darotudeen", "link": "https://stackoverflow.com/users/7358866/darotudeen"}, "edited": false, "score": 0, "creation_date": 1577043409, "post_id": 59387508, "comment_id": 105077497, "body": "Here&#39;s a working <a href=\"https://gist.github.com/TannerGabriel/f5594ad3b2c9f2586f2275be5103b29e#file-appdatabase-kt\" rel=\"nofollow noreferrer\">example</a> (which uses the deprecated <code>synchronized</code> keyword)... but it might throw a <code>UnsupportedOperationException</code>. The question does not state which Kotlin versions you are using - and newer versions might complain - or not even know it anymore. Downgrading to some outdated Kotlin version should make it known, but is still a sub-optimal approach."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1577043683, "last_edit_date": 1577043683, "creation_date": 1576655027, "answer_id": 59387508, "question_id": 59387425, "link": "https://stackoverflow.com/questions/59387425/false-unresolved-reference-in-android-studio/59387508#59387508", "title": "False unresolved reference in Android Studio", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\" rel=\"nofollow noreferrer\"><code>synchronized</code></a> keyword had been deprecated in Kotlin.</p>\n\n<p>While it clearly reads:</p>\n\n<blockquote>\n  <p><code>UnsupportedOperationException</code> - <strong>always</strong></p>\n</blockquote>\n\n<p>Therefore, even if it would be known, it would still be quite useless.</p>\n\n<p><code>kotlinx.coroutines.internal.synchronized</code> reads \"internal\" and obviously is something else. The best alternative might be <code>Coroutines.Sync.Mutex</code>, once <code>synchronized</code> won't exist anymore.</p>\n"}], "owner": {"reputation": 523, "user_id": 7358866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250a27e4561d673ec0bdee5a90662b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Darotudeen", "link": "https://stackoverflow.com/users/7358866/darotudeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2439, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577043683, "creation_date": 1576654616, "last_edit_date": 1576654811, "question_id": 59387425, "link": "https://stackoverflow.com/questions/59387425/false-unresolved-reference-in-android-studio", "title": "False unresolved reference in Android Studio", "body": "<p>I just built my first App on Android studio. Everything was fine until few days while making some changes I got a notification for update and went on with it only for me to start getting <code>unresolved reference</code> error.</p>\n\n<p>Even with that the application would build and run well but the problem is every other project I created after that follow suit with the same error.</p>\n\n<p>I have followed tried several advice but to no avail.\nI have deleted idea, imported the project from another one, done invalidate cache and restart, sync with system and sync with gradle.</p>\n\n<p>I am currently trying to use Room on a new project and <code>synchronized</code> is marked <code>unresolved reference</code> as I tried to create singleton for my database.</p>\n\n<p>I also noticed that my files are always corrupted, I have to go back to Git-hub to recopy those files even though they don't give error on compilation</p>\n\n<p>In all I think these are the issues am facing both on current project and previous project\n1. the <code>unresolved reference</code> </p>\n\n<h2>Previous Project</h2>\n\n<pre><code>        val sharedPref = activity!!.getPreferences(Context.MODE_PRIVATE)\n\n        val none = resources.getString(R.string.none)\n\n        val countries = arrayListOf&lt;String&gt;(\"Nigeria\", \"Zambia\", \"Ethiopia\", \"Ghana\", none)\n        val greenWallCountries = arrayListOf&lt;String&gt;(\"Great green\")\n\n        Collections.sort(countries, String.CASE_INSENSITIVE_ORDER)\n\n        val adapter = ArrayAdapter(context!!, R.layout.spinner_item, countries)\n        locationSpinner.adapter = adapter\n\n\n\n        locationSpinner.isEnabled = false\n        var chosen: String? = null\n        greenwallVG.setOnClickListener {\n\n            chosen = \"ggw\"\n            greenwallVG.setBackgroundColor(R.color.primaryTransparent)\n            countriesVG.setBackgroundColor(R.color.colorNeutral)\n\n            locationSpinner.isEnabled = false\n\n            Toast.makeText(context!!, \"$chosen\", Toast.LENGTH_LONG).show()\n        }\n</code></pre>\n\n<h2>Current Project</h2>\n\n<p>**synchronized is marked unresolve reference here</p>\n\n<pre><code>package com.example.contactmvvm\n\nimport android.content.Context\nimport androidx.room.Database\nimport androidx.room.Room\nimport androidx.room.RoomDatabase\nimport kotlinx.coroutines.internal.synchronized\n\n@Database(entities = [ContactEntity::class], version = 1)\nabstract class ContactDatabase : RoomDatabase() {\n\n    abstract fun getContactDao():ContactDao\n\n    companion object{\n        private var instance:ContactDatabase?=null\n\n        fun getInstance(context: Context) =\n            instance?: synchronized(this){\n                instance?: Room.databaseBuilder(context.applicationContext,\n                ContactDatabase::class.java, \"contact_database\")\n                    .fallbackToDestructiveMigration()\n                    .build()\n\n\n            }\n\n    }\n\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>error: Cannot find getter for field.\nprivate int id;</li>\n</ol>\n\n<pre><code>    package com.example.contactmvvm\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n@Entity(tableName = \"contacts_table\")\nclass ContactEntity(\n    val firstName:String,\n    val lastName:String,\n    val sex: String,\n    val address:String\n    ) {\n    @PrimaryKey(autoGenerate = true)\n    private var id:Int = 0\n\n\n}\n</code></pre>\n\n<p>Is there something else to be done to annul this error.</p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-jetpack"], "comments": [{"owner": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "edited": false, "score": 0, "creation_date": 1576655200, "post_id": 59386003, "comment_id": 104965692, "body": "two-way data binding use for the attributes available in given link: <a href=\"https://developer.android.com/topic/libraries/data-binding/two-way#two-way-attributes.Be\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/data-binding/&hellip;</a> careful not to introduce infinite loops when using two-way data binding."}, {"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 0, "creation_date": 1577164201, "post_id": 59386003, "comment_id": 105108583, "body": "First you check the condition if it is correct then you will <code>enable</code> the <code>button</code> and it <code>onclick</code> method is that it you want?"}], "answers": [{"comments": [{"owner": {"reputation": 1458, "user_id": 5872337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Ecyt.jpg?s=128&g=1", "display_name": "Geet Thakur", "link": "https://stackoverflow.com/users/5872337/geet-thakur"}, "edited": false, "score": 0, "creation_date": 1576659975, "post_id": 59387224, "comment_id": 104967688, "body": "Thanks for your answer, but i want to call a function, not dependent any variable."}], "tags": [], "owner": {"reputation": 733, "user_id": 7719064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330b14ebe09d3c66209141f6268fe033?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Raiyani", "link": "https://stackoverflow.com/users/7719064/akshay-raiyani"}, "is_accepted": false, "score": 0, "last_activity_date": 1576653796, "creation_date": 1576653796, "answer_id": 59387224, "question_id": 59386003, "link": "https://stackoverflow.com/questions/59386003/how-to-use-two-way-data-binding-in-android-kotlin/59387224#59387224", "title": "How to use Two-way data binding in android (kotlin)", "body": "<p>You can set one variable in  field like: </p>\n\n<pre><code>&lt;variable\n    name=\"wantsToVisibleProgress\"\n    type=\"boolean\" /&gt;\n</code></pre>\n\n<p>and set it in your button like this:</p>\n\n<pre><code>&lt;Button\n    android:id=\"@+id/constraint_select_main\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@drawable/bg_button_blue_big\"\n    android:enabled=\"@={wantsToVisibleProgress}\"\n    android:gravity=\"center\"\n    android:onClick=\"@{v -&gt; fragment.onClick()}\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/txt_evse_one\"&gt;\n</code></pre>\n\n<p>You can set that value like this:</p>\n\n<pre><code>binding.setWantsToVisibleProgress(true);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4599784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s6ees4cnMdg/AAAAAAAAAAI/AAAAAAAAAB4/83_LBPKg6Ek/photo.jpg?sz=128", "display_name": "Shitul", "link": "https://stackoverflow.com/users/4599784/shitul"}, "is_accepted": false, "score": 1, "last_activity_date": 1613463362, "creation_date": 1613463362, "answer_id": 66220759, "question_id": 59386003, "link": "https://stackoverflow.com/questions/59386003/how-to-use-two-way-data-binding-in-android-kotlin/66220759#66220759", "title": "How to use Two-way data binding in android (kotlin)", "body": "<p>First Add Button Status Object</p>\n<pre><code>&lt;variable\n            name=&quot;button&quot;\n            type=&quot;com.brl.test.app.vm.ButtonStatus&quot; /&gt;\n\n&lt;Button \n      android:id=&quot;@+id/save_btn_disabled_3&quot;\n      bind:state_change=&quot;@{button.state}&quot;\n      ....\n      /&gt;\n</code></pre>\n<p>Set your logic in buttonEnabled funtion then Enable Your Button</p>\n<pre><code>@BindingAdapter({&quot;bind:state_change&quot;})\n  public static void buttonEnabled(TextView view, State state) {\n     \n    view.setEnabled(true);\n  }\n</code></pre>\n"}], "owner": {"reputation": 1458, "user_id": 5872337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Ecyt.jpg?s=128&g=1", "display_name": "Geet Thakur", "link": "https://stackoverflow.com/users/5872337/geet-thakur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1613463362, "creation_date": 1576647020, "last_edit_date": 1583928345, "question_id": 59386003, "link": "https://stackoverflow.com/questions/59386003/how-to-use-two-way-data-binding-in-android-kotlin", "title": "How to use Two-way data binding in android (kotlin)", "body": "<p>I need to <strong>enable my Button</strong> after check some condition, i want to call one method using <strong>@InverseBinding OR Two Way data binding</strong> and reflect the changes with return value.</p>\n\n<p>my Code : </p>\n\n<pre><code>&lt;Button \n      android:id=\"@+id/save_btn_disabled_3\"\n      android:enabled=\"@={controller}\"\n      ....\n      /&gt;\n</code></pre>\n\n<p>my Two Way data binding logic here :</p>\n\n<pre><code>@InverseBindingAdapter(attribute = \"enable\")\n    fun getEnableButton(view:View, controller:Controller): Boolean {\n    //some conditions\n        return false\n    }\n</code></pre>\n\n<p>i want to know am i going in correct direction ?, code is ok ? \nplease suggest me. </p>\n"}, {"tags": ["string", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 8772319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a6851809bf9ef083b211d027c0327?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8772319/adam"}, "reply_to_user": {"reputation": 89, "user_id": 11123483, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IrXmSD0QAmI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPN0pQSJPmyYBjzy_lTiMGVqk0Kw/mo/photo.jpg?sz=128", "display_name": "The Blues", "link": "https://stackoverflow.com/users/11123483/the-blues"}, "edited": false, "score": 0, "creation_date": 1576677259, "post_id": 59385393, "comment_id": 104976431, "body": "@TheBlues Thank you! Please remember to accept answers that solve your problem."}], "tags": [], "owner": {"reputation": 501, "user_id": 8772319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9a6851809bf9ef083b211d027c0327?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8772319/adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1576642667, "creation_date": 1576642667, "answer_id": 59385393, "question_id": 59385099, "link": "https://stackoverflow.com/questions/59385099/how-to-convert-a-string-to-entity-in-kotlin/59385393#59385393", "title": "How to convert a string to entity in kotlin", "body": "<p>Regexes seem like an appropriate choice here:</p>\n\n<pre><code>data class Test(val a: Int = 0, val b: Int = 0, val c: Double = 0.0, val d: Double = 0.0)\nfun main() {\n    val str = \"Test(a=10, b=100, c=1.0, d=2.0)\"\n    print(getTest(str))\n}\nfun getTest(str: String): Test {\n    val regex = \"\"\"Test\\(a=(.+), b=(.+), c=(.+), d=(.+)\\)\"\"\".toRegex()\n    val matches = regex.find(str)\n    return matches?.groupValues?.let { groups -&gt;\n        Test(groups[1].toInt(), groups[2].toInt(), groups[3].toDouble(), groups[4].toDouble())\n    } ?: Test()\n}\n</code></pre>\n\n<p>If you're looking at storing objects as strings to re-instantiate them, consider serialization. Have a look <a href=\"https://github.com/Kotlin/kotlinx.serialization\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2039, "user_id": 502214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e26ce1fd9b907aa156d7e8e2cdd6401?s=128&d=identicon&r=PG", "display_name": "V&#245; Quang H&#242;a", "link": "https://stackoverflow.com/users/502214/v%c3%b5-quang-h%c3%b2a"}, "is_accepted": false, "score": 1, "last_activity_date": 1576679252, "creation_date": 1576679252, "answer_id": 59394162, "question_id": 59385099, "link": "https://stackoverflow.com/questions/59385099/how-to-convert-a-string-to-entity-in-kotlin/59394162#59394162", "title": "How to convert a string to entity in kotlin", "body": "<p>It works</p>\n\n<pre><code>data class Test(\n        val a: Int = 0,\n        val b: Int = 0,\n        val c: Double = 0.0,\n        val d: Double = 0.0\n)\n\n\nfun main() {\n    val str = \"Test(a=10, b=100, c=1.0, d=2.0)\"\n    val numbers =  \"([\\\\d.]+)\".toRegex().findAll(str).map { it.value }.toList()\n    val test = Test(\n            numbers[0].toInt(), \n            numbers[1].toInt(), \n            numbers[2].toDouble(), \n            numbers[3].toDouble())\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 11123483, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IrXmSD0QAmI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPN0pQSJPmyYBjzy_lTiMGVqk0Kw/mo/photo.jpg?sz=128", "display_name": "The Blues", "link": "https://stackoverflow.com/users/11123483/the-blues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576679252, "creation_date": 1576639811, "last_edit_date": 1576640313, "question_id": 59385099, "link": "https://stackoverflow.com/questions/59385099/how-to-convert-a-string-to-entity-in-kotlin", "title": "How to convert a string to entity in kotlin", "body": "<p>I have a string like bellow:</p>\n\n<p><code>str = \"Test(a=10, b=100, c=1.0, d=2.0)\"</code></p>\n\n<p>and <code>Test</code> entity is:</p>\n\n<pre><code>data class Test(\n   val a: int = 0,\n   val b: Int = 0,\n   val c: Double = 0.0,\n   val d: Double = 0.0\n)\n</code></pre>\n\n<p>What should I do to convert string <code>str</code> to <code>Test</code> entity?</p>\n\n<p>Thankyou!!</p>\n"}, {"tags": ["android", "kotlin", "webview", "onscrollchanged"], "comments": [{"owner": {"reputation": 727, "user_id": 2182917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4aNiN.png?s=128&g=1", "display_name": "Jacks", "link": "https://stackoverflow.com/users/2182917/jacks"}, "edited": false, "score": 0, "creation_date": 1576643681, "post_id": 59384834, "comment_id": 104962348, "body": "this would help ? <a href=\"https://stackoverflow.com/questions/14752523/how-to-make-a-scroll-listener-for-webview-in-android\" title=\"how to make a scroll listener for webview in android\">stackoverflow.com/questions/14752523/&hellip;</a>"}, {"owner": {"reputation": 129, "user_id": 10168482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OvJ5Z8Ih90k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKAjotpuE9kPizy0X8JOntve0bfQ/mo/photo.jpg?sz=128", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10168482/nancy"}, "reply_to_user": {"reputation": 727, "user_id": 2182917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4aNiN.png?s=128&g=1", "display_name": "Jacks", "link": "https://stackoverflow.com/users/2182917/jacks"}, "edited": false, "score": 0, "creation_date": 1576644383, "post_id": 59384834, "comment_id": 104962484, "body": "Thank you but I want to use the setOnScrollChangeListener"}], "owner": {"reputation": 129, "user_id": 10168482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OvJ5Z8Ih90k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKAjotpuE9kPizy0X8JOntve0bfQ/mo/photo.jpg?sz=128", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10168482/nancy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576637729, "creation_date": 1576637729, "question_id": 59384834, "link": "https://stackoverflow.com/questions/59384834/unable-to-detect-when-the-scroll-stopped-in-setonscrollchangelistener", "title": "Unable to detect when the scroll stopped in setOnScrollChangeListener", "body": "<p>I want to hide the view when you are scrolling in the webview and show this view when you stop scrolling. How can I detect if you stopped scrolling? I tried to use the following code but doesn't work. I would love to have a hint or an example from you. I want to simple hide &amp; show a certain view according to the users action in the webview.</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                            webview.setOnScrollChangeListener { _, _, y, _, oldY -&gt;\n                                if (y &gt; oldY || y &lt; oldY) {\n                                    val size = Utils.getDisplaySize(requireContext())\n                                    val sizeHeight = size.y.toFloat()\n                                    bindingMyLayout.boxlayout.apply {\n                                        Animation.move(this, 0f, sizeHeight / 4,300\n                                        )\n                                        Animation.alpha(this, 1f, this.alpha, 300)\n                                    }\n                                }\n                                if (oldY - y == 0) {\n                                    Handler().postDelayed({\n                                        MyLayout.boxlayout.apply {\n                                            visibility = View.VISIBLE\n                                            Animation.resetView(this, 200)\n                                            Animation.alpha(this, 1f, this.alpha, 200)\n                                        }\n                                    }, 1000)\n                                }\n\n                            }\n                        }\n</code></pre>\n"}, {"tags": ["mongodb", "kotlin", "cdi", "inject", "quarkus"], "comments": [{"owner": {"reputation": 48521, "user_id": 2504224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ACuxG.png?s=128&g=1", "display_name": "geoand", "link": "https://stackoverflow.com/users/2504224/geoand"}, "edited": false, "score": 0, "creation_date": 1576657950, "post_id": 59384257, "comment_id": 104966828, "body": "This looks like a bug. Can you please open an issue and ping me on it (<code>geoand</code> on github as well)?"}, {"owner": {"reputation": 3892, "user_id": 3603660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5597e9bc41683fd5c82d132cbc5bee36?s=128&d=identicon&r=PG&f=1", "display_name": "loicmathieu", "link": "https://stackoverflow.com/users/3603660/loicmathieu"}, "edited": false, "score": 0, "creation_date": 1576839897, "post_id": 59384257, "comment_id": 105034524, "body": "Is it working if you inject into the <code>mongoClient</code> field instead of a constructor ?"}, {"owner": {"reputation": 1, "user_id": 12555446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdd1387fec108f6076dda408811c5e5?s=128&d=identicon&r=PG&f=1", "display_name": "jnes", "link": "https://stackoverflow.com/users/12555446/jnes"}, "edited": false, "score": 0, "creation_date": 1576960260, "post_id": 59384257, "comment_id": 105062984, "body": "Nope still null :/"}, {"owner": {"reputation": 48521, "user_id": 2504224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ACuxG.png?s=128&g=1", "display_name": "geoand", "link": "https://stackoverflow.com/users/2504224/geoand"}, "edited": false, "score": 0, "creation_date": 1577012344, "post_id": 59384257, "comment_id": 105070205, "body": "Added a comment: <a href=\"https://github.com/quarkusio/quarkus/issues/6264#issuecomment-568251711\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues/6264#issuecomment-568251&zwnj;&#8203;711</a>"}], "owner": {"reputation": 1, "user_id": 12555446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdd1387fec108f6076dda408811c5e5?s=128&d=identicon&r=PG&f=1", "display_name": "jnes", "link": "https://stackoverflow.com/users/12555446/jnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1611147138, "creation_date": 1576631854, "last_edit_date": 1611147138, "question_id": 59384257, "link": "https://stackoverflow.com/questions/59384257/quarkus-cannot-inject-mongoclient-using-kotlin", "title": "Quarkus: Cannot @Inject MongoClient using Kotlin", "body": "<p>I created a simple Kotlin Quarkus application that connects to my local MongoDB instance following <a href=\"https://quarkus.io/guides/mongodb\" rel=\"nofollow noreferrer\">the official guide</a>.</p>\n<p>The connection works, however it seems that it fails to inject the MongoClient/ReactiveMongoClient like so:</p>\n<pre><code>...\nimport com.mongodb.client.MongoClient\n...\n\n@ApplicationScoped\nopen class KotlinService @Inject constructor(private val mongoClient: MongoClient) {\n\n    fun getCollection(): MongoCollection&lt;Document&gt; = mongoClient.getDatabase(&quot;test&quot;).getCollection(&quot;hello&quot;)\n\n}\n</code></pre>\n<p>Calling <code>getCollection()</code> results in:</p>\n<pre><code>org.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException\n        at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:106)\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:372)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:209)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:496)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:252)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:153)\n        at org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:363)\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:156)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:238)\n        at io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\n        at io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:118)\n        at io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.lambda$handle$0(VertxRequestHandler.java:74)\n        at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$2(ContextImpl.java:316)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:830)\nCaused by: java.lang.NullPointerException\n        at ...service.KotlinService.getCollection(KotlinService.kt:12)\n        at ...resource.ReceiptResource.getAll(ReceiptResource.kt:19)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        .....\n</code></pre>\n<p>If I rewrite the class in Java instead it works fine:</p>\n<pre><code>...\nimport com.mongodb.client.MongoClient;\n...\n\n@ApplicationScoped\npublic class JavaService {\n\n    private MongoClient mongoClient;\n\n    @Inject\n    public JavaService(MongoClient mongoClient) {\n        this.mongoClient = mongoClient;\n    }\n\n    public MongoCollection&lt;Document&gt; getCollection() {\n        return mongoClient.getDatabase(&quot;test&quot;).getCollection(&quot;hello&quot;);\n    }\n}\n\n</code></pre>\n<p>A bug or am I missing something here?</p>\n<p><strong>Update</strong></p>\n<p>Reported as a bug on <a href=\"https://github.com/quarkusio/quarkus/issues/6264\" rel=\"nofollow noreferrer\">github</a>.</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-room", "rx-android"], "answers": [{"comments": [{"owner": {"reputation": 200, "user_id": 2068694, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VyssC.jpg?s=128&g=1", "display_name": "Dudei95", "link": "https://stackoverflow.com/users/2068694/dudei95"}, "edited": false, "score": 0, "creation_date": 1576668453, "post_id": 59386207, "comment_id": 104971967, "body": "Thanks for pointing this out! But this does not solve my problem completely, because now the function adding the object AND updating it after this. Is there a possibility to avoid this?"}], "tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1576648488, "creation_date": 1576648488, "answer_id": 59386207, "question_id": 59384158, "link": "https://stackoverflow.com/questions/59384158/rxjava-combine-database-create-update-call-for-a-list-of-objects/59386207#59386207", "title": "RxJava combine database create/update call for a list of objects", "body": "<p>The problem is with this line:</p>\n\n<p><code>switchIfEmpty { obs: SingleObserver&lt;in Model&gt; -&gt; createNewObject(atl) }</code></p>\n\n<p>Kotlin's automatic SAM conversion is trying to make your life easier by generating an overload of <code>switchIfEmpty</code> that implements <code>void subscribe</code> from <code>SingleSource</code>. In not all cases is this helpful however, what you want to be using instead is this:</p>\n\n<p><code>switchIfEmpty(createNewObject(atl))</code></p>\n\n<p>A better explanation of why this is happening can be found <a href=\"https://medium.com/@dmstocking/rxjava2-kotlin-gotcha-concatwith-mergewith-15bcc460f7e3\" rel=\"nofollow noreferrer\">here.</a></p>\n"}, {"tags": [], "owner": {"reputation": 200, "user_id": 2068694, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VyssC.jpg?s=128&g=1", "display_name": "Dudei95", "link": "https://stackoverflow.com/users/2068694/dudei95"}, "is_accepted": false, "score": 0, "last_activity_date": 1576686247, "creation_date": 1576686247, "answer_id": 59396230, "question_id": 59384158, "link": "https://stackoverflow.com/questions/59384158/rxjava-combine-database-create-update-call-for-a-list-of-objects/59396230#59396230", "title": "RxJava combine database create/update call for a list of objects", "body": "<p>So i ended up with a workaround which i found <a href=\"https://medium.com/my-random-thoughts-in-software-engineering/null-handling-with-rxjava-2-maybe-t-and-some-little-tricky-details-c26b47bd4fc2\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>TL;DR: Maybe emits null and calls then \"onComplete\". So i can chain this if i use \"onSuccess\" and \"onComplete\". </p>\n\n<p>The code for someone who is interested: </p>\n\n<pre><code>     private fun insertUpdateFromServer(objects: List&lt;Model&gt;): Completable {\n    return Observable.fromIterable(objects)\n            .flatMapCompletable { obj -&gt;\n                dao.getByServerId(obj.id).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread())\n                        .doOnComplete { createNewObject(obj).subscribe() }\n                        .doOnSuccess { updateObject(obj, it).applySchedulers().subscribe() }\n                        .flatMapCompletable { Completable.complete() }\n            }\n}\n</code></pre>\n\n<p>This expression waits for all it subtasks to terminate and terminates then completely. </p>\n"}], "owner": {"reputation": 200, "user_id": 2068694, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VyssC.jpg?s=128&g=1", "display_name": "Dudei95", "link": "https://stackoverflow.com/users/2068694/dudei95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576686247, "creation_date": 1576630762, "question_id": 59384158, "link": "https://stackoverflow.com/questions/59384158/rxjava-combine-database-create-update-call-for-a-list-of-objects", "title": "RxJava combine database create/update call for a list of objects", "body": "<p>im currently struggeling with my first more complex rx chain, maybe you can help me out. \nI have a list of objects, which i get from an api call. I need to check if they exists local, if they do, update the dataset, if not create them. My current approach is something like this: </p>\n\n<pre><code> private fun insertUpdateFromServer(objectsToInsert: List&lt;Model&gt;): Completable {\n    return Observable.fromIterable(objectsToInsert).flatMapCompletable { atl -&gt;\n        dao.getByServerId(atl.id).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread())\n                .switchIfEmpty { obs: SingleObserver&lt;in Model&gt; -&gt; createNewObject(atl) }.flatMapCompletable {\n                    updateObject(atl, it).applySchedulers()\n                }\n    }\n</code></pre>\n\n<p>Its important, that i have to wait for all the subtasks to complete. This is working if i only have objcts to update, but if there is a new object, the whole thing will not complete. </p>\n\n<p>Note that im only interested if the operation is completed, the emitted object doesnt matter for me. The function \"getByServerId\" returns a Maybe. </p>\n\n<p>So im asking you if you can point out my logical mistakes and push me in the right direction, thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 1370, "user_id": 726625, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4a6babcbd82b75d0e51a29f138bf239e?s=128&d=identicon&r=PG", "display_name": "sha", "link": "https://stackoverflow.com/users/726625/sha"}, "edited": false, "score": 0, "creation_date": 1576625909, "post_id": 59383230, "comment_id": 104959011, "body": "<code>RecyclerView</code> doesn&#39;t expose method for you to set scrollstate. scrollstate has only package level access. It is public for read purposes. What is your requirement?"}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 3363520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915780abfd8976744c92c0ac8c456ab0?s=128&d=identicon&r=PG", "display_name": "Xials", "link": "https://stackoverflow.com/users/3363520/xials"}, "edited": false, "score": 0, "creation_date": 1576700690, "post_id": 59387938, "comment_id": 104988124, "body": "This works perfectly. unfortunately Scroll state is not the scroll position like I thought."}, {"owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "reply_to_user": {"reputation": 168, "user_id": 3363520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915780abfd8976744c92c0ac8c456ab0?s=128&d=identicon&r=PG", "display_name": "Xials", "link": "https://stackoverflow.com/users/3363520/xials"}, "edited": false, "score": 0, "creation_date": 1576723175, "post_id": 59387938, "comment_id": 104994026, "body": "@Xials Because you do not describe your problem so I cannot help. In case you want to scroll to a position in a recyclerview, try to collaborate with <code>scrollToPosition(int position)</code> method."}], "tags": [], "owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "is_accepted": true, "score": 1, "last_activity_date": 1576657051, "creation_date": 1576657051, "answer_id": 59387938, "question_id": 59383230, "link": "https://stackoverflow.com/questions/59383230/trying-to-set-the-scroll-state-of-a-recyclerview-when-it-is-recreated-but-kotli/59387938#59387938", "title": "Trying to set the scroll state of a RecyclerView when it is recreated, but Kotlin says I can&#39;t because the setter is public...?", "body": "<p>From <a href=\"https://android.googlesource.com/platform/frameworks/support/+/refs/heads/androidx-master-dev/recyclerview/recyclerview/src/main/java/androidx/recyclerview/widget/RecyclerView.java\" rel=\"nofollow noreferrer\">RecyclerView</a> source code</p>\n\n<pre><code>void setScrollState(int state) {\n    if (state == mScrollState) {\n        return;\n    }\n    if (DEBUG) {\n        Log.d(TAG, \"setting scroll state to \" + state + \" from \" + mScrollState,\n                new Exception());\n    }\n    mScrollState = state;\n    if (state != SCROLL_STATE_SETTLING) {\n        stopScrollersInternal();\n    }\n    dispatchOnScrollStateChanged(state);\n}\n</code></pre>\n\n<p>As you can see, the access modifier of this method is default (or package), it means only classes in the same package can call this method.</p>\n\n<p>Because you call this method from your code which has the different package, that why the compiler show that error.</p>\n\n<p><strong>Solution:</strong> You can invoke this method at runtime using <a href=\"https://www.oracle.com/technical-resources/articles/java/javareflection.html\" rel=\"nofollow noreferrer\">Java Reflection</a></p>\n\n<p>1.Define a method to set scroll state for a recyclerview</p>\n\n<pre><code>private fun setScrollState(recyclerView: RecyclerView, state: Int) {\n    val method = recyclerView::class.java.getDeclaredMethod(\"setScrollState\", Int::class.java)\n    method.isAccessible = true\n    method.invoke(recyclerView, state)\n}\n</code></pre>\n\n<p>2.Call this method whenever you want to set scroll state for a recyclerview.</p>\n\n<pre><code>// recycler.scrollState = MainViewModel.sharedViewModel.savedScrollState\nsetScrollState(recycler, MainViewModel.sharedViewModel.savedScrollState)\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 3363520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915780abfd8976744c92c0ac8c456ab0?s=128&d=identicon&r=PG", "display_name": "Xials", "link": "https://stackoverflow.com/users/3363520/xials"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 59387938, "answer_count": 1, "score": 0, "last_activity_date": 1576657051, "creation_date": 1576623086, "question_id": 59383230, "link": "https://stackoverflow.com/questions/59383230/trying-to-set-the-scroll-state-of-a-recyclerview-when-it-is-recreated-but-kotli", "title": "Trying to set the scroll state of a RecyclerView when it is recreated, but Kotlin says I can&#39;t because the setter is public...?", "body": "<p>Like the title says, I am trying to set the scroll state of a recycler view in the onViewCreated method of the Fragment. I call</p>\n\n<pre><code>recycler.scrollState = MainViewModel.sharedViewModel.savedScrollState\n</code></pre>\n\n<p>and I get this error:</p>\n\n<pre><code>the setter is public/*package*/ for synthetic extension in '&lt;dependencies of app_debug&gt;'\n</code></pre>\n\n<p>Why can't I use a public setter?</p>\n"}, {"tags": ["eclipse", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 4896540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87995a686ab93aa90a57360c43ea00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4896540/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1576982945, "creation_date": 1576982945, "answer_id": 59441300, "question_id": 59382455, "link": "https://stackoverflow.com/questions/59382455/does-the-eclipse-kotlin-plugin-compile-kotlin-code/59441300#59441300", "title": "Does the eclipse kotlin plugin compile kotlin code?", "body": "<p>Look at github, there is bundled compiler <a href=\"https://github.com/JetBrains/kotlin-eclipse/tree/master/kotlin-bundled-compiler\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin-eclipse/tree/master/kotlin-bundled-compiler</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 443, "user_id": 9378439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uRAIXKCAE-g/AAAAAAAAAAI/AAAAAAAAAJA/3p6Mreec-XI/photo.jpg?sz=128", "display_name": "daniel.jbatiz", "link": "https://stackoverflow.com/users/9378439/daniel-jbatiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1576992705, "creation_date": 1576992705, "answer_id": 59441846, "question_id": 59382455, "link": "https://stackoverflow.com/questions/59382455/does-the-eclipse-kotlin-plugin-compile-kotlin-code/59441846#59441846", "title": "Does the eclipse kotlin plugin compile kotlin code?", "body": "<p>Yes , you don't need an external compiler , Eclipse does it \n<a href=\"https://beginnersbook.com/2017/12/kotlin-in-eclipse-ide/\" rel=\"nofollow noreferrer\">https://beginnersbook.com/2017/12/kotlin-in-eclipse-ide/</a></p>\n"}, {"tags": [], "owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "is_accepted": true, "score": 1, "last_activity_date": 1576996361, "creation_date": 1576996361, "answer_id": 59442144, "question_id": 59382455, "link": "https://stackoverflow.com/questions/59382455/does-the-eclipse-kotlin-plugin-compile-kotlin-code/59442144#59442144", "title": "Does the eclipse kotlin plugin compile kotlin code?", "body": "<p>kotlin eclipse's <a href=\"https://github.com/JetBrains/kotlin-eclipse/blob/master/kotlin-bundled-compiler/build.properties\" rel=\"nofollow noreferrer\">build</a> includes kotlin compiler jars</p>\n\n<blockquote>\n<pre><code> lib/kotlin-compiler.jar,\\\n lib/allopen-compiler-plugin.jar,\\\n lib/kotlin-scripting-compiler.jar,\\\n lib/sam-with-receiver-compiler-plugin.jar,\\\n lib/noarg-compiler-plugin.jar,\\\n lib/kotlin-scripting-compiler-impl.jar,\\\n</code></pre>\n</blockquote>\n\n<p>And it uses special compilation using <a href=\"https://github.com/JetBrains/kotlin-eclipse/blob/master/docs/dev-documentation.md\" rel=\"nofollow noreferrer\">light files</a></p>\n\n<blockquote>\n  <p>Kotlin plugin generates so called \"light class files\": Kotlin source code translated to bytecode declarations without bodies. </p>\n  \n  <p>Light classes are stored only in virtual memory and are managed by a special file system (see KotlinFileSystem , KotlinFileStore), so they do not affect the runtime.</p>\n  \n  <p>This method generates bytecode for the light class by calling the Kotlin compiler in special mode (KotlinLightClassGeneration.buildLightClasses). Basically, this allows Java to see Kotlin sources as special binary dependency.</p>\n</blockquote>\n"}], "owner": {"reputation": 4854, "user_id": 446357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2374e43485f6caeb3302e66c327608e2?s=128&d=identicon&r=PG", "display_name": "MTilsted", "link": "https://stackoverflow.com/users/446357/mtilsted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 59442144, "answer_count": 3, "score": 1, "last_activity_date": 1576996361, "creation_date": 1576618553, "question_id": 59382455, "link": "https://stackoverflow.com/questions/59382455/does-the-eclipse-kotlin-plugin-compile-kotlin-code", "title": "Does the eclipse kotlin plugin compile kotlin code?", "body": "<p>Does the Eclipse Kotlin plugin compile kotlin code, or does it use the external kotlin compiler? </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1576614530, "post_id": 59381613, "comment_id": 104955187, "body": "Why do you use global variables for this anyway? That is really bad practice."}, {"owner": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1576615573, "post_id": 59381613, "comment_id": 104955611, "body": "@marstran I know but in this case ,when i declare it locally ( inside Onresponse method ) , i can&#39;t return it since the method is overrided and mustn&#39;t return anything"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1576617792, "post_id": 59381613, "comment_id": 104956481, "body": "But there&#39;s better ways to capture the result of a network call..."}, {"owner": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1576618122, "post_id": 59381613, "comment_id": 104956653, "body": "client.newCall(request).enqueue(...) is asynchronous. You cant call places.execute() and the immediately expect the result in places.GetData(). You should use reactive or callback approach."}, {"owner": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1576618388, "post_id": 59381613, "comment_id": 104956766, "body": "You can use val response = client.newCall(request).execute(), but it needs to be called in non main thread."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "edited": false, "score": 0, "creation_date": 1576761185, "post_id": 59382098, "comment_id": 105007991, "body": "That is the right solution , now what to modify to make execute function return this HomeFeed"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "edited": false, "score": 0, "creation_date": 1576761491, "post_id": 59382098, "comment_id": 105008129, "body": "It can\u2019t return it because functions return immediately and it is doing something that takes a while in a background thread. (It could be written to be a blocking call but that will freeze the UI and cause an ANR crash.) You can assign the value to a variable using the callback where I marked \u201cdo something with HomeFeed\u201d. This is where you would continue your logic flow of handling the response."}, {"owner": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "edited": false, "score": 0, "creation_date": 1576762447, "post_id": 59382098, "comment_id": 105008648, "body": "The issue is that i want to make all handling outside (places.execute{ }) , all handling is based on this homeFeedData, when i assign the value to a var variable,as you mentioned, inside the &quot;.execute&quot; and want to recover it outside , i find the variable unchanged"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "edited": false, "score": 1, "creation_date": 1576763441, "post_id": 59382098, "comment_id": 105009202, "body": "Sounds like you are making the same mistake as you originally did. If you check the variable immediately, it hasn&#39;t been updated yet. To do what you&#39;re describing, you would have to use coroutines, which allow functions to be suspended and then later continue where they left off when some background task is completed. It looks like someone has written a <a href=\"https://github.com/gildor/kotlin-coroutines-okhttp\" rel=\"nofollow noreferrer\">helper library for OkHttp</a> to use coroutines. Coroutines in general are not trivial to learn but can lead to much cleaner code."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "edited": false, "score": 1, "creation_date": 1576763607, "post_id": 59382098, "comment_id": 105009275, "body": "<a href=\"https://android.jlelse.eu/android-networking-in-2019-retrofit-with-kotlins-coroutines-aefe82c4d777\" rel=\"nofollow noreferrer\">Here&#39;s a tutorial</a> about using coroutines for networking on Android (I didn&#39;t read it so can&#39;t vouch for it)."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 5, "last_activity_date": 1576617700, "last_edit_date": 1576617700, "creation_date": 1576616911, "answer_id": 59382098, "question_id": 59381613, "link": "https://stackoverflow.com/questions/59381613/cannot-change-global-variable-value-in-kotlin/59382098#59382098", "title": "Cannot change global variable value in Kotlin", "body": "<p>You are calling <code>getData()</code> immediately after making the async request, so it hasn't had a chance to be updated. Asynchronous functions do not immediately return. Some background thread does something (a network request), and in this case calls <code>onResponse</code> when the result is returned some time in the future.</p>\n\n<p>It's just like the listener on your button. The code in the listener isn't run immediately, but some time in the future when the user presses it.</p>\n\n<p>Instead of using this member property, your function can take a callback parameter that it invokes when the result is ready:</p>\n\n<pre><code>fun execute(resultHandler: (HomeFeed) -&gt; Unit) {\n    //... snip ...\n\n    client.newCall(request).enqueue(object : Callback {\n        // ... snip ...\n        override fun onResponse(call: Call, response: Response) {\n            val ch = response?.body?.string()\n            val gson = GsonBuilder().create()\n            resultHandler(gson.fromJson(ch, HomeFeed::class.java))\n        }\n    })\n\n}\n</code></pre>\n\n<p>Then when you call it, you pass a lambda that will be called when the result is ready:</p>\n\n<pre><code>   btn.setOnClickListener {\n      val destination = \"destination\"\n      val places = FetchData(destination)\n      places.execute { homeFeedData -&gt;\n          // Do something with homeFeedData when it arrives\n      }\n   }\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 11787287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf697c178c44c0d2e640c985f54df89?s=128&d=identicon&r=PG&f=1", "display_name": "Hamdi ", "link": "https://stackoverflow.com/users/11787287/hamdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "accepted_answer_id": 59382098, "answer_count": 1, "score": 2, "last_activity_date": 1576617700, "creation_date": 1576614356, "last_edit_date": 1576617646, "question_id": 59381613, "link": "https://stackoverflow.com/questions/59381613/cannot-change-global-variable-value-in-kotlin", "title": "Cannot change global variable value in Kotlin", "body": "<p>I am changing a <strong>global variable</strong> value inside a method and trying to return it later .</p>\n\n<p><strong>In FetchData.kt ( The called class )</strong> </p>\n\n<pre><code>var homeFeed: HomeFeed? = null     // the variable that needs to be changed \n\nfun execute() {\n\n\n    val client = OkHttpClient()\n    val url =\n        \"...\"\n    val request = Request.Builder().url(url).build()\n\n    val res = client.newCall(request).enqueue(object : Callback {\n\n        override fun onFailure(call: Call, e: IOException) {\n\n            e.printStackTrace()\n\n        }\n\n        override fun onResponse(call: Call, response: Response) {\n\n            val ch = response?.body?.string()\n\n            val gson = GsonBuilder().create()\n            homeFeed= gson.fromJson(ch, HomeFeed::class.java)  // where the change happens\n\n        }\n\n    })\n\n}\n\n   fun GetData(): HomeFeed? {\n\n       return homeFeed\n   } \n</code></pre>\n\n<p><strong>In MainActivity.kt</strong></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n   btn.setOnClickListener {\n\n      val  destination = \"destination\"\n\n      val places = FetchData(destination)\n\n      places.execute()\n      val data = places.GetData()\n   }\n}\n</code></pre>\n\n<p>The problem is that a <strong>Null</strong> value is assigned to \"data\" variable in <strong>MainActivity</strong> as if the returned \"homeFeed\" variable wasn't changed at all .</p>\n\n<p>I <strong>debugged</strong> the code to get ensured that no errors occur with api call and the <strong>variable</strong> is changed inside the method <strong>( but not outside it! )</strong></p>\n\n<p>I am really stuck with that , any help ?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 12475675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-miQ0Ie4GuqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYhcZi7CgnTgxMQUvpmLMKEUFPg/photo.jpg?sz=128", "display_name": "Lucas Meneghin", "link": "https://stackoverflow.com/users/12475675/lucas-meneghin"}, "is_accepted": false, "score": 3, "last_activity_date": 1576615516, "creation_date": 1576615516, "answer_id": 59381825, "question_id": 59381585, "link": "https://stackoverflow.com/questions/59381585/why-is-dao-defined-as-fun-in-roomdatabase/59381825#59381825", "title": "Why is DAO defined as fun in RoomDatabase?", "body": "<p>Ok, i checked Decompiled bytecode and the only difference is that first implementation is named as </p>\n\n<pre><code>subscriptionStatusDao()\n</code></pre>\n\n<p>and the second one as </p>\n\n<pre><code>getSubscriptionStatusDao()\n</code></pre>\n\n<p>So basically, no difference at all.</p>\n"}], "owner": {"reputation": 53, "user_id": 12475675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-miQ0Ie4GuqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYhcZi7CgnTgxMQUvpmLMKEUFPg/photo.jpg?sz=128", "display_name": "Lucas Meneghin", "link": "https://stackoverflow.com/users/12475675/lucas-meneghin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576615516, "creation_date": 1576614193, "last_edit_date": 1576614993, "question_id": 59381585, "link": "https://stackoverflow.com/questions/59381585/why-is-dao-defined-as-fun-in-roomdatabase", "title": "Why is DAO defined as fun in RoomDatabase?", "body": "<p>In Android sample codes/codelabs, Daos inside RoomDatabase are defined as </p>\n\n<pre><code>abstract fun genericDao(): GenericDao\n</code></pre>\n\n<p>and when you need to access the dao's methods, you call</p>\n\n<pre><code>database.genericDao().genericFun()\n</code></pre>\n\n<p>Why is it implemented like this, and not like</p>\n\n<pre><code>abstract val genericDao: GenericDao\ndatabase.genericDao.genericFun()\n</code></pre>\n\n<p>? Is it wrong to do it the second way?</p>\n\n<p><a href=\"https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#6\" rel=\"nofollow noreferrer\">Link to Codelab</a></p>\n"}, {"tags": ["java", "kotlin", "lambda", "overloading"], "comments": [{"owner": {"reputation": 2550, "user_id": 3787777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bb9764582914276c8f48944d7c3f8ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Coderino Javarino", "link": "https://stackoverflow.com/users/3787777/coderino-javarino"}, "edited": false, "score": 0, "creation_date": 1576613814, "post_id": 59381333, "comment_id": 104954924, "body": "what is the type of <code>allStrings</code>"}, {"owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "reply_to_user": {"reputation": 2550, "user_id": 3787777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bb9764582914276c8f48944d7c3f8ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Coderino Javarino", "link": "https://stackoverflow.com/users/3787777/coderino-javarino"}, "edited": false, "score": 0, "creation_date": 1576614100, "post_id": 59381333, "comment_id": 104955022, "body": "<code>ArrayList&lt;StringRequest&gt;</code>. I&#39;ve added the appropriate line above."}, {"owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "reply_to_user": {"reputation": 2550, "user_id": 3787777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bb9764582914276c8f48944d7c3f8ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Coderino Javarino", "link": "https://stackoverflow.com/users/3787777/coderino-javarino"}, "edited": false, "score": 0, "creation_date": 1576614692, "post_id": 59381333, "comment_id": 104955241, "body": "This answer seems relevant: <a href=\"https://stackoverflow.com/a/21951311/4854152\">stackoverflow.com/a/21951311/4854152</a>"}, {"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1576620787, "post_id": 59381333, "comment_id": 104957661, "body": "What happens if you change <code>(it) -&gt; this.collectResults(it)</code> to <code>this::collectResults</code> ?"}, {"owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "reply_to_user": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1576623460, "post_id": 59381333, "comment_id": 104958424, "body": "@ErwinBolwidt &quot;can&#39;t resolve for this context&quot;. Signatures don&#39;t match, I assume."}], "answers": [{"tags": [], "owner": {"reputation": 4196, "user_id": 7653073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xjiZj.jpg?s=128&g=1", "display_name": "Malte Hartwig", "link": "https://stackoverflow.com/users/7653073/malte-hartwig"}, "is_accepted": true, "score": 1, "last_activity_date": 1576648386, "last_edit_date": 1576648386, "creation_date": 1576635156, "answer_id": 59384555, "question_id": 59381333, "link": "https://stackoverflow.com/questions/59381333/can-java-8-overloads-differentiate-between-function-parameter-argument-types/59384555#59384555", "title": "Can Java 8 overloads differentiate between function parameter argument types?", "body": "<p>I played with your code and found that IntelliJ tripped over the type of the lambda as a whole. I had to cast <code>it -&gt; this.collectResults(it)</code> to the type Kotlin was expecting:</p>\n\n<pre><code>List&lt;StringRequest&gt; allStrings = new ArrayList&lt;&gt;();\nFlux&lt;UserReadAuthorizations&gt; test = authCheck.isFluxAuthorizedFor(\n    allStrings,\n    (Function1&lt;List&lt;StringResult&gt;, Flux&lt;AuthorizedStrings&gt;&gt;) (it -&gt; this.collectResults(it))\n);\n</code></pre>\n\n<p>The signature of your methods themselves was not an issue. Hope this helps you in STS as well.</p>\n"}], "owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 59384555, "answer_count": 1, "score": 2, "last_activity_date": 1576648386, "creation_date": 1576612990, "last_edit_date": 1576614197, "question_id": 59381333, "link": "https://stackoverflow.com/questions/59381333/can-java-8-overloads-differentiate-between-function-parameter-argument-types", "title": "Can Java 8 overloads differentiate between function parameter argument types?", "body": "<p>I am injecting a kotlin class into my java code. The kotlin class has two methods with nearly identical signatures:</p>\n\n<pre><code>fun &lt;R&gt; isFluxAuthorizedFor(\n                strings: List&lt;StringRequest&gt;,\n                then: (responses: List&lt;StringResult&gt;) -&gt; Flux&lt;R&gt;\n        ): Flux&lt;R&gt; \n</code></pre>\n\n<p>and</p>\n\n<pre><code>fun &lt;R&gt; isFluxAuthorizedFor(\n                string: StringRequest,\n                then: (per: StringResult) -&gt; Flux&lt;R&gt;\n        ): Flux&lt;R&gt; {\n</code></pre>\n\n<p>The kotlin class supports this overloading just fine.</p>\n\n<p>However, I'm having a devil of a time getting my IDE to use the correct method. I have a method which matches the signature of the former:</p>\n\n<pre><code>private Flux&lt;AuthorizedStrings&gt; collectResults(List&lt;StringResult&gt; responses)\n    {\n        //not yet implemented\n        return null;            \n    }\n</code></pre>\n\n<p>And yet, when I try and call the injected class' method, I get compilation errors:</p>\n\n<pre><code>List&lt;StringRequest&gt; allStrings = new ArrayList&lt;StringRequest&gt;();\nFlux&lt;UserReadAuthorizations&gt; test =  authCheck.isFluxAuthorizedFor(allStrings, (it) -&gt; this.collectResults(it) ); \n</code></pre>\n\n<p>The IDE makes two suggestions: </p>\n\n<pre><code>\"change type of 'it' to 'List&lt;StringResult&gt;'\"\n\n\"change method 'collectResults(List&lt;StringResult&gt;)' to 'collectResults(StringResult)'\"\n</code></pre>\n\n<p>both of which imply that Java (or at least the compiler) can't figure out that I'm trying to call the <em>other</em> method. Is this a problem trying to integrate Java 8 and Kotlin? A quirk of the IDE? (I'm using Spring Tool Suite) Some silly user error that I've not yet been able to rubber-duck through?</p>\n"}, {"tags": ["android", "kotlin", "android-library", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 155, "user_id": 1170806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbb219445a47bb3860118fd51c29fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Quantum_VC", "link": "https://stackoverflow.com/users/1170806/quantum-vc"}, "edited": false, "score": 1, "creation_date": 1576654380, "post_id": 59381060, "comment_id": 104965398, "body": "<a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/657#issuecomment-450914323\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/issues/&hellip;</a>"}, {"owner": {"reputation": 2616, "user_id": 656390, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/To7xQ.jpg?s=128&g=1", "display_name": "aman.nepid", "link": "https://stackoverflow.com/users/656390/aman-nepid"}, "reply_to_user": {"reputation": 155, "user_id": 1170806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbb219445a47bb3860118fd51c29fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Quantum_VC", "link": "https://stackoverflow.com/users/1170806/quantum-vc"}, "edited": false, "score": 0, "creation_date": 1576688528, "post_id": 59381060, "comment_id": 104982912, "body": "@Quantum_VC: I have :   <code># region Coroutine # ServiceLoader support -keepnames class kotlinx.coroutines.internal.MainDispatcherFactory {} -keepnames class kotlinx.coroutines.CoroutineExceptionHandler {} -keepnames class kotlinx.coroutines.android.AndroidExceptionPreHandler {} -keepnames class kotlinx.coroutines.android.AndroidDispatcherFactory {}  # Most of volatile fields are updated with AFU and should not be mangled -keepclassmembernames class kotlinx.** {     volatile &lt;fields&gt;; } # endregion Coroutine</code>  In my pro guard files but still no success"}], "answers": [{"comments": [{"owner": {"reputation": 16195, "user_id": 3806413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MgI5b.jpg?s=128&g=1", "display_name": "0xAliHn", "link": "https://stackoverflow.com/users/3806413/0xalihn"}, "reply_to_user": {"reputation": 2616, "user_id": 656390, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/To7xQ.jpg?s=128&g=1", "display_name": "aman.nepid", "link": "https://stackoverflow.com/users/656390/aman-nepid"}, "edited": false, "score": 0, "creation_date": 1576687907, "post_id": 59381599, "comment_id": 104982598, "body": "Did you use the dependency I shared?"}, {"owner": {"reputation": 2616, "user_id": 656390, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/To7xQ.jpg?s=128&g=1", "display_name": "aman.nepid", "link": "https://stackoverflow.com/users/656390/aman-nepid"}, "edited": false, "score": 0, "creation_date": 1576688455, "post_id": 59381599, "comment_id": 104982875, "body": "Yes. They are:   implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.2.1&quot;     implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.2.1&quot;"}], "tags": [], "owner": {"reputation": 16195, "user_id": 3806413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MgI5b.jpg?s=128&g=1", "display_name": "0xAliHn", "link": "https://stackoverflow.com/users/3806413/0xalihn"}, "is_accepted": false, "score": 7, "last_activity_date": 1576614258, "creation_date": 1576614258, "answer_id": 59381599, "question_id": 59381060, "link": "https://stackoverflow.com/questions/59381060/noclassdeffounderror-failed-resolution-of-lkotlinx-coroutines-dispatchers/59381599#59381599", "title": "NoClassDefFoundError: Failed resolution of: Lkotlinx/coroutines/Dispatchers", "body": "<p>Can you please use this version and try again:</p>\n\n<pre><code>kotlin_coroutinesVersion = \"1.2.1\"\n\nimplementation \"org.jetbrains.kotlinx:kotlinx-coroutines-core:$kotlin_coroutinesVersion\"\nimplementation \"org.jetbrains.kotlinx:kotlinx-coroutines-android:$kotlin_coroutinesVersion\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12518197, "user_type": "registered", "profile_image": "https://graph.facebook.com/2521499487948435/picture?type=large", "display_name": "Orest Hredil", "link": "https://stackoverflow.com/users/12518197/orest-hredil"}, "is_accepted": false, "score": 1, "last_activity_date": 1581613079, "creation_date": 1581613079, "answer_id": 60213020, "question_id": 59381060, "link": "https://stackoverflow.com/questions/59381060/noclassdeffounderror-failed-resolution-of-lkotlinx-coroutines-dispatchers/60213020#60213020", "title": "NoClassDefFoundError: Failed resolution of: Lkotlinx/coroutines/Dispatchers", "body": "<p>ClassNotFoundException can appears due to wrong generation of pox.xml file, which contains dependencies graph of the library, here is a script for publishing library to local maven repo and generating pom.xml file:</p>\n\n<p><a href=\"https://gist.github.com/Robyer/a6578e60127418b380ca133a1291f017\" rel=\"nofollow noreferrer\">https://gist.github.com/Robyer/a6578e60127418b380ca133a1291f017</a></p>\n\n<p>For applying it to library need to add publishMavenLocal.gradle to library project and put this line at the bottom of library build.gradle: apply from: 'publishMavenLocal.gradle'.</p>\n\n<p>Also for testing it from local maven repo there should be additional identificator in test app gradle file -  transitive = true, like this:</p>\n\n<p><code>implementation ('com.example.android:library:0.0.1-library@aar') { transitive = true }</code></p>\n"}, {"tags": [], "owner": {"reputation": 2616, "user_id": 656390, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/To7xQ.jpg?s=128&g=1", "display_name": "aman.nepid", "link": "https://stackoverflow.com/users/656390/aman-nepid"}, "is_accepted": true, "score": 0, "last_activity_date": 1582125252, "creation_date": 1582125252, "answer_id": 60303444, "question_id": 59381060, "link": "https://stackoverflow.com/questions/59381060/noclassdeffounderror-failed-resolution-of-lkotlinx-coroutines-dispatchers/60303444#60303444", "title": "NoClassDefFoundError: Failed resolution of: Lkotlinx/coroutines/Dispatchers", "body": "<p>After sometime with help of link posted by @orest-herdil above, I figured out the issue was the dependency of my library module were not added in the POM file generated while bundling the AAR file. So I updated my maven publish code as: </p>\n\n<pre><code>publishing {\n    publications {\n        aar(MavenPublication) {\n            groupId \"com.mylibrary\"\n            version \"1.1.1\"\n            artifactId \"awesome\"\n\n            artifact(\"$buildDir/outputs/aar/${project.getName()}-release.aar\")\n\n            pom.withXml {\n                def dependenciesNode = asNode().appendNode('dependencies')\n                configurations.implementation.allDependencies.each { dependency -&gt;\n                    final dependencyNode = dependenciesNode.appendNode('dependency')\n                    dependencyNode.appendNode('groupId', dependency.group)\n                    dependencyNode.appendNode('artifactId', dependency.name)\n                    dependencyNode.appendNode('version', dependency.version)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The part <strong>pom.withXml { .... }</strong> will go through all the dependency in my library module and add them in generating <strong>POM</strong> file one by one. As of now the compile is already deprecated, I am going through <strong>implementation</strong> dependency only. </p>\n"}], "owner": {"reputation": 2616, "user_id": 656390, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/To7xQ.jpg?s=128&g=1", "display_name": "aman.nepid", "link": "https://stackoverflow.com/users/656390/aman-nepid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2722, "favorite_count": 0, "accepted_answer_id": 60303444, "answer_count": 3, "score": 2, "last_activity_date": 1582125252, "creation_date": 1576611719, "question_id": 59381060, "link": "https://stackoverflow.com/questions/59381060/noclassdeffounderror-failed-resolution-of-lkotlinx-coroutines-dispatchers", "title": "NoClassDefFoundError: Failed resolution of: Lkotlinx/coroutines/Dispatchers", "body": "<p>I have a library that uses Kotlin Coroutines and uses the CoroutineScope as </p>\n\n<pre><code>private val coroutineScope by lazy(mode = LazyThreadSafetyMode.NONE) {\n        CoroutineScope(Dispatchers.Main)\n    }\n</code></pre>\n\n<p>When I use the library in other projects I am getting error: </p>\n\n<pre><code>com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"kotlinx.coroutines.Dispatchers\" on path: DexPathList[[zip file \"/data/app/com.ssss.ssss-X44QPiLhKdl-D6eyVAYkOA==/base.apk\"],nativeLibraryDirectories=[/data/app/com.ssss.testauthenticater-X44QPiLhKdl-D6eyVAYkOA==/lib/x86, /system/lib, /system/product/lib]]\n</code></pre>\n\n<p>I have added <code>-keepnames class kotlinx.** { *; }\n</code> in my consumer pro guard file as well. </p>\n\n<p>Does anyone have similar issue? I am using coroutine 1.3.3 in android.</p>\n"}, {"tags": ["android", "kotlin", "gson"], "comments": [{"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1576610068, "post_id": 59380689, "comment_id": 104953325, "body": "Any chance that there&#39;s a null element in your list? That is, rather than <code>List&lt;Condition&gt;</code>, perhaps it should be <code>List&lt;Condition?&gt;</code>"}, {"owner": {"reputation": 16195, "user_id": 3806413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MgI5b.jpg?s=128&g=1", "display_name": "0xAliHn", "link": "https://stackoverflow.com/users/3806413/0xalihn"}, "edited": false, "score": 0, "creation_date": 1576614682, "post_id": 59380689, "comment_id": 104955235, "body": "You should have another <code>Conditions</code> data class where you can make the properties nullable those might be null response."}, {"owner": {"reputation": 2613, "user_id": 1593765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c867258eab81ec72389b0712d1df181?s=128&d=identicon&r=PG", "display_name": "bmueller", "link": "https://stackoverflow.com/users/1593765/bmueller"}, "edited": false, "score": 0, "creation_date": 1576636116, "post_id": 59380689, "comment_id": 104960971, "body": "I tried setting every single item in my data classes to nullable, and I&#39;m still seeing the crash. I will update the question with the crash log to see if that helps narrow things down at all."}], "answers": [{"tags": [], "owner": {"reputation": 2613, "user_id": 1593765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c867258eab81ec72389b0712d1df181?s=128&d=identicon&r=PG", "display_name": "bmueller", "link": "https://stackoverflow.com/users/1593765/bmueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1576717151, "creation_date": 1576717151, "answer_id": 59402012, "question_id": 59380689, "link": "https://stackoverflow.com/questions/59380689/nullpointerexception-with-kotlin-list-object-gson/59402012#59402012", "title": "NullPointerException with Kotlin List object / GSON", "body": "<p>I have no idea why, but turning off minifyEnabled and turning on multidexEnabled in my release build settings fixed this bug. Glad I spent 3 whole days on this.</p>\n"}], "owner": {"reputation": 2613, "user_id": 1593765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c867258eab81ec72389b0712d1df181?s=128&d=identicon&r=PG", "display_name": "bmueller", "link": "https://stackoverflow.com/users/1593765/bmueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576717151, "creation_date": 1576609995, "last_edit_date": 1576636282, "question_id": 59380689, "link": "https://stackoverflow.com/questions/59380689/nullpointerexception-with-kotlin-list-object-gson", "title": "NullPointerException with Kotlin List object / GSON", "body": "<p>I'm using GSON to parse JSON from a web service. I don't have any issues with this on my test device or in the simulator, but I'm getting NullPointerException crashes in the Pre-Launch Report testing on the Play Console when I try to access one of the List objects.</p>\n\n<p>I've tried checking the object for null before accessing it, but I'm still seeing the crash in the Pre-Launch Reports.</p>\n\n<p>Here's the Hourly data class which contains the List object that's causing the crash:</p>\n\n<pre><code>data class Hourly(\n    @SerializedName(\"data\") val data: List&lt;Conditions&gt; = listOf(),\n    @SerializedName(\"summary\") val summary: String = \"\" //Partly cloudy in the evening\n)\n</code></pre>\n\n<p>Here's where I'm accessing the object (with a bunch of extra checks to make sure the objects aren't null before accessing them):</p>\n\n<pre><code>if (forecastData == null || forecastData?.currently == null || forecastData?.hourly == null || forecastData?.hourly?.data == null)\n    return\n\nval hourlyData = forecastData?.hourly?.data ?: return\nif (forecastData?.hourly != null &amp;&amp; forecastData?.hourly?.data != null &amp;&amp; hourlyData.count() &gt; 2) {\n    val nextHour = hourlyData[1]\n    pressure = nextHour.pressure\n}\n</code></pre>\n\n<p>One other thing to note is that this code was all working fine for the past year, but when I updated the app to API 28 and Kotlin 1.3.50 this crash started happening.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I tried setting pretty much every object in my data model class to nullable, but I'm still getting the crash. Here's the end of the crash log, in case that is helpful:</p>\n\n<pre><code> FATAL EXCEPTION: main\n Process: com.xxx.xxxx, PID: 27844\n java.lang.NullPointerException: throw with null exception\n    at com.xxx.xxxx.model.Hourly.getData(Hourly.java:3)\n    at com.xxx.xxxx.view.UserInterface.updateCurrently(UserInterface.java:38)\n</code></pre>\n\n<p>I assume based on this that I am supposed to check for null on hourly.data...</p>\n"}, {"tags": ["android", "kotlin", "mvvm", "android-mvvm"], "answers": [{"tags": [], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1576604059, "creation_date": 1576604059, "answer_id": 59379367, "question_id": 59379305, "link": "https://stackoverflow.com/questions/59379305/nosuchmethodexception-trying-to-instantiate-viewmodel/59379367#59379367", "title": "NoSuchMethodException trying to instantiate ViewModel", "body": "<p>Changed my implementation to</p>\n\n<pre><code>class LoginVMFactory(private val useCase: PostUserToken):ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return modelClass.getConstructor(PostUserToken::class.java).newInstance(useCase)\n    }\n}\n</code></pre>\n\n<p>and then in my view</p>\n\n<pre><code>private val viewModel by lazy { ViewModelProviders.of(this, LoginVMFactory(PostUserTokenImpl(UserRepoImpl()))).get(LoginViewModel::class.java) }\n</code></pre>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576604059, "creation_date": 1576603775, "question_id": 59379305, "link": "https://stackoverflow.com/questions/59379305/nosuchmethodexception-trying-to-instantiate-viewmodel", "title": "NoSuchMethodException trying to instantiate ViewModel", "body": "<p>I'm trying to instantiate my viewmodel but I get this error</p>\n\n<blockquote>\n  <p>Caused by: java.lang.NoSuchMethodException:  [class\n  com.test.domain.PostUserTokenImpl]    at\n  java.lang.Class.getConstructor0(Class.java:2327)\n          at java.lang.Class.getConstructor(Class.java:1725)\n          at com.test.presentation.viewmodel.LoginVMFactory.create(LoginVMFactory.kt:13)</p>\n</blockquote>\n\n<p>I try to do an instance of my ViewModel which holds and interface</p>\n\n<h2>view</h2>\n\n<pre><code>private val viewModel by lazy { ViewModelProviders.of(this, LoginVMFactory(PostUserTokenImpl(UserRepoImpl()))).get(LoginViewModel::class.java) }\n</code></pre>\n\n<h2>LoginVMFactory</h2>\n\n<pre><code>class LoginVMFactory(private val useCase: PostUserTokenImpl):ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return modelClass.getConstructor(PostUserTokenImpl::class.java).newInstance(useCase)\n    }\n}\n</code></pre>\n\n<h2>LoginViewModel</h2>\n\n<pre><code>class LoginViewModel(private val useCase: PostUserToken): ViewModel() {\n ...\n}\n</code></pre>\n\n<h2>PostUserToken</h2>\n\n<pre><code>interface PostUserToken {\n\n    suspend fun postUserToken(user: User): Resource&lt;Boolean&gt;\n}\n</code></pre>\n\n<h2>PostUserTokenImpl</h2>\n\n<pre><code>class PostUserTokenImpl(private val repo: UserRepo): PostUserToken {\n\n   override suspend fun postUserToken(user:User):Resource&lt;Boolean&gt; = repo.saveUserToken(user)\n\n}\n</code></pre>\n\n<p>Any Idea why is this happening ? I suspect that is maybe because we cant instantiate with interfaces our viewmodels ?</p>\n"}, {"tags": ["java", "multithreading", "kotlin", "javafx"], "comments": [{"owner": {"reputation": 10057, "user_id": 2423906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkpYv.jpg?s=128&g=1", "display_name": "Sedrick", "link": "https://stackoverflow.com/users/2423906/sedrick"}, "edited": false, "score": 1, "creation_date": 1576603826, "post_id": 59379148, "comment_id": 104950645, "body": "<a href=\"https://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm\" rel=\"nofollow noreferrer\">docs.oracle.com/javafx/2/threads/jfxpub-threads.htm</a>. One thing you can do is bind properties. Another thing you can do is update the GUI in the <code>Task</code> <code>succeeded</code> method. The last option is to use <code>Platform.runLater()</code> to update GUI nodes in the Thread. I would not recommend the last because if you miss something, your code will be unpredicatable."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1576604124, "post_id": 59379148, "comment_id": 104950779, "body": "FWIW, <i>most</i> GUI frameworks have some kind of a perform-this-task-later-in-the-GUI-thread(...) function, similar to the <code>Platform.runLater()</code> that Sedrick mentioned. Sending messages in the other direction, from GUI event handlers to a specific background thread, can be more of a do-it-yourself affair."}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1576605512, "post_id": 59379148, "comment_id": 104951413, "body": "Ultimately this is accomplished with <code>Platform#runLater(Runnable)</code>, as mentioned by both Sedrick and Solomon. There may be higher level APIs available that add layers of abstraction, such as <code>javafx.concurrent.Task</code>. That class has methods (e.g. <code>#updateMessage(String)</code>) which can be called from the background thread executing the <code>Task</code> in order to update properties on the FX thread (it also coalesces updates to avoid flooding the FX thread)\u2014but even <code>Task</code> uses <code>runLater</code> eventually. Since you&#39;re using Kotlin you may want to look into <i>TornadoFX</i> as that may add some convenient API."}, {"owner": {"reputation": 67, "user_id": 12091979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7d13dbe2eab7c40d23e40b45eaa3e3?s=128&d=identicon&r=PG&f=1", "display_name": "iffuw", "link": "https://stackoverflow.com/users/12091979/iffuw"}, "edited": false, "score": 0, "creation_date": 1576607606, "post_id": 59379148, "comment_id": 104952357, "body": "Wow, thanks for the quick repies. I have a completely separate class, that runs the thread, which should update the GUI. At the moment I don&#39;t get how I should use the runLater() since I have no access to the relevant GUI elements from the thread class. Could anyone clarify thar, maybe with a small code example.   However binding might work in my case..."}, {"owner": {"reputation": 67, "user_id": 12091979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7d13dbe2eab7c40d23e40b45eaa3e3?s=128&d=identicon&r=PG&f=1", "display_name": "iffuw", "link": "https://stackoverflow.com/users/12091979/iffuw"}, "edited": false, "score": 0, "creation_date": 1576609446, "post_id": 59379148, "comment_id": 104953081, "body": "Okay, got it, thanks. Still open: I have a completely separate class, that runs the thread, which should update the GUI. At the moment I don&#39;t get how I should use the runLater() since I have no access to the relevant GUI elements from the thread class. Could anyone clarify thar, maybe with a small code example."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 12091979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7d13dbe2eab7c40d23e40b45eaa3e3?s=128&d=identicon&r=PG&f=1", "display_name": "iffuw", "link": "https://stackoverflow.com/users/12091979/iffuw"}, "edited": false, "score": 0, "creation_date": 1576747387, "post_id": 59380876, "comment_id": 105001247, "body": "Thanks again. Just to clarify: If I&#39;m doing some stuff in another Thread than the FX application thread, I need Platform.runLater(), okay. But I&#39;m not quite sure on the stuff happening in the controller of the current scene. Do I need runLater() within the controller as well?"}], "tags": [], "owner": {"reputation": 129471, "user_id": 1155209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=128&d=identicon&r=PG", "display_name": "jewelsea", "link": "https://stackoverflow.com/users/1155209/jewelsea"}, "is_accepted": true, "score": 2, "last_activity_date": 1576621108, "last_edit_date": 1576621108, "creation_date": 1576610882, "answer_id": 59380876, "question_id": 59379148, "link": "https://stackoverflow.com/questions/59379148/how-to-communicate-between-a-thread-and-the-gui/59380876#59380876", "title": "How to communicate between a thread and the GUI", "body": "<p><strong>Use <code>Platform.runLater</code></strong></p>\n\n<p>When not on the JavaFX thread, use <a href=\"https://openjfx.io/javadoc/13/javafx.graphics/javafx/application/Platform.html#runLater(java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>Platform.runLater</code></a> to invoke a method which will ultimately update the GUI.</p>\n\n<p>Doing this will schedule the code wrapped in <code>runLater</code> to execute later on the JavaFX application thread.  </p>\n\n<p>As the JavaFX system is designed as a single-threaded system, this is necessary to allow the system to work consistently.</p>\n\n<p><strong>Higher level concurrency support in JavaFX</strong></p>\n\n<p>JavaFX also has <a href=\"https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/concurrency.htm\" rel=\"nofollow noreferrer\">higher level concurrency support</a> using things such as <a href=\"https://openjfx.io/javadoc/13/javafx.graphics/javafx/concurrent/Task.html\" rel=\"nofollow noreferrer\"><code>Task</code></a> which have some communication support via methods such as <a href=\"https://openjfx.io/javadoc/13/javafx.graphics/javafx/concurrent/Task.html#updateMessage(java.lang.String)\" rel=\"nofollow noreferrer\"><code>updateMessage</code></a>.  At an implementation level within Task, <code>updateMessage</code> just uses <code>Platform.runLater</code> internally, but includes some additional optimizations in its implementation to make it simple and efficient to use.</p>\n\n<p>Usually, Tasks and Platform.runLater have different (sometimes complementary) focuses, see <a href=\"https://stackoverflow.com/questions/18710039/javafx-difference-between-javafx-concurent-and-platform-runlater\">Javafx: Difference between javafx.concurent and Platform.runLater?</a>.  </p>\n\n<p>In particular, for your requirement of UDP servers listening on multiple ports and feeding info back to a GUI, likely invoking <code>runLater</code> directly is a more appropriate solution than using a JavaFX Task. </p>\n\n<p><strong>Answers to additional questions</strong></p>\n\n<blockquote>\n  <p>However binding might work in my case</p>\n</blockquote>\n\n<p>Do not use bindings, modify properties or trigger change listeners from another thread without wrapping the call in a <code>Platform.runLater</code> call. </p>\n\n<p>Binding and change listeners are not designed to work in a multi-threaded environment (for example if you concurrently modify the bindings or change listeners on different threads, the outcome may be unpredictable). Plus, if your binding or change listeners ultimately trigger changes to the active scene graph off of the JavaFX application thread, the outcome, again, may be unpredictable, as the scene graph is not designed to be used in that way. </p>\n\n<blockquote>\n  <p>At the moment I don't get how I should use the runLater() since I have no access to the relevant GUI elements from the thread class.</p>\n</blockquote>\n\n<p>A few different options:</p>\n\n<ol>\n<li>Provide access to the GUI elements to the thread class, so it can modify them in a <code>runLater</code> call (this is a design modification for you) OR</li>\n<li>Have the thread class invoke a method on another class (via <code>runLater</code>) which does know about the GUI elements and can make the appropriate changes OR </li>\n<li>Use a shared model class with observable properties, which you have attached to a controller class that has established bindings or change listeners to update the UI based upon changes to the properties.  From your thread you should <a href=\"https://stackoverflow.com/questions/13796595/return-result-from-javafx-platform-runlater\">read</a> (see the link for a way to communicate from the GUI thread to another thread) and write the observable properties to the shared model class using <code>runLater</code>.</li>\n</ol>\n\n<p>As you see, in all cases, eventually <code>runLater</code> is used to schedule work which involves the GUI to be run later on the JavaFX thread, to enforce thread-safety within the system.  And in all cases, if you don't have direct access to the GUI elements, you need to communicate with something that does so that it can make any necessary modifications on your behalf.</p>\n"}], "owner": {"reputation": 67, "user_id": 12091979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7d13dbe2eab7c40d23e40b45eaa3e3?s=128&d=identicon&r=PG&f=1", "display_name": "iffuw", "link": "https://stackoverflow.com/users/12091979/iffuw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 59380876, "answer_count": 1, "score": 0, "last_activity_date": 1576621108, "creation_date": 1576603159, "question_id": 59379148, "link": "https://stackoverflow.com/questions/59379148/how-to-communicate-between-a-thread-and-the-gui", "title": "How to communicate between a thread and the GUI", "body": "<p>currently I' developing a desktop application with Kotlin and Java, the GUI is made with JavaFX.\nI have several basic UDP servers (Kotlin threads) listening to different ports to receive data over a network. The connections are working fine.</p>\n\n<p>I can think of several (more or less complicated) ways of communicating between the threads and the controller of the GUI, but I'm wondering if there is some kind of default approach to this, that I simply don't know.</p>\n\n<p>What I'm looking for is a simple way to send \"messages\" from a thread to the controller in order to change some text on a label or anything like that.</p>\n"}, {"tags": ["java", "android", "multithreading", "kotlin", "task"], "comments": [{"owner": {"reputation": 3081, "user_id": 2711811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc519c42e8a7c55c1e33af5ca6203f4?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2711811/andy"}, "edited": false, "score": 1, "creation_date": 1576603251, "post_id": 59379016, "comment_id": 104950384, "body": "Be sure to follow the exception chain to root cause: <code>com.google.firebase.auth.FirebaseAuthInvalidUserException:</code>"}, {"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "reply_to_user": {"reputation": 3081, "user_id": 2711811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc519c42e8a7c55c1e33af5ca6203f4?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2711811/andy"}, "edited": false, "score": 0, "creation_date": 1576603645, "post_id": 59379016, "comment_id": 104950565, "body": "i thought that user doesn&#39;t exist in the database."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8658321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cuWh.jpg?s=128&g=1", "display_name": "Md. Rabiul Ali Sarker", "link": "https://stackoverflow.com/users/8658321/md-rabiul-ali-sarker"}, "is_accepted": false, "score": 0, "last_activity_date": 1576907906, "creation_date": 1576907906, "answer_id": 59433842, "question_id": 59379016, "link": "https://stackoverflow.com/questions/59379016/how-to-fix-java-util-concurrent-executionexception/59433842#59433842", "title": "How to fix java.util.concurrent.ExecutionException:", "body": "<p>Change </p>\n\n<pre><code>val currentUser = auth.currentUser\n</code></pre>\n\n<p>to </p>\n\n<pre><code>val currentUser = FirebaseAuth.getInstance().currentUser\n</code></pre>\n\n<p>then check </p>\n\n<pre><code>if (currentUser != null) {\n     //your code here\n}\n</code></pre>\n\n<p>if my solution is not solve your issue then check it out that \nit said</p>\n\n<pre><code>Caused by: java.util.concurrent.ExecutionException: com.google.firebase.auth.FirebaseAuthInvalidUserException: The user's credential is no longer valid\n</code></pre>\n\n<p>so use a valid login credential.</p>\n"}], "owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576907906, "creation_date": 1576602582, "last_edit_date": 1576906865, "question_id": 59379016, "link": "https://stackoverflow.com/questions/59379016/how-to-fix-java-util-concurrent-executionexception", "title": "How to fix java.util.concurrent.ExecutionException:", "body": "<p>I saw some crash reports on Google Play Android vitals coming from this code:</p>\n\n<pre><code>val currentUser = auth.currentUser\n\n            if (currentUser != null) {\n                sessionToken = Tasks.await(currentUser.getIdToken(true)).token\n                newRequest = request\n                        .newBuilder()\n                        .header(AUTHORIZATION, \"$BEARER $sessionToken\")\n                        .build()\n            } else {\n                newRequest = request\n                        .newBuilder()\n                        .build()\n            }\n</code></pre>\n\n<p>the line with the issue is this: <strong>sessionToken = Tasks.await(currentUser.getIdToken(true)).token</strong></p>\n\n<p>auth is FirebaseUser object. The code is in an interceptor and it adds the authorization token for the requests that need it.</p>\n\n<p>I am not sure how to fix this. I am thinking of wrap all the code with </p>\n\n<pre><code>syncronized(this) {\n       //here goes the code\n}\n</code></pre>\n\n<p>but I am not sure if this will fix my problem.</p>\n\n<p>Full stacktrace:</p>\n\n<pre><code>    java.lang.Error: \n      at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1173)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:641)\n      at java.lang.Thread.run (Thread.java:764)\n    Caused by: java.util.concurrent.ExecutionException: \n      at com.google.android.gms.tasks.Tasks.zzb (Unknown Source:61)\n      at com.google.android.gms.tasks.Tasks.await (Unknown Source:23)\n      at com.cofedistrict.data.remote.interceptors.TokenHeaderInterceptor.intercept (TokenHeaderInterceptor.kt:37)\n      at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:147)\n      at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:121)\n      at okhttp3.logging.HttpLoggingInterceptor.intercept (HttpLoggingInterceptor.java:213)\n      at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:147)\n      at okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:121)\n      at okhttp3.RealCall.getResponseWithInterceptorChain (RealCall.java:200)\n      at okhttp3.RealCall$AsyncCall.execute (RealCall.java:147)\n      at okhttp3.internal.NamedRunnable.run (NamedRunnable.java:32)\n      at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1167)\n Caused by: java.util.concurrent.ExecutionException: com.google.firebase.auth.FirebaseAuthInvalidUserException: The user's credential is no longer valid. The user must sign in again.\n      at com.google.firebase.auth.api.internal.zzdx.zza\n      at com.google.firebase.auth.api.internal.zzfa.zza\n      at com.google.firebase.auth.api.internal.zzet.zza\n      at com.google.firebase.auth.api.internal.zzev.zza\n      at com.google.firebase.auth.api.internal.zzed.zza\n      at com.google.android.gms.internal.firebase_auth.zza.onTransact\n      at android.os.Binder.execTransact (Binder.java:739)\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "code-coverage", "jacoco"], "comments": [{"owner": {"reputation": 1877, "user_id": 803682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd27803a03acabb5de6c872ac8a67cc0?s=128&d=identicon&r=PG", "display_name": "Cassio Landim", "link": "https://stackoverflow.com/users/803682/cassio-landim"}, "edited": false, "score": 0, "creation_date": 1617296894, "post_id": 59378618, "comment_id": 118271671, "body": "Do you have any further update over this problem? I&#39;m facing the same problem using jacoco 0.8.6 when trying to test a module other than :app."}], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 9845929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pva40.png?s=128&g=1", "display_name": "SebastienRieu", "link": "https://stackoverflow.com/users/9845929/sebastienrieu"}, "edited": false, "score": 1, "creation_date": 1615544444, "post_id": 65816344, "comment_id": 117729318, "body": "For me this solution solve the problem too ! but the latest version at this time is 0.8.6 and it&#39;s pity to can&#39;t use the latest one ... hope AGP or Jacoco will figure out the problem."}], "tags": [], "owner": {"reputation": 223, "user_id": 995480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fd2b16ca4d644f7d5e0c418f6710b0?s=128&d=identicon&r=PG", "display_name": "Paulo Costa", "link": "https://stackoverflow.com/users/995480/paulo-costa"}, "is_accepted": false, "score": 4, "last_activity_date": 1611320762, "last_edit_date": 1611320762, "creation_date": 1611170977, "answer_id": 65816344, "question_id": 59378618, "link": "https://stackoverflow.com/questions/59378618/kotlin-jacoco-no-coverage-illegalclassformatexception-please-supply-orig/65816344#65816344", "title": "Kotlin JaCoCo, no coverage -&gt; IllegalClassFormatException ... Please supply original non-instrumented classes", "body": "<p>I just faced the same bug.</p>\n<p>After a little investigation, it seems like it is a bug in the Android Gradle Plugin, and it only happens when using <code>com.android.library</code>.</p>\n<p>I have reported it and more details here: <a href=\"https://issuetracker.google.com/issues/178015739\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/178015739</a></p>\n<p>While it isn't fixed by the Android team, a workaround is to configure</p>\n<pre><code>jacoco {\n    toolVersion = &quot;0.7.9&quot;\n}\n</code></pre>\n<p>in the build.gradle</p>\n<p>It doesn't prevent the error from being logged, but makes it so that the coverage data is collected properly.</p>\n"}], "owner": {"reputation": 368, "user_id": 3259524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCPU6.jpg?s=128&g=1", "display_name": "goldy1992", "link": "https://stackoverflow.com/users/3259524/goldy1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2170, "favorite_count": 2, "answer_count": 1, "score": 12, "last_activity_date": 1611320762, "creation_date": 1576601001, "last_edit_date": 1577296383, "question_id": 59378618, "link": "https://stackoverflow.com/questions/59378618/kotlin-jacoco-no-coverage-illegalclassformatexception-please-supply-orig", "title": "Kotlin JaCoCo, no coverage -&gt; IllegalClassFormatException ... Please supply original non-instrumented classes", "body": "<p><strong>kotlin verion:</strong> 1.3.61</p>\n\n<p><strong>Android Gradle Plugin:</strong> 3.5.3</p>\n\n<p><strong>JaCoCo Version:</strong> 0.8.4.201905082037 (default android gradle version)</p>\n\n<p>project:\n<a href=\"https://github.com/goldy1992/Mp3Player/tree/feature/issue-112/migrate-to-kotlin\" rel=\"noreferrer\">https://github.com/goldy1992/Mp3Player/tree/feature/issue-112/migrate-to-kotlin</a></p>\n\n<p>I have a <strong>multi module gradle project</strong> with:\n2 flavours: full, automation\n2 build types: release, debug</p>\n\n<p>I'm in the process of migrating everything to kotlin.</p>\n\n<p>Module structure</p>\n\n<ul>\n<li>commons [android library] (works as expected with test coverage)</li>\n<li>client-test-support (used for test implementations of activities)</li>\n<li>client [android library] (no coverage) -> depends on commons, client-test-support</li>\n<li>service-test-support (used for test implementations of activities)</li>\n<li>service [android library] (no coverage) -> depends on commons, service-test-support</li>\n<li>app [android application] no tests</li>\n</ul>\n\n<p>For the context of this posts, I'm only interested in <strong>unit tests</strong></p>\n\n<p>The tests run as expected however no coverage is generated due to a SOME (not all) of the kotlin compiled classes being recognised as \"instrumented classes\"</p>\n\n<p>The errors appear just as the tests are about to being where the following is printed out for many classes:</p>\n\n<pre><code>    java.lang.instrument.IllegalClassFormatException: Error while instrumenting com/github/goldy1992/mp3player/client/views/viewholders/MediaPlayerTrackViewHolder.\n        at org.jacoco.agent.rt.internal_035b120.CoverageTransformer.transform(CoverageTransformer.java:93)\n        at sun.instrument.TransformerManager.transform(TransformerManager.java:188)\n        at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:428)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        at java.lang.Class.getDeclaredFields0(Native Method)\n        at java.lang.Class.privateGetDeclaredFields(Class.java:2583)\n        at java.lang.Class.getDeclaredFields(Class.java:1916)\n        at org.junit.runners.model.TestClass.getSortedDeclaredFields(TestClass.java:77)\n        at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:70)\n        at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)\n        at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)\n        at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)\n        at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)\n        at org.robolectric.internal.SandboxTestRunner.&lt;init&gt;(SandboxTestRunner.java:71)\n        at org.robolectric.RobolectricTestRunner.&lt;init&gt;(RobolectricTestRunner.java:101)\n        at org.robolectric.RobolectricTestRunner.&lt;init&gt;(RobolectricTestRunner.java:96)\n        at sun.reflect.GeneratedConstructorAccessor5.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\n        at org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder$DefensiveAnnotatedBuilder.buildRunner(DefensiveAllDefaultPossibilitiesBuilder.java:113)\n        at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\n        at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n        at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\n        at org.junit.vintage.engine.discovery.DefensiveAllDefaultPossibilitiesBuilder.runnerForClass(DefensiveAllDefaultPossibilitiesBuilder.java:56)\n        at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n        at org.junit.vintage.engine.discovery.TestClassRequestResolver.createRunnerTestDescriptor(TestClassRequestResolver.java:55)\n        at org.junit.vintage.engine.discovery.VintageDiscoverer.lambda$discover$0(VintageDiscoverer.java:53)\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n        at java.util.Iterator.forEachRemaining(Iterator.java:116)\n        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n        at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\n        at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742)\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\n        at org.junit.vintage.engine.discovery.VintageDiscoverer.discover(VintageDiscoverer.java:55)\n        at org.junit.vintage.engine.VintageTestEngine.discover(VintageTestEngine.java:62)\n        at org.junit.platform.launcher.core.DefaultLauncher.discoverEngineRoot(DefaultLauncher.java:168)\n        at org.junit.platform.launcher.core.DefaultLauncher.discoverRoot(DefaultLauncher.java:155)\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n        at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:102)\n        at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:82)\n        at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:78)\n        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n        at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n        at com.sun.proxy.$Proxy2.stop(Unknown Source)\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:132)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n        at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\n        at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\n        at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:412)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n        at java.lang.Thread.run(Thread.java:748)\n    Caused by: java.io.IOException: Error while instrumenting com/github/goldy1992/mp3player/client/views/viewholders/MediaPlayerTrackViewHolder.\n        at org.jacoco.agent.rt.internal_035b120.core.instr.Instrumenter.instrumentError(Instrumenter.java:158)\n        at org.jacoco.agent.rt.internal_035b120.core.instr.Instrumenter.instrument(Instrumenter.java:108)\n        at org.jacoco.agent.rt.internal_035b120.CoverageTransformer.transform(CoverageTransformer.java:91)\n        ... 86 more\n    Caused by: java.lang.IllegalStateException: Cannot process instrumented class com/github/goldy1992/mp3player/client/views/viewholders/MediaPlayerTrackViewHolder. Please supply original non-instrumented classes.\n        at org.jacoco.agent.rt.internal_035b120.core.internal.instr.InstrSupport.assertNotInstrumented(InstrSupport.java:237)\n        at org.jacoco.agent.rt.internal_035b120.core.internal.instr.ClassInstrumenter.visitField(ClassInstrumenter.java:55)\n        at org.jacoco.agent.rt.internal_035b120.asm.ClassVisitor.visitField(ClassVisitor.java:287)\n        at org.jacoco.agent.rt.internal_035b120.asm.ClassReader.readField(ClassReader.java:906)\n        at org.jacoco.agent.rt.internal_035b120.asm.ClassReader.accept(ClassReader.java:683)\n        at org.jacoco.agent.rt.internal_035b120.asm.ClassReader.accept(ClassReader.java:400)\n        at org.jacoco.agent.rt.internal_035b120.core.instr.Instrumenter.instrument(Instrumenter.java:88)\n        at org.jacoco.agent.rt.internal_035b120.core.instr.Instrumenter.instrument(Instrumenter.java:106)\n        ... 87 more\n</code></pre>\n\n<p>To try and get to the root of the problem I am just running the <strong>client unit tests</strong></p>\n\n<p>Client <strong>build.gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'de.mannodermaus.android-junit5'\napply plugin: 'jacoco'\n\nandroid {\n\n    compileSdkVersion TARGET_SDK_VERION\n    buildToolsVersion BUILD_TOOLS_VERSION\n\n    defaultConfig {\n        minSdkVersion MIN_SDK_VERSION\n        targetSdkVersion TARGET_SDK_VERION\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n        consumerProguardFiles 'consumer-rules.pro'\n        vectorDrawables.useSupportLibrary = true\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n        debug {\n            debuggable true\n            minifyEnabled false\n            testCoverageEnabled = true\n        }\n    }\n    flavorDimensions 'default'\n    productFlavors {\n        full {\n            dimension = 'default'\n        }\n        automation {\n            dimension = 'default'\n        }\n    }\n\n    compileOptions {\n        incremental = false\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions { jvmTarget = \"1.8\" }\n\n\n    testOptions {\n        execution 'ANDROID_TEST_ORCHESTRATOR'\n        animationsDisabled true\n\n        unitTests {\n            includeAndroidResources = true\n            returnDefaultValues = true\n        }\n\n        unitTests.all {\n            testLogging {\n                events \"passed\", \"skipped\", \"failed\", \"standardOut\", \"standardError\"\n                outputs.upToDateWhen {false}\n                showStandardStreams = true\n            }\n        }\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/java'\n        test.java.srcDirs += 'src/test/java'\n        androidTest.java.srcDirs += 'src/androidTest/java'\n    }\n}\n\ndependencies {\n implementation project(path: ':commons')\n testApi project(\":client:testsupport\")\n\n /* MORE DEPENDENCIES NOT RELEVANT TO ISSUE */\n}\n\n</code></pre>\n\n<p>It may be worth noting that I am using <strong>Dagger 2.25.2</strong></p>\n\n<p><strong>Execution data dir</strong>: ${projectRootDir}/client/build/jacoco/testFullDebugUnitTest.exec</p>\n\n<p><strong>Source dir</strong>:   ${projectRootDir}/client/src/main/java</p>\n\n<p><strong>class dir</strong>: ${projectRootDir}/client/build/intermediates/javac/fullDebug/classes/<em>, ${projectRootDir}/client/build/tmp/kotlin-classes/fullDebug/</em></p>\n\n<p><strong>UPDATE 1:</strong>\nFrom making a new branch and and renaming all the classes and test classes in the client module to CLASS_NAME.kt.old I can confirm that there seems to be no connection between the <code>IllegalClassFormatException</code> and the no coverage.I will therefore update the questions to be the following</p>\n\n<p><strong>UPDATE 2:</strong>\nAfter further experimenting with update 1 it seems that the exceptions go away and coverage is calculated as expected WHEN there is no dependency on the sub (test) module, i.e. remove the line <code>testApi project(\":client:testsupport\")</code>from the gradle file. The problem is that I need this <code>testsupport</code>module in order to execute my activity tests (which are currently not run because they are in a .old file as per update 1 ^^.</p>\n\n<p><strong>Questions updated as per udate 2</strong> \nHow can I configure JaCoCo to support sub module test implementation of android classes as suggested by the robolectric team in <a href=\"https://github.com/robolectric/robolectric/pull/4736\" rel=\"noreferrer\">this pull request</a>. </p>\n\n<p>Will update post if more information is required</p>\n"}, {"tags": ["android", "kotlin", "firebase-storage"], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 0, "last_activity_date": 1576601506, "creation_date": 1576601506, "answer_id": 59378739, "question_id": 59378477, "link": "https://stackoverflow.com/questions/59378477/kotlin-firebasestorage-getdownloadurl-error/59378739#59378739", "title": "Kotlin FirebaseStorage getDownloadUrl error", "body": "<p>The downloadUrl \"property\" here is not actually a property at all.  It's a method called <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/storage/StorageReference\" rel=\"nofollow noreferrer\">getDownloadUrl</a> that returns another Task that asynchronously fetches the URL.  It doesn't return a URL directly.  Refer to the <a href=\"https://firebase.google.com/docs/storage/android/upload-files#get_a_download_url\" rel=\"nofollow noreferrer\">documentation</a> on how to use it correctly.  For example:</p>\n\n<pre><code>val ref = storageRef.child(\"images/mountains.jpg\")\nuploadTask = ref.putFile(file)\n\nval urlTask = uploadTask.continueWithTask { task -&gt;\n    if (!task.isSuccessful) {\n        task.exception?.let {\n            throw it\n        }\n    }\n    ref.downloadUrl\n}.addOnCompleteListener { task -&gt;\n    if (task.isSuccessful) {\n        val downloadUri = task.result\n    } else {\n        // Handle failures\n        // ...\n    }\n}\n</code></pre>\n\n<p>What's happening here is:</p>\n\n<ol>\n<li>The file is being uploaded with <code>uploadTask</code>.</li>\n<li>A continuation is added to that Task as a callback when it's complete</li>\n<li>ref.downloadUrl returns another Task to get the URL.</li>\n<li>Another callback is added to the chain to handle the fetched URL.</li>\n</ol>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/37374868/how-to-get-url-from-firebase-storage-getdownloadurl\">How to get URL from Firebase Storage getDownloadURL</a></p>\n\n<p>The fact of the matter is that this API was not very well designed.  The method starts with \"get\" but is not really a property getter.</p>\n"}], "owner": {"reputation": 45, "user_id": 10701207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15542833e6f0221f4429f27eca3f05e0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/10701207/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59378739, "answer_count": 1, "score": 0, "last_activity_date": 1576601524, "creation_date": 1576600532, "last_edit_date": 1576601524, "question_id": 59378477, "link": "https://stackoverflow.com/questions/59378477/kotlin-firebasestorage-getdownloadurl-error", "title": "Kotlin FirebaseStorage getDownloadUrl error", "body": "<p>Hi i want to get downloadUrl but i got error\nI'm tried some methods like this</p>\n\n<p><code>var firebaseURL =p0?.uploadSessionUri.toString()</code> the result is <strong>url</strong> but if i open this url, i get this error  <code>Invalid request.  X-Goog-Upload-Command header is missing.</code>\n ( i'm new in kotlin)</p>\n\n<pre><code>uploadTo.addOnSuccessListener (object :OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;{\n\n        override fun onSuccess(p0: UploadTask.TaskSnapshot?) {\n\n            var firebaseURL =p0.downloadUrl // i got error in this line\n\n            FirebaseDatabase.getInstance().reference\n                .child(\"Users\")\n                .child(FirebaseAuth.getInstance().currentUser?.uid!!)\n                .child(\"imagurl\")\n                .setValue(firebaseURL.toString())\n\n        }\n    })\n</code></pre>\n"}, {"tags": ["kotlin", "routes", "gps", "drawing", "background-service"], "comments": [{"owner": {"reputation": 7014, "user_id": 1501613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a917ec0fd44810a1c18dac1822198994?s=128&d=identicon&r=PG&f=1", "display_name": "cYrixmorten", "link": "https://stackoverflow.com/users/1501613/cyrixmorten"}, "edited": false, "score": 0, "creation_date": 1576601067, "post_id": 59378472, "comment_id": 104949362, "body": "Sounds like you are on the right track. You need to have the gps running in a service with foreground service enabled (so that there is a notification active while service is running). Additionally you may need to opt out of battery optimisation."}, {"owner": {"reputation": 11, "user_id": 12173336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1a1047c0677dee4a7c8dd8f4d79944?s=128&d=identicon&r=PG&f=1", "display_name": "elpaso", "link": "https://stackoverflow.com/users/12173336/elpaso"}, "reply_to_user": {"reputation": 7014, "user_id": 1501613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a917ec0fd44810a1c18dac1822198994?s=128&d=identicon&r=PG&f=1", "display_name": "cYrixmorten", "link": "https://stackoverflow.com/users/1501613/cyrixmorten"}, "edited": false, "score": 0, "creation_date": 1576611199, "post_id": 59378472, "comment_id": 104953817, "body": "Okay...Thank you"}], "owner": {"reputation": 11, "user_id": 12173336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1a1047c0677dee4a7c8dd8f4d79944?s=128&d=identicon&r=PG&f=1", "display_name": "elpaso", "link": "https://stackoverflow.com/users/12173336/elpaso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576600515, "creation_date": 1576600515, "question_id": 59378472, "link": "https://stackoverflow.com/questions/59378472/how-to-track-and-draw-the-route-of-the-current-location-when-the-app-is-in-backg", "title": "How to track and draw the route of the current location when the app is in background(not closed) in KOTLIN", "body": "<p>My App is tracking und drawing the route of the current position to the google map when it is active(GPS position). But when the app closes and i open it after 1 minute, the route doesnt take the positions where i was, instead it takes a direct line from the last position. \nhow can i get the exact route to the map? \ni\u00b4ve tried it with a background service, but failed.\nI followed a tutorial for lat lng which gives the position in forground(with notifications), but only if the app is closed.\nso, how can i get this running when the app is closed???( not killed!)\nthank you.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "edited": false, "score": 0, "creation_date": 1576598050, "post_id": 59377788, "comment_id": 104947811, "body": "@coroutineDispatcher : doen&#39;t work"}, {"owner": {"reputation": 5883, "user_id": 4420355, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/496f3c375711d2f45f0d913c0d1851dc?s=128&d=identicon&r=PG", "display_name": "kuzdu", "link": "https://stackoverflow.com/users/4420355/kuzdu"}, "edited": false, "score": 1, "creation_date": 1576598122, "post_id": 59377788, "comment_id": 104947853, "body": "<code>val resultFromApiCall_flowable : Flowable&lt;GitResult&gt;? =  mainRepository.fetchToDosFromServer(&quot;q=2&quot;)</code> is optional. So you can force cast with a <code>val resultFromApiCall_flowable : Flowable&lt;GitResult&gt;! = ..</code> Or you make a null check.  <code>resultFromApiCall_flowable?.let {   val source: LiveData&lt;GitResult&gt; = LiveDataReactiveStreams.fromPublisher(it) }</code>"}, {"owner": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "reply_to_user": {"reputation": 5883, "user_id": 4420355, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/496f3c375711d2f45f0d913c0d1851dc?s=128&d=identicon&r=PG", "display_name": "kuzdu", "link": "https://stackoverflow.com/users/4420355/kuzdu"}, "edited": false, "score": 0, "creation_date": 1576601126, "post_id": 59377788, "comment_id": 104949396, "body": "@kuzdu : I used the second option and it worked. thanks. But i have another confusion.. if I use <code>if(resultFromApiCall_flowable!=null) \t\t{ val source: LiveData&lt;GitResult&gt; = LiveDataReactiveStreams.fromPublisher(resultFromApiCall_flow&zwnj;&#8203;able) }</code> then the error goes away too. But is it same as <code>xx?.let{...}</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1576602081, "post_id": 59377788, "comment_id": 104949853, "body": "It is, but you can handle <code>else</code> more conveniently here."}], "answers": [{"tags": [], "owner": {"reputation": 5883, "user_id": 4420355, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/496f3c375711d2f45f0d913c0d1851dc?s=128&d=identicon&r=PG", "display_name": "kuzdu", "link": "https://stackoverflow.com/users/4420355/kuzdu"}, "is_accepted": false, "score": 0, "last_activity_date": 1576602075, "creation_date": 1576602075, "answer_id": 59378888, "question_id": 59377788, "link": "https://stackoverflow.com/questions/59377788/how-to-convert-a-nullable-flowable-to-livedata/59378888#59378888", "title": "How to convert a nullable flowable to LiveData", "body": "<p>Your flow is optional.</p>\n\n<p>So if you make a null check it should work. </p>\n\n<pre><code>val resultFromApiCall_flowable: Flowable&lt;GitResult&gt;? = mainRepository.fetchToDosFromServer(\"q=2\")\n\nif (resultFromApiCall_flowable != null) {\n val source: LiveData&lt;GitResult&gt; = LiveDataReactiveStreams.fromPublisher(resultFromApiCall_flowable)\n}\n</code></pre>\n\n<p>This is the same like</p>\n\n<pre><code>resultFromApiCall_flowable?.let { \n val source: LiveData&lt;GitResult&gt; = LiveDataReactiveStreams.fromPublisher(it)\n}\n</code></pre>\n\n<p>Anyway, you can use both, but it is not the same.</p>\n\n<p>Have a look here: <a href=\"https://discuss.kotlinlang.org/t/let-vs-if-not-null/3542\" rel=\"nofollow noreferrer\">let vs if not null</a></p>\n\n<p>If you like to handle the <code>else</code> case:</p>\n\n<pre><code>b?.let {\n    // If b is not null.\n} ?: run {\n    // If b is null.\n}\n</code></pre>\n\n<p>From <a href=\"https://stackoverflow.com/a/46726337/4420355\">https://stackoverflow.com/a/46726337/4420355</a> by marstran</p>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "edited": false, "score": 0, "creation_date": 1576618751, "post_id": 59378922, "comment_id": 104956901, "body": "if I return <code>Flowable.empty()</code> then how do I check when its returned empty?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "edited": false, "score": 0, "creation_date": 1576647642, "post_id": 59378922, "comment_id": 104963219, "body": "In most cases you don&#39;t want to check; just treat it as any other returned <code>Flowable</code>. If you do want to distinguish this situation, this isn&#39;t a good solution. But why treat <code>fetchToDosFromServer(&quot;&quot;)</code> differently from <code>fetchToDosFromServer(anyInvalidQueryString)</code>?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "edited": false, "score": 0, "creation_date": 1576647818, "post_id": 59378922, "comment_id": 104963257, "body": "Of course, this suggests returning <code>Flowable.error()</code> or throwing an exception instead of <code>Flowable.empty()</code>; whatever <code>fetchToDosFromServer</code> does for invalid query strings."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1576602219, "creation_date": 1576602219, "answer_id": 59378922, "question_id": 59377788, "link": "https://stackoverflow.com/questions/59377788/how-to-convert-a-nullable-flowable-to-livedata/59378922#59378922", "title": "How to convert a nullable flowable to LiveData", "body": "<p>You've already got an answer how to handle it directly, but I suggest considering a different direction. Simply don't make the result nullable, and return <code>Flowable.empty()</code> in that case instead. And maybe don't accept <code>String?</code> either; do you actually want to call <code>fetchToDosFromServer(null)</code> in some cases?</p>\n"}], "owner": {"reputation": 79, "user_id": 5700215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a23791e8d5084e559cf2d2af8cb561?s=128&d=identicon&r=PG&f=1", "display_name": "Rashedul Rough", "link": "https://stackoverflow.com/users/5700215/rashedul-rough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59378922, "answer_count": 2, "score": 0, "last_activity_date": 1576602219, "creation_date": 1576597916, "question_id": 59377788, "link": "https://stackoverflow.com/questions/59377788/how-to-convert-a-nullable-flowable-to-livedata", "title": "How to convert a nullable flowable to LiveData", "body": "<p>In my repository class I am calling webservice. If query is not null then returning the result as flowable, if query is null then return null . Then in my ViewModel I am converting the flowable to LiveData.</p>\n\n<p>Below is the code snippet:</p>\n\n<p><strong>In myRepository class:</strong></p>\n\n<pre><code>fun fetchToDosFromServer(fullQueryString: String?)\n        : Flowable&lt;GitResult&gt;? \n{\n    if(fullQueryString.length&gt;0)\n    { //call webservice- which return observable&lt;GitResult&gt;\n       var returnedResult = myWebServiceCall()\n        return returnedData.toFlowable(BackpressureStrategy.BUFFER)\n       }\n\n    else \n        return null\n\n}\n</code></pre>\n\n<p><strong>In myViewModel class:</strong></p>\n\n<pre><code> fun getReposFromServer()\n {\n    val resultFromApiCall_flowable : Flowable&lt;GitResult&gt;? =  mainRepository.fetchToDosFromServer(\"q=2\")\n\n    val source: LiveData&lt;GitResult&gt; = LiveDataReactiveStreams.fromPublisher(resultFromApiCall_flowable)\n }\n</code></pre>\n\n<p>but its showing compile time error when trying to convert flowable to LiveData in myViewModel class. In the line:</p>\n\n<blockquote>\n  <p>LiveDataReactiveStreams.fromPublisher(resultFromApiCall_flowable)</p>\n</blockquote>\n\n<p>the error is:</p>\n\n<blockquote>\n  <p>Error: required Flowable , found Flowable?</p>\n</blockquote>\n\n<p>how do I solve it?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9907720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330f7416cc8a7a26c6a72d5102ee9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Gius", "link": "https://stackoverflow.com/users/9907720/gius"}, "edited": false, "score": 0, "creation_date": 1576657351, "post_id": 59383052, "comment_id": 104966570, "body": "Thank you for the answer. I implemented this but I don&#39;t know how to update BookingsAdapter. I tried to insert <code>BookingsAdapter.notifyDataSetChanged()</code> inside <code>override fun onItemClicked (day: String, month: String)</code> but it doesn&#39;t update my data. Maybe it&#39;s something related to the view of the fragment?"}, {"owner": {"reputation": 93, "user_id": 9907720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330f7416cc8a7a26c6a72d5102ee9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Gius", "link": "https://stackoverflow.com/users/9907720/gius"}, "edited": false, "score": 0, "creation_date": 1576657954, "post_id": 59383052, "comment_id": 104966830, "body": "I solved it with this:  <code>override fun onItemClicked(day: String, month: String) {         bookingsRecycleView.adapter = BookingsAdapter()     }</code> .. Do you think it&#39;s the right solution?"}], "tags": [], "owner": {"reputation": 468, "user_id": 4817107, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a7069dd9392938bf4c34e7149bc9d88b?s=128&d=identicon&r=PG", "display_name": "Aram Sheroyan", "link": "https://stackoverflow.com/users/4817107/aram-sheroyan"}, "is_accepted": true, "score": 1, "last_activity_date": 1576621997, "creation_date": 1576621997, "answer_id": 59383052, "question_id": 59377344, "link": "https://stackoverflow.com/questions/59377344/how-to-update-a-recyclerview-from-another-recyclerview-with-kotlin/59383052#59383052", "title": "How to update a RecyclerView from another RecyclerView with kotlin", "body": "<p>You can pass a listener to your <code>CalendarAdapter</code> and listen for the clicks in the <code>Fragment</code>. Something like this:</p>\n\n<pre><code> class CalendarAdapter(private val listener: CalendarItemListener): RecyclerView.Adapter&lt;CalendarViewHolder&gt;() {\n\n    var selectedPosition = -1\n\n    val daysList = listOf(\"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\")\n\n    override fun getItemCount(): Int {\n    return daysList.size\n}\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CalendarViewHolder {\n        val layoutInflater = LayoutInflater.from(parent.context)\n        val cellForRow = layoutInflater.inflate(R.layout.row_calendar, parent, false)\n\n        return CalendarViewHolder(cellForRow)\n    }\n\n    override fun onBindViewHolder(holder: CalendarViewHolder, position: Int) {\n        holder.itemView.dayLabel.text = daysList.get(position)\n        holder.itemView.monthLabel.text = \"DEC\"\n\n        if (selectedPosition == position)\n            holder.itemView.cardView.setBackgroundColor(Color.parseColor(\"#008577\"));\n        else\n            holder.itemView.cardView.setBackgroundColor(Color.parseColor(\"#ffffff\"));\n\n        holder.itemView.setOnClickListener {\n            listener.onItemClicked(daysList.get(position), \"DEC\")\n            selectedPosition = position\n            notifyDataSetChanged()\n        }\n    }\n\n}\n\ninterface CalendarItemListener {\n    fun onItemClicked(day: String, month: String)\n}\n\nclass CalendarViewHolder(v: View) : RecyclerView.ViewHolder(v) {\n\n    init {\n        v.setOnClickListener {\n        }\n    }\n}\n</code></pre>\n\n<p>And in you fragment implement the click listener interface and pass in to the <code>CalendarAdapter</code>.</p>\n\n<pre><code>class HomeFragment : Fragment(), CalendarItemListener {\n\n    private lateinit var homeViewModel: HomeViewModel\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        homeViewModel = ViewModelProviders.of(this).get(HomeViewModel::class.java)\n        val root = inflater.inflate(R.layout.fragment_home, container, false)\n        return root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        calendarRecycleView.layoutManager = LinearLayoutManager(view.context, LinearLayoutManager.HORIZONTAL, false)\n        calendarRecycleView.adapter = CalendarAdapter(this)\n\n\n        bookingsRecycleView.layoutManager = LinearLayoutManager(view.context, LinearLayoutManager.VERTICAL, false)\n        bookingsRecycleView.adapter = BookingsAdapter()\n\n\n    }\n\n    override onItemClicked(day: String, month: String){\n        //update your second adapter\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9907720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330f7416cc8a7a26c6a72d5102ee9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Gius", "link": "https://stackoverflow.com/users/9907720/gius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59383052, "answer_count": 1, "score": 0, "last_activity_date": 1576621997, "creation_date": 1576596393, "last_edit_date": 1576597003, "question_id": 59377344, "link": "https://stackoverflow.com/questions/59377344/how-to-update-a-recyclerview-from-another-recyclerview-with-kotlin", "title": "How to update a RecyclerView from another RecyclerView with kotlin", "body": "<p>In my project I have a fragment that hosts two RecylerView.\nI would like to update the second RecyclerView when an item is clicked on the first RecyclerView.\nWhen I click on an item in the CalendarAdapter, I would like the BookingAdapter to update its values. (BookinAdapter is currently empty)</p>\n\n<p><strong>HomeFragment</strong></p>\n\n<pre><code>class HomeFragment : Fragment() {\n\n    private lateinit var homeViewModel: HomeViewModel\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        homeViewModel = ViewModelProviders.of(this).get(HomeViewModel::class.java)\n        val root = inflater.inflate(R.layout.fragment_home, container, false)\n        return root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        calendarRecycleView.layoutManager = LinearLayoutManager(view.context, LinearLayoutManager.HORIZONTAL, false)\n        calendarRecycleView.adapter = CalendarAdapter()\n\n\n        bookingsRecycleView.layoutManager = LinearLayoutManager(view.context, LinearLayoutManager.VERTICAL, false)\n        bookingsRecycleView.adapter = BookingsAdapter()\n\n\n    }\n}\n</code></pre>\n\n<p><strong>CalendarAdapter</strong></p>\n\n<pre><code>class CalendarAdapter : RecyclerView.Adapter&lt;CalendarViewHolder&gt;() {\n\n    var selectedPosition = -1\n\n    val daysList = listOf(\"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\")\n\n    override fun getItemCount(): Int {\n        return daysList.size\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CalendarViewHolder {\n        val layoutInflater = LayoutInflater.from(parent.context)\n        val cellForRow = layoutInflater.inflate(R.layout.row_calendar, parent, false)\n\n        return CalendarViewHolder(cellForRow)\n    }\n\n    override fun onBindViewHolder(holder: CalendarViewHolder, position: Int) {\n        holder.itemView.dayLabel.text = daysList.get(position)\n        holder.itemView.monthLabel.text = \"DEC\"\n\n        if(selectedPosition == position)\n            holder.itemView.cardView.setBackgroundColor(Color.parseColor(\"#008577\"));\n        else\n            holder.itemView.cardView.setBackgroundColor(Color.parseColor(\"#ffffff\"));\n\n        holder.itemView.setOnClickListener {\n            selectedPosition = position\n            notifyDataSetChanged()\n        }\n    }\n\n}\n\nclass CalendarViewHolder(v: View): RecyclerView.ViewHolder(v) {\n\n    init {\n        v.setOnClickListener {\n        }\n    }\n}\n</code></pre>\n\n<p><strong>BookingAdapter</strong></p>\n\n<pre><code>class BookingsAdapter : RecyclerView.Adapter&lt;BookingsViewHolder&gt;() {\n\n    override fun getItemCount(): Int {\n        return 3\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookingsViewHolder {\n        val layoutInflater = LayoutInflater.from(parent.context)\n        val cellForRow = layoutInflater.inflate(R.layout.row_bookings, parent, false)\n\n        return BookingsViewHolder(cellForRow)\n    }\n\n    override fun onBindViewHolder(holder: BookingsViewHolder, position: Int) {\n        holder.itemView.hello.text = \"Hello\"\n\n    }\n\n    fun update() {\n        this.notifyDataSetChanged()\n        Log.d(\"Log\", \"ok\")\n    }\n\n}\n\nclass BookingsViewHolder(v: View): RecyclerView.ViewHolder(v) {\n\n    init {\n        v.setOnClickListener {\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1955, "user_id": 2808913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c14b685dd1ba4c8cb8084519da9df76f?s=128&d=identicon&r=PG&f=1", "display_name": "miva2", "link": "https://stackoverflow.com/users/2808913/miva2"}, "edited": false, "score": 0, "creation_date": 1576596474, "post_id": 59377205, "comment_id": 104946934, "body": "When age is null, your setter won&#39;t do anything. You can add an <code>?:</code> after the <code>let</code> to return something else or to throw an error. There is some debate online about whether <code>?.let</code> is good for nullchecks or not. I think the <code>let</code> is ok in this case but there are probably better solutions."}, {"owner": {"reputation": 4787, "user_id": 769599, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7e3c06237f516617523bbc50e299aca0?s=128&d=identicon&r=PG", "display_name": "Wexoni", "link": "https://stackoverflow.com/users/769599/wexoni"}, "reply_to_user": {"reputation": 1955, "user_id": 2808913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c14b685dd1ba4c8cb8084519da9df76f?s=128&d=identicon&r=PG&f=1", "display_name": "miva2", "link": "https://stackoverflow.com/users/2808913/miva2"}, "edited": false, "score": 0, "creation_date": 1576596684, "post_id": 59377205, "comment_id": 104947043, "body": "I have update the question, with example of the call/"}], "answers": [{"comments": [{"owner": {"reputation": 4787, "user_id": 769599, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7e3c06237f516617523bbc50e299aca0?s=128&d=identicon&r=PG", "display_name": "Wexoni", "link": "https://stackoverflow.com/users/769599/wexoni"}, "edited": false, "score": 0, "creation_date": 1576596802, "post_id": 59377397, "comment_id": 104947109, "body": "Appreciate the encouragement  :)"}], "tags": [], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "is_accepted": true, "score": 0, "last_activity_date": 1576597898, "last_edit_date": 1576597898, "creation_date": 1576596579, "answer_id": 59377397, "question_id": 59377205, "link": "https://stackoverflow.com/questions/59377205/checking-for-null-variable-and-then-making-if-statement-on-it/59377397#59377397", "title": "Checking for null variable and then making if statement on it", "body": "<p>You are using two very good language features of kotlin.\nfirst is let function. it is a scope function which takes its invoking object(<strong>age</strong> in your case) and provides it as parameter(<strong>it</strong> in your case) of the lambda.</p>\n\n<p>second is the safe call(?.) feature. safe call only continues if the invoking object is non null.</p>\n\n<p>so effectively your setter will only be called when age is not null.</p>\n\n<p><strong>This technic is recommended by the Kotlin language designers. Following snippet is from the book Kotlin in action, chapter 6 page 144</strong> </p>\n\n<blockquote>\n  <p>you can use the let function, and call it via a safe call. All the let\n  function does is turn the object on which it\u2019s called into a parameter\n  of the lambda. If you combine it with the safe call syntax, it\n  effectively converts an object of a nullable type on which you call\n  let into a non-null type</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 1, "last_activity_date": 1576610675, "last_edit_date": 1576610675, "creation_date": 1576606805, "answer_id": 59380005, "question_id": 59377205, "link": "https://stackoverflow.com/questions/59377205/checking-for-null-variable-and-then-making-if-statement-on-it/59380005#59380005", "title": "Checking for null variable and then making if statement on it", "body": "<p><code>?.let</code> is a common Kotlin idiom for doing something with a variable after a null-check when you are working with a member property, because smart-casting to non-null doesn't work with member properties. But there's a more fundamental problem with your general design.</p>\n\n<p>The setter for <code>isApproved</code> vetoes the change if the age is unknown or under 21. I can think of multiple scenarios where this is going to create hard-to-find bugs. Here is an example:</p>\n\n<pre><code>val tinyTim = AlternativeCustomerTwo(\"Tiny Tim\", 30)\ntinyTim.isApproved = true\n\n// Oops, the age is actually 3. Let's correct it.\ntinyTim.age = 3\ntinyTim.isApproved = false\n</code></pre>\n\n<p>He will still be approved because the setter doesn't allow you to change <code>isApproved</code> if the age isn't over 21.</p>\n\n<p>Here's another example.</p>\n\n<pre><code>val john = AlternativeCustomerTwo(\"John\").apply {\n    isApproved = true\n    age = 45\n}\n</code></pre>\n\n<p>Since we set the properties in the wrong order, he is not approved, even though we intended for him to be.</p>\n\n<p>One solution is to use a custom getter instead of a custom setter:</p>\n\n<pre><code>var isApproved: Boolean = false\n    get(value) = field &amp;&amp; (age?.let { it &gt;= 21 } ?: false)\n</code></pre>\n\n<p>Then you could mark someone as approved before setting their correct age, and if their age is updated, the returned <code>value</code> will be as well. But, for absolute clarity, I would recommend using two properties:</p>\n\n<pre><code>var isApproved = false\nval isAllowed: Boolean\n    get() = isApproved &amp;&amp; (age?.let { it &gt;= 21 } ?: false)\n</code></pre>\n\n<p>Then there can be no surprises about <code>isApproved</code>'s value not matching what you explicitly set.</p>\n"}], "owner": {"reputation": 4787, "user_id": 769599, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7e3c06237f516617523bbc50e299aca0?s=128&d=identicon&r=PG", "display_name": "Wexoni", "link": "https://stackoverflow.com/users/769599/wexoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 59377397, "answer_count": 2, "score": 1, "last_activity_date": 1576610675, "creation_date": 1576595942, "last_edit_date": 1576596629, "question_id": 59377205, "link": "https://stackoverflow.com/questions/59377205/checking-for-null-variable-and-then-making-if-statement-on-it", "title": "Checking for null variable and then making if statement on it", "body": "<p>I am learning Kotlin. I was wondering is this the best way to solve this issue:\nI have a simple class:</p>\n\n<pre><code>class AlternativeCustomerTwo(\n    val name: String = \"Name Not Provided\",\n    var age: Int? = null,\n    var address: String = \"Address not provided\"\n) \n</code></pre>\n\n<p>It has default parameters, and also a nullable age.</p>\n\n<p>I want to include the following field:</p>\n\n<pre><code>var isApproved: Boolean = false\n</code></pre>\n\n<p>So now I have a class that looks like:</p>\n\n<pre><code>class AlternativeCustomerTwo(\n    val name: String = \"Name Not Provided\",\n    var age: Int? = null,\n    var address: String = \"Address not provided\"\n) {\n\n   var isApproved: Boolean = false}\n</code></pre>\n\n<p>Now I want to override the default setter for the isApproved, that checks if the age is over 21, and if it is, it sets it to true. Something like this:</p>\n\n<pre><code>class AlternativeCustomerTwo(\n    val name: String = \"Name Not Provided\",\n    var age: Int? = null,\n    var address: String = \"Address not provided\"\n) { \n var isApproved: Boolean = false\n    set(value) {\n            if(age &gt;= 21) {\n                field = value\n            }\n    }\n}\n</code></pre>\n\n<p>The problem here is the <strong>var age</strong>. Code can't compile, and this is the error:</p>\n\n<blockquote>\n  <p>Error:(19, 20) Kotlin: Operator call corresponds to a dot-qualified\n  call 'age.compareTo(21)' which is not allowed on a nullable receiver\n  'age'.</p>\n</blockquote>\n\n<p>After some tinkering, I have implemented desired functionality like this:</p>\n\n<pre><code>class AlternativeCustomerTwo(\n    val name: String = \"Name Not Provided\",\n    var age: Int? = null,\n    var address: String = \"Address not provided\"\n) {\n\n   var isApproved: Boolean = false\n    set(value) {\n       age?.let {\n           if(it &gt;= 21) {\n               field = value\n           }\n       }\n    }\n}\n</code></pre>\n\n<p>If I call it like this:</p>\n\n<pre><code>val customer = AlternativeCustomerTwo(name = \"John\", age = 120)\ncustomer.isApproved = true\n</code></pre>\n\n<p>Then it prints: true</p>\n\n<p>Alternately </p>\n\n<pre><code>val customer = AlternativeCustomerTwo(name = \"John\", age = 12)\n    customer.isApproved = true\n</code></pre>\n\n<p>The it print false\nMy question, is this the correct approach, or I am doing some horrible Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 1, "creation_date": 1576671431, "post_id": 59376402, "comment_id": 104973458, "body": "Have you seen Square&#39;s <a href=\"https://github.com/square/AssistedInject\" rel=\"nofollow noreferrer\">AssistedInject</a> library? It basically uses factories the way you&#39;ve already tried, but generates most of the code and integrates with Dagger 2 quite neatly. <a href=\"https://proandroiddev.com/saving-ui-state-with-viewmodel-savedstate-and-dagger-f77bcaeb8b08\" rel=\"nofollow noreferrer\">Here</a> is an example of how to use it with <code>ViewModel</code>."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1576674339, "post_id": 59376402, "comment_id": 104974946, "body": "Cheers, I&#39;ll check it out"}], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576595057, "creation_date": 1576592994, "last_edit_date": 1576595057, "question_id": 59376402, "link": "https://stackoverflow.com/questions/59376402/dagger-2-inject-fields", "title": "Dagger 2 Inject Fields", "body": "<p>I have a class that is dagger injected via the constructor. However I now need to add an argument to this constructor that is not provided via injection and is instead a run time argument.</p>\n\n<p>In my previous job, we rolled our own DI so I am not up to speed with all the \"magic\" annotations that dagger offers yet. I figured it should be simple to add an argument to a constructor and still have dagger inject the remaining values (as it was very simple to do with the aforementioned \"roll your own DI\" solution I have implemented before).</p>\n\n<p>However, it looks like this is not possible with dagger (i.e. assisted injection). So I have been reading on how to solve this issue but have become completely stumped.</p>\n\n<p>Here is the class that I am currently (successfully) injecting <code>ServiceA</code> into:</p>\n\n<pre><code>class Foo @Inject constructor(private val serviceA: ServiceA) {\n    ...\n}\n</code></pre>\n\n<p>What I would like to do is add another argument to this constructor that will be provided at run time. In this case a simple flag to determine some behaviour in the class. And, given that Dagger doesn't support assisted injection, I need to remove injection from <code>Foo</code> and instead create a <code>FooFactory</code> to handle creation of <code>Foo</code> objects. This factory will have <code>ServiceA</code> injected into its constructor and will provide a method to construct an instance of <code>Foo</code> taking the boolean. I will then end up with a <code>Foo</code> class that looks like:</p>\n\n<pre><code>class Foo(private val serviceA: ServiceA, myNewArgument: Boolean) {\n    ...\n}\n</code></pre>\n\n<p>And a FooFactory that looks like:</p>\n\n<pre><code>@Singleton\nclass FooFactory @Inject constructor(private val serviceA: ServiceA) {\n    fun createFoo(myNewArgument: Boolean) {\n        return Foo(serviceA, myNewArgument)\n    }\n}\n</code></pre>\n\n<p>And, although this is a complete mess to just get an extra constructor arg, it does the job.</p>\n\n<p>The problem I am facing, is that my <code>Foo</code> class is actually an <code>AndroidViewModel</code>, and will need to be constructed through the <code>ViewModelProvider.Factory</code> contract, which has a <code>create</code> method which is invoked by the SDK to create the view model. You override this method to create an instance of the view model but the method has no parameters, so there is no way to propagate the flag into the view model through this method.</p>\n\n<p>So the only way for me to get the flag propagated to the view models constructor is by having the factory itself take the flag as an argument to it's constructor, which, because dagger does not support assisted injection, is not possible.</p>\n\n<p>So, instead I am planning to make dagger manually inject my dependencies into the <code>FooFactory</code> at initialization time. This is where I am stuck, I cannot figure out how on earth to get dagger to manually inject dependencies into my class.</p>\n\n<p>My <code>FooFactory</code> now looks like:</p>\n\n<pre><code>class FooFactory(private val myNewArgument: Boolean) : ViewModelProvider.Factory {\n\n    init {\n        // I need to trigger injection here... how though???\n    }\n\n    @Inject\n    lateinit var serviceA: ServiceA\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return Foo(\n                serviceA,\n                myNewArgument\n        ) as T\n    }\n}\n</code></pre>\n\n<p>So, somehow in the init block of the factory, I need to ask dagger to inject the fields annotated with @Inject. But I have no idea how to do this, I have tried following the answers at the following questions and tutorials:</p>\n\n<p><a href=\"https://proandroiddev.com/from-dagger-components-to-manual-dependency-injection-110015abe6e0\" rel=\"nofollow noreferrer\">https://proandroiddev.com/from-dagger-components-to-manual-dependency-injection-110015abe6e0</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/46298107/dagger-2-injecting-non-android-classes\">Dagger 2 - injecting non Android classes</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35605408/dagger-2-injection-in-non-activity-java-class\">Dagger 2 injection in non Activity Java class</a></p>\n\n<p>None of these seem to work for my use case and I'm starting to lose it. Could anyone point me in the right direction? Is this dagger framework massively over engineered/complicated for not much benefit (this is the conclusion I am coming to at this point, all I want to do is achieve DI for testing purposes, I don't want to have to write factories so I can add an extra argument to a constructor)...</p>\n"}, {"tags": ["android", "exception", "kotlin", "handle"], "answers": [{"comments": [{"owner": {"reputation": 1652, "user_id": 4564450, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/USiV0.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4564450/andrey"}, "edited": false, "score": 0, "creation_date": 1576593780, "post_id": 59376550, "comment_id": 104945447, "body": "in the previous method, the <code>@Throw</code>tag is being added, however, the method is not being forced to catch any exceptions"}, {"owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "reply_to_user": {"reputation": 1652, "user_id": 4564450, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/USiV0.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4564450/andrey"}, "edited": false, "score": 1, "creation_date": 1576656541, "post_id": 59376550, "comment_id": 104966221, "body": "Yes, you can&#39;t force it. That&#39;s what I said"}], "tags": [], "owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1576595699, "last_edit_date": 1576595699, "creation_date": 1576593569, "answer_id": 59376550, "question_id": 59376397, "link": "https://stackoverflow.com/questions/59376397/kotlin-not-error-warning-and-handle-its-exception/59376550#59376550", "title": "Kotlin not error warning and handle its exception", "body": "<p>In Kotlin, there's no checked exceptions (<a href=\"https://kotlinlang.org/docs/reference/exceptions.html#checked-exceptions\" rel=\"nofollow noreferrer\">Source</a>).</p>\n\n<p>No exceptions have to be declared and you aren't forced to catch any exception.</p>\n\n<p>To indicate that an exception can be or has to be catched, you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-throws/index.html\" rel=\"nofollow noreferrer\">@Throw tag</a> in the documentation</p>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 2, "last_activity_date": 1576598010, "last_edit_date": 1576598010, "creation_date": 1576596964, "answer_id": 59377513, "question_id": 59376397, "link": "https://stackoverflow.com/questions/59376397/kotlin-not-error-warning-and-handle-its-exception/59377513#59377513", "title": "Kotlin not error warning and handle its exception", "body": "<p>Kotlin does not have checked exceptions. <code>@Throws</code> only forces Java code to check for exceptions and has no effect on Kotlin code.</p>\n\n<p>One alternative is using a sealed class that enables returning either the desired result or an error.</p>\n\n<pre><code>sealed class HitEventsResult {\n    data class Success(val value: List&lt;AlgoliaEvent&gt;): HitEventsResult()\n    data class Failure(val exception: JSONException): HitEventsResult()\n}\n</code></pre>\n\n<pre><code>fun parseHitEvents(jsonObject: JSONObject): HitEventsResult  {\n    try {\n        // your original code for getting the results...\n        return HitEventsResult.Success(results)\n    } catch (e: JSONException){\n        return HitEventsResult.Failure(e)\n    }\n}\n</code></pre>\n\n<p>Then at the call site:</p>\n\n<pre><code>val hitEventsResult = parseHitEvents(jsonObject)\nwhen (hitEventsResult){\n    is Success -&gt; TODO() // do something with result.value\n    is Failure -&gt; TODO()\n}\n</code></pre>\n\n<p>or if you want to rethrow:</p>\n\n<pre><code>val hitEventsResult = parseHitEvents(jsonObject)\nval hitEvents = when (hitEventsResult) {\n    is Success -&gt; result.value\n    is Failure -&gt; throw result.exception\n}\n</code></pre>\n"}], "owner": {"reputation": 1652, "user_id": 4564450, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/USiV0.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4564450/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1576598010, "creation_date": 1576592978, "question_id": 59376397, "link": "https://stackoverflow.com/questions/59376397/kotlin-not-error-warning-and-handle-its-exception", "title": "Kotlin not error warning and handle its exception", "body": "<p>I'm using a method that gets JSON data from an API, in Java whenever I use <code>getJSONObject</code> I have to surround the method with a try/catch, since it detects that the method throws a <code>JSONException</code>, I want to be able to force the programmer to surround my function in Kotlin when it's used. \nThe method on which I want to do this is the following:</p>\n\n<pre><code>@Throws(JSONException::class)\n    fun parseHitEvents(jsonObject: JSONObject): MutableList&lt;AlgoliaEvent&gt; {\n        val hits = jsonObject.optJSONArray(\"hits\")\n\n        val results = ArrayList&lt;AlgoliaEvent&gt;(hits.length()) // Initialize the array list to be of size hits.length\n\n        hits?.forEach&lt;JSONObject&gt; { hit -&gt;\n            // Check that each hit is not null\n            if (hit == null) return@forEach\n\n            // Parse each hit with a correspond ConciseEvent object\n            val event = jsonToObject&lt;ConciseEvent&gt;(hit).apply {\n                // We need to get the values from AbstractQuery.LatLng and add them into each event object\n                with(hit.getJSONObject(\"_geoloc\")) {\n                    _geoloc.lat = getDouble(\"lat\")\n                    _geoloc.lng = getDouble(\"lng\")\n                }\n\n            // Add the main event in the list of events, so that we can send them as the return value\n            results.add(AlgoliaEvent(HitEvent(event)))\n        }\n\n        return results\n    }\n</code></pre>\n\n<p>However, when this method is being called in another file, I'm not being forced to surround the method in a try/catch.</p>\n\n<p>Is there a way to do that, or is there a way to implement this kind of logic in a better way?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "bottom-sheet"], "comments": [{"owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "edited": false, "score": 0, "creation_date": 1576593024, "post_id": 59376189, "comment_id": 104945034, "body": "send them to the holding Fragment/Activity through interface and send the data to the fragment that is going to be opened"}, {"owner": {"reputation": 172, "user_id": 11222257, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7UZwTQZVnkk/AAAAAAAAAAI/AAAAAAAAAMo/4hCAnmdKKz8/photo.jpg?sz=128", "display_name": "Juan Sancho", "link": "https://stackoverflow.com/users/11222257/juan-sancho"}, "edited": false, "score": 0, "creation_date": 1576593042, "post_id": 59376189, "comment_id": 104945045, "body": "Do you want to share all the RecyclerView data, or just the item selected?"}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 7782316, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/wMCgH.png?s=128&g=1", "display_name": "Sz-Nika Janos", "link": "https://stackoverflow.com/users/7782316/sz-nika-janos"}, "edited": false, "score": 0, "creation_date": 1576669849, "post_id": 59376590, "comment_id": 104972677, "body": "Consider setting the onClick callback at holder creation, in the above example is set on binding time."}], "tags": [], "owner": {"reputation": 713, "user_id": 7782316, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/wMCgH.png?s=128&g=1", "display_name": "Sz-Nika Janos", "link": "https://stackoverflow.com/users/7782316/sz-nika-janos"}, "is_accepted": false, "score": 0, "last_activity_date": 1576593709, "creation_date": 1576593709, "answer_id": 59376590, "question_id": 59376189, "link": "https://stackoverflow.com/questions/59376189/how-to-send-recyclerview-data-to-a-bottomsheetdialog/59376590#59376590", "title": "How to send RecyclerView data to a BottomSheetDialog", "body": "<p>How about his approach: </p>\n\n<ul>\n<li>function/interface passed into the adapter</li>\n</ul>\n\n<p>Note function is passed as last parameter </p>\n\n<pre><code>    class MyAdapter( .... private val onClickCallBack:(item :Itens) ... {\n     ....\n    }\n</code></pre>\n\n<p>Register clicklistener on the  holder</p>\n\n<pre><code>    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int){\n    val item = listaItens[position]\n    val usuarioLogado = UsuarioFirebase.getDadosUsuarioLogado()\n       ....\n     holder.itemView.setOnClickListener{\n       onClickCallBack(item)\n    }\n</code></pre>\n\n<ul>\n<li>Add callback to the  adapter  where you want to show the bottom (sheet ex Activity)</li>\n</ul>\n\n<p>As noted above the function was passed as last parameter to the Aconstructor so we can call it after  like this:</p>\n\n<pre><code>     val myAdapter:MyAdapter = MyAdapter(){\n           //ShowBottomScree \n           //  'it' is refenced as the passed data from adapter. \n\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 3871592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZiob.jpg?s=128&g=1", "display_name": "Sivaraj", "link": "https://stackoverflow.com/users/3871592/sivaraj"}, "is_accepted": true, "score": 1, "last_activity_date": 1576594993, "creation_date": 1576594993, "answer_id": 59376958, "question_id": 59376189, "link": "https://stackoverflow.com/questions/59376189/how-to-send-recyclerview-data-to-a-bottomsheetdialog/59376958#59376958", "title": "How to send RecyclerView data to a BottomSheetDialog", "body": "<p>Why don't you simply pass the data by constructor param of the Bottom sheet</p>\n\n<pre><code>val comentariosBottomSheet = ComentariosBottomSheet(data)//open bottom sheet\ncomentariosBottomSheet.show(fragmentManager, comentariosBottomSheet.tag)\n</code></pre>\n"}], "owner": {"reputation": 612, "user_id": 9729980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pdp1X.jpg?s=128&g=1", "display_name": "Vitor Ferreira", "link": "https://stackoverflow.com/users/9729980/vitor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 59376958, "answer_count": 2, "score": -1, "last_activity_date": 1576594993, "creation_date": 1576592274, "question_id": 59376189, "link": "https://stackoverflow.com/questions/59376189/how-to-send-recyclerview-data-to-a-bottomsheetdialog", "title": "How to send RecyclerView data to a BottomSheetDialog", "body": "<p>I am developing a Recyclerview that pressing a button should open a BottomSheetDialog. I can open BottomSheet but I can't pass data to it. I tried using an interface earlier but it didn't work.</p>\n\n<pre><code>        class MyAdapter(private val listaItens: List&lt;Itens&gt;, private val context: Context,\n                private val fragmentManager: FragmentManager) :\n        RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n    private val POST_TXT = 0\n    private val POST_IMG = 1\n    //some code ...\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        when (viewType) {\n            POST_TXT -&gt; {\n                val item = LayoutInflater.from(parent.context).inflate(R.layout.text, parent, false)\n                return ViewHolderTexto(item)\n            }\n            POST_IMG -&gt; {\n                val item = LayoutInflater.from(parent.context).inflate(R.layout.image, parent, false)\n                return ViewHolderImage(item)\n            }\n            //some code ...\n        }\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n\n        val item = listaItens[position]\n        val usuarioLogado = UsuarioFirebase.getDadosUsuarioLogado()\n\n        when (holder.itemViewType) {\n            POST_TXT -&gt; {\n                val viewHolderTexto = holder as ViewHolderTexto\n                viewHolderTexto.setIsRecyclable(false)\n                //some code ...\n\n            }\n            POST_IMG -&gt; {\n                val viewHolderImage = holder as ViewHolderImage\n                viewHolderImage.setIsRecyclable(false)\n                //some code ...\n                holder.imageComentarioPostagemImage.setOnClickListener {\n                    val comentariosBottomSheet = ComentariosBottomSheet()//open bottom sheet\n                    comentariosBottomSheet.show(fragmentManager, comentariosBottomSheet.tag)\n                }\n\n//some code ...\n            }\n        }\n    }\n</code></pre>\n\n<p>How to send RecyclerView data to a BottomSheetDialog?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 1, "last_activity_date": 1576593251, "last_edit_date": 1576593251, "creation_date": 1576592079, "answer_id": 59376125, "question_id": 59375784, "link": "https://stackoverflow.com/questions/59375784/mix-generic-and-redefine-methods-giving-different-return-types-which-can-be-co/59376125#59376125", "title": "Mix generic and redefine methods, giving different return types, which can be compiled?", "body": "<p>In your first example, you are not trying to redefine a function. You are trying to define two separate functions. And while their signatures are different, they have another problem: conflicting overloads. The compiler wouldn't be able to distinguish which one you are calling, because the input parameters are exactly the same.</p>\n\n<p>In the second example, the problem is matching signatures rather than conflicting overloads.</p>\n\n<p>The last example is OK because you don't have matching signatures or conflicting overloads. When you use them, the compiler can distinguish which one you are calling using the generic types. This happens before type erasure so it isn't an issue.</p>\n\n<p>Some confusion may arise from the term \"method signature\" being overloaded in the Java world. When talking about code you write and what the compiler can handle, return type <strong>is not</strong> part of the signature. But in the bytecode and in errors logged by the JVM, return type <strong>is</strong> part of the signature. If you try to do the third example in Java, it will complain about the methods having the same erasure. <a href=\"http://vanillajava.blogspot.com/2011/02/with-generics-return-type-is-part-of.html\" rel=\"nofollow noreferrer\">Apparently, the Java 6 compiler did allow it, but it was considered a bug and fixed so you can't do it in Java 7</a>+. I don't know the details for this imposed restriction, but Kotlin is more lenient here.</p>\n"}], "owner": {"reputation": 366, "user_id": 11492659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e61e264c1094508a0ae578af2fc03e6?s=128&d=identicon&r=PG&f=1", "display_name": "hzqelf", "link": "https://stackoverflow.com/users/11492659/hzqelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59376125, "answer_count": 1, "score": 1, "last_activity_date": 1576593251, "creation_date": 1576590927, "question_id": 59375784, "link": "https://stackoverflow.com/questions/59375784/mix-generic-and-redefine-methods-giving-different-return-types-which-can-be-co", "title": "Mix generic and redefine methods, giving different return types, which can be compiled?", "body": "<p>Kotlin compiler doesn't allow redefine functions, for example:</p>\n\n<pre><code>fun tmp() = 1\nfun tmp() = \"\" \n</code></pre>\n\n<p>And JVM-based languages have generic erasure, so following code can't be compiled.</p>\n\n<pre><code>class Test&lt;T&gt;(a: T)\nfun Test&lt;String&gt;.myFun() = Test(1)\nfun Test&lt;Int&gt;.myFun() = Test(\"\")\n</code></pre>\n\n<p>But how about this, why it can be compiled?</p>\n\n<pre><code>class Test&lt;T&gt;\nfun Test&lt;String&gt;.myFun() = 1\nfun Test&lt;Int&gt;.myFun() = \"\"\n</code></pre>\n\n<p>Because of the generic erasure, the two functions have the same parameters, and just have different return types. This shouldn't be compiled because of the first example. Why it can be compiled?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-activity", "android-appcompat"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 0, "creation_date": 1576593920, "post_id": 59376197, "comment_id": 104945550, "body": "Thank you for this. I guess my code will run in a fragment class. I mean classes extended from : AppCompatActivity() have the same methods as in classes  extended from : Fragment() ? What is the difference?"}, {"owner": {"reputation": 3043, "user_id": 10300673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17821ef80e645b03b63bc87a23152d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Hidalgo", "link": "https://stackoverflow.com/users/10300673/nikos-hidalgo"}, "reply_to_user": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 1, "creation_date": 1576594441, "post_id": 59376197, "comment_id": 104945830, "body": "@Thanasis An activity is one of the main Android components. A fragment is a representation of a specific behaviour. You can have activities without fragments, but not fragments without at least one activity. Even though they have a lot of common functions, there are many that can&#39;t be included in both. There are many discussions about when to use an activity vs a fragment ( <a href=\"https://stackoverflow.com/questions/20306091/dilemma-when-to-use-fragments-vs-activities\" title=\"dilemma when to use fragments vs activities\">stackoverflow.com/questions/20306091/&hellip;</a> ). Check the developer&#39;s guide though for more info: <a href=\"https://developer.android.com/guide/components/activities/intro-activities\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/activities/&hellip;</a>"}, {"owner": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 0, "creation_date": 1576595106, "post_id": 59376197, "comment_id": 104946177, "body": "Despite reading and searching some issues are not cleaar to me. Thank you for your help. One last thing. Is it possible to redirect my above code to a new activity? But leave the      setContentView(R.layout.activity_main) to the mainActivity and call another activity (class) from the mainActivity class. The new class / activity will not call a view.xml ( setContentView ) but will only accommodate my code. Is it possible. Ok I will try to read more, but  I cant get the answers anywhere. Thank you."}, {"owner": {"reputation": 3043, "user_id": 10300673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17821ef80e645b03b63bc87a23152d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Hidalgo", "link": "https://stackoverflow.com/users/10300673/nikos-hidalgo"}, "reply_to_user": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 1, "creation_date": 1576595612, "post_id": 59376197, "comment_id": 104946448, "body": "@Thanasis activities tend to have their own UI as they&#39;re mainly responsible for what the user sees and interacts with. If you want to create some functionality or a feature within the same user interface (what you call view.xml) you can delegate your functions and organise them in classes and have your activity call them to get the results and then present them to the user. When a function is public in Kotlin you can call it from anywhere. In that sense, it&#39;s possible to have your main activity and call functions from other classes without setting a new content view."}, {"owner": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 0, "creation_date": 1576751196, "post_id": 59376197, "comment_id": 105003077, "body": "Nikos thanks. I will appreciate if you give me a vote to my question. Thanks again."}, {"owner": {"reputation": 3043, "user_id": 10300673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17821ef80e645b03b63bc87a23152d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Hidalgo", "link": "https://stackoverflow.com/users/10300673/nikos-hidalgo"}, "reply_to_user": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "edited": false, "score": 1, "creation_date": 1576752696, "post_id": 59376197, "comment_id": 105003832, "body": "@Thanasis I upvoted your question but there&#39;s already a downvote from someone else, hence you&#39;re now on 0."}], "tags": [], "owner": {"reputation": 3043, "user_id": 10300673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17821ef80e645b03b63bc87a23152d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Hidalgo", "link": "https://stackoverflow.com/users/10300673/nikos-hidalgo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576592297, "creation_date": 1576592297, "answer_id": 59376197, "question_id": 59375775, "link": "https://stackoverflow.com/questions/59375775/how-to-avoid-spaghetti-code-in-android-by-moving-code-in-new-classes-kotlin/59376197#59376197", "title": "How to avoid spaghetti code in Android by Moving code in new Classes (Kotlin)", "body": "<p>You cannot move <code>onActivityResult</code> as <a href=\"https://developer.android.com/training/basics/intents/result\" rel=\"nofollow noreferrer\">it's tied with <code>startActivityForResult</code></a>. You are launching an intent to take a photo using the native camera and your activity is expecting a result. The result returns to the activity that launched the intent in the first place. </p>\n\n<p>Generally, you can remove methods/functions from an activity, when their use can be applied in various other places. Your bitmapToString function, for example, can be easily put in a Utils class as it receives generic variables and has a body that is not dependant on any other part of your activity. With some alterations, other functions could be extracted as well. For example if you add a variable for the file name as a parameter to <code>createImageFile()</code>, you can use that in other activities that don't necessarily want to have the same format of filename as the one used here.</p>\n"}], "owner": {"reputation": 91, "user_id": 4668134, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/143feae32d9ea891aa0fba5da4641f26?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis", "link": "https://stackoverflow.com/users/4668134/thanasis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 59376197, "answer_count": 1, "score": 0, "last_activity_date": 1576592297, "creation_date": 1576590909, "question_id": 59375775, "link": "https://stackoverflow.com/questions/59375775/how-to-avoid-spaghetti-code-in-android-by-moving-code-in-new-classes-kotlin", "title": "How to avoid spaghetti code in Android by Moving code in new Classes (Kotlin)", "body": "<p>From the Main Class below, I am trying to move as much code as possible into 2 new class files named \"PhotoCapture.kt\" and \"PhotoUpload.kt\" respectively. I don't find a way to make it work. It looks like I am confined to work only within the MainActivity. For example I can't find a way to move the method \"onActivityResult\" in a new class. What do I need to know more in order to understand how the whole thing works?</p>\n\n<p>Thank you friends!</p>\n\n<pre><code>package com.tabapab.takepictureandsave\n\nimport android.content.Intent\nimport android.graphics.Bitmap\nimport android.graphics.BitmapFactory\nimport android.net.Uri\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.Environment\nimport android.provider.MediaStore\nimport android.support.v4.content.FileProvider\nimport android.util.Log\nimport android.util.Base64\nimport android.widget.ImageView\nimport com.android.volley.AuthFailureError\nimport com.android.volley.Request\nimport com.android.volley.Response\nimport com.android.volley.toolbox.StringRequest\nimport kotlinx.android.synthetic.main.activity_main.*\nimport org.json.JSONObject\nimport java.io.ByteArrayOutputStream\nimport java.io.File\nimport java.io.IOException\nimport java.text.SimpleDateFormat\nimport java.util.*\n\n\nclass MainActivity : AppCompatActivity() {\n    var namaFile = \"\"\n  //  var fileUri = Uri.parse(\"\")\n    val RC_CAMERA = 100\n\n    val REQUEST_TAKE_PHOTO = 1001\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        capture_btn.setOnClickListener {\n            dispatchTakePictureIntent()\n        }\n    }\n\n    private fun dispatchTakePictureIntent() {\n        Intent(MediaStore.ACTION_IMAGE_CAPTURE).also { takePictureIntent -&gt;\n            // Ensure that there's a camera activity to handle the intent\n            takePictureIntent.resolveActivity(packageManager)?.also {\n                // Create the File where the photo should go\n                val photoFile: File? = try {\n                    createImageFile()\n                } catch (ex: IOException) {\n                    // Error occurred while creating the File\n\n                    null\n                }\n                // Continue only if the File was successfully created\n                photoFile?.also {\n                    val photoURI: Uri = FileProvider.getUriForFile(\n                            this,\n                            \"com.tabapab.takepictureandsave\",\n                            it\n                    )\n                    takePictureIntent.putExtra(MediaStore.ACTION_IMAGE_CAPTURE, photoURI)\n                    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI)\n                    startActivityForResult(takePictureIntent, REQUEST_TAKE_PHOTO)\n                }\n            }\n        }\n    }\n\n    lateinit var currentPhotoPath: String\n\n    @Throws(IOException::class)\n    private fun createImageFile(): File {\n        // Create an image file name\n        val timeStamp: String = SimpleDateFormat(\"ddMMyyyy_HHmmss\").format(Date())\n        val storageDir: File = getExternalFilesDir(Environment.DIRECTORY_PICTURES)\n        val filNam = File.createTempFile(\n                \"JPEG_${timeStamp}_\", /* prefix */\n                \".jpg\", /* suffix */\n                storageDir /* directory */\n        ).apply {\n            // Save a file: path for use with ACTION_VIEW intents\n            currentPhotoPath = absolutePath\n        }\n        Log.d(\"myDebug\", storageDir.toString())\n        return filNam\n    }\n\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        if (requestCode == REQUEST_TAKE_PHOTO &amp;&amp; resultCode == RESULT_OK) {\n            //   val imageBitmap = data.extras.get(\"data\") as Bitmap\n            // image_view.setImageBitmap(imageBitmap)\n            // galleryAddPic()\n            val f = File(currentPhotoPath)\n            Log.d(\"myDebug\", currentPhotoPath)\n       //     image_view.setImageURI(Uri.fromFile(f)) // this sets uncompressed,\n        val imgStr =  getBitmapToString(image_view, Uri.fromFile(f))\n            volleyImg(imgStr)\n        }\n    }\n\n    fun bitmapToString(bmp: Bitmap): String {\n        val outputStream = ByteArrayOutputStream()\n        bmp.compress(Bitmap.CompressFormat.JPEG, 60, outputStream)\n        val byteArray = outputStream.toByteArray()\n        return Base64.encodeToString(byteArray, Base64.DEFAULT)\n\n\n    }\n\n    fun getBitmapToString(imV: ImageView, Fileuri: Uri): String {\n            var bmp = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888)\n            bmp = BitmapFactory.decodeFile(Fileuri.path)\n            Log.d(\"myDebug\", Fileuri.path)\n            var dim = 720\n            Log.d(\"myDebug\", \"height:\" + bmp.height + \" _width:\"+ bmp.width)\n            if (bmp.height &gt; bmp.width) {\n                bmp = Bitmap.createScaledBitmap(bmp,\n                        (bmp.width*dim).div(bmp.height), dim, true)\n            } else {\n                bmp = Bitmap.createScaledBitmap(bmp,\n                        dim, (bmp.height*dim).div(bmp.width), true)\n            }\n            imV.setImageBitmap(bmp)\n            return bitmapToString(bmp)\n            return \"\"\n    }\n\n    private fun volleyImg(imgStr: String) {\n\n        msg_display.text = \"Starting Volley Kick\"\n\n        val url:String = \"http://192.168.10.6/tabapad1/modules/android/classes/main.php?op=filestr\"\n        //      val rq:RequestQueue=Volley.newRequestQueue(this)\n        val stringRequest = object : StringRequest(Request.Method.POST, url,\n                Response.Listener&lt;String&gt; { response -&gt;\n                    // Process the json\n                    try {\n                        val obj = JSONObject(response)\n                        msg_display.text = obj.getString(\"message\")\n                    } catch (e: Exception) {\n                        msg_display.text = \"Exception: $e\"\n                    }\n\n                }, Response.ErrorListener { error -&gt;\n            msg_display.text = error.message\n        }) {\n\n\n            @Throws(AuthFailureError::class)\n            override fun getParams(): Map&lt;String, String&gt; {\n                val params = HashMap&lt;String, String&gt;()\n                params.put(\"filename\", \"Maria2.jpg\")\n                params.put(\"imstr\", imgStr)\n                msg_display.text = \"Sets the Volley parameters\"\n                return params\n\n            }\n\n        }\n        // Add the volley post request to the request queue\n        VolleySingleton.getInstance(this).addToRequestQueue(stringRequest)\n\n\n        //    rq.add(request)\n\n\n    }\n\n\n//    private fun galleryAddPic() {\n//        // run this to add the photo to system's Media Provider's database\n//        // It will be available in the Android Gallery application and other Apps\n//        Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE).also { mediaScanIntent -&gt;\n//            val f = File(currentPhotoPath)\n//            mediaScanIntent.data = Uri.fromFile(f)\n//            sendBroadcast(mediaScanIntent)\n//        }\n//    }\n\n\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-realtime-database", "android-recyclerview"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576669226, "post_id": 59375278, "comment_id": 104972365, "body": "About which list are you talking about? As I can see, you only need one product, right?"}, {"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576669364, "post_id": 59375278, "comment_id": 104972441, "body": "here this; <code>val generic: GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt; =  object : GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt;() {}                             val items = h.child(&quot;items&quot;).getValue(generic)                             items?.let { productList.addAll(it) }</code>"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576669510, "post_id": 59375278, "comment_id": 104972526, "body": "I don&#39;t understand. You try to get a single product or a list of products?"}, {"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576669780, "post_id": 59375278, "comment_id": 104972645, "body": "list of products."}], "answers": [{"comments": [{"owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "reply_to_user": {"reputation": 111, "user_id": 1971804, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/86b3f793c1be67867de32b77d1de63e7?s=128&d=identicon&r=PG", "display_name": "user1971804", "link": "https://stackoverflow.com/users/1971804/user1971804"}, "edited": false, "score": 0, "creation_date": 1576594171, "post_id": 59375372, "comment_id": 104945698, "body": "@DavidGreen did you try the answer?"}, {"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "edited": false, "score": 0, "creation_date": 1576710050, "post_id": 59375372, "comment_id": 104991379, "body": "Thanks @PeterHaddad. It helped a lot."}], "tags": [], "owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "is_accepted": false, "score": 2, "last_activity_date": 1576589748, "last_edit_date": 1576589748, "creation_date": 1576589520, "answer_id": 59375372, "question_id": 59375278, "link": "https://stackoverflow.com/questions/59375278/how-retreive-firebase-data-based-on-unique-key-value-in-kotlin/59375372#59375372", "title": "how retreive firebase data based on unique key value in Kotlin", "body": "<p>You should do the following:</p>\n\n<pre><code>ref = FirebaseDatabase.getInstance().getReference().child(\"Sales\").child(\"-Lw37uyfuBA0AfTalp\")\n\n ref.addValueEventListener(object : ValueEventListener{\n        override fun onCancelled(p0: DatabaseError) {\n\n        }\n\n        override fun onDataChange(p0: DataSnapshot) {\n\n                    println(\"onDataChange\")\n                    if (p0.exists()) {\n                         val date = p0.child(\"date\").getValue(String::class.java)\n                         val discount = p0.child(\"discount\").getValue(String::class.java)\n                        }\n                }\n    })\n</code></pre>\n\n<p>This will get you the data under the unique key</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "edited": false, "score": 0, "creation_date": 1576591343, "post_id": 59375459, "comment_id": 104944048, "body": "Hi @Alex, this doesn&#39;t give me any data. I think it is because the rest of the code I have.  <code>if (h.hasChild(&quot;items&quot;)) {                             val generic: GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt; =  object : GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt;() {}                             val items = h.child(&quot;items&quot;).getValue(generic)                             items?.let { productList.addAll(it) }                         }</code>    by using this code, I get all product entries as ArrayList, and using it later to display in recyclerview. Because in some case, it is multiple products listed."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "edited": false, "score": 0, "creation_date": 1576593667, "post_id": 59375459, "comment_id": 104945382, "body": "But if you change this line <code>val product = dataSnapshot.getValue(Product::class.java)</code> with <code>val time = dataSnapshot.child(&quot;time&quot;).getValue(String::class.java)</code> and log <code>Log.d(TAG, time)</code>, do you get any output?"}, {"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "edited": false, "score": 0, "creation_date": 1576668596, "post_id": 59375459, "comment_id": 104972041, "body": "Not yet. in your code, <code>log.d</code> doesnt show anything. it is probably not getting <code>val product</code>. If I type there something else, message prints in the log. I will edit in the question this part and also, will add my <code>product</code> class."}, {"owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "edited": false, "score": 0, "creation_date": 1576709826, "post_id": 59375459, "comment_id": 104991312, "body": "Thanks @Alex Mamo, It didn&#39;t work like that, But after I edited it worked. It such a great help. Thanks."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576670471, "last_edit_date": 1576670471, "creation_date": 1576589812, "answer_id": 59375459, "question_id": 59375278, "link": "https://stackoverflow.com/questions/59375278/how-retreive-firebase-data-based-on-unique-key-value-in-kotlin/59375459#59375459", "title": "how retreive firebase data based on unique key value in Kotlin", "body": "<blockquote>\n  <p>What actually need it to give me only the entries from a specific unique key</p>\n</blockquote>\n\n<p>To get the entries from a specific unique key, for instance <code>-Lw37uyfuBA0AfTalp</code>, please use the following lines of code:</p>\n\n<pre><code>val rootRef = FirebaseDatabase.getInstance().reference\nval ref = rootRef.child(\"Sales\").child(\"-Lw37uyfuBA0AfTalp\")\nval valueEventListener = object : ValueEventListener {\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n        val product = dataSnapshot.getValue(Product::class.java)\n        Log.d(TAG, product!!.time)\n    }\n\n    override fun onCancelled(databaseError: DatabaseError) {\n        Log.d(TAG, databaseError.getMessage()) //Don't ignore errors!\n    }\n}\nref.addListenerForSingleValueEvent(valueEventListener)\n</code></pre>\n\n<p>The output in your logcat will be:</p>\n\n<pre><code>11:16:42\n</code></pre>\n\n<p>I just added a log statement to see that it works.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>According to your comment, if you want to get a list of products, please use the following lines of code:</p>\n\n<pre><code>val rootRef = FirebaseDatabase.getInstance().reference\nval salesRef = rootRef.child(\"Sales\")\nval valueEventListener = object : ValueEventListener {\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n        val productList = arrayListOf&lt;Product&gt;()\n        for (ds in dataSnapshot.children) {\n            val product = ds.getValue(Product::class.java)\n            productList.add(product)\n            Log.d(TAG, product!!.time)\n        }\n        //Do what you need to do with your list\n    }\n\n    override fun onCancelled(databaseError: DatabaseError) {\n        Log.d(TAG, databaseError.getMessage()) //Don't ignore errors!\n    }\n}\nsalesRef.addListenerForSingleValueEvent(valueEventListener)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7453829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab418f6cf83957460e12ad25ecd3e532?s=128&d=identicon&r=PG&f=1", "display_name": "David Green", "link": "https://stackoverflow.com/users/7453829/david-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 59375459, "answer_count": 2, "score": 0, "last_activity_date": 1576670471, "creation_date": 1576589243, "last_edit_date": 1576668949, "question_id": 59375278, "link": "https://stackoverflow.com/questions/59375278/how-retreive-firebase-data-based-on-unique-key-value-in-kotlin", "title": "how retreive firebase data based on unique key value in Kotlin", "body": "<p>I am getting all <code>\"items\"</code> entries from firebase database here.\nWhat actually need it to give me only the entries from specific <code>unique key</code></p>\n\n<pre><code>ref = FirebaseDatabase.getInstance().getReference().child(\"Sales\")\nref.addValueEventListener(object : ValueEventListener{\n    override fun onCancelled(p0: DatabaseError) {\n    }\n    override fun onDataChange(p0: DataSnapshot) {\n        ref.addListenerForSingleValueEvent(object : ValueEventListener {\n            override fun onCancelled(p0: DatabaseError) {\n            }\n            override fun onDataChange(p1: DataSnapshot) {\n                println(\"onDataChange\")\n                if (p0.exists()) {\n                    list.clear()\n                    for (h in p0.children) {\n                        if (h.hasChild(\"items\")) {\n                            val generic: GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt; =  object : GenericTypeIndicator&lt;ArrayList&lt;Product&gt;&gt;() {}\n                            val items = h.child(\"items\").getValue(generic)\n                            items?.let { productList.addAll(it) }\n                        }\n                        val adapter = ReceiptItemsAdapter(applicationContext, productList)\n                        rReceyclerView.adapter = adapter\n                    }\n                }\n            }\n        })\n    }\n})\n</code></pre>\n\n<p>I have tried like this but it didn't work, didn't give any error too.</p>\n\n<pre><code> ref = FirebaseDatabase.getInstance().getReference().child(\"Sales/-Lw37uyfuBA0AfTalp\")\n</code></pre>\n\n<p>here is my json file </p>\n\n<pre><code>{\n  \"-Lw37uyfuBA0AfTalp\": {\n    \"date\": \"14\\/12\\/2019\",\n    \"discount\": 0.24,\n    \"due\": 0,\n    \"items\": [\n      {\n        \"pamount\": 2.4,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 1\n      }\n    ],\n    \"paym\": [\n      {\n        \"paymentAmnt\": 0.02,\n        \"paymentDesc\": \"Cash Payment :\"\n      },\n      {\n        \"paymentAmnt\": 2.14,\n        \"paymentDesc\": \"Card Payment :\"\n      }\n    ],\n    \"subTotal\": 2.4,\n    \"time\": \"11:16:42\",\n    \"total\": 2.16\n  },\n  \"-Lw5Qx8sVdw3ZCMiXAL-\": {\n    \"date\": \"14\\/12\\/2019\",\n    \"discount\": 1,\n    \"due\": 0,\n    \"items\": [\n      {\n        \"pamount\": 4.8,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 2\n      },\n      {\n        \"pamount\": 2.6,\n        \"pname\": \"Brownie\",\n        \"pprice\": 2.6,\n        \"punit\": 1\n      },\n      {\n        \"pamount\": 2.6,\n        \"pname\": \"Brownie\",\n        \"pprice\": 2.6,\n        \"punit\": 1\n      }\n    ],\n    \"name\": \"James Brown\",\n    \"paym\": [\n      {\n        \"paymentAmnt\": 3,\n        \"paymentDesc\": \"Cash Payment :\"\n      },\n      {\n        \"paymentAmnt\": 5,\n        \"paymentDesc\": \"Staff Markout :\"\n      },\n      {\n        \"paymentAmnt\": 1,\n        \"paymentDesc\": \"Card Payment :\"\n      }\n    ],\n    \"subTotal\": 10,\n    \"time\": \"22:03:07\",\n    \"total\": 9\n  },\n  \"-Lw5T4TfYUTXsWKAndBx\": {\n    \"date\": \"14\\/12\\/2019\",\n    \"discount\": 0.24,\n    \"due\": -0.84,\n    \"items\": [\n      {\n        \"pamount\": 2.4,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 1\n      }\n    ],\n    \"name\": \"James Brown\",\n    \"paym\": [\n      {\n        \"paymentAmnt\": 3,\n        \"paymentDesc\": \"Cash Payment :\"\n      }\n    ],\n    \"subTotal\": 2.4,\n    \"time\": \"22:12:26\",\n    \"total\": 2.16\n  },\n  \"-Lw5UWguHS18IwWE6elT\": {\n    \"date\": \"14\\/12\\/2019\",\n    \"discount\": 0.26,\n    \"due\": -1.66,\n    \"items\": [\n      {\n        \"pamount\": 2.6,\n        \"pname\": \"Brownie\",\n        \"pprice\": 2.6,\n        \"punit\": 1\n      }\n    ],\n    \"name\": \"James Brown\",\n    \"paym\": [\n      {\n        \"paymentAmnt\": 4,\n        \"paymentDesc\": \"Cash Payment :\"\n      }\n    ],\n    \"subTotal\": 2.6,\n    \"time\": \"22:18:43\",\n    \"total\": 2.34\n  },\n  \"-Lw5ypp5xJLJO53bjejk\": {\n    \"date\": \"15\\/12\\/2019\",\n    \"discount\": 0,\n    \"due\": -1.6,\n    \"items\": [\n      {\n        \"pamount\": 2.4,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 1\n      }\n    ],\n    \"name\": \"James Brown\",\n    \"paym\": [\n      {\n        \"paymentAmnt\": 4,\n        \"paymentDesc\": \"Cash Payment :\"\n      }\n    ],\n    \"subTotal\": 2.4,\n    \"time\": \"00:35:32\",\n    \"total\": 2.4\n  },\n  \"-LwANPC0UYCmTnqm7DRV\": {\n    \"date\": \"15\\/12\\/2019\",\n    \"discount\": 1,\n    \"due\": 0,\n    \"items\": [\n      {\n        \"pamount\": 2.4,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 1\n      },\n      {\n        \"pamount\": 2.6,\n        \"pname\": \"Brownie\",\n        \"pprice\": 2.6,\n        \"punit\": 1\n      },\n      {\n        \"pamount\": 2.4,\n        \"pname\": \"Granola\",\n        \"pprice\": 2.4,\n        \"punit\": 1\n      },\n      {\n        \"pamount\": 2.6,\n        \"pname\": \"Brownie\",\n        \"pprice\": 2.6,\n        \"punit\": 1\n      }\n    ],\n    \"name\": \"James Brown\",\n    \"paym\": [\n      {\n        \"paymentAmnt\": 5,\n        \"paymentDesc\": \"Cash Payment :\"\n      },\n      {\n        \"paymentAmnt\": 4,\n        \"paymentDesc\": \"Card Payment :\"\n      }\n    ],\n    \"subTotal\": 10,\n    \"time\": \"21:05:43\",\n    \"total\": 9\n  }\n}\n</code></pre>\n\n<p>Can anyone tell me please, where I am doing wrong ?</p>\n\n<p>Thanks.</p>\n\n<p>Edit part\n....\nProduct class</p>\n\n<pre><code>data class Product(var pName: String = \"\", var pUnit: Int = 1, var pPrice: Double = 00.00, var pAmount: Double = 00.00) : Parcelable {\nconstructor(parcel: Parcel) : this(\n    parcel.readString(),\n    parcel.readInt(),\n    parcel.readDouble(),\n    parcel.readDouble()\n)\n\noverride fun writeToParcel(parcel: Parcel, flags: Int) {\n    parcel.writeString(pName)\n    parcel.writeInt(pUnit)\n    parcel.writeDouble(pPrice)\n    parcel.writeDouble(pAmount)\n}\n\noverride fun describeContents(): Int {\n    return 0\n}\n\ncompanion object CREATOR : Parcelable.Creator&lt;Product&gt; {\n    override fun createFromParcel(parcel: Parcel): Product {\n        return Product(parcel)\n    }\n\n    override fun newArray(size: Int): Array&lt;Product?&gt; {\n        return arrayOfNulls(size)\n    }\n}\n</code></pre>\n\n<p>Also, the part tried here.</p>\n\n<pre><code>        val rootRef = FirebaseDatabase.getInstance().reference\n    val ref = rootRef.child(\"Sales\").child(\"-LwIWKf-CTNTdwi4iMLU\")\n    val valueEventListener = object : ValueEventListener {\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            val product = dataSnapshot.getValue(Product::class.java)\n            //println(\"pname : \"+product?.pName)\n            Log.d(TAG, product!!.pName)\n        }\n\n        override fun onCancelled(databaseError: DatabaseError) {\n           // Log.d(\"TAG\", databaseError.getMessage()) //Don't ignore errors!\n        }\n    }\n    ref.addListenerForSingleValueEvent(valueEventListener)\n</code></pre>\n\n<p>Also, tried Peter's solution it works, but I need to get \"items\" as an ArrayList\nThanks</p>\n"}, {"tags": ["java", "kotlin", "java-8"], "answers": [{"tags": [], "owner": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "is_accepted": true, "score": 1, "last_activity_date": 1576589596, "creation_date": 1576589596, "answer_id": 59375396, "question_id": 59375251, "link": "https://stackoverflow.com/questions/59375251/offsetdatetime-parse-datetimeparseexception/59375396#59375396", "title": "OffsetDateTime Parse DateTimeParseException", "body": "<p>You are attempting to parse the JSON <code>[{\"date\":\"2019-12-17T02:10:00.000Z\"}]</code> with <code>OffsetDateTime</code> however you should only parse the <code>date</code> field from the JSON. Take a look at <a href=\"https://stackoverflow.com/q/2591098/1602555\">How to parse JSON in Java</a> question to understand how to extract a field from JSON. </p>\n\n<p>If this is a very simple case where you always have the same input format you can use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#substring(int,%20int)\" rel=\"nofollow noreferrer\"><code>String.substring()</code></a></p>\n\n<pre><code>String json = \"[{\\\"date\\\":\\\"2019-12-17T02:10:00.000Z\\\"}]\";\nString value = json.substring(10, 34);\nOffsetDateTime dt = OffsetDateTime.parse(value);\nSystem.out.println(dt); // 2019-12-17T02:10Z\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6250134, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-_eapVs3pV10/AAAAAAAAAAI/AAAAAAAAAI0/8WNn7i7_PRk/photo.jpg?sz=128", "display_name": "Vinaykumar Devarkond", "link": "https://stackoverflow.com/users/6250134/vinaykumar-devarkond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59375396, "answer_count": 1, "score": -2, "last_activity_date": 1577098539, "creation_date": 1576589154, "last_edit_date": 1577098539, "question_id": 59375251, "link": "https://stackoverflow.com/questions/59375251/offsetdatetime-parse-datetimeparseexception", "title": "OffsetDateTime Parse DateTimeParseException", "body": "<p>I am converting the date \"2019-12-17T06:50:00.000Z\" to OffsetDateTime like </p>\n\n<pre><code>OffsetDateTime.parse(\"2019-12-17T06:50:00.000Z\"). \n</code></pre>\n\n<p>I am getting error as </p>\n\n<blockquote>\n  <p>java.time.format.DateTimeParseException: Text '[{\"date\":\"2019-12-17T02:10:00.000Z\"}]' could not be parsed at index 0 at java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949).</p>\n</blockquote>\n\n<p>How can parse this?</p>\n"}, {"tags": ["java", "kotlin", "junit", "bdd", "assertj"], "comments": [{"owner": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 0, "creation_date": 1576588641, "post_id": 59375081, "comment_id": 104942418, "body": "what exactly do you think ignored does? It doesn&#39;t execute those tests, so basically, they are treated as non-existent"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 0, "creation_date": 1576588769, "post_id": 59375081, "comment_id": 104942496, "body": "@Stultuske yes, but they&#39;re still reported as &quot;ignored&quot;. I want them gone completely."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1576588902, "post_id": 59375081, "comment_id": 104942563, "body": "Assumptions are what they are... assumptions... you assumed some things to be true, but they weren&#39;t... as soon as an assumption doesn&#39;t hold, the test is ignored... I wouldn&#39;t use assumptions for such a test as you have shown.... instead I would rather add an additional intermediate function such as: <code>fun lightAlignedStarWarsCharacters() = starWarsCharacters().filter { it.alignment == LIGHT }</code> and use that function instead as input for the light-aligned test..."}, {"owner": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 0, "creation_date": 1576589191, "post_id": 59375081, "comment_id": 104942748, "body": "@User1291 so you don&#39;t want to execute them? you don&#39;t want them mentioned in a report? delete them, or completely comment them out. Normally, ignoring tests is not because you don&#39;t need them anymore, you just temporarily don&#39;t want to run them. In that case, it is good to be reminded that there are ignored tests. If you don&#39;t want that, and you don&#39;t want to run the tests, kind of seems you just want them gone totally. As Captain Picard would say: Make it so!"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 1, "creation_date": 1576589552, "post_id": 59375081, "comment_id": 104942987, "body": "@Stultuske I think you may want to take another look at the code example I posted. Because I don&#39;t want the ENTIRE test gone, just the test cases that don&#39;t match the assumptions."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1576589797, "post_id": 59375081, "comment_id": 104943138, "body": "Assumptions are helpful, if you need to ensure that certain conditions are met, before the actual test is executed... but every assumption that does not hold needs to be marked somehow (will be ignored)... You know that the light-aligned-test will only just ever check light-aligned characters... so it isn&#39;t an assumption that you have light-aligned characters,... it&#39;s a fact... same goes for the dark side... I think the given/when/then-style makes it less obvious why assumptions are so important... maybe it helps if you think of it as <code>assumeThat(character).isLightAligned()</code>?"}, {"owner": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "edited": false, "score": 0, "creation_date": 1576590387, "post_id": 59375081, "comment_id": 104943469, "body": "The javadoc of <code>Assume</code> (which I&#39;d guess this is translated to) says: &quot;The default JUnit runner skips tests with failing assumptions. Custom runners may behave differently.&quot; so writing an own runner might be an option. I haven&#39;t done it, though."}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1576592862, "post_id": 59375081, "comment_id": 104944944, "body": "I&#39;m not sure this is a proper use of assumptions. You appear to be using JUnit 5 whose <a href=\"https://junit.org/junit5/docs/5.0.0/api/org/junit/jupiter/api/Assumptions.html\" rel=\"nofollow noreferrer\">documentation</a> implies assumptions are meant more for assuming something about the testing <i>environment</i>. The <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions\" rel=\"nofollow noreferrer\">examples</a> given in the <i>User Guide</i> all deal with whether or not the tests are being performed on the local dev machine or a CI server."}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576588577, "creation_date": 1576588577, "question_id": 59375081, "link": "https://stackoverflow.com/questions/59375081/can-you-ignore-ignored-tests", "title": "Can you &quot;ignore&quot; ignored tests?", "body": "<p>The latest AssertJ release notes have brought to my attention that I haven't really experimented much with assertj assumptions, so I thought I'd play around with it a bit:</p>\n\n<pre><code>object AssertjAssumptions {\n\n    @MethodSource(\"starWarsCharacters\")\n    @ParameterizedTest\n    fun `light-aligned force users`(character: ForceUser){\n        given(character.alignment).isEqualTo(LIGHT)\n\n        then(character.lightsaberColour).isNotEqualTo(RED)\n    }\n\n    @MethodSource(\"starWarsCharacters\")\n    @ParameterizedTest\n    fun `dark-aligned force users`(character: ForceUser){\n        given(character.alignment).isEqualTo(DARK)\n\n        then(character.lightsaberColour).isIn(RED, UNKNOWN)\n    }\n\n    enum class Alignment {\n        LIGHT, DARK, WEIRD\n    }\n\n    enum class LightsaberColour{\n        BLUE, GREEN, YELLOW, PURPLE, RED, WHITE, UNKNOWN\n    }\n\n    data class ForceUser(val name: String, val alignment: Alignment, val lightsaberColour: LightsaberColour)\n\n    @JvmStatic fun starWarsCharacters() = listOf(\n        ForceUser(\"2nd Sister\", DARK, RED),\n        ForceUser(\"Ahsoka Tano\", WEIRD, WHITE),\n        ForceUser(\"Asajj Ventress\", DARK, RED),\n        ForceUser(\"Cal Kestis\", LIGHT, UNKNOWN),\n        ForceUser(\"Count Dooku\", DARK, RED),\n        ForceUser(\"Darth Maul\", DARK, RED),\n        ForceUser(\"Darth Vader\", DARK, RED),\n        ForceUser(\"Ki-Adi-Mundi\", LIGHT, BLUE),\n        ForceUser(\"Kylo Ren\", WEIRD, RED),\n        ForceUser(\"Luke Skywalker\", LIGHT, GREEN),\n        ForceUser(\"Mace Windu\", WEIRD, PURPLE),\n        ForceUser(\"Obi-Wan Kenobi\", LIGHT, BLUE),\n        ForceUser(\"Qui-Gon Jinn\", LIGHT, GREEN),\n        ForceUser(\"Quinlan Vos\", WEIRD, YELLOW),\n        ForceUser(\"Rey\", WEIRD, BLUE),\n        ForceUser(\"Sheev Palpatine\", DARK, RED),\n        ForceUser(\"Snoke\", DARK, UNKNOWN),\n        ForceUser(\"Yoda\", LIGHT, GREEN)\n    )\n}\n</code></pre>\n\n<p>This seems to work, but reports</p>\n\n<blockquote>\n  <p>Tests passed: 13, ignored: 23 of 36 tests</p>\n</blockquote>\n\n<p>Which is suboptimal.</p>\n\n<p>Can I somehow tell JUnit that for these tests, \"ignored\"  means the test can be treated as non-existent?</p>\n"}, {"tags": ["gradle", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 0, "creation_date": 1600334374, "post_id": 59374861, "comment_id": 113057053, "body": "Use <code>+=</code> in place of <code>=</code> for <code>freeCompilerArgs</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2689, "user_id": 185498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77120c6ac145bba587b662a014dbdd4?s=128&d=identicon&r=PG", "display_name": "Manushin Igor", "link": "https://stackoverflow.com/users/185498/manushin-igor"}, "is_accepted": false, "score": -1, "last_activity_date": 1589390790, "creation_date": 1589390790, "answer_id": 61781005, "question_id": 59374861, "link": "https://stackoverflow.com/questions/59374861/how-to-set-max-memory-size-of-kotlin-compiler/61781005#61781005", "title": "How to set max memory size of kotlin compiler", "body": "<p>According to <a href=\"https://github.com/JetBrains/kotlin/blob/master/buildSrc/gradle.properties#L1\" rel=\"nofollow noreferrer\">settings in the official gradle repository</a>, the following option should be used in <code>gradle.properties</code> file:</p>\n\n<pre><code>org.gradle.jvmargs=-Dkotlin.daemon.jvm.options=-Xmx10G\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 10039586, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u042e\u0440\u0438\u0439 \u0411\u0430\u0440\u0438\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/10039586/%d0%ae%d1%80%d0%b8%d0%b9-%d0%91%d0%b0%d1%80%d0%b8%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 848, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1589390790, "creation_date": 1576587872, "question_id": 59374861, "link": "https://stackoverflow.com/questions/59374861/how-to-set-max-memory-size-of-kotlin-compiler", "title": "How to set max memory size of kotlin compiler", "body": "<p>I'm trying to compile large kotlin project that use Gradle. So I can't just edit settings of Kotlin compiler in intellij IDEA because they will be overridden.<br>\nI've tried to set <code>freeCompilerArgs</code> </p>\n\n<pre><code>allprojects {\n    apply plugin: 'java'\n    apply plugin: 'kotlin'\n    apply plugin: 'idea'\n\n    compileKotlin {\n        kotlinOptions {\n            freeCompilerArgs = ['-Xmx10G', '-Xjvm-default=enable']\n        }\n    }\n}\n</code></pre>\n\n<p>But it didn't help. \nWhat I'm doing wrong?</p>\n"}, {"tags": ["kotlin", "kotlin-multiplatform"], "answers": [{"tags": [], "owner": {"reputation": 953, "user_id": 4070660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c16ef6b3d189409dad1c7f5622ade04c?s=128&d=identicon&r=PG&f=1", "display_name": "K.H.", "link": "https://stackoverflow.com/users/4070660/k-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1577350746, "creation_date": 1577350746, "answer_id": 59486053, "question_id": 59374620, "link": "https://stackoverflow.com/questions/59374620/how-to-hide-package-structure-for-javascript-target-in-multiplatform-kotlin-proj/59486053#59486053", "title": "How to hide package structure for JavaScript target in multiplatform Kotlin project", "body": "<p>I believe you are looking for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-js-qualifier/index.html\" rel=\"nofollow noreferrer\">JsQualifier</a></p>\n"}], "owner": {"reputation": 1518, "user_id": 1770617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/luoHe.jpg?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/1770617/rene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577350746, "creation_date": 1576586989, "last_edit_date": 1576588714, "question_id": 59374620, "link": "https://stackoverflow.com/questions/59374620/how-to-hide-package-structure-for-javascript-target-in-multiplatform-kotlin-proj", "title": "How to hide package structure for JavaScript target in multiplatform Kotlin project", "body": "<p>I'm building a library with Kotlin multiplatform, which should be used by native JVM and Node applications. I'm struggling to provide an idiomatic API for the Node version, because Kotlin <a href=\"https://kotlinlang.org/docs/reference/js-to-kotlin-interop.html#package-structure\" rel=\"nofollow noreferrer\">exposes the package structure to JavaScript</a>.</p>\n\n<p>I'd like to have the definition of my entities in the common sourceSet within the package <code>com.company.myclientlib.common</code>:</p>\n\n<pre><code>// sourceSet: common\npackage com.company.myclientlib.common\n\ndata class Product(\n    val id: String,\n    val name: String,\n    val displayName: String\n    // ...\n)\n</code></pre>\n\n<p>With this creating new <code>Product</code>s in a Node application looks like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Node application code\nconst lib = require(\"lib\")\nconst product = new lib.com.company.myclientlib.common.Product(\"id\", \"name\", ...)\n</code></pre>\n\n<p>I've tried to put <code>@JsName(\"Product\")</code> on the <code>Product</code> class. Although the name can be influcent with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-js-name/index.html\" rel=\"nofollow noreferrer\"><code>@JsName</code></a>, the package will still be exposed the same way.</p>\n\n<p><strong>Is there any way to not to expose the package of <code>Product</code> in JavaScript without re-implementing the type in the JavaScript sourceSet of the library code?</strong></p>\n\n<p><em>Note</em>: Exposing the package for JVM targets is just fine.</p>\n"}, {"tags": ["android", "kotlin", "android-statusbar"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1576587624, "post_id": 59374565, "comment_id": 104941886, "body": "From API 23 you can set <code>View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR</code>, try adding this to systemUiVisibility"}, {"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "reply_to_user": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1576588020, "post_id": 59374565, "comment_id": 104942075, "body": "I Try it, not work"}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "edited": false, "score": 3, "creation_date": 1576588384, "post_id": 59374932, "comment_id": 104942272, "body": "Yes, Than you, It work now  But the navigation bar is hide now, How to show it"}, {"owner": {"reputation": 15641, "user_id": 377983, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1bc7aa2eee02b7796a90c3986a37029a?s=128&d=identicon&r=PG", "display_name": "mahdi ", "link": "https://stackoverflow.com/users/377983/mahdi"}, "edited": false, "score": 1, "creation_date": 1605798257, "post_id": 59374932, "comment_id": 114767414, "body": "&lt;item name=&quot;android:windowTranslucentNavigation&quot;&gt;false&lt;/item&gt;"}], "tags": [], "owner": {"reputation": 621, "user_id": 6875716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqr0O.jpg?s=128&g=1", "display_name": "Tariqul Islam", "link": "https://stackoverflow.com/users/6875716/tariqul-islam"}, "is_accepted": true, "score": 4, "last_activity_date": 1594755645, "last_edit_date": 1594755645, "creation_date": 1576588079, "answer_id": 59374932, "question_id": 59374565, "link": "https://stackoverflow.com/questions/59374565/how-to-make-the-status-bar-completely-transparent-with-dark-text-color-with-kotl/59374932#59374932", "title": "How to make the status bar completely transparent with dark text color with Kotlin", "body": "<p>You have to follow three steps.</p>\n<ol>\n<li><p>Update your style.xml and main theme</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;\n&lt;item name=&quot;android:windowTranslucentNavigation&quot;&gt;true&lt;/item&gt;\n</code></pre>\n</li>\n<li><p>In your main xml add</p>\n<pre class=\"lang-xml prettyprint-override\"><code>android:fitsSystemWindows=&quot;true&quot;\n</code></pre>\n</li>\n<li><p>In your activity before <code>setcontView</code> add</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n    Window w = getWindow();\n    w.setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);\n}\n</code></pre>\n</li>\n</ol>\n"}], "owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 59374932, "answer_count": 1, "score": 0, "last_activity_date": 1594755645, "creation_date": 1576586798, "question_id": 59374565, "link": "https://stackoverflow.com/questions/59374565/how-to-make-the-status-bar-completely-transparent-with-dark-text-color-with-kotl", "title": "How to make the status bar completely transparent with dark text color with Kotlin", "body": "<p>I use Kotlin to create an android app, I would like to know how to make the status bar completely transparent with dark text color with Kotlin\nI seen the following soltuion but not work for me \n<a href=\"https://stackoverflow.com/questions/49296468/dark-text-transparent-status-bar-with-opaque-navigation-bar\">Dark-text transparent status bar with opaque navigation bar</a>\nHere's my following code : </p>\n\n<pre><code>   if (VERSION.SDK_INT in 19..20) {\n            setWindowFlag(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS, true)\n        }\n        if (VERSION.SDK_INT &gt;= 19) {\n            window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LAYOUT_STABLE or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n        }\n        if (VERSION.SDK_INT &gt;= 21) {\n            setWindowFlag(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS, false)\n            window.statusBarColor = Color.TRANSPARENT\n        }\n</code></pre>\n\n<p>Here's the custom style in style.xml: </p>\n\n<pre><code>&lt;style name=\"MyStyle\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowLightStatusBar\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:navigationBarColor\"&gt;@android:color/black&lt;/item&gt;\n    &lt;item name=\"android:statusBarColor\"&gt;@android:color/transparent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And my xml code :</p>\n\n<p>&lt;.....    android:fitsSystemWindows=\"true\" ....></p>\n\n<pre><code> &lt;com.google.android.material.appbar.AppBarLayout\n        android:id=\"@+id/appBarLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"189dp\"\n        app:elevation=\"0dp\"\n        android:theme=\"@style/MyStyle\" ....&gt;\n</code></pre>\n\n<p>I want to know where's the problem in my code and How can I correct it to get the status bar completely transparent with dark text color </p>\n"}, {"tags": ["algorithm", "kotlin", "greedy"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1576587596, "post_id": 59374539, "comment_id": 104941878, "body": "A greedy algorithm simply won&#39;t work. Ignore the idle time for simplicity. Suppose workstation W is available starting at some time t.There are two researchers that arrive at time t. Alice needs 10 minutes and Bob needs 20 minutes. Which one gets assigned to W? It depends on when the next researcher arrives. If Carol arrives at t+10, give W to Alice. If David arrives at t+20, give W to Bob. What if both Carol and David arrive? We need to see who arrives after them. What if seven researchers arrive at t+10 and eleven at t+20, all needing different times?"}, {"owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1576587908, "post_id": 59374539, "comment_id": 104942027, "body": "thanks for the feedback. :) The first two cases are covered (as I&#39;m using a treeset, which allows finding the end time closest to a given start time). I think every other subsequent case can be treated based on the logic for those two cases.."}, {"owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1576596048, "post_id": 59374539, "comment_id": 104946707, "body": "@n.&#39;pronouns&#39;m. After 5+ hours of  banging my head, I think you&#39;re right :) Any ideas on how to solve this correctly?"}], "answers": [{"tags": [], "owner": {"reputation": 5260, "user_id": 753642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lA57s.jpg?s=128&g=1", "display_name": "grodzi", "link": "https://stackoverflow.com/users/753642/grodzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1576610552, "creation_date": 1576610552, "answer_id": 59380801, "question_id": 59374539, "link": "https://stackoverflow.com/questions/59374539/solving-allocation-problem-using-greedy-heuristic/59380801#59380801", "title": "Solving Allocation Problem using greedy heuristic", "body": "<p>An idea:</p>\n\n<ul>\n<li>Let wa, wb two workstations <strong>free/available</strong></li>\n<li>Researcher arrives.</li>\n<li>Penelope should assign the workstation the closest to lock (she minimizes the possibility of a locking machine)</li>\n</ul>\n\n<hr>\n\n<ol>\n<li>Count maximum k of workstations used in parallel (O(2nlog(2n)))</li>\n<li>Sort researchers by arrival time O(nlog(n))</li>\n<li>Assign each researcher to its workstation</li>\n</ol>\n\n<p>A workstation is either: locked, free (and gonna be locked), used.</p>\n\n<p>Take the workstation the closest to lock <strong>which is free</strong></p>\n\n<p>that is: </p>\n\n<pre><code>min_{w in workstation} w.lockAt \nsuch that w.lockAt &gt;= arrival + m\n</code></pre>\n\n<p>If there is no such machines, then use a locked machine. Whichever. e.g the smallest lockAt (by convenience).</p>\n\n<p>To store the machines, an ordered set, sorted by lookAt, would allow maintenance in o(klog(k))</p>\n\n<p>O(max(2nlog(2n) , nklog(k))) where k is the number of workstations...</p>\n\n<p>On my potato machine, O3cpp, I can go up to 10^9 iteration in about 2s, so (very grossly)\nnklogk &lt;= 10^9 gives about ~k = 10^3.</p>\n\n<p>Hope that there aren't so many machines</p>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576610552, "creation_date": 1576586682, "last_edit_date": 1576588797, "question_id": 59374539, "link": "https://stackoverflow.com/questions/59374539/solving-allocation-problem-using-greedy-heuristic", "title": "Solving Allocation Problem using greedy heuristic", "body": "<p>I am trying to solve this problem: <a href=\"https://open.kattis.com/problems/workstations\" rel=\"nofollow noreferrer\">https://open.kattis.com/problems/workstations</a></p>\n\n<blockquote>\n  <p>Penelope is part of the admin team of the newly built supercomputer.\n  Her job is to assign workstations to the researchers who come here to\n  run their computations at the supercomputer. Penelope is very lazy and\n  hates unlocking machines for the arriving researchers. She can unlock\n  the machines remotely from her desk, but does not feel that this\n  menial task matches her qualifications. Should she decide to ignore\n  the security guidelines she could simply ask the researchers not to\n  lock their workstations when they leave, and then assign new\n  researchers to workstations that are not used any more but that are\n  still unlocked. That way, she only needs to unlock each workstation\n  for the first researcher using it, which would be a huge improvement\n  for Penelope.</p>\n  \n  <p>Unfortunately, unused workstations lock themselves automatically if\n  they are unused for more than \ud835\udc5a minutes. After a workstation has\n  locked itself, Penelope has to unlock it again for the next researcher\n  using it. Given the exact schedule of arriving and leaving\n  researchers, can you tell Penelope how many unlockings she may save by\n  asking the researchers not to lock their workstations when they leave\n  and assigning arriving researchers to workstations in an optimal way?\n  You may assume that there are always enough workstations available.</p>\n</blockquote>\n\n<p>(Please see the link, it has examples and is better formatted).</p>\n\n<p>My approach is a greedy algorithm.</p>\n\n<p>I first sort by end times. </p>\n\n<p>I iteratively record the end time for a given work time. For new work time, I find the closest workstation whose end time is smaller than the start time of this new work time. If there is none, it is not possible to exploit unlocking. </p>\n\n<p>The code:</p>\n\n<pre><code>import java.util.*\nimport kotlin.math.max\n\nprivate fun readLn() = readLine()!! // string line\nprivate fun readInt() = readLn().toInt() // single int\nprivate fun readLong() = readLn().toLong() // single int\n\nprivate fun readStrings() = readLn().split(\" \") // list of strings\nprivate fun readInts() = readStrings().map { it.toInt() } // list of ints\nprivate fun readLongs() = readStrings().map { it.toLong() } // list of longs\n\n\n\nfun greedy(times: List&lt;Pair&lt;Long, Long&gt;&gt;, m: Long): Long {\n    val sortedTimes = times.sortedBy { it.second }\n    val counter = mutableMapOf&lt;Long, Long&gt;()\n    val treeSet = TreeSet&lt;Long&gt;()\n    var count: Long = 0\n    for (i in 0 until sortedTimes.size) {\n        val currentStart = sortedTimes[i].first\n        val prev = treeSet.lower(currentStart + 1)\n        if (prev != null &amp;&amp; prev + m &gt;= currentStart) {\n            counter[prev] = counter[prev]!! - 1\n            if (counter[prev]!! == 0.toLong()) {\n                treeSet.remove(prev)\n            }\n            count += 1\n        }\n        counter.putIfAbsent(sortedTimes[i].second, 0)\n        counter[sortedTimes[i].second] = counter[sortedTimes[i].second]!! + 1\n        treeSet.add(sortedTimes[i].second)\n    }\n    return count\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val (n, m) = readLongs()\n    val times = mutableListOf&lt;Pair&lt;Long, Long&gt;&gt;()\n    for (i in 0 until n) {\n        val (start, extra) = readLongs()\n        val end = start + extra\n        times.add(Pair(start, end))\n    }\n    val ans = greedy(times, m)\n    println(ans)\n}\n</code></pre>\n\n<p>This passes the examples, but fails on some hidden test cases. </p>\n\n<p>I'd love some pointers on how I can improve the algorithm. </p>\n"}, {"tags": ["android", "kotlin", "foreground", "foreground-service", "foregroundnotification"], "comments": [{"owner": {"reputation": 11466, "user_id": 4700156, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/EVkWU.png?s=128&g=1", "display_name": "Rohit Singh", "link": "https://stackoverflow.com/users/4700156/rohit-singh"}, "edited": false, "score": 0, "creation_date": 1576587006, "post_id": 59374532, "comment_id": 104941564, "body": "stopForeground(true);  check if this works"}, {"owner": {"reputation": 11466, "user_id": 4700156, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/EVkWU.png?s=128&g=1", "display_name": "Rohit Singh", "link": "https://stackoverflow.com/users/4700156/rohit-singh"}, "edited": false, "score": 0, "creation_date": 1576587083, "post_id": 59374532, "comment_id": 104941607, "body": "I don&#39;t know if this helps <a href=\"https://stackoverflow.com/questions/6397754/android-implementing-startforeground-for-a-service/47102222#47102222\" title=\"android implementing startforeground for a service\">stackoverflow.com/questions/6397754/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 12255479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d476973daada2d22766b4824b95146da?s=128&d=identicon&r=PG&f=1", "display_name": "Kosuke", "link": "https://stackoverflow.com/users/12255479/kosuke"}, "reply_to_user": {"reputation": 11466, "user_id": 4700156, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/EVkWU.png?s=128&g=1", "display_name": "Rohit Singh", "link": "https://stackoverflow.com/users/4700156/rohit-singh"}, "edited": false, "score": 0, "creation_date": 1576587108, "post_id": 59374532, "comment_id": 104941619, "body": "Thank you for commenting! Although, &#39;stopForeground(true)&#39; did not work for me."}, {"owner": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "edited": false, "score": 1, "creation_date": 1576595429, "post_id": 59374532, "comment_id": 104946360, "body": "If <code>Service.onDestroy()</code> executed, then your <code>Service</code> has been destroyed. Android does not need to end the process if it doesn&#39;t want to. It can keep it around in case you return to the Activity, for instance."}, {"owner": {"reputation": 29, "user_id": 4519256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947bb8aae3d5cb5247f3fb48dd3ada69?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Lal", "link": "https://stackoverflow.com/users/4519256/anup-lal"}, "edited": false, "score": 0, "creation_date": 1576603340, "post_id": 59374532, "comment_id": 104950421, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/6397754/android-implementing-startforeground-for-a-service\">Android - implementing startForeground for a service?</a>"}, {"owner": {"reputation": 1, "user_id": 12255479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d476973daada2d22766b4824b95146da?s=128&d=identicon&r=PG&f=1", "display_name": "Kosuke", "link": "https://stackoverflow.com/users/12255479/kosuke"}, "edited": false, "score": 0, "creation_date": 1576631022, "post_id": 59374532, "comment_id": 104960075, "body": "well, only things which should be running should be the main activity and the foreground service and I did add line saying &#39;Log.d(&quot;Test&quot;, &quot;onDestroy executed&quot;)&#39; to make sure the function itself was executed. Although, the problem still remains. Is it possible that the problem is something regarding to the notification which is called in &#39;Service.onStartCommand()&#39; function?"}], "owner": {"reputation": 1, "user_id": 12255479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d476973daada2d22766b4824b95146da?s=128&d=identicon&r=PG&f=1", "display_name": "Kosuke", "link": "https://stackoverflow.com/users/12255479/kosuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1576586850, "creation_date": 1576586655, "last_edit_date": 1576586850, "question_id": 59374532, "link": "https://stackoverflow.com/questions/59374532/foreground-service-cannot-be-terminated", "title": "Foreground Service cannot be terminated", "body": "<p>I am calling <code>Foreground Service</code> from the main activity by using <code>startForegroundService(Intent(applicationContext, ForegroundService::class.java))</code> and when the activity is about to be destroyed, 'stopService(Intent(applicationContext, ForegroundService::class.java))' is called. onDestroy function in ForegroundService is implemented as follow:</p>\n\n<pre><code>override fun onDestroy() {\n    super.onDestroy()\n    stopForeground(STOP_FOREGROUND_REMOVE)\n    stopSelf()\n}\n</code></pre>\n\n<p>Although onDestroy function is called from Main activity, the process is not seemed to be terminated. (I am not seeing a message saying 'Process XXXXX terminated.' on the console of Android Studio). Is it not a proper way of terminating foreground service or missing some additional function calls?</p>\n"}, {"tags": ["java", "android", "kotlin", "screen-orientation"], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 8678319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6163362159fef7961021421c9a6b16d6?s=128&d=identicon&r=PG&f=1", "display_name": "kashyap", "link": "https://stackoverflow.com/users/8678319/kashyap"}, "is_accepted": false, "score": 2, "last_activity_date": 1576587268, "last_edit_date": 1576587268, "creation_date": 1576586456, "answer_id": 59374480, "question_id": 59374393, "link": "https://stackoverflow.com/questions/59374393/change-all-screens-orientation-at-run-time-in-android/59374480#59374480", "title": "Change all screens orientation at run time in android", "body": "<pre><code> Hold the flag to change the orientation and verify it at onCreate(); and change it. \n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    if(isLandScape)\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\nelse\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);    \nsetContentView(R.layout.activity_main);\n\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 114, "user_id": 5006937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fa7ed67b0904120fe69c73a9cd1f49?s=128&d=identicon&r=PG&f=1", "display_name": "binaryakash", "link": "https://stackoverflow.com/users/5006937/binaryakash"}, "edited": false, "score": 0, "creation_date": 1576604792, "post_id": 59374769, "comment_id": 104951056, "body": "Thanks for your reply, Could you please share the code for onConfigurationChanged() method"}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 114, "user_id": 5006937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fa7ed67b0904120fe69c73a9cd1f49?s=128&d=identicon&r=PG&f=1", "display_name": "binaryakash", "link": "https://stackoverflow.com/users/5006937/binaryakash"}, "edited": false, "score": 0, "creation_date": 1576646974, "post_id": 59374769, "comment_id": 104963066, "body": "@binaryakash I have added sample code of <code>onConfigurationChanged()</code> method, please check and if it helps, pls accept my answer"}], "tags": [], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "is_accepted": false, "score": 0, "last_activity_date": 1576646920, "last_edit_date": 1576646920, "creation_date": 1576587545, "answer_id": 59374769, "question_id": 59374393, "link": "https://stackoverflow.com/questions/59374393/change-all-screens-orientation-at-run-time-in-android/59374769#59374769", "title": "Change all screens orientation at run time in android", "body": "<p>I can give you one way for your need : </p>\n\n<ol>\n<li>Add <code>android:configChanges = \"orientation\"</code> against your activities</li>\n<li>Step 1 will enable your activities to get a callback <code>onConfigurationChanged(Configuration new)</code> from Android system when <code>Rotation</code> button is clicked by user</li>\n<li><code>Override</code> <code>onConfigurationChanged()</code> callback in your activities</li>\n<li>You'll get new config object as parameter inside <code>onConfigurationChanged(Configuration newConfig)</code>. Store it centrally, so that all applications can access it.</li>\n<li><p>Write code in all of your activities to first check centrally stored <code>configuration</code> value, if it is null (as initially), you can start in <code>default</code> as either Portrait or Landscape according to your app's need</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    // Make getCurrentConfig() method available centrally via Interface or \n    Application level, depends on our logic\n    if (getCurrentConfig() == LANDSCAPE) {\n        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n    } else if (getCurrentConfig() == PORTRAIT) {\n        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n    }\n    setContentView(R.layout.activity_main);\n }\n\n@Override\npublic void onConfigurationChanged(Configuration newConfig) {\n    super.onConfigurationChanged(newConfig);\n    // Store newConfig centrally, this object describes current \n    configuration\n    // For Example, if I have a singleton class which holds \n    configuration related things, I can do following\n    // ConfigurationManager = Singleton class managing configuration \n    across app\n    // getInstance() = method which will return singleton object of \n    ConfigurationManager\n    // setConfiguration(Configuration config) = setter method will be \n    used to update configuration inside ConfigurationManager when \n    configuration changes happen\n    ConfigurationManager.getInstance().setConfiguration(newConfig);\n}\n</code></pre></li>\n</ol>\n\n<p>This way, you can centrally manage current rotation changes across all activities\nI hope this would help you</p>\n"}, {"tags": [], "owner": {"reputation": 885, "user_id": 7047583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdaa9fdd80ac74e5c35f48ff9570f322?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Sable", "link": "https://stackoverflow.com/users/7047583/prashant-sable"}, "is_accepted": false, "score": 0, "last_activity_date": 1576590438, "last_edit_date": 1576590438, "creation_date": 1576587705, "answer_id": 59374814, "question_id": 59374393, "link": "https://stackoverflow.com/questions/59374393/change-all-screens-orientation-at-run-time-in-android/59374814#59374814", "title": "Change all screens orientation at run time in android", "body": "<p>On click of rotate screen option set a variable value. Check this variable in onCreate() method of every activity and set orientation as below: -</p>\n\n<pre><code> @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        // Check the value of variable in if condition\n        if (value.equals(\"landscape\")) { \n           setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n        }\n       else {\n          setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); \n       }\n   }\n</code></pre>\n\n<p>But make sure you do this for all the activities in your application. you might have to relaunch the application too tak effect.</p>\n"}], "owner": {"reputation": 114, "user_id": 5006937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fa7ed67b0904120fe69c73a9cd1f49?s=128&d=identicon&r=PG&f=1", "display_name": "binaryakash", "link": "https://stackoverflow.com/users/5006937/binaryakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1576646920, "creation_date": 1576586159, "question_id": 59374393, "link": "https://stackoverflow.com/questions/59374393/change-all-screens-orientation-at-run-time-in-android", "title": "Change all screens orientation at run time in android", "body": "<p>Use Case: I am developing android application in Tablet and Android TV, Which contains \"Rotate screen\" option in every screen. My Query is if user hit the rotate the screen option i want to change screen orientation throughout the application. i.e. all screen should change their default setting to that opted screen orientation. </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576585608, "post_id": 59374213, "comment_id": 104940841, "body": "What&#39;s the exact problem? Doesn&#39;t it work? Does it work too slow or inaccurate? Is there any error message?"}, {"owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "reply_to_user": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576585664, "post_id": 59374213, "comment_id": 104940861, "body": "It works like intended but is WAY to clunky and Im sure there is a much easier and more idomatic way"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1576586122, "post_id": 59374213, "comment_id": 104941120, "body": "you can either iterate over your column array to cut down on code or simply divide <code>x</code> by column width to get current one."}, {"owner": {"reputation": 521, "user_id": 8310836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TCvSX.jpg?s=128&g=1", "display_name": "Eduardo macedo", "link": "https://stackoverflow.com/users/8310836/eduardo-macedo"}, "edited": false, "score": 0, "creation_date": 1576587443, "post_id": 59374213, "comment_id": 104941791, "body": "Could do something like <code>return try { rightColumnBorder.withIndex().first { (idx, column) -&gt; x &gt;= 0 &amp;&amp; x &lt;= column }.index } catch (e : NoSuchElementException) { -10 }</code>. I&#39;m not sure if this is totally correct, but you get the idea. Using math in this case would be way better though."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1576588337, "post_id": 59374213, "comment_id": 104942250, "body": "@gutenmorgenuhu try to describe your problem as easy as possible... and maybe that description can be helpful for you to identify a more idiomatic approach... For me it sounds like you have a column-width and some x-coordinate... so isn&#39;t it just: &quot;x divided by column-width rounded down&quot; (because your columns seem 0-based)? so could it be: <code>floor(x &#47; columnWidth)</code>, where <code>columnWidth</code> is the total width such a column takes incl. gaps... Why would it ever be <code>-10</code>? If you require that too then just handle that case before you do your calculation..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1576588593, "post_id": 59374213, "comment_id": 104942385, "body": "Why is it <code>x = chip.x&#47;2</code>? What is this given chip exactly?"}, {"owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "edited": false, "score": 0, "creation_date": 1576592021, "post_id": 59374213, "comment_id": 104944487, "body": "aah. thats just a quick and dirty fix because the framework I use does report the wrong x coordinate at the moment off by factor 2 due to scaling issues"}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1576597665, "creation_date": 1576597665, "answer_id": 59377728, "question_id": 59374213, "link": "https://stackoverflow.com/questions/59374213/kotlin-idomatic-way-to-get-columns-of-connect-four-game-when-hovering-over-it/59377728#59377728", "title": "Kotlin idomatic way to get columns of connect four game when hovering over it", "body": "<p>Few improvements could be done</p>\n\n<p>1) Since Kotlin's <code>when</code> is not only a statement but an expression as well, you can reduce this </p>\n\n<pre><code>when {\n condition1 -&gt; return 1\n ...\n conditionN -&gt; return N\n}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>return when {\n condition1 -&gt; 1\n ...\n conditionN -&gt; N\n}\n</code></pre>\n\n<p>2) You can reduce copypaste by declaring a function that performs a check on given array and some index. In following example the function is declared as local in order to capture local variables <code>x</code> and  <code>rightColumnBorder</code>, but it could be declared as regular or extension, it's up to you.</p>\n\n<pre><code>fun option1(): Int {\n    //...\n    val test = fun (i: Int) = x.betweenInclusive(\n                if (i &gt; 0) rightColumnBorder[i - 1].toDouble() else 0.0,\n                rightColumnBorder[i].toDouble())\n\n    return when {\n        test(0) -&gt; 0\n        test(1) -&gt; 1\n        test(2) -&gt; 2\n        test(3) -&gt; 3\n        test(4) -&gt; 4\n        test(5) -&gt; 5\n        test(6) -&gt; 6\n        else -&gt; -10\n    }\n}\n</code></pre>\n\n<p>However, in your particular case you can notice that returned result is determined by the given array index, so the whole <code>when</code> statement could be replaced with a loop:</p>\n\n<pre><code>fun option2(): Int {\n    //...\n    rightColumnBorder.forEachIndexed { idx, value -&gt;\n        val from = if (idx &gt; 0) rightColumnBorder[idx - 1].toDouble() else 0.0\n        if (x.betweenInclusive(from, value.toDouble())) {\n            return idx\n        }\n    }\n    return -10\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>fun option3(): Int {\n    //...\n    val test = fun (i: Int) = x.betweenInclusive(\n            if (i &gt; 0) rightColumnBorder[i - 1].toDouble() else 0.0,\n            rightColumnBorder[i].toDouble())\n\n    rightColumnBorder.forEachIndexed { i, _ -&gt; if (test(i)) return i }\n\n    return -10\n}\n</code></pre>\n"}], "owner": {"reputation": 2201, "user_id": 3142209, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dCJiQ.jpg?s=128&g=1", "display_name": "gutenmorgenuhu", "link": "https://stackoverflow.com/users/3142209/gutenmorgenuhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59377728, "answer_count": 1, "score": 0, "last_activity_date": 1576597665, "creation_date": 1576585530, "last_edit_date": 1576585690, "question_id": 59374213, "link": "https://stackoverflow.com/questions/59374213/kotlin-idomatic-way-to-get-columns-of-connect-four-game-when-hovering-over-it", "title": "Kotlin idomatic way to get columns of connect four game when hovering over it", "body": "<p>I want to realize a game of four . The new chip will hover under the mouse cursor and accoring to its x-coordinates I want to calculate the column over which it hovers atm (and where it will be inserted after a click)\n At the moment I do sth like this:</p>\n\n<pre><code>fun whichColumnIsChip(chip : Chip) : Int{\n        val x = chip.x/2\n        val columnWidth = Chip.radius*2 + distanceBetweenColumns\n        val rightColumnBorder = IntArray(gamefield.columns.size){ i -&gt; marginLeft+(i+1) * (Chip.radius*2 + distanceBetweenColumns) }\n        when {\n            x.betweenInclusive(0.0, rightColumnBorder[0].toDouble()) -&gt; return 0\n            x.betweenInclusive(rightColumnBorder[0].toDouble(), rightColumnBorder[1].toDouble()) -&gt; return 1\n            x.betweenInclusive(rightColumnBorder[1].toDouble(), rightColumnBorder[2].toDouble()) -&gt; return 2\n            x.betweenInclusive(rightColumnBorder[2].toDouble(), rightColumnBorder[3].toDouble()) -&gt; return 3\n            x.betweenInclusive(rightColumnBorder[3].toDouble(), rightColumnBorder[4].toDouble()) -&gt; return 4\n            x.betweenInclusive(rightColumnBorder[4].toDouble(), rightColumnBorder[5].toDouble()) -&gt; return 5\n            x.betweenInclusive(rightColumnBorder[5].toDouble(), rightColumnBorder[6].toDouble()) -&gt; return 6\n            else -&gt; return -10\n        }\n    }\n</code></pre>\n\n<p>So if my cursor hovers over in between the x-coordinates of the 3rd column I just want to return 3</p>\n\n<p>The code above works as intended, but I am sure there is a much more idomatic and shorter way</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 1, "creation_date": 1576585099, "post_id": 59373875, "comment_id": 104940587, "body": "The reason seems to be the keyword <code>inner</code> in the declaration of <code>FolderRViewHolder</code>, if you remove it, this error will disappear (it does so in Kotlin Playground, at least)... I think the interface is not allowed there because it wouldn&#39;t be visible (enough)."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 2, "creation_date": 1576586722, "post_id": 59373875, "comment_id": 104941412, "body": "Inside inner classes you can only declare other inner classes... Inner classes have a strong interdependency to its outer part. Without an object of the outer class they can not be initialized and they carry the reference to that outer object in their own instances. Interfaces however (and also other non-inner-classes (abstract, enum, whatever)) should not require the outer, nor the inner object in order to be able to implement or instantiate such a type..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 2, "creation_date": 1576586752, "post_id": 59373875, "comment_id": 104941425, "body": "in order to have implementations for such an interface it would mean, that the implementations could only be inside that inner class, which basically defeats the purpose of having such an interface... (if that interface within an inline class would be possible, which it isn&#39;t)... so: why do you think you want an interface within an inner class?"}], "owner": {"reputation": 572, "user_id": 10239870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ih2-LkgJxeQ/AAAAAAAAAAI/AAAAAAAABlQ/RiDtqgO-f3c/photo.jpg?sz=128", "display_name": "Arunachalam k", "link": "https://stackoverflow.com/users/10239870/arunachalam-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576586117, "creation_date": 1576584155, "last_edit_date": 1576584359, "question_id": 59373875, "link": "https://stackoverflow.com/questions/59373875/why-interface-cant-be-used-in-kotlin-inner-class", "title": "Why interface cant be used in kotlin inner class?", "body": "<pre class=\"lang-kotlin prettyprint-override\"><code>class SelectionRAdapter(var list: ArrayList&lt;Image&gt;) :\n    RecyclerView.Adapter&lt;SelectionRAdapter.FolderRViewHolder&gt;() {\n\n    inner class FolderRViewHolder(var view: View) : \n        RecyclerView.ViewHolder(view), View.OnClickListener {\n        init {\n            view.setOnClickListener(this)\n        }\n\n        override fun onClick(v: View?) {\n            view.checkbox_container.setBackgroundColor(Color.parseColor(\"59FFFFFF\"))\n        }\n\n        interface OnItemSelectListener {\n\n        }\n    }\n\n}\n</code></pre>\n\n<p>when I try add interface to kotlin inner class it shows interface not allowed here exception may i know the reason behind it? when i trying communicate with inner class with parent class using interface</p>\n"}, {"tags": ["android", "kotlin", "webview"], "comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576581403, "post_id": 59373032, "comment_id": 104938766, "body": "webView.loadUrl(url);"}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576581530, "post_id": 59373032, "comment_id": 104938849, "body": "This is the default &#39;webframe.loadUrl(&quot;file:///android_asset/index.html&quot;)&#39;  i need load url after open share link"}, {"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576581665, "post_id": 59373032, "comment_id": 104938917, "body": "No i mean of course webView.loadUrl(url obtained from share intent); What else! You said: <code>i need the code to open the url in webview</code>."}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576581765, "post_id": 59373032, "comment_id": 104938968, "body": "thank you , yes i mean this  <code>if(intent.action.SEND){   webview.louadurl(intenturl) }eles{   webview.louadurl(defualturl) }</code>"}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576581840, "post_id": 59373032, "comment_id": 104939015, "body": "i need the code i dont know haw to us it"}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576582100, "post_id": 59373032, "comment_id": 104939155, "body": "yes i know haw to lead url . but i need to tell webview lead the intent url not the default url if receive  url from intent"}, {"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576582197, "post_id": 59373032, "comment_id": 104939201, "body": "Yes. All is about what you call intent url. And obtaining the intent url has nothing to do with your webview. Reword your problem please and change the subject of your post as you very well know how to open an url in a webview. Formulate your problem better."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576581970, "post_id": 59373225, "comment_id": 104939084, "body": "Thnk you . now i have the url from intent. so i need the code to make webview load url if intent sent from share menu eles load default url"}, {"owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "reply_to_user": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576582140, "post_id": 59373225, "comment_id": 104939176, "body": "ok,could you post your activity code and it&#39;s layout file in here?"}, {"owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "reply_to_user": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576582270, "post_id": 59373225, "comment_id": 104939239, "body": "If you don&#39;t know how to get action then here is <code>String action = intent.getAction()</code>and you can use <code>if(Intent.ACTION_SEND.equals(action)){ &#47;&#47;to something}else{&#47;&#47;do smt}</code>."}, {"owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "reply_to_user": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576582534, "post_id": 59373225, "comment_id": 104939370, "body": "Do you have any exist code in your project about opening url."}, {"owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "reply_to_user": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576582663, "post_id": 59373225, "comment_id": 104939431, "body": "Your question makes others confused ,could you make it clear or more detailed?"}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576582840, "post_id": 59373225, "comment_id": 104939536, "body": "i have webview and its load html file from device storage after open the app <code>webframe.loadUrl(&quot;file:&#47;&#47;&#47;android_asset&#47;index.html&quot;)</code>; i need to make my app open the uri after loead it from youtube not the default"}, {"owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "reply_to_user": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576583102, "post_id": 59373225, "comment_id": 104939666, "body": "Before invoking <code>webframe.loadUrl(&quot;file:&#47;&#47;&#47;android_asset&#47;index.html&quot;)</code>you can judage <code>action(which is come form intent.getAction())</code>,if action is <code>Intent.ACTION_SEND</code> then you load the <code>url</code>(come from intent.getData())"}, {"owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "edited": false, "score": 0, "creation_date": 1576583407, "post_id": 59373225, "comment_id": 104939802, "body": "this is last <code>val intent = intent         intent.action = Intent.ACTION_SEND         val uri = intent.data          if (uri == null){             webframe.loadUrl(&quot;file:&#47;&#47;&#47;android_asset&#47;index.html&quot;)         }else{             webframe.loadUrl(uri.toString())         }</code>"}], "tags": [], "owner": {"reputation": 2426, "user_id": 6003394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nm6mq.png?s=128&g=1", "display_name": "aolphn", "link": "https://stackoverflow.com/users/6003394/aolphn"}, "is_accepted": false, "score": 0, "last_activity_date": 1576581827, "creation_date": 1576581827, "answer_id": 59373225, "question_id": 59373032, "link": "https://stackoverflow.com/questions/59373032/open-url-in-my-webview-after-loading-it-from-youtubes-share-menu/59373225#59373225", "title": "Open URL in my WebView after loading it from YouTube&#39;s share menu", "body": "<p>You can get params in your activity by following code snippet:</p>\n\n<pre><code>Intent intent = getIntent();\nUri uri = intent.getData();\n//uri is what you need.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 8911770, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--srWQXwYlXk/AAAAAAAAAAI/AAAAAAAABTY/T-nBPXkja4M/photo.jpg?sz=128", "display_name": "Sahjad Ansari", "link": "https://stackoverflow.com/users/8911770/sahjad-ansari"}, "is_accepted": false, "score": 0, "last_activity_date": 1576581989, "creation_date": 1576581989, "answer_id": 59373278, "question_id": 59373032, "link": "https://stackoverflow.com/questions/59373032/open-url-in-my-webview-after-loading-it-from-youtubes-share-menu/59373278#59373278", "title": "Open URL in my WebView after loading it from YouTube&#39;s share menu", "body": "<p>try this:</p>\n\n<pre><code>&lt;intent-filter&gt;\n&lt;action android:name=\"android.intent.action.SEND\" /&gt;\n&lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;              \n&lt;data android:host=\"www.youtube.com\" android:mimeType=\"text/*\" /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "is_accepted": true, "score": 0, "last_activity_date": 1576595604, "creation_date": 1576595604, "answer_id": 59377125, "question_id": 59373032, "link": "https://stackoverflow.com/questions/59373032/open-url-in-my-webview-after-loading-it-from-youtubes-share-menu/59377125#59377125", "title": "Open URL in my WebView after loading it from YouTube&#39;s share menu", "body": "<p>thanks to everyone I have found a solution to the problem</p>\n\n<p>firs you mut to add this code to manifest:</p>\n\n<pre><code>&lt;intent-filter&gt;\n   &lt;action android:name=\"android.intent.action.SEND\"/&gt;\n   &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n   &lt;data android:mimeType=\"\n&lt;/intent-filter&gt;\n</code></pre>\n\n<p>Next add this code to MainActivity:</p>\n\n<pre><code>when (intent?.action) {\n        Intent.ACTION_SEND -&gt; {\n            if (\"text/plain\" == intent.type) {\n                webframe.loadUrl(intent.getStringExtra(Intent.EXTRA_TEXT))\n            }\n        }\n        else -&gt; {\n            webframe.loadUrl(\"file:///android_asset/index.html\")\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 10347453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhBmsCiK15g/AAAAAAAAAAI/AAAAAAAABmY/K_rxRMFvxqU/photo.jpg?sz=128", "display_name": "Mohamed Slimane", "link": "https://stackoverflow.com/users/10347453/mohamed-slimane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59377125, "answer_count": 3, "score": 0, "last_activity_date": 1576595604, "creation_date": 1576581104, "last_edit_date": 1576583538, "question_id": 59373032, "link": "https://stackoverflow.com/questions/59373032/open-url-in-my-webview-after-loading-it-from-youtubes-share-menu", "title": "Open URL in my WebView after loading it from YouTube&#39;s share menu", "body": "<p>I have an Android WebView project and I have added it in the share menu to get the URL from YouTube.</p>\n\n<p><a href=\"https://i.stack.imgur.com/K1WdY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K1WdY.jpg\" alt=\"Screenshot from my phone after adding my app to share menu\"></a></p>\n\n<p>and I am using this code in manifest</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;intent-filter&gt;\n  &lt;action android:name=\"android.intent.action.SEND\" /&gt;\n  &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n  &lt;data android:mimeType=\"text/plain\" /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n\n<p>I need the code to open the URL in the WebView after a click on my app icon from the share menu in YouTube.</p>\n\n<p>For e.g.:</p>\n\n<pre><code>val intent = intent\n    intent.action = Intent.ACTION_SEND\n    val uri = intent.data\n\n    if (uri == null){\n        webframe.loadUrl(\"file:///android_asset/index.html\")\n    }else{\n        webframe.loadUrl(uri.toString())\n    }\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576580247, "post_id": 59372264, "comment_id": 104938138, "body": "You chain as may whereEqualTo operations as you need. But what&#39;s wrong with this code?"}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576580709, "post_id": 59372264, "comment_id": 104938401, "body": "I get errors from the IDE before compilation when i try to use the += operators on the query object but i can&#39;t see the error popup window because it&#39;s blinking too fast and non stoo for some reason"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576580738, "post_id": 59372264, "comment_id": 104938417, "body": "If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1576590228, "post_id": 59372264, "comment_id": 104943377, "body": "@AlexMamo the issue is that the app won&#39;t even run due to the += operator on the query. I&#39;m updating my post with the log from Run"}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576590887, "post_id": 59375737, "comment_id": 104943778, "body": "Will each run of the if block in my code overwrite the previous whereEqualTo operation or does it get implicitly concatenated?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576591304, "post_id": 59375737, "comment_id": 104944027, "body": "It adds another call to <code>whereEqualTo</code>. Give it a try."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576592471, "post_id": 59375737, "comment_id": 104944737, "body": "This was one of the first things i tried when i came across the += issue but when i tried doing <code>query = query.whereEqualTo(&quot;rarity&quot;,filter)</code> the results from the query.get() are always empty. I tried it again just in case but still no results. Shouldn&#39;t this code return all the documents that have a &quot;rarity&quot; value of either &quot;R&quot; or &quot;N&quot; if i were to select the R &amp; N filters?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576593509, "post_id": 59375737, "comment_id": 104945286, "body": "If you select &quot;R&quot; or &quot;N&quot;, you&#39;ll have either a filter with &quot;R&quot; or &quot;N&quot;. If you want both filters, then you should add both <code>whereEqualTo</code> calls. But remember, <a href=\"https://stackoverflow.com/questions/54511674/firestore-date-query-not-working-as-expected/54512473#54512473\">Firestore queries are immutable</a>."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576593904, "post_id": 59375737, "comment_id": 104945539, "body": "Yeah i&#39;d like to be able to apply all the user selected filters at once so in this case both R &amp; N. Since the queries are immutable and i can&#39;t concatenate them, in order to cover all the possible combinations of filters, is the only solution to write them by hand in a huge if statement for example?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576594135, "post_id": 59375737, "comment_id": 104945673, "body": "Just create a global query and add <code>whereEqualTo</code> calls according to the filters that are selected. In the end, you should have a query that has two <code>whereEqualTo</code> calls, right? I don&#39;t think there is a concrete example. You should write your own code."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576595007, "post_id": 59375737, "comment_id": 104946127, "body": "Sorry i&#39;m having some trouble understanding the logic here. Let&#39;s say i did the following :  var query = db.collection(&quot;Cards&quot;).orderBy(&quot;resID&quot;)          for(filter in filters!!) {             query.whereEqualTo(&quot;rarity&quot;,filter)         } and the filters arraylist had &quot;R&quot; &amp; &quot;N&quot; in it. The for-each loop will run twice but does that count as doing <code>query.whereEqualTo(&quot;rarity&quot;,&quot;R&quot;).whereEqualTo(&quot;rarity&quot;,&quot;N&quot;)</code> ?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576595697, "post_id": 59375737, "comment_id": 104946491, "body": "As long as you are using inside the look <code>query = query.whereEqualTo(&quot;rarity&quot;,filter)</code>, it will works as <code>query.whereEqualTo(&quot;rarity&quot;,&quot;R&quot;).whereEqualTo(&quot;rarity&quot;,&quot;N&quot;)</code>. Every new <code>whereEqualTo</code> call should be saved in a new Query object. Does it work now?"}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576596065, "post_id": 59375737, "comment_id": 104946722, "body": "I&#39;ve done that but it still returns an empty query snapshot. I&#39;ve updated my code on the post too if you&#39;re interested. I know for a fact that in my database i have variorus documents that have a rarity value of &quot;R&quot; and other various documents with a rarity value of &quot;N&quot; but instead of returning all of these, it returns an empty query snapshot."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576596661, "post_id": 59375737, "comment_id": 104947027, "body": "It&#39;s empty because you didn&#39;t create a <a href=\"https://stackoverflow.com/questions/50305328/firestore-whereequalto-orderby-and-limit1-not-working\">Firestore index</a>. If you create it, does it work now?"}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576597389, "post_id": 59375737, "comment_id": 104947446, "body": "I have the following composite indexes in firebase : resID Ascending rarity Ascending and vice verca"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576598163, "post_id": 59375737, "comment_id": 104947880, "body": "You need to have also an index for the combined <code>whereEqualTo</code> calls. If you create that combined index, does it work?"}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576598332, "post_id": 59375737, "comment_id": 104947960, "body": "How do i create such an index? The composite index only allows different fields."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576598586, "post_id": 59375737, "comment_id": 104948093, "body": "In that case, you should remove the call to orderBy and then no index is needed anymore. That&#39;s a request that should be sent to the Firebase team."}, {"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576598936, "post_id": 59375737, "comment_id": 104948276, "body": "If i remove the orderBy call then the query variable turns into a CollectionReference one. There&#39;s bound to be a solution for this out there, i&#39;ll probably add a bounty later on and hope someone has faced this before and knows of a workaround :) . Thank you very much for taking so much time to help me out"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1576652643, "post_id": 59375737, "comment_id": 104964712, "body": "If you think that my answer helped you with the initial issue, please consider giving at least a vote-up (\u25b2). I&#39;d really appreciate it. Thanks!"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 0, "last_activity_date": 1576590748, "creation_date": 1576590748, "answer_id": 59375737, "question_id": 59372264, "link": "https://stackoverflow.com/questions/59372264/can-you-chain-multiple-whereequalto-operations-in-one-query-in-pieces-in-firesto/59375737#59375737", "title": "Can you chain multiple whereEqualTo operations in one query in pieces in Firestore", "body": "<blockquote>\n  <p>Can you chain multiple whereEqualTo operations in one query in pieces in Firestore</p>\n</blockquote>\n\n<p>You can chain as may whereEqualTo operations as you need.</p>\n\n<p>The problem in your code <code>+=</code> operator. There is no way you can make an addition/concatenation of two Query objects. To solve this, please change the following line of code:</p>\n\n<pre><code>query += query.whereEqualTo(\"rarity\",filter)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>query = query.whereEqualTo(\"rarity\",filter)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "edited": false, "score": 0, "creation_date": 1577293993, "post_id": 59472273, "comment_id": 105137638, "body": "Thank you, this is exactly what i was looking for"}], "tags": [], "owner": {"reputation": 1884, "user_id": 2931124, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/GEdNT.jpg?s=128&g=1", "display_name": "ked", "link": "https://stackoverflow.com/users/2931124/ked"}, "is_accepted": true, "score": 1, "last_activity_date": 1577211808, "creation_date": 1577211808, "answer_id": 59472273, "question_id": 59372264, "link": "https://stackoverflow.com/questions/59372264/can-you-chain-multiple-whereequalto-operations-in-one-query-in-pieces-in-firesto/59472273#59472273", "title": "Can you chain multiple whereEqualTo operations in one query in pieces in Firestore", "body": "<p>Basically you are trying a do <strong>OR</strong> operation, where you are retrieving all documents, in which rarity fields matched any of the value in array.</p>\n\n<p>You are try new firebase <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#in_and_array-contains-any\" rel=\"nofollow noreferrer\"><strong>whereIn</strong></a> operation where you can pass array of values, but theres a limitation of max <strong>10</strong> values in filter</p>\n\n<pre><code> FirebaseFirestore.getInstance()\n            .collection(\"Cards\")\n            .orderBy(\"resID\")\n            .whereIn(\"rarity\",filters!!.toList())\n            .get().addOnSuccessListener { querySnapshot -&gt;\n                if (querySnapshot.isEmpty) Log.d(\"FilterActivity\", \"is empty\")\n                for (doc in querySnapshot.documents) {\n                    Log.d(\"FilterActivity\", \"${doc.getString(\"name\")} - ${doc.getString(\"rarity\")}\")\n                }\n            }\n</code></pre>\n\n<p>filters arraylist can contain max 10 values</p>\n"}], "owner": {"reputation": 506, "user_id": 6655405, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqJAE.png?s=128&g=1", "display_name": "Stelios Papamichail", "link": "https://stackoverflow.com/users/6655405/stelios-papamichail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 1, "accepted_answer_id": 59472273, "answer_count": 2, "score": 1, "last_activity_date": 1577211808, "creation_date": 1576578605, "last_edit_date": 1576772902, "question_id": 59372264, "link": "https://stackoverflow.com/questions/59372264/can-you-chain-multiple-whereequalto-operations-in-one-query-in-pieces-in-firesto", "title": "Can you chain multiple whereEqualTo operations in one query in pieces in Firestore", "body": "<p>In my app, I have a multiple-choice dialog with various filter options that the user should be able to choose in order to filter the database based on the <code>rarity</code> field of the documents. Since there are many options in the filter dialog, covering each case by hand would take ages if we take into account all the possible combinations of the filters. With that in mind, I tried creating a starting query as you can see below and then I iterate through the list of filters selected by the user and try to add a <code>whereEqualTo(\"rarity\",filter)</code> operation to the query for each filter. I noticed that you can't concatenate queries like with normal variables e.g. <code>var i += 5</code> so i would like to know if there is any solution to this kind of issue. <strong>Can you actually apply multiple</strong> <code>whereEqualTo</code> <strong>operations in the</strong> <strong>same query in steps/pieces</strong> <strong>without overriding the previously applied operations on that same query</strong>?</p>\n\n<p>Here's what I've tried after receiving the filters selected by the user in my FilterActivity.kt class:</p>\n\n<pre><code>class FilterActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_filter)\n\n        val db = FirebaseFirestore.getInstance()\n\n        val filters:ArrayList&lt;String&gt;? = intent.getStringArrayListExtra(\"filterOptions\")\n        Log.d(\"FilterActivity\", \"filter options $filters\")\n\n        var query = db.collection(\"Cards\").orderBy(\"resID\")\n\n        for(filter in filters!!) {\n            query = query.whereEqualTo(\"rarity\",filter)\n        }\n\n        query.get().addOnSuccessListener { querySnapshot -&gt;\n            if(querySnapshot.isEmpty) Log.d(\"FilterActivity\",\"is empty\")\n            for(doc in querySnapshot.documents) {\n                Log.d(\"FilterActivity\", \"${doc.getString(\"name\")} - ${doc.getString(\"rarity\")}\")\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 1325615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bZ7Tm.jpg?s=128&g=1", "display_name": "Hasan", "link": "https://stackoverflow.com/users/1325615/hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1576580364, "creation_date": 1576580364, "answer_id": 59372793, "question_id": 59372172, "link": "https://stackoverflow.com/questions/59372172/is-it-possible-to-format-secondary-sd-card-in-android-10/59372793#59372793", "title": "Is it possible to format secondary SD card in Android 10+?", "body": "<p>Check this Code</p>\n\n<pre><code>fun wipingSdcard() {\n    val deleteMatchingFile = File(Environment\n            .getExternalStorageDirectory().toString())\n    try {\n        val filenames = deleteMatchingFile.listFiles()\n        if (filenames != null &amp;&amp; filenames!!.size &gt; 0) {\n            for (tempFile in filenames!!) {\n                if (tempFile.isDirectory()) {\n                    wipeDirectory(tempFile.toString())\n                    tempFile.delete()\n                } else {\n                    tempFile.delete()\n                }\n            }\n        } else {\n            deleteMatchingFile.delete()\n        }\n    } catch (e: Exception) {\n        e.printStackTrace()\n    }\n\n}\n\nprivate fun wipeDirectory(name: String) {\n    val directoryFile = File(name)\n    val filenames = directoryFile.listFiles()\n    if (filenames != null &amp;&amp; filenames!!.size &gt; 0) {\n        for (tempFile in filenames!!) {\n            if (tempFile.isDirectory()) {\n                wipeDirectory(tempFile.toString())\n                tempFile.delete()\n            } else {\n                tempFile.delete()\n            }\n        }\n    } else {\n        directoryFile.delete()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576580364, "creation_date": 1576578308, "question_id": 59372172, "link": "https://stackoverflow.com/questions/59372172/is-it-possible-to-format-secondary-sd-card-in-android-10", "title": "Is it possible to format secondary SD card in Android 10+?", "body": "<p>I'm writing an application that uses dedicated SD cards (usually 2-3) connected via a USB hub. The layout is as follows: SD cards -> USB hub -> Phone.</p>\n\n<p>Is there any possibility to programmatically (Kotlin) format SD card (exFAT)?</p>\n"}, {"tags": ["generics", "kotlin", "collections"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5701065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IXQreZEaRsg/AAAAAAAAAAI/AAAAAAAACCI/VX4Dqev6SSw/photo.jpg?sz=128", "display_name": "soupwaylee", "link": "https://stackoverflow.com/users/5701065/soupwaylee"}, "edited": false, "score": 0, "creation_date": 1576576224, "post_id": 59371415, "comment_id": 104935818, "body": "In my original code I&#39;m also adding elements to the sets. I was aware that there is <code>toMutableList</code>, but unfortunately my brain did not manage to make the connection to sets haha. I see, I will make sure to check the function types next time. Thank you!"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1576576113, "last_edit_date": 1576576113, "creation_date": 1576575798, "answer_id": 59371415, "question_id": 59371348, "link": "https://stackoverflow.com/questions/59371348/how-can-i-fix-the-type-errors-for-applying-reduce-on-a-mutablelist-of-mutableset/59371415#59371415", "title": "How can I fix the type errors for applying reduce on a MutableList of MutableSets to find the intersections of all sets?", "body": "<p>Why do you need to use \"Mutable\" types here? It would work with non-mutable sets:</p>\n\n<pre><code>val a = setOf(1, 2, 3)\nval b = setOf(2, 3, 4)\nval c = setOf(3, 4, 5)\nval lst = listOf(a, b, c)\n\nval intersection = lst.reduce { acc, currSet -&gt; \n    acc.intersect(currSet)\n}\n</code></pre>\n\n<p>The problem is that <code>intersect</code> returns a <code>Set</code>, rather than a <code>MutableSet</code>, which makes the type check unhappy. Fixable by using <code>acc.intersect(currSet).toMutableSet()</code> in the <code>reduce</code> lambda or changing to <code>acc: Set&lt;Int&gt;</code>. I'd always go with immutable types, and prefer the code I posted above. </p>\n\n<p>Nit: prefer <code>val</code> over <code>var</code>.</p>\n"}], "owner": {"reputation": 127, "user_id": 5701065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IXQreZEaRsg/AAAAAAAAAAI/AAAAAAAACCI/VX4Dqev6SSw/photo.jpg?sz=128", "display_name": "soupwaylee", "link": "https://stackoverflow.com/users/5701065/soupwaylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 59371415, "answer_count": 1, "score": 0, "last_activity_date": 1576576113, "creation_date": 1576575562, "question_id": 59371348, "link": "https://stackoverflow.com/questions/59371348/how-can-i-fix-the-type-errors-for-applying-reduce-on-a-mutablelist-of-mutableset", "title": "How can I fix the type errors for applying reduce on a MutableList of MutableSets to find the intersections of all sets?", "body": "<p>I'd like to find the intersections of <code>a</code>, <code>b</code> and <code>c</code>. Since I want to add more sets to the <code>lst</code>-object in the future, I defined it as a MutableList.</p>\n\n<pre><code>var a = mutableSetOf(1, 2, 3)\nvar b = mutableSetOf(2, 3, 4)\nvar c = mutableSetOf(3, 4, 5)\nvar lst = mutableListOf(a, b, c)\n\nvar intersection = lst.reduce {\n    acc, currSet -&gt; acc.intersect(currSet)\n}\n</code></pre>\n\n<p>However, the last expression raises \"invalid\" due to failed type inference. (check <a href=\"https://pl.kotl.in/qbjCWo3J6\" rel=\"nofollow noreferrer\">this</a> playground)</p>\n\n<p>From the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reduce.html\" rel=\"nofollow noreferrer\">docs</a> I have the following signature for the <code>reduce</code> operation:</p>\n\n<pre><code>inline fun &lt;S, T : S&gt; Iterable&lt;T&gt;.reduce(\n    operation: (acc: S, T) -&gt; S\n): S\n</code></pre>\n\n<p>So why can't <code>S</code> and <code>T</code> be of the same type?</p>\n"}, {"tags": ["kotlin", "reflection", "private", "private-methods", "private-functions"], "answers": [{"comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1576574666, "post_id": 59371023, "comment_id": 104934940, "body": "I think OP wants to know how to do it using reflection, but the only hint to that in the question is the reflection tag..."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 2, "creation_date": 1576575271, "post_id": 59371023, "comment_id": 104935242, "body": "By the link you provided, I see how to access to private fields of an object, but there is no information on how to call private functions of an object."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1576575406, "post_id": 59371023, "comment_id": 104935318, "body": "Added an example for a function, it&#39;s very similar though"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 4, "last_activity_date": 1576575393, "last_edit_date": 1576575393, "creation_date": 1576574357, "answer_id": 59371023, "question_id": 59370915, "link": "https://stackoverflow.com/questions/59370915/how-to-call-private-functions-in-kotlin/59371023#59371023", "title": "How to call private functions in Kotlin", "body": "<p>The idea of \"private\" is that only you can call it inside your class. If you want to \"break in\" to that class, you need to make use of reflection: <a href=\"https://stackoverflow.com/a/48159066/8073652\">https://stackoverflow.com/a/48159066/8073652</a></p>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p><code>private</code> means visible inside this class only (including all its members)</p>\n</blockquote>\n\n<p>Here's an example:</p>\n\n<pre><code>class WithPrivate {\n    private fun privFun() = \"you got me\"\n}\n\nfun main() {\n    WithPrivate::class.declaredMemberFunctions.find { it.name == \"privFun\" }?.let {\n        it.isAccessible = true\n        println(it.call(WithPrivate()))\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2041, "favorite_count": 0, "closed_date": 1576574715, "answer_count": 1, "score": 1, "last_activity_date": 1576575393, "creation_date": 1576573964, "last_edit_date": 1576574367, "question_id": 59370915, "link": "https://stackoverflow.com/questions/59370915/how-to-call-private-functions-in-kotlin", "closed_reason": "Duplicate", "title": "How to call private functions in Kotlin", "body": "<p>I want to call a private functions of class <code>SomeClass</code>:</p>\n\n<pre><code>class SomeClass {\n    private fun somePrivateFunction() {\n        //...\n    }\n\n    private fun somePrivateFunctionWithParams(text: String) {\n        //...\n    }\n}\n</code></pre>\n\n<p>Somewhere in the code I have a reference to <code>SomeClass</code> object:</p>\n\n<pre><code>val someClass = SomeClass()\n// how can I call the private function `somePrivateFunction()` from here?\n// how can I call the private function `somePrivateFunctionWithParams(\"some text\")` from? here\n</code></pre>\n\n<p>How to call private functions with params and without params in Kotlin?</p>\n"}, {"tags": ["ios", "kotlin", "kotlin-coroutines", "ktor", "kotlin-native"], "comments": [{"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "edited": false, "score": 0, "creation_date": 1576853043, "post_id": 59370764, "comment_id": 105040207, "body": "The error is only coming in iOS client? Android client works properly?"}, {"owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "reply_to_user": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "edited": false, "score": 0, "creation_date": 1576901647, "post_id": 59370764, "comment_id": 105052363, "body": "Yes Android client is working perfectly fine"}, {"owner": {"reputation": 8506, "user_id": 793861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lfZtF.png?s=128&g=1", "display_name": "John O&#39;Reilly", "link": "https://stackoverflow.com/users/793861/john-oreilly"}, "edited": false, "score": 0, "creation_date": 1577371360, "post_id": 59370764, "comment_id": 105154066, "body": "Am running in to similar issue when trying to update <a href=\"https://github.com/joreilly/PeopleInSpace\" rel=\"nofollow noreferrer\">github.com/joreilly/PeopleInSpace</a> to use native mt version of coroutines....trying <code>1.3.3-native-mt</code> version mentioned in <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/462\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/issues/462</a>.  Seems we should be using <code>newSingleThreadContext</code> but that doesn&#39;t resolve for some reason."}], "answers": [{"comments": [{"owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "edited": false, "score": 0, "creation_date": 1577501076, "post_id": 59491321, "comment_id": 105188103, "body": "Just tried that. didn&#39;t work getting the same error."}, {"owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "edited": false, "score": 0, "creation_date": 1577501243, "post_id": 59491321, "comment_id": 105188120, "body": "I have added your fix on the repository at <a href=\"https://github.com/dudhatparesh/kotlin-multiplat-platform-example\" rel=\"nofollow noreferrer\">github.com/dudhatparesh/kotlin-multiplat-platform-example</a>"}, {"owner": {"reputation": 6312, "user_id": 546901, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a897e1dc1e5b960e8dd7dc8f8bfc9ab?s=128&d=identicon&r=PG", "display_name": "Brendan Weinstein", "link": "https://stackoverflow.com/users/546901/brendan-weinstein"}, "edited": false, "score": 0, "creation_date": 1577738029, "post_id": 59491321, "comment_id": 105242698, "body": "Thanks to John&#39;s answer I was able to call the below function successfully from iOS  ``` @InternalCoroutinesApi fun backgroundTest() {   val job = GlobalScope.launch {     kprint(&quot;we are on main thread \\n&quot;)     withContext(Dispatchers.Default) {       kprint(&quot;hello \\n&quot;)       delay(2000)       kprint(&quot;world \\n&quot;)     }   } } ```"}, {"owner": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 0, "creation_date": 1579829070, "post_id": 59491321, "comment_id": 105907079, "body": "Hey John. Thanks for this. Any idea how I can get ktor to build then? Any way I can force it to use <code>1.3.3-native-mt</code>? I get <code>Could not resolve org.jetbrains.kotlinx:kotlinx-coroutines-core-native:1.3.3.      Required by:          project :shared &gt; io.ktor:ktor-client-ios:1.3.0 &gt; io.ktor:ktor-client-ios-iosx64:1.3.0</code>"}, {"owner": {"reputation": 8506, "user_id": 793861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lfZtF.png?s=128&g=1", "display_name": "John O&#39;Reilly", "link": "https://stackoverflow.com/users/793861/john-oreilly"}, "reply_to_user": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 0, "creation_date": 1579857082, "post_id": 59491321, "comment_id": 105914230, "body": "@CarsonHolzheimer I&#39;d recommend looking at dependency setup in <a href=\"https://github.com/joreilly/PeopleInSpace\" rel=\"nofollow noreferrer\">github.com/joreilly/PeopleInSpace</a>"}, {"owner": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 1, "creation_date": 1579954789, "post_id": 59491321, "comment_id": 105943748, "body": "@JohnO&#39;Reilly Thanks again. I resolved it by upgrading my gradle version to 6 like you had in the example."}], "tags": [], "owner": {"reputation": 8506, "user_id": 793861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lfZtF.png?s=128&g=1", "display_name": "John O&#39;Reilly", "link": "https://stackoverflow.com/users/793861/john-oreilly"}, "is_accepted": false, "score": 8, "last_activity_date": 1577386213, "last_edit_date": 1577386213, "creation_date": 1577379803, "answer_id": 59491321, "question_id": 59370764, "link": "https://stackoverflow.com/questions/59370764/withtimeout-function-gives-illegalstateexception-there-is-no-event-loop-use-ru/59491321#59491321", "title": "withTimeout function gives IllegalStateException: There is no event loop. Use runBlocking { ... } to start one. in Kotlin Multiplatform iOS client", "body": "<p>So, as mentioned in comment above I had similar issue but turned out that it wasn't picking up the <code>native-mt</code> version due to transitive dependencies in other libraries.  Added following and it's resolving now.</p>\n\n<pre><code>        implementation('org.jetbrains.kotlinx:kotlinx-coroutines-core-native') \n        {\n            version {\n                strictly '1.3.3-native-mt'\n            }\n        }\n</code></pre>\n\n<p>Also note guidance in <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/native-mt/kotlin-native-sharing.md\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/native-mt/kotlin-native-sharing.md</a></p>\n\n<p>Starting to make use of this in <a href=\"https://github.com/joreilly/PeopleInSpace\" rel=\"noreferrer\">https://github.com/joreilly/PeopleInSpace</a></p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577390909, "creation_date": 1577390909, "answer_id": 59493013, "question_id": 59370764, "link": "https://stackoverflow.com/questions/59370764/withtimeout-function-gives-illegalstateexception-there-is-no-event-loop-use-ru/59493013#59493013", "title": "withTimeout function gives IllegalStateException: There is no event loop. Use runBlocking { ... } to start one. in Kotlin Multiplatform iOS client", "body": "<p>Sometimes ios app has a different async requirement with an android app.\nUse this code for temporary dispatch problem</p>\n\n<pre><code>object MainLoopDispatcher: CoroutineDispatcher() {\n    override fun dispatch(context: CoroutineContext, block: Runnable) {\n        NSRunLoop.mainRunLoop().performBlock {\n            block.run()\n        }\n    }\n}\n</code></pre>\n\n<p>Please see the forum for this issue: <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/470\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/issues/470</a></p>\n"}, {"comments": [{"owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "edited": false, "score": 0, "creation_date": 1577715110, "post_id": 59509799, "comment_id": 105233953, "body": "I tried that solution as well. still, it&#39;s giving the same error. however, if I execute any coroutine which does not have timeout before executing the coroutine with timeout it works just fine."}, {"owner": {"reputation": 964, "user_id": 5116572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af40e7f5b815ad0acca7c9c93db77d4?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/5116572/art"}, "reply_to_user": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "edited": false, "score": 0, "creation_date": 1577742392, "post_id": 59509799, "comment_id": 105244144, "body": "@PareshDudhat The behaviour you&#39;ve mentioned is rather strange. There is <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-unconfined.html\" rel=\"nofollow noreferrer\"><code>Dispatchers.Unconfined</code></a> dispatcher, which have the <a href=\"https://kotlinlang.org/docs/reference/coroutines/coroutine-context-and-dispatchers.html#unconfined-vs-confined-dispatcher\" rel=\"nofollow noreferrer\">mechanism</a> rather similar to what you are describing. Are you fully sure about the way you launch your coroutine?"}, {"owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "edited": false, "score": 0, "creation_date": 1577762430, "post_id": 59509799, "comment_id": 105248211, "body": "I am launching it with  launch(dispatchers.main), I have also tried launching it with  dispatcher.main + job but no help. I pushed the latest commit on the GitHub repo"}, {"owner": {"reputation": 436, "user_id": 6757836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486b3816c3a5a2a9273f9f2a45b83876?s=128&d=identicon&r=PG&f=1", "display_name": "TheYogi", "link": "https://stackoverflow.com/users/6757836/theyogi"}, "edited": false, "score": 0, "creation_date": 1600285777, "post_id": 59509799, "comment_id": 113043094, "body": "Beautiful, all i wanted was to call delay in a suspend function and this solution worked like a charm! Thanks @art"}], "tags": [], "owner": {"reputation": 964, "user_id": 5116572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af40e7f5b815ad0acca7c9c93db77d4?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/5116572/art"}, "is_accepted": false, "score": 4, "last_activity_date": 1600342858, "last_edit_date": 1600342858, "creation_date": 1577526829, "answer_id": 59509799, "question_id": 59370764, "link": "https://stackoverflow.com/questions/59370764/withtimeout-function-gives-illegalstateexception-there-is-no-event-loop-use-ru/59509799#59509799", "title": "withTimeout function gives IllegalStateException: There is no event loop. Use runBlocking { ... } to start one. in Kotlin Multiplatform iOS client", "body": "<p>If you want to use <code>[withTimeout]</code> functions in coroutines you have to modify your <code>Dispatcher</code> to implement <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Delay.kt\" rel=\"nofollow noreferrer\"><code>Delay</code></a> interface. Here is an example of how this can be achieved:</p>\n<pre><code>@UseExperimental(InternalCoroutinesApi::class)\nclass UI : CoroutineDispatcher(), Delay {\n\n    override fun dispatch(context: CoroutineContext, block: Runnable) {\n        dispatch_async(dispatch_get_main_queue()) {\n            try {\n                block.run()\n            } catch (err: Throwable) {\n                throw err\n            }\n        }\n    }\n\n    @InternalCoroutinesApi\n    override fun scheduleResumeAfterDelay(timeMillis: Long, continuation: CancellableContinuation&lt;Unit&gt;) {\n        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, timeMillis * 1_000_000), dispatch_get_main_queue()) {\n            try {\n                with(continuation) {\n                    resumeUndispatched(Unit)\n                }\n            } catch (err: Throwable) {\n                throw err\n            }\n        }\n    }\n\n    @InternalCoroutinesApi\n    override fun invokeOnTimeout(timeMillis: Long, block: Runnable): DisposableHandle {\n        val handle = object : DisposableHandle {\n             var disposed = false\n                private set\n\n            override fun dispose() {\n                disposed = true\n            }\n        }\n        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, timeMillis * 1_000_000), dispatch_get_main_queue()) {\n            try {\n                if (!handle.disposed) {\n                    block.run()\n                }\n            } catch (err: Throwable) {\n                throw err\n            }\n        }\n\n        return handle\n    }\n\n}\n</code></pre>\n<p>This solution can be easily modified for your needs.</p>\n<p>More information can be found in <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/470\" rel=\"nofollow noreferrer\">this thread</a>.</p>\n<p><strong>UPDATE</strong></p>\n<p>At the moment there is a version <code>1.3.9-native-mt</code> of <code>kotlinx:kotlinx-coroutines-core</code> artifact which gives the ability to use <code>Dispatchers.Main</code> on ios platform (it supports <code>delay</code> out of the box). It even supports <code>Dispatchers.Default</code> which is used for background work. You can read <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/native-mt\" rel=\"nofollow noreferrer\">docs</a> in native-mt branch. Worth noting that the version for ios should be set strictly:</p>\n<pre><code>implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9-native-mt&quot;) {\n            version {\n                strictly('1.3.9-native-mt')\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 978, "user_id": 3418658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf9f60f6c57f03e92c4c81e1b71cca22?s=128&d=identicon&r=PG&f=1", "display_name": "Paresh Dudhat", "link": "https://stackoverflow.com/users/3418658/paresh-dudhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1704, "favorite_count": 3, "answer_count": 3, "score": 18, "last_activity_date": 1600342858, "creation_date": 1576573441, "last_edit_date": 1577501550, "question_id": 59370764, "link": "https://stackoverflow.com/questions/59370764/withtimeout-function-gives-illegalstateexception-there-is-no-event-loop-use-ru", "title": "withTimeout function gives IllegalStateException: There is no event loop. Use runBlocking { ... } to start one. in Kotlin Multiplatform iOS client", "body": "<p>Update:\nIt works if I first execute a coroutine without timeout and then withTimeout. But If I execute a coroutine withTimeout first then it gives me an error. same goes for Async as well.</p>\n\n<p>I am creating a demo kotlin multiplatform application where I am executing an API call with ktor.\nI want to have a configurable timeout function on ktor request so I am using withTimeout at coroutine level.</p>\n\n<p>Here is my function call with network API.</p>\n\n<pre><code>suspend fun &lt;T&gt; onNetworkWithTimeOut(\n    url: String,\n    timeoutInMillis: Long,\n    block: suspend CoroutineScope.() -&gt; Any): T {\n    return withTimeout(timeoutInMillis) {\n        withContext(dispatchers.io, block)\n    } as T\n}\n\nsuspend fun &lt;T&gt; onNetworkWithoutTimeOut(url: String, block: suspend CoroutineScope.() -&gt; Any): T {\n    return withContext(dispatchers.io, block) as T\n}\n</code></pre>\n\n<p>Here is my AppDispatcher class for the iOSMain module.</p>\n\n<pre><code>@InternalCoroutinesApi\nactual class AppDispatchersImpl : AppDispatchers {\n@SharedImmutable\noverride val main: CoroutineDispatcher =\n    NsQueueDispatcher(dispatch_get_main_queue())\n\n@SharedImmutable\noverride val io: CoroutineDispatcher =\n    NsQueueDispatcher(dispatch_get_main_queue())\n\ninternal class NsQueueDispatcher(\n    @SharedImmutable private val dispatchQueue: dispatch_queue_t\n) : CoroutineDispatcher() {\n    override fun dispatch(context: CoroutineContext, block: Runnable) {\n        NSRunLoop.mainRunLoop().performBlock {\n            block.run()\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>so the function with the timeout gives me the following error in iOS client.</p>\n\n<pre><code>kotlin.IllegalStateException: There is no event loop. Use runBlocking { ... } to start one.\n</code></pre>\n\n<p>I am using 1.3.2-native-mt-1 version of the kotlin-coroutine-native.\nI have created a sample demo application at the following URL.\n<a href=\"https://github.com/dudhatparesh/kotlin-multiplat-platform-example\" rel=\"noreferrer\">https://github.com/dudhatparesh/kotlin-multiplat-platform-example</a></p>\n"}, {"tags": ["kotlin", "global-variables"], "comments": [{"owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "edited": false, "score": 0, "creation_date": 1576594743, "post_id": 59370752, "comment_id": 104945998, "body": "I posted an answer, let me know if it helped you or if you are looking for another solution"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "edited": false, "score": 0, "creation_date": 1576596716, "post_id": 59374771, "comment_id": 104947060, "body": "thanks for your help,  I tried the annotation way, when the first time set the flag to true, the second call enter, found the flag was not reset to false in the method <code>modifyFlag()</code>."}, {"owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "reply_to_user": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "edited": false, "score": 0, "creation_date": 1576596878, "post_id": 59374771, "comment_id": 104947154, "body": "@wai4y can you please post implementation of <code>setFlagValue()</code>?"}, {"owner": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "edited": false, "score": 0, "creation_date": 1576597091, "post_id": 59374771, "comment_id": 104947293, "body": "the <code>setFlagValue()</code> returns a boolean, the first time I made it return true, the flag value was set to true, then the second request, when I debug to the line <code>flag = setFlagValue()</code>, before the flag was assigned a value, it&#39;s already with the value true"}, {"owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "reply_to_user": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "edited": false, "score": 0, "creation_date": 1576597239, "post_id": 59374771, "comment_id": 104947372, "body": "@wai4y are you sure, that <code>setFlagValue()</code> return not only true? According to your explanation, it does not return false, therefore flag will not be reset to false after second call of <code>modifyFlag()</code>"}, {"owner": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "edited": false, "score": 0, "creation_date": 1576597601, "post_id": 59374771, "comment_id": 104947559, "body": "the logic can change on front-end, so the <code>setFlagValue()</code> can return true or false, what I&#39;m curious is that after the first time I set it to true, the second request when debug hit this line, the flag didn&#39;t reset to its default vaule which is false I defined above the <code>modifyFlag()</code> method."}], "tags": [], "owner": {"reputation": 1604, "user_id": 7221362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgKol.jpg?s=128&g=1", "display_name": "Steyrix", "link": "https://stackoverflow.com/users/7221362/steyrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1576588166, "last_edit_date": 1576588166, "creation_date": 1576587561, "answer_id": 59374771, "question_id": 59370752, "link": "https://stackoverflow.com/questions/59370752/how-to-set-thread-safe-global-variable-in-kotlin-companion-object/59374771#59374771", "title": "how to set thread-safe global variable in Kotlin companion object?", "body": "<p>I think you should try this if you run your Kotlin app on JVM. The annotation <code>@Synchronized</code> will lock the methods, so the threads will not access the static class while the method is executed. </p>\n\n<pre><code>class GlobalVariable {\n    companion object {\n        private var mutex = Object()\n        private var flag = false\n\n        @Synchronized fun modifyFlag(){\n            flag = setFlagValue()\n        }\n\n        @Synchronized fun getVal(): Boolean = this.flag\n    }\n}\n</code></pre>\n\n<p>You can also use synchronized block, however, due to official documentation, synchronization on Any object is not supported on every platform and will be removed soon from standard library.</p>\n\n<pre><code>class GlobalVariable {\n    companion object {\n        private var mutex = Object()\n        private var flag = false\n\n        private val mutex = Any()\n\n        fun modifyFlag(){\n            synchronized(mutex) {\n                flag = setFlagValue()\n            }\n        }\n\n        fun getVal(): Boolean {\n            synchronized(mutex) {\n                return flag;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here, synchronized block allows only one thread to obtain mutex at time. The thread, which will hold the mutex, will execute the method, not being interrupted or involved to race by other threads</p>\n"}], "owner": {"reputation": 21, "user_id": 6483184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQWMg.jpg?s=128&g=1", "display_name": "wai4y", "link": "https://stackoverflow.com/users/6483184/wai4y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576588166, "creation_date": 1576573387, "question_id": 59370752, "link": "https://stackoverflow.com/questions/59370752/how-to-set-thread-safe-global-variable-in-kotlin-companion-object", "title": "how to set thread-safe global variable in Kotlin companion object?", "body": "<p>I want to set a mutable variable in companion object and use it in other methods in static way.</p>\n\n<pre><code>class GlobalVariable {\n    companion object {\n        private var flag = false\n\n        fun modifyFlag(){\n          flag = setFlagValue() //this method written in other class to assign value to the flag\n        }\n        fun getVal(): Boolean = this.flag // this is to get flag value in other methods static way, like GlobalVariable.getVal()\n    }\n}\n</code></pre>\n\n<p>the <code>flag</code> is the variable I need, I'll call <code>modifyFlag()</code> method in other methods, set value to the flag, then use <code>GlobalVariable.getVal()</code> in whenever I need.</p>\n\n<p>not sure whether it's thread-safe in this way. \nIs there any other way to set a global variable in Kotlin?</p>\n"}, {"tags": ["java", "kotlin", "junit"], "owner": {"reputation": 11, "user_id": 12549971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd31412a3dcff853959992efbff02652?s=128&d=identicon&r=PG&f=1", "display_name": "Random1258", "link": "https://stackoverflow.com/users/12549971/random1258"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576567556, "creation_date": 1576567556, "question_id": 59369393, "link": "https://stackoverflow.com/questions/59369393/junit-console-runner-doesnt-detect-tests", "title": "Junit console runner doesn&#39;t detect tests", "body": "<p>I'm trying to launch all my tests via junit-platform-console-runner. </p>\n\n<p>Tried some simple commands like:</p>\n\n<p><code>java -jar C:\\git\\autotesting\\junit-platform-console-standalone-1.5.2.jar -cp C:\\git\\autotesting\\target\\test-classes --exclude-engine junit-vintage</code></p>\n\n<p>Tried command from other discussions like:</p>\n\n<p><code>java -jar C:\\git\\autotesting\\junit-platform-console-standalone-1.5.2.jar --class-path C:\\git\\autotesting\\target\\test-classes --exclude-engine junit-vintage --scan-classpath</code></p>\n\n<p>console-args.txt contains</p>\n\n<pre><code>--include-engine\njunit-jupiter\n--exclude-engine\njunit-vintage\n--disable-ansi-colors\n--details\nverbose\n--details-theme\nascii\n--fail-if-no-tests\n--reports-dir\nC:/junit5/reports\n--scan-classpath\n</code></pre>\n\n<p>But all I got is </p>\n\n<pre><code>Test plan execution started. Number of static tests: 0\n.\n+-- JUnit Jupiter\n'-- JUnit Jupiter finished after 6 ms.\nTest plan execution finished. Number of all tests: 0\n\nTest run finished after 97 ms\n[         1 containers found      ]\n[         0 containers skipped    ]\n[         1 containers started    ]\n[         0 containers aborted    ]\n[         1 containers successful ]\n[         0 containers failed     ]\n[         0 tests found           ]\n[         0 tests skipped         ]\n[         0 tests started         ]\n[         0 tests aborted         ]\n[         0 tests successful      ]\n[         0 tests failed          ]\n</code></pre>\n\n<p>All tests are @ParametrizedTest </p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines", "suspend", "coroutinescope"], "answers": [{"tags": [], "owner": {"reputation": 1680, "user_id": 8112679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f9a6f2f75be66f66fe5cb7ced1e0be?s=128&d=identicon&r=PG", "display_name": "Harshvardhan Joshi", "link": "https://stackoverflow.com/users/8112679/harshvardhan-joshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1576566132, "creation_date": 1576566132, "answer_id": 59369096, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin/59369096#59369096", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p><code>CoroutineScope()</code> is the method which takes a <code>Context</code> as input and gives you <code>Context</code> with a <code>Job</code> as an object of <code>CoroutineScope</code> interface.</p>\n\n<p>You can use this object to launch a coroutine job as following:</p>\n\n<pre><code>suspend fun doNotDoThis() {\n  CoroutineScope(coroutineContext).launch {\n      println(\"I'm confused\")\n  }\n}\n</code></pre>\n\n<p>While, <code>coroutineScope()</code> takes a <code>block</code>/<code>labmda</code> to execute as a coroutine <code>job</code>:</p>\n\n<pre><code>   fun main() = runBlocking { // this: CoroutineScope\n    launch { \n        delay(200L)\n        println(\"Task from runBlocking\")\n    }\n\n    coroutineScope { // Creates a new coroutine scope\n        launch {\n            delay(500L) \n            println(\"Task from nested launch\")\n        }\n\n        delay(100L)\n        println(\"Task from coroutine scope\") // This line will be printed before nested launch\n    }\n\n    println(\"Coroutine scope is over\") // This line is not printed until nested launch completes\n}\n</code></pre>\n\n<p>References: </p>\n\n<p><a href=\"https://medium.com/@elizarov/coroutine-context-and-scope-c8b255d59055\" rel=\"nofollow noreferrer\">Article-1</a> </p>\n\n<p><a href=\"https://proandroiddev.com/how-to-make-sense-of-kotlin-coroutines-b666c7151b93\" rel=\"nofollow noreferrer\">Article-2</a> </p>\n\n<p><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-scope/\" rel=\"nofollow noreferrer\">Kotlin-Docs</a></p>\n\n<p>I hope this answers your questions.</p>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "edited": false, "score": 0, "creation_date": 1593988993, "post_id": 59371081, "comment_id": 110961815, "body": "So, <code>coroutineScope()</code> and <code>withContext()</code> are considered coroutine builders?"}, {"owner": {"reputation": 10302, "user_id": 902276, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/eLAjw.jpg?s=128&g=1", "display_name": "Daniele Segato", "link": "https://stackoverflow.com/users/902276/daniele-segato"}, "edited": false, "score": 0, "creation_date": 1599040565, "post_id": 59371081, "comment_id": 112647833, "body": "Nice answer, but it is not true that <code>coroutineScope</code> <i>is basically an alias for <code>withContext(this.coroutineContext)</code></i>: they are not the same thing.  <code>withContext</code> will NOT wait for sub-coroutines you lunch inside it to complete, <code>coroutineScope</code> will"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 10302, "user_id": 902276, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/eLAjw.jpg?s=128&g=1", "display_name": "Daniele Segato", "link": "https://stackoverflow.com/users/902276/daniele-segato"}, "edited": false, "score": 0, "creation_date": 1599044222, "post_id": 59371081, "comment_id": 112649518, "body": "@DanieleSegato Have you tried it, or do you say it based on the docs only? Because the  docs are outdated, <code>withContext</code> now <a href=\"https://stackoverflow.com/questions/56904057/why-does-withcontext-await-for-the-completion-of-child-coroutines\">does wait</a> for the completion of child coroutines."}, {"owner": {"reputation": 10302, "user_id": 902276, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/eLAjw.jpg?s=128&g=1", "display_name": "Daniele Segato", "link": "https://stackoverflow.com/users/902276/daniele-segato"}, "edited": false, "score": 0, "creation_date": 1599122718, "post_id": 59371081, "comment_id": 112677602, "body": "Oh, you are right! No i did not try it, I just looked at the code and it looked like they do different things (I answer you in more details <a href=\"https://stackoverflow.com/a/56866621/902276\">here</a>)"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1615497002, "post_id": 59371081, "comment_id": 117716418, "body": "\u201c<i>You will rarely, if ever, have the need to call CoroutineScope()</i>\u201d - this is not true, at least not on the JVM. If you want to launch a coroutine from a regular function that you don\u2019t want to wait for, you\u2019ll need to use <code>CoroutineScope</code>."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1615544690, "post_id": 59371081, "comment_id": 117729420, "body": "@AbhijitSarkar In that case you would actually use the <code>GlobalScope</code> singleton."}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1615545388, "post_id": 59371081, "comment_id": 117729716, "body": "@MarkoTopolnik &quot;<i>you would actually use the <code>GlobalScope</code></i>&quot; - I wouldn&#39;t. <a href=\"https://elizarov.medium.com/the-reason-to-avoid-globalscope-835337445abc\" rel=\"nofollow noreferrer\">The reason to avoid GlobalScope</a>."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1615546184, "post_id": 59371081, "comment_id": 117730018, "body": "@AbhijitSarkar You would be doing exactly the same mistakes covered in that blog if you used <code>CoroutineScope().launch</code>. They are almost synonymous."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 11, "last_activity_date": 1594102782, "last_edit_date": 1594102782, "creation_date": 1576574586, "answer_id": 59371081, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin/59371081#59371081", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p><code>CoroutineScope()</code> is nothing but a factory of <code>CoroutineScope</code> objects, and a <code>CoroutineScope</code> object is nothing but a holder of a <code>CoroutineContext</code>. It has no active role in coroutines, but it's an important part of the infrastructure that makes it easy to do structured concurrency properly. This comes from the fact that all coroutine builders like <code>launch</code> or <code>async</code> are extension functions on <code>CoroutineScope</code> and inherit its context.</p>\n<p>You will rarely, if ever, have the need to call <code>CoroutineScope()</code> because usually you either pick up an existing coroutine scope or have one created for you by other convenience functions (like <code>MainScope</code> on Android) or Kotlin internals.</p>\n<p><code>coroutineScope()</code>, on the other hand, is a function that executes the block you pass it inside a sub-coroutine. It is basically an alias for <code>withContext(this.coroutineContext)</code> and you should primarily use it when you want to launch one or more background coroutines while you continue some work in the foreground, and then join on the background coroutines when completing the block.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 9343040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7a033f5c4207f4bcdb18a160eefd65?s=128&d=identicon&r=PG&f=1", "display_name": "James121", "link": "https://stackoverflow.com/users/9343040/james121"}, "edited": false, "score": 2, "creation_date": 1599045560, "post_id": 59376666, "comment_id": 112650103, "body": "Why it looks partly like java code? E.g. <code>int result = 0</code> instead of  <code>var result: Int = 0</code> or <code>extends</code> keyword instead of <code>:</code> On the other hand you can see <code>suspend</code> keyword which is from Kotlin language. What&#39;s going on here?"}, {"owner": {"reputation": 2714, "user_id": 850347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QZUgz.gif?s=128&g=1", "display_name": "Stanley Ko", "link": "https://stackoverflow.com/users/850347/stanley-ko"}, "edited": false, "score": 0, "creation_date": 1618626580, "post_id": 59376666, "comment_id": 118666095, "body": "@Kushal, I modified this half-koitlin code to kotlin code. If you keep the original post, please revert it. I tested this code and I think it seems to suit to your purpose."}], "tags": [], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "is_accepted": true, "score": 13, "last_activity_date": 1618626479, "last_edit_date": 1618626479, "creation_date": 1576594003, "answer_id": 59376666, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin/59376666#59376666", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p>Best difference between <code>CoroutineScope</code> (Capital C version) vs <code>coroutineScope</code> (Smaller c version), I could figure out and which was easily understandable was correlating them with <strong>Unstructured</strong> vs <strong>Structured</strong> concurrency</p>\n<p>Let me share an example :</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    private lateinit var btn: Button\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        btn = findViewById(R.id.start_btn)\n        btn.setOnClickListener {\n            CoroutineScope(Dispatchers.Main).launch {\n                val result = downloadUserData()\n                Toast.makeText(applicationContext, &quot;Result : $result&quot;, Toast.LENGTH_LONG).show()\n            }\n        }\n    }\n\n    private suspend fun downloadUserData(): Int {\n        var result = 0\n        // Here, we use CoroutineScope (Capital C version) which will start a new scope and\n        // launch coroutine in new scope Dispatchers.IO, Not In Parent Scope which is Dispatchers.Main\n        // Thus, this function would directly return without waiting for loop completion and will return 0\n        CoroutineScope(Dispatchers.IO).launch {\n            for (i in 0 until 100) {\n                kotlinx.coroutines.delay(10)\n                result++\n            }\n        }\n        return result\n    }\n}\n</code></pre>\n<p>Output :\n<code>Result : 0</code></p>\n<p>This is an example of <strong>Unstructured Concurrency</strong> where it is not guaranteed that child coroutine would complete before returning. Thus, caller/parent coroutine would get wrong value returned by child coroutine. Even, when child coroutine has returned already, child coroutine may be running (in Active state) in the background which may lead to <strong>Memory Leaks</strong> in certain cases.</p>\n<p><strong>Solution :</strong></p>\n<p>When we need to communicate between multiple coroutines, we need to make sure <strong>Structured Concurrency</strong> (Recommended)</p>\n<p>This can be done by re-using parent/caller coroutine scope inside child/callee coroutine. This can be achieved by <code>coroutineScope {}</code> (Smaller c) version inside child/callee coroutine.</p>\n<pre><code>private suspend fun downloadUserData(): Int {\n    var result = 0\n    // By using coroutineScope (Smaller c version) below, we ensure that this coroutine would execute in the\n    // parent/caller coroutine's scope, so it would make sure that the for loop would complete\n    // before returning from this suspended function. This will return 20000 properly\n    coroutineScope {\n        for (i in 0 until 100) {\n            kotlinx.coroutines.delay(10)\n            result++\n        }\n    }\n    return result\n}\n</code></pre>\n<p>Output : <code>Result : 100</code></p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 4685534, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-nEl-nc1JrgU/AAAAAAAAAAI/AAAAAAAAAD8/MRcR5BpDRdU/photo.jpg?sz=128", "display_name": "parvez rafi", "link": "https://stackoverflow.com/users/4685534/parvez-rafi"}, "is_accepted": false, "score": 0, "last_activity_date": 1590684642, "last_edit_date": 1590684642, "creation_date": 1590683118, "answer_id": 62069682, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin/62069682#62069682", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p>In the Unstructured concurrency example if you replace Launch builder with Async and await on the deferred, it will work same as the example you have used in Structured Concurrency. Your answer is still unclear. Explain the actual use of structured concurrency (Which is useful in exception and error handling, when one of the child Job throws an exception, which should not effect other childrens(Jobs))</p>\n"}, {"tags": [], "owner": {"reputation": 10302, "user_id": 902276, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/eLAjw.jpg?s=128&g=1", "display_name": "Daniele Segato", "link": "https://stackoverflow.com/users/902276/daniele-segato"}, "is_accepted": false, "score": 4, "last_activity_date": 1599038220, "last_edit_date": 1599038220, "creation_date": 1599037722, "answer_id": 63702314, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin/63702314#63702314", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p>They are two completely different things.</p>\n<p><code>CoroutineScope</code> is the <strong>interface</strong> that define the concept of Scope with Coroutines, to execute a coroutine you need a scope.</p>\n<p><code>GlobalScope</code> is a instance of scope that is global for example.</p>\n<p><code>CoroutineScope()</code> is a <strong>global function</strong> that creates a <code>CoroutineScope</code></p>\n<p>When you have a scope you can do <code>launch()</code> or <code>async()</code> or any other method related to executing coroutines.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// create a context\nval myContext = Dispacher.IO\n// you can combine dispachers, parent jobs etc.\n// create the new scope\nval myScope: CoroutineScope = CoroutineScope(myContext)\n// returns immediately (unless you specify a start mode that run immediately)\nval job = myScope.launch {\n  // suspend calls are allowed here cause this is a coroutine\n}\n// this code is executed right away\n</code></pre>\n<p>you can do this from outside a coroutine (plain code).</p>\n<p><code>coroutineScope()</code> on the other hand is an <strong>global suspend function</strong> that creates a new <code>CoroutineScope</code> under the hood and then execute the suspend function you pass with it in the body, and wait for it (and all its children) to complete before returning. It is a suspend function so you cannot call it outside of a coroutine.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// must be inside a coroutine here!\n\n// this create a new CoroutineScope,\n// then launch the given coroutine,\n// then wait for it to complete\nval result = coroutineScope {\n   // your coroutine here, which run immediately\n   return@coroutineScope &quot;my result&quot;\n}\n// this code is executed after the coroutine above is completed\n// I can use &quot;result&quot; here\n</code></pre>\n<p>similar to <code>coroutineScope</code> there's <code>supervisedScope</code> which has only 1 difference: children coroutines (launch / async / ...) executed inside it will not cancel other children if it fails cause it use a <code>SupervisorJob</code></p>\n"}], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6861, "favorite_count": 4, "accepted_answer_id": 59376666, "answer_count": 5, "score": 11, "last_activity_date": 1618626479, "creation_date": 1576564921, "question_id": 59368838, "link": "https://stackoverflow.com/questions/59368838/difference-between-coroutinescope-and-coroutinescope-in-kotlin", "title": "Difference between CoroutineScope and coroutineScope in Kotlin", "body": "<p>Can anyone give clarity between functions <code>CoroutineScope()</code> and <code>coroutineScope()</code>?</p>\n\n<p>When I tried to check in source, I found that both of them are functions of <code>CoroutineScope.kt</code>.  Additionally, <code>coroutineScope()</code> is <code>suspend</code> function while other one is <code>normal</code> function</p>\n\n<p>Below is documentation I could find : </p>\n\n<pre><code>/**\n * Creates a [CoroutineScope] that wraps the given coroutine [context].\n *\n * If the given [context] does not contain a [Job] element, then a default `Job()` is created.\n * This way, cancellation or failure or any child coroutine in this scope cancels all the other children,\n * just like inside [coroutineScope] block.\n */\n@Suppress(\"FunctionName\")\npublic fun CoroutineScope(context: CoroutineContext): CoroutineScope =\n    ContextScope(if (context[Job] != null) context else context + Job())\n</code></pre>\n\n<p>And</p>\n\n<pre><code>/**\n * Creates a [CoroutineScope] and calls the specified suspend block with this scope.\n * The provided scope inherits its [coroutineContext][CoroutineScope.coroutineContext] from the outer scope, but overrides\n * the context's [Job].\n *\n * This function is designed for _parallel decomposition_ of work. When any child coroutine in this scope fails,\n * this scope fails and all the rest of the children are cancelled (for a different behavior see [supervisorScope]).\n * This function returns as soon as the given block and all its children coroutines are completed.\n * A usage example of a scope looks like this:\n *\n * ```\n * suspend fun showSomeData() = coroutineScope {\n *\n *   val data = async(Dispatchers.IO) { // &lt;- extension on current scope\n *      ... load some UI data for the Main thread ...\n *   }\n *\n *   withContext(Dispatchers.Main) {\n *     doSomeWork()\n *     val result = data.await()\n *     display(result)\n *   }\n * }\n * ```\n *\n * The scope in this example has the following semantics:\n * 1) `showSomeData` returns as soon as the data is loaded and displayed in the UI.\n * 2) If `doSomeWork` throws an exception, then the `async` task is cancelled and `showSomeData` rethrows that exception.\n * 3) If the outer scope of `showSomeData` is cancelled, both started `async` and `withContext` blocks are cancelled.\n * 4) If the `async` block fails, `withContext` will be cancelled.\n *\n * The method may throw a [CancellationException] if the current job was cancelled externally\n * or may throw a corresponding unhandled [Throwable] if there is any unhandled exception in this scope\n * (for example, from a crashed coroutine that was started with [launch][CoroutineScope.launch] in this scope).\n */\npublic suspend fun &lt;R&gt; coroutineScope(block: suspend CoroutineScope.() -&gt; R): R =\n    suspendCoroutineUninterceptedOrReturn { uCont -&gt;\n        val coroutine = ScopeCoroutine(uCont.context, uCont)\n        coroutine.startUndispatchedOrReturn(coroutine, block)\n    }\n</code></pre>\n\n<p>I want to get clear difference between them. If anyone can answer when to use which one, it would be helpful.</p>\n"}, {"tags": ["java", "kotlin", "apache-poi"], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 7304623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52563300fdf3225db35aff1468f49c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dipti", "link": "https://stackoverflow.com/users/7304623/dipti"}, "edited": false, "score": 0, "creation_date": 1576569058, "post_id": 59369305, "comment_id": 104932272, "body": "If I will use setFillBackgroundColor, then I won&#39;t be able to change any cell&#39;s color manually after opening excel sheet. @XtremeBaumer"}, {"owner": {"reputation": 5138, "user_id": 7109162, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eaf2daca9ef0a1751603bd0f707f0139?s=128&d=identicon&r=PG&f=1", "display_name": "XtremeBaumer", "link": "https://stackoverflow.com/users/7109162/xtremebaumer"}, "reply_to_user": {"reputation": 76, "user_id": 7304623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52563300fdf3225db35aff1468f49c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dipti", "link": "https://stackoverflow.com/users/7304623/dipti"}, "edited": false, "score": 2, "creation_date": 1576569908, "post_id": 59369305, "comment_id": 104932648, "body": "That is because the rule specifies the color. You can only change the color for the whole rule, which would affect every row. You have the same behaviour if you create a conditional formatting manually in excel"}, {"owner": {"reputation": 76, "user_id": 7304623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52563300fdf3225db35aff1468f49c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dipti", "link": "https://stackoverflow.com/users/7304623/dipti"}, "edited": false, "score": 0, "creation_date": 1576715582, "post_id": 59369305, "comment_id": 104992662, "body": "In that case, I cannot use Conditional formatting. Style need to be applied to each cell to achieve it. Thanks!"}], "tags": [], "owner": {"reputation": 5138, "user_id": 7109162, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eaf2daca9ef0a1751603bd0f707f0139?s=128&d=identicon&r=PG&f=1", "display_name": "XtremeBaumer", "link": "https://stackoverflow.com/users/7109162/xtremebaumer"}, "is_accepted": true, "score": 1, "last_activity_date": 1576567153, "creation_date": 1576567153, "answer_id": 59369305, "question_id": 59368696, "link": "https://stackoverflow.com/questions/59368696/apache-poi-issue-during-setting-foreground-color-in-conditionalformatting-with/59369305#59369305", "title": "Apache POI : Issue during setting foreground color in conditionalFormatting with SOLID_FILL pattern", "body": "<p>Contrary to how you usually color the cell, with <code>XSSFConditionalFormattingRule</code> you actually have to use <code>setFillBackgroundColor()</code> instead of <code>setFillForegroundColor()</code>.</p>\n\n<pre><code>XSSFConditionalFormattingRule rule = sheet.getSheetConditionalFormatting().createConditionalFormattingRule(\"MOD(ROW(), 2) = 0\");\nXSSFPatternFormatting fill = rule.createPatternFormatting();\nfill.setFillBackgroundColor(IndexedColors.BLUE.getIndex());\nfill.setFillPattern(FillPatternType.SOLID_FOREGROUND.getCode());\nCellRangeAddress[] regions = { CellRangeAddress.valueOf(\"A2:Z\" + (sheet.getLastRowNum() + 1)) };\n\nsheet.getSheetConditionalFormatting().addConditionalFormatting(regions, rule);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42107, "user_id": 3915431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad2fe8d0c0e72bdbe3623e85a96b9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Axel Richter", "link": "https://stackoverflow.com/users/3915431/axel-richter"}, "is_accepted": false, "score": 1, "last_activity_date": 1576568587, "creation_date": 1576568587, "answer_id": 59369629, "question_id": 59368696, "link": "https://stackoverflow.com/questions/59368696/apache-poi-issue-during-setting-foreground-color-in-conditionalformatting-with/59369629#59369629", "title": "Apache POI : Issue during setting foreground color in conditionalFormatting with SOLID_FILL pattern", "body": "<p>In <code>PatternFormatting</code> the solid background fill really needs to be set using <code>PatternFormatting.setFillBackgroundColor</code> also for a solid pattern fill. This is different from <code>CellStyle</code> where the fill foreground color needs to be set for solid pattern fill. The fill foreground color is the color of the pattern and the fill background color is the color behind the pattern.</p>\n\n<p>Let's have a complete example to show this and which is able serving both <code>XSSF</code>as well as <code>HSSF</code>.</p>\n\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.hssf.util.HSSFColor;\nimport org.apache.poi.xssf.usermodel.*;\n\nimport org.apache.poi.ss.util.CellRangeAddress;\n\nimport java.io.FileOutputStream;\n\npublic class CreateExcelConditionalFormatting {\n\n public static void main(String[] args) throws Exception {\n  //Workbook workbook = new HSSFWorkbook(); String filePath = \"./CreateExcelConditionalFormatting.xls\";\n  Workbook workbook = new XSSFWorkbook(); String filePath = \"./CreateExcelConditionalFormatting.xlsx\";\n\n  Sheet sheet = workbook.createSheet();\n  SheetConditionalFormatting sheetCF = sheet.getSheetConditionalFormatting();\n\n  ConditionalFormattingRule rule = sheetCF.createConditionalFormattingRule(\"MOD(ROW(), 2) = 0\");\n  PatternFormatting fill = rule.createPatternFormatting();\n  if (fill instanceof XSSFPatternFormatting) {\n   fill.setFillBackgroundColor(new XSSFColor(new java.awt.Color(245,245,245),new DefaultIndexedColorMap()));\n  } else if (fill instanceof HSSFPatternFormatting){\n   HSSFPalette palette = ((HSSFWorkbook)workbook).getCustomPalette();\n   HSSFColor hssfColor = palette.findColor((byte)245, (byte)245, (byte)245); \n   if (hssfColor == null) {\n    palette.setColorAtIndex((short)63, (byte)245, (byte)245, (byte)245);\n    hssfColor = palette.getColor((short)63);\n   }\n   fill.setFillBackgroundColor(hssfColor);\n  }\n  fill.setFillPattern(PatternFormatting.SOLID_FOREGROUND);\n\n  ConditionalFormattingRule[] cfRules = new ConditionalFormattingRule[]{rule};\n\n  CellRangeAddress[] regions = new CellRangeAddress[]{CellRangeAddress.valueOf(\"A1:D10\")};\n\n  sheetCF.addConditionalFormatting(regions, cfRules);\n\n  FileOutputStream out = new FileOutputStream(filePath);\n  workbook.write(out);\n  out.close();\n  workbook.close();\n\n }\n}\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 7304623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52563300fdf3225db35aff1468f49c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dipti", "link": "https://stackoverflow.com/users/7304623/dipti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 59369305, "answer_count": 2, "score": 0, "last_activity_date": 1576568587, "creation_date": 1576564220, "question_id": 59368696, "link": "https://stackoverflow.com/questions/59368696/apache-poi-issue-during-setting-foreground-color-in-conditionalformatting-with", "title": "Apache POI : Issue during setting foreground color in conditionalFormatting with SOLID_FILL pattern", "body": "<p>I want to apply a formatting to achieve row striped format(odd row : grey and even row : no background color) in generated excel sheet using Apache POI.</p>\n\n<p>Following is related code :</p>\n\n<pre><code>       val sheetCF = sheet.sheetConditionalFormatting       \n       val rule1 = sheetCF.createConditionalFormattingRule(\n        \"MOD(ROW(), 2) = 0\")\n\n       val fill1 = rule1.createPatternFormatting()\n       fill1.setFillForegroundColor( XSSFColor(Color(245,245,245),DefaultIndexedColorMap())) // Light Gray color\n      fill1.fillPattern = PatternFormatting.SOLID_FOREGROUND // this is causing issue\n      val regions1 = arrayOf(CellRangeAddress.valueOf(\"A1:D10\"))   \n      sheetCF.addConditionalFormatting(regions1, rule1)\n</code></pre>\n\n<p>Due to fillPattern, white color is applied as foreground. But if any other fillPattern is used , then it's working. Example:\n           <code>fill1.fillPattern = PatternFormatting.BIG_SPOTS</code></p>\n\n<p>But I need to apply solid patter. \nAny help would be appreciate in it.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-studio-3.0"], "comments": [{"owner": {"reputation": 602, "user_id": 2837815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SN2Br.png?s=128&g=1", "display_name": "feridok", "link": "https://stackoverflow.com/users/2837815/feridok"}, "edited": false, "score": 0, "creation_date": 1576562299, "post_id": 59368298, "comment_id": 104929887, "body": "check assets and lib folders in your apk file."}, {"owner": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "edited": false, "score": 0, "creation_date": 1576562559, "post_id": 59368298, "comment_id": 104929957, "body": "are you convert your project java to kotlin?"}, {"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "reply_to_user": {"reputation": 602, "user_id": 2837815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SN2Br.png?s=128&g=1", "display_name": "feridok", "link": "https://stackoverflow.com/users/2837815/feridok"}, "edited": false, "score": 0, "creation_date": 1576564204, "post_id": 59368298, "comment_id": 104930473, "body": "@feridok, i have just 2 fonts"}, {"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "reply_to_user": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "edited": false, "score": 0, "creation_date": 1576564225, "post_id": 59368298, "comment_id": 104930480, "body": "@ViralPatel, not. from first i used kotlin!"}, {"owner": {"reputation": 602, "user_id": 2837815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SN2Br.png?s=128&g=1", "display_name": "feridok", "link": "https://stackoverflow.com/users/2837815/feridok"}, "edited": false, "score": 0, "creation_date": 1576564228, "post_id": 59368298, "comment_id": 104930482, "body": "what about libs?"}, {"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "reply_to_user": {"reputation": 602, "user_id": 2837815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SN2Br.png?s=128&g=1", "display_name": "feridok", "link": "https://stackoverflow.com/users/2837815/feridok"}, "edited": false, "score": 0, "creation_date": 1576564376, "post_id": 59368298, "comment_id": 104930530, "body": "@feridok, i haven&#39;t any lib folder. i just use above dependencies"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576564283, "post_id": 59368581, "comment_id": 104930502, "body": "thanks, but can you send to me link for tutorial for this?"}, {"owner": {"reputation": 166, "user_id": 5144385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-e-F1BfoHM8E/AAAAAAAAAAI/AAAAAAAAAJA/QqFb3nVWHCA/photo.jpg?sz=128", "display_name": "Soham Pandya", "link": "https://stackoverflow.com/users/5144385/soham-pandya"}, "reply_to_user": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576564393, "post_id": 59368581, "comment_id": 104930534, "body": "read this two blog official android and medium . you will learn how to use apk analyzer.  1) <a href=\"https://developer.android.com/studio/build/apk-analyzer\" rel=\"nofollow noreferrer\">developer.android.com/studio/build/apk-analyzer</a> 2) <a href=\"https://medium.com/androiddevelopers/making-the-most-of-the-apk-analyzer-c066cb871ea2\" rel=\"nofollow noreferrer\">medium.com/androiddevelopers/&hellip;</a>"}, {"owner": {"reputation": 166, "user_id": 5144385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-e-F1BfoHM8E/AAAAAAAAAAI/AAAAAAAAAJA/QqFb3nVWHCA/photo.jpg?sz=128", "display_name": "Soham Pandya", "link": "https://stackoverflow.com/users/5144385/soham-pandya"}, "reply_to_user": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 1, "creation_date": 1576564525, "post_id": 59368581, "comment_id": 104930572, "body": "ya this link (<a href=\"https://medium.com/androiddevelopers/making-the-most-of-the-apk-analyzer-c066cb871ea2\" rel=\"nofollow noreferrer\">medium.com/androiddevelopers/&hellip;</a>) has everything related to it."}], "tags": [], "owner": {"reputation": 166, "user_id": 5144385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-e-F1BfoHM8E/AAAAAAAAAAI/AAAAAAAAAJA/QqFb3nVWHCA/photo.jpg?sz=128", "display_name": "Soham Pandya", "link": "https://stackoverflow.com/users/5144385/soham-pandya"}, "is_accepted": false, "score": 1, "last_activity_date": 1576563623, "creation_date": 1576563623, "answer_id": 59368581, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59368581#59368581", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>Drag and Drop apk file in android studio. you will see analyzer of apk. and see individual size taken by all libs, image and java files etc.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576565138, "post_id": 59368761, "comment_id": 104930746, "body": "Please see this link : <a href=\"http://uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg\" rel=\"nofollow noreferrer\">uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg</a> . in analyze show me <b>13Mb</b> but after build show me <b>29Mb</b>"}], "tags": [], "owner": {"reputation": 796, "user_id": 11833795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H51wT.png?s=128&g=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/11833795/niraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1576565599, "last_edit_date": 1576565599, "creation_date": 1576564582, "answer_id": 59368761, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59368761#59368761", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>Click on Build > Analyze APK > Select your APK.</p>\n\n<p>You can see which file made your app size too BIG.</p>\n\n<p><a href=\"https://i.stack.imgur.com/d38xT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d38xT.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>UPDATE 1 :</strong></p>\n\n<p>Do these changes in your <code>build.gradle(Module:app)</code> file. It decreases the APK size almost (40-50)%.</p>\n\n<pre><code>    android {\n    // Other settings\n\n      buildTypes {\n          release {\n            minifyEnabled true\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n          }\n      }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576565134, "post_id": 59368775, "comment_id": 104930744, "body": "Please see this link : <a href=\"http://uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg\" rel=\"nofollow noreferrer\">uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg</a> . in analyze show me <b>13Mb</b> but after build show me <b>29Mb</b>"}, {"owner": {"reputation": 3181, "user_id": 3728438, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/51f9885689692b6056ae66e2a517ef1f?s=128&d=identicon&r=PG&f=1", "display_name": "Manikanta", "link": "https://stackoverflow.com/users/3728438/manikanta"}, "reply_to_user": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576565405, "post_id": 59368775, "comment_id": 104930863, "body": "Well, got your issue. This issue happens when any of the dependencies you use are jni specific code ( many of the ML related libraries like image processing, google image vision etc..) so those libraries have libso files that will be generated for each CPU architecture. so the bloating in the size is because it is generating the libso for each of the architecture."}, {"owner": {"reputation": 3181, "user_id": 3728438, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/51f9885689692b6056ae66e2a517ef1f?s=128&d=identicon&r=PG&f=1", "display_name": "Manikanta", "link": "https://stackoverflow.com/users/3728438/manikanta"}, "reply_to_user": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576565500, "post_id": 59368775, "comment_id": 104930895, "body": "Ways to solve:  1. Check the libraries which are generating the libso files and if those features are optional remove that library.  2. If they are really important and if your app is being distributed via playstore, Use App Bundles it will make sure that your app will be optimized specific to the device( also use proguard for code obfuscation &amp; shrinking)  Hope This helps!"}], "tags": [], "owner": {"reputation": 3181, "user_id": 3728438, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/51f9885689692b6056ae66e2a517ef1f?s=128&d=identicon&r=PG&f=1", "display_name": "Manikanta", "link": "https://stackoverflow.com/users/3728438/manikanta"}, "is_accepted": false, "score": 0, "last_activity_date": 1576564613, "creation_date": 1576564613, "answer_id": 59368775, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59368775#59368775", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>You can fix these errors by analyzing the generated APK.</p>\n\n<p>In Android Studio -> Build => Analyse APK.</p>\n\n<p>Select the Generated APK from file system and see what resources are bloating up your APK.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4nz6Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4nz6Z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please let me know if you have any further doubts.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "edited": false, "score": 0, "creation_date": 1576565141, "post_id": 59368789, "comment_id": 104930749, "body": "Please see this link : <a href=\"http://uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg\" rel=\"nofollow noreferrer\">uupload.ir/files/p42q_screen_shot_1398-09-26_at_10.09.27.jpg</a> . in analyze show me <b>13Mb</b> but after build show me <b>29Mb</b>"}], "tags": [], "owner": {"reputation": 514, "user_id": 5662319, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-syoS53yYoXQ/AAAAAAAAAAI/AAAAAAAAABI/iHtx5-0vSa0/photo.jpg?sz=128", "display_name": "Nouman Shah", "link": "https://stackoverflow.com/users/5662319/nouman-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1576564693, "creation_date": 1576564693, "answer_id": 59368789, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59368789#59368789", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>As @Soham Suggest Analyze your APK moreover you can shrink your Code, Resource , apply Obfuscation and Optimize your code.</p>\n\n<p>here is the link for official documentation <a href=\"https://developer.android.com/studio/build/shrink-code\" rel=\"nofollow noreferrer\">Here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1576565446, "creation_date": 1576565446, "answer_id": 59368958, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59368958#59368958", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>If your project <code>minSdkVersion</code> is 18 or higher, then you can compress your PNG, JPEG and BMP by converting them to WebP format. </p>\n\n<p>First step is ,Control-click the drawable that you want to convert and select Convert to WebP. Then, Select Skip images when the encoded result is larger than the original and click OK to convert the image.</p>\n\n<p><strong>Remove unused resources</strong></p>\n\n<p>Gradle can automatically remove resources on your behalf if you enable <code>shrinkResources</code> in your app's <code>build.gradle</code> file.</p>\n\n<pre><code>android {\n    // Other settings\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n</code></pre>\n\n<p>Follow this two things to reduced size of your apk. Please share your  <code>Analyze APK</code>  screenshot,if need help .</p>\n\n<p>I hope it'll help you..!</p>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "is_accepted": true, "score": 2, "last_activity_date": 1576565983, "creation_date": 1576565983, "answer_id": 59369064, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project/59369064#59369064", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>First thing you are using lots of library might be this is reason for big app size.\nFew thing you can to reduce app size </p>\n\n<ol>\n<li><p>Use your own component other then external library\nfor example you are using Expendable recyclerview library \n<code>implementation\"com.thoughtbot:expandablerecyclerview:$expandable_recycler_version\"</code></p></li>\n<li><p>Use Svg drawable other then png etc .Because you can use same svg file all screen size .</p></li>\n<li><p>Remove unused resources</p></li>\n<li><p>And last if you tried all of this then Use <code>ABI</code> . Though this you can create multi build for different device.\nPaste this in <code>android</code> block in build.gradle file</p>\n\n<pre><code>splits {\n abi {\n    enable true\n    reset()\n    include 'x86', 'x86_64', 'armeabi-v7a', 'arm64-v8a', 'armeabi', 'mips',\n   'mips64'\n    universalApk true\n   }\n  }\n  project.ext.versionCodes = ['armeabi': 1, 'armeabi-v7a': 2, 'arm64-v8a': \n  3, 'mips': 5, 'mips64': 6, 'x86': 8, 'x86_64': 9]\n\n  android.applicationVariants.all { variant -&gt;\n\n  variant.outputs.each { output -&gt; output.versionCodeOverride =\n  project.ext.versionCodes.get(\n    output.getFilter(com.android.build.OutputFile.ABI), 0\n    ) * 1000000 + android.defaultConfig.versionCode\n  }\n }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 173, "user_id": 12463592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0433a528bd9846cd114164bce3674a4a?s=128&d=identicon&r=PG&f=1", "display_name": "DJ Al", "link": "https://stackoverflow.com/users/12463592/dj-al"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2055, "favorite_count": 1, "accepted_answer_id": 59369064, "answer_count": 6, "score": 1, "last_activity_date": 1576571777, "creation_date": 1576562047, "last_edit_date": 1576571777, "question_id": 59368298, "link": "https://stackoverflow.com/questions/59368298/apk-file-size-increased-after-using-kotlin-in-android-project", "title": "APK file size increased after using kotlin in Android Project", "body": "<p>I've created an Android application in android studio and for programming language I used <strong>Kotlin</strong>.<br>\nNow my application finished and I want to build my app, but after building the app, my APK file size becomes <strong>35mb</strong> !!!<br>\nMy <strong>drawable folders</strong> size is <strong>2mb</strong> and I dont have any large size files, but why my application size is <strong>35mb</strong> ?!</p>\n\n<p>For generating test apk version, I used <strong>Build -> Generate Signed Build/APK</strong> from android studio menu.<br></p>\n\n<p>But when I use <strong>java</strong> for language this size is <strong>7mb</strong>!!!</p>\n\n<p><strong>I used these dependencies :</strong></p>\n\n<pre><code>    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation \"androidx.appcompat:appcompat:$androidx_version\"\n    implementation \"androidx.core:core-ktx:$androidx_version\"\n    implementation \"androidx.constraintlayout:constraintlayout:$constrant_layout_version\"\n    implementation \"androidx.recyclerview:recyclerview:$material_version\"\n    implementation \"com.google.android.material:material:$material_version\"\n    implementation \"androidx.legacy:legacy-support-v4:$material_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    testImplementation \"junit:junit:$junit_version\"\n    androidTestImplementation \"androidx.test.ext:junit:$androidx_junit_version\"\n    androidTestImplementation \"androidx.test.espresso:espresso-core:$espresso_version\"\n    //Anko lib\n    implementation \"org.jetbrains.anko:anko-commons:$anko_version\"\n    //Rx\n    implementation \"io.reactivex.rxjava2:rxandroid:$rxandroid_version\"\n    implementation \"io.reactivex.rxjava2:rxjava:$rxjava_version\"\n    //OkHttp\n    implementation \"com.squareup.okhttp3:okhttp:$okhttp_version\"\n    implementation \"com.squareup.okhttp3:logging-interceptor:$okhttp_version\"\n    //Retrofit\n    implementation \"com.squareup.retrofit2:retrofit:$retrofit_version\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava2:$retrofit_version\"\n    implementation \"com.squareup.retrofit2:converter-gson:$retrofit_version\"\n    implementation 'com.squareup.retrofit2:converter-scalars:2.5.0'\n    //Gson\n    implementation \"com.google.code.gson:gson:$gson_version\"\n    //Image\n    implementation \"com.github.bumptech.glide:glide:$glide_version\"\n    annotationProcessor \"com.github.bumptech.glide:compiler:$glide_version\"\n    //Calligraphy\n    implementation \"io.github.inflationx:calligraphy3:$calligraphy_version\"\n    implementation \"io.github.inflationx:viewpump:$viewpump_version\"\n    //Preferences lib\n    implementation \"com.github.MrNouri:GoodPrefs:$nourilib_versions\"\n    //Dynamic ui sizes\n    implementation \"com.github.MrNouri:DynamicSizes:$nourilib_versions\"\n    //Support MultiDex\n    implementation \"androidx.multidex:multidex:$multidex_version\"\n    //Animations\n    implementation \"com.daimajia.easing:library:$yoyoanimation_version\"\n    implementation \"com.daimajia.androidanimations:library:$nineoldandroid_version\"\n    //Map\n    implementation \"ir.map.sdk:sdk_map:$mapir\"\n    implementation \"com.mapbox.mapboxsdk:mapbox-sdk-services:$mapbox_service\"\n    implementation \"com.mapbox.mapboxsdk:mapbox-sdk-geojson:$mapbox_service\"\n    implementation \"com.mapbox.mapboxsdk:mapbox-android-telemetry:$mapbox_telemetry\"\n    implementation \"com.mapbox.mapboxsdk:mapbox-android-gestures:$mapbox_gestures\"\n    //Permission\n    implementation \"ru.superjob:kotlin-permissions:$permission_version\"\n    //Expandable recyclerview\n    implementation \"com.thoughtbot:expandablerecyclerview:$expandable_recycler_version\"\n    //Firebase messaging\n    implementation \"com.google.firebase:firebase-messaging:$firebase_messaging_version\"\n    //Firebase crashlytics\n    implementation \"com.google.firebase:firebase-analytics:$firebase_analytics_version\"\n    implementation \"com.crashlytics.sdk.android:crashlytics:$firebase_crashlytics_version\"\n}\n</code></pre>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["android", "kotlin", "imageview", "surfaceview"], "answers": [{"tags": [], "owner": {"reputation": 427, "user_id": 5229337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46db855ba4dbe116f9032b43c1276270?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Prajapati", "link": "https://stackoverflow.com/users/5229337/anil-prajapati"}, "is_accepted": true, "score": 0, "last_activity_date": 1576559050, "creation_date": 1576559050, "answer_id": 59367882, "question_id": 59367741, "link": "https://stackoverflow.com/questions/59367741/surfaceview-wont-draw-while-under-image-view/59367882#59367882", "title": "SurfaceView won&#39;t draw while under image view", "body": "<p><code>setZOrderOnTop(true)</code> you have added in the <code>surfaceview</code> init. \nbecause <code>surfaceview</code> should be always on top to draw anything,</p>\n\n<p>Although after that you can't put image on top of that, for that you can use other question ref\n<a href=\"https://stackoverflow.com/questions/7740687/add-image-to-surface-view-in-android\">add image to surface view in android</a></p>\n\n<p>for that. let me know if that helps</p>\n"}], "owner": {"reputation": 3, "user_id": 12549692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDLWITxhru5mhBh2UkMS2B7WsZCISo36iIeG4bsRFs=k-s128", "display_name": "Angus Cheung", "link": "https://stackoverflow.com/users/12549692/angus-cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 59367882, "answer_count": 1, "score": 0, "last_activity_date": 1576559050, "creation_date": 1576557881, "question_id": 59367741, "link": "https://stackoverflow.com/questions/59367741/surfaceview-wont-draw-while-under-image-view", "title": "SurfaceView won&#39;t draw while under image view", "body": "<p>I have a function that will keep on drawing on the surfaceView to simulate the animation of a character on the surfaceView. But after adding a imageView on top of the SurfaceView, the SurfaceView stop drawing. </p>\n"}, {"tags": ["android", "kotlin", "mac-address"], "comments": [{"owner": {"reputation": 550, "user_id": 9906778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R8MXUveUbxU/AAAAAAAAAAI/AAAAAAAAAJo/Myq1ul3z8gU/photo.jpg?sz=128", "display_name": "Ho&#224;ng V\u0169 Anh", "link": "https://stackoverflow.com/users/9906778/ho%c3%a0ng-v%c5%a9-anh"}, "edited": false, "score": 0, "creation_date": 1576550106, "post_id": 59366844, "comment_id": 104927411, "body": "here <a href=\"https://stackoverflow.com/questions/11705906/programmatically-getting-the-mac-of-an-android-device\" title=\"programmatically getting the mac of an android device\">stackoverflow.com/questions/11705906/&hellip;</a>"}, {"owner": {"reputation": 550, "user_id": 9906778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R8MXUveUbxU/AAAAAAAAAAI/AAAAAAAAAJo/Myq1ul3z8gU/photo.jpg?sz=128", "display_name": "Ho&#224;ng V\u0169 Anh", "link": "https://stackoverflow.com/users/9906778/ho%c3%a0ng-v%c5%a9-anh"}, "edited": false, "score": 0, "creation_date": 1576550200, "post_id": 59366844, "comment_id": 104927439, "body": "To convert Java code in Android studio use CTRL+SHIFT+ALT+K"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1576555720, "post_id": 59366844, "comment_id": 104928495, "body": "See &quot;<a href=\"https://developer.android.com/training/articles/user-data-ids\" rel=\"nofollow noreferrer\">Best practices for unique identifiers</a>&quot; to learn which identifiers are appropriate for your use case.  Note in particular that that page says: &quot;[I]t&#39;s generally not recommended to use MAC address[es] for any form of user identification.&quot;  Can you explain why you need a &quot;Unique ID&quot; here?"}], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 9113117, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9B4GvTzSDQ4/AAAAAAAAAAI/AAAAAAAAAWg/xg0itEP1vJA/photo.jpg?sz=128", "display_name": "Raka Adi Nugroho", "link": "https://stackoverflow.com/users/9113117/raka-adi-nugroho"}, "is_accepted": false, "score": 1, "last_activity_date": 1576550434, "creation_date": 1576550434, "answer_id": 59366897, "question_id": 59366844, "link": "https://stackoverflow.com/questions/59366844/how-to-get-mac-address-in-kotlin/59366897#59366897", "title": "How to get Mac address in Kotlin", "body": "<pre><code>fun getMac(context: Context): String {\n val manager = context.getSystemService(Context.WIFI_SERVICE) as WifiManager\n val info = manager.connectionInfo\n return info.macAddress.toUpperCase()\n}\n</code></pre>\n\n<p>your app must now have the ACCESS_FINE_LOCATION or ACCESS_COARSE_LOCATION permissions.</p>\n\n<p>default value if you don't have grant access is <code>02:00:00:00:00:00</code></p>\n"}], "owner": {"reputation": 11, "user_id": 12285351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDBJeZjuPWbd_Gb11pKzzUj-pJ8OdwSlc33BBK6=k-s128", "display_name": "Ahmad Rizqi", "link": "https://stackoverflow.com/users/12285351/ahmad-rizqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1590067010, "creation_date": 1576549955, "question_id": 59366844, "link": "https://stackoverflow.com/questions/59366844/how-to-get-mac-address-in-kotlin", "title": "How to get Mac address in Kotlin", "body": "<p>I need to obtain the MAC address of my android device using Kotlin. I've searched online, but I haven't found anything useful. I am using WiFi MAC address as Unique id, How to get the actual MAC address of the Android device in Kotlin ? </p>\n"}, {"tags": ["android", "kotlin", "build", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 1106, "user_id": 6396174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHvxZ.jpg?s=128&g=1", "display_name": "bmdelacruz", "link": "https://stackoverflow.com/users/6396174/bmdelacruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1603613178, "creation_date": 1603613178, "answer_id": 64521611, "question_id": 59366460, "link": "https://stackoverflow.com/questions/59366460/org-jetbrains-kotlin-resolve-lazy-nodescriptorfordeclarationexception-descripto/64521611#64521611", "title": "org.jetbrains.kotlin.resolve.lazy.NoDescriptorForDeclarationException: Descriptor wasn&#39;t found for declaration SCRIPT", "body": "<p>Did you have a Kotlin worksheet (<code>*.ws.kts</code>) or something like that somewhere in your source directories, e.g. <code>src/main/java</code>? I think <code>kapt</code> produces that error because it cannot process files like that.</p>\n<p>I resolved it by moving my Kotlin worksheet out of the <code>src/main/java</code> and placed it somewhere else.</p>\n"}], "owner": {"reputation": 333, "user_id": 2377578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6I0Rj.jpg?s=128&g=1", "display_name": "Donearh", "link": "https://stackoverflow.com/users/2377578/donearh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1603613178, "creation_date": 1576546706, "question_id": 59366460, "link": "https://stackoverflow.com/questions/59366460/org-jetbrains-kotlin-resolve-lazy-nodescriptorfordeclarationexception-descripto", "title": "org.jetbrains.kotlin.resolve.lazy.NoDescriptorForDeclarationException: Descriptor wasn&#39;t found for declaration SCRIPT", "body": "<p>I can\u2019t build a project after trying to add a dagger</p>\n\n<p>I'm new to using kotlin\nI use a sample Dagger 2 project at some point my project stopped starting</p>\n\n<p><strong>Solution Tried:</strong></p>\n\n<p>Invalidate Caches/Restart\nBuild -> Clean Project\nUpdate kotlin plugin, used lastest version of kotlin</p>\n\n<p><strong>build:gradle(Module:app)</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion \"29.0.2\"\n    defaultConfig {\n        applicationId \"com.example.app\"\n        minSdkVersion 21\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n\n    }\n\n    dataBinding {\n        enabled = true\n        enabledForTests = true\n    }\n}\n\n\n\ndependencies {\n    def multidex_version = \"2.0.1\" // Check this from the link\n    def lifecycle_version = \"2.1.0\"\n    implementation \"androidx.multidex:multidex:$multidex_version\"\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:${kotlin_version}\"\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.core:core-ktx:1.1.0'\n    implementation 'com.google.android.material:material:1.0.0'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'androidx.navigation:navigation-fragment:2.1.0'\n    implementation 'androidx.navigation:navigation-ui:2.1.0'\n    implementation \"androidx.lifecycle:lifecycle-extensions:$lifecycle_version\"\n    implementation \"androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version\"\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-savedstate:1.0.0-rc03'\n    implementation \"androidx.lifecycle:lifecycle-livedata-ktx:$lifecycle_version\"\n    implementation \"androidx.navigation:navigation-fragment-ktx:$lifecycle_version\"\n    implementation \"androidx.navigation:navigation-ui-ktx:$lifecycle_version\"\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'androidx.fragment:fragment-ktx:1.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n    implementation 'androidx.room:room-runtime:2.2.2'\n    kapt 'androidx.room:room-compiler:2.2.2'\n    implementation 'com.squareup.retrofit2:retrofit:2.7.0'\n\n    implementation 'com.google.dagger:dagger:2.25.2'\n    api 'com.google.dagger:dagger:2.25.2'\n\n    api 'com.google.dagger:dagger-android:2.25.2'\n    api 'com.google.dagger:dagger-android-support:2.25.2'\n    kapt 'com.google.dagger:dagger-compiler:2.25.2'\n    kapt 'com.google.dagger:dagger-android-processor:2.25.2'\n    implementation 'org.jetbrains.kotlin:kotlin-script-runtime:1.3.61'\n\n}\n</code></pre>\n\n<p><strong>build:gradle(Project)</strong></p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.61'\n    repositories {\n        google()\n        jcenter()\n\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.5.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p><strong>Error log</strong></p>\n\n<p>gradlew clean assembleDebug</p>\n\n<pre><code>Task :app:kaptGenerateStubsDebugKotlin FAILED\ne: org.jetbrains.kotlin.resolve.lazy.NoDescriptorForDeclarationException: Descriptor wasn't found for declaration SCRIPT\n        at org.jetbrains.kotlin.resolve.lazy.BasicAbsentDescriptorHandler.diagnoseDescriptorNotFound(AbsentDescriptorHandler.kt:18\n)\n        at org.jetbrains.kotlin.resolve.lazy.BasicAbsentDescriptorHandler.diagnoseDescriptorNotFound(AbsentDescriptorHandler.kt:17\n)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.findClassDescriptor(LazyDeclarationResolver.kt:88)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.getScriptDescriptor(LazyDeclarationResolver.kt:65)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$resolveToDescriptor$1.visitScript(LazyDeclarationResolver.kt:\n204)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$resolveToDescriptor$1.visitScript(LazyDeclarationResolver.kt:\n94)\n        at org.jetbrains.kotlin.psi.KtScript.accept(KtScript.java:69)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.resolveToDescriptor(LazyDeclarationResolver.kt:94)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.resolveToDescriptor(LazyDeclarationResolver.kt:91)\n        at org.jetbrains.kotlin.resolve.lazy.ResolveSession.resolveToDescriptor(ResolveSession.java:329)\n        at org.jetbrains.kotlin.resolve.jvm.extensions.PartialAnalysisHandlerExtension$doAnalysis$1.invoke(PartialAnalysisHandlerE\nxtension.kt:64)\n        at org.jetbrains.kotlin.resolve.jvm.extensions.PartialAnalysisHandlerExtension$doAnalysis$1.invoke(PartialAnalysisHandlerE\nxtension.kt:34)\n        at org.jetbrains.kotlin.resolve.jvm.extensions.PartialAnalysisHandlerExtension.doForEachDeclaration(PartialAnalysisHandler\nExtension.kt:121)\n        at org.jetbrains.kotlin.resolve.jvm.extensions.PartialAnalysisHandlerExtension.doForEachDeclaration(PartialAnalysisHandler\nExtension.kt:135)\n        at org.jetbrains.kotlin.resolve.jvm.extensions.PartialAnalysisHandlerExtension.doAnalysis(PartialAnalysisHandlerExtension.\nkt:63)\n        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.doAnalysis(Kapt3Extension.kt:145)\n        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacade\nForJVM.kt:105)\n        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyz\nerFacadeForJVM.kt:82)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:557)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:82)\n        at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:107)\n\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:548)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:177\n)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:165)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:55)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:84)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:42)\n        at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:104)\n        at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:349)\n        at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:105)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:237)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.access$compileIncrementally(IncrementalCompilerRunner.kt:37)\n\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner$compile$2.invoke(IncrementalCompilerRunner.kt:79)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:91)\n        at org.jetbrains.kotlin.daemon.CompileServiceImplBase.execIncrementalCompiler(CompileServiceImpl.kt:606)\n        at org.jetbrains.kotlin.daemon.CompileServiceImplBase.access$execIncrementalCompiler(CompileServiceImpl.kt:99)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1645)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\n        at sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mvvm"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1576547673, "post_id": 59366451, "comment_id": 104926930, "body": "Can you share your <code>LoginViewModel</code> and its constructors?"}, {"owner": {"reputation": 1605, "user_id": 415673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5b6587837176e54e1bf1404d6335530?s=128&d=identicon&r=PG", "display_name": "fangzhzh", "link": "https://stackoverflow.com/users/415673/fangzhzh"}, "edited": false, "score": 0, "creation_date": 1576547770, "post_id": 59366451, "comment_id": 104926952, "body": "looks like PostUserTokenImpl doesn&#39;t have a proper constructor"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "reply_to_user": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1576547935, "post_id": 59366451, "comment_id": 104926984, "body": "ViewModel added @ianhanniballake PostUserToken is an interface that is implemented in PostUserTokenImpl"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "reply_to_user": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1576548288, "post_id": 59366451, "comment_id": 104927038, "body": "I have posted the viewmodel @ianhanniballake"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 8371834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4VTTZ.jpg?s=128&g=1", "display_name": "Tuan Dao", "link": "https://stackoverflow.com/users/8371834/tuan-dao"}, "is_accepted": false, "score": 0, "last_activity_date": 1576559861, "creation_date": 1576559861, "answer_id": 59368003, "question_id": 59366451, "link": "https://stackoverflow.com/questions/59366451/viewmodelfactory-cant-instantiate-viewmodel-correctly/59368003#59368003", "title": "ViewModelFactory cant instantiate ViewModel correctly", "body": "<p>if you need some params in ViewModel, you can do follow me:</p>\n\n<p>1.Create BaseViewModelFactory</p>\n\n<pre><code>class BaseViewModelFactory &lt;T&gt; (val creator: () -&gt; T) : ViewModelProvider.Factory {\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return creator() as T\n    }\n}\n</code></pre>\n\n<p>2.create 2 extenstion funtion (Kotlin) to create view model</p>\n\n<pre><code>inline fun &lt;reified T : ViewModel&gt; Fragment.getViewModel(noinline creator: (() -&gt; T)? = null): T {\n    return if (creator == null) {\n        ViewModelProviders.of(this).get(T::class.java)\n    } else {\n        ViewModelProviders.of(this, BaseViewModelFactory(creator)).get(T::class.java)\n    }\n}\n\ninline fun &lt;reified T : ViewModel&gt; FragmentActivity.getViewModel(noinline creator: (() -&gt; T)? = null): T {\n    return if (creator == null) {\n        ViewModelProviders.of(this).get(T::class.java)\n    } else {\n        ViewModelProviders.of(this, BaseViewModelFactory(creator)).get(T::class.java)\n    }\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>simple use</li>\n</ol>\n\n<pre><code>viewModel = getViewModel()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>viewModel = getViewModel {\n LoginViewModel(usecase)\n}\n</code></pre>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576559861, "creation_date": 1576546625, "last_edit_date": 1576547918, "question_id": 59366451, "link": "https://stackoverflow.com/questions/59366451/viewmodelfactory-cant-instantiate-viewmodel-correctly", "title": "ViewModelFactory cant instantiate ViewModel correctly", "body": "<p>I have this error when I created my ViewModelFactory to pass my UseCase with the repository</p>\n\n<h2>viewModelFactory</h2>\n\n<pre><code>class LoginVMFactory(private val useCase: PostUserTokenImpl):ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return modelClass.getConstructor(PostUserTokenImpl::class.java).newInstance(useCase)\n    }\n}\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code> private val viewModel by lazy { ViewModelProviders.of(this, LoginVMFactory(PostUserTokenImpl(UserRepoImpl()))).get(LoginViewModel::class.java) }\n</code></pre>\n\n<h2>ViewModel</h2>\n\n<pre><code>class LoginViewModel(private val useCase: PostUserToken): ViewModel() {\n...\n}\n</code></pre>\n\n<p>Error log</p>\n\n<blockquote>\n  <p>Caused by: java.lang.NoSuchMethodException:  [class\n  com.test.domain.PostUserTokenImpl]\n          at java.lang.Class.getConstructor0(Class.java:2327)\n          at java.lang.Class.getConstructor(Class.java:1725)\n          at com.test.presentation.viewmodel.LoginVMFactory.create(LoginVMFactory.kt:13)</p>\n</blockquote>\n\n<p>Error log points to this </p>\n\n<pre><code> return modelClass.getConstructor(PostUserTokenImpl::class.java).newInstance(useCase)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "kotlin-inline-class"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1576567387, "creation_date": 1576567387, "answer_id": 59369359, "question_id": 59366109, "link": "https://stackoverflow.com/questions/59366109/kotlin-inline-class-that-implements-interface-under-the-hood/59369359#59369359", "title": "Kotlin inline class that implements interface under the hood", "body": "<blockquote>\n  <p>\"Normal\" inline classes are promised not to be a real objects at runtime</p>\n</blockquote>\n\n<p>Not quite:</p>\n\n<blockquote>\n  <blockquote>\n    <p><a href=\"https://kotlinlang.org/docs/reference/inline-classes.html#representation\" rel=\"nofollow noreferrer\">However, sometimes it is necessary to keep wrappers around. As a rule of thumb, inline classes are boxed whenever they are used as another type.</a></p>\n  </blockquote>\n</blockquote>\n\n<p>In particular, it is the inline class itself which implements the interface. And when you use the inline class with the interface as the static type is exactly one of the cases when it gets boxed (as demonstrated in the examples linked above). In your case I believe it will box and you don't get any benefit from it being <code>inline</code>.</p>\n"}], "owner": {"reputation": 1171, "user_id": 6121671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oEYZX.jpg?s=128&g=1", "display_name": "GV_FiQst", "link": "https://stackoverflow.com/users/6121671/gv-fiqst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 59369359, "answer_count": 1, "score": 3, "last_activity_date": 1576567387, "creation_date": 1576543101, "last_edit_date": 1576551415, "question_id": 59366109, "link": "https://stackoverflow.com/questions/59366109/kotlin-inline-class-that-implements-interface-under-the-hood", "title": "Kotlin inline class that implements interface under the hood", "body": "<p>In kotlin vesion 1.3.0 inline classes were made available for developers.</p>\n\n<p>\"Normal\" inline classes are promised not to be a real objects at runtime but exist only at compile time for type checking.</p>\n\n<p>So for instance </p>\n\n<pre><code>inline class MyWrapper(val someString: String)\n\nfun consumeMyWrapper(myWrapper: MyWrapper)\n</code></pre>\n\n<p>should be compiled to java equivalent of the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void consumeMyWrapper~blabla(String myWrapper) \n</code></pre>\n\n<p>However this also works:</p>\n\n<pre><code>interface A {\n\n    fun doJob(b: B)\n}\n\ninline class C(val self: D): A {\n\n    override fun doJob(b: B)\n}\n</code></pre>\n\n<p>So I'm wondering how exactly does this compile. I don't know <code>bytecode</code> so I'm asking for general principle. </p>\n\n<p>However if such an object which should implement certain interface does not exist at runtime, then somebody else must implement the interface. Will it be the receiver of an inline class? What will happen if the receiver happened to be of unmodifiable type (from other already compiled lib for instance)? </p>\n\n<p>Reasons why I have these concerns have to do with a problem I stumbled upon recently. I needed a cleaner way to communicate <code>Fragment</code> with <code>Activity</code> on a massive project. The old way was just saying <code>activity as? MainActivity</code> which is not \"very clean\". So I defined this interface:</p>\n\n<pre><code>interface ActivityDelegate {\n\n    val view: View\n\n    val routing: Routing\n\n    interface View {\n       // All common view related stuff\n    }\n\n    interface Routing {\n       // BottomNavigtion related stuff\n    }\n}\n</code></pre>\n\n<p>And implemented it as follows:</p>\n\n<pre><code>class MainActivity : Activity(), ActivityDelegate {\n\n    override val view by lazy { MainActivityView(this) }\n\n    override val routing by lazy { MainActivityRouting(this) }\n}\n\ninternal inline class MainActivityView(val self: MainActivity): ActivityDelegate.View \n\ninternal inline class MainActivityRouting(val self: MainActivity): ActivityDelegate.Routing\n</code></pre>\n\n<p>I used this approach with inline classes to move some logic out from MainActivity and delegate responsibilities.</p>\n\n<p>So my concerns are whether or not this is appropriate to have inline class here. Does it make a difference when used in this particular scenario?</p>\n"}, {"tags": ["spring-boot", "kotlin", "graphql-spqr"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5100071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfa22d2f8777ac0dfc2af3cf2ada99?s=128&d=identicon&r=PG&f=1", "display_name": "dtptw6", "link": "https://stackoverflow.com/users/5100071/dtptw6"}, "edited": false, "score": 0, "creation_date": 1576613002, "post_id": 59365626, "comment_id": 104954602, "body": "I did come by this method while I was doing some research but it seems like it isn&#39;t affecting the serialization. I&#39;ve even tried GSON&#39;s <code>@SerializedName()</code> but it isn&#39;t working either."}], "tags": [], "owner": {"reputation": 114, "user_id": 8963253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9q760HShKh4/AAAAAAAAAAI/AAAAAAAAALk/HVfrfedOfFw/photo.jpg?sz=128", "display_name": "Bruno Vasconcelos", "link": "https://stackoverflow.com/users/8963253/bruno-vasconcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1576538775, "creation_date": 1576538775, "answer_id": 59365626, "question_id": 59365366, "link": "https://stackoverflow.com/questions/59365366/generated-fields-arent-matching-what-i-have-defined-in-my-entity/59365626#59365626", "title": "Generated fields aren&#39;t matching what I have defined in my entity", "body": "<p>In spring, all variables like <code>isSomething</code> are replaced by <code>something</code> in the json.</p>\n\n<p>To make it explicit, you can use a <code>@JsonProperty</code> annotation</p>\n\n<p>Your class will be</p>\n\n<pre><code>@Entity\n@Table(name = \"User\")\nclass User(\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"user_id\")\n    var id: Long,\n\n    @Column(name = \"user_type\")\n    var type: String,\n\n    @JsonProperty(\"isAdmin\")\n    @Column(name = \"is_admin\")\n    var isAdmin: Boolean\n)\n</code></pre>\n\n<p>I am not sure why it happens. I'll look for the answer and edit the post when I find.</p>\n"}, {"tags": [], "owner": {"reputation": 10749, "user_id": 294657, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf6a123b877d32265e37c0fb592d5965?s=128&d=identicon&r=PG", "display_name": "kaqqao", "link": "https://stackoverflow.com/users/294657/kaqqao"}, "is_accepted": false, "score": 0, "last_activity_date": 1576611717, "creation_date": 1576611717, "answer_id": 59381058, "question_id": 59365366, "link": "https://stackoverflow.com/questions/59365366/generated-fields-arent-matching-what-i-have-defined-in-my-entity/59381058#59381058", "title": "Generated fields aren&#39;t matching what I have defined in my entity", "body": "<p>By default, all JavaBean properties are named by their property name, not their accessor name. So <code>getSomething</code> will get mapped as <code>something</code> and <code>isAdmin</code> (that returns a <code>boolean</code>) will get mapped as <code>admin</code>. This is in line with the behavior of most frameworks/languages/serialization formats. You'll get the same default behavior when mapping to JSON, accessing the field via SpEL, mapping to DB column names etc.</p>\n\n<p>To override the name on case-by-case basis, add <code>@GraphQLQuery</code> to the field (affects both input and output types) or accessor/getter (affects output types only). To affect the input type only add <code>@GraphQLInputField</code> on the field or mutator/setter. <code>@JsonProperty</code> is also respected for input types, and can optionally be configured for outputs.</p>\n\n<p>You can also globally configure the naming strategy. Will post an example later.</p>\n"}], "owner": {"reputation": 43, "user_id": 5100071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfa22d2f8777ac0dfc2af3cf2ada99?s=128&d=identicon&r=PG&f=1", "display_name": "dtptw6", "link": "https://stackoverflow.com/users/5100071/dtptw6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576611717, "creation_date": 1576536818, "last_edit_date": 1576537705, "question_id": 59365366, "link": "https://stackoverflow.com/questions/59365366/generated-fields-arent-matching-what-i-have-defined-in-my-entity", "title": "Generated fields aren&#39;t matching what I have defined in my entity", "body": "<p>I am creating a Kotlin Spring-Boot api with a GraphQL interface.  I am facing an issue when accessing one of my entities through GraphQL. Below you can most of my setup for accessing the user object. </p>\n\n<p>The issue is coming from the generated fields in GraphQL, it isn't matching what I have defined in my entity. This is only happening on the field <code>isAdmin</code> (and similarly styled ones). The output gets changed to <code>admin</code> and I cannot access it as <code>isAdmin</code>. It's not happening if I name the field like <code>inAdmin</code>, <code>letAdmin</code> or even <code>admin</code>. Its a very vague problem and I cannot seem to find any documentation on it. </p>\n\n<pre><code>@Entity\n@Table(name = \"User\")\nclass User(\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"user_id\")\n    var id: Long,\n\n    @Column(name = \"user_type\")\n    var type: String,\n\n    @Column(name = \"is_admin\")\n    var isAdmin: Boolean\n)\n</code></pre>\n\n<p>Resolver implementation for returning all users</p>\n\n<pre><code>@GraphQLApi\n@Component\nclass UserResolver {\n    @Autowired\n    lateinit var userService: userServiceInterface\n\n    @GraphQLQuery()\n    fun getUsers(): List&lt;UserType&gt; {\n        return userService.getUsers()\n    }\n}\n</code></pre>\n\n<p>Service Interface for storing custom queries</p>\n\n<pre><code>interface userServiceInterface {\n    fun getUsers(): List&lt;User&gt;\n}\n</code></pre>\n\n<p>GraphQL gui output schema</p>\n\n<pre><code>user{\n    id\n    type\n    admin //&lt;-- invalid, expecting isAdmin\n}\n</code></pre>\n\n<p>Edit: A workaround right now is to use alias </p>\n\n<pre><code>user{\n    id\n    type\n    isAdmin: admin\n}\n</code></pre>\n"}, {"tags": ["gradle", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1576536459, "post_id": 59365267, "comment_id": 104924516, "body": "How does <code>MovieQuizBackend</code> look like? Does it run in IntelliJ IDEA while not in jar?"}, {"owner": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1576538153, "post_id": 59365267, "comment_id": 104924968, "body": "@CrazyCoder I added it. No, it doesn&#39;t add as a main class to run either"}], "answers": [{"comments": [{"owner": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "edited": false, "score": 0, "creation_date": 1576541719, "post_id": 59365643, "comment_id": 104925764, "body": "It&#39;s so weird. I was wondering why we need kt files without classes in it and should I add @JvmStatic. But all this looks odd"}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "reply_to_user": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "edited": false, "score": 0, "creation_date": 1576542225, "post_id": 59365643, "comment_id": 104925874, "body": "It may look odd for the long time Java developers, but for the new programmers it&#39;s quite natural and allows to save a lot of typing. Try to explain a new student starting to write a code why in Java you need a class and the static main method just to print &quot;hello world&quot;. Kotlin tries to simplify things and decrease the amount of code you need to write."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1576567762, "post_id": 59365643, "comment_id": 104931711, "body": "You don&#39;t even need <code>args: Array&lt;String&gt;</code> if you don&#39;t use them."}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1576568533, "post_id": 59365643, "comment_id": 104932047, "body": "Do you build the jar using Gradle or IntelliJ IDEA artifact?"}, {"owner": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "edited": false, "score": 0, "creation_date": 1576568591, "post_id": 59365643, "comment_id": 104932077, "body": "@CrazyCoder artifact via Idea"}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1576568674, "post_id": 59365643, "comment_id": 104932119, "body": "Try Gradle instead, building artifact from IDEA may be complicated because of the included jars order which may override the manifest file. See <a href=\"https://stackoverflow.com/a/54894502/104891\">stackoverflow.com/a/54894502/104891</a>. See also <a href=\"https://stackoverflow.com/a/42200519/104891\">stackoverflow.com/a/42200519/104891</a> and <a href=\"https://stackoverflow.com/a/45169655/104891\">stackoverflow.com/a/45169655/104891</a>."}, {"owner": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "edited": false, "score": 0, "creation_date": 1576570234, "post_id": 59365643, "comment_id": 104932800, "body": "@CrazyCoder is it Gradle-&gt;Tasks-&gt;Build-&gt;build ? it says A problem was found with the configuration of task &#39;:startScripts&#39;. &gt; No value has been specified for property &#39;mainClassName&#39;."}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1576570537, "post_id": 59365643, "comment_id": 104932938, "body": "To build a proper jar with dependencies using Gradle you will need to adjust the script, see <a href=\"https://medium.com/@preslavrachev/kotlin-basics-create-executable-kotlin-jars-using-gradle-d17e9a8384b9\" rel=\"nofollow noreferrer\">medium.com/@preslavrachev/&hellip;</a>. Or check <a href=\"https://stackoverflow.com/questions/26469365/building-a-self-executable-jar-with-gradle-and-kotlin\" title=\"building a self executable jar with gradle and kotlin\">stackoverflow.com/questions/26469365/&hellip;</a> with the shadow jar example."}], "tags": [], "owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "is_accepted": true, "score": 6, "last_activity_date": 1602719532, "last_edit_date": 1602719532, "creation_date": 1576538864, "answer_id": 59365643, "question_id": 59365267, "link": "https://stackoverflow.com/questions/59365267/intellij-idea-how-to-specify-main-class-in-kotlin/59365643#59365643", "title": "IntelliJ IDEA: How to specify main class in Kotlin?", "body": "<p>In Kotlin language entry point is not a method inside the class (a class with the <code>Kt</code> suffix in the name is generated automatically from a file). See <a href=\"https://kotlinlang.org/docs/tutorials/getting-started.html\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n<p>Your code inside the <code>MovieQuizBackend.kt</code> file needs to be changed to the following:</p>\n<pre><code>fun main(args : Array&lt;String&gt;) {\n    Server()\n}\n</code></pre>\n<p>Just remove the <code>class MovieQuizBackend {</code> and <code>}</code> at the end.</p>\n<p>You can even omit <code>args</code> if you don't plan to pass any:</p>\n<pre><code>fun main() {\n    Server()\n}\n</code></pre>\n<p>Another option is to use <code>@JvmStatic</code> annotation inside the <code>companion object</code>:</p>\n<pre><code>class MovieQuizBackend {\n    companion object {\n        @JvmStatic fun main(args : Array&lt;String&gt;) {\n            Server()\n        }\n    }\n}\n</code></pre>\n<p>Note that this way the main class is named just <code>MovieQuizBackend</code> instead of <code>MovieQuizBackendKt</code>, so you will need to change it in <code>build.gradle</code>:</p>\n<pre><code>jar {\n    manifest {\n        attributes 'Main-Class': 'MovieQuizBackend'\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 2976267, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100000541356730/picture?type=large", "display_name": "Vlad Alexeev", "link": "https://stackoverflow.com/users/2976267/vlad-alexeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6906, "favorite_count": 1, "accepted_answer_id": 59365643, "answer_count": 1, "score": 2, "last_activity_date": 1602719532, "creation_date": 1576536129, "last_edit_date": 1576540955, "question_id": 59365267, "link": "https://stackoverflow.com/questions/59365267/intellij-idea-how-to-specify-main-class-in-kotlin", "title": "IntelliJ IDEA: How to specify main class in Kotlin?", "body": "<p>I try to build a jar with Intellij Idea with Kotlin Gradle project.\nIdea doesn't see my main class when I try to configure Artifact</p>\n\n<p>here's my Gradle : </p>\n\n<pre><code>plugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.60'\n    id 'application'\n}\ngroup 'org.vladdrummer'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin/'\n}\n\njar {\n    manifest {\n        attributes 'Main-Class': 'MovieQuizBackendKt'\n    }\n}\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n    compile \"com.sparkjava:spark-kotlin:1.0.0-alpha\"\n    implementation 'com.google.code.gson:gson:2.8.2'\n    runtime 'mysql:mysql-connector-java:5.1.34'\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>Here's structure :</p>\n\n<p><a href=\"https://i.stack.imgur.com/EX3EP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EX3EP.png\" alt=\"structure\"></a></p>\n\n<p>Here's main class :</p>\n\n<pre><code>class MovieQuizBackend {\n\n    fun main(args: Array&lt;String&gt;) {\n        Server()\n    }\n}\n</code></pre>\n"}, {"tags": ["firebase", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 1, "creation_date": 1576539471, "post_id": 59365128, "comment_id": 104925298, "body": "There are too many variables in here. Can you reproduce the problem with a hardcoded value for <code>reftime</code>? So something like <code>FirebaseDatabase.getInstance()         .reference         .child(&quot;Ev&quot;)         .equalTo(&quot;TheValueOfRefTime&quot;)</code>. If you can reproduce with that, please edit your question to include the simplified code."}, {"owner": {"reputation": 23, "user_id": 11052657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0sie.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/11052657/george"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1576542933, "post_id": 59365128, "comment_id": 104926022, "body": "edited, hope is more clear, I know that recommended reference for time should be with timestamp, tried also with timestamp same result.Also without querying startAt(time).endAt(time) recycle gets populated.  So looks like the problem stands on the query, but I don&#39;t understand what is wrong, and why suddenly stopped working"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1576543233, "post_id": 59365128, "comment_id": 104926087, "body": "There&#39;s still a lot of string concatenation going on. If the problem is in your query, you should be able to reproduce it with hard-coded strings. If you can&#39;t reproduce it that way, the problem is probably in the rest of your code. Please also see <a href=\"http://stackoverflow.com/help/mcve\">how to create a minimal, complete, verifiable example</a>."}, {"owner": {"reputation": 23, "user_id": 11052657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0sie.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/11052657/george"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1576544901, "post_id": 59365128, "comment_id": 104926445, "body": "Frank van Puffelen thank you for advice, is hard the code to be interpreted my I apologies for that. Anyway I fix-it,It was the query, was missing orderBychild() field, most probable I mistakenly deleted otherwise cannot explain-it :))"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 11052657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0sie.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/11052657/george"}, "is_accepted": true, "score": 0, "last_activity_date": 1576545148, "creation_date": 1576545148, "answer_id": 59366317, "question_id": 59365128, "link": "https://stackoverflow.com/questions/59365128/firebase-query-equalto-or-startat-endat-stop-working/59366317#59366317", "title": "Firebase query equalTo() or startAt().endAt() stop working", "body": "<p>I fix-it,It was the query, was missing \"orderBychild()\" field, most probable I mistakenly deleted otherwise cannot explain-it :))</p>\n"}], "owner": {"reputation": 23, "user_id": 11052657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0sie.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/11052657/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59366317, "answer_count": 1, "score": 0, "last_activity_date": 1576545148, "creation_date": 1576535090, "last_edit_date": 1576543488, "question_id": 59365128, "link": "https://stackoverflow.com/questions/59365128/firebase-query-equalto-or-startat-endat-stop-working", "title": "Firebase query equalTo() or startAt().endAt() stop working", "body": "<p>I already tried suggestions from other posts but no success. \nI just run into an issue,I got the following code which displays data from Firebase database when user clicks on a specific date.If I comment out (startAt(),endAt()), the recycler gets populated with all data, when I add equalTo() or startAt().endAt()) recycler does not get populated.\nThe code before was working normally, just recently stopped working and I have no clue why.\nThe code looks like this:\nBellow is the adapter:</p>\n\n<pre><code>fun calendarAdapt(options:FirebaseRecyclerOptions&lt;ModelCalendar&gt;,dataref:  \n DatabaseReference,context: Context):FirebaseRecyclerAdapter&lt;ModelCalendar,CalendHold&gt;{\n    return object :FirebaseRecyclerAdapter&lt;ModelCalendar,CalendHold&gt;(options){\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CalendHold {\n            return   \n CalendHold(LayoutInflater.from(parent.context).inflate(R.layout.list_row_calendar,parent,false))\n        }\n        override fun onBindViewHolder(holder: CalendHold, positionc: Int, modelc: ModelCalendar) \n{\n\n            val postkeyC= getRef(positionc).key\n            dataref.child(postkeyC!!).addValueEventListener(object:ValueEventListener{\n                override fun onDataChange(dataSnapshot: DataSnapshot) {\n                    holder.bindlogC(modelc)\n                 }\n                override fun onCancelled(p0: DatabaseError) {\n                }\n            })\n        }\n    }\n}\n</code></pre>\n\n<p>This is the Query:</p>\n\n<pre><code> fun query2(cont: LifecycleOwner,selected_date:String):FirebaseRecyclerOptions&lt;ModelCalendar&gt;{\n    val queryy = FirebaseDatabase.getInstance()\n        .reference\n        .child(\"Ev\")\n        .startAt(selected_date)\n         .endAt(selected_date)\n\n    return FirebaseRecyclerOptions.Builder&lt;ModelCalendar&gt;()\n        .setQuery(queryy,ModelCalendar::class.java)\n        .setLifecycleOwner(cont)\n        .build()\n }\n</code></pre>\n\n<p>Here I apply the adaptor:</p>\n\n<pre><code>  mDb = FirebaseDatabase.getInstance().reference.child(\"Ev\")\nval c = Calendar.getInstance()\n    val year2 = c.get(Calendar.YEAR)\n    val month2 = c.get(Calendar.MONTH)\n    val day2 = c.get(Calendar.DAY_OF_MONTH)\n    val dayd= checkDigit(day2)\n    val monthd= checkDigit(month2+1)\n    val datetoday = java.lang.StringBuilder()\n        .append(dayd)\n        .append(\"-\")\n        .append(monthd)\n        .append(\"-\")\n        .append(year2)\n    calendinf(datetoday.toString())\n    calendarid.setOnDateChangeListener { view, year, month, dayOfMonth -&gt;\n        val month = checkDigit(month+1)\n        val day = checkDigit(dayOfMonth)\n        val datesel =StringBuilder()\n            .append(day)\n            .append(\"-\")\n            .append(month)\n            .append(\"-\")\n            .append(year)\n        calendinf(datesel.toString())\n         }\n}\n    private fun calendinf(selected_date:String){\n    val options = Queryess().query2(this,selected_date)\n    val adaptorC = Adaptall().calendarAdapt(options, mDb,this)\n    calerec!!.adapter=adaptorC!!\n}\n</code></pre>\n"}, {"tags": ["kotlin", "android-intent"], "comments": [{"owner": {"reputation": 1505, "user_id": 8903497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdf3cc66b70436f31fd867ec4c1e7a6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Shaw", "link": "https://stackoverflow.com/users/8903497/chris-shaw"}, "edited": false, "score": 0, "creation_date": 1576536024, "post_id": 59364832, "comment_id": 104924398, "body": "I don&#39;t think you can force the activity to restart in that way - that&#39;s not how the lifecycle works. Why do you need to force <code>onCreate</code> again? If there&#39;s specific code you need to run, then consider moving it to <code>onResume</code> or another lifecycle method."}], "answers": [{"comments": [{"owner": {"reputation": 56, "user_id": 11271967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZssB.jpg?s=128&g=1", "display_name": "Captain Allergy", "link": "https://stackoverflow.com/users/11271967/captain-allergy"}, "edited": false, "score": 0, "creation_date": 1576752667, "post_id": 59370923, "comment_id": 105003813, "body": "Did this solve your question? If so, please mark this answer as accepted. If not, please provide more context."}], "tags": [], "owner": {"reputation": 56, "user_id": 11271967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZssB.jpg?s=128&g=1", "display_name": "Captain Allergy", "link": "https://stackoverflow.com/users/11271967/captain-allergy"}, "is_accepted": true, "score": 0, "last_activity_date": 1576573982, "creation_date": 1576573982, "answer_id": 59370923, "question_id": 59364832, "link": "https://stackoverflow.com/questions/59364832/kotlin-activity-restart/59370923#59370923", "title": "Kotlin activity restart", "body": "<p><a href=\"https://i.stack.imgur.com/bYen7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bYen7.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the offical <a href=\"https://developer.android.com/guide/components/activities/activity-lifecycle\" rel=\"nofollow noreferrer\">documentation</a> of the lifecycle of an app. If you finish an activity you can only restart that activity by creating a new instance of it. If you want to reuse it you should only pause that activty so you can easily resume that same instance of the activity (as Chris Shaw already mentioned).</p>\n"}], "owner": {"reputation": 85, "user_id": 5929213, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/934f8bec2da7f3634b7a22a676e43475?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5929213/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 59370923, "answer_count": 1, "score": 0, "last_activity_date": 1576573982, "creation_date": 1576533411, "question_id": 59364832, "link": "https://stackoverflow.com/questions/59364832/kotlin-activity-restart", "title": "Kotlin activity restart", "body": "<p>How to restart the onCreate after coming back from another activity?\nUsing below to \n    val intent = Intent(this, WritePage::class.java)\n    startActivity(intent)</p>\n\n<p>When im finished</p>\n\n<blockquote>\n  <p>finish()</p>\n</blockquote>\n\n<p>So i\u2019m back to the previous page. How can i restart this page from onCreate?</p>\n"}, {"tags": ["android", "kotlin", "android-listview", "android-arrayadapter", "android-adapter"], "comments": [{"owner": {"reputation": 4375, "user_id": 2191256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac211028c226a48ea0232b2600346d4?s=128&d=identicon&r=PG", "display_name": "vilpe89", "link": "https://stackoverflow.com/users/2191256/vilpe89"}, "edited": false, "score": 0, "creation_date": 1576533294, "post_id": 59364242, "comment_id": 104923450, "body": "Post your listview_item.xml"}], "answers": [{"comments": [{"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576530842, "post_id": 59364306, "comment_id": 104922492, "body": "I don&#39;t want to use position numbers. Strings are easier in this scenario as some names will need to change in the future"}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576530979, "post_id": 59364306, "comment_id": 104922541, "body": "I don&#39;t understand your comment. You have an array of strings: <code>var array = arrayOf(&quot;Melbourne&quot;, &quot;Vienna&quot;, ...)</code>. Therefore, <code>array[0]</code> is &quot;Melbourne&quot; and <code>array[1]</code> is &quot;Vienna&quot;. Indexing into an array is the whole point of an array. Why don&#39;t you want to do that?"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576531046, "post_id": 59364306, "comment_id": 104922563, "body": "It&#39;s a little suspicious that the array variable is read-write. Maybe the length can change, too, which would create issues if the array changes, but isn&#39;t updated in the adapter immediately."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576531215, "post_id": 59364306, "comment_id": 104922617, "body": "Could use <code>val tappedString = parent.getItemAtPosition(position).toString()</code> to avoid the risk of non-synced data."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576531281, "post_id": 59364306, "comment_id": 104922636, "body": "The order of the items will need to change at some point. <code>when (position) {             0 -&gt; {</code> etc. is what I used before. Why isn&#39;t it simple to do that but with <code>Strings</code>? That&#39;s what are used as the data."}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1576531407, "post_id": 59364306, "comment_id": 104922703, "body": "When the order of items changes, you&#39;ll have to interact with the adapter in some way (either by calling e.g. <code>add()</code> or <code>clear()</code> etc along with a <code>notifyDataSetChanged()</code> or by creating a whole new <code>ArrayAdapter</code> and re-assigning it to the list). Then your <code>OnItemClickListener</code> should reflect those changes too."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576531578, "post_id": 59364306, "comment_id": 104922766, "body": "I know but I don&#39;t mean during runtime. I&#39;m thinking about code maintenance. This can be done with a <code>when</code> block."}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 2, "creation_date": 1576532205, "post_id": 59364306, "comment_id": 104922984, "body": "@MacaronLover I think there&#39;s a fundamental misunderstanding here. If you change the order of your <code>array</code>, the posted answer will just work."}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1576532287, "post_id": 59364306, "comment_id": 104923021, "body": "<code>position</code> is what it says: the numerical position of each element in the list. Whether your data is a set of <code>String</code> or <code>Object</code> or anything else, there will always be a <i>first</i> thing, and then a <i>second</i> thing, etc."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576533447, "post_id": 59364306, "comment_id": 104923519, "body": "Can the <code>position</code> be something else?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576533649, "post_id": 59364306, "comment_id": 104923586, "body": "I want to check by <code>String</code> name, not position number. With long lists, it&#39;s much easier to check by name rather than trying to rember what position a specific <code>String</code> is."}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 2, "creation_date": 1576534363, "post_id": 59364306, "comment_id": 104923824, "body": "@MacaronLover are you saying you want to do something like <code>if (tapped == &quot;Vienna&quot;)</code> ? Then you could do <code>if (array[position] == &quot;Vienna&quot;)</code>. You don&#39;t have to check <code>if (position == 1)</code>."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576539028, "post_id": 59364306, "comment_id": 104925187, "body": "@BenP. Cool but why is it when I use <code>getString(R.string.vienna)</code> I get this error? <code>Attempt to invoke virtual method &#39;android.content.res.Resources android.content.Context.getResources()&#39; on a null object reference</code>"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576595776, "post_id": 59364306, "comment_id": 104946533, "body": "Just to clarify, <code>if (array[position] == &quot;Vienna&quot;)</code> is the solution"}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576600872, "post_id": 59364306, "comment_id": 104949283, "body": "@MacaronLover I&#39;ve updated my answer with information based on this discussino."}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1576600372, "last_edit_date": 1576600372, "creation_date": 1576530439, "answer_id": 59364306, "question_id": 59364242, "link": "https://stackoverflow.com/questions/59364242/kotlin-listview-item-click-based-on-string/59364306#59364306", "title": "Kotlin ListView item click based on String", "body": "<p>Inside <code>onItemClick()</code>, the <code>position</code> parameter is the position in the data set that was tapped. So you ought to be able to index into your array to get the tapped string:</p>\n\n<pre><code>val tappedString = array[position] // will be \"Vienna\" when position is 1\n</code></pre>\n\n<p>If you want to verify that the clicked item has a certain value, you can similarly do this:</p>\n\n<pre><code>if (array[position] == \"Vienna\") {\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576533613, "post_id": 59364857, "comment_id": 104923572, "body": "What about checking if the clicked item is a specific <code>String</code> name?"}, {"owner": {"reputation": 4375, "user_id": 2191256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac211028c226a48ea0232b2600346d4?s=128&d=identicon&r=PG", "display_name": "vilpe89", "link": "https://stackoverflow.com/users/2191256/vilpe89"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1576534008, "post_id": 59364857, "comment_id": 104923710, "body": "Does this help now?"}], "tags": [], "owner": {"reputation": 4375, "user_id": 2191256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac211028c226a48ea0232b2600346d4?s=128&d=identicon&r=PG", "display_name": "vilpe89", "link": "https://stackoverflow.com/users/2191256/vilpe89"}, "is_accepted": false, "score": 1, "last_activity_date": 1576533721, "last_edit_date": 1576533721, "creation_date": 1576533552, "answer_id": 59364857, "question_id": 59364242, "link": "https://stackoverflow.com/questions/59364242/kotlin-listview-item-click-based-on-string/59364857#59364857", "title": "Kotlin ListView item click based on String", "body": "<p>If you don't want to use <code>position</code> and <code>array</code> then you can get the text from the View.</p>\n\n<p>Try this:</p>\n\n<pre><code>override fun onItemClick(parent: AdapterView&lt;*&gt;, view: View,\n                        position: Int, id: Long) {\n    val textClicked = view.findViewById&lt;TextView&gt;(R.id.listitem_title).text.toString()\n    when (textClicked) {\n        \"something1\" -&gt; TODO()\n        \"something2\" -&gt; TODO()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 59364306, "answer_count": 2, "score": -1, "last_activity_date": 1576600372, "creation_date": 1576530132, "last_edit_date": 1576533536, "question_id": 59364242, "link": "https://stackoverflow.com/questions/59364242/kotlin-listview-item-click-based-on-string", "title": "Kotlin ListView item click based on String", "body": "<p>Is there a way to check which string was clicked within a simple <code>ListView</code>? I want something different to happen for each item in this <code>ListView</code> (when clicked) but I've not seen any relevant/helpful tutorials. I understand that a <code>when</code> block would be necessary for this but unsure of the best way to implement it.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    var array = arrayOf(\"Melbourne\", \"Vienna\", \"Vancouver\", \"Toronto\", \"Calgary\", \"Adelaide\", \"Perth\", \"Auckland\", \"Helsinki\", \"Hamburg\", \"Munich\", \"New York\", \"Sydney\", \"Paris\", \"Cape Town\", \"Barcelona\", \"London\", \"Bangkok\")\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val adapter = ArrayAdapter(this,\n                R.layout.listview_item, array)\n\n        val listView:ListView = findViewById(R.id.listview_1)\n        listView.setAdapter(adapter)\n\n        listView.onItemClickListener = object : OnItemClickListener {\n\n            override fun onItemClick(parent: AdapterView&lt;*&gt;, view: View,\n                            position: Int, id: Long) {\n                    ????\n            }\n        }\n\n    }\n} \n</code></pre>\n\n<p><strong>listview_item.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\n    android:id=\"@+id/relativelayout_listitem\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"top\"\n    android:baselineAligned=\"false\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;TextView android:id=\"@+id/listitem_title\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:textAppearance=\"?android:attr/textAppearanceMedium\"\n        android:ellipsize=\"marquee\"\n        android:layout_below=\"@id/ll_title\"\n        android:fadingEdge=\"horizontal\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n"}, {"tags": ["string", "function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12546848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3115c8cbe93fb6bd76d4a854da9b56?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12546848/daniel"}, "edited": false, "score": 0, "creation_date": 1576587174, "post_id": 59364158, "comment_id": 104941647, "body": "Thank you very much. I wish you the best. +100500 to your Karma. Yes, i just didn&#39;t understand how to write this function correctly. You opened my eyes, now I got it, thank you."}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": true, "score": 0, "last_activity_date": 1576529685, "creation_date": 1576529685, "answer_id": 59364158, "question_id": 59363985, "link": "https://stackoverflow.com/questions/59363985/how-to-make-fun-string-reverce-kotlin-working/59364158#59364158", "title": "How to make fun String.reverce() Kotlin working?", "body": "<p>I'm guessing a bit at what you're trying to do.</p>\n\n<p>It seems like you wanted to call the <code>reversed()</code> function on your string. But the syntax you used is for <em>defining</em> a function, not <em>calling</em> it. You also have an extra call to <code>return</code> in there that will end your program before it prints the reversed string.</p>\n\n<p>First of all, a String is immutable. When you reverse it, you are creating a new String, so you must assign it to a variable. However, you defined <code>playerName</code> as a read-only <code>val</code>, so it cannot be changed. So the first step is to change it to <code>var</code>.</p>\n\n<p>Then to get a reversed version of your String, you can use <code>playerName.reversed()</code> and assign the result back to the variable. So your final code looks like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    var playerName = \"Partisan\"\n\n    println(playerName)\n\n    playerName = playerName.reversed()\n\n    println(playerName)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12546848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3115c8cbe93fb6bd76d4a854da9b56?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12546848/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59364158, "answer_count": 1, "score": -3, "last_activity_date": 1576529685, "creation_date": 1576528718, "question_id": 59363985, "link": "https://stackoverflow.com/questions/59363985/how-to-make-fun-string-reverce-kotlin-working", "title": "How to make fun String.reverce() Kotlin working?", "body": "<p>please I cant't understand what im doing wrong, Im new at programming. I want to print \"player Name\" and then print it in reverce. and it prints only normal Name. Please help. Thank you</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\nval playerName = \"Partisan\"\n\nprintln(playerName)\n\nfun String.reverced(playerName:String) = playerName\nreturn\nprint(playerName)\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1576527970, "post_id": 59363775, "comment_id": 104921395, "body": "Thanks Doug, last question, if I have more than one exception thrown inside this method, should be ok to wrap them all inside Exception, or should I catch multiple ones there with the name of the exact exception ?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1576528653, "post_id": 59363775, "comment_id": 104921679, "body": "Depends on what you need to know about or do with each exception.  Do whatever suits you, just like any other try/catch."}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1576528729, "post_id": 59363775, "comment_id": 104921710, "body": "thanks, it justs needs to block the user and let a friendly message, I think with Exception will be ok, since if one of the two fails, the other one does not complete and at that point I will have just 1 exception thrown"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1576528766, "post_id": 59363775, "comment_id": 104921729, "body": "It lets the user a friendly message and I log the error to Firebase crashlytics to better understand what is happening"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 2, "last_activity_date": 1576527750, "creation_date": 1576527750, "answer_id": 59363775, "question_id": 59363657, "link": "https://stackoverflow.com/questions/59363657/how-to-return-an-exception-from-a-method-called-with-await/59363775#59363775", "title": "How to return an exception from a method called with .await()", "body": "<p>Just use try/catch like you would with any other code:</p>\n\n<pre><code>try {\n    val result = FirebaseInstanceId.getInstance().instanceId.await()\n    user.deviceToken = result.token\n    FirebaseFirestore.getInstance().collection(\"user\").document(user.uid).set(user).await()\n    return Resource.success(true)\n}\ncatch (e: Exception) {\n    // handle the error here\n}\n</code></pre>\n\n<p>Or you can put the try/catch around the call to <code>saveUserToken</code>.  In either case, if a suspend fun inside the try catch yields an error, your catch will trigger.</p>\n\n<p>I suggest reading the documentation on <a href=\"https://kotlinlang.org/docs/reference/coroutines/exception-handling.html\" rel=\"nofollow noreferrer\">exception handling with Kotlin coroutines</a>.</p>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 59363775, "answer_count": 1, "score": 2, "last_activity_date": 1576560621, "creation_date": 1576527212, "last_edit_date": 1576560621, "question_id": 59363657, "link": "https://stackoverflow.com/questions/59363657/how-to-return-an-exception-from-a-method-called-with-await", "title": "How to return an exception from a method called with .await()", "body": "<p>I'm implementing with the new google services coroutines extension functions to return an exception from an asynchronous call</p>\n\n<pre><code>suspend fun saveUserToken(user: User): Resource&lt;Boolean&gt; {\n    val result = FirebaseInstanceId.getInstance().instanceId.await()\n    user.deviceToken = result.token\n    FirebaseFirestore.getInstance().collection(\"user\").document(user.uid).set(user).await()\n    return Resource.success(true)\n}\n</code></pre>\n\n<p>Here I do two asynchronous operations, first one retrieves the user device token, and the second one stores that device token + user data into Firestore</p>\n\n<p>Now my question is.</p>\n\n<p><strong>How do I know or return an exception from these two methods if one is throw ?</strong> </p>\n\n<p>Since is a Task, the exception should return in a form of the same object, I have read the .await() method to see how it handles the exceptions</p>\n\n<pre><code>public suspend fun &lt;T&gt; Task&lt;T&gt;.await(): T {\n    // fast path\n    if (isComplete) {\n        val e = exception\n        return if (e == null) {\n            if (isCanceled) {\n                throw CancellationException(\"Task $this was cancelled normally.\")\n            } else {\n                result\n            }\n        } else {\n            throw e\n        }\n    }\n\n    return suspendCancellableCoroutine { cont -&gt;\n        addOnCompleteListener {\n            val e = exception\n            if (e == null) {\n                if (isCanceled) cont.cancel() else cont.resume(result)\n            } else {\n                cont.resumeWithException(e)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here are two types of exception, one is the task exception from where its called (this is the exception I want to catch in my first code block) and the second is the CancellationException which triggers when the coroutine is cancelled</p>\n"}, {"tags": ["java", "android", "kotlin", "android-espresso"], "comments": [{"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576593223, "post_id": 59363466, "comment_id": 104945140, "body": "I do not understand what is your benefit of using so much code if you can just do <code>onView(...).check(matches(isDisplayed()))</code>. Please explain."}, {"owner": {"reputation": 387, "user_id": 5767883, "user_type": "registered", "accept_rate": 6, "profile_image": "https://lh6.googleusercontent.com/-zsC2xhUIyZM/AAAAAAAAAAI/AAAAAAAAAmQ/3llBcWvxsgk/photo.jpg?sz=128", "display_name": "Ilya G", "link": "https://stackoverflow.com/users/5767883/ilya-g"}, "reply_to_user": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576602831, "post_id": 59363466, "comment_id": 104950202, "body": "@ror I don&#39;t want to fail assertion. I&#39;m writing e2e tests and would like to do certain actions if element displayed or not. If I do your way it will just do <code>matches</code> and will fail or pass it based on it"}, {"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 1, "creation_date": 1576695719, "post_id": 59363466, "comment_id": 104986160, "body": "Understood. Then I&#39;d say &quot;why not&quot; to your 2nd sample, except that you need to use Matcher&lt;View&gt; instead of Matcher in your argument."}, {"owner": {"reputation": 387, "user_id": 5767883, "user_type": "registered", "accept_rate": 6, "profile_image": "https://lh6.googleusercontent.com/-zsC2xhUIyZM/AAAAAAAAAAI/AAAAAAAAAmQ/3llBcWvxsgk/photo.jpg?sz=128", "display_name": "Ilya G", "link": "https://stackoverflow.com/users/5767883/ilya-g"}, "reply_to_user": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576784482, "post_id": 59363466, "comment_id": 105019293, "body": "Thank you. It worked :) . I thought I need somehow create a custom matcher for that"}], "owner": {"reputation": 387, "user_id": 5767883, "user_type": "registered", "accept_rate": 6, "profile_image": "https://lh6.googleusercontent.com/-zsC2xhUIyZM/AAAAAAAAAAI/AAAAAAAAAmQ/3llBcWvxsgk/photo.jpg?sz=128", "display_name": "Ilya G", "link": "https://stackoverflow.com/users/5767883/ilya-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576526219, "creation_date": 1576526219, "question_id": 59363466, "link": "https://stackoverflow.com/questions/59363466/espresso-custom-matcher", "title": "Espresso custom matcher", "body": "<p>trying to create custom matcher that will accept any matchers. I have now:</p>\n\n<pre><code>fun isDisplayed(id: Int): Boolean {\n        fun ViewInteraction.isDisplayed(): Boolean {\n            try {\n                check(ViewAssertions.matches(ViewMatchers.isDisplayed()))\n                return true\n            } catch (e: NoMatchingViewException) {\n                return false\n            }\n        }\n        return Espresso.onView(ViewMatchers.withContentDescription(id)).isDisplayed()\n    }\n</code></pre>\n\n<p>But my goal to create some kind of generic matcher that will accept all matchers similar to:</p>\n\n<pre><code>fun isDisplayed(matcher: Matcher): Boolean {\n        fun ViewInteraction.isDisplayed(): Boolean {\n            try {\n                check(ViewAssertions.matches(ViewMatchers.isDisplayed()))\n                return true\n            } catch (e: NoMatchingViewException) {\n                return false\n            }\n        }\n        return Espresso.onView(matchers).isDisplayed()\n    }\n</code></pre>\n\n<p>Do I need to create custom matcher or generics in order to achieve what I want?</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "transactions"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1576531893, "post_id": 59363642, "comment_id": 104922868, "body": "Thanks - how could I modify the test to rectify these issues?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1576534429, "post_id": 59363642, "comment_id": 104923852, "body": "If you want to prove that it is transactional, there is not much you can do, since the code can&#39;t possibly throw an exception causing a rollback."}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1576607317, "post_id": 59363642, "comment_id": 104952241, "body": "If it&#39;s not a runtime exception, what kind of exception is being thrown by the <code>mockk</code> + <code>Exception()</code> combination?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1576608639, "post_id": 59363642, "comment_id": 104952769, "body": "Well, it&#39;s not a runtie exception since it&#39;s an instance of Exception, and not not instance of RuntimeException. But even if it was, it&#39;s thrown by your mock repository, but <b>caught</b> by your service method. So the service method doesn&#39;t throw any exception."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 0, "last_activity_date": 1576527110, "creation_date": 1576527110, "answer_id": 59363642, "question_id": 59363291, "link": "https://stackoverflow.com/questions/59363291/transactional-in-spring-boot-i-believe-prerequisites-are-covered-public-ext/59363642#59363642", "title": "@Transactional in Spring Boot - I believe prerequisites are covered (public, external invocation), but testing indicates no transaction", "body": "<p>This test doesn't say anything about your component not being transactional.</p>\n\n<p>First, you create an instance yourself rather than using the one created by Spring. So Spring knows nothing about this instance, and can't possibly warp it into a transactional proxy.</p>\n\n<p>Second, the component doesn't throw any runtime exception, So Spring doesn't rollback the transaction.</p>\n"}], "owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576527110, "creation_date": 1576525410, "question_id": 59363291, "link": "https://stackoverflow.com/questions/59363291/transactional-in-spring-boot-i-believe-prerequisites-are-covered-public-ext", "title": "@Transactional in Spring Boot - I believe prerequisites are covered (public, external invocation), but testing indicates no transaction", "body": "<p>I'm trying to get a Kotlin function to operate transactionally in Spring Boot, and I've looked at several sources for information, such as <a href=\"https://codete.com/blog/5-common-spring-transactional-pitfalls/\" rel=\"nofollow noreferrer\">https://codete.com/blog/5-common-spring-transactional-pitfalls/</a> and <a href=\"https://stackoverflow.com/questions/3423972/spring-transaction-method-call-by-the-method-within-the-same-class-does-not-wo\">Spring @Transaction method call by the method within the same class, does not work?</a>. I believe I have the prerequisites necessary for the <code>@Transactional</code> annotation to work - the function is public and being invoked externally, if my understanding is correct. My code currently looks like this:</p>\n\n<pre><code>interface CreateExerciseInstance {\n    operator fun invoke(input: CreateExerciseInstanceInput): OpOutcome&lt;CreateExerciseInstanceOutput&gt;\n}\n\n@Component\nclass CreateExerciseInstanceImpl constructor(\n    private val exerciseInstanceRepository: ExerciseInstanceRepository, // @Repository\n    private val activityInstanceRepository: ActivityInstanceRepository, // @Repository\n    private val exerciseInstanceStepRepository: ExerciseInstanceStepRepository // @Repository\n) : CreateExerciseInstance {\n\n    @Suppress(\"TooGenericExceptionCaught\")\n    @Transactional\n    override fun invoke(input: CreateExerciseInstanceInput): OpOutcome&lt;CreateExerciseInstanceOutput&gt; {\n        ...\n        val exerciseInstanceRecord = ... // no in-place modification of repository data\n        val activityInstanceRecords = ...\n        val exerciseInstanceStepRecords = ...\n\n        return try {\n            exerciseInstanceRepository.save(exerciseInstanceRecord)\n            activityInstanceRepository.saveAll(activityInstanceRecords)\n            exerciseInstanceStepRepository.saveAll(exerciseInstanceStepRecords)\n            Outcome.Success(...)\n        } catch (e: Exception) {\n            Outcome.Failure(...)\n        }\n    }\n\n}\n</code></pre>\n\n<p>My test currently looks like this:</p>\n\n<pre><code>@ExtendWith(SpringExtension::class)\n@SpringBootTest\n@Transactional\nclass CreateExerciseInstanceTest {\n    @Autowired\n    private lateinit var exerciseInstanceRepository: ExerciseInstanceRepository\n    @Autowired\n    private lateinit var exerciseInstanceStepRepository: ExerciseInstanceStepRepository\n    @Autowired\n    private lateinit var activityInstanceRepository: ActivityInstanceRepository\n\n    @Test\n    fun `does not commit to exercise instance or activity repositories when exercise instance step repository throws exception`() {\n        ... // data setup\n\n        val exerciseInstanceStepRepository = mockk&lt;ExerciseInstanceStepRepository&gt;()\n        val exception = Exception(\"Something went wrong\")\n        every { exerciseInstanceStepRepository.save(any&lt;ExerciseInstanceStepRecord&gt;()) } throws exception\n\n        val createExerciseInstance = CreateExerciseInstanceImpl(\n            exerciseInstanceRepository = exerciseInstanceRepository,\n            activityInstanceRepository = activityInstanceRepository,\n            exerciseInstanceStepRepository = exerciseInstanceStepRepository\n        )\n        val outcome = createExerciseInstance(...)\n        assert(outcome is Outcome.Failure)\n\n        val exerciseInstances = exerciseInstanceRepository.findAll()\n        val activityInstances = activityInstanceRepository.findAll()\n        assertThat(exerciseInstances.count()).isEqualTo(0)\n        assertThat(activityInstances.count()).isEqualTo(0)\n    }\n}\n</code></pre>\n\n<p>The test fails with:</p>\n\n<pre><code>org.opentest4j.AssertionFailedError: \nExpecting:\n &lt;1&gt;\nto be equal to:\n &lt;0&gt;\nbut was not.\n</code></pre>\n\n<p>at <code>assertThat(exerciseInstances.count()).isEqualTo(0)</code>. Is the function actually non-public or being invoked internally? Have I missed some other prerequisite?</p>\n"}, {"tags": ["android", "kotlin", "webview", "geckoview"], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 7594134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hAANC5Hn32o/AAAAAAAAAAI/AAAAAAAAAuc/o12OIoZiFYc/photo.jpg?sz=128", "display_name": "Humxa Moghal", "link": "https://stackoverflow.com/users/7594134/humxa-moghal"}, "edited": false, "score": 2, "creation_date": 1576566464, "post_id": 59368968, "comment_id": 104931221, "body": "Thanx, i have solved it last night, nobody responded at that moment. Solution 1 worked for me"}], "tags": [], "owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "is_accepted": true, "score": 6, "last_activity_date": 1576565493, "creation_date": 1576565493, "answer_id": 59368968, "question_id": 59361844, "link": "https://stackoverflow.com/questions/59361844/failed-to-initialize-geckoruntime-geckoview-android/59368968#59368968", "title": "Failed to initialize GeckoRuntime | GeckoView | Android", "body": "<p>This exception will be thrown if there is already an active Gecko instance running. There are many ways to resolve this problem.</p>\n\n<p><strong>Solution 1:</strong> Get the default runtime for the given context.</p>\n\n<p>Change your code from</p>\n\n<pre><code>val runtime = GeckoRuntime.create(this)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>val runtime = GeckoRuntime.getDefault(this)\n</code></pre>\n\n<p><strong>Solution 2:</strong> Kill the process when exit app by finishing activity, add this code into your activity.</p>\n\n<pre><code>override fun onDestroy() {\n    Process.killProcess(Process.myPid())\n    super.onDestroy()\n}\n</code></pre>\n\n<p><strong>Solution 3:</strong> Only create a new instance if there is no active instance running</p>\n\n<pre><code>private fun setupGeckoView() {\n    if (geckoRuntime == null) {\n        geckoRuntime = GeckoRuntime.create(this)\n    }\n\n    geckoSession.open(geckoRuntime!!)\n    geckoView.setSession(geckoSession)\n    val url = String(Base64.decode(MYURL, Base64.DEFAULT))\n    geckoSession.loadUri(url)\n    geckoSession.progressDelegate = createProgressDelegate()\n    geckoSession.settings.allowJavascript = true\n}\n\ncompanion object {\n    var geckoRuntime: GeckoRuntime? = null\n}\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 7594134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hAANC5Hn32o/AAAAAAAAAAI/AAAAAAAAAuc/o12OIoZiFYc/photo.jpg?sz=128", "display_name": "Humxa Moghal", "link": "https://stackoverflow.com/users/7594134/humxa-moghal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 59368968, "answer_count": 1, "score": 2, "last_activity_date": 1576565493, "creation_date": 1576518423, "question_id": 59361844, "link": "https://stackoverflow.com/questions/59361844/failed-to-initialize-geckoruntime-geckoview-android", "title": "Failed to initialize GeckoRuntime | GeckoView | Android", "body": "<pre><code> private fun setupGeckoView() {\n        val runtime = GeckoRuntime.create(this) // crashes on this line\n        geckoSession.open(runtime)\n        geckoView.setSession(geckoSession)\n        val url = String(Base64.decode(MYURL, Base64.DEFAULT))\n        geckoSession.loadUri(url)\n        geckoSession.progressDelegate = createProgressDelegate()\n        geckoSession.settings.allowJavascript = true\n    }\n</code></pre>\n\n<blockquote>\n  <p>i call setUpGeckoView methon in onCreat() but when i click back and\n  reopen the app then app crashes with IllegalStateException saying\n  \"Failed to initialize GeckoRuntime. It works first time only crashed when i click back and then open app again\"</p>\n</blockquote>\n\n<p><strong>Logs are given below</strong></p>\n\n<pre><code> Process: arholding.kargoshop.mk, PID: 16444\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{arholding.kargoshop.mk/arholding.kargoshop.mk.SeckoActivity}: java.lang.IllegalStateException: Failed to initialize GeckoRuntime\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3447)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3594)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2146)\n        at android.os.Handler.dispatchMessage(Handler.java:107)\n        at android.os.Looper.loop(Looper.java:237)\n        at android.app.ActivityThread.main(ActivityThread.java:7762)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1047)\n     Caused by: java.lang.IllegalStateException: Failed to initialize GeckoRuntime\n        at org.mozilla.geckoview.GeckoRuntime.create(GeckoRuntime.java:458)\n        at org.mozilla.geckoview.GeckoRuntime.create(GeckoRuntime.java:333)\n        at arholding.kargoshop.mk.SeckoActivity.setupGeckoView(SeckoActivity.kt:23)\n        at arholding.kargoshop.mk.SeckoActivity.onCreate(SeckoActivity.kt:19)\n        at android.app.Activity.performCreate(Activity.java:7981)\n        at android.app.Activity.performCreate(Activity.java:7970)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1307)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\n</code></pre>\n"}, {"tags": ["android", "generics", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576516627, "post_id": 59361174, "comment_id": 104916669, "body": "You say it can accept any type of ViewHolder, but won&#39;t it throw a ClassCastException if you pass it anything that isn&#39;t a SwipeableViewHolder?"}, {"owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576518999, "post_id": 59361174, "comment_id": 104917797, "body": "@Tenfour04 . Yes you are correct. It can accept any RecyclerView.ViewHolder class of SwipeableViewHolder type. I have updated my post"}], "answers": [{"comments": [{"owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "edited": false, "score": 0, "creation_date": 1576517638, "post_id": 59361450, "comment_id": 104917185, "body": "No, you would think that though based on the error thrown though. I added the SwipeableViewHolder above for reference"}, {"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "reply_to_user": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "edited": false, "score": 0, "creation_date": 1576519006, "post_id": 59361450, "comment_id": 104917801, "body": "I copied and pasted your code into my IDE and I can&#39;t reproduce this issue. What class is <code>SwipeableViewHolder</code> nested inside of? Is <code>SwipeableAdapter</code> also defined in that class? I had to qualify the cast (like <code>FooActivity.SwipeableViewHolder</code>); do you have anything like that?"}, {"owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "edited": false, "score": 0, "creation_date": 1576519101, "post_id": 59361450, "comment_id": 104917840, "body": ".SwipeableViewHolder is inside of SwipeableAdapter"}, {"owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "edited": false, "score": 0, "creation_date": 1576522110, "post_id": 59361450, "comment_id": 104919085, "body": "Ben P, your comment about qualifying the cast led me in the right direction. It should be:  val viewHolder = holder as SwipeableAdapter&lt;T&gt;.SwipeableViewHolder. Thx."}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1576526477, "last_edit_date": 1576526477, "creation_date": 1576516797, "answer_id": 59361450, "question_id": 59361174, "link": "https://stackoverflow.com/questions/59361174/how-to-create-a-generic-recyclerview-adapter-with-kotlin/59361450#59361450", "title": "How to create a generic RecyclerView.Adapter with Kotlin", "body": "<p>Because <code>SwipeableViewHolder</code> is an <em>inner</em> class of <code>SwipeableAdapter</code> (which requires a type argument), you have to specify what the type argument for <code>SwipeableAdapter</code> is as part of your cast:</p>\n\n<pre><code>val viewHolder = holder as SwipeableAdapter&lt;*&gt;.SwipeableViewHolder\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 0, "last_activity_date": 1576525850, "creation_date": 1576525850, "answer_id": 59363388, "question_id": 59361174, "link": "https://stackoverflow.com/questions/59361174/how-to-create-a-generic-recyclerview-adapter-with-kotlin/59363388#59363388", "title": "How to create a generic RecyclerView.Adapter with Kotlin", "body": "<p>Since it only handles <code>SwipeableViewHolder</code> type ViewHolders, you should change the generic type bound. Then you don't even need to cast.</p>\n\n<pre><code>abstract class SwipeableAdapter&lt;T : SwipeableViewHolder&gt;(protected var mContext: Context) :\n        RecyclerView.Adapter&lt;T&gt;() {    \n\n    override fun onBindViewHolder(holder: T, position: Int) {\n\n            // just use holder since it is already known to be a SwipeableViewHolder\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 59361450, "answer_count": 2, "score": 0, "last_activity_date": 1576526477, "creation_date": 1576515715, "last_edit_date": 1576519816, "question_id": 59361174, "link": "https://stackoverflow.com/questions/59361174/how-to-create-a-generic-recyclerview-adapter-with-kotlin", "title": "How to create a generic RecyclerView.Adapter with Kotlin", "body": "<p>I created a Java class that extends RecyclerView.Adapter. It is generic and can accept any RecyclerView.ViewHolder class of SwipeableViewHolder type: Here is how its defined:</p>\n\n<pre><code>public abstract class SwipeableAdapter&lt;T extends RecyclerView.ViewHolder&gt; extends RecyclerView.Adapter&lt;T&gt; {\n\n     @Override\n    public void onBindViewHolder(T holder, int position) {\n        SwipeableViewHolder viewHolder = (SwipeableViewHolder) holder;\n\n        ...\n     }\n\n}\n</code></pre>\n\n<p>This all works fine. However, when I try to convert it to Kotlin, I get an error in the onBindViewHolder function:</p>\n\n<pre><code>abstract class SwipeableAdapter&lt;T : RecyclerView.ViewHolder&gt;(protected var mContext: Context) :\n        RecyclerView.Adapter&lt;T&gt;() {    \n\n    override fun onBindViewHolder(holder: T, position: Int) {\n\n            val viewHolder = holder as SwipeableViewHolder\n\n            ...\n    }\n\n}\n</code></pre>\n\n<p>Here is the SwipeableViewHolder class</p>\n\n<pre><code>open inner class SwipeableViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n        @BindView(R.id.text_roll) internal var text_1: TextView? = null\n        @BindView(R.id.text_trade) internal var text_2: TextView? = null\n        @BindView(R.id.text_delete) internal var text_2: TextView? = null\n\n        init {\n            ButterKnife.bind(this, itemView)\n        }\n    }\n</code></pre>\n\n<p>I get an error when I try to cast holder as SwipeableViewHolder. The error is: \"One type argument expected. Use SwipeableViewHolder&lt;*> if you don't want to pass type arguements\"</p>\n\n<p>I've tried so many different ways to implement this and just can't seem to figure it out.</p>\n\n<p>Android Studio version : 3.5.3\nKOtlin plugin compiler: 1.3</p>\n"}, {"tags": ["kotlin", "grpc", "grpc-java"], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 2690747, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/bSwg2.jpg?s=128&g=1", "display_name": "wz2b", "link": "https://stackoverflow.com/users/2690747/wz2b"}, "is_accepted": false, "score": 0, "last_activity_date": 1576514175, "creation_date": 1576514175, "answer_id": 59360742, "question_id": 59360741, "link": "https://stackoverflow.com/questions/59360741/compiling-grpc-with-both-kotlin-and-java-using-maven-various-packages-not-found/59360742#59360742", "title": "Compiling gRPC,with both Kotlin and Java using Maven (various packages not found)", "body": "<p>The answer it turns out is because of the order plugins execute.  Generally for kotlin-java hybrid projects you want to compile the kotlin first so that the java compiler knows how to find kotlin classes.  The problem is, if you do that the kotlin compiler doesn't see the protoc-generated java classes yet.  It's a circular dependency.</p>\n\n<p>It took me a while to figure it out, but to fix it you just have to tell the kotlin compiler where to find the protoc-generated <em>sources</em> like this:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;${project.build.directory}/generated-sources/protobuf/java/&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;${project.build.directory}/generated-sources/protobuf/grpc-java/&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n                ...\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>It took me entirely too long to figure that out, so I'm posting this as a self-answered question to perhaps save somebody else some time.\n  I saw a number of related questions but none exactly the same.  Good luck.</p>\n"}], "owner": {"reputation": 724, "user_id": 2690747, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/bSwg2.jpg?s=128&g=1", "display_name": "wz2b", "link": "https://stackoverflow.com/users/2690747/wz2b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576530899, "creation_date": 1576514175, "last_edit_date": 1576530899, "question_id": 59360741, "link": "https://stackoverflow.com/questions/59360741/compiling-grpc-with-both-kotlin-and-java-using-maven-various-packages-not-found", "title": "Compiling gRPC,with both Kotlin and Java using Maven (various packages not found)", "body": "<p>I have a mixed kotlin/java project and I wanted to add gRPC to it.  I configured the gRPC plugin as usual:</p>\n\n<pre><code>    &lt;extensions&gt;\n        &lt;extension&gt;\n            &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n        &lt;/extension&gt;\n    &lt;/extensions&gt;\n\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;protocArtifact&gt;\n                    com.google.protobuf:protoc:3.11.2:exe:${os.detected.classifier}\n                &lt;/protocArtifact&gt;\n                &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\n                &lt;pluginArtifact&gt;\n                    io.grpc:protoc-gen-grpc-java:1.25.0:exe:${os.detected.classifier}\n                &lt;/pluginArtifact&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;compile-custom&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        ...\n</code></pre>\n\n<p>but when building from scratch</p>\n\n<pre><code>mvn clean &amp;&amp; mvn package\n</code></pre>\n\n<p>the kotlin code would never find the generated sources.  When building first from IntelliJ it would work fine - IntelliJ knows what to do.</p>\n\n<p>I tried configuring build-helper-maven-plugin to include the generated-sources directories that the protobuf compiler and stub generator use, but that didn't seem to have any effect (and in fact seems unnecessary).</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576522526, "post_id": 59360682, "comment_id": 104919265, "body": "What does 500 mean?"}, {"owner": {"reputation": 46, "user_id": 12097312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f73244c2f22ddb74c1b5095284266b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fulton", "link": "https://stackoverflow.com/users/12097312/fulton"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576526959, "post_id": 59360682, "comment_id": 104920985, "body": "it is an HTTP 500 error, an unspecified internal server error"}, {"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576527204, "post_id": 59360682, "comment_id": 104921077, "body": "And you have one Answer. Did it help? Why dont you tell? WHy dont you react?"}, {"owner": {"reputation": 46, "user_id": 12097312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f73244c2f22ddb74c1b5095284266b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fulton", "link": "https://stackoverflow.com/users/12097312/fulton"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1576528638, "post_id": 59360682, "comment_id": 104921671, "body": "I am away from my laptop at this time, I can test it 5 minutes or so."}, {"owner": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "edited": false, "score": 0, "creation_date": 1576566327, "post_id": 59360682, "comment_id": 104931170, "body": "this document is useful  : <a href=\"https://developer.android.com/training/volley/request#request-json\" rel=\"nofollow noreferrer\">developer.android.com/training/volley/request#request-json</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2098, "user_id": 4711030, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/OQV0d.jpg?s=128&g=1", "display_name": "NehaK", "link": "https://stackoverflow.com/users/4711030/nehak"}, "is_accepted": false, "score": 0, "last_activity_date": 1576563397, "last_edit_date": 1576563397, "creation_date": 1576518795, "answer_id": 59361929, "question_id": 59360682, "link": "https://stackoverflow.com/questions/59360682/getting-a-error-500-in-my-code-but-not-in-my-browser/59361929#59361929", "title": "Getting a error 500 in my code but not in my browser", "body": "<p>Make sure you added <strong>INTERNET</strong> permission in Manifest </p>\n\n<p>&amp;</p>\n\n<p>Instead adding \"+\" use <strong>Uri.encode</strong> method for encoding URLs :</p>\n\n<pre><code>//        val mainVal = searchQuery.replace(\" \", \"+\")\n\n            val mainVal = Uri.encode(searchQuery)\n\n            val url = URL(\"https://api.duckduckgo.com/?q=$mainVal&amp;format=json\")\n            println(url.host)\n            url.openConnection()\n            val json = url.readText()\n            println(\"Result = \" + json)\n</code></pre>\n"}], "owner": {"reputation": 46, "user_id": 12097312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f73244c2f22ddb74c1b5095284266b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fulton", "link": "https://stackoverflow.com/users/12097312/fulton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576563397, "creation_date": 1576513983, "last_edit_date": 1576514746, "question_id": 59360682, "link": "https://stackoverflow.com/questions/59360682/getting-a-error-500-in-my-code-but-not-in-my-browser", "title": "Getting a error 500 in my code but not in my browser", "body": "<p>I am trying to use theDuckDuck go api with this code</p>\n\n<pre><code>val mainVal = searchQuery.replace(\" \", \"+\")\n    val url = URL(\"https://api.duckduckgo.com/?q=$mainVal&amp;format=json\")\n    println(url.host)\n    url.openConnection()\n    val json = url.readText()\n</code></pre>\n\n<p>I am getting this error as a result</p>\n\n<pre><code>java.io.IOException: Server returned HTTP response code: 500 for URL: https://api.duckduckgo.com/?q=duck+duck+go&amp;format=json\nat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1919)\nat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1515)\nat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\nat java.base/java.net.URL.openStream(URL.java:1139)\nat kotlin.io.TextStreamsKt.readBytes(ReadWrite.kt:150)\nat com.andromeda.araserver.skills.GetInfo.getFast(GetInfo.kt:82)\nat com.andromeda.araserver.skills.GetInfo.searchBing(GetInfo.kt:43)\nat com.andromeda.araserver.skills.GetInfo.main(GetInfo.kt:28)\nat com.andromeda.araserver.Run.serve(Run.java:98)\nat fi.iki.elonen.NanoHTTPD$HTTPSession.execute(NanoHTTPD.java:945)\nat fi.iki.elonen.NanoHTTPD$ClientHandler.run(NanoHTTPD.java:192)\nat java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n\n<p>When I run the given link in my browser it returns the expected result. I tried using the HttpSConnection method, it did not work.</p>\n\n<p>note I have used this methood literly hundreds of times on https, thats not the issue.</p>\n"}, {"tags": ["android", "kotlin", "reflection"], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 4335859, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yVByhL1w2jg/AAAAAAAAAAI/AAAAAAAABSI/LALC2mvYvE0/photo.jpg?sz=128", "display_name": "aschattney", "link": "https://stackoverflow.com/users/4335859/aschattney"}, "is_accepted": false, "score": -1, "last_activity_date": 1585579991, "creation_date": 1585579991, "answer_id": 60933261, "question_id": 59360430, "link": "https://stackoverflow.com/questions/59360430/using-kotlin-reflection-sealedsubclasses-property-in-android-release-build/60933261#60933261", "title": "Using Kotlin reflection sealedSubClasses property in Android release build", "body": "<p>Add an additional rule to your proguard file:</p>\n\n<pre><code>-keepnames class com.fully.qualified.ClassName* {\n    *;\n}\n</code></pre>\n\n<p>Notice the asterisk character.</p>\n"}, {"comments": [{"owner": {"reputation": 629, "user_id": 5279383, "user_type": "registered", "profile_image": "https://graph.facebook.com/961771140556632/picture?type=large", "display_name": "Cezary Butler", "link": "https://stackoverflow.com/users/5279383/cezary-butler"}, "edited": false, "score": 0, "creation_date": 1598386121, "post_id": 63585174, "comment_id": 112441177, "body": "I assume you mean ProGuard config. The answer would be useful for wider audience if you&#39;d specify where to add the line."}], "tags": [], "owner": {"reputation": 21, "user_id": 8842561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62bfd929ff910ae24e7390faf60c706?s=128&d=identicon&r=PG&f=1", "display_name": "user8842561", "link": "https://stackoverflow.com/users/8842561/user8842561"}, "is_accepted": false, "score": 2, "last_activity_date": 1598380766, "creation_date": 1598380766, "answer_id": 63585174, "question_id": 59360430, "link": "https://stackoverflow.com/questions/59360430/using-kotlin-reflection-sealedsubclasses-property-in-android-release-build/63585174#63585174", "title": "Using Kotlin reflection sealedSubClasses property in Android release build", "body": "<p>You can try</p>\n<pre><code>-keep class kotlin.Metadata { *; }\n</code></pre>\n<p>to get missing attributes from your class</p>\n"}, {"tags": [], "owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "is_accepted": false, "score": 3, "last_activity_date": 1614252598, "creation_date": 1614252598, "answer_id": 66367641, "question_id": 59360430, "link": "https://stackoverflow.com/questions/59360430/using-kotlin-reflection-sealedsubclasses-property-in-android-release-build/66367641#66367641", "title": "Using Kotlin reflection sealedSubClasses property in Android release build", "body": "<p>Found two ways to fix this issue:</p>\n<ol>\n<li>Add rule to your proguard-rules.pro file:</li>\n</ol>\n<pre>\n    -keep class com.example.ClassName { *; }\n    -keep class com.example.ClassName$* { *; }\n</pre>\n<ol start=\"2\">\n<li>Use @Keep annotation:</li>\n</ol>\n<pre>\n    @Keep\n    sealed class ClassName{\n        @Keep\n        object A : ClassName()\n        @Keep\n        object B : ClassName()\n    }\n</pre>\n<p>This one didn't work for me:</p>\n<pre>-keep class kotlin.Metadata { *; }</pre> \n<p>Also there is a bug <a href=\"https://issuetracker.google.com/issues/169264693\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/169264693</a> that could be the part of your problem.</p>\n"}], "owner": {"reputation": 1029, "user_id": 3855470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1de9920967f586ccc74032b15b6193?s=128&d=identicon&r=PG&f=1", "display_name": "sunilson", "link": "https://stackoverflow.com/users/3855470/sunilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1614252598, "creation_date": 1576513106, "question_id": 59360430, "link": "https://stackoverflow.com/questions/59360430/using-kotlin-reflection-sealedsubclasses-property-in-android-release-build", "title": "Using Kotlin reflection sealedSubClasses property in Android release build", "body": "<p>When I am trying to use the <code>sealedSubClasses</code> attribute of a reified class in Kotlin, it only works in my debug and not in my release build. I guess this is a problem with ProGuard, but I don't know how to fix this. I already tried keeping all classes in the module where the sealed class is, but I am having no luck with this. The <code>sealedSubClasses</code> property always returns an empty list.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-filterable"], "comments": [{"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1576511514, "post_id": 59359853, "comment_id": 104914097, "body": "It looks like result.values is null in your <code>postListFiltered = (results.values as List&lt;Data&gt;)</code> - that&#39; the reason of your crash. <code>postListFiltered</code> is non nullable."}, {"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "edited": false, "score": 0, "creation_date": 1576512259, "post_id": 59359853, "comment_id": 104914518, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 3, "creation_date": 1576512315, "post_id": 59359853, "comment_id": 104914540, "body": "None of the answers so far are explaining how it&#39;s possible for <code>results.values</code> to be null. The Filter implementation very clearly always assigns it a non-nullable. You should be able to avoid the immediate error with <code>postListFiltered = (results.values as List&lt;Data&gt;?).orEmpty()</code>, but this is probably masking some other bug that you&#39;ll still have to solve."}, {"owner": {"reputation": 1261, "user_id": 12125691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50b1bdeb49ef666175d9aba78de041e?s=128&d=identicon&r=PG&f=1", "display_name": "Nitrodon", "link": "https://stackoverflow.com/users/12125691/nitrodon"}, "edited": false, "score": 0, "creation_date": 1576512561, "post_id": 59359853, "comment_id": 104914664, "body": "Does your log include an warning with tag &quot;Filter&quot; and message &quot;An exception occured during performFiltering()!&quot; ?"}, {"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1576512845, "post_id": 59359853, "comment_id": 104914788, "body": "@Tenfour04 i understand that it&#39;s not the same exception or cause. but OP is trying to cast a null to something which isn&#39;t expecting null, this post provides various different reasons as to 1)why something can be null and 2) how to handle things being null, figured it would be useful and relevant to OP seeing as though the stack trace already points them towards the right direction"}, {"owner": {"reputation": 4648, "user_id": 4848308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5afa7fabdbf85a8b587c9ba4e268ad?s=128&d=identicon&r=PG&f=1", "display_name": "Gueorgui Obregon", "link": "https://stackoverflow.com/users/4848308/gueorgui-obregon"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1576588737, "post_id": 59359853, "comment_id": 104942484, "body": "@Tenfour04 postListFiltered = (results.values as List&lt;Data&gt;?).orEmpty() is actually an answer!"}], "answers": [{"tags": [], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "is_accepted": false, "score": 0, "last_activity_date": 1576511660, "creation_date": 1576511660, "answer_id": 59360057, "question_id": 59359853, "link": "https://stackoverflow.com/questions/59359853/null-cannot-be-cast-to-non-null-type-kotlin-collections-list-kotlin/59360057#59360057", "title": "null cannot be cast to non-null type kotlin.collections.List - kotlin", "body": "<p>You will have to perform a null check before performing the cast, modify your pulishResults method as following.</p>\n\n<pre><code>   override fun publishResults(constraint: CharSequence?,results: FilterResults) {\n                postListFiltered = if(results == null || results.values == null)\n                                       ArrayList&lt;Data&gt;() \n                                   else\n                                        results.values\n                notifyDataSetChanged()\n            }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2283, "user_id": 8159708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b814e69bb60fb1eac83b061ff2b7337d?s=128&d=identicon&r=PG", "display_name": "TomH", "link": "https://stackoverflow.com/users/8159708/tomh"}, "is_accepted": false, "score": 1, "last_activity_date": 1576511770, "creation_date": 1576511770, "answer_id": 59360085, "question_id": 59359853, "link": "https://stackoverflow.com/questions/59359853/null-cannot-be-cast-to-non-null-type-kotlin-collections-list-kotlin/59360085#59360085", "title": "null cannot be cast to non-null type kotlin.collections.List - kotlin", "body": "<p>It's this line:\n<code>results.values as List&lt;Data&gt;</code></p>\n\n<p><code>results.values</code> is null, and you're telling it to be a non-null list, which it can't do.</p>\n"}, {"tags": [], "owner": {"reputation": 1261, "user_id": 12125691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50b1bdeb49ef666175d9aba78de041e?s=128&d=identicon&r=PG&f=1", "display_name": "Nitrodon", "link": "https://stackoverflow.com/users/12125691/nitrodon"}, "is_accepted": false, "score": 0, "last_activity_date": 1576514465, "creation_date": 1576514465, "answer_id": 59360823, "question_id": 59359853, "link": "https://stackoverflow.com/questions/59359853/null-cannot-be-cast-to-non-null-type-kotlin-collections-list-kotlin/59360823#59360823", "title": "null cannot be cast to non-null type kotlin.collections.List - kotlin", "body": "<p>As the other two answers correctly point out, your <code>results.values</code> is null.  But the code clearly shows that the FilterResults returned from <code>performFiltering</code> always has a non-null <code>values</code> field.  How can this have happened?</p>\n\n<p>A brief look at the <code>Filter</code> source code gives a possible answer:</p>\n\n<pre><code>// Filter.RequestHandler.handleMessage(Message msg)\n\ntry {\n    args.results = performFiltering(args.constraint);\n} catch (Exception e) {\n    args.results = new FilterResults();\n    Log.w(LOG_TAG, \"An exception occured during performFiltering()!\", e);\n}\n</code></pre>\n\n<p>In plain English, if <code>performFiltering()</code> throws an exception, the filter catches the exception and uses an empty FilterResults in place of what would otherwise be returned.  The stack trace for this exception can be found in logcat.</p>\n\n<p>Looking at your <code>performFiltering</code> function, the only exception that stands out is <code>UninitializedPropertyAccessException</code>.  If this turns out to be the exception thrown, you can fix it by either checking whether the <code>fullPostList</code> property is initialized or explicitly initializing it to the empty list.</p>\n"}], "owner": {"reputation": 97, "user_id": 8015850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d756b8908de3ddc7e1a11da3f286?s=128&d=identicon&r=PG&f=1", "display_name": "GK007", "link": "https://stackoverflow.com/users/8015850/gk007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3483, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1576514465, "creation_date": 1576510924, "question_id": 59359853, "link": "https://stackoverflow.com/questions/59359853/null-cannot-be-cast-to-non-null-type-kotlin-collections-list-kotlin", "title": "null cannot be cast to non-null type kotlin.collections.List - kotlin", "body": "<p>I'm trying to add search Filterable in RecyclerView. but the app is getting crashed with following error:</p>\n\n<blockquote>\n  <p>kotlin.TypeCastException: null cannot be cast to non-null type\n  kotlin.collections.List\n                  at com.kabelash.movies.ui.PostListAdapter$searchFilter$1.publishResults(PostListAdapter.kt:87)\n                  at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:284)\n                  at android.os.Handler.dispatchMessage(Handler.java:107)\n                  at android.os.Looper.loop(Looper.java:214)</p>\n</blockquote>\n\n<p>Adapter:</p>\n\n<pre><code>class PostListAdapter: RecyclerView.Adapter&lt;PostListAdapter.ViewHolder&gt;(), Filterable {\n    private lateinit var postListFiltered:List&lt;Data&gt;\n    private lateinit var postListFull:List&lt;Data&gt;\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val binding: ListItemBinding = DataBindingUtil.inflate(LayoutInflater.from(parent.context), R.layout.list_item, parent, false)\n        return ViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.bind(postListFiltered[position])\n    }\n\n    override fun getItemCount(): Int {\n        return if(::postListFiltered.isInitialized) postListFiltered.size else 0\n    }\n\n    fun updatePostList(postList:List&lt;Data&gt;){\n        this.postListFiltered = postList\n        notifyDataSetChanged()\n    }\n\n    class ViewHolder(private val binding: ListItemBinding): RecyclerView.ViewHolder(binding.root){\n        private val viewModel = MoviesViewModel()\n\n        fun bind(post:Data){\n            viewModel.bind(post)\n            binding.viewModel = viewModel\n        }\n\n    }\n\n    override fun getFilter(): Filter? {\n        return searchFilter\n    }\n\n    private val searchFilter: Filter = object : Filter() {\n        override fun performFiltering(constraint: CharSequence?): FilterResults? {\n            val filteredList: MutableList&lt;Data&gt; = ArrayList()\n            if (constraint == null || constraint.isEmpty()) {\n                filteredList.addAll(postListFull)\n            } else {\n                val filterPattern = constraint.toString().toLowerCase().trim()\n                for (item in postListFull) {\n                    if (item.title.toLowerCase().contains(filterPattern) || item.genre.toLowerCase().contains(filterPattern)) {\n                        filteredList.add(item)\n                    }\n                }\n\n            }\n            val results = FilterResults()\n            results.values = filteredList\n            return results\n        }\n\n        override fun publishResults(constraint: CharSequence?,results: FilterResults) {\n            postListFiltered = (results.values as List&lt;Data&gt;)\n            notifyDataSetChanged()\n        }\n    }\n}\n</code></pre>\n\n<p>If you need any other class file please do let me know. Can someone please help me to solve it?</p>\n"}]