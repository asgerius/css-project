[{"tags": ["android", "android-intent", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1277, "user_id": 3302921, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/tIdqI.jpg?s=128&g=1", "display_name": "Eric Kolotyluk", "link": "https://stackoverflow.com/users/3302921/eric-kolotyluk"}, "edited": false, "score": 0, "creation_date": 1520468679, "post_id": 49163261, "comment_id": 85332509, "body": "<code>imageCaptureIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERM&zwnj;&#8203;ISSION)</code> does the trick :-)"}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 1, "last_activity_date": 1520467183, "creation_date": 1520467183, "answer_id": 49163261, "question_id": 49163127, "link": "https://stackoverflow.com/questions/49163127/android-image-capture-does-not-save-file/49163261#49163261", "title": "Android Image Capture does not save file", "body": "<blockquote>\n  <p>There does not seem to be anything in the Logcat to indicate a problem.</p>\n</blockquote>\n\n<p>Most likely it does, but the error would be coming from the camera app, as it has no ability to write to your desired location. Add <code>FLAG_GRANT_WRITE_URI_PERMISSION</code> to your <code>Intent</code>.</p>\n\n<blockquote>\n  <p>It also runs differently on the emulator vs a real device (Galaxy Note 8).</p>\n</blockquote>\n\n<p>There are hundreds of pre-installed camera apps across the ~10,000 Android device models. There are hundreds of other camera apps that the user might install. Whenever you invoke a third-party app, you are prone to get different results.</p>\n\n<blockquote>\n  <p>Also, the argument intent in onActivityResult is null.</p>\n</blockquote>\n\n<p>It is supposed to be <code>null</code>.</p>\n\n<blockquote>\n  <p>I cannot tell if the directory is being created (the Files app is too primitive)</p>\n</blockquote>\n\n<p>Use the Device File Explorer in Android Studio 3.0+.</p>\n"}], "owner": {"reputation": 1277, "user_id": 3302921, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/tIdqI.jpg?s=128&g=1", "display_name": "Eric Kolotyluk", "link": "https://stackoverflow.com/users/3302921/eric-kolotyluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520467183, "creation_date": 1520466378, "last_edit_date": 1520467114, "question_id": 49163127, "link": "https://stackoverflow.com/questions/49163127/android-image-capture-does-not-save-file", "title": "Android Image Capture does not save file", "body": "<p>I am following the example at <a href=\"https://developer.android.com/training/camera/photobasics.html\" rel=\"nofollow noreferrer\">https://developer.android.com/training/camera/photobasics.html</a></p>\n\n<p>I had it working briefly, then started enhancing the code, and now after taking a photo, it no longer gets stored in the file system.</p>\n\n<pre><code>private fun dispatchTakePictureIntent() {\n    val imageCaptureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n    val componentName = imageCaptureIntent.resolveActivity(packageManager)\n    // Ensure that there's a camera activity to handle the intent\n    if (componentName == null) {\n        Log.e(\"Ztuph\", \"componentName == null, cannot takePictureIntent.resolveActivity(packageManager))\")\n    }\n    else try {\n        val photoFile = createImageFile()\n        val authority = \"com.ztuph.android.FileProvider\"\n        try {\n            photoUri = FileProvider.getUriForFile(this, authority, photoFile)\n            Log.d(\"Ztuph\", \"1 photoUri = $photoUri\")\n            imageCaptureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri)\n            startActivityForResult(imageCaptureIntent, RequestCode.IMAGE_CAPTURE.ordinal)\n            Log.d(\"Ztuph\", \"startActivityForResult(imageCaptureIntent, RequestCode.IMAGE_CAPTURE.ordinal)\")\n        }\n        catch (illegalArgumentException: IllegalArgumentException) {\n            // TODO\n        }\n    }\n    catch (ioException: IOException) {\n        // TODO Error occurred while creating the File\n        Log.e(\"Ztuph\", \"can't create file\", ioException)\n    }\n}\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, intent: Intent?) {\n\n    when (requestCode){\n        RequestCode.IMAGE_CAPTURE.ordinal -&gt; when (resultCode){\n            Activity.RESULT_CANCELED -&gt; {\n                Log.d(TAG, \"IMAGE_CAPTURE result canceled\")\n            }\n            Activity.RESULT_OK -&gt; {\n                Log.d(TAG, \"onActivityResult: requestCode = IMAGE_CAPTURE, resultCode = RESULT_OK\")\n                if (intent == null) {\n                    Log.e(TAG, \"intent == null\")\n\n                    val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE)\n                    mediaScanIntent.data = photoUri\n                    sendBroadcast(mediaScanIntent)\n                    Log.d(TAG, \"broadcast Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE) with $photoUri\")\n                }\n                else {\n                    if (photoUri == null) Log.e(TAG, \"photoUri == null\")\n                    else Log.d(TAG, \"2 photoUri = $photoUri\")\n\n                    val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE)\n                    mediaScanIntent.data = photoUri\n                    sendBroadcast(mediaScanIntent)\n                    Log.d(TAG, \"broadcast Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE) with $photoUri\")\n                }\n            }\n            else -&gt; {\n                Log.e(TAG, \"Cannot handle resultCode = $resultCode\")\n            }\n        }\n        else -&gt; {\n            Log.e(TAG, \"Cannot handle requestCode = $requestCode\")\n        }\n    }\n}\n</code></pre>\n\n<p>There does not seem to be anything in the Logcat to indicate a problem.</p>\n\n<p>It also runs differently on the emulator vs a real device (Galaxy Note 8). On the real device, it creates the directory \"SD Card > Android > data > com.ztuph.android > files > Pictures\" but nothing gets stored there. Also, the argument intent in onActivityResult is null.</p>\n\n<p>On the emulated (Nexus 5X API 27) I cannot tell if the directory is being created (the Files app is too primitive), but there are no files any more. Yesterday, my app was creating image.jpg file, and today it is not. Also, on the emulator, the argument intent in onActivityResult is not null.</p>\n\n<p>My manifest looks like</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.ztuph.android\"&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;meta-data\n            android:name=\"aia-compat-api-min-version\"\n            android:value=\"1\" /&gt;\n        &lt;provider\n            android:name=\"android.support.v4.content.FileProvider\"\n            android:authorities=\"com.ztuph.android.FileProvider\"\n            android:exported=\"false\"\n            android:grantUriPermissions=\"true\"&gt;\n            &lt;meta-data\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\n                android:resource=\"@xml/file_paths\" /&gt;\n        &lt;/provider&gt;\n    &lt;/application&gt;\n\n    &lt;uses-feature android:name=\"android.hardware.camera\" android:required=\"true\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n</code></pre>\n\n<p>Does anyone have any troubleshooting tips, or other ideas why the image capture would stop writing to the file system?</p>\n"}, {"tags": ["oop", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1520465877, "post_id": 49162835, "comment_id": 85331756, "body": "I suppose the warning is incorrect, because the statement <code>this.vertices = ...</code> does not involve any virtual calls that may be dispatched to an overridden member (a <code>val</code> does not have an open setter). I reported this to the Kotlin issue tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-23170\" rel=\"nofollow noreferrer\">KT-23170</a>."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1520466091, "post_id": 49162835, "comment_id": 85331804, "body": "So it is safe to initialize the property that way, though it&#39;s not quite idiomatic. The idiomatic way is to use a <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"nofollow noreferrer\">primary constructor</a>."}, {"owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1520466134, "post_id": 49162835, "comment_id": 85331827, "body": "Thanks for your input, hotkey, always very helpful with kotlin"}], "answers": [{"tags": [], "owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "is_accepted": true, "score": 2, "last_activity_date": 1520466652, "last_edit_date": 1520466652, "creation_date": 1520466082, "answer_id": 49163081, "question_id": 49162835, "link": "https://stackoverflow.com/questions/49162835/kotlin-how-to-override-class-variable-that-is-a-collection-as-a-collection-of-a/49163081#49163081", "title": "Kotlin: how to override class variable that is a collection as a collection of a subtype", "body": "<h1>Using a generic type</h1>\n\n<pre><code>open class Polygon {\n   open val vertices: List&lt;Point&gt;\n   constructor(vertices: List&lt;Point&gt;) {\n      this.vertices = vertices.toList()\n\nclass Face: Polygon {\n   override val vertices: List&lt;Vertex&gt;\n</code></pre>\n\n<p>You could make Polygon have a generic parameter:</p>\n\n<pre><code>open class Polygon&lt;T: Point&gt; {\n    open val vertices: List&lt;T&gt;\n\n    constructor(vertices: List&lt;T&gt;) {\n        this.vertices = vertices.toList()\n    }\n}\n\nclass Face(vertices: List&lt;Vertex&gt;): Polygon&lt;Vertex&gt;(vertices)\n</code></pre>\n\n<p>This way you do not need to redefine the field, which reduces the duplication.</p>\n\n<h1>Using the primary constructor</h1>\n\n<p>You can further clean up the code like this:</p>\n\n<pre><code>open class Polygon&lt;T: Point&gt;(val vertices: List&lt;T&gt;)\nclass Face(vertices: List&lt;Vertex&gt;): Polygon&lt;Vertex&gt;(vertices)\n</code></pre>\n"}], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 49163081, "answer_count": 1, "score": 2, "last_activity_date": 1520466652, "creation_date": 1520464574, "question_id": 49162835, "link": "https://stackoverflow.com/questions/49162835/kotlin-how-to-override-class-variable-that-is-a-collection-as-a-collection-of-a", "title": "Kotlin: how to override class variable that is a collection as a collection of a subtype", "body": "<p>I think the title is confusing so I'll just show some code:</p>\n\n<pre><code>open class Polygon {\n   open val vertices: List&lt;Point&gt;\n   constructor(vertices: List&lt;Point&gt;) {\n      this.vertices = vertices.toList()\n\nclass Face: Polygon {\n   override val vertices: List&lt;Vertex&gt;\n</code></pre>\n\n<p>Where <code>Vertex</code> is a subtype of <code>Point</code>.</p>\n\n<p>Intellij IDEA inspections shows this warning in the Polygon's constructor:</p>\n\n<p><img src=\"https://i.stack.imgur.com/HS4Xj.png\" alt=\"https://i.imgur.com/W2ItVRn.png\"></p>\n\n<p>Is there a more correct way to implement the <code>Polygon</code> - <code>Face</code> hierarchy with <code>vertices</code> being of type list of <code>Vertex</code> in the derived class <code>Face</code>?</p>\n"}, {"tags": ["json", "kotlin", "klaxon"], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 1, "last_activity_date": 1520573794, "last_edit_date": 1520573794, "creation_date": 1520461763, "answer_id": 49162272, "question_id": 49161179, "link": "https://stackoverflow.com/questions/49161179/parse-json-containing-an-array-of-enums-in-kotlin-with-klaxon/49162272#49162272", "title": "Parse JSON containing an array of enums in Kotlin with Klaxon", "body": "<p>It works if you replace <code>Array</code> with <code>List</code>, which is recommended anyway:</p>\n\n<pre><code>data class Root(val colors: List&lt;Color&gt;)\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 372047, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6fc2723c333f224b2e3119516cfe88a?s=128&d=identicon&r=PG", "display_name": "David Siegel", "link": "https://stackoverflow.com/users/372047/david-siegel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 49162272, "answer_count": 1, "score": 0, "last_activity_date": 1520573794, "creation_date": 1520456728, "question_id": 49161179, "link": "https://stackoverflow.com/questions/49161179/parse-json-containing-an-array-of-enums-in-kotlin-with-klaxon", "title": "Parse JSON containing an array of enums in Kotlin with Klaxon", "body": "<p>I'm new to Kotlin and trying to parse an array of enums from JSON:</p>\n\n<pre><code>val convertColor = object: Converter&lt;Color&gt; {\n    override fun toJson(value: Color): String? = when(value) {\n        Color.R -&gt; \"red\"\n        Color.G -&gt; \"green\"\n        Color.B -&gt; \"blue\"\n        else -&gt; null\n    }\n\n    override fun fromJson(jv: JsonValue): Color = when(jv.inside) {\n        \"red\" -&gt; Color.R\n        \"green\" -&gt; Color.G\n        \"blue\" -&gt; Color.B\n        else -&gt; throw IllegalArgumentException(\"Invalid Color\")\n    }\n}\n\nenum class Color { R, G, B }\ndata class Root (val colors: Array&lt;Color&gt;)\n</code></pre>\n\n<p>Then I try to parse a sample with:</p>\n\n<pre><code>val klaxon = Klaxon().converter(convertColor)\nval result = klaxon.parse&lt;Root&gt;(\"\"\"\n{\n    \"colors\": [\"red\", \"green\", \"blue\"]\n}\n\"\"\")\n</code></pre>\n\n<p>But I get this runtime exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalArgumentException: array element type mismatch\n</code></pre>\n\n<p>It seems like the converter is not applied to the array elements.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 3, "creation_date": 1520456360, "post_id": 49161070, "comment_id": 85327751, "body": "Have you looked at the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-char-array.html\" rel=\"nofollow noreferrer\">docs</a>?"}, {"owner": {"reputation": 2106, "user_id": 2453985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2872e16f7af2ec7893c7a4574bcd9d?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram Palakurthi", "link": "https://stackoverflow.com/users/2453985/vikram-palakurthi"}, "edited": false, "score": 0, "creation_date": 1520456536, "post_id": 49161070, "comment_id": 85327855, "body": "Use the to String.toCharArray(); function"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 1, "last_activity_date": 1520540010, "last_edit_date": 1520540010, "creation_date": 1520461013, "answer_id": 49162104, "question_id": 49161070, "link": "https://stackoverflow.com/questions/49161070/convert-text-to-certain-numbers-in-kotlin/49162104#49162104", "title": "Convert text to certain numbers in kotlin", "body": "<p>It\u2019s as simple as this:</p>\n\n<pre><code>\"Hello World\".toCharArray() \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9458955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abdulazaez ", "link": "https://stackoverflow.com/users/9458955/abdulazaez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 49162104, "answer_count": 1, "score": -4, "last_activity_date": 1520540010, "creation_date": 1520456233, "question_id": 49161070, "link": "https://stackoverflow.com/questions/49161070/convert-text-to-certain-numbers-in-kotlin", "title": "Convert text to certain numbers in kotlin", "body": "<p>How do I convert String to elements in an array  In the language kotlin ?\n example  (\" Hello \")\n[h] [e] [l]  [l]  [o]</p>\n\n<p>thank you in advance.</p>\n"}, {"tags": ["google-maps", "kotlin", "google-maps-markers"], "comments": [{"owner": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "edited": false, "score": 0, "creation_date": 1520490307, "post_id": 49160837, "comment_id": 85338565, "body": "You should call method markerOptions.icon(), not reassing value, I think."}, {"owner": {"reputation": 884, "user_id": 975288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/3sTtZ.jpg?s=128&g=1", "display_name": "Luigi Caradonna", "link": "https://stackoverflow.com/users/975288/luigi-caradonna"}, "reply_to_user": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "edited": false, "score": 0, "creation_date": 1520495968, "post_id": 49160837, "comment_id": 85341206, "body": "Thanks, that was the problem"}], "answers": [{"tags": [], "owner": {"reputation": 884, "user_id": 975288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/3sTtZ.jpg?s=128&g=1", "display_name": "Luigi Caradonna", "link": "https://stackoverflow.com/users/975288/luigi-caradonna"}, "is_accepted": false, "score": 1, "last_activity_date": 1520496079, "creation_date": 1520496079, "answer_id": 49168141, "question_id": 49160837, "link": "https://stackoverflow.com/questions/49160837/cluster-manager-cannot-assign-custom-icon-to-markeroptions/49168141#49168141", "title": "Cluster Manager, cannot assign custom icon to MarkerOptions", "body": "<p>As said by asm0dey, the correct way to assign the icon was</p>\n\n<pre><code>markerOptions!!.icon(BitmapDescriptorFactory.fromResource(R.id.cluster_icon))\n</code></pre>\n"}], "owner": {"reputation": 884, "user_id": 975288, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/3sTtZ.jpg?s=128&g=1", "display_name": "Luigi Caradonna", "link": "https://stackoverflow.com/users/975288/luigi-caradonna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520496079, "creation_date": 1520455336, "question_id": 49160837, "link": "https://stackoverflow.com/questions/49160837/cluster-manager-cannot-assign-custom-icon-to-markeroptions", "title": "Cluster Manager, cannot assign custom icon to MarkerOptions", "body": "<p>I'm using the Google Maps Utils to group the markers. Now I want to customize the cluster icon and to do that I'm using this code</p>\n\n<pre><code>class ClusteredMarkerRender(context: Context, map: GoogleMap, clusterManager: ClusterManager&lt;ClusteredMarker&gt;)\n    : DefaultClusterRenderer&lt;ClusteredMarker&gt;(context, map, clusterManager) {\n\n    override fun onBeforeClusterRendered(cluster: Cluster&lt;ClusteredMarker&gt;?, markerOptions: MarkerOptions?) {\n        super.onBeforeClusterRendered(cluster, markerOptions)\n\n        markerOptions!!.icon = BitmapDescriptorFactory.fromResource(R.id.cluster_icon)\n    }\n\n    override fun shouldRenderAsCluster(cluster: Cluster&lt;ClusteredMarker&gt;?): Boolean {\n        return cluster!!.size &gt; 1\n    }\n}\n</code></pre>\n\n<p>but on <code>markerOptions!!.icon</code> Android Studio says <code>val cannot be reassigned</code>. How am I supposed to assign my custom icon to the <code>markerOptions</code> instance?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 5335776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056181b59d600c35e656c8d412df7bed?s=128&d=identicon&r=PG&f=1", "display_name": "PaulB", "link": "https://stackoverflow.com/users/5335776/paulb"}, "edited": false, "score": 1, "creation_date": 1520448296, "post_id": 49159048, "comment_id": 85323335, "body": "Exactly what I needed. Thanks."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 10, "last_activity_date": 1520447849, "creation_date": 1520447849, "answer_id": 49159048, "question_id": 49158993, "link": "https://stackoverflow.com/questions/49158993/how-can-i-create-a-map-of-the-characters-of-a-string-and-the-number-of-their-occ/49159048#49159048", "title": "How can I create a map of the characters of a string and the number of their occurances in Kotlin?", "body": "<p>Do it like this </p>\n\n<pre><code>val map = \"Hello World\".groupingBy { it }.eachCount()\n</code></pre>\n\n<p><code>map</code> will be of type <code>Map&lt;Char, Int&gt;</code></p>\n"}], "owner": {"reputation": 1009, "user_id": 5335776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056181b59d600c35e656c8d412df7bed?s=128&d=identicon&r=PG&f=1", "display_name": "PaulB", "link": "https://stackoverflow.com/users/5335776/paulb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 49159048, "answer_count": 1, "score": 3, "last_activity_date": 1520447849, "creation_date": 1520447636, "question_id": 49158993, "link": "https://stackoverflow.com/questions/49158993/how-can-i-create-a-map-of-the-characters-of-a-string-and-the-number-of-their-occ", "title": "How can I create a map of the characters of a string and the number of their occurances in Kotlin?", "body": "<p>I have a string <code>\"Hello World\"</code></p>\n\n<p>I need a <code>Map&lt;Char, Int&gt;</code> which will contain the pairs of each character and the number of times it appears in the string : <code>{H=1, e=1, l=3, o=2,r=1, d=1}</code></p>\n\n<p>How can I do that without using the traditional for loop? </p>\n"}, {"tags": ["android", "kotlin", "gson", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 1767, "user_id": 5607230, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yxTaDUTQbFI/AAAAAAAAAAI/AAAAAAAAACk/PyBMKtiZFCE/photo.jpg?sz=128", "display_name": "Wackaloon", "link": "https://stackoverflow.com/users/5607230/wackaloon"}, "edited": false, "score": 0, "creation_date": 1520448064, "post_id": 49158729, "comment_id": 85323204, "body": "Meta is same for all responses, I need some way to extend it when I need to, not to create dozen of same brother-classes which will differ in 1-2 extra fields"}, {"owner": {"reputation": 918, "user_id": 6478596, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N6YWrnldsP4/AAAAAAAAAAI/AAAAAAAAADM/uG5dMgY9leY/photo.jpg?sz=128", "display_name": "Federico De Gioannini", "link": "https://stackoverflow.com/users/6478596/federico-de-gioannini"}, "reply_to_user": {"reputation": 1767, "user_id": 5607230, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yxTaDUTQbFI/AAAAAAAAAAI/AAAAAAAAACk/PyBMKtiZFCE/photo.jpg?sz=128", "display_name": "Wackaloon", "link": "https://stackoverflow.com/users/5607230/wackaloon"}, "edited": false, "score": 1, "creation_date": 1520450699, "post_id": 49158729, "comment_id": 85324757, "body": "Ok. You could declare meta as private, use a more generic type (JsonObject? JsonArray?) and override the getter."}, {"owner": {"reputation": 918, "user_id": 6478596, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N6YWrnldsP4/AAAAAAAAAAI/AAAAAAAAADM/uG5dMgY9leY/photo.jpg?sz=128", "display_name": "Federico De Gioannini", "link": "https://stackoverflow.com/users/6478596/federico-de-gioannini"}, "reply_to_user": {"reputation": 1767, "user_id": 5607230, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yxTaDUTQbFI/AAAAAAAAAAI/AAAAAAAAACk/PyBMKtiZFCE/photo.jpg?sz=128", "display_name": "Wackaloon", "link": "https://stackoverflow.com/users/5607230/wackaloon"}, "edited": false, "score": 0, "creation_date": 1520452988, "post_id": 49158729, "comment_id": 85325982, "body": "Or you could use generics in order to pass the meta property type"}], "tags": [], "owner": {"reputation": 918, "user_id": 6478596, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N6YWrnldsP4/AAAAAAAAAAI/AAAAAAAAADM/uG5dMgY9leY/photo.jpg?sz=128", "display_name": "Federico De Gioannini", "link": "https://stackoverflow.com/users/6478596/federico-de-gioannini"}, "is_accepted": true, "score": 2, "last_activity_date": 1520453591, "last_edit_date": 1520453591, "creation_date": 1520446602, "answer_id": 49158729, "question_id": 49158475, "link": "https://stackoverflow.com/questions/49158475/gson-serialization-in-kotlin-android-override-property/49158729#49158729", "title": "GSON serialization in Kotlin android, override property", "body": "<p>I think it depends on a conflict on \"meta\" key.\nIn fact SomeResponse class is equivalent to this class:</p>\n\n<pre><code>class SomeResponse : DefaultResponse {\n\n   override val error: List&lt;RestError&gt;? get() = meta?.listErrors\n\n   @Expose\n   var meta: Meta? = null\n\n   @SerializedName(\"meta\")\n   @Expose\n   val metaLocal: MetaInner? = null\n\n   inner class MetaInner : Meta() {\n     @SerializedName(\"extra_field\")\n     @Expose\n     val field: Long? = null\n   }\n}\n</code></pre>\n\n<p>It's easy to observe that the key <em>meta</em> is used for both variables <em>meta</em> and <em>metaLocal</em></p>\n\n<p>You could use a unique class for both requests, using generics in order to pass the type of <em>meta</em> property.</p>\n\n<pre><code>open class DefaultResponseImpl&lt;T&gt; : DefaultResponse {\n\noverride val error: List&lt;RestError&gt;? get() {\n    if (meta? is Meta?) return meta?.listErrors\n    return null\n}\n\n@Expose\nvar meta: T = null\n}\n</code></pre>\n"}], "owner": {"reputation": 1767, "user_id": 5607230, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yxTaDUTQbFI/AAAAAAAAAAI/AAAAAAAAACk/PyBMKtiZFCE/photo.jpg?sz=128", "display_name": "Wackaloon", "link": "https://stackoverflow.com/users/5607230/wackaloon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 49158729, "answer_count": 1, "score": 1, "last_activity_date": 1520453591, "creation_date": 1520445594, "question_id": 49158475, "link": "https://stackoverflow.com/questions/49158475/gson-serialization-in-kotlin-android-override-property", "title": "GSON serialization in Kotlin android, override property", "body": "<p>I have a default response class for Retrofit</p>\n\n<pre><code>open class DefaultResponseImpl : DefaultResponse {\n\n    override val error: List&lt;RestError&gt;? get() = meta?.listErrors\n\n    @Expose\n    var meta: Meta? = null\n}\n</code></pre>\n\n<p>and this Meta can have some extra fields, so I want to override it with some extra field like this</p>\n\n<pre><code>class SomeResponse : DefaultResponseImpl() {\n    @SerializedName(\"meta\")\n    @Expose\n    val metaLocal: MetaInner? = null\n\n    inner class MetaInner : Meta() {\n        @SerializedName(\"extra_field\")\n        @Expose\n        val field: Long? = null\n    }\n}\n</code></pre>\n\n<p>but I am getting error <code>java.lang.IllegalArgumentException: Unable to create converter for class com.responses.SomeResponse</code></p>\n\n<p>What is wrong? <code>MetaInner</code> is subtype of <code>Meta</code>, I'm not overriding old meta field with another type (which gives error in IDE). I just add another  field which must be parsed from the same SerializedName</p>\n\n<p>How can this be achieved in Kotlin?</p>\n"}, {"tags": ["spring-boot", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 1168617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4bc9da60c815d73eaedfb2b9a1c7ba?s=128&d=identicon&r=PG", "display_name": "Dave Leeds", "link": "https://stackoverflow.com/users/1168617/dave-leeds"}, "is_accepted": true, "score": 4, "last_activity_date": 1520446707, "creation_date": 1520446707, "answer_id": 49158748, "question_id": 49157445, "link": "https://stackoverflow.com/questions/49157445/getting-beancreationexception-when-i-try-to-run-spring-boot-web-application/49158748#49158748", "title": "Getting BeanCreationException when I try to run spring boot web application?", "body": "<p>Something in the code is trying to use Kotlin <a href=\"http://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">reflection</a>. In order to cut down the size of the runtime library, Kotlin reflection features are provided separately from the standard library, as a separate JAR.</p>\n\n<p>To add this dependency to your build, update your <code>build.gradle</code> file by putting this line inside the <code>dependencies</code> block:</p>\n\n<p><code>compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"</code></p>\n"}], "owner": {"reputation": 77, "user_id": 5206971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c987b7f81f805b296c8019c8a122720?s=128&d=identicon&r=PG&f=1", "display_name": "random_user", "link": "https://stackoverflow.com/users/5206971/random-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 49158748, "answer_count": 1, "score": 1, "last_activity_date": 1520446707, "creation_date": 1520442075, "question_id": 49157445, "link": "https://stackoverflow.com/questions/49157445/getting-beancreationexception-when-i-try-to-run-spring-boot-web-application", "title": "Getting BeanCreationException when I try to run spring boot web application?", "body": "<p>I created a web project in intelliJ. then I created Application.kt and HomeController.kt . Now I am trying to run this web application using <strong>./gradlew :bootRun</strong> , But it's throwing following exception .\nI don't know , what am I doing wrong? can anyone figure it out? what is the actual problem here .\nThanks in Advance</p>\n\n<p><strong>stack trace</strong></p>\n\n<pre><code>2018-03-07 17:57:53.868  INFO 26063 --- [           main] ApplicationKt                            : Starting ApplicationKt on xyz-x541uj with PID 26063 (/home/xyz/Desktop/root/intelliJ/WebPro/build/classes/kotlin/main started by xyz in /home/xyz/Desktop/root/intelliJ/WebPro)\n2018-03-07 17:57:53.878  INFO 26063 --- [           main] ApplicationKt                            : No active profile set, falling back to default profiles: default\n2018-03-07 17:57:53.971  INFO 26063 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@667a738: startup date [Wed Mar 07 17:57:53 IST 2018]; root of context hierarchy\n2018-03-07 17:57:54.123  WARN 26063 --- [kground-preinit] o.s.h.c.j.Jackson2ObjectMapperBuilder    : For Jackson Kotlin classes support please add \"com.fasterxml.jackson.module:jackson-module-kotlin\" to the classpath\n2018-03-07 17:57:55.405  INFO 26063 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2018-03-07 17:57:55.431  INFO 26063 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2018-03-07 17:57:55.432  INFO 26063 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.28\n2018-03-07 17:57:55.442  INFO 26063 --- [ost-startStop-1] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib]\n2018-03-07 17:57:55.525  INFO 26063 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-03-07 17:57:55.525  INFO 26063 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1557 ms\n2018-03-07 17:57:55.676  INFO 26063 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Servlet dispatcherServlet mapped to [/]\n2018-03-07 17:57:55.680  INFO 26063 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-03-07 17:57:55.681  INFO 26063 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-03-07 17:57:55.681  INFO 26063 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-03-07 17:57:55.681  INFO 26063 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-03-07 17:57:55.722  WARN 26063 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'homeController' defined in file [/home/ankush/Desktop/root/intelliJ/WebPro/build/classes/kotlin/main/com/webpro/controller/HomeController.class]: Unexpected exception during bean creation; nested exception is java.lang.NoClassDefFoundError: kotlin/reflect/full/KClasses\n2018-03-07 17:57:55.724  INFO 26063 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2018-03-07 17:57:55.737  INFO 26063 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2018-03-07 17:57:55.743 ERROR 26063 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'homeController' defined in file [/home/ankush/Desktop/root/intelliJ/WebPro/build/classes/kotlin/main/com/webpro/controller/HomeController.class]: Unexpected exception during bean creation; nested exception is java.lang.NoClassDefFoundError: kotlin/reflect/full/KClasses\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:518) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:760) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) [spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:388) [spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1246) [spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1234) [spring-boot-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n        at ApplicationKt.main(Application.kt:18) [main/:na]\nCaused by: java.lang.NoClassDefFoundError: kotlin/reflect/full/KClasses\n        at org.springframework.beans.BeanUtils$KotlinDelegate.findPrimaryConstructor(BeanUtils.java:727) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.BeanUtils.findPrimaryConstructor(BeanUtils.java:200) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:286) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1198) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1123) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n        ... 14 common frames omitted\nCaused by: java.lang.ClassNotFoundException: kotlin.reflect.full.KClasses\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_161]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_161]\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338) ~[na:1.8.0_161]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_161]\n        ... 21 common frames omitted\n\n\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':bootRun'.\n&gt; Process 'command '/usr/lib/jvm/java-8-oracle/bin/java'' finished with non-zero exit value 1\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED in 3s\n2 actionable tasks: 1 executed, 1 up-to-date\n</code></pre>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>       buildscript {\n    ext.kotlin_version = '1.2.30'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:2.0.0.RELEASE\")\n\n    }\n}\n\n        group 'com.xxx.web'\nversion '1.0-SNAPSHOT'\n\napply plugin: 'java'\napply plugin: 'kotlin'\napply plugin: 'org.springframework.boot'\napply plugin: 'war'\napply plugin: 'io.spring.dependency-management'\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n    compile(\"org.springframework.boot:spring-boot-starter-thymeleaf\")\n    compile(\"org.springframework.boot:spring-boot-starter-web\")\n\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p><strong>Application.kt</strong></p>\n\n<pre><code>       import org.springframework.boot.SpringApplication\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.context.annotation.ComponentScan\n\n\n\n@ComponentScan(\"com.webpro\")\n@SpringBootApplication\nopen class Application\n\nfun main(args:Array&lt;String&gt;)\n{\n    SpringApplication.run(Application::class.java,*args)\n}\n</code></pre>\n\n<p><strong>HomeController.kt</strong></p>\n\n<pre><code>    package com.webpro.controller\n\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.web.bind.annotation.RestController\n\n\n\n@RestController\nclass HomeController\n{\n    @GetMapping(\"/\")\n    fun greeting() : String\n    {\n        return \"Hello World !\"\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1520441393, "post_id": 49157065, "comment_id": 85319151, "body": "So you want to call <code>service.apiCall()</code> repeatedly and have a single flow of those data lists?"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1520510233, "post_id": 49157065, "comment_id": 85349886, "body": "That&#39;s a completely different requirement. Have you actually tried <code>debounce</code> or <code>throttleFirst</code>?"}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1520510766, "post_id": 49157065, "comment_id": 85350247, "body": "@akarnokd Sorry, that might have been misleading. Can u update your answer please, and show how you would achieve this?"}], "answers": [{"comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1520441556, "post_id": 49157244, "comment_id": 85319249, "body": "You have to change the return type to <code>Flowable&lt;ArrayList&lt;Data&gt;&gt;</code>."}], "tags": [], "owner": {"reputation": 5612, "user_id": 808019, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d71c5402e4d270e32f6c63aaf1fc63b?s=128&d=identicon&r=PG", "display_name": "peshkira", "link": "https://stackoverflow.com/users/808019/peshkira"}, "is_accepted": false, "score": 0, "last_activity_date": 1520441460, "creation_date": 1520441460, "answer_id": 49157244, "question_id": 49157065, "link": "https://stackoverflow.com/questions/49157065/set-delay-for-retrofit-api-calls-using-rxjava2/49157244#49157244", "title": "Set delay for retrofit api calls using rxjava2", "body": "<p>Take a look at .repeatWhen()</p>\n\n<p>You can maybe use something like</p>\n\n<pre><code>fun apiCall(): Single&lt;ArrayList&lt;Data&gt;&gt; {\n  return service.apiCall()\n        .repeatWhen(completed -&gt; completed.delay(800, MILLISECONDS)))\n        .onErrorResumeNext(...)\n        .map { result-&gt;\n\n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1520441614, "post_id": 49157253, "comment_id": 85319286, "body": "<code>interval</code> is a static method and will have no relation to the apiCall before it. Also the return type has to change."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 0, "last_activity_date": 1520441778, "last_edit_date": 1520441778, "creation_date": 1520441483, "answer_id": 49157253, "question_id": 49157065, "link": "https://stackoverflow.com/questions/49157065/set-delay-for-retrofit-api-calls-using-rxjava2/49157253#49157253", "title": "Set delay for retrofit api calls using rxjava2", "body": "<p>If you want to repeat the request, you have to use interval:</p>\n\n<pre><code>fun apiCall(): Single&lt;ArrayList&lt;Data&gt;&gt; {\n    return Observable.interval(800, 800, TimeUnit.MILLISECONDS)\n            .flatmap { service.apiCall() }\n            .onErrorResumeNext(...)\n            .map { result-&gt;\n\n            }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520509775, "post_id": 49157394, "comment_id": 85349612, "body": "I updated my original post, take a look please. I used your scenerio and this made alot of requests."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520510156, "post_id": 49157394, "comment_id": 85349836, "body": "That&#39;s what you asked for. 800 milliseconds is 0.8 seconds, so you&#39;ll get 5 requests per 4 seconds."}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520514435, "post_id": 49157394, "comment_id": 85352568, "body": "Well, if I try to use your syntax on my example <code>apiCall()</code> in <code>REPO</code> (example above), then it doesn&#39;t find a command as <code>throttleFirst</code>"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520515123, "post_id": 49157394, "comment_id": 85353033, "body": "<code>throttleFirst</code> is an operator on <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#throttleFirst-long-java.util.concurrent.TimeUnit-\" rel=\"nofollow noreferrer\"><code>Observable</code></a>. Please provide <b>exactly</b> what you have done that doesn&#39;t work."}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520516505, "post_id": 49157394, "comment_id": 85353995, "body": "I edited original post. Basically I try to convert single to observable using <code>toObservable()</code> and then call <code>throttleFirst</code>. Syntax point of view - everything seems to be okay, but api requests doesnt pause 800ms between them."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "edited": false, "score": 0, "creation_date": 1520520059, "post_id": 49157394, "comment_id": 85356530, "body": "You have to throttle the button clicks and not create an api call Single on each invocation of that click handler. Looks like there is a misunderstanding about the structure of your code. Please provide the activity parts where you handle your button clicks."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": false, "score": 1, "last_activity_date": 1520512679, "last_edit_date": 1520512679, "creation_date": 1520441859, "answer_id": 49157394, "question_id": 49157065, "link": "https://stackoverflow.com/questions/49157065/set-delay-for-retrofit-api-calls-using-rxjava2/49157394#49157394", "title": "Set delay for retrofit api calls using rxjava2", "body": "<p><strong>Edit</strong>: (change in the actual question)</p>\n\n<p>Take a <a href=\"https://github.com/JakeWharton/RxBinding#rxbinding\" rel=\"nofollow noreferrer\">stream of clicks</a>, throttle it and flatMap the API call onto it</p>\n\n<pre><code>fun setup() {\n    clicksDisposable = RxView.clicks(button)\n    .throttleFirst(800, TimeUnit.MILLISECONDS))\n    .flatMapSingle({ t -&gt;\n        service.apiCall()\n        .onErrorResumeNext(...)\n        .map { result -&gt; result   }\n    })\n    .subscribe(/* ... */);\n}\n</code></pre>\n"}], "owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520516445, "creation_date": 1520440900, "last_edit_date": 1520516445, "question_id": 49157065, "link": "https://stackoverflow.com/questions/49157065/set-delay-for-retrofit-api-calls-using-rxjava2", "title": "Set delay for retrofit api calls using rxjava2", "body": "<p>I'm trying to replace <code>Handler</code> with <code>RxJava2</code>. I want to make <code>apiCall()</code> to backend every 800ms, but it does not work with <code>delay</code>    </p>\n\n<p><strong>PRESENTER</strong></p>\n\n<pre><code>val disposable = repository.apiCall(...)\n                .observeOn(AndroidSchedulers.mainThread())\n                .toObservable()\n                .throttleFirst(800, TimeUnit.MILLISECONDS)\n                .subscribe({ result -&gt;\n                    ...\n                }, { _ -&gt;\n                    ...\n                })\n        compositeDisposable.add(disposable)\n</code></pre>\n\n<p><strong>REPO</strong></p>\n\n<pre><code>fun apiCall(...): Single&lt;ArrayList&lt;Data&gt;&gt; {\n    return service.retrofitCall(...)\n            .onErrorResumeNext(...)\n            .map { result -&gt;\n                ...\n                return@map result \n            }\n}\n</code></pre>\n\n<p>This made like alot of requests. Feeled like a loop lol. What I need is every 800ms this api call sends request (in case user spam click button)</p>\n\n<p><strong>SCENERIO</strong></p>\n\n<p>User presses button and that calls api request. I want to make sure, if user spam clicks this button, only 1 request call goes to api, not 100x. I think this could be done with <code>debounce</code> in past.</p>\n"}, {"tags": ["android", "mvvm", "kotlin", "observable"], "answers": [{"tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 4, "last_activity_date": 1520442830, "last_edit_date": 1520442830, "creation_date": 1520440738, "answer_id": 49157008, "question_id": 49156678, "link": "https://stackoverflow.com/questions/49156678/mvvm-set-cursor-in-end-of-text-in-edittext-when-using-aftertextchanged-fuction/49157008#49157008", "title": "MVVM Set Cursor in end of text in EditText when using afterTextChanged fuction", "body": "<p>you could a BindingAdapter for it</p>\n\n<pre><code>@BindingAdapter(\"cursorPosition\")\n@JvmStatic\nfun setCursorPosition(editText: EditText, value: String?) {\n    value ?: return\n    editText.setSelection(value.length)\n}\n</code></pre>\n\n<p>and in your layout use is as</p>\n\n<pre><code>cursorPosition=\"@{viewmodel.amount}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5612, "user_id": 808019, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d71c5402e4d270e32f6c63aaf1fc63b?s=128&d=identicon&r=PG", "display_name": "peshkira", "link": "https://stackoverflow.com/users/808019/peshkira"}, "is_accepted": false, "score": 0, "last_activity_date": 1520441157, "creation_date": 1520441157, "answer_id": 49157147, "question_id": 49156678, "link": "https://stackoverflow.com/questions/49156678/mvvm-set-cursor-in-end-of-text-in-edittext-when-using-aftertextchanged-fuction/49157147#49157147", "title": "MVVM Set Cursor in end of text in EditText when using afterTextChanged fuction", "body": "<p>In general you change the position of the cursor of a EditText by using this method: <code>EditText#setSelection(int index)</code>, e.g.: <code>myEditText.setSelection(42)</code>. Be careful that the index is not longer than the actual text of the EditText.</p>\n\n<p>Using MVVM and the data bindings framework makes it a bit trickier. Depending on your complete architecture you have two choices.</p>\n\n<p>If you have a reference to the View (e.g. Activity, Fragment, ViewHolder, etc.) in your viewModel, then you can just call a method of the view and inside it you can set the position of the cursor as shown above.</p>\n\n<p>If you do not have a reference to the view then you will have to use a binding adapter like this:</p>\n\n<pre><code>@BindingAdapter(\"android:afterTextChanged\")\npublic static void setTextWatcher(EditText view, YourViewModel viewModel) {\n  view.addTextChangeListener(new TextWatcher() {\n    ... other methods\n    public void afterTextChanged(Editable s) {\n       viewModel.afterTextChanged(s);\n       view.setSelection(s.length() - 1);\n    }\n  })\n}\n</code></pre>\n\n<p>Note that you can bind any kind of object instead of the viewModel if you want or need. You can for example make an interface in order to not couple your ViewModel directly.</p>\n"}, {"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1520441461, "creation_date": 1520441461, "answer_id": 49157245, "question_id": 49156678, "link": "https://stackoverflow.com/questions/49156678/mvvm-set-cursor-in-end-of-text-in-edittext-when-using-aftertextchanged-fuction/49157245#49157245", "title": "MVVM Set Cursor in end of text in EditText when using afterTextChanged fuction", "body": "<p>You're operating on an <code>Editable</code>. In this you can replace text as well. You don't need to reset the whole text of the <code>EditText</code>.</p>\n\n<pre><code>fun afterTextChanged(editable: Editable){\n    val oldText = editable.toString()\n    if(oldText.isNullOrEmpty()) return\n    val newText = originalText.convertCurrencyToLong().convertToCurrency()\n    if (oldText == newText) return\n    editable.replace(0, oldText.length, newText)\n}\n</code></pre>\n\n<p>With this You should preserve the selection as well. If not you can set it with <code>Selection.setSelection(editable, start, end)</code> to the <code>Editable</code> directly.</p>\n"}], "owner": {"reputation": 58, "user_id": 8058188, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-seAW2Fum2Gc/AAAAAAAAAAI/AAAAAAAAABU/bxfS88TE3lA/photo.jpg?sz=128", "display_name": "Hari Nugroho", "link": "https://stackoverflow.com/users/8058188/hari-nugroho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1151, "favorite_count": 0, "accepted_answer_id": 49157008, "answer_count": 3, "score": 1, "last_activity_date": 1520442830, "creation_date": 1520439680, "question_id": 49156678, "link": "https://stackoverflow.com/questions/49156678/mvvm-set-cursor-in-end-of-text-in-edittext-when-using-aftertextchanged-fuction", "title": "MVVM Set Cursor in end of text in EditText when using afterTextChanged fuction", "body": "<p>my problem is when my edit text add comma cursor will move to first of text how to set the cursor always in the end of edit text when using ObservableField and mvvm this is my xml</p>\n\n<pre><code>&lt;EditText\n    android:id=\"@+id/input_amount\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:hint=\"@string/hint_amount\"\n    android:inputType=\"number\"\n    android:maxLines=\"1\"\n    android:text=\"@={viewmodel.amount}\"\n    android:afterTextChanged=\"@{viewmodel.afterTextChanged}\"/&gt;\n</code></pre>\n\n<p>this is my view model</p>\n\n<pre><code>var amount = ObservableField&lt;String&gt;()\nfun afterTextChanged(editable: Editable){\n    var longValue : Long\n    var originalText = editable.toString()\n    if(originalText.isNullOrEmpty())\n        return\n\n    longValue = originalText.convertCurrencyToLong()\n    amount.set(longValue.convertToCurrency())\n}\n</code></pre>\n\n<p>this is my helper</p>\n\n<pre><code>object CurrencyHelper{\n   const val SIMPLE_CURRENCY_SPLIT = \",\"\n   const val SIMPLE_CURRENCY_STRING = \"#,###\"\n\n   @JvmField val SIMPLE_CURRENCY_FORMAT = object : ThreadLocal&lt;NumberFormat&gt;(){\n       override fun initialValue(): NumberFormat {\n           return DecimalFormat(SIMPLE_CURRENCY_STRING)\n       }\n   }\n}\n\nfun Long.convertToCurrency(): String = CurrencyHelper.SIMPLE_CURRENCY_FORMAT.get().format(this)\n\nfun String.convertCurrencyToLong() : Long = this.replace(CurrencyHelper.SIMPLE_CURRENCY_SPLIT.toRegex(), \"\").toLong()\n</code></pre>\n"}, {"tags": ["android", "variables", "kotlin"], "comments": [{"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520662660, "post_id": 49154957, "comment_id": 85417076, "body": "Do you call the method <code>storeFacultyData</code> before you get the value ?!"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520669960, "post_id": 49154957, "comment_id": 85418646, "body": "This function is called at the time of login, and I am using it&#39;s value to display name of and email of the user in the next activity."}, {"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520681470, "post_id": 49154957, "comment_id": 85421668, "body": "did you check that <code>mUserUId</code> is not null by that time ?! i guess its null so it prevent the variables to be filled"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520686711, "post_id": 49154957, "comment_id": 85423113, "body": "It is not, otherwise it would have loged me a messsage."}, {"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520691183, "post_id": 49154957, "comment_id": 85424546, "body": "The problem is with <code>faculty_nav_header_name</code>. It can&#39;t find that view. Are you sure you have such a WIDGET in your current view ?!?!?"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520933061, "post_id": 49154957, "comment_id": 85508166, "body": "I am sure it is there, and value if I print it , it prints fine, but when I assign it to faculty_nav_header_name, it says it can&#39;t be null"}, {"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520942492, "post_id": 49154957, "comment_id": 85514255, "body": "Please post your complete xml"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1520999778, "post_id": 49154957, "comment_id": 85542199, "body": "added changes, please check."}, {"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1521015452, "post_id": 49154957, "comment_id": 85547963, "body": "Where are <code>faculty_home_dateStamp</code> and <code>faculty_home_dayStamp</code> ?! You are loading another view!!! that is why it does not find your <code>faculty_nav_header_name</code>. are you showing a fragment in an activity?"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1521023346, "post_id": 49154957, "comment_id": 85552966, "body": "I am trying to set the value of textview on the navigation drawer header, and facutly_home_dayStamp and dateStamp are on the activity main screen."}, {"owner": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1521033847, "post_id": 49154957, "comment_id": 85560282, "body": "Try doing this:  <code>activity?.findViewById&lt;TextView&gt;(R.id.faculty_nav_header_nam&zwnj;&#8203;e)!!.text = previousIntentValueName</code>"}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "reply_to_user": {"reputation": 4571, "user_id": 1607191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLqoh.jpg?s=128&g=1", "display_name": "Omid Heshmatinia", "link": "https://stackoverflow.com/users/1607191/omid-heshmatinia"}, "edited": false, "score": 0, "creation_date": 1521084167, "post_id": 49154957, "comment_id": 85584915, "body": "Didnt work, :(. Throws a NullPointerException."}], "owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520999743, "creation_date": 1520434789, "last_edit_date": 1520999743, "question_id": 49154957, "link": "https://stackoverflow.com/questions/49154957/when-dynamically-setting-text-of-a-textview-throws-an-error-that-the-textview-c", "title": "When Dynamically setting text of a textview, throws an error that the TextView can not be Empty?", "body": "<p>I am building a simple application where in I am trying to display the 'name' and the 'email' address of the user who just logged in. \nI am getting the value from Intent Extra. \nWhen I log the intent extras in the console,it does displays. However, it only works when I log it. \nWhen I try to assign it to set the text of the text view, it throws the following error.</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: faculty_nav_header_name must not be null.</p>\n</blockquote>\n\n<p>Here is the code for it:\nThis is where I am trying access the member variables outside the object.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    fun setupUI(){\r\n        faculty_home_dateStamp.text = getDate_of_month()\r\n        faculty_home_dayStamp.text = getDay_of_week()\r\n        val previousIntentValueName = intent.getCharSequenceExtra(LOGIN_TO_FACULTY_INTENT_USER_NAME)\r\n       val previousIntentValueEmail = intent.getCharSequenceExtra(LOGIN_TO_FACULTY_INTENT_USER_EMAIL)\r\n       println(TAG + \"name : \" + previousIntentValueName + \",  Email : \"+ previousIntentValueEmail )\r\n      faculty_nav_header_name.text = previousIntentValueName\r\n      faculty_nav_header_email.text = previousIntentValueEmail\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And here is my nav_header code snippet:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/Linear_layout\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"@dimen/nav_header_height\"\r\n    android:background=\"@color/sicsrYellow\"\r\n    android:gravity=\"bottom\"\r\n    android:theme=\"@style/ThemeOverlay.AppCompat.Dark\"&gt;\r\n\r\n    &lt;TextView\r\n        android:id=\"@+id/faculty_nav_header_name\"\r\n        android:layout_width=\"199dp\"\r\n        android:layout_height=\"42dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:layout_marginTop=\"32dp\"\r\n        android:paddingTop=\"@dimen/nav_header_vertical_spacing\"\r\n        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"\r\n        android:textSize=\"22sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        android:text=\" \"\r\n        tools:text=\"Farhana Desai\" /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=\"@+id/faculty_nav_header_email\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:textSize=\"18sp\"\r\n        android:text=\" \"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/faculty_nav_header_name\"\r\n        tools:text=\"farhana.desai@sicsr.ac.in\" /&gt;\r\n\r\n    &lt;ImageButton\r\n        android:id=\"@+id/faculty_nav_header_setting\"\r\n        android:layout_width=\"50dp\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:background=\"@color/sicsrYellow\"\r\n        android:onClick=\"nav_header_setting_clicked\"\r\n        android:scaleType=\"centerCrop\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/faculty_nav_header_email\"\r\n        app:srcCompat=\"@drawable/ic_001_settings\"\r\n        android:contentDescription=\"@string/nav_header_setting_image_button\" /&gt;\r\n\r\n    &lt;Button\r\n        android:id=\"@+id/faculty_nav_header_logout\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:background=\"@color/sicsrYellow\"\r\n        android:onClick=\"nav_header_logout_clicked\"\r\n        android:text=\"@string/logout\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/faculty_nav_header_email\" /&gt;\r\n\r\n&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I am not sure where I am going wrong. Please have a look and see if you find anything to make this work. \nNote: I am using this nav header for all my avtivities, can that possibly cause this to not work?</p>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "rendering", "android-support-library"], "comments": [{"owner": {"reputation": 2047, "user_id": 7319704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nO22o.jpg?s=128&g=1", "display_name": "Abhinav Gupta", "link": "https://stackoverflow.com/users/7319704/abhinav-gupta"}, "edited": false, "score": 0, "creation_date": 1520429623, "post_id": 49153215, "comment_id": 85310788, "body": "show your gradle file"}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "reply_to_user": {"reputation": 2047, "user_id": 7319704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nO22o.jpg?s=128&g=1", "display_name": "Abhinav Gupta", "link": "https://stackoverflow.com/users/7319704/abhinav-gupta"}, "edited": false, "score": 0, "creation_date": 1520430207, "post_id": 49153215, "comment_id": 85311166, "body": "Gradle file updated @AbhinavGupta"}, {"owner": {"reputation": 2276, "user_id": 915756, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/r0k4f.jpg?s=128&g=1", "display_name": "Michal Vician", "link": "https://stackoverflow.com/users/915756/michal-vician"}, "edited": false, "score": 0, "creation_date": 1569316142, "post_id": 49153215, "comment_id": 102548214, "body": "For me the solution was to delete gradle cache and clean-rebuild the project.The problem was obviously in Gradle linking process with cached data."}], "answers": [{"comments": [{"owner": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 4, "creation_date": 1522409299, "post_id": 49223152, "comment_id": 86154420, "body": "came here after updating to android studio 3.1, so for me its not fixed."}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 0, "creation_date": 1522410878, "post_id": 49223152, "comment_id": 86155187, "body": "@Odys ok now I see, I didn&#39;t notice that the error in layout preview is still there, but, the CardView is rendered without workaround, are you having the same?"}, {"owner": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 2, "creation_date": 1522421153, "post_id": 49223152, "comment_id": 86160391, "body": "Your 1st suggestion is correct and removes the problem, which exists in Android Studio v3.1"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 0, "creation_date": 1522421661, "post_id": 49223152, "comment_id": 86160708, "body": "@Odys I don&#39;t understand one thing, I&#39;m using 3.1 now and I can see the CardView in the preview without the workaround, but I still see the error logged when clicking on <code>!</code>. Aren&#39;t you seeing the CardView at all on 3.1?"}, {"owner": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 0, "creation_date": 1522422526, "post_id": 49223152, "comment_id": 86161156, "body": "Yes I was but not correctly. I reverted to 3.0.1 after wasting half day. Thing is that lots of the designer stuff are broken. The designer, dagger, code suggestions, linter, maybe more.."}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 8299, "user_id": 245495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K5cIE.jpg?s=128&g=1", "display_name": "Odys", "link": "https://stackoverflow.com/users/245495/odys"}, "edited": false, "score": 0, "creation_date": 1522422831, "post_id": 49223152, "comment_id": 86161316, "body": "@Odys thx for the info, I just tried 3.1 but at work we decided not to update yet, I guess it was a wise decision :)"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 563, "user_id": 1150558, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f25b923a58bdb052e8db0ccd1655861e?s=128&d=identicon&r=PG", "display_name": "Mian.Ammar", "link": "https://stackoverflow.com/users/1150558/mian-ammar"}, "edited": false, "score": 0, "creation_date": 1527340957, "post_id": 49223152, "comment_id": 88097544, "body": "@Mian.Ammar just out of curiosity, are you able to see the CardView without workaround? What I see on AS 3.1.2 is that the error is logged in the preview, but I can see the CardView rendered"}, {"owner": {"reputation": 563, "user_id": 1150558, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f25b923a58bdb052e8db0ccd1655861e?s=128&d=identicon&r=PG", "display_name": "Mian.Ammar", "link": "https://stackoverflow.com/users/1150558/mian-ammar"}, "edited": false, "score": 0, "creation_date": 1527417329, "post_id": 49223152, "comment_id": 88113355, "body": "@lelloman yes card view is rendered with elevation and corner radius but inside content is not visible"}, {"owner": {"reputation": 461, "user_id": 4508504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UCJGNRAMGSo/AAAAAAAAAAI/AAAAAAAAClU/MX12mq1iuvI/photo.jpg?sz=128", "display_name": "Abdul Wahid", "link": "https://stackoverflow.com/users/4508504/abdul-wahid"}, "edited": false, "score": 2, "creation_date": 1531646754, "post_id": 49223152, "comment_id": 89666771, "body": "work around 1 worked for me. i am using andriod studio 3.1.3"}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1533160839, "post_id": 49223152, "comment_id": 90250061, "body": "AAHHH I&#39;ve had this problem for SO long. Workaround 1 worked for me, thank you very very much!"}], "tags": [], "owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "is_accepted": true, "score": 92, "last_activity_date": 1522412079, "last_edit_date": 1522412079, "creation_date": 1520790406, "answer_id": 49223152, "question_id": 49153215, "link": "https://stackoverflow.com/questions/49153215/failed-to-find-style-cardview-style-in-current-theme/49223152#49223152", "title": "failed to find style &#39;cardView Style&#39; in current theme", "body": "<p>Checking the source of <code>CardView</code> one can see that the constructor</p>\n\n<pre><code>public CardView(@NonNull Context context, @Nullable AttributeSet attrs) {\n    super(context, attrs);\n    initialize(context, attrs, 0);\n}\n</code></pre>\n\n<p>has been changed to </p>\n\n<pre><code>public CardView(@NonNull Context context, @Nullable AttributeSet attrs) {\n    this(context, attrs, R.attr.cardViewStyle);\n}\n</code></pre>\n\n<p>And the new attribute <code>cardViewStyle</code> is defined in the library. I guess that the Android Studio preview is not including the value for this attribute from the library, for some reason. I'm not sure if it usually resolves custom attributes defined in libraries and this is a bug, or if this is intended.</p>\n\n<p><strong>Workaround 1</strong></p>\n\n<p>Resolve the attribute in your theme (maybe only in debug version), this way the error is gone. <code>@style/CardView</code> is already defined in the support library so you don't need to create the style, just reference it.</p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n    &lt;!-- Customize your theme here. --&gt;\n    &lt;item name=\"cardViewStyle\"&gt;@style/CardView&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>Be sure to use <code>AppTheme</code> in the layout preview and clean build.</p>\n\n<p><strong>Workaround 2</strong></p>\n\n<p>Add the style with <code>tools</code> namespace so that it won't affect your production code. The rendering error will be logged, but you will see the <code>CardView</code> anyway</p>\n\n<pre><code>&lt;android.support.v7.widget.CardView\n    tools:style=\"@style/CardView\"\n    ...\n</code></pre>\n\n<p><strong>Good news</strong></p>\n\n<p>Android Studio 3.1 seems to be handling this correctly, no workaround needed (the error in the layout preview is still logged though).</p>\n\n<p>On Android Studio 3.2 (currently in Canary channel) the error is gone.</p>\n"}, {"tags": [], "owner": {"reputation": 425, "user_id": 5356531, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0a5G.jpg?s=128&g=1", "display_name": "Dmitry Nevzorov", "link": "https://stackoverflow.com/users/5356531/dmitry-nevzorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1528055974, "creation_date": 1528055974, "answer_id": 50670475, "question_id": 49153215, "link": "https://stackoverflow.com/questions/49153215/failed-to-find-style-cardview-style-in-current-theme/50670475#50670475", "title": "failed to find style &#39;cardView Style&#39; in current theme", "body": "<p>In my case the reason of the error with CardView was because of the wrong listheader attribute of a child Spinner. Alongside the <code>failed to find style 'cardView Style' in current theme</code> error message I got <code>Spinner adapter view type count must be 1</code>, so the roots of the CardView failing were surprisingly in Spinner rendering failure. </p>\n"}, {"comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 781, "user_id": 1302592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59265388f753c66567f25af30d6467f5?s=128&d=identicon&r=PG", "display_name": "Dev", "link": "https://stackoverflow.com/users/1302592/dev"}, "edited": false, "score": 1, "creation_date": 1543238191, "post_id": 51235455, "comment_id": 93833393, "body": "@Dev better migrate to <code>androidx.cardview:cardview:1.0.0</code> (which equals <code>28.0.0</code> final). these <code>alpha</code>, <code>beta</code> and <code>rc</code>version were never meant to be &quot;stable&quot;."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 4, "last_activity_date": 1543238459, "last_edit_date": 1543238459, "creation_date": 1531079186, "answer_id": 51235455, "question_id": 49153215, "link": "https://stackoverflow.com/questions/49153215/failed-to-find-style-cardview-style-in-current-theme/51235455#51235455", "title": "failed to find style &#39;cardView Style&#39; in current theme", "body": "<p>updating the <code>CardView</code> from <a href=\"https://mvnrepository.com/artifact/com.android.support/cardview-v7/27.1.1\" rel=\"nofollow noreferrer\">27.1.1</a> to <a href=\"https://mvnrepository.com/artifact/com.android.support/cardview-v7/28.0.0-alpha3\" rel=\"nofollow noreferrer\">28.0.0-alpha3</a> fixed the XML preview for me on AS 3.1.3.</p>\n\n<pre><code>implementation \"com.android.support:cardview-v7:28.0.0-alpha3\"\n</code></pre>\n\n<p>it still complains, but it renders the preview. </p>\n\n<p>there's also a new <a href=\"https://developer.android.com/topic/libraries/support-library/refactor\" rel=\"nofollow noreferrer\">androidx</a> class now, which should be the same:</p>\n\n<pre><code>implementation \"androidx.cardview:cardview:1.0.0\"\n</code></pre>\n\n<p>when updating <code>com.android.support:design</code> to <code>28.0.0-alpha3</code>, it hints for:</p>\n\n<pre><code>The resource @style/CardView is marked as private in com.android.support:design\n</code></pre>\n\n<p>downgrading back to API 27 with buildTools 27.0.3 &amp; supportLibrary 27.1.1 also prevents the issues. might upgrade to <code>28.0.0</code> with <a href=\"https://androidstudio.googleblog.com/2018/06/android-studio-32-beta-2-available.html\" rel=\"nofollow noreferrer\">Android Studio 3.2</a> then.</p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 5787742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2059c69ac7043d5b1504eb75c5be910d?s=128&d=identicon&r=PG", "display_name": "Anirban Das", "link": "https://stackoverflow.com/users/5787742/anirban-das"}, "is_accepted": false, "score": 9, "last_activity_date": 1533884645, "creation_date": 1533884645, "answer_id": 51780825, "question_id": 49153215, "link": "https://stackoverflow.com/questions/49153215/failed-to-find-style-cardview-style-in-current-theme/51780825#51780825", "title": "failed to find style &#39;cardView Style&#39; in current theme", "body": "<p>I also had the same problem, so I added</p>\n\n<pre><code>&lt;item name=\"cardViewStyle\"&gt;@style/CardView&lt;/item&gt;\n</code></pre>\n\n<p>in my styles.xml file. But it was showing a warning \"The resource @style/CardView is marked as private in com.android.support:design\". </p>\n\n<p>So, after that I tried this one</p>\n\n<pre><code>&lt;item name=\"cardViewStyle\"&gt;@style/CardView.Light&lt;/item&gt;\n</code></pre>\n\n<p>and this worked for me. I am using Android Studio 3.1.4 and Gradle 4.4.</p>\n"}], "owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26611, "favorite_count": 5, "accepted_answer_id": 49223152, "answer_count": 4, "score": 50, "last_activity_date": 1543238459, "creation_date": 1520429547, "last_edit_date": 1540869893, "question_id": 49153215, "link": "https://stackoverflow.com/questions/49153215/failed-to-find-style-cardview-style-in-current-theme", "title": "failed to find style &#39;cardView Style&#39; in current theme", "body": "<p>After updating support library version <code>27.1.0</code> <strong>Android Studio</strong> unable to render CardView. It shows error message as </p>\n\n<pre><code>failed to find style 'cardView Style' in current theme\n</code></pre>\n\n<p>But no error in compiling and no difference while seeing on the phone.</p>\n\n<p>I have reverted the support library version to <code>27.0.2</code> and it's rendering fine.</p>\n\n<p>The issue with support library or <strong>Android studio</strong>? How to fix this?</p>\n\n<p><strong>App Level Gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'realm-android'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 27\n    defaultConfig {\n        applicationId \"com.tmmmt.tmmmt\"\n        minSdkVersion 19\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            buildConfigField 'String', 'FS_CLIENT_ID', FOURSQUARE_CLIENT_ID\n            buildConfigField 'String', 'FS_CLIENT_SECRET', FOURSQUARE_CLIENT_SECRET\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n        debug {\n            minifyEnabled false\n            buildConfigField 'String', 'FS_CLIENT_ID', FOURSQUARE_CLIENT_ID\n            buildConfigField 'String', 'FS_CLIENT_SECRET', FOURSQUARE_CLIENT_SECRET\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    flavorDimensions \"default\"\n\n    productFlavors {\n        dev {\n            dimension \"default\"\n            versionNameSuffix \"-dev\"\n            buildConfigField 'String', 'BASE_URL', BASE_URL_DEV\n            manifestPlaceholders = [GEO_API_KEY: GOOGLE_MAP_KEY_DEV]\n        }\n\n        beta {\n            dimension \"default\"\n            versionNameSuffix \"-beta\"\n            buildConfigField 'String', 'BASE_URL', BASE_URL_BETA\n            manifestPlaceholders = [GEO_API_KEY: GOOGLE_MAP_KEY_BETA]\n        }\n\n        live {\n            dimension \"default\"\n            buildConfigField 'String', 'BASE_URL', BASE_URL_LIVE\n\n            manifestPlaceholders = [GEO_API_KEY: GOOGLE_MAP_KEY_LIVE]\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation \"org.jetbrains.anko:anko-common:$anko_version\"\n    implementation \"com.android.support:appcompat-v7:$support_version\"\n    implementation \"com.android.support:support-v13:$support_version\"\n    implementation \"com.android.support:design:$support_version\"\n    implementation \"com.android.support:cardview-v7:$support_version\"\n    implementation \"com.google.firebase:firebase-messaging:$play_version\"\n    implementation \"com.google.android.gms:play-services-maps:$play_version\"\n    implementation \"com.google.android.gms:play-services-location:$play_version\"\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.squareup.retrofit2:retrofit:2.3.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.3.0'\n    implementation 'com.squareup.okhttp3:logging-interceptor:3.8.0'\n    implementation 'com.squareup.okhttp3:okhttp:3.8.1'\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n    implementation 'com.google.code.gson:gson:2.8.0'\n    implementation 'com.wang.avi:library:2.1.3'\n    implementation 'com.tmmmt.library:arrowtab:1.3'\n    implementation 'com.github.stfalcon:chatkit:0.2.2'\n    implementation 'com.amazonaws:aws-android-sdk-core:2.6.16'\n    implementation 'com.amazonaws:aws-android-sdk-cognito:2.6.16'\n    implementation 'com.amazonaws:aws-android-sdk-s3:2.6.16'\n    implementation 'com.orhanobut:logger:2.1.1'\n    implementation 'com.tmmmt.library:animations:0.6'\n    implementation 'com.github.bumptech.glide:glide:4.6.1'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.6.1'\n    compile('io.socket:socket.io-client:1.0.0') {\n        exclude group: 'org.json', module: 'json'\n    }\n    /*Fort*/\n    implementation project(':FortSDKv1.4.1')\n    implementation 'com.victor:lib:1.0.1'\n    implementation 'com.shamanland:fonticon:0.1.8'\n    implementation('com.nispok:snackbar:2.11.0') {\n        exclude group: 'com.google.android', module: 'support-v4'\n    }\n    implementation 'com.google.guava:guava:23.0-android'\n    implementation 'org.bouncycastle:bcprov-jdk16:1.46'\n    implementation 'commons-codec:commons-codec:1.10'\n    /*Fort*/\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p><strong>Project Level Gradle:</strong></p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.30'\n    ext.anko_version = '0.10.1'\n    ext.support_version = '27.1.0'\n    ext.play_version = '11.8.0'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.0.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:4.3.2\"\n        classpath 'com.google.gms:google-services:3.1.0'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven {\n            url \"https://mymavenrepo.com/repo/eDGOo6Dqr4f6uNA0HoWX/\"\n            credentials {\n                username = 'myMavenRepo'\n                password = 'tmmmt123'\n            }\n        }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>There is no such error from <code>Android Studio 3.2</code>. The error was gone completely.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 459, "user_id": 4869129, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-fd8TAjKTPUo/AAAAAAAAAAI/AAAAAAAAAGY/pC2bKicneaw/photo.jpg?sz=128", "display_name": "Milan Hirpara", "link": "https://stackoverflow.com/users/4869129/milan-hirpara"}, "edited": false, "score": 0, "creation_date": 1520428391, "post_id": 49152786, "comment_id": 85309968, "body": "you can use image loader library like glide in your adapter to load image, provide full image url to help you better."}, {"owner": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1520428570, "post_id": 49152786, "comment_id": 85310072, "body": "did you notify RecyclerView that the item was inserted?"}, {"owner": {"reputation": 504, "user_id": 7852129, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f9d0c267ee6fdb333ef05fd137594c06?s=128&d=identicon&r=PG&f=1", "display_name": "Rushabh Shah", "link": "https://stackoverflow.com/users/7852129/rushabh-shah"}, "edited": false, "score": 1, "creation_date": 1520430375, "post_id": 49152786, "comment_id": 85311277, "body": "Yes I think issue is that adapter is not notified after adding items!!"}, {"owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "edited": false, "score": 0, "creation_date": 1520517690, "post_id": 49152786, "comment_id": 85354834, "body": "Thanks to Stefan and Rushabh for the suggestions, the problem came from the emulator I used, on a normal phone everything works fine. Seemed to be a problem with the storage...."}, {"owner": {"reputation": 4530, "user_id": 2973474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100004343619888/picture?type=large", "display_name": "alexisdevarennes", "link": "https://stackoverflow.com/users/2973474/alexisdevarennes"}, "edited": false, "score": 0, "creation_date": 1576767591, "post_id": 49152786, "comment_id": 105011555, "body": "Welcome to SO hansTheFranz, please consider updating your answer with the actual reason this was not working or closing the question."}], "answers": [{"comments": [{"owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "edited": false, "score": 0, "creation_date": 1520517556, "post_id": 49154391, "comment_id": 85354745, "body": "Unfortunately updating the Adapter was not the Problem, It was a Emulator/filestorage problem. Thanks for the detailed answer, I definitly learned something."}], "tags": [], "owner": {"reputation": 11, "user_id": 8948226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59d00ffef8592a90942ea7bf9235dcd?s=128&d=identicon&r=PG&f=1", "display_name": "\u041e\u043b\u0435\u043a\u0441\u0456\u0439 \u0417\u043e\u043b\u043e\u0442\u0430\u0440\u044c\u043e\u0432", "link": "https://stackoverflow.com/users/8948226/%d0%9e%d0%bb%d0%b5%d0%ba%d1%81%d1%96%d0%b9-%d0%97%d0%be%d0%bb%d0%be%d1%82%d0%b0%d1%80%d1%8c%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1520433139, "creation_date": 1520433139, "answer_id": 49154391, "question_id": 49152786, "link": "https://stackoverflow.com/questions/49152786/load-image-via-url-into-recycleradapter/49154391#49154391", "title": "Load image via URL into RecyclerAdapter", "body": "<p>Unlike ListView, there is no way to add or remove items directly through the RecyclerView adapter. You need to make changes to the data source directly and notify the adapter of any changes.There are many method available to use when notifying the adapter of different changes:</p>\n\n<ul>\n<li>notifyItemChanged(int pos) : Notify that item at position has changed.</li>\n<li>notifyItemInserted(int pos): Notify that item reflected at position has been newly inserted.</li>\n<li>notifyItemRemoved(int pos): Notify that items previously located at position has been removed from the data set.</li>\n<li>notifyDataSetChanged(): Notify that the dataset has changed. Use only as last resort.</li>\n</ul>\n\n<p>Every time we want to add or remove items from the RecyclerView, we will need to explicitly inform to the adapter of the event. Unlike the ListView adapter, a RecyclerView adapter should not rely on notifyDataSetChanged() since the more granular actions should be used. See the <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter.html\" rel=\"nofollow noreferrer\">API documentation</a> for more details.</p>\n\n<p>Also, if you are intending to update an existing list, make sure to get the current count of items before making any changes. For instance, a <code>getItemCount()</code> on the adapter should be called to record the first index that will be changed.</p>\n\n<pre><code>// record this value before making any changes to the existing list\nint curSize = itemArrayAdapter.getItemCount();\n\n// update the existing list\nnewItems.add(Item(....img_bitmap));\n\n// curSize should represent the first element that got added\n// newItems.size() represents the itemCount\nitemArrayAdapter.notifyItemRangeInserted(curSize, newItems.size());\n</code></pre>\n"}], "owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520433139, "creation_date": 1520428238, "question_id": 49152786, "link": "https://stackoverflow.com/questions/49152786/load-image-via-url-into-recycleradapter", "title": "Load image via URL into RecyclerAdapter", "body": "<p>I have an API which returns JSON and I would like to load an Image from a URL which is provided by this API. The Image should be passed into Adapter for a Recycling View. \nRight now all Items which contain an Imgae_URL are getting skipped by my Adapter and I dont really understand why. </p>\n\n<pre><code>if (json_img_url.isNotEmpty()) {\n  Executors.newSingleThreadExecutor().execute({\n    val conn = URL(json_img_url).openConnection()\n    conn.connect()\n    val iStream:InputStream = conn.getInputStream()\n    val img_bitmap:Bitmap? = BitmapFactory.decodeStream(iStream)\n    newItems.add(Item(....img_bitmap))\n})\n....\nitemArrayAdapter.addItems(newItems)\n</code></pre>\n\n<p>URL :<code>\"https://s3.us-east-2.amazonaws.com/c....\"</code>\nThe URls used are valid and Images on the S3 Bucket are all public. </p>\n\n<p>The If statment returns <code>true</code> (I checked with <code>Log.d</code>) but the Item does not appear on the Phone, I dont recive an error and the app does not crash its just like the Item was never there...</p>\n\n<p>I know there are librarys like Picasso or Glide but even with them I could not make it work and to be honest I would like to accomplish this task without a having to install an extra package, it just feels wrong. </p>\n"}, {"tags": ["libgdx", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1520427768, "post_id": 49152485, "comment_id": 85309502, "body": "<a href=\"http://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 0, "last_activity_date": 1520428361, "creation_date": 1520428361, "answer_id": 49152825, "question_id": 49152485, "link": "https://stackoverflow.com/questions/49152485/how-to-implement-input-handling-in-libgdx-with-ananymous-inner-class-in-kotlin/49152825#49152825", "title": "How to implement input handling in libgdx with ananymous inner class in kotlin", "body": "<p>Should be:</p>\n\n<pre><code>Gdx.input.inputProcessor = object : InputAdapter() {\n    override fun touchDown(x: Int, y: Int, pointer: Int, button: Int): Boolean {\n        // My code\n        return true\n    }\n    override fun touchUp(x: Int, y: Int, pointer: Int, button: Int): Boolean {\n        // My code\n        return true\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 9375612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c3ca3921153d06cdbcfe29702809b9?s=128&d=identicon&r=PG&f=1", "display_name": "Divelix", "link": "https://stackoverflow.com/users/9375612/divelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49152825, "answer_count": 1, "score": 0, "last_activity_date": 1520429315, "creation_date": 1520427241, "last_edit_date": 1520429315, "question_id": 49152485, "link": "https://stackoverflow.com/questions/49152485/how-to-implement-input-handling-in-libgdx-with-ananymous-inner-class-in-kotlin", "title": "How to implement input handling in libgdx with ananymous inner class in kotlin", "body": "<p>I want to implement below example from <strong>libgdx</strong> wiki in <strong>Kotlin</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/zWDiV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zWDiV.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Here is my attempt:</strong></p>\n\n<pre><code>Gdx.input.inputProcessor = InputAdapter() {\n        override fun touchDown(x: Int, y: Int, pointer: Int, button: Int): Boolean {\n            // My code\n            return true\n        }\n    }\n</code></pre>\n\n<p>but I definitely do something wrong</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 11, "creation_date": 1520426181, "post_id": 49152058, "comment_id": 85308394, "body": "I&#39;m curious where you searched. This syntax is explained on the very first substantial page of the official Kotlin documentation: <a href=\"http://kotlinlang.org/docs/reference/basic-syntax.html#using-string-templates\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "edited": false, "score": 1, "creation_date": 1520476335, "post_id": 49152058, "comment_id": 85334388, "body": "because you can get rid of the + sign. Use <code>println(&quot;with : ${arrayNumber.size}&quot;)</code> and not what you put. Reduces the noise by eliminating string concatenation."}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "reply_to_user": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "edited": false, "score": 0, "creation_date": 1520483192, "post_id": 49152058, "comment_id": 85336152, "body": "@Mikezx6r thanks for simple solution."}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520483282, "post_id": 49152058, "comment_id": 85336186, "body": "@yole thanks for suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 3, "last_activity_date": 1520426162, "creation_date": 1520426162, "answer_id": 49152133, "question_id": 49152058, "link": "https://stackoverflow.com/questions/49152058/why-use-for-print-message-in-kotlin/49152133#49152133", "title": "Why use $ for print message in kotlin", "body": "<p>The first form with <code>$</code> is a string template, that is a piece of code that is evaluated and whose result is concatenated into the string. </p>\n\n<p>The two forms are basically equivalent, but using string templates usually leads to more compact code with less syntactic noise.</p>\n\n<p>See: <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#string-templates\" rel=\"nofollow noreferrer\">String Templates</a> in the Kotlin language reference</p>\n"}], "owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": -13, "last_activity_date": 1599584819, "creation_date": 1520425924, "last_edit_date": 1599584819, "question_id": 49152058, "link": "https://stackoverflow.com/questions/49152058/why-use-for-print-message-in-kotlin", "title": "Why use $ for print message in kotlin", "body": "<p>I created basic app which will demonstrate about <code>kotlin</code> programming.\nhere i used method which will print array size, i used 2 scenario for print.</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n            super.onCreate(savedInstanceState)\n            setContentView(R.layout.activity_main)      \n            main()  \n        }\n           private fun main(){\n          val letter : Char\n          val arrayNumber: IntArray = intArrayOf(1,2,3,4,5,6,7,8,9)        \n          println(&quot;with : &quot; +&quot;${arrayNumber.size}&quot;)\n          println(&quot;without : &quot; +arrayNumber.size)        \n      }\n}\n</code></pre>\n<p>here is output :</p>\n<pre><code> I/System.out: with : 9\n I/System.out: without : 9\n</code></pre>\n<p>I searched a lot but not getting positive, if anybody know it will be more helpful.</p>\n"}, {"tags": ["android", "kotlin", "android-tv", "android-search"], "answers": [{"tags": [], "owner": {"reputation": 6531, "user_id": 3231532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5a361b40676f58cb3304c7909f2582a?s=128&d=identicon&r=PG&f=1", "display_name": "Kelevandos", "link": "https://stackoverflow.com/users/3231532/kelevandos"}, "is_accepted": false, "score": 1, "last_activity_date": 1520428134, "creation_date": 1520428134, "answer_id": 49152759, "question_id": 49151815, "link": "https://stackoverflow.com/questions/49151815/making-an-android-tv-app-searchable-kotlin/49152759#49152759", "title": "Making an Android TV app searchable (Kotlin)", "body": "<p>Ok, this was REALLY annoying to track...</p>\n\n<p>I created my <code>ContentProvider</code> implementation in Kotlin, instead of Java. Turns out that if I run the very same logic written in Java, it works perfectly fine.</p>\n\n<p>I have no time or will to go into the details, but I would guess that one of the overriden methods has a non-null param, gets a null there form the system, an exception gets thrown and the <code>ContentProvider</code> is silently killed.</p>\n\n<p>So <strong>if you your <code>ContentProvider</code> is in Kotlin and does not work, convert it to Java and try again.</strong></p>\n"}], "owner": {"reputation": 6531, "user_id": 3231532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5a361b40676f58cb3304c7909f2582a?s=128&d=identicon&r=PG&f=1", "display_name": "Kelevandos", "link": "https://stackoverflow.com/users/3231532/kelevandos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1607333943, "creation_date": 1520425182, "last_edit_date": 1520428162, "question_id": 49151815, "link": "https://stackoverflow.com/questions/49151815/making-an-android-tv-app-searchable-kotlin", "title": "Making an Android TV app searchable (Kotlin)", "body": "<p>I am trying to make my app searchable, according to <a href=\"https://developer.android.com/training/tv/discovery/searchable.html\" rel=\"nofollow noreferrer\">this documentation</a>. However, it does not work.</p>\n\n<p>I tried <a href=\"https://github.com/googlesamples/androidtv-Leanback\" rel=\"nofollow noreferrer\">the sample app</a> (which is the source of the code in the documentation) and it works just fine. But when I tried to create a simple app from scratch using the tutorial, I was not able to get it to work.</p>\n\n<p>I have browsed the most popular answers on SO, including <a href=\"https://stackoverflow.com/questions/17240057/android-searchrecentsuggestions-suggestions-do-not-get-displayed-when-typing-i\">this one</a> and <a href=\"https://stackoverflow.com/questions/32497514/content-provider-query-not-being-called-android-tv\">this one</a>. Still no luck :-(</p>\n\n<p>There is this part in the Manifest.xml of the sample that looks a bit suspicious</p>\n\n<pre><code>&lt;path-permission \n    android:pathPrefix=\"/search\" \n    android:readPermission=\"android.permission.GLOBAL_SEARCH\" /&gt;\n</code></pre>\n\n<p>but I am not sure what to make of it...</p>\n\n<p>Does anybody have experience with this? Is there some super-common pitfall I could be falling into?</p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 4408, "user_id": 4916627, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ainvx.jpg?s=128&g=1", "display_name": "Andr&#233; Kool", "link": "https://stackoverflow.com/users/4916627/andr%c3%a9-kool"}, "edited": false, "score": 0, "creation_date": 1520424816, "post_id": 49151572, "comment_id": 85307501, "body": "What are you getting here: <code>role = it.child(&quot;role&quot;).value.toString()</code>. Also can you add a sample of your database as text?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1520425428, "post_id": 49151572, "comment_id": 85307885, "body": "Please add your database structure."}, {"owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "edited": false, "score": 0, "creation_date": 1520426519, "post_id": 49151572, "comment_id": 85308598, "body": "<a href=\"https://i.stack.imgur.com/meQCj.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/meQCj.png</a> here"}], "answers": [{"tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 0, "last_activity_date": 1520427765, "creation_date": 1520427765, "answer_id": 49152656, "question_id": 49151572, "link": "https://stackoverflow.com/questions/49151572/valueeventlistener-is-assigned-to-the-right-path-but-is-it-not-reading-the-value/49152656#49152656", "title": "ValueEventListener is assigned to the right path but is it not reading the value of the child node, though returns the right key", "body": "<p>You're looping over the children of the resulting snapshot. Such a loop is only needed when you can potentially have multiple results, which is not the case here. Since you are directly reading the node of the specific user you want to load, there is only one result. </p>\n\n<p>So remove the loop and you should be good:</p>\n\n<pre><code>override fun onDataChange(dataSnapshot: DataSnapshot?) {\n    role = it.child(\"role\").value.toString()\n    if(role == \"faculty\"){\n        FacultyDataService.storeFacultyData(it) {\n            when(it){\n                true -&gt; complete(true)\n                false -&gt; Log.d(TAG, \"FacultyDataService.storeFacultyData() failed\")\n            }\n        }\n    } else if(role == \"student\"){\n        StudentDataService.storeStudentData(it) {\n            when(it){\n                true -&gt; complete(true)\n                false -&gt; Log.d(TAG, \"StudentDataService.storeStudentData() failed\")\n            }\n        }\n    } else {\n        Log.d(TAG,\"Role is neither student nor faculty. It is: \"+role)\n    }\n}//[End : onDataChanged]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9378227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKu9Ulr1Clw/AAAAAAAAAAI/AAAAAAAAGgI/-qhFvu7clAo/photo.jpg?sz=128", "display_name": "avi silwal", "link": "https://stackoverflow.com/users/9378227/avi-silwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 49152656, "answer_count": 1, "score": 1, "last_activity_date": 1520427798, "creation_date": 1520424460, "last_edit_date": 1520427798, "question_id": 49151572, "link": "https://stackoverflow.com/questions/49151572/valueeventlistener-is-assigned-to-the-right-path-but-is-it-not-reading-the-value", "title": "ValueEventListener is assigned to the right path but is it not reading the value of the child node, though returns the right key", "body": "<p>I am making an attendance application for my college, where in to redirect user to their correct home activity based on what role they carry. To do the same, I have made 3 service classes, User-Role-Service, Faculty-Data-Service and Student-Data-Service.</p>\n\n<p>In, User-Role-Service singleton, it is reading the role of the user using it's 'uid' from firebase database. And according to the value returned it calls the function in Faculty-Data-Service or Student-Data-Service singleton to store user information.User-Role-Service Code:-</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>fun getRole (complete:(Boolean) -&gt; Unit) {\r\n        val auth = FirebaseAuth.getInstance()\r\n        val user = auth.currentUser?.uid\r\n        val ref = mDatabaseReference.child(\"Users\").child(user)\r\n        println(ref)\r\n        if( user != null) {//[Start : of Null Check]\r\n            //[Start : of ValueEventListener Object] --&gt; func# 2\r\n            mValueEventListener = object : ValueEventListener {\r\n                override fun onDataChange(dataSnapshot: DataSnapshot?) {\r\n                    dataSnapshot?.children?.forEach {\r\n                        role = it.child(\"role\").value.toString()\r\n                        if(role == \"faculty\"){\r\n                            FacultyDataService.storeFacultyData(it) {\r\n                                when(it){\r\n                                    true -&gt; complete(true)\r\n                                    false -&gt; Log.d(TAG, \"FacultyDataService.storeFacultyData() failed\")\r\n                                }\r\n                            }\r\n                        } else if(role == \"student\"){\r\n                            StudentDataService.storeStudentData(it) {\r\n                                when(it){\r\n                                    true -&gt; complete(true)\r\n                                    false -&gt; Log.d(TAG, \"StudentDataService.storeStudentData() failed\")\r\n                                }\r\n                            }\r\n                        } else {\r\n                            Log.d(TAG,\"Role is neither student nor faculty.\")\r\n                        }\r\n                    }//[End : forEach.]\r\n                }//[End : onDataChanged]\r\n                override fun onCancelled(p0: DatabaseError?) {\r\n                    Log.d(TAG, \"VEL database error\")\r\n                    complete(false)\r\n                }//[End : ^]\r\n            }//[End : func# 2.]\r\n        }//[End : of Null Check]\r\n        else{\r\n            Log.d(TAG, \"authToken is null\")\r\n        }\r\n        ref.addValueEventListener(mValueEventListener)\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This is the Log message that I am getting :</p>\n\n<blockquote>\n  <p>D/UserRoleService: Role is neither student nor faculty.</p>\n</blockquote>\n\n<p>I believe this is happening because it is not reading the value of the child node. But then it is at the right path as when I log the path it returns the right path and also returns the key of the child.\nI am not sure where I am going wrong, please guide.</p>\n\n<p>Firebase Structure here.</p>\n\n<p><a href=\"https://i.stack.imgur.com/meQCj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/meQCj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, I am passing the DataSnapshot as an argument to storeFacultyData(ds) and storeStudentData(ds) functions. Can that possibly creat any issue?</p>\n"}, {"tags": ["java", "spring", "kotlin", "spring-data-mongodb", "spring-webflux"], "comments": [{"owner": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "edited": false, "score": 0, "creation_date": 1520424503, "post_id": 49151066, "comment_id": 85307276, "body": "please improve your code snippets with something that&#39;s easier to understand. <code>X</code>s and <code>Y</code>s, no information about any type, ellipses everywhere. This is not helping."}], "answers": [{"tags": [], "owner": {"reputation": 1219, "user_id": 2304545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf126d5f82c44564c4ae0f830749e98?s=128&d=identicon&r=PG", "display_name": "mroman", "link": "https://stackoverflow.com/users/2304545/mroman"}, "is_accepted": true, "score": 4, "last_activity_date": 1520459948, "last_edit_date": 1520459948, "creation_date": 1520438016, "answer_id": 49156111, "question_id": 49151066, "link": "https://stackoverflow.com/questions/49151066/updating-object-with-spring-data-mongodb-and-kotlin-is-not-working/49156111#49156111", "title": "updating object with spring data mongodb and kotlin is not working", "body": "<p>Nothing happens until someone subscribes to reactive Publisher. That's why it started to work when you used block(). If you need to make a call to DB and use the result in another DB request than use Mono / Flux operators like map(), flatMap(),... to build a pipeline of all the operations you need and after that return resulting Mono / Flux as controller\u2019s response. Spring will subscribe to that Mono / Flux and will return the request. You don't need to block it. And it is not recommended to do it (to use block() method).</p>\n\n<p>Short example how to work with MongoDB reactive repositories in Java:</p>\n\n<pre><code>@GetMapping(\"/users\")\npublic Mono&lt;User&gt; getPopulation() {\n    return userRepository.findOldest()\n            .flatMap(user -&gt; {              // process the response from DB\n                user.setTheOldest(true);\n                return userRepository.save(user);\n            })\n            .map(user -&gt; {...}); // another processing\n}\n</code></pre>\n"}], "owner": {"reputation": 4381, "user_id": 869793, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6fadc06638c199de728fab397530fd08?s=128&d=identicon&r=PG", "display_name": "tzortzik", "link": "https://stackoverflow.com/users/869793/tzortzik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2066, "favorite_count": 1, "accepted_answer_id": 49156111, "answer_count": 1, "score": 4, "last_activity_date": 1539258833, "creation_date": 1520422897, "question_id": 49151066, "link": "https://stackoverflow.com/questions/49151066/updating-object-with-spring-data-mongodb-and-kotlin-is-not-working", "title": "updating object with spring data mongodb and kotlin is not working", "body": "<p>I have the following request handler</p>\n\n<pre><code>fun x(req: ServerRequest) = req.toMono()\n    .flatMap {\n        ...\n        val oldest = myRepository.findOldest(...) // this is the object I want to modify\n        ...\n        val v= anotherMongoReactiveRepository.save(Y(...)) // this saves successfully\n        myRepository.save(oldest.copy(\n                remaining = (oldest.remaining - 1)\n        )) // this is not saved\n        ok().body(...)\n    }\n</code></pre>\n\n<p>and the following mongodb reactive repository</p>\n\n<pre><code>@Repository\ninterface MyRepository : ReactiveMongoRepository&lt;X, String&gt;, ... {\n}\n</code></pre>\n\n<p>The problem is that after the <code>save()</code> method is executed there is no changed in the object. I managed to fix the problem with <code>save().block()</code> but I don't know why the first save on the other repository works and this one isn't. Why is this <code>block()</code> required?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1520416504, "post_id": 49148801, "comment_id": 85302153, "body": "Don&#39;t use static classes but actual instances you can mock or -even better- fake."}], "answers": [{"comments": [{"owner": {"reputation": 2916, "user_id": 1365554, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/2cfb0dd57221f409fbf50f93b17eee6c?s=128&d=identicon&r=PG", "display_name": "aloj", "link": "https://stackoverflow.com/users/1365554/aloj"}, "edited": false, "score": 0, "creation_date": 1520419357, "post_id": 49148918, "comment_id": 85304012, "body": "The problem is when doing any(Context::class.java), it returns null. Mocking an object is fine."}], "tags": [], "owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "is_accepted": false, "score": -1, "last_activity_date": 1520416586, "creation_date": 1520416586, "answer_id": 49148918, "question_id": 49148801, "link": "https://stackoverflow.com/questions/49148801/mock-object-in-android-unit-test-with-kotlin-any-gives-null/49148918#49148918", "title": "Mock object in Android Unit test with kotlin - any() gives null", "body": "<p>When calling mock(), you don't have to pass in the class instance anymore. If the type can be inferred, you can just write:</p>\n\n<pre><code>val mock : MyClass = mock()\n</code></pre>\n\n<p>If the type cannot be inferred directly, use:</p>\n\n<pre><code>val mock = mock&lt;MyClass&gt;()\n</code></pre>\n\n<p>Hope it will help you!!</p>\n"}, {"comments": [{"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 1, "creation_date": 1551389117, "post_id": 49152722, "comment_id": 96633401, "body": "this works like a charm, but I don&#39;t get the magic jajajaja. Can you explain why this works?"}, {"owner": {"reputation": 465, "user_id": 9757968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tZAUg.jpg?s=128&g=1", "display_name": "Maxime Recuerda", "link": "https://stackoverflow.com/users/9757968/maxime-recuerda"}, "edited": false, "score": 2, "creation_date": 1563969026, "post_id": 49152722, "comment_id": 100875283, "body": "There is a broken link: &quot;<a href=\"https://github.com/googlesamples/android-architecture/blob/todo-mvp-kotlin/todoapp/app/src/test/java/com/example/android/architecture/blueprints/todoapp/MockitoKotlinHelpers.kt#L38\" rel=\"nofollow noreferrer\">here</a> they say that this should work&quot;. I can&#39;t edit  the post because there are too few differences."}], "tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": false, "score": 35, "last_activity_date": 1563994565, "last_edit_date": 1563994565, "creation_date": 1520427998, "answer_id": 49152722, "question_id": 49148801, "link": "https://stackoverflow.com/questions/49148801/mock-object-in-android-unit-test-with-kotlin-any-gives-null/49152722#49152722", "title": "Mock object in Android Unit test with kotlin - any() gives null", "body": "<p>Mockito often returns null when you call <code>any()</code> and that breaks kotlin's not null parameters.</p>\n\n<p>In mockito-kotlin they have a separate function for it, called <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/1.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/Mockito.kt#L47\" rel=\"noreferrer\">anyOrNull()</a>.</p>\n\n<p>You can also create your own function, <a href=\"https://github.com/googlesamples/android-architecture/blob/todo-mvp-kotlin/todoapp/app/src/test/java/com/example/android/architecture/blueprints/todoapp/MockitoKotlinHelpers.kt#L38\" rel=\"noreferrer\">here</a> they say that this should also work.</p>\n\n<pre><code>/**\n * Returns Mockito.any() as nullable type to avoid java.lang.IllegalStateException when\n * null is returned.\n */\nfun &lt;T&gt; any(): T = Mockito.any&lt;T&gt;()  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3174, "user_id": 49630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ba52691611fe835cdfb360b4c7b77d?s=128&d=identicon&r=PG", "display_name": "Rich Dougherty", "link": "https://stackoverflow.com/users/49630/rich-dougherty"}, "edited": false, "score": 0, "creation_date": 1571089561, "post_id": 51628975, "comment_id": 103116889, "body": "May need to add <code>@Suppress(&quot;UNCHECKED_CAST&quot;)</code> before the <code>unitialized()</code> definition."}], "tags": [], "owner": {"reputation": 387, "user_id": 9726299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wVRPr.jpg?s=128&g=1", "display_name": "Amrita", "link": "https://stackoverflow.com/users/9726299/amrita"}, "is_accepted": false, "score": 5, "last_activity_date": 1533113161, "creation_date": 1533113161, "answer_id": 51628975, "question_id": 49148801, "link": "https://stackoverflow.com/questions/49148801/mock-object-in-android-unit-test-with-kotlin-any-gives-null/51628975#51628975", "title": "Mock object in Android Unit test with kotlin - any() gives null", "body": "<p>Add the following code in your test class:</p>\n\n<pre><code>private fun &lt;T&gt; any(type : Class&lt;T&gt;): T {\n    Mockito.any(type)\n    return uninitialized()\n}\n\nprivate fun &lt;T&gt; uninitialized(): T = null as T\n</code></pre>\n"}], "owner": {"reputation": 2916, "user_id": 1365554, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/2cfb0dd57221f409fbf50f93b17eee6c?s=128&d=identicon&r=PG", "display_name": "aloj", "link": "https://stackoverflow.com/users/1365554/aloj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10734, "favorite_count": 4, "answer_count": 3, "score": 19, "last_activity_date": 1594111779, "creation_date": 1520416257, "last_edit_date": 1594111779, "question_id": 49148801, "link": "https://stackoverflow.com/questions/49148801/mock-object-in-android-unit-test-with-kotlin-any-gives-null", "title": "Mock object in Android Unit test with kotlin - any() gives null", "body": "<p>I'm trying to test my classes and I need to mock a <code>static</code> class. My code is the following:</p>\n<pre><code>PowerMockito.mockStatic(ToolTipUtil::class.java)\nPowerMockito.`when`(ToolTipUtil.wasToolTipShown(any(Context::class.java), &quot;&quot;)).thenReturn(true)\nval context = mock(Context::class.java)\npresenter.onResume(context)\nverify(view).setMenuButtonShown(eq(false))\n</code></pre>\n<p>But in the second line it throws an error:</p>\n<pre><code>&quot;java.lang.IllegalStateException: any(Context::class.java) must not be null&quot;\n</code></pre>\n<p>I've tried with <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">mockito-kotlin</a> and <a href=\"https://medium.com/@elye.project/befriending-kotlin-and-mockito-1c2e7b0ef791\" rel=\"nofollow noreferrer\">befriending-kotlin-and-mockito</a> with no exit. Do you know how to fix it?</p>\n"}, {"tags": ["android", "kotlin", "toast", "duration", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 3353, "user_id": 8524301, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RlSIc.jpg?s=128&g=1", "display_name": "Marko Pacak", "link": "https://stackoverflow.com/users/8524301/marko-pacak"}, "is_accepted": true, "score": 1, "last_activity_date": 1520416696, "creation_date": 1520416696, "answer_id": 49148954, "question_id": 49148583, "link": "https://stackoverflow.com/questions/49148583/android-setting-new-text-on-old-toast-and-renew-duration/49148954#49148954", "title": "Android: Setting new text on old toast and renew duration", "body": "<p>Even if there is, don't do that.</p>\n\n<p>From a user experience point of view, imagine if a <code>Toast</code> pops up and says <code>Your file was saved</code>, and then it suddenly changes to <code>Your file wasn't saved</code>.</p>\n\n<p>Without a well-defined graphical transaction between the two messages, the user is very likely to miss the text update.</p>\n\n<p>That's why the <code>Toast</code> is supposed to be an <code>immutable</code> element.</p>\n\n<p>If you need to communicate something new, use a different <code>Toast</code>.</p>\n\n<hr>\n\n<p>And this is actually a problem in some <code>Android</code> devices: two subsequent <code>Toast</code> messages often do not <code>fade-out</code> and <code>fade-in</code> <em>accentuatedly</em> enough; and if the text length if quite similar between the two messages, you'll probably not notice the latter.</p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 5826180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13aa3292c8f0476632d132907fd1755?s=128&d=identicon&r=PG&f=1", "display_name": "vtodorova", "link": "https://stackoverflow.com/users/5826180/vtodorova"}, "edited": false, "score": 0, "creation_date": 1520416922, "post_id": 49148968, "comment_id": 85302430, "body": "Yes, that&#39;s an option, but I want to have only one toast on the screen. What you suggest will display multiple stacked toasts."}, {"owner": {"reputation": 3529, "user_id": 6236752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773877099379452/picture?type=large", "display_name": "Nouman Ch", "link": "https://stackoverflow.com/users/6236752/nouman-ch"}, "reply_to_user": {"reputation": 189, "user_id": 5826180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13aa3292c8f0476632d132907fd1755?s=128&d=identicon&r=PG&f=1", "display_name": "vtodorova", "link": "https://stackoverflow.com/users/5826180/vtodorova"}, "edited": false, "score": 0, "creation_date": 1520417023, "post_id": 49148968, "comment_id": 85302491, "body": "yes will be the better option. you can also try snackbar which has far more advantages over toast in the perspective of design and ui/ux."}], "tags": [], "owner": {"reputation": 3529, "user_id": 6236752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773877099379452/picture?type=large", "display_name": "Nouman Ch", "link": "https://stackoverflow.com/users/6236752/nouman-ch"}, "is_accepted": false, "score": 1, "last_activity_date": 1520417131, "last_edit_date": 1520417131, "creation_date": 1520416729, "answer_id": 49148968, "question_id": 49148583, "link": "https://stackoverflow.com/questions/49148583/android-setting-new-text-on-old-toast-and-renew-duration/49148968#49148968", "title": "Android: Setting new text on old toast and renew duration", "body": "<p>Instead of using the same Toast object you can do something like this. As you know each time new object is created but because it's boundary is <code>method level</code> so object will be easily catched by <code>garbage collector</code>.</p>\n\n<pre><code>private fun updateToast(String message) {\n        count++\n\n        Toast.makeText(context, message, Toast.LENGTH_LONG).show()\n\n    }\n</code></pre>\n\n<p>and now call this method from your clickListner.</p>\n\n<p>if you want to show a single toast at a time then you can take a help of isShown() method from toast class.</p>\n\n<pre><code>public void showAToast (String st){ //\"Toast toast\" is declared in the class\n        try{ toast.getView().isShown();     // true if visible\n            toast.setText(st);\n        } catch (Exception e) {         // invisible if exception\n            toast = Toast.makeText(theContext, st, toastDuration);\n            }\n        toast.show();  //finally display it\n    }\n</code></pre>\n\n<p>hope this will help you.</p>\n"}], "owner": {"reputation": 189, "user_id": 5826180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13aa3292c8f0476632d132907fd1755?s=128&d=identicon&r=PG&f=1", "display_name": "vtodorova", "link": "https://stackoverflow.com/users/5826180/vtodorova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 49148954, "answer_count": 2, "score": 1, "last_activity_date": 1520417131, "creation_date": 1520415588, "last_edit_date": 1520416084, "question_id": 49148583, "link": "https://stackoverflow.com/questions/49148583/android-setting-new-text-on-old-toast-and-renew-duration", "title": "Android: Setting new text on old toast and renew duration", "body": "<p>I have a simple app with a button and click listener on it which displays a toast with the number of clicks that have been performed on the button: </p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private val toast by lazy { Toast.makeText(this, \"\", LENGTH_LONG) }\n    var count = 0\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        button.setOnClickListener { updateToast() }\n    }\n\n    private fun updateToast() {\n        count++\n        toast.setText(count.toString())\n        toast.show()\n    }\n}\n</code></pre>\n\n<p>The problem I have is that the duration of the toast is not renewed after each click and after 20 clicks (for example) the toast disappears and never shows again, even if I set its duration again before showing:    </p>\n\n<pre><code>private fun updateToast() {\n    count++\n    toast.setText(count.toString())\n    toast.duration = LENGTH_LONG\n    toast.show()\n}\n</code></pre>\n\n<p>I can always cancel the currently displayed toast and create new one, but I wanna know if there is a way to update the text on the existing toast and tell it to stay on the screen for the duration of a newly created toast.</p>\n"}, {"tags": ["lambda", "kotlin", "kotlin-reflect"], "answers": [{"comments": [{"owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "edited": false, "score": 0, "creation_date": 1520415416, "post_id": 49147704, "comment_id": 85301441, "body": "I didn&#39;t expect that big change by only declaring the lambda type! Declaring types or not I thought that it would have no effect!"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "edited": false, "score": 3, "creation_date": 1520415707, "post_id": 49147704, "comment_id": 85301631, "body": "Well, if you declare <code>val x: Any = &quot;abc&quot;</code>, you also won&#39;t be able to access <code>x.length</code>, so I don&#39;t see why exactly this is surprising..."}, {"owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "edited": false, "score": 0, "creation_date": 1520417811, "post_id": 49147704, "comment_id": 85302986, "body": "I am changing the type! That never crossed my mind! Feeling embarrassed!"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1520412985, "creation_date": 1520412985, "answer_id": 49147704, "question_id": 49147536, "link": "https://stackoverflow.com/questions/49147536/reflection-implicit-and-explicit-lambda-declaration/49147704#49147704", "title": "(Reflection) Implicit and explicit lambda declaration", "body": "<p><code>s::length</code> is a property reference, which is an object of type <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/index.html\" rel=\"nofollow noreferrer\">KProperty1</a>. The <code>get</code> method is defined as <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/get.html\" rel=\"nofollow noreferrer\">a member of this type</a>.</p>\n\n<p>If you declare a variable of a lambda type and initialize it with a property reference, you get a regular lambda (<code>KFunction1</code>). The <code>KFunction1</code> interface declares only the <code>invoke()</code> method, allowing you to call it as <code>lengthL1()</code>, but it does not declare any additional methods such as <code>get</code>.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 49147704, "answer_count": 1, "score": 6, "last_activity_date": 1520412985, "creation_date": 1520412402, "question_id": 49147536, "link": "https://stackoverflow.com/questions/49147536/reflection-implicit-and-explicit-lambda-declaration", "title": "(Reflection) Implicit and explicit lambda declaration", "body": "<p>I am trying to understand the reflection. I have the following code:</p>\n\n<pre><code>fun main(args: Array) {\nprintln(lengthL1())\nprintln(lengthL2(s))\nprintln(lengthL1.get()) // Error\nprintln(lengthL2.get(s)) // Error\n\nprintln(lengthNL1.get())\nprintln(lengthNL2.get(s))\nprintln(lengthNL1())\nprintln(lengthNL2(s))\n}\n\nval s = \u201c1234\u201d\n\nval lengthL1: () -&gt; Int = s::length\nval lengthL2: (String) -&gt; Int = String::length\n\nval lengthNL1 = s::length\nval lengthNL2 = String::length\n</code></pre>\n\n<p>Why I cannot call the <code>get</code> (See Error comments) when I declare the lambda?\nIs there any difference between <code>lengthL1</code> and <code>lenghtNL1</code>?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-nested-fragment"], "answers": [{"tags": [], "owner": {"reputation": 1106, "user_id": 1637001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a422025b0a566c3487ebcd01d22e4909?s=128&d=identicon&r=PG", "display_name": "moskis", "link": "https://stackoverflow.com/users/1637001/moskis"}, "is_accepted": true, "score": 0, "last_activity_date": 1520597825, "creation_date": 1520597825, "answer_id": 49193658, "question_id": 49147146, "link": "https://stackoverflow.com/questions/49147146/fragment-inside-a-viewpager-doesnt-show-when-is-in-recyclerview/49193658#49193658", "title": "Fragment inside a viewpager doesnt show when is in recyclerview", "body": "<p>This doesn't work. The way to go is a recycler into a recycler. If you want simulate as a ViewPager, you may use <a href=\"https://github.com/rubensousa/RecyclerViewSnap\" rel=\"nofollow noreferrer\">https://github.com/rubensousa/RecyclerViewSnap</a> with a MATCH_PARENT in the \nchild views.</p>\n"}], "owner": {"reputation": 1106, "user_id": 1637001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a422025b0a566c3487ebcd01d22e4909?s=128&d=identicon&r=PG", "display_name": "moskis", "link": "https://stackoverflow.com/users/1637001/moskis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 49193658, "answer_count": 1, "score": 2, "last_activity_date": 1520597825, "creation_date": 1520410932, "question_id": 49147146, "link": "https://stackoverflow.com/questions/49147146/fragment-inside-a-viewpager-doesnt-show-when-is-in-recyclerview", "title": "Fragment inside a viewpager doesnt show when is in recyclerview", "body": "<p>Maybe this is a stupid question, but this is ruining my day...</p>\n\n<p>I have a recyclerview in a fragment</p>\n\n<pre><code>override fun setUpRecyclerView(pics: List&lt;Pictures&gt;) {\n    recyclerView.setHasFixedSize(true)\n\n    layoutManager = LinearLayoutManager(context)\n    recyclerView.setLayoutManager(layoutManager)\n\n    mAdapter = NewsAdapter(pics, childFragmentManager)\n    recyclerView.setAdapter(mAdapter)\n}\n</code></pre>\n\n<p>the NewsAdapter is:</p>\n\n<pre><code>class NewsAdapter\n        (private val mDataset: List&lt;Pictures&gt;, private val fragmentManager: FragmentManager)\n    : RecyclerView.Adapter&lt;NewsAdapter.ViewHolder&gt;() {\n\n    class ViewHolder(v: View) : RecyclerView.ViewHolder(v) {\n        var authorTextView: TextView\n        var viewPager: ViewPager\n        var indicator: CircleIndicator\n\n        init {\n            authorTextView = v.findViewById&lt;View&gt;(R.id.tv_author) as TextView\n            viewPager = v.findViewById&lt;View&gt;(R.id.viewPager) as ViewPager\n            indicator = v.findViewById&lt;View&gt;(R.id.indicator) as CircleIndicator\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup,\n                                    viewType: Int): NewsAdapter.ViewHolder {\n        val v = LayoutInflater.from(parent.context)\n                .inflate(R.layout.item_preview, parent, false)\n\n        return ViewHolder(v)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        val pictureList = mDataset.get(position)\n        holder.titleTextView.text = pictureList.title\n        holder.authorTextView.text = pictureList.author\n        showContent(pictureList.content, holder.viewPager, holder.indicator)\n    }\n\n    fun showContent(contentModel: List&lt;ContentModel&gt;, viewPager: ViewPager, indicator: CircleIndicator) {\n        if (contentModel.size &lt;= 1) {\n            indicator.hide()\n        }\n        viewPager.adapter = GalleryContentAdapter(fragmentManager, contentModel)\n        indicator.setViewPager(viewPager)\n    }\n\n    override fun getItemCount(): Int = mDataset.size\n}\n</code></pre>\n\n<p>the GalleryContentAdapter is:</p>\n\n<pre><code>class GalleryContentAdapter(fm: FragmentManager, val contentModels: List&lt;ContentModel&gt;) : FragmentPagerAdapter(fm) {\n    val galleryContentFactory: GalleryContentFactory = GalleryContentFactory()\n\n    override fun getItem(position: Int): Fragment = galleryContentFactory.getFragment(contentModels[position])\n\n    override fun getCount(): Int = contentModels.size\n}\n</code></pre>\n\n<p>From now I am only handling a kind of content and the factory is so easy, but this is the code:</p>\n\n<pre><code>class GalleryContentFactory {\n    fun getFragment(contentModel: ContentModel): Fragment {\n        when (contentModel.type) {\n            \"PICTURE\" -&gt; return PictureFragment.newInstance(contentModel.value)\n        }\n        return PictureFragment.newInstance(contentModel.value)\n    }\n}\n</code></pre>\n\n<p>and the last is the PictureFragment:</p>\n\n<pre><code>class PictureFragment : NewsContentFragment() {\n\n    companion object {\n        val KEY = \"PictureFragment.URL\"\n\n        fun newInstance(url: String): NewsContentFragment {\n            val fragment = PictureFragment()\n            val bundle = Bundle()\n            bundle.putString(KEY, url)\n            fragment.arguments = bundle\n            return fragment\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n\n        return inflater.inflate(R.layout.fragment_news_gif, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        arguments?.getString(KEY).let {\n            view.image.loadUrl(it!!)\n        }\n    }\n}\n</code></pre>\n\n<p>When I debug the code, I check that the line <code>view.image.loadUrl(it!!)</code> is being executed, but nothing is rendered.</p>\n\n<p>The loadUrl method is a extended function of imageviews that loads an image using Glide like this</p>\n\n<pre><code>fun ImageView.loadUrl(url: String) {\n    GlideApp.with(context).load(url).into(this)\n}\n</code></pre>\n\n<p>and is being called correctly.</p>\n\n<p>I also tried with PagerStateAdapter and take into account that I am passing the ChildFragmentManager to the adapter of the ViewPager.</p>\n\n<p>If you can help me, you will save my day. Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "android-arrayadapter", "android-spinner"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520405580, "post_id": 49145694, "comment_id": 85296380, "body": "did you implement onItemSelected of spinner ?"}, {"owner": {"reputation": 12144, "user_id": 1581185, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/UVLZc.jpg?s=128&g=1", "display_name": "Sagar Maiyad", "link": "https://stackoverflow.com/users/1581185/sagar-maiyad"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520406240, "post_id": 49145694, "comment_id": 85296674, "body": "@HemantParmar yes...i didnt mention in code but yes, i implemented that too."}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520406311, "post_id": 49145694, "comment_id": 85296706, "body": "please share the code."}, {"owner": {"reputation": 12144, "user_id": 1581185, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/UVLZc.jpg?s=128&g=1", "display_name": "Sagar Maiyad", "link": "https://stackoverflow.com/users/1581185/sagar-maiyad"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520406665, "post_id": 49145694, "comment_id": 85296851, "body": "@HemantParmar check updated code. i added that code and also show output."}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520407171, "post_id": 49145694, "comment_id": 85297080, "body": "i checked the code all fine, you have to change implementation of onItemSelected like <a href=\"https://stackoverflow.com/a/36762231/5110595\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "is_accepted": false, "score": 0, "last_activity_date": 1520414000, "last_edit_date": 1520414000, "creation_date": 1520407269, "answer_id": 49146243, "question_id": 49145694, "link": "https://stackoverflow.com/questions/49145694/selected-item-not-showing-in-spinner-kotlin/49146243#49146243", "title": "Selected item not showing in spinner kotlin", "body": "<p>When you bind your adapter that time adapter has value then it shows in spinner. Use below code for example:</p>\n\n<pre><code>   var adapterReasons: LeaveReasonSpinnerAdapter?= null\n    var reasonList= arrayListOf&lt;LeaveReasonListPayloadDataResponse&gt;() // bind your any type of data\n    // used below code in for loop\n    var data=LeaveReasonListPayloadDataResponse().apply {\n        reason=\"Hello\"\n    }\n    var data2=LeaveReasonListPayloadDataResponse().apply {\n        reason=\"Hello2\"\n    }\n\n    reasonList.add(data)\n    reasonList.add(data2)\n    adapterReasons = LeaveReasonSpinnerAdapter(this,\n            R.layout.row_layout, reasonList)\n    var SpinnerValue:Spinner=findViewById(R.id.spnReasonActApplyLeave)\n    SpinnerValue.adapter = adapterReasons\n    SpinnerValue.onItemSelectedListener = object : OnItemSelectedListener {\n        override fun onItemSelected(parentView: AdapterView&lt;*&gt;, selectedItemView: View, position: Int, id: Long) {\n            Toast.makeText(applicationContext,\"\"+SpinnerValue.selectedItemPosition.toString(),Toast.LENGTH_SHORT).show()\n        }\n\n        override fun onNothingSelected(parentView: AdapterView&lt;*&gt;) {\n        }\n\n    }\n</code></pre>\n\n<p>Use this code in your activity <code>onCreate()</code>.</p>\n"}], "owner": {"reputation": 12144, "user_id": 1581185, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/UVLZc.jpg?s=128&g=1", "display_name": "Sagar Maiyad", "link": "https://stackoverflow.com/users/1581185/sagar-maiyad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2063, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1520414000, "creation_date": 1520404808, "last_edit_date": 1520406641, "question_id": 49145694, "link": "https://stackoverflow.com/questions/49145694/selected-item-not-showing-in-spinner-kotlin", "title": "Selected item not showing in spinner kotlin", "body": "<p>Below is xml declaration of spinner:</p>\n\n<pre><code>&lt;Spinner\nandroid:id=\"@+id/spnReasonActApplyLeave\"\nstyle=\"@style/Widget.AppCompat.Spinner.Underlined\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginTop=\"@dimen/dimen_20_dp\" /&gt;\n</code></pre>\n\n<p>Below is initialization in activity class:</p>\n\n<pre><code>var adapterReasons: LeaveReasonSpinnerAdapter ?= null    \nadapterReasons = LeaveReasonSpinnerAdapter(this,R.layout.row_reason_spinner_item, reasonList)   \n spnReasonActApplyLeave.adapter = adapterReasons\n\nspnReasonActApplyLeave.setOnItemSelectedListener(object: AdapterView.OnItemSelectedListener {\n            override fun onItemSelected(parent: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n                Log.e(\"ApplyLeave\", \"Selected Reason: \"+reasonList.get(position))\n            }\n\n            override fun onNothingSelected(parent: AdapterView&lt;*&gt;?) {\n\n            }\n        })\n</code></pre>\n\n<p>Below is row_reason_spinner_item xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/tvReasonRowReasonSpinner\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textColor=\"@color/black\"\n    android:textSize=\"@dimen/txt_16_sp\" /&gt;\n</code></pre>\n\n<p>Below is LeaveReasonSpinnerAdapter class:</p>\n\n<pre><code>public class LeaveReasonSpinnerAdapter extends ArrayAdapter&lt;LeaveReasonListPayloadDataResponse&gt; {\n\n    private final LayoutInflater mInflater;\n    private Context mContext;\n    int layoutResourceId;\n    private List&lt;LeaveReasonListPayloadDataResponse&gt; data = new ArrayList&lt;&gt;();\n\n    public LeaveReasonSpinnerAdapter(Context context, int resource, ArrayList&lt;LeaveReasonListPayloadDataResponse&gt; list) {\n        super(context, resource, list);\n        mContext = context;\n        mInflater = LayoutInflater.from(context);\n        layoutResourceId = resource;\n        data = list;\n    }\n\n    @Override\n    public View getDropDownView(int position, View convertView, ViewGroup parent) {\n        return createItemView(position, convertView, parent);\n    }\n\n    @Override\n    public int getCount() {\n        return data.size();\n    }\n\n    @Override\n    public LeaveReasonListPayloadDataResponse getItem(int position) {\n        return data.get(position);\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        return createItemView(position, convertView, parent);\n    }\n\n    private View createItemView(int position, View convertView, ViewGroup parent){\n        View view = mInflater.inflate(layoutResourceId, parent, false);\n\n        TextView label = (TextView) view.findViewById(R.id.tvReasonRowReasonSpinner);\n\n        LeaveReasonListPayloadDataResponse offerData = data.get(position);\n\n        label.setText(offerData.getReason());\n        label.setTextColor(ContextCompat.getColor(mContext, R.color.black));\n//        label.setBackgroundColor(ContextCompat.getColor(mContext, R.color.black));\n\n        return view;\n    }\n}\n</code></pre>\n\n<p>i tried many things. i also implemented appcompatspinner but still no luck in it. when i select spinner that time i can see values in dropdown but not after selecting any item.</p>\n\n<p>There is also another issue in it. setonitemselectedlistener of that spinner is also not called.</p>\n\n<p>Below is output:\n<a href=\"https://i.stack.imgur.com/HdDHw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HdDHw.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/jffnK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jffnK.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "location", "android-gps", "fusedlocationproviderapi"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520397244, "post_id": 49144151, "comment_id": 85293564, "body": "have look <a href=\"https://stackoverflow.com/a/42739534/5110595\">this</a>"}, {"owner": {"reputation": 139, "user_id": 6053336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQRnU.jpg?s=128&g=1", "display_name": "dito cesartista", "link": "https://stackoverflow.com/users/6053336/dito-cesartista"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520398651, "post_id": 49144151, "comment_id": 85293993, "body": "the answer there suggest to check the accuracy and goes to setting to ask the user to turn on GPS. In my case, even when the device&#39;s built in GPS is turned on, the location is still not accurate sometimes."}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520398854, "post_id": 49144151, "comment_id": 85294054, "body": "is your map and play store service is updated??"}, {"owner": {"reputation": 5413, "user_id": 991479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75f7aa1d3740212a6bb86bffa33330e?s=128&d=identicon&r=PG", "display_name": "Ewald", "link": "https://stackoverflow.com/users/991479/ewald"}, "edited": false, "score": 0, "creation_date": 1520398974, "post_id": 49144151, "comment_id": 85294090, "body": "Are you gettign the same results on an emulator? I&#39;ve found actual devices to be far less accurate at times, due to signal fluctuations etc."}, {"owner": {"reputation": 139, "user_id": 6053336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQRnU.jpg?s=128&g=1", "display_name": "dito cesartista", "link": "https://stackoverflow.com/users/6053336/dito-cesartista"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520405187, "post_id": 49144151, "comment_id": 85296213, "body": "@HemantParmar Yes my map and play services is updated. In fact, like I said, after I open google map and open my apps again, the location is accurate."}, {"owner": {"reputation": 139, "user_id": 6053336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQRnU.jpg?s=128&g=1", "display_name": "dito cesartista", "link": "https://stackoverflow.com/users/6053336/dito-cesartista"}, "reply_to_user": {"reputation": 5413, "user_id": 991479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75f7aa1d3740212a6bb86bffa33330e?s=128&d=identicon&r=PG", "display_name": "Ewald", "link": "https://stackoverflow.com/users/991479/ewald"}, "edited": false, "score": 0, "creation_date": 1520405201, "post_id": 49144151, "comment_id": 85296217, "body": "@Ewald So far, on emulator, its accurate. But i&#39;m not moving to different places when using emulator. Yes i reckon that there may be signal fluctuations, but what I dont understand is that when I open google map, and comeback to my application, its accurate. How does the google maps does that?"}, {"owner": {"reputation": 5413, "user_id": 991479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75f7aa1d3740212a6bb86bffa33330e?s=128&d=identicon&r=PG", "display_name": "Ewald", "link": "https://stackoverflow.com/users/991479/ewald"}, "edited": false, "score": 0, "creation_date": 1520406828, "post_id": 49144151, "comment_id": 85296936, "body": "That&#39;s interesting - and you are making sure you get a location mode of LOCATION_MODE_HIGH_ACCURACY back?  Otherwise it&#39;s still firing up services in the background and the location might be a previously cached one."}], "owner": {"reputation": 139, "user_id": 6053336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nQRnU.jpg?s=128&g=1", "display_name": "dito cesartista", "link": "https://stackoverflow.com/users/6053336/dito-cesartista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1037, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1520396979, "creation_date": 1520396979, "question_id": 49144151, "link": "https://stackoverflow.com/questions/49144151/get-high-accuracy-location-on-android-using-fused-location", "title": "Get High Accuracy Location on Android using fused location", "body": "<p>I tried to get current user location on button press and show the address on screen. </p>\n\n<p>I am using google fused location as follow</p>\n\n<pre><code>locationClient = LocationServices.getFusedLocationProviderClient(this)\nlocationRequest = LocationRequest()\nlocationRequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY\nlocationClient.requestLocationUpdates(locationRequest, callback, null)\n</code></pre>\n\n<p>and after I get the latitude and longitude, i resolve the address using geocoder as follow </p>\n\n<pre><code>addresses = geocoder.getFromLocation(\n                    location.latitude,\n                    location.longitude,\n                    1)\n</code></pre>\n\n<p>The problem is that sometimes the address I get is not accurate. And if I minimize/close my apps, open Google Maps, and go back to my application again, the location that I get is accurate.</p>\n\n<p>How do I fix these?\nThanks</p>\n"}, {"tags": ["java", "android", "android-studio", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 12504, "user_id": 269454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/2c52d8862ec3b13e1c9cb14d37ca2257?s=128&d=identicon&r=PG", "display_name": "lujop", "link": "https://stackoverflow.com/users/269454/lujop"}, "edited": false, "score": 0, "creation_date": 1523630029, "post_id": 49143598, "comment_id": 86653674, "body": "I&#39;ve a similar problem. Did you find any solution?"}, {"owner": {"reputation": 51, "user_id": 3073484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1207495ecff39e483dcee0e7b5a68e?s=128&d=identicon&r=PG&f=1", "display_name": "Haobin Xu", "link": "https://stackoverflow.com/users/3073484/haobin-xu"}, "reply_to_user": {"reputation": 12504, "user_id": 269454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/2c52d8862ec3b13e1c9cb14d37ca2257?s=128&d=identicon&r=PG", "display_name": "lujop", "link": "https://stackoverflow.com/users/269454/lujop"}, "edited": false, "score": 0, "creation_date": 1523888688, "post_id": 49143598, "comment_id": 86734270, "body": "I haven&#39;t solved this, too."}], "owner": {"reputation": 51, "user_id": 3073484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1207495ecff39e483dcee0e7b5a68e?s=128&d=identicon&r=PG&f=1", "display_name": "Haobin Xu", "link": "https://stackoverflow.com/users/3073484/haobin-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520393060, "creation_date": 1520393060, "question_id": 49143598, "link": "https://stackoverflow.com/questions/49143598/android-app-crashed-when-i-update-the-version-of-support-v4-and-appcompat-v7-fro", "title": "Android App crashed when I update the version of support-v4 and appcompat-v7 from 24.2.1 to 27.1.0", "body": "<p>When I had not add android proguard configuration for the v7 support library, my app crashed with these:</p>\n\n<pre><code>java.lang.AbstractMethodError: abstract method \"android.view.View android.view.LayoutInflater$Factory2.onCreateView(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet)\"\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:725)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:482)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:414)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:365)\n    at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:4127)\n    at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:4203)\n    at com.android.internal.policy.impl.PhoneWindow.getDecorView(PhoneWindow.java:1991)\n    at android.support.v7.app.f.v(AppCompatDelegateImplV9.java:374)\n    at android.support.v7.app.f.u(AppCompatDelegateImplV9.java:323)\n    at android.support.v7.app.f.b(AppCompatDelegateImplV9.java:170)\n    at android.support.v7.app.AppCompatActivity.onPostCreate(AppCompatActivity.java:97)\n    at android.app.Instrumentation.callActivityOnPostCreate(Instrumentation.java:1187)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2386)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2477)\n    at android.app.ActivityThread.access$800(ActivityThread.java:160)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1368)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:135)\n    at android.app.ActivityThread.main(ActivityThread.java:5372)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1117)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:810)\n</code></pre>\n\n<p>I guess that it may be caused by the proguard configuration I haven't added. So, I add the configuration of these:</p>\n\n<pre><code>-dontwarn android.support.v7.**\n-keep class android.support.v7.** { *; }\n-keep interface android.support.v7.** { *; }\n</code></pre>\n\n<p>But, it also caused building failed. I got these message:</p>\n\n<pre><code>Warning:Exception while processing task java.io.IOException: Can't write [/Users/looyoo/Documents/welian-android/app/build/intermediates/transforms/proguard/release/0.jar] (Can't read [/Users/looyoo/.gradle/caches/transforms-1/files-1.1/appcompat-v7-27.1.0.aar/decb3e4b44f48252475eee23a4f22565/jars/classes.jar(;;;;;;**.class)] (Duplicate zip entry [android/support/v7/widget/ListPopupWindow$1.class == classes.jar:android/support/v7/widget/ListPopupWindow$2.class]))\n</code></pre>\n\n<p>I also have checked the libraries' v7 support version and v4 support version, there is no different versions.</p>\n\n<p>These is my dependence tree:</p>\n\n<pre><code>+--- com.android.databinding:library:1.3.1\n|    +--- com.android.support:support-v4:21.0.3 -&gt; 27.1.0\n|    |    +--- com.android.support:support-compat:27.1.0\n|    |    |    +--- com.android.support:support-annotations:27.1.0\n|    |    |    \\--- android.arch.lifecycle:runtime:1.1.0\n|    |    |         +--- android.arch.lifecycle:common:1.1.0\n|    |    |         |    \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    |    |         +--- android.arch.core:common:1.1.0\n|    |    |         |    \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    |    |         \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    |    +--- com.android.support:support-media-compat:27.1.0\n|    |    |    +--- com.android.support:support-annotations:27.1.0\n|    |    |    \\--- com.android.support:support-compat:27.1.0 (*)\n|    |    +--- com.android.support:support-core-utils:27.1.0\n|    |    |    +--- com.android.support:support-annotations:27.1.0\n|    |    |    \\--- com.android.support:support-compat:27.1.0 (*)\n|    |    +--- com.android.support:support-core-ui:27.1.0\n|    |    |    +--- com.android.support:support-annotations:27.1.0\n|    |    |    +--- com.android.support:support-compat:27.1.0 (*)\n|    |    |    \\--- com.android.support:support-core-utils:27.1.0 (*)\n|    |    \\--- com.android.support:support-fragment:27.1.0\n|    |         +--- com.android.support:support-compat:27.1.0 (*)\n|    |         +--- com.android.support:support-core-ui:27.1.0 (*)\n|    |         +--- com.android.support:support-core-utils:27.1.0 (*)\n|    |         +--- com.android.support:support-annotations:27.1.0\n|    |         +--- android.arch.lifecycle:livedata-core:1.1.0\n|    |         |    +--- android.arch.lifecycle:common:1.1.0 (*)\n|    |         |    +--- android.arch.core:common:1.1.0 (*)\n|    |         |    \\--- android.arch.core:runtime:1.1.0\n|    |         |         +--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    |         |         \\--- android.arch.core:common:1.1.0 (*)\n|    |         \\--- android.arch.lifecycle:viewmodel:1.1.0\n|    |              \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    \\--- com.android.databinding:baseLibrary:2.3.0-dev -&gt; 3.0.1\n+--- com.android.databinding:baseLibrary:3.0.1\n+--- com.android.databinding:adapters:1.3.1\n|    +--- com.android.databinding:library:1.3 -&gt; 1.3.1 (*)\n|    \\--- com.android.databinding:baseLibrary:2.3.0-dev -&gt; 3.0.1\n+--- project :IMKit\n|    +--- com.android.support:support-v4:27.1.0 (*)\n|    \\--- project :IMLib\n+--- project :thirdpart\n|    +--- com.aliyun.dpa:oss-android-sdk:2.2.0\n|    \\--- project :common\n|         +--- com.android.support:design:27.1.0\n|         |    +--- com.android.support:support-v4:27.1.0 (*)\n|         |    +--- com.android.support:appcompat-v7:27.1.0\n|         |    |    +--- com.android.support:support-annotations:27.1.0\n|         |    |    +--- com.android.support:support-core-utils:27.1.0 (*)\n|         |    |    +--- com.android.support:support-fragment:27.1.0 (*)\n|         |    |    +--- com.android.support:support-vector-drawable:27.1.0\n|         |    |    |    +--- com.android.support:support-annotations:27.1.0\n|         |    |    |    \\--- com.android.support:support-compat:27.1.0 (*)\n|         |    |    \\--- com.android.support:animated-vector-drawable:27.1.0\n|         |    |         +--- com.android.support:support-vector-drawable:27.1.0 (*)\n|         |    |         \\--- com.android.support:support-core-ui:27.1.0 (*)\n|         |    +--- com.android.support:recyclerview-v7:27.1.0\n|         |    |    +--- com.android.support:support-annotations:27.1.0\n|         |    |    +--- com.android.support:support-compat:27.1.0 (*)\n|         |    |    \\--- com.android.support:support-core-ui:27.1.0 (*)\n|         |    \\--- com.android.support:transition:27.1.0\n|         |         +--- com.android.support:support-annotations:27.1.0\n|         |         \\--- com.android.support:support-compat:27.1.0 (*)\n|         +--- com.android.support:cardview-v7:27.1.0\n|         |    \\--- com.android.support:support-annotations:27.1.0\n|         +--- com.google.code.gson:gson:2.4 -&gt; 2.7\n|         +--- com.android.support:multidex:1.0.1\n|         +--- com.j256.ormlite:ormlite-android:4.48\n|         |    \\--- com.j256.ormlite:ormlite-core:4.48\n|         +--- com.tencent.bugly:crashreport:latest.release -&gt; 2.6.6.1\n|         +--- com.qiyukf.unicorn:unicorn:3.10.0\n|         +--- com.wanjian:sak:0.0.2\n|         +--- project :gridpassword\n|         |    \\--- com.android.support:appcompat-v7:27.1.0 (*)\n|         +--- com.taobao.android:alisdk-hotfix:2.0.6\n|         |    \\--- com.taobao.android:alicloud-report:1.0.1\n|         +--- io.reactivex.rxjava2:rxandroid:2.0.1\n|         |    \\--- io.reactivex.rxjava2:rxjava:2.0.1 -&gt; 2.1.0\n|         |         \\--- org.reactivestreams:reactive-streams:1.0.0\n|         +--- io.reactivex.rxjava2:rxjava:2.1.0 (*)\n|         +--- com.jakewharton.rxbinding2:rxbinding:2.0.0\n|         |    +--- io.reactivex.rxjava2:rxjava:2.0.2 -&gt; 2.1.0 (*)\n|         |    +--- io.reactivex.rxjava2:rxandroid:2.0.0 -&gt; 2.0.1 (*)\n|         |    \\--- com.android.support:support-annotations:25.1.1 -&gt; 27.1.0\n|         \\--- org.jetbrains.kotlin:kotlin-stdlib-jre7:1.2.21\n|              \\--- org.jetbrains.kotlin:kotlin-stdlib:1.2.21\n|                   \\--- org.jetbrains:annotations:13.0\n+--- project :qrcode\n|    \\--- project :commonui\n|         +--- project :thirdpart (*)\n|         +--- project :swipbacklib\n|         |    +--- com.android.support:appcompat-v7:27.1.0 (*)\n|         |    \\--- com.android.support:support-v4:27.1.0 (*)\n|         +--- com.gzsll.jsbridge:library:1.1.0\n|         \\--- android.arch.lifecycle:extensions:1.1.0\n|              +--- android.arch.lifecycle:runtime:1.1.0 (*)\n|              +--- android.arch.core:common:1.1.0 (*)\n|              +--- android.arch.core:runtime:1.1.0 (*)\n|              +--- com.android.support:support-fragment:26.1.0 -&gt; 27.1.0 (*)\n|              +--- android.arch.lifecycle:common:1.1.0 (*)\n|              +--- android.arch.lifecycle:livedata:1.1.0\n|              |    +--- android.arch.core:runtime:1.1.0 (*)\n|              |    +--- android.arch.lifecycle:livedata-core:1.1.0 (*)\n|              |    \\--- android.arch.core:common:1.1.0 (*)\n|              \\--- android.arch.lifecycle:viewmodel:1.1.0 (*)\n+--- project :bdmap\n|    \\--- project :commonui (*)\n+--- project :MPChartLib\n+--- project :magicindicator\n|    \\--- project :common (*)\n+--- com.zhy:percent-support-extends:1.1.1\n+--- com.android.support.constraint:constraint-layout:1.0.2\n|    \\--- com.android.support.constraint:constraint-layout-solver:1.0.2\n+--- com.github.bumptech.glide:glide:3.8.0\n+--- org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.2.21\n|    \\--- org.jetbrains.kotlin:kotlin-stdlib:1.2.21 (*)\n+--- com.squareup.retrofit2:retrofit:2.3.0\n|    \\--- com.squareup.okhttp3:okhttp:3.8.0\n|         \\--- com.squareup.okio:okio:1.13.0\n+--- com.squareup.okhttp3:logging-interceptor:3.8.0\n|    \\--- com.squareup.okhttp3:okhttp:3.8.0 (*)\n+--- com.squareup.retrofit2:converter-gson:2.1.0\n|    +--- com.squareup.retrofit2:retrofit:2.1.0 -&gt; 2.3.0 (*)\n|    \\--- com.google.code.gson:gson:2.7\n+--- com.squareup.retrofit2:adapter-rxjava2:2.3.0\n|    +--- com.squareup.retrofit2:retrofit:2.3.0 (*)\n|    \\--- io.reactivex.rxjava2:rxjava:2.0.0 -&gt; 2.1.0 (*)\n+--- com.makeramen:roundedimageview:2.3.0\n+--- android.arch.lifecycle:extensions:1.1.0 (*)\n+--- android.arch.persistence.room:runtime:1.0.0\n|    +--- android.arch.persistence.room:common:1.0.0\n|    |    \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    +--- android.arch.persistence:db-framework:1.0.0\n|    |    +--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    |    \\--- android.arch.persistence:db:1.0.0\n|    |         \\--- com.android.support:support-annotations:26.1.0 -&gt; 27.1.0\n|    +--- android.arch.persistence:db:1.0.0 (*)\n|    +--- android.arch.core:runtime:1.0.0 -&gt; 1.1.0 (*)\n|    \\--- com.android.support:support-core-utils:26.1.0 -&gt; 27.1.0 (*)\n+--- android.arch.persistence.room:rxjava2:1.0.0\n|    +--- android.arch.persistence.room:common:1.0.0 (*)\n|    +--- android.arch.persistence.room:runtime:1.0.0 (*)\n|    +--- android.arch.core:runtime:1.0.0 -&gt; 1.1.0 (*)\n|    +--- com.android.support:support-core-utils:26.1.0 -&gt; 27.1.0 (*)\n|    \\--- io.reactivex.rxjava2:rxjava:2.0.6 -&gt; 2.1.0 (*)\n\\--- com.antfortune.freeline:runtime-no-op:0.8.7\n</code></pre>\n"}, {"tags": ["android", "text", "casting", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 0, "creation_date": 1520385720, "post_id": 49142442, "comment_id": 85290872, "body": "Would it not be better to validate the fields separately so that you don&#39;t end up with &quot;some string isn&#39;t a number so the calculation can&#39;t happen&quot; error?"}, {"owner": {"reputation": 7418, "user_id": 6852729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZgDLu.jpg?s=128&g=1", "display_name": "KeLiuyue", "link": "https://stackoverflow.com/users/6852729/keliuyue"}, "reply_to_user": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 0, "creation_date": 1520389565, "post_id": 49142442, "comment_id": 85291795, "body": "Yes, it will be better.@PaulHicks"}, {"owner": {"reputation": 1440, "user_id": 9395652, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1LCyW.jpg?s=128&g=1", "display_name": "esu", "link": "https://stackoverflow.com/users/9395652/esu"}, "edited": false, "score": 0, "creation_date": 1520401022, "post_id": 49142442, "comment_id": 85294661, "body": "For safer side i have add like this <code>textView_countdown.text?.toString()</code>. In my case how can I use <code>.toInt()</code> ? @KeLiuyue"}, {"owner": {"reputation": 7418, "user_id": 6852729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZgDLu.jpg?s=128&g=1", "display_name": "KeLiuyue", "link": "https://stackoverflow.com/users/6852729/keliuyue"}, "edited": false, "score": 0, "creation_date": 1520404485, "post_id": 49142442, "comment_id": 85295925, "body": "Try to use like this .<code>textView_countdown.text?.toString()?.toInt()</code> .And you should check the <code>textView_countdown.text?.toString()</code> whether it was null .@esu"}, {"owner": {"reputation": 7418, "user_id": 6852729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZgDLu.jpg?s=128&g=1", "display_name": "KeLiuyue", "link": "https://stackoverflow.com/users/6852729/keliuyue"}, "edited": false, "score": 0, "creation_date": 1520404647, "post_id": 49142442, "comment_id": 85295984, "body": "And you can check <code>NumberFormatException - if the string is not a valid representation of a number.</code> .<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-int.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to&zwnj;&#8203;-int.html</a>"}], "tags": [], "owner": {"reputation": 7418, "user_id": 6852729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZgDLu.jpg?s=128&g=1", "display_name": "KeLiuyue", "link": "https://stackoverflow.com/users/6852729/keliuyue"}, "is_accepted": false, "score": 1, "last_activity_date": 1520404842, "last_edit_date": 1520404842, "creation_date": 1520384057, "answer_id": 49142442, "question_id": 49142156, "link": "https://stackoverflow.com/questions/49142156/java-lang-numberformatexception-type-casting-in-kotlin/49142442#49142442", "title": "java.lang.NumberFormatException type casting in kotlin", "body": "<p>Your problem is </p>\n\n<blockquote>\n  <p>java.lang.NumberFormatException: Invalid int: \"android.support.v7.widget.AppCompatTextView.</p>\n</blockquote>\n\n<p>So we need to know the reason .</p>\n\n<p>1.Use <code>kiloText.toString()</code> and <code>boy.toString()</code> will cause <code>NumberFormatException</code></p>\n\n<p>2.If <code>kiloText.text</code> and <code>boy.toString()</code>  are null, it will cause <code>NumberFormatException</code></p>\n\n<p>You can try this way .</p>\n\n<p><strong>Change</strong></p>\n\n<pre><code>sonuc=(kiloText.toString().toInt())/((boy.toString().toInt())*(boy.toString().toInt())).toDouble()\nideal.text=sonuc.toString()\n</code></pre>\n\n<p><strong>to</strong></p>\n\n<pre><code>sonuc=(kiloText.text.toString().toInt())/((boy.text.toString().toInt())*(boy.text.toString().toInt())).toDouble()\nideal.text=sonuc.toString()\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-int.html\" rel=\"nofollow noreferrer\">source</a></p>\n\n<pre><code>/**\n* Parses the string as an [Int] number and returns the result.\n* @throws NumberFormatException if the string is not a valid representationof a number.\n*/\n@kotlin.jvm.JvmVersion\n@kotlin.internal.InlineOnly\npublic inline fun String.toInt(): Int = java.lang.Integer.parseInt(this)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9292930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ca0168527c64184a98b12935b86911?s=128&d=identicon&r=PG&f=1", "display_name": "ma11", "link": "https://stackoverflow.com/users/9292930/ma11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3773, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520404842, "creation_date": 1520381921, "last_edit_date": 1520383415, "question_id": 49142156, "link": "https://stackoverflow.com/questions/49142156/java-lang-numberformatexception-type-casting-in-kotlin", "title": "java.lang.NumberFormatException type casting in kotlin", "body": "<p>I want to do body mass index and it's pretty simple. but I could not do that. I get an error in type conversions, but I did not fix the problem. Hatam </p>\n\n<blockquote>\n  <p>java.lang.NumberFormatException: Invalid int: \"android.support.v7.widget.AppCompatTextView. </p>\n</blockquote>\n\n<p>I guess the </p>\n\n<pre><code>result = (kiloText.toString (). ToInt ()) / ((boy.toString (). ToInt () \nboy.tostring (). to\u0131nt ())). todoubl a ()\n</code></pre>\n\n<p>\u00a0 this code has type conversion error how can i do this?</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nlateinit var kilo:SeekBar\nlateinit var boy: EditText\nlateinit var hesapla:Button\nlateinit var ideal: TextView\nlateinit var kiloText: TextView\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    kilo=findViewById(R.id.seekbar)\n    boy=findViewById(R.id.edt_boy)\n    hesapla=findViewById(R.id.hesapla)\n    ideal=findViewById(R.id.ideal)\n    kiloText=findViewById(R.id.kilo)\n\n    kilo.max=150\n    kilo.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener{\n        override fun onProgressChanged(p0: SeekBar?, p1: Int, p2: Boolean) {\n            kiloText.text=p1.toString()\n        }\n\n        override fun onStartTrackingTouch(p0: SeekBar) {\n            kiloText.text= p0.progress.toString()\n        }\n\n        override fun onStopTrackingTouch(p0: SeekBar) {\n            kiloText.text=p0.progress.toString()\n        }\n\n    })\n\n    hesapla.setOnClickListener({\n        var sonuc:Double\n        sonuc=(kiloText.toString().toInt())/((boy.toString().toInt())*(boy.toString().toInt())).toDouble()\n      ideal.text=sonuc.toString()\n\n\n    })\n\n}\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-custom-view", "android-wifi"], "comments": [{"owner": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1520429236, "post_id": 49141262, "comment_id": 85310516, "body": "is <a href=\"https://stackoverflow.com/questions/2983250/custom-event-listener-on-android-app\">custom event</a> what you need?"}, {"owner": {"reputation": 177, "user_id": 6042392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03f50177e0078524775d0f8128778850?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Jackson", "link": "https://stackoverflow.com/users/6042392/tommy-jackson"}, "reply_to_user": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1520466434, "post_id": 49141262, "comment_id": 85331912, "body": "@StefanGolubovi\u0107 it might be, although I&#39;m having trouble wrapping my head around how I would implement it with my custom view. I&#39;ll keep trying to look at it."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6042392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03f50177e0078524775d0f8128778850?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Jackson", "link": "https://stackoverflow.com/users/6042392/tommy-jackson"}, "edited": false, "score": 0, "creation_date": 1520523502, "post_id": 49173216, "comment_id": 85359085, "body": "This is exactly what I needed. Works like a charm, thank you so much!"}], "tags": [], "owner": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1520515344, "last_edit_date": 1520515344, "creation_date": 1520512429, "answer_id": 49173216, "question_id": 49141262, "link": "https://stackoverflow.com/questions/49141262/scanning-for-wifi-within-custom-view/49173216#49173216", "title": "Scanning For Wifi Within Custom View", "body": "<p>Using custom event, your code would be something like this:</p>\n\n<pre><code>class CustomView : View {\n\n    // define interface for your custom event\n    interface MyCustomEvent {\n        fun onGridTileClicked(x: Int, y: Int) // define your custom event\n    }\n\n\n    private var listener: MyCustomEvent? // define listener for your custom event\n\n    /* in constructor of your custom view, you can register your activity to \n       listen for upcoming custom event, since you'll get context of your \n       activity here */\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n        this.listener = context as? MyCustomEvent // register your activity as listener\n\n        ...\n    }\n\n    override fun onTouchEvent(e: MotionEvent): Boolean {\n        // get your x &amp; y\n        listener?.onGridTileClicked(x, y) // notify listener and pass x &amp; y as arguments\n\n        ...\n    }\n\n    ...\n}\n</code></pre>\n\n<p>And in your activity:</p>\n\n<pre><code>// implement custom event interface\nclass MyActivity : Activity, CustomView.MyCustomEvent {\n    ...\n\n    override fun onGridTileClicked(x: Int, y: Int) {\n        // implement your logic\n    }\n}\n</code></pre>\n\n<h2>Edit:</h2>\n\n<p>My assumption is that you want to pass <strong>x</strong> and <strong>y</strong> to activity. Of course, you can pass any data you want. </p>\n"}], "owner": {"reputation": 177, "user_id": 6042392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03f50177e0078524775d0f8128778850?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Jackson", "link": "https://stackoverflow.com/users/6042392/tommy-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 49173216, "answer_count": 1, "score": 1, "last_activity_date": 1520515344, "creation_date": 1520376175, "last_edit_date": 1520467685, "question_id": 49141262, "link": "https://stackoverflow.com/questions/49141262/scanning-for-wifi-within-custom-view", "title": "Scanning For Wifi Within Custom View", "body": "<p>I have an android app that has a custom view that draws a grid. The custom view is only a section of the main activity's xml file. I need to be able to scan for wifi based on an associated grid tile (x,y) that the user selects. I'm able to get the correct grid tile using the onTouchEvent method in the custom view but I don't know how to get that information back to the main activity that contains the view so I can relate a wifi scan with the onTouchEvent and with the x,y tile that was selected.</p>\n\n<p>Let me know if I need to provide any more info or any code.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I'll try and simplify the question a little bit. </p>\n\n<p>I have an activity whose layout file contains a custom view. This custom view overrides onTouchEvent() and when the onTouchEvent() is triggered in the custom view I need to send some data back to the activity and then perform a wifi scan using the data from the custom view.</p>\n\n<p>As Stefan suggested a custom event might be useful, but I'm unsure of the implementation in my case.</p>\n"}, {"tags": ["kotlin", "jwt", "ktor"], "answers": [{"comments": [{"owner": {"reputation": 4564, "user_id": 1155415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/040f21acae20ee730e30f13a8fb26d88?s=128&d=identicon&r=PG", "display_name": "Gary Bak", "link": "https://stackoverflow.com/users/1155415/gary-bak"}, "edited": false, "score": 0, "creation_date": 1520465461, "post_id": 49144339, "comment_id": 85331633, "body": "I get what your suggesting, but how would the verifier work if the token was signed with the userId?  It would require the userId to verify."}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 4564, "user_id": 1155415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/040f21acae20ee730e30f13a8fb26d88?s=128&d=identicon&r=PG", "display_name": "Gary Bak", "link": "https://stackoverflow.com/users/1155415/gary-bak"}, "edited": false, "score": 0, "creation_date": 1520467191, "post_id": 49144339, "comment_id": 85332116, "body": "@GaryBak the token is not signed with the user id, the token is signed with the issuing entity&#39;s (your service) private key. The user id you&#39;re putting in is just one of the &quot;claims&quot; in the token. By the time the verifier code that you write above runs the signature and any expiration dates would have already be verified by <code>ktor</code>."}, {"owner": {"reputation": 4564, "user_id": 1155415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/040f21acae20ee730e30f13a8fb26d88?s=128&d=identicon&r=PG", "display_name": "Gary Bak", "link": "https://stackoverflow.com/users/1155415/gary-bak"}, "edited": false, "score": 0, "creation_date": 1520468836, "post_id": 49144339, "comment_id": 85332548, "body": "Thanks @Strelok, after debugging through it a bit I realized that what I had was correct and I had messed up the check for the userId inside my post method.  Your check for the userId above does work.  Thanks for your help."}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 1, "last_activity_date": 1520398120, "creation_date": 1520398120, "answer_id": 49144339, "question_id": 49140821, "link": "https://stackoverflow.com/questions/49140821/using-jwt-with-ktor-and-including-user-info-in-claim/49144339#49144339", "title": "Using JWT with Ktor and including user info in claim", "body": "<p>You should implement it in here. You don't need a verifier that checks user ids.</p>\n\n<pre><code>jwtAuthentication(jwtVerifier, realm) { credential -&gt;\n  if (credential.payload.audience.contains(audience))\n    val userId = credential.payload.claims[\"userId\"].asString()\n    // check if user exists ... if you want\n\n    JWTPrincipal(credential.payload)\n  else\n    null\n}\n</code></pre>\n"}], "owner": {"reputation": 4564, "user_id": 1155415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/040f21acae20ee730e30f13a8fb26d88?s=128&d=identicon&r=PG", "display_name": "Gary Bak", "link": "https://stackoverflow.com/users/1155415/gary-bak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2315, "favorite_count": 0, "accepted_answer_id": 49144339, "answer_count": 1, "score": 0, "last_activity_date": 1520398120, "creation_date": 1520374102, "question_id": 49140821, "link": "https://stackoverflow.com/questions/49140821/using-jwt-with-ktor-and-including-user-info-in-claim", "title": "Using JWT with Ktor and including user info in claim", "body": "<p>I've successfully included a jwt auth token in my application and able to restrict access to the endpoints.  I want to embed the user's ID in the jwt token, but I'm struggling how to implement the jwt verifier in Ktor.</p>\n\n<p>I create a token for the client something like this:</p>\n\n<pre><code>val token = JWT.create().withAudience(audience).withIssuer(issuer).withClaim(\"userId\", \"XXX\").sign(algorithm)\n</code></pre>\n\n<p>The route is setup like this.  The authentication {} block is run on server startup and does not allow creating a verifier with the userId.  </p>\n\n<p>This was derived from the jwt sample:</p>\n\n<pre><code>route(\"/api\") {\n    authentication {\n        val jwtVerifier = makeJwtVerifier(issuer, audience)\n        jwtAuthentication(jwtVerifier, realm) { credential -&gt;\n        if (credential.payload.audience.contains(audience))\n            JWTPrincipal(credential.payload)\n        else\n            null\n    }\n\n    handle {\n       // Handle jwt succcess here\n    }\n}\n\nprivate fun makeJwtVerifier(issuer: String, audience: String): JWTVerifier = JWT\n        .require(algorithm)\n        .withAudience(audience)\n        .withIssuer(issuer)\n        .build()\n</code></pre>\n\n<p>What is the correct way to do this?  I understand I'd need to create a verifier for each request, but don't really know where to do this nor if that is desirable. </p>\n"}, {"tags": ["android", "database", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 7714, "user_id": 1080355, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3915b3b0af17096bba7ac8cec330138d?s=128&d=identicon&r=PG", "display_name": "VSB", "link": "https://stackoverflow.com/users/1080355/vsb"}, "is_accepted": true, "score": 1, "last_activity_date": 1520371512, "creation_date": 1520371512, "answer_id": 49140201, "question_id": 49138997, "link": "https://stackoverflow.com/questions/49138997/saving-wifi-data-locally-to-phone/49140201#49140201", "title": "Saving Wifi Data Locally To Phone", "body": "<p>It depends on the interactions which you are going to have with those data. </p>\n\n<p>For example if you want to search through stored data and query some of the saved data or you want to do data manipulation on the same android application, I would suggest SQLite db.\nI would suggest file:</p>\n\n<ul>\n<li>If you want to use your android device as a simple data collector and then you want to process this data on another application on the same device so saving file on device storage would be a good mechanism to share data among data collector application and data processing application</li>\n<li>If you want to use collected data on another device such as a PC running a  windows application/Matlab and if it would be easier for you to grab data from your phone by means such as USB cable or memory card reader. If your data processing application can directly manage connections on USB port, you can also use SQLite db, and you can serialize your data through USB port but all of these options depends on your situation and your application.</li>\n</ul>\n\n<p>You can have a look at this <a href=\"https://stackoverflow.com/a/1804507/1080355\">answer</a> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 979, "user_id": 3742122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iSooQ.png?s=128&g=1", "display_name": "cherif", "link": "https://stackoverflow.com/users/3742122/cherif"}, "is_accepted": false, "score": 1, "last_activity_date": 1520371971, "creation_date": 1520371971, "answer_id": 49140319, "question_id": 49138997, "link": "https://stackoverflow.com/questions/49138997/saving-wifi-data-locally-to-phone/49140319#49140319", "title": "Saving Wifi Data Locally To Phone", "body": "<p>It is all about the complexity of your data and its size. \nHaving said that, your data is complex enough so I would go for a database. You do not need to use SqlLite directly, you have frameworks that will simplify its implementation. You can use room (framework made by google which use SqlLite underneath) or Realm. </p>\n"}], "owner": {"reputation": 177, "user_id": 6042392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03f50177e0078524775d0f8128778850?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Jackson", "link": "https://stackoverflow.com/users/6042392/tommy-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 49140201, "answer_count": 2, "score": 0, "last_activity_date": 1520371971, "creation_date": 1520366279, "question_id": 49138997, "link": "https://stackoverflow.com/questions/49138997/saving-wifi-data-locally-to-phone", "title": "Saving Wifi Data Locally To Phone", "body": "<p>I'm developing an android wifi localization app that uses a grid approach, where you select a grid tile and then it scans and collects all of the BSSIDs and RSSI values nearby that point and saves them along with the x,y coordinate of that grid tile.</p>\n\n<p>What would be the best way to save that data? Should I use an sql database or would creating a text file be better?</p>\n\n<p>This is a rough sketch of the data I need to save.</p>\n\n<pre><code>RadioMap: {\n\u201cfilename\u201d: String,\n\u201cpoints(list)\u201d: {\n    \u201cx\u201d: Int,\n    \u201cy\u201d: Int,\n    \u201ccollections(list)\u201d: {\n        \u201cBSSID\u201d: String\n        \u201cRSSI\u201d: Int\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "jsoup"], "comments": [{"owner": {"reputation": 12843, "user_id": 1565984, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b255e2ff72c208dd049995ff1c00aeec?s=128&d=identicon&r=PG", "display_name": "kandroidj", "link": "https://stackoverflow.com/users/1565984/kandroidj"}, "edited": false, "score": 0, "creation_date": 1520366594, "post_id": 49138995, "comment_id": 85283239, "body": "Have you tried without the timeout? also, have you added the Internet permission to your manifest? and I don&#39;t see any place where you handle the IOException that this call could cause."}, {"owner": {"reputation": 1, "user_id": 9453223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY8j68QFWdQ/AAAAAAAAAAI/AAAAAAAABXc/FrMWSnIHk2o/photo.jpg?sz=128", "display_name": "Robert Gabriel", "link": "https://stackoverflow.com/users/9453223/robert-gabriel"}, "reply_to_user": {"reputation": 12843, "user_id": 1565984, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b255e2ff72c208dd049995ff1c00aeec?s=128&d=identicon&r=PG", "display_name": "kandroidj", "link": "https://stackoverflow.com/users/1565984/kandroidj"}, "edited": false, "score": 0, "creation_date": 1520367215, "post_id": 49138995, "comment_id": 85283595, "body": "I tried without timeout, I have put the timeout just to test (I was thinking that it&#39;s just trying to load the page for infinite time). In this example IOException is not handled, however I have another Java class with similar code where it is handled and the same problem appears. I have forgot to add the Internet permission. Let me try, however I&#39;m thinking that I should still get a timeout if there is no internet permission. So after testing, it turns out It was because I&#39;ve forgotten to request Internet permission. Thank you!"}, {"owner": {"reputation": 12843, "user_id": 1565984, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b255e2ff72c208dd049995ff1c00aeec?s=128&d=identicon&r=PG", "display_name": "kandroidj", "link": "https://stackoverflow.com/users/1565984/kandroidj"}, "edited": false, "score": 0, "creation_date": 1520368331, "post_id": 49138995, "comment_id": 85284170, "body": "You are welcome, remember in Android that anytime you access a network resource such as a web page in your app code, you need the internet permission, this will throw an exception before your code does."}], "owner": {"reputation": 1, "user_id": 9453223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY8j68QFWdQ/AAAAAAAAAAI/AAAAAAAABXc/FrMWSnIHk2o/photo.jpg?sz=128", "display_name": "Robert Gabriel", "link": "https://stackoverflow.com/users/9453223/robert-gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520366276, "creation_date": 1520366276, "question_id": 49138995, "link": "https://stackoverflow.com/questions/49138995/kotlin-jsoup-android-async", "title": "Kotlin Jsoup Android async", "body": "<p>I can't get Jsoup to work with Kotlin. I can't scrape any website. Here is my function that prints the result:</p>\n\n<pre><code>    fun testing(view: TextView?) {\n\n    async(UI) {\n        val data: Deferred&lt;String&gt; = bg {\n            KotScrape().getWebsite()\n        }\n\n        view?.text = data.await()\n    }\n}\n</code></pre>\n\n<p>And my KotScrape class:</p>\n\n<pre><code>class KotScrape{\n\n    fun getWebsite(): String{\n        var title = \"Test\"\n        var html = Jsoup.connect(\"https://www.google.ro/?gws_rd=cr&amp;dcr=0&amp;ei=se2eWqfkJKzb6QSoo6iQDQ\").timeout(5000).get()\n        title = html.title()\n        return title\n    }\n}\n</code></pre>\n\n<p>The problem is that my getWebsite() function never returns. I think it's a JSoup problem because if i remove the two lines with jsoup from the function it works fine:</p>\n\n<pre><code>class KotScrape{\n\n    fun getWebsite(): String{\n        var title = \"Test\"\n        return title\n    }\n}\n</code></pre>\n\n<p>This is working without any problem. But when i add jsoup, it never returns, like it would be in an infinite loop. </p>\n"}, {"tags": ["java", "annotations", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520365813, "post_id": 49138837, "comment_id": 85282817, "body": "<code>vararg</code> <b>and</b> an array?  Also, that <code>[]</code> syntax is not how you declare an array type in Kotlin."}, {"owner": {"reputation": 379, "user_id": 4071864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCXar.png?s=128&g=1", "display_name": "Rens", "link": "https://stackoverflow.com/users/4071864/rens"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520366255, "post_id": 49138837, "comment_id": 85283060, "body": "@OliverCharlesworth I forgot to delete vararg. and I thought the <code>[]</code> syntax did work. So I should do it with <code>Array&lt;Role&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": true, "score": 11, "last_activity_date": 1520366803, "last_edit_date": 1520366803, "creation_date": 1520366443, "answer_id": 49139043, "question_id": 49138837, "link": "https://stackoverflow.com/questions/49138837/kotlin-custom-annotation-arguments/49139043#49139043", "title": "Kotlin custom annotation, arguments", "body": "<p>The following compiles:</p>\n\n<pre><code>enum class Role { ADMIN, USER }\n\nannotation class Secured(vararg val value: Role)\n\n@Secured(Role.ADMIN, Role.USER)\nfun foo() {}\n</code></pre>\n\n<p>As does this:</p>\n\n<pre><code>enum class Role { ADMIN, USER }\n\nannotation class Secured(val value: Array&lt;Role&gt;)\n\n@Secured([Role.ADMIN, Role.USER])\nfun foo() {}\n</code></pre>\n\n<p>They compile to the same bytecode, but Kotlin demands that you use slightly different syntax to instantiate the annotation.</p>\n"}], "owner": {"reputation": 379, "user_id": 4071864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCXar.png?s=128&g=1", "display_name": "Rens", "link": "https://stackoverflow.com/users/4071864/rens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6426, "favorite_count": 0, "accepted_answer_id": 49139043, "answer_count": 1, "score": 4, "last_activity_date": 1520366803, "creation_date": 1520365638, "question_id": 49138837, "link": "https://stackoverflow.com/questions/49138837/kotlin-custom-annotation-arguments", "title": "Kotlin custom annotation, arguments", "body": "<p>I'm trying to create a custom annotation with an array of arguments but I get an error when trying to set the arguments in the constructor of the annotation. It says it is expecting a type annotation on the Role[], while, if i'm right the Role[] is the type. I looked up the syntax in the docs which can be found here:\n<a href=\"https://kotlinlang.org/docs/reference/annotations.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/annotations.html</a>. But this documentation only explains how I can use the annotation and not how to create one.</p>\n\n<p>This is what my annotation code looks like:</p>\n\n<pre><code>@NameBinding\n@Target(AnnotationTarget.FUNCTION, AnnotationTarget.CLASS)\n@Retention(AnnotationRetention.RUNTIME)\nannotation class Secured(vararg val value: Role[])\n</code></pre>\n\n<p>This is what my Role class looks like:</p>\n\n<pre><code>enum class Role {\n   ADMIN, USER\n}\n</code></pre>\n\n<p>and this is how I want to use it:</p>\n\n<pre><code>@Secured(Role.ADMIN, Role.USER)\n</code></pre>\n\n<p>I tried looking for any examples on how to create annotations in Kotlin but I can't seem to find any weirdly. Anyone who can help me out?</p>\n"}, {"tags": ["kotlin", "dl4j", "nd4j"], "answers": [{"tags": [], "owner": {"reputation": 882, "user_id": 5243408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64cccac135c2464a44c3a3d59fcca4d?s=128&d=identicon&r=PG&f=1", "display_name": "reden", "link": "https://stackoverflow.com/users/5243408/reden"}, "is_accepted": true, "score": 1, "last_activity_date": 1520410882, "creation_date": 1520410882, "answer_id": 49147136, "question_id": 49138009, "link": "https://stackoverflow.com/questions/49138009/how-to-determine-at-runtime-if-the-dl4j-nd4j-backend-is-cpu-or-gpu/49147136#49147136", "title": "How to determine at runtime if the dl4j/nd4j backend is CPU or GPU?", "body": "<p>See if you can use <code>Nd4j.backend</code>. Printing it with cuda enabled I get:</p>\n\n<pre><code>org.nd4j.linalg.jcublas.JCublasBackend\n</code></pre>\n\n<p>and without cuda:</p>\n\n<pre><code>org.nd4j.linalg.cpu.nativecpu.CpuBackend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2246, "user_id": 5131255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c1cd4685a7b6e0f1e57b77aebb4db0?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Gibson", "link": "https://stackoverflow.com/users/5131255/adam-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1520478163, "creation_date": 1520478163, "answer_id": 49164673, "question_id": 49138009, "link": "https://stackoverflow.com/questions/49138009/how-to-determine-at-runtime-if-the-dl4j-nd4j-backend-is-cpu-or-gpu/49164673#49164673", "title": "How to determine at runtime if the dl4j/nd4j backend is CPU or GPU?", "body": "<p>It also prints out at the beginning when you start up nd4j. There should be a vendor it prints out for the backend.</p>\n"}], "owner": {"reputation": 4026, "user_id": 1117848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1215059/picture?type=large", "display_name": "Benjamin H", "link": "https://stackoverflow.com/users/1117848/benjamin-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 49147136, "answer_count": 2, "score": 0, "last_activity_date": 1520531135, "creation_date": 1520362277, "last_edit_date": 1520531135, "question_id": 49138009, "link": "https://stackoverflow.com/questions/49138009/how-to-determine-at-runtime-if-the-dl4j-nd4j-backend-is-cpu-or-gpu", "title": "How to determine at runtime if the dl4j/nd4j backend is CPU or GPU?", "body": "<p>There is an optimization for dl4j that only works with GPUs: \n<code>DataTypeUtil.setDTypeForContext(DataBuffer.Type.HALF)</code></p>\n\n<p>I'd like to only make that call if the backend is a GPU.  </p>\n\n<p>In my Maven pom.xml, I've got</p>\n\n<pre><code>&lt;!-- CPU or GPU --&gt;\n&lt;nd4j.backend&gt;nd4j-native-platform&lt;/nd4j.backend&gt;\n&lt;!--&lt;nd4j.backend&gt;nd4j-cuda-8.0-platform&lt;/nd4j.backend&gt;--&gt;\n</code></pre>\n\n<p>And I was looking at ways to read that value from Java, all of which seem clunky.  It would be much easier if I could query dl4j or nd4j for \"What flavor of backend are we running?\" and then make the optimization call based on that.</p>\n\n<p>Edit from answer:</p>\n\n<pre><code>Nd4jBackend.load().let { be-&gt;\n    println(\"nd4j Backend: ${be.javaClass.simpleName}\")\n    if(be.javaClass.simpleName.toLowerCase().contains(\"gpu\")) {\n        println(\"Optimizing for GPU\")\n        DataTypeUtil.setDTypeForContext(DataBuffer.Type.HALF)\n    }\n}\n</code></pre>\n"}, {"tags": ["hibernate", "jpa", "kotlin"], "comments": [{"owner": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "edited": false, "score": 0, "creation_date": 1520361598, "post_id": 49137799, "comment_id": 85280696, "body": "Do you have a default value for your id property? That may be the issue."}, {"owner": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "edited": false, "score": 0, "creation_date": 1520361725, "post_id": 49137799, "comment_id": 85280749, "body": "You&#39;ve defined the id field as auto generated but assigned it a default value. When hibernate tries to persist it, it thinks that the object represents an underlying row in database because it already has an id. So, it considers it a detached object."}, {"owner": {"reputation": 1841, "user_id": 2753579, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a15ab14d7d32350031bc4722bae165b9?s=128&d=identicon&r=PG&f=1", "display_name": "yooouuri", "link": "https://stackoverflow.com/users/2753579/yooouuri"}, "reply_to_user": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "edited": false, "score": 1, "creation_date": 1520361769, "post_id": 49137799, "comment_id": 85280779, "body": "How can I do this in Kotlin? Set <i>null</i> to id?"}, {"owner": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "edited": false, "score": 0, "creation_date": 1520361847, "post_id": 49137799, "comment_id": 85280811, "body": "I&#39;ve not done Kotlin. I guess as long as you don&#39;t assign anything, it would take as null."}, {"owner": {"reputation": 1841, "user_id": 2753579, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a15ab14d7d32350031bc4722bae165b9?s=128&d=identicon&r=PG&f=1", "display_name": "yooouuri", "link": "https://stackoverflow.com/users/2753579/yooouuri"}, "reply_to_user": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "edited": false, "score": 0, "creation_date": 1520361900, "post_id": 49137799, "comment_id": 85280835, "body": "@Sashi setting <code>var id: Long? = null</code> works now. Please post an answer so I can accept yours :D"}], "answers": [{"tags": [], "owner": {"reputation": 1457, "user_id": 591234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4a2e6426168ea5b9e824548c65e9c5c?s=128&d=identicon&r=PG", "display_name": "Sashi", "link": "https://stackoverflow.com/users/591234/sashi"}, "is_accepted": true, "score": 1, "last_activity_date": 1520362537, "creation_date": 1520362537, "answer_id": 49138072, "question_id": 49137799, "link": "https://stackoverflow.com/questions/49137799/detached-entity-passed-to-persist-kotlin/49138072#49138072", "title": "detached entity passed to persist Kotlin", "body": "<p>You've defined the id field as auto generated but assigned it a default value. When hibernate tries to persist it, it thinks that the object represents an underlying row in database because it already has an id. So, it considers it a detached object. \nThe persist() method doesn't work on a detached object. \nYou can set the default value of id to null to resolve this issue. </p>\n"}], "owner": {"reputation": 1841, "user_id": 2753579, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a15ab14d7d32350031bc4722bae165b9?s=128&d=identicon&r=PG&f=1", "display_name": "yooouuri", "link": "https://stackoverflow.com/users/2753579/yooouuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "accepted_answer_id": 49138072, "answer_count": 1, "score": 0, "last_activity_date": 1520362537, "creation_date": 1520361438, "last_edit_date": 1520361689, "question_id": 49137799, "link": "https://stackoverflow.com/questions/49137799/detached-entity-passed-to-persist-kotlin", "title": "detached entity passed to persist Kotlin", "body": "<p>When I try to persist an entity, the following error occur</p>\n\n<blockquote>\n  <p>org.hibernate.PersistentObjectException: detached entity passed to\n  persist: xxxxxxx.xxxxxxxx.<strong>Invoice</strong></p>\n</blockquote>\n\n<p>My model</p>\n\n<pre><code>@Entity\n@Table(name = \"invoices\")\nclass Invoice(\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        var id: Long = -1,\n        var date: Date,\n        @Column(name = \"user_id\", unique = true)\n        var userId: Long,\n        @Column(name = \"invoice_number\")\n        var invoiceNumber: String) : Serializable {\n\n    constructor(date: Date, userId: Long, invoiceNumber: String) : this(-1, date, userId, invoiceNumber)\n}\n</code></pre>\n\n<p>Invoice object is created as followed</p>\n\n<pre><code>val invoice = Invoice(Date(), 11111, \"abc123\")\n\ninvoiceDao.create(invoice)\n</code></pre>\n\n<p>In my generic dao I persist</p>\n\n<pre><code>fun create(entity: T): T {\n    entityManager.persist(entity)\n\n    return entity\n}\n</code></pre>\n\n<p><em>allopen</em> and <em>noarg</em> is included in my build.gradle</p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1520358044, "post_id": 49136848, "comment_id": 85278714, "body": "Strange. Does LogCat say anything about it?"}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1520358209, "post_id": 49136848, "comment_id": 85278813, "body": "It&#39;s also not clear if you are using java or kotlin. Syntax looks like JS..."}, {"owner": {"reputation": 183, "user_id": 5604896, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VNHvqvlGk9o/AAAAAAAAAAI/AAAAAAAAAB0/9XqFB-wqKVw/photo.jpg?sz=128", "display_name": "Viktoriia Chebotar", "link": "https://stackoverflow.com/users/5604896/viktoriia-chebotar"}, "edited": false, "score": 0, "creation_date": 1520358766, "post_id": 49136848, "comment_id": 85279162, "body": "I am using kotlin. Logcat doesn&#39;t say anything special :("}, {"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1520359078, "post_id": 49136848, "comment_id": 85279338, "body": "did you try turning off offline persistence?"}, {"owner": {"reputation": 183, "user_id": 5604896, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VNHvqvlGk9o/AAAAAAAAAAI/AAAAAAAAAB0/9XqFB-wqKVw/photo.jpg?sz=128", "display_name": "Viktoriia Chebotar", "link": "https://stackoverflow.com/users/5604896/viktoriia-chebotar"}, "edited": false, "score": 0, "creation_date": 1520365856, "post_id": 49136848, "comment_id": 85282840, "body": "Yes, I tried turning off offline persistence, but it didn&#39;t help"}, {"owner": {"reputation": 134, "user_id": 10247962, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-92j3smLwkaI/AAAAAAAAAAI/AAAAAAAAAFY/mBpAvcFFIIU/photo.jpg?sz=128", "display_name": "Henrique Bruno", "link": "https://stackoverflow.com/users/10247962/henrique-bruno"}, "edited": false, "score": 0, "creation_date": 1608513848, "post_id": 49136848, "comment_id": 115599590, "body": "Have you fixed it?"}], "owner": {"reputation": 183, "user_id": 5604896, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VNHvqvlGk9o/AAAAAAAAAAI/AAAAAAAAAB0/9XqFB-wqKVw/photo.jpg?sz=128", "display_name": "Viktoriia Chebotar", "link": "https://stackoverflow.com/users/5604896/viktoriia-chebotar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520439731, "creation_date": 1520357784, "last_edit_date": 1520439731, "question_id": 49136848, "link": "https://stackoverflow.com/questions/49136848/firebase-database-disconnects-after-app-closes-and-never-get-connected-again-unt", "title": "Firebase database disconnects after app closes and never get connected again until logout/login", "body": "<p>I implemented google login and set rules in database as:</p>\n\n<pre><code>{\n\"rules\": {\n    \"users\": {\n      \"$uid\": {\n        \".write\": \"$uid === auth.uid\",\n           \".read\": \"$uid === auth.uid\"\n       }\n    }\n  }\n}\n</code></pre>\n\n<p>When I login to just installed app and try to save value it works great. Then after leaving app for an hour or so the new values seem to be stored only locally and never get updated in the cloud database. I can also see it if I login as the same user on another phone - the local databases are different and they not getting uploaded to the cloud. Closing app and restarting doesn't help. Only after doing logout - login it starts saving data again, but after some time the issue repeats. </p>\n\n<p>To store values I use:</p>\n\n<pre><code>firebaseDatabase.reference\n    .child(\"users\")\n    .child(firebaseAuth.currentUser?.uid)\n    .child(userWord.word)\n    .setValue(userWord)\n</code></pre>\n\n<p>Current user and it's uid are not null and are correct values. What I am doing wrong? Do I need to do any token refresh and it's causing issues?\nCompletition listener is not being called at all, but value event listener attached to the query above is getting fired. Also I use </p>\n\n<pre><code>firebaseDatabase.setPersistenceEnabled(true).\n</code></pre>\n\n<p>I added connection listener and found out that after app restart firebase is not connected until I do logout/login.  How can I reconnect firebase? calling \"FirebaseDatabase.getInstance().goOnline()\" doesn't seem to work.</p>\n\n<p>I would be very grateful if anyone can help me to deal with this problem.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "adapter"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 7184820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80f03a632c534998829ea44b3197d195?s=128&d=identicon&r=PG&f=1", "display_name": "Danil", "link": "https://stackoverflow.com/users/7184820/danil"}, "is_accepted": true, "score": 0, "last_activity_date": 1520423977, "creation_date": 1520423977, "answer_id": 49151416, "question_id": 49136469, "link": "https://stackoverflow.com/questions/49136469/cant-remove-fragment-from-tablayout/49151416#49151416", "title": "Can&#39;t remove Fragment from TabLayout", "body": "<p>The problem was solved by overriding <code>getItemPosition()</code> </p>\n\n<pre><code>override fun getItemPosition(obj: Any): Int {\n    return PagerAdapter.POSITION_NONE\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 7184820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80f03a632c534998829ea44b3197d195?s=128&d=identicon&r=PG&f=1", "display_name": "Danil", "link": "https://stackoverflow.com/users/7184820/danil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 49151416, "answer_count": 1, "score": 0, "last_activity_date": 1520423977, "creation_date": 1520356478, "question_id": 49136469, "link": "https://stackoverflow.com/questions/49136469/cant-remove-fragment-from-tablayout", "title": "Can&#39;t remove Fragment from TabLayout", "body": "<p>I have TabLayout with ViewPager</p>\n\n<p><br>\n<img src=\"https://i.stack.imgur.com/GgPwf.jpg\" width=\"300\" /></p>\n\n<p>On click close button, i try remove tab</p>\n\n<pre><code>closeIcon.setOnClickListener {\n    tabLayout.removeTabAt(pos)\n    fragments.removeAt(pos)\n    fragmentsTitle.removeAt(pos)\n    notifyDataSetChanged()\n}\n</code></pre>\n\n<p>Adapter code:</p>\n\n<pre><code>class ViewPagerAdapter(fm: FragmentManager, private val tabLayout: TabLayout,\n                           private val ctx: Context) : FragmentStatePagerAdapter(fm) {\n\n    private val fragments = ArrayList&lt;FileFragment&gt;()\n    private val fragmentsTitle = ArrayList&lt;String&gt;()\n\n    override fun getItem(position: Int): FileFragment = fragments[position]\n\n    override fun getCount(): Int = fragments.count()\n\n    override fun getPageTitle(position: Int): CharSequence = fragmentsTitle[position]\n\n    fun addFragment(fragment: FileFragment, title: String) {\n        fragments.add(fragment)\n        fragmentsTitle.add(title)\n    }\n}\n</code></pre>\n\n<p>In MainActivity setup ViewPager:</p>\n\n<pre><code>private fun setupViewPager(viewPager: ViewPager, tabLayout: TabLayout,\n                               fragmentManager: FragmentManager, ctx: Context): ViewPagerAdapter {\n    val adapter = ViewPagerAdapter(fragmentManager, tabLayout, ctx)\n    viewPager.adapter = adapter\n    tabLayout.setupWithViewPager(viewPager)\n\n    return adapter\n}\n</code></pre>\n\n<p>But when i remove tab, my fragment is not removed. Also I can scroll to the previous fragment</p>\n\n<p><img src=\"https://i.stack.imgur.com/4pSSt.jpg\" width=\"300\" /></p>\n"}, {"tags": ["android", "gradle", "kotlin", "gradle-plugin"], "answers": [{"comments": [{"owner": {"reputation": 3008, "user_id": 452487, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9H9xg.jpg?s=128&g=1", "display_name": "JaydeepW", "link": "https://stackoverflow.com/users/452487/jaydeepw"}, "edited": false, "score": 0, "creation_date": 1545808992, "post_id": 49134861, "comment_id": 94698534, "body": "<code>kapt</code> plugin should be added at the last. It matters."}], "tags": [], "owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "is_accepted": false, "score": 12, "last_activity_date": 1520355914, "last_edit_date": 1520355914, "creation_date": 1520351311, "answer_id": 49134861, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/49134861#49134861", "title": "Original kapt is deprecated", "body": "<p>Add kotlin-kapt plugin in your app-level build.gradle file.</p>\n\n<p>Update your gradle like this:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'  // add this line\n\nandroid {\n    compileSdkVersion 27\n    defaultConfig {\n      ........\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1037, "user_id": 442827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c52114cb2eba04dc8380de1e59dd0e5c?s=128&d=identicon&r=PG", "display_name": "ninehundreds", "link": "https://stackoverflow.com/users/442827/ninehundreds"}, "edited": false, "score": 0, "creation_date": 1534128598, "post_id": 49293777, "comment_id": 90583757, "body": "I discovered this after installing Realm. Although the addition of &#39;apply plugin&#39; fixed the warning, Gradle would improperly detect Butterknife&#39;s annotation processor."}], "tags": [], "owner": {"reputation": 2606, "user_id": 5230881, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HG5fYGvbCUA/AAAAAAAAAAI/AAAAAAAAAGA/a6y-whXuXoY/photo.jpg?sz=128", "display_name": "Raja", "link": "https://stackoverflow.com/users/5230881/raja"}, "is_accepted": true, "score": 44, "last_activity_date": 1521099861, "last_edit_date": 1521099861, "creation_date": 1521099143, "answer_id": 49293777, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/49293777#49293777", "title": "Original kapt is deprecated", "body": "<blockquote>\n  <p><strong>Source</strong>: Annotation Processing with Kotlin</p>\n  \n  <p>Source Link 1: <a href=\"https://kotlinlang.org/docs/reference/kapt.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/kapt.html</a></p>\n  \n  <p>Source Link 2:<a href=\"https://github.com/uber/NullAway/issues/75\" rel=\"noreferrer\">https://github.com/uber/NullAway/issues/75</a></p>\n</blockquote>\n\n<p>Kotlin plugin doesn't pick up <code>annotationProcessor</code> dependencies, So we have to use kapt dependencies with <code>kotlin-kapt</code>.</p>\n\n<p>Use the latest version of Kotlin annotation processor put this line at top of your module's level <code>build.gradle</code> file</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>Like</p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'  // add this line\n\nandroid {\n    compileSdkVersion 27\n    defaultConfig {\n      ........\n    }\n}\n</code></pre>\n\n<p>Don't forget to update the version when you use different build plugin version.</p>\n"}, {"tags": [], "owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "is_accepted": false, "score": 7, "last_activity_date": 1534196539, "creation_date": 1534196539, "answer_id": 51830987, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/51830987#51830987", "title": "Original kapt is deprecated", "body": "<p>I was getting this error after adding <code>apply plugin: 'realm-android'</code> so the problem was the order of statements. This order worked for me</p>\n\n<pre><code>apply plugin: 'realm-android'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 365, "user_id": 10239175, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R6IT8RLc_To/AAAAAAAAAAI/AAAAAAAAAAs/sQsUoOtlX0g/photo.jpg?sz=128", "display_name": "indrajeet jyoti", "link": "https://stackoverflow.com/users/10239175/indrajeet-jyoti"}, "is_accepted": false, "score": 1, "last_activity_date": 1552625643, "creation_date": 1552625643, "answer_id": 55175763, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/55175763#55175763", "title": "Original kapt is deprecated", "body": "<pre><code>apply plugin: 'kotlin-kapt'\n\n// add these line in the bulid.gradle(app) module in the top\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "edited": false, "score": 0, "creation_date": 1587149558, "post_id": 58729512, "comment_id": 108405752, "body": "<code>kapt &quot;com.android.databinding:compiler:3.1.4&quot;</code> needs to be embedded in <code>dependencies {  ... } </code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 12152333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCNls9Guzn5Pndo_YSJtt33ymK2s100nOLMMimMOw=k-s128", "display_name": "Muhammad Umar Saddique", "link": "https://stackoverflow.com/users/12152333/muhammad-umar-saddique"}, "is_accepted": false, "score": -3, "last_activity_date": 1573045731, "last_edit_date": 1573045731, "creation_date": 1573041003, "answer_id": 58729512, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/58729512#58729512", "title": "Original kapt is deprecated", "body": "<p>Actually the real problem is in the order of lines i was also wasted time in it finally i figure out this try like this you will get rid from this</p>\n\n<pre><code>apply plugin: 'realm-android'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\nkapt \"com.android.databinding:compiler:3.1.4\"\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 3967687, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/XUgUp.jpg?s=128&g=1", "display_name": "Muhammad Shoaib Murtaza", "link": "https://stackoverflow.com/users/3967687/muhammad-shoaib-murtaza"}, "is_accepted": false, "score": 0, "last_activity_date": 1583504123, "creation_date": 1583504123, "answer_id": 60565886, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/60565886#60565886", "title": "Original kapt is deprecated", "body": "<p>// add following line in build.gradle(Module:app) file at the end of plugin section </p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 11973672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c94bf72d144a1783846a2499e580da3?s=128&d=identicon&r=PG&f=1", "display_name": "Abbas Khan Waliullahi", "link": "https://stackoverflow.com/users/11973672/abbas-khan-waliullahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1619241228, "creation_date": 1619241228, "answer_id": 67239531, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated/67239531#67239531", "title": "Original kapt is deprecated", "body": "<p>open your app level gradle file and add this line like this shown in the image and sync you are good to go..</p>\n<p><a href=\"https://i.stack.imgur.com/X5jzV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X5jzV.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16613, "favorite_count": 2, "accepted_answer_id": 49293777, "answer_count": 7, "score": 16, "last_activity_date": 1619241228, "creation_date": 1520351311, "last_edit_date": 1527766299, "question_id": 49134860, "link": "https://stackoverflow.com/questions/49134860/original-kapt-is-deprecated", "title": "Original kapt is deprecated", "body": "<p>I have changed Kotlin version to 1.2.30. After the update I unable to run the project. I got the below error message.</p>\n\n<pre><code>Error:Execution failed for task ':app:compileDevDebugJavaWithJavac'.\n&gt; app: Original kapt is deprecated. Please add \"apply plugin: 'kotlin-kapt'\" to your build.gradle.\n</code></pre>\n\n<p>How do I resolve this?</p>\n"}, {"tags": ["compiler-errors", "kotlin", "nullable"], "answers": [{"comments": [{"owner": {"reputation": 872, "user_id": 3732058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f62c5fdd622cdf6b3f1936762b294f?s=128&d=identicon&r=PG&f=1", "display_name": "hughjdavey", "link": "https://stackoverflow.com/users/3732058/hughjdavey"}, "edited": false, "score": 0, "creation_date": 1520351635, "post_id": 49134960, "comment_id": 85274528, "body": "Thanks for your answer. Is there something special about <code>filterNotNull</code> then?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 872, "user_id": 3732058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f62c5fdd622cdf6b3f1936762b294f?s=128&d=identicon&r=PG&f=1", "display_name": "hughjdavey", "link": "https://stackoverflow.com/users/3732058/hughjdavey"}, "edited": false, "score": 2, "creation_date": 1520351668, "post_id": 49134960, "comment_id": 85274551, "body": "Yes, <code>filterNotNull</code> returns a different type from the type of collection on which it was invoked."}, {"owner": {"reputation": 872, "user_id": 3732058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f62c5fdd622cdf6b3f1936762b294f?s=128&d=identicon&r=PG&f=1", "display_name": "hughjdavey", "link": "https://stackoverflow.com/users/3732058/hughjdavey"}, "edited": false, "score": 0, "creation_date": 1520351698, "post_id": 49134960, "comment_id": 85274578, "body": "Aha that makes a lot of sense"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 2, "last_activity_date": 1520351635, "last_edit_date": 1520351635, "creation_date": 1520351545, "answer_id": 49134960, "question_id": 49134834, "link": "https://stackoverflow.com/questions/49134834/kotlin-filternotnull-for-object-properties/49134960#49134960", "title": "Kotlin filterNotNull for object properties", "body": "<p>No, this is not possible, either in the current version of Kotlin or with any of the potential enhancements currently being considered. The Kotlin compiler is not smart enough to understand the semantics of the <code>filter</code> function and to know that the check performed in the lambda passed to that function will affect the possible types in a different lambda. </p>\n\n<p>(There is not even a possibility to express the idea of \"a collection of Event where Event.venue is not null\" as a Kotlin type, much less to infer that the receiver of <code>map</code> will have that type.)</p>\n"}, {"comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520351742, "post_id": 49135025, "comment_id": 85274609, "body": "The compiler is not just a lexical parser."}, {"owner": {"reputation": 872, "user_id": 3732058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f62c5fdd622cdf6b3f1936762b294f?s=128&d=identicon&r=PG&f=1", "display_name": "hughjdavey", "link": "https://stackoverflow.com/users/3732058/hughjdavey"}, "edited": false, "score": 0, "creation_date": 1520351808, "post_id": 49135025, "comment_id": 85274652, "body": "Thanks for answering. I unfortunately can&#39;t do the map to <code>Venue</code> becuase the &#39;real&#39; code uses multiple properties from <code>Event</code> in the map call"}, {"owner": {"reputation": 4293, "user_id": 4069913, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100007329305829/picture?type=large", "display_name": "Orest Savchak", "link": "https://stackoverflow.com/users/4069913/orest-savchak"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520351908, "post_id": 49135025, "comment_id": 85274737, "body": "@yole agree, i removed that"}], "tags": [], "owner": {"reputation": 4293, "user_id": 4069913, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100007329305829/picture?type=large", "display_name": "Orest Savchak", "link": "https://stackoverflow.com/users/4069913/orest-savchak"}, "is_accepted": false, "score": 0, "last_activity_date": 1520351833, "last_edit_date": 1520351833, "creation_date": 1520351722, "answer_id": 49135025, "question_id": 49134834, "link": "https://stackoverflow.com/questions/49134834/kotlin-filternotnull-for-object-properties/49135025#49135025", "title": "Kotlin filterNotNull for object properties", "body": "<p>If it would check all similar cases, your compile time will be super long.</p>\n\n<p>Thought you can do next:</p>\n\n<pre><code>events\n    .map { it.venue }\n    .filterNotNull()\n    .map { doSomething(it.lat, it.lng)\n</code></pre>\n"}], "owner": {"reputation": 872, "user_id": 3732058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f62c5fdd622cdf6b3f1936762b294f?s=128&d=identicon&r=PG&f=1", "display_name": "hughjdavey", "link": "https://stackoverflow.com/users/3732058/hughjdavey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 49134960, "answer_count": 2, "score": 3, "last_activity_date": 1520351833, "creation_date": 1520351236, "question_id": 49134834, "link": "https://stackoverflow.com/questions/49134834/kotlin-filternotnull-for-object-properties", "title": "Kotlin filterNotNull for object properties", "body": "<p>I have the following (simplified) kotlin code:</p>\n\n<pre><code>data class Event(val name: String, val venue: Venue?)\n\ndata class Venue(val lat: Double, val lng: Double)\n\n...\n\nreturn events\n        .filter { it.venue != null }\n        .map { doSomething(it.venue.lat, it.venue.lng)\n</code></pre>\n\n<p>The code doesn't compile with the error <code>Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type Venue?</code></p>\n\n<p>I understand what this means, but I don't understand why the compiler can't figure out that <code>it.venue</code> cannot be <code>null</code> in the <code>.map</code> call. </p>\n\n<p>If the event were nullable, I could write <code>events.filterNotNull().name</code> or something and the compiler would not complain. Is there any way to do the same for a nullable object property rather than a nullable object?</p>\n\n<p>Thanks for your time</p>\n"}, {"tags": ["kotlin", "suspend", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1520360679, "last_edit_date": 1520360679, "creation_date": 1520358078, "answer_id": 49136919, "question_id": 49134823, "link": "https://stackoverflow.com/questions/49134823/kotlin-coroutines-difference-between-launch-fun-and-launch-suspend-fun/49136919#49136919", "title": "kotlin coroutines. Difference between launch{ fun} and launch {suspend fun}", "body": "<p>Yes, there is.</p>\n\n<p>Semantically, a call to a suspending function may suspend the execution, which may be resumed at some point later (or never), possibly in a different context (e.g. another thread).</p>\n\n<p>To ensure this, the compiler handles calls to a suspending function in a special way: it produces the code that saves the current local variables into a <code>Continuation</code> instance and passes it to the suspending function, and there's also a resumption point in the bytecode after the call, to which the execution will jump, load the local variables and run on (with a corner case of tail calls).</p>\n\n<p>A call to a non-suspending function is compiled to much simpler bytecode, the same to normally calling a function outside a suspending function body.</p>\n\n<p>You can find details about Kotlin coroutines design and implementation here: <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#implementation-details\" rel=\"noreferrer\">Coroutines for Kotlin</a></p>\n\n<p>You can also inspect the resulting compiled bytecode to see the difference: <a href=\"https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea\">Kotlin Bytecode - How to analyze in IntelliJ IDEA?</a></p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 2229913, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db0c012e6ab8f014e51e1c4b89a7fdf5?s=128&d=identicon&r=PG", "display_name": "Samuel Agbede", "link": "https://stackoverflow.com/users/2229913/samuel-agbede"}, "is_accepted": false, "score": 0, "last_activity_date": 1520436356, "creation_date": 1520436356, "answer_id": 49155550, "question_id": 49134823, "link": "https://stackoverflow.com/questions/49134823/kotlin-coroutines-difference-between-launch-fun-and-launch-suspend-fun/49155550#49155550", "title": "kotlin coroutines. Difference between launch{ fun} and launch {suspend fun}", "body": "<p>Let me add in a few cents</p>\n\n<p>You are basically asking for the difference between a function and a suspended function. </p>\n\n<p>A coroutine is like a thread only that it doesn't take so much of computer memory. You can start 100,000 coroutines with ease.\nA suspend function is basically just a function but with a special call scope. It can only be called from coroutines and other suspended functions.\nFrom the official Kotlin documentation, it says</p>\n\n<blockquote>\n  <p>Suspend functions are only allowed to be called from a coroutine or\n  another suspend function. Let's dig a little into what it means. The biggest merit of coroutines is that they can suspend without blocking a thread. The compiler has to emit some special code to make this possible, so we have to mark functions that may suspend explicitly in the code.</p>\n</blockquote>\n"}], "owner": {"reputation": 311, "user_id": 3976886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/azOvj.jpg?s=128&g=1", "display_name": "Kunta Kinte", "link": "https://stackoverflow.com/users/3976886/kunta-kinte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 1, "accepted_answer_id": 49136919, "answer_count": 2, "score": 8, "last_activity_date": 1520436356, "creation_date": 1520351209, "question_id": 49134823, "link": "https://stackoverflow.com/questions/49134823/kotlin-coroutines-difference-between-launch-fun-and-launch-suspend-fun", "title": "kotlin coroutines. Difference between launch{ fun} and launch {suspend fun}", "body": "<p>Is there any difference in execution between?</p>\n\n<pre><code>launch {\n    function1()\n}\nfun function1(){\n    DoSomething...\n}\n</code></pre>\n\n<p>And</p>\n\n<pre><code>launch {\n   function2()\n}\nsuspend fun function2(){\n   DoSomething...\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "android-activity", "kotlin"], "comments": [{"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1520344621, "post_id": 49132512, "comment_id": 85269719, "body": "try to make it Serializable"}], "answers": [{"comments": [{"owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "edited": false, "score": 2, "creation_date": 1520350622, "post_id": 49132733, "comment_id": 85273747, "body": "Also, one can use a plugin that will generate all the code <a href=\"https://plugins.jetbrains.com/plugin/8086-parcelable-code-generator-for-kotlin-\" rel=\"nofollow noreferrer\">plugins.jetbrains.com/plugin/&hellip;</a>"}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "reply_to_user": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "edited": false, "score": 1, "creation_date": 1520351248, "post_id": 49132733, "comment_id": 85274231, "body": "Yes, it&#180;s good to use those kind of plugins that removes boilerplate code generation."}], "tags": [], "owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "is_accepted": false, "score": 3, "last_activity_date": 1520345169, "creation_date": 1520345169, "answer_id": 49132733, "question_id": 49132512, "link": "https://stackoverflow.com/questions/49132512/issues-to-pass-objects-as-parameters-from-activity-to-fragment/49132733#49132733", "title": "Issues to pass objects as parameters from activity to fragment", "body": "<p>Your class should implement Parcelable this way:</p>\n\n<pre><code>class Establishment(val title: String) : Parcelable {\n\n    private constructor(p: Parcel) : this(\n        title = p.readString(),\n\n    override fun writeToParcel(dest: Parcel, flags: Int) {\n        dest.writeString(title)\n    }\n\n    override fun describeContents() = 0\n\n    companion object {\n        @JvmField val CREATOR = object : Parcelable.Creator&lt;Establishment&gt; {\n            override fun createFromParcel(parcel: Parcel) = Establishment(parcel)\n            override fun newArray(size: Int) = arrayOfNulls&lt;Establishment&gt;(size)\n        }\n    }\n\n    fun loadFromJson(json: JsonObject) {\n        title = readString(json, TAG_TITLE)\n        // More API loads\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 0, "last_activity_date": 1520426451, "creation_date": 1520426451, "answer_id": 49152230, "question_id": 49132512, "link": "https://stackoverflow.com/questions/49132512/issues-to-pass-objects-as-parameters-from-activity-to-fragment/49152230#49152230", "title": "Issues to pass objects as parameters from activity to fragment", "body": "<p>So with your help I finally found out how to do this.</p>\n\n<p>In my fragment, I modified my newInstance() fun :</p>\n\n<pre><code>companion object {\n    fun newInstance(restaurant : Establishment) : Home2Fragment {\n        val fragment = Home2Fragment()\n        val args = Bundle()\n\n        args.putParcelable(\"restaurant\", restaurant)\n        fragment.arguments = args\n\n        return (fragment)\n    }\n}\n</code></pre>\n\n<p>This was not very difficult, it was before as my IDE was telling me that my object \"Establishment\" was not a Parcelable Object.</p>\n\n<p>So the real problem was to set \"Establishment\" as a Parcelable Object.</p>\n\n<p>It gave me hard time so I decided to use Parcelable Generator plugin, as adviced by TpoM6oH.</p>\n\n<p>My class Establishment now look like this :</p>\n\n<pre><code>@Parcel\nclass Establishment() : Parcelable {\n\n    var title = \"\"\n    // More var\n\n    fun CREATOR(): Parcelable.Creator&lt;Establishment&gt; = object : Parcelable.Creator&lt;Establishment&gt; {\n        override fun createFromParcel(p0: android.os.Parcel?): Establishment {\n            return Establishment()\n        }\n\n        override fun newArray(p0: Int): Array&lt;Establishment&gt; {\n            return null as Array&lt;Establishment&gt;\n        }\n    }\n\n    constructor(parcel: android.os.Parcel) : this() {\n        this = parcel.readString()\n        // More var\n    }\n\n    fun loadFromJson(json: JsonObject) {\n        title = readString(json, TAG_TITLE)\n        // More load from API\n    }\n\n    companion object {\n        private const val TAG_TITLE = \"title\"\n    }\n\n    override fun writeToParcel(parcel: android.os.Parcel, flags: Int) {\n        parcel.writeString(title)\n        // More var\n    }\n\n    override fun describeContents() : Int {\n        return 0\n    }\n}\n</code></pre>\n\n<p>The plugin Parcelable Generator added some mysterious functions in my class, and \"Establishment\" (line 2) is still a problem in my IDE opinion (\"This class implements Parcelable but does not provide a CREATOR field\").</p>\n\n<p>But the code DOES compile ! And it is working !</p>\n\n<p>Thanks everyone for your advice.</p>\n"}], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520426451, "creation_date": 1520344491, "last_edit_date": 1520344888, "question_id": 49132512, "link": "https://stackoverflow.com/questions/49132512/issues-to-pass-objects-as-parameters-from-activity-to-fragment", "title": "Issues to pass objects as parameters from activity to fragment", "body": "<p>I am trying to pass an object as a parameter from an activity to a fragment.</p>\n\n<p>I already searched over hill and dale to find out how to do it, I tried many methods but none of them worked.</p>\n\n<p>Here is what I tried :</p>\n\n<pre><code>// In my Activity, where I call my fragment\nvar bundle = Bundle()\nbundle.putParcelable(\"restaurant\", restaurant)\nvar fragment = Home2Fragment()\nfragment.arguments = bundle\nsupportFragmentManager.beginTransaction().replace(R.id.content, fragment, FRAGMENT_HOME).commit()\n</code></pre>\n\n<p>My IDE (Android Studio) underline \"restaurant\" in bundle.putParcelable line, telling me a type mismatch.\nThis is the same with the getArguments() methods, I get a type mismatch.</p>\n\n<p>My class look like this :</p>\n\n<pre><code>@Parcel\nclass Establishment {\n\n    var title = \"\"\n    // More variables\n\n    fun loadFromJson(json: JsonObject) {\n        title = readString(json, TAG_TITLE)\n        // More API loads\n    }\n\n    companion object {\n        private const val TAG_TITLE = \"title\"\n        // More tags\n    }\n}\n</code></pre>\n\n<p>I don't understand why my class is set as \"Parcel\" but is not recognized as a \"Parcelable\".</p>\n\n<p>I am looking for an efficient way to pass parameters from an activity to a fragment.</p>\n\n<p>Thanks a lot in advance.</p>\n\n<hr>\n\n<p>EDIT :</p>\n\n<p>As asked, I tried to make it as Serializable.\nI can't make it Serializable, as \"Serializable\" does not exists.</p>\n\n<p>But I tried to make it \"SerializedName\", but \"This annotation is not applicable to target 'class' \"</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 685380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/39ef6987e0b00c12a1af3f8e9a5a5e73?s=128&d=identicon&r=PG", "display_name": "n_l", "link": "https://stackoverflow.com/users/685380/n-l"}, "edited": false, "score": 0, "creation_date": 1520343783, "post_id": 49131912, "comment_id": 85269182, "body": "Thanks for the answer. Unfortunately that isn&#39;t practical because additional Constraints can be defined by the user and should be usable in the DSL e.g. a user could define a <code>fun nonEmptyText(min: Int = 1, max: Int = 65.536): Constraint</code> factory method to create a constraint and will not be able to add the shadowing function in the <code>ValidationBuilder</code>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 784, "user_id": 685380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/39ef6987e0b00c12a1af3f8e9a5a5e73?s=128&d=identicon&r=PG", "display_name": "n_l", "link": "https://stackoverflow.com/users/685380/n-l"}, "edited": false, "score": 1, "creation_date": 1520344714, "post_id": 49131912, "comment_id": 85269788, "body": "@n_l, I think a Kotlin DSL customization on a user&#39;s side is usually done with DSL-specific extensions. Updated the answer."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1520348363, "last_edit_date": 1520348363, "creation_date": 1520342619, "answer_id": 49131912, "question_id": 49131737, "link": "https://stackoverflow.com/questions/49131737/create-a-list-from-statements-in-a-dsl-block/49131912#49131912", "title": "Create a list from statements in a DSL block", "body": "<p>Well, there seems to be no straightforward solution, because Kotlin provides no way to handle an evaluated expression result that is not assigned, returned or passed anywhere.</p>\n\n<p>A possible workaround is to mimic the constructor you need with a function defined for your builder:</p>\n\n<pre><code>class ValidationBuilder {\n    /* ... */\n\n    fun Constraint(name: String) = \n        full.qualified.name.of.Constraint(name).also(constraints::add)\n}\n</code></pre>\n\n<p>Unfortunately, this will require you to duplicate all the signatures that you want to call in this way.</p>\n\n<hr>\n\n<p><strong>UPD (answering to the comment)</strong>: I believe the idiomatic way for users to customize a DSL is defining their own extensions for the DSL builders:</p>\n\n<pre><code>fun ValidationBuilder.nonEmptyText(min: Int = 1, max: Int = 65.536) = TODO()\n</code></pre>\n\n<p>If a <code>Constraint</code> that comes from outside the DSL is an important use case, you can cover it with a special function (e.g. <code>fun ValidationBuilder.constraint(...)</code>) and let the users delegate their extensions to it.</p>\n"}], "owner": {"reputation": 784, "user_id": 685380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/39ef6987e0b00c12a1af3f8e9a5a5e73?s=128&d=identicon&r=PG", "display_name": "n_l", "link": "https://stackoverflow.com/users/685380/n-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49131912, "answer_count": 1, "score": 2, "last_activity_date": 1520348363, "creation_date": 1520342062, "question_id": 49131737, "link": "https://stackoverflow.com/questions/49131737/create-a-list-from-statements-in-a-dsl-block", "title": "Create a list from statements in a DSL block", "body": "<p>In an attempt to build a DSL for validation, I am looking for ways to collect the statements inside a block/lambda with receiver. To illustrate, here is a minimal example without the actual validation logic:</p>\n\n<pre><code>data class Constraint(val hint: String)\n\nclass Validation(val constraints: List&lt;Constraint&gt;) {\n\n    companion object {\n        operator fun invoke(init: (ValidationBuilder.() -&gt; Unit)): Validation {\n            return ValidationBuilder().apply(init).build()\n        }\n    }\n\n    class ValidationBuilder {\n        private var constraints: MutableList&lt;Constraint&gt; = mutableListOf()\n\n        operator fun Constraint.unaryPlus() {\n            constraints.add(this)\n        }\n\n        fun build() = Validation(constraints)\n    }\n}\n</code></pre>\n\n<p>This can then be used to build a Validation like so</p>\n\n<pre><code>val validation = Validation {\n    +Constraint(\"First constraint\")\n    val secondConstraintHint = \"Second constraint\"\n    +Constraint(secondConstraintHint)\n}\n</code></pre>\n\n<p>I would like to get rid of the <code>unaryPlus</code> operator and directly collect the individual statements in the block that are evaluated to a <code>Constraint</code> so that I can do something like:</p>\n\n<pre><code>val validation = Validation {\n    Constraint(\"First constraint\")\n    val secondConstraintHint = \"Second constraint\"\n    Constraint(secondConstraintHint)\n}\n</code></pre>\n\n<p>Is that possible somehow?</p>\n\n<p>To give a little bit more context, the actual result I am aiming for will look more like this:</p>\n\n<pre><code>Validation&lt;User&gt; {\n    User::firstName {\n        val min = 2\n        minLength(min) hint \"Please provide a first name\"\n        maxLength(200) // uses default hint\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1520336653, "post_id": 49130006, "comment_id": 85264474, "body": "that is obviously because <code>applicationContext</code> is not a <code>MainActivity</code>. It is even called a <b>application</b>context"}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1520336741, "post_id": 49130006, "comment_id": 85264523, "body": "applicationContext  should be your mainActivity context."}, {"owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520336756, "post_id": 49130006, "comment_id": 85264533, "body": "So why in java is work ? ((MainActivity) context).refreshList();"}, {"owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520336791, "post_id": 49130006, "comment_id": 85264558, "body": "In my other application in java is work fine"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1520336842, "post_id": 49130006, "comment_id": 85264594, "body": "that&#39;s probably because you use it differrntly."}, {"owner": {"reputation": 945, "user_id": 6619676, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/86e20374410dd2c6e5dea9f46b617d9b?s=128&d=identicon&r=PG&f=1", "display_name": "TheKarlo95", "link": "https://stackoverflow.com/users/6619676/thekarlo95"}, "edited": false, "score": 0, "creation_date": 1520336865, "post_id": 49130006, "comment_id": 85264612, "body": "Application context and activity context are not the same."}, {"owner": {"reputation": 945, "user_id": 6619676, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/86e20374410dd2c6e5dea9f46b617d9b?s=128&d=identicon&r=PG&f=1", "display_name": "TheKarlo95", "link": "https://stackoverflow.com/users/6619676/thekarlo95"}, "edited": false, "score": 1, "creation_date": 1520336998, "post_id": 49130006, "comment_id": 85264689, "body": "Also using database inside activity seems like a bad architectural decision. Handle databse operations in different classes and follow Single Responsibility Principle."}, {"owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520337253, "post_id": 49130006, "comment_id": 85264851, "body": "These are two activities that use the same database, I do not want to rewrite the function in the second activity. I have always been told never to rewrite the same function twice in programming."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1520337694, "post_id": 49130006, "comment_id": 85265124, "body": "Then you could implement a base-class or a utility-class handling the databases for you. You should not repeat yourself, but you have to consider other principals as well."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520336962, "post_id": 49130085, "comment_id": 85264672, "body": "No, when I want to call the method I&#39;m sure the activity is already created! What is the solution then? The best way to do this?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520337050, "post_id": 49130085, "comment_id": 85264721, "body": "Not using dependency injection or similar approaches, try to implement a <a href=\"https://developer.android.com/guide/components/bound-services.html\" rel=\"nofollow noreferrer\">Bound Service</a>. The activity might have been removed by the system already, so never assume there&#39;s one which is not in foreground."}, {"owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "edited": false, "score": 0, "creation_date": 1520337102, "post_id": 49130085, "comment_id": 85264744, "body": "I do not want to use onActivityResult, because it is only used if in the second activity I do finish (). And the problem is that I do not want to finish ()"}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1520336790, "creation_date": 1520336790, "answer_id": 49130085, "question_id": 49130006, "link": "https://stackoverflow.com/questions/49130006/android-call-method-from-another-activity-kotlin-not-work/49130085#49130085", "title": "Android: Call method from another activity kotlin not work", "body": "<p>The <code>applicationContext</code> as the name states is not <code>Activity</code> at all thus the cast fails.</p>\n\n<p>Regardless of this you should reconsider what you're trying to do. Another activity might not even exist while you're in the activity doing things.</p>\n\n<p>Instead consider implementing a store you can <em>inject</em> to both of the activities and observe changes as necessary.</p>\n\n<p>Default <em>Android</em> components you could use for this are bound services or if you want to go back anyway use <code>onActivityResult()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 10317975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61e7c10e489fa25e1f363eb5d63b1697?s=128&d=identicon&r=PG&f=1", "display_name": "Infomaster", "link": "https://stackoverflow.com/users/10317975/infomaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1582530742, "last_edit_date": 1582530742, "creation_date": 1582530175, "answer_id": 60371414, "question_id": 49130006, "link": "https://stackoverflow.com/questions/49130006/android-call-method-from-another-activity-kotlin-not-work/60371414#60371414", "title": "Android: Call method from another activity kotlin not work", "body": "<p>Try it out</p>\n\n<pre><code>class DataForm : Fragment() {\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        Tasks(this).getData()\n    }\n    override fun getResponse(String response) {\n        // code\n    }\n}\n\nclass Tasks(private val context: Any) {\n    fun getData() {\n\n        val getContext = (context as DataForm).activity\n        val getFragment = (context as DataForm)\n\n        val responseListener = Response.Listener&lt;String&gt; { response -&gt;\n            getFragment.getResponse(response)\n        }\n\n        val errorListener = Response.ErrorListener { error -&gt;\n            error.printStackTrace();\n        }\n\n        val stringRequest = StringRequest(Request.Method.GET, url, responseListener, errorListener)\n        Volley.newRequestQueue(getContext).add(stringRequest)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9359254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10216044818136166/picture?type=large", "display_name": "\u05de\u05d9\u05db\u05d0\u05dc \u05d1\u05dc\u05d7\u05e1\u05df", "link": "https://stackoverflow.com/users/9359254/%d7%9e%d7%99%d7%9b%d7%90%d7%9c-%d7%91%d7%9c%d7%97%d7%a1%d7%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 2, "score": -8, "last_activity_date": 1582530742, "creation_date": 1520336529, "last_edit_date": 1520336610, "question_id": 49130006, "link": "https://stackoverflow.com/questions/49130006/android-call-method-from-another-activity-kotlin-not-work", "title": "Android: Call method from another activity kotlin not work", "body": "<p>I want to call a method from another activity.</p>\n\n<p>I'm trying to do this but it does not work:</p>\n\n<pre><code>(applicationContext as MainActivity).getAllGroupFromTheDatabaseToList()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>java.lang.ClassCastException: android.app.Application cannot be cast to com.emoonadev.futurfit.MainActivity\n</code></pre>\n\n<p>I do not want the method to be static, so no companion object</p>\n"}, {"tags": ["android", "kotlin", "expandablelistview", "android-adapter"], "comments": [{"owner": {"reputation": 1039, "user_id": 5400914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/798902f710714568d56d720b6d06e685?s=128&d=identicon&r=PG&f=1", "display_name": "yogesh lokhande", "link": "https://stackoverflow.com/users/5400914/yogesh-lokhande"}, "edited": false, "score": 0, "creation_date": 1520329868, "post_id": 49127730, "comment_id": 85260207, "body": "paste your logcat"}, {"owner": {"reputation": 1, "user_id": 9450379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e6f8a84c33afb070c532440d9fb3e7?s=128&d=identicon&r=PG&f=1", "display_name": "user9450379", "link": "https://stackoverflow.com/users/9450379/user9450379"}, "reply_to_user": {"reputation": 1039, "user_id": 5400914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/798902f710714568d56d720b6d06e685?s=128&d=identicon&r=PG&f=1", "display_name": "yogesh lokhande", "link": "https://stackoverflow.com/users/5400914/yogesh-lokhande"}, "edited": false, "score": 0, "creation_date": 1520330391, "post_id": 49127730, "comment_id": 85260554, "body": "updated. it gives different errors based on how the code is, as I mentioned. Meaning: different errors when it has nulls and different when it doesn&#39;t have. this is the logical with the current code"}, {"owner": {"reputation": 1, "user_id": 9450379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e6f8a84c33afb070c532440d9fb3e7?s=128&d=identicon&r=PG&f=1", "display_name": "user9450379", "link": "https://stackoverflow.com/users/9450379/user9450379"}, "reply_to_user": {"reputation": 1039, "user_id": 5400914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/798902f710714568d56d720b6d06e685?s=128&d=identicon&r=PG&f=1", "display_name": "yogesh lokhande", "link": "https://stackoverflow.com/users/5400914/yogesh-lokhande"}, "edited": false, "score": 0, "creation_date": 1520330778, "post_id": 49127730, "comment_id": 85260802, "body": "Any ideas @YoLo ?"}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 9193052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hCV2A.png?s=128&g=1", "display_name": "Constantin Chernishov", "link": "https://stackoverflow.com/users/9193052/constantin-chernishov"}, "is_accepted": false, "score": 0, "last_activity_date": 1520356175, "creation_date": 1520356175, "answer_id": 49136391, "question_id": 49127730, "link": "https://stackoverflow.com/questions/49127730/expandablelists-activity-doesnt-open/49136391#49136391", "title": "ExpandableList&#39;s Activity doesn&#39;t open", "body": "<p>I don't know what's wrong with ExpandableListAdapter, but I know, that it will be much better to use Epoxy instead - <a href=\"https://github.com/airbnb/epoxy\" rel=\"nofollow noreferrer\">https://github.com/airbnb/epoxy</a> </p>\n"}], "owner": {"reputation": 1, "user_id": 9450379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e6f8a84c33afb070c532440d9fb3e7?s=128&d=identicon&r=PG&f=1", "display_name": "user9450379", "link": "https://stackoverflow.com/users/9450379/user9450379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520356175, "creation_date": 1520329464, "last_edit_date": 1520344672, "question_id": 49127730, "link": "https://stackoverflow.com/questions/49127730/expandablelists-activity-doesnt-open", "title": "ExpandableList&#39;s Activity doesn&#39;t open", "body": "<p>So, after following countless tutorials I implemented an ExpandableList the 'proper' way: Adapter and then call it on the main activity.</p>\n\n<p>I keep getting <code>null</code> and <code>non-null</code> problems. And when I try to add them or remove them, there are problems saying I need/don;t need nulls.</p>\n\n<p>Many safe calls and <code>!!</code> are there because Android Studio 'cried' about it.</p>\n\n<p><strong>This is my Adapter</strong></p>\n\n<pre><code>class ExpandableListAdapter(\n        val context: Context,\n        val listDataHeader: List&lt;String&gt;,\n        val listHashMap: HashMap&lt;String, List&lt;String&gt;&gt;\n) : BaseExpandableListAdapter() {\n\n\noverride fun getChild(groupPosition: Int, childPosition: Int): Any {\n    return listHashMap.get(listDataHeader.get(groupPosition))!!.get(childPosition); // i = Group Item , i1 = ChildIte\n}\n\noverride fun getChildId(groupPosition: Int, childPosition: Int): Long {\n    return childPosition.toLong()\n}\n\noverride fun getChildView(groupPosition: Int, childPosition: Int, isLastChild: Boolean, view: View, parent: ViewGroup?): View {\n    val childText = getChild(groupPosition, childPosition) as String\n    if (view == null) {\n        val inflater = this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        inflater.inflate(R.layout.list_item, null)\n    }\n\n    val txtListChild = view.findViewById(R.id.lblListItem) as TextView\n    txtListChild.text = childText\n    return view    }\n\n\noverride fun getChildrenCount(groupPosition: Int): Int {\n    return listHashMap[listDataHeader[groupPosition]]!!.size\n}\n\noverride fun getGroup(groupPosition: Int): Any {\n    return listDataHeader[groupPosition]\n}\n\noverride fun getGroupCount(): Int {\n    return listDataHeader.size\n}\n\noverride fun getGroupId(groupPosition: Int): Long {\n    return groupPosition.toLong()\n}\n\noverride fun getGroupView(groupPosition: Int, isExpanded: Boolean, view: View?, parent: ViewGroup?): View? {\n    var headerTitle = getGroup(groupPosition!!) as String\n    if (view == null) {\n        var inflater = this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        inflater.inflate(R.layout.list_group, null)\n    }\n    val lblListHeader = view?.findViewById(R.id.lblListHeader) as TextView?\n    lblListHeader?.setTypeface(null, Typeface.BOLD)\n    lblListHeader?.text = headerTitle\n    return view\n}\n\noverride fun hasStableIds(): Boolean {\n    return false\n}\n\noverride fun isChildSelectable(groupPosition: Int, childPosition: Int): Boolean {\n    return true\n}\n}\n</code></pre>\n\n<p><strong>And this is my mainactivity</strong></p>\n\n<pre><code>class GirlsActivity : AppCompatActivity() {\n\nprivate var db = FirebaseFirestore.getInstance()\n\nlateinit var listView: ExpandableListView\nlateinit var listAdapter: ExpandableListAdapter\nlateinit var listDataHeader: MutableList&lt;String&gt;\nlateinit var listHash: HashMap&lt;String, List&lt;String&gt;&gt;\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_girls)\n\n    listView = girlsWodsList\n    initData()\n    listAdapter = ExpandableListAdapter(this, listDataHeader, listHash)\n    listView?.setAdapter(listAdapter)\n\n}\nprivate fun initData() {\n    listDataHeader = ArrayList()\n    listHash = HashMap()\n\n    listDataHeader?.add(\"EDMTDev\")\n    listDataHeader?.add(\"Android\")\n    listDataHeader?.add(\"Xamarin\")\n    listDataHeader?.add(\"UWP\")\n\n    val edmtDev = ArrayList&lt;String&gt;()\n    edmtDev.add(\"This is Expandable ListView\")\n\n    val androidStudio = ArrayList&lt;String&gt;()\n    androidStudio.add(\"Expandable ListView\")\n    androidStudio.add(\"Google Map\")\n    androidStudio.add(\"Chat Application\")\n    androidStudio.add(\"Firebase \")\n\n    val xamarin = ArrayList&lt;String&gt;()\n    xamarin.add(\"Xamarin Expandable ListView\")\n    xamarin.add(\"Xamarin Google Map\")\n    xamarin.add(\"Xamarin Chat Application\")\n    xamarin.add(\"Xamarin Firebase \")\n\n    val uwp = ArrayList&lt;String&gt;()\n    uwp.add(\"UWP Expandable ListView\")\n    uwp.add(\"UWP Google Map\")\n    uwp.add(\"UWP Chat Application\")\n    uwp.add(\"UWP Firebase \")\n\n    listHash!![listDataHeader!!.get(0)] = edmtDev\n    listHash!![listDataHeader!!.get(1)] = androidStudio\n    listHash!![listDataHeader!!.get(2)] = xamarin\n    listHash!![listDataHeader!!.get(3)] = uwp\n}\n}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n\n<hr>\n\n<p>Logcat</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main Process: com.reecreate.woderator2, PID: 9201 java.lang.NullPointerException: Attempt to invoke virtual method 'int android.view.View.getImportantForAccessibility()' on a null object reference                                                                          \n   at android.widget.AbsListView.obtainView(AbsListView.java:2380)                                                                          \n   at android.widget.ListView.measureHeightOfChildren(ListView.java:1326)                                                                          \n   at android.widget.ListView.onMeasure(ListView.java:1233)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.support.constraint.ConstraintLayout.internalMeasureChildren(ConstraintLayout.java:1054)                                                                          \n   at android.support.constraint.ConstraintLayout.onMeasure(ConstraintLayout.java:1111)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)                                                                          \n   at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)                                                                          \n   at android.support.v7.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:139)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)                                                                          \n   at android.support.v7.widget.ActionBarOverlayLayout.onMeasure(ActionBarOverlayLayout.java:400)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)                                                                          \n   at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)                                                                          \n   at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1464)                                                                          \n   at android.widget.LinearLayout.measureVertical(LinearLayout.java:758)                                                                          \n   at android.widget.LinearLayout.onMeasure(LinearLayout.java:640)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)                                                                          \n   at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)                                                                          \n   at com.android.internal.policy.DecorView.onMeasure(DecorView.java:689)                                                                          \n   at android.view.View.measure(View.java:19857)                                                                          \n   at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:2275)                                                                          \n   at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1366)                                                                          \n   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1619)                                                                          \n   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1254)                                                                          \n   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6337)                                                                          \n   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:874)                                                                          \n   at android.view.Choreographer.doCallbacks(Choreographer.java:686)                                                                          \n   at android.view.Choreographer.doFrame(Choreographer.java:621)                                                                          \n   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:860)                                                                          \n   at android.os.Handler.handleCallback(Handler.java:751)                                                                          \n   at android.os.Handler.dispatchMessage(Handler.java:95)                                                                          \n   at android.os.Looper.loop(Looper.java:154)                                                                          \n   at android.app.ActivityThread.main(ActivityThread.java:6119)                                                                          \n   at java.lang.reflect.Method.invoke(Native Method)                                                                          \n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)                                                                          \n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n</code></pre>\n"}, {"tags": ["android", "mvvm", "kotlin"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 1, "creation_date": 1520329418, "post_id": 49127661, "comment_id": 85259931, "body": "yes you can. The two things are unrelated."}], "answers": [{"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": true, "score": 3, "last_activity_date": 1520349019, "creation_date": 1520349019, "answer_id": 49134052, "question_id": 49127661, "link": "https://stackoverflow.com/questions/49127661/android-kotlin-mvvm-structure-without-dagger2/49134052#49134052", "title": "Android Kotlin MVVM Structure without Dagger2", "body": "<p>Dagger is a dependency injection framework. While being useful for implementing different architecture approaches it is rarely a required component. If you want to get familiar with Dagger 2 basics I'd recommend you this <a href=\"https://android.jlelse.eu/dagger-2-part-i-basic-principles-graph-dependencies-scopes-3dfd032ccd82\" rel=\"nofollow noreferrer\">article</a>.</p>\n\n<p>A good example of MVVM on Android is <a href=\"https://developer.android.com/topic/libraries/architecture/index.html\" rel=\"nofollow noreferrer\">architecture components</a> library.</p>\n\n<p>Here is a <a href=\"https://github.com/googlesamples/android-architecture-components\" rel=\"nofollow noreferrer\">repository</a> with a number of sample apps, going from <a href=\"https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample\" rel=\"nofollow noreferrer\">Basic Sample</a>, that is not using Dagger to more complex examples with Dagger and other useful technologies. </p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5478865, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9896776bc6744175b0af77b2977b526b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Tang", "link": "https://stackoverflow.com/users/5478865/sam-tang"}, "edited": false, "score": 1, "creation_date": 1520419261, "post_id": 49136264, "comment_id": 85303939, "body": "yes, but so many MVVM examples just import the dagger2 library and that made me feel confused  , any MVVM example without Dagger2??"}], "tags": [], "owner": {"reputation": 231, "user_id": 9193052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hCV2A.png?s=128&g=1", "display_name": "Constantin Chernishov", "link": "https://stackoverflow.com/users/9193052/constantin-chernishov"}, "is_accepted": false, "score": 1, "last_activity_date": 1520355738, "creation_date": 1520355738, "answer_id": 49136264, "question_id": 49127661, "link": "https://stackoverflow.com/questions/49127661/android-kotlin-mvvm-structure-without-dagger2/49136264#49136264", "title": "Android Kotlin MVVM Structure without Dagger2", "body": "<p>MVVM - it's architectural pattern, it doesn't need Dagger exactly</p>\n"}], "owner": {"reputation": 23, "user_id": 5478865, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9896776bc6744175b0af77b2977b526b?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Tang", "link": "https://stackoverflow.com/users/5478865/sam-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 1, "accepted_answer_id": 49134052, "answer_count": 2, "score": 1, "last_activity_date": 1571727267, "creation_date": 1520329276, "question_id": 49127661, "link": "https://stackoverflow.com/questions/49127661/android-kotlin-mvvm-structure-without-dagger2", "title": "Android Kotlin MVVM Structure without Dagger2", "body": "<p>Can I implement the app with MVVM but it without using Dagger2?</p>\n\n<p>it seems so many mvvm examples included the dagger2 library and it makes me feel confused.</p>\n"}, {"tags": ["android", "testing", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 8085421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MIh0Tqnk__c/AAAAAAAAAAI/AAAAAAAAA8o/vA2zJ5V0HcM/photo.jpg?sz=128", "display_name": "Usama K. Zafar", "link": "https://stackoverflow.com/users/8085421/usama-k-zafar"}, "edited": false, "score": 1, "creation_date": 1520325894, "post_id": 49126371, "comment_id": 85257806, "body": "Thanks, I have added the UT code snippet now as well. Could you share an example of how I can mock this interface?"}], "tags": [], "owner": {"reputation": 1180, "user_id": 5659492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vh8D5.png?s=128&g=1", "display_name": "muminers", "link": "https://stackoverflow.com/users/5659492/muminers"}, "is_accepted": true, "score": 3, "last_activity_date": 1520326684, "last_edit_date": 1520326684, "creation_date": 1520325014, "answer_id": 49126371, "question_id": 49126220, "link": "https://stackoverflow.com/questions/49126220/how-to-mock-kotlin-object-in-android/49126371#49126371", "title": "How to mock Kotlin Object in android?", "body": "<p>Well in my opinion you should made SessionController implementing an interface.</p>\n\n<pre><code>object SessionController: ISessionController {\n    override fun signIn(username: String, password: String, signInCallBack: SignInCallBack) {\n       (...)        \n    }\n}\n\ninterface ISessionController {\n    fun fun signIn(username: String, password: String, signInCallBack: SignInCallBack)\n}\n</code></pre>\n\n<p>This will give you a lot of possibilities to solve your problem like:</p>\n\n<ul>\n<li>Dependency Injection</li>\n<li>Test product flavour</li>\n<li>Simple mockk() cration in your test code</li>\n</ul>\n\n<p>It is a bit hard to give you very strict answer because you didn't post any UT code ;)</p>\n\n<hr>\n\n<p>EDIT</p>\n\n<p>It is hard to cover such a big topic as mocking in one post ;)\nHere are some great articles:</p>\n\n<ul>\n<li>Dependency Injection: <a href=\"https://medium.com/@elye.project/fast-mocked-ui-tests-on-android-kotlin-89ed0a8a351a\" rel=\"nofollow noreferrer\">https://medium.com/@elye.project/fast-mocked-ui-tests-on-android-kotlin-89ed0a8a351a</a></li>\n<li>Using different flavour for tests: <a href=\"https://android-developers.googleblog.com/2015/12/leveraging-product-flavors-in-android.html\" rel=\"nofollow noreferrer\">https://android-developers.googleblog.com/2015/12/leveraging-product-flavors-in-android.html</a></li>\n</ul>\n\n<p>Creating Unit Tests you can always do simple:</p>\n\n<pre><code>presenter.sth = mockk&lt;ISessionController&gt;()\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 8085421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MIh0Tqnk__c/AAAAAAAAAAI/AAAAAAAAA8o/vA2zJ5V0HcM/photo.jpg?sz=128", "display_name": "Usama K. Zafar", "link": "https://stackoverflow.com/users/8085421/usama-k-zafar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 49126371, "answer_count": 1, "score": 3, "last_activity_date": 1520326684, "creation_date": 1520324424, "last_edit_date": 1520325813, "question_id": 49126220, "link": "https://stackoverflow.com/questions/49126220/how-to-mock-kotlin-object-in-android", "title": "How to mock Kotlin Object in android?", "body": "<p>I have an object in kotlin that controls the current user's session information. I want to mock the sign in method which has a call back. </p>\n\n<p>While testing, I need to mock this method in the SessionController object.</p>\n\n<pre><code>object SessionController {\n\n...\n\n    fun signIn(username: String, password: String, signInCallBack: SignInCallBack) {\n        sessionApi.attemptSignIn(username,password,object: SignInCallBack{\n            override fun onSignInComplete() {\n                signInCallBack.onSignInComplete()\n            }\n\n            override fun onErrorOccurred(errorCode: Int, errorMessage: String) {\n                signInCallBack.onErrorOccurred(errorCode)\n            }\n\n        })\n    }\n    ....\n}\n</code></pre>\n\n<p>The AndroidTest goes something like this:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass LoginActivityTest {\n  @Test\n    fun loginErrorShowing() {\n        test.tapUsernameField()\n        test.inputTextinUsernameField(\"wrongusername\")\n        test.pressUsernameFieldIMEAction()\n        test.inputTextinPasswordField(\"randomPassword\")\n        test.pressPasswordFieldIMEAction()\n\n        Espresso.onView(ViewMatchers.withId(R.id.errorText)).check(ViewAssertions.matches(withText(\"Wrong Password\")))\n    }\n}\n</code></pre>\n\n<p>Any suggestions/ideas as to how I can achieve this? I've read online to use Mockk for kotlin but have't been able to mock this method and invoke the appropriate callback. Any suggestions on improving the structure would also be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "kotlin", "concatenation", "android-drawable"], "comments": [{"owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "edited": false, "score": 0, "creation_date": 1520325839, "post_id": 49125911, "comment_id": 85257782, "body": "where are you using <code>drawable</code>?"}, {"owner": {"reputation": 3, "user_id": 9409055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca3ad6d2310c65e7d0aa0e33e06c298?s=128&d=identicon&r=PG&f=1", "display_name": "lomolomo", "link": "https://stackoverflow.com/users/9409055/lomolomo"}, "reply_to_user": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "edited": false, "score": 0, "creation_date": 1520330688, "post_id": 49125911, "comment_id": 85260747, "body": "in  receive.contains(&quot;ow&quot;) -&gt; return &quot;omg&quot; + R.drawable.face_1"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520331706, "post_id": 49125911, "comment_id": 85261392, "body": "I&#39;m sorry but to me your example is quite not clear.. Could you please provide some real code?"}], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 6619676, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/86e20374410dd2c6e5dea9f46b617d9b?s=128&d=identicon&r=PG&f=1", "display_name": "TheKarlo95", "link": "https://stackoverflow.com/users/6619676/thekarlo95"}, "is_accepted": false, "score": 0, "last_activity_date": 1520336610, "creation_date": 1520336610, "answer_id": 49130027, "question_id": 49125911, "link": "https://stackoverflow.com/questions/49125911/how-to-concat-an-image-from-drawables/49130027#49130027", "title": "how to concat an image from drawables?", "body": "<p>You can't concat Drawable and String. You could use <code>TextView</code> and <code>ImageView</code> which you could add to some <code>ViewGroup</code> like <code>LinearLayout</code>.</p>\n\n<p>My guess is you are trying to use emojis and if you want to show emojis you should use String with emojis in <a href=\"https://developer.android.com/reference/android/support/text/emoji/widget/EmojiTextView.html\" rel=\"nofollow noreferrer\">EmojiTextView</a>. If you want some emoji you should use unicode code for that emoji, for example <code>\"omg \\u1F60E\"</code></p>\n\n<p>P.S. <code>R.drawable.face_1</code> and similar aren't Drawable but drawable ids and are actually of type Int.</p>\n"}], "owner": {"reputation": 3, "user_id": 9409055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca3ad6d2310c65e7d0aa0e33e06c298?s=128&d=identicon&r=PG&f=1", "display_name": "lomolomo", "link": "https://stackoverflow.com/users/9409055/lomolomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520336610, "creation_date": 1520323032, "last_edit_date": 1520324230, "question_id": 49125911, "link": "https://stackoverflow.com/questions/49125911/how-to-concat-an-image-from-drawables", "title": "how to concat an image from drawables?", "body": "<p>How do I <code>concat image</code> from <code>drawables</code>?<br>\nI tried, but the output is the <code>id</code> of the face.<br>\nIs there any other way to do it?</p>\n\n<pre><code>fun talk(username: String?, message: String): String {\n    val receive = message.toLowerCase()\n    when {\n        receive.contains(\"hello\") -&gt; {\n            var user = \"\"\n            if (username != null) {\n                user = \" \" + username\n            }\n            return \"Hello$user!\"\n        }\n        receive.contains(\"hey\") -&gt; return \"Hey $username!\"\n        receive.contains(\"ow\") -&gt; return \"omg\"\n        receive.startsWith(\"do \") -&gt; return \"Yes, I do.\"\n        receive.contains(\"time\") -&gt; return \"It's \" + TimeUtils.calendarToString(Calendar.getInstance(), null) + \".\"\n        receive.contains(\"today\") -&gt; return \"It's \" + TimeUtils.calendarToString(Calendar.getInstance(), \"M/d(E)\")\n        else -&gt; {\n            var reply = \"Lorem ipsum dolor sit amet\"\n            if (receive.length &gt; 7) {\n                reply += \", consectetur adipiscing elit, \" + \"sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \"\n            }\n            return reply\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "service", "kotlin", "android-wake-lock"], "comments": [{"owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520322082, "post_id": 49125473, "comment_id": 85255993, "body": "i think you should do call either startservice() or bindservice() not both."}, {"owner": {"reputation": 838, "user_id": 1481694, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0c70933f4e421298b8731bf69ea1a7?s=128&d=identicon&r=PG", "display_name": "momoja", "link": "https://stackoverflow.com/users/1481694/momoja"}, "reply_to_user": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520322146, "post_id": 49125473, "comment_id": 85256030, "body": "@L7ColWinters Im currently using a <code>ServiceConnection</code> along with another <code>Service</code> to publish my Pubnub messages."}, {"owner": {"reputation": 838, "user_id": 1481694, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0c70933f4e421298b8731bf69ea1a7?s=128&d=identicon&r=PG", "display_name": "momoja", "link": "https://stackoverflow.com/users/1481694/momoja"}, "reply_to_user": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520322185, "post_id": 49125473, "comment_id": 85256059, "body": "@JaydipKalkani let me check that. thank you"}, {"owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520326907, "post_id": 49125473, "comment_id": 85258374, "body": "let me know it&#39;s working or not?"}, {"owner": {"reputation": 838, "user_id": 1481694, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0c70933f4e421298b8731bf69ea1a7?s=128&d=identicon&r=PG", "display_name": "momoja", "link": "https://stackoverflow.com/users/1481694/momoja"}, "reply_to_user": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520327079, "post_id": 49125473, "comment_id": 85258459, "body": "The behavior is still the same"}, {"owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520327638, "post_id": 49125473, "comment_id": 85258796, "body": "on which mobile are you testing your app? on emulator or on real device? and which api it contains? and if real device then of which company?"}, {"owner": {"reputation": 838, "user_id": 1481694, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0c70933f4e421298b8731bf69ea1a7?s=128&d=identicon&r=PG", "display_name": "momoja", "link": "https://stackoverflow.com/users/1481694/momoja"}, "reply_to_user": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "edited": false, "score": 0, "creation_date": 1520327796, "post_id": 49125473, "comment_id": 85258883, "body": "Im using my personal nexus 5 on Android M."}], "owner": {"reputation": 838, "user_id": 1481694, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0c70933f4e421298b8731bf69ea1a7?s=128&d=identicon&r=PG", "display_name": "momoja", "link": "https://stackoverflow.com/users/1481694/momoja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520421282, "creation_date": 1520321270, "last_edit_date": 1520421282, "question_id": 49125473, "link": "https://stackoverflow.com/questions/49125473/service-not-binding-when-starting-activity-when-phone-is-locked", "title": "Service not binding when starting Activity when Phone is Locked", "body": "<p>I receive a push notification and I call an activity in onMessageReceived.</p>\n\n<pre><code>val i = Intent()\ni.setClass(this, PreCallActivity::class.java!!)\ni.flags = Intent.FLAG_ACTIVITY_NEW_TASK\nval callRequest = CallParser.convertRemoteMessageToCallReq(remoteMessage)\ni.putExtra(PreCallActivity.EXTRA_CALL_TYPE, \"incoming\")\ni.putExtra(PetZamPubnubService.EXTRA_CALL_REQUEST, callRequest)\nstartActivity(i)\n</code></pre>\n\n<p>in the onCreate I set some flags and acquire a wakelock</p>\n\n<pre><code>this.window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN or\n        WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD or\n        WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED or\n            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,\n            WindowManager.LayoutParams.FLAG_FULLSCREEN or\n            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD or\n            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED or\n            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON)\nsetContentView(R.layout.activity_pre_call)\n\nval pm = getSystemService(Context.POWER_SERVICE) as PowerManager\nwl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, TAG_WAKE_LOCK)\nwl?.acquire()\n</code></pre>\n\n<p>And I bind and start a service</p>\n\n<pre><code>val intent = Intent(this@PreCallActivity, MyPubnubService::class.java)\nstartService(intent)\nbindService(intent, pubnubServiceConn, Context.BIND_AUTO_CREATE)\n</code></pre>\n\n<p>The problem I am encountering is that when the app is coming from being Killed with the Phone LOCKED or Display is OFF, I am unable to access my service and gives me.</p>\n\n<pre><code>kotlin.KotlinNullPointerException\nat com.myapp.myapp.push.PubnubServiceConn.publishMessage(PubnubServiceConn.kt:147)\nat com.myapp.myapp.push.PubnubServiceConn.publishCallRejected(PubnubServiceConn.kt:80)\nat com.myapp.myapp.videocall.PreCallActivity$enableInComingControls$2.onClick(PreCallActivity.kt:216)\nat android.view.View.performClick(View.java:5204)\nat android.view.View$PerformClick.run(View.java:21153)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:148)\nat android.app.ActivityThread.main(ActivityThread.java:5417)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n</code></pre>\n\n<p>My question is that is there a specific handling I should do to ensure that my services is started correctly coming from a LOCKED/OFF Phone and App is Killed?</p>\n\n<p>I already tested the following scenarios and the app is working fine</p>\n\n<ol>\n<li>App in Foreground</li>\n<li>App in Background</li>\n<li>App in Background AND Screen is Locked/OFF</li>\n<li>App is KILLED AND Screen is turned ON</li>\n</ol>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1520316626, "post_id": 49124372, "comment_id": 85253728, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46051572/redundant-sam-constructor-cant-be-remove-for-kotlin-declared-function-but-work\">Redundant SAM-constructor can&#39;t be remove for Kotlin declared function, but works on Java declared function</a> and <a href=\"https://stackoverflow.com/questions/44324821/why-do-lambda-expressions-behave-differently-for-kotlin-and-java-classes\">Why do Lambda expressions behave differently for Kotlin and Java classes?</a>"}, {"owner": {"reputation": 4283, "user_id": 5462608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7eb8700e5129804fc324f2cc4dc4ccff?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Lee", "link": "https://stackoverflow.com/users/5462608/nick-lee"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1520316917, "post_id": 49124372, "comment_id": 85253815, "body": "Thanks guys, if only I search for the proper phrases."}], "owner": {"reputation": 4283, "user_id": 5462608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7eb8700e5129804fc324f2cc4dc4ccff?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Lee", "link": "https://stackoverflow.com/users/5462608/nick-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1520316862, "answer_count": 0, "score": 0, "last_activity_date": 1520316254, "creation_date": 1520316254, "question_id": 49124372, "link": "https://stackoverflow.com/questions/49124372/failure-to-pass-lambda-expression-in-place-of-a-single-method-interface-why", "closed_reason": "Duplicate", "title": "Failure to pass lambda expression in place of a single-method interface. Why?", "body": "<p>From my understanding, if a Kotlin method requires one argument and that argument is an interface with a single method, I can pass in a lambda expression instead (as illustrated by numerous online tutorials using <code>setOnClickListener</code> and stuff like that). However, compiling the following code:</p>\n\n<pre><code>interface I {\n    fun ha()\n}\n\nclass C() {\n    fun set(i: I) { i.ha() }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val c = C()\n    c.set { println(\"Hi\") }\n}\n</code></pre>\n\n<p>results in: <code>error: type mismatch: inferred type is () -&gt; Unit but I was expected</code>.</p>\n\n<p>Did I missing something?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-gradle-plugin", "android-library"], "answers": [{"comments": [{"owner": {"reputation": 1546, "user_id": 1103263, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DNxAR.png?s=128&g=1", "display_name": "The Tokenizer", "link": "https://stackoverflow.com/users/1103263/the-tokenizer"}, "edited": false, "score": 2, "creation_date": 1520880647, "post_id": 49125071, "comment_id": 85488616, "body": "I&#39;m having the same issue except.. my project is not missing any dependencies.. I wish this error was more descriptive."}, {"owner": {"reputation": 13925, "user_id": 178433, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f0a7931509fe208105cdeec791c7ed04?s=128&d=identicon&r=PG", "display_name": "gMale", "link": "https://stackoverflow.com/users/178433/gmale"}, "edited": false, "score": 1, "creation_date": 1543989355, "post_id": 49125071, "comment_id": 94111911, "body": "That was a nasty and annoying thing to debug. Android Studio should make this less painful."}, {"owner": {"reputation": 2542, "user_id": 857681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f216a3266f78ea7b1500dbe0f065740?s=128&d=identicon&r=PG", "display_name": "speedynomads", "link": "https://stackoverflow.com/users/857681/speedynomads"}, "edited": false, "score": 1, "creation_date": 1552473194, "post_id": 49125071, "comment_id": 97019643, "body": "Wow. This really helped. Excellent find!"}, {"owner": {"reputation": 379, "user_id": 145456, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/140f935e68a7f3b0c2315fad645ea93e?s=128&d=identicon&r=PG", "display_name": "Keith Loughnane", "link": "https://stackoverflow.com/users/145456/keith-loughnane"}, "edited": false, "score": 2, "creation_date": 1566983544, "post_id": 49125071, "comment_id": 101822521, "body": "a year and a half later and they haven&#39;t fixed this. google please throw a real error. it&#39;s not cool when the IDE tells you everything is cool."}], "tags": [], "owner": {"reputation": 1897, "user_id": 4059656, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8d37f53592325c2ef32ef0ebf1991d40?s=128&d=identicon&r=PG&f=1", "display_name": "Lemao1981", "link": "https://stackoverflow.com/users/4059656/lemao1981"}, "is_accepted": true, "score": 93, "last_activity_date": 1520320283, "last_edit_date": 1520320283, "creation_date": 1520319663, "answer_id": 49125071, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul/49125071#49125071", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>Found the problem, my android library module was missing the kotlin configuration:</p>\n\n<pre><code>apply plugin: 'kotlin-android'\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlinVersion:&lt;version&gt;\"\n}\n</code></pre>\n\n<p>Although I used kotlin .kt files in it, it could build without and also</p>\n\n<p><code>Tools -&gt; Kotlin -&gt; 'Configure Kotlin in projects'</code> </p>\n\n<p>had told me <strong>'All modules with Kotlin files are configured'</strong></p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 9884220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_JKLnd9NISU/AAAAAAAAAAI/AAAAAAAAACQ/SQo17SfnwPM/photo.jpg?sz=128", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/9884220/ankit-kumar"}, "is_accepted": false, "score": 19, "last_activity_date": 1527928303, "last_edit_date": 1527928303, "creation_date": 1527921001, "answer_id": 50654169, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul/50654169#50654169", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>Your module's <code>build.gradle</code> file should have:</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\ndependencies {\n    ...\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 775, "user_id": 2052937, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sZA9q.jpg?s=128&g=1", "display_name": "Douglas Mesquita", "link": "https://stackoverflow.com/users/2052937/douglas-mesquita"}, "is_accepted": false, "score": 14, "last_activity_date": 1541867482, "last_edit_date": 1541867482, "creation_date": 1529612707, "answer_id": 50976923, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul/50976923#50976923", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>In my case It was <code>apply plugin: 'kotlin-android'</code>,</p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n</code></pre>\n\n<p>and also added it on build.gradle </p>\n\n<pre><code>androidExtensions {\n  experimental = true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "edited": false, "score": 2, "creation_date": 1560979778, "post_id": 53026494, "comment_id": 99919397, "body": "This one is useful if it is a general purpose library!"}, {"owner": {"reputation": 399, "user_id": 8099185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0495b6cc115ab42d78bab3e8f7b2bdc1?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe l", "link": "https://stackoverflow.com/users/8099185/felipe-l"}, "edited": false, "score": 0, "creation_date": 1574038044, "post_id": 53026494, "comment_id": 104075980, "body": "This one fixed the problem for me. In my case, I had a Kotlin module without Android dependencies for a general-purpose library. Thank you very much."}], "tags": [], "owner": {"reputation": 342, "user_id": 7338759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJu9K.png?s=128&g=1", "display_name": "Ememobong AkpanEkpo", "link": "https://stackoverflow.com/users/7338759/ememobong-akpanekpo"}, "is_accepted": false, "score": 6, "last_activity_date": 1540676199, "creation_date": 1540676199, "answer_id": 53026494, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul/53026494#53026494", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>If it is a <code>kotlin</code> module make sure to add in its <code>build.gradle</code> file</p>\n\n<p><code>apply plugin: 'kotlin'</code></p>\n"}, {"tags": [], "owner": {"reputation": 482, "user_id": 4511205, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tKCE9hKxoxY/AAAAAAAAAAI/AAAAAAAAEOY/DMnAn0XN9Vg/photo.jpg?sz=128", "display_name": "Siddharth Jaswal", "link": "https://stackoverflow.com/users/4511205/siddharth-jaswal"}, "is_accepted": false, "score": 0, "last_activity_date": 1604900518, "creation_date": 1604900518, "answer_id": 64746376, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul/64746376#64746376", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>I was using CoroutineWorkers and in my case I had to add <strong>work-runtime-ktx</strong> dependency to use it</p>\n<pre><code>implementation &quot;androidx.work:work-runtime-ktx:2.4.0&quot; \n</code></pre>\n"}], "owner": {"reputation": 1897, "user_id": 4059656, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8d37f53592325c2ef32ef0ebf1991d40?s=128&d=identicon&r=PG&f=1", "display_name": "Lemao1981", "link": "https://stackoverflow.com/users/4059656/lemao1981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16041, "favorite_count": 4, "accepted_answer_id": 49125071, "answer_count": 5, "score": 29, "last_activity_date": 1604900518, "creation_date": 1520316193, "last_edit_date": 1520319804, "question_id": 49124353, "link": "https://stackoverflow.com/questions/49124353/unresolved-reference-errors-for-android-library-module-referenced-in-app-modul", "title": "&#39;Unresolved reference&#39; errors for android library module referenced in app module", "body": "<p>I have problems referencing my android library modules in my projects. Beside the main app module I use to have an android library module with either util stuff or as data module. I reference it in app module like that:</p>\n\n<pre><code>dependencies {\n    implementation project(\":data\")\n}\n</code></pre>\n\n<p>When I build the project, it\u00b4s giving me lot of error messages <code>'Unresolved reference: ...'</code> for all stuff that I reference in the app module to the android library module. But the IDE itself doesn\u00b4t have a problem, Intelligent finds all classes, interfaces etc., imports are fine, nothing is red. The android library module itself builds and creates <code>aar-file</code> in the output. It\u00b4s the <code>compileDebugKotlin</code> task that fails</p>\n\n<p>Any general idea what may be related to that?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-architecture-components", "android-livedata"], "comments": [{"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1520302979, "post_id": 49122299, "comment_id": 85250365, "body": "in my experience, is not a good idea. Instead, is better to use Rx Methos that live data. Live data is easie but Rx is a lot better, have more flexibility and its better to use something that is cross plataform like Rx."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1520303799, "post_id": 49122299, "comment_id": 85250529, "body": "i don&#39;t understand. I am converting RxJava to LiveData so I won&#39;t need to subscribe or unsubscribe on life cycle events which make using RxJava in Android much more easier."}, {"owner": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1520309087, "post_id": 49122299, "comment_id": 85251684, "body": "check this question <a href=\"https://stackoverflow.com/questions/46312937/when-to-use-rxjava-in-android-and-when-to-use-livedata-from-android-architectura\" title=\"when to use rxjava in android and when to use livedata from android architectura\">stackoverflow.com/questions/46312937/&hellip;</a>. That is why is better to get used to use Rx instead of LiveData"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 388, "user_id": 5420543, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174542545893023/picture?type=large", "display_name": "Jhon Fredy Trujillo Ortega", "link": "https://stackoverflow.com/users/5420543/jhon-fredy-trujillo-ortega"}, "edited": false, "score": 0, "creation_date": 1520316613, "post_id": 49122299, "comment_id": 85253724, "body": "I actually am used using to Rx and the only time i convert the Rx Observable to LiveData is when I need them to get unregistered/reregistered on LifeCycle events. By doing this I do not need to add the mechanism to unscubscribe and resubscribe on my observable when a life cycle occurs."}], "answers": [{"comments": [{"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1520385426, "post_id": 49136191, "comment_id": 85290800, "body": "How would you handle LifeCycle Events then?"}, {"owner": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1520625598, "post_id": 49136191, "comment_id": 85407624, "body": "I think @ArchieQui&#241;ones in right. Also, how do you handle data binding?"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "edited": false, "score": 0, "creation_date": 1520903009, "post_id": 49136191, "comment_id": 85497149, "body": "Hi @Reza then is it safe to assume that this is a good idea? Everybody coz everybody here seems to disagree."}, {"owner": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 3, "creation_date": 1521105665, "post_id": 49136191, "comment_id": 85593153, "body": "@ArchieQui&#241;ones I really dislike the idea of using two reactive technologies (Rx and LiveData) alongside especially when Rx is so powerful but since Rx observables aren&#39;t lifecycle aware and android data binding doesn&#39;t work with Rx, I personally use Rx up to ViewModel layer and then convert it to LiveData but I hope we find a better solution to use Rx in all places and remove LiveData."}, {"owner": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 2, "creation_date": 1521105893, "post_id": 49136191, "comment_id": 85593312, "body": "@ArchieQui&#241;ones Your extension functions are good but since you&#39;re using <code>LiveDataReactiveStreams</code> you can&#39;t do error handling! So if some exception happens it goes right into main thread and app will crash. In case you want to use this code with networking you&#39;re in a serious trouble. I suggest you use this exception function but with a custom implementation for converting Rx to LiveData."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "edited": false, "score": 1, "creation_date": 1521179335, "post_id": 49136191, "comment_id": 85629339, "body": "Hi @Reza. I totally agree with you. It kinda sucks to need to use two reactive technologies just to solve the lifecycle problems in android. I also do the same way you do it. Keeping Rx at ViewModel layer and only converting to LiveData when the value needs to be observed on the View. I also agree on the error handling part and again I do the same approach as you do. I just really need someone to confirm I&#39;m doing it right. This really helps in as far as I&#39;m going the right way. Thank you very much. :)"}, {"owner": {"reputation": 804, "user_id": 1033609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e9ddf6ff67ede47f8aed913babe7c1a?s=128&d=identicon&r=PG", "display_name": "interlude", "link": "https://stackoverflow.com/users/1033609/interlude"}, "reply_to_user": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "edited": false, "score": 0, "creation_date": 1595152861, "post_id": 49136191, "comment_id": 111370318, "body": "@AlirezaA.Ahmadi I know this is an old thread but if you use <code>onErrorReturnItem</code> and merge the error into your observable thing you can use error handling."}], "tags": [], "owner": {"reputation": 231, "user_id": 9193052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hCV2A.png?s=128&g=1", "display_name": "Constantin Chernishov", "link": "https://stackoverflow.com/users/9193052/constantin-chernishov"}, "is_accepted": false, "score": 0, "last_activity_date": 1520355485, "creation_date": 1520355485, "answer_id": 49136191, "question_id": 49122299, "link": "https://stackoverflow.com/questions/49122299/convert-rxjava-observables-to-live-data-with-kotlin-extension-functions/49136191#49136191", "title": "Convert RxJava Observables To Live Data With Kotlin Extension Functions", "body": "<p>Theese functions can be a little shorter, but that's not a good idea at all. Rx gives much more possibilities, than LiveData listeners</p>\n"}, {"comments": [{"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524099386, "post_id": 49899987, "comment_id": 86838076, "body": "doesn&#39;t LiveData auto-dispose Observables by default?"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 1, "creation_date": 1524099552, "post_id": 49899987, "comment_id": 86838111, "body": "ohh.. wait I see what you did there... then does that mean i dont have to convert my RxJava to LiveData?"}, {"owner": {"reputation": 493, "user_id": 4675996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aaJgO.jpg?s=128&g=1", "display_name": "harry248", "link": "https://stackoverflow.com/users/4675996/harry248"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524119821, "post_id": 49899987, "comment_id": 86843929, "body": "Yes, if auto-disposal is all you care about. All it does is releasing you of manually keeping a reference to the Disposable and disposing it in onStop()."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524128558, "post_id": 49899987, "comment_id": 86849139, "body": "wow! thanks! I&#39;ll look into it this weekend (when i have the time). After that, I&#39;ll probably mark this as the answer :) Thank you soo much :)"}, {"owner": {"reputation": 493, "user_id": 4675996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aaJgO.jpg?s=128&g=1", "display_name": "harry248", "link": "https://stackoverflow.com/users/4675996/harry248"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524134082, "post_id": 49899987, "comment_id": 86853075, "body": "No problem. Have fun!"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524188139, "post_id": 49899987, "comment_id": 86880867, "body": "Hi @harry248. Now that I could auto dispose my RxObservables I&#39;m wondering whether I could also have the LiveData Behavior with it to totally remove LiveData on my code. Is that possible? For example, I do a web service with Rx.. if the user suddenly switch app or rotate the screen, I can&#39;t dispose the observable (coz the web service call will be cancelled) but I also cant just let it update my UI when it comes back and the app is still at background. Currently I store the webservice result in a LiveData to solve this issue but I wonder if this could be done solely with Rx.. thanks in advance"}, {"owner": {"reputation": 493, "user_id": 4675996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aaJgO.jpg?s=128&g=1", "display_name": "harry248", "link": "https://stackoverflow.com/users/4675996/harry248"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524217977, "post_id": 49899987, "comment_id": 86893385, "body": "If you need to keep state, you could use a <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel.html\" rel=\"nofollow noreferrer\">ViewModel</a> and let it return your Observables. The <a href=\"http://reactivex.io/documentation/operators/replay.html\" rel=\"nofollow noreferrer\">Replay</a> operator could be helpful too in your case."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1524447088, "post_id": 49899987, "comment_id": 86960559, "body": "I still don&#39;t understand.. can you expound on that? maybe an example? I&#39;m sorry if you feel like this should be on a separate question, I could make a new question if you feel that way. thanks in advance."}], "tags": [], "owner": {"reputation": 493, "user_id": 4675996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aaJgO.jpg?s=128&g=1", "display_name": "harry248", "link": "https://stackoverflow.com/users/4675996/harry248"}, "is_accepted": false, "score": 6, "last_activity_date": 1524055239, "creation_date": 1524055239, "answer_id": 49899987, "question_id": 49122299, "link": "https://stackoverflow.com/questions/49122299/convert-rxjava-observables-to-live-data-with-kotlin-extension-functions/49899987#49899987", "title": "Convert RxJava Observables To Live Data With Kotlin Extension Functions", "body": "<p>Your solution is fine if you want to use LiveData and Rx together.</p>\n\n<p>If you just want to auto-dispose your subscription you could implement it on Disposable like this:</p>\n\n<pre><code>private class LifecycleDisposable(obj: Disposable) :\n        DefaultLifecycleObserver, Disposable by obj {\n    override fun onStop(owner: LifecycleOwner) {\n        if (!isDisposed) {\n            dispose()\n        }\n    }\n}\n\nfun Disposable.attachToLifecycle(owner: LifecycleOwner) {\n    owner.lifecycle.addObserver(LifecycleDisposable(this))\n}\n</code></pre>\n\n<p>and call it like</p>\n\n<pre><code>Observable.just(1, 2, 3).subscribe().attachToLifecycle(this)\n</code></pre>\n\n<p>where <code>this</code> references any LifecycleOwner.</p>\n"}, {"tags": [], "owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "is_accepted": true, "score": 9, "last_activity_date": 1615206958, "last_edit_date": 1615206958, "creation_date": 1532439331, "answer_id": 51500037, "question_id": 49122299, "link": "https://stackoverflow.com/questions/49122299/convert-rxjava-observables-to-live-data-with-kotlin-extension-functions/51500037#51500037", "title": "Convert RxJava Observables To Live Data With Kotlin Extension Functions", "body": "<p>In short:</p>\n<ul>\n<li><code>Flowable.toLiveData()</code> is already in the <a href=\"https://developer.android.com/reference/kotlin/androidx/lifecycle/package-summary#tolivedata\" rel=\"nofollow noreferrer\"><code>androidx.lifecycle:lifecycle-reactivestreams-ktx</code> artifact</a></li>\n<li><code>Observable.toLiveData()</code> should be useful</li>\n<li><code>Single.toLiveData()</code> may not be useful in practice</li>\n<li><code>Maybe.toLiveData()</code> may not be useful in practice</li>\n<li><code>Completable.toLiveData()</code> doesn't really make sense</li>\n</ul>\n<hr />\n<p>I think this is a pretty good idea. An example benefit of <code>LiveData</code> is the ability of using it directly in your data-binding layouts. Let's say in your view-model you have:</p>\n<pre><code>val user: LiveData&lt;User&gt;\n\ndata class User(val firstName: String, val lastName: String)\n</code></pre>\n<p>in your layout you can bind the properties of the <code>User</code> directly:</p>\n<pre><code>android:text=&quot;${viewModel.user.firstName}&quot;\n</code></pre>\n<p>You can't use reactive streams in data-binding like this. If <code>user</code> was <code>Flowable&lt;User&gt;</code>, referencing <code>${viewModel.user.firstName}</code> wouldn't work.</p>\n<p>Furthermore, data-binding will handle the lifecycle for you (observing changes only in active state and updating the view when changes happen) if your activity or fragment calls <a href=\"https://developer.android.com/reference/android/databinding/ViewDataBinding.html#setLifecycleOwner(android.arch.lifecycle.LifecycleOwner)\" rel=\"nofollow noreferrer\"><code>ViewDataBinding.setLifecycleOwner(LifecycleOwner)</code></a>:</p>\n<pre><code>binding.setLifecycleOwner(this)\n</code></pre>\n<hr />\n<p>The one for converting <code>Completable</code> to <code>LiveData&lt;T&gt;</code> doesn't really make sense to me, because it will never notify the observer about anything, so I'd just get rid of it.</p>\n<p>There are some considerations when converting from reactive streams to live data (like I had when I wanted to <a href=\"https://stackoverflow.com/questions/47382786/resume-flowable-converted-to-live-data-after-screen-rotation\">resume a countdown after rotation</a>), but I don't think they are related to the extension functions you presented, those seem to do their job. The issue to keep in mind here is that when the lifecycle owner moves from active to inactive state, <a href=\"https://android.googlesource.com/platform/frameworks/support/+/master/lifecycle/reactivestreams/src/main/java/androidx/lifecycle/LiveDataReactiveStreams.java#222\" rel=\"nofollow noreferrer\"><code>PublisherLiveData</code></a> cancels the subscription to the stream, and when the state changes to active, it will create a new subscription, which means restarting the stream in many cases (I guess that is if the stream is &quot;cold&quot;), while you probably want to resume the stream from where it was after rotation or other configuration changes. If the stream was &quot;hot&quot; on the other hand, emissions get ignored during the inactive state. I think this problem has to be addressed even if you used reactive streams directly and handled life cycle manually. But the thing is that simply converting reactive streams to <code>LiveData</code> isn't enough to solve this problem.</p>\n<p>It's good to document those methods as not handling the error state, which has to be handled upstream. Alternatively, that could be one of the improvements for these functions - transforming the stream first to handle errors (as a lambda parameter with a default for example). Another possibility would be to utilize <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-result/index.html\" rel=\"nofollow noreferrer\"><code>Result</code></a> (experimental at the moment), or something similar to encapsulate the success or error.</p>\n<hr />\n<p>As an afterthought, regarding this part that I wrote above:</p>\n<blockquote>\n<p>There are some considerations when converting from reactive streams to live data, but I don't think they are related to the extension functions you presented.</p>\n</blockquote>\n<p>I still think it holds true in general, however I'm not sure if you actually want to use <code>Single.toLiveData()</code> and <code>Maybe.toLiveData()</code> in practice most of the time. Since <code>Maybe</code> and <code>Single</code> are modeling one-time operations, then it may be preferable not to cancel it when there are no active observers and have to re-start it once there are new active observers. Instead, posting to some <code>MutableLiveData</code> and disposing the <code>Single</code>/<code>Maybe</code> in <code>onCleared</code> might be useful (I'm not sure that can be encapsulated in an extension function). They still may have some use that I simply don't see at the moment.</p>\n<p>By the way, your <code>Flowable.toLiveData()</code> is already in the <a href=\"https://developer.android.com/reference/kotlin/androidx/lifecycle/package-summary#tolivedata\" rel=\"nofollow noreferrer\"><code>androidx.lifecycle:lifecycle-reactivestreams-ktx</code> artifact</a>.</p>\n<p>This leaves the <code>Observable.toLiveData()</code>, which I think should be just as useful as <code>Flowable</code> one.</p>\n"}], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11525, "favorite_count": 16, "accepted_answer_id": 51500037, "answer_count": 3, "score": 26, "last_activity_date": 1615206958, "creation_date": 1520301478, "question_id": 49122299, "link": "https://stackoverflow.com/questions/49122299/convert-rxjava-observables-to-live-data-with-kotlin-extension-functions", "title": "Convert RxJava Observables To Live Data With Kotlin Extension Functions", "body": "<p>I've been using alot of RxJava <code>Observables</code> converted to <code>LiveData</code> in my code using <code>LiveDataReactiveStreams.fromPublisher()</code> library. So I though of adding an extension function to the RxJava Observable to easily convert them to <code>LiveData</code>.</p>\n\n<p>These are my extension functions:</p>\n\n<pre><code>fun &lt;T&gt; Flowable&lt;T&gt;.toLiveData() :  LiveData&lt;T&gt; {\n    return LiveDataReactiveStreams.fromPublisher(this)\n}\n\nfun &lt;T&gt; Observable&lt;T&gt;.toLiveData(backPressureStrategy: BackpressureStrategy) :  LiveData&lt;T&gt; {\n    return LiveDataReactiveStreams.fromPublisher(this.toFlowable(backPressureStrategy))\n}\n\nfun &lt;T&gt; Single&lt;T&gt;.toLiveData() :  LiveData&lt;T&gt; {\n    return LiveDataReactiveStreams.fromPublisher(this.toFlowable())\n}\n\nfun &lt;T&gt; Maybe&lt;T&gt;.toLiveData() :  LiveData&lt;T&gt; {\n    return LiveDataReactiveStreams.fromPublisher(this.toFlowable())\n}\n\nfun &lt;T&gt; Completable.toLiveData() :  LiveData&lt;T&gt; {\n    return LiveDataReactiveStreams.fromPublisher(this.toFlowable())\n}\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is this a good idea?</li>\n<li>Is there a better way of doing this?</li>\n<li>Could these extension functions be better?</li>\n</ol>\n\n<p>P.S.</p>\n\n<p>I'm new to Kotlin and so I am asking these question. Anything helpful would be appreciated. Thank you very much.</p>\n"}, {"tags": ["android-fragments", "kotlin", "onbackpressed"], "answers": [{"comments": [{"owner": {"reputation": 294, "user_id": 5112812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b66c1bafeabe5d49923c568e63e0d3?s=128&d=identicon&r=PG&f=1", "display_name": "engmms", "link": "https://stackoverflow.com/users/5112812/engmms"}, "edited": false, "score": 1, "creation_date": 1520440842, "post_id": 49126727, "comment_id": 85318786, "body": "<code>val activity = activity as MainActivity</code>   error : unresolved reference activity"}], "tags": [], "owner": {"reputation": 1, "user_id": 9450105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a69dbe73a8933cf6d4a8858c76d462b?s=128&d=identicon&r=PG&f=1", "display_name": "Vsevolod", "link": "https://stackoverflow.com/users/9450105/vsevolod"}, "is_accepted": false, "score": 0, "last_activity_date": 1520326259, "creation_date": 1520326259, "answer_id": 49126727, "question_id": 49121493, "link": "https://stackoverflow.com/questions/49121493/in-kotlin-how-i-can-return-from-fragment-to-mainactivity/49126727#49126727", "title": "In Kotlin ..How I can return from fragment to MainActivity", "body": "<p>For your first question as far as I can understand you should use</p>\n\n<pre><code>val activity = activity as MainActivity\nactivity.onBackPressed()\n</code></pre>\n\n<p>because super for your fragment is not MainActivity. </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7202547, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RH7mNWw2Ygg/AAAAAAAAAAI/AAAAAAAAABk/XGO2ookv1HU/photo.jpg?sz=128", "display_name": "Michael Jorgensen", "link": "https://stackoverflow.com/users/7202547/michael-jorgensen"}, "is_accepted": false, "score": 2, "last_activity_date": 1528609862, "creation_date": 1528609862, "answer_id": 50780941, "question_id": 49121493, "link": "https://stackoverflow.com/questions/49121493/in-kotlin-how-i-can-return-from-fragment-to-mainactivity/50780941#50780941", "title": "In Kotlin ..How I can return from fragment to MainActivity", "body": "<p>Activities navigate to Activities via <code>onBackPressed()</code>.  Fragments have to reside in an Activity (They are basically sub-Activities), so it doesn't make sense to navigate from a Fragment to an Activity via <code>super.onBackPressed()</code>.  You should be navigating from Fragment to Fragment, or if you forgo Fragments then Activity to Activity.</p>\n\n<p>To navigate back to the previous Fragment:</p>\n\n<pre><code>activity?.fragmentManager?.popBackStack()\n</code></pre>\n\n<p>To navigate to the previous activity:</p>\n\n<pre><code>activity?.finish()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>onBackPressed()\n</code></pre>\n\n<p>or, from the activity if you have overriden the <code>onBackPressed()</code> method:</p>\n\n<pre><code>super.onBackPressed()\n</code></pre>\n\n<p>Without more context to your code I can't say either why it seems your final <code>else</code> statement is never called.  It seems like you've got a bug with your <code>if else</code> statement as <code>super.onBackPressed()</code> would provide the desired result of closing whatever activity you were in (MainActivity?).</p>\n\n<pre><code>else  if (fragment != null) {\nval intent = Intent(applicationContext, MainActivity::class.java)\nintent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP\nstartActivity(intent)\n\n }\n</code></pre>\n\n<p>My guess is it has something to do with you creating another instance of MainActivity.  On first back pressed you close the drawer.  On the second you create another instance of MainActivity and navigate to it.  On the third, even if <code>super.onBackPressed()</code> gets called it will navigate back to the first instance of MainActivity where fragment will probably never be null unless you're specifically assigning such, so on the fourth you create another instance of MainActivity and navigate to it.  This is a loop that will never navigate back from the first MainActivity.</p>\n\n<p>Suggestions: However you're displaying MainActivity, convert it to a Fragment and handle it accordingly.  Another approach is instead of creating another instance of MainActivity hide the fragmentView and show the MainActivity view.  I don't suggest setting your fragment to null as the fragmentManager may throw and error, so you should also change your <code>if else</code> logic to check for something else.  Say maybe <code>fragment.view.visibility == View.Visible</code> if you go the route described.</p>\n"}, {"tags": [], "owner": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "is_accepted": false, "score": 1, "last_activity_date": 1582446975, "creation_date": 1582446975, "answer_id": 60360470, "question_id": 49121493, "link": "https://stackoverflow.com/questions/49121493/in-kotlin-how-i-can-return-from-fragment-to-mainactivity/60360470#60360470", "title": "In Kotlin ..How I can return from fragment to MainActivity", "body": "<p>The easiest and most concise way (Kotlin):</p>\n\n<pre><code>requireActivity().addOnBackPressedCallback(viewLifecycleOwner,\n            OnbackPressedCallback{\n                startMainActivity() // Your action here...\n                true\n            }\n        )\n</code></pre>\n"}], "owner": {"reputation": 294, "user_id": 5112812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b66c1bafeabe5d49923c568e63e0d3?s=128&d=identicon&r=PG&f=1", "display_name": "engmms", "link": "https://stackoverflow.com/users/5112812/engmms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9621, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1582446975, "creation_date": 1520295138, "last_edit_date": 1520353241, "question_id": 49121493, "link": "https://stackoverflow.com/questions/49121493/in-kotlin-how-i-can-return-from-fragment-to-mainactivity", "title": "In Kotlin ..How I can return from fragment to MainActivity", "body": "<p>in my program I have MainActivity and many fragments..\nI try the following code to return from fragment to MainActivity by \n<code>onBackpressed()</code> method</p>\n\n<pre><code>override fun onBackPressed() {\n\n    if(drawer_layout.isDrawerOpen(GravityCompat.START)) {\n        drawer_layout.closeDrawer(GravityCompat.START)\n    }\n    else  if (fragment != null) {\n    val intent = Intent(applicationContext, MainActivity::class.java)\n    intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP\n    startActivity(intent)\n\n     }\n\n\n    else {\n       super.onBackPressed()\n    }\n}\n</code></pre>\n\n<p><strong>My first problem is:</strong></p>\n\n<p>it working good with Drawer and also open MainActivity\nbut program not closed ..these main that</p>\n\n<pre><code>super.onBackPressed()\n</code></pre>\n\n<p>not working ..why </p>\n\n<p><strong>My second problem is:</strong></p>\n\n<p>after else If I need to use</p>\n\n<pre><code>getActivity().onBackpressed()\n</code></pre>\n\n<p>instead of the old one..</p>\n\n<p><em>Thanks All</em></p>\n"}, {"tags": ["android", "kotlin", "rx-java"], "comments": [{"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1520294709, "post_id": 49121259, "comment_id": 85248327, "body": "then bottom line in the <code>Observable::fromCallable</code> method - <code>AIResponse()</code> is returning an new <code>AIResponse</code> object - the return of <code>aiDataService.request(request, requestExtras)</code> is ignored. Remove <code>AIResponse()</code> as the return type. Looking at the code all of your <code>if</code> statements will never work as your <code>params[]</code> has <code>null</code> entries - You need them to contain something first for lines like : <code>request.setQuery(requestString)</code> to execute, or if they&#39;re not required remove the unnecessary code."}, {"owner": {"reputation": 131, "user_id": 5522385, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206788197881112/picture?type=large", "display_name": "Dinorah Tovar", "link": "https://stackoverflow.com/users/5522385/dinorah-tovar"}, "reply_to_user": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1520348080, "post_id": 49121259, "comment_id": 85272047, "body": "Thank you so much, I will probably update this, to people starting with DialogFlow have an idea of how to do it"}], "owner": {"reputation": 131, "user_id": 5522385, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206788197881112/picture?type=large", "display_name": "Dinorah Tovar", "link": "https://stackoverflow.com/users/5522385/dinorah-tovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520293343, "creation_date": 1520293343, "question_id": 49121259, "link": "https://stackoverflow.com/questions/49121259/dialogflow-from-asynctask-to-rx", "title": "DialogFlow from AsyncTask to RX", "body": "<p>Im looking for a way to manage a Observable over a Asynctask in the request from the API of DialogFlow (AI.API from Google <a href=\"https://dialogflow.com\" rel=\"nofollow noreferrer\">https://dialogflow.com</a>)</p>\n\n<p>Right now the code is everything in Kotlin\nThe normal request is the next one </p>\n\n<pre><code>val task = object : AsyncTask&lt;String, Void, AIResponse&gt;() {\n        private var aiError: AIError? = null\n\n        override fun doInBackground(vararg params: String): AIResponse? {\n            val request = AIRequest()\n            val query = params[0]\n            val event = params[1]\n\n            if (!TextUtils.isEmpty(query))\n                request.setQuery(query)\n            if (!TextUtils.isEmpty(event))\n                request.setEvent(AIEvent(event))\n            val contextString = params[2]\n            var requestExtras: RequestExtras? = null\n            if (!TextUtils.isEmpty(contextString)) {\n                val contexts = listOf(AIContext(contextString))\n                requestExtras = RequestExtras(contexts, null)\n            }\n\n            try {\n                return aiDataService?.request(request, requestExtras)\n            } catch (e: AIServiceException) {\n                aiError = AIError(e)\n                return null\n            }\n\n        }\n\n        override fun onPostExecute(response: AIResponse?) {\n            if (response != null) {\n                aiApiSuccess (response)\n            } else {\n                view.onError(R.string.natural_language_error)\n            }\n        }\n    }\n    task.execute(requestString, \"\", \"\")\n</code></pre>\n\n<p>I don't know if I doing wrong the request\nRight now</p>\n\n<pre><code>return Observable.fromCallable&lt;AIResponse&gt; {\n        val params = arrayOfNulls&lt;String&gt;(3)\n        val request = AIRequest()\n        val query = params[0]\n        val event = params[1]\n\n        if (!TextUtils.isEmpty(query))\n            request.setQuery(requestString)\n        if (!TextUtils.isEmpty(event))\n            request.setEvent(AIEvent(event))\n        val contextString = params[2]\n        var requestExtras: RequestExtras? = null\n        if (!TextUtils.isEmpty(contextString)) {\n            val contexts = listOf(AIContext(contextString))\n            requestExtras = RequestExtras(contexts, null)\n        }\n\n        try {\n            aiDataService.request(request, requestExtras)\n        } catch (e: AIServiceException) {\n            Log.i(\"Error\", \"Error\")\n        }\n            AIResponse()\n        }\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>It make the request but all the objects are null always \nthat doesn't happen with the Asynctask</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 2, "creation_date": 1520324214, "post_id": 49120350, "comment_id": 85256999, "body": "Maybe it&#39;s a silly question, but are you sure that your exception is an <code>HttpClientErrorException</code>?"}, {"owner": {"reputation": 991, "user_id": 2080929, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/c90TF.jpg?s=128&g=1", "display_name": "rena", "link": "https://stackoverflow.com/users/2080929/rena"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520348089, "post_id": 49120350, "comment_id": 85272054, "body": "Yes, even without the if the toast won&#39;t show."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520713862, "post_id": 49120350, "comment_id": 85431865, "body": "Do you get any exception in the LogCat? Where is the exceptionHandler run, in the main thread or in a background thread?"}, {"owner": {"reputation": 991, "user_id": 2080929, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/c90TF.jpg?s=128&g=1", "display_name": "rena", "link": "https://stackoverflow.com/users/2080929/rena"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520714200, "post_id": 49120350, "comment_id": 85431959, "body": "Yes, I got an exception in LogCat. I am not sure if the exception handler runs in the main or backgruond thread. That was part of the question \ud83d\ude00"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520714358, "post_id": 49120350, "comment_id": 85432002, "body": "If you have an exception in the LogCat it&#39;s always a good idea to post it together with the code, to have a quicker and more accurate answer. Could you please paste it, if you still have the issue?"}, {"owner": {"reputation": 991, "user_id": 2080929, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/c90TF.jpg?s=128&g=1", "display_name": "rena", "link": "https://stackoverflow.com/users/2080929/rena"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1520714687, "post_id": 49120350, "comment_id": 85432123, "body": "I do not have muy laptop with me I will update the question as soon as I can."}], "answers": [{"tags": [], "owner": {"reputation": 991, "user_id": 2080929, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/c90TF.jpg?s=128&g=1", "display_name": "rena", "link": "https://stackoverflow.com/users/2080929/rena"}, "is_accepted": true, "score": 4, "last_activity_date": 1522182508, "creation_date": 1522182508, "answer_id": 49521878, "question_id": 49120350, "link": "https://stackoverflow.com/questions/49120350/android-kotlin-handling-exceptions-on-ui-thread-with-anko-doasync/49521878#49521878", "title": "Android Kotlin handling exceptions on ui thread with anko doAsync", "body": "<p>Since the exception handler is called in a background thread, I used a <code>try-catch</code> in the <code>doAsync</code> bloc.</p>\n\n<pre><code>doAsync{\n     var exception: Exception? = null\n     try {\n          //rest call\n     }\n     catch(e: HttpClientErrorException){\n          exception = e\n     }\n     uiThread {\n        if (exception != null){\n             // Show the exception message. \n        }\n        else {\n             // Update the UI with the result\n        }\n     }\n}\n</code></pre>\n\n<p>So this way one can handle the expected exception on the UI thread. Feedback is welcome.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 2243859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d814e867fcb59af36bbf32e61a4b4c2f?s=128&d=identicon&r=PG", "display_name": "jackes", "link": "https://stackoverflow.com/users/2243859/jackes"}, "is_accepted": false, "score": 4, "last_activity_date": 1543375285, "creation_date": 1543375285, "answer_id": 53511622, "question_id": 49120350, "link": "https://stackoverflow.com/questions/49120350/android-kotlin-handling-exceptions-on-ui-thread-with-anko-doasync/53511622#53511622", "title": "Android Kotlin handling exceptions on ui thread with anko doAsync", "body": "<p>I'm also think that unexpected exceptions should NOT be ignored (or just logged). But it is not very convenient to add try-canth block every time you use <code>doAsync</code>. I created folowing utility function:</p>\n\n<pre><code>fun &lt;T&gt; T.doAsyncThrowOnUI(task: AnkoAsyncContext&lt;T&gt;.() -&gt; Unit) = doAsync(\n        exceptionHandler = { thr -&gt; Handler(Looper.getMainLooper()).post { throw thr }},\n        task = task)\n</code></pre>\n\n<p>It just calls Anko's <code>doSync</code> and passes exception handler that re-throws all unhandled exceptions on UI thread. Use <code>doAsyncThrowOnUI</code> in place of Anko's <code>doAsync</code>. </p>\n\n<pre><code>doAsyncThrowOnUI {\n     // do something on bg thread (exceptions rethrown on ui thread)\n\n     uiThread {\n        // do something on ui thread\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 2080929, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/c90TF.jpg?s=128&g=1", "display_name": "rena", "link": "https://stackoverflow.com/users/2080929/rena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "accepted_answer_id": 49521878, "answer_count": 2, "score": 2, "last_activity_date": 1543375285, "creation_date": 1520287872, "last_edit_date": 1521243881, "question_id": 49120350, "link": "https://stackoverflow.com/questions/49120350/android-kotlin-handling-exceptions-on-ui-thread-with-anko-doasync", "title": "Android Kotlin handling exceptions on ui thread with anko doAsync", "body": "<p>I am new to Kotlin and I have this doAsync with a custom exception handler: </p>\n\n<pre><code>doAsync(exceptionHander = {e -&gt; handleException(e)}){\n     //rest call\n}\n\n private val handleException= {throwable : Throwable -&gt;\n        if(throwable is HttpClientErrorException){\n            val response = JSONObject(throwable.responseBodyAsString)\n            Toast.makeText(this, response[\"message\"].toString(), Toast.LENGTH_LONG).show()\n        }\n    }\n</code></pre>\n\n<p>However the Toast is never shown. How can I show this exception message on a Toast? Is the exception handler called on the ui thread? </p>\n\n<p><strong>Update</strong>: </p>\n\n<p>I have tested this way: </p>\n\n<pre><code>doAsync(exceptionHander = {e -&gt; handleException(e)}){\n      throw HttpClientErrorException(HttpStatus.INTERNAL_SERVER_ERROR, \"An error has occurred\")\n}\n</code></pre>\n\n<p>with the same error handler, however the toast won't show. </p>\n"}, {"tags": ["android", "directory", "kotlin"], "comments": [{"owner": {"reputation": 1054, "user_id": 562146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f105112f9c986a69ec89a5c84e69cc6e?s=128&d=identicon&r=PG", "display_name": "es0329", "link": "https://stackoverflow.com/users/562146/es0329"}, "edited": false, "score": 0, "creation_date": 1520402049, "post_id": 49119300, "comment_id": 85295005, "body": "I&#39;m curious. What&#39;s your <code>minSdkVersion</code>?"}, {"owner": {"reputation": 3, "user_id": 7095148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef66ff485c9bb66ece9a1770c4aec359?s=128&d=identicon&r=PG&f=1", "display_name": "MAGNET", "link": "https://stackoverflow.com/users/7095148/magnet"}, "reply_to_user": {"reputation": 1054, "user_id": 562146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f105112f9c986a69ec89a5c84e69cc6e?s=128&d=identicon&r=PG", "display_name": "es0329", "link": "https://stackoverflow.com/users/562146/es0329"}, "edited": false, "score": 0, "creation_date": 1520456693, "post_id": 49119300, "comment_id": 85327933, "body": "@es0329 minSdkVersion 19"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7095148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef66ff485c9bb66ece9a1770c4aec359?s=128&d=identicon&r=PG&f=1", "display_name": "MAGNET", "link": "https://stackoverflow.com/users/7095148/magnet"}, "edited": false, "score": 0, "creation_date": 1520456806, "post_id": 49145193, "comment_id": 85327987, "body": "Yes, I did declare it. And I agree, I have to remove write permission"}], "tags": [], "owner": {"reputation": 1054, "user_id": 562146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f105112f9c986a69ec89a5c84e69cc6e?s=128&d=identicon&r=PG", "display_name": "es0329", "link": "https://stackoverflow.com/users/562146/es0329"}, "is_accepted": false, "score": 0, "last_activity_date": 1520402744, "creation_date": 1520402744, "answer_id": 49145193, "question_id": 49119300, "link": "https://stackoverflow.com/questions/49119300/how-to-create-files-and-directories-in-kotlin/49145193#49145193", "title": "How to create files and directories in Kotlin?", "body": "<p><a href=\"https://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\" title=\"opt\">Read is implicitly permitted when write is granted.</a></p>\n\n<p>Have you also declared the permission in the app's manifest?</p>\n\n<p><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 8572350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cqDnORVMSFU/AAAAAAAAAAI/AAAAAAAAQSY/_20J0-CP5oA/photo.jpg?sz=128", "display_name": "Tejas Soni", "link": "https://stackoverflow.com/users/8572350/tejas-soni"}, "is_accepted": false, "score": 0, "last_activity_date": 1607000780, "creation_date": 1607000780, "answer_id": 65126585, "question_id": 49119300, "link": "https://stackoverflow.com/questions/49119300/how-to-create-files-and-directories-in-kotlin/65126585#65126585", "title": "How to create files and directories in Kotlin?", "body": "<p><strong>Don't forget to add this in you AndroidManifest.xml</strong>\n<code>android:requestLegacyExternalStorage=&quot;true&quot;</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7095148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef66ff485c9bb66ece9a1770c4aec359?s=128&d=identicon&r=PG&f=1", "display_name": "MAGNET", "link": "https://stackoverflow.com/users/7095148/magnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3731, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1607000780, "creation_date": 1520283255, "question_id": 49119300, "link": "https://stackoverflow.com/questions/49119300/how-to-create-files-and-directories-in-kotlin", "title": "How to create files and directories in Kotlin?", "body": "<p>I've been trying to create a simple path with Kotlin in Android Studio, but unfortunately I am unable to do so. \nRight now, my code looks like this:</p>\n\n<pre><code>lateinit var context : Context\n\nprivate const val PERMISSION_REQUEST = 10\n\nfun makeDir(){\n    // I/O logic\n    val filename: String = \"ziemniakList.txt\"\n    val myDir: String = Environment.getDataDirectory().toString() +  \"/Ziemniak/\"\n    // create a File object for the parent directory\n    val sciezka = File(myDir)\n    // have the object build the directory structure, if needed.\n    sciezka.mkdirs()\n    // create a File object for the output file\n    //val outputFile = File(sciezka, filename)\n    //println(\"makeDir!\")\n    Toast.makeText(context, myDir, Toast.LENGTH_LONG).show()\n}\n\nclass NowaDostawa() : AppCompatActivity() {\n\nprivate var permissions = arrayOf&lt;String&gt;(android.Manifest.permission.WRITE_EXTERNAL_STORAGE,android.Manifest.permission.READ_EXTERNAL_STORAGE)\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_nowa_dostawa)\n    var MY_PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION = 1\n\n    context=this\n\n    val menuLista = arrayOf(\"Online\", \"Got\u00f3wka\", \"Karta\")\n    val adapter = ArrayAdapter(this, android.R.layout.simple_spinner_dropdown_item, menuLista)\n    spinner.adapter = adapter\n\n\n    buttonNoweZamowienie.setOnClickListener{\n        if(inputAdres.text.toString() == \"\" || inputKwota.text.toString() == \"\"){\n            Toast.makeText(this, \"All the fields needs to be filled!\", Toast.LENGTH_LONG).show()\n        }\n        else{\n            var allSuccess = 1\n            for(i in permissions.indices){\n                if(checkCallingOrSelfPermission(permissions[i]) == PackageManager.PERMISSION_DENIED){\n                    allSuccess = 0\n                }\n            }\n            if(allSuccess == 1){\n                Toast.makeText(context, \"Permissions granted!\", Toast.LENGTH_LONG).show()\n                makeDir()\n                finish()\n            }\n            else{\n                requestPermissions(permissions, PERMISSION_REQUEST)\n            }\n        }\n    }\n\n}\n\noverride fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n    if(requestCode == PERMISSION_REQUEST){\n        var allSuccess = true\n        for(i in permissions.indices){\n            if(grantResults[i] == PackageManager.PERMISSION_DENIED){\n                allSuccess = false\n                var requestAgain = shouldShowRequestPermissionRationale(permissions[i])\n                if(requestAgain){\n                    Toast.makeText(context, \"Permissions hasn't been granted!\", Toast.LENGTH_LONG).show()\n                }\n                else{\n                    Toast.makeText(context, \"Set permissions by yourself!\", Toast.LENGTH_LONG).show()\n                }\n            }\n        }\n        if(allSuccess){\n            Toast.makeText(context, \"Permissions has been granted!\", Toast.LENGTH_LONG).show()\n            makeDir()\n            finish()\n        }\n    }\n}\n</code></pre>\n\n<p>So basically, when I hit 'buttonNoweZamowienie' button, the folder should create under /data/Ziemniak/, but it doesn't. As you can see, I grant the permissions and it works good, but i still find it hard to create some basic directory. What might be the problem? If there are some things I haven't specified, feel free to ask</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["kotlin", "apache-beam"], "answers": [{"comments": [{"owner": {"reputation": 1123, "user_id": 1595197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AQsPO.jpg?s=128&g=1", "display_name": "Sander", "link": "https://stackoverflow.com/users/1595197/sander"}, "edited": false, "score": 0, "creation_date": 1521622859, "post_id": 49400164, "comment_id": 85805099, "body": "Yes, the key was removing <code>out</code> parameter everywhere. Just goes to show: not all hints from Intellij are worth listening to..."}], "tags": [], "owner": {"reputation": 1883, "user_id": 988324, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=128&d=identicon&r=PG", "display_name": "Richard Deurwaarder", "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"}, "is_accepted": true, "score": 1, "last_activity_date": 1521617342, "last_edit_date": 1521617342, "creation_date": 1521615878, "answer_id": 49400164, "question_id": 49119164, "link": "https://stackoverflow.com/questions/49119164/generics-and-variance-in-beam-dofn-using-kotlin/49400164#49400164", "title": "Generics and variance in Beam DoFn using Kotlin", "body": "<p>I think the type of the Invalid class is incorrect when using it with <code>out</code> like this. </p>\n\n<p>Your beam map function is of type <code>MapFunction&lt;T, Result&lt;U&gt;&gt;</code> but you don't specify <code>U</code> anywhere, except inside the Sealed class where it becomes either(pun intended) <code>T</code> or <code>Nothing</code>.</p>\n\n<p>If you change the type of <code>Invalid&lt;Nothing&gt;</code> to <code>Invalid&lt;T&gt;</code> and thus making the type of your map to <code>MapFunction&lt;T, Result&lt;T&gt;&gt;</code> beam seems to be oke with it.</p>\n"}], "owner": {"reputation": 1123, "user_id": 1595197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AQsPO.jpg?s=128&g=1", "display_name": "Sander", "link": "https://stackoverflow.com/users/1595197/sander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 49400164, "answer_count": 1, "score": 1, "last_activity_date": 1521617342, "creation_date": 1520282745, "question_id": 49119164, "link": "https://stackoverflow.com/questions/49119164/generics-and-variance-in-beam-dofn-using-kotlin", "title": "Generics and variance in Beam DoFn using Kotlin", "body": "<p>I'm building a simple ETL pipeline using Apache Beam and Kotlin, where I'm trying to create a kind of <code>Either</code> type:</p>\n\n<pre><code>@DefaultCoder(SerializableCoder::class)\nsealed class Result&lt;out T&gt; : Serializable {\n\n    class Valid&lt;out T&gt;(val value: T) : Result&lt;T&gt;()\n\n    class Invalid(val reason: String): Result&lt;Nothing&gt;()\n}\n</code></pre>\n\n<p>Which is to be used for instance like this:</p>\n\n<pre><code>abstract class MapFunction&lt;T, U&gt; : DoFn&lt;Result&lt;T&gt;, Result&lt;U&gt;&gt;() {\n\n    abstract fun map(item: T) : Result&lt;U&gt;\n\n    @ProcessElement\n    fun processElement(context: ProcessContext) {\n        val input = context.element()\n\n        val output = when (input) {\n            is Result.Valid -&gt; map(input.value)\n            is Result.Invalid -&gt; input\n        }\n\n        context.output(output)\n    }\n}\n</code></pre>\n\n<p>This way I can keep track of all invalid results and output them at the end of my pipeline. The problem is that when I build a basic Pipeline I encounter the following cryptic error (formatted for readability):</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalArgumentException: \nnl.sanderp.beam.functions.LyricsEnricher, \n@ProcessElement processElement(ProcessContext), \n@ProcessElement processElement(ProcessContext), \nparameter of type DoFn&lt;Result&lt;Song&gt;, Result&lt;Song&gt;&gt;.ProcessContext at index 0: \nProcessContext argument must have type DoFn&lt;Result&lt;? extends Song&gt;, Result&lt;? extends Song&gt;&gt;.ProcessContext\n</code></pre>\n\n<p>I tried using the <code>@JvmWildcard</code> annotations as mentioned <a href=\"http://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#variant-generics\" rel=\"nofollow noreferrer\">in the Kotlin docs</a>, but that only results in more errors:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: org.apache.beam.sdk.repackaged.com.google.common.reflect.Types$WildcardTypeImpl cannot be cast to java.lang.reflect.TypeVariable\n</code></pre>\n\n<p>I can't seem to figure out how to get this snippet working, if it's at all possible. </p>\n\n<p>For reference, here's how the above code is called:</p>\n\n<pre><code>class LyricsEnricher(private val resourceFactory: ResourceFactory) : MapFunction&lt;Song, Song&gt;() {\n\n    private lateinit var dao: LyricsDao\n\n    @Setup\n    fun setup() {\n        dao = resourceFactory.get(ResourceFactory.Key.LYRICS_DAO)\n    }\n\n    override fun map(item: Song): Result&lt;Song&gt; {\n        dao.findLyrics(title = item.title, artist = item.artist)?.also {\n            return Result.Valid(item.copy(lyrics = it))\n        }\n\n        return Result.Invalid(\"No lyrics found\")\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-maps-android-api-2", "android-maps-v2"], "answers": [{"tags": [], "owner": {"reputation": 3081, "user_id": 2711811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc519c42e8a7c55c1e33af5ca6203f4?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2711811/andy"}, "is_accepted": false, "score": 2, "last_activity_date": 1520341400, "last_edit_date": 1520341400, "creation_date": 1520341073, "answer_id": 49131440, "question_id": 49118721, "link": "https://stackoverflow.com/questions/49118721/how-to-customise-polyline-to-look-like-google-maps-android-application/49131440#49131440", "title": "How to customise polyline to look like Google Maps Android application?", "body": "<p>(Just search on 'polyline border' (in SO) and find numerous similar solutions - but I couldn't help trying it myself.)</p>\n\n<p>For a border draw two PolyLines with varying width and color:</p>\n\n<pre><code>    PolylineOptions po = new PolylineOptions().add(latLng)\n            .add(new LatLng(latLng.latitude+.05,latLng.longitude))\n            .add(new LatLng(latLng.latitude+.07,latLng.longitude+.01))\n            .add(new LatLng( latLng.latitude+.09, latLng.longitude+.02))\n            .add(new LatLng(latLng.latitude+.09, latLng.longitude+.03));\n    po.color(Color.BLACK).width(16);\n    Polyline polyline = mMap.addPolyline(po);\n    po.color(Color.CYAN).width(10);\n    polyline = mMap.addPolyline(po);\n</code></pre>\n\n<p>Results in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y7sMu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y7sMu.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520341400, "creation_date": 1520280971, "question_id": 49118721, "link": "https://stackoverflow.com/questions/49118721/how-to-customise-polyline-to-look-like-google-maps-android-application", "title": "How to customise polyline to look like Google Maps Android application?", "body": "<p>On adding <code>Polyline</code>, following is shown:\n<a href=\"https://i.stack.imgur.com/xOkMa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xOkMa.png\" alt=\"enter image description here\"></a></p>\n\n<p>How o show the following?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Heoui.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Heoui.png\" alt=\"enter image description here\"></a></p>\n\n<p>Difference is in Border of polyline</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 545, "user_id": 2722398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ab656a6a67f4ab20dc82d43381ec7c80?s=128&d=identicon&r=PG&f=1", "display_name": "hahmed", "link": "https://stackoverflow.com/users/2722398/hahmed"}, "edited": false, "score": 0, "creation_date": 1531401087, "post_id": 49118557, "comment_id": 89589759, "body": "did you manage to figure this out? If you could update us that would be really appreciated as I am trying to implement a DB copy as well."}], "answers": [{"comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520282324, "post_id": 49118852, "comment_id": 85243540, "body": "that might work, but even if Java and Kotlin are interoperable I don&#39;t think this is the solution the OP asked for"}, {"owner": {"reputation": 366, "user_id": 7008898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4751f.jpg?s=128&g=1", "display_name": "Dinith Rukshan Kumara", "link": "https://stackoverflow.com/users/7008898/dinith-rukshan-kumara"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520287053, "post_id": 49118852, "comment_id": 85245811, "body": "@user2340612 - Sorry for my inconvenience. I changed language to kotlin &amp; post edited. Kindly upvote it as per stackoverflow guidelines if you found it is as per your expectation"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520287492, "post_id": 49118852, "comment_id": 85245986, "body": "no problem, now the language is matching, but I think you&#39;ll have an issue in your <code>while</code> loop if <code>buffer</code> is not totally filled in the last iteration, since you&#39;ll write dirty bytes"}], "tags": [], "owner": {"reputation": 366, "user_id": 7008898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4751f.jpg?s=128&g=1", "display_name": "Dinith Rukshan Kumara", "link": "https://stackoverflow.com/users/7008898/dinith-rukshan-kumara"}, "is_accepted": false, "score": -1, "last_activity_date": 1520286971, "last_edit_date": 1520286971, "creation_date": 1520281515, "answer_id": 49118852, "question_id": 49118557, "link": "https://stackoverflow.com/questions/49118557/copying-a-database-from-assets-folder-creates-an-empty-database/49118852#49118852", "title": "Copying a database from assets folder creates an empty database", "body": "<p>Create a class for AssetDBOpenHelper. Try below method. Its work fine for me.</p>\n\n<pre><code>class AssetDBOpenHelper(private val context: Context) {    \ncompanion object {    \n    private val DB_NAME = \"asset_db_name.db\"\n}\n\nfun openDatabase(): SQLiteDatabase {\n    val dbFile = context.getDatabasePath(DB_NAME)    \n\n    if (!dbFile.exists()) {\n        try {\n           val checkDB = context.openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE,null)\n            checkDB?.close()\n            copyDatabase(dbFile)\n        } catch (e: IOException) {\n            throw RuntimeException(\"error\", e)\n        }    \n    }\n    return SQLiteDatabase.openDatabase(dbFile.path, null, SQLiteDatabase.OPEN_READWRITE)\n}\n\n@SuppressLint(\"WrongConstant\")\nprivate fun copyDatabase(dbFile: File) {\n    val `is` = context.assets.open(DB_NAME)\n    val os = FileOutputStream(dbFile)    \n    val buffer = ByteArray(1024)\n    while (`is`.read(buffer) &gt; 0) {\n        os.write(buffer)\n    }    \n    os.flush()\n    os.close()\n    `is`.close()\n}\n</code></pre>\n\n<p>Then open or create database in your activity</p>\n\n<pre><code>val adb = AssetDatabaseOpenHelper(this)\nadb.openDatabase()\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 4671053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8ccda64628e742a41c7bcf36fee1c0bb?s=128&d=identicon&r=PG&f=1", "display_name": "allnex", "link": "https://stackoverflow.com/users/4671053/allnex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520286971, "creation_date": 1520280344, "last_edit_date": 1520283360, "question_id": 49118557, "link": "https://stackoverflow.com/questions/49118557/copying-a-database-from-assets-folder-creates-an-empty-database", "title": "Copying a database from assets folder creates an empty database", "body": "<p>I'm having problems copying an already existing database from the assets folder to the databases folder. The original database is 5.9MB, but with the code below, it creates a 12KB database with the <code>android_metadata</code> table, which is already on my database.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>class Database(private val ctx: Context = App.instance) : ManagedSQLiteOpenHelper(ctx, DB_NAME, null, DB_VERSION), AnkoLogger {\n    companion object {\n        val instance by lazy { Database() }\n        private const val DB_NAME = \"dex.db\"\n        private const val DB_VERSION = 1\n    }\n\n    override fun onCreate(db: SQLiteDatabase) {\n        if (!ctx.getDatabasePath(DB_NAME).exists()) {\n            info(\"Creating database ${db.path}.\")\n            copyDatabase()\n        }\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        if (newVersion &gt; oldVersion) {\n            info(\"Updating database ${db.path} from version $oldVersion to version $newVersion.\")\n            copyDatabase()\n        }\n    }\n\n    private fun copyDatabase() {\n        info(\"Copying database to data folder.\")\n        ctx.assets.open(DB_NAME).buffered().use { input -&gt;\n            FileOutputStream(ctx.getDatabasePath(DB_NAME)).use { out -&gt;\n                input.copyTo(out)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Copying the database manually with Device File Explorer from Android Studio and using <a href=\"https://github.com/Kotlin/anko/wiki/Anko-SQLite\" rel=\"nofollow noreferrer\">Anko SQLite</a> to query the database works perfectly, but with the code above, querying any table throws <code>no such table</code> error.</p>\n"}, {"tags": ["java", "kotlin", "gmail-api"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9447529, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Guillaume Ehret", "link": "https://stackoverflow.com/users/9447529/guillaume-ehret"}, "edited": false, "score": 0, "creation_date": 1520547828, "post_id": 49131926, "comment_id": 85372823, "body": "Thanks for the links. I followed the different steps but the new error is now com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request {   &quot;error&quot; : &quot;invalid_grant&quot;,   &quot;error_description&quot; : &quot;Invalid JWT Signature.&quot; }"}], "tags": [], "owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "is_accepted": false, "score": 0, "last_activity_date": 1520342667, "creation_date": 1520342667, "answer_id": 49131926, "question_id": 49117902, "link": "https://stackoverflow.com/questions/49117902/gmail-api-returns-failedprecondition-error-when-i-try-to-send-an-email-via-my-go/49131926#49131926", "title": "Gmail API returns failedPrecondition error when I try to send an email via my Google Suite Account", "body": "<p>Using <a href=\"https://developers.google.com/gmail/api/auth/about-auth\" rel=\"nofollow noreferrer\">Gmail API requires OAuth2 authorization</a>, even <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">service accounts uses Oauth2.0</a>:</p>\n\n<blockquote>\n  <p>All requests to the Gmail API must be authorized by an authenticated\n  user. Gmail uses the OAuth 2.0 protocol for authenticating a Google\n  account and authorizing access to user data. You can also use Google+\n  Sign-in to provide a \"sign-in with Google\" authentication method for\n  your app.</p>\n</blockquote>\n\n<p>In short, you need to use OAuth2.0. You can check the implemenation of service account in this <a href=\"https://stackoverflow.com/questions/29327846/gmail-rest-api-400-bad-request-failed-precondition\">SO post</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9447529, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Guillaume Ehret", "link": "https://stackoverflow.com/users/9447529/guillaume-ehret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 948, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520342667, "creation_date": 1520277529, "last_edit_date": 1520333149, "question_id": 49117902, "link": "https://stackoverflow.com/questions/49117902/gmail-api-returns-failedprecondition-error-when-i-try-to-send-an-email-via-my-go", "title": "Gmail API returns failedPrecondition error when I try to send an email via my Google Suite Account", "body": "<p>I have a GSuite account for my organization. I want to use Gmail API to send mail in my Java app but I don't want to use Oauth2 authent. I follow this documentation to delegate  authority to a service account <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount#delegatingauthority\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/protocols/OAuth2ServiceAccount#delegatingauthority</a>.</p>\n\n<p>I followed these steps:</p>\n\n<ul>\n<li>configure a new account service</li>\n<li>activate Gmail API in the dev console</li>\n<li>associate rights between my client ID and the API</li>\n</ul>\n\n<p>My Kotlin code to be able to initialize the Gmail service is below (the code is equivalent in Java)</p>\n\n<pre><code>@Configuration\nclass MixitApplication {\n\n  @Bean\n  fun jacksonFactory() = JacksonFactory.getDefaultInstance()\n\n  @Bean\n  fun dataStoreFactory() = MemoryDataStoreFactory.getDefaultInstance()\n\n  @Bean\n  fun httpTransport() = GoogleNetHttpTransport.newTrustedTransport()\n\n  @Bean\n  fun authorize(): Credential {\n\n    val jsonConfig = \"{\\n\" +\n            \"  \\\"type\\\": \\\"service_account\\\",\\n\" +\n            \"  \\\"project_id\\\": \\\"mixit-EeAZEAZE\\\",\\n\" +\n            \"  \\\"private_key_id\\\": \\\"FAKE\\\",\\n\" +\n            \"  \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\FAKE\\\\n-----END PRIVATE KEY-----\\\\n\\\",\\n\" +\n            \"  \\\"client_email\\\": \\\"website@FAKE.iam.gserviceaccount.com\\\",\\n\" +\n            \"  \\\"client_id\\\": \\\"FAKE\\\",\\n\" +\n            \"  \\\"auth_uri\\\": \\\"https://accounts.google.com/o/oauth2/auth\\\",\\n\" +\n            \"  \\\"token_uri\\\": \\\"https://accounts.google.com/o/oauth2/token\\\",\\n\" +\n            \"  \\\"auth_provider_x509_cert_url\\\": \\\"https://www.googleapis.com/oauth2/v1/certs\\\",\\n\" +\n            \"  \\\"client_x509_cert_url\\\": \\\"https://www.googleapis.com/robot/v1/metadata/x509/website%40mixit-196820.iam.gserviceaccount.com\\\"\\n\" +\n            \"}\"\n\n\n\n    return GoogleCredential\n            .fromStream(jsonConfig.byteInputStream())\n            .createScoped(listOf(GmailScopes.GMAIL_SEND))\n  }\n\n  @Bean\n  fun gmailService() = Gmail.Builder(httpTransport(), jacksonFactory(), authorize()).build()\n\n}\n</code></pre>\n\n<p>In my service when I try to end an email with this code</p>\n\n<pre><code>val result = gmailService.users().messages().send(\"me\", emailMessage).execute();\n</code></pre>\n\n<p>I have always this error</p>\n\n<pre><code>  400 Bad Request { \"code\" : 400, \"errors\" : [ { \"domain\" : \"global\", \"message\" : \"Bad Request\", \"reason\" : \"failedPrecondition\" } ], \"message\" : \"Bad Request\" }\n</code></pre>\n\n<p>I found several posts about similar problem. But it's often because the account is not a Gsuite account</p>\n\n<p>I tried to find Google support for this problem but I had no solution for the moment. There' no information on the Google API console. I just know that I had a bad request. </p>\n\n<p>My email function to send mail is very simple. EmailMessage is a custom object with email infos (to, subject and content)</p>\n\n<pre><code>fun send(email: EmailMessage) {\n    val session = Session.getDefaultInstance(Properties(), null)\n    val message = MimeMessage(session)\n\n    message.setFrom(InternetAddress(\"me\"))\n    message.addRecipient(javax.mail.Message.RecipientType.TO, InternetAddress(email.to))\n    message.subject = email.subject\n    message.setContent(email.content, MediaType.TEXT_HTML_VALUE)\n\n    val buffer = ByteArrayOutputStream()\n    message.writeTo(buffer)\n    val emailMessage = Message()\n    emailMessage.encodeRaw(buffer.toByteArray())\n\n    val result = gmailService.users().messages().send(\"me\", emailMessage).execute();\n\n    System.out.println(result.toPrettyString())\n}\n</code></pre>\n\n<p>When I try to send this message by the test api console I <a href=\"https://developers.google.com/apis-explorer/?hl=en_GB#p/gmail/v1/gmail.users.messages.send\" rel=\"nofollow noreferrer\">https://developers.google.com/apis-explorer/?hl=en_GB#p/gmail/v1/gmail.users.messages.send</a> the message is sent</p>\n\n<p>Can you help me?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1520275775, "post_id": 49117384, "comment_id": 85240163, "body": "There&#39;s nothing apparently wrong with this code, the calls in the initializer block happen at construction time, before you can read the values of the properties externally."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520275874, "post_id": 49117384, "comment_id": 85240206, "body": "How do you call it? How do you create the Calendar objects that you pass to the constructor?"}, {"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1520276349, "post_id": 49117384, "comment_id": 85240452, "body": "@user2340612: Added example"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520276675, "post_id": 49117384, "comment_id": 85240633, "body": "What is variable <code>calendar</code>, that you use to set <code>cal</code>&#39;s fields?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520277127, "post_id": 49117384, "comment_id": 85240877, "body": "Can you construct a minimal test case?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520277210, "post_id": 49117384, "comment_id": 85240916, "body": "The code in <code>init()</code> is compiled as part of the constructor. There are possibilities to observe uninitialized values, but these mostly happen in case of subclassing (when a method overridden in a subclass is called before the subclass constructor has finished running) or when there are dependencies between initializers."}, {"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520278151, "post_id": 49117384, "comment_id": 85241356, "body": "@OliverCharlesworth Will do by tonight."}, {"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520278326, "post_id": 49117384, "comment_id": 85241455, "body": "@user2340612 It&#39;s it&#39;s supposed to be <code>refDate</code>. Sorry for the confusion. Edited the example."}, {"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "edited": false, "score": 0, "creation_date": 1520279096, "post_id": 49117384, "comment_id": 85241847, "body": "This looks so much like Java. Why are you using the <code>init</code> function anyway?"}, {"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "edited": false, "score": 0, "creation_date": 1520279816, "post_id": 49117384, "comment_id": 85242217, "body": "Oh, and I do zero the times. Forgot to add that in."}, {"owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "edited": false, "score": 0, "creation_date": 1520345462, "post_id": 49117384, "comment_id": 85270283, "body": "I can&#39;t replicate the error in a minimal test case yet. Which tells me I&#39;ve got something wrong elsewhere. Will keep at that portion of the problem."}], "answers": [{"tags": [], "owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "is_accepted": false, "score": 2, "last_activity_date": 1522244817, "last_edit_date": 1522244817, "creation_date": 1520279550, "answer_id": 49118376, "question_id": 49117384, "link": "https://stackoverflow.com/questions/49117384/value-initialization-with-kotlin/49118376#49118376", "title": "Value initialization with Kotlin", "body": "<p>As far as I know the <code>init</code> block will be executed within the primary constructor, so your original class <code>Day</code> should be fine. You could just remove the <code>init</code> block and assign the values directly with the property's declaration though.</p>\n\n<p>I see just 2 problems, one is:</p>\n\n<blockquote>\n  <p>However, what I found on execution is that isBefore and isAfter\n  remained false in some cases</p>\n</blockquote>\n\n<p>That wouldn't be a surprise at all if <code>cal.compareTo(refCal)</code> returned <code>0</code>. <br>Or if the value of <code>refCal</code> changed between the execution of the 2 lines</p>\n\n<pre><code>isBefore = 0 &lt; cal.compareTo(refCal)\nisAfter = 0 &gt; cal.compareTo(refCal)\n</code></pre>\n\n<p>Second problem is your second <code>Day</code> implementation, when you declare a getter for the property</p>\n\n<pre><code>val isBefore: Boolean\n    get() { return 0 &lt; cal.compareTo(refCal) }\n</code></pre>\n\n<p>you're comparing the value each time you read that property, this means that <code>isBefore</code>'s value could very easily change within the same <code>Day</code>instance, if the value of <code>refCal</code> property changes. If you want just to read the value of <code>refCal</code> and assign <code>isBefore</code> accordingly you should do that when initializing the property, within <code>init</code> block or within declaration (you could also omit the type and use <code>&gt;</code> operator directly):</p>\n\n<pre><code>class Day constructor(cal: Calendar, refCal: Calendar) {\n    private val cal = cal.clone() as Calendar\n    val isBefore = cal &gt; refCal\n    val isAfter = cal &lt; refCal\n}\n</code></pre>\n\n<p>And maybe add property like <code>val isEqual = !isBefore &amp;&amp; !isAfter</code> because those 2 are not mutually exclusive.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I just checked with Kotlin 1.2.30, Intellij's Kotlin plugin allows you to see the bytecode of the compile Kotlin class (the action is called \"Show Kotlin Bytecode\"). The code you put in the <code>init</code> block is indeed executed within the primary constructor. For instance this class:</p>\n\n<pre><code>class Day(cal: Calendar)  {\n\n    val cal: Calendar\n\n    init {\n        this.cal = cal.clone() as Calendar\n    }\n}\n</code></pre>\n\n<p>Compiles this constructor:</p>\n\n<pre><code>  // access flags 0x1\n  public &lt;init&gt;(Ljava/util/Calendar;)V\n    @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 0\n   L0\n    ALOAD 1\n    LDC \"cal\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n   L1\n    LINENUMBER 3 L1\n    ALOAD 0\n    INVOKESPECIAL java/lang/Object.&lt;init&gt; ()V\n   L2\n    LINENUMBER 8 L2\n    ALOAD 0\n    ALOAD 1\n    INVOKEVIRTUAL java/util/Calendar.clone ()Ljava/lang/Object;\n    DUP\n    IFNONNULL L3\n    NEW kotlin/TypeCastException\n    DUP\n    LDC \"null cannot be cast to non-null type java.util.Calendar\"\n    INVOKESPECIAL kotlin/TypeCastException.&lt;init&gt; (Ljava/lang/String;)V\n    ATHROW\n   L3\n    CHECKCAST java/util/Calendar\n    PUTFIELD Day.cal : Ljava/util/Calendar;\n   L4\n    RETURN\n   L5\n    LOCALVARIABLE this LDay; L0 L5 0\n    LOCALVARIABLE cal Ljava/util/Calendar; L0 L5 1\n    MAXSTACK = 5\n    MAXLOCALS = 2\n</code></pre>\n\n<p>As you can see the <code>Calendar.clone</code> is called there, so you can treat the <code>init</code> the same way as you would with a constructor in Java.</p>\n\n<p>If you don't have a primary constructor, e.g.:</p>\n\n<pre><code>class Day {\n    constructor(cal: Calendar)\n    constructor()\n\n    val cal: Calendar\n\n    init {\n        this.cal = Calendar.getInstance()\n    }\n}\n</code></pre>\n\n<p>2 constructors are created and the code of the <code>init</code> block is executed in each one of them.</p>\n\n<pre><code>  // access flags 0x1\n  public &lt;init&gt;(Ljava/util/Calendar;)V\n    @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 0\n   L0\n    ALOAD 1\n    LDC \"cal\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n   L1\n    LINENUMBER 4 L1\n    ALOAD 0\n    INVOKESPECIAL java/lang/Object.&lt;init&gt; ()V\n   L2\n    LINENUMBER 10 L2\n    ALOAD 0\n    INVOKESTATIC java/util/Calendar.getInstance ()Ljava/util/Calendar;\n    DUP\n    LDC \"Calendar.getInstance()\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkExpressionValueIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n    PUTFIELD Day.cal : Ljava/util/Calendar;\n   L3\n    RETURN\n   L4\n    LOCALVARIABLE this LDay; L0 L4 0\n    LOCALVARIABLE cal Ljava/util/Calendar; L0 L4 1\n    MAXSTACK = 4\n    MAXLOCALS = 2\n\n  // access flags 0x1\n  public &lt;init&gt;()V\n   L0\n    LINENUMBER 5 L0\n    ALOAD 0\n    INVOKESPECIAL java/lang/Object.&lt;init&gt; ()V\n   L1\n    LINENUMBER 10 L1\n    ALOAD 0\n    INVOKESTATIC java/util/Calendar.getInstance ()Ljava/util/Calendar;\n    DUP\n    LDC \"Calendar.getInstance()\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkExpressionValueIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n    PUTFIELD Day.cal : Ljava/util/Calendar;\n   L2\n    RETURN\n   L3\n    LOCALVARIABLE this LDay; L0 L3 0\n    MAXSTACK = 4\n    MAXLOCALS = 1\n</code></pre>\n"}], "owner": {"reputation": 15070, "user_id": 210916, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5c7e713b6f536d3fa0c9e1fbbdfb9c1?s=128&d=identicon&r=PG", "display_name": "MPelletier", "link": "https://stackoverflow.com/users/210916/mpelletier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522244817, "creation_date": 1520275403, "last_edit_date": 1520306204, "question_id": 49117384, "link": "https://stackoverflow.com/questions/49117384/value-initialization-with-kotlin", "title": "Value initialization with Kotlin", "body": "<p>I think I found a strange fringe case:</p>\n\n<p>What I had:</p>\n\n<pre><code>class Day constructor(cal: Calendar, refCal: Calendar) {\n    val cal: Calendar\n    val isBefore: Boolean\n    val isAfter: Boolean\n\n    init {\n        this.cal = cal.clone() as Calendar\n        isBefore = 0 &lt; cal.compareTo(refCal)\n        isAfter = 0 &gt; cal.compareTo(refCal)\n    }\n}\n</code></pre>\n\n<p>I would instantiate this with two dates, one being a reference, and determine if the date is before or after a reference date. However, what I found on execution is that <code>isBefore</code> and <code>isAfter</code> remained false <em>in some cases</em>, independently of what they should be worth, unless I went in step-by-step with the debugger. So, apparently <code>init</code> was called not right after the constructor, just delayed enough for my values not to be set?</p>\n\n<p>What I did to resolve it was simply calculate <code>isBefore</code> and <code>isAfter</code> in getters:</p>\n\n<pre><code>class Day constructor(cal: Calendar, refCal: Calendar) {\n    val cal: Calendar\n\n    init {\n        this.cal = cal.clone() as Calendar\n        this.refCal = refCal.clone() as Calendar\n    }\n\n    val isBefore: Boolean\n        get() { return 0 &lt; cal.compareTo(refCal) }\n    val isAfter: Boolean\n        get() { return 0 &gt; cal.compareTo(refCal) }\n}\n</code></pre>\n\n<p>I'd like to know if my assumption is correct, if there's a way a value can be called before it is initialized with <code>init</code>\u00a0and if so, if there is a way to mitigate this.</p>\n\n<hr>\n\n<p>Call example:</p>\n\n<pre><code>fun setDates(refDate: Calendar) {\n    val cal = Calendar.getInstance()\n    cal.set(refDate.get(Calendar.YEAR), refDate.get(Calendar.MONTH), refDate.get(Calendar.DAY_OF_MONTH), 0, 0, 0)\n\n    cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY)\n    val monday = Day(cal, refDate)\n    //...\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520274132, "post_id": 49116823, "comment_id": 85239315, "body": "FWIW, types (including type parameters) conventionally stay with a capital letter."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1520274196, "post_id": 49116823, "comment_id": 85239343, "body": "But the answer is that B is <b>not</b> of type typeA."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1520336601, "last_edit_date": 1520336601, "creation_date": 1520273985, "answer_id": 49117002, "question_id": 49116823, "link": "https://stackoverflow.com/questions/49116823/kotlin-generics-will-not-compile/49117002#49117002", "title": "Kotlin generics will not compile", "body": "<p>Your code is conceptually incorrect.</p>\n\n<p>The declaration  <code>Test&lt;typeA : A&lt;C&gt;&gt;</code> means that <code>typeA</code> can assume one of the types that are subtypes of <code>A&lt;C&gt;</code>. It may or may not be <code>B</code>, and if it's not, <code>B()</code> is not a valid value to return. For example, you can declare another subtype of <code>A</code> and use <code>Test</code> with it:</p>\n\n<pre><code>class D : A&lt;C&gt;()\n\nval testD = Test&lt;D&gt;()\nval result = testD.returnB() // the result should be D, since testD has D for its typeA\n</code></pre>\n\n<p>The <code>fun returnB(): typeA</code>, then, should return a value of <code>typeA</code> for every possible <code>typeA</code>, not only for the case when it is <code>B</code>. The example above has <code>typeA</code> substituted by <code>D</code> and thus shows that returning <code>B</code> from <code>testD.returnB()</code> would be incorrect.</p>\n"}], "owner": {"reputation": 13, "user_id": 9447305, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Arjun Achatz", "link": "https://stackoverflow.com/users/9447305/arjun-achatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 49117002, "answer_count": 1, "score": 1, "last_activity_date": 1520336601, "creation_date": 1520273271, "last_edit_date": 1520273383, "question_id": 49116823, "link": "https://stackoverflow.com/questions/49116823/kotlin-generics-will-not-compile", "title": "Kotlin generics will not compile", "body": "<p>Been stuck on a problem for quite a while. This piece of code will not compile. I get an error on  line 4, <code>Type mismatch, found B require typeA</code> even though <code>B</code> is of <code>typeA</code>. I found a way to get around this by casting <code>B</code> to <code>typeA</code>, but this seems to be a horrible way(unchecked cast) to do it. Also changing the return type to <code>A&lt;C&gt;</code> would work too. I guess the smart cast is not smart enough?</p>\n\n<pre><code>class Test&lt;typeA : A&lt;C&gt;&gt; {\n\n    fun returnB(): typeA {\n        return B()\n    }\n}\n\n\nopen class A&lt;c : C&gt;\n\nclass B : A&lt;C&gt;()\n\nopen class C\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "sugarorm"], "answers": [{"tags": [], "owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "is_accepted": true, "score": 5, "last_activity_date": 1520267622, "creation_date": 1520267622, "answer_id": 49115188, "question_id": 49114705, "link": "https://stackoverflow.com/questions/49114705/find-sugar-orm-record-in-kotlin/49115188#49115188", "title": "Find Sugar ORM Record in Kotlin", "body": "<p>You should call it this way</p>\n\n<pre><code>SugarRecord.find(Advertiser::class.java, \"number = ?\", \"123123\").get(0)\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 1, "accepted_answer_id": 49115188, "answer_count": 1, "score": 1, "last_activity_date": 1520267622, "creation_date": 1520266139, "question_id": 49114705, "link": "https://stackoverflow.com/questions/49114705/find-sugar-orm-record-in-kotlin", "title": "Find Sugar ORM Record in Kotlin", "body": "<p>I have <code>Advertiser</code> class which extends <code>SugarRecord</code> in Kotlin:</p>\n\n<pre><code>class Advertiser : SugarRecord&lt;Advertiser&gt; {\n    var number: String? = null\n    var name: String? = null\n\n    constructor() {}\n\n    constructor(number: String, name: String) {\n        this.number = number\n        this.name = name\n    }\n}\n</code></pre>\n\n<p>when I try to find records by Java it works fine: </p>\n\n<pre><code>   Advertiser advertiser =  Advertiser.find(Advertiser.class, \"number = ?\", \"123123\").get(0);\n</code></pre>\n\n<p>but when I convert this code to Kotlin I face problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oK5Ny.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oK5Ny.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>how can I perform find in Kotlin?</strong> </p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520267984, "post_id": 49114436, "comment_id": 85235588, "body": "I you have an active listener on any data that is read from the server, the connection should remain open unless you&#39;ve explicitly called <code>goOffline()</code> in your code. Note that <code>.info&#47;connected</code> itself does not require reading from the server, so does not keep the connection open. This sounds a bit like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>: I have a feeling the whole <code>.info&#47;connected</code> and timeout are just red herrings. Can you describe what the actual root problem is?"}, {"owner": {"reputation": 4595, "user_id": 6096029, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7363bc85946e1071f6a3c65c905c471e?s=128&d=identicon&r=PG&f=1", "display_name": "rgoncalv", "link": "https://stackoverflow.com/users/6096029/rgoncalv"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520268824, "post_id": 49114436, "comment_id": 85236171, "body": "@FrankvanPuffelen, I just want it to keep track of connection states. So,  if I stay at a screen X, and I turn off wifi/ internet connection, screen X should show a &quot;no internet connection&quot; view. If I turn connection to be on again, it should fade out the &quot;no internet connection&quot; view. The problem relies on the point that after 60s it stops keeping track of the connection state."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520271234, "post_id": 49114436, "comment_id": 85237726, "body": "Let&#39;s not solely focus on the 60 second setting, since the behavior depends on multiple factors. If you turn off wifi/internet, after a while your listener on <code>connectedRef</code> should fire with a value of `false. Does that not happen? Or does it happen later than you expect?"}, {"owner": {"reputation": 4595, "user_id": 6096029, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7363bc85946e1071f6a3c65c905c471e?s=128&d=identicon&r=PG&f=1", "display_name": "rgoncalv", "link": "https://stackoverflow.com/users/6096029/rgoncalv"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520272780, "post_id": 49114436, "comment_id": 85238586, "body": "Everything works fine inside 60 seconds. After that, it just disconnects and stays with a value of <code>false</code>. The strange behavior is that to solve this problem, I would remove the listener on the <code>onDetach</code> for frag and <code>onDestroy</code> activity and put it again on <code>onAttach</code>/<code>onStart</code> respectively and it would work for a while but even then sometimes it would just appears as disconnected. So, the whole problem is that when listening to the same listener, after 60 seconds it always points to disconnected (connected = <code>false</code>). When renewing the listener, sometimes it just stays at disconnected too."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520279088, "post_id": 49114436, "comment_id": 85241839, "body": "If you only have a listener on <code>.info&#47;connected</code> that will <b>not</b> keep the connection to the server alive. That is by design."}, {"owner": {"reputation": 4595, "user_id": 6096029, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7363bc85946e1071f6a3c65c905c471e?s=128&d=identicon&r=PG&f=1", "display_name": "rgoncalv", "link": "https://stackoverflow.com/users/6096029/rgoncalv"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520279613, "post_id": 49114436, "comment_id": 85242126, "body": "I am using Firestore for all of my data. Doug told me that, pretty much, I could assume a connection to RTDB would mean a connection to Firestore,  which I also believe to be so, and is the very reason I am listening to <code>.info&#47;connected</code>. Given that only listening to <code>.info&#47;connected</code> is not sufficient, do you recommend creating a dummy node in RTDB and listening to it as well to force the connection to stay open?"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1520311819, "post_id": 49114436, "comment_id": 85252282, "body": "Cloud Firestore uses a gRPC-based protocol to talk between client and server, while the Firebase Realtime Database uses web sockets. They&#39;re in no way compatible or even comparable. Keeping an active listener on data in Firestore does not keep a connection to RTDB open. That&#39;s why the <a href=\"https://firebase.google.com/docs/firestore/solutions/presence#using_presence_in_realtime_database\" rel=\"nofollow noreferrer\">example in the Firestore documentation</a> also writes an actual data node to the realtime database."}], "answers": [{"tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 1, "last_activity_date": 1520458241, "last_edit_date": 1520458241, "creation_date": 1520311972, "answer_id": 49123609, "question_id": 49114436, "link": "https://stackoverflow.com/questions/49114436/firebase-connection-detection-does-not-work-after-60-seconds/49123609#49123609", "title": "Firebase connection detection does not work after 60 seconds", "body": "<p>If you have an active listener on any data that is read from the server, the connection should remain open unless you've explicitly called <code>goOffline()</code> in your code. Note that <code>.info/connected</code> itself does not require reading from the server, so does not keep the connection open.</p>\n\n<p>It seems you're using the realtime database to build an presence system on an otherwise Firestore based app. In that case: Cloud Firestore uses a gRPC-based protocol to talk between client and server, while the Firebase Realtime Database uses web sockets. They're in no way compatible or even comparable. Keeping an active listener on data in Firestore does not keep a connection to RTDB open. That's why the <a href=\"https://firebase.google.com/docs/firestore/solutions/presence#using_presence_in_realtime_database\" rel=\"nofollow noreferrer\">example in the Firestore documentation</a> also writes an actual data node to the realtime database.</p>\n"}], "owner": {"reputation": 4595, "user_id": 6096029, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7363bc85946e1071f6a3c65c905c471e?s=128&d=identicon&r=PG&f=1", "display_name": "rgoncalv", "link": "https://stackoverflow.com/users/6096029/rgoncalv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 2, "accepted_answer_id": 49123609, "answer_count": 1, "score": 2, "last_activity_date": 1520458241, "creation_date": 1520265352, "question_id": 49114436, "link": "https://stackoverflow.com/questions/49114436/firebase-connection-detection-does-not-work-after-60-seconds", "title": "Firebase connection detection does not work after 60 seconds", "body": "<p>As explained in some answers: </p>\n\n<blockquote>\n  <p>On Android, Firebase automatically manages connection state to reduce bandwidth and battery usage. When a client has no active listeners, no pending write or onDisconnect operations, and is not explicitly disconnected by the goOffline method, Firebase closes the connection after 60 seconds of inactivity.</p>\n</blockquote>\n\n<p>The problem is that after 60s, even after I go to an activity with a complete new reference, event listener, etc.. It still says it is disconnect, when in fact, it is not. </p>\n\n<pre><code>val connectedRef = FirebaseDatabase.getInstance().getReference(\".info/connected\")\nvar connectListener : ValueEventListener? = null\n\nfun checkConnection() {\n    connectListener = connectedRef.addValueEventListener(object : ValueEventListener {\n        override fun onDataChange(snapshot: DataSnapshot) {\n            val connected = snapshot.getValue(Boolean::class.java)!!\n            if (connected) {\n                Log.d(\"FRAG\", \"CONNECTED\")\n            else{\n                Log.d(\"FRAG\", \"DISCONNECTED\")\n            }\n        }\n\n        override\n        fun onCancelled(error: DatabaseError) {\n            System.err.println(\"Listener was cancelled\")\n        }\n    })\n}\n\noverride fun onDetach() {\n    super.onDetach()\n    if (connectListener != null){\n        connectedRef.removeEventListener(connectListener)\n    }\n}\n</code></pre>\n\n<p>How can I make sure I maintain or create a new connection to Firebase? I call the <code>checkConnection</code> method every <code>onAttach</code> of a fragment and <code>onStart</code> of an activity.</p>\n"}, {"tags": ["android", "kotlin", "sugarorm"], "comments": [{"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520263934, "post_id": 49113922, "comment_id": 85232795, "body": "Full stack trace?"}, {"owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "reply_to_user": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264002, "post_id": 49113922, "comment_id": 85232843, "body": "just exact cause of exception"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264255, "post_id": 49113922, "comment_id": 85233031, "body": "Is that your full stack trace from Logcat?"}, {"owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "reply_to_user": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264356, "post_id": 49113922, "comment_id": 85233096, "body": "noo, it is just snippet of full stack trace"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264417, "post_id": 49113922, "comment_id": 85233132, "body": "Post the full stack trace please"}, {"owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "reply_to_user": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264440, "post_id": 49113922, "comment_id": 85233151, "body": "I updated my question"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264526, "post_id": 49113922, "comment_id": 85233215, "body": "Where are you doing this bit of code? You are taking into account the application lifecycle right?          <code>val advertiser = Advertiser(&quot;123123&quot;, &quot;test advertiser&quot;)         advertiser.save()</code>"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264631, "post_id": 49113922, "comment_id": 85233294, "body": "Also, possible duplicate:  <a href=\"https://stackoverflow.com/questions/30660601/attempt-to-invoke-virtual-method-com-orm-database-com-orm-sugarapp-getdatabase\" title=\"attempt to invoke virtual method com orm database com orm sugarapp getdatabase\">stackoverflow.com/questions/30660601/&hellip;</a>"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264661, "post_id": 49113922, "comment_id": 85233321, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30660601/attempt-to-invoke-virtual-method-com-orm-database-com-orm-sugarapp-getdatabase\">Attempt to invoke virtual method &#39;com.orm.Database com.orm.SugarApp.getDatabase()&#39; on a null object referenc</a>"}, {"owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "reply_to_user": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1520264699, "post_id": 49113922, "comment_id": 85233348, "body": "I edited my question again, look"}], "answers": [{"comments": [{"owner": {"reputation": 5619, "user_id": 608312, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/OGtxB.jpg?s=128&g=1", "display_name": "Jake Lee", "link": "https://stackoverflow.com/users/608312/jake-lee"}, "edited": false, "score": 0, "creation_date": 1526310619, "post_id": 49114205, "comment_id": 87683446, "body": "Note you can also make your application class extend SugarApp if you don&#39;t want to give up your <code>name</code> attribute."}], "tags": [], "owner": {"reputation": 4293, "user_id": 4069913, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100007329305829/picture?type=large", "display_name": "Orest Savchak", "link": "https://stackoverflow.com/users/4069913/orest-savchak"}, "is_accepted": true, "score": 1, "last_activity_date": 1520264708, "creation_date": 1520264708, "answer_id": 49114205, "question_id": 49113922, "link": "https://stackoverflow.com/questions/49113922/sugar-orm-cant-save-in-kotlin/49114205#49114205", "title": "Sugar ORM can&#39;t save in Kotlin", "body": "<p>Your application should be <code>SugarApp</code> in <code>AndroidManifest.xml</code>.</p>\n\n<pre><code>&lt;application android:name=\"com.orm.SugarApp\"\n...\n&lt;/application&gt;\n</code></pre>\n"}], "owner": {"reputation": 2466, "user_id": 3179389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf1Kf.jpg?s=128&g=1", "display_name": "godot", "link": "https://stackoverflow.com/users/3179389/godot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 49114205, "answer_count": 1, "score": 1, "last_activity_date": 1520264950, "creation_date": 1520263859, "last_edit_date": 1520264950, "question_id": 49113922, "link": "https://stackoverflow.com/questions/49113922/sugar-orm-cant-save-in-kotlin", "title": "Sugar ORM can&#39;t save in Kotlin", "body": "<p>I have a class which extends <code>SugarRecord</code>, here is it:</p>\n\n<pre><code>class Advertiser : SugarRecord&lt;Advertiser&gt; {\n    var number: String? = null\n    var name: String? = null\n\n    constructor() {}\n\n    constructor(number: String, name: String) {\n        this.number = number\n        this.name = name\n    }\n}\n</code></pre>\n\n<p>I have sugar metadata in manifest: </p>\n\n<pre><code>    &lt;meta-data android:name=\"DATABASE\" android:value=\"sugar_example.db\" /&gt;\n    &lt;meta-data android:name=\"VERSION\" android:value=\"2\" /&gt;\n    &lt;meta-data android:name=\"QUERY_LOG\" android:value=\"true\" /&gt;\n    &lt;meta-data android:name=\"DOMAIN_PACKAGE_NAME\" android:value=\"com.example\" /&gt;\n</code></pre>\n\n<p>I'm trying to create new instance of <code>Advertiser</code> and save it in <code>MainActivity.kt</code>:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val advertiser = Advertiser(\"123123\", \"test advertiser\")\n        advertiser.save()\n\n\n\n\n\n    }\n}\n</code></pre>\n\n<p>but I'm getting exception, here is stack trace:</p>\n\n<blockquote>\n  <p>FATAL EXCEPTION: main\n                                                                           Process: ge.ketili.team.blocksms, PID: 22305\n                                                                           java.lang.RuntimeException: Unable to start activity\n  ComponentInfo{ge.ketili.team.blocksms/ge.ketili.team.blocksms.MainActivity}:\n  java.lang.NullPointerException: Attempt to invoke virtual method\n  'com.orm.Database com.orm.SugarApp.getDatabase()' on a null object\n  reference\n                                                                               at\n  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2706)\n                                                                               at\n  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2767)\n                                                                               at android.app.ActivityThread.-wrap12(ActivityThread.java)\n                                                                               at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1514)\n                                                                               at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                                               at android.os.Looper.loop(Looper.java:163)\n                                                                               at android.app.ActivityThread.main(ActivityThread.java:6205)\n                                                                               at java.lang.reflect.Method.invoke(Native Method)\n                                                                               at\n  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)\n                                                                               at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\n                                                                            Caused by: java.lang.NullPointerException: Attempt to invoke virtual\n  method 'com.orm.Database com.orm.SugarApp.getDatabase()' on a null\n  object reference\n                                                                               at com.orm.SugarRecord.save(SugarRecord.java:45)\n                                                                               at ge.ketili.team.blocksms.MainActivity.onCreate(MainActivity.kt:15)\n                                                                               at android.app.Activity.performCreate(Activity.java:6864)\n                                                                               at\n  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\n                                                                               at\n  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2659)</p>\n</blockquote>\n"}, {"tags": ["java", "android", "xml", "kotlin", "android-navigation-bar"], "comments": [{"owner": {"reputation": 426, "user_id": 8021959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Gyyj.jpg?s=128&g=1", "display_name": "Jo&#227;o Alvares Neto", "link": "https://stackoverflow.com/users/8021959/jo%c3%a3o-alvares-neto"}, "edited": false, "score": 0, "creation_date": 1520261638, "post_id": 49112982, "comment_id": 85231220, "body": "you could start your activity with the items with visible= &quot;gone&quot; and show only the ones you want in your if. So instead of the items disappearing, they will pop up"}], "answers": [{"tags": [], "owner": {"reputation": 1578, "user_id": 6003161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4baeef3d0ff8d4dec06271c9b0125922?s=128&d=identicon&r=PG&f=1", "display_name": "Pants", "link": "https://stackoverflow.com/users/6003161/pants"}, "is_accepted": false, "score": 0, "last_activity_date": 1520268068, "creation_date": 1520268068, "answer_id": 49115343, "question_id": 49112982, "link": "https://stackoverflow.com/questions/49112982/add-an-item-in-bottom-navigation-bar/49115343#49115343", "title": "Add an item in bottom navigation bar", "body": "<p>This sounds like a race condition. <br>\nWhat you can do is block the drawing of the navigation menu or the entire screen until after you get a response from the API. This just means your app will take half a second longer to launch. <br></p>\n"}, {"tags": [], "owner": {"reputation": 2164, "user_id": 4006222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uat4p.png?s=128&g=1", "display_name": "Seop Yoon", "link": "https://stackoverflow.com/users/4006222/seop-yoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1520298045, "creation_date": 1520298045, "answer_id": 49121861, "question_id": 49112982, "link": "https://stackoverflow.com/questions/49112982/add-an-item-in-bottom-navigation-bar/49121861#49121861", "title": "Add an item in bottom navigation bar", "body": "<p>Instead of using a static menu.xml file, what you can do is dynamically add menus that suits your condition.  </p>\n\n<p>Perhaps, this link may help: <a href=\"https://stackoverflow.com/questions/43084085/inflate-bottom-navigation-view-menu-programmatically\">Inflate Bottom Navigation View menu programmatically</a> </p>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 1, "last_activity_date": 1520328117, "creation_date": 1520328117, "answer_id": 49127299, "question_id": 49112982, "link": "https://stackoverflow.com/questions/49112982/add-an-item-in-bottom-navigation-bar/49127299#49127299", "title": "Add an item in bottom navigation bar", "body": "<p>First, thanks everyone for helping me.</p>\n\n<p>I tried both methods and they work perfectly : Hide the navigation bar with</p>\n\n<pre><code>bottomNavigationMenu?.visibility = View.GONE\n</code></pre>\n\n<p>just after bottomNavigationMenu declaration, and then set</p>\n\n<pre><code>bottomNavigationMenu?.visibility = View.VISIBLE\n</code></pre>\n\n<p>just after API response.</p>\n\n<p>The method which create dynamically an item works too, here is how</p>\n\n<pre><code> bottomNavigationMenu?.menu?.add(Menu.NONE, 1, Menu.NONE, \"TEST\")?.setIcon(R.drawable.ic_home)\n</code></pre>\n\n<p>Here is what the man tell about the add fun (from <a href=\"https://developer.android.com/reference/android/view/Menu.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/view/Menu.html</a> ; ctrl + f \"add\" 43) :</p>\n\n<p>groupId int: The group identifier that this item should be part of. This can be used to define groups of items for batch state changes. Normally use NONE if an item should not be in a group.</p>\n\n<p>itemId  int: Unique item ID. Use NONE if you do not need a unique ID.</p>\n\n<p>order   int: The order for the item. Use NONE if you do not care about the \norder. See getOrder().</p>\n\n<p>title   CharSequence: The text to display for the item.</p>\n\n<p>Thanks everyone for helping !</p>\n"}], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1520328117, "creation_date": 1520261007, "last_edit_date": 1520261301, "question_id": 49112982, "link": "https://stackoverflow.com/questions/49112982/add-an-item-in-bottom-navigation-bar", "title": "Add an item in bottom navigation bar", "body": "<p>I am trying to add an item in a bottom menu navigation bar according to a var got from an API.</p>\n\n<p>I am able to delete an item from this navigation bar, like this :</p>\n\n<pre><code>if (restaurant.acceptsBookings == false) {\n    bottom_navigation_view.menu.removeItem(R.id.bottom_menu_book)\n}\n</code></pre>\n\n<p>The problem is, when I am launching my app, we can see the icon during like, half of a second, then it disappears.</p>\n\n<p>This is not that bad, but I was hoping there is  a better and neater way to do this ; for example by adding the elements in an empty navigation bar, instead of removing them.</p>\n\n<p>Here is my navigation bar xml code :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item\n        android:id=\"@+id/bottom_menu_home\"\n        android:enabled=\"true\"\n        android:title=\"@string/bottom_menu_home\"\n        android:icon=\"@drawable/ic_home\"\n        app:showAsAction=\"ifRoom\" /&gt;\n    &lt;item\n        android:id=\"@+id/bottom_menu_menu\"\n        android:enabled=\"true\"\n        android:icon=\"@drawable/ic_menu\"\n        android:title=\"@string/bottom_menu_menu\"\n        app:showAsAction=\"ifRoom\" /&gt;\n    &lt;item\n        android:id=\"@+id/bottom_menu_profile\"\n        android:enabled=\"true\"\n        android:title=\"@string/bottom_menu_profile\"\n        android:icon=\"@drawable/ic_user\"\n        app:showAsAction=\"ifRoom\" /&gt;\n    &lt;item\n        android:id=\"@+id/bottom_menu_book\"\n        android:enabled=\"true\"\n        android:icon=\"@android:drawable/ic_menu_my_calendar\"\n        android:title=\"@string/bottom_menu_bookings\"\n        app:showAsAction=\"ifRoom\" /&gt;\n    &lt;item\n        android:id=\"@+id/bottom_menu_fidelity\"\n        android:enabled=\"true\"\n        android:icon=\"@drawable/giftgrey2\"\n        android:title=\"@string/bottom_menu_fidelity\"\n        app:showAsAction=\"ifRoom\" /&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>Do someone have a solution for this ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1520262088, "post_id": 49113053, "comment_id": 85231559, "body": "that&#39;s it. Thanks! I actually ignored that function, because it doesn&#39;t  return Pairs. I wasn&#39;t aware of destructuring for Lists, though. :-)"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 8, "last_activity_date": 1520261249, "creation_date": 1520261249, "answer_id": 49113053, "question_id": 49112964, "link": "https://stackoverflow.com/questions/49112964/kotlin-zip-only-every-second-element/49113053#49113053", "title": "Kotlin Zip only every second element", "body": "<p>The <a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#windowed-chunked-zipwithnext\" rel=\"noreferrer\">chunked function</a> in Kotlin 1.2 does exactly what you need:</p>\n\n<pre><code>val list = listOf(\"a\", 1, \"b\", 2)\nval newList = list.chunked(2)  // returns listOf(listOf(\"a\", 1), listOf(\"b\", 2))\n</code></pre>\n"}], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 49113053, "answer_count": 1, "score": 3, "last_activity_date": 1520261249, "creation_date": 1520260957, "question_id": 49112964, "link": "https://stackoverflow.com/questions/49112964/kotlin-zip-only-every-second-element", "title": "Kotlin Zip only every second element", "body": "<p>I have a <code>List</code> and I basically want to zip it, but only every second entry.  </p>\n\n<p>What I mean is: I want my List <code>[a,1,b,2]</code> to become <code>[(a,1),(b,2)]</code>, \nI currently use <code>zipWith</code>.<br>\nBut it does not give me the expected result, it gives me <code>[(a,1),(1,b),(b,2)]</code>.</p>\n\n<p>Am I being completely stupid right now, or is there no other solution than just ignore every second tuple? (e.g. by adding a <code>filter</code> afterwards) Is there no operator for that?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "android-coordinatorlayout"], "comments": [{"owner": {"reputation": 639, "user_id": 8325853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k92o4j_aV30/AAAAAAAAAAI/AAAAAAAAACE/P-4zb3YfHJ8/photo.jpg?sz=128", "display_name": "Tushar Lathiya", "link": "https://stackoverflow.com/users/8325853/tushar-lathiya"}, "edited": false, "score": 5, "creation_date": 1527855226, "post_id": 49112190, "comment_id": 88296437, "body": "just add <b>implementation &#39;com.android.support:design:27.1.1&#39;</b> in gradle file"}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "reply_to_user": {"reputation": 639, "user_id": 8325853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k92o4j_aV30/AAAAAAAAAAI/AAAAAAAAACE/P-4zb3YfHJ8/photo.jpg?sz=128", "display_name": "Tushar Lathiya", "link": "https://stackoverflow.com/users/8325853/tushar-lathiya"}, "edited": false, "score": 1, "creation_date": 1532513521, "post_id": 49112190, "comment_id": 90001006, "body": "@TusharLathiya I have a similar problem but downgrading has worked for me. I am using version 27.0.0"}, {"owner": {"reputation": 1, "user_id": 10241180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qDj7pPym4Rk/AAAAAAAAAAI/AAAAAAAAAKM/bU6Uc1mG-5U/photo.jpg?sz=128", "display_name": "Aswini Iyer", "link": "https://stackoverflow.com/users/10241180/aswini-iyer"}, "edited": false, "score": 0, "creation_date": 1541580731, "post_id": 49112190, "comment_id": 93266994, "body": "If you ever had installed firebase-ui in app dependency, this can occur.. I spent hell a lot of time to figure this out! I never need firebase-ui as i was using picasso to retrieve images from firebase storage."}], "answers": [{"comments": [{"owner": {"reputation": 14959, "user_id": 355456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7da0a69f5ee1cf4fc8512f5ff14f4111?s=128&d=identicon&r=PG&f=1", "display_name": "Hong", "link": "https://stackoverflow.com/users/355456/hong"}, "edited": false, "score": 2, "creation_date": 1522471715, "post_id": 49123910, "comment_id": 86176732, "body": "Works for me. This problem occurred after a library started to use 27.1.0 while the app was still using 26.x.x."}, {"owner": {"reputation": 481, "user_id": 3147737, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/YHlHB.jpg?s=128&g=1", "display_name": "f3d0r", "link": "https://stackoverflow.com/users/3147737/f3d0r"}, "edited": false, "score": 0, "creation_date": 1533067674, "post_id": 49123910, "comment_id": 90208028, "body": "Cleaning/rebuilding the project might help if it doesn&#39;t fix the issue immediately. That&#39;s what worked for me."}, {"owner": {"reputation": 2491, "user_id": 1823043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rMpr2.jpg?s=128&g=1", "display_name": "eranda.del", "link": "https://stackoverflow.com/users/1823043/eranda-del"}, "edited": false, "score": 0, "creation_date": 1555655809, "post_id": 49123910, "comment_id": 98190761, "body": "Mostly such errors occured due to version incompatibility. If using appcompat, design libraries better to use latest versions.        Example : implementation &#39;com.android.support:appcompat-v7:27.1.1&#39; implementation &#39;com.android.support:design:27.1.1&#39;"}, {"owner": {"reputation": 156, "user_id": 9148371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-LkQkYzA-Q3g/AAAAAAAAAAI/AAAAAAAAATw/VknNhXQwpTs/photo.jpg?sz=128", "display_name": "Priyanka Singhal", "link": "https://stackoverflow.com/users/9148371/priyanka-singhal"}, "edited": false, "score": 0, "creation_date": 1586850232, "post_id": 49123910, "comment_id": 108271934, "body": "Hi, Can you please help me out as i used this library for adding Image in PDF <a href=\"https://github.com/TomRoush/PdfBox-Android/issues/219\" rel=\"nofollow noreferrer\">github.com/TomRoush/PdfBox-Android/issues/219</a>  and i am getting this error  Program type already present: org.spongycastle.cert.AttributeCertificateHolder  What am i doing wrong?"}, {"owner": {"reputation": 740, "user_id": 3962551, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d112f36024be638be6557dd82712f573?s=128&d=identicon&r=PG", "display_name": "Logan Guo", "link": "https://stackoverflow.com/users/3962551/logan-guo"}, "edited": false, "score": 0, "creation_date": 1599222973, "post_id": 49123910, "comment_id": 112715346, "body": "use <code>.&#47;gradlew -q yourApp:dependencies --configuration debugRuntimeClasspath</code> to check duplicate dependencies. Make sure not depend on one lib with different versions."}], "tags": [], "owner": {"reputation": 880, "user_id": 3064394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/48fbn.jpg?s=128&g=1", "display_name": "Balaji Purusothaman", "link": "https://stackoverflow.com/users/3064394/balaji-purusothaman"}, "is_accepted": false, "score": 78, "last_activity_date": 1523948252, "last_edit_date": 1523948252, "creation_date": 1520313950, "answer_id": 49123910, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/49123910#49123910", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I faced the same problem, \nI added android support design dependencies to the app level <code>build.gradle</code></p>\n\n<p><strong>Add following:</strong></p>\n\n<pre><code>implementation 'com.android.support:design:27.1.0'\n</code></pre>\n\n<p>in build.gradle. Now its working for me. </p>\n"}, {"comments": [{"owner": {"reputation": 21361, "user_id": 523325, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hCF4v.png?s=128&g=1", "display_name": "Nguyen  Minh Binh", "link": "https://stackoverflow.com/users/523325/nguyen-minh-binh"}, "edited": false, "score": 45, "creation_date": 1526537430, "post_id": 49155448, "comment_id": 87784502, "body": "Once they publish new versions, they make us crazy because of weird errors. :|"}, {"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1528271613, "post_id": 49155448, "comment_id": 88438644, "body": "Actually it was pretty opposite in my case. <code>27.0.x</code> was failing, while bumping to <code>27.1.0</code> made project compile... meh..."}, {"owner": {"reputation": 22527, "user_id": 3198804, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/roYbX.jpg?s=128&g=1", "display_name": "Milad", "link": "https://stackoverflow.com/users/3198804/milad"}, "edited": false, "score": 2, "creation_date": 1528291680, "post_id": 49155448, "comment_id": 88451664, "body": "change it to <code>compile &#39;com.android.support:design:27.1.0&#39;</code> in the new versions"}, {"owner": {"reputation": 1001, "user_id": 5658251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snphfvZWF0s/AAAAAAAAAAI/AAAAAAAAEMU/VcbwF479mRE/photo.jpg?sz=128", "display_name": "Eswar", "link": "https://stackoverflow.com/users/5658251/eswar"}, "edited": false, "score": 0, "creation_date": 1532513639, "post_id": 49155448, "comment_id": 90001084, "body": "@AnkitMehta I have a similar problem and downgrading hasn&#39;t worked for me."}, {"owner": {"reputation": 4141, "user_id": 5129039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hrN8V.png?s=128&g=1", "display_name": "Ankit Mehta", "link": "https://stackoverflow.com/users/5129039/ankit-mehta"}, "edited": false, "score": 0, "creation_date": 1532585087, "post_id": 49155448, "comment_id": 90031579, "body": "try adding support design dependency."}, {"owner": {"reputation": 481, "user_id": 3147737, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/YHlHB.jpg?s=128&g=1", "display_name": "f3d0r", "link": "https://stackoverflow.com/users/3147737/f3d0r"}, "edited": false, "score": 0, "creation_date": 1533067690, "post_id": 49155448, "comment_id": 90208039, "body": "Add the design dependency and cleaning/rebuilding the project might help if it doesn&#39;t fix the issue immediately. That&#39;s what worked for me."}, {"owner": {"reputation": 1832, "user_id": 5746918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCq4A.jpg?s=128&g=1", "display_name": "Ishita Sinha", "link": "https://stackoverflow.com/users/5746918/ishita-sinha"}, "edited": false, "score": 0, "creation_date": 1533201791, "post_id": 49155448, "comment_id": 90263351, "body": "Thank you! Adding the design lib did it for me! :)"}, {"owner": {"reputation": 347, "user_id": 7888028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hPBFo5C8fEU/AAAAAAAAAAI/AAAAAAAAADU/Q6-CKBMLJsE/photo.jpg?sz=128", "display_name": "Ayejuni Ilemobayo Kings", "link": "https://stackoverflow.com/users/7888028/ayejuni-ilemobayo-kings"}, "edited": false, "score": 0, "creation_date": 1537381848, "post_id": 49155448, "comment_id": 91768014, "body": "Thanks a lot, this solves my issue, i simply up date my compileSDK version to 27 and other dependencies."}, {"owner": {"reputation": 156, "user_id": 9148371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-LkQkYzA-Q3g/AAAAAAAAAAI/AAAAAAAAATw/VknNhXQwpTs/photo.jpg?sz=128", "display_name": "Priyanka Singhal", "link": "https://stackoverflow.com/users/9148371/priyanka-singhal"}, "edited": false, "score": 0, "creation_date": 1586850135, "post_id": 49155448, "comment_id": 108271897, "body": "Hi, Can you please help me out as i used this library for adding Image in PDF <a href=\"https://github.com/TomRoush/PdfBox-Android/issues/219\" rel=\"nofollow noreferrer\">github.com/TomRoush/PdfBox-Android/issues/219</a>  and i am getting this error  Program type already present: org.spongycastle.cert.AttributeCertificateHolder  What am i doing wrong?"}], "tags": [], "owner": {"reputation": 4141, "user_id": 5129039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hrN8V.png?s=128&g=1", "display_name": "Ankit Mehta", "link": "https://stackoverflow.com/users/5129039/ankit-mehta"}, "is_accepted": true, "score": 214, "last_activity_date": 1532074541, "last_edit_date": 1532074541, "creation_date": 1520436090, "answer_id": 49155448, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/49155448#49155448", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>It worked when I downgrade the support <code>appcompat</code> gradle dependency, like follwing :</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.0.2'\n</code></pre>\n\n<p>previously it was     </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.1.0'\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>Also this can be fixed by just <strong><em>adding support design dependency</em></strong>\nof version 27.1.0 or above to your app level <code>build.gradle</code> as following : </p>\n\n<pre><code>implementation 'com.android.support:design:27.1.0'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 796, "user_id": 3183912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K0t9E.jpg?s=128&g=1", "display_name": "Trinity", "link": "https://stackoverflow.com/users/3183912/trinity"}, "edited": false, "score": 1, "creation_date": 1523885443, "post_id": 49716187, "comment_id": 86731812, "body": "I&#39;m still facing some erros like: <code>Error:Program type already present: org.apache.http.impl.auth.HttpEntityDigester</code>"}, {"owner": {"reputation": 17868, "user_id": 1254536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gjcOu.jpg?s=128&g=1", "display_name": "LOG_TAG", "link": "https://stackoverflow.com/users/1254536/log-tag"}, "reply_to_user": {"reputation": 796, "user_id": 3183912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K0t9E.jpg?s=128&g=1", "display_name": "Trinity", "link": "https://stackoverflow.com/users/3183912/trinity"}, "edited": false, "score": 0, "creation_date": 1530089449, "post_id": 49716187, "comment_id": 89107007, "body": "implementation &#39;com.android.support:design:27.1.0 add this <a href=\"https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/49155448\" title=\"error program type already present android support design widget coordinatorl\">stackoverflow.com/questions/49112190/&hellip;</a>"}], "tags": [], "owner": {"reputation": 17868, "user_id": 1254536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gjcOu.jpg?s=128&g=1", "display_name": "LOG_TAG", "link": "https://stackoverflow.com/users/1254536/log-tag"}, "is_accepted": false, "score": 12, "last_activity_date": 1528271795, "last_edit_date": 1528271795, "creation_date": 1523177951, "answer_id": 49716187, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/49716187#49716187", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Use the latest <code>supportLibrary</code>, version <code>27.1.1</code> to solve the problem. worked for me. (many bug fixes included - <a href=\"https://developer.android.com/topic/libraries/support-library/revisions.html#27-1-1\" rel=\"noreferrer\">see changelog</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9960433, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9cb1f9246ff5de483f78ed43bcff73ac?s=128&d=identicon&r=PG", "display_name": "Steve White", "link": "https://stackoverflow.com/users/9960433/steve-white"}, "is_accepted": false, "score": -1, "last_activity_date": 1529392278, "creation_date": 1529392278, "answer_id": 50922532, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/50922532#50922532", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Changed all dependencies to compile rather than implementation, then I rebuild the project without errors. Then I switched back to implementation rather than leaving it as compile. </p>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 9985458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5177d376c59cf9e0bea21e277647c7?s=128&d=identicon&r=PG&f=1", "display_name": "Deven", "link": "https://stackoverflow.com/users/9985458/deven"}, "is_accepted": false, "score": 6, "last_activity_date": 1541490250, "last_edit_date": 1541490250, "creation_date": 1530061265, "answer_id": 51053166, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51053166#51053166", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Use </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.1.1'\n</code></pre>\n\n<p>Don't use like </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.+'\n</code></pre>\n\n<p>It may give you an error and don't use an older version than this.</p>\n\n<p>or event don't do like this</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.1.1'\nimplementation 'com.android.support:design:27.1.1' \n</code></pre>\n\n<p>etc... numbers of libraries and then </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.+'\n</code></pre>\n\n<p>the same library but it has a different version, it can give you an error.</p>\n"}, {"tags": [], "owner": {"reputation": 1164, "user_id": 7445389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s4ffATDogr4/AAAAAAAAAAI/AAAAAAAARz4/-nYozKzogbo/photo.jpg?sz=128", "display_name": "amit pandya", "link": "https://stackoverflow.com/users/7445389/amit-pandya"}, "is_accepted": false, "score": 0, "last_activity_date": 1530089210, "last_edit_date": 1530089210, "creation_date": 1530084744, "answer_id": 51056982, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51056982#51056982", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>As android latest update doesn't support 'compile' keyword use 'implementation' in place inside your module <strong>build.gradle</strong> file.</p>\n\n<p>And check thoroughly in build.gradle for dependancy with <strong>+</strong> sign like this.</p>\n\n<pre><code>implementation 'com.android.support:support-v4:28.+'\n</code></pre>\n\n<p>If there are any dependencies like this, just update them with a specific version.\nAfter that:</p>\n\n<ol>\n<li>Sync gradle.</li>\n<li>Clean your project.</li>\n<li>Rebuild the project.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 6764161, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-BScG2eXod70/AAAAAAAAAAI/AAAAAAAACLg/n8o7u0LM2HU/photo.jpg?sz=128", "display_name": "KhanStan99", "link": "https://stackoverflow.com/users/6764161/khanstan99"}, "edited": false, "score": 1, "creation_date": 1531308977, "post_id": 51095720, "comment_id": 89546106, "body": "I have added this line to all 3 of my dependencies i have used. It resolved my error. Thanks."}], "tags": [], "owner": {"reputation": 8612, "user_id": 8874958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39990cd5d2bd537729f7b2b7a1a724a7?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Solanki", "link": "https://stackoverflow.com/users/8874958/kishan-solanki"}, "is_accepted": false, "score": 32, "last_activity_date": 1530254436, "creation_date": 1530254436, "answer_id": 51095720, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51095720#51095720", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>It might be cause of a library, I faced it because of Glide.</p>\n\n<p>It was</p>\n\n<pre><code>implementation 'com.github.bumptech.glide:glide:4.7.1'\n</code></pre>\n\n<p>So I added <code>exclude group: \"com.android.support\"</code> And it becomes</p>\n\n<pre><code>implementation ('com.github.bumptech.glide:glide:4.7.1') {\n        exclude group: \"com.android.support\"\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "edited": false, "score": 1, "creation_date": 1533579695, "post_id": 51383699, "comment_id": 90388440, "body": "it doesn&#180;t help :("}], "tags": [], "owner": {"reputation": 699, "user_id": 6215388, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131913153510219/picture?type=large", "display_name": "Ssubrat Rrudra", "link": "https://stackoverflow.com/users/6215388/ssubrat-rrudra"}, "is_accepted": false, "score": 0, "last_activity_date": 1531836977, "creation_date": 1531836977, "answer_id": 51383699, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51383699#51383699", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>If any of the answers mentioned here doesn't work then go to File > Invalidate Catches/Restart</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 10108803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5799f57202c781ff712f927c2a053a?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruvisha", "link": "https://stackoverflow.com/users/10108803/dhruvisha"}, "is_accepted": false, "score": 6, "last_activity_date": 1532063038, "creation_date": 1532063038, "answer_id": 51435382, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51435382#51435382", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I m using android studio 3.0 \nand i upgrade the design pattern dependency from 26.0.1 to 27.1.1 and the error is gone now.</p>\n\n<p><strong>Add Following in gradle</strong>\n<code>implementation 'com.android.support:design:27.1.1'</code></p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 8043271, "user_type": "registered", "profile_image": "https://graph.facebook.com/1653200164708184/picture?type=large", "display_name": "James Idowu", "link": "https://stackoverflow.com/users/8043271/james-idowu"}, "is_accepted": false, "score": 14, "last_activity_date": 1533031255, "creation_date": 1533031255, "answer_id": 51610701, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/51610701#51610701", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Make sure these two are the same version in your app level build.gradle file</p>\n\n<pre><code>    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:design:27.1.1'\n</code></pre>\n\n<p>I think that should solve the problem</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10199366, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Cd6Nx1fSdVk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oh-opBVdguxSdMU4bg8DLi829EYw/mo/photo.jpg?sz=128", "display_name": "\u0645\u062d\u0645\u062f", "link": "https://stackoverflow.com/users/10199366/%d9%85%d8%ad%d9%85%d8%af"}, "is_accepted": false, "score": 2, "last_activity_date": 1535948800, "creation_date": 1535948800, "answer_id": 52143145, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/52143145#52143145", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I had this problem too; and i resolved that in this way:</p>\n\n<pre><code>configurations.all {\nresolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;\n    def requested = details.requested\n    if (requested.group == 'com.android.support') {\n        if (!requested.name.startsWith(\"multidex\")) {\n            details.useVersion '26.0.1'\n        }\n    }\n  }\n}\n</code></pre>\n\n<p>be careful my min SDk was 26 , you have to change it with yours!</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 9836252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZnBT.jpg?s=128&g=1", "display_name": "Pradeep Sheoran", "link": "https://stackoverflow.com/users/9836252/pradeep-sheoran"}, "is_accepted": false, "score": 0, "last_activity_date": 1536663571, "creation_date": 1536663571, "answer_id": 52274368, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/52274368#52274368", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>The solution for this is that remove this following dependency:</p>\n\n<pre><code>implementation 'com.android.support:design:26.1.0'\n</code></pre>\n\n<p>put general dependencies as:</p>\n\n<pre><code>dependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    //noinspection GradleCompatible\n    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:support-compat:26.1.0'\n    implementation 'com.android.support:multidex:1.0.3'    \n    implementation 'com.android.support:support-v4:26.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    implementation 'com.facebook.android:audience-network-sdk:4.99.1'\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 7231559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZzfC8.jpg?s=128&g=1", "display_name": "raed", "link": "https://stackoverflow.com/users/7231559/raed"}, "is_accepted": false, "score": 1, "last_activity_date": 1540998193, "creation_date": 1540998193, "answer_id": 53086438, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/53086438#53086438", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I know it's a late answer but I had the same problem and my solution was just adding <code>implementation 'com.android.support:design:28.0.0</code> or any above support design libraries !!</p>\n"}, {"comments": [{"owner": {"reputation": 1586, "user_id": 2890156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OZqtc.jpg?s=128&g=1", "display_name": "Denny", "link": "https://stackoverflow.com/users/2890156/denny"}, "edited": false, "score": 7, "creation_date": 1543528539, "post_id": 53313310, "comment_id": 93962946, "body": "Seems more like an upgrade if you go from 27.0.2 to 27.1.0"}], "tags": [], "owner": {"reputation": 7922, "user_id": 5316872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrQOX.jpg?s=128&g=1", "display_name": "Keshav Gera", "link": "https://stackoverflow.com/users/5316872/keshav-gera"}, "is_accepted": false, "score": 5, "last_activity_date": 1542261606, "creation_date": 1542261606, "answer_id": 53313310, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/53313310#53313310", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p><strong>I downgrade the support</strong> </p>\n\n<pre><code>previously it was\nimplementation 'com.android.support:appcompat-v7:27.0.2'\n</code></pre>\n\n<p><strong>Use it</strong></p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.1.0'\n\nimplementation 'com.android.support:design:27.1.0'\n</code></pre>\n\n<p><strong>Its Working Happy Codng</strong></p>\n"}, {"tags": [], "owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "is_accepted": false, "score": 4, "last_activity_date": 1543404647, "creation_date": 1543404647, "answer_id": 53518463, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/53518463#53518463", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<h1>Important Update</h1>\n\n<p>Android support libraries will not be updated after <code>28.0.0</code>. According to <a href=\"https://developer.android.com/topic/libraries/support-library/revisions\" rel=\"nofollow noreferrer\">Support Library Release Notes</a> - </p>\n\n<blockquote>\n  <p>This will be the last feature release under the android.support\n  packaging, and developers are encouraged to <a href=\"https://stackoverflow.com/a/52517772/6891563\">migrate to AndroidX 1.0.0</a>.</p>\n</blockquote>\n\n<p>So use <a href=\"https://developer.android.com/jetpack/androidx/\" rel=\"nofollow noreferrer\">AndroidX</a> support libraries instead. In your case design library is now available in material package.</p>\n\n<pre><code>dependencies {\n    implementation 'com.google.android.material:material:1.0.0' // instead of design\n    implementation 'androidx.appcompat:appcompat:1.0.2' // instead of support-v7\n}\n</code></pre>\n\n<p>I have put latest versions in dependency, you can <a href=\"https://dl.google.com/dl/android/maven2/index.html\" rel=\"nofollow noreferrer\">check latest version</a> here at read time.</p>\n\n<p>Useful Posts :</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/a/52517772/6891563\">AndroidX introduction &amp; integration</a></li>\n<li><a href=\"https://stackoverflow.com/a/52518822/6891563\">Learn about Jetifier (engine behind AndroidX migration)</a></li>\n<li><a href=\"https://stackoverflow.com/a/52555981/6891563\">Some Do's and Dont's</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 10065323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6bUZ-yP8VxY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o721Mc_Uz1-OK4JzNHcR-3SVdg7A/mo/photo.jpg?sz=128", "display_name": "J&#233;r&#244;me Legrand", "link": "https://stackoverflow.com/users/10065323/j%c3%a9r%c3%b4me-legrand"}, "is_accepted": false, "score": 9, "last_activity_date": 1543483885, "creation_date": 1543483885, "answer_id": 53535760, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/53535760#53535760", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Personally, I add the following line to my app/build.gradle:</p>\n\n<pre><code>implementation \"com.android.support:design:${rootProject.ext.supportLibVersion}\"\n</code></pre>\n\n<p>With this syntax, version is dynamical.</p>\n"}, {"tags": [], "owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548145572, "creation_date": 1548145572, "answer_id": 54304061, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/54304061#54304061", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Adding this to <strong>project's</strong> <code>gradle.properties</code> fixed it for us:</p>\n\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 3143487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6c6527ea4b3b8a3c3f39d3c64e0d62?s=128&d=identicon&r=PG&f=1", "display_name": "user3143487", "link": "https://stackoverflow.com/users/3143487/user3143487"}, "is_accepted": false, "score": 0, "last_activity_date": 1548919705, "creation_date": 1548919705, "answer_id": 54455367, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/54455367#54455367", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Your build script should match with application build.gradle dependencies.</p>\n\n<pre><code>ext {\n        buildToolsVersion = \"27.0.3\"\n        minSdkVersion = 16\n        compileSdkVersion = 27\n        targetSdkVersion = 26\n        supportLibVersion = \"27.1.1\"\n    }\n\n\ndependencies {\n    .................\n    ...................\n\n    implementation 'com.android.support:support-v4:27.1.0'\n    implementation 'com.android.support:design:27.1.0'\n    ................\n    ...........\n}\n</code></pre>\n\n<p>if you want to downgrade dependencies then also downgrade supportLibVersion and buildToolsVersion .</p>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 1017216, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c977600e3c59522b5f222d921c66d7a5?s=128&d=identicon&r=PG", "display_name": "Vitali Pom", "link": "https://stackoverflow.com/users/1017216/vitali-pom"}, "is_accepted": false, "score": 2, "last_activity_date": 1556224606, "creation_date": 1556224606, "answer_id": 55857250, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/55857250#55857250", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>\"Program type already exists\"\nRemove your /build directory contents, it has some Dex(?) problem with the generated binary files. Got to those answers just like you, they helped to resolve this problem but created many others. Build contents removal works for all.</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 6032911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDuR.jpg?s=128&g=1", "display_name": "Ankush Joshi", "link": "https://stackoverflow.com/users/6032911/ankush-joshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557373087, "creation_date": 1557373087, "answer_id": 56051820, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/56051820#56051820", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I also faced same problem.\nBut then I realised that the versions I am using of support libraries was not same.</p>\n\n<p>Once I made it same, the error gone.</p>\n\n<p>In your case </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.1.0'\nimplementation 'com.android.support:design:27.0.2'\n</code></pre>\n\n<p>are not same, so you just downgraded appcompat to </p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:27.0.2'\n</code></pre>\n\n<p>hence, your problem solved.</p>\n\n<p>But you could also have solved if you could have upgraded support design version to</p>\n\n<pre><code>implementation 'com.android.support:design:27.1.0'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 8350793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cedeb2102dc05671ff9d8fb6ebe39df?s=128&d=identicon&r=PG&f=1", "display_name": "BlackGraper", "link": "https://stackoverflow.com/users/8350793/blackgraper"}, "is_accepted": false, "score": 0, "last_activity_date": 1564583964, "creation_date": 1564583964, "answer_id": 57293343, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/57293343#57293343", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>Go to the directory where you put additional libraries and delete duplicated libraries.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 10553059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcadd2e86a76033cfc2e3e533a099235?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0413\u0430\u0432\u0440\u0438\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/10553059/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%93%d0%b0%d0%b2%d1%80%d0%b8%d0%bb%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1567690075, "creation_date": 1567690075, "answer_id": 57806594, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl/57806594#57806594", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>This can happens when one library is loaded into gradle several times. Most often through other connected libraries.</p>\n\n<p><strong>Remove a implementation</strong> this library in <strong>build.gradle</strong> </p>\n\n<p>Then <strong>Build</strong> -> <strong>Clear project</strong></p>\n\n<p>and you can run the assembly)</p>\n"}], "owner": {"reputation": 4141, "user_id": 5129039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hrN8V.png?s=128&g=1", "display_name": "Ankit Mehta", "link": "https://stackoverflow.com/users/5129039/ankit-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187480, "favorite_count": 19, "accepted_answer_id": 49155448, "answer_count": 22, "score": 130, "last_activity_date": 1567690075, "creation_date": 1520258552, "last_edit_date": 1554494123, "question_id": 49112190, "link": "https://stackoverflow.com/questions/49112190/error-program-type-already-present-android-support-design-widget-coordinatorl", "title": "Error : Program type already present: android.support.design.widget.CoordinatorLayout$Behavior", "body": "<p>I am getting the following error while building the project. haven't used CoordinatorLayout in this project. just added as a dependency in build.gradle : </p>\n\n<p>I am using Android Studio 3.2 Canary 4.</p>\n\n<p><strong>LogCat</strong></p>\n\n<blockquote>\n  <p>AGPBI: {\"kind\":\"error\",\"text\":\"Program type already present: android.support.design.widget.CoordinatorLayout$Behavior\",\"sources\":[{}],\"tool\":\"D8\"}\n  :app:transformDexArchiveWithExternalLibsDexMergerForDebug FAILED\n  FAILURE: Build failed with an exception.\n  * What went wrong:\n  Execution failed for task ':app:transformDexArchiveWithExternalLibsDexMergerForDebug'.</p>\n  \n  <p>com.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives: /windows/Other/app/build/intermediates/transforms/dexBuilder/debug/0.jar, /windows/Other/app/build/intermediates/transforms/dexBuilder/debug/1.jar, /windows/Other/app/build/intermediates/transforms/dexBuilder/debug/4.jar, \n   .\n  .\n  ...................</p>\n  \n  <p>/windows/Other/app/build/intermediates/transforms/dexBuilder/debug/294.jar</p>\n  \n  <p>Program type already present: android.support.design.widget.CoordinatorLayout$Behavior</p>\n</blockquote>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 27\n    buildToolsVersion \"27.0.3\"\n    defaultConfig {\n        applicationId \"com.dagkot\"\n        minSdkVersion 16\n        targetSdkVersion 27\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            buildConfigField \"String\", \"BASE_URL\", \"\\\"http://api.openweathermap.org/data/2.5/\\\"\"\n            buildConfigField \"String\", \"API_KEY\", \"\\\"435e9075f348868c2714fe7c6895efa5\\\"\"\n        }\n        debug {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        buildConfigField \"String\", \"BASE_URL\", \"\\\"http://api.openweathermap.org/data/2.5/\\\"\"\n        buildConfigField \"String\", \"API_KEY\", \"\\\"xxxx\\\"\"\n    }\n}\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:27.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation('com.android.support.test.espresso:espresso-core:3.0.1', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n\n    // Dagger dependencies\n    compileOnly 'org.glassfish:javax.annotation:10.0-b28'\n    implementation \"com.google.dagger:dagger:$rootProject.daggerVersion\"\n    implementation \"com.google.dagger:dagger-android:$rootProject.daggerVersion\"\n    implementation \"com.google.dagger:dagger-android-support:$rootProject.daggerVersion\"\n    kapt \"com.google.dagger:dagger-android-processor:$rootProject.daggerVersion\"\n    kapt \"com.google.dagger:dagger-compiler:$rootProject.daggerVersion\"\n\n    //Butterknife dependencies\n    implementation 'com.jakewharton:butterknife:8.8.1'\n    kapt 'com.jakewharton:butterknife-compiler:8.8.1'\n\n    // Architecture Components Dependencies\n    kapt \"android.arch.lifecycle:compiler:$rootProject.lifeCycle\"\n    implementation \"android.arch.lifecycle:extensions:$rootProject.lifeCycle\"\n    implementation \"android.arch.lifecycle:reactivestreams:$rootProject.lifeCycle\"\n    implementation \"com.android.support:cardview-v7:$rootProject.supportLibraryVersion\"\n\n    // Retrofit/RxJava Dependencies\n    implementation \"com.squareup.retrofit2:retrofit:$rootProject.retrofitVersion\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava2:$rootProject.retrofitVersion\"\n    implementation \"com.squareup.retrofit2:converter-gson:$rootProject.retrofitVersion\"\n    implementation \"io.reactivex.rxjava2:rxandroid:$rootProject.rxAndroidVersion\"\n    implementation 'com.squareup.okhttp3:logging-interceptor:3.6.0'\n    implementation 'com.jakewharton.rxbinding2:rxbinding-kotlin:2.1.1'\n\n    // GSON\n    implementation \"com.google.code.gson:gson:$rootProject.gsonVersion\"\n\n    // Rx Location Manager\n    implementation 'io.nlopez.smartlocation:library:3.3.3'\n    implementation 'io.nlopez.smartlocation:rx:3.3.1'\n\n    //Anko Dependencies\n    implementation \"org.jetbrains.anko:anko-commons:$rootProject.anko_version\"\n    implementation \"org.jetbrains.anko:anko-design:$rootProject.anko_version\"\n    implementation 'com.android.support:design:27.0.2'\n\n    implementation(\"com.github.hotchemi:permissionsdispatcher:3.1.0\") {\n        // if you don't use android.app.Fragment you can exclude support for them\n        exclude module: \"support-v13\"\n    }\n    kapt \"com.github.hotchemi:permissionsdispatcher-processor:3.1.0\"\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "data-class"], "answers": [{"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 6, "last_activity_date": 1520278690, "last_edit_date": 1520278690, "creation_date": 1520256731, "answer_id": 49111631, "question_id": 49111551, "link": "https://stackoverflow.com/questions/49111551/data-class-kotlin-to-java-class/49111631#49111631", "title": "Data class Kotlin to Java Class", "body": "<p>Instantiating a <code>data class</code> is not different from instatiating a \"normal\" Kotlin class.</p>\n\n<p>From your Java code, you instantiate it as if it were a Java class:</p>\n\n<pre><code>Item item = new Item(1L, 2L); \n</code></pre>\n\n<p>Just for reference, a <code>data class</code> is a <code>class</code> that automatically gets the following members (see <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">documentation here</a>):</p>\n\n<ul>\n<li><code>equals()</code>/<code>hashCode()</code> pair;</li>\n<li><code>toString()</code> of the form \"MyClass(field1=value1, field2=value2)\";</li>\n<li><p><code>componentN()</code> functions corresponding to the properties <strong>in their order of declaration</strong>; this can be useful for <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html#destructuring-declarations\" rel=\"nofollow noreferrer\">destructuring declarations</a>, such as:</p>\n\n<pre><code>data class Item(val val1: Long, val val2: Long)\n\nfun main(args: Array&lt;String&gt;) {\n    val item = Item(1L, 2L)\n    val (first, second) = item\n    println(\"$first, $second\")\n}\n</code></pre>\n\n<p>This will print: <code>1, 2</code></p></li>\n<li><p><code>copy()</code> function.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 4, "creation_date": 1520257194, "post_id": 49111723, "comment_id": 85228520, "body": "Don&#39;t need semicolons in your kotlin examples."}, {"owner": {"reputation": 192, "user_id": 9258121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdjZo.jpg?s=128&g=1", "display_name": "Mohammed Daoud", "link": "https://stackoverflow.com/users/9258121/mohammed-daoud"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1520348166, "post_id": 49111723, "comment_id": 85272105, "body": "Yes Semicolons are optional in Kotlin."}], "tags": [], "owner": {"reputation": 192, "user_id": 9258121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdjZo.jpg?s=128&g=1", "display_name": "Mohammed Daoud", "link": "https://stackoverflow.com/users/9258121/mohammed-daoud"}, "is_accepted": false, "score": 0, "last_activity_date": 1520257018, "creation_date": 1520257018, "answer_id": 49111723, "question_id": 49111551, "link": "https://stackoverflow.com/questions/49111551/data-class-kotlin-to-java-class/49111723#49111723", "title": "Data class Kotlin to Java Class", "body": "<p>Your data class will be like this :</p>\n\n<pre><code>       data class Item  (@PrimaryKey(autoGenerate = true) var var1: Long?,\n            @ColumnInfo(name =\"var1\") var var2: Long);\n</code></pre>\n\n<p>From Java you can create create object like this:</p>\n\n<pre><code>  Item item=new Item(1L,2L);\n   long firstValue=item.getVar1();\n   long secondValue=item.getVar2();\n</code></pre>\n\n<p>If you want to create instance in kotlin it will be like:</p>\n\n<pre><code>   val item=Item(1L,2L);\n    val firstValue:Long?=item.var1;\n    val secondValue:Long?=item.var2;\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5021819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a17b0aeb02fb130f1c0aa3d0131efdd?s=128&d=identicon&r=PG&f=1", "display_name": "Younes Ben Tlili", "link": "https://stackoverflow.com/users/5021819/younes-ben-tlili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6972, "favorite_count": 0, "accepted_answer_id": 49111631, "answer_count": 2, "score": 4, "last_activity_date": 1520278690, "creation_date": 1520256449, "question_id": 49111551, "link": "https://stackoverflow.com/questions/49111551/data-class-kotlin-to-java-class", "title": "Data class Kotlin to Java Class", "body": "<p>I have a kotlin data class and I'm trying to call it from Java method. </p>\n\n<pre><code>data class Item  (\n                @PrimaryKey(autoGenerate = true) var var1: Long? ,\n                @ColumnInfo(name =\"var1\") var var2: Long){}\n</code></pre>\n\n<p>From Java , I'm trying to save a list of Item so I need to instance Data class.  I don't understand how I can do it. </p>\n"}, {"tags": ["android", "mvvm", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520254159, "post_id": 49110791, "comment_id": 85226762, "body": "Please show your Kotlin code where the mInstance property is declared, initialized and accessed."}, {"owner": {"reputation": 812, "user_id": 5880384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0ddce52fc8022996df550b3d839e3a?s=128&d=identicon&r=PG&f=1", "display_name": "azsoftco", "link": "https://stackoverflow.com/users/5880384/azsoftco"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1520254407, "post_id": 49110791, "comment_id": 85226901, "body": "Here is the line where the test crash &quot;     init {        Application.mInstance.mComponent.inject(this)     } &quot; and the Application is an companion object wich extend  MultiDexApplication() , in that class, on onCreate() I initialize the dagger component"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1521108145, "post_id": 49110791, "comment_id": 85594829, "body": "You need to attach code by editing your question, not by posting an answer."}], "answers": [{"tags": [], "owner": {"reputation": 5552, "user_id": 20444, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d69f41ea8fd84eae4f5df6e9b9bd29?s=128&d=identicon&r=PG", "display_name": "activout.se", "link": "https://stackoverflow.com/users/20444/activout-se"}, "is_accepted": false, "score": 0, "last_activity_date": 1520281486, "creation_date": 1520281486, "answer_id": 49118847, "question_id": 49110791, "link": "https://stackoverflow.com/questions/49110791/junit-test-return-lateinit-property-nameofinstancehas-not-been-initialized-on/49118847#49118847", "title": "JUnit Test return lateinit property &lt;nameOfInstance&gt;has not been initialized on presenter", "body": "<p>I don't use Dagger for unit testing if I can avoid it because I want to control what's a mock, what's a spy, etc. </p>\n\n<p>You should not use any \"Application.mInstance\" with Dagger. It seems like you use Dagger before version 2.10 - you should upgrade to the latest and greatest! There is a whole section about Android on <a href=\"https://google.github.io/dagger/android\" rel=\"nofollow noreferrer\">https://google.github.io/dagger/android</a></p>\n\n<p>With Dagger 2.10 and upwards you can inherit from DaggerApplication and then use AndroidInjection.inject() for Activities and @Inject on the constructor for your own classes.</p>\n\n<pre><code>public class MyApplication extends DaggerApplication {\n\n    /**\n     * This is the same as extending from  MultiDexApplication.\n     * @see android.support.multidex.MultiDexApplication\n     */\n    @Override\n    protected void attachBaseContext(Context base) {\n        super.attachBaseContext(base);\n        MultiDex.install(this);\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        // ...\n    }\n\n    @Override\n    protected AndroidInjector&lt;? extends DaggerApplication&gt; applicationInjector() {\n        return DaggerAppComponent.builder().create(this);\n    }\n}\n</code></pre>\n\n<p>Your activities should look like this:</p>\n\n<pre><code>public class YourActivity extends Activity {\n  public void onCreate(Bundle savedInstanceState) {\n    AndroidInjection.inject(this);\n    super.onCreate(savedInstanceState);\n  }\n}\n</code></pre>\n\n<p>For testing of activities, maybe you should use a TestApplication instead of your real Application class? See <a href=\"https://android.jlelse.eu/testing-your-app-with-dagger-2-c91cdc0860fb\" rel=\"nofollow noreferrer\">https://android.jlelse.eu/testing-your-app-with-dagger-2-c91cdc0860fb</a> for some hints about that.</p>\n"}], "owner": {"reputation": 812, "user_id": 5880384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0ddce52fc8022996df550b3d839e3a?s=128&d=identicon&r=PG&f=1", "display_name": "azsoftco", "link": "https://stackoverflow.com/users/5880384/azsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2012, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521110823, "creation_date": 1520253795, "last_edit_date": 1521110823, "question_id": 49110791, "link": "https://stackoverflow.com/questions/49110791/junit-test-return-lateinit-property-nameofinstancehas-not-been-initialized-on", "title": "JUnit Test return lateinit property &lt;nameOfInstance&gt;has not been initialized on presenter", "body": "<p>I wanna t create a simple JUnit testing an the test return an error like </p>\n\n<blockquote>\n  <p>kotlin.UninitializedPropertyAccessException: lateinit property\n  mInstance has not been initialized</p>\n</blockquote>\n\n<p>my tests I will write in Java. Here is the test class. My presenter and all classes is written in <code>Kotlin</code> with <code>Dagger2</code> and <code>RxJava</code>.</p>\n\n<pre><code>public class PhoneNumberPresenterTest {\n\n    @Rule\n    public MockitoRule mockitoRule = MockitoJUnit.rule();\n\n    @Mock\n    private PhoneNumberContract.View view;\n\n    @Inject\n    private PhoneNumberPresenter phoneNumberPresenter;\n\n    @Before\n    public void setup() {\n        MockitoAnnotations.initMocks(this);\n        phoneNumberPresenter = new PhoneNumberPresenter(this.view);\n    }\n\n    @Test\n    public void fetchValidDataShouldLoadIntoView() {\n        SendCodeRequest request = new SendCodeRequest(anyString());\n        GenericResponse&lt;User&gt; response = new GenericResponse&lt;&gt;();\n\n        when(phoneNumberPresenter.mUserService.sendCode(request))\n                .thenReturn(Observable.just(response));\n\n    }\n}\n</code></pre>\n\n<p>In My Presenter I do that</p>\n\n<pre><code>class PhoneNumberPresenter() : PhoneNumberContract.Handler {\n\n    @Inject\n    lateinit var mUserService: UserService\n\n    init {\n        Application.mInstance.mComponent.inject(this)\n    }\n//.....\n   mUserService.sendPhoneNumber().....\n}\n</code></pre>\n\n<p>In AppComponent class that</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(HttpModule::class, AppModule::class))\n\ninterface AppComponent {\n    fun inject(presenter: PhoneNumberPresenter)\n}\n</code></pre>\n\n<p>And the error of test is that \"lateinit property mUserService has not been initialized\"</p>\n"}, {"tags": ["javascript", "kotlin", "create-react-app"], "comments": [{"owner": {"reputation": 4094, "user_id": 1178759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FtZkI.jpg?s=128&g=1", "display_name": "SaschaM78", "link": "https://stackoverflow.com/users/1178759/sascham78"}, "edited": false, "score": 0, "creation_date": 1520256713, "post_id": 49110196, "comment_id": 85228256, "body": "Welcome to Stack Overflow! If you provide a better structure to your question, the question becomes easier to read and more people will take time to think about possible solutions. It&#39;s also good to start with the question as the reader will then be able to read the rest of your post with an understanding of what is causing you problems."}, {"owner": {"reputation": 134, "user_id": 6414330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/392e70725ff32c5fa4100d9607e31d23?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Pellizzari", "link": "https://stackoverflow.com/users/6414330/luca-pellizzari"}, "reply_to_user": {"reputation": 4094, "user_id": 1178759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FtZkI.jpg?s=128&g=1", "display_name": "SaschaM78", "link": "https://stackoverflow.com/users/1178759/sascham78"}, "edited": false, "score": 0, "creation_date": 1520326570, "post_id": 49110196, "comment_id": 85258176, "body": "One problem, I found out, is a bug in their side: <a href=\"https://youtrack.jetbrains.com/issue/CRKA-66\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/CRKA-66</a>"}, {"owner": {"reputation": 134, "user_id": 6414330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/392e70725ff32c5fa4100d9607e31d23?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Pellizzari", "link": "https://stackoverflow.com/users/6414330/luca-pellizzari"}, "reply_to_user": {"reputation": 4094, "user_id": 1178759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FtZkI.jpg?s=128&g=1", "display_name": "SaschaM78", "link": "https://stackoverflow.com/users/1178759/sascham78"}, "edited": false, "score": 0, "creation_date": 1520326614, "post_id": 49110196, "comment_id": 85258201, "body": "To fix just delete &quot;ROOT_PROJECT&quot;/node_modules/.cache"}, {"owner": {"reputation": 4094, "user_id": 1178759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FtZkI.jpg?s=128&g=1", "display_name": "SaschaM78", "link": "https://stackoverflow.com/users/1178759/sascham78"}, "edited": false, "score": 0, "creation_date": 1520338579, "post_id": 49110196, "comment_id": 85265651, "body": "So where you able to fix your problem? Please add an answer to your own question with your details that fixed the problem and mark it as a solution. Thanks and great to hear!"}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 6414330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/392e70725ff32c5fa4100d9607e31d23?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Pellizzari", "link": "https://stackoverflow.com/users/6414330/luca-pellizzari"}, "is_accepted": true, "score": 0, "last_activity_date": 1522176401, "creation_date": 1522176401, "answer_id": 49520332, "question_id": 49110196, "link": "https://stackoverflow.com/questions/49110196/problems-with-create-react-kotlin-app-and-backend/49520332#49520332", "title": "Problems with create-react-kotlin-app and backend", "body": "<p>I'll go back and answer my question,</p>\n\n<p>One is a bug on their side:\n<a href=\"https://youtrack.jetbrains.com/issue/CRKA-66\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/CRKA-66</a></p>\n\n<p>I'm using a config that maybe is not ideal: </p>\n\n<p>I copy the build folder that contains the optimized folder into the backend and I serve the main view \"index.html\" as an entry point using sendFile().</p>\n\n<p>I then use the url and args to route the user into various react components pages, maybe in the future it's best to switch to: <a href=\"https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react-router-dom\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react-router-dom</a></p>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 845296, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1567763160/picture?type=large", "display_name": "epool", "link": "https://stackoverflow.com/users/845296/epool"}, "is_accepted": false, "score": 0, "last_activity_date": 1557941736, "creation_date": 1557941736, "answer_id": 56154852, "question_id": 49110196, "link": "https://stackoverflow.com/questions/49110196/problems-with-create-react-kotlin-app-and-backend/56154852#56154852", "title": "Problems with create-react-kotlin-app and backend", "body": "<p>according with the repo <a href=\"https://github.com/JetBrains/create-react-kotlin-app/#npm-start-or-yarn-start\" rel=\"nofollow noreferrer\">documentation</a>, if you are getting <code>Kotlin.defineModule is not a function</code> you would need to run:</p>\n\n<pre><code>rm -rf node_modules/.cache\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 6414330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/392e70725ff32c5fa4100d9607e31d23?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Pellizzari", "link": "https://stackoverflow.com/users/6414330/luca-pellizzari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 49520332, "answer_count": 2, "score": 0, "last_activity_date": 1557941736, "creation_date": 1520251742, "last_edit_date": 1520256713, "question_id": 49110196, "link": "https://stackoverflow.com/questions/49110196/problems-with-create-react-kotlin-app-and-backend", "title": "Problems with create-react-kotlin-app and backend", "body": "<h2>Question</h2>\n\n<p>I want to deploy my application on the server in production but I am struggling to do so.</p>\n\n<p>When I use <code>npm run build</code> to produce an \"Optimized\" version of the app and launch it with <code>serve</code>, it doesn't seem to use the proxy.</p>\n\n<p>Going back to the dev server with npm start, I get this error: </p>\n\n<blockquote>\n  <p>TypeError: Kotlin.defineModule is not a function</p>\n</blockquote>\n\n<p>I cannot get out of this. Has someone got a similar configuration? How did you make it work in production? Do you use something to proxy the requests to your backend?</p>\n\n<h2>App configuration</h2>\n\n<p><strong>Frontend</strong>:</p>\n\n<p>Web app using create-react-kotlin-app in kotlin, react. It's on <code>localhost:3000</code> (dev-server) and has a proxy to <code>localhost:3001</code> (the backend).</p>\n\n<p><strong>Backend</strong> </p>\n\n<p>Backend, which is a simple express router for auth and data managment from the database.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["hashmap", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 2156507, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/716d31d2669df94167ffcb4d881eaa01?s=128&d=identicon&r=PG", "display_name": "trunklop", "link": "https://stackoverflow.com/users/2156507/trunklop"}, "edited": false, "score": 0, "creation_date": 1520252720, "post_id": 49110317, "comment_id": 85225899, "body": "Thanks. &quot;Sequence&quot; was the key word I was looking for. I assume &quot;myMap.entries.asSequence()&quot; and &quot;myMap.asSequence()&quot; are equivalent?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 373, "user_id": 2156507, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/716d31d2669df94167ffcb4d881eaa01?s=128&d=identicon&r=PG", "display_name": "trunklop", "link": "https://stackoverflow.com/users/2156507/trunklop"}, "edited": false, "score": 0, "creation_date": 1520252888, "post_id": 49110317, "comment_id": 85225998, "body": "You&#39;re welcome. Yes, they are, good point, updated the answer."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1520256864, "last_edit_date": 1520256864, "creation_date": 1520252161, "answer_id": 49110317, "question_id": 49110002, "link": "https://stackoverflow.com/questions/49110002/filter-and-process-hashmap-entries-in-kotlin/49110317#49110317", "title": "Filter and process hashmap entries in Kotlin", "body": "<p>To avoid storing intermediate values, you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/-sequence/index.html\" rel=\"nofollow noreferrer\"><code>Sequence</code></a>, which is somewhat a lazy equivalent of <code>Iterable</code> (see <a href=\"https://stackoverflow.com/questions/35629159/kotlins-iterable-and-sequence-look-exactly-same-why-are-two-types-required\">another Q&amp;A</a> for details).</p>\n\n<p>To process the entries of a <code>Map</code> as a <code>Sequence</code>, convert it with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"nofollow noreferrer\"><code>.asSequence()</code></a> (again, no intermediate collection is created) and then use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/filter.html\" rel=\"nofollow noreferrer\"><code>.filter { ... }</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/for-each.html\" rel=\"nofollow noreferrer\"><code>.forEach { ... }</code></a> on the sequence:</p>\n\n<pre><code>myMap.asSequence().filter { someCondition(it) }.forEach { doSomething(it) }\n</code></pre>\n\n<p>This will create a pipeline which will query the entries one by one, check the predicate on them and, if matched, run the action, without storing the intermediate values. </p>\n\n<p>Efficiency, however, depends on the collection size and the complexity of the operations, because the laziness of <code>Sequence</code> does not come for free: it introduces some overhead, which may become considerable if you only run simple transformations of small collections in performance-critical code.</p>\n"}], "owner": {"reputation": 373, "user_id": 2156507, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/716d31d2669df94167ffcb4d881eaa01?s=128&d=identicon&r=PG", "display_name": "trunklop", "link": "https://stackoverflow.com/users/2156507/trunklop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "accepted_answer_id": 49110317, "answer_count": 1, "score": 5, "last_activity_date": 1520256864, "creation_date": 1520251034, "question_id": 49110002, "link": "https://stackoverflow.com/questions/49110002/filter-and-process-hashmap-entries-in-kotlin", "title": "Filter and process hashmap entries in Kotlin", "body": "<p>I am probably missing something very obvious: How do I efficiently filter and iterate through the entries of a HashMap in Kotlin?</p>\n\n<p>I want to do the following:</p>\n\n<pre><code>myMap.filterValues{ someCondition }.forEach { doSomethingWithTheEntry }\n</code></pre>\n\n<p>How can I avoid the creation of intermediate objects? filterValues will create a HashMap, which is not really needed here.</p>\n\n<p>I could of course write</p>\n\n<pre><code>myMap.forEach { if(someCondition) doSomethingWithTheEntry }\n</code></pre>\n\n<p>but the functional-style filter approach looks more elegant.</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1520268059, "post_id": 49109866, "comment_id": 85235632, "body": "Have you tried using User::class.simpleName?"}, {"owner": {"reputation": 147, "user_id": 5985886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172dedc834191ef21f9e786f0247290?s=128&d=identicon&r=PG&f=1", "display_name": "wapn", "link": "https://stackoverflow.com/users/5985886/wapn"}, "reply_to_user": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1520271636, "post_id": 49109866, "comment_id": 85237944, "body": "Yes. I get the error in result:  <code>Type mismatch.  Required: String  Found: String?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5985886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172dedc834191ef21f9e786f0247290?s=128&d=identicon&r=PG&f=1", "display_name": "wapn", "link": "https://stackoverflow.com/users/5985886/wapn"}, "edited": false, "score": 2, "creation_date": 1531408748, "post_id": 49110389, "comment_id": 89595074, "body": "This answer is right, but is worth to notice that every table in database should has separate class with constants. Also the name of constant class should refer to the database table name. Placing constant names in <code>MainActivity</code> class should be avoided."}], "tags": [], "owner": {"reputation": 1211, "user_id": 5928940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb38bce9f53c4b3c1dd047689715f45?s=128&d=identicon&r=PG&f=1", "display_name": "Suraj Nair", "link": "https://stackoverflow.com/users/5928940/suraj-nair"}, "is_accepted": true, "score": 4, "last_activity_date": 1520252384, "creation_date": 1520252384, "answer_id": 49110389, "question_id": 49109866, "link": "https://stackoverflow.com/questions/49109866/how-to-properly-get-table-name-in-dao-class-using-android-room/49110389#49110389", "title": "How to properly get table name in DAO class using Android Room", "body": "<p>You can make a constant in any of Util classes and can refer that variable in Entity and Dao class like this:-</p>\n\n<p>Suppose in MainActivity you have </p>\n\n<pre><code>    companion object {\n        const val TABLE_NAME: String=\"Cheese\"\n    }\n</code></pre>\n\n<p><strong>Entity class</strong></p>\n\n<pre><code>@Entity(tableName = MainActivity.TABLE_NAME)\n</code></pre>\n\n<p>and <strong>Dao class</strong> will be </p>\n\n<pre><code>@Query(\"SELECT * FROM \"+MainActivity.TABLE_NAME)\n</code></pre>\n\n<p><strong>Note :-</strong> This is an usual approach to avoid hard coded naming may be you can get table name from Entity class(Needs to be explored) :) .</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 2284195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YL284.jpg?s=128&g=1", "display_name": "gary0707", "link": "https://stackoverflow.com/users/2284195/gary0707"}, "is_accepted": false, "score": 2, "last_activity_date": 1542962168, "creation_date": 1542962168, "answer_id": 53443136, "question_id": 49109866, "link": "https://stackoverflow.com/questions/49109866/how-to-properly-get-table-name-in-dao-class-using-android-room/53443136#53443136", "title": "How to properly get table name in DAO class using Android Room", "body": "<p>Currently for both, Kotlin and Java you can rely on the-built in SQL syntax higlighting. As a result, when you type the content of a your query, Android Studio suggests already defined table names. Maybe you have turned that feature off somehow?\n<a href=\"https://www.reddit.com/r/androiddev/comments/7g9246/dont_forget_to_inject_android_room_sql_language/\" rel=\"nofollow noreferrer\">Don't forget to inject Android Room SQL Language</a></p>\n\n<p>All in all, if you prefer to keep hardcoded things away, why not define a companion object belonging to the <em>Entity</em> class? Imho, mixing Data (layer) and Activity class is not a nice concept. Data does't know about something like activity (or any UI related stuff). Having <em>Utils</em> sounds like having a bug for everything, not separated from concerns point of view. </p>\n\n<p>Maybe the following code would meet you requirement:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity(tableName = WordPl.TABLE_NAME)\ndata class WordPl(var id: Int,                      \n                  var word: String) {\n\n    companion object {\n        const val TABLE_NAME = \"word_pl\"\n    }\n\n}\n</code></pre>\n\n<p>Then in your DAO, you can use Kotlin String Template:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Dao\ninterface DictionaryDao {\n\n    @Query(\"Select * from ${WordPl.TABLE_NAME}\")\n    fun getAllWords(): List&lt;WordPl&gt;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10649182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TooQAwkoFXk/AAAAAAAAAAI/AAAAAAAABGY/wD9BACrI_Ro/photo.jpg?sz=128", "display_name": "vasiliyx", "link": "https://stackoverflow.com/users/10649182/vasiliyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1616684947, "creation_date": 1616684947, "answer_id": 66802331, "question_id": 49109866, "link": "https://stackoverflow.com/questions/49109866/how-to-properly-get-table-name-in-dao-class-using-android-room/66802331#66802331", "title": "How to properly get table name in DAO class using Android Room", "body": "<p>You could do something like this in Java:</p>\n<p>Create TableAnnotation.java interface file</p>\n<pre><code>/**\n * This annotation class is needed to obtain information about the table from the class at runtime.\n * Needed passing the BaseDao needs to retrieve the table name from the parent class.\n */\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface TableAnnotation {\n    String tableName();\n}\n</code></pre>\n<p>In your User.java table class do this</p>\n<pre><code>@TableAnnotation(tableName = User.tableName)\n@Entity(tableName = User.tableName)\nclass User {\nprotected static final String tableName = &quot;USER&quot;;\n}\n</code></pre>\n<p>If you want to reduce the amount of boilerplate code, you can integrate getting the tableName in a BaseDao.\nIn your BaseDao.java you can do this</p>\n<pre><code>@Dao\npublic abstract class BaseDao&lt;T&gt; {\n\n    /**\n     * Get all objects from the database\n     * @return the table objects for the entries\n     */\n    public List&lt;T&gt; getAllObjects() {\n        SimpleSQLiteQuery query = new SimpleSQLiteQuery(\n                &quot;select * from &quot; + getTableName() + &quot; order by id&quot;\n        );\n        return doGetAllObjectsById_(query);\n    }\n    @RawQuery\n    protected abstract List&lt;T&gt; doGetAllObjectsById_(SupportSQLiteQuery query);\n\n\n\n\n    /**\n     * Get an object from the database by id\n     * @param id\n     * @return the table object for the entry\n     */\n    public T getObjectById(long id) {\n        SimpleSQLiteQuery query = new SimpleSQLiteQuery(\n                &quot;select * from &quot; + getTableName() + &quot; where id = ?&quot;,\n                new Object[]{id}\n        );\n        return doGetObjectById_(query);\n    }\n    @RawQuery\n    protected abstract T doGetObjectById_(SupportSQLiteQuery query);\n\n\n\n\n    /**\n     * Get the table name of the parent class.\n     * @return\n     */\n    private String getTableName() {\n\n        Class clazz = (Class)\n                ((ParameterizedType) getClass().getSuperclass().getGenericSuperclass())\n                        .getActualTypeArguments()[0];\n\n        TableAnnotation tableAnnotation = (TableAnnotation) clazz.getAnnotation(TableAnnotation.class);\n        String tableName = tableAnnotation.tableName();\n        return tableName;\n    }\n\n}\n</code></pre>\n<p>In your UserDAO.java, change the interface into public abstract class and inherit the BaseDao. All standard methods you specified in the BaseDao will be passed on.</p>\n<pre><code>@Dao\npublic abstract class UserDAO extends BaseDao&lt;UserDAO&gt;\n{\n\n    // Add additional methods here specific to this table.\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5985886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172dedc834191ef21f9e786f0247290?s=128&d=identicon&r=PG&f=1", "display_name": "wapn", "link": "https://stackoverflow.com/users/5985886/wapn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5394, "favorite_count": 1, "accepted_answer_id": 49110389, "answer_count": 3, "score": 4, "last_activity_date": 1616684947, "creation_date": 1520250625, "last_edit_date": 1520250729, "question_id": 49109866, "link": "https://stackoverflow.com/questions/49109866/how-to-properly-get-table-name-in-dao-class-using-android-room", "title": "How to properly get table name in DAO class using Android Room", "body": "<p>I wonder how to avoid hard coding when using table name in Android Room query. I develop in <code>Kotlin</code>, but to be honest in this problem it doesn't matter is Java or Kotlin. </p>\n\n<p>Let's see that simple classes:</p>\n\n<p><strong>DAO interface:</strong></p>\n\n<pre><code>@Dao\ninterface UserDAO {\n\n    @Query(\"SELECT * FROM USER\")\n    fun getAll(): List&lt;User&gt;\n}\n</code></pre>\n\n<p><strong>Entity class:</strong></p>\n\n<pre><code>@Entity(tableName = \"USER\")\nclass User {\n}\n</code></pre>\n\n<p>You can see that the table name \"USER\" is hard coded in @Query in UserDAO. How to avoid that? How to refer to @Entity parameter <strong>tableName</strong>?</p>\n\n<p>I would like to have all names in one and only one place.</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "answers": [{"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 2, "last_activity_date": 1520250653, "creation_date": 1520250653, "answer_id": 49109873, "question_id": 49109324, "link": "https://stackoverflow.com/questions/49109324/extension-and-higher-order-functions-referencing/49109873#49109873", "title": "Extension and higher-order functions referencing", "body": "<p>Concerning your first question, these 2 are equivalent:</p>\n\n<pre><code>\"testString\".extensionFun()\nextensionFun(\"testString\")\n</code></pre>\n\n<p>That's why passing <code>printString</code> method doesn't cause a compilation error.</p>\n\n<p>Concerning the second question, the difference is that <code>highOrderFun</code> is already a reference to a function, while <code>printString</code> is not a function reference (but you can obtain it with the <code>::</code> operator)</p>\n"}], "owner": {"reputation": 878, "user_id": 5954950, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a3232e36238b371758601b6a820d304?s=128&d=identicon&r=PG&f=1", "display_name": "tomwyr", "link": "https://stackoverflow.com/users/5954950/tomwyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 49109873, "answer_count": 1, "score": 1, "last_activity_date": 1520250720, "creation_date": 1520248923, "last_edit_date": 1520250720, "question_id": 49109324, "link": "https://stackoverflow.com/questions/49109324/extension-and-higher-order-functions-referencing", "title": "Extension and higher-order functions referencing", "body": "<p>I get an overall idea of what is each of these, I wrote piece of code however that I don't quite understand why it works.<br>The thing is <code>callExtensionOnString</code> expects extension function as its parameter, however it doesn't complain if reference to <code>printString</code> is passed.\nIs <code>String.() -&gt; Unit</code> just another name for <code>(String) -&gt; Unit</code> type or is it Kotlin compiler that takes some kind of shortcut to fit higher order in extension function?</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    callExtensionOnString(::printString)\n}\n\nfun callExtensionOnString(extensionFun: String.() -&gt; Unit) {\n    \"testString\".extensionFun()\n}\n\nfun printString(str: String) {\n    println(str)\n}\n</code></pre>\n\n<p>Then there is second thing that seems unclear to me. <code>printString</code> reference is passed once to <code>callExtensionOnString</code> and then again to <code>run</code> function which basically requires <code>String.() -&gt; Unit</code> extension function. Is there difference between these two so that second time <code>::</code> prefix is omitted?</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    runFunctionOnString(::printString)\n}\n\nfun runFunctionOnString(higherOrderFun: (String) -&gt; Unit) {\n    \"testString\".run(higherOrderFun)\n}\n\nfun printString(str: String) {\n    println(str)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2094, "user_id": 3117650, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yrzh5.jpg?s=128&g=1", "display_name": "Canato", "link": "https://stackoverflow.com/users/3117650/canato"}, "edited": false, "score": 0, "creation_date": 1520245774, "post_id": 49108271, "comment_id": 85221374, "body": "I tried to use the Alt+enter (click on the yellow light) before, but it changed other stuff, but work like a charm. Thanks. Just waiting for the time to tick as right!"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1520245607, "creation_date": 1520245607, "answer_id": 49108271, "question_id": 49108194, "link": "https://stackoverflow.com/questions/49108194/kotlin-edittext-show-hide-password-programmatically/49108271#49108271", "title": "Kotlin EditText show/hide password programmatically", "body": "<p>For any warning or suggestion reported by the IDE, you can press Alt-Enter, and in most cases (including this one) the IDE will suggest a quickfix that will automatically apply the suggested change.</p>\n\n<p>In this case, it will change the call of a Java setter to a Kotlin property access:</p>\n\n<pre><code>auth_password_text.inputType = ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2094, "user_id": 3117650, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yrzh5.jpg?s=128&g=1", "display_name": "Canato", "link": "https://stackoverflow.com/users/3117650/canato"}, "edited": false, "score": 0, "creation_date": 1520245787, "post_id": 49108281, "comment_id": 85221386, "body": "Thanks! exactly this."}], "tags": [], "owner": {"reputation": 4445, "user_id": 6290452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc977b070a4c0b40edff349c8a017048?s=128&d=identicon&r=PG&f=1", "display_name": "AlexTa", "link": "https://stackoverflow.com/users/6290452/alexta"}, "is_accepted": false, "score": 6, "last_activity_date": 1520245641, "creation_date": 1520245641, "answer_id": 49108281, "question_id": 49108194, "link": "https://stackoverflow.com/questions/49108194/kotlin-edittext-show-hide-password-programmatically/49108281#49108281", "title": "Kotlin EditText show/hide password programmatically", "body": "<p>In Kotlin you can set some properties accessing directly variable instead of calling setter method, that's the meaning of the warning you are getting.</p>\n\n<p>You can remove warning like this:</p>\n\n<pre><code>auth_password_text.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_PASSWORD\n</code></pre>\n"}], "owner": {"reputation": 2094, "user_id": 3117650, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yrzh5.jpg?s=128&g=1", "display_name": "Canato", "link": "https://stackoverflow.com/users/3117650/canato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3510, "favorite_count": 0, "accepted_answer_id": 49108271, "answer_count": 2, "score": 2, "last_activity_date": 1520245641, "creation_date": 1520245387, "question_id": 49108194, "link": "https://stackoverflow.com/questions/49108194/kotlin-edittext-show-hide-password-programmatically", "title": "Kotlin EditText show/hide password programmatically", "body": "<p>I know how to do this on Java.\nI copied and paste the code from Java to Kotlin and Android Studio changed to this:</p>\n\n<pre><code>auth_password_text.setInputType(InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_PASSWORD)\n</code></pre>\n\n<p>But I'm receiving a message (grey not yellow like warning)\n<a href=\"https://i.stack.imgur.com/fyznR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fyznR.png\" alt=\"enter image description here\"></a></p>\n\n<p>I search and found only java and react native answer but not was the best/right way to do this in Kotlin.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 1, "creation_date": 1520245292, "post_id": 49107542, "comment_id": 85221069, "body": "if val not initialized it won&#39;t compile. So you need to make a decision: early exit (return), default values or throw exception"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1520244367, "post_id": 49107724, "comment_id": 85220440, "body": "val latitude: Double? = null can&#39;t be compiled too, cause of &#39;val&#39;, it will only work with &#39;var&#39; which i use now, but i want them to be immutable after assigment. Is there any way of doing this with &#39;val&#39; ?"}, {"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1520263193, "post_id": 49107724, "comment_id": 85232277, "body": "right now i&#39;m using custom implementation of NSimon solution, but both of solutions (his and yours one), I think, has no direct answer of my question. I just want to know if it is possible to check if local val is initialized, and if yes - how. Not how to rewrite my code using var or destructing declaration, cause both of that cases means firstly you assign value, then you check that value."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1520263719, "post_id": 49107724, "comment_id": 85232639, "body": "@NikitaYankov The issue is that if there&#39;s any path where that variable is not assigned, your code won&#39;t even compile, provided that the variable is used anywhere (e.g., in a <code>return</code> statement, in a <code>println</code>, etc.), so there&#39;s no need to check if the variable is initialized or not, because that&#39;s a runtime check, not a compile time check"}, {"owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1520264139, "post_id": 49107724, "comment_id": 85232951, "body": "yeah, looks like I just missed some things a little, it&#39;s kindly hard to move from Java to Kotlin without that paranoic null-safety checks. Thanks for staying tune, I&#39;ll mark your question as a correct one."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "edited": false, "score": 0, "creation_date": 1520264400, "post_id": 49107724, "comment_id": 85233121, "body": "Thanks! However, note that the very same compilation issue happens also in plain Java: if you declare a variable without initializing it, and there&#39;s at least 1 execution path using that variable without having initialized it before, you&#39;ll get a compilation error like <code>Variable &#39;xxx&#39; might not have been initialized</code>"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 4, "last_activity_date": 1520244739, "last_edit_date": 1520244739, "creation_date": 1520244114, "answer_id": 49107724, "question_id": 49107542, "link": "https://stackoverflow.com/questions/49107542/how-can-i-check-if-local-val-is-initialized/49107724#49107724", "title": "How can I check if local val is initialized?", "body": "<p>If it makes sense to have <code>null</code> values for latitude and longitude for your use case, then you can define those variables as nullable <code>Double</code>, e.g., <code>var latitude: Double? = null</code> (the same for <code>longitude</code>). After that, it makes sense to check if they're not <code>null</code>, but the variable becomes no more immutable.\nIn order to keep immutability, you can do something like that:</p>\n\n<pre><code>val longitude: Double?\nval latitude: Double?\n\nwhen (type) {\n    TYPEVALUES.MY_LOCATION -&gt; {\n        longitude = ...\n        latitude = ...\n        ...\n    }\n\n    TYPEVALUES.CUSTOM_RADIUS -&gt; {\n        longitude = ...\n        latitude = ...\n        ...\n    }\n\n    TYPEVALUES.INPUT -&gt; {\n        ...\n    } else -&gt; {\n        latitude = null\n        longitude = null\n    }\n}\n</code></pre>\n\n<p>Otherwise, if you want them to be non-nullable, then you need to provide a meaningful, non-<code>null</code> value in all branches of the <code>when</code> statement.</p>\n"}, {"comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1520248366, "post_id": 49109098, "comment_id": 85223147, "body": "you can also take advantage of <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html#destructuring-declarations\" rel=\"nofollow noreferrer\">destructuring declaration</a> to have <code>latitude</code> and <code>longitude</code> variables: <code>val (latitude, longitude) = when (...) </code>"}], "tags": [], "owner": {"reputation": 4862, "user_id": 4232337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nauo6.jpg?s=128&g=1", "display_name": "NSimon", "link": "https://stackoverflow.com/users/4232337/nsimon"}, "is_accepted": false, "score": 1, "last_activity_date": 1520248893, "last_edit_date": 1520248893, "creation_date": 1520248088, "answer_id": 49109098, "question_id": 49107542, "link": "https://stackoverflow.com/questions/49107542/how-can-i-check-if-local-val-is-initialized/49109098#49109098", "title": "How can I check if local val is initialized?", "body": "<p>You could use the power of when to store the value directly, so that declaration and assignments are done at the same time:</p>\n\n<pre><code>val (latitude, longitude) = when (type) {\n  TYPEVALUES.MY_LOCATION -&gt; Pair(0.0, 0.0)\n  TYPEVALUES.CUSTOM_RADIUS -&gt; Pair(1.0, 1.0)\n  else -&gt; Pair(2d, 2d)\n}\n//Your latitude is a double\n//Your longitude is a double\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6620497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f9fc01e6a71682c2332c9b6489d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Yankov", "link": "https://stackoverflow.com/users/6620497/nikita-yankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 49107724, "answer_count": 2, "score": 1, "last_activity_date": 1520248893, "creation_date": 1520243524, "question_id": 49107542, "link": "https://stackoverflow.com/questions/49107542/how-can-i-check-if-local-val-is-initialized", "title": "How can I check if local val is initialized?", "body": "<p>I've got the following Unit function: </p>\n\n<pre><code>private fun loadFilterArea() {\n    val query = ALIAS.AREA\n    val type = preferences.getInt(query, TYPEVALUES.MY_LOCATION)\n\n    val longitude: Double\n    val latitude: Double\n\n    when (type) {\n        TYPEVALUES.MY_LOCATION -&gt; {\n            ...\n            longitude = point.longitude\n            latitude = point.latitude\n            ...\n        }\n        TYPEVALUES.CUSTOM_RADIUS -&gt; {\n            ...\n            longitude = point.longitude\n            latitude = point.latitude\n            ...\n        }\n        TYPEVALUES.INPUT -&gt; {\n            ...\n            longitude = preferences.getFloat(ALIAS.AREA_LONGITUDE, 0f).toDouble()\n            latitude =  preferences.getFloat(ALIAS.AREA_LATITUDE, 0f) .toDouble()\n            ...\n        } else -&gt; {\n            ...\n        }\n    }\n\n    //... the question is here ...\n    //... can't be compiled cause val's are not initialized\n    if (longitude != null &amp;&amp; latitude != null) {\n        storeKey(ALIAS.AREA_LONGITUDE, longitude)\n        storeKey(ALIAS.AREA_LATITUDE, latitude)\n    } \n  }\n</code></pre>\n\n<p>So, how can check if values longitude and latitude are initialized ? </p>\n\n<p>I don't want to move them from function to global scope and use them as lateinit with further ::latitude.isInitialized, and it seems like my version of Kotlin doesn't support local lateinit variables</p>\n"}, {"tags": ["java", "javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5886281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bd4a861eb05edbcc184ab48a177d78c?s=128&d=identicon&r=PG&f=1", "display_name": "wizeOnes", "link": "https://stackoverflow.com/users/5886281/wizeones"}, "edited": false, "score": 0, "creation_date": 1520262490, "post_id": 49106357, "comment_id": 85231811, "body": "Thank you for your answer. Understood; I am currently going between the two frameworks learning what I can. In implemented your way of writing the column, I am now receiving another type of error. I have updated the code to reflect my changes."}, {"owner": {"reputation": 91, "user_id": 5886281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bd4a861eb05edbcc184ab48a177d78c?s=128&d=identicon&r=PG&f=1", "display_name": "wizeOnes", "link": "https://stackoverflow.com/users/5886281/wizeones"}, "edited": false, "score": 0, "creation_date": 1520262868, "post_id": 49106357, "comment_id": 85232068, "body": "Nevermind, that was a silly mistake; I actually used the wrong parameter. Thank you!"}, {"owner": {"reputation": 91, "user_id": 5886281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bd4a861eb05edbcc184ab48a177d78c?s=128&d=identicon&r=PG&f=1", "display_name": "wizeOnes", "link": "https://stackoverflow.com/users/5886281/wizeones"}, "edited": false, "score": 0, "creation_date": 1520264817, "post_id": 49106357, "comment_id": 85233437, "body": "My code has compiled, but it seems the TableView has loaded as it regularly would without comboboxes. I have added an image of the TableView. I changed my code to: <code>column&lt;AvailableRooms, String?&gt;(&quot;Favorite fruit&quot;, AvailableRooms::roomTypeProperty).useComboBox(listOfAmenitie&zwnj;&#8203;sInRoom.observable()&zwnj;&#8203;)</code>"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 91, "user_id": 5886281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bd4a861eb05edbcc184ab48a177d78c?s=128&d=identicon&r=PG&f=1", "display_name": "wizeOnes", "link": "https://stackoverflow.com/users/5886281/wizeones"}, "edited": false, "score": 1, "creation_date": 1520355745, "post_id": 49106357, "comment_id": 85277390, "body": "The combobox will show up when the table enters Edit mode, by default this happens when you double click a row."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 3, "last_activity_date": 1520239141, "creation_date": 1520239141, "answer_id": 49106357, "question_id": 49105742, "link": "https://stackoverflow.com/questions/49105742/how-to-add-a-combobox-to-a-tableview-in-kotlin-using-tornadofx/49106357#49106357", "title": "How to add a combobox to a tableview in Kotlin using TornadoFx", "body": "<p>The second type parameter to the column builder is not the UI element type, but rather the value type, so in your case it should be String. Here is a complete sample application showcasing the use of a ComboBox in a TableView:</p>\n\n<pre><code>class Person {\n    val nameProperty = SimpleStringProperty()\n    var name by nameProperty\n\n    val favoriteFruitProperty = SimpleStringProperty()\n    var favoriteFruit by favoriteFruitProperty\n}\n\nclass MyView : View() {\n    val fruits = listOf(\"Apple\", \"Banana\", \"Pear\")\n\n    override val root = tableview&lt;Person&gt; {\n        isEditable = true\n\n        column(\"Name\", Person::nameProperty)\n        column&lt;Person, String?&gt;(\"Favorite fruit\", Person::favoriteFruitProperty).useComboBox(fruits.observable())\n\n        // Populate with test data. Don't try this at home\n        asyncItems {\n            listOf(Person().apply { name = \"John\"; favoriteFruit = \"Apple\" }, Person().apply { name = \"Jane\" })\n        }\n    }\n}\n</code></pre>\n\n<p>The guide does require you to know at least some JavaFX basics, so it is definitely incomplete if you have no prior JavaFX knowledge. It shouldn't be unreliable though, so please let me know if there are errors in it, or if you have suggestions for improving it.</p>\n"}], "owner": {"reputation": 91, "user_id": 5886281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bd4a861eb05edbcc184ab48a177d78c?s=128&d=identicon&r=PG&f=1", "display_name": "wizeOnes", "link": "https://stackoverflow.com/users/5886281/wizeones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 49106357, "answer_count": 1, "score": 0, "last_activity_date": 1520264898, "creation_date": 1520236504, "last_edit_date": 1520264898, "question_id": 49105742, "link": "https://stackoverflow.com/questions/49105742/how-to-add-a-combobox-to-a-tableview-in-kotlin-using-tornadofx", "title": "How to add a combobox to a tableview in Kotlin using TornadoFx", "body": "<p>I am trying to add a combobox to a tableview using tornadofx; the closest I have gotten to something that I think should work is this: <code>column&lt;AvailableRooms, ComboBox&lt;String&gt;&gt;(\"Pets Allowed\", combobox&lt;String&gt;(values = listOf&lt;String&gt;(\"3\",\"5\")))</code>.</p>\n\n<p>I have read the documentation, but it seems like a lot of it is half written, and unreliable. I am new to JavaFx and am learning as I go along. I learned Kotlin because I figured using their version of JavaFx (TornadoFx) would be easier to understand. </p>\n\n<p>Any guidance would be greatly appreciated. </p>\n\n<p>img: \n<a href=\"https://i.stack.imgur.com/nKqqS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nKqqS.png\" alt=\"enter image description here\"></a>\n<br />\n<br />\n<strong><em>Update</em></strong></p>\n\n<p>TableView img: \n<a href=\"https://i.stack.imgur.com/8dhkE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8dhkE.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "aar"], "comments": [{"owner": {"reputation": 963, "user_id": 1541329, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2e615ac69993399b09ea88b82557ca3?s=128&d=identicon&r=PG", "display_name": "Anoop", "link": "https://stackoverflow.com/users/1541329/anoop"}, "edited": false, "score": 1, "creation_date": 1520236894, "post_id": 49105424, "comment_id": 85216528, "body": "Yes, You are correct. The <code>aar</code> file should be inside the modules&#39;s build folder. The path would be <code>build&#47;output&#47;aar</code>. Try <code>assembleDebug</code> or <code>assembleRelease</code> gradlew task in your project and check the module&#39;s output folder.   Regarding Internet permission, you can define that in the <code>AndroidManifest.xml</code> of the module like <code>&lt;uses-permission = &quot;android.permission.INTERNET&#47;&gt;&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 899008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe919b0b67568f0d0b3d45b0d020a909?s=128&d=identicon&r=PG", "display_name": "Duncan Hill", "link": "https://stackoverflow.com/users/899008/duncan-hill"}, "is_accepted": false, "score": 1, "last_activity_date": 1520598341, "creation_date": 1520598341, "answer_id": 49193800, "question_id": 49105424, "link": "https://stackoverflow.com/questions/49105424/android-kotlin-aar-where-and-how/49193800#49193800", "title": "Android Kotlin AAR - Where and how", "body": "<p>Thanks for the update, I'd assumed that the build / running the application on the emulator would create the appropriate AAR file, it clearly doesn't. I had to specifically make the library and then the file appeared.</p>\n"}], "owner": {"reputation": 527, "user_id": 899008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe919b0b67568f0d0b3d45b0d020a909?s=128&d=identicon&r=PG", "display_name": "Duncan Hill", "link": "https://stackoverflow.com/users/899008/duncan-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520598341, "creation_date": 1520235070, "question_id": 49105424, "link": "https://stackoverflow.com/questions/49105424/android-kotlin-aar-where-and-how", "title": "Android Kotlin AAR - Where and how", "body": "<p>I\u2019m a iOS SWIFT developer learning Android development and used to creating Cocoa PODS, as a result of this I using Kotlin and trying to create AAR library files.</p>\n\n<p>I\u2019ve created a project and within the project added a seperate module, selecting Android Module as the type. This additional module contains the code that I want to reuse as an AAR library in other apps. The additional module includes resources.</p>\n\n<p>So the app and module all build and function as expected but I\u2019m struggling to find the AAR file. If my understanding is correct it should be in the Output folder of the addition module, is this correct. Theres no AAR file is there a specific option I need to enable or way to create the required file?</p>\n\n<p>Final question relating to allowing an AAR file or library to have internet access, is there an example of where to add this and the correct syntax? Currently I\u2019m adding the required values to the main project module but ideally they should be added to the resulting library.</p>\n"}, {"tags": ["android", "sockets", "tcp", "websocket", "kotlin"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1520223754, "post_id": 49103114, "comment_id": 85211989, "body": "There are major ethical concerns with this sort of thing. Automated surveillance. Seek legal advice before proceeding. You should make the students do something active, e.g. login, to get their attendance noted."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520280421, "post_id": 49103114, "comment_id": 85242500, "body": "And what if a student doesn&#39;t bring in a device that connects to a classroom&#39;s router?  Is such a device mandatory for <i>every</i> class a student attends?  How do you plan on remotely querying each router for its connected devices?  Requiring a student to login to a web-based app would be more appropriate."}, {"owner": {"reputation": 117, "user_id": 7807711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-dk_1D_O45qc/AAAAAAAAAAI/AAAAAAAALZo/2CGEON3a0uE/photo.jpg?sz=128", "display_name": "Devanshi Sukhija", "link": "https://stackoverflow.com/users/7807711/devanshi-sukhija"}, "edited": false, "score": 0, "creation_date": 1520317232, "post_id": 49103114, "comment_id": 85253928, "body": "Well, there is a login provision and also to make sure the student is in the class, I need to know student is connected to which router. And if student doesnt have a device, there are other alternatives as well to get the attendance marked."}, {"owner": {"reputation": 1042, "user_id": 5197662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EUWyw.jpg?s=128&g=1", "display_name": "Sep GH", "link": "https://stackoverflow.com/users/5197662/sep-gh"}, "edited": false, "score": 0, "creation_date": 1520321053, "post_id": 49103114, "comment_id": 85255466, "body": "Whats the problem with those who down vote? SO should make down voters explain their reason. This is a good question in my opinion and has lots of different solutions."}], "answers": [{"comments": [{"owner": {"reputation": 1042, "user_id": 5197662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EUWyw.jpg?s=128&g=1", "display_name": "Sep GH", "link": "https://stackoverflow.com/users/5197662/sep-gh"}, "edited": false, "score": 0, "creation_date": 1520320338, "post_id": 49103203, "comment_id": 85255166, "body": "Which student is connected to which ip address? too complicated! isn&#39;t it?"}], "tags": [], "owner": {"reputation": 1708, "user_id": 2043395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030b3c97421c19ff583fcb2a244f6cef?s=128&d=identicon&r=PG", "display_name": "Cao Minh Vu", "link": "https://stackoverflow.com/users/2043395/cao-minh-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1520221542, "creation_date": 1520221542, "answer_id": 49103203, "question_id": 49103114, "link": "https://stackoverflow.com/questions/49103114/how-to-check-if-an-ip-is-alive-in-a-particular-network-through-sockets/49103203#49103203", "title": "How to check if an IP is alive in a particular network, through Sockets?", "body": "<p>You can ping an IP. However, it seems each student should be granted a permanent local IP for each class. This is an example how to ping to an IP:</p>\n\n<pre><code>fun ping(ip: String): String {\n        var str = \"\"\n        try {\n            val process = Runtime.getRuntime().exec(\n                    \"/system/bin/ping -c 8 \" + ip)\n            val reader = BufferedReader(InputStreamReader(\n                    process.inputStream))\n            var i: Int\n            val buffer = CharArray(4096)\n            val output = StringBuffer()\n            i = reader.read(buffer)\n            while (i &gt; 0) {\n                output.append(buffer, 0, i)\n                i = reader.read(buffer)\n            }\n            reader.close()\n            str = output.toString()\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n\n    return str\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1042, "user_id": 5197662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EUWyw.jpg?s=128&g=1", "display_name": "Sep GH", "link": "https://stackoverflow.com/users/5197662/sep-gh"}, "edited": false, "score": 0, "creation_date": 1520320270, "post_id": 49103288, "comment_id": 85255133, "body": "This needs more battery usage and more accesses for the android app and still can be faked or face lots of problems (too slow sometimes)"}], "tags": [], "owner": {"reputation": 12920, "user_id": 2147481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/v8FBa.png?s=128&g=1", "display_name": "Gokul Nath KP", "link": "https://stackoverflow.com/users/2147481/gokul-nath-kp"}, "is_accepted": false, "score": 0, "last_activity_date": 1520222381, "creation_date": 1520222381, "answer_id": 49103288, "question_id": 49103114, "link": "https://stackoverflow.com/questions/49103114/how-to-check-if-an-ip-is-alive-in-a-particular-network-through-sockets/49103288#49103288", "title": "How to check if an IP is alive in a particular network, through Sockets?", "body": "<p>Instead of checking via IP address, why cant you make your user to login into the application, only when he/she is within a particular co-ordinate or GPS position. In this way, even if your IP address changes in future, app need not to be updated.</p>\n\n<p>In your server keep your list of locations for each class. Only when the student is within the location range, he/she should be allowed to login to the application.</p>\n\n<p>Refer <a href=\"https://stackoverflow.com/questions/22063842/check-if-a-latitude-and-longitude-is-within-a-circle\">Check if a latitude and longitude is within a circle</a> for more details.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 7807711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-dk_1D_O45qc/AAAAAAAAAAI/AAAAAAAALZo/2CGEON3a0uE/photo.jpg?sz=128", "display_name": "Devanshi Sukhija", "link": "https://stackoverflow.com/users/7807711/devanshi-sukhija"}, "edited": false, "score": 0, "creation_date": 1520317323, "post_id": 49103580, "comment_id": 85253962, "body": "it there a well I can read information off ARP table to know who is connected to that particular router."}], "tags": [], "owner": {"reputation": 31, "user_id": 960236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ef2d4c556ddce42ac6371c4ebd35312?s=128&d=identicon&r=PG", "display_name": "MavEtJu", "link": "https://stackoverflow.com/users/960236/mavetju"}, "is_accepted": false, "score": 0, "last_activity_date": 1520224804, "creation_date": 1520224804, "answer_id": 49103580, "question_id": 49103114, "link": "https://stackoverflow.com/questions/49103114/how-to-check-if-an-ip-is-alive-in-a-particular-network-through-sockets/49103580#49103580", "title": "How to check if an IP is alive in a particular network, through Sockets?", "body": "<p>The only location you can find this is in the ARP table of the routers. The end-point isn't guaranteed to return anything it hasn't asked for, while the router needs this information to properly address the traffic back to the end-point.</p>\n"}, {"tags": [], "owner": {"reputation": 1042, "user_id": 5197662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EUWyw.jpg?s=128&g=1", "display_name": "Sep GH", "link": "https://stackoverflow.com/users/5197662/sep-gh"}, "is_accepted": true, "score": 0, "last_activity_date": 1520343733, "last_edit_date": 1520343733, "creation_date": 1520317361, "answer_id": 49124553, "question_id": 49103114, "link": "https://stackoverflow.com/questions/49103114/how-to-check-if-an-ip-is-alive-in-a-particular-network-through-sockets/49124553#49124553", "title": "How to check if an IP is alive in a particular network, through Sockets?", "body": "<blockquote>\n  <p>How can I ping or do something through web sockets to check if particular ip is alive or not?</p>\n</blockquote>\n\n<p>You cant force a client to allow you to ping them just using their ip address. The best way to go is to connect your users to a central server (through a websocket in your example) and check heartbeats on the websocket.</p>\n\n<p>For this, of-course you have to first authorize your students and make sure everyone has a token on their websocket so that you can track their existence in your system. Then you need some kind of heartbeat system. Most websocket implementations I have seen, have already implemented <code>ping</code> and <code>pong</code>. It can work both ways:</p>\n\n<p>One point, to check if other point is connected should send <code>ping</code> requests and the other point automatically sends back a <code>pong</code> message <strong>if they are connected</strong>.</p>\n\n<p>In an app we wrote, we have an interval to send pings to clients, and we persist their pong timestamp. If last pong timestamp is too old, then we know that connection is failed or client is not available on the network.</p>\n\n<p>Although, if websocket closes or faces an error, a method (like <code>onError()</code> and <code>onClose()</code>) gets called and you are informed. But implementing an heartbeat service can help you make sure your connection is actually alive and is a <strong>MUST</strong> in your websocket based system.</p>\n\n<blockquote>\n  <p>How can I check if there are sitting in router's range, is this possible through web socket?</p>\n</blockquote>\n\n<p>If Im not wrong, you are in charge of designing both sides of your application (client and server). So, you can make users try to connect to your <strong>LOCAL</strong> ip address again and again until the connection is successful. You just have to make sure your server ip address is reachable through those other routers.</p>\n\n<p><strong>NOTE</strong>: on the local network, if students should not be able to connect using another classroom router, then you can check their websocket ip address. Before that there should be an table to map each user to the ip address they can send message from.</p>\n\n<p>Another way to achieve this <strong>IF YOUR SERVER IS NOT IN THAT LOCAL NETWORK</strong> is to give those routes same public ip address (or static ip addresses), and route your traffic through internet to your server public ip address. Then to make sure users can only connect from those routers (within range of those routers), you have to allow those routers IP address in your server firewall (or you can do it in the server application side) and block any other connections on your websocket port.</p>\n\n<p><strong>NOTE 2</strong> again, if your server is not in your local network, but you still want to make sure each user is in its valid classroom, you need a proxy server. works like this:</p>\n\n<p>Client connects to its classroom router > router connects to local proxy server > proxy server adds router ip address to websocket message and sends it to public server > public server can process message and has user local ip address</p>\n"}], "owner": {"reputation": 117, "user_id": 7807711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-dk_1D_O45qc/AAAAAAAAAAI/AAAAAAAALZo/2CGEON3a0uE/photo.jpg?sz=128", "display_name": "Devanshi Sukhija", "link": "https://stackoverflow.com/users/7807711/devanshi-sukhija"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 3, "accepted_answer_id": 49124553, "answer_count": 4, "score": -1, "last_activity_date": 1520343733, "creation_date": 1520220788, "question_id": 49103114, "link": "https://stackoverflow.com/questions/49103114/how-to-check-if-an-ip-is-alive-in-a-particular-network-through-sockets", "title": "How to check if an IP is alive in a particular network, through Sockets?", "body": "<p>I am building an attendance application for my college, where in I want to mark student attendance through the network. Every class room has seperate router and I want to basically check if student are sitting in the router's range and mark their attendance accordingly.\nHow can I check if there are sitting in router's range, is this possible through web socket?\nor\nHow can I ping or do something through web sockets to check if particular ip is alive or not?</p>\n\n<p>I am using kotlin to develop my application. Please help.</p>\n"}, {"tags": ["kotlin", "idioms"], "comments": [{"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1520242975, "post_id": 49102339, "comment_id": 85219642, "body": "I understand your interest is purely of academic nature. However, in case anyone comes looking for an implementation to your sample problem I suggest you mention the idiomatic solution using <code>file.readLines().last()</code>"}, {"owner": {"reputation": 419, "user_id": 7394973, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4Vu2l.jpg?s=128&g=1", "display_name": "J.E.Tkaczyk", "link": "https://stackoverflow.com/users/7394973/j-e-tkaczyk"}, "reply_to_user": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1520436886, "post_id": 49102339, "comment_id": 85316004, "body": "FYI, I came across a discussion of the assignment from an expression.  It seems this is legitimate design question for the Kotlin language which has been answered by the designers: <a href=\"https://discuss.kotlinlang.org/t/assignment-not-allow-in-while-expression/339/13\" rel=\"nofollow noreferrer\">kotlin forum</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11598, "user_id": 869330, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34be19b80429871a85ea92656850bceb?s=128&d=identicon&r=PG&f=1", "display_name": "Naetmul", "link": "https://stackoverflow.com/users/869330/naetmul"}, "is_accepted": true, "score": 4, "last_activity_date": 1520215679, "last_edit_date": 1520215679, "creation_date": 1520214870, "answer_id": 49102442, "question_id": 49102339, "link": "https://stackoverflow.com/questions/49102339/include-both-assignment-and-test-on-assigned-value-in-while-loop-for-kotlin/49102442#49102442", "title": "Include both assignment and test on assigned value in while loop for Kotlin", "body": "<p>In Kotlin, an assignment is not an expression whose value is equal to the assigned value.</p>\n\n<p>You can combine two statements using <code>run</code> function in Kotlin. This function returns the value of the the last expression.</p>\n\n<pre><code>var current = \"\"\nwhile (run {\n    current = bufferedReader.readLine()\n    current != null\n}) { // or while (run { current = bufferedReader.readLine(); current != null }) {\n    lastLine = current\n}\n</code></pre>\n\n<p>However, you can further reduce the code using <code>File.forEachLine()</code> in Kotlin.</p>\n\n<pre><code>fun readLastLine(file: File): String {\n    var lastLine = \"\"\n    file.forEachLine { line -&gt;\n        lastLine = line\n    }\n    return lastLine\n}\n</code></pre>\n\n<p>Or shorter,</p>\n\n<pre><code>fun readLastLine(file: File): String {\n    var lastLine = \"\"\n    file.forEachLine { lastLine = it }\n    return lastLine\n}\n</code></pre>\n\n<p>This uses <code>BufferedReader</code> and closes automatically internally: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/for-each-line.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/for-each-line.html</a></p>\n"}], "owner": {"reputation": 419, "user_id": 7394973, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4Vu2l.jpg?s=128&g=1", "display_name": "J.E.Tkaczyk", "link": "https://stackoverflow.com/users/7394973/j-e-tkaczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 49102442, "answer_count": 1, "score": 1, "last_activity_date": 1520437254, "creation_date": 1520213943, "last_edit_date": 1520437254, "question_id": 49102339, "link": "https://stackoverflow.com/questions/49102339/include-both-assignment-and-test-on-assigned-value-in-while-loop-for-kotlin", "title": "Include both assignment and test on assigned value in while loop for Kotlin", "body": "<p>I'm looking to find the last line of a text file using a rather standard while-loop idiom I find often used in Java.   </p>\n\n<p>I have a less compact version working. But the one I would like to use does not appear to be valid syntax in Kotlin. My preferred method includes an assignment and a <code>Boolean</code> test on that assignment in the same line. </p>\n\n<p>Admittedly this is a small matter, but I'm looking to better implement my Kotlin code.  </p>\n\n<pre><code>fun readLastLine(file:File):String {\n    val bufferedReader = file.bufferedReader()\n    var lastLine=\"\"\n\n    //valid\n    var current = bufferedReader.readLine()\n    while(current != null) {\n        lastLine=current\n        current = bufferedReader.readLine()\n    }\n    //return lastLine\n\n    //not valid...\n    //while((current=bufferedReader.readLine())!=null){\n    //    lastLine=current\n    //}\n\n   //responding to comment below, \n   //preferred/terse answer using file.readLines\n   //this reads all the lines into a list, then returns the last\n   return file.readLines().last()\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"tags": [], "owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "is_accepted": true, "score": 3, "last_activity_date": 1520409870, "creation_date": 1520409870, "answer_id": 49146895, "question_id": 49099862, "link": "https://stackoverflow.com/questions/49099862/kotlin-databinding-incompleteannotationexception-android-databinding-bindingbu/49146895#49146895", "title": "Kotlin DataBinding: IncompleteAnnotationException: android.databinding.BindingBuildInfo missing element", "body": "<p>Change your project <code>build.gradle</code> to the following:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.30'\n    ext.gradle_version = '3.0.1'\n\n    repositories {\n        jcenter()\n        google()\n    }\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$gradle_version\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n</code></pre>\n\n<p>and your app <code>build.gradle</code> to:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 27\n    buildToolsVersion '27.0.3'\n    flavorDimensions \"default\"\n\n    defaultConfig {\n        applicationId \"com.example.yourapp\"\n        versionCode 1\n        versionName \"1\"\n        minSdkVersion 16\n        targetSdkVersion 27\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    dataBinding {\n        enabled = true\n    }\n}\n\nkapt {\n    correctErrorTypes = true\n}\n\n\ndependencies {\n    // Kotlin\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n    // DataBinding with Kotlin\n    kapt \"com.android.databinding:compiler:$gradle_version\"\n}\n</code></pre>\n\n<p>You were using <code>3.0.1</code> as gradle version and <code>2.2.0-alpha4</code> for the kotlin data binding library. The two should match, for example <code>3.0.1</code> in the above code.</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 11027716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1qKFx.jpg?s=128&g=1", "display_name": "Mahmoud Zaher", "link": "https://stackoverflow.com/users/11027716/mahmoud-zaher"}, "is_accepted": false, "score": 0, "last_activity_date": 1555598769, "creation_date": 1555598769, "answer_id": 55748525, "question_id": 49099862, "link": "https://stackoverflow.com/questions/49099862/kotlin-databinding-incompleteannotationexception-android-databinding-bindingbu/55748525#55748525", "title": "Kotlin DataBinding: IncompleteAnnotationException: android.databinding.BindingBuildInfo missing element", "body": "<p>after many search the i found answer is pretty simple:</p>\n\n<p>just <strong>add</strong> this line in gradle app</p>\n\n<pre><code>//Data binding\ndataBinding.enabled = true\n</code></pre>\n\n<p>and <strong>remove</strong> this two lines :</p>\n\n<pre><code> apply plugin: 'kotlin-kapt'\n kapt \"com.android.databinding:compiler:$gradle_version\"\n</code></pre>\n"}], "owner": {"reputation": 4412, "user_id": 3520621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ccd79cc9e89f6eaf6f366b2c971567a?s=128&d=identicon&r=PG&f=1", "display_name": "MHogge", "link": "https://stackoverflow.com/users/3520621/mhogge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2669, "favorite_count": 0, "accepted_answer_id": 49146895, "answer_count": 2, "score": 4, "last_activity_date": 1555598769, "creation_date": 1520194019, "question_id": 49099862, "link": "https://stackoverflow.com/questions/49099862/kotlin-databinding-incompleteannotationexception-android-databinding-bindingbu", "title": "Kotlin DataBinding: IncompleteAnnotationException: android.databinding.BindingBuildInfo missing element", "body": "<p>I'm trying to use <code>Kotlin</code> with the <code>DataBinding</code> but I'm stuck with this error:</p>\n\n<pre><code>Error:[kapt] An exception occurred: java.lang.annotation.IncompleteAnnotationException: android.databinding.BindingBuildInfo missing element enableDebugLogs\n    at sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:81)\n    at com.sun.proxy.$Proxy25.enableDebugLogs(Unknown Source)\n    at android.databinding.annotationprocessor.BuildInfoUtil.load(BuildInfoUtil.java:35)\n    at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:59)\n    at org.jetbrains.kotlin.kapt3.ProcessorWrapper.process(annotationProcessing.kt:133)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:794)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:705)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1800(JavacProcessingEnvironment.java:91)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1035)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1176)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1170)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1068)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:89)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:46)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:226)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:181)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:93)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:97)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:107)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:84)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:374)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:64)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:101)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:365)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:130)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:161)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:63)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:108)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:52)\n    at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:395)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:97)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:909)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:97)\n    at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:939)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:908)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:394)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>My project <code>gradle</code>file:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.30'\n    ext.android_plugin_version = '2.2.0-alpha4'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.0.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:3.1.0'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n</code></pre>\n\n<p>And my <code>gradle</code> module file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 26\n    defaultConfig {\n        ...\n    }\n    buildTypes {\n        ...\n    }\n\n    dataBinding {\n        enabled = true\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\next {\n    supportLibraryVersion = '26.1.0'\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n\n    kapt \"com.android.databinding:compiler:$android_plugin_version\"\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n    implementation \"com.android.support:appcompat-v7:$supportLibraryVersion\"\n    implementation \"com.android.support:recyclerview-v7:$supportLibraryVersion\"\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation \"android.arch.lifecycle:extensions:1.1.0\"\n    implementation \"android.arch.lifecycle:common-java8:1.1.0\"\n\n    implementation 'com.google.firebase:firebase-database:11.8.0'\n\n    implementation 'eu.davidea:flexible-adapter:5.0.0-rc4'\n}\n\nkapt {\n    generateStubs = true\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "is_accepted": false, "score": 1, "last_activity_date": 1520189373, "creation_date": 1520189373, "answer_id": 49099082, "question_id": 49098717, "link": "https://stackoverflow.com/questions/49098717/com-android-volley-parseerror-org-json-jsonexception-value-yes-of-type-java-lang/49099082#49099082", "title": "com.android.volley.parseerror org.json.jsonexception value yes of type java.lang.String cannot be converted to JSONObject", "body": "<p>You need to set the <code>content-type</code> to <code>application/json</code> in the header for your POST request. For adding a custom header along with your POST request you might consider taking a look at <a href=\"https://www.varvet.com/blog/kotlin-with-volley/\" rel=\"nofollow noreferrer\">this tutorial</a>. </p>\n\n<p>I am copying the code example from the tutorial from the link above. </p>\n\n<pre><code>class ServiceVolley : ServiceInterface {\n    val TAG = ServiceVolley::class.java.simpleName\n    val basePath = \"https://your/backend/api/\"\n\n    override fun post(path: String, params: JSONObject, completionHandler: (response: JSONObject?) -&gt; Unit) {\n        val jsonObjReq = object : JsonObjectRequest(Method.POST, basePath + path, params,\n                Response.Listener&lt;JSONObject&gt; { response -&gt;\n                    Log.d(TAG, \"/post request OK! Response: $response\")\n                    completionHandler(response)\n                },\n                Response.ErrorListener { error -&gt;\n                    VolleyLog.e(TAG, \"/post request fail! Error: ${error.message}\")\n                    completionHandler(null)\n                }) {\n            @Throws(AuthFailureError::class)\n            override fun getHeaders(): Map&lt;String, String&gt; {\n                val headers = HashMap&lt;String, String&gt;()\n                headers.put(\"Content-Type\", \"application/json\")\n                return headers\n            }\n        }\n\n        BackendVolley.instance?.addToRequestQueue(jsonObjReq, TAG)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9442485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353349d940e9dc4e5b8bc97046fbe143?s=128&d=identicon&r=PG&f=1", "display_name": "siddharth", "link": "https://stackoverflow.com/users/9442485/siddharth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1381, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520189373, "creation_date": 1520187379, "last_edit_date": 1520188614, "question_id": 49098717, "link": "https://stackoverflow.com/questions/49098717/com-android-volley-parseerror-org-json-jsonexception-value-yes-of-type-java-lang", "title": "com.android.volley.parseerror org.json.jsonexception value yes of type java.lang.String cannot be converted to JSONObject", "body": "<p>I want to get data from php file after putting the value m (String) in <code>JSONObject</code> and give result in <code>TextView</code> i.e. <code>mResultTextView</code>. However, this is giving me the following error.</p>\n\n<blockquote>\n  <p>com.android.volley.parseerror org.json.jsonexception value yes of type\n  java.lang.String cannot be converted to JSONObject</p>\n</blockquote>\n\n<pre><code>var m = barcode.displayValue.toString()\nval jsonobj = JSONObject()\n\njsonobj.put(\"email\", m)\nval url = \"http://192.168.1.106/verf1.php\"\nval que = Volley.newRequestQueue(this@MainActivity)\n\nval req = JsonObjectRequest(Request.Method.POST, url, jsonobj, Response.Listener {\n    response -&gt; mResultTextView.text = response.toString()\n},Response.ErrorListener {\n    response -&gt; mResultTextView.text = response.toString()\n})\nque.add(req)\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1440, "user_id": 9395652, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1LCyW.jpg?s=128&g=1", "display_name": "esu", "link": "https://stackoverflow.com/users/9395652/esu"}, "edited": false, "score": 1, "creation_date": 1520186881, "post_id": 49098590, "comment_id": 85202472, "body": "But here setImageResource() function wont accept null as it accepts non-null type Int only"}, {"owner": {"reputation": 1576, "user_id": 4907864, "user_type": "registered", "profile_image": "https://graph.facebook.com/1067168283310551/picture?type=large", "display_name": "Szymon Chaber", "link": "https://stackoverflow.com/users/4907864/szymon-chaber"}, "reply_to_user": {"reputation": 1440, "user_id": 9395652, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1LCyW.jpg?s=128&g=1", "display_name": "esu", "link": "https://stackoverflow.com/users/9395652/esu"}, "edited": false, "score": 0, "creation_date": 1520187124, "post_id": 49098590, "comment_id": 85202564, "body": "Oh, sorry, I was answering from my memory; try edited version"}], "tags": [], "owner": {"reputation": 1576, "user_id": 4907864, "user_type": "registered", "profile_image": "https://graph.facebook.com/1067168283310551/picture?type=large", "display_name": "Szymon Chaber", "link": "https://stackoverflow.com/users/4907864/szymon-chaber"}, "is_accepted": true, "score": 1, "last_activity_date": 1520187085, "last_edit_date": 1520187085, "creation_date": 1520186679, "answer_id": 49098590, "question_id": 49098375, "link": "https://stackoverflow.com/questions/49098375/how-to-reset-the-resource-of-image-view-in-android/49098590#49098590", "title": "How to reset the resource of image view in android?", "body": "<p>Just call it with a \"0\" parameter before doing anything else:</p>\n\n<pre><code>status_image.setImageResource(0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 9158170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ee0cf357ef804bb7035f53d3ecaaab?s=128&d=identicon&r=PG&f=1", "display_name": "RomanS", "link": "https://stackoverflow.com/users/9158170/romans"}, "is_accepted": false, "score": 1, "last_activity_date": 1520194659, "last_edit_date": 1520194659, "creation_date": 1520194335, "answer_id": 49099918, "question_id": 49098375, "link": "https://stackoverflow.com/questions/49098375/how-to-reset-the-resource-of-image-view-in-android/49099918#49099918", "title": "How to reset the resource of image view in android?", "body": "<p>Nullability of drawable content is your friend, AndroidDocs nailed it: <a href=\"https://developer.android.com/reference/android/widget/ImageView.html#setImageDrawable(android.graphics.drawable.Drawable)\" rel=\"nofollow noreferrer\">setImageDrawable</a></p>\n\n<p>So in your case <code>statusImageView.setImageDrawable(null)</code></p>\n"}, {"tags": [], "owner": {"reputation": 10501, "user_id": 4070469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OKYPb.png?s=128&g=1", "display_name": "Mauker", "link": "https://stackoverflow.com/users/4070469/mauker"}, "is_accepted": false, "score": 1, "last_activity_date": 1529070933, "last_edit_date": 1529070933, "creation_date": 1520217813, "answer_id": 49102738, "question_id": 49098375, "link": "https://stackoverflow.com/questions/49098375/how-to-reset-the-resource-of-image-view-in-android/49102738#49102738", "title": "How to reset the resource of image view in android?", "body": "<p>Try to set the <code>ImageView</code> to transparent. Then change it back to the resource you want.</p>\n\n<pre><code>status_image.setImageResource(android.R.color.transparent)\n</code></pre>\n\n<p>Another option is to use some third party lib to handle the images for you as well, like <a href=\"https://github.com/bumptech/glide\" rel=\"nofollow noreferrer\">Glide</a>, <a href=\"http://frescolib.org/\" rel=\"nofollow noreferrer\">Fresco</a>, or <a href=\"http://square.github.io/picasso/\" rel=\"nofollow noreferrer\">Picasso</a>.</p>\n"}], "owner": {"reputation": 1440, "user_id": 9395652, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1LCyW.jpg?s=128&g=1", "display_name": "esu", "link": "https://stackoverflow.com/users/9395652/esu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 0, "accepted_answer_id": 49098590, "answer_count": 3, "score": 2, "last_activity_date": 1529070933, "creation_date": 1520185465, "question_id": 49098375, "link": "https://stackoverflow.com/questions/49098375/how-to-reset-the-resource-of-image-view-in-android", "title": "How to reset the resource of image view in android?", "body": "<p>Trying to change the image in imageView dynamically based on the status. </p>\n\n<p>Image changed successfully but problem is walk image overwrite on the run image. I want to clear the existing image and then set the new image. </p>\n\n<p><code>status_image.setImageResource(if(runningState == RunningState.FAST) R.drawable.ic_run_fast else R.drawable.ic_walk)</code></p>\n"}, {"tags": ["android", "git", "gradle", "kotlin", "bintray"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 11467234, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mJ8fQM_oyPg/AAAAAAAAAAI/AAAAAAAAAEE/xEF8wedlRVA/photo.jpg?sz=128", "display_name": "Adarsh Sahu", "link": "https://stackoverflow.com/users/11467234/adarsh-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1591539850, "creation_date": 1591539850, "answer_id": 62246746, "question_id": 49098116, "link": "https://stackoverflow.com/questions/49098116/error-could-not-find-method-install-for-arguments-on-root-project-of-type-org/62246746#62246746", "title": "Error: Could not find method install() for arguments on root project of type org.gradle.api.Project", "body": "<p>you forgot to apply\napply plugin: 'com.github.dcendents.android-maven'</p>\n"}], "owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1591539850, "creation_date": 1520183916, "last_edit_date": 1520414731, "question_id": 49098116, "link": "https://stackoverflow.com/questions/49098116/error-could-not-find-method-install-for-arguments-on-root-project-of-type-org", "title": "Error: Could not find method install() for arguments on root project of type org.gradle.api.Project", "body": "<p>I am creating an Android library. I tried to integrate this library to Bintray using <a href=\"http://blogs.quovantis.com/how-to-publish-android-library-on-bintrayjcenter/\" rel=\"nofollow noreferrer\">this</a> tutorial. On building the project, I got this error:</p>\n\n<pre><code>Could not find method install() for arguments [installv_f1q320zaw5jcqpyp599i07j5x$_run_closure1@4c1c47ec] on root project 'Studio' of type org.gradle.api.Project.\n</code></pre>\n\n<p>Module level build.gradle:</p>\n\n<pre><code>    apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 26\n    defaultConfig {\n        applicationId \"malwinder.water\"\n        minSdkVersion 14\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:26.1.0'\n    compile 'com.google.code.gson:gson:2.8.2'\n}\n</code></pre>\n\n<p>Main build.gradle:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.2.21'\n    ext.kotlin_version = '1.2.0'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.0-alpha06'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7'\n        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.5'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\next {\n    bintrayRepo = 'ModelPreferences' // your repo name\n    bintrayName = 'ModelPreferences' // has to be same as your library module name\n    publishedGroupId = 'malwinder.water' // your module package name\n    libraryName = 'ModelPreferences'\n    artifact = 'ModelPreferences' // has to be same as your library module name\n    libraryDescription = 'Android library for saving or reading any model object in Preferences'\n    siteUrl = 'https://github.com/malwinder-s/ModelPreferences'\n    gitUrl = 'https://github.com/malwinder-s/ModelPreferences.git'\n    libraryVersion = '1.0'\n    developerId = 'malwinder-s'\n    developerName = 'Malwinder Singh'\n    developerEmail = 'my_email_address@gmail.com'\n    licenseName = 'The Apache Software License, Version 2.0'\n    licenseUrl = 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n    allLicenses = [\"Apache-2.0\"]\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\napply from: 'https://raw.githubusercontent.com/numetriclabz/jcenter/master/installv.gradle'\napply from: 'https://raw.githubusercontent.com/numetriclabz/jcenter/master/bintrayv.gradle'\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>    org.gradle.api.GradleScriptException: A problem occurred evaluating script.\n    at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:92)\n    at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl$2.run(DefaultScriptPluginFactory.java:204)\n    at org.gradle.configuration.DefaultScriptTarget.addConfiguration(DefaultScriptTarget.java:74)\n    at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:209)\n    at org.gradle.configuration.BuildOperationScriptPlugin$1.run(BuildOperationScriptPlugin.java:61)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.configuration.BuildOperationScriptPlugin.apply(BuildOperationScriptPlugin.java:58)\n    at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.applyScript(DefaultObjectConfigurationAction.java:109)\n    at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.access$000(DefaultObjectConfigurationAction.java:38)\n    at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction$1.run(DefaultObjectConfigurationAction.java:68)\n    at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.execute(DefaultObjectConfigurationAction.java:143)\n    at org.gradle.api.internal.project.AbstractPluginAware.apply(AbstractPluginAware.java:46)\n    at org.gradle.api.internal.project.ProjectScript.apply(ProjectScript.java:34)\n    at org.gradle.api.Script$apply.callCurrent(Unknown Source)\n    at build_bae0yaz5njikzfzwnnse0ignr.run(/Users/malwinderpalsingh/Desktop/Project/Studio/build.gradle:44)\n    at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:90)\n    at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl$2.run(DefaultScriptPluginFactory.java:204)\n    at org.gradle.configuration.ProjectScriptTarget.addConfiguration(ProjectScriptTarget.java:77)\n    at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:209)\n    at org.gradle.configuration.BuildOperationScriptPlugin$1.run(BuildOperationScriptPlugin.java:61)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.configuration.BuildOperationScriptPlugin.apply(BuildOperationScriptPlugin.java:58)\n    at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:41)\n    at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:26)\n    at org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.doConfigure(LifecycleProjectEvaluator.java:64)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.access$100(LifecycleProjectEvaluator.java:34)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator$ConfigureProject.run(LifecycleProjectEvaluator.java:110)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:50)\n    at org.gradle.api.internal.project.DefaultProject.evaluate(DefaultProject.java:667)\n    at org.gradle.api.internal.project.DefaultProject.evaluate(DefaultProject.java:136)\n    at org.gradle.execution.TaskPathProjectEvaluator.configure(TaskPathProjectEvaluator.java:35)\n    at org.gradle.execution.TaskPathProjectEvaluator.configureHierarchy(TaskPathProjectEvaluator.java:60)\n    at org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:38)\n    at org.gradle.initialization.DefaultGradleLauncher$ConfigureBuild.run(DefaultGradleLauncher.java:249)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.initialization.DefaultGradleLauncher.configureBuild(DefaultGradleLauncher.java:167)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:126)\n    at org.gradle.initialization.DefaultGradleLauncher.getConfiguredBuild(DefaultGradleLauncher.java:104)\n    at org.gradle.internal.invocation.GradleBuildController$2.call(GradleBuildController.java:87)\n    at org.gradle.internal.invocation.GradleBuildController$2.call(GradleBuildController.java:84)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:152)\n    at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:100)\n    at org.gradle.internal.invocation.GradleBuildController.configure(GradleBuildController.java:84)\n    at org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:64)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$1.run(RunAsBuildOperationBuildActionRunner.java:43)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:40)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:51)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:49)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:32)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:80)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:53)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:57)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:32)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:59)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:44)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:45)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:30)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method install() for arguments [installv_f1q320zaw5jcqpyp599i07j5x$_run_closure1@60fa037d] on root project 'Studio' of type org.gradle.api.Project.\n    at org.gradle.internal.metaobject.AbstractDynamicObject.methodMissingException(AbstractDynamicObject.java:179)\n    at org.gradle.groovy.scripts.BasicScript$ScriptDynamicObject.methodMissingException(BasicScript.java:161)\n    at org.gradle.internal.metaobject.AbstractDynamicObject.invokeMethod(AbstractDynamicObject.java:164)\n    at org.gradle.groovy.scripts.BasicScript.invokeMethod(BasicScript.java:83)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:75)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:166)\n    at installv_f1q320zaw5jcqpyp599i07j5x.run(https://raw.githubusercontent.com/numetriclabz/jcenter/master/installv.gradle:5)\n    at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:90)\n    ... 115 more\n</code></pre>\n"}, {"tags": ["javascript", "kotlin", "requirejs"], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 4833867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh4.googleusercontent.com/-A93LCQjF0Z8/AAAAAAAAAAI/AAAAAAAATDc/gtVrwgohW5c/photo.jpg?sz=128", "display_name": "King Natsu", "link": "https://stackoverflow.com/users/4833867/king-natsu"}, "is_accepted": false, "score": 0, "last_activity_date": 1520269542, "creation_date": 1520269542, "answer_id": 49115807, "question_id": 49097351, "link": "https://stackoverflow.com/questions/49097351/cant-create-object-from-required-module-in-kotlinjs/49115807#49115807", "title": "Can&#39;t create object from required module in Kotlinjs", "body": "<p>Apparently, there's a <code>js(code: String)</code> function. The right way to do this was to use call the constructor like this:</p>\n\n<pre><code>val client = js(\"new module.SampleClass();\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 9590596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anton Bannykh", "link": "https://stackoverflow.com/users/9590596/anton-bannykh"}, "is_accepted": false, "score": 0, "last_activity_date": 1522761785, "creation_date": 1522761785, "answer_id": 49631228, "question_id": 49097351, "link": "https://stackoverflow.com/questions/49097351/cant-create-object-from-required-module-in-kotlinjs/49631228#49631228", "title": "Can&#39;t create object from required module in Kotlinjs", "body": "<p>Defining <code>require</code> function isnot the best way to work with modules in Kotlin.</p>\n\n<p>Check out the <a href=\"https://kotlinlang.org/docs/reference/js-modules.html#jsmodule-annotation\" rel=\"nofollow noreferrer\"><code>@JsModule</code></a> annotation and the <a href=\"https://kotlinlang.org/docs/reference/js-interop.html#external-modifier\" rel=\"nofollow noreferrer\"><code>external</code></a> modifier. Using those two you can tell the compiler which module to <code>require</code> and how exactly the JS API of that module looks like.</p>\n\n<p>In your case your code could look something like this:</p>\n\n<pre><code>// Module.kt\n@file:JsModule(\"module\")\n\npackage module\n\nexternal class SomeClass() {}\n\n// Main.kt\nimport module.SampleClass\n\nfun main(args: Array&lt;String&gt;) {\n   val myObject = SampleClass()\n}\n</code></pre>\n\n<p>Also check out <a href=\"https://github.com/kotlin/js-externals\" rel=\"nofollow noreferrer\">https://github.com/kotlin/js-externals</a> for external declaration examples and some useful links.</p>\n\n<p>P.S. Don't forget to set the module kind to CommonJS (File -> Settings -> ...)</p>\n"}], "owner": {"reputation": 461, "user_id": 4833867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh4.googleusercontent.com/-A93LCQjF0Z8/AAAAAAAAAAI/AAAAAAAATDc/gtVrwgohW5c/photo.jpg?sz=128", "display_name": "King Natsu", "link": "https://stackoverflow.com/users/4833867/king-natsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1522761785, "creation_date": 1520179522, "last_edit_date": 1520268058, "question_id": 49097351, "link": "https://stackoverflow.com/questions/49097351/cant-create-object-from-required-module-in-kotlinjs", "title": "Can&#39;t create object from required module in Kotlinjs", "body": "<p>As far as I know, you have to declare <code>require()</code> like this in kotlin:</p>\n\n<pre><code>external fun require(module: String): dynamic\n</code></pre>\n\n<h3>Usage</h3>\n\n<pre><code>val module = require(\"module\")\n</code></pre>\n\n<p>But when using this, I came across this strange problem:</p>\n\n<pre><code>var myObject = module.SampleClass();\n                      ^\nTypeError: Class constructor SampleClass cannot be invoked without 'new'\n</code></pre>\n\n<p>Prepending the word <code>new</code> breaks the code. What should I do In this situation?</p>\n\n<p><a href=\"https://discord.js.org/#/docs/main/stable/class/Client\" rel=\"nofollow noreferrer\">Link to the object I tried to create</a></p>\n\n<h2>UPDATE</h2>\n\n<p>When looking at the compiled javascript file I realized something. </p>\n\n<p>The code I actually wrote</p>\n\n<pre><code>val myObject = module.SampleClass()\n</code></pre>\n\n<p>Compiled code</p>\n\n<pre><code>var myObject = module.SampleClass();\n</code></pre>\n\n<p>It makes sense, that this error is thrown when there's actually no <code>new</code> in front of the constructor call. Is there something like a keyword or function I should call in that case?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "popupwindow", "motionevent"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 7225457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a2906cb39391cc1022ab814531d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7225457/anonymous"}, "edited": false, "score": 0, "creation_date": 1520263737, "post_id": 49103298, "comment_id": 85232652, "body": "Thanks, for answer. It working fine. But I want to use custom view popup created from inflate. Is it possible in PopupMenu or ListPopupWindow?"}, {"owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "reply_to_user": {"reputation": 101, "user_id": 7225457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a2906cb39391cc1022ab814531d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7225457/anonymous"}, "edited": false, "score": 0, "creation_date": 1520299339, "post_id": 49103298, "comment_id": 85249569, "body": "Not easily, I don&#39;t think, but you could try looking at the implementation of those other methods and see if you can do something similar."}, {"owner": {"reputation": 101, "user_id": 7225457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a2906cb39391cc1022ab814531d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7225457/anonymous"}, "edited": false, "score": 0, "creation_date": 1520317012, "post_id": 49103298, "comment_id": 85253857, "body": "Thanks for help, I will try it. But maybe there is some other way to solve this problem without menu?"}], "tags": [], "owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1520222466, "creation_date": 1520222466, "answer_id": 49103298, "question_id": 49097224, "link": "https://stackoverflow.com/questions/49097224/intercept-motion-event-from-recyclerview-in-opened-popupwindow/49103298#49103298", "title": "Intercept motion event from RecyclerView in opened PopupWindow", "body": "<p>If you can refactor to using a <code>PopupMenu</code>, then I think <a href=\"https://developer.android.com/reference/android/widget/PopupMenu.html#getDragToOpenListener()\" rel=\"nofollow noreferrer\"><code>PopupMenu.getDragToOpenListener()</code></a> will do what you want. Similar for <a href=\"https://developer.android.com/reference/android/widget/ListPopupWindow.html#createDragToOpenListener(android.view.View)\" rel=\"nofollow noreferrer\"><code>ListPopupWindow.createDragToOpenListener()</code></a>. </p>\n\n<p>You could also look at the implementation of those methods for inspiration in creating your own.</p>\n"}], "owner": {"reputation": 101, "user_id": 7225457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a2906cb39391cc1022ab814531d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7225457/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520334315, "creation_date": 1520178702, "last_edit_date": 1520334315, "question_id": 49097224, "link": "https://stackoverflow.com/questions/49097224/intercept-motion-event-from-recyclerview-in-opened-popupwindow", "title": "Intercept motion event from RecyclerView in opened PopupWindow", "body": "<p>In my case I want to open <code>PopupWindow</code> by long press on <code>ViewHolder</code> item and process motion event in this window without removing finger. How can I achieve this?</p>\n\n<p>I trying to open <code>CustomPopupWindow</code> by follow: </p>\n\n<pre><code>override fun onBindViewHolder(holder: Item, position: Int) {\n    val item = items[position]\n    holder.bindView(testItem)\n    holder.itemView.view.setOnLongClickListener {    \n        val inflater = LayoutInflater.from(parent?.context)\n        val view = inflater.inflate(R.layout.popup_window, null)\n        val popupMenu = CustomPopupWindow(view, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)\n        popupMenu.elevation = 5f\n        popupMenu.showAsDropDown(holder.itemView.view)\n        true\n    }\n}\n</code></pre>\n\n<p>and after that disable scrolling in <code>RecyclerView</code>:</p>\n\n<pre><code>class CustomLayoutManager(context: Context) : LinearLayoutManager(context) {\n\n    var scrollEnabled: Boolean = true\n\n    override fun canScrollVertically(): Boolean {\n        return scrollEnabled\n    }\n}\n</code></pre>\n\n<p>Here my <code>CustomPopupWindow</code>:</p>\n\n<pre><code>class CustomPopupWindow(contentView: View?, width: Int, height: Int) : PopupWindow(contentView, width, height), View.OnTouchListener {\n\n    init {\n        contentView?.setOnTouchListener(this)\n        setTouchInterceptor(this)\n    }\n\n    override fun onTouch(v: View?, event: MotionEvent?): Boolean {\n        when (event?.action) {\n            MotionEvent.ACTION_DOWN -&gt; {\n                Log.i(\"Touch\", \"Touch\")\n            }\n            MotionEvent.ACTION_MOVE -&gt; {\n                Log.i(\"Touch\", \"Event {${event.x}; ${event.y}}\")\n            }\n            MotionEvent.ACTION_UP-&gt; {\n                Log.i(\"Touch\", \"Up\")\n            }\n        }\n        return true\n    }\n}\n</code></pre>\n\n<p>In this case <code>onTouch()</code> event never called in <code>CustomPopupWindow</code> only if I remove finger and tap again.</p>\n\n<p>Thanks advance!</p>\n\n<p><strong>SOLVED</strong></p>\n\n<p>I solved this by adding a touch listener to the anchor view:</p>\n\n<pre><code>holder.itemView.view.setOnLongClickListener {    \n    val inflater = LayoutInflater.from(parent?.context)\n    val view = inflater.inflate(R.layout.popup_window, null)\n    val popupMenu = CustomPopupWindow(view, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)\n    popupMenu.elevation = 5f\n    it.setOnTouchListener(popupMenu) // solution\n    popupMenu.showAsDropDown(it)\n    true\n}\n</code></pre>\n\n<p>Thanks <a href=\"https://stackoverflow.com/questions/49097224/intercept-motion-event-from-recyclerview-in-opened-popupwindow#answer-49103298\">@Brucelet</a></p>\n"}, {"tags": ["collections", "kotlin", "nullable"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1520178454, "post_id": 49097130, "comment_id": 85199389, "body": "Just a nitpick: <code>?.let</code> isn&#39;t a keyword, it&#39;s a call to the extension function <code>let</code> using the <code>?.</code> safe call operator."}, {"owner": {"reputation": 2799, "user_id": 4342778, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1npNb.jpg?s=128&g=1", "display_name": "Goltsev Eugene", "link": "https://stackoverflow.com/users/4342778/goltsev-eugene"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1520178649, "post_id": 49097130, "comment_id": 85199463, "body": "Thanks, I just started with Kotlin, so may confuse with such a things now )"}], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 4342778, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1npNb.jpg?s=128&g=1", "display_name": "Goltsev Eugene", "link": "https://stackoverflow.com/users/4342778/goltsev-eugene"}, "edited": false, "score": 0, "creation_date": 1520178533, "post_id": 49097158, "comment_id": 85199427, "body": "Yeah, thanks a lot, but resulting map is <code>Map&lt;Int?, Somedata&gt;</code>, and I need <code>HashMap&lt;Int, Somedata&gt;</code>, ideas to do that?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 2799, "user_id": 4342778, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1npNb.jpg?s=128&g=1", "display_name": "Goltsev Eugene", "link": "https://stackoverflow.com/users/4342778/goltsev-eugene"}, "edited": false, "score": 0, "creation_date": 1520178609, "post_id": 49097158, "comment_id": 85199449, "body": "@GoltsevEugene oops. I edited my answer, it should work (I can&#39;t test it right now, so it may require slight modification.)"}, {"owner": {"reputation": 2799, "user_id": 4342778, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1npNb.jpg?s=128&g=1", "display_name": "Goltsev Eugene", "link": "https://stackoverflow.com/users/4342778/goltsev-eugene"}, "edited": false, "score": 0, "creation_date": 1520178788, "post_id": 49097158, "comment_id": 85199516, "body": "Seems to work now, will check it and need some time now to understand all of this ;) Thanks a lot!!"}], "tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 8, "last_activity_date": 1520178544, "last_edit_date": 1520178544, "creation_date": 1520178279, "answer_id": 49097158, "question_id": 49097130, "link": "https://stackoverflow.com/questions/49097130/kotlin-convert-list-with-nullables-to-hashmap-without-nullables/49097158#49097158", "title": "Kotlin convert List with nullables to HashMap without nullables", "body": "<p>You can do:</p>\n\n<pre><code>list.mapNotNull { e -&gt; e.id?.let { it to e } }.toMap()\n</code></pre>\n\n<p>Breakdown:</p>\n\n<p>The call to <code>.let</code> with the <code>?.</code> safe call operator will make the result <code>null</code> if the element is null.</p>\n\n<p>So the lambda passed to <code>mapNotNull</code> is of type <code>(Somedata) -&gt; Pair&lt;IdType, Somedata&gt;</code>.</p>\n\n<p><code>mapNotNull</code> discards the null pairs, and <code>toMap</code> turns the resulting <code>List&lt;Pair&lt;IdType, Somedata&gt;&gt;</code> into a <code>Map&lt;IdType, Somedata&gt;</code>.</p>\n\n<p>If you want to avoid the creation of an intermediate list to hold the pairs, you can turn the list into a lazy <code>Sequence</code> from the start:</p>\n\n<pre><code>list.asSequence().mapNotNull { e -&gt; e.id?.let { it to e } }.toMap()\n</code></pre>\n\n<p>Alternatively, since you asked:</p>\n\n<blockquote>\n  <p>why should I use !! keyword in associateTo method, when above I filtered it with non-null values only.</p>\n</blockquote>\n\n<p>this is because the list is still of type <code>List&lt;Somedata&gt;</code> - this says nothing about the nullability of the <em>field</em> itself. The compiler does not know that the <code>id</code> fields are <em>still</em> not null, by the time your <code>associateTo</code> call is executed.</p>\n"}], "owner": {"reputation": 2799, "user_id": 4342778, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1npNb.jpg?s=128&g=1", "display_name": "Goltsev Eugene", "link": "https://stackoverflow.com/users/4342778/goltsev-eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 49097158, "answer_count": 1, "score": 2, "last_activity_date": 1520178544, "creation_date": 1520178128, "question_id": 49097130, "link": "https://stackoverflow.com/questions/49097130/kotlin-convert-list-with-nullables-to-hashmap-without-nullables", "title": "Kotlin convert List with nullables to HashMap without nullables", "body": "<p>I have incoming param <code>List&lt;Somedata&gt;</code>.<br><code>Somedata</code> class contains <code>id</code> field.<br><br>\n<strong>My goal</strong> is to make <code>HashMap&lt;Somedata.id, Somedata&gt;</code> from this <code>list</code>.</p>\n\n<p>Is next approach correct or there is a better/safer way to do that?</p>\n\n<pre><code>list\n    .filter { it.id != null }\n    .associateTo(HashMap(), {it.id!! to it})\n</code></pre>\n\n<p>Actually, I cannot understand, why should I use <code>!!</code> keyword in <code>associateTo</code> method, when above I filtered it with non-null values only.</p>\n\n<p>Or maybe there is a good way to perform this with <code>?.</code> or <code>?.let</code> keywords?</p>\n"}, {"tags": ["java", "android", "html", "kotlin", "text-manipulation"], "comments": [{"owner": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1520175726, "post_id": 49096521, "comment_id": 85198475, "body": "Isn&#39;t it easier to generate the &quot;preview&quot; <i>before</i> the user text is converted to HTML?"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "reply_to_user": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1520177208, "post_id": 49096521, "comment_id": 85198962, "body": "@assylias How exactly ? I don&#39;t understand what you mean."}, {"owner": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1520177289, "post_id": 49096521, "comment_id": 85198997, "body": "You say &quot;We allow the user to create some text that will get converted to HTML&quot; =&gt; can&#39;t you store the beginning of that text before it&#39;s converted to HTML and use that as a (unformatted) preview?"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "reply_to_user": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1520177895, "post_id": 49096521, "comment_id": 85199217, "body": "@assylias I still don&#39;t understand. How could you truncate HTML, before it&#39;s HTML ? We want to handle lists too (numbered/bullets). In any case, this is a very large library (uses spans), so I&#39;m not sure how complex such a thing would be."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "reply_to_user": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1520178913, "post_id": 49096521, "comment_id": 85199554, "body": "@assylias I&#39;ve updated the question to make sure it&#39;s clear: we need minimized version of the HTML, while still somehow showing at least the lists. It can become plain text, but lists will still be visible (using spacial characters, for example), and don&#39;t forget about going to the next line..."}], "answers": [{"tags": [], "owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "is_accepted": true, "score": 0, "last_activity_date": 1520422513, "last_edit_date": 1520422513, "creation_date": 1520420954, "answer_id": 49150449, "question_id": 49096521, "link": "https://stackoverflow.com/questions/49096521/how-to-truncate-html-string-to-be-used-as-a-preview-version-of-the-original/49150449#49150449", "title": "How to truncate HTML string, to be used as a &quot;preview&quot; version of the original?", "body": "<p>OK, I think I got it, using my old code for converting XML string into an object . It would still be great to see more robust solutions, but I think what I got is good enough, at least for now.</p>\n\n<p>Below code uses it (origininal XmlTag class available <a href=\"https://stackoverflow.com/a/19115036/878126\"><strong>here</strong></a>) :</p>\n\n<p><strong>XmlTagTruncationHelper.kt</strong></p>\n\n<pre><code>object XmlTagTruncationHelper {\n    /**@param maxLines max lines to permit. If &lt;0, means there is no restriction\n     * @param maxTextCharacters max text characters to permit. If &lt;0, means there is no restriction*/\n    class Restriction(val maxTextCharacters: Int, val maxLines: Int) {\n        var currentTextCharactersCount: Int = 0\n        var currentLinesCount: Int = 0\n    }\n\n    @JvmStatic\n    fun truncateXmlTag(xmlTag: XmlTag, restriction: Restriction): String {\n        if (restriction.maxLines == 0 || (restriction.maxTextCharacters &gt;= 0 &amp;&amp; restriction.currentTextCharactersCount &gt;= restriction.maxTextCharacters))\n            return \"\"\n        val sb = StringBuilder()\n        sb.append(\"&lt;\").append(xmlTag.tagName)\n        val numberOfAttributes = if (xmlTag.tagAttributes != null) xmlTag.tagAttributes!!.size else 0\n        if (numberOfAttributes != 0)\n            for ((key, value) in xmlTag.tagAttributes!!)\n                sb.append(\" \").append(key).append(\"=\\\"\").append(value).append(\"\\\"\")\n        val numberOfInnerContent = if (xmlTag.innerTagsAndContent != null) xmlTag.innerTagsAndContent!!.size else 0\n        if (numberOfInnerContent == 0)\n            sb.append(\"/&gt;\")\n        else {\n            sb.append(\"&gt;\")\n            for (innerItem in xmlTag.innerTagsAndContent!!) {\n                if (restriction.maxTextCharacters &gt;= 0 &amp;&amp; restriction.currentTextCharactersCount &gt;= restriction.maxTextCharacters)\n                    break\n                if (innerItem is XmlTag) {\n                    if (restriction.maxLines &lt; 0)\n                        sb.append(truncateXmlTag(innerItem, restriction))\n                    else {\n//                    Log.d(\"AppLog\", \"xmlTag:\" + innerItem.tagName + \" \" + innerItem.innerTagsAndContent?.size)\n                        var needToBreak = false\n                        when {\n                            innerItem.tagName == \"br\" -&gt; {\n                                ++restriction.currentLinesCount\n                                needToBreak = restriction.currentLinesCount &gt;= restriction.maxLines\n                            }\n                            innerItem.tagName == \"li\" -&gt; {\n                                ++restriction.currentLinesCount\n                                needToBreak = restriction.currentLinesCount &gt;= restriction.maxLines\n                            }\n                        }\n                        if (needToBreak)\n                            break\n                        sb.append(truncateXmlTag(innerItem, restriction))\n                    }\n                } else if (innerItem is String) {\n                    if (restriction.maxTextCharacters &lt; 0)\n                        sb.append(innerItem)\n                    else\n                        if (restriction.currentTextCharactersCount &lt; restriction.maxTextCharacters) {\n                            val str = innerItem\n                            val extraCharactersAllowedToAdd = restriction.maxTextCharacters - restriction.currentTextCharactersCount\n                            val strToAdd = str.substring(0, Math.min(str.length, extraCharactersAllowedToAdd))\n                            if (strToAdd.isNotEmpty()) {\n                                sb.append(strToAdd)\n                                restriction.currentTextCharactersCount += strToAdd.length\n                            }\n                        }\n                }\n            }\n            sb.append(\"&lt;/\").append(xmlTag.tagName).append(\"&gt;\")\n        }\n        return sb.toString()\n    }\n}\n</code></pre>\n\n<p><strong>XmlTag.kt</strong></p>\n\n<pre><code>//based on https://stackoverflow.com/a/19115036/878126\n/**\n * an xml tag , includes its name, value and attributes\n * @param tagName the name of the xml tag . for example : &lt;a&gt;b&lt;/a&gt; . the name of the tag is \"a\"\n */\nclass XmlTag(val tagName: String) {\n    /** a hashmap of all of the tag attributes. example: &lt;a c=\"d\" e=\"f\"&gt;b&lt;/a&gt; . attributes: {{\"c\"=\"d\"},{\"e\"=\"f\"}}     */\n    @JvmField\n    var tagAttributes: HashMap&lt;String, String&gt;? = null\n    /**list of inner text and xml tags*/\n    @JvmField\n    var innerTagsAndContent: ArrayList&lt;Any&gt;? = null\n\n    companion object {\n        @JvmStatic\n        fun getXmlFromString(input: String): XmlTag? {\n            val factory = XmlPullParserFactory.newInstance()\n            factory.isNamespaceAware = true\n            val xpp = factory.newPullParser()\n            xpp.setInput(StringReader(input))\n            return getXmlRootTagOfXmlPullParser(xpp)\n        }\n\n        @JvmStatic\n        fun getXmlRootTagOfXmlPullParser(xmlParser: XmlPullParser): XmlTag? {\n            var currentTag: XmlTag? = null\n            var rootTag: XmlTag? = null\n            val tagsStack = Stack&lt;XmlTag&gt;()\n            xmlParser.next()\n            var eventType = xmlParser.eventType\n            var doneParsing = false\n            while (eventType != XmlPullParser.END_DOCUMENT &amp;&amp; !doneParsing) {\n                when (eventType) {\n                    XmlPullParser.START_DOCUMENT -&gt; {\n                    }\n                    XmlPullParser.START_TAG -&gt; {\n                        val xmlTagName = xmlParser.name\n                        currentTag = XmlTag(xmlTagName)\n                        if (tagsStack.isEmpty())\n                            rootTag = currentTag\n                        tagsStack.push(currentTag)\n                        val numberOfAttributes = xmlParser.attributeCount\n                        if (numberOfAttributes &gt; 0) {\n                            val attributes = HashMap&lt;String, String&gt;(numberOfAttributes)\n                            for (i in 0 until numberOfAttributes) {\n                                val attrName = xmlParser.getAttributeName(i)\n                                val attrValue = xmlParser.getAttributeValue(i)\n                                attributes[attrName] = attrValue\n                            }\n                            currentTag.tagAttributes = attributes\n                        }\n                    }\n                    XmlPullParser.END_TAG -&gt; {\n                        currentTag = tagsStack.pop()\n                        if (!tagsStack.isEmpty()) {\n                            val parentTag = tagsStack.peek()\n                            parentTag.addInnerXmlTag(currentTag)\n                            currentTag = parentTag\n                        } else\n                            doneParsing = true\n                    }\n                    XmlPullParser.TEXT -&gt; {\n                        val innerText = xmlParser.text\n                        if (currentTag != null)\n                            currentTag.addInnerText(innerText)\n                    }\n                }\n                eventType = xmlParser.next()\n            }\n            return rootTag\n        }\n\n        /**returns the root xml tag of the given xml resourceId , or null if not succeeded . */\n        fun getXmlRootTagOfXmlFileResourceId(context: Context, xmlFileResourceId: Int): XmlTag? {\n            val res = context.resources\n            val xmlParser = res.getXml(xmlFileResourceId)\n            return getXmlRootTagOfXmlPullParser(xmlParser)\n        }\n    }\n\n    private fun addInnerXmlTag(tag: XmlTag) {\n        if (innerTagsAndContent == null)\n            innerTagsAndContent = ArrayList()\n        innerTagsAndContent!!.add(tag)\n    }\n\n    private fun addInnerText(str: String) {\n        if (innerTagsAndContent == null)\n            innerTagsAndContent = ArrayList()\n        innerTagsAndContent!!.add(str)\n    }\n\n    /**formats the xmlTag back to its string format,including its inner tags     */\n    override fun toString(): String {\n        val sb = StringBuilder()\n        sb.append(\"&lt;\").append(tagName)\n        val numberOfAttributes = if (tagAttributes != null) tagAttributes!!.size else 0\n        if (numberOfAttributes != 0)\n            for ((key, value) in tagAttributes!!)\n                sb.append(\" \").append(key).append(\"=\\\"\").append(value).append(\"\\\"\")\n        val numberOfInnerContent = if (innerTagsAndContent != null) innerTagsAndContent!!.size else 0\n        if (numberOfInnerContent == 0)\n            sb.append(\"/&gt;\")\n        else {\n            sb.append(\"&gt;\")\n            for (innerItem in innerTagsAndContent!!)\n                sb.append(innerItem.toString())\n            sb.append(\"&lt;/\").append(tagName).append(\"&gt;\")\n        }\n        return sb.toString()\n    }\n\n}\n</code></pre>\n\n<p>Sample usage:</p>\n\n<p><strong>build.grade</strong></p>\n\n<pre><code>    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n...\ndependencies{\nimplementation 'com.1gravity:android-rteditor:1.6.7'\n...\n}\n...\n</code></pre>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n//        val inputXmlString = \"&lt;zz&gt;Zhshs&lt;br/&gt;ABC&lt;/zz&gt;\"\n        val inputXmlString = \"Aaa&lt;br/&gt;&lt;b&gt;Bbb&lt;br/&gt;&lt;/b&gt;Ccc&lt;br/&gt;&lt;ul&gt;&lt;li&gt;Ddd&lt;/li&gt;&lt;li&gt;eee&lt;/li&gt;&lt;/ul&gt;fff&lt;br/&gt;&lt;ol&gt;&lt;li&gt;ggg&lt;/li&gt;&lt;li&gt;hhh&lt;/li&gt;&lt;/ol&gt;\"\n\n        // XML must have a root tag\n        val xmlString = if (!inputXmlString.startsWith(\"&lt;\"))\n            \"&lt;html&gt;$inputXmlString&lt;/html&gt;\" else inputXmlString\n\n        val rtApi = RTApi(this, RTProxyImpl(this), RTMediaFactoryImpl(this, true))\n        val mRTManager = RTManager(rtApi, savedInstanceState)\n        mRTManager.registerEditor(beforeTruncationTextView, true)\n        mRTManager.registerEditor(afterTruncationTextView, true)\n        beforeTruncationTextView.setRichTextEditing(true, inputXmlString)\n        val xmlTag = XmlTag.getXmlFromString(xmlString)\n\n        Log.d(\"AppLog\", \"xml parsed: \" + xmlTag.toString())\n        val maxTextCharacters = 10\n        val maxLines = 20\n\n        val output = XmlTagTruncationHelper.truncateXmlTag(xmlTag!!, XmlTagTruncationHelper.Restriction(maxTextCharacters, maxLines))\n        afterTruncationTextView.setRichTextEditing(true, output)\n        Log.d(\"AppLog\", \"xml with truncation : maxTextCharacters: $maxTextCharacters , maxLines: $maxLines output: \" + output)\n    }\n}\n</code></pre>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" android:gravity=\"center\" android:orientation=\"vertical\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;com.onegravity.rteditor.RTEditText\n        android:id=\"@+id/beforeTruncationTextView\" android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" android:background=\"#11ff0000\" tools:text=\"beforeTruncationTextView\"/&gt;\n\n\n    &lt;com.onegravity.rteditor.RTEditText\n        android:id=\"@+id/afterTruncationTextView\" android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" android:background=\"#1100ff00\" tools:text=\"afterTruncationTextView\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lCtIg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lCtIg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 49150449, "answer_count": 1, "score": 3, "last_activity_date": 1520422513, "creation_date": 1520174098, "last_edit_date": 1520330184, "question_id": 49096521, "link": "https://stackoverflow.com/questions/49096521/how-to-truncate-html-string-to-be-used-as-a-preview-version-of-the-original", "title": "How to truncate HTML string, to be used as a &quot;preview&quot; version of the original?", "body": "<h2>Background</h2>\n\n<p>We allow the user to create some text that will get converted to HTML, using a rich-text editor library (called <a href=\"https://github.com/1gravity/Android-RTEditor\" rel=\"nofollow noreferrer\"><strong>Android-RTEditor</strong></a>).</p>\n\n<p>The output HTML text is saved as is on the server and the device.</p>\n\n<p>Because on some end cases, there is a need to show a lot of this content (multiple instances), we wish to also save a \"preview\" version of this content, meaning it will be much shorter in length (say 120 of normal characters, excluding the extra characters for the HTML tags, which are not counted).</p>\n\n<p>What we want is a minimized version of the HTML. Some tags might optionally be removed, but we still want to see lists (numbered/bullets), no matter what we choose to do, because lists do show like text to the user (the bullet is a character, and so do the numbers with the dot).</p>\n\n<p>The tag of going to next line should also be handled , as it's important to go to the next line.</p>\n\n<h2>The problem</h2>\n\n<p>As opposed to a normal string, where I can just call <code>substring</code> with the required number of characters, on HTML it might ruin the tags.</p>\n\n<h2>What I've tried</h2>\n\n<p>I've thought of 2 possible solutions for this:</p>\n\n<ol>\n<li><p><strong>Convert to plain text (while having some tags handled), and then truncate</strong>  : Parse the HTML, and replacing some tags with Unicode alternatives, while removing the others. For example, instead of a bullet-list, put the bullet character (maybe <a href=\"https://www.fileformat.info/info/unicode/char/2022/index.htm\" rel=\"nofollow noreferrer\">this</a>), and same for numbered list (put numbers instead). All the other tags would be removed. Same goes for the tag of going to the next line (\"<br/>\"), which should be replaced with \"\\n\". After that, I could safely truncate the normal text, because there are no more tags that could be ruined.</p></li>\n<li><p><strong>Truncate nicely inside the HTML</strong> : Parse the HTML, while identifying the text within it, and truncate it there and closing all tags when reaching the truncation position. This might even be harder.</p></li>\n</ol>\n\n<p>I'm not sure which is easier, but I can think of possible disadvantages for each. It is just a preview though, so I don't think it matters much.</p>\n\n<p>I've searched the Internet for such solutions, to see if others have made it. \nI've found some links that talk about \"cleaning\" or \"optimizing\" HTML, but I don't see they can handle replacing them or truncating them. Not only that, but since it's HTML, most are not related to Android, and use PHP, C#, Angular and others as their language.</p>\n\n<p>Here are some links that I've found:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/q/28567039/878126\">Java Library to truncate html strings?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/q/2324585/878126\">how to truncate HTML string without leaving it malformated?</a></p></li>\n</ul>\n\n<h2>The questions</h2>\n\n<ol>\n<li><p>Are those solutions that I've written possible? If so, is there maybe a known way to implement them? Or even a Java/Kotlin/Android library? How hard would it be to make such a solution?</p></li>\n<li><p>Maybe other solution I haven't thought about?</p></li>\n</ol>\n\n<hr>\n\n<p>EDIT:\nI've also tried using an old code I've made in the past (<a href=\"https://stackoverflow.com/a/19115036/878126\"><strong>here</strong></a>), which parses XML. Maybe it will work. I also try now to investigate some third party libraries for parsing HTML, such as Jsoup. I think it can help with the truncating, while supporting \"faulty\" HTML inputs.</p>\n"}, {"tags": ["android", "kotlin", "gson", "android-volley"], "comments": [{"owner": {"reputation": 316, "user_id": 7338350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUUXw.png?s=128&g=1", "display_name": "Vishu", "link": "https://stackoverflow.com/users/7338350/vishu"}, "edited": false, "score": 0, "creation_date": 1520172965, "post_id": 49096184, "comment_id": 85197618, "body": "<code>jornad</code> is <code>List</code>. <code>jornada.jornad.get(0).idClubLocal</code> should work"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1520177950, "post_id": 49096427, "comment_id": 85199237, "body": "jornada.jornad?.first()?.idClubLocal only 1 register"}, {"owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1520178920, "post_id": 49096427, "comment_id": 85199558, "body": "But when all items?"}, {"owner": {"reputation": 156, "user_id": 9158170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ee0cf357ef804bb7035f53d3ecaaab?s=128&d=identicon&r=PG&f=1", "display_name": "RomanS", "link": "https://stackoverflow.com/users/9158170/romans"}, "reply_to_user": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1520179213, "post_id": 49096427, "comment_id": 85199654, "body": "As answered above: <code>jornada.jornad?.map { it.idClubLocal }</code> iterating is up to you how you want to handle it: concat, init new objects, etc, etc .There you can access all items in your list."}, {"owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1520179784, "post_id": 49096427, "comment_id": 85199873, "body": "I do not know how to do it"}, {"owner": {"reputation": 156, "user_id": 9158170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ee0cf357ef804bb7035f53d3ecaaab?s=128&d=identicon&r=PG&f=1", "display_name": "RomanS", "link": "https://stackoverflow.com/users/9158170/romans"}, "reply_to_user": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1520180575, "post_id": 49096427, "comment_id": 85200152, "body": "e.g.: concat with comma: <code>jornada.jornad?.joinToString(&quot;, &quot;) { it.idClubLocal }</code> As mentioned before, its up to you how to deal with list items."}, {"owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1525340485, "post_id": 49096427, "comment_id": 87321239, "body": "I do not get it"}], "tags": [], "owner": {"reputation": 156, "user_id": 9158170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ee0cf357ef804bb7035f53d3ecaaab?s=128&d=identicon&r=PG&f=1", "display_name": "RomanS", "link": "https://stackoverflow.com/users/9158170/romans"}, "is_accepted": false, "score": 1, "last_activity_date": 1520173382, "creation_date": 1520173382, "answer_id": 49096427, "question_id": 49096184, "link": "https://stackoverflow.com/questions/49096184/android-kotlin-parser-gson-volley/49096427#49096427", "title": "Android kotlin parser Gson Volley", "body": "<p>You're trying to access a list neither to specify an index nor to iterate through them.</p>\n\n<p>Iterate in any way, it's up to you:</p>\n\n<pre><code>jornada.jornad?.map { it.idClubLocal }\n</code></pre>\n\n<p>Access first index e.g.:</p>\n\n<pre><code>jornada.jornad?.first()?.idClubLocal\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520173382, "creation_date": 1520171651, "question_id": 49096184, "link": "https://stackoverflow.com/questions/49096184/android-kotlin-parser-gson-volley", "title": "Android kotlin parser Gson Volley", "body": "<p>How can I access idClubLocal with Gson-Volley? I get the codCompeticion and the nomCompeticion but there is no way to do it to idClubLocal</p>\n\n<p>[{\"codCompeticion\": \"26\",\n\"nomCompeticion\": \"Equipo\",\n\"jornadas\": [ {\"idClubLocal\": \"xxxxx\"....</p>\n\n<p>FragJorActual</p>\n\n<pre><code>class FragJorActual : Fragment() {\n\n    private val TAG = \"MainActivity\"   \n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        retainInstance = true\n\n        requestJsonObject()\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.activity_recycler, container, false)\n\n        val miTexto: TextView = view.findViewById(R.id.tv_Grupo)\n        miTexto.setText(R.string.list_juveniles)\n\n        return view\n    }\n\n    private fun requestJsonObject() {    \n\n        val queue = Volley.newRequestQueue(activity)\n        val url = \"mi_url\"\n\n        val stringRequest = StringRequest(Request.Method.GET, url, Response.Listener { response -&gt;\n\n            val builder = GsonBuilder()\n            val mGson = builder.create()\n\n            var items: List&lt;ModelArray&gt; = ArrayList()\n            items = Arrays.asList(*mGson.fromJson(response, Array&lt;ModelArray&gt;::class.java))\n\n\n            recyclerView !!.layoutManager = GridLayoutManager(activity!!, 1)\n\n            val adapter = CalendarioAdapterArray(activity !!, items )\n            recyclerView !!.adapter = adapter\n\n        }, Response.ErrorListener { error -&gt; Log.d(TAG, \"Error \" + error.message) })\n        queue.add(stringRequest)\n    }\n}\n</code></pre>\n\n<p>CalendarioAdapterArray</p>\n\n<pre><code>class CalendarioAdapterArray(internal var context: Context, internal var jornadasList: List&lt;ModelArray&gt;) : RecyclerView.Adapter&lt;CalendarioAdapterArray.ViewHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val itemView = LayoutInflater.from(parent.context).inflate(R.layout.calendario_row, parent, false)\n        return ViewHolder(itemView)\n    }\n\n    @RequiresApi(Build.VERSION_CODES.O)\n    @SuppressLint(\"SetTextI18n\")\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        val jornada = jornadasList[position]\n\n        holder.textEquipoLocal.text = jornada.jornad.idClubLocal\n        holder.textEquipoVisi.text = jornada.nomVisi\n    }\n\n    override fun getItemCount(): Int = jornadasList.size\n\n    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n\n        var textEquipoLocal: TextView = itemView!!.findViewById&lt;TextView&gt;(R.id.tv_Equipo_Local) as TextView\n        var textEquipoVisi: TextView = itemView!!.findViewById&lt;TextView&gt;(R.id.tv_Equipo_Visitante) as TextView\n    }\n}\n</code></pre>\n\n<p>ModelArray</p>\n\n<pre><code>class ModelArray {\n\n    @SerializedName(\"codCompeticion\")\n    @Expose\n    var Local: String? = null\n\n    @SerializedName(\"nomCompeticion\")\n    @Expose\n    var nomVisi: String? = null\n\n    @SerializedName(\"jornadas\")\n    @Expose\n    var jornad: List&lt;ModelList&gt;? = null\n}\n</code></pre>\n\n<p>ModelList</p>\n\n<p>class ModelList {</p>\n\n<pre><code>@SerializedName(\"idClubLocal\")\n@Expose\nvar idClubLocal: String? = null\n\ninit {\n\n    this.idClubLocal = idClubLocal\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["jpa", "kotlin", "glassfish", "eclipselink"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1520173791, "post_id": 49096110, "comment_id": 85197879, "body": "And the exception stack trace is...?"}, {"owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1520176648, "post_id": 49096110, "comment_id": 85198800, "body": "That&#39;s the funny thing, there isn&#39;t any. It&#39;s swallowed by Glassfish, with the error page just giving an error 500"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1520181120, "post_id": 49096110, "comment_id": 85200383, "body": "My guess is that JPA has nothing to do with the problem. JSON serialization is the problem. I&#39;d advise not using the entities (the persistence model) as return type for your REST controller (the communication layer). They contain cycles, and thus JSON serialization navigates recursively through the cyclic graph of entities. And each time you&#39;ll modify an entity, you&#39;ll also change the API, and potentially expose things that you shouldn&#39;t."}, {"owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1520190277, "post_id": 49096110, "comment_id": 85203724, "body": "Alright, I&#39;ll try that first thing tomorrow!"}, {"owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1520237510, "post_id": 49096110, "comment_id": 85216810, "body": "Heya, I added a DTO for the profile that only displays the screenname and keeps the actual profile private. Still, it seems that Glassfish and the JPA are recursing on their own."}], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "edited": false, "score": 0, "creation_date": 1520239237, "post_id": 49104357, "comment_id": 85217644, "body": "Added onto this: The DTO needs to be marked as <code>open</code> and needs a no-arg constructor. See the edit in the OP."}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 1, "last_activity_date": 1520229724, "creation_date": 1520229724, "answer_id": 49104357, "question_id": 49096110, "link": "https://stackoverflow.com/questions/49096110/jpa-infinitely-recursion-with-bidirectional-relationships-in-kotlin-and-glassfis/49104357#49104357", "title": "JPA infinitely recursion with bidirectional relationships in Kotlin and Glassfish", "body": "<p>You should either use DTOs to represent data in the front end or <code>@JsonIgnore</code> parent references from child objects (instead of <code>@JsonBackReference</code>). </p>\n\n<p>Using DTOs is probably a smarter choice as you can decouple your front end presentation from the backend model, which gives you flexibility in both layers (ie. changing one layer does not break/possibly introduce bugs in the other).</p>\n"}], "owner": {"reputation": 801, "user_id": 1382827, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad6fb14f386fdbd82584bd90b6372d7a?s=128&d=identicon&r=PG", "display_name": "Samyn", "link": "https://stackoverflow.com/users/1382827/samyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 49104357, "answer_count": 1, "score": 0, "last_activity_date": 1520239371, "creation_date": 1520171234, "last_edit_date": 1520239371, "question_id": 49096110, "link": "https://stackoverflow.com/questions/49096110/jpa-infinitely-recursion-with-bidirectional-relationships-in-kotlin-and-glassfis", "title": "JPA infinitely recursion with bidirectional relationships in Kotlin and Glassfish", "body": "<p>I have 2 data classes in kotlin, each having a reference to eachother. <code>Profile</code> and <code>Kweet</code> (Code will be at the bottom). When fetching one of these entities with an <code>EntityManager</code> it can succesfully fetch a single object. It will never return this however, as the JPA keeps fetching the recursive relationship in the background.</p>\n\n<p>The issue occurs when either <code>ProfileDao.getById</code> or <code>ProfileDao.getByScreenname</code> is being called.</p>\n\n<p><a href=\"https://github.com/Requinard/s6-jea/blob/master/src/main/kotlin/domain/Profile.kt\" rel=\"nofollow noreferrer\">Profile.kt</a></p>\n\n<pre><code>@Entity(name = \"profile\")\n@NamedQueries(\n(NamedQuery(name = \"Profile.getByScreenName\", query = \"select p from profile p where p.screenname LIKE :screenname\")),\n(NamedQuery(name = \"Profile.getAll\", query = \"select p from profile p\"))\n)\ndata class Profile(\n@Id\n@GeneratedValue\nvar id: Int? = null,\n\nvar screenname: String,\n\nvar created: Timestamp\n) {\n\n@OneToMany(mappedBy = \"profile\", fetch = FetchType.LAZY, cascade = [CascadeType.DETACH])\nvar kweets: List&lt;Kweet&gt; = emptyList()\n\n@ManyToMany(fetch = FetchType.LAZY, cascade = [CascadeType.DETACH])\n@JoinTable(\n    name = \"liked_kweets\",\n    joinColumns = [(JoinColumn(name = \"profile_id\", referencedColumnName = \"id\"))],\n    inverseJoinColumns = [(JoinColumn(name = \"kweet_id\", referencedColumnName = \"id\"))]\n)\nvar likes: List&lt;Kweet&gt; = emptyList()\n\n@ManyToMany(fetch = FetchType.LAZY, cascade = [CascadeType.DETACH])\n@JoinTable(\n    name = \"follows\",\n    joinColumns = [(JoinColumn(name = \"follower_id\", referencedColumnName = \"id\"))],\n    inverseJoinColumns = [(JoinColumn(name = \"followed_id\", referencedColumnName = \"id\"))]\n)\nvar follows: List&lt;Profile&gt; = emptyList()\n\n@ManyToMany(mappedBy = \"follows\", fetch = FetchType.LAZY, cascade = [CascadeType.DETACH])\nvar followers: List&lt;Profile&gt; = emptyList()\n}\n</code></pre>\n\n<p><a href=\"https://github.com/Requinard/s6-jea/blob/master/src/main/kotlin/domain/Kweet.kt\" rel=\"nofollow noreferrer\">Kweet.kt</a></p>\n\n<pre><code>@Entity(name = \"kweet\")\n@NamedQuery(name = \"Kweet.getAll\", query = \"select k from kweet k\")\ndata class Kweet(\n@Id\n@GeneratedValue()\nvar Id: Int? = null,\nvar created: Timestamp,\nvar message: String,\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = \"profile_id\")\n@JsonBackReference\nvar profile: Profile,\n@ManyToMany(mappedBy = \"likes\", fetch = FetchType.LAZY)\n@JsonBackReference\nvar likedBy: List&lt;Profile&gt; = emptyList()\n)\n</code></pre>\n\n<p><a href=\"https://github.com/Requinard/s6-jea/blob/master/src/main/kotlin/dao/ProfileDao.kt\" rel=\"nofollow noreferrer\">ProfileDao.kt</a></p>\n\n<pre><code>@Stateless\nclass ProfileDao {\n@PersistenceContext\nlateinit var em: EntityManager\n\nfun getById(id: Int) = em.find(Profile::class.java, id)\n\nfun getAll(): List&lt;Profile&gt; = em.createNamedQuery(\"Profile.getAll\", Profile::class.java).resultList\n\nfun getByScreenname(name: String) = em.createNamedQuery(\"Profile.getByScreenName\", Profile::class.java)\n    .setParameter(\"screenname\", name)\n    .resultList\n    .firstOrNull()\n\nfun create(profile: Profile) = em.persist(profile)\n\nfun follow(follower: Profile, leader: Profile) {\n    follower.follows += leader\n    leader.followers += follower\n    em.persist(follower)\n    em.persist(leader)\n}\n}\n</code></pre>\n\n<hr>\n\n<p>Update: Adding a DTO and marking this as open correctly solves the recursion error. Example:</p>\n\n<pre><code>@Open\nclass ProfileFacade(\nprivate val profile: Profile\n) : Serializable {\nvar screenname: String\n    get() = profile.screenname\n    set(value) {\n        profile.screenname = value\n    }\n\nvar kweets: List&lt;SimpleKweetFacade&gt;\n    get() = profile.kweets.map { SimpleKweetFacade(it) }\n    set(value) = Unit\n\nvar follows: List&lt;String&gt;\n    get() = profile.follows.map { it.screenname }\n    set(value) = Unit\n\nvar created: Timestamp\n    get() = profile.created\n    set(value) = Unit\n}\n</code></pre>\n\n<p>The <code>@Open</code> annotation is a simple <code>annotation class Open()</code> which is then processed by gradle to add open and noarg constructors</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 1804, "user_id": 4671717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e495dad12ae0636604695b69553b7ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Maggiulli", "link": "https://stackoverflow.com/users/4671717/chris-maggiulli"}, "edited": false, "score": 0, "creation_date": 1520170761, "post_id": 49095969, "comment_id": 85196955, "body": "Is your 192.168.2.11 application forcing HTTPs or can it be served over HTTP.  Try removing the s in HTTPS."}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 4671717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e495dad12ae0636604695b69553b7ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Maggiulli", "link": "https://stackoverflow.com/users/4671717/chris-maggiulli"}, "is_accepted": false, "score": 0, "last_activity_date": 1520173385, "last_edit_date": 1520173385, "creation_date": 1520170943, "answer_id": 49096060, "question_id": 49095969, "link": "https://stackoverflow.com/questions/49095969/com-android-volley-noconnectionerror-javax-net-ssl-sslhandshakeexception-java/49096060#49096060", "title": "com.android.volley.NoConnectionError: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException", "body": "<p>The error is related to the TLS/SSL certificate associated with your 192.168.2.11 web server.  There are a few different ways to solve this problem depending on what your setup is like.</p>\n\n<p>If you have no cert installed on your web server then replace https with http to send over an unencrypted channel.</p>\n\n<pre><code> val url=\"http://192.168.2.11/verf1.php\"\n</code></pre>\n\n<p>If the web server does have a cert installed then you could have a few issues. Common issues related to the stack trace are invalid certs, using the wrong (or no) domain name, wrong Java code for the encryption type and Java version, issue somewhere in the trust chain, expired cert, etc. </p>\n\n<p>In summary, I believe you simply need to send over http, but if that doesn't work, you should troubleshoot it in this order.</p>\n\n<ol>\n<li>Change the IP to the domain name associated with your cert</li>\n<li>Verify you can access your resource in the browser and that the certificate is not expired</li>\n<li>Figure out what type of encryption you are using (TLS 1.1,  TLS 1.2, etc) and what Java you are using (1.6 or 1.7).  There is a key difference between Java 6 and Java 7 as it relates to accessing TLS encrypted resources and I explain it in my highest rated post (as a reference).</li>\n<li>If all else fails you will likely need to manually install the certificate in Androids JVM trust store. I believe you can do this from most GUIs and definitely from the terminal if you have access.  You shouldn't have to do this, but sometimes you are forced to if the certificate chain breaks.  It might not even be your cert causing the issue, it can be any cert in your trust chain.</li>\n</ol>\n\n<p>Please let me know if the initial suggestion works. If it doesn't work please provide the public cert here ( or just the domain name and I will  pull it down) and your Java version and I can better assist.</p>\n"}], "owner": {"reputation": 1, "user_id": 8668376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7da87c5ea66de6f2cefcba6ad3ade02?s=128&d=identicon&r=PG&f=1", "display_name": "RAM GOPAL VARMA ALLURI", "link": "https://stackoverflow.com/users/8668376/ram-gopal-varma-alluri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2057, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520173385, "creation_date": 1520170331, "question_id": 49095969, "link": "https://stackoverflow.com/questions/49095969/com-android-volley-noconnectionerror-javax-net-ssl-sslhandshakeexception-java", "title": "com.android.volley.NoConnectionError: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException", "body": "<p>i need to get echo value i.e (yes or no) from php  file to myresulttextview but unable to retrieve it says error :<strong>\"com.android.volley.NoConnectionError: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found. \"</strong>  </p>\n\n<pre><code>val barcode = data.getParcelableExtra&lt;Barcode&gt;(BarcodeCaptureActivity.BarcodeObject)\n                        val p = barcode.cornerPoints\n                        var m = barcode.displayValue.toString().trim()\n                        val jsonobj=JSONObject()\n                        jsonobj.put(\"email\",m)\n                        val url=\"https://192.168.2.11/verf1.php\"\n                        val que=Volley.newRequestQueue(this@MainActivity)\n                        val req=JsonObjectRequest(Request.Method.POST,url,jsonobj,Response.Listener {\n                            response -&gt;mResultTextView.setText(response.toString())\n\n\n                        },Response.ErrorListener {\n                            response -&gt;mResultTextView.setText(response.toString())\n\n                        })\n                        que.add(req)\n</code></pre>\n\n<h2>my php file</h2>\n\n<pre><code>&lt;?php\nrequire \"conn.php\";\n$user_name=false;\nif(isset($_POST[\"email\"])){\n    $user_name = $_POST[\"email\"];\n}\n$mysql_qry=\"select *  from exitpass where email like '%\".$user_name.\"%'\";\n$result=mysqli_query($conn,$mysql_qry);\n\nif(mysqli_num_rows($result)&gt;0)\n{\necho\"yes\";\n}\nelse{\necho\"no\";}\n?&gt;\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 729479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b17e9a22c8fc1fdadc7b64a8c8945e?s=128&d=identicon&r=PG", "display_name": "bookwormat", "link": "https://stackoverflow.com/users/729479/bookwormat"}, "is_accepted": false, "score": 1, "last_activity_date": 1548455074, "last_edit_date": 1548455074, "creation_date": 1548421887, "answer_id": 54366012, "question_id": 49095286, "link": "https://stackoverflow.com/questions/49095286/kotlin-gradle-issue-with-app-module/54366012#54366012", "title": "Kotlin Gradle issue with app module", "body": "<p>How does your settings.gradle.kts look like?</p>\n\n<p>It should contain something like this:</p>\n\n<p>include(\"app\")</p>\n\n<p>This tells gradle on the root module (top level) that there is a submodule it needs to build as well.</p>\n\n<p>I also see a file settings.gradle.txt in you project structure. This looks like a mistake to me, you can probably delete it?</p>\n\n<p>Regarding buildSrc: The documentation states:</p>\n\n<blockquote>\n  <p>In a multi project build, there can only be one buildSrc directory\n  which must be located in the root directory</p>\n</blockquote>\n\n<p><a href=\"https://docs.gradle.org/current/userguide/multi_project_builds.html#sec:multi_project_and_buildsrc\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/multi_project_builds.html#sec:multi_project_and_buildsrc</a></p>\n"}], "owner": {"reputation": 166, "user_id": 8513267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aCqIsULG6dw/AAAAAAAAAAI/AAAAAAAAAA8/CqkOXCyCaUQ/photo.jpg?sz=128", "display_name": "panda_eye", "link": "https://stackoverflow.com/users/8513267/panda-eye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548455074, "creation_date": 1520165733, "last_edit_date": 1530062637, "question_id": 49095286, "link": "https://stackoverflow.com/questions/49095286/kotlin-gradle-issue-with-app-module", "title": "Kotlin Gradle issue with app module", "body": "<p>This is my project structure. I use the Gradle Kotlin DSL. The problem is that \"My app module is not Gradle-based\", but it has the build.gradle.kts file.\nI added also the buildSrc to the app module, but it did not help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XHaUv.jpg\" rel=\"nofollow noreferrer\">Project structure</a> as:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XHaUv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XHaUv.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["function", "types", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "is_accepted": false, "score": 0, "last_activity_date": 1520175335, "creation_date": 1520175335, "answer_id": 49096674, "question_id": 49095136, "link": "https://stackoverflow.com/questions/49095136/kotlin-handling-variable-return-type-of-function/49096674#49096674", "title": "kotlin handling variable return type of function", "body": "<p>You could either define a common interface with an <code>actionType</code> method or cast the values:</p>\n\n<pre><code>if(nn is ActionDetailDTO) {\n    println(nn.reason)\n}\n</code></pre>\n\n<p>Or use <code>when</code> if you plan to do something for the other type too:</p>\n\n<pre><code>when(nn) {\n  is ActionDetailDTO -&gt; println(nn.reason)\n  is IntroDTO -&gt; println(nn.number)\n}\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 5256798, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/ee0d6c875e27c27b77195923b0fcbc29?s=128&d=identicon&r=PG&f=1", "display_name": "sachsure", "link": "https://stackoverflow.com/users/5256798/sachsure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520175335, "creation_date": 1520164759, "question_id": 49095136, "link": "https://stackoverflow.com/questions/49095136/kotlin-handling-variable-return-type-of-function", "title": "kotlin handling variable return type of function", "body": "<p>Suppose I've multiple DTOs, like:</p>\n\n<pre><code>data class ActionDetailDTO(\n    @JsonProperty(\"priority\")\n    val priority: String,\n    @JsonProperty(\"reason\")\n    val reason: String\n)\n\ndata class IntroDTO(\n    @JsonProperty(\"name\")\n    val name: String,\n    @JsonProperty(\"number\")\n    val number: String\n)\n</code></pre>\n\n<p>and I've a json of these dtos stored as strings,\nwhen I parse them doing something like this:</p>\n\n<pre><code>    fun parseStringBasedOnType(action: SomeDTOType) :Any{\n    val obj = when (action.actionType){\n            \"CREATED\" -&gt; objectMapper.readValue(action.actionDetails, ActionDetailDTO::class.java)\n            \"INTRO\" -&gt; objectMapper.readValue(action.actionDetails, IntroDTO::class.java)\n\n            else -&gt; \"hh\"\n        }\n        return obj\n     }\n</code></pre>\n\n<p>so:</p>\n\n<pre><code>val nn = parseStringBasedOnType(SomeActionObject) //type: CREATED\nif(nn.actionType == \"CREATED\"){\n    println(nn.reason)\n}\n</code></pre>\n\n<p>This obviously does not work, how can this be handled?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1520163060, "post_id": 49094858, "comment_id": 85194843, "body": "it&#39;s more language level enhancement - it&#39;s recommended to use final in java whenever where possible, but no one follows that recommendation. You make big favor to one who will read the code in future and of course don&#39;t forget about nullable types"}, {"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1520163128, "post_id": 49094858, "comment_id": 85194857, "body": "And yes, you better use val instead of var - you can change declaration when needed"}], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "is_accepted": true, "score": 3, "last_activity_date": 1520163228, "last_edit_date": 1520163228, "creation_date": 1520162842, "answer_id": 49094874, "question_id": 49094858, "link": "https://stackoverflow.com/questions/49094858/kotlin-should-i-use-val-instead-of-var/49094874#49094874", "title": "Kotlin: Should I use val instead of var?", "body": "<p><code>val</code> is like a final variable in java. Use it if you wont change the value. <code>val</code> is immutable.</p>\n\n<p><code>var</code> is a normal variable that changes it's value. <code>var</code> is mutable.</p>\n\n<p>You should make <code>x</code> val because the programmer who's reading the code will know that's it's a final variable. Using var/val doesn't make any difference in performance.</p>\n"}], "owner": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2945, "favorite_count": 0, "closed_date": 1520164931, "accepted_answer_id": 49094874, "answer_count": 1, "score": 2, "last_activity_date": 1520165964, "creation_date": 1520162738, "last_edit_date": 1520165964, "question_id": 49094858, "link": "https://stackoverflow.com/questions/49094858/kotlin-should-i-use-val-instead-of-var", "closed_reason": "Duplicate", "title": "Kotlin: Should I use val instead of var?", "body": "<p>Let's say I have something like this:</p>\n\n<pre><code>var x : String = \"str\"\n\n// here do some with x, but not assign new value to it\n</code></pre>\n\n<p>Then Android Studio tells me that x should be declared with <code>val</code>, not <code>var</code>.<br>\nI know what's the difference between <code>var</code> and <code>val</code>.<br>\nIf I don't need to assign value to <code>x</code> it could be <code>val</code>.<br>\nBut does it make any difference at runtime?<br>\nWhen I declare variable with <code>val</code> instead of <code>var</code>, is it somehow faster?</p>\n\n<p>This is not duplicate! I am asking about performance, not about difference in meaning.</p>\n"}, {"tags": ["android", "android-intent", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1520164257, "post_id": 49094845, "comment_id": 85195124, "body": "Did you try casting it to <code>(ArrayList&lt;Animal&gt;)</code>?"}, {"owner": {"reputation": 619, "user_id": 5493022, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7005811ff6f52bd79334612fe0ae5899?s=128&d=identicon&r=PG&f=1", "display_name": "Aris Guimer&#225;", "link": "https://stackoverflow.com/users/5493022/aris-guimer%c3%a1"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1520164687, "post_id": 49094845, "comment_id": 85195225, "body": "Yes,         animals = arguments.getSerializable(ARG_ANIMALS) as ArrayList&lt;Animal&gt;"}, {"owner": {"reputation": 877, "user_id": 4887525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Te4N4beDmAs/AAAAAAAAAAI/AAAAAAAAABA/_QzLicWSkpQ/photo.jpg?sz=128", "display_name": "Adeel Turk", "link": "https://stackoverflow.com/users/4887525/adeel-turk"}, "edited": false, "score": 0, "creation_date": 1520345203, "post_id": 49094845, "comment_id": 85270110, "body": "make sure animal class has implemented Serializeable"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1520356427, "post_id": 49094845, "comment_id": 85277784, "body": "What line is the error on?"}, {"owner": {"reputation": 593, "user_id": 8494971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a406faac8481ceb128c50f45e25fc3?s=128&d=identicon&r=PG&f=1", "display_name": "Palak Jain", "link": "https://stackoverflow.com/users/8494971/palak-jain"}, "edited": false, "score": 0, "creation_date": 1520881195, "post_id": 49094845, "comment_id": 85488939, "body": "I think args.putSerializable(ARG_ANIMALS, animals as Serializable) should work!"}], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 0, "creation_date": 1520806195, "post_id": 49136728, "comment_id": 85454916, "body": "Could you explain a bit more why is it necessary to cast <code>animals</code> to <code>Serializable</code> when passing it to <code>putSerializable</code>?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 0, "creation_date": 1520886765, "post_id": 49136728, "comment_id": 85491752, "body": "@SpaceBison tbh, when I did testing I used List and MutableList. It is apparently not necessary with ArrayList, but with List and MutableList it has to be cast to Serializable."}, {"owner": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 1, "creation_date": 1520887006, "post_id": 49136728, "comment_id": 85491901, "body": "I see. That would be because<code>ArrayList</code> implements <code>Serializable</code>, but <code>List</code> and <code>MutableList</code> do not extend it, so they need an explicit cast. :)"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 0, "creation_date": 1520888592, "post_id": 49136728, "comment_id": 85492625, "body": "They can still be serialized though, assuming the class it holds is serializable. But that appears to be right :)"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 25, "last_activity_date": 1520888661, "last_edit_date": 1520888661, "creation_date": 1520357329, "answer_id": 49136728, "question_id": 49094845, "link": "https://stackoverflow.com/questions/49094845/get-serializable-arraylist-on-intent-fragment/49136728#49136728", "title": "Get Serializable ArrayList on Intent fragment", "body": "<p>As mentioned in a comment, cast it:</p>\n\n<p><sub>NOTE: casting to Serializable isn't necessary if it's an <strong>ArrayList</strong> (this means <code>ArrayList</code> - List and MutableList are affected differently). <code>List</code> and <code>MutableList</code> has to be cast to Serializable (otherwise it shows an \"incompatible types\" error)</sub></p>\n\n<pre><code>args.putSerializable(ARG_ANIMALS, animals as Serializable) //This is to cast it to the appropriate form in order for it to be serialized properly\n</code></pre>\n\n<p>and mirror it on output:</p>\n\n<p><sub>Casting here is necessary no matter what. Otherwise you'll just get a Serializable and not the class which you have serialized.</sub></p>\n\n<pre><code>animals = arguments.getSerializable(ARG_ANIMALS) as ArrayList&lt;Animal&gt;\n</code></pre>\n\n<p>Type has to be specified in the diamond, otherwise you get an error as a result of <code>animals: ArrayList&lt;Animal&gt;</code> not matching <code>ArrayList&lt;*&gt;</code></p>\n\n<p>You may want to look into using List instead of ArrayList though, to generalize which types you accept (include MutableList for an instance).</p>\n\n<p>And this only works if Animal implements Serializable. Otherwise it'll crash when you put/get the list from the bundle. Lists are only serializable if the class in them are too.</p>\n"}, {"comments": [{"owner": {"reputation": 18268, "user_id": 984830, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/921db8f27811370fb2abf9b4712a04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cardoso", "link": "https://stackoverflow.com/users/984830/nick-cardoso"}, "edited": false, "score": 0, "creation_date": 1521021792, "post_id": 49166398, "comment_id": 85551828, "body": "You cant use a string as a type argument, nor can you cast in this way, nor can you use &#39;as&#39; like this."}, {"owner": {"reputation": 483, "user_id": 9460261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJzOO.jpg?s=128&g=1", "display_name": "Sagar Gadani", "link": "https://stackoverflow.com/users/9460261/sagar-gadani"}, "reply_to_user": {"reputation": 18268, "user_id": 984830, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/921db8f27811370fb2abf9b4712a04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cardoso", "link": "https://stackoverflow.com/users/984830/nick-cardoso"}, "edited": false, "score": 0, "creation_date": 1521022560, "post_id": 49166398, "comment_id": 85552384, "body": "&quot; &quot; This is an example which indicates that you have to write the object here. Please be clear about it. Its literary specified ARRAYLIST_OBJECT please read the answers carefully."}, {"owner": {"reputation": 18268, "user_id": 984830, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/921db8f27811370fb2abf9b4712a04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cardoso", "link": "https://stackoverflow.com/users/984830/nick-cardoso"}, "edited": false, "score": 2, "creation_date": 1521023058, "post_id": 49166398, "comment_id": 85552742, "body": "&quot;Its literary specified ARRAYLIST_OBJECT&quot; means absolutely nothing and there is no reason for you to write it as a string - but even if he corrected the strings, that code is nonsense - It is meaningless even as pseudocode. The only thing this answer could ever achieve is to waste the time of people new to java who would be lost by this."}, {"owner": {"reputation": 483, "user_id": 9460261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJzOO.jpg?s=128&g=1", "display_name": "Sagar Gadani", "link": "https://stackoverflow.com/users/9460261/sagar-gadani"}, "reply_to_user": {"reputation": 18268, "user_id": 984830, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/921db8f27811370fb2abf9b4712a04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Cardoso", "link": "https://stackoverflow.com/users/984830/nick-cardoso"}, "edited": false, "score": 0, "creation_date": 1521033258, "post_id": 49166398, "comment_id": 85559847, "body": "Please post other idea if you have, we would learn from it :)  no egos."}], "tags": [], "owner": {"reputation": 483, "user_id": 9460261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJzOO.jpg?s=128&g=1", "display_name": "Sagar Gadani", "link": "https://stackoverflow.com/users/9460261/sagar-gadani"}, "is_accepted": false, "score": 0, "last_activity_date": 1520488773, "creation_date": 1520488773, "answer_id": 49166398, "question_id": 49094845, "link": "https://stackoverflow.com/questions/49094845/get-serializable-arraylist-on-intent-fragment/49166398#49166398", "title": "Get Serializable ArrayList on Intent fragment", "body": "<p>Try casting argument which you get in fragment into arraylist which you wanted:\nMost probably this would work for you:</p>\n\n<p>eg.</p>\n\n<pre><code>\"ARRAYLIST_OBJECT\"= arguments.getSerializable(\"ARGUMENT_NAME\") as ArrayList&lt;\"ARRAYLIST_NAME\"&gt;\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 8069283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b293da8767bdbb336c65490adafcf7?s=128&d=identicon&r=PG", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/8069283/shivam-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1520599085, "creation_date": 1520599085, "answer_id": 49193999, "question_id": 49094845, "link": "https://stackoverflow.com/questions/49094845/get-serializable-arraylist-on-intent-fragment/49193999#49193999", "title": "Get Serializable ArrayList on Intent fragment", "body": "<p>You have to make your Animal class implements <strong>Serializable</strong> and use below code to set data in the bundle</p>\n\n<pre><code>args.putSerializable(ARG_ANIMALS, animals)\n</code></pre>\n\n<p>In order to get the data in another fragment as below</p>\n\n<pre><code>animals = arguments.getSerializable(ARG_ANIMALS)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 5492541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981e92bacf241e324dd4e2642eff9b83?s=128&d=identicon&r=PG&f=1", "display_name": "Aman Goyal", "link": "https://stackoverflow.com/users/5492541/aman-goyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1520839612, "creation_date": 1520839612, "answer_id": 49230066, "question_id": 49094845, "link": "https://stackoverflow.com/questions/49094845/get-serializable-arraylist-on-intent-fragment/49230066#49230066", "title": "Get Serializable ArrayList on Intent fragment", "body": "<p>Get ArrayList on intent fragment is done with this line of code.\nAnd this code work for both Serializable and non-Serializable ArrayList of Object type.</p>\n\n<pre><code>//first add this dependency in app build.gradle file\ncompile 'com.google.code.gson:gson:2.8.0'\n\n\n//to send the arraylist contains elements of object type.\nArrayList&lt;Object&gt; mOrderList=new ArrayList();\n//suppose this list now contains some data like number of objects.\nFragment fragment new YourFragment();\nBundle bundle=new Bundle();\nGson gson = new Gson();\nString jsonDetails = gson.toJson(mOrderList);\nbundle.putString(IntentKeyConstants.TAG_ORDER_LIST, jsonDetails);\nfragment.setArguments(bundle);\nFragmentTransaction fragmentTransaction=getActivity().getSupportFragmentManager().beginTransaction();\nfragmentTransaction.replace(R.id.main_frame, fragment, CURRENT_TAG);\nfragmentTransaction.addToBackStack(CURRENT_TAG);\nfragmentTransaction.commit();\n\n\n//to get the arraylist contains the element of object type in fragment\nArrayList&lt;Object&gt; mOrderList=new ArrayList();\nGson gson=new Gson();\nString jsonDetails;  \njsonDetails=getArguments().getString(IntentKeyConstants.TAG_ORDER_LIST);\nType type=new TypeToken&lt;ArrayList&lt;SuggestionResponseBean&gt;&gt;(){}.getType();\nmOrderList=gson.fromJson(jsonDetails,type);\n</code></pre>\n\n<p>I hope this solution will help you.\nThanks</p>\n"}], "owner": {"reputation": 619, "user_id": 5493022, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7005811ff6f52bd79334612fe0ae5899?s=128&d=identicon&r=PG&f=1", "display_name": "Aris Guimer&#225;", "link": "https://stackoverflow.com/users/5493022/aris-guimer%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9015, "favorite_count": 0, "accepted_answer_id": 49136728, "answer_count": 4, "score": 15, "last_activity_date": 1520888661, "creation_date": 1520162675, "question_id": 49094845, "link": "https://stackoverflow.com/questions/49094845/get-serializable-arraylist-on-intent-fragment", "title": "Get Serializable ArrayList on Intent fragment", "body": "<p>On my fragment I want to get <code>ArrayList&lt;Animal&gt;</code>. I have created a newInstance function.</p>\n\n<pre><code>  companion object {\n    private val ARG_TITLE = \"ARG_TITLE\"\n    private val ARG_ANIMALS = \"ARG_ANIMALS\"\n\n    fun newInstance(title: String,animals: ArrayList&lt;Animal&gt;): ExampleFragment{\n        val fragment = ExampleFragment()\n        val args = Bundle()\n        args.putString(ARG_TITLE, title)\n        args.putSerializable(ARG_ANIMALS, animals)\n        fragment.arguments = args\n        return fragment\n    }\n}\n</code></pre>\n\n<p>And on my <code>onCreate()</code> I have this.</p>\n\n<pre><code> private var title: String = \"\"\nlateinit private var animals:ArrayList&lt;Animal&gt;\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    if (arguments != null) {\n        title = arguments.getString(ARG_TITLE)\n        animals = arguments.getSerializable(ARG_ANIMALS)\n    }\n}\n</code></pre>\n\n<p>But </p>\n\n<blockquote>\n  <p>Required: ArrayList  found Serialized!</p>\n</blockquote>\n\n<p>Can't cast to ArrayList neither.</p>\n"}, {"tags": ["android", "sockets", "kotlin", "android-bluetooth", "bluetooth-printing"], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 4452207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f0a03f7d04bf3221bf8375641731f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit", "link": "https://stackoverflow.com/users/4452207/ankit"}, "is_accepted": false, "score": 0, "last_activity_date": 1521015101, "creation_date": 1521015101, "answer_id": 49272586, "question_id": 49094156, "link": "https://stackoverflow.com/questions/49094156/android-bluetooth-printer-detect-disconnection-write-failure-event/49272586#49272586", "title": "Android bluetooth printer - detect disconnection/write failure event?", "body": "<p><strong>Try this for long message print</strong></p>\n\n<pre><code>outputStream.write(message.getBytes(), 0, message.getBytes().length);\n</code></pre>\n\n<p><strong>To check the connection</strong></p>\n\n<pre><code>outputStream = bluetoothSocket.getOutputStream();\n</code></pre>\n\n<p>This is the only way to check the connection status in bluetooth printer. If the printer is connected than it will not throw any exception otherwise it does.</p>\n"}], "owner": {"reputation": 4366, "user_id": 1039477, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a85306bbc9601affec6f6a40dc4288cc?s=128&d=identicon&r=PG", "display_name": "dor506", "link": "https://stackoverflow.com/users/1039477/dor506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 886, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1521015101, "creation_date": 1520157693, "last_edit_date": 1520158538, "question_id": 49094156, "link": "https://stackoverflow.com/questions/49094156/android-bluetooth-printer-detect-disconnection-write-failure-event", "title": "Android bluetooth printer - detect disconnection/write failure event?", "body": "<p>I'm writing an application that connects to a bluetooth printer and send it messages.</p>\n\n<p>However, I didn't find the right way to detect if there was an error during writing to the printer (such as printer not connected, or disconnected in the middle of writing)</p>\n\n<p>Heres the piece of code that writes the message:</p>\n\n<pre><code> try\n   {\n       val uuid = UUID.fromString(BLUETOOTH_CLASS)\n       val socket = bluetoothDevice.createRfcommSocketToServiceRecord(uuid)\n       bluetoothSocket = socket\n       socket.connect()\n       Thread.sleep(1000)\n       outputStream = socket.outputStream\n       outputStream?.write(\"Long long text...\".toByteArray())\n   }\n   catch (e: Exception)\n   {\n       postFailOnUI(listener, GENERAL_ERROR)\n   }\n</code></pre>\n\n<p>If i send a message while the printer is disconnected, the code fall to the exception block, which is fine.</p>\n\n<p>However, if I send a long message (which takes about 3 seconds to print), The <strong>OutputStream.write</strong> function ends <strong>before</strong> the message gets printed.</p>\n\n<p>This is a problem, because if a disconnection occures after the function ends, the message won't get printed, and I won't be able to notice it.</p>\n\n<p>Couple of things I noticed:    </p>\n\n<ol>\n<li><p>When I turn the printer off, after connect to it (connect the socket), the <strong>socket.isConnected</strong> still returns <strong>true</strong>   </p></li>\n<li><p>When I open an <strong>input stream</strong>, and then turn the printer off, <strong>InputStream.available()</strong> still working without throwing an exception</p></li>\n</ol>\n\n<p>The only thing that throws an exception after turning the printer off is the blocking call to <strong>InputStream.read()</strong>.</p>\n\n<p>But, is it the right way to detect a <strong>writing</strong> failure?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["multithreading", "kotlin", "java-native-interface"], "comments": [{"owner": {"reputation": 329, "user_id": 4332437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b987556f97cd2c89afe16069384c5f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio Corsi", "link": "https://stackoverflow.com/users/4332437/claudio-corsi"}, "edited": false, "score": 0, "creation_date": 1520255011, "post_id": 49094052, "comment_id": 85227248, "body": "It seems like the attachcurrentthread method call is missing one parameter.  I wonder if that can be the cause"}, {"owner": {"reputation": 329, "user_id": 4332437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b987556f97cd2c89afe16069384c5f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio Corsi", "link": "https://stackoverflow.com/users/4332437/claudio-corsi"}, "edited": false, "score": 0, "creation_date": 1520255111, "post_id": 49094052, "comment_id": 85227313, "body": "Wait it looks like you need to pass the vm parameter to the attach and detach calls."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 329, "user_id": 4332437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b987556f97cd2c89afe16069384c5f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio Corsi", "link": "https://stackoverflow.com/users/4332437/claudio-corsi"}, "edited": false, "score": 0, "creation_date": 1520281774, "post_id": 49094052, "comment_id": 85243235, "body": "@ClaudioCorsi: You may be thinking of the C API. The code in the question is C++, so the <code>JavaVM*</code> is passed through <code>this</code> (i.e. <code>vm-&gt;...</code>)."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1520282349, "post_id": 49094052, "comment_id": 85243559, "body": "See <a href=\"https://stackoverflow.com/questions/30026030/what-is-the-best-way-to-save-jnienv/30026231#30026231\">this answer</a> for an example of a safe way of getting a <code>JNIEnv*</code> from any thread."}, {"owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1520318070, "post_id": 49094052, "comment_id": 85254219, "body": "@Michael Thanks, solved the problem"}], "owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520156934, "creation_date": 1520156934, "question_id": 49094052, "link": "https://stackoverflow.com/questions/49094052/jni-correctly-attach-detach-threads", "title": "JNI - correctly attach/detach threads", "body": "<p>I have this code:</p>\n\n<pre><code>JNIEXPORT void package_MyAPI_callback(JNIEnv *env, jobject thiz, jobject caller) {\n    JavaVM *vm;\n    env-&gt;GetJavaVM(&amp;vm);\n    jclass callbackClass = (jclass) env-&gt;NewGlobalRef(env-&gt;FindClass(\"package/TimeLoadedListenerUIThread\"));\n    jobject cachedCaller = (jobject) env-&gt;NewGlobalRef(caller);\n    jmethodID javaCallback = env-&gt;GetMethodID(callbackClass, \"onTimeLoaded\", \"(Z)V\");\n\n    CppSetCallback([=] {\n        JNIEnv *bgEnv;\n        vm-&gt;AttachCurrentThread(&amp;bgEnv, NULL);        \n        bgEnv-&gt;CallVoidMethod(cachedCaller, javaCallback, false);\n\n        bgEnv-&gt;DeleteGlobalRef(callbackClass);\n        bgEnv-&gt;DeleteGlobalRef(cachedCaller);\n        //vm-&gt;DetachCurrentThread();\n    });\n}\n</code></pre>\n\n<p>And somewhere in Kotlin code:</p>\n\n<pre><code>override fun onTimeLoaded(resetToCurrentTime: Boolean) {\n    activity.runOnUiThread { \n        activity.updateTimeSelector(resetToCurrentTime) }\n    }\n}\n</code></pre>\n\n<p><code>CppSetCallback</code> sets callback (as functional) to internal core of app.  There, the functional  is called from <code>std::thread</code>. </p>\n\n<p>This code runs, but I am not sure if it is correct, because If I call <code>vm-&gt;DetachCurrentThread();</code> app crashes. How should I call detach, or when?</p>\n"}, {"tags": ["android", "image", "file-upload", "kotlin"], "comments": [{"owner": {"reputation": 37, "user_id": 9441044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27409ae6bcb6647bafbfa1c19affd439?s=128&d=identicon&r=PG&f=1", "display_name": "someguy", "link": "https://stackoverflow.com/users/9441044/someguy"}, "edited": false, "score": 0, "creation_date": 1520158900, "post_id": 49093999, "comment_id": 85193738, "body": "why -1?What&#39;s wrong?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9025311"}, "edited": false, "score": 1, "creation_date": 1520176191, "post_id": 49093999, "comment_id": 85198632, "body": "have you opened internet connection,the code looks good to me!"}], "owner": {"reputation": 37, "user_id": 9441044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27409ae6bcb6647bafbfa1c19affd439?s=128&d=identicon&r=PG&f=1", "display_name": "someguy", "link": "https://stackoverflow.com/users/9441044/someguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520156513, "creation_date": 1520156513, "question_id": 49093999, "link": "https://stackoverflow.com/questions/49093999/fail-to-upload-image", "title": "Fail to upload image", "body": "<p>I am trying to upload an image,found this code(<a href=\"https://github.com/hussien89aa/KotlinUdemy/blob/master/Android/TwitterDemo/StartUp/app/src/main/java/com/hussein/startup/Login.kt\" rel=\"nofollow noreferrer\">reference</a>).The code in the file is built for <code>API &gt;=23</code>,mine is 21.</p>\n\n<pre><code>@TargetApi(Build.VERSION_CODES.M)\n    fun checkPermission(){\n        if(Build.VERSION.SDK_INT&gt;=21){...\n\n fun SaveImageInFirebase(){\n        var currentUser =mAuth!!.currentUser\n        val email:String=currentUser!!.email.toString() //line 125\n        val storage= FirebaseStorage.getInstance()\n        val storgaRef=storage.getReferenceFromUrl(\"\")\n        val df= SimpleDateFormat(\"ddMMyyHHmmss\")\n        val dataobj= Date()\n        val imagePath= SplitString(email) + \".\"+ df.format(dataobj)+ \".jpg\"\n        val ImageRef=storgaRef.child(\"images/\"+imagePath )\n        imageView.isDrawingCacheEnabled=true\n        imageView.buildDrawingCache()\n        val drawable=imageView.drawable as BitmapDrawable\n        val bitmap=drawable.bitmap\n        val baos= ByteArrayOutputStream()\n        bitmap.compress(Bitmap.CompressFormat.JPEG,100,baos)\n        val data= baos.toByteArray()\n        val uploadTask=ImageRef.putBytes(data)\n        uploadTask.addOnFailureListener{\n            Toast.makeText(applicationContext,\"fail to upload\",Toast.LENGTH_LONG).show()\n        }.addOnSuccessListener { taskSnapshot -&gt;\n            var DownloadURL= taskSnapshot.downloadUrl!!.toString()\n            Log.d(\"Download Url:\",DownloadURL)\n        } }\n</code></pre>\n\n<p>When I click on the upload button it throws a NPE at </p>\n\n<blockquote>\n  <p>.register.SaveImageInFirebase(register.kt:125)                                                                           java.lang.IllegalStateException: Could not execute method for\n  android:onClick</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "clean-architecture"], "answers": [{"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": true, "score": 2, "last_activity_date": 1520152534, "creation_date": 1520152534, "answer_id": 49093512, "question_id": 49093017, "link": "https://stackoverflow.com/questions/49093017/does-r-count-as-an-android-dependency/49093512#49093512", "title": "Does R count as an android dependency?", "body": "<p>It's safe to use R in the presenter.</p>\n\n<p>R contains a number of integers, it does not have any reference to context, so it's safe to store it in the presenter.</p>\n\n<p>But the operation, like <code>imgeView.setDrawable(heart)</code> should be performed in the activity or fragment because imageView and any other view have a reference to the context.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9178453"}, "edited": false, "score": 0, "creation_date": 1520230987, "post_id": 49099493, "comment_id": 85214124, "body": "Thank you for your answer but I think the first answer is right(But I am not an expert too)."}, {"owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "edited": false, "score": 0, "creation_date": 1520240197, "post_id": 49099493, "comment_id": 85218156, "body": "I&#39;d say it depends, you can argue that it is a dependency. In practice, android framework depends on R, but R does not depend on Android framework except for being generated. I mean that once it is created it is just a list of integers and using it does not introduce any dependency to your code."}], "tags": [], "owner": {"reputation": 1827, "user_id": 9113457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9gM9.jpg?s=128&g=1", "display_name": "plainionist", "link": "https://stackoverflow.com/users/9113457/plainionist"}, "is_accepted": false, "score": 1, "last_activity_date": 1520191690, "creation_date": 1520191690, "answer_id": 49099493, "question_id": 49093017, "link": "https://stackoverflow.com/questions/49093017/does-r-count-as-an-android-dependency/49099493#49099493", "title": "Does R count as an android dependency?", "body": "<p>I am not an android expert but as far as I could figure out with google R is a class defined by android, correct?</p>\n\n<p>In \"Clean Architecture\" Uncle Bob writes that the Dependency Rule is about code dependencies. So when u use the class R in ur presenter u would basically create a dependency from the presenter to R which lives in the frameworks layer.</p>\n\n<p>As to my understanding this violates the Dependency Rule.</p>\n\n<p>(But I am not 100% sure - I have a similar question here: <a href=\"https://stackoverflow.com/questions/48589192/dependency-from-gateway-to-framework-in-clean-architecture\">Dependency from Gateway to Framework in Clean Architecture</a>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9178453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 49093512, "answer_count": 2, "score": 2, "last_activity_date": 1520191690, "creation_date": 1520148230, "question_id": 49093017, "link": "https://stackoverflow.com/questions/49093017/does-r-count-as-an-android-dependency", "title": "Does R count as an android dependency?", "body": "<p>I want to build an app using Clean Architecture and I want to store the drawable id of an image in the presenter:</p>\n\n<pre><code>var heart = R.drawable.heart_red\n</code></pre>\n\n<p>My question now is can I use R in the presenter or does it count as an android dependency?</p>\n"}, {"tags": ["null", "kotlin", "illegalstateexception", "convention"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1520144043, "post_id": 49092528, "comment_id": 85190352, "body": "Which function returns <code>null</code> and which function throws the exception exactly?"}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 2, "creation_date": 1520144223, "post_id": 49092528, "comment_id": 85190378, "body": "What does null have to do with IllegalStateException?"}, {"owner": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1520145201, "post_id": 49092528, "comment_id": 85190612, "body": "@zsmb13 the <code>WifiEntryLoader().readOreoFile()</code> function returns null, and @shmosel assigning null to the <code>wifiEntries</code> ArrayList throws the exception."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "edited": false, "score": 0, "creation_date": 1520575083, "post_id": 49092896, "comment_id": 85380149, "body": "I mentioned why I can&#39;t use the Elvis operator in my question."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "edited": false, "score": 0, "creation_date": 1520578983, "post_id": 49092896, "comment_id": 85381701, "body": "I still don&#39;t understand why you couldn&#39;t - if <code>readOreoFile</code> return <code>null</code>, you can use the Elvis operator to assign an empty list fo <code>wifiEntries</code> instead.     You said &quot;I can&#39;t use the Elvis operator to run code, unless I use it with an if expression (ugly and hacky)&quot;, but I don&#39;t know what this means."}, {"owner": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "edited": false, "score": 0, "creation_date": 1521337510, "post_id": 49092896, "comment_id": 85687758, "body": "I wasn&#39;t just assigning an empty list, I was calling some other functions as well. I&#39;m using exceptions now instead of returning null, so it&#39;s all good now."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 3, "last_activity_date": 1520147185, "creation_date": 1520147185, "answer_id": 49092896, "question_id": 49092528, "link": "https://stackoverflow.com/questions/49092528/bad-practise-to-catch-illegalstateexception-alternatives/49092896#49092896", "title": "Bad practise to catch IllegalStateException? Alternatives?", "body": "<p>Based on the elaboration in the comment, it looks like you should just use the Elvis operator and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/empty-list.html#emptylist\" rel=\"nofollow noreferrer\"><code>emptyList</code></a>:</p>\n\n<pre><code>wifiEntries = WifiEntryLoader().readOreoFile() ?: emptyList()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 7, "creation_date": 1520167432, "post_id": 49094537, "comment_id": 85195960, "body": "I don&#39;t think anyone calls the Java ternary operator an Elvis operator."}, {"owner": {"reputation": 86, "user_id": 4909801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce2bda90e881b634829265507d4f6cd?s=128&d=identicon&r=PG&f=1", "display_name": "dohamann", "link": "https://stackoverflow.com/users/4909801/dohamann"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1520269515, "post_id": 49094537, "comment_id": 85236663, "body": "Actually I have seen that misnomer quite often. Thanks for pointing out, adjusted the answer."}, {"owner": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "edited": false, "score": 0, "creation_date": 1520575033, "post_id": 49094537, "comment_id": 85380132, "body": "Thanks! I didn&#39;t even think of using an exception! I did mention why I can&#39;t use the Elvis operator in my question. As the code I&#39;m using is copied from somebody else&#39;s app, but not a library, I fixed it easily."}], "tags": [], "owner": {"reputation": 86, "user_id": 4909801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce2bda90e881b634829265507d4f6cd?s=128&d=identicon&r=PG&f=1", "display_name": "dohamann", "link": "https://stackoverflow.com/users/4909801/dohamann"}, "is_accepted": false, "score": 0, "last_activity_date": 1520269444, "last_edit_date": 1520269444, "creation_date": 1520160395, "answer_id": 49094537, "question_id": 49092528, "link": "https://stackoverflow.com/questions/49092528/bad-practise-to-catch-illegalstateexception-alternatives/49094537#49094537", "title": "Bad practise to catch IllegalStateException? Alternatives?", "body": "<p>To elaborate a bit on zsmb13's answer - Kotlin and Java have two different operators, that are look quite similar.\nJava has the ternary conditional operator, which is basically a shorthand notation for an inline if-then-else. </p>\n\n<pre><code>// java\nInteger test = nullable != null ? nullable : defaultValue;\n</code></pre>\n\n<p>Kotlin's binary 'Elvis operator' allows you to easily define default values. If the left operand is null, the right operand is returned.</p>\n\n<pre><code>// kotlin\nval nullable: Any? = ...\nval defaultValue: Any = ...\n\nval test1: Any = if(nullable != null) nullable else defaultValue\n// alternatively\nval test2: Any = nullable ?: defaultValue\n</code></pre>\n\n<p>Handling your situation by returning an empty list seems inappropriate, though. You should consider throwing an exception so the calling method can handle this error e.g. by displaying a dialog informing the user that he might be lacking root privileges.</p>\n"}], "owner": {"reputation": 13, "user_id": 8042799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24a34692b7dbfaa4d4ca3fc7e810911?s=128&d=identicon&r=PG&f=1", "display_name": "superl2", "link": "https://stackoverflow.com/users/8042799/superl2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1893, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520269444, "creation_date": 1520143735, "last_edit_date": 1520153259, "question_id": 49092528, "link": "https://stackoverflow.com/questions/49092528/bad-practise-to-catch-illegalstateexception-alternatives", "title": "Bad practise to catch IllegalStateException? Alternatives?", "body": "<p>I'm building an Android app that processes saved Wi-Fi information. I have a function that returns an ArrayList of WifiEntry objects, but will return null if it can't access the Wi-Fi configuration file (for example, if root access isn't available). At the moment, I'm dealing with it like this:</p>\n\n<pre><code>wifiEntries = try {\n     WifiEntryLoader().readOreoFile()\n} catch (e: IllegalStateException) {\n     // Important irelevant stuff\n     ArrayList()\n}\n</code></pre>\n\n<p>My question is: is there a \"better\" way to deal with the possibility of a null than by catching an IllegalStateException? I don't want to call my loader function twice. As far as I know, I can't use the Elvis operator to run code, unless I use it with an if expression (ugly and hacky)</p>\n"}, {"tags": ["ios", "swift", "kotlin", "kotlin-native"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1520145421, "post_id": 49092085, "comment_id": 85190648, "body": "Read the error message.. <code>toKotlin</code> is a method that is not implemented in <code>SwiftDependency</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "edited": false, "score": 0, "creation_date": 1520298715, "post_id": 49105635, "comment_id": 85249389, "body": "That did it. Thanks! Just for my own edification, is that requirement documented anywhere?"}, {"owner": {"reputation": 229, "user_id": 9444506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Svyatoslav Scherbina", "link": "https://stackoverflow.com/users/9444506/svyatoslav-scherbina"}, "reply_to_user": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "edited": false, "score": 0, "creation_date": 1520318369, "post_id": 49105635, "comment_id": 85254335, "body": "Not yet. Currently the best documentation for compilation of Kotlin code to Objective-C framework is <a href=\"https://github.com/JetBrains/kotlin-native/tree/master/samples/calculator\" rel=\"nofollow noreferrer\">calculator sample</a>."}], "tags": [], "owner": {"reputation": 229, "user_id": 9444506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Svyatoslav Scherbina", "link": "https://stackoverflow.com/users/9444506/svyatoslav-scherbina"}, "is_accepted": true, "score": 8, "last_activity_date": 1520236055, "creation_date": 1520236055, "answer_id": 49105635, "question_id": 49092085, "link": "https://stackoverflow.com/questions/49092085/error-when-passing-a-swift-implementation-of-a-kotlin-interface-to-a-kotlin-meth/49105635#49105635", "title": "Error when passing a Swift implementation of a Kotlin interface to a Kotlin method", "body": "<p>Currently <code>SwiftDependency</code> is required to subclass <code>NSObject</code>:</p>\n\n<pre><code>class SwiftDependency : NSObject, KotlinCommonDependency {\n    func foo() {\n        NSLog(\"hello\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 49105635, "answer_count": 1, "score": 2, "last_activity_date": 1520236055, "creation_date": 1520138999, "question_id": 49092085, "link": "https://stackoverflow.com/questions/49092085/error-when-passing-a-swift-implementation-of-a-kotlin-interface-to-a-kotlin-meth", "title": "Error when passing a Swift implementation of a Kotlin interface to a Kotlin method", "body": "<p>I'm doing some experimenting with Kotlin Native on iOS, and one thing I wanted to try was having a Swift implementation of a Kotlin-defined interface. However, I end up crashing when I try to pass that Swift object back up to the Kotlin code.</p>\n\n<p>I'm using the kotlin gradle plugin version 1.2.30 and kotlin native version 0.6.1</p>\n\n<p>A minimal example follows. The Kotlin code is being compiled to a framework with the name KotlinCommon, which is then included in the xcode project.</p>\n\n<p>DemoClass.kt</p>\n\n<pre><code>class DemoClass {\n    fun process(dependency: Dependency) {\n        dependency.foo()\n    }\n}\n\ninterface Dependency {\n    fun foo()\n}\n</code></pre>\n\n<p>SwiftDependency.swift</p>\n\n<pre><code>import KotlinCommon\n\nclass SwiftDependency : KotlinCommonDependency {\n    func foo() {\n        NSLog(\"hello\")\n    }\n}\n</code></pre>\n\n<p>Then, from my iOS UI I try to run</p>\n\n<pre><code>let module = KotlinCommonDemoClass()\nlet dependency = SwiftDependency()\nmodule.process(dependency: dependency)\n</code></pre>\n\n<p>The third line causes a crash with the following error:    </p>\n\n<pre><code>*** NSForwarding: warning: object 0x101858d20 of class 'KotlinNativeDemo.SwiftDependency' does not implement methodSignatureForSelector: -- trouble ahead\nUnrecognized selector -[KotlinNativeDemo.SwiftDependency toKotlin:]\n</code></pre>\n\n<p>Is this use-case not supported by Kotlin Native? Or could there be something I'm configuring wrong?</p>\n"}, {"tags": ["java", "android", "canvas", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7217079, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q98mQjPCeHw/AAAAAAAAAAI/AAAAAAAAACI/veeX_0VbIpE/photo.jpg?sz=128", "display_name": "Uriel Castro", "link": "https://stackoverflow.com/users/7217079/uriel-castro"}, "edited": false, "score": 0, "creation_date": 1520140398, "post_id": 49092105, "comment_id": 85189691, "body": "I did not declare position, because I don&#39;t know how to do it. <code>fondo</code> is the Canvas View(6000,6000) I don&#39;t know where to plece <code>.setPosition(width&#47;2, height&#47;2);</code>, in layout?"}], "tags": [], "owner": {"reputation": 13, "user_id": 6866814, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rUoLX_L7h5s/AAAAAAAAAAI/AAAAAAAAAEk/opH6iaj1xPg/photo.jpg?sz=128", "display_name": "Andres Alejandre", "link": "https://stackoverflow.com/users/6866814/andres-alejandre"}, "is_accepted": false, "score": 0, "last_activity_date": 1520139205, "creation_date": 1520139205, "answer_id": 49092105, "question_id": 49091993, "link": "https://stackoverflow.com/questions/49091993/how-to-start-an-activity-in-specific-coordinates/49092105#49092105", "title": "How to start an Activity in specific coordinates", "body": "<p>More code would be nice since I cannot see where you are declaring the position but if you are hard-coding the coordinates, I would suggest instead of using the same variables for width and height and just putting them in the coordinates /2 so if your variables are width and height, it should be kind of like this depending on what you are using:</p>\n\n<pre><code>.setPosition(width/2, height/2);\n</code></pre>\n\n<p>If this isn't useful then please provide more info or more code to see where your mistake is :)</p>\n"}, {"tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520142409, "last_edit_date": 1520142409, "creation_date": 1520141902, "answer_id": 49092357, "question_id": 49091993, "link": "https://stackoverflow.com/questions/49091993/how-to-start-an-activity-in-specific-coordinates/49092357#49092357", "title": "How to start an Activity in specific coordinates", "body": "<p>That's not how Canvases work in Android.  You don't declare how big you want it to be and it magically scales to the screen.  If you're in the View's onDraw function, the Canvas passed in is the size of the View, in physical pixels.  You need to scale your drawing to it.  If you're drawing to an offscreen bitmap first and then blitting that to the screen, its your job to scale the bitmap via a matrix when you blit it.  Also, in Android the coordinate system is 0,0 as the upper left hand corner. Unless it greatly eases your drawing I suggest you not fight it.</p>\n\n<p>However you could use a matrix transformation on the Canvas to change that.  First you'd want to scale the matrix by 6000/view.getHeight() in the y and 6000/view.getWidth() in the x.  Then you'd want to translate it by -3000 in the x and -3000 in the y.  That should scale it to the view and move origin to center.</p>\n"}], "owner": {"reputation": 23, "user_id": 7217079, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q98mQjPCeHw/AAAAAAAAAAI/AAAAAAAAACI/veeX_0VbIpE/photo.jpg?sz=128", "display_name": "Uriel Castro", "link": "https://stackoverflow.com/users/7217079/uriel-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520142409, "creation_date": 1520137913, "last_edit_date": 1520140594, "question_id": 49091993, "link": "https://stackoverflow.com/questions/49091993/how-to-start-an-activity-in-specific-coordinates", "title": "How to start an Activity in specific coordinates", "body": "<p>My Activity has a Canvas with both width and height equal to 6000. When I start the Activity the upper left coordinate of my screen is (0,0) so screen' center is about (30,60). <strong>What I want is start the Activity with coordinates (3000,3000) in the center of screen</strong>\n<a href=\"https://i.stack.imgur.com/jwWbj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jwWbj.jpg\" alt=\"just an example\"></a></p>\n\n<p>any solution?</p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>I used this Kotlin code:</p>\n\n<pre><code>var fondo = Lienzo(this) //fondo is the Canvas View (6000,6000)\nval scrollV = ScrollView(this)\nval hscrollV = HorizontalScrollView(this)\nscrollV.addView(fondo)\nhscrollV.addView(scrollV)\nlayaout1.addView(hscrollV) //layaout1 is a RelativeLayout\n</code></pre>\n"}, {"tags": ["android", "arraylist", "kotlin", "android-arrayadapter"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9375298, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwTiGNOahhg/AAAAAAAAAAI/AAAAAAAAAGc/qPYXVQu2wzg/photo.jpg?sz=128", "display_name": "Amer Kanjo", "link": "https://stackoverflow.com/users/9375298/amer-kanjo"}, "edited": false, "score": 0, "creation_date": 1520248328, "post_id": 49092376, "comment_id": 85223120, "body": "thanks it is work .. how i can add image to this code"}, {"owner": {"reputation": 4930, "user_id": 7663565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z92s1.png?s=128&g=1", "display_name": "Rapunzel Van Winkle", "link": "https://stackoverflow.com/users/7663565/rapunzel-van-winkle"}, "reply_to_user": {"reputation": 25, "user_id": 9375298, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwTiGNOahhg/AAAAAAAAAAI/AAAAAAAAAGc/qPYXVQu2wzg/photo.jpg?sz=128", "display_name": "Amer Kanjo", "link": "https://stackoverflow.com/users/9375298/amer-kanjo"}, "edited": false, "score": 0, "creation_date": 1520277606, "post_id": 49092376, "comment_id": 85241101, "body": "That&#39;s a different question. Maybe you could learn from some of the many excellent tutorials available on the internet, like <a href=\"http://www.appsdeveloperblog.com/listview-images-example-kotlin/\" rel=\"nofollow noreferrer\">appsdeveloperblog.com/listview-images-example-kotlin</a> or <a href=\"https://www.raywenderlich.com/186976/android-listview-tutorial-2\" rel=\"nofollow noreferrer\">raywenderlich.com/186976/android-listview-tutorial-2</a>"}], "tags": [], "owner": {"reputation": 4930, "user_id": 7663565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z92s1.png?s=128&g=1", "display_name": "Rapunzel Van Winkle", "link": "https://stackoverflow.com/users/7663565/rapunzel-van-winkle"}, "is_accepted": true, "score": 8, "last_activity_date": 1520142092, "creation_date": 1520142092, "answer_id": 49092376, "question_id": 49091840, "link": "https://stackoverflow.com/questions/49091840/in-kotlin-arrayadapter-need-context-context-int-resource-as-parameter-but-i-wa/49092376#49092376", "title": "in Kotlin ArrayAdapter need (Context context,int resource) as parameter but i want as a string in the ArrayList how h can do that?", "body": "<p>If you just want a <code>ListView</code> with an <code>ArrayAdapter</code>, something like this might get you started:</p>\n\n<pre><code>    val adapter = object : ArrayAdapter&lt;Word&gt;(this, android.R.layout.simple_list_item_2, android.R.id.text1, words) {\n        override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n            val view = super.getView(position, convertView, parent)\n            val text1 = view.findViewById(android.R.id.text1) as TextView\n            val text2 = view.findViewById(android.R.id.text2) as TextView\n            text1.setText(words[position].mDefultTranslation)\n            text2.setText(words[position].mArabicTranslation)\n            return view\n        }\n    }\n    listview.adapter = adapter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 9158170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ee0cf357ef804bb7035f53d3ecaaab?s=128&d=identicon&r=PG&f=1", "display_name": "RomanS", "link": "https://stackoverflow.com/users/9158170/romans"}, "is_accepted": false, "score": 0, "last_activity_date": 1520169491, "creation_date": 1520169491, "answer_id": 49095837, "question_id": 49091840, "link": "https://stackoverflow.com/questions/49091840/in-kotlin-arrayadapter-need-context-context-int-resource-as-parameter-but-i-wa/49095837#49095837", "title": "in Kotlin ArrayAdapter need (Context context,int resource) as parameter but i want as a string in the ArrayList how h can do that?", "body": "<p>Put in third param into your <code>WordAdapter</code>.</p>\n\n<pre><code>class WordAdapter(context: Context, @LayoutRes resource: Int, private val wordList: ArrayList&lt;Word&gt;) : ArrayAdapter&lt;Word&gt;(context, resource)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9375298, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwTiGNOahhg/AAAAAAAAAAI/AAAAAAAAAGc/qPYXVQu2wzg/photo.jpg?sz=128", "display_name": "Amer Kanjo", "link": "https://stackoverflow.com/users/9375298/amer-kanjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4543, "favorite_count": 0, "accepted_answer_id": 49092376, "answer_count": 2, "score": 0, "last_activity_date": 1520169491, "creation_date": 1520135981, "last_edit_date": 1520153342, "question_id": 49091840, "link": "https://stackoverflow.com/questions/49091840/in-kotlin-arrayadapter-need-context-context-int-resource-as-parameter-but-i-wa", "title": "in Kotlin ArrayAdapter need (Context context,int resource) as parameter but i want as a string in the ArrayList how h can do that?", "body": "<pre><code>class Word(var mDefultTranslation: String, var mArabicTranslation: String ) {\n      fun Word (defultTranslation : String , arabicTranslation : String  ){\n          mDefultTranslation = defultTranslation\n          mArabicTranslation = arabicTranslation\n      } \n}\n\nval words = arrayListOf&lt;Word&gt;()\nwords.add( Word(\"one\",\"two\" ))  \nval wordAdapter = WordAdapter (this, word??)\n</code></pre>\n"}]