[{"tags": ["android", "rx-java", "kotlin", "rx-android", "rx-kotlin"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1456347251, "post_id": 35612056, "comment_id": 58909611, "body": "Could you add <code>doOnNext</code> and <code>doOnCompleted</code> at points and see where the events get lost?"}, {"owner": {"reputation": 71, "user_id": 1501857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/164c1071376c52e0f4f0e2959504580b?s=128&d=identicon&r=PG", "display_name": "vork", "link": "https://stackoverflow.com/users/1501857/vork"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1456347856, "post_id": 35612056, "comment_id": 58909940, "body": "A <code>OnCompleted</code> is never triggered and the <code>OnNext</code> events stop just before <code>toSortedList()</code>"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1456349082, "post_id": 35612056, "comment_id": 58910603, "body": "Maybe you get an exception somewhere but you don&#39;t listen to it."}, {"owner": {"reputation": 71, "user_id": 1501857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/164c1071376c52e0f4f0e2959504580b?s=128&d=identicon&r=PG", "display_name": "vork", "link": "https://stackoverflow.com/users/1501857/vork"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1456350807, "post_id": 35612056, "comment_id": 58911580, "body": "Wouldn&#39;t it show up in the <code>onError</code> of the Subscribe? (I have a log there. Just posted a trimmed down version)"}, {"owner": {"reputation": 18010, "user_id": 1038826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296dc6fb8472e818b3e8ad4f778b4f91?s=128&d=identicon&r=PG", "display_name": "zsxwing", "link": "https://stackoverflow.com/users/1038826/zsxwing"}, "edited": false, "score": 0, "creation_date": 1456356680, "post_id": 35612056, "comment_id": 58914229, "body": "But your <code>onError</code> is empty?"}, {"owner": {"reputation": 71, "user_id": 1501857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/164c1071376c52e0f4f0e2959504580b?s=128&d=identicon&r=PG", "display_name": "vork", "link": "https://stackoverflow.com/users/1501857/vork"}, "edited": false, "score": 0, "creation_date": 1456357498, "post_id": 35612056, "comment_id": 58914529, "body": "Yep. After the toSortedList the whole thing is dead"}, {"owner": {"reputation": 18010, "user_id": 1038826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296dc6fb8472e818b3e8ad4f778b4f91?s=128&d=identicon&r=PG", "display_name": "zsxwing", "link": "https://stackoverflow.com/users/1038826/zsxwing"}, "edited": false, "score": 0, "creation_date": 1456358075, "post_id": 35612056, "comment_id": 58914710, "body": "I meant you can add a log in <code>onError</code> to check the exception"}, {"owner": {"reputation": 71, "user_id": 1501857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/164c1071376c52e0f4f0e2959504580b?s=128&d=identicon&r=PG", "display_name": "vork", "link": "https://stackoverflow.com/users/1501857/vork"}, "edited": false, "score": 0, "creation_date": 1456361592, "post_id": 35612056, "comment_id": 58915844, "body": "There is a log. I posted a trimmed down version. Without the <code>toSortedList</code> and the <code>flatMap</code> afterwards, I only receive <code>onNext</code> Events in the Subscribtion. Yep even without them no <code>onComplete</code>."}, {"owner": {"reputation": 1422, "user_id": 2599618, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/98d6dc9ddad2799f31651ad9807cee24?s=128&d=identicon&r=PG", "display_name": "mewa", "link": "https://stackoverflow.com/users/2599618/mewa"}, "edited": false, "score": 1, "creation_date": 1456786989, "post_id": 35612056, "comment_id": 59099760, "body": "@vork <code>toList</code> expects the stream to finish, so it can create a list of all emitted elements. If your observable runs indefinitely it will never get past this statement."}], "owner": {"reputation": 71, "user_id": 1501857, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/164c1071376c52e0f4f0e2959504580b?s=128&d=identicon&r=PG", "display_name": "vork", "link": "https://stackoverflow.com/users/1501857/vork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456344627, "creation_date": 1456344627, "question_id": 35612056, "link": "https://stackoverflow.com/questions/35612056/oncomplete-never-called-with-tosortedlist-and-groupby", "title": "OnComplete never called with toSortedList() and groupBy()", "body": "<p>I'm currently using the Android-ReactiveLocation Library (<a href=\"https://github.com/mcharmas/Android-ReactiveLocation\" rel=\"nofollow\">Github</a>). The <code>LastKnownLocationObservable</code> (<a href=\"https://github.com/mcharmas/Android-ReactiveLocation/blob/master/android-reactive-location/src/main/java/pl/charmas/android/reactivelocation/observables/location/LastKnownLocationObservable.java\" rel=\"nofollow\">Code</a>) is working as intended. I'm using a <code>flatMap</code> to fetch nearby stations from a db and (because of realm) I'm creating a model from the data. So I have a list of items and I'm creating the new Observable in <code>flatMap</code> with <code>Observable.from(data)</code>.</p>\n\n<p>Then I want to sort the locations, filter them and group them.</p>\n\n<pre><code>.toSortedList()\n.flatMap { Observable.from(it) }\n.filter { it.distance &lt;= (maxDistance.toDouble() * 1000) }\n.groupBy { //Group the stations in categories\n    if (it.distance &lt;= maxDistance &amp;&amp; it.favorite) {\n        \"nearbyFavorite\"\n    } else if (it.favorite) {\n        \"outOfReachFavorite\"\n    } else {\n        \"nearby\"\n    }\n}\n</code></pre>\n\n<p>However the onComplete is never called when I subscribe to the Observable. The Observable just stalls at <code>toSortedList()</code>.</p>\n\n<p>The Subscribe:</p>\n\n<pre><code>.subscribe(object: Subscriber&lt;GroupedObservable&lt;String, NearbyLocationItem&gt;&gt;() {\n    override fun onNext(p0: GroupedObservable&lt;String, NearbyLocationItem&gt;?) {\n        val locationItems = ArrayList&lt;NearbyLocationItem&gt;()\n        p0.subscribe { loc -&gt;\n            locationItems.add(loc)\n        }\n        locations.put(p0.key, locationItems)\n    }\n\n\n    override fun onCompleted() {\n        Log.d(javaClass.simpleName, \"Never called\")\n    }\n\n    override fun onError(p0: Throwable?) {\n\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 5154, "user_id": 488704, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56d47d2256d26d41ad752ba1bb41748d?s=128&d=identicon&r=PG", "display_name": "damienix", "link": "https://stackoverflow.com/users/488704/damienix"}, "edited": false, "score": 0, "creation_date": 1456342384, "post_id": 35608784, "comment_id": 58906775, "body": "do you implement your java interface or is it some interface from 3rd party library?"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "reply_to_user": {"reputation": 5154, "user_id": 488704, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56d47d2256d26d41ad752ba1bb41748d?s=128&d=identicon&r=PG", "display_name": "damienix", "link": "https://stackoverflow.com/users/488704/damienix"}, "edited": false, "score": 0, "creation_date": 1456344985, "post_id": 35608784, "comment_id": 58908292, "body": "it is all my code, just in a separate java only project"}, {"owner": {"reputation": 5154, "user_id": 488704, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56d47d2256d26d41ad752ba1bb41748d?s=128&d=identicon&r=PG", "display_name": "damienix", "link": "https://stackoverflow.com/users/488704/damienix"}, "edited": false, "score": 0, "creation_date": 1456345183, "post_id": 35608784, "comment_id": 58908435, "body": "It&#39;s quite strange. If you have both projects opened as 1 intellij projects then it should see and understand the sources, otherwise you can connect the sources so it can see full signatures..."}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456345960, "post_id": 35608784, "comment_id": 58908905, "body": "I&#39;m seeing the same thing with the Android SDK."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1456347832, "creation_date": 1456347832, "answer_id": 35613055, "question_id": 35608784, "link": "https://stackoverflow.com/questions/35608784/how-to-preserve-parameter-names-for-debug/35613055#35613055", "title": "How to preserve parameter names for debug?", "body": "<p>The behavior you see is <a href=\"https://youtrack.jetbrains.com/issue/KT-11039\" rel=\"nofollow\">a bug in Kotlin 1.0</a> which will be fixed in the 1.0.1 update.</p>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 35613055, "answer_count": 1, "score": 1, "last_activity_date": 1456347832, "creation_date": 1456334287, "question_id": 35608784, "link": "https://stackoverflow.com/questions/35608784/how-to-preserve-parameter-names-for-debug", "title": "How to preserve parameter names for debug?", "body": "<p>I need to subclass java files (of my IntelliJ java project, so I have the source) in Kotlin, but they just implement abstract methods using p0, p1, etc. for variable names.</p>\n\n<p>So I think I must turn on debug info, but in my IJ IDE debug info is already on.</p>\n\n<p>What else must I do to preserve parameter names for classes, interfaces, etc.?</p>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5422877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c956dd0939e2b4873685ee97d5b51872?s=128&d=identicon&r=PG&f=1", "display_name": "Zeezl", "link": "https://stackoverflow.com/users/5422877/zeezl"}, "edited": false, "score": 0, "creation_date": 1456329416, "post_id": 35606500, "comment_id": 58897959, "body": "Can&#39;t find this option in Android Studio :("}, {"owner": {"reputation": 123, "user_id": 5422877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c956dd0939e2b4873685ee97d5b51872?s=128&d=identicon&r=PG&f=1", "display_name": "Zeezl", "link": "https://stackoverflow.com/users/5422877/zeezl"}, "edited": false, "score": 0, "creation_date": 1456329467, "post_id": 35606500, "comment_id": 58897995, "body": "My Android Project View show only Java one, even if project view reconize  kotlin as source folder"}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "reply_to_user": {"reputation": 123, "user_id": 5422877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c956dd0939e2b4873685ee97d5b51872?s=128&d=identicon&r=PG&f=1", "display_name": "Zeezl", "link": "https://stackoverflow.com/users/5422877/zeezl"}, "edited": false, "score": 0, "creation_date": 1456329589, "post_id": 35606500, "comment_id": 58898093, "body": "Have you tried using a build automation system, like Gradle? Setting up source folders and dependencies by hand might quickly become tedious. Your problem would be solved by adding a single line to the <code>build.gradle</code> file."}], "tags": [], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "is_accepted": false, "score": 3, "last_activity_date": 1456328539, "creation_date": 1456328539, "answer_id": 35606500, "question_id": 35606118, "link": "https://stackoverflow.com/questions/35606118/is-it-possible-to-move-my-kotlin-files-into-separate-package-source-type-in-an/35606500#35606500", "title": "Is it possible to move my Kotlin files into separate package (source type) in Android Studio?", "body": "<p>Of course, just mark the folder as <a href=\"https://www.jetbrains.com/idea/help/configuring-content-roots.html\" rel=\"nofollow\">source</a>. Actually, default Gradle Kotlin plugin automatically recognizes <code>src/main/kotlin</code> and <code>src/main/java</code> as source folders.</p>\n"}, {"tags": [], "owner": {"reputation": 25774, "user_id": 885028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xJkDj.jpg?s=128&g=1", "display_name": "aga", "link": "https://stackoverflow.com/users/885028/aga"}, "is_accepted": false, "score": 6, "last_activity_date": 1456419362, "last_edit_date": 1456419362, "creation_date": 1456335143, "answer_id": 35609081, "question_id": 35606118, "link": "https://stackoverflow.com/questions/35606118/is-it-possible-to-move-my-kotlin-files-into-separate-package-source-type-in-an/35609081#35609081", "title": "Is it possible to move my Kotlin files into separate package (source type) in Android Studio?", "body": "<p>Yes, it's possible. Add the folder called <code>kotlin</code> and after that add the following lines to the <code>android</code> section of your <code>app/build.gradle</code> file:</p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n</code></pre>\n\n<p>If you want to read more about Kotlin-Android projects in Android Studio, you can read <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow\">this</a>.</p>\n"}], "owner": {"reputation": 123, "user_id": 5422877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c956dd0939e2b4873685ee97d5b51872?s=128&d=identicon&r=PG&f=1", "display_name": "Zeezl", "link": "https://stackoverflow.com/users/5422877/zeezl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1456419362, "creation_date": 1456327610, "question_id": 35606118, "link": "https://stackoverflow.com/questions/35606118/is-it-possible-to-move-my-kotlin-files-into-separate-package-source-type-in-an", "title": "Is it possible to move my Kotlin files into separate package (source type) in Android Studio?", "body": "<p>default folder structure look like this:</p>\n\n<pre><code>app:\n-manifests\n-java\n-res\n</code></pre>\n\n<p>Is there a way that I can create another folder here just for kotlin? So it gonna look like this:</p>\n\n<pre><code>app:\n-manifest\n-java\n-kotlin\n-res\n</code></pre>\n"}, {"tags": ["command-line", "compilation", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456321401, "post_id": 35602830, "comment_id": 58892167, "body": "correct, it uses the current operating system path separator."}], "tags": [], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "is_accepted": true, "score": 3, "last_activity_date": 1456318552, "creation_date": 1456318552, "answer_id": 35602830, "question_id": 35602445, "link": "https://stackoverflow.com/questions/35602445/compile-kotlin-with-a-jar-dependency-from-a-command-line/35602830#35602830", "title": "Compile Kotlin with a jar dependency from a command line", "body": "<p>As it happens, I managed to find the problem myself immediately after posting the question. The arguments to the <code>-cp</code> parameter have to be separated by a colon (:), not a space. The following works just fine:</p>\n\n<pre><code>find java/main/ -type d \\\n| xargs kotlinc-jvm \\\n    -cp java/lib/google-collections-0.9.jar:java/lib/jgrapht-core-0.9.1.jar \\\n    -d java/main/\n</code></pre>\n"}], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1627, "favorite_count": 0, "accepted_answer_id": 35602830, "answer_count": 1, "score": 1, "last_activity_date": 1456318552, "creation_date": 1456317515, "last_edit_date": 1456318304, "question_id": 35602445, "link": "https://stackoverflow.com/questions/35602445/compile-kotlin-with-a-jar-dependency-from-a-command-line", "title": "Compile Kotlin with a jar dependency from a command line", "body": "<p>I have a project with a mixture of Java and Kotlin files. Until recently I've been succesfully compiling it from the command line using a simple script like this:</p>\n\n<pre><code>export CLASSPATH=java/main\n\n# compile Kotlin files\nfind java/main/ -type d \\\n| xargs kotlinc-jvm -cp java/lib/google-collections-0.9.jar -d java/main/\n\n# compile Java files\nfind java/main/ -name '*.java' | xargs javac\n</code></pre>\n\n<p>Then I started using the JGraphT library, so that created a dependancy on the jgrapht jar. The library is referenced from the Kotlin files. I can still compile my project from IntelliJ, but can't get the command-line script working.</p>\n\n<p>Here's what I have tried:</p>\n\n<ol>\n<li><p>Add the jar to CLASSPATH. Doesn't work. Kotlin compiler doesn't see it. It probably ignores the CLASSPATH.</p></li>\n<li><p>Add the jar as another <code>-cp</code> parameter:</p>\n\n<p><code>find java/main/ -type d \\\n| xargs kotlinc-jvm \\\n    -cp java/lib/google-collections-0.9.jar \\\n        java/lib/jgrapht-core-0.9.1.jar \\\n    -d java/main/</code></p></li>\n</ol>\n\n<p>Then I get the following error:</p>\n\n<pre><code>error: source entry is not a Kotlin file: java/lib/jgrapht-core-0.9.1.jar\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>This is a small hobby project, mainly to play around with Kotlin. That's why I'm not using any build system, such as Ant or Gradle. (Another reason is I don't have any experience with these and they look scary. :))</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1456317568, "post_id": 35602364, "comment_id": 58889439, "body": "It was a decision made to avoid bugs."}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "edited": false, "score": 2, "creation_date": 1456317963, "post_id": 35602364, "comment_id": 58889724, "body": "You can also use <code>get</code> and <code>set</code> syntax, which is much more readable. <a href=\"https://kotlinlang.org/docs/reference/properties.html#getters-and-setters\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1456321588, "post_id": 35602364, "comment_id": 58892306, "body": "I haven&#39;t found anything documenting why <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#Equals\" rel=\"nofollow noreferrer\">assignments are <i>NOT</i> expressions in Kotlin</a> but in case any readers are not aware you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\"><code>run</code></a> to treat an assignment as an expression. e.g. <code>fun attachView(view: View) = run { this.view = view }</code> but in this case you might as well use a block function, <code>fun attachView(view: View) { this.view = view }</code>, unless you want to avoid code styles that wrap block functions into multiple lines."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1456355244, "post_id": 35602364, "comment_id": 58913709, "body": "@mfulton26 note that the type of the assignment expression inside <code>run</code> is <code>Unit</code>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 4, "creation_date": 1456361823, "post_id": 35602364, "comment_id": 58915902, "body": "@llya Not really. <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#Equals\" rel=\"nofollow noreferrer\">Assignments are <i>NOT</i> expressions in Kotlin</a> but as the <code>run { ... }</code> example &quot;does not return any useful value, its return type is <code>Unit</code>&quot; (<a href=\"https://kotlinlang.org/docs/reference/functions.html#unit-returning-functions\" rel=\"nofollow noreferrer\">Unit-returning functions</a>). Assignments in Kotlin do not have return types because they are not expressions but they can be used as the last statement in a code block to infer a function return type of <code>Unit</code>."}, {"owner": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1456750408, "post_id": 35602364, "comment_id": 59076377, "body": "@nhaarman Could you please provide an example where that could lead to a bug?"}, {"owner": {"reputation": 200, "user_id": 5340219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TEHKcPYbGq8/AAAAAAAAAAI/AAAAAAAAAPE/4nuLptJ7ILk/photo.jpg?sz=128", "display_name": "Daniel Ocampo", "link": "https://stackoverflow.com/users/5340219/daniel-ocampo"}, "edited": false, "score": 0, "creation_date": 1499117971, "post_id": 35602364, "comment_id": 76766381, "body": "You don&#39;t actually need the run, in this case you should just use { } to wrap anything inside your function. The &quot;=&quot; syntax is for when you&#39;re actually returning a value, while in this case you&#39;re just making an assignment. Assignments don&#39;t return any value, that is why you get this error. So clarifying, it should look like this: <code>fun detachView() { this.view = null }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501200528, "post_id": 45362618, "comment_id": 77686846, "body": "This answer relies heavily on the content of an external link. Should that page ever go offline, your answer would lose most of its value. So please <a href=\"https://stackoverflow.com/posts/45362618/edit\">edit</a> it and add some more details of what can be found there. Consider that if the value of an answer lies <i>only</i> in the content of external sites, that answer is very likely to be removed. Thank you!"}], "tags": [], "owner": {"reputation": 193, "user_id": 5920500, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NX8cqpSmHV4/AAAAAAAAAAI/AAAAAAAAAv8/xt9V5mYroo0/photo.jpg?sz=128", "display_name": "Troy Heninger", "link": "https://stackoverflow.com/users/5920500/troy-heninger"}, "is_accepted": false, "score": 1, "last_activity_date": 1501198347, "creation_date": 1501198347, "answer_id": 45362618, "question_id": 35602364, "link": "https://stackoverflow.com/questions/35602364/why-assignments-are-not-statements/45362618#45362618", "title": "why assignments are not statements", "body": "<p>Whether we like it or not, this was simply a design decision which the language creators made. See this discussion for more details:</p>\n\n<p><a href=\"https://discuss.kotlinlang.org/t/assignment-not-allow-in-while-expression/339\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/assignment-not-allow-in-while-expression/339</a></p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1501198347, "creation_date": 1456317306, "question_id": 35602364, "link": "https://stackoverflow.com/questions/35602364/why-assignments-are-not-statements", "title": "why assignments are not statements", "body": "<p>I have the following code:</p>\n\n<pre><code>class Presenter {\n    private var view : View? = null\n\n    fun attachView(view: View) = this.view = view // error: Assignment is not a statement\n\n    fun detachView() = view = null // error: Assignment is not a statement\n}\n</code></pre>\n\n<p>I know I just can write:</p>\n\n<pre><code>class Presenter {\n    var view : View? = null\n}\n</code></pre>\n\n<p>and later in code just call <code>presenter.view = View()</code> and <code>presenter.view = null</code> instead of <code>attachView</code>/<code>detachView</code>. But I think this is much less readable.</p>\n\n<p>So why can't I use assignments as expression bodies in Kotlin? Why isn't assignment just a statement of type <code>Unit</code>?</p>\n"}, {"tags": ["generics", "reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 1, "creation_date": 1456323494, "post_id": 35602699, "comment_id": 58893719, "body": "One thing that puzzels me though is why I only need to cast for generic types. For a generic t <code>var clsOfT = t?.javaClass</code> this gives a compile error but for a regular type <code>var a : Any? = &quot;A&quot;;  var clsOfA = a?.javaClass</code> this is ok even though both have the upperbound <code>:Any?</code> ?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 1, "creation_date": 1456327799, "post_id": 35602699, "comment_id": 58896761, "body": "@TomasKarlsson, +1, looks like a peculiarity of Kotlin generics. I&#39;m going to find the answer."}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1456342759, "post_id": 35602699, "comment_id": 58906973, "body": "Clarification to the above: <code>t</code> is a property of generic type <code>T</code>"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 1, "creation_date": 1456355039, "post_id": 35602699, "comment_id": 58913617, "body": "@TomasKarlsson @hotkey it is known limitation due to lack of intersection types, namely <code>(T &amp; Any)</code>. See <a href=\"https://youtrack.jetbrains.com/issue/KT-10708\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-10708</a>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 16, "last_activity_date": 1456320507, "last_edit_date": 1456320507, "creation_date": 1456318174, "answer_id": 35602699, "question_id": 35602231, "link": "https://stackoverflow.com/questions/35602231/kotlin-generics-reflection-and-the-difference-between-type-t-and-tany/35602699#35602699", "title": "Kotlin: Generics, reflection and the difference between type T and T:Any", "body": "<p>The default <a href=\"https://kotlinlang.org/docs/reference/generics.html#upper-bounds\" rel=\"noreferrer\">generic upper bound</a> is not <code>Any</code> but <code>Any?</code>.</p>\n\n<p>This also implies that it's not null-safe to get a <code>javaClass</code> from a nullable argument.</p>\n\n<p>To get a <code>javaClass</code> from a generic type instance with <code>Any?</code> upper bound, you can cast it to <code>Any</code>:</p>\n\n<pre><code>val cls = (t as Any).javaClass //unsafe\nval clsOrNull = (t as? Any)?.javaClass //safe\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 2, "accepted_answer_id": 35602699, "answer_count": 1, "score": 11, "last_activity_date": 1456320507, "creation_date": 1456316879, "last_edit_date": 1456317216, "question_id": 35602231, "link": "https://stackoverflow.com/questions/35602231/kotlin-generics-reflection-and-the-difference-between-type-t-and-tany", "title": "Kotlin: Generics, reflection and the difference between type T and T:Any", "body": "<p>If I try to access the javaClass of a generic type T the Kotlin compiler complains that T is not a subtype of kotlin.Any   </p>\n\n<pre><code>class Foo&lt;T&gt; (val t: T ){\n    val cls = t.javaClass // Error, T is not a subtype of kotlin.Any\n}\n</code></pre>\n\n<p>If define T as a subtype of Any everything works ok.</p>\n\n<pre><code>class Bar&lt;T:Any&gt; (val t: T ){\n    val cls = t.javaClass // OK\n}\n</code></pre>\n\n<p>Q1) If type \u00b4T\u00b4 is not a subtype of \u00b4Any\u00b4 which class/classes can it be a subtype of ? </p>\n\n<p>Q2) Do a javaClass exist for all instances of T and if so how do I access it ? </p>\n"}, {"tags": ["android", "kotlin", "android-lint"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1456291620, "post_id": 35590455, "comment_id": 58873721, "body": "Many of the link checks work against java <i>source</i> code. You&#39;ll just not get that with Kotlin source unless someone ports all the lint tools to Kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1456300652, "post_id": 35595702, "comment_id": 58877740, "body": "Thanks - this was what I was searching for - just voted for this issue and hope it gets solved soon so I can migrate more code to kotlin"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1464163013, "post_id": 35595702, "comment_id": 62365845, "body": "Follow-up: Kotlin 1.0.2 now has initial lint-checks"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 19, "last_activity_date": 1456298434, "creation_date": 1456298434, "answer_id": 35595702, "question_id": 35590455, "link": "https://stackoverflow.com/questions/35590455/kotlin-and-android-lint-checks/35595702#35595702", "title": "Kotlin and android lint checks", "body": "<p>The Kotlin team is working on supporting Android Lint checks for Kotlin code. You can watch <a href=\"https://youtrack.jetbrains.com/issue/KT-7729\">this issue</a> to keep track of the progress.</p>\n"}, {"comments": [{"owner": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "edited": false, "score": 0, "creation_date": 1576657953, "post_id": 44267008, "comment_id": 104966829, "body": "Do you know if Its possible to achieve this? <a href=\"https://stackoverflow.com/questions/59387783/real-time-rules-with-ktlint\" title=\"real time rules with ktlint\">stackoverflow.com/questions/59387783/&hellip;</a>"}], "tags": [], "owner": {"reputation": 744, "user_id": 3708426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1696669719/picture?type=large", "display_name": "Jonathan Leitschuh", "link": "https://stackoverflow.com/users/3708426/jonathan-leitschuh"}, "is_accepted": false, "score": 4, "last_activity_date": 1496160269, "creation_date": 1496160269, "answer_id": 44267008, "question_id": 35590455, "link": "https://stackoverflow.com/questions/35590455/kotlin-and-android-lint-checks/44267008#44267008", "title": "Kotlin and android lint checks", "body": "<p>There is a Kotlin linter that has a few different ways of integrating it with different build systems.</p>\n\n<p><a href=\"https://github.com/shyiko/ktlint\" rel=\"nofollow noreferrer\">https://github.com/shyiko/ktlint</a></p>\n"}, {"tags": [], "owner": {"reputation": 21170, "user_id": 2949612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/RLdcF.png?s=128&g=1", "display_name": "pRaNaY", "link": "https://stackoverflow.com/users/2949612/pranay"}, "is_accepted": false, "score": 7, "last_activity_date": 1526049979, "last_edit_date": 1592644375, "creation_date": 1526049979, "answer_id": 50294887, "question_id": 35590455, "link": "https://stackoverflow.com/questions/35590455/kotlin-and-android-lint-checks/50294887#50294887", "title": "Kotlin and android lint checks", "body": "<p>In the release of Android Studio 3.2, Lint can able to check.</p>\n<p>Follow below step to enable lint check for Kotlin:</p>\n<ul>\n<li><p>To enable these checks, go to <strong>File</strong> &gt; <strong>Preferences</strong> &gt; <strong>Editor</strong> &gt; <strong>Inspections</strong> and check the rules that you want to enable under Kotlin Interoperability, as shown below.</p>\n</li>\n<li><p>You can then run the checks by selecting <strong>Analyze</strong> &gt; <strong>Inspect Code</strong> from the main menu.</p>\n</li>\n</ul>\n<p>Check more info at <a href=\"https://developer.android.com/studio/preview/features/#lint\" rel=\"noreferrer\">Lint checks for Java/Kotlin interoperability</a></p>\n<p><a href=\"https://i.stack.imgur.com/N58ni.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/N58ni.png\" alt=\"Lint checks for Java/Kotlin interoperability\" /></a></p>\n<p>I hope it helps us.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9604, "favorite_count": 3, "accepted_answer_id": 35595702, "answer_count": 3, "score": 17, "last_activity_date": 1526049979, "creation_date": 1456270612, "question_id": 35590455, "link": "https://stackoverflow.com/questions/35590455/kotlin-and-android-lint-checks", "title": "Kotlin and android lint checks", "body": "<p>I am really loving to code android apps in Kotlin recently - but I really miss lint. Anyone knows how to get this back ( at least partially ). Is there a project that adapts the android java lint rules to kotlin? AFAIK lint is not running on bytecode only so there needs to be some manual converting to be done.\nMy main pain-point at the moment is that I need a compile-time error when I use a function &lt; MINSDK level \nCan someone point me in the right direction?</p>\n"}, {"tags": ["read-eval-print-loop", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1456326762, "post_id": 35594391, "comment_id": 58896023, "body": "Thanks! That does let Maven find the REPL. However, the REPL can&#39;t take input and just blocks. I guess it needs to spawn a new process. <a href=\"http://stackoverflow.com/questions/4668839/maven-and-exec-forking-a-process\">This</a> might help me, but I haven&#39;t tested it yet. Alternatively, maybe there is a Kotlin-specific way to do this? I would think this would be a pretty common use case for the Kotlin REPL..."}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 1, "creation_date": 1456330152, "post_id": 35594391, "comment_id": 58898544, "body": "Currently not possible, but this is in the process of being worked on currently. You can expect news in a matter of weeks. I&#39;ll update the answer then."}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 1, "creation_date": 1483543829, "post_id": 35594391, "comment_id": 70140424, "body": "Was there ever any progress on this (loading REPL in Maven context)? I&#39;m re-evaluating Kotlin for a new project after a long break and this might be a factor to consider. Thanks!"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1483952415, "post_id": 35594391, "comment_id": 70293054, "body": "I don&#39;t think anything improved substantially since my answer, sorry for that. If you&#39;re still unable to get REPL to work, please report an issue at kotl.in/issue and we&#39;ll look into it. Thanks!"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 5, "last_activity_date": 1456293582, "creation_date": 1456293582, "answer_id": 35594391, "question_id": 35590062, "link": "https://stackoverflow.com/questions/35590062/run-kotlin-repl-from-context-of-my-maven-project/35594391#35594391", "title": "Run Kotlin REPL from context of my Maven project?", "body": "<p>Please try <code>K2JVMCompiler</code> instead, since it's currently the entrypoint for REPL in <code>kotlin-compiler.jar</code>:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;executable&gt;java&lt;/executable&gt;\n    &lt;arguments&gt;\n      &lt;argument&gt;-classpath&lt;/argument&gt;\n      &lt;classpath/&gt;\n      &lt;argument&gt;-classpath&lt;/argument&gt;\n      &lt;argument&gt;${project.basedir}/target/dependency/kotlin-compiler-1.0.0.jar&lt;/argument&gt;\n      &lt;argument&gt;org.jetbrains.kotlin.cli.jvm.K2JVMCompiler&lt;/argument&gt;\n    &lt;/arguments&gt;\n  &lt;/configuration&gt;\n</code></pre>\n"}], "owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 4, "answer_count": 1, "score": 9, "last_activity_date": 1456316709, "creation_date": 1456268918, "last_edit_date": 1456316709, "question_id": 35590062, "link": "https://stackoverflow.com/questions/35590062/run-kotlin-repl-from-context-of-my-maven-project", "title": "Run Kotlin REPL from context of my Maven project?", "body": "<p>How can I run the Kotlin REPL in the context of my Maven project? </p>\n\n<p>This works, but is ugly:</p>\n\n<pre><code>kotlinc-jvm -cp target/classes/:`ruby -e \"puts Dir['target/**/*.jar'].join(':')\"`\n</code></pre>\n\n<p>I've tried different variations on the following (after using Maven to copy the compiler JAR as a dependency), but nothing works (<code>Error: Could not find or load main class org.jetbrains.kotlin.runner.Main</code>):</p>\n\n<pre><code>&lt;plugin&gt;  \n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; \n  &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt; \n  &lt;version&gt;1.1.1&lt;/version&gt; \n  &lt;executions&gt;\n    &lt;execution&gt;\n    &lt;goals&gt;\n      &lt;goal&gt;exec&lt;/goal&gt; \n    &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;configuration&gt;\n    &lt;executable&gt;java&lt;/executable&gt;\n    &lt;arguments&gt;\n      &lt;argument&gt;-classpath&lt;/argument&gt;\n      &lt;classpath/&gt;\n      &lt;argument&gt;-classpath&lt;/argument&gt;\n      &lt;argument&gt;${project.basedir}/target/dependency/kotlin-compiler-1.0.0.jar&lt;/argument&gt;\n      &lt;argument&gt;org.jetbrains.kotlin.runner.Main&lt;/argument&gt;\n    &lt;/arguments&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456267363, "post_id": 35588891, "comment_id": 58865745, "body": "Why not put them all in one project with different folders for java (src/main/java) and kotlin (src/main/kotlin)?  It sounds like you have to. Circular dependencies are crazy."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456271810, "post_id": 35588891, "comment_id": 58867563, "body": "analyzing my code, I realized that I just have to move a few more classes around... and then.. well, the kotlin project already accesses the Java project well enough for development of the kotlin project. And the java project actually will then only depend on the kotlin classes at runtime. They are not needed for development. That is because my java code is already loading those classes dynamically from the class names specified in xml files... So <i>as long as</i> Class.forName() and Class&lt;?&gt;.getConstructor().getNewInstance() will work on Kotlin generate class files, then it will work out for me.."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456272014, "post_id": 35588891, "comment_id": 58867650, "body": "if anyone knows if that will work, please confirm.. I mean the last part about using in <code>java</code> <code>forName()</code> and <code>getNewInstance()</code> calling <code>Kotlin</code>-generated files"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456281953, "post_id": 35588891, "comment_id": 58870817, "body": "I recommend you go find out for yourself if it will work for your particular set of projects, dependencies, and architecture.  I don&#39;t think someone will chime in with an authoritative answer without knowing how you&#39;re doing things.  If you have a particular <i>problem</i> with a specific description, then people might have something to say."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1456307119, "creation_date": 1456307119, "answer_id": 35598525, "question_id": 35588891, "link": "https://stackoverflow.com/questions/35588891/loading-kotlin-generated-classes-at-runtime-from-java/35598525#35598525", "title": "Loading Kotlin generated classes at runtime from Java", "body": "<p>Kotlin generates perfectly ordinary Java class files, so you can use <code>Class.forName()</code> and <code>Class&lt;?&gt;.getConstructor().getNewInstance()</code> with them just as well as with classes compiled from Java source code.</p>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 35598525, "answer_count": 1, "score": 0, "last_activity_date": 1456307119, "creation_date": 1456264027, "last_edit_date": 1456272145, "question_id": 35588891, "link": "https://stackoverflow.com/questions/35588891/loading-kotlin-generated-classes-at-runtime-from-java", "title": "Loading Kotlin generated classes at runtime from Java", "body": "<p>I have 2 projects...</p>\n\n<p>My main java project and a kotlin sub project that I moved some java classes out of the main project into and converted into kotlin.</p>\n\n<p>I've configured the kotlin project to have a dependency on the main java project, it works quite well since IJ is constantly recompiling java classes in the main project.</p>\n\n<p>But now that i've extracted classes from the Java project, it won't compile anymore of course - it needs to access the kotlin project.</p>\n\n<p>However, I don't know how to do that.. can someone explain? thanks</p>\n\n<p>my kotlin <code>out</code> folder is empty whenever I look at it</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456264038, "post_id": 35588353, "comment_id": 58864024, "body": "What is the type of <code>object</code>?"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456264124, "post_id": 35588353, "comment_id": 58864068, "body": "good question.. it&#39;s an Inner Class of a Java class I created (not <code>someClass</code>, let&#39;s call it <code>SomeClassWithAnInnerClass.InnerClass</code>)"}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1456270474, "post_id": 35588353, "comment_id": 58867064, "body": "Map.get returns a nullable value (doesn&#39;t matter if you&#39;ve check contains) as there is no compiler guarantee that entry will be in the map. So type of value should be Double?"}], "answers": [{"comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1456413463, "post_id": 35598473, "comment_id": 58943917, "body": "I don&#39;t quite understand why it is nullable, everywhere I declared the <code>Double</code> as <code>Double</code> not <code>Double?</code> .. <code>protected var weightingTable = HashMap&lt;Class&lt;*&gt;, Double&gt;()</code> and <code>var weight: Double</code>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1456416251, "post_id": 35598473, "comment_id": 58946238, "body": "I cheated and used <code>!!</code> so that I could retain the <code>Double</code> declarations (I did try <code>Double?</code> but that made the code even more messy since it didn&#39;t like my math and comparison operators when I did that, so right now my solution is to use <code>!!</code>)"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1456419310, "post_id": 35598473, "comment_id": 58948659, "body": "As the answer explains, it is nullable because the map doesn&#39;t contain a value for every possible key. <code>[]</code> returns null when there is no value corresponding to the given key."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1456423429, "post_id": 35598473, "comment_id": 58951388, "body": "ah, that makes sense...I wasn&#39;t thinking straight because I was thinking abut what I was putting in, not how to check if ithe key doesn&#39;t exist"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1456306970, "creation_date": 1456306970, "answer_id": 35598473, "question_id": 35588353, "link": "https://stackoverflow.com/questions/35588353/hashmap-errors-containskey-get/35598473#35598473", "title": "HashMap errors - containsKey, get", "body": "<p>The <code>containsKey</code> call is reported as an error because the type of the argument you pass to it does not match the type of the map key. Your map contains classes as keys, and you're trying to pass an object instance to it. Changing this to <code>object as Any?</code> is not a useful fix, because this call will compile but will always return false. What you need to do instead is to use <code>object.javaClass</code> to get the class of the object.</p>\n\n<p>The <code>weightingTable[c]</code> call is reported as an error because the map does not necessarily contain a value for the key you're passing to it, so the result of the <code>[]</code> operation is nullable. You cannot assign a nullable value to a non-null variable without somehow handling the null case (using a check, an explicit non-null cast or some other option covered in <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"noreferrer\">the documentation</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 2001512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Bvq9.jpg?s=128&g=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/2001512/lucas"}, "is_accepted": false, "score": 1, "last_activity_date": 1599857924, "last_edit_date": 1599857924, "creation_date": 1599856020, "answer_id": 63853887, "question_id": 35588353, "link": "https://stackoverflow.com/questions/35588353/hashmap-errors-containskey-get/63853887#63853887", "title": "HashMap errors - containsKey, get", "body": "<p>When doing:</p>\n<pre><code>myHashMap.get(object)\n</code></pre>\n<p>and getting:</p>\n<pre><code>Type inference failed. required: kotlin.Double found kotlin.Double?\n</code></pre>\n<p>even when you already checked with containsKey. You can solve it by using:</p>\n<pre><code>myHashMap.getOrElse(key) { defaultValue }\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "accepted_answer_id": 35598473, "answer_count": 2, "score": 2, "last_activity_date": 1603367931, "creation_date": 1456262197, "last_edit_date": 1456262585, "question_id": 35588353, "link": "https://stackoverflow.com/questions/35588353/hashmap-errors-containskey-get", "title": "HashMap errors - containsKey, get", "body": "<p>Can anyone shed some light?</p>\n\n<h2>Problem code:</h2>\n\n<pre><code>protected var table = HashMap&lt;Class&lt;*&gt;, Double&gt;()\n\nif (table.containsKey(object)) {\n    value = table.get(object)\n} \n</code></pre>\n\n<blockquote>\n  <p>containsKey(K):Boolean is deprecated. Map and Key have incompatible\n  types. upcast to Any? if you're sure</p>\n</blockquote>\n\n<p>so I changed it to this:</p>\n\n<pre><code>if (table.containsKey(object as Any?)\n</code></pre>\n\n<p>which fixes the error, but is this what I should have done to fix it? or is there a better way?</p>\n\n<p>also <code>.get(object)</code> has an error:</p>\n\n<blockquote>\n  <p>Type inference failed. required: kotlin.Double found kotlin.Double?</p>\n</blockquote>\n\n<p>same error message for this too:</p>\n\n<pre><code>val c = someObject.javaClass // pre j2k code: final Class&lt;? extends SomeClass&gt; c = someObject.getClass();\nweight = weightingTable[c] &lt;-- error here\n</code></pre>\n\n<p>I don't know what to do here</p>\n"}, {"tags": ["maven", "intellij-idea", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "is_accepted": false, "score": 3, "last_activity_date": 1456263792, "creation_date": 1456263792, "answer_id": 35588811, "question_id": 35587693, "link": "https://stackoverflow.com/questions/35587693/kotlin-cant-run-hello-world-in-intellij/35588811#35588811", "title": "Kotlin - cant run &quot;hello world&quot; in intellij", "body": "<p>found the answer here: <a href=\"https://discuss.kotlinlang.org/t/intellij-kotlin-project-screw-up/597\" rel=\"nofollow\">https://discuss.kotlinlang.org/t/intellij-kotlin-project-screw-up/597</a></p>\n\n<p>It seems the project was broken somehow. intellij suggested a fix in project structure that fix the issue.</p>\n"}], "owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456263792, "creation_date": 1456259946, "question_id": 35587693, "link": "https://stackoverflow.com/questions/35587693/kotlin-cant-run-hello-world-in-intellij", "title": "Kotlin - cant run &quot;hello world&quot; in intellij", "body": "<p>I am trying to configure Kotlin project by the maven instructions from here: <a href=\"https://kotlinlang.org/docs/reference/using-maven.html#KotlinBuildTools-Maven\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/using-maven.html#KotlinBuildTools-Maven</a> in intellij.<br>\nThe pom.xml seems to be configured automatically by intellij but I keep getting the error \"kotlin not configured\" for my hello world file.<br>\nThe intellij compiler has the error: \"Kotlin: Unresolved reference: println\".<br>\nI am using intellij 15.0.3 and kotlin 1.0.0</p>\n"}, {"tags": ["multithreading", "singleton", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456414816, "post_id": 35587652, "comment_id": 58945037, "body": "The preferred way in Java should be this:  <a href=\"http://stackoverflow.com/a/17800038/3679676\">stackoverflow.com/a/17800038/3679676</a> and not double checked locking with volatile.  Also see: <a href=\"https://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom#Example_Java_Implementation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456415835, "post_id": 35587652, "comment_id": 58945877, "body": "Complexity of double lock check, and updated versions: <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Double-checked_locking</a>"}, {"owner": {"reputation": 10239, "user_id": 273456, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/elCxp.jpg?s=128&g=1", "display_name": "Zordid", "link": "https://stackoverflow.com/users/273456/zordid"}, "edited": false, "score": 0, "creation_date": 1570524837, "post_id": 35587652, "comment_id": 102931487, "body": "This is NOT the correct way for Singletons in Java!"}, {"owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "reply_to_user": {"reputation": 10239, "user_id": 273456, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/elCxp.jpg?s=128&g=1", "display_name": "Zordid", "link": "https://stackoverflow.com/users/273456/zordid"}, "edited": false, "score": 0, "creation_date": 1570525447, "post_id": 35587652, "comment_id": 102931787, "body": "@Zordid could you explain?"}, {"owner": {"reputation": 10239, "user_id": 273456, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/elCxp.jpg?s=128&g=1", "display_name": "Zordid", "link": "https://stackoverflow.com/users/273456/zordid"}, "edited": false, "score": 0, "creation_date": 1571742680, "post_id": 35587652, "comment_id": 103334367, "body": "Just google your double checked locking and you will find it to be broken. E.g. here <a href=\"https://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html\" rel=\"nofollow noreferrer\">cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1456268161, "post_id": 35587684, "comment_id": 58866081, "body": "it&#39;s not lazy, also object does not have constructors, so they does not have dynamic setted arguments"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1456268767, "post_id": 35587684, "comment_id": 58866358, "body": "@StasShakirov, <code>object</code>s are initialized exactly before the first program statement they&#39;re referenced in, much as Java static members. What do you mean by &#39;lazy&#39;, then? As to the arguments, something can be found here: <a href=\"http://stackoverflow.com/questions/33128024/singleton-with-argument-in-kotlin\" title=\"singleton with argument in kotlin\">stackoverflow.com/questions/33128024/&hellip;</a> (updated the answer)."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 15, "last_activity_date": 1456414382, "last_edit_date": 1495541887, "creation_date": 1456259918, "answer_id": 35587684, "question_id": 35587652, "link": "https://stackoverflow.com/questions/35587652/kotlin-thread-safe-native-lazy-singleton-with-parameter/35587684#35587684", "title": "Kotlin thread safe native lazy singleton with parameter", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"noreferrer\">Object declaration</a> is exactly for this purpose:</p>\n\n\n\n<pre><code>object Singleton {\n    //singleton members\n}\n</code></pre>\n\n<p>It is lazy and thread-safe, it initializes upon first call, much as Java's static initializers.</p>\n\n<p>You can declare an <code>object</code> at top level or inside a class or another object.</p>\n\n<p>For more info about working with <code>object</code>s from Java, please refer to <a href=\"https://stackoverflow.com/a/35119082/2196460\">this answer</a>.</p>\n\n<p><hr>\nAs to the parameter, if you want to achieve exactly the same semantics (first call to <code>getInstance</code> takes its argument to initialize the singleton, following calls just return the instance, dropping the arguments), I would suggest this construct:</p>\n\n<pre><code>private object SingletonInit { //invisible outside the file\n    lateinit var arg0: String\n}\n\nobject Singleton {\n    val arg0: String = SingletonInit.arg0\n}\n\nfun Singleton(arg0: String): Singleton { //mimic a constructor, if you want\n    synchronized(SingletonInit) {\n        SingletonInit.arg0 = arg0\n        return Singleton\n    }\n}\n</code></pre>\n\n<p>The main flaw of this solution is that it requires the singleton to be defined in a separate file to hide the <code>object SingletonInit</code>, and you cannot reference <code>Singleton</code> directly until it's initialized.</p>\n\n<p>Also, see <a href=\"https://stackoverflow.com/questions/33128024/singleton-with-argument-in-kotlin\">a similar question</a> about providing arguments to a singleton.</p>\n"}, {"comments": [{"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 7, "creation_date": 1500906501, "post_id": 35631478, "comment_id": 77528741, "body": "Actually, lazy() uses double checked locking with volatile internally. Also, you can&#39;t pass init arguments to objects so there is a real need for an alternative solution."}, {"owner": {"reputation": 4295, "user_id": 5125212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/meon0.png?s=128&g=1", "display_name": "Damia Fuentes", "link": "https://stackoverflow.com/users/5125212/damia-fuentes"}, "edited": false, "score": 1, "creation_date": 1586525509, "post_id": 35631478, "comment_id": 108164813, "body": "Object declaration&#39;s initialization is thread-safe and done at first access. You don&#39;t need this. Just using object works for what you are asking. <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 28, "last_activity_date": 1586632660, "last_edit_date": 1586632660, "creation_date": 1456413995, "answer_id": 35631478, "question_id": 35587652, "link": "https://stackoverflow.com/questions/35587652/kotlin-thread-safe-native-lazy-singleton-with-parameter/35631478#35631478", "title": "Kotlin thread safe native lazy singleton with parameter", "body": "<p>Kotlin has an equivalent of your Java code, but more safe.  Your <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">double lock check</a> is not recommended <em>even for Java</em>. In Java you should use an <a href=\"https://stackoverflow.com/a/17800038/3679676\">inner class on the static</a> which is also explained in <a href=\"https://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom#Example_Java_Implementation\" rel=\"nofollow noreferrer\">Initialization-on-demand holder idiom</a>.</p>\n\n<p>But that's Java.  <strong>In Kotlin, simply use an object</strong> (and optionally a lazy delegate):</p>\n\n\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>object Singletons {\n    val something: OfMyType by lazy() { ... }\n\n    val somethingLazyButLessSo: OtherType = OtherType()\n    val moreLazies: FancyType by lazy() { ... }\n}\n</code></pre>\n\n<p>You can then access any member variable:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Singletons is lazy instantiated now, then something is lazy instantiated after.  \nval thing = Singletons.something // This is Doubly Lazy!\n\n// this one is already loaded due to previous line\nval eager = Singletons.somethingLazyButLessSo\n\n// and Singletons.moreLazies isn't loaded yet until first access...\n</code></pre>\n\n<p>Kotlin intentionally avoids the confusion people have with singletons in Java.  And avoids the \"wrong versions\" of this pattern -- of which there are many.  It instead provides the simpler and the safest form of singletons.  </p>\n\n<p>Given the use of <code>lazy()</code>, if you have other members each would individually be lazy.  And since they are initialized in the lambda passed to <code>lazy()</code> you can do things that you were asking about for about customizing the constructor, and for each member property.</p>\n\n<p>As a result you have lazy loading of <code>Singletons</code> object (<em>on first access of instance</em>), and then lazier loading of <code>something</code> (<em>on first access of member</em>), and complete flexibility in object construction.</p>\n\n<p><strong>See also:</strong>  </p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-lazy/index.html\" rel=\"nofollow noreferrer\"><code>lazy()</code> function</a></li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-lazy-thread-safety-mode/index.html\" rel=\"nofollow noreferrer\">Lazy thread safe mode options</a></li>\n<li><a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">Object declarations</a></li>\n</ul>\n\n<p><strong>As a side note,</strong> look at object registry type libraries for Kotlin that are similar to dependency injection, giving you singletons with injection options:</p>\n\n<ul>\n<li><a href=\"https://github.com/kohesive/injekt\" rel=\"nofollow noreferrer\">Injekt</a> - I'm the author</li>\n<li><a href=\"https://github.com/SalomonBrys/Kodein\" rel=\"nofollow noreferrer\">Kodein</a> - Very similar and good</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1503945438, "post_id": 45925145, "comment_id": 78809360, "body": "why not <code>open class SingletonHolder&lt;out T, in A&gt;(private val creator: (A) -&gt; T)</code>"}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "reply_to_user": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 5, "creation_date": 1503947345, "post_id": 45925145, "comment_id": 78810271, "body": "It&#39;s just an optimization to free some memory by setting the creator to null after initialization is complete. I took it from the source code of lazy()."}], "tags": [], "owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "is_accepted": false, "score": 10, "last_activity_date": 1503944251, "creation_date": 1503944251, "answer_id": 45925145, "question_id": 35587652, "link": "https://stackoverflow.com/questions/35587652/kotlin-thread-safe-native-lazy-singleton-with-parameter/45925145#45925145", "title": "Kotlin thread safe native lazy singleton with parameter", "body": "<p>I recently wrote <a href=\"https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e\" rel=\"noreferrer\">an article on that topic</a>.\nTL;DR Here's the solution I came up to:</p>\n\n<p>1) Create a <code>SingletonHolder</code> class. You only have to write it once:</p>\n\n<pre><code>open class SingletonHolder&lt;out T, in A&gt;(creator: (A) -&gt; T) {\n    private var creator: ((A) -&gt; T)? = creator\n    @Volatile private var instance: T? = null\n\n    fun getInstance(arg: A): T {\n        val i = instance\n        if (i != null) {\n            return i\n        }\n\n        return synchronized(this) {\n            val i2 = instance\n            if (i2 != null) {\n                i2\n            } else {\n                val created = creator!!(arg)\n                instance = created\n                creator = null\n                created\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>2) Use it like this in your singletons:</p>\n\n<pre><code>class MySingleton private constructor(arg: ArgumentType) {\n    init {\n        // Init using argument\n    }\n\n    companion object : SingletonHolder&lt;MySingleton, ArgumentType&gt;(::MySingleton)\n}\n</code></pre>\n\n<p>The singleton initialization will be lazy and thread-safe.</p>\n"}], "owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17676, "favorite_count": 7, "accepted_answer_id": 35631478, "answer_count": 3, "score": 27, "last_activity_date": 1586632660, "creation_date": 1456259789, "last_edit_date": 1542798739, "question_id": 35587652, "link": "https://stackoverflow.com/questions/35587652/kotlin-thread-safe-native-lazy-singleton-with-parameter", "title": "Kotlin thread safe native lazy singleton with parameter", "body": "<p>In java we can write thead-safe singletons using double Checked Locking &amp; volatile:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public class Singleton {\n        private static volatile Singleton instance;\n\n        public static Singleton getInstance(String arg) {\n        Singleton localInstance = instance;\n        if (localInstance == null) {\n            synchronized (Singleton.class) {\n                localInstance = instance;\n                if (localInstance == null) {\n                    instance = localInstance = new Singleton(arg);\n                }\n            }\n        }\n        return localInstance;\n    }\n}\n</code></pre>\n\n<p>How we can write it in kotlin?</p>\n\n<hr>\n\n<h2>About object</h2>\n\n<pre><code>object A {\n    object B {}\n    object C {}\n    init {\n        C.hashCode()\n    }\n}\n</code></pre>\n\n<p>I used kotlin decompiler to get that</p>\n\n<pre><code>public final class A {\n   public static final A INSTANCE;\n\n   private A() {\n      INSTANCE = (A)this;\n      A.C.INSTANCE.hashCode();\n   }\n   static {\n      new A();\n   }\n\n   public static final class B {\n      public static final A.B INSTANCE;\n      private B() {\n         INSTANCE = (A.B)this;\n      }\n      static {\n         new A.B();\n      }\n   }\n\n   public static final class C {\n      public static final A.C INSTANCE;\n      private C() {\n         INSTANCE = (A.C)this;\n      }\n      static {\n         new A.C();\n      }\n   }\n}\n</code></pre>\n\n<p>All of object have constructor invoke in <code>static</code> block. Based on it, we can think that it's not lazy.</p>\n\n<h2>\u0421lose to the right answer.</h2>\n\n<pre><code>    class Singleton {\n        companion object {\n            val instance: Singleton by lazy(LazyThreadSafetyMode.PUBLICATION) { Singleton() }\n        }\n    }\n</code></pre>\n\n<p>Decompiled:</p>\n\n<pre><code>public static final class Companion {\n      // $FF: synthetic field\n      private static final KProperty[] $$delegatedProperties = new KProperty[]{(KProperty)Reflection.property1(new PropertyReference1Impl(Reflection.getOrCreateKotlinClass(Singleton.Companion.class), \"instance\", \"getInstance()Lru/example/project/tech/Singleton;\"))};\n\n      @NotNull\n      public final Singleton getInstance() {\n         Lazy var1 = Singleton.instance$delegate;\n         KProperty var3 = $$delegatedProperties[0];\n         return (Singleton)var1.getValue();\n      }\n\n      private Companion() {\n      }\n\n      // $FF: synthetic method\n      public Companion(DefaultConstructorMarker $constructor_marker) {\n         this();\n      }\n   }\n</code></pre>\n\n<p>I hope Kotlin developers will make non reflection implementation in future...</p>\n"}, {"tags": ["intellij-idea", "kotlin", "kdoc", "kotlin-dokka"], "comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1456243454, "post_id": 35582294, "comment_id": 58851364, "body": "is there a way to mark an import not to be removed?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1456243530, "post_id": 35582294, "comment_id": 58851429, "body": "You should add an Issue to the Dokka project, <a href=\"https://github.com/Kotlin/dokka\" rel=\"nofollow noreferrer\">github.com/Kotlin/dokka</a> about this.  Maybe also one to <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a> referencing that one.  I&#39;m not sure who will want to fix it, from the perspective of Dokka or the Kotlin IDE plugin."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1565021441, "post_id": 35582294, "comment_id": 101211231, "body": "This is fixed as of 2019"}], "answers": [{"comments": [{"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 2, "creation_date": 1544654673, "post_id": 35598495, "comment_id": 94357865, "body": "I&#39;m still experiencing this issue"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 2, "last_activity_date": 1456307043, "creation_date": 1456307043, "answer_id": 35598495, "question_id": 35582294, "link": "https://stackoverflow.com/questions/35582294/kotlin-unresolved-kdoc-link-but-intellij-doesnt-like-the-import-that-fixes-it/35598495#35598495", "title": "kotlin unresolved KDoc link but IntelliJ doesn&#39;t like the import that fixes it", "body": "<p>This is a <a href=\"https://youtrack.jetbrains.com/issue/KT-10398\" rel=\"nofollow\">known issue</a> in the Kotlin plugin.</p>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1456307043, "creation_date": 1456243360, "last_edit_date": 1456243628, "question_id": 35582294, "link": "https://stackoverflow.com/questions/35582294/kotlin-unresolved-kdoc-link-but-intellij-doesnt-like-the-import-that-fixes-it", "title": "kotlin unresolved KDoc link but IntelliJ doesn&#39;t like the import that fixes it", "body": "<pre><code>import abc.MyClass.MyEnum; /// from Java\n\n/**\n * [MyClass.MyEnum]\n */\nclass efg () : MyClass.MyEnum {\n    return MyClass.MyEnum.BiGNUMBER;\n}\n</code></pre>\n\n<p>I have something similar to the above in IntelliJ... but it will identify the import as <em>unused</em> - so optimize imports will remove it... however, if I don't insert that import manually then in my docs it will identify [MyClass.MyEnum] as <em>cannot be resolved</em></p>\n\n<p>What can I do?</p>\n"}, {"tags": ["arrays", "generics", "kotlin", "type-erasure"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456254650, "post_id": 35581867, "comment_id": 58858655, "body": "why not simply <code>class NDArray&lt;T&gt;(i:Int, j:Int, f: (Int) -&gt; T) {     val values: Array&lt;Int&gt; =  Array&lt;Int&gt;(i*j,f) }</code> ?"}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456255473, "post_id": 35581867, "comment_id": 58859144, "body": "Definitely more concise but the problem still remains since Array should be of type T, not Int."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1456258669, "post_id": 35581867, "comment_id": 58861035, "body": "non-idiomatic Kotlin code is hard to read. Please see the edit"}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1456260036, "post_id": 35581867, "comment_id": 58861796, "body": "Nice and concise. Edit accepted, thanks !"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456263364, "post_id": 35581867, "comment_id": 58863652, "body": "for <code>MyArray</code> to act like <code>Array</code>, it has to have a <code>reifiled T</code> generic parameter. For now it is only allowed for <code>inline</code> functions"}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456311378, "post_id": 35581867, "comment_id": 58884883, "body": "Still doesn&#39;t explain why the compiler sees a difference between MyArray and Array in the example above. As far as I can tell from the reference doc Array&lt;T&gt; is not declared with reifeid keyword. Maybe compiler magic since this is a &quot;special&quot; Kotlin type ?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456320179, "post_id": 35581867, "comment_id": 58891283, "body": "yes, magic is implied. Please see my edit to the yole&#39;s answer"}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1456249235, "post_id": 35582281, "comment_id": 58855499, "body": "Figured that it had something todo with type-erasure. If you look at it from a JVM perspective I can see the problem of creating a array of generic type T[] in runtime. From a Kotlin perspective I&#39;m a bit puzzled still, please see edit."}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1456311071, "post_id": 35582281, "comment_id": 58884674, "body": "Basically a wrapping a Array&lt;T&gt;() is not possible without using a factory pattern ? Btw, please see edit"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1456312353, "last_edit_date": 1456312353, "creation_date": 1456243310, "answer_id": 35582281, "question_id": 35581867, "link": "https://stackoverflow.com/questions/35581867/kotlin-ndarray-with-a-lambda-constructor-with-generic-return-type/35582281#35582281", "title": "Kotlin NDArray with a lambda constructor with generic return type", "body": "<p>Creating a Java array requires specifying an element type. In the case of your class, the element type is provided only as a type parameter of the class, and generics in Java are erased at runtime. Because of that, the element type of the array is not known, and it's not possible to create it.</p>\n\n<p>If you would want to create a custom wrapper around standard <code>Array&lt;T&gt;</code>, it would have to look like the following:</p>\n\n<pre><code>class NDArray&lt;reified T&gt;(i:Int, j:Int, init: (Int) -&gt; T) {\n    val arr = Array&lt;T&gt;(i * j, init)\n}\n</code></pre>\n\n<p>The <code>reified</code> keyword means that your <code>T</code> is not erased, and may be used in places where a real class is needed, like calling the <code>Array()</code> constructor. </p>\n\n<p>Note that this <strong>syntax is not supported</strong> for class constructors, but it is still useful for factory functions (must be <code>inline</code>d)</p>\n\n<pre><code>fun &lt;reified T&gt; arrayFactory(i:Int, j:Int, init: (Int) -&gt; T) = Array&lt;T&gt;(i * j, init)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "is_accepted": false, "score": 1, "last_activity_date": 1456353265, "last_edit_date": 1456353265, "creation_date": 1456312013, "answer_id": 35600405, "question_id": 35581867, "link": "https://stackoverflow.com/questions/35581867/kotlin-ndarray-with-a-lambda-constructor-with-generic-return-type/35600405#35600405", "title": "Kotlin NDArray with a lambda constructor with generic return type", "body": "<p>Based on input from yole and voddan this is the best solution I found to the problem so far:    </p>\n\n<pre><code>class NDArray&lt;T&gt;(val values: Array&lt;T&gt; ){\n\n    companion object Factory{\n        inline operator fun &lt;reified T&gt;invoke(i: Int, j: Int, noinline init: (Int) -&gt; T) = NDArray(Array(i * j,init))\n    }\n}\n</code></pre>\n\n<p>This allows the usage of reified as a constructor by using a companion object. Construction calling convention can be done using operator invoke. This works now:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n    val m = NDArray(4,4, ::zero)\n}\n\nfun zero(i:Int) =  0.0 \n</code></pre>\n\n<p>The only problem ( except for the convoluted syntax invoke() ) is that the NDArray constructor need to be public. Is there a better way perhaps ?</p>\n\n<p>NOTE! Following issues <a href=\"https://youtrack.jetbrains.com/issue/KT-11182\" rel=\"nofollow\">KT-11182</a> affects this design pattern</p>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "accepted_answer_id": 35582281, "answer_count": 2, "score": 5, "last_activity_date": 1456353265, "creation_date": 1456242168, "last_edit_date": 1456259635, "question_id": 35581867, "link": "https://stackoverflow.com/questions/35581867/kotlin-ndarray-with-a-lambda-constructor-with-generic-return-type", "title": "Kotlin NDArray with a lambda constructor with generic return type", "body": "<p>I'm trying to create a very simple generic NDArray class in Kotlin that takes a lambda expression as an init function.</p>\n\n<pre><code>class NDArray&lt;T&gt;(i: Int, j: Int, f: (Int) -&gt; T) {\n    val values: Array&lt;T&gt; =  Array(i * j, f)\n}\n</code></pre>\n\n<p>A typical usage would be:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n    val m = NDArray(4, 4, ::zero)\n}\n\nfun zero(i: Int) =  0.0\n</code></pre>\n\n<p>My problem is that the Kotlin compiler complains on the initialisation of values in the constructor</p>\n\n<pre><code>values = Array(i * j, f)\n</code></pre>\n\n<p>by saying \"Cannot use 'T' as reified type parameter. Use class instead\". Why ?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If I instead replace the Kotlin Array implementation with my own MyArray it compiles:</p>\n\n<pre><code>class NDArray&lt;T&gt;(i: Int, j: Int, f: (Int) -&gt; T) {\n    val values: MyArray&lt;T&gt; =  MyArray(i * j, f)\n}\n\nclass MyArray&lt;T&gt;(i:Int, init: (Int) -&gt; T) {\n    ...\n}\n</code></pre>\n\n<p>Not sure why Kotlin treats MyArray differently from a regular Array when both have the same constructor ?</p>\n"}, {"tags": ["generics", "extension-methods", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 30, "last_activity_date": 1456236792, "creation_date": 1456236792, "answer_id": 35579829, "question_id": 35579828, "link": "https://stackoverflow.com/questions/35579828/i-have-two-kotlin-extension-methods-for-the-same-class-but-with-a-different-gen/35579829#35579829", "title": "I have two Kotlin extension methods for the same class, but with a different generic signatures and the compiler complains", "body": "<p>Kotlin has the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname\" rel=\"noreferrer\"><code>@JvmName</code> annotation</a> specifically for this type of use case.  In Kotlin, there isn't a problem because it knows the difference between the methods.  But the Java compatible byte code would have a conflict for naming since the generics erased signatures would be identical.</p>\n\n<p>Therefore you need to use this annotation to control the name from the perspective of Java and the JVM.  Your Kotlin code will not see this alternative name and will use the name as you intended.</p>\n\n<p>Change your code to:</p>\n\n\n\n<pre><code>@JvmName(\"somethingIntToJson\") fun Something&lt;Int&gt;.toJson(): String = ...\n@JvmName(\"somethingDoubleToJson\") fun Something&lt;Double&gt;.toJson(): String = ...\n</code></pre>\n\n<p>From Kotlin, use normally:</p>\n\n<pre><code>val someIntyThing = Something&lt;Int&gt;(194)\nval json = someIntyThing.toJson()\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 8, "accepted_answer_id": 35579829, "answer_count": 1, "score": 19, "last_activity_date": 1456237399, "creation_date": 1456236792, "last_edit_date": 1610973576, "question_id": 35579828, "link": "https://stackoverflow.com/questions/35579828/i-have-two-kotlin-extension-methods-for-the-same-class-but-with-a-different-gen", "title": "I have two Kotlin extension methods for the same class, but with a different generic signatures and the compiler complains", "body": "<p>I am writing two extension functions for the same class:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Something&lt;T:Any&gt; { ... }\n</code></pre>\n<p>They look like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun Something&lt;Int&gt;.toJson(): String = ...\nfun Something&lt;Double&gt;.toJson(): String = ...\n</code></pre>\n<p>And results in the compiler error:</p>\n<blockquote>\n<p>Kotlin: Platform declaration clash: The following declarations have the same JVM signature</p>\n</blockquote>\n<p>How can I create two extension functions with only the generics signature differing?  or is it not possible?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the answers to commonly asked Kotlin topics are present in SO.  It originated in <a href=\"https://kotlinlang.org/community.html\" rel=\"nofollow noreferrer\">Kotlin slack</a> #general channel.</em></p>\n"}, {"tags": ["inline", "visibility", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "is_accepted": false, "score": 3, "last_activity_date": 1456219126, "creation_date": 1456219126, "answer_id": 35573408, "question_id": 35573333, "link": "https://stackoverflow.com/questions/35573333/ways-to-obfuscate-access-to-prefereably-private-but-actually-public-class-membe/35573408#35573408", "title": "Ways to obfuscate access to prefereably private, but actually public class members for the sake of using them in inline methods", "body": "<p>Here's a way to obfuscate access to <code>preferablyPrivateLock</code> with the help of <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow\">extensions</a>:</p>\n\n<pre><code>class SomeClass\n{\n    private val preferablyPrivateLock = ReentrantLock()\n    val Unit.obfuscatedLock:ReentrantLock\n        get() = preferablyPrivateLock\n\n    inline fun &lt;R&gt; fancyInlineFunction(function:()-&gt;R):R\n    {\n        with(this) {Unit.obfuscatedLock}.lock()\n        try\n        {\n            return function()\n        }\n        finally\n        {\n            with(this) {Unit.obfuscatedLock}.unlock()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1456231706, "last_edit_date": 1495541741, "creation_date": 1456231706, "answer_id": 35578037, "question_id": 35573333, "link": "https://stackoverflow.com/questions/35573333/ways-to-obfuscate-access-to-prefereably-private-but-actually-public-class-membe/35578037#35578037", "title": "Ways to obfuscate access to prefereably private, but actually public class members for the sake of using them in inline methods", "body": "<p>The same can be done without <code>Unit</code> by having the method be an extension on its own class, in this case <code>SomeClass</code>.  This simplifies the usage:</p>\n\n<pre><code>class SomeClass\n{\n    private val preferablyPrivateLock = ReentrantLock()\n    val SomeClass.hiddenLock: ReentrantLock\n        get() = preferablyPrivateLock\n\n    inline fun &lt;R&gt; fancyInlineFunction(function:()-&gt;R):R\n    {\n        with(this) { hiddenLock }.lock()\n        try\n        {\n            return function()\n        }\n        finally\n        {\n            with(this) { hiddenLock }.unlock()\n        }\n    }\n}\n\nclass OtherClass {\n    fun foo() {\n        val x = SomeClass().hiddenLock // ERROR: Unresolved reference hiddenLock\n    }\n}\n</code></pre>\n\n<p>This solution was mentioned by @Kirill in Kotlin Slack.  It is similar technique to this: <a href=\"https://stackoverflow.com/q/34797366/3679676\">In Kotlin, how do I add extension methods to another class, but only visible in a certain context?</a></p>\n"}], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 35578037, "answer_count": 2, "score": 3, "last_activity_date": 1456231706, "creation_date": 1456218952, "question_id": 35573333, "link": "https://stackoverflow.com/questions/35573333/ways-to-obfuscate-access-to-prefereably-private-but-actually-public-class-membe", "title": "Ways to obfuscate access to prefereably private, but actually public class members for the sake of using them in inline methods", "body": "<p>What are some ways to obfuscate or limit access to public members of a class?</p>\n\n<p>The motivation behind doing this is that I would like to be able to <code>inline</code> a method, but it needs access to other members in the class, which requires them to be <code>public</code>, however I would prefer these members to be anything but <code>public</code>, but since they must be <code>public</code>, I am looking for ways to obfuscate or limit access to them.</p>\n\n<p>Here is an example of such a case where I would prefer <code>preferablyPrivateLock</code> to be private:</p>\n\n<pre><code>class SomeClass\n{\n    val preferablyPrivateLock = ReentrantLock()\n\n    inline fun &lt;R&gt; fancyInlineFunction(function:()-&gt;R):R\n    {\n        preferablyPrivateLock.lock()\n        try\n        {\n            return function()\n        }\n        finally\n        {\n            preferablyPrivateLock.unlock()\n        }\n    }\n}\n</code></pre>\n\n<p>P.S. I know this seems like bad OO design; hope this question doesn't cost me any reputation...</p>\n"}, {"tags": ["coding-style", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456230565, "post_id": 35571779, "comment_id": 58841588, "body": "You can see some organization in this library of functions: <a href=\"https://github.com/kohesive/klutter/tree/master/core-jdk6/src/main/kotlin/uy/klutter/core\" rel=\"nofollow noreferrer\">github.com/kohesive/klutter/tree/master/core-jdk6/src/main/&hellip;</a> (look at folders below and groupings in files)"}, {"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456232554, "post_id": 35571779, "comment_id": 58842994, "body": "Thanks! I quite like the pattern used in the <code>core.common</code> package where the top-level functions with no relation to any particular class are in <code>core&#47;common&#47;Common.kt</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1456226699, "post_id": 35574764, "comment_id": 58838946, "body": "Yes, I was thinking about <code>myproject&#47;util.kt</code>, but then sub-packages are a problem. I can definitely see that there are various ways of solving it. I was mainly wondering if there&#39;s a commonly used convention."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1456222919, "creation_date": 1456222919, "answer_id": 35574764, "question_id": 35571779, "link": "https://stackoverflow.com/questions/35571779/kotlin-where-should-the-top-level-functions-go/35574764#35574764", "title": "Kotlin: Where should the top level functions go?", "body": "<p>There is no requirement to put all the utility functions into one file. You can create multiple files for top-level functions and name each of them according to what the functions in each file do.</p>\n\n<p>If you have just a handful of functions and don't want to invent any new names, the easiest option is to name the file the same as the package (<code>util.kt</code> in your example).</p>\n"}], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 1, "accepted_answer_id": 35574764, "answer_count": 1, "score": 4, "last_activity_date": 1456222919, "creation_date": 1456214065, "question_id": 35571779, "link": "https://stackoverflow.com/questions/35571779/kotlin-where-should-the-top-level-functions-go", "title": "Kotlin: Where should the top level functions go?", "body": "<p>Is there a best practice / convention as to where the top level functions should go in Kotlin?</p>\n\n<p>Say I'm creating a package <code>myproject.util</code> with utility functions. In Java, it's a good practice to create a directory structure matching the package structure. Not sure if that's actually true for Kotlin. Anyway, I guess the utility functions should go to <code>myproject/util/somefile.kt</code>, but I'm not sure what the <code>somefile</code> should be. </p>\n"}, {"tags": ["keyword", "kotlin", "type-alias"], "answers": [{"comments": [{"owner": {"reputation": 1053, "user_id": 737956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b684798d060637e412878e52de3f45?s=128&d=identicon&r=PG", "display_name": "Dalibor Filus", "link": "https://stackoverflow.com/users/737956/dalibor-filus"}, "edited": false, "score": 0, "creation_date": 1485699580, "post_id": 35555854, "comment_id": 71024375, "body": "Kotlin 1.1 Beta is out and it has typealiases: <a href=\"https://blog.jetbrains.com/kotlin/2017/01/kotlin-1-1-beta-is-here/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2017/01/kotlin-1-1-beta-is-here</a>"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 14, "last_activity_date": 1508649039, "last_edit_date": 1508649039, "creation_date": 1456150398, "answer_id": 35555854, "question_id": 35554241, "link": "https://stackoverflow.com/questions/35554241/kotlin-typealias-feature/35555854#35555854", "title": "Kotlin `typealias` feature", "body": "<p>With a <code>typealias</code>, you can provide an alternative name for an existing type since Kotlin 1.1:</p>\n\n<pre><code>typealias Multimap&lt;K, V&gt; = MutableMap&lt;K, MutableList&lt;V&gt;&gt;\n</code></pre>\n\n<p>For more information, see <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">the official documentation</a> or the <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/type-aliases.md\" rel=\"nofollow noreferrer\">KEEP proposal</a>.</p>\n"}], "owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2608, "favorite_count": 0, "accepted_answer_id": 35555854, "answer_count": 1, "score": 7, "last_activity_date": 1508649039, "creation_date": 1456145561, "last_edit_date": 1488449012, "question_id": 35554241, "link": "https://stackoverflow.com/questions/35554241/kotlin-typealias-feature", "title": "Kotlin `typealias` feature", "body": "<p>According to the source of <a href=\"https://github.com/JetBrains/kotlin/blob/master/compiler/frontend/src/org/jetbrains/kotlin/lexer/KtTokens.java\" rel=\"nofollow noreferrer\">Kotlin's lexer</a>, there is a <code>typealias</code> keyword, and it's not \"reserved for future use\" like <code>yield</code> and <code>typeof</code>.</p>\n\n<p>Also, the <a href=\"https://kotlinlang.org/docs/reference/grammar.html#memberDeclaration\" rel=\"nofollow noreferrer\">grammar reference</a> suggests that <code>typealias</code> should be a valid keyword for a class member declaration, and when I type <code>typealias</code> in IntelliJ IDEA (Android Studio) with Kotlin plugin it recognizes it as a keyword but I get <strong><em>expecting member declaration</em></strong> error. I have also tried using it  with the \"usual\" syntax, for example like it is implemented in Swift, however with no success.</p>\n\n<p>So, is the <code>typealias</code> feature actually implemented in Kotlin (as of 1.0), and if so, what is the syntax for it? Is there any documentation that describes its use?</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p><strong>Kotlin 1.1 supporting <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">type aliases</a> is now out!</strong></p>\n"}, {"tags": ["unit-testing", "junit", "kotlin"], "comments": [{"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 2, "creation_date": 1482059869, "post_id": 35554076, "comment_id": 69614285, "body": "JUnit 5 may support non-static methods for that use case, see <a href=\"https://github.com/junit-team/junit5/issues/419#issuecomment-267815529\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5/issues/419#issuecomment-2678155&zwnj;&#8203;29</a> and feel free to +1 my comment to show Kotlin developers are interested in such improvements."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 173, "last_activity_date": 1456147332, "last_edit_date": 1495542881, "creation_date": 1456145133, "answer_id": 35554077, "question_id": 35554076, "link": "https://stackoverflow.com/questions/35554076/how-do-i-manage-unit-test-resources-in-kotlin-such-as-starting-stopping-a-datab/35554077#35554077", "title": "How do I manage unit test resources in Kotlin, such as starting/stopping a database connection or an embedded elasticsearch server?", "body": "<p>Your unit test class usually needs a few things to manage a shared resource for a group of test methods.  And in Kotlin you can use <code>@BeforeClass</code> and <code>@AfterClass</code> not in the test class, but rather within its <a href=\"https://kotlinlang.org/docs/reference/classes.html#companion-objects\" rel=\"noreferrer\">companion object</a> along with the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods\" rel=\"noreferrer\"><code>@JvmStatic</code> annotation</a>.</p>\n\n<p>The structure of a test class would look like:</p>\n\n\n\n<pre><code>class MyTestClass {\n    companion object {\n        init {\n           // things that may need to be setup before companion class member variables are instantiated\n        }\n\n        // variables you initialize for the class just once:\n        val someClassVar = initializer() \n\n        // variables you initialize for the class later in the @BeforeClass method:\n        lateinit var someClassLateVar: SomeResource \n\n        @BeforeClass @JvmStatic fun setup() {\n           // things to execute once and keep around for the class\n        }\n\n        @AfterClass @JvmStatic fun teardown() {\n           // clean up after this class, leave nothing dirty behind\n        }\n    }\n\n    // variables you initialize per instance of the test class:\n    val someInstanceVar = initializer() \n\n    // variables you initialize per test case later in your @Before methods:\n    var lateinit someInstanceLateZVar: MyType \n\n    @Before fun prepareTest() { \n        // things to do before each test\n    }\n\n    @After fun cleanupTest() {\n        // things to do after each test\n    }\n\n    @Test fun testSomething() {\n        // an actual test case\n    }\n\n    @Test fun testSomethingElse() {\n        // another test case\n    }\n\n    // ...more test cases\n}  \n</code></pre>\n\n<p>Given the above, you should read about:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/classes.html#companion-objects\" rel=\"noreferrer\">companion objects</a> - similar to the Class object in Java, but a singleton per class that is not static</li>\n<li><a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods\" rel=\"noreferrer\"><code>@JvmStatic</code></a> - an annotation that turns a companion object method into a static method on the outer class for Java interop</li>\n<li><a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\"><code>lateinit</code></a> - allows a <code>var</code> property to be initialized later when you have a well defined lifecycle</li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/not-null.html\" rel=\"noreferrer\"><code>Delegates.notNull()</code></a> - can be used instead of <code>lateinit</code> for a property that should be set at least once before being read.</li>\n</ul>\n\n<p><strong>Here are fuller examples of test classes for Kotlin that manage embedded resources.</strong></p>\n\n<p>The first is copied and modified from <a href=\"https://github.com/kohesive/solr-undertow/blob/master/src/test/kotlin/uy/kohesive/solr/undertow/TestServerWithPlugin.kt\" rel=\"noreferrer\">Solr-Undertow tests</a>, and before the test cases are run, configures and starts a Solr-Undertow server.  After the tests run, it cleans up any temporary files created by the tests.  It also ensures environment variables and system properties are correct before the tests are run.  Between test cases it unloads any temporary loaded Solr cores.  The test:</p>\n\n<pre><code>class TestServerWithPlugin {\n    companion object {\n        val workingDir = Paths.get(\"test-data/solr-standalone\").toAbsolutePath()\n        val coreWithPluginDir = workingDir.resolve(\"plugin-test/collection1\")\n\n        lateinit var server: Server\n\n        @BeforeClass @JvmStatic fun setup() {\n            assertTrue(coreWithPluginDir.exists(), \"test core w/plugin does not exist $coreWithPluginDir\")\n\n            // make sure no system properties are set that could interfere with test\n            resetEnvProxy()\n            cleanSysProps()\n            routeJbossLoggingToSlf4j()\n            cleanFiles()\n\n            val config = mapOf(...) \n            val configLoader = ServerConfigFromOverridesAndReference(workingDir, config) verifiedBy { loader -&gt;\n                ...\n            }\n\n            assertNotNull(System.getProperty(\"solr.solr.home\"))\n\n            server = Server(configLoader)\n            val (serverStarted, message) = server.run()\n            if (!serverStarted) {\n                fail(\"Server not started: '$message'\")\n            }\n        }\n\n        @AfterClass @JvmStatic fun teardown() {\n            server.shutdown()\n            cleanFiles()\n            resetEnvProxy()\n            cleanSysProps()\n        }\n\n        private fun cleanSysProps() { ... }\n\n        private fun cleanFiles() {\n            // don't leave any test files behind\n            coreWithPluginDir.resolve(\"data\").deleteRecursively()\n            Files.deleteIfExists(coreWithPluginDir.resolve(\"core.properties\"))\n            Files.deleteIfExists(coreWithPluginDir.resolve(\"core.properties.unloaded\"))\n        }\n    }\n\n    val adminClient: SolrClient = HttpSolrClient(\"http://localhost:8983/solr/\")\n\n    @Before fun prepareTest() {\n        // anything before each test?\n    }\n\n    @After fun cleanupTest() {\n        // make sure test cores do not bleed over between test cases\n        unloadCoreIfExists(\"tempCollection1\")\n        unloadCoreIfExists(\"tempCollection2\")\n        unloadCoreIfExists(\"tempCollection3\")\n    }\n\n    private fun unloadCoreIfExists(name: String) { ... }\n\n    @Test\n    fun testServerLoadsPlugin() {\n        println(\"Loading core 'withplugin' from dir ${coreWithPluginDir.toString()}\")\n        val response = CoreAdminRequest.createCore(\"tempCollection1\", coreWithPluginDir.toString(), adminClient)\n        assertEquals(0, response.status)\n    }\n\n    // ... other test cases\n}\n</code></pre>\n\n<p>And another starting AWS DynamoDB local as an embedded database (copied and modified slightly from <a href=\"https://stackoverflow.com/a/35353377/3679676\">Running AWS DynamoDB-local embedded</a>).  This test must hack the <code>java.library.path</code> before anything else happens or local DynamoDB (using sqlite with binary libraries) won't run.  Then it starts a server to share for all test classes, and cleans up temporary data between tests.  The test:</p>\n\n<pre><code>class TestAccountManager {\n    companion object {\n        init {\n            // we need to control the \"java.library.path\" or sqlite cannot find its libraries\n            val dynLibPath = File(\"./src/test/dynlib/\").absoluteFile\n            System.setProperty(\"java.library.path\", dynLibPath.toString());\n\n            // TEST HACK: if we kill this value in the System classloader, it will be\n            // recreated on next access allowing java.library.path to be reset\n            val fieldSysPath = ClassLoader::class.java.getDeclaredField(\"sys_paths\")\n            fieldSysPath.setAccessible(true)\n            fieldSysPath.set(null, null)\n\n            // ensure logging always goes through Slf4j\n            System.setProperty(\"org.eclipse.jetty.util.log.class\", \"org.eclipse.jetty.util.log.Slf4jLog\")\n        }\n\n        private val localDbPort = 19444\n\n        private lateinit var localDb: DynamoDBProxyServer\n        private lateinit var dbClient: AmazonDynamoDBClient\n        private lateinit var dynamo: DynamoDB\n\n        @BeforeClass @JvmStatic fun setup() {\n            // do not use ServerRunner, it is evil and doesn't set the port correctly, also\n            // it resets logging to be off.\n            localDb = DynamoDBProxyServer(localDbPort, LocalDynamoDBServerHandler(\n                    LocalDynamoDBRequestHandler(0, true, null, true, true), null)\n            )\n            localDb.start()\n\n            // fake credentials are required even though ignored\n            val auth = BasicAWSCredentials(\"fakeKey\", \"fakeSecret\")\n            dbClient = AmazonDynamoDBClient(auth) initializedWith {\n                signerRegionOverride = \"us-east-1\"\n                setEndpoint(\"http://localhost:$localDbPort\")\n            }\n            dynamo = DynamoDB(dbClient)\n\n            // create the tables once\n            AccountManagerSchema.createTables(dbClient)\n\n            // for debugging reference\n            dynamo.listTables().forEach { table -&gt;\n                println(table.tableName)\n            }\n        }\n\n        @AfterClass @JvmStatic fun teardown() {\n            dbClient.shutdown()\n            localDb.stop()\n        }\n    }\n\n    val jsonMapper = jacksonObjectMapper()\n    val dynamoMapper: DynamoDBMapper = DynamoDBMapper(dbClient)\n\n    @Before fun prepareTest() {\n        // insert commonly used test data\n        setupStaticBillingData(dbClient)\n    }\n\n    @After fun cleanupTest() {\n        // delete anything that shouldn't survive any test case\n        deleteAllInTable&lt;Account&gt;()\n        deleteAllInTable&lt;Organization&gt;()\n        deleteAllInTable&lt;Billing&gt;()\n    }\n\n    private inline fun &lt;reified T: Any&gt; deleteAllInTable() { ... }\n\n    @Test fun testAccountJsonRoundTrip() {\n        val acct = Account(\"123\",  ...)\n        dynamoMapper.save(acct)\n\n        val item = dynamo.getTable(\"Accounts\").getItem(\"id\", \"123\")\n        val acctReadJson = jsonMapper.readValue&lt;Account&gt;(item.toJSON())\n        assertEquals(acct, acctReadJson)\n    }\n\n    // ...more test cases\n\n}\n</code></pre>\n\n<p><strong><em>NOTE:</strong> some parts of the examples are abbreviated with <code>...</code></em></p>\n"}, {"comments": [{"owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1616440546, "post_id": 53584630, "comment_id": 117998624, "body": "Unit tests should not depend on external resources."}, {"owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "reply_to_user": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1616451680, "post_id": 53584630, "comment_id": 118002563, "body": "I mentioned that in pros section at the very top of the answer. But, believe or not, there may be another point of view on that, described below."}, {"owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "reply_to_user": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1616451731, "post_id": 53584630, "comment_id": 118002573, "body": "And, strictly speaking, unit tests should not use a database at all, it&#39;s more about higher level of testing pyramid."}], "tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": false, "score": -1, "last_activity_date": 1543784847, "creation_date": 1543784847, "answer_id": 53584630, "question_id": 35554076, "link": "https://stackoverflow.com/questions/35554076/how-do-i-manage-unit-test-resources-in-kotlin-such-as-starting-stopping-a-datab/53584630#53584630", "title": "How do I manage unit test resources in Kotlin, such as starting/stopping a database connection or an embedded elasticsearch server?", "body": "<p>Managing resources with before/after callbacks in tests, obviously, has it's pros:</p>\n\n<ul>\n<li>Tests are \"atomic\". A test executes as a whole things with all the callbacks One won't forget to fire up a dependency service before the tests and shut it down after it's done. If done properly, executions callbacks will work on any environment.</li>\n<li>Tests are self-contained. There is no external data or setup phases, everything is contained within a few test classes.</li>\n</ul>\n\n<p>It has some cons too. One important of them is that it pollutes the code and makes the code violate single responsibility principle. Tests now not only test something, but perform a heavyweight initialization and resource management. It can be ok in some cases (like <a href=\"https://stackoverflow.com/a/5462992/750510\">configuring an <code>ObjectMapper</code></a>), but modifying <code>java.library.path</code> or spawning another processes (or in-process embedded databases) are not so innocent.</p>\n\n<p>Why not treat those services as dependencies for your test eligible for \"injection\", like described by <a href=\"https://12factor.net/backing-services\" rel=\"nofollow noreferrer\">12factor.net</a>.</p>\n\n<p>This way you <strong>start and initialize dependency services somewhere outside of the test code.</strong></p>\n\n<p>Nowadays virtualization and containers are almost everywhere and most developers' machines are able to run Docker. And most of the application have a dockerized version: <a href=\"https://hub.docker.com/_/elasticsearch\" rel=\"nofollow noreferrer\">Elasticsearch</a>, <a href=\"https://hub.docker.com/r/amazon/dynamodb-local/\" rel=\"nofollow noreferrer\">DynamoDB</a>, <a href=\"https://hub.docker.com/_/postgres/\" rel=\"nofollow noreferrer\">PostgreSQL</a> and so on. Docker is a perfect solution for external services that your tests need.</p>\n\n<ul>\n<li>It can be a script that runs is run manually by a developer every time she wants to execute tests.</li>\n<li>It can be a task run by build tool (e.g. Gradle has awesome <a href=\"https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:adding_dependencies_to_tasks\" rel=\"nofollow noreferrer\"><code>dependsOn</code></a> and <a href=\"https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:finalizer_tasks\" rel=\"nofollow noreferrer\"><code>finalizedBy</code></a> DSL for defining dependencies). A task, of course, can execute the same script that developer executes manually using shell-outs / process execs.</li>\n<li>It can be a <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#before-launch-options\" rel=\"nofollow noreferrer\">task run by IDE before test execution</a>. Again, it can use the same script.</li>\n<li>Most CI / CD providers have a notion of \"service\" \u2014 an external dependency (process) that runs in parallel to your build and can be accessed via it's usual SDK / connector / API: <a href=\"https://docs.gitlab.com/ee/ci/services/\" rel=\"nofollow noreferrer\">Gitlab</a>, <a href=\"https://docs.travis-ci.com/user/database-setup/\" rel=\"nofollow noreferrer\">Travis</a>, <a href=\"https://confluence.atlassian.com/bitbucket/use-services-and-databases-in-bitbucket-pipelines-874786688.html\" rel=\"nofollow noreferrer\">Bitbucket</a>, <a href=\"https://www.appveyor.com/docs/services-databases/\" rel=\"nofollow noreferrer\">AppVeyor</a>, <a href=\"https://semaphoreci.com/docs/supported-stack.html#available-components-and-services\" rel=\"nofollow noreferrer\">Semaphore</a>, \u2026</li>\n</ul>\n\n<p>This approach:</p>\n\n<ul>\n<li>Frees your test code from initialization logic. Your tests will only test and do nothing more.</li>\n<li>Decouples code and data. Adding a new test case can now be done by adding new data into dependency services with it's native toolset. I.e. for SQL databases you'll use SQL, for Amazon DynamoDB you'll use CLI to create tables and put items.</li>\n<li>Is closer to a production code, where you obviously do not start those services when your \"main\" application starts.</li>\n</ul>\n\n<p>Of course, it has it's flaws (basically, the statements I've started from):</p>\n\n<ul>\n<li>Tests are not more \"atomic\". Dependency service must be started somehow prior test execution. The way it is started may be different in different environments: developer's machine or CI, IDE or build tool CLI.</li>\n<li>Tests are not self-contained. Now your seed data may be even packed inside an image, so changing it may require rebuilding a different project.</li>\n</ul>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27575, "favorite_count": 20, "accepted_answer_id": 35554077, "answer_count": 2, "score": 97, "last_activity_date": 1543784847, "creation_date": 1456145133, "last_edit_date": 1610973576, "question_id": 35554076, "link": "https://stackoverflow.com/questions/35554076/how-do-i-manage-unit-test-resources-in-kotlin-such-as-starting-stopping-a-datab", "title": "How do I manage unit test resources in Kotlin, such as starting/stopping a database connection or an embedded elasticsearch server?", "body": "<p>In my Kotlin JUnit tests, I want to start/stop embedded servers and use them within my tests.</p>\n<p>I tried using the JUnit <code>@Before</code> annotation on a method in my test class and it works fine, but it isn't the right behaviour since it runs every test case instead of just once.</p>\n<p>Therefore I want to use the <code>@BeforeClass</code> annotation on a method, but adding it to a method results in an error saying it must be on a static method.  Kotlin doesn't appear to have static methods.  And then the same applies for static variables, because I need to keep a reference to the embedded server around for use in the test cases.</p>\n<p>So how do I create this embedded database just once for all of my test cases?</p>\n<pre><code>class MyTest {\n    @Before fun setup() {\n       // works in that it opens the database connection, but is wrong \n       // since this is per test case instead of being shared for all\n    }\n\n    @BeforeClass fun setupClass() {\n       // what I want to do instead, but results in error because \n       // this isn't a static method, and static keyword doesn't exist\n    }\n\n    var referenceToServer: ServerType // wrong because is not static either\n\n    ...\n}\n</code></pre>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the answers to commonly asked Kotlin topics are present in SO.</em></p>\n"}, {"tags": ["java-native-interface", "external", "kotlin", "keyword"], "answers": [{"comments": [{"owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "edited": false, "score": 0, "creation_date": 1456145703, "post_id": 35553651, "comment_id": 58796319, "body": "I thought so. Thanks for the link to the issue"}, {"owner": {"reputation": 1150, "user_id": 4304439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-jHPT3g8LI-E/AAAAAAAAAAI/AAAAAAAABMc/-0RJRebP8tg/photo.jpg?sz=128", "display_name": "Alex Byrth", "link": "https://stackoverflow.com/users/4304439/alex-byrth"}, "edited": false, "score": 0, "creation_date": 1461611787, "post_id": 35553651, "comment_id": 61267288, "body": "But at <a href=\"https://github.com/ligee/kotlin-ndk-samples/blob/master/hello-jni/src/com/example/hellojni/HelloJni.kt\" rel=\"nofollow noreferrer\">github.com/ligee/kotlin-ndk-samples/blob/master/hello-jni/sr&zwnj;&#8203;c/&hellip;</a> it uses native keyword ..."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 1150, "user_id": 4304439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-jHPT3g8LI-E/AAAAAAAAAAI/AAAAAAAABMc/-0RJRebP8tg/photo.jpg?sz=128", "display_name": "Alex Byrth", "link": "https://stackoverflow.com/users/4304439/alex-byrth"}, "edited": false, "score": 2, "creation_date": 1461658705, "post_id": 35553651, "comment_id": 61286110, "body": "@AlexByrth unfortunately you can find plenty of GitHub repositories that contain outdated Kotlin code which no longer compiles with Kotlin 1.0"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 16, "last_activity_date": 1456143985, "creation_date": 1456143985, "answer_id": 35553651, "question_id": 35552834, "link": "https://stackoverflow.com/questions/35552834/what-is-the-purpose-of-external-keyword-in-kotlin/35553651#35553651", "title": "What is the purpose of `external` keyword in Kotlin?", "body": "<p>Indeed, it's an equivalent of Java's <code>native</code>. It's currently missing from the documentation but there's an <a href=\"https://youtrack.jetbrains.com/issue/KT-11021\" rel=\"noreferrer\">issue</a> to add it.</p>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 9917400, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qt40ImicC0E/AAAAAAAAAAI/AAAAAAAAAAA/JsfEE9lSvfU/photo.jpg?sz=128", "display_name": "Dhruv garg", "link": "https://stackoverflow.com/users/9917400/dhruv-garg"}, "is_accepted": false, "score": 3, "last_activity_date": 1568054643, "creation_date": 1568054643, "answer_id": 57859622, "question_id": 35552834, "link": "https://stackoverflow.com/questions/35552834/what-is-the-purpose-of-external-keyword-in-kotlin/57859622#57859622", "title": "What is the purpose of `external` keyword in Kotlin?", "body": "<p>According to documentation:\nexternal marks a declaration as implemented not in Kotlin (accessible through JNI or in JavaScript)</p>\n"}], "owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3036, "favorite_count": 0, "accepted_answer_id": 35553651, "answer_count": 2, "score": 16, "last_activity_date": 1568054643, "creation_date": 1456141716, "last_edit_date": 1489077967, "question_id": 35552834, "link": "https://stackoverflow.com/questions/35552834/what-is-the-purpose-of-external-keyword-in-kotlin", "title": "What is the purpose of `external` keyword in Kotlin?", "body": "<p>What exactly is the purpose of the <strong><code>external</code></strong> keyword in Kotlin? </p>\n\n<p>I guess it's for JNI like <code>native</code> in Java, but I can't seem to find any actual reference or documentation on this.</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 2, "creation_date": 1456163950, "post_id": 35551403, "comment_id": 58809434, "body": "After all I didn&#39;t use this solution, I really don&#39;t like putting two classes in one file. What was the reason for leaving out the package modifier from the language?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 0, "creation_date": 1456167314, "post_id": 35551403, "comment_id": 58811330, "body": "You should get used to putting multiple classes in one file, it&#39;s a very common pattern in Kotlin. We didn&#39;t include package-local visibility because it&#39;s not a good way to hide anything: a user of a module can create classes in the same package that the module uses and thus get access to package-local parts of that module."}, {"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 6, "creation_date": 1456178594, "post_id": 35551403, "comment_id": 58817881, "body": "But this way I have to put an 80 and a 130 lines long class in the same file, and the code becomes long enough to make it harder to read and navigate. I think it&#39;s not very clean. It also makes unit testing harder, since I have to use the factory in the unit test, to get an instance, so it&#39;s not so much of a &#39;unit&#39; test anymore."}, {"owner": {"reputation": 581, "user_id": 1604079, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/sOfYl.jpg?s=128&g=1", "display_name": "FeleMed", "link": "https://stackoverflow.com/users/1604079/felemed"}, "edited": false, "score": 5, "creation_date": 1462672242, "post_id": 35551403, "comment_id": 61734371, "body": "@yole Even if package visibility is &quot;not a good way to hide anything&quot;, it doesn&#39;t invalidate it as a good pattern, i.e if you want to create a StorageAPI which has public access and you define within the same package/sub-packages different ways of persistence/caching (file, db, ram, etc.) that you don&#39;t want accessible from out of the &quot;storage&quot; package but to be handled by the StorageAPI, is an example that justifies package visibility, not even considering adding thousands of lines of code to a class which englobes a wider concept just to fit Kotlin&#39;s taste."}, {"owner": {"reputation": 2491, "user_id": 986339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7d34daacd7145e51d76b236f204f3b1d?s=128&d=identicon&r=PG", "display_name": "Nar Gar", "link": "https://stackoverflow.com/users/986339/nar-gar"}, "edited": false, "score": 0, "creation_date": 1518405442, "post_id": 35551403, "comment_id": 84477808, "body": "There is a wider concern/issue/question, call it whatever fits best here. JVM is an interpreter for Java language and Java language is the programming interface for the JVM, in that respect Java is equivalent to JVM. How does, &quot;internal&quot; map to Java/JVM? How does one create the equivalent of &quot;package&quot; access in Kotlin. Saying that Kotlin and Java are interoperable is widely flawed, I&#39;d say, unless 1 to 1 mapping can be done between the two. So, if one has Factory initialiser in Java that deals with many classes for various cases, then all these classes shall end up in 1 absurdly gigantic file"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1456138151, "last_edit_date": 1456138151, "creation_date": 1456137309, "answer_id": 35551403, "question_id": 35550395, "link": "https://stackoverflow.com/questions/35550395/package-equivalent-visibility-modifier-in-kotlin/35551403#35551403", "title": "Package equivalent visibility modifier in Kotlin", "body": "<p>You can put <code>AssetFundValidator</code> and <code>AssetFundCalculatorImpl</code> into the same file and mark <code>AssetFundCalculatorImpl</code> as <code>private</code>. In that case it will only be accessible to code in the same file, including <code>AssertFundValidator</code>, but not to any code in other parts of the program.</p>\n"}], "owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 0, "accepted_answer_id": 35551403, "answer_count": 1, "score": 6, "last_activity_date": 1456138151, "creation_date": 1456134515, "question_id": 35550395, "link": "https://stackoverflow.com/questions/35550395/package-equivalent-visibility-modifier-in-kotlin", "title": "Package equivalent visibility modifier in Kotlin", "body": "<p>I'm writing a program in which I'm using the factory pattern. I have an interface called <strong>AssetFundCalculator</strong> and a class named <strong>AssetFundCalculatorImpl</strong> which implements the interface.</p>\n\n<p>The <strong>AssetFundValidator</strong> class validates some inputs, and is able to instantiate a valid <strong>AssetFundCalculatorImpl</strong>.</p>\n\n<p>I'd like if the rest of the program would only know about the interface, and not about the <strong>AssetFundCalculatorImpl</strong>, so that only the <strong>AssetFundValidator</strong> could instantiate it.</p>\n\n<p>My package structure is looking like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DUyAT.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DUyAT.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>In Java, I would give package visibility modifier to the <strong>AssetFundCalculatorImpl</strong> class, or it's constructor, and it would solve the issue, but in Kotlin, there is no package visibility modifier.</p>\n\n<p>Is there a solution to this? \nI don't want to put this code to a separately compiled module, so the <strong>internal</strong> modifier is not going to work.</p>\n"}, {"tags": ["spring", "jpa", "spring-data", "spring-data-jpa", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1456136809, "last_edit_date": 1456136809, "creation_date": 1456095015, "answer_id": 35543145, "question_id": 35542972, "link": "https://stackoverflow.com/questions/35542972/how-to-use-spring-data-jpa-methods-returning-a-stream-in-a-try-with-resources-bl/35543145#35543145", "title": "How to use Spring Data JPA methods returning a Stream in a try-with-resources block in Kotlin?", "body": "<p>Well, Java 8 support is not yet complete in Kotlin. So you can just declare use on your side like this</p>\n\n<pre><code>inline fun &lt;A : AutoCloseable, R&gt; A.use(block: (A) -&gt; R): R {\n    try {\n        return block(this)\n    } finally {\n        close()\n    }\n}\n</code></pre>\n\n<p>The other alternative is to declare it directly on <code>Stream</code></p>\n\n<pre><code>inline fun &lt;T, R&gt; Stream&lt;T&gt;.use(block: (Stream&lt;T&gt;) -&gt; R): R {\n    try {\n        return block(this)\n    } finally {\n        close()\n    }\n}\n</code></pre>\n\n<p><strong>UPD</strong></p>\n\n<p>If you are new to Kotlin you have to notice that extensions are resolved statically:</p>\n\n<blockquote>\n  <p>Extensions do not actually modify classes they extend. By defining an extension, you do not insert new members into a class, but merely make new functions callable with the dot-notation on instances of this class.</p>\n</blockquote>\n\n<p>See more <a href=\"http://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow\">http://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically</a></p>\n"}], "owner": {"reputation": 3635, "user_id": 1847708, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/66664c61a1b86995fe75220b668dc6c4?s=128&d=identicon&r=PG", "display_name": "ChrisGeo", "link": "https://stackoverflow.com/users/1847708/chrisgeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 0, "accepted_answer_id": 35543145, "answer_count": 1, "score": 2, "last_activity_date": 1456142088, "creation_date": 1456093974, "last_edit_date": 1456142088, "question_id": 35542972, "link": "https://stackoverflow.com/questions/35542972/how-to-use-spring-data-jpa-methods-returning-a-stream-in-a-try-with-resources-bl", "title": "How to use Spring Data JPA methods returning a Stream in a try-with-resources block in Kotlin?", "body": "<p>So I want to create a <code>Spring Boot</code> with <code>Spring Data JPA</code> project using <code>Kotlin</code> and lets say I have  a <code>Person</code> entity. Lets say like this:</p>\n\n<pre><code>@Entity\npublic class Person {\n\n   private @GeneratedValue @Id Long id;\n   private String name;\n\n   @OneToMany\n   private List&lt;Person&gt; friends;\n\n   \u2026\n}\n</code></pre>\n\n<p>I would create the following interface to be able to use <code>Try-with-Resources</code> and a <code>Stream&lt;Person&gt;</code>.</p>\n\n<pre><code>public interface PersonRepository extends Repository&lt;Person, Long&gt; {\n\n    @Query(\"select p from Person p\")\n    Stream&lt;Person&gt; findAllStream();\n}\n</code></pre>\n\n<p>So normally in my service I would do this:</p>\n\n<pre><code>@Service\nclass MyService {\n\n    @Autowired PersonRepository repository;\n\n    List&lt;String&gt; foo() {\n\n       try(Stream&lt;Person&gt; stream = repository.findAllStream()) {\n          return stream.flatMap(p -&gt; p.getFriends().stream())\n             .map(f -&gt; f.getName())\n             .collect(Collectors.toList());\n       }\n    }\n }\n</code></pre>\n\n<p>Now if you want to do this in Kotlin (The IntelliJ converter doesn't produce valid code). I suppose you would normally do something like:</p>\n\n<pre><code>class MyService @Autowired constructor(val personRepository: PersonRepository) {\n    fun foo() {\n        val list = personRepository.findAllStream()\n                       .use {{p -&gt; p.friends.stream()}.map {f -&gt; f.name}}\n    }\n}\n</code></pre>\n\n<p>Only you cant do that since there is no <code>#use</code> method on stream and you cant call <code>#stream()</code> from a <code>List</code>. So is there any way to do this?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 844, "user_id": 1431067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78d2b6cd5e548af1227ad6600830252?s=128&d=identicon&r=PG", "display_name": "unicorn2", "link": "https://stackoverflow.com/users/1431067/unicorn2"}, "edited": false, "score": 0, "creation_date": 1456086867, "post_id": 35541641, "comment_id": 58771937, "body": "What do you wish to achieve with this code?"}, {"owner": {"reputation": 1600, "user_id": 2333108, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d0538aa8a31ac20fa760c19cc0cc15eb?s=128&d=identicon&r=PG&f=1", "display_name": "mwerschy", "link": "https://stackoverflow.com/users/2333108/mwerschy"}, "reply_to_user": {"reputation": 844, "user_id": 1431067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78d2b6cd5e548af1227ad6600830252?s=128&d=identicon&r=PG", "display_name": "unicorn2", "link": "https://stackoverflow.com/users/1431067/unicorn2"}, "edited": false, "score": 0, "creation_date": 1456087043, "post_id": 35541641, "comment_id": 58772007, "body": "@unicorn2 Nothing really, it&#39;s just a test. Should add all the values in the range and set total to the result."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1456089564, "post_id": 35541641, "comment_id": 58772983, "body": "Could you check the version of Kotlin plugin you&#39;re using, and the version of kotlin-runtime you depend on, and ensure they do match?"}, {"owner": {"reputation": 1600, "user_id": 2333108, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d0538aa8a31ac20fa760c19cc0cc15eb?s=128&d=identicon&r=PG&f=1", "display_name": "mwerschy", "link": "https://stackoverflow.com/users/2333108/mwerschy"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1456094429, "post_id": 35541641, "comment_id": 58774825, "body": "@Ilya Plugin version is 1.0.0-release-IJ143-70, how do I check the kotlin-runtime version? The path is config\\plugins\\Kotlin\\kotlinc\\lib\\kotlin-runtime.jar so I guess it&#39;s just the one included in the plugin. Haven&#39;t changed anything from what idea setup."}, {"owner": {"reputation": 1571, "user_id": 4187837, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/797990d500303b57e9f9042f73ded007?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/4187837/gavin"}, "edited": false, "score": 1, "creation_date": 1456096162, "post_id": 35541641, "comment_id": 58775410, "body": "I think IntelliJ gives you a warning if the version don&#39;t match, with a link/button to update things"}, {"owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "edited": false, "score": 0, "creation_date": 1456106981, "post_id": 35541641, "comment_id": 58778149, "body": "<a href=\"http://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a> returns the same error too. I don&#39;t think this is project setup problem."}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1456121273, "post_id": 35541641, "comment_id": 58782125, "body": "It looks like a bug to me that should be raised on the kotlin issue tracker. For what it&#39;s worth, it works for me on 0.13.1513 but fails on 1.0.0 on my mac using command line tools."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1456131566, "post_id": 35541641, "comment_id": 58787122, "body": "Reported: <a href=\"https://youtrack.jetbrains.com/issue/KT-11153\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11153</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456141753, "post_id": 35541641, "comment_id": 58793566, "body": "i think the question should be deleted, a youtrack issue is enough"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1456133815, "creation_date": 1456133815, "answer_id": 35550156, "question_id": 35541641, "link": "https://stackoverflow.com/questions/35541641/reduce-on-range-throws-noclassdeffounderror-kotlin-intiterator/35550156#35550156", "title": "Reduce on Range throws NoClassDefFoundError: kotlin/IntIterator", "body": "<p>This is <a href=\"https://youtrack.jetbrains.com/issue/KT-11153\" rel=\"nofollow\">a bug</a> in Kotlin 1.0. It will be fixed in Kotlin 1.0.1.</p>\n"}], "owner": {"reputation": 1600, "user_id": 2333108, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d0538aa8a31ac20fa760c19cc0cc15eb?s=128&d=identicon&r=PG&f=1", "display_name": "mwerschy", "link": "https://stackoverflow.com/users/2333108/mwerschy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 35550156, "answer_count": 1, "score": 4, "last_activity_date": 1456133815, "creation_date": 1456086677, "question_id": 35541641, "link": "https://stackoverflow.com/questions/35541641/reduce-on-range-throws-noclassdeffounderror-kotlin-intiterator", "title": "Reduce on Range throws NoClassDefFoundError: kotlin/IntIterator", "body": "<p>Test:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val total = (0..10).reduce { total, next -&gt; total + next }\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: kotlin/IntIterator\n    at TestReduceKt.main(TestReduce.kt:6)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\nCaused by: java.lang.ClassNotFoundException: kotlin.IntIterator\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 6 more\n</code></pre>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin", "jvm-bytecode"], "answers": [{"comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 6, "creation_date": 1456090486, "post_id": 35538539, "comment_id": 58773318, "body": "@CaseyB And shortcut <code>ctrl+shift+a</code> (windows and linux) or <code>shift-command-a</code> (mac) is very usefull. Press this shortcut and then type <code>kotlin</code>!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 104, "last_activity_date": 1611756628, "last_edit_date": 1611756628, "creation_date": 1456071625, "answer_id": 35538539, "question_id": 35538049, "link": "https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea/35538539#35538539", "title": "Kotlin Bytecode - How to analyze in IntelliJ IDEA?", "body": "<p>IntelliJ IDEA comes with a bytecode viewing tool for Kotlin:</p>\n<p><strong>Tools \u2192 <sup><a href=\"https://i.stack.imgur.com/8rOk0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8rOk0.png\" alt=\"Kotlin icon\" /></a></sup> Kotlin \u2192 Show Kotlin Bytecode</strong></p>\n<p><sup>Also available through <kbd>Ctrl / \u2318</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd> as <strong>Show Kotlin Bytecode</strong> action.</sup></p>\n<p>It's a great tool that can jump to the corresponding bytecode when you move around in the source file. And it updates the bytecode on the fly whenever the source changes.</p>\n<hr>\n<p>Also, I'd like to recommend <a href=\"https://github.com/ingokegel/jclasslib\" rel=\"noreferrer\">jclasslib Bytecode Viewer</a> as an external tool for low-level class files analysis (such as inspecting constant pools). Now it is also available as an <a href=\"https://plugins.jetbrains.com/plugin/9248-jclasslib-bytecode-viewer\" rel=\"noreferrer\">IntelliJ IDEA plugin</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 5, "last_activity_date": 1488200398, "creation_date": 1488200398, "answer_id": 42486435, "question_id": 35538049, "link": "https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea/42486435#42486435", "title": "Kotlin Bytecode - How to analyze in IntelliJ IDEA?", "body": "<p>I use <a href=\"https://javap.yawk.at/\" rel=\"noreferrer\">https://javap.yawk.at/</a> to view byte code online. Set \"Kotlin\" as the input language and you are good to go. </p>\n\n<p>It even has an option to see the decompiled Java code via Procyon, but it might crush from time to time.</p>\n"}, {"tags": [], "owner": {"reputation": 1206, "user_id": 6393514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J7U5Cf5gTnM/AAAAAAAAAAI/AAAAAAAAAUM/S-QL3OQBvJ0/photo.jpg?sz=128", "display_name": "Jitendra A", "link": "https://stackoverflow.com/users/6393514/jitendra-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1577447068, "last_edit_date": 1577447068, "creation_date": 1537338074, "answer_id": 52399367, "question_id": 35538049, "link": "https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea/52399367#52399367", "title": "Kotlin Bytecode - How to analyze in IntelliJ IDEA?", "body": "<p>Just adding to the above answer. </p>\n\n<p><strong>Tools \u2192 <a href=\"https://i.stack.imgur.com/8rOk0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8rOk0.png\" alt=\"enter image description here\"></a> Kotlin \u2192 Show Kotlin Bytecode</strong></p>\n\n<p>Now, in the bytecode view, there is also an option to decompile the bytecode to Java. So, you can actually see both the bytecode and the equivalent java code in intellij. You even have an option to convert using JVM 8 target.</p>\n"}], "owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10943, "favorite_count": 8, "accepted_answer_id": 35538539, "answer_count": 3, "score": 68, "last_activity_date": 1611756628, "creation_date": 1456068912, "last_edit_date": 1538635747, "question_id": 35538049, "link": "https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea", "title": "Kotlin Bytecode - How to analyze in IntelliJ IDEA?", "body": "<p>I want to see the <strong>compiled bytecode</strong> so I can learn more about how it works under the cover. I'm using <strong>IntelliJ IDEA</strong> 15 but can't find a way to see the bytecode. What am I missing?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 5, "creation_date": 1506409707, "post_id": 35529070, "comment_id": 79797006, "body": "The outer <code>use</code> seems like a mistake. You are closing/disposing in a different scope than the one in which <code>inputStream</code> was opened."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 1, "creation_date": 1556456076, "post_id": 35529070, "comment_id": 98437796, "body": "And to do the opposite (write from file to some outputStream), I use this: <code>FileInputStream(someFile).use { stream -&gt; stream.copyTo(someOutputStream) }</code> , right?"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 93, "last_activity_date": 1576014086, "last_edit_date": 1576014086, "creation_date": 1456002642, "answer_id": 35529070, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin/35529070#35529070", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>You can simplify your function by using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/copy-to.html\" rel=\"noreferrer\">copyTo function</a>:</p>\n\n<pre><code>fun File.copyInputStreamToFile(inputStream: InputStream) {\n    this.outputStream().use { fileOut -&gt;\n        inputStream.copyTo(fileOut)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1506410033, "post_id": 37989253, "comment_id": 79797207, "body": "You should always close in the same scope you opened in. This is likely the reason <code>copyTo</code> doesn&#39;t automatically close the resources for you."}], "tags": [], "owner": {"reputation": 636, "user_id": 1223375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MdGDC.png?s=128&g=1", "display_name": "romiope", "link": "https://stackoverflow.com/users/1223375/romiope"}, "is_accepted": false, "score": 9, "last_activity_date": 1466678325, "creation_date": 1466678325, "answer_id": 37989253, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin/37989253#37989253", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>I suggest to make like this:</p>\n\n<pre><code>fun InputStream.toFile(path: String) {\n    use { input -&gt;\n        File(path).outputStream().use { input.copyTo(it) }\n    }\n}\n</code></pre>\n\n<p>and then to use like:</p>\n\n<pre><code>InputStream.toFile(\"/some_path_to_file\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16928, "user_id": 1047788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xA1rW.png?s=128&g=1", "display_name": "user7610", "link": "https://stackoverflow.com/users/1047788/user7610"}, "edited": false, "score": 1, "creation_date": 1511652749, "post_id": 46013606, "comment_id": 81938307, "body": "That buffer size may be a bit too small. Usually something between 8192 and 32768 bytes is used. For example, Kotlin&#39;s own InputStream#copyTo uses 8192 B as a default default and Go&#39;s copy uses 32768 (there it cannot be changed). Source: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/copy-to.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/&hellip;</a> Source: <a href=\"https://golang.org/src/io/io.go?s=11569:11629#L389\" rel=\"nofollow noreferrer\">golang.org/src/io/io.go?s=11569:11629#L389</a>"}, {"owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "edited": false, "score": 0, "creation_date": 1596038452, "post_id": 46013606, "comment_id": 111683617, "body": "Is not necessary call .flush() and then close()"}], "tags": [], "owner": {"reputation": 483, "user_id": 2923188, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001226691320/picture?type=large", "display_name": "Sumit Pansuriya", "link": "https://stackoverflow.com/users/2923188/sumit-pansuriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1504354070, "creation_date": 1504354070, "answer_id": 46013606, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin/46013606#46013606", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>You needs to do like this</p>\n\n<pre><code>@Throws\nfun copyDataBase() {\n\n        var myInput = context.getAssets().open(DB_NAME)\n        var outFileName = DB_PATH + DB_NAME\n        var fileOut: OutputStream = FileOutputStream(outFileName)\n        val buffer: ByteArray = ByteArray(1024)\n        var length: Int? = 0\n\n        while (true) {\n            length = myInput.read(buffer)\n            if (length &lt;= 0)\n                break\n            fileOut.write(buffer, 0, length)\n        }\n\n        fileOut.flush()\n        fileOut.close()\n        myInput.close()\n\n        throw IOException()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 636, "user_id": 1223375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MdGDC.png?s=128&g=1", "display_name": "romiope", "link": "https://stackoverflow.com/users/1223375/romiope"}, "is_accepted": false, "score": 14, "last_activity_date": 1506591931, "creation_date": 1506591931, "answer_id": 46465987, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin/46465987#46465987", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>My proposition is:</p>\n\n<pre><code>fun InputStream.toFile(path: String) {\n    File(path).outputStream().use { this.copyTo(it) }\n}\n</code></pre>\n\n<p>without closing current stream</p>\n\n<pre><code>InputStream.toFile(\"/path/filename\")\n</code></pre>\n\n<p>also, do not forget to handle exceptions, for example if write permission is denied :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10089823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FkGXchMfVUo/AAAAAAAAAAI/AAAAAAAAA3g/4T1Poi7aDp4/photo.jpg?sz=128", "display_name": "hackall360", "link": "https://stackoverflow.com/users/10089823/hackall360"}, "is_accepted": false, "score": 0, "last_activity_date": 1598391693, "creation_date": 1598391693, "answer_id": 63587511, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin/63587511#63587511", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>What appears to have worked for me is this:</p>\n<pre><code>fun fileCopyer(localFileA: File, localFileB: File) {\nvar output = localFileA.inputStream()\noutput.copyTo(localFileB.outputStream())\noutput.close()\n}\n</code></pre>\n"}], "owner": {"reputation": 1345, "user_id": 1347005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vLycm.png?s=128&g=1", "display_name": "Jeff Campbell", "link": "https://stackoverflow.com/users/1347005/jeff-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24491, "favorite_count": 5, "accepted_answer_id": 35529070, "answer_count": 5, "score": 35, "last_activity_date": 1598391693, "creation_date": 1455998976, "last_edit_date": 1501871463, "question_id": 35528409, "link": "https://stackoverflow.com/questions/35528409/write-a-large-inputstream-to-file-in-kotlin", "title": "Write a large Inputstream to File in Kotlin", "body": "<p>I have a large stream of text coming back from REST web service and I would like to write it directly to file. What is the simplest way of doing this?</p>\n\n<p>I have written the following function extension that WORKS. But I can't help thinking that there is a cleaner way of doing this.</p>\n\n<p><strong>Note</strong>: I was hoping to use try with resources to auto close the stream and file</p>\n\n<pre><code>fun File.copyInputStreamToFile(inputStream: InputStream) {\n    val buffer = ByteArray(1024)\n\n    inputStream.use { input -&gt;\n        this.outputStream().use { fileOut -&gt;\n\n            while (true) {\n                val length = input.read(buffer)\n                if (length &lt;= 0)\n                    break\n                fileOut.write(buffer, 0, length)\n            }\n            fileOut.flush()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["generics", "interface", "multiple-inheritance", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 30, "last_activity_date": 1478088452, "last_edit_date": 1495542336, "creation_date": 1456000893, "answer_id": 35528752, "question_id": 35528261, "link": "https://stackoverflow.com/questions/35528261/any-way-to-inherit-from-same-generic-interface-twice-with-separate-types-in-ko/35528752#35528752", "title": "Any way to inherit from same generic interface twice (with separate types) in Kotlin?", "body": "<p>Yes, you're missing an important detail of generics implementation on JVM: <a href=\"https://stackoverflow.com/questions/313584/what-is-the-concept-of-erasure-in-generics-in-java\">the type erasure</a>. In a nutshell, the compiled bytecode of classes doesn't actually contain any information about generic types (except for some metadata about the fact that a class or a method is generic). All the type checking happens at compile time, and after that no generic types retain in the code, there is just <code>Object</code>.</p>\n\n<p>To discover the problem in your case, just look at the bytecode (in IDEA, <code>Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode</code>, or any other tool). Let's consider this simple example: </p>\n\n<pre><code>interface Converter&lt;T&gt; {\n    fun convert(t: T): T\n}\n\nclass Reverser(): Converter&lt;String&gt; {\n    override fun convert(t: String) = t.reversed()\n}\n</code></pre>\n\n<p>In the bytecode of <code>Converter</code> the generic type is erased:</p>\n\n<pre><code>// access flags 0x401\n// signature (TT;)TT;\n// declaration: T convert(T)\npublic abstract convert(Ljava/lang/Object;)Ljava/lang/Object;\n</code></pre>\n\n<p>And here are the methods found in the bytecode of <code>Reverser</code>:</p>\n\n<pre><code>// access flags 0x1\npublic convert(Ljava/lang/String;)Ljava/lang/String;\n    ...\n\n// access flags 0x1041\npublic synthetic bridge convert(Ljava/lang/Object;)Ljava/lang/Object;\n    ...\n    INVOKEVIRTUAL Reverser.convert (Ljava/lang/String;)Ljava/lang/String;\n    ...\n</code></pre>\n\n<p>To inherit the <code>Converter</code> interface, <code>Reverser</code> should in order have a method <strong>with the same signature</strong>, that is, a type erased one. If the actual implementation method has different signature, a <a href=\"https://stackoverflow.com/questions/5007357/java-generics-bridge-method\">bridge method</a> is added. Here we see that the second method in the bytecode is exactly the bridge method (and it calls the first one).</p>\n\n<p>So, multiple generic interface implementations would trivially clash with each other, because there can be only one bridge method for a certain signature.</p>\n\n<p>Moreover, if it was possible, neither Java nor Kotlin <a href=\"https://stackoverflow.com/questions/2439782/overload-with-different-return-type-in-java\">has method overloading based on return value type</a>, and there would also be ambiguity in arguments sometimes, so the multiple inheritance would be quite limited.</p>\n\n<p>Things, however, will change with <a href=\"https://en.wikipedia.org/wiki/Project_Valhalla_(Java_language)\" rel=\"noreferrer\">Project Valhalla</a> (reified generics will retain actual type at runtime), but still I wouldn't expect multiple generic interface inheritance.</p>\n"}], "owner": {"reputation": 645, "user_id": 4048166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5802f98772e914e40c75dd910a5d3c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Merrillogic", "link": "https://stackoverflow.com/users/4048166/merrillogic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3164, "favorite_count": 2, "accepted_answer_id": 35528752, "answer_count": 1, "score": 28, "last_activity_date": 1478088452, "creation_date": 1455998031, "last_edit_date": 1456001578, "question_id": 35528261, "link": "https://stackoverflow.com/questions/35528261/any-way-to-inherit-from-same-generic-interface-twice-with-separate-types-in-ko", "title": "Any way to inherit from same generic interface twice (with separate types) in Kotlin?", "body": "<p>I have a scenario in my code where I would like a class to implement an interface for two separate types, like this example:</p>\n\n<pre><code>interface Speaker&lt;T&gt; {\n    fun talk(value: T)\n}\n\nclass Multilinguist : Speaker&lt;String&gt;, Speaker&lt;Float&gt; {\n    override fun talk(value: String) {\n        println(\"greetings\")\n    }\n\n    override fun talk(value: Float) {\n        // Do something fun like transmit it along a serial port\n    }\n}\n</code></pre>\n\n<p>Kotlin is not pleased with this, citing:</p>\n\n<pre><code>Type parameter T of 'Speaker' has inconsistent values: kotlin.String, kotlin.Float\nA supertype appears twice\n</code></pre>\n\n<p>I know that one possible solution is to implement the following code, where I implement the interface with <code>&lt;Any&gt;</code> and then check the types myself and delegate them to their functions.</p>\n\n<pre><code>interface Speaker&lt;T&gt; {\n    fun talk(value: T)\n}\n\nclass Multilinguist : Speaker&lt;Any&gt; {\n    override fun talk(value: Any) {\n        when (value) {\n            is String -&gt;\n                internalTalk(value)\n            is Float -&gt;\n                internalTalk(value)\n        } \n    }\n\n    fun internalTalk(value: String) {\n        println(value)\n    }\n\n    fun internalTalk(value: Float) {\n        // Do something fun like transmit it along a serial port\n    }\n}\n</code></pre>\n\n<p>However, that feels like I'm removing type safety and communication about what the class is used for, and is asking for trouble down the line. Is there a better way to implement this in Kotlin? Additionally - what's the reasoning behind it not being allowed the way I indicated in the first sample? Aren't interfaces just a contract of signatures I'm required to implement, or is there something I'm missing involving generics here?</p>\n"}, {"tags": ["java", "javafx", "javafx-8", "kotlin"], "comments": [{"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456005278, "post_id": 35526307, "comment_id": 58748546, "body": "What does the robot do? Is it supposed to be animated at some point? Or do you just want to display it in the center of the various other cells?"}, {"owner": {"reputation": 33, "user_id": 1808011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2441c607a2d0dff8ac58c2bff631f30d?s=128&d=identicon&r=PG", "display_name": "Stephen Chambers", "link": "https://stackoverflow.com/users/1808011/stephen-chambers"}, "reply_to_user": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456016429, "post_id": 35526307, "comment_id": 58751538, "body": "@James_D I need to animate the robot. Ideally I would animate it to the goal (the bottom of the screen in this example) and then have the animation restart. I currently animate the robot now, but the padding issue that I described above makes it not work that well. For example, the robot doesn&#39;t always stay in the center of his cell."}, {"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456017413, "post_id": 35526307, "comment_id": 58751752, "body": "I didn&#39;t actually ask the right question. I should have asked: is the animation smoothly transitioning between the centers of different cells, or is it &quot;hopping&quot; from the center of one cell to another? If it&#39;s the first, it&#39;s probably easier just to use a plain <code>Pane</code> and basically manage the layout yourself. There would just be some basic calculations to compute the location and size of the rectangles, and you could bind those to the pane&#39;s width and height. If it&#39;s the second, I would use a <code>GridPane</code> with <code>StackPane</code>s in each cell. You can then add and remove the robot from the stack panes."}, {"owner": {"reputation": 33, "user_id": 1808011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2441c607a2d0dff8ac58c2bff631f30d?s=128&d=identicon&r=PG", "display_name": "Stephen Chambers", "link": "https://stackoverflow.com/users/1808011/stephen-chambers"}, "reply_to_user": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456032085, "post_id": 35526307, "comment_id": 58754470, "body": "Thank you! That worked perfectly. However, I&#39;m not sure how to bind the rectangles width/height to the pane&#39;s width/height. I tried setting each rectangles heightProperty and widthProperty, but I&#39;m encountering odd behavior. Some rectangles are longer than others, some are taller than others. How exactly should I bind the width/height properties to my new pane?"}, {"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456064822, "post_id": 35526307, "comment_id": 58763196, "body": "Either <a href=\"https://stackoverflow.com/posts/35526307/edit\">edit</a> your question, or perhaps post a new one, to show the code you are now using that is causing that not to work properly. In Java I would just do <code>rect.widthProperty().bind(pane.widthProperty().divide(column&zwnj;&#8203;Count));</code>."}, {"owner": {"reputation": 33, "user_id": 1808011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2441c607a2d0dff8ac58c2bff631f30d?s=128&d=identicon&r=PG", "display_name": "Stephen Chambers", "link": "https://stackoverflow.com/users/1808011/stephen-chambers"}, "reply_to_user": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1456250710, "post_id": 35526307, "comment_id": 58856371, "body": "Everything&#39;s fine now. Thanks for your help!"}], "owner": {"reputation": 33, "user_id": 1808011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2441c607a2d0dff8ac58c2bff631f30d?s=128&d=identicon&r=PG", "display_name": "Stephen Chambers", "link": "https://stackoverflow.com/users/1808011/stephen-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455987868, "creation_date": 1455987868, "question_id": 35526307, "link": "https://stackoverflow.com/questions/35526307/how-do-i-get-a-fixed-number-of-resizing-cells-with-no-padding-in-javafx", "title": "How do I get a fixed number of resizing cells with no padding in javafx?", "body": "<p><strong>Background:</strong></p>\n\n<p>I'm working on a visualizer for real-time planning algorithms. The 'world' is provided in a text file, where '_' is a free cell, and '#' is a blocked cell. The following is an example: </p>\n\n<pre>\n41\n21\n___________________@_____________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_#######################################_\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n_________________________________________\n___________________*_____________________\n\n</pre>\n\n<p>It is very important that the window has the exact same number of cells in every row and the exact same number of cells in every column. </p>\n\n<p>I have to visualize in Kotlin, which is 100% interoperable with Java. I decided to try javafx, version 8.0.60. After doing some research on javafx layouts, I decided TilePane was my best bet. </p>\n\n<p><strong>What I have so far:</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/4M7Gj.png\" rel=\"nofollow\">This</a> is what I have so far. If you look closely, you can see a very small amount of padding within each node of the TilePane. As the robot goes from tile to tile, this small amount of padding introduces a slight error, because the robot moves using the width and height of the <em>tile</em>, not accounting for the padding. This causes the robot to not be in the center of the tile as it traverses the maze.</p>\n\n<p>Additionally, my solution is very dependent on the size of the window. If I adjust it slightly, the world is displayed incorrectly because each row and column do not have the same number of fixed cells.</p>\n\n<p><strong>Questions:</strong></p>\n\n<p>These questions are in order of importance. </p>\n\n<ol>\n<li>Is there a layout or setting that will provide me with a <strong>fixed</strong> number of cells per row and per column? Displaying the world depends on that.</li>\n<li>How do I get rid of the padding between each node in the layout?</li>\n<li>If possible, I would like to resize the layout, while maintaining the first two invariants. Does anyone know of a way to do this?</li>\n</ol>\n\n<p><strong>Relevant parts of my code:</strong></p>\n\n<p>Note: robot.fill is the same as calling robot.setFill, and Kotlin omits types and the keyword new when instantiating objects.</p>\n\n<pre><code>val root = TilePane(0.0, 0.0)\n\n/* The robot */\nval robotWidth = TILE_WIDTH / 4.0\nval robot = Rectangle(robotWidth, robotWidth)\nrobot.fill = Color.ORANGE\n\n/* The robots starting location, needs to be drawn later */\nvar startX: Double? = null\nvar startY: Double? = null\n\n\nfor (y in 0..rowCount - 1) {\n    val line = inputScanner.nextLine()\n\n    for (x in 0..columnCount - 1) {\n        when (line[x]) {\n            '#' -&gt; {\n                val blocked = Rectangle(TILE_WIDTH, TILE_HEIGHT)\n                blocked.fill = Color.BLACK\n                //blocked.stroke = Color.BLACK\n                root.children.add(blocked)\n            }\n            '_' -&gt; {\n                val free = Rectangle(TILE_WIDTH, TILE_HEIGHT)\n                free.fill = Color.LIGHTSLATEGRAY\n                free.opacity = .5\n                root.children.add(free)\n            }\n            '*' -&gt; {\n                val radius = TILE_WIDTH / 10.0\n                val dirtyCell = Circle(radius)\n                //dirtyCell.stroke = Color.BLUE\n                dirtyCell.fill = Color.BLUE\n                root.children.add(dirtyCell)\n            }\n            '@' -&gt; {\n                startX = x * 1.0\n                startY = y * 1.0\n                root.children.add(robot)\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "data-class"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1455983064, "post_id": 35525122, "comment_id": 58740163, "body": "Kotlin has a reflection library: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1456077270, "post_id": 35525122, "comment_id": 58768010, "body": "Example of using the class mentioned by @JBNizet is in the answer  <a href=\"http://stackoverflow.com/a/35539628/3679676\">stackoverflow.com/a/35539628/3679676</a>"}, {"owner": {"reputation": 924, "user_id": 2939453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feCOq.jpg?s=128&g=1", "display_name": "Adam Kis", "link": "https://stackoverflow.com/users/2939453/adam-kis"}, "edited": false, "score": 0, "creation_date": 1557760966, "post_id": 35525122, "comment_id": 98864284, "body": "Hey @Elifarley check my answer: <a href=\"https://stackoverflow.com/a/56115232/2939453\">stackoverflow.com/a/56115232/2939453</a>"}], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1455985743, "post_id": 35525706, "comment_id": 58741101, "body": "The first solution has several flows: it excludes inherited properties, doesn&#39;t work with boolean properties (whose getter starts with is...), tries to access properties even if they&#39;re not public. Using the java.beans classes (or any Java library allowing to access bean properties) might be a better idea."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1455985914, "post_id": 35525706, "comment_id": 58741158, "body": "@JBNizet, thanks for your remark, I&#39;ll try to improve it a little."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1455986686, "post_id": 35525706, "comment_id": 58741459, "body": "@JBNizet, fixed what you said about the implementatoin."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1455987644, "post_id": 35525706, "comment_id": 58741831, "body": "@JBNizet, hmm, tried it just now -- Kotlin generates <code>getSomething</code> named methods even for <code>Boolean</code> properties, not <code>isSomething</code>."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1455989536, "post_id": 35525706, "comment_id": 58742599, "body": "That&#39;s part of my point: instead of assuming and relying on low-level methods, you&#39;d better be relying of Kotlin reflection support for properties (i.e. the second part of the answer) or on higher-level Java abstractions dealing with Java Beans."}, {"owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "edited": false, "score": 0, "creation_date": 1590827546, "post_id": 35525706, "comment_id": 109832383, "body": "Or just use <code>@JvmField</code> annotation to omit setters and getters"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 20, "last_activity_date": 1456007770, "last_edit_date": 1495540430, "creation_date": 1455984881, "answer_id": 35525706, "question_id": 35525122, "link": "https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at/35525706#35525706", "title": "Kotlin data class: how to read the value of property if I don&#39;t know its name at compile time?", "body": "<p>You can do it through <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"noreferrer\">reflection</a>, and it's all the same for data classes and normal ones. </p>\n\n<p>The first option is just to use Java reflection:</p>\n\n<pre><code>val name = obj.javaClass\n              .getMethod(\"getName\") // to get property called `name`\n              .invoke(obj)\n</code></pre>\n\n<p>You can even make an extension function:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; Any.getThroughReflection(propertyName: String): T? {\n    val getterName = \"get\" + propertyName.capitalize()\n    return try {\n        javaClass.getMethod(getterName).invoke(this) as? T\n    } catch (e: NoSuchMethodException) {\n        null\n    }\n}\n</code></pre>\n\n<p>It calls the public getter. To get a value of a private property you can modify this code using <a href=\"https://stackoverflow.com/questions/17953724/using-getdeclaredmethod-to-get-a-method-from-a-class-extending-another\"><code>getDeclaredMethod</code></a> and <a href=\"https://stackoverflow.com/questions/880365/any-way-to-invoke-a-private-method\"><code>setAccessible</code></a>. This will also work for Java objects with the corresponding getters (but it misses the <a href=\"https://stackoverflow.com/questions/3874350/naming-conventions-for-java-methods-that-return-booleanno-question-mark\">convention</a> of <code>is</code> and <code>has</code> getters for <code>boolean</code>).</p>\n\n<p>And usage:</p>\n\n<pre><code>data class Person(val name: String, val employed: Boolean)\n\nval p = Person(\"Jane\", true)\nval name = p.getThroughReflection&lt;String&gt;(\"name\")\nval employed = p.getThroughReflection&lt;Boolean&gt;(\"employed\")\n\nprintln(\"$name - $employed\") // Jane - true\n</code></pre>\n\n<p><hr>\nThe second option involves using <a href=\"http://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-reflect\" rel=\"noreferrer\"><code>kotlin-reflect</code></a> library which you should add to your project separately, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/index.html\" rel=\"noreferrer\">here's its documentation</a>. It will let you get actual Kotlin property value, ignoring Java getters.</p>\n\n<p>You can use <code>javaClass.kotlin</code> to get actual Kotlin class token, and then you get a property from it:</p>\n\n<pre><code>val name = p.javaClass.kotlin.memberProperties.first { it.name == \"name\" }.get(p)\n</code></pre>\n\n<p>This solution will work only for Kotlin classes, not for Java ones, but it is much more reliable if you need to work with Kotlin classes: it doesn't depend on the underlying implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 2196, "user_id": 2917707, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/adfde95d7672b98c5725b605870bc204?s=128&d=identicon&r=PG&f=1", "display_name": "Hatem Jaber", "link": "https://stackoverflow.com/users/2917707/hatem-jaber"}, "edited": false, "score": 2, "creation_date": 1515439207, "post_id": 35539628, "comment_id": 83292509, "body": "I know this answer is almost 2 years old... is this still the way to do it? I&#39;m curious if there is anything new that may have been added to the Kotlin API that would have created another way to achieve this."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2196, "user_id": 2917707, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/adfde95d7672b98c5725b605870bc204?s=128&d=identicon&r=PG&f=1", "display_name": "Hatem Jaber", "link": "https://stackoverflow.com/users/2917707/hatem-jaber"}, "edited": false, "score": 0, "creation_date": 1517062222, "post_id": 35539628, "comment_id": 83946349, "body": "@HatemJaber If you are reading a property where you do not know the name at compile time, then yes.  If you want to read a known property that is there at compile time you can use a property reference to access the property."}, {"owner": {"reputation": 68461, "user_id": 90527, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/62d3a421bbe13cae0425a563579618ae?s=128&d=identicon&r=PG", "display_name": "outis", "link": "https://stackoverflow.com/users/90527/outis"}, "reply_to_user": {"reputation": 2196, "user_id": 2917707, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/adfde95d7672b98c5725b605870bc204?s=128&d=identicon&r=PG&f=1", "display_name": "Hatem Jaber", "link": "https://stackoverflow.com/users/2917707/hatem-jaber"}, "edited": false, "score": 3, "creation_date": 1531524568, "post_id": 35539628, "comment_id": 89643205, "body": "@HatemJaber: newer versions of the reflection library allow for <code>instance::class.members</code> instead of <code>instance.javaClass.kotlin.declaredMemberProperties, though you should check that the type of the property is a </code>KProperty&lt;*, *&gt;` or <code>KMutableProperty&lt;*, *&gt;</code>."}, {"owner": {"reputation": 924, "user_id": 2939453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feCOq.jpg?s=128&g=1", "display_name": "Adam Kis", "link": "https://stackoverflow.com/users/2939453/adam-kis"}, "reply_to_user": {"reputation": 2196, "user_id": 2917707, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/adfde95d7672b98c5725b605870bc204?s=128&d=identicon&r=PG&f=1", "display_name": "Hatem Jaber", "link": "https://stackoverflow.com/users/2917707/hatem-jaber"}, "edited": false, "score": 0, "creation_date": 1557760619, "post_id": 35539628, "comment_id": 98864109, "body": "@HatemJaber Please check my answer: <a href=\"https://stackoverflow.com/a/56115232/2939453\">stackoverflow.com/a/56115232/2939453</a> It might help you"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 924, "user_id": 2939453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feCOq.jpg?s=128&g=1", "display_name": "Adam Kis", "link": "https://stackoverflow.com/users/2939453/adam-kis"}, "edited": false, "score": 0, "creation_date": 1557951131, "post_id": 35539628, "comment_id": 98942940, "body": "@AdamKis My answer still worked if a correct import statement was added, I have updated it to a newer version and included the imports."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 68461, "user_id": 90527, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/62d3a421bbe13cae0425a563579618ae?s=128&d=identicon&r=PG", "display_name": "outis", "link": "https://stackoverflow.com/users/90527/outis"}, "edited": false, "score": 0, "creation_date": 1558036374, "post_id": 35539628, "comment_id": 98978015, "body": "@outis you don&#39;t need to check that because they all descend from <code>KProperty1&lt;T,R&gt;</code> as the above example was changed to handle."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 38, "last_activity_date": 1601751901, "last_edit_date": 1601751901, "creation_date": 1456076873, "answer_id": 35539628, "question_id": 35525122, "link": "https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at/35539628#35539628", "title": "Kotlin data class: how to read the value of property if I don&#39;t know its name at compile time?", "body": "<p>Here is a function to read a property from an instance of a class given the property name (<em>throws exception if property not found, but you can change that behaviour</em>):</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>import kotlin.reflect.KProperty1\nimport kotlin.reflect.full.memberProperties\n\n@Suppress(&quot;UNCHECKED_CAST&quot;)\nfun &lt;R&gt; readInstanceProperty(instance: Any, propertyName: String): R {\n    val property = instance::class.members\n                     // don't cast here to &lt;Any, R&gt;, it would succeed silently \n                     .first { it.name == propertyName } as KProperty1&lt;Any, *&gt; \n    // force a invalid cast exception if incorrect type here\n    return property.get(instance) as R  \n}\n</code></pre>\n<h2>build.gradle.kts</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>dependencies {\n    implementation(kotlin(&quot;reflect&quot;))\n}\n</code></pre>\n<hr />\n<h2>Using</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// some data class\ndata class MyData(val name: String, val age: Int)\nval sample = MyData(&quot;Fred&quot;, 33)\n\n// and reading property &quot;name&quot; from an instance...\nval name: String = readInstanceProperty(sample, &quot;name&quot;)\n\n// and reading property &quot;age&quot; placing the type on the function call...\nval age = readInstanceProperty&lt;Int&gt;(sample, &quot;age&quot;)\n\nprintln(name) // Fred\nprintln(age)  // 33\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 5636313, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/igjep.jpg?s=128&g=1", "display_name": "Farid", "link": "https://stackoverflow.com/users/5636313/farid"}, "edited": false, "score": 0, "creation_date": 1570433983, "post_id": 56115232, "comment_id": 102898193, "body": "Kotlin team is trying to distance the language from checked exceptions, I believe. <a href=\"https://kotlinlang.org/docs/reference/exceptions.html#checked-exceptions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 924, "user_id": 2939453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feCOq.jpg?s=128&g=1", "display_name": "Adam Kis", "link": "https://stackoverflow.com/users/2939453/adam-kis"}, "is_accepted": false, "score": 6, "last_activity_date": 1557761449, "last_edit_date": 1557761449, "creation_date": 1557760331, "answer_id": 56115232, "question_id": 35525122, "link": "https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at/56115232#56115232", "title": "Kotlin data class: how to read the value of property if I don&#39;t know its name at compile time?", "body": "<p>The answers above didn't work for me so I've created an extension function for this:</p>\n\n<pre><code>@Throws(IllegalAccessException::class, ClassCastException::class)\ninline fun &lt;reified T&gt; Any.getField(fieldName: String): T? {\n    this::class.memberProperties.forEach { kCallable -&gt;\n        if (fieldName == kCallable.name) {\n            return kCallable.getter.call(this) as T?\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>This is an example call:</p>\n\n<pre><code>val valueNeeded: String? = yourObject.getField&lt;String&gt;(\"exampleFieldName\")\n</code></pre>\n\n<p>Also include this in your app's build.gradle:</p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 885, "user_id": 1009148, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/96Bwd.jpg?s=128&g=1", "display_name": "melis", "link": "https://stackoverflow.com/users/1009148/melis"}, "edited": false, "score": 0, "creation_date": 1604007171, "post_id": 63204635, "comment_id": 114224092, "body": "Did you find an answer to this? That&#39;s exactly what i&#39;m dealing with right now."}], "tags": [], "owner": {"reputation": 21, "user_id": 2577169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280e636a6914c778c20ea28932daa279?s=128&d=identicon&r=PG", "display_name": "Burtan", "link": "https://stackoverflow.com/users/2577169/burtan"}, "is_accepted": false, "score": 1, "last_activity_date": 1604123525, "last_edit_date": 1604123525, "creation_date": 1596280961, "answer_id": 63204635, "question_id": 35525122, "link": "https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at/63204635#63204635", "title": "Kotlin data class: how to read the value of property if I don&#39;t know its name at compile time?", "body": "<p>I wonder if it is possible to define the type of the field programmatically. You can get the type easily with:</p>\n<pre><code>kCallable.returnType\n</code></pre>\n<p>However you still have to assign the generic type explicitely:</p>\n<pre><code>getField&lt;String&gt;\n</code></pre>\n<p>instead of</p>\n<pre><code>getField&lt;kCallable.returnType&gt;\n</code></pre>\n<p>Edit:\nI ended up using the following:</p>\n<pre><code>when (prop.call(object)) {\n    is ObservableList&lt;*&gt; -&gt; {}\n    is Property&lt;*&gt; -&gt; {}\n}\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 299109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1047889abb6608efeb6129803737335a?s=128&d=identicon&r=PG", "display_name": "Elifarley", "link": "https://stackoverflow.com/users/299109/elifarley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23408, "favorite_count": 6, "accepted_answer_id": 35539628, "answer_count": 4, "score": 23, "last_activity_date": 1604123525, "creation_date": 1455981433, "last_edit_date": 1464615085, "question_id": 35525122, "link": "https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at", "title": "Kotlin data class: how to read the value of property if I don&#39;t know its name at compile time?", "body": "<p>How can I read the value of property in a Kotlin data class instance if the property name is only known at runtime?</p>\n"}, {"tags": ["android", "rx-java", "kotlin", "rx-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2987, "user_id": 4586842, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRT7RAOxRAY/AAAAAAAAAAI/AAAAAAAAAAA/dsSyxvgtEUI/photo.jpg?sz=128", "display_name": "Matthew Smith", "link": "https://stackoverflow.com/users/4586842/matthew-smith"}, "edited": false, "score": 1, "creation_date": 1456004227, "post_id": 35527773, "comment_id": 58748171, "body": "Thanks, doOnNext was definitely the missing piece. I no longer need to make my cache store and lookup an observable method because I can do them in doOnNext which simplified everything."}], "tags": [], "owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "is_accepted": true, "score": 3, "last_activity_date": 1455995804, "last_edit_date": 1495541275, "creation_date": 1455995424, "answer_id": 35527773, "question_id": 35524980, "link": "https://stackoverflow.com/questions/35524980/using-rxjava-to-join-local-data-with-remote-or-cached-data/35527773#35527773", "title": "Using RxJava to join local data with remote ( or cached ) data", "body": "<blockquote>\n  <ol>\n  <li>Currently loadCachedUserInfo takes in an array of ListItem and returns that same array as an observable after the cached items have been associated with it. This feels wrong to me. I think instead this call should only return the items that have a cached UserInfo associated with it. However, I need to continue passing the full array of ListItem to the next method</li>\n  </ol>\n</blockquote>\n\n<p>I am not sure I understand you correctly but if you only need side-effect (caching), you can just use <code>doOnNext</code>. For example,</p>\n\n<pre><code>.doOnNext { listItems -&gt;\n    if ( list.isUserList ) {\n        cache(listItems, userIDIndex = list.userIDIndex!!)\n    }\n}\n\nfun cache(listItems : List&lt;ATListItem&gt;, userIDIndex : Int) {\n    // caching\n}\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Do I need to do additional work to support unsubscribing?</li>\n  </ol>\n</blockquote>\n\n<p>No, AFAIK.</p>\n\n<p><strong>Note:</strong></p>\n\n<p><strong>More info about <code>doOnNext</code> can be found at <a href=\"https://stackoverflow.com/questions/28402689/what-is-the-purpose-of-doonnext-in-rxjava\">What is the purpose of doOnNext(...) in RxJava</a> and <a href=\"http://www.grokkingandroid.com/rxjavas-side-effect-methods/\" rel=\"nofollow noreferrer\">here</a></strong></p>\n\n<p>Normally you don't need <code>return@...</code> if the last statement in lambda is an expression. \ne.g.:</p>\n\n<pre><code>.flatMap { listItems -&gt;\n    if ( list.isUserList ) {\n        return@flatMap loadCachedUserInfo(listItems, userIDIndex = list.userIDIndex!!)\n    }\n    return@flatMap Observable.just(listItems)\n}    \n</code></pre>\n\n<p>can be written like:</p>\n\n<pre><code>.flatMap { listItems -&gt;\n    if ( list.isUserList )\n        loadCachedUserInfo(listItems, userIDIndex = list.userIDIndex!!)\n    else\n        Observable.just(listItems)\n} \n</code></pre>\n\n<p><strong>I didn't test the code.</strong></p>\n"}], "owner": {"reputation": 2987, "user_id": 4586842, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRT7RAOxRAY/AAAAAAAAAAI/AAAAAAAAAAA/dsSyxvgtEUI/photo.jpg?sz=128", "display_name": "Matthew Smith", "link": "https://stackoverflow.com/users/4586842/matthew-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "accepted_answer_id": 35527773, "answer_count": 1, "score": 3, "last_activity_date": 1455995804, "creation_date": 1455980655, "last_edit_date": 1455989144, "question_id": 35524980, "link": "https://stackoverflow.com/questions/35524980/using-rxjava-to-join-local-data-with-remote-or-cached-data", "title": "Using RxJava to join local data with remote ( or cached ) data", "body": "<p>This is working code but I have a few questions as well as a request for advice on improving it. I am new to RxJava and I have not fully wrapped my head around how to chain these type of observables together. </p>\n\n<p>I have two model objects, <code>ListItem</code> and <code>UserInfo</code>. <code>ListItem</code>s exists in a local database and the <code>UserInfo</code> is fetched from the server by using an ID provided from the <code>ListItem</code>. </p>\n\n<p>The <code>UserInfo</code> web service accepts an array of IDs for which it will return a list of <code>UserInfo</code> objects. </p>\n\n<p>The flow of this code is as follows:</p>\n\n<ol>\n<li>Load <code>ListItem</code>s from database</li>\n<li>Using the <code>ListItem</code>s fetched from the database, check an in memory cache to see if I've already fetched the <code>UserInfo</code> for a particular <code>ListItem</code></li>\n<li>For any items whose <code>UserInfo</code> is not cached, fetch them from the network</li>\n<li>Place the fetched <code>UserInfo</code> objects into the cache</li>\n<li>Re-run step 2 ( the method is <code>loadCachedUserInfo</code>)</li>\n<li>Return results to subscriber</li>\n</ol>\n\n<p>NOTE: The <code>UserInfo</code> objects should only be fetched for a <code>ListItem</code> if the list has been deemed a <code>isUserList</code>.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>fun itemsInList(list : ATList, parentValue : String? = null, searchString : String? = null, limit : Int = defaultFetchLimit, sortOrder: SortDescriptor? = null) : Observable&lt;List&lt;ATListItem&gt;&gt; {\n    return Observable.create&lt;List&lt;ATListItem&gt;&gt; { subscriber -&gt;\n        val listItems = listItemsInList(list, parentValue = parentValue, searchString = searchString, limit = limit, sortOrder = sortOrder)\n        subscriber.onNext(listItems)\n        subscriber.onCompleted()\n    }.flatMap { listItems -&gt;\n        if ( list.isUserList ) {\n            return@flatMap loadCachedUserInfo(listItems, userIDIndex = list.userIDIndex!!)\n        }\n        return@flatMap Observable.just(listItems)\n    }.flatMap { listItems -&gt;\n        if ( list.isUserList ) {\n            return@flatMap fetchUserInfoForListItems(listItems, list.userIDIndex!!, force = false)\n        }\n        return@flatMap Observable.just(listItems)\n    }\n}\n\nfun loadCachedUserInfo(listItems : List&lt;ATListItem&gt;, userIDIndex : Int) : Observable&lt;List&lt;ATListItem&gt;&gt; {\n    return Observable.create&lt;List&lt;ATListItem&gt;&gt; { subscriber -&gt;\n        for ( listItem in listItems ) {\n            listItem.coreUserInfo = coreUserMap[listItem.valueForAttributeIndex(userIDIndex)?.toLowerCase()]\n        }\n        subscriber.onNext(listItems)\n        subscriber.onCompleted()\n    }\n}\n\nfun fetchUserInfoForListItems(listItems : List&lt;ATListItem&gt;, userIDIndex: Int, force: Boolean) : Observable&lt;List&lt;ATListItem&gt;&gt; {\n    val itemsToFetch = if ( force ) listItems else listItems.filter { it.coreUserInfo == null }\n    val ids = itemsToFetch.map { it.valueForAttributeIndex(userIDIndex) ?: \"\" }.filter { !it.isEmpty() }\n    val records = hashMapOf(\"records\" to ids)\n    if ( itemsToFetch.count() == 0 ) {\n        return Observable.just(listItems)\n    }\n    return RuntimeDataController.dataService.fetchCoreUserInfo(recordsMap = records)\n            .map { json -&gt;\n                val recordsArray = json.arrayValue(\"records\")\n                for ( i in 0..recordsArray.length() - 1) {\n                    val coreUserInfo = CoreUserInfo(recordsArray.getJSONObject(i))\n                    coreUserMap[coreUserInfo.username.toLowerCase()] = coreUserInfo\n                    coreUserMap[coreUserInfo.userID] = coreUserInfo\n                    coreUserInfo.externalUserID?.let { coreUserMap[it] = coreUserInfo }\n                }\n                return@map listItems\n            }.flatMap { loadCachedUserInfo(listItems, userIDIndex = userIDIndex) }\n}\n</code></pre>\n\n<p>The user would initiate the sequence of events by calling:</p>\n\n<p><code>ListController.itemsInList(list)</code></p>\n\n<p>My questions about this code are:</p>\n\n<ol>\n<li>Currently <code>loadCachedUserInfo</code> takes in an array of <code>ListItem</code> and returns that same array as an observable after the cached items have been associated with it. This feels wrong to me. I think instead this call should only return the items that have a cached <code>UserInfo</code> associated with it. However, I need to continue passing the full array of <code>ListItem</code> to the next method</li>\n</ol>\n\n<p>2.) Do I need to do additional work to support unsubscribing?</p>\n\n<p>3.) This is similar question 1. My <code>fetchUserInfoForListItems</code> takes an array of list items and returns an observable with that same array of list items after they have been fetched and re-run through the cache method. This also feels incorrect to me. I would rather this method return an <code>Observable&lt;List&lt;UserInfo&gt;&gt;</code> for the objects that were fetched. I am not understanding how in <code>itemsInList</code> to then associate the <code>ListItem</code>s with the newly fetched <code>UserInfo</code> and return an Observable of those <code>ListItem</code>s.</p>\n\n<p><strong>Edit</strong>: After writing this post it gave helped me realize a few things. I can flatMap wrap my calls in an Observable.create that can contain the smarts I wanted to take out of my <code>fetchUserInfoForListItems</code>, letting me address question #3. Here is the updated code:</p>\n\n<pre><code> fun itemsInList(list : ATList, parentValue : String? = null, searchString : String? = null, limit : Int = defaultFetchLimit, sortOrder: SortDescriptor? = null) : Observable&lt;List&lt;ATListItem&gt;&gt; {\n    return Observable.create&lt;List&lt;ATListItem&gt;&gt; { subscriber -&gt;\n        val listItems = listItemsInList(list, parentValue = parentValue, searchString = searchString, limit = limit, sortOrder = sortOrder)\n        subscriber.onNext(listItems)\n        subscriber.onCompleted()\n    }.flatMap { listItems -&gt;\n        if ( list.isUserList ) {\n            return@flatMap loadCachedUserInfo(listItems, userIDIndex = list.userIDIndex!!)\n        }\n        return@flatMap Observable.just(listItems)\n    }.flatMap { listItems -&gt;\n        if ( list.isUserList ) {\n            return@flatMap Observable.create&lt;List&lt;ATListItem&gt;&gt; { subscriber -&gt;\n                fetchUserInfoForListItems(listItems, list.userIDIndex!!, force = false).map { userInfoList -&gt;\n                    for (coreUserInfo in userInfoList) {\n                        coreUserMap[coreUserInfo.username.toLowerCase()] = coreUserInfo\n                        coreUserMap[coreUserInfo.userID] = coreUserInfo\n                        coreUserInfo.externalUserID?.let { coreUserMap[it] = coreUserInfo }\n                    }\n                }.flatMap {\n                    loadCachedUserInfo(listItems, userIDIndex = list.userIDIndex!!)\n                }.subscribe {\n                    subscriber.onNext(listItems)\n                    subscriber.onCompleted()\n                }\n            }\n        }\n        return@flatMap Observable.just(listItems)\n    }\n}\n\nfun loadCachedUserInfo(listItems : List&lt;ATListItem&gt;, userIDIndex : Int) : Observable&lt;List&lt;ATListItem&gt;&gt; {\n    return Observable.create&lt;List&lt;ATListItem&gt;&gt; { subscriber -&gt;\n        listItems.forEach { listItem -&gt; listItem.coreUserInfo = coreUserMap[listItem.valueForAttributeIndex(userIDIndex)?.toLowerCase()] }\n        subscriber.onNext(listItems)\n        subscriber.onCompleted()\n    }\n}\n\nfun fetchUserInfoForListItems(listItems : List&lt;ATListItem&gt;, userIDIndex: Int, force: Boolean) : Observable&lt;List&lt;CoreUserInfo&gt;&gt; {\n    val itemsToFetch = if ( force ) listItems else listItems.filter { it.coreUserInfo == null }\n    val ids = itemsToFetch.map { it.valueForAttributeIndex(userIDIndex) ?: \"\" }.filter { !it.isEmpty() }\n    val records = hashMapOf(\"records\" to ids)\n    if ( itemsToFetch.count() == 0 ) { return Observable.just(ArrayList&lt;CoreUserInfo&gt;()) }\n    return RuntimeDataController.dataService.fetchCoreUserInfo(recordsMap = records)\n            .map { json -&gt;\n                val userInfo = ArrayList&lt;CoreUserInfo&gt;()\n                json.arrayValue(\"records\").eachObject { userInfo.add(CoreUserInfo(it)) }\n                return@map userInfo\n            }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "animation", "kotlin"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456113031, "post_id": 35523247, "comment_id": 58779668, "body": "What are you seeing? Your fragment shows but doesn&#39;t animate? Does your text view get the correct text?"}, {"owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456135698, "post_id": 35523247, "comment_id": 58789812, "body": "Hello, yes. My fragment is shows but doesn&#39;t animate."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "edited": false, "score": 0, "creation_date": 1455976393, "post_id": 35524034, "comment_id": 58737910, "body": "Thanks for reply. No, it&#39;s doesn&#39;t work for me. Can u review my code? May be it have any issues? For example setAnimation for fragment need to be different and something like that. My code on Kotlin, but it have no big difference with Java."}, {"owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "reply_to_user": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "edited": false, "score": 0, "creation_date": 1455977836, "post_id": 35524034, "comment_id": 58738397, "body": "OnResume is a perfectly viable place to start the animation. I think you should check if the startAnimation method really works as you think (there are several ways of executing animations in android, and it sometimes might be tricky)"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456112787, "post_id": 35524034, "comment_id": 58779620, "body": "In Fragments onResume is tied to the Activity&#39;s life cycle. So if the Activity&#39;s onResume as already been called when the fragment is attached it won&#39;t be called."}, {"owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "edited": false, "score": 0, "creation_date": 1456135772, "post_id": 35524034, "comment_id": 58789862, "body": "Thx for reply, what I need to do in this case?"}], "tags": [], "owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "is_accepted": false, "score": 0, "last_activity_date": 1455975496, "creation_date": 1455975496, "answer_id": 35524034, "question_id": 35523247, "link": "https://stackoverflow.com/questions/35523247/android-start-animation-when-fragment-is-loaded/35524034#35524034", "title": "Android: Start animation when fragment is loaded", "body": "<p>From the documentation of <a href=\"http://developer.android.com/reference/android/support/v4/app/Fragment.html#onResume()\" rel=\"nofollow\"><code>onResume</code></a>:</p>\n\n<blockquote>\n  <p>Called when the fragment is visible to the user and actively running. This is generally tied to Activity.onResume of the containing Activity's lifecycle.</p>\n</blockquote>\n\n<p>You want to run the animation when it can be visible in the first place, hence I suggest starting the animation in your fragment's <code>onResume</code> or override the <code>onFragmentsResumed</code> method in the activity that this fragment is attached to.</p>\n"}], "owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1875, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456204562, "creation_date": 1455971280, "question_id": 35523247, "link": "https://stackoverflow.com/questions/35523247/android-start-animation-when-fragment-is-loaded", "title": "Android: Start animation when fragment is loaded", "body": "<p>I've trying to implement custom fragment with loading animation. Same code works fine with activity, but not works with fragment.</p>\n\n<p>Here my fragment layout code:</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"pw.osin.musicexpert.fragments.BusyFragment\"&gt;\n\n&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/fragment_animation_logo\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_marginBottom=\"20dp\"\n        android:background=\"@drawable/vinyl\" /&gt;\n\n    &lt;FrameLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:layout_margin=\"20dp\"\n        android:background=\"@color/colorPrimaryDark\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/fragment_animation_description\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_margin=\"16dp\"\n            android:gravity=\"center_horizontal\"\n            android:text=\"@string/message_data_is_loading\"\n            android:textColor=\"@color/colorPrimaryYellow\"\n            android:textSize=\"20dp\"\n            android:textStyle=\"bold\" /&gt;\n    &lt;/FrameLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>My methods which I invokes in OnCreate method in fragment</p>\n\n<pre><code>private fun setAnimation() {\n    Log.i(TAG, \"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438\")\n    val drawable = AnimationUtils.loadAnimation(this.context, R.anim.rotate_anim)\n    mAnimationDescription?.setText(R.string.message_data_is_loading);\n    mAnimationImage?.startAnimation(drawable)\n}\n\nprivate fun initViewItems(view: View?) {\n    Log.i(TAG, \"\u041f\u043e\u0438\u0441\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 View\")\n    mAnimationDescription = view?.findView&lt;TextView&gt;(R.id.animation_description);\n    mAnimationImage = view?.findView&lt;ImageView&gt;(R.id.animation_logo);\n}\n</code></pre>\n\n<p>My rotate animation code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;rotate\n        android:duration=\"2000\"\n        android:fromDegrees=\"0\"\n        android:pivotX=\"50%\"\n        android:pivotY=\"50%\"\n        android:repeatCount=\"infinite\"\n        android:startOffset=\"0\"\n        android:toDegrees=\"360\" /&gt;\n&lt;/set&gt;\n</code></pre>\n\n<p>Here I attach my animation fragment to activity in OnCreate method</p>\n\n<pre><code>private var mTransaction: FragmentTransaction? = null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    attachFragment()\n}\n\nprivate fun attachFragment() {\n    mTransaction = supportFragmentManager.beginTransaction()\n    mTransaction?.add(R.id.main_activity_container, BusyFragment.newInstance(\"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u0442\u0443\"))\n    mTransaction?.commit()\n}\n</code></pre>\n\n<p>Where I need to invoke my start animation method?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["functional-programming", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1455971942, "post_id": 35522590, "comment_id": 58736348, "body": "please clarify the question (and the answer): did you want to apply a transformation to all elements except for two of them, or did you want to drop these two forever?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1455971996, "post_id": 35522590, "comment_id": 58736370, "body": "Please post the code that solved your problem (you may update the question). There is a good chance someone can suggest a shorter or more idiomatic way to do this."}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 4, "creation_date": 1455969729, "post_id": 35522608, "comment_id": 58735593, "body": "FYI: There is also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last.html\" rel=\"nofollow noreferrer\"><code>takeLast</code></a> if you actually want to &quot;take last n element in Kotlin&quot;."}, {"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1455972906, "post_id": 35522608, "comment_id": 58736657, "body": "takeLast is not showing up for me in the IDE. I called asSequence() on a Java Iterator."}], "tags": [], "owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "is_accepted": true, "score": 9, "last_activity_date": 1455967932, "creation_date": 1455967932, "answer_id": 35522608, "question_id": 35522590, "link": "https://stackoverflow.com/questions/35522590/take-last-n-element-in-kotlin/35522608#35522608", "title": "Take last n element in Kotlin", "body": "<p>Oh, I found the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/drop.html\" rel=\"noreferrer\">drop()</a> function.</p>\n"}, {"tags": [], "owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "is_accepted": false, "score": 10, "last_activity_date": 1519491171, "creation_date": 1519491171, "answer_id": 48965241, "question_id": 35522590, "link": "https://stackoverflow.com/questions/35522590/take-last-n-element-in-kotlin/48965241#48965241", "title": "Take last n element in Kotlin", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last.html\" rel=\"noreferrer\">takeLast(n)</a> like:</p>\n\n<pre><code>list.takeLast(3)\n</code></pre>\n\n<p>But be carful, the last number is represented first, so you may need to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reversed.html\" rel=\"noreferrer\">reversed</a> as well, so your code could be:</p>\n\n<pre><code>list.takeLast(3).reversed()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 4, "last_activity_date": 1519506192, "creation_date": 1519506192, "answer_id": 48967577, "question_id": 35522590, "link": "https://stackoverflow.com/questions/35522590/take-last-n-element-in-kotlin/48967577#48967577", "title": "Take last n element in Kotlin", "body": "<p>As already mentioned, <code>drop</code> is a good fit for the use case:</p>\n\n<pre><code>listOf(1,2,3,4).drop(2).forEach(::println)\n</code></pre>\n\n<p>Otherwise, you can also filter by index:</p>\n\n<pre><code>listOf(1,2,3,4).filterIndexed { index, _ -&gt; index &gt; 1 }.forEach(::println)\n</code></pre>\n"}], "owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4136, "favorite_count": 1, "accepted_answer_id": 35522608, "answer_count": 3, "score": 10, "last_activity_date": 1519506192, "creation_date": 1455967755, "question_id": 35522590, "link": "https://stackoverflow.com/questions/35522590/take-last-n-element-in-kotlin", "title": "Take last n element in Kotlin", "body": "<p>I have a list on which I'd like to apply some transformations, but excluding the first 2 elements. How can I do it the nicest way? Something like this:</p>\n\n<pre><code>list.reversed().take(list.size - 2)...(my transformations)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>list.excludeFirstN(2)...(my transformations)\n</code></pre>\n"}, {"tags": ["java", "concurrency", "kotlin"], "comments": [{"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "edited": false, "score": 0, "creation_date": 1455955957, "post_id": 35520583, "comment_id": 58731530, "body": "<a href=\"https://discuss.kotlinlang.org/t/concurrency-in-kotlin/858\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/concurrency-in-kotlin/858</a>"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 24, "creation_date": 1455957029, "post_id": 35520583, "comment_id": 58731772, "body": "Kotlin has synchronized blocks (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.ht&zwnj;&#8203;ml</a>), synchronized methods (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-synchronized/\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-synchroniz&zwnj;&#8203;ed</a>), volatile field (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/&hellip;</a>&zwnj;&#8203;). And it can use java.util.concurrent classes. What exactly are you looking for?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455964506, "post_id": 35520583, "comment_id": 58733976, "body": "You have more than one question here, you should focus on one topic.  What concurrency things do you think are missing, you specify something that sounds to me like it is NOT missing.  Then the other question isn&#39;t really a SO question and is opinion based (and is not a correct assertion)."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1477351468, "post_id": 35520583, "comment_id": 67721230, "body": "see: <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines</a> for updates to Kotlin coroutines"}], "answers": [{"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 1, "creation_date": 1455965480, "post_id": 35521983, "comment_id": 58734278, "body": "Any examples? cos if i write synchronize on method it just wont take it... same with volatile..."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 2, "creation_date": 1455965595, "post_id": 35521983, "comment_id": 58734321, "body": "@vach I gave links in my comment, under your question. Synchronized and Volatile are annotations."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1455968889, "post_id": 35521983, "comment_id": 58735343, "body": "@vach if you have code you tried, it should be included in your question along with any error message."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1455969010, "post_id": 35521983, "comment_id": 58735381, "body": "@JBNizet I merged in your links"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 1, "creation_date": 1455969268, "post_id": 35521983, "comment_id": 58735457, "body": "@vach I added a quick sample of annotations related to this question, things like <code>CountDownLatch</code> just port Java samples, or for Kovenant, view the docs for the lib."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1455969762, "post_id": 35521983, "comment_id": 58735611, "body": "Added more links in the answer @vach"}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1482117245, "post_id": 35521983, "comment_id": 69629399, "body": "Thanks for updating the answer, newcomers will appreciate ;)"}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1496974710, "post_id": 35521983, "comment_id": 75893781, "body": "I dont think kotlin reserved async await, those are not keywords but library functions so any one is free to use those identifiers... @JaysonMinard maybe fix your update?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 327, "user_id": 1598298, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b1f5aeac70cf6913fd6288bfafaa4edf?s=128&d=identicon&r=PG", "display_name": "Key Lay", "link": "https://stackoverflow.com/users/1598298/key-lay"}, "edited": false, "score": 0, "creation_date": 1573923036, "post_id": 35521983, "comment_id": 104051181, "body": "@KeyLay they are only deprecated in the COMMON stdlib, and still are valid for JVM and JS versions of the standard library and will not be deprecated there."}, {"owner": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1581628542, "post_id": 35521983, "comment_id": 106510837, "body": "+1 Kotlin for having an annotation and a keyword with the same name. Couldn&#39;t we just have written <code>synchronized fun foo() ...</code> ffs?"}, {"owner": {"reputation": 512, "user_id": 12357035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XT9DZ.png?s=128&g=1", "display_name": "Sourav Kannantha B", "link": "https://stackoverflow.com/users/12357035/sourav-kannantha-b"}, "reply_to_user": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1618639800, "post_id": 35521983, "comment_id": 118667825, "body": "@JeffreyBlattman <code>synchronized</code> is a keyword in Java, not in kotlin. This answer says that the annotation <code>@Synchronized</code> maps to Java&#39;s <code>synchronized</code> keyword in JVM."}, {"owner": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1618757882, "post_id": 35521983, "comment_id": 118693421, "body": "Yes, I&#39;m pointing out that having to use an annotation in Kotlin makes it feel like synchronization is an afterthought."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1618852302, "post_id": 35521983, "comment_id": 118722730, "body": "Look at @JeffreyBlattman Kotlin CoRoutines for other models of working with shared resources, synchronization, etc.  This is the intended path, whereas the annotation is for when not coding to the coroutine model and using the VM model."}, {"owner": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1618948488, "post_id": 35521983, "comment_id": 118756439, "body": "@JaysonMinard Coroutines have nothing at all do to with semaphores / synchronization. You have all the same problems in that regard whether you&#39;re using Coroutines or a thread. In almost all cases the use of coroutines is equivalent to using a thread, unless you are using, or are writing your own native backend for the library and can take advantage of non-blocking IO at the OS level."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 20854, "user_id": 337455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3bf01a4e4d860421eda82368b01fa6d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Blattman", "link": "https://stackoverflow.com/users/337455/jeffrey-blattman"}, "edited": false, "score": 0, "creation_date": 1618963012, "post_id": 35521983, "comment_id": 118760178, "body": "@JeffreyBlattman I&#39;m referring to other patterns that Kotlin focuses on instead of making <code>synchronized</code> the preferred way of doing concurrent programming, it pushes it aside a bit and favors other models, including actors, flows, coroutines, ... Something to consider if you don&#39;t think it values <code>synchronized</code> heavily by making it an annotation over a keyword."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 150, "last_activity_date": 1512316591, "last_edit_date": 1512316591, "creation_date": 1455964409, "answer_id": 35521983, "question_id": 35520583, "link": "https://stackoverflow.com/questions/35520583/why-there-are-no-concurrency-keywords-in-kotlin/35521983#35521983", "title": "Why there are no concurrency keywords in Kotlin?", "body": "<p><a href=\"https://blog.jetbrains.com/kotlin/2017/03/kotlin-1-1/\" rel=\"noreferrer\">Kotlin 1.1 with Coroutines was released</a> and it brings with it <code>async..await</code>!  Read more about it in <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"noreferrer\">Kotlin reference docs</a>, <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"noreferrer\">Kotlinx Coroutines library</a> and this great in depth <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"noreferrer\">Couroutines by Example</a></p>\n\n<p><strong>Outside of the Kotlin Coroutines, you have these options:</strong></p>\n\n<ul>\n<li>the <a href=\"http://kovenant.komponents.nl/\" rel=\"noreferrer\">Kovenant library</a> adds Promises to Kotlin</li>\n<li>the <a href=\"http://docs.paralleluniverse.co/quasar/\" rel=\"noreferrer\">Quasar library</a> provides light-weight threads and continuations</li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-synchronized/\" rel=\"noreferrer\"><code>@Synchronized</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/index.html\" rel=\"noreferrer\"><code>@Volatile</code></a> annotations which map directly to the same keywords in Java</li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\" rel=\"noreferrer\"><code>synchronized</code> blocks</a> which in Kotlin come from an inline function <code>synchronized()</code>.</li>\n<li>Kotlin has a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/index.html\" rel=\"noreferrer\"><code>Kotlin.concurrent</code> package and extensions</a> with new functions and also extensions to JDK classes.</li>\n<li>you can access anything in the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent</code> package</a> such as <code>ConcurrentHashMap</code>, <code>CountdownLatch</code>, <code>CyclicBarrier</code>, <code>Semaphore</code>, ...</li>\n<li>you can access anything in the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent.locks</code> package</a> and Kotlin has <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/index.html\" rel=\"noreferrer\">extensions for a few of these</a> including the cool <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-lock/with-lock.html\" rel=\"noreferrer\"><code>withLock()</code> extension function</a> and similar <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-reentrant-read-write-lock/index.html\" rel=\"noreferrer\"><code>read</code>/<code>write</code> extensions</a> for <code>ReentrantReadWriteLock</code>. </li>\n<li>you can access anything in the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent.atomic</code> package</a> such as <code>AtomicReference</code>, <code>AtomicLong</code>, ...</li>\n<li>you can use <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#waitnotify\" rel=\"noreferrer\"><code>wait</code> and <code>notify</code> on objects</a></li>\n</ul>\n\n<p>You have everything Java has and more.  Your phrase <em>\"synchronization and locks\"</em> is satisfied by the list above, and then you have even more and without language changes.  Any language features would only make it a bit prettier.  </p>\n\n<p>So you can have 100% Kotlin code, using the small Kotlin runtime, the JVM runtime from the JDK, and any other JVM library you want to use.  No need for Java code, just Java (as-in JVM) libraries.</p>\n\n<p>A quick sample of some features:</p>\n\n<pre><code>class SomethingSyncd {\n    @Synchronized fun syncFoo() {\n\n    }\n\n    val myLock = Any()\n\n    fun foo() {\n        synchronized(myLock) {\n            // ... code\n        }\n    }\n\n    @Volatile var thing = mapOf(...)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "is_accepted": false, "score": 5, "last_activity_date": 1614510843, "last_edit_date": 1614510843, "creation_date": 1579164147, "answer_id": 59765770, "question_id": 35520583, "link": "https://stackoverflow.com/questions/35520583/why-there-are-no-concurrency-keywords-in-kotlin/59765770#59765770", "title": "Why there are no concurrency keywords in Kotlin?", "body": "<p>I'll answer my own question since actual answer to my question was somewhere deep in kotlin discussions.</p>\n<p>What confused me at the time coming from Java was that concurrency keywords were not language keywords they were annotations? to me it seemed strange that important concepts like synchronization were handled through annotations, but now it makes perfect sense. Kotlin is going in the direction of being a platform agnostic language, it's not going to only work on JVM but pretty much anything. So synchronized and volatile were very specific to JVM, they might not be needed in javascript for example.</p>\n<p>In a nutshell Kotlin has everything Java has (except package visibility) and much more, a huge difference that no other language has is coroutines. But there is nothing you can write in Java that you cant do in Kotlin... (as far as I am aware)</p>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45945, "favorite_count": 43, "accepted_answer_id": 35521983, "answer_count": 2, "score": 85, "last_activity_date": 1614510843, "creation_date": 1455954672, "last_edit_date": 1558299115, "question_id": 35520583, "link": "https://stackoverflow.com/questions/35520583/why-there-are-no-concurrency-keywords-in-kotlin", "title": "Why there are no concurrency keywords in Kotlin?", "body": "<p>Why there are no keywords for synchronization/concurrency?</p>\n\n<p>So far my research gives me one solution, you wrap some high level classes and use them to handle concurrency.</p>\n\n<p>Given a project in pure Kotlin, what one shall do if there is a need for a small highly optimized component that handles concurrency etc?</p>\n\n<p>My impression is that Kotlin is an assisting language for Java, to write 90% of the code in Kotlin but have some java code that is not possible to express with Kotlin.</p>\n\n<p>Is this right? Is this how it was intended to be?</p>\n"}, {"tags": ["kotlin", "lombok", "println"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1455949103, "post_id": 35517325, "comment_id": 58729952, "body": "did you use <code>kapt</code>? <a href=\"http://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/06/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1455965077, "post_id": 35517325, "comment_id": 58734152, "body": "As @voddan points out, you do not provide enough information about what you have tried to use to resolve this.  Also if you tried Kapt, is it within one module or multiple modules."}, {"owner": {"reputation": 5023, "user_id": 29734, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c4ef4105fd732cafc3b6a89fd3b2cf16?s=128&d=identicon&r=PG", "display_name": "Chris Kessel", "link": "https://stackoverflow.com/users/29734/chris-kessel"}, "edited": false, "score": 3, "creation_date": 1456155286, "post_id": 35517325, "comment_id": 58803343, "body": "I wasn&#39;t aware, until &quot;kapt&quot; was mentioned, that there was anything available to try to resolve it. I read the JetBrains page &quot;java-interop&quot; repeatedly and couldn&#39;t find anything hinting at how to deal with it. IntelliJ doesn&#39;t flag it as an error in the editor, but compiling both in IntelliJ and with Gradle (via JetBrains kotlin gradle plugin) didn&#39;t work."}, {"owner": {"reputation": 9318, "user_id": 922584, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05766da42bea2cb7c9e185fa66be4725?s=128&d=identicon&r=PG", "display_name": "Vojt\u011bch", "link": "https://stackoverflow.com/users/922584/vojt%c4%9bch"}, "edited": false, "score": 1, "creation_date": 1492064554, "post_id": 35517325, "comment_id": 73831324, "body": "Did you manage to solve the issue with <code>kapt</code>? I would be interested to know."}], "answers": [{"comments": [{"owner": {"reputation": 5023, "user_id": 29734, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c4ef4105fd732cafc3b6a89fd3b2cf16?s=128&d=identicon&r=PG", "display_name": "Chris Kessel", "link": "https://stackoverflow.com/users/29734/chris-kessel"}, "edited": false, "score": 2, "creation_date": 1456155128, "post_id": 35530223, "comment_id": 58803206, "body": "Well, darn. Yea, I&#39;ve taken a chunk of Java in the middle of my program and migrated it to Kotlin specifically to see how Java-&gt;Kotlin-&gt;Java support will work. The goal being migrating code over time. However, we use Lombok heavily in all of our domain POJOs. Maybe I can hack a &quot;compilePOJOs&quot; target to run before compileJava."}, {"owner": {"reputation": 5023, "user_id": 29734, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c4ef4105fd732cafc3b6a89fd3b2cf16?s=128&d=identicon&r=PG", "display_name": "Chris Kessel", "link": "https://stackoverflow.com/users/29734/chris-kessel"}, "edited": false, "score": 2, "creation_date": 1456156327, "post_id": 35530223, "comment_id": 58804167, "body": "Sergey, is there JetBrains link/FAQ on how Kotlin looks at co-located Java code (same module)? Gradle does compileKotlin before compileJava, but obviously Kotlin knows about the Java code (aside from annotation preprocessing). Does the Kotlin compiler scan the Java code before compiling the .kt files?"}, {"owner": {"reputation": 1654, "user_id": 2138356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b5cfbdd95128b8feefe8c49299022af9?s=128&d=identicon&r=PG", "display_name": "fasth", "link": "https://stackoverflow.com/users/2138356/fasth"}, "edited": false, "score": 2, "creation_date": 1462031632, "post_id": 35530223, "comment_id": 61471597, "body": "You are not alone, we have Spring Roo generated POJO and Kotlin doesn&#39;t see them as well because of the same reason Sergey told."}, {"owner": {"reputation": 577, "user_id": 477055, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/445f1a655fdcdfee9572b63b34603318?s=128&d=identicon&r=PG", "display_name": "Billybong", "link": "https://stackoverflow.com/users/477055/billybong"}, "edited": false, "score": 24, "creation_date": 1487836766, "post_id": 35530223, "comment_id": 71966190, "body": "This is a real showstopper for us as well. We&#39;d like to introduce Kotlin in our apps that rely heavily on lombok Data classes and Builder&#39;s. It would be easy to dismiss this as &quot;what did I say about using lombok...&quot;, but the fact remains that this will stop many from looking into using Kotlin."}, {"owner": {"reputation": 771, "user_id": 1525835, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SZ4TC.jpg?s=128&g=1", "display_name": "Pedro Hidalgo", "link": "https://stackoverflow.com/users/1525835/pedro-hidalgo"}, "reply_to_user": {"reputation": 577, "user_id": 477055, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/445f1a655fdcdfee9572b63b34603318?s=128&d=identicon&r=PG", "display_name": "Billybong", "link": "https://stackoverflow.com/users/477055/billybong"}, "edited": false, "score": 2, "creation_date": 1495891370, "post_id": 35530223, "comment_id": 75445428, "body": "@Billybong Something that could help is to use DeLombok: <a href=\"https://projectlombok.org/features/delombok.html\" rel=\"nofollow noreferrer\">projectlombok.org/features/delombok.html</a> to be able to have the Java code generated by Lombok in the source code and then you will be able to remove Lombok from the project."}], "tags": [], "owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "is_accepted": true, "score": 69, "last_activity_date": 1456009701, "creation_date": 1456009701, "answer_id": 35530223, "question_id": 35517325, "link": "https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors/35530223#35530223", "title": "Kotlin doesn&#39;t see Java Lombok accessors?", "body": "<p>Generally, no, it doesn't. The reason of that behavior is that Lombok is an annotation processor for javac but when the kotlin compiler runs it uses javac as well but with no annotation processing so this is why kotlin don't see declarations that wasn't yet generated.</p>\n\n<p>The only workaround for now is to define strict compilation order: Java first and after that kotlin. Unfortunately this approach has great disadvantage: you can't use Kotlin code from Java in this case. To workaround it you may need multimodule project that may cause a lot of pain</p>\n"}, {"tags": [], "owner": {"reputation": 1138, "user_id": 5704808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd38a29cb602db0d7916ece60362df1?s=128&d=identicon&r=PG", "display_name": "Pavel S.", "link": "https://stackoverflow.com/users/5704808/pavel-s"}, "is_accepted": false, "score": 4, "last_activity_date": 1496233999, "creation_date": 1496233999, "answer_id": 44284945, "question_id": 35517325, "link": "https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors/44284945#44284945", "title": "Kotlin doesn&#39;t see Java Lombok accessors?", "body": "<p>As it was mentioned in comments above, delombok helps.\nIn case of maven build it would be:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${lombok.version}.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;delombok&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;delombok&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;formatPreferences&gt;\n                    &lt;javaLangAsFQN&gt;skip&lt;/javaLangAsFQN&gt;\n                &lt;/formatPreferences&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;test-delombok&lt;/id&gt;\n            &lt;phase&gt;generate-test-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;testDelombok&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 3717025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6194616945d9c5356bdfa51a5c5d27e2?s=128&d=identicon&r=PG&f=1", "display_name": "NKR", "link": "https://stackoverflow.com/users/3717025/nkr"}, "is_accepted": false, "score": 5, "last_activity_date": 1516818795, "creation_date": 1516818795, "answer_id": 48429385, "question_id": 35517325, "link": "https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors/48429385#48429385", "title": "Kotlin doesn&#39;t see Java Lombok accessors?", "body": "<p>To add to Sergey Mashkov's response (adding here I don't have enough rep points to comment on it), here's an <a href=\"https://github.com/rojiani/kotlin-lombok-integration\" rel=\"noreferrer\">example app</a> of a Gradle multi-project setup where Kotlin can see the Lombok-generated code (without kapt or delomboking. Caveats do apply - namely, Kotlin can call the Java code, but Java can't call the Kotlin code in that particular module (as this would create a circular dependency). This kind of build might be suitable if you have an existing Java codebase and all new code is written in Kotlin, though.</p>\n\n<p>I would love to see full Lombok/Kotlin support, however. While Kotlin is fully interoperable with Java, the reality is that Lombok is very widely used, and this issue may prevent a large number of developers who would like to switch to Kotlin from doing so. </p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 6279456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iXWcGC1Lr2o/AAAAAAAAAAI/AAAAAAAAAFI/WXhadBZdiCc/photo.jpg?sz=128", "display_name": "abgalphabet YEUNG", "link": "https://stackoverflow.com/users/6279456/abgalphabet-yeung"}, "is_accepted": false, "score": 2, "last_activity_date": 1524903656, "creation_date": 1524903656, "answer_id": 50074437, "question_id": 35517325, "link": "https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors/50074437#50074437", "title": "Kotlin doesn&#39;t see Java Lombok accessors?", "body": "<p>Looks like it works if you use delombok according to <a href=\"http://awhitford.github.io/lombok.maven/lombok-maven-plugin/usage.html\" rel=\"nofollow noreferrer\">site</a> and add the target/generated-sources/delombok folder in the pom.xml under build > plugins > plugin > kotlin-maven-plugin </p>\n"}], "owner": {"reputation": 5023, "user_id": 29734, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c4ef4105fd732cafc3b6a89fd3b2cf16?s=128&d=identicon&r=PG", "display_name": "Chris Kessel", "link": "https://stackoverflow.com/users/29734/chris-kessel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18220, "favorite_count": 9, "accepted_answer_id": 35530223, "answer_count": 4, "score": 73, "last_activity_date": 1524903656, "creation_date": 1455926620, "last_edit_date": 1496149322, "question_id": 35517325, "link": "https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors", "title": "Kotlin doesn&#39;t see Java Lombok accessors?", "body": "<p>Using Kotlin 1.0.0 release (compiling in IntelliJ 15).</p>\n\n<pre><code>println(myPojoInstance.foo)\n</code></pre>\n\n<p>When it tries to compile code (in IntelliJ or Gradle) that references Lombok based POJOs it gives the error \"Cannot access 'foo': it is 'private' in \"MyPojo\". Which is true, they're all private and my object has @Value @Builder for lombok annotations.</p>\n\n<p>I've tried specifically calling getFoo(), but it says \"unresolved reference for getFoo\". There's perhaps some trick to make Kotlin aware of how to handle the lombok annotations? </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455968070, "post_id": 35513636, "comment_id": 58735103, "body": "Do you want N items, not just 2?  Do all the items need the same type, or different types?  Should all values be passed into the function, as list, or as individual parameters?  Should the return value be a single item or a group of same number of items as input?"}, {"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456072788, "post_id": 35513636, "comment_id": 58766275, "body": "I need all arguments, can be two for this case but also wanted to know a way to do this for more, in swift is so easy."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456076328, "post_id": 35513636, "comment_id": 58767607, "body": "Are you looking for something different than the answers below, if so comment what is the difference you are seeking."}, {"owner": {"reputation": 1388, "user_id": 761668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T0pRJ.jpg?s=128&g=1", "display_name": "Javier Mendon&#231;a", "link": "https://stackoverflow.com/users/761668/javier-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1518700615, "post_id": 35513636, "comment_id": 84619272, "body": "How would it be to refer to the first &quot;it&quot; within the second let block?"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 12, "last_activity_date": 1531406373, "last_edit_date": 1531406373, "creation_date": 1455913744, "answer_id": 35514415, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/35514415#35514415", "title": "Multiple variable let in Kotlin", "body": "<p>You can write your own function for that:</p>\n\n<pre><code> fun &lt;T, U, R&gt; Pair&lt;T?, U?&gt;.biLet(body: (T, U) -&gt; R): R? {\n     val first = first\n     val second = second\n     if (first != null &amp;&amp; second != null) {\n         return body(first, second)\n     }\n     return null\n }\n\n (first to second).biLet { first, second -&gt; \n      // body\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1750, "user_id": 922340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467dbc096af931726258d3faaf66c4ae?s=128&d=identicon&r=PG", "display_name": "Moshe Bixenshpaner", "link": "https://stackoverflow.com/users/922340/moshe-bixenshpaner"}, "edited": false, "score": 0, "creation_date": 1610435416, "post_id": 35516174, "comment_id": 116124336, "body": "How do you keep the types of first and second if you pass them through an array?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 1750, "user_id": 922340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467dbc096af931726258d3faaf66c4ae?s=128&d=identicon&r=PG", "display_name": "Moshe Bixenshpaner", "link": "https://stackoverflow.com/users/922340/moshe-bixenshpaner"}, "edited": false, "score": 0, "creation_date": 1610670252, "post_id": 35516174, "comment_id": 116213162, "body": "You are correct. This is a shortcoming of this solution."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 7, "last_activity_date": 1560212376, "last_edit_date": 1560212376, "creation_date": 1455920541, "answer_id": 35516174, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/35516174#35516174", "title": "Multiple variable let in Kotlin", "body": "<p>You can create an <code>arrayIfNoNulls</code> function:</p>\n\n<pre><code>fun &lt;T : Any&gt; arrayIfNoNulls(vararg elements: T?): Array&lt;T&gt;? {\n    if (null in elements) {\n        return null\n    }\n    @Suppress(\"UNCHECKED_CAST\")\n    return elements as Array&lt;T&gt;\n}\n</code></pre>\n\n<p>You can then use it for a variable number of values with <code>let</code>:</p>\n\n<pre><code>fun example(first: String?, second: String?) {\n    arrayIfNoNulls(first, second)?.let { (first, second) -&gt;\n        // Do something if each element is not null\n    }\n}\n</code></pre>\n\n<p>If you already have an array you can create a <code>takeIfNoNulls</code> function (inspired by <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/take-if.html\" rel=\"nofollow noreferrer\"><code>takeIf</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/require-no-nulls.html\" rel=\"nofollow noreferrer\"><code>requireNoNulls</code></a>):</p>\n\n<pre><code>fun &lt;T : Any&gt; Array&lt;T?&gt;.takeIfNoNulls(): Array&lt;T&gt;? {\n    if (null in this) {\n        return null\n    }\n    @Suppress(\"UNCHECKED_CAST\")\n    return this as Array&lt;T&gt;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>array?.takeIfNoNulls()?.let { (first, second) -&gt;\n    // Do something if each element is not null\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 94, "user_id": 7650396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bddf6d6356138d11be36cdcb3c8e949?s=128&d=identicon&r=PG&f=1", "display_name": "dumptruckman", "link": "https://stackoverflow.com/users/7650396/dumptruckman"}, "edited": false, "score": 1, "creation_date": 1553703580, "post_id": 35522422, "comment_id": 97486054, "body": "You could also combine <code>whenAllNotNull</code> with destructuring like so: <code>listOf(a, b, c).whenAllNotNull { (d, e, f) -&gt; println(&quot;$d $e $f&quot;)</code>."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 168, "last_activity_date": 1580396250, "last_edit_date": 1580396250, "creation_date": 1455966884, "answer_id": 35522422, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/35522422#35522422", "title": "Multiple variable let in Kotlin", "body": "<p>Here are a few variations, depending on what style you will want to use, if you have everything of same or different types, and if the list unknown number of items...</p>\n\n<h2>Mixed types, all must not be null to calculate a new value</h2>\n\n<p>For mixed types you could build a series of functions for each parameter count that may look silly, but work nicely for mixed types:</p>\n\n<pre><code>inline fun &lt;T1: Any, T2: Any, R: Any&gt; safeLet(p1: T1?, p2: T2?, block: (T1, T2)-&gt;R?): R? {\n    return if (p1 != null &amp;&amp; p2 != null) block(p1, p2) else null\n}\ninline fun &lt;T1: Any, T2: Any, T3: Any, R: Any&gt; safeLet(p1: T1?, p2: T2?, p3: T3?, block: (T1, T2, T3)-&gt;R?): R? {\n    return if (p1 != null &amp;&amp; p2 != null &amp;&amp; p3 != null) block(p1, p2, p3) else null\n}\ninline fun &lt;T1: Any, T2: Any, T3: Any, T4: Any, R: Any&gt; safeLet(p1: T1?, p2: T2?, p3: T3?, p4: T4?, block: (T1, T2, T3, T4)-&gt;R?): R? {\n    return if (p1 != null &amp;&amp; p2 != null &amp;&amp; p3 != null &amp;&amp; p4 != null) block(p1, p2, p3, p4) else null\n}\ninline fun &lt;T1: Any, T2: Any, T3: Any, T4: Any, T5: Any, R: Any&gt; safeLet(p1: T1?, p2: T2?, p3: T3?, p4: T4?, p5: T5?, block: (T1, T2, T3, T4, T5)-&gt;R?): R? {\n    return if (p1 != null &amp;&amp; p2 != null &amp;&amp; p3 != null &amp;&amp; p4 != null &amp;&amp; p5 != null) block(p1, p2, p3, p4, p5) else null\n}\n// ...keep going up to the parameter count you care about\n</code></pre>\n\n<p><em>Example usage:</em></p>\n\n<pre><code>val risk = safeLet(person.name, person.age) { name, age -&gt;\n  // do something\n}   \n</code></pre>\n\n<h2>Execute block of code when list has no null items</h2>\n\n<p>Two flavours here, first to execute block of code when a list has all non null items, and second to do the same when a list has at least one not null item.  Both cases pass a list of non null items to the block of code:</p>\n\n<p><em>Functions:</em></p>\n\n<pre><code>fun &lt;T: Any, R: Any&gt; Collection&lt;T?&gt;.whenAllNotNull(block: (List&lt;T&gt;)-&gt;R) {\n    if (this.all { it != null }) {\n        block(this.filterNotNull()) // or do unsafe cast to non null collectino\n    }\n}\n\nfun &lt;T: Any, R: Any&gt; Collection&lt;T?&gt;.whenAnyNotNull(block: (List&lt;T&gt;)-&gt;R) {\n    if (this.any { it != null }) {\n        block(this.filterNotNull())\n    }\n}\n</code></pre>\n\n<p><em>Example usage:</em></p>\n\n<pre><code>listOf(\"something\", \"else\", \"matters\").whenAllNotNull {\n    println(it.joinToString(\" \"))\n} // output \"something else matters\"\n\nlistOf(\"something\", null, \"matters\").whenAllNotNull {\n    println(it.joinToString(\" \"))\n} // no output\n\nlistOf(\"something\", null, \"matters\").whenAnyNotNull {\n    println(it.joinToString(\" \"))\n} // output \"something matters\"\n</code></pre>\n\n<p>A slight change to have the function receive the list of items and do the same operations:</p>\n\n<pre><code>fun &lt;T: Any, R: Any&gt; whenAllNotNull(vararg options: T?, block: (List&lt;T&gt;)-&gt;R) {\n    if (options.all { it != null }) {\n        block(options.filterNotNull()) // or do unsafe cast to non null collection\n    }\n}\n\nfun &lt;T: Any, R: Any&gt; whenAnyNotNull(vararg options: T?, block: (List&lt;T&gt;)-&gt;R) {\n    if (options.any { it != null }) {\n        block(options.filterNotNull())\n    }\n}\n</code></pre>\n\n<p><em>Example usage:</em></p>\n\n<pre><code>whenAllNotNull(\"something\", \"else\", \"matters\") {\n    println(it.joinToString(\" \"))\n} // output \"something else matters\"\n</code></pre>\n\n<p>These variations could be changed to have return values like <code>let()</code>.</p>\n\n<h2>Use the first non-null item (Coalesce)</h2>\n\n<p>Similar to a SQL Coalesce function, return the first non null item.  Two flavours of the function: </p>\n\n<pre><code>fun &lt;T: Any&gt; coalesce(vararg options: T?): T? = options.firstOrNull { it != null }\nfun &lt;T: Any&gt; Collection&lt;T?&gt;.coalesce(): T? = this.firstOrNull { it != null }\n</code></pre>\n\n<p><em>Example usage:</em></p>\n\n<pre><code>coalesce(null, \"something\", null, \"matters\")?.let {\n    it.length\n} // result is 9, length of \"something\"\n\nlistOf(null, \"something\", null, \"matters\").coalesce()?.let {\n    it.length\n}  // result is 9, length of \"something\"\n</code></pre>\n\n<h2>Other variations</h2>\n\n<p>...There are other variations, but with more of a specification this could be narrowed down.</p>\n"}, {"comments": [{"owner": {"reputation": 11131, "user_id": 1118475, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9f44a846a6337e4868ce0c8951fc246a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Klimczak", "link": "https://stackoverflow.com/users/1118475/micha%c5%82-klimczak"}, "edited": false, "score": 39, "creation_date": 1499426851, "post_id": 44805183, "comment_id": 76913845, "body": "It won&#39;t be enough when dealing with a mutable class member."}, {"owner": {"reputation": 374, "user_id": 749427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18bf265de19d32ab20fde4344065afaf?s=128&d=identicon&r=PG", "display_name": "Alejandro Moya", "link": "https://stackoverflow.com/users/749427/alejandro-moya"}, "edited": false, "score": 3, "creation_date": 1540339137, "post_id": 44805183, "comment_id": 92825797, "body": "No need to give this kind of answer, the intention of the question is to find a more &quot;productive way&quot; of handling this, since the language provides the <code>let</code> shortcut to do these checks"}, {"owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 2, "creation_date": 1585930129, "post_id": 44805183, "comment_id": 107946909, "body": "In terms of maintainability, this is my choice, even if tis not as elegant. This is clearly an issue that everyone runs across all the time, and the language should deal with."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1600162989, "post_id": 44805183, "comment_id": 112994337, "body": "Given the function parameter is not-mutable (as per the question), using <code>let</code> is not ideal as it introduces unnecessary temp variables, hence check null directly is straightforward and more efficient as @Gzegorz shared. <a href=\"https://medium.com/mobile-app-development-publication/kotlin-dont-just-use-let-7e91f544e27f?source=friends_link&amp;sk=6d8d04c5c00613f20e20fe057b3ebd51\" rel=\"nofollow noreferrer\">medium.com/mobile-app-development-publication/&hellip;</a> Upvote the answer."}, {"owner": {"reputation": 3165, "user_id": 2607567, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/N0v8Y.png?s=128&g=1", "display_name": "JacksOnF1re", "link": "https://stackoverflow.com/users/2607567/jacksonf1re"}, "edited": false, "score": 0, "creation_date": 1606774169, "post_id": 44805183, "comment_id": 115059065, "body": "I actually don&#39;t get why everybody tries to invent the most complicated, unreadable super extension function or whatsoever. I think if you need a class holding 50 variations of a method using overrides and other magic...that might indicate a big code smell. Keep it simple and stupid."}], "tags": [], "owner": {"reputation": 1494, "user_id": 1635803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIXgO.jpg?s=128&g=1", "display_name": "Grzegorz D.", "link": "https://stackoverflow.com/users/1635803/grzegorz-d"}, "is_accepted": false, "score": 5, "last_activity_date": 1499200199, "last_edit_date": 1499200199, "creation_date": 1498659579, "answer_id": 44805183, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/44805183#44805183", "title": "Multiple variable let in Kotlin", "body": "<p>Actually, you can simply do this, you know? ;)</p>\n\n<pre><code>if (first != null &amp;&amp; second != null) {\n    // your logic here...\n}\n</code></pre>\n\n<p>There's nothing wrong in using a normal null-check in Kotlin.</p>\n\n<p>And it's far more readable for everyone who will look into your code.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5210985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mfAoz5fMEeE/AAAAAAAAAAI/AAAAAAAAAnI/4Ukm73UBr1o/photo.jpg?sz=128", "display_name": "Jonas Hansson", "link": "https://stackoverflow.com/users/5210985/jonas-hansson"}, "is_accepted": false, "score": 3, "last_activity_date": 1499272129, "last_edit_date": 1499272129, "creation_date": 1499243963, "answer_id": 44921077, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/44921077#44921077", "title": "Multiple variable let in Kotlin", "body": "<p>For the case of just checking two values and also not having to work with lists:</p>\n\n<pre><code>fun &lt;T1, T2&gt; ifNotNull(value1: T1?, value2: T2?, bothNotNull: (T1, T2) -&gt; (Unit)) {\n    if (value1 != null &amp;&amp; value2 != null) {\n        bothNotNull(value1, value2)\n    }\n}\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>var firstString: String?\nvar secondString: String?\nifNotNull(firstString, secondString) { first, second -&gt; Log.d(TAG, \"$first, $second\") }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 749427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18bf265de19d32ab20fde4344065afaf?s=128&d=identicon&r=PG", "display_name": "Alejandro Moya", "link": "https://stackoverflow.com/users/749427/alejandro-moya"}, "is_accepted": false, "score": 0, "last_activity_date": 1551847041, "last_edit_date": 1551847041, "creation_date": 1551846714, "answer_id": 55015612, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/55015612#55015612", "title": "Multiple variable let in Kotlin", "body": "<p>For any amount of values to be checked you can use this:</p>\n\n<pre><code>    fun checkNulls(vararg elements: Any?, block: (Array&lt;*&gt;) -&gt; Unit) {\n        elements.forEach { if (it == null) return }\n        block(elements.requireNoNulls())\n    }\n</code></pre>\n\n<p>And it will be used like this:</p>\n\n<pre><code>    val dada: String? = null\n    val dede = \"1\"\n\n    checkNulls(dada, dede) { strings -&gt;\n\n    }\n</code></pre>\n\n<p>the elements sent to the block are using the wildcard, you need to check the types if you want to access the values, if you need to use just one type you could mutate this to generics</p>\n"}, {"tags": [], "owner": {"reputation": 1750, "user_id": 922340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467dbc096af931726258d3faaf66c4ae?s=128&d=identicon&r=PG", "display_name": "Moshe Bixenshpaner", "link": "https://stackoverflow.com/users/922340/moshe-bixenshpaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1552933967, "creation_date": 1552933967, "answer_id": 55227934, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/55227934#55227934", "title": "Multiple variable let in Kotlin", "body": "<p>I actually prefer to solve it using the following helper functions:</p>\n\n<pre><code>fun &lt;A, B&gt; T(tuple: Pair&lt;A?, B?&gt;): Pair&lt;A, B&gt;? =\n    if(tuple.first == null || tuple.second == null) null\n    else Pair(tuple.first!!, tuple.second!!)\n\nfun &lt;A, B, C&gt; T(tuple: Triple&lt;A?, B?, C?&gt;): Triple&lt;A, B, C&gt;? =\n    if(tuple.first == null || tuple.second == null || tuple.third == null) null\n    else Triple(tuple.first!!, tuple.second!!, tuple.third!!)\n\n\nfun &lt;A, B&gt; T(first: A?, second: B?): Pair&lt;A, B&gt;? =\n    if(first == null || second == null) null\n    else Pair(first, second)\n\nfun &lt;A, B, C&gt; T(first: A?, second: B?, third: C?): Triple&lt;A, B, C&gt;? =\n        if(first == null || second == null || third == null) null\n        else Triple(first, second, third)\n</code></pre>\n\n<p>And here's how you should use them:</p>\n\n<pre><code>val a: A? = someValue\nval b: B? = someOtherValue\nT(a, b)?.let { (a, b) -&gt;\n  // Shadowed a and b are of type a: A and b: B\n  val c: C? = anotherValue\n  T(a, b, c)\n}?.let { (a, b, c) -&gt;\n  // Shadowed a, b and c are of type a: A, b: B and c: C\n  .\n  .\n  .\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 0, "creation_date": 1565695131, "post_id": 55736101, "comment_id": 101425136, "body": "This is very nice, but I am still missing a case where I can use the first input in the second. Example: ifLet(&quot;A&quot;, toLower(first)) { //first = &quot;A&quot;, second = &quot;a&quot; }"}, {"owner": {"reputation": 1226, "user_id": 6034789, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UGhQhvHiunU/AAAAAAAAAAI/AAAAAAAAErM/uy8tvghYuaY/photo.jpg?sz=128", "display_name": "Dario Pellegrini", "link": "https://stackoverflow.com/users/6034789/dario-pellegrini"}, "reply_to_user": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 0, "creation_date": 1567081693, "post_id": 55736101, "comment_id": 101862441, "body": "Cause in the ifLet statement the first argument is not yet been unwrapped, a function like your is not possible. Can I suggest to use guardLet? It&#39;s pretty straight forward. val (first) = guardLet(100) { return } val (second) = guardLet(101) { return } val average = average(first, second)  I know that is not what&#39;s you asked, but hope it helps."}, {"owner": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 0, "creation_date": 1567418886, "post_id": 55736101, "comment_id": 101946578, "body": "Thanks. I have multiple ways of solving this, the reason for saying is that in Swift its possible to have multiple ifLets after each others separated by comma and they can use the variables of the previous check. I wish this was possible in Kotlin as well. :)"}, {"owner": {"reputation": 1114, "user_id": 4288054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533bf09b3df304c8065443995cdb6f77?s=128&d=identicon&r=PG", "display_name": "Oleksandr Albul", "link": "https://stackoverflow.com/users/4288054/oleksandr-albul"}, "edited": false, "score": 1, "creation_date": 1569897297, "post_id": 55736101, "comment_id": 102735252, "body": "It could be accepted answer, but there is overhead on every call. Because vm creates Function object firstly. Also considering dex limitation, this will add Function class declaration with 2 method references for every unique checks."}, {"owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "reply_to_user": {"reputation": 1114, "user_id": 4288054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533bf09b3df304c8065443995cdb6f77?s=128&d=identicon&r=PG", "display_name": "Oleksandr Albul", "link": "https://stackoverflow.com/users/4288054/oleksandr-albul"}, "edited": false, "score": 1, "creation_date": 1600200070, "post_id": 55736101, "comment_id": 113011691, "body": "@OleksandrAlbul That is not correct. The vm does not create the function object becuase the function and all its passed in lambdas are inlined. Therefor their internal code is copied at compile time to wherever the function is used. The only overhead comes from the varargs which creates a collection."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1600269474, "post_id": 55736101, "comment_id": 113036302, "body": "Maybe I&#39;m wrong, but it looks like for example when you pass different types into these functions, T will be deduced as any. So, the lambda variables first, second, third, are of type Any, which means you need to cast them back to do anything useful with them."}, {"owner": {"reputation": 21760, "user_id": 135138, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd77158d351bb2b706799f98868a783?s=128&d=identicon&r=PG", "display_name": "Tim Sylvester", "link": "https://stackoverflow.com/users/135138/tim-sylvester"}, "edited": false, "score": 0, "creation_date": 1615576926, "post_id": 55736101, "comment_id": 117743532, "body": "Making the return type <code>Unit?</code> and returning the closure result and null in the else condition allows for conditional chaining, e.g., <code>ifLet(...) { ... } ?: run { &lt;otherwise&gt; }</code>   in full:  <code>inline fun &lt;T: Any&gt; ifLet(vararg args: T?, closure: (List&lt;T&gt;) -&gt; Unit): Unit? = if (args.all { it != null }) closure(args.filterNotNull()) else null</code>"}], "tags": [], "owner": {"reputation": 1226, "user_id": 6034789, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UGhQhvHiunU/AAAAAAAAAAI/AAAAAAAAErM/uy8tvghYuaY/photo.jpg?sz=128", "display_name": "Dario Pellegrini", "link": "https://stackoverflow.com/users/6034789/dario-pellegrini"}, "is_accepted": true, "score": 67, "last_activity_date": 1555535852, "creation_date": 1555535852, "answer_id": 55736101, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/55736101#55736101", "title": "Multiple variable let in Kotlin", "body": "<p>If interested here are two of my functions for solving this.</p>\n\n<pre><code>inline fun &lt;T: Any&gt; guardLet(vararg elements: T?, closure: () -&gt; Nothing): List&lt;T&gt; {\n    return if (elements.all { it != null }) {\n        elements.filterNotNull()\n    } else {\n        closure()\n    }\n}\n\ninline fun &lt;T: Any&gt; ifLet(vararg elements: T?, closure: (List&lt;T&gt;) -&gt; Unit) {\n    if (elements.all { it != null }) {\n        closure(elements.filterNotNull())\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>\n// Will print\nval (first, second, third) = guardLet(\"Hello\", 3, Thing(\"Hello\")) { return }\nprintln(first)\nprintln(second)\nprintln(third)\n\n// Will return\nval (first, second, third) = guardLet(\"Hello\", null, Thing(\"Hello\")) { return }\nprintln(first)\nprintln(second)\nprintln(third)\n\n// Will print\nifLet(\"Hello\", \"A\", 9) {\n (first, second, third) -&gt;\n println(first)\n println(second)\n println(third)\n}\n\n// Won't print\nifLet(\"Hello\", 9, null) {\n (first, second, third) -&gt;\n println(first)\n println(second)\n println(third)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 1611103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee8639f3cfde08e8a933aacaab816b5?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1611103/jon"}, "is_accepted": false, "score": 1, "last_activity_date": 1572365637, "creation_date": 1572365637, "answer_id": 58611398, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/58611398#58611398", "title": "Multiple variable let in Kotlin", "body": "<p>I solved this by creating some functions that more or less replicates the behavior of with, but takes multiple parameters and only invokes the function of all the parameters is non-null.</p>\n\n<pre><code>fun &lt;R, A, B&gt; withNoNulls(p1: A?, p2: B?, function: (p1: A, p2: B) -&gt; R): R? = p1?.let { p2?.let { function.invoke(p1, p2) } }\nfun &lt;R, A, B, C&gt; withNoNulls(p1: A?, p2: B?, p3: C?, function: (p1: A, p2: B, p3: C) -&gt; R): R? = p1?.let { p2?.let { p3?.let { function.invoke(p1, p2, p3) } } }\nfun &lt;R, A, B, C, D&gt; withNoNulls(p1: A?, p2: B?, p3: C?, p4: D?, function: (p1: A, p2: B, p3: C, p4: D) -&gt; R): R? = p1?.let { p2?.let { p3?.let { p4?.let { function.invoke(p1, p2, p3, p4) } } } }\nfun &lt;R, A, B, C, D, E&gt; withNoNulls(p1: A?, p2: B?, p3: C?, p4: D?, p5: E?, function: (p1: A, p2: B, p3: C, p4: D, p5: E) -&gt; R): R? = p1?.let { p2?.let { p3?.let { p4?.let { p5?.let { function.invoke(p1, p2, p3, p4, p5) } } } } }\n</code></pre>\n\n<p>Then I use it like this:</p>\n\n<pre><code>withNoNulls(\"hello\", \"world\", Throwable(\"error\")) { p1, p2, p3 -&gt;\n    p3.printStackTrace()\n    p1.plus(\" \").plus(p2)\n}?.let {\n    Log.d(\"TAG\", it)\n} ?: throw Exception(\"One or more parameters was null\")\n</code></pre>\n\n<p>The obvious issue with this is that I have to define a function for each case (number of variables) I need, but at least I think the code looks clean when using them.</p>\n"}, {"comments": [{"owner": {"reputation": 1910, "user_id": 3977548, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/j6Npf.jpg?s=128&g=1", "display_name": "Peter Graham", "link": "https://stackoverflow.com/users/3977548/peter-graham"}, "edited": false, "score": 1, "creation_date": 1588893081, "post_id": 60175707, "comment_id": 109084147, "body": "The compiler will still complain that it can&#39;t guarantee that the vars are not null"}], "tags": [], "owner": {"reputation": 138, "user_id": 4792971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Styl5u4Tzx0/AAAAAAAAAAI/AAAAAAAAAVI/QcZXxDaq0_Q/photo.jpg?sz=128", "display_name": "Amy Eubanks", "link": "https://stackoverflow.com/users/4792971/amy-eubanks"}, "is_accepted": false, "score": 1, "last_activity_date": 1581447613, "creation_date": 1581447613, "answer_id": 60175707, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/60175707#60175707", "title": "Multiple variable let in Kotlin", "body": "<p>You could also do this </p>\n\n<pre><code>if (listOfNotNull(var1, var2, var3).size == 3) {\n        // All variables are non-null\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 0, "creation_date": 1586733231, "post_id": 61167660, "comment_id": 108230482, "body": "Thats cool, but the parameters are not named and should share the type."}], "tags": [], "owner": {"reputation": 31, "user_id": 13146484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k3ShlDKM5V8/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNvvEjIpROkwmBIWqNVNlnRQ15Sug/photo.jpg?sz=128", "display_name": "yohai knaani", "link": "https://stackoverflow.com/users/13146484/yohai-knaani"}, "is_accepted": false, "score": 3, "last_activity_date": 1586672860, "creation_date": 1586672860, "answer_id": 61167660, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/61167660#61167660", "title": "Multiple variable let in Kotlin", "body": "<p>I have upgraded the expected answer a bit:</p>\n\n<pre><code>inline fun &lt;T: Any, R: Any&gt; ifLet(vararg elements: T?, closure: (List&lt;T&gt;) -&gt; R): R? {\n    return if (elements.all { it != null }) {\n        closure(elements.filterNotNull())\n    } else null\n}\n</code></pre>\n\n<p>this makes this possible:</p>\n\n<pre><code>iflet(\"first\", \"sconed\") {\n    // do somehing\n} ?: run {\n    // do this if one of the params are null\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12528320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef7a1f6ab310699128d6a6f01ebca69?s=128&d=identicon&r=PG&f=1", "display_name": "blanNL", "link": "https://stackoverflow.com/users/12528320/blannl"}, "is_accepted": false, "score": 1, "last_activity_date": 1604770839, "creation_date": 1604770839, "answer_id": 64730613, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/64730613#64730613", "title": "Multiple variable let in Kotlin", "body": "<p>one more idea based on the answer by @yole</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T, U, R&gt; Pair&lt;T?, U?&gt;.toLet(body: (List&lt;*&gt;) -&gt; R): R? {\n    val one = first\n    val two = second\n    if (one == null || two == null)\n        return null\n    return if (one is Pair&lt;*, *&gt;) {\n        one.toLet { a -&gt;\n            body(listOf(a, listOf(two)).flatten())\n        }\n    } else {\n        body(listOf(one, two))\n    }\n}\n</code></pre>\n<p>so you can do the following</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>(1 to 6 to &quot;a&quot; to 4.5).toLet { (a, b, c, d) -&gt;\n    // Rest of code\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 636400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7td1u.jpg?s=128&g=1", "display_name": "Luca Piccinelli", "link": "https://stackoverflow.com/users/636400/luca-piccinelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1608475704, "creation_date": 1608475704, "answer_id": 65381135, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/65381135#65381135", "title": "Multiple variable let in Kotlin", "body": "<p>maybe it is a little late. But now it exist a library that addresses this specific need. It is <a href=\"https://github.com/lucapiccinelli/konad\" rel=\"nofollow noreferrer\">Konad</a>; have look at the <a href=\"https://github.com/lucapiccinelli/konad#maybe\" rel=\"nofollow noreferrer\">maybe section</a></p>\n<p>I will report here an example usage from the doc:</p>\n<pre><code>val foo: Int? = 1\nval bar: String? = &quot;2&quot;\nval baz: Float? = 3.0f\n\nfun useThem(x: Int, y: String, z: Float): Int = x + y.toInt() + z.toInt()\n\nval result: Int? = ::useThem.curry() \n   .on(foo.maybe) \n   .on(bar.maybe) \n   .on(baz.maybe)\n   .nullable\n\n// or even \n\nval result: Result&lt;Int&gt; = ::useThem.curry() \n   .on(foo.ifNull(&quot;Foo should not be null&quot;)) \n   .on(bar.ifNull(&quot;Bar should not be null&quot;)) \n   .on(baz.ifNull(&quot;Baz should not be null&quot;))\n   .result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 4735418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TnSL20EP98E/AAAAAAAAAAI/AAAAAAAAAKc/F9y-IxIE0OI/photo.jpg?sz=128", "display_name": "Max Cruz", "link": "https://stackoverflow.com/users/4735418/max-cruz"}, "is_accepted": false, "score": 6, "last_activity_date": 1609605977, "creation_date": 1609605977, "answer_id": 65541606, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin/65541606#65541606", "title": "Multiple variable let in Kotlin", "body": "<p>I like the idea of using a list filtering the null values, I usually do something similar when I'm working with the same type, but when there are multiple types, to avoid the values parsed as <code>Any</code>, I just do something like this</p>\n<pre><code>fun someFunction() {\n    val value1: String = this.value1 ?: return\n    val value2: Int = this.value2 ?: return\n    ...\n }\n</code></pre>\n<p>It works and for me is important keep the type safety</p>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39343, "favorite_count": 32, "accepted_answer_id": 55736101, "answer_count": 14, "score": 154, "last_activity_date": 1609605977, "creation_date": 1455910943, "question_id": 35513636, "link": "https://stackoverflow.com/questions/35513636/multiple-variable-let-in-kotlin", "title": "Multiple variable let in Kotlin", "body": "<p>Is there any way to chain multiple lets for multiple nullable variables in kotlin?</p>\n\n<pre><code>fun example(first: String?, second: String?) {\n    first?.let {\n        second?.let {\n            // Do something just if both are != null\n        }\n    }\n}\n</code></pre>\n\n<p>I mean, something like this:</p>\n\n<pre><code>fun example(first: String?, second: String?) {\n    first?.let &amp;&amp; second?.let { \n        // Do something just if both are != null\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "ormlite", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1455896745, "post_id": 35509154, "comment_id": 58709420, "body": "I tried it with JPA, and it doesn&#39;t work with Kotlin quite well, here&#39;s my question about it: <a href=\"http://stackoverflow.com/questions/32038177/kotlin-with-jpa-default-constructor-hell\" title=\"kotlin with jpa default constructor hell\">stackoverflow.com/questions/32038177/&hellip;</a>. Don&#39;t know about Ormlite though, and would be glad if it does."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455901553, "post_id": 35509154, "comment_id": 58712551, "body": "Can you explain how Ormlite uses classes?  does it construct them, if so does it need an empty default constructor?  Did you try an experiment?"}], "answers": [{"tags": [], "owner": {"reputation": 5154, "user_id": 488704, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56d47d2256d26d41ad752ba1bb41748d?s=128&d=identicon&r=PG", "display_name": "damienix", "link": "https://stackoverflow.com/users/488704/damienix"}, "is_accepted": false, "score": 2, "last_activity_date": 1455905583, "last_edit_date": 1455905583, "creation_date": 1455905048, "answer_id": 35511889, "question_id": 35509154, "link": "https://stackoverflow.com/questions/35509154/does-kotlin-support-ormlite-in-100-data-classes/35511889#35511889", "title": "Does Kotlin support Ormlite in 100%? (Data classes)", "body": "<p>I converted my daos to normal classes without problems</p>\n\n<pre><code>import com.j256.ormlite.field.DatabaseField\nimport com.j256.ormlite.table.DatabaseTable\n\n@DatabaseTable(tableName = HabitDao.TABLE)\nclass HabitDao() {\n\n    companion object {\n        const val TABLE = \"habitdao\"\n        const val ORDER = \"order\"\n        const val ID = \"id\"\n    }\n\n    @DatabaseField(columnName = ID, generatedId = true)\n    var id: Int = 0\n\n    @DatabaseField(index = true)\n    lateinit var title: String\n\n    @DatabaseField\n    lateinit var intention: String\n\n    @DatabaseField(columnName = ORDER)\n    var order: Int = 0\n\n    constructor(title: String, intention: String) : this() {\n        this.title = title\n        this.intention = intention\n    }\n\n    override fun toString(): String {\n        return title\n    }\n}\n</code></pre>\n\n<p>You just need to provide empty constructor (see the one in the class definition). Also lateinit makes properties easier to use later on.</p>\n\n<p><strong>Edit:</strong> Data classes seem to add features that are useful when you need to serialize those objects. Ormlite is able to handle normal a.k.a. Java classes already so there is no need to do that. Moreover data class is expected to contain all its fields in the constructor and you don't want the id field to be present there.</p>\n"}, {"tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": false, "score": 0, "last_activity_date": 1495142246, "creation_date": 1495142246, "answer_id": 44057925, "question_id": 35509154, "link": "https://stackoverflow.com/questions/35509154/does-kotlin-support-ormlite-in-100-data-classes/44057925#44057925", "title": "Does Kotlin support Ormlite in 100%? (Data classes)", "body": "<p>No, ORMLite cannot be used with Kotlin data classes (as of version 1.1.2) because of ORMLite requirement to annotate the fields with <code>@DatabaseField</code>, which is not possible with fields declared with the data class syntax.</p>\n"}, {"comments": [{"owner": {"reputation": 10517, "user_id": 1169961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/884fef548d59cfba93421c94288fc433?s=128&d=identicon&r=PG", "display_name": "starkej2", "link": "https://stackoverflow.com/users/1169961/starkej2"}, "edited": false, "score": 0, "creation_date": 1562612301, "post_id": 44472453, "comment_id": 100422142, "body": "This doesn&#39;t seem to work if the properties are vals"}, {"owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "reply_to_user": {"reputation": 10517, "user_id": 1169961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/884fef548d59cfba93421c94288fc433?s=128&d=identicon&r=PG", "display_name": "starkej2", "link": "https://stackoverflow.com/users/1169961/starkej2"}, "edited": false, "score": 0, "creation_date": 1562912693, "post_id": 44472453, "comment_id": 100535605, "body": "@starkej2 Of course, since OrmLite works with noarg constructor + setters, and <code>val</code>s don&#39;t have setters."}, {"owner": {"reputation": 10517, "user_id": 1169961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/884fef548d59cfba93421c94288fc433?s=128&d=identicon&r=PG", "display_name": "starkej2", "link": "https://stackoverflow.com/users/1169961/starkej2"}, "edited": false, "score": 0, "creation_date": 1562956883, "post_id": 44472453, "comment_id": 100557357, "body": "I thought OrmLite used reflection to initialize the properties? @juzraai <a href=\"https://stackoverflow.com/a/16780928/1169961\">stackoverflow.com/a/16780928/1169961</a>"}, {"owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "reply_to_user": {"reputation": 10517, "user_id": 1169961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/884fef548d59cfba93421c94288fc433?s=128&d=identicon&r=PG", "display_name": "starkej2", "link": "https://stackoverflow.com/users/1169961/starkej2"}, "edited": false, "score": 0, "creation_date": 1562957233, "post_id": 44472453, "comment_id": 100557494, "body": "Well, then I was wrong in my comment above. :) So it is working with <code>final</code> fields in Java, but not with <code>val</code>s in Kotlin?"}], "tags": [], "owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "is_accepted": false, "score": 6, "last_activity_date": 1503158174, "last_edit_date": 1503158174, "creation_date": 1497091832, "answer_id": 44472453, "question_id": 35509154, "link": "https://stackoverflow.com/questions/35509154/does-kotlin-support-ormlite-in-100-data-classes/44472453#44472453", "title": "Does Kotlin support Ormlite in 100%? (Data classes)", "body": "<p>I'm using OrmLite with Kotlin's data classes with no problem. The key is to specify default values for all fields, then Kotlin generates an empty constructor for the data class:</p>\n\n<pre><code>@DatabaseTable(tableName = \"sample_table\")\ndata class SampleRecord(\n        @DatabaseField(id = true)\n        var id: String? = null,\n\n        @DatabaseField(canBeNull = false)\n        var numField: Int? = null,\n\n        @DatabaseField\n        var strField: String = \"\",\n\n        @DatabaseField\n        var timestamp: Date = Date()\n)\n</code></pre>\n\n<p><a href=\"https://github.com/juzraai/kotlin-data-classes-ormlite-example/tree/master/src/main/kotlin/hu/juzraai/kotlin_data_classes_ormlite_example\" rel=\"noreferrer\">\u00bb Working example on GitHub</a></p>\n"}], "owner": {"reputation": 123, "user_id": 5422877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c956dd0939e2b4873685ee97d5b51872?s=128&d=identicon&r=PG&f=1", "display_name": "Zeezl", "link": "https://stackoverflow.com/users/5422877/zeezl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2289, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1503158174, "creation_date": 1455896488, "last_edit_date": 1455898041, "question_id": 35509154, "link": "https://stackoverflow.com/questions/35509154/does-kotlin-support-ormlite-in-100-data-classes", "title": "Does Kotlin support Ormlite in 100%? (Data classes)", "body": "<p>I'm new to Kotlin and I wish to convert my java model classes with data classes, is it possible? I mean does Ormlite support this?</p>\n"}, {"tags": ["android", "lambda", "proguard", "kotlin"], "comments": [{"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 1, "creation_date": 1455883998, "post_id": 35504507, "comment_id": 58701185, "body": "Could you please post <code>.class</code> file for the adapter as well as the file, containing the closure? They can be found in <code>build&#47;intermediates&#47;classes&#47;</code> of the Android project."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "reply_to_user": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "edited": false, "score": 0, "creation_date": 1455890878, "post_id": 35504507, "comment_id": 58705270, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/103964/discussion-between-user1643723-and-ssuukk\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455888761, "post_id": 35505073, "comment_id": 58703985, "body": "You can add a feature request for things like obfuscation at <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a> ... be sure to include the difficulty of post-compilation obfuscaters in knowing what is safe or not given only the class file.  (but then again, it is hard to obfuscate without knowing uses outside of a current compilation module as well, so a compile-time version could have problems as well, just different ones)"}], "tags": [], "owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "is_accepted": false, "score": 1, "last_activity_date": 1455883925, "creation_date": 1455883925, "answer_id": 35505073, "question_id": 35504507, "link": "https://stackoverflow.com/questions/35504507/kotlin-proguard-and-lambdas/35505073#35505073", "title": "Kotlin, Proguard and lambdas", "body": "<p>This is a tough one. In nutshell, Proguard does not know about Kotlin. It is using a simple code analysis to detect things like <code>Class.forName()</code> and work around them, but may fail for anything more complex. You need to look at generated <code>.class</code> files from <code>build</code> subdirectories (can you post relevant ones?) to find out what really happens.</p>\n\n<p>For now you can do two things:</p>\n\n<ul>\n<li>Ask Kotlin devs to add proper obfuscation/optimization support to the Kotlin compiler: this is really <em>the right way</em> to do things, as demonstrated by every non-java compiler in existence;</li>\n<li>Exclude your own sources from obfuscation (most Activities and Views aren't going to be well-obfuscated anyway).</li>\n</ul>\n"}], "owner": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1700, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1455883925, "creation_date": 1455882261, "last_edit_date": 1455882594, "question_id": 35504507, "link": "https://stackoverflow.com/questions/35504507/kotlin-proguard-and-lambdas", "title": "Kotlin, Proguard and lambdas", "body": "<p>I have a neat function that does something on a view:</p>\n\n<pre><code>fun&lt;T : View&gt; Activity.withView(nr : Int, fn : T.()-&gt;Unit) {\n    (findViewById(nr) as T?)?.fn()\n}\n</code></pre>\n\n<p>Now, when I use this function in my activity:</p>\n\n<pre><code>    withView&lt;Spinner&gt;(R.id.spinner_toolbar) {\n        adapter = AdapterIndeksuDlaSpinnera(this@NewMainActivity, PlaylistIndex)\n</code></pre>\n\n<p>...everything is OK until I use ProGuard. I can see <code>AdapterIndeksuDlaSpinnera</code> gets mangled, as expected, but the application fails when proguarded with \"Can't load class AdapterIndeksuDlaSpinnera\" (while it should complain about mangled adapter name). </p>\n\n<p>I was able to create temporaty workaround by disabling mangling of all adapters that can be used inside my <code>withView</code></p>\n\n<pre><code>-keep class pl.qus.xenoamp.adapter.** { *; }\n</code></pre>\n\n<p>but I don't feel it's a good solution (and I have no idea what other classes can fail this way!). So can anyone explain what is the problem and what ProGuard line should I add to potentially fix similar occurences of other classes used inside <code>withView</code>?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1455871008, "post_id": 35496368, "comment_id": 58692915, "body": "Thank you very much, Ilya, for the detailed explanation and a more elegant solution. Very helpful!"}, {"owner": {"reputation": 29866, "user_id": 930450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/se3CE.png?s=128&g=1", "display_name": "Ixx", "link": "https://stackoverflow.com/users/930450/ixx"}, "edited": false, "score": 0, "creation_date": 1543916667, "post_id": 35496368, "comment_id": 94081031, "body": "Why is there a built-in function (<code>contentEquals</code>) to compare arrays but not lists?"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 16, "last_activity_date": 1455850224, "last_edit_date": 1455850224, "creation_date": 1455849676, "answer_id": 35496368, "question_id": 35494927, "link": "https://stackoverflow.com/questions/35494927/comparing-lists-of-comparables-in-kotlin/35496368#35496368", "title": "Comparing lists of comparables in Kotlin", "body": "<p><code>Comparable</code> is an interface <em>contravariant</em> to its type parameter <code>T</code>. Values of type <code>T</code> are only allowed at <code>in</code>-positions, namely as parameters of class methods and not as return values.</p>\n\n<pre><code>interface Comparable&lt;in T&gt; {\n    abstract operator fun compareTo(other: T): Int\n}\n</code></pre>\n\n<p>A star-projection of contravariant type is equivalent to that type parametrized with <code>Nothing</code>, thus <code>Comparable&lt;*&gt;</code> is actually a <code>Comparable&lt;in Nothing&gt;</code>. It means that once you have a Comparable of unknown type, you cannot safely compare it to anything except a value of <code>Nothing</code> type, which is known to have no values. :)</p>\n\n<p>You can encounter the consequence of such unsafety if you try to compare an <code>Int</code> with a <code>String</code>. It's not the <code>elem2 as T</code> throws ClassCastException (it is really an unchecked cast as the warning you have suppressed states), it's the implementation of <code>String.compareTo</code> who throws, when it meets something that isn't a <code>String</code>.</p>\n\n<p>Returning back to the question, you can implement such list comparison with help of the library function <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-values.html\" rel=\"noreferrer\">kotlin.comparisons.compareValues</a>. It knows how to handle nulls and hides nasty unchecked cast inside.</p>\n\n<pre><code>import kotlin.comparisons.*\n\nfun compareLists(list1: List&lt;Comparable&lt;*&gt;&gt;, list2: List&lt;Comparable&lt;*&gt;&gt;): Int {\n    for (i in 0..Math.min(list1.size, list2.size)-1) {\n        val elem1 = list1[i]\n        val elem2 = list2[i]\n\n        if (elem1.javaClass != elem2.javaClass) {\n            TODO(\"Decide what to do when you encounter values of different classes\")\n        }\n\n        compareValues(elem1, elem2).let {\n            if (it != 0) return it\n        }\n    }\n    return compareValues(list1.size, list2.size)\n}\n</code></pre>\n\n<p>Note, due to the type erasure in generics ensuring values have the same class (<code>elem1.javaClass == elem2.javaClass</code>) doesn't necessary mean the values could be safely compared. For example <code>List&lt;Int&gt;</code> and <code>List&lt;String&gt;</code> both have the same class <code>List</code>.</p>\n"}], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6068, "favorite_count": 1, "accepted_answer_id": 35496368, "answer_count": 1, "score": 11, "last_activity_date": 1455850224, "creation_date": 1455840182, "question_id": 35494927, "link": "https://stackoverflow.com/questions/35494927/comparing-lists-of-comparables-in-kotlin", "title": "Comparing lists of comparables in Kotlin", "body": "<p>I'm trying to write a function that compares two lists of comparables. The comparables can be of various types as long as the elements at the same positions in the two lists being compared are comparable. Example:</p>\n\n<pre><code>    val list1 = ArrayList&lt;Comparable&lt;*&gt;&gt;()\n    val list2 = ArrayList&lt;Comparable&lt;*&gt;&gt;()\n\n    list1.add(10)\n    list1.add(\"xyz\")\n    list1.add('a')\n\n    list2.add(10)\n    list2.add(\"xyz\")\n    list2.add('b')\n\n    println(compare(list1, list2))\n</code></pre>\n\n<p>This should print -1 because </p>\n\n<ul>\n<li>10 == 10</li>\n<li>\"xyz\" == \"xyz\"</li>\n<li>'a' &lt; 'b'</li>\n</ul>\n\n<p>and thus list1 &lt; list2.</p>\n\n<p>Here's the code that I have put together with a bit of a trial and error process since I'm a little bit confused about how generics work in this specific case:</p>\n\n<pre><code>fun &lt;T&gt; compare(list1: List&lt;Comparable&lt;T&gt;&gt;, list2: List&lt;Comparable&lt;T&gt;&gt;): Int {\n    for (i in 0..Math.max(list1.size, list2.size) - 1) {\n        val elem1 = if (i &lt; list1.size) list1[i] else null\n        val elem2 = if (i &lt; list2.size) list2[i] else null\n\n        if (elem1 == null &amp;&amp; elem2 == null)\n            return 0\n\n        if (elem1 == null)\n            return -1\n\n        if (elem2 == null)\n            return 1\n\n        @Suppress(\"UNCHECKED_CAST\")\n        val comparisonResult = elem1.compareTo(elem2 as T)\n\n        if (comparisonResult != 0)\n            return comparisonResult\n    }\n\n    return 0\n}\n</code></pre>\n\n<p>And this actually compiles and works as expected, but there are a few things that I'm puzzled about.</p>\n\n<p>My first attempt was with the following method signature:</p>\n\n<pre><code>fun compare(list1: List&lt;Comparable&lt;*&gt;&gt;, list2: List&lt;Comparable&lt;*&gt;&gt;): Int\n</code></pre>\n\n<p>This did not compile though. Why is that? And how is this declaration different from the other one?</p>\n\n<p>Second, if I try comparing lists with incomparable values at the matching positions, I get a type cast error. For example, when comparing [1,1] to [1,\"abc\"], I get</p>\n\n<pre><code>java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer\n</code></pre>\n\n<p>This apparently arises at the type cast in </p>\n\n<pre><code>elem1.compareTo(elem2 as T)\n</code></pre>\n\n<p>What puzzles me: How is the T resolved to Integer here? In fact, I'm surprised that this actually compiles.</p>\n\n<p>And third, is there a way to get rid of the unchecked cast? I tried</p>\n\n<pre><code>if (elem2 !is T)\n    // throw Exception\n</code></pre>\n\n<p>but that did not compile. Why? It seems that somehow it's known that T is meant to be Integer in this iteration, so why can't I type-check against it?</p>\n"}, {"tags": ["hadoop", "kotlin"], "comments": [{"owner": {"reputation": 103, "user_id": 2591661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf54a5bf2e2e32f1f69867ab91bd059?s=128&d=identicon&r=PG", "display_name": "alhart", "link": "https://stackoverflow.com/users/2591661/alhart"}, "edited": false, "score": 0, "creation_date": 1455892930, "post_id": 35491648, "comment_id": 58706746, "body": "For those interested, it appears Kotlin doesn&#39;t capture any generics in inner classes. I made a ticket on the YouTrack that has been assigned: <a href=\"https://youtrack.jetbrains.com/issue/KT-11123\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11123</a> and there&#39;s a parent ticket for the generics in inner classes issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-9208\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-9208</a>"}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 3, "last_activity_date": 1455884907, "last_edit_date": 1455884907, "creation_date": 1455829509, "answer_id": 35492388, "question_id": 35491648, "link": "https://stackoverflow.com/questions/35491648/hadoop-context-type-parameters-in-kotlin/35492388#35492388", "title": "Hadoop Context type parameters in Kotlin", "body": "<p>Kotlin is expecting \"4 type arguments\" on <code>Mapper&lt;KEYIN, VALUEIN, KEYOUT, VALUEOUT&gt;</code> and not on the <code>Context</code> in <code>Mapper&lt;KEYIN, VALUEIN, KEYOUT, VALUEOUT&gt;.Context</code>.</p>\n\n<p>An example:</p>\n\n<pre><code>override fun setup(context: Mappert&lt;KeyIn, ValueIn, KeyOut, ValueOut&gt;.Context?) {\n    super.setup(context)\n}\n</code></pre>\n\n<p>It is possible that the type arguments for <code>Context</code> should/could be implied. I suggest creating an issue in the <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow\">Kotlin YouTrack</a>.</p>\n"}], "owner": {"reputation": 103, "user_id": 2591661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf54a5bf2e2e32f1f69867ab91bd059?s=128&d=identicon&r=PG", "display_name": "alhart", "link": "https://stackoverflow.com/users/2591661/alhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 35492388, "answer_count": 1, "score": 4, "last_activity_date": 1455884907, "creation_date": 1455826821, "last_edit_date": 1455827421, "question_id": 35491648, "link": "https://stackoverflow.com/questions/35491648/hadoop-context-type-parameters-in-kotlin", "title": "Hadoop Context type parameters in Kotlin", "body": "<p>When implementing a Hadoop Mapper or Reducer in Kotlin, I get an interesting contradiction from the compiler. Any time you use the <code>Context</code> object, the compiler gives an error saying \"4 type arguments expected\" if you don't supply type arguments (<code>&lt;KEYIN, VALUEIN, KEYOUT, VALUEOUT&gt;</code>), and says \"No type arguments expected\" if you DO supply type arguments. Any ideas what's happening here?</p>\n\n<p>An example:</p>\n\n<pre><code>// gives \"4 type arguments expected\"\noverride fun setup(context: Context?) {\n    super.setup(context)\n}\n\n// gives \"No type arguments expected\"\noverride fun setup(context: Context&lt;KeyIn, ValueIn, KeyOut, ValueOut&gt;?) {\n    super.setup(context)\n}\n</code></pre>\n\n<p>Specifying <code>Mapper&lt;KeyIn, ValueIn, KeyOut, ValueOut&gt;.Context</code> makes it compile, but since <code>Context</code> is an inner class of <code>Mapper</code>, shouldn't the type of the <code>Context</code> be implied when you specify the type of the <code>Mapper</code> you're extending, as it is in Java?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1455829884, "post_id": 35485855, "comment_id": 58677589, "body": "Exception during compiling is most likely a bug, and bugs are better to be reported to <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>"}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": true, "score": 2, "last_activity_date": 1455975373, "creation_date": 1455975373, "answer_id": 35524007, "question_id": 35485855, "link": "https://stackoverflow.com/questions/35485855/uninferredparametertypeconstructor-exception-during-build-when-generic-parameter/35524007#35524007", "title": "UninferredParameterTypeConstructor exception during build when generic parameters not specified explicitly", "body": "<p>It is compiler bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-11144\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-11144</a>.\nMain reason why this bug is appear: function <code>wrapResult</code> uses generic parameter <code>T</code> only in own return type.</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 35524007, "answer_count": 1, "score": 0, "last_activity_date": 1455975373, "creation_date": 1455809993, "question_id": 35485855, "link": "https://stackoverflow.com/questions/35485855/uninferredparametertypeconstructor-exception-during-build-when-generic-parameter", "title": "UninferredParameterTypeConstructor exception during build when generic parameters not specified explicitly", "body": "<p>I have the following code (using <strong>RxKotlin 0.40.1</strong>):</p>\n\n<pre><code>class Result&lt;T, E&gt;(val data: T? = null, val error: E? = null)\n\nfun &lt;T, E&gt; wrapResult(errorInfoFactory: (Throwable) -&gt; E): (Observable&lt;T&gt;) -&gt; Observable&lt;Result&lt;T, E&gt;&gt; = { it.map { Result&lt;T, E&gt;(it) }.onErrorReturn { Result&lt;T, E&gt;(error = errorInfoFactory(it)) } }\n</code></pre>\n\n<p>Just FYI this is needed to easily transform <code>Observable</code> which may throw errors to an <code>Observable</code> which always returns <code>Result</code> object, so <code>onError</code> is never triggered.</p>\n\n<p>And I want to use it like this:</p>\n\n<pre><code>fun dangerousOperation() = 0\n\nfun getErrorMessage(t: Throwable) = \"error occurred\"\n\nfun test() {\n    val resultObservable = Observable.fromCallable(::dangerousOperation).compose(wrapResult(::getErrorMessage))\n}\n</code></pre>\n\n<p>And <strong>Android Studio 1.5.1</strong> with <strong>Kotlin plugin 1.0.0-release-IJ141-56</strong> doesn't highlight any errors in this code. But when I try to build it, I get the error:</p>\n\n<blockquote>\n  <p>//Error:(24, 9) org.jetbrains.kotlin.codegen.CompilationException:\n  Back-end (JVM) Internal error: Error type encountered:\n  org.jetbrains.kotlin.types.ErrorUtils$UninferredParameterTypeConstructor@68754e6\n  (ErrorTypeImpl). //Cause: Error type encountered:\n  org.jetbrains.kotlin.types.ErrorUtils$UninferredParameterTypeConstructor@68754e6\n  (ErrorTypeImpl). //File being compiled and position: (24,9) in\n  /home/d/work/workspace/Hitch-hiking-Stats/app/src/main/java/ru/netimen/hitch_hikingstats/MemoryRepo.kt\n  //PsiElement: val resultObservable =\n  Observable.just(dangerousOperation()).compose(wrapResult(::getErrorMessage))\n  //The root cause was thrown at: JetTypeMapper.java:435 // at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:299)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.genStatement(ExpressionCodegen.java:339)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.generateBlock(ExpressionCodegen.java:1532)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.generateBlock(ExpressionCodegen.java:1485)\n  //    at\n  org.jetbrains.kotlin.codegen.CodegenStatementVisitor.visitBlockExpression(CodegenStatementVisitor.java:56)\n  //    at\n  org.jetbrains.kotlin.codegen.CodegenStatementVisitor.visitBlockExpression(CodegenStatementVisitor.java:22)\n  //    at\n  org.jetbrains.kotlin.psi.KtBlockExpression.accept(KtBlockExpression.java:44)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:280)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.genStatement(ExpressionCodegen.java:339)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:309)\n  //    at\n  org.jetbrains.kotlin.codegen.ExpressionCodegen.returnExpression(ExpressionCodegen.java:1873)\n  //    at\n  org.jetbrains.kotlin.codegen.FunctionGenerationStrategy$FunctionDefault.doGenerateBody(FunctionGenerationStrategy.java:50)\n  //    at\n  org.jetbrains.kotlin.codegen.FunctionGenerationStrategy$CodegenBased.generateBody(FunctionGenerationStrategy.java:72)\n  //    at\n  org.jetbrains.kotlin.codegen.FunctionCodegen.generateMethodBody(FunctionCodegen.java:364)\n  //    at\n  org.jetbrains.kotlin.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:203)\n  //    at\n  org.jetbrains.kotlin.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:138)</p>\n</blockquote>\n\n<p>But when I change my <code>test</code> function to</p>\n\n<pre><code>fun test() {\n    val resultObservable = Observable.fromCallable(::dangerousOperation).compose(wrapResult&lt;Int, String&gt;(::getErrorMessage))\n}\n</code></pre>\n\n<p>everything compiles OK. But why I get that exception when I don't specify the generic parameters of <code>wrapResult</code> explicitly if the IDE doesn't highlight any errors?</p>\n"}, {"tags": ["kotlin", "kotlin-android-extensions", "kotlin-extension"], "answers": [{"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1455807128, "creation_date": 1455807128, "answer_id": 35484713, "question_id": 35484498, "link": "https://stackoverflow.com/questions/35484498/extend-mockito-verify-for-kotlin-not-working-in-a-kotlin-way/35484713#35484713", "title": "Extend Mockito verify for Kotlin not working (in a &quot;kotlin way&quot;)", "body": "<p>You should do it like that. <code>verify</code> must be called before each mock method invocation.</p>\n"}, {"tags": [], "owner": {"reputation": 236, "user_id": 512580, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/97659d60d283b7d62ee2688e946526dc?s=128&d=identicon&r=PG", "display_name": "Denys P.", "link": "https://stackoverflow.com/users/512580/denys-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1455810990, "creation_date": 1455810990, "answer_id": 35486255, "question_id": 35484498, "link": "https://stackoverflow.com/questions/35484498/extend-mockito-verify-for-kotlin-not-working-in-a-kotlin-way/35486255#35486255", "title": "Extend Mockito verify for Kotlin not working (in a &quot;kotlin way&quot;)", "body": "<p>Correct me if I'm wrong. You want to avoid multiple <code>verify()</code> calls in your test.</p>\n\n<pre><code>@Test fun onCreate_loadLoginInfo() {\n    // ...\n\n    verify(mockedView).initViews()\n    verify(mockedView).setImage(user.photoUrl)\n    verify(mockedView).setName(user.name)\n    verify(mockedView).setEmail(user.email)\n}\n</code></pre>\n\n<p>I modified your second approach little bit:</p>\n\n<pre><code>@Test fun onCreate_loadLoginInfo() {\n    // ...\n\n    verifyAll(mockedView) {\n        it().initViews()\n        it().setImage(user.photoUrl)\n        it().setName(user.name)\n        it().setEmail(user.email)\n    }\n}\n\nfun &lt;T&gt; verifyAll(mock: T, func: (() -&gt; T) -&gt; Unit) {\n    func { Mockito.verify(mock) }\n}\n</code></pre>\n\n<p>As you can see now we are passing functional argument to <code>func()</code> and need to use it appropriately (use it as function, not as object).</p>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 2320032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb74cbdec5fa26e0f5392a004dc1b7be?s=128&d=identicon&r=PG", "display_name": "Andrey Paslavsky", "link": "https://stackoverflow.com/users/2320032/andrey-paslavsky"}, "is_accepted": true, "score": 3, "last_activity_date": 1455811199, "creation_date": 1455811199, "answer_id": 35486342, "question_id": 35484498, "link": "https://stackoverflow.com/questions/35484498/extend-mockito-verify-for-kotlin-not-working-in-a-kotlin-way/35486342#35486342", "title": "Extend Mockito verify for Kotlin not working (in a &quot;kotlin way&quot;)", "body": "<p>I had the same problems and wrote <a href=\"https://github.com/paslavsky/mockito-kt\" rel=\"nofollow\">Facade around Mockito</a>.\nMy library allow to verify few calls around one mock object:</p>\n\n<pre><code>val list = mock(MutableList::class)\n\nlist.add(\"String 1\")\nlist.add(\"String 2\")\nlist.size()\n\nverify(list) {\n    times(2).add(anyString())\n    times(1).size()\n}\n</code></pre>\n\n<p>Please look to the readme, maybe it can help you</p>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 35486342, "answer_count": 3, "score": 1, "last_activity_date": 1455894821, "creation_date": 1455806556, "last_edit_date": 1455894821, "question_id": 35484498, "link": "https://stackoverflow.com/questions/35484498/extend-mockito-verify-for-kotlin-not-working-in-a-kotlin-way", "title": "Extend Mockito verify for Kotlin not working (in a &quot;kotlin way&quot;)", "body": "<p>I want to extend verify to allow checking multiple commands over the same mocked object but it is not working, it compiles but on run it dont run each command over the same.</p>\n\n<p>Just want to avoid writing more things like:</p>\n\n<pre><code>Mockito.verify(mockedView).initViews()\nMockito.verify(mockedView).setImage(user.photoUrl)\n</code></pre>\n\n<p>and write more like:</p>\n\n<pre><code>Mockito.verify(mockedView){\n    initViews()\n    setImage(user.photoUrl)\n}\n</code></pre>\n\n<p>First try:</p>\n\n<pre><code>@Test\nfun onCreate_loadLoginInfo() {\n    val user = MockUser.user()\n\n    presenter.onCreate(mockedView, user)\n\n    Mockito.myVerify(mockedView) {\n        initViews()\n        setImage(user.photoUrl)\n        setName(user.name)\n        setEmail(user.email)\n    }\n}\n\nclass Mockito {\n    companion object\n}\n\nfun &lt;T&gt; Mockito.Companion.myVerify(obj: T, func: T.() -&gt; Unit) {\n    org.mockito.Mockito.verify(obj).func()\n}\n</code></pre>\n\n<p>Second try:</p>\n\n<pre><code>@Test\nfun onCreate_loadLoginInfo() {\n    val user = MockUser.user()\n\n    presenter.onCreate(mockedView, user)\n\n    Mockito.myVerify(mockedView) {\n        it.initViews()\n        it.setImage(user.photoUrl)\n        it.setName(user.name)\n        it.setEmail(user.email)\n    }\n}\n\nclass Mockito {\n    companion object\n}\n\nfun &lt;T&gt; Mockito.Companion.myVerify(obj: T, func: (T) -&gt; Unit) {\n    val mock = org.mockito.Mockito.verify(obj)\n    func(mock)\n}\n</code></pre>\n\n<p>But those are not working, all the tests pass even if I dont call the methods in the presenter, How can I do this?</p>\n"}, {"tags": ["android", "mobile", "kotlin", "android-developer-api"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3082143"}, "edited": false, "score": 0, "creation_date": 1455797398, "post_id": 35480340, "comment_id": 58655573, "body": "I want to compare kotlin with java for android application development."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 1, "creation_date": 1455797745, "post_id": 35480340, "comment_id": 58655782, "body": "yea, thank you for the comment, now it&#39;s more clear."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 5886820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFS3z.jpg?s=128&g=1", "display_name": "Rocco", "link": "https://stackoverflow.com/users/5886820/rocco"}, "is_accepted": false, "score": 1, "last_activity_date": 1455795706, "creation_date": 1455795706, "answer_id": 35480504, "question_id": 35480340, "link": "https://stackoverflow.com/questions/35480340/what-are-the-advantages-of-kotlin-programming-language/35480504#35480504", "title": "What are the advantages of Kotlin programming language?", "body": "<p>You might be able to see it here\uff1a<a href=\"http://blog.jetbrains.com/kotlin/2016/02/kotlin-1-0-released-pragmatic-language-for-jvm-and-android/\" rel=\"nofollow\">http://blog.jetbrains.com/kotlin/2016/02/kotlin-1-0-released-pragmatic-language-for-jvm-and-android/</a></p>\n"}, {"comments": [{"owner": {"reputation": 3254, "user_id": 1046013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61ce235bad9cd05b80e0d4c9b2f25b05?s=128&d=identicon&r=PG", "display_name": "NaturalBornCamper", "link": "https://stackoverflow.com/users/1046013/naturalborncamper"}, "edited": false, "score": 0, "creation_date": 1493353841, "post_id": 35481232, "comment_id": 74390267, "body": "Performance? Isn&#39;t it generating bytecode so it should be exactly the same performance as Java, or slower? It can&#39;t be faster at least, can it be?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 3254, "user_id": 1046013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61ce235bad9cd05b80e0d4c9b2f25b05?s=128&d=identicon&r=PG", "display_name": "NaturalBornCamper", "link": "https://stackoverflow.com/users/1046013/naturalborncamper"}, "edited": false, "score": 3, "creation_date": 1493371877, "post_id": 35481232, "comment_id": 74399461, "body": "Yep, Kotlin for JVM generates bytecode just like Java, but not in the same way as Java. For example you can inline one lambda in another, kotlin in this case will be faster."}, {"owner": {"reputation": 9516, "user_id": 527617, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dfadd34814f8af9da21ee87dc26bd8e8?s=128&d=identicon&r=PG", "display_name": "UVM", "link": "https://stackoverflow.com/users/527617/uvm"}, "edited": false, "score": 0, "creation_date": 1499233534, "post_id": 35481232, "comment_id": 76811631, "body": "awesome libraries"}, {"owner": {"reputation": 3153, "user_id": 1429432, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d54fcc6f3d6d39688c69999f846e427a?s=128&d=identicon&r=PG", "display_name": "Yousha Aleayoub", "link": "https://stackoverflow.com/users/1429432/yousha-aleayoub"}, "edited": false, "score": 2, "creation_date": 1503926662, "post_id": 35481232, "comment_id": 78798686, "body": "&quot;Nice code&quot; ? what type of reason is this?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 3153, "user_id": 1429432, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d54fcc6f3d6d39688c69999f846e427a?s=128&d=identicon&r=PG", "display_name": "Yousha Aleayoub", "link": "https://stackoverflow.com/users/1429432/yousha-aleayoub"}, "edited": false, "score": 0, "creation_date": 1503937056, "post_id": 35481232, "comment_id": 78805241, "body": "@YoushaAleayoub fixed"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 3820, "user_id": 1725145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/902d344133e1ff7290d8a572ccbecd83?s=128&d=identicon&r=PG", "display_name": "user1725145", "link": "https://stackoverflow.com/users/1725145/user1725145"}, "edited": false, "score": 1, "creation_date": 1557309997, "post_id": 35481232, "comment_id": 98718692, "body": "@SList thanks, I replaced link with link to android documentation about kotlin"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 17, "last_activity_date": 1557309956, "last_edit_date": 1557309956, "creation_date": 1455797703, "answer_id": 35481232, "question_id": 35480340, "link": "https://stackoverflow.com/questions/35480340/what-are-the-advantages-of-kotlin-programming-language/35481232#35481232", "title": "What are the advantages of Kotlin programming language?", "body": "<p>I assume you asked about Kotlin versus Java for Android development.</p>\n\n<p>Basically there are reasons to switch from Java to Kotlin for Android development:</p>\n\n<ol>\n<li>Readable and concise code</li>\n<li>Small runtime</li>\n<li>Performance</li>\n<li>Kotlin libraries</li>\n</ol>\n\n<p>All this points described here:</p>\n\n<ol>\n<li><a href=\"https://developer.android.com/kotlin/\" rel=\"nofollow noreferrer\">Develop Android apps with Kotlin</a></li>\n<li><a href=\"https://docs.google.com/document/d/1ReS3ep-hjxWA8kZi0YqDbEhCqTt29hG8P44aA9W0DM8/edit?hl=pl&amp;forcehl=1#heading=h.v6i4iyf7kkxh\" rel=\"nofollow noreferrer\">Using Project Kotlin for Android</a></li>\n<li><a href=\"https://github.com/JavaBy/awesome-kotlin#android\" rel=\"nofollow noreferrer\">Checkout Awesome Kotlin for Android</a></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3082143"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10807, "favorite_count": 3, "closed_date": 1455797969, "answer_count": 2, "score": 25, "last_activity_date": 1557309956, "creation_date": 1455795284, "last_edit_date": 1486834950, "question_id": 35480340, "link": "https://stackoverflow.com/questions/35480340/what-are-the-advantages-of-kotlin-programming-language", "closed_reason": "Opinion-based", "title": "What are the advantages of Kotlin programming language?", "body": "<p>I am quite eager to know the advantages of Kotlin programming language over Java for Android application development as I would love to explore new things. If any one have any knowledge about it please do needful.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["spring", "kotlin"], "comments": [{"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 3, "creation_date": 1455794300, "post_id": 35479631, "comment_id": 58653574, "body": "Have you tried? And to be a bit more constructive.. there&#39;s an entire <a href=\"https://kotlinlang.org/docs/tutorials/spring-boot-restful.html\" rel=\"nofollow noreferrer\">Spring Boot template</a>, the answer is most certainly &quot;yes&quot;."}, {"owner": {"reputation": 1131, "user_id": 2396067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97caf2873253d4ec684409dd1d92fdf?s=128&d=identicon&r=PG&f=1", "display_name": "eendroroy", "link": "https://stackoverflow.com/users/2396067/eendroroy"}, "reply_to_user": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1455794823, "post_id": 35479631, "comment_id": 58653918, "body": "@mabi thank you for the tutorial link :)"}], "answers": [{"tags": [], "owner": {"reputation": 4412, "user_id": 1650580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Su7AM.jpg?s=128&g=1", "display_name": "Mike Buhot", "link": "https://stackoverflow.com/users/1650580/mike-buhot"}, "is_accepted": false, "score": 6, "last_activity_date": 1455795844, "creation_date": 1455795844, "answer_id": 35480554, "question_id": 35479631, "link": "https://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin/35480554#35480554", "title": "How to use spring annotations like @Autowired in kotlin?", "body": "<p>Yes, java annotations are supported in Kotlin mostly as in Java.\nOne gotcha is annotations on the primary constructor requires the explicit 'constructor' keyword:</p>\n\n<p>From <a href=\"https://kotlinlang.org/docs/reference/annotations.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/annotations.html</a></p>\n\n<blockquote>\n  <p>If you need to annotate the primary constructor of a class, you need to add the constructor keyword to the constructor declaration, and add the annotations before it:</p>\n</blockquote>\n\n<pre><code>class Foo @Inject constructor(dependency: MyDependency) {\n  // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2964, "user_id": 2769917, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Mushtaq", "link": "https://stackoverflow.com/users/2769917/asif-mushtaq"}, "edited": false, "score": 0, "creation_date": 1536697827, "post_id": 35480801, "comment_id": 91515710, "body": "can I use the <code>@Autowired</code> with primary constructor parameter?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 2964, "user_id": 2769917, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Mushtaq", "link": "https://stackoverflow.com/users/2769917/asif-mushtaq"}, "edited": false, "score": 0, "creation_date": 1536822691, "post_id": 35480801, "comment_id": 91563849, "body": "Sure, I use primary constructor for injections in second and third example."}, {"owner": {"reputation": 2964, "user_id": 2769917, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Mushtaq", "link": "https://stackoverflow.com/users/2769917/asif-mushtaq"}, "edited": false, "score": 0, "creation_date": 1537887129, "post_id": 35480801, "comment_id": 91942754, "body": "Can you also add the <code>autowired</code> by setter?"}, {"owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "edited": false, "score": 0, "creation_date": 1545820016, "post_id": 35480801, "comment_id": 94702072, "body": "@IRus, you have used private vals in your example, but I would say that 80% of all examples I found on teh Internet come without &quot;private&quot; modifier when it comes to Kotlin. That would be considered code smell in Java. What&#39;s the reason for that? Do you happen to know? I even think it deserves a separate question."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "edited": false, "score": 0, "creation_date": 1545909226, "post_id": 35480801, "comment_id": 94726877, "body": "@yuranos87 Imagine that developer injects <code>YourBean</code> in <code>FooBean</code>, in case when <code>YourBean</code> dependencies will be public (default modifier in Kotlin) developer can use <code>YourBean</code> dependencies in <code>FooBean</code> (<code>yourBean.mongoTemplate</code>). But this should not be allowed, because <code>YourBean</code> dependencies isn&#39;t his public contract, it&#39;s just implementation detail (in most cases). Instead, <code>FooBean</code> should define own dependencies in own constructor."}, {"owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "edited": false, "score": 0, "creation_date": 1545917816, "post_id": 35480801, "comment_id": 94730454, "body": "@IRus I couldn&#39;t agree more. That&#39;s why I asked why so many examples do not encapsulate the beans. Why leak the internal details? As you said, it can lead to &quot;chained&quot; calls from one bean into the other. This should be avoided at all cost because it will inevitably lead to scope creep inside the application."}, {"owner": {"reputation": 4683, "user_id": 877570, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d431860fe93c8e9511b448d7f43c1d8b?s=128&d=identicon&r=PG", "display_name": "user64141", "link": "https://stackoverflow.com/users/877570/user64141"}, "edited": false, "score": 0, "creation_date": 1576988067, "post_id": 35480801, "comment_id": 105066800, "body": "The official Spring documentation says constructor injection is the recommended approach.  Thus you should list the constructor method first and also mention it&#39;s not merely your preferred approach, but the official preferred approach.  <a href=\"https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin\" rel=\"nofollow noreferrer\">spring.io/blog/2016/02/15/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 199, "last_activity_date": 1589041565, "last_edit_date": 1589041565, "creation_date": 1455796578, "answer_id": 35480801, "question_id": 35479631, "link": "https://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin/35480801#35480801", "title": "How to use spring annotations like @Autowired in kotlin?", "body": "<p>Recommended approach to do Dependency Injection in Spring is constructor injection:</p>\n\n<pre><code>@Component\nclass YourBean(\n    private val mongoTemplate: MongoTemplate, \n    private val solrClient: SolrClient\n) {\n  // code\n}\n</code></pre>\n\n<p>Prior to Spring 4.3 constructor should be explicitly annotated with <code>Autowired</code>:</p>\n\n<pre><code>@Component\nclass YourBean @Autowired constructor(\n    private val mongoTemplate: MongoTemplate, \n    private val solrClient: SolrClient\n) {\n  // code\n}\n</code></pre>\n\n<p>In rare cases, you might like to use field injection, and you can do it with the help of <code>lateinit</code>:</p>\n\n<pre><code>@Component\nclass YourBean {\n\n    @Autowired\n    private lateinit var mongoTemplate: MongoTemplate\n\n    @Autowired\n    private lateinit var solrClient: SolrClient\n}\n</code></pre>\n\n<p>Constructor injection checks all dependencies at bean creation time and all injected fields is <code>val</code>, at other hand lateinit injected fields can be only <code>var</code>, and have little runtime overhead. And to test class with constructor, you don't need reflection.</p>\n\n<p>Links:</p>\n\n<ol>\n<li><a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\">Documentation on lateinit</a> </li>\n<li><a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">Documentation on constructors</a></li>\n<li><a href=\"https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin\" rel=\"noreferrer\">Developing Spring Boot applications with Kotlin</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 2291510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d508661ffc76120885f710fe3e5c1516?s=128&d=identicon&r=PG", "display_name": "Mr.Turtle", "link": "https://stackoverflow.com/users/2291510/mr-turtle"}, "is_accepted": false, "score": 4, "last_activity_date": 1566302620, "last_edit_date": 1566302620, "creation_date": 1566291410, "answer_id": 57570057, "question_id": 35479631, "link": "https://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin/57570057#57570057", "title": "How to use spring annotations like @Autowired in kotlin?", "body": "<p>You can also autowire dependencies through the constructor. Remember to annotate your dependencies with <code>@Configuration, @Component, @Service</code> etc</p>\n\n<pre><code>import org.springframework.stereotype.Component\n\n@Component\nclass Foo (private val dependency: MyDependency) {\n    //...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1770, "user_id": 2561119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/PNJ4y.jpg?s=128&g=1", "display_name": "GabrielBB", "link": "https://stackoverflow.com/users/2561119/gabrielbb"}, "edited": false, "score": 0, "creation_date": 1613249686, "post_id": 64641792, "comment_id": 117019580, "body": "Autowired is not needed"}], "tags": [], "owner": {"reputation": 196, "user_id": 2302006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hsowz.png?s=128&g=1", "display_name": "Nankai", "link": "https://stackoverflow.com/users/2302006/nankai"}, "is_accepted": false, "score": 2, "last_activity_date": 1604304212, "creation_date": 1604304212, "answer_id": 64641792, "question_id": 35479631, "link": "https://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin/64641792#64641792", "title": "How to use spring annotations like @Autowired in kotlin?", "body": "<p>like that</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Component class Girl( @Autowired var outfit: Outfit)\n</code></pre>\n"}], "owner": {"reputation": 1131, "user_id": 2396067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97caf2873253d4ec684409dd1d92fdf?s=128&d=identicon&r=PG&f=1", "display_name": "eendroroy", "link": "https://stackoverflow.com/users/2396067/eendroroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69565, "favorite_count": 15, "accepted_answer_id": 35480801, "answer_count": 4, "score": 90, "last_activity_date": 1604304212, "creation_date": 1455793405, "last_edit_date": 1523738143, "question_id": 35479631, "link": "https://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin", "title": "How to use spring annotations like @Autowired in kotlin?", "body": "<p>Is it possible to do something like following in Kotlin?</p>\n\n<pre><code>@Autowired\ninternal var mongoTemplate: MongoTemplate\n\n@Autowired\ninternal var solrClient: SolrClient\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 318, "user_id": 4907293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Xq3b.jpg?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4907293/sebastian"}, "edited": false, "score": 0, "creation_date": 1455801710, "post_id": 35479289, "comment_id": 58658778, "body": "It&#39;s just a guess based on the error, try to use a different application than     <code>applicationId &quot;kotlin.org.jjvr.kotlinapplication&quot;</code>"}, {"owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "reply_to_user": {"reputation": 318, "user_id": 4907293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Xq3b.jpg?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4907293/sebastian"}, "edited": false, "score": 0, "creation_date": 1455812643, "post_id": 35479289, "comment_id": 58667204, "body": "With applicationId &quot;kotlinapplication&quot; the same errors occur."}, {"owner": {"reputation": 285, "user_id": 1381599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5badbf3489cf94bcea112ce9f3ed6?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/1381599/antonio"}, "edited": false, "score": 2, "creation_date": 1455872927, "post_id": 35479289, "comment_id": 58693938, "body": "You can&#39;t use the Kotlin package, but that&#39;s not a matter of changing the <code>applicationId</code>. It&#39;s a matter of security so that you don&#39;t have access to internal stuff, so my guess is you can&#39;t use the kotlin package in your code. You&#39;ll need to rename your packages."}, {"owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "edited": false, "score": 0, "creation_date": 1455874697, "post_id": 35479289, "comment_id": 58695049, "body": "Thanks Antonio!!, changing package name from package kotlin.org.jjvr.kotlinapplication to package practicakotlin.org.jjvr.kotlinapplication everything works well."}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 3615140, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OtuJQ.jpg?s=128&g=1", "display_name": "Prakash Bala", "link": "https://stackoverflow.com/users/3615140/prakash-bala"}, "reply_to_user": {"reputation": 3033, "user_id": 810428, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HecLw.png?s=128&g=1", "display_name": "Girish Bhutiya", "link": "https://stackoverflow.com/users/810428/girish-bhutiya"}, "edited": false, "score": 0, "creation_date": 1523517948, "post_id": 44039368, "comment_id": 86595634, "body": "@GirishBhutiya Then please upvoke the answer.. :D Thanks"}], "tags": [], "owner": {"reputation": 215, "user_id": 3615140, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OtuJQ.jpg?s=128&g=1", "display_name": "Prakash Bala", "link": "https://stackoverflow.com/users/3615140/prakash-bala"}, "is_accepted": false, "score": 5, "last_activity_date": 1495085681, "creation_date": 1495085681, "answer_id": 44039368, "question_id": 35479289, "link": "https://stackoverflow.com/questions/35479289/problems-trying-to-generate-kotlin-application-with-android-studio/44039368#44039368", "title": "Problems trying to generate Kotlin application with Android Studio", "body": "<p>I got the same error because i was using \"kotlin.kotlindemo\" as package name. Just i renamed the package and it is working fine now.</p>\n"}, {"tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1536061764, "creation_date": 1536061764, "answer_id": 52165670, "question_id": 35479289, "link": "https://stackoverflow.com/questions/35479289/problems-trying-to-generate-kotlin-application-with-android-studio/52165670#52165670", "title": "Problems trying to generate Kotlin application with Android Studio", "body": "<p>As error says : </p>\n\n<blockquote>\n  <p>Only the Kotlin standard library is allowed to use the 'kotlin' package</p>\n</blockquote>\n\n<p>You can not use 'kotlin' for your package name and your Package (applicationId) is : </p>\n\n<p><strong>kotlin.org.jjvr.kotlinapplication</strong></p>\n\n<p>So you must change it to something else with renaming or creating new applicaton with another package name</p>\n"}], "owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2647, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1536061764, "creation_date": 1455792482, "last_edit_date": 1455795339, "question_id": 35479289, "link": "https://stackoverflow.com/questions/35479289/problems-trying-to-generate-kotlin-application-with-android-studio", "title": "Problems trying to generate Kotlin application with Android Studio", "body": "<p>-Android Studio 1.5.1, Java 1.7.0 amd64, Ubuntu 15.10 </p>\n\n<p>-instaled kotlin-plugin 1.0.0 </p>\n\n<p>-created new project with empty activity (API level 15)</p>\n\n<p>-Tools->Kotlin->Configure Kotlin in project</p>\n\n<p>-Default options are selected, All modules, Kotlin plugin version 1.0.0</p>\n\n<p>Generate build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n\ndefaultConfig {\n    applicationId \"kotlin.org.jjvr.kotlinapplication\"\n    minSdkVersion 15\n    targetSdkVersion 23\n    versionCode 1\n    versionName \"1.0\"\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'),    'proguard-rules.pro'\n    }\n}\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n}\n\ndependencies {\ncompile fileTree(dir: 'libs', include: ['*.jar'])\ntestCompile 'junit:junit:4.12'\ncompile 'com.android.support:appcompat-v7:23.1.1'\ncompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\nbuildscript {\next.kotlin_version = '1.0.0'\nrepositories {\n    mavenCentral()\n}\ndependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-    plugin:$kotlin_version\"\n}\n}\nrepositories {\nmavenCentral()\n}\n</code></pre>\n\n<p>-open in editor MainActivity.java and convert to Kotlin:\n- kotlin Code->Convert Java File to Kotlin File</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\n\nclass MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n}\n}\n</code></pre>\n\n<p>-while building these errors are listed</p>\n\n<p>Error: Only the Kotlin standard library is allowed to use the 'kotlin' package</p>\n\n<p>Error:Execution failed for task ':app:compileDebugKotlin'.</p>\n\n<blockquote>\n  <p>Compilation error.</p>\n</blockquote>\n\n<p>Any idea what's going on?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 4199, "user_id": 2396432, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6dfdd1980ae03024342e37a829d85777?s=128&d=identicon&r=PG", "display_name": "fasteque", "link": "https://stackoverflow.com/users/2396432/fasteque"}, "edited": false, "score": 0, "creation_date": 1455785940, "post_id": 35476698, "comment_id": 58647837, "body": "Do you mean the Android Gradle plugin right? Not the Build Tools. <code>com.android.tools.build:gradle:2.0.0-beta5</code>"}, {"owner": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "edited": false, "score": 0, "creation_date": 1455815601, "post_id": 35476698, "comment_id": 58669342, "body": "This is an open issue on Kotlin&#39;s issue tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-8007#\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-8007#</a>"}, {"owner": {"reputation": 93, "user_id": 5944708, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/XXV8J.png?s=128&g=1", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/5944708/hendrik"}, "edited": false, "score": 0, "creation_date": 1455882772, "post_id": 35476698, "comment_id": 58700431, "body": "thanks for pointing that out I guess for now I will hope for updates"}, {"owner": {"reputation": 22657, "user_id": 3372061, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/2jSi6.png?s=128&g=1", "display_name": "Dev-iL", "link": "https://stackoverflow.com/users/3372061/dev-il"}, "edited": false, "score": 0, "creation_date": 1455902114, "post_id": 35476698, "comment_id": 58712911, "body": "Could you please post your <code>app</code>&#39;s <code>build.gradle</code>? I ran into the same problem today. I am not using Kotlin directly, and I am quite convinced the error didn&#39;t happen because I updated Android Studio, but rather because of the update of one the dependencies (which itself uses Kotlin, whose latest version is buggy, as mentioned by <b>bj0</b>). Downgrading the dependency version to one where the project compiled correctly did it for me. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 5388, "user_id": 4466472, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dVZL1m5gSbk/AAAAAAAAAAI/AAAAAAAAAo4/d9rgwRgqTFk/photo.jpg?sz=128", "display_name": "Stoycho Andreev", "link": "https://stackoverflow.com/users/4466472/stoycho-andreev"}, "edited": false, "score": 0, "creation_date": 1480332271, "post_id": 35554329, "comment_id": 68903226, "body": "Agree with you but JetBrain need to fix this problem ,because Android  need it for sure. The new approach with DataBinding and ViewBindings in Android is really cool and Kotlin need to align to it."}], "tags": [], "owner": {"reputation": 1073, "user_id": 5198346, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AdJyWBGzKaU/AAAAAAAAAAI/AAAAAAAAAA8/fbHdA9-N4Tk/photo.jpg?sz=128", "display_name": "\u041c\u0430\u043a\u0441\u0438\u043c \u041c\u0430\u0440\u0442\u044b\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5198346/%d0%9c%d0%b0%d0%ba%d1%81%d0%b8%d0%bc-%d0%9c%d0%b0%d1%80%d1%82%d1%8b%d0%bd%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1456145795, "creation_date": 1456145795, "answer_id": 35554329, "question_id": 35476698, "link": "https://stackoverflow.com/questions/35476698/kotlin-and-android-databinding-buildtools-2-0-0/35554329#35554329", "title": "Kotlin and Android databinding (BuildTools 2.0.0)", "body": "<p>It is happens because android data binding written on Kotlin (it was announced on Android Dev Summit 2015 Framework Fireside Chat) preview version. In new version of Kotlin JetBrains clean language for realease. Svetlana Isakova told about this in one of her presentation. So this method was removed from lang what is cause of exception.</p>\n\n<p>I had remove binding from project for solving this problem</p>\n"}, {"tags": [], "owner": {"reputation": 254, "user_id": 1555322, "user_type": "registered", "profile_image": "https://graph.facebook.com/593812018/picture?type=large", "display_name": "sroj", "link": "https://stackoverflow.com/users/1555322/sroj"}, "is_accepted": true, "score": 2, "last_activity_date": 1456515718, "creation_date": 1456515718, "answer_id": 35660298, "question_id": 35476698, "link": "https://stackoverflow.com/questions/35476698/kotlin-and-android-databinding-buildtools-2-0-0/35660298#35660298", "title": "Kotlin and Android databinding (BuildTools 2.0.0)", "body": "<p>This was indeed happening to me while using the beta 5 version:</p>\n\n<p><code>classpath 'com.android.tools.build:gradle:2.0.0-beta5'</code></p>\n\n<p>You can upgrade now to the latest version (beta 6 as of today) and it should fix the problem for you:</p>\n\n<p><code>classpath 'com.android.tools.build:gradle:2.0.0-beta6'</code></p>\n"}], "owner": {"reputation": 93, "user_id": 5944708, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/XXV8J.png?s=128&g=1", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/5944708/hendrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 35660298, "answer_count": 2, "score": 3, "last_activity_date": 1478109922, "creation_date": 1455785426, "last_edit_date": 1478109922, "question_id": 35476698, "link": "https://stackoverflow.com/questions/35476698/kotlin-and-android-databinding-buildtools-2-0-0", "title": "Kotlin and Android databinding (BuildTools 2.0.0)", "body": "<p>In my Android project I am using <code>Kotlin</code> and Android Data binding. It works very well but now I wanted to update android gradle plugin to version 2.0.0-beta5. When building the project I get the following error: </p>\n\n<p>Exception is here</p>\n\n<pre><code>java.lang.RuntimeException: failure, see logs for details.\ncannot generate view binders java.lang.NoSuchMethodError: kotlin.text.StringsKt.split$default(Ljava/lang/CharSequence;[Ljava/lang/String;ZII)Ljava/util/List;\n    at android.databinding.tool.ext.ExtKt.androidId(ext.kt:76)\n    at android.databinding.tool.writer.LayoutBinderWriterKt$readableName$2.invoke(LayoutBinderWriter.kt:99)\n    at android.databinding.tool.writer.LayoutBinderWriterKt$readableName$2.invoke(LayoutBinderWriter.kt)\n    at android.databinding.tool.ext.LazyExt.getValue(ext.kt:27)\n    at android.databinding.tool.writer.LayoutBinderWriterKt.getReadableName(LayoutBinderWriter.kt)\n    at android.databinding.tool.LayoutBinder.&lt;init&gt;(LayoutBinder.java:202)\n    at android.databinding.tool.DataBinder.&lt;init&gt;(DataBinder.java:49)\n    at android.databinding.tool.CompilerChef.ensureDataBinder(CompilerChef.java:81)\n    at android.databinding.tool.CompilerChef.sealModels(CompilerChef.java:130)\n    at android.databinding.annotationprocessor.ProcessExpressions.writeResourceBundle(ProcessExpressions.java:149)\n    at android.databinding.annotationprocessor.ProcessExpressions.onHandleStep(ProcessExpressions.java:82)\n    at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.runStep(ProcessDataBinding.java:154)\n    at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.access$000(ProcessDataBinding.java:139)\n    at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:66)\n    at org.jetbrains.kotlin.annotation.AnnotationProcessorWrapper.process(AnnotationProcessorWrapper.kt:136)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:722)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1700(JavacProcessingEnvironment.java:97)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1029)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1163)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)\n    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)\n    at com.sun.tools.javac.main.Main.compile(Main.java:439)\n    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:132)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:45)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:33)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:101)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:50)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:36)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:34)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:157)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:139)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:93)\n    at com.android.build.gradle.tasks.factory.AndroidJavaCompile.compile(AndroidJavaCompile.java:39)\n    at sun.reflect.GeneratedMethodAccessor2323.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:75)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:244)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:220)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:231)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:209)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:66)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:50)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:25)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n    at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:154)\n    at org.gradle.internal.Factories$1.create(Factories.java:22)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:151)\n    at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:99)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:93)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:93)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:82)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:94)\n    at org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:46)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:43)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:28)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:48)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:66)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>did anyone already encounter this problem and is there a way to fix it?</p>\n"}, {"tags": ["android", "gradle", "kotlin", "kotlin-dokka"], "comments": [{"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 0, "creation_date": 1492084209, "post_id": 35470334, "comment_id": 73843811, "body": "The documentation states: You have to apply the dokka plugin <b>after</b> the kotlin and the <code>com.android.application</code> plugins. Try to change the order."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 1365763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a4fad2e1e9f30ef6cb26d217f86c8e?s=128&d=identicon&r=PG", "display_name": "Tiago Reul", "link": "https://stackoverflow.com/users/1365763/tiago-reul"}, "edited": false, "score": 0, "creation_date": 1455928210, "post_id": 35473101, "comment_id": 58725644, "body": "Thank you for your answer.  I&#39;ve updated to  kotlin <code>1.0.0</code> and Dokka <code>0.9.7</code>, but it still not working. Also, I removed all the other plugins, staying with <code>anko</code>, <code>dokka</code> and <code>spek</code> only, but I still can&#39;t get it to work. I&#39;m going to try to cut down <code>anko</code> in a separate project now."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 81, "user_id": 1365763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a4fad2e1e9f30ef6cb26d217f86c8e?s=128&d=identicon&r=PG", "display_name": "Tiago Reul", "link": "https://stackoverflow.com/users/1365763/tiago-reul"}, "edited": false, "score": 0, "creation_date": 1455963035, "post_id": 35473101, "comment_id": 58733478, "body": "@TiagoReul without more information of the build, hard to say what is going on.  You might need to try Kotlin forum discussions, or in Slack."}, {"owner": {"reputation": 1430, "user_id": 3046504, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fXIhi.jpg?s=128&g=1", "display_name": "Alexandre G", "link": "https://stackoverflow.com/users/3046504/alexandre-g"}, "edited": false, "score": 0, "creation_date": 1473664198, "post_id": 35473101, "comment_id": 66211884, "body": "and Kotlin <code>1.0.3</code> with Dokka <code>0.9.6</code>. Argh."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 2, "last_activity_date": 1473714755, "last_edit_date": 1473714755, "creation_date": 1455771046, "answer_id": 35473101, "question_id": 35470334, "link": "https://stackoverflow.com/questions/35470334/cant-get-dokka-to-generate-kotlin-docs-on-gradle-android-project/35473101#35473101", "title": "Can&#39;t get dokka to generate kotlin docs on gradle/android project", "body": "<p>Try Kotlin <code>1.0.0</code> release, with latest Dokka <code>0.9.7</code>.  You have a mismatch there.  The Kotlin plugin for Gradle and the Dokka versions must be compatible.  If you continue to have a conflict, it could be that you have another plugin conflicting with those.  </p>\n\n<p>Dokka <code>0.9.8</code> or newer no longer will conflict with the Kotlin compiler version if different.  It now contains what it needs embedded as shaded dependencies to avoid conflicts.</p>\n"}, {"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1570063753, "post_id": 35815235, "comment_id": 102799359, "body": "May you provide a link to the GitHub issue @eski. I&#39;m having an issue running the dokka task due to an added <code>buildType</code>."}, {"owner": {"reputation": 7699, "user_id": 1831151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXpvY.png?s=128&g=1", "display_name": "eski", "link": "https://stackoverflow.com/users/1831151/eski"}, "reply_to_user": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 1, "creation_date": 1570110569, "post_id": 35815235, "comment_id": 102816931, "body": "It was <a href=\"https://github.com/Kotlin/dokka/issues/61\" rel=\"nofollow noreferrer\">github.com/Kotlin/dokka/issues/61</a> but it looks like it&#39;s been fixed now"}], "tags": [], "owner": {"reputation": 7699, "user_id": 1831151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXpvY.png?s=128&g=1", "display_name": "eski", "link": "https://stackoverflow.com/users/1831151/eski"}, "is_accepted": false, "score": 2, "last_activity_date": 1570110537, "last_edit_date": 1570110537, "creation_date": 1457187720, "answer_id": 35815235, "question_id": 35470334, "link": "https://stackoverflow.com/questions/35470334/cant-get-dokka-to-generate-kotlin-docs-on-gradle-android-project/35815235#35815235", "title": "Can&#39;t get dokka to generate kotlin docs on gradle/android project", "body": "<p>[UPDATE] This is reported as fixed with <a href=\"https://github.com/Kotlin/dokka/pull/64\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/dokka/pull/64</a>.</p>\n\n<hr>\n\n<p>The problem is that the current version of dokka is unable to pick up the <em>sourceSets</em> defined within the <em>android</em> block of the build.gradle file.</p>\n\n<p>To work around this until it is fixed (I'll create an issue on the dokka Github repository), you can duplicate the sourceSets outside of the <em>android</em> block so that dokka can figure it out.</p>\n\n<pre><code>android {\n  ...\n\n  sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n    test.java.srcDirs += 'src/test/kotlin'\n  }\n}\n\nsourceSets {\n  main.java.srcDirs += 'src/main/kotlin'\n  test.java.srcDirs += 'src/test/kotlin\n}\n</code></pre>\n\n<p>I had the same problem and this fixed it for me.</p>\n"}, {"comments": [{"owner": {"reputation": 5049, "user_id": 5288316, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfc9b80e12b12bd4dd8a3953679d0c84?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/5288316/nicolas"}, "edited": false, "score": 1, "creation_date": 1571417599, "post_id": 37243831, "comment_id": 103247577, "body": "The android plugin was merged with the default one as of v0.10.0."}], "tags": [], "owner": {"reputation": 501, "user_id": 4882488, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/468cc55f6c985df33d4990fdf90c7d06?s=128&d=identicon&r=PG&f=1", "display_name": "Tin Man", "link": "https://stackoverflow.com/users/4882488/tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1571422950, "last_edit_date": 1571422950, "creation_date": 1463347572, "answer_id": 37243831, "question_id": 35470334, "link": "https://stackoverflow.com/questions/35470334/cant-get-dokka-to-generate-kotlin-docs-on-gradle-android-project/37243831#37243831", "title": "Can&#39;t get dokka to generate kotlin docs on gradle/android project", "body": "<p>The dokka documentation deals with Android separately:</p>\n\n<blockquote>\n  <p>If you are using Android there is a separate gradle plugin. Just make sure you apply the plugin after com.android.library and kotlin-android.</p>\n</blockquote>\n\n<p>Try using <code>classpath \"org.jetbrains.dokka:dokka-android-gradle-plugin:${versions.dokka}\"</code> as a dependency and adding <code>apply plugin: 'org.jetbrains.dokka-android'</code> to the end of your plugin list, removing <code>apply plugin: 'org.jetbrains.dokka'</code> from the beginning.</p>\n\n<p>EDIT: This should be fixed, as noted in the comment below.</p>\n"}, {"tags": [], "owner": {"reputation": 1754, "user_id": 7096016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ur81C.jpg?s=128&g=1", "display_name": "Alexander Savin", "link": "https://stackoverflow.com/users/7096016/alexander-savin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533311412, "creation_date": 1533311412, "answer_id": 51676204, "question_id": 35470334, "link": "https://stackoverflow.com/questions/35470334/cant-get-dokka-to-generate-kotlin-docs-on-gradle-android-project/51676204#51676204", "title": "Can&#39;t get dokka to generate kotlin docs on gradle/android project", "body": "<p>You can generate Dokka documentatiton without Dokka plugin... Use <a href=\"https://github.com/Vorlonsoft/GradleMavenPush\" rel=\"nofollow noreferrer\">GradleMavenPush</a>, it has <code>task androidDokka(type: Exec, dependsOn: dokkaInitializer)</code> and <code>task coreDokka(type: Exec, dependsOn: dokkaInitializer)</code></p>\n\n<pre><code>apply from: 'https://raw.github.com/Vorlonsoft/GradleMavenPush/master/maven-push.gradle'\n</code></pre>\n\n<p>Don't forgot to set <code>JAVADOC_BY_DOKKA = true</code></p>\n"}], "owner": {"reputation": 81, "user_id": 1365763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a4fad2e1e9f30ef6cb26d217f86c8e?s=128&d=identicon&r=PG", "display_name": "Tiago Reul", "link": "https://stackoverflow.com/users/1365763/tiago-reul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3297, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1571422950, "creation_date": 1455754285, "last_edit_date": 1457093951, "question_id": 35470334, "link": "https://stackoverflow.com/questions/35470334/cant-get-dokka-to-generate-kotlin-docs-on-gradle-android-project", "title": "Can&#39;t get dokka to generate kotlin docs on gradle/android project", "body": "<p>I'm following the gradle plugin section in <a href=\"https://github.com/Kotlin/dokka\" rel=\"noreferrer\">https://github.com/Kotlin/dokka</a> .</p>\n\n<p>I also tried the dokka-gradle-example example in <a href=\"https://github.com/JetBrains/kotlin-examples/tree/master/gradle/dokka-gradle-example\" rel=\"noreferrer\">https://github.com/JetBrains/kotlin-examples/tree/master/gradle/dokka-gradle-example</a> .</p>\n\n<p>The versions I'm using are:</p>\n\n<pre><code>android: '23.1.1'\ndokka: '0.9.6'\ngradle-android-plugin: '1.5.0'\nkotlin: '1.0.0-rc-1036'\n</code></pre>\n\n<p>but I also tried with Dokka versions from 0.9 up to 0.9.7.</p>\n\n<p>The relevant parts of the output are:</p>\n\n<pre><code>...\n\n:app:dokka FAILED\n:app:dokka (Thread[Daemon worker Thread 9,5,main]) completed. Took 0.766 secs.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:dokka'.\n&gt; com.intellij.mock.MockComponentManager.getPicoContainer()Lorg/picocontainer/MutablePicoContainer;\n\n* Try:\nRun with --debug option to get more log output.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:dokka'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\n    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\n    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:47)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:35)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:24)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.StartStopIfBuildAndStop.execute(StartStopIfBuildAndStop.java:33)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:71)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:69)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:69)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:70)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.DaemonHygieneAction.execute(DaemonHygieneAction.java:39)\n    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:46)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)\n    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)\nCaused by: java.lang.NoSuchMethodError: com.intellij.mock.MockComponentManager.getPicoContainer()Lorg/picocontainer/MutablePicoContainer;\n    at org.jetbrains.dokka.AnalysisEnvironment.createCoreEnvironment(AnalysisEnvironment.kt:78)\n    at org.jetbrains.dokka.Utilities.DokkaModule.configure(DokkaModule.kt:50)\n    at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340)\n    at com.google.inject.spi.Elements.getElements(Elements.java:110)\n    at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138)\n    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)\n    at com.google.inject.Guice.createInjector(Guice.java:96)\n    at com.google.inject.Guice.createInjector(Guice.java:73)\n    at com.google.inject.Guice.createInjector(Guice.java:62)\n    at org.jetbrains.dokka.DokkaGenerator.generate(main.kt:160)\n    at org.jetbrains.dokka.gradle.DokkaTask.generate(main.kt:63)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.doExecute(AnnotationProcessingTaskFactory.java:218)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\n    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:579)\n    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:562)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n    ... 54 more\n\n\nBUILD FAILED\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I'm including the build files:</p>\n\n<p>main <code>build.gradle</code>:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n\n    ext.versions = [\n            android: '23.1.1',\n            anko: '0.8.2',\n            dokka: '0.9.6',\n            gradleAndroid: '1.5.0',\n            kotlin: '1.0.0',\n            spek: '0.1.194'\n    ]\n\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$versions.gradleAndroid\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Module <code>app/build.gradle</code>: </p>\n\n<pre><code>buildscript {\n    repositories {\n        mavenLocal()\n        mavenCentral()\n        jcenter()\n    }\n\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$versions.gradleAndroid\"\n        classpath \"org.jetbrains.dokka:dokka-gradle-plugin:${versions.dokka}\"\n    }\n\n}\n\napply plugin: 'org.jetbrains.dokka'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nrepositories {\n    jcenter()\n    maven {\n        url \"http://repository.jetbrains.com/all\"\n    }\n}\n\nandroid {\n    sourceCompatibility = 1.5\n\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n\n    defaultConfig {\n        applicationId \"com.example\"\n        minSdkVersion 15\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n\n        buildTypes {\n            debug {\n                testCoverageEnabled true\n            }\n        }\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n        test.java.srcDirs += 'src/test/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile \"com.android.support:appcompat-v7:$versions.android\"\n    compile \"com.android.support:design:$versions.android\"\n    compile \"com.android.support:cardview-v7:$versions.android\"\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$versions.kotlin\"\n\n    compile \"org.jetbrains.anko:anko-common:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-sdk15:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-support-v4:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-design:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-appcompat-v7:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-cardview-v7:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-recyclerview-v7:$versions.anko\"\n    compile \"org.jetbrains.anko:anko-gridlayout-v7:$versions.anko\"\n\n    testCompile \"org.jetbrains.spek:spek:$versions.spek\"\n    testCompile \"org.jetbrains.kotlin:kotlin-stdlib:$versions.kotlin\"\n}\n\ndokka {\n}\n</code></pre>\n"}]