[{"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 4398390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bb69f7c3a46c85456969a9b4380510d?s=128&d=identicon&r=PG&f=1", "display_name": "AGDownie", "link": "https://stackoverflow.com/users/4398390/agdownie"}, "is_accepted": true, "score": 0, "last_activity_date": 1556753781, "last_edit_date": 1556753781, "creation_date": 1556753232, "answer_id": 55943903, "question_id": 55943617, "link": "https://stackoverflow.com/questions/55943617/scroll-to-move-to-next-set-of-views-in-recycler-view-in-android/55943903#55943903", "title": "Scroll to move to next set of views in Recycler view in Android", "body": "<p>Take a look at <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/PagerSnapHelper?hl=en\" rel=\"nofollow noreferrer\">PagerSnapHelper</a> or <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/LinearSnapHelper.html\" rel=\"nofollow noreferrer\">LinearSnapHelper</a>.  Your use case is the sort of thing these were designed for.</p>\n"}], "owner": {"reputation": 105, "user_id": 4419375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a94ba52a3bd5f853f0013ecb4df12fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Rami", "link": "https://stackoverflow.com/users/4419375/rami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55943903, "answer_count": 1, "score": 0, "last_activity_date": 1556753781, "creation_date": 1556750675, "question_id": 55943617, "link": "https://stackoverflow.com/questions/55943617/scroll-to-move-to-next-set-of-views-in-recycler-view-in-android", "title": "Scroll to move to next set of views in Recycler view in Android", "body": "<p>I have a horizontal recycler view that displays dates. I can scroll it back and forth horizontally to view the dates.</p>\n\n<p>I am looking for an option where when user snaps I show next set of dates.</p>\n\n<p>Example , if the dates shown are : 1 2 3 4 5 6 7\nUpon snapping once, I want to see the next set : 8 9 10 11 12 13 14</p>\n"}, {"tags": ["android", "class", "variables", "android-activity", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556750068, "post_id": 55943530, "comment_id": 98540177, "body": "<code>myClass.searchSeries(object: OnDataListener {</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11402938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10a6edc92d5ebc43ed484e9d519c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Lien", "link": "https://stackoverflow.com/users/11402938/joseph-lien"}, "is_accepted": false, "score": 1, "last_activity_date": 1556760626, "creation_date": 1556760626, "answer_id": 55944604, "question_id": 55943530, "link": "https://stackoverflow.com/questions/55943530/how-to-get-a-variable-from-another-class-in-kotlin/55944604#55944604", "title": "How to get a variable from another class in kotlin?", "body": "<p>What is <code>OnDataListener</code>? Not really sure it is interface or abstract class, so I' ll write some pseudo code.</p>\n\n<p>First change your function <code>searchSeries</code>'s params to </p>\n\n<p><code>searchSeries(text: String, listener: OnDataListener)</code></p>\n\n<p>So in the class <code>Series</code>, you can get the data in your function <code>searchSeries</code>:</p>\n\n<pre><code>    override fun searchSeries(text: String, listener: OnDataListener) {\n    // ... \n    // you can get the \"text\" string\n    }\n</code></pre>\n\n<p>Then edit your <code>SearActivity</code>'s listener:</p>\n\n<pre><code>    class SearchActivity : AppCompatActivity() {\n\n        var botaoSearch: AppCompatImageButton? = null\n\n        // create class \"Series\"\n        val series = Series()\n\n        override fun onCreate(savedInstanceState: Bundle?) {\n            super.onCreate(savedInstanceState)\n            setContentView(R.layout.activity_search)\n\n            botaoSearch = findViewById(R.id.btn_search)\n\n            botaoSearch?.setOnClickListener {\n\n                var nomeSeries = editTextSerie.text.toString().trim()\n                searchSeries(nomeSeries)\n            }\n        }\n\n        private fun searchSeries(text: String) {\n\n            series.searchSeries(text, object : OnDataListener {\n\n                override onSuccess(a0: ...) {\n\n                }\n\n                override onFailure(message: String) {\n\n                }\n            })\n\n        }\n    }\n\n</code></pre>\n\n<p>If <code>OnDataListener</code> is a abstract class:</p>\n\n<pre><code>    series.searchSeries(text, object : OnDataListener() {\n\n        override onSuccess(a0: ...) {\n\n        }\n\n        override onFailure(message: String) {\n\n        }\n    })\n\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 11439101, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LQq-U7z-5Mc/AAAAAAAAAAI/AAAAAAAADFs/X0gw7GbGF_o/photo.jpg?sz=128", "display_name": "RAINAN BOMFIM", "link": "https://stackoverflow.com/users/11439101/rainan-bomfim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2037, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559058369, "creation_date": 1556749952, "last_edit_date": 1559058369, "question_id": 55943530, "link": "https://stackoverflow.com/questions/55943530/how-to-get-a-variable-from-another-class-in-kotlin", "title": "How to get a variable from another class in kotlin?", "body": "<p>I want to get a variable from an activity and use it in another class.\nThis variable will be filled by an user in a editText that is called editTextSerie</p>\n\n<pre><code> override fun searchSeries(listener: OnDataListener) {\n\n        val retrofit = Retrofit.Builder().addConverterFactory(GsonConverterFactory.create())\n            .baseUrl(\"http://api.themoviedb.org/3/\")\n            .build()\n\n        val client = retrofit.create(MovieDBApiInterface::class.java)\n\n        val objetoClasse1 = SearchActivity()\n\n        var nomeS = objetoClasse1.editTextSerie.text.toString().trim()\n\n\n        val responseCall = client.searchSeries(\"API_KEY\", \"pt-BR\", nomeS)\n\n        responseCall.enqueue(object : Callback&lt;AllSeriesResponse&gt; {\n            override fun onResponse(call: Call&lt;AllSeriesResponse&gt;?, response1: Response&lt;AllSeriesResponse&gt;?) {\n                listener.onSuccess(response1!!.body()!!.results)\n            }\n\n            override fun onFailure(call: Call&lt;AllSeriesResponse&gt;?, t: Throwable?) {\n                listener.onFailure(t!!.message.toString())\n            }\n        })\n    }\n</code></pre>\n\n<p>This function \"searchSeries\" is from the class \"Series\".</p>\n\n<p>I want to get the \"editTextSerie\" from another class called \"Search Activity\", \nso i created the variable \"nomeS\" to receive the value of it.</p>\n\n<pre><code>class SearchActivity : AppCompatActivity() {\n\n    var botaoSearch: AppCompatImageButton? = null\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_search)\n\n\n\n        botaoSearch = findViewById(R.id.btn_search)\n\n        botaoSearch?.setOnClickListener {\n\n\n          var nomeSerie = editTextSerie.text.toString().trim()\n\n\n        }\n    }\n}\n</code></pre>\n\n<p>I want to receive this value (value of editTextSerie comes from the XML of SearchActivity ) and use it at responseCall with the \"nomeS\" variable</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "textview"], "comments": [{"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1556750094, "post_id": 55943481, "comment_id": 98540186, "body": "this method <code>checkMandatoryReviewConditions()</code> just returns after setting a new <code>View.OnFocusChangeListener</code> on the <code>EditText</code> and doesn&#39;t change this <code>reviewConditionsOk</code> instance variable, so this condition <code>!reviewConditionsOk</code> is never met. You can confirm this with logging as the first line of the click listener, before any logic .."}], "answers": [{"tags": [], "owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "is_accepted": false, "score": 0, "last_activity_date": 1556751133, "creation_date": 1556751133, "answer_id": 55943681, "question_id": 55943481, "link": "https://stackoverflow.com/questions/55943481/textview-onclicklistener-does-not-recognize-the-click/55943681#55943681", "title": "TextView onClickListener does not recognize the click", "body": "<p>I tested the code along with the code myself and found no problem with the click listener. The event is triggered correctly. You need to modify the following condition so that it shows the <code>Toast</code> that you want to get. </p>\n\n<pre><code>if (!reviewText.text.isEmpty() &amp;&amp; !reviewConditionsOk) // Fix this \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556751312, "creation_date": 1556749581, "last_edit_date": 1556751312, "question_id": 55943481, "link": "https://stackoverflow.com/questions/55943481/textview-onclicklistener-does-not-recognize-the-click", "title": "TextView onClickListener does not recognize the click", "body": "<p>Basically, I have a layout with an EditTex with multiline input type and a clickable <code>TextView</code>. The problem comes when I click the <code>TextView</code> It seems that setOnClcickListener isn't working properly. </p>\n\n<p>The debugger of the code shows that the listener doesn't recognize the click.</p>\n\n<p>Activity layout: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;EditText\n        android:id=\"@+id/reviewText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:layout_marginBottom=\"8dp\"\n        android:gravity=\"start\"\n        android:inputType=\"textPassword\"\n        android:textAlignment=\"textStart\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.069\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/submitReviewTextView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:layout_marginBottom=\"8dp\"\n        android:clickable=\"true\"\n        android:focusable=\"true\"\n        android:text=\"Enviar Cr\u00edtica\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.974\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/reviewText\"\n        app:layout_constraintVertical_bias=\"0.575\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>And the Activity code:</p>\n\n<pre><code>package com.example.myapplication\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport android.view.View\nimport android.widget.Toast\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    private var reviewConditionsOk = true\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        submitReviewTextView.setOnClickListener {\n            checkMandatoryReviewConditions()\n            if (!reviewText.text.isEmpty() &amp;&amp; !reviewConditionsOk) {\n                Log.d(\"Test\", \"Button Clicked\")\n                Toast.makeText(applicationContext,\n                    \"La cr\u00edtica no a de estar vac\u00eda y tiene que tener un m\u00ednimo de 5 l\u00edneas.\",\n                    Toast.LENGTH_LONG\n                ).show()\n            }\n        }\n    }\n\n    override fun onBackPressed() {\n        super.onBackPressed()\n        finish()\n    }\n\n    private fun checkMandatoryReviewConditions() {\n        reviewText.onFocusChangeListener = View.OnFocusChangeListener { _, hasFocus -&gt;\n            if (hasFocus) {\n                reviewConditionsOk = reviewText.text.toString().trim().length &lt; 5\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["spring", "kotlin", "spring-amqp"], "answers": [{"tags": [], "owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "is_accepted": true, "score": 0, "last_activity_date": 1556746799, "creation_date": 1556746799, "answer_id": 55943041, "question_id": 55942835, "link": "https://stackoverflow.com/questions/55942835/compose-a-custom-spring-annotation-with-a-parameter/55943041#55943041", "title": "Compose a custom spring annotation with a parameter?", "body": "<p>It's not going to work because a custom annotation must refer somehow to the meta-annotation. The <code>@RabbitListener</code> doesn't have a <code>value()</code> attribute. Although you can try with an <code>@AliasFor</code>. See its JavaDocs for more info.</p>\n\n<p>Nevertheless I'm not sure in your goal. You declare a <code>@RabbitListener</code> with some <code>bindings</code> and its result is going to be used in the target listener container. Any additional queues (e.g. via <code>queues()</code>) are going to be used in the container as well, even if you will be able to achieve design with the <code>@AliasFor</code>. Is that what you expect?</p>\n"}], "owner": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 55943041, "answer_count": 1, "score": 0, "last_activity_date": 1556746799, "creation_date": 1556745563, "question_id": 55942835, "link": "https://stackoverflow.com/questions/55942835/compose-a-custom-spring-annotation-with-a-parameter", "title": "Compose a custom spring annotation with a parameter?", "body": "<p>is it possible to turn this annotation</p>\n\n<pre><code>@RabbitListener(\n    bindings = [QueueBinding(\n        key = [Amqp.FOLEY_NEW],\n        value = Queue(Amqp.FOLEY_NEW),\n        exchange = Exchange(name = \"amq.topic\", type = ExchangeTypes.TOPIC  )\n    )]\n)\n</code></pre>\n\n<p>into a custom annotation that simply takes the queue name as a parameter?</p>\n\n<p>giving this a go, but I don't see that I can reference <code>Listener.value</code></p>\n\n<pre><code>@Target(AnnotationTarget.FUNCTION)\n@Retention\n@RabbitListener(\n    bindings = [QueueBinding(\n        key = [Amqp.FOLEY_NEW],\n        value = Queue(Amqp.FOLEY_NEW),\n        exchange = Exchange(name = \"amq.topic\", type = ExchangeTypes.TOPIC  )\n    )]\n)\nannotation class Listener( val value: String )\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-asynctask"], "comments": [{"owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1556745396, "post_id": 55942296, "comment_id": 98538821, "body": "Obviously <code>completionCode = null</code> so you can not call any methods on a null object. You can pass your AsyncValue in the constructor which is <code>this</code> in this case. Like <code>InsertTratamientoAsyncTask(tratamientoDao, this).execute()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 4602575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EngNm.jpg?s=128&g=1", "display_name": "Pedro R.", "link": "https://stackoverflow.com/users/4602575/pedro-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1556748193, "last_edit_date": 1556748193, "creation_date": 1556746599, "answer_id": 55943008, "question_id": 55942296, "link": "https://stackoverflow.com/questions/55942296/returning-a-value-from-asynctask-in-kotlin/55943008#55943008", "title": "Returning a value from AsyncTask in Kotlin", "body": "<p>There is probably a way, but I prefer using coroutines.\nLike for example:</p>\n\n<pre><code>val tratamiento = GetTratamiento()//or whatever you do to get the object\nvar result = 0\nvar scope = CoroutineScope(Job() + Dispatchers.IO)\nscope.launch {\n  result = tratamientoDao.insert(tratamiento)\n}\n\n</code></pre>\n\n<p>Remember to add the coroutines to the app build.gradle </p>\n\n<p><code>implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-android:0.27.0-eap13\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 1402, "user_id": 1505493, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rvTS0.jpg?s=128&g=1", "display_name": "Karan Sharma", "link": "https://stackoverflow.com/users/1505493/karan-sharma"}, "edited": false, "score": 0, "creation_date": 1584180349, "post_id": 55943418, "comment_id": 107361271, "body": "i know this answer is an year old, but just for new users, this library is now deprecated."}], "tags": [], "owner": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "is_accepted": false, "score": 0, "last_activity_date": 1556749130, "creation_date": 1556749130, "answer_id": 55943418, "question_id": 55942296, "link": "https://stackoverflow.com/questions/55942296/returning-a-value-from-asynctask-in-kotlin/55943418#55943418", "title": "Returning a value from AsyncTask in Kotlin", "body": "<p>The best way to handle AyncTask in Kotlin is using the Anko library for doing background task. It simplifies a lot the use of it. Just like this: </p>\n\n<pre><code>doAsync {\n    var result = runLongTask()\n    uiThread {\n        toast(result)\n    }\n}\n</code></pre>\n\n<p>For more information check this article: </p>\n\n<p><a href=\"https://antonioleiva.com/anko-background-kotlin-android/\" rel=\"nofollow noreferrer\">https://antonioleiva.com/anko-background-kotlin-android/</a></p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 11211181, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o42mzcOLaTg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcIPqzC_QKCuQzTmh2hsBLlFs3dXA/mo/photo.jpg?sz=128", "display_name": "Riyasa Mansil", "link": "https://stackoverflow.com/users/11211181/riyasa-mansil"}, "is_accepted": false, "score": 1, "last_activity_date": 1556823287, "creation_date": 1556823287, "answer_id": 55958577, "question_id": 55942296, "link": "https://stackoverflow.com/questions/55942296/returning-a-value-from-asynctask-in-kotlin/55958577#55958577", "title": "Returning a value from AsyncTask in Kotlin", "body": "<p>This is the way to return a value from AsyncTask you can convert in to Kotlin and try this </p>\n\n<pre><code>public class MyClass extends Activity {\n\n private class myTask extends AsyncTask&lt;Void, Void, String&gt; { \n\n    protected Void doInBackground(String... params) { \n      //do stuff return results; \n    } \n\n   @Override protected void onPostExecute(String result) { \n     //do stuff \n     myMethod(myValue); \n   } \n }\n\n private myValueType myMethod(String myValue) { \n   //handle value \n   return myValueType; \n } \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1402, "user_id": 1505493, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rvTS0.jpg?s=128&g=1", "display_name": "Karan Sharma", "link": "https://stackoverflow.com/users/1505493/karan-sharma"}, "edited": false, "score": 1, "creation_date": 1584187956, "post_id": 59418051, "comment_id": 107362940, "body": "I spent full day figuring out how this works, The best answer and +1 for using co-routines. However just an update, instead of using Dispatchers.Main, it would be nice to use Dispatcher.IO"}], "tags": [], "owner": {"reputation": 1593, "user_id": 688689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f8b3028279d9c29a3ee4c5d0f5fe6a23?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Favero", "link": "https://stackoverflow.com/users/688689/diego-favero"}, "is_accepted": false, "score": 3, "last_activity_date": 1576797228, "creation_date": 1576797228, "answer_id": 59418051, "question_id": 55942296, "link": "https://stackoverflow.com/questions/55942296/returning-a-value-from-asynctask-in-kotlin/59418051#59418051", "title": "Returning a value from AsyncTask in Kotlin", "body": "<p>I spent a full day trying to figure this and, co-routines was my solution !!!</p>\n\n<p>First, create your AsyncTask Object ... Do not forget to use corrects parameter type instead all Any</p>\n\n<pre><code>@SuppressLint(\"StaticFieldLeak\")\nclass AsyncTaskExample(private var activity: MainActivity?) : AsyncTask&lt;Any, Int, Any?&gt;() {\n\n    override fun onPreExecute() {\n        super.onPreExecute()\n        // do pre stuff such show progress bar\n    }\n\n    override fun doInBackground(vararg req: Any?): Any? {\n\n        // here comes your code that will produce the desired result\n        return result \n\n    }\n\n    // it will update your progressbar\n    override fun onProgressUpdate(vararg values: Int?) {\n        super.onProgressUpdate(*values)\n\n    }\n\n\n    override fun onPostExecute(result: Any?) {\n        super.onPostExecute(result)\n\n        // do what needed on pos execute, like to hide progress bar\n        return\n    }\n\n}\n</code></pre>\n\n<p>and Then, call it ( in this case, from main activity )</p>\n\n<pre><code>var task = AsyncTaskExample(this)\nvar req = { \"some data object or whatever\" }\n\nGlobalScope.launch( context = Dispatchers.Main){\n\n   task?.execute(req)\n}\n\nGlobalScope.launch( context = Dispatchers.Main){\n\n   println( \"Thats the result produced by doInBackgorund: \" +  task?.get().toString() )\n}\n</code></pre>\n"}], "owner": {"reputation": 904, "user_id": 7102009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-E7w9qXEZq10/AAAAAAAAAAI/AAAAAAAAAJw/-sA4BTZUh1Q/photo.jpg?sz=128", "display_name": "Eduardo Corona", "link": "https://stackoverflow.com/users/7102009/eduardo-corona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3018, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1576797228, "creation_date": 1556742303, "last_edit_date": 1556902611, "question_id": 55942296, "link": "https://stackoverflow.com/questions/55942296/returning-a-value-from-asynctask-in-kotlin", "title": "Returning a value from AsyncTask in Kotlin", "body": "<p>I'm making an Android app that follows the MVVM pattern using Room and LiveData, but I need to return the ID of the last insertion in one table because is used to add values in other table where the ID is the foreign key, I know that I can achive this returning it from the DAO:</p>\n\n<pre><code>@Dao\ninterface TratamientoDao {\n    @Insert\n    fun insert(tratamiento : Tratamiento): Long\n}\n</code></pre>\n\n<p>But the problem is that I need to return a value from the AsyncTask that inserts the new entry,I tried the approach explained in this question: <a href=\"https://stackoverflow.com/questions/12575068/how-to-get-the-result-of-onpostexecute-to-main-activity-because-asynctask-is-a\">How to get the result of OnPostExecute() to main activity because AsyncTask is a separate class?</a></p>\n\n<p>But In my case the method processFinish is never called.</p>\n\n<p>This is my code: </p>\n\n<pre><code>interface AsyncValue{\n    fun processFinish(lastID: Long?) : Long?\n}\n\nclass TratamientoRepository (application: Application): AsyncValue {\n\n    val tratamientoDao : TratamientoDao\n\n    init{\n        val database = MMRDataBase.getInstance(application)\n        tratamientoDao = database.tratamientoDao()\n    }\n\n    fun insert(tratamiento: Tratamiento) : Long? {\n        InsertTratamientoAsyncTask(tratamientoDao).execute(tratamiento)\n        return 45\n    }\n\n    override fun processFinish(lastID: Long?): Long? {\n        Log.d(\"ValorIngresado:\", lastID.toString())\n        return lastID\n    }\n\n\n    private class InsertTratamientoAsyncTask constructor(private val tratamientoDao: TratamientoDao) : AsyncTask&lt;Tratamiento, Void, Long&gt;(){\n\n        var  completionCode : AsyncValue? = null\n        override fun doInBackground(vararg params: Tratamiento): Long?{\n\n            return tratamientoDao.insert(params[0])\n        }\n\n        override fun onPostExecute(result: Long?) {\n           completionCode?.processFinish(result)\n            //Log.i(\"TAMANO\", result.toString())\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>So, How can I return a value from an AsyncTask in Kotlin?</p>\n"}, {"tags": ["java", "kotlin", "parse-platform", "back4app", "parse-android-sdk"], "answers": [{"tags": [], "owner": {"reputation": 925, "user_id": 4471305, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/gBT6h.jpg?s=128&g=1", "display_name": "Tom Fox", "link": "https://stackoverflow.com/users/4471305/tom-fox"}, "is_accepted": true, "score": 1, "last_activity_date": 1556746329, "creation_date": 1556746329, "answer_id": 55942971, "question_id": 55942069, "link": "https://stackoverflow.com/questions/55942069/convert-string-to-parseobject/55942971#55942971", "title": "Convert String to ParseObject", "body": "<p>You can create a <code>ParseObject</code> with just the <code>objectId</code> and class name using the method shown below...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ParseObject.createWithoutData(\"ClassName\", \"objectId\")\n</code></pre>\n\n<p>You will need to use the <code>fetchIfNeededInBackground()</code> function to fetch the data for the <code>ParseObject</code> if you require it.</p>\n"}], "owner": {"reputation": 805, "user_id": 7592874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TTxYG.png?s=128&g=1", "display_name": "Zacktamondo", "link": "https://stackoverflow.com/users/7592874/zacktamondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 55942971, "answer_count": 1, "score": 1, "last_activity_date": 1556752725, "creation_date": 1556741210, "last_edit_date": 1556752725, "question_id": 55942069, "link": "https://stackoverflow.com/questions/55942069/convert-string-to-parseobject", "title": "Convert String to ParseObject", "body": "<p>I am using the Parse Android SDK and I have an <code>objectId</code> as a <code>String</code> and I want to convert it to a <code>ParseObject</code> what is the best way either in Kotlin or Java?</p>\n"}, {"tags": ["java", "spring", "kotlin", "spring-security", "spring-data-jpa"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 1, "creation_date": 1556743953, "post_id": 55941695, "comment_id": 98538328, "body": "Why not injecting the Principal/Authentication in the RestController and provide it to the service, and let the service handle the authentication?"}, {"owner": {"reputation": 100, "user_id": 5703965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fad14cf3867b87277f1b5046695ee6?s=128&d=identicon&r=PG&f=1", "display_name": "qwaler", "link": "https://stackoverflow.com/users/5703965/qwaler"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556745516, "post_id": 55941695, "comment_id": 98538869, "body": "This is the simplest but most annoying solution for this problem. Every endpoint would need to add Principal as a parameter and it&#39;s needed to pass further. Second, I would need to use some Util class everywhere to get userId. When I do this on JpaRepository level, I think this is the most elegant solution and most appropriate, because I&#39;m dealing with authorization granting on data level. Service and RestController does not know anything about a user and code is much cleaner."}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556746342, "post_id": 55941695, "comment_id": 98539166, "body": "i like clear and understandable code even if writing is annoying ;-)"}, {"owner": {"reputation": 100, "user_id": 5703965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fad14cf3867b87277f1b5046695ee6?s=128&d=identicon&r=PG&f=1", "display_name": "qwaler", "link": "https://stackoverflow.com/users/5703965/qwaler"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556747523, "post_id": 55941695, "comment_id": 98539487, "body": "Do you suggest that in your opinion my solution is less clear than passing every time Principal inside service methods?"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556753101, "post_id": 55941695, "comment_id": 98540782, "body": "At least i suggest that &quot;annoying&quot; is no argument for a solution to be good or bad. In my case I pass the principal every time into the service methods, cause if you read the method you know about authentication, the data layer therefore is pretty stupid  .. on the other hand is the auditing feature something i don&#39;t know yet, after reading it looks pretty usefull. But you have to know about that - and this might be some risk"}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 5703965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fad14cf3867b87277f1b5046695ee6?s=128&d=identicon&r=PG&f=1", "display_name": "qwaler", "link": "https://stackoverflow.com/users/5703965/qwaler"}, "is_accepted": true, "score": 0, "last_activity_date": 1556744501, "creation_date": 1556744501, "answer_id": 55942671, "question_id": 55941695, "link": "https://stackoverflow.com/questions/55941695/spring-data-jpa-is-it-possible-to-update-an-entity-with-principal-before-persi/55942671#55942671", "title": "Spring Data JPA - Is it possible to update an entity with principal before persisting it inside a repository?", "body": "<p>The solution is actually quite simple, but I didn't know what am I was looking for. Still, I do not know if this is a canonical solution. I use Jpa Auditing for this. First, I added <code>@CreatedBy</code> annotation to the field I wanted to be updated before an insertion inside my entity. The entity class I also annotated with <code>@EntityListeners(AuditingEntityListener::class)</code>. Note that it was needed to change <code>val</code> keyword to <code>var</code> (from <code>final</code> field to non-final field in Java world).</p>\n\n<pre><code>@Entity\n@Table(name = \"tasks\")\n@EntityListeners(AuditingEntityListener::class)\ndata class Task(\n        @NotBlank\n        val name: String,\n\n        val description: String?,\n\n        @Id\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\n        @SequenceGenerator(name = \"task_id_seq\")\n        val id: Long = 0,\n\n        @UUID\n        @CreatedBy\n        var userId: String? = null\n    )\n</code></pre>\n\n<p>The next step was to implement <code>interface AuditorAware&lt;T&gt;</code> and make it visible for Spring by using @Component (or creating a bean inside config class)</p>\n\n<pre><code>@Component\nclass SpringSecurityAuditorAware : AuditorAware&lt;String&gt; {\n\n    override fun getCurrentAuditor(): Optional&lt;String&gt; {\n        return Optional.ofNullable(SecurityContextHolder.getContext()?.authentication)\n                .filter { authentication -&gt; authentication.isAuthenticated }\n                .map { authentication -&gt; authentication.principal as Jwt }\n                .map { jwt -&gt; jwt.claims[\"sub\"] as String? }\n    }\n\n}\n</code></pre>\n\n<p>Last, but not least, was adding a @EnableJpaAuditing on some Configuration class:</p>\n\n<pre><code>@Configuration\n@EnableJpaAuditing\nclass ResourceServerContext\n</code></pre>\n"}], "owner": {"reputation": 100, "user_id": 5703965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fad14cf3867b87277f1b5046695ee6?s=128&d=identicon&r=PG&f=1", "display_name": "qwaler", "link": "https://stackoverflow.com/users/5703965/qwaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 55942671, "answer_count": 1, "score": 0, "last_activity_date": 1556744501, "creation_date": 1556739325, "question_id": 55941695, "link": "https://stackoverflow.com/questions/55941695/spring-data-jpa-is-it-possible-to-update-an-entity-with-principal-before-persi", "title": "Spring Data JPA - Is it possible to update an entity with principal before persisting it inside a repository?", "body": "<p>I would like to secure my Resource Server with Spring Security 5 to be usable for many users. I have an entity <code>Task</code> which contains a field <code>userId</code>.</p>\n\n<pre><code>@Entity\n@Table(name = \"tasks\")\ndata class Task(\n    @NotBlank\n    val name: String,\n\n    val description: String?,\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @SequenceGenerator(name = \"task_id_seq\")\n    val id: Long = 0,\n\n    @UUID //custom validation annotation\n    val userId: String? = null\n)\n</code></pre>\n\n<p>I found a method to use SpEL to inject JWT principal inside query. What I have already done is I have overridden <code>findAll()</code> method in my <code>interface TaskRepository : JpaRepository&lt;Task, Long&gt;</code> with <code>@Query</code> annotation:</p>\n\n<pre><code>@Query(\"select t from Task t where t.userId = :#{principal.claims['sub']}\")\n//sub is a userId in OpenID Connect 1.0, claim is a Map&lt;String, Object&gt;\noverride fun findAll(): List&lt;Task&gt;\n</code></pre>\n\n<p>The problem is that i would like to do something similar with <code>save()</code> method. The only thing I have found is to do an update on already saved entity. I created a completely new method:</p>\n\n<pre><code>@Modifying\n@Query(\"update Task t set t.userId = :#{principal.claims['sub']} where t.id = :id\")\nfun setUserId(@Param(\"id\") id: Long)\n</code></pre>\n\n<p>but the problem is that I need to call this method in my TaskService, what looks like this:</p>\n\n<pre><code>@Transactional\nfun createTask(taskDto: CreateTaskDto): Task {\n    val task = taskRepository.save(taskDto.toEntity())\n    taskRepository.setUserId(task.id)\n    return task\n}\n</code></pre>\n\n<p>Is it possible to add this information automatically every time I save an entity in my database? Then my code inside TaskService would look like this:</p>\n\n<pre><code>@Transactional\nfun createTask(taskDto: CreateTaskDto): Task {\n    return taskRepository.save(taskDto.toEntity())\n}\n</code></pre>\n"}, {"tags": ["java", "arrays", "kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1556762911, "post_id": 55941279, "comment_id": 98542409, "body": "Your byte array in the example should be <code>byteArrayOf(0, 0x14, 0x5, 0x22, 0x32, 0x8)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1383, "user_id": 497753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0e5e5ac2af76d5bf54a90a5c0b3ead9?s=128&d=identicon&r=PG&f=1", "display_name": "Mannie", "link": "https://stackoverflow.com/users/497753/mannie"}, "edited": false, "score": 0, "creation_date": 1556739131, "post_id": 55941480, "comment_id": 98536505, "body": "this is what is confusing me as well as they only talk about converting decimal ints to hex - e,g, the temp it was &#39;14C&#39;, then what would the byte[1] value be. I don&#39;t have any control over the byte[6] dataset that is being returned - that is hardward."}, {"owner": {"reputation": 541, "user_id": 7681514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de30ed8fc4693b6f107ca4b5479ae76?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7681514/matt"}, "reply_to_user": {"reputation": 1383, "user_id": 497753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0e5e5ac2af76d5bf54a90a5c0b3ead9?s=128&d=identicon&r=PG&f=1", "display_name": "Mannie", "link": "https://stackoverflow.com/users/497753/mannie"}, "edited": false, "score": 0, "creation_date": 1556739283, "post_id": 55941480, "comment_id": 98536577, "body": "If the temperature was &#39;14C&#39;, and you have no control over the type of array you have AND those numbers should already be in their hex format, that number in the array would just be <code>d</code>."}], "tags": [], "owner": {"reputation": 541, "user_id": 7681514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de30ed8fc4693b6f107ca4b5479ae76?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7681514/matt"}, "is_accepted": true, "score": 3, "last_activity_date": 1556740253, "last_edit_date": 1556740253, "creation_date": 1556738284, "answer_id": 55941480, "question_id": 55941279, "link": "https://stackoverflow.com/questions/55941279/array-of-bytes-as-hex-conversion-to-int-issue-kotlin-java/55941480#55941480", "title": "Array of Bytes (as hex) conversion to Int issue. (Kotlin/Java)", "body": "<p>A key thing you are missing here is that when passing in the <code>it</code> parameter to <code>String#format</code>, that value is a <em>decimal</em> <code>int</code>, not a <em>hexadecimal</em> <code>int</code>.</p>\n\n<p>You instead want to map the value in the array directly to a string, then get its decimal value:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>byte it = 14;\nint x = Integer.parseInt(String.valueOf(it), 16);\nSystem.out.println(x); // This will print 20\n</code></pre>\n\n<p>This should get you the expected result.</p>\n\n<hr>\n\n<p>Note, your problem is slightly confusing because the numbers in your byte array are decimal numbers...already in their hex 'format'. There are a few ways this confusion can be fixed (assuming you have control of the array's type and/or contents):</p>\n\n<ul>\n<li>Use <code>String</code> instead of <code>byte</code></li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>String it = \"14\";\nint x = Integer.parseInt(it, 16);\nSystem.out.println(x); // This will print 20\n</code></pre>\n\n<ul>\n<li>Store the values as hex and still convert (i.e., putting a <code>0x</code> in front of each number)</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>byte it = 0x14;\nint x = Integer.parseInt(String.format(\"%02X\", it), 16);\nSystem.out.println(x); // This will print 20\n</code></pre>\n\n<ul>\n<li>Store the values as hex and don't convert, because there is no need</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>byte it = 0x14;\nSystem.out.println(it); // This will print 20\n</code></pre>\n\n<p>If you go with the second bullet, though convoluted, what you have right now should work, but the third option would be best if you are hardcoding in the byte array's values.</p>\n"}], "owner": {"reputation": 1383, "user_id": 497753, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0e5e5ac2af76d5bf54a90a5c0b3ead9?s=128&d=identicon&r=PG&f=1", "display_name": "Mannie", "link": "https://stackoverflow.com/users/497753/mannie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2028, "favorite_count": 0, "accepted_answer_id": 55941480, "answer_count": 1, "score": 2, "last_activity_date": 1556740253, "creation_date": 1556737303, "question_id": 55941279, "link": "https://stackoverflow.com/questions/55941279/array-of-bytes-as-hex-conversion-to-int-issue-kotlin-java", "title": "Array of Bytes (as hex) conversion to Int issue. (Kotlin/Java)", "body": "<p>I'm looking at parsing information from a temp/humidity sensor that was provided with the following instructions;</p>\n\n<blockquote>\n  <p>There are 6 bytes.</p>\n  \n  <ol>\n  <li><p>Temperature positive/negative: 0 means positive (+) and 1 means negative (-)</p></li>\n  <li><p>Integer part of temperature. Show in Hexadecimal.</p></li>\n  <li><p>Decimal part of temperature. Show in Hexadecimal.</p></li>\n  <li><p>Reserved byte. Ignore it.</p></li>\n  <li><p>Integer part of humidity. Show in Hexadecimal.</p></li>\n  <li><p>Decimal part of humidity. Show in Hexadecimal.</p></li>\n  </ol>\n  \n  <p>For example: 00 14 05 22 32 08 means +20.5C 50.8% &amp;  01 08 09 00 14 05\n  means -8.9C 20.5%</p>\n</blockquote>\n\n<p>as each byte is in hex &amp; i need to covert this to an Int I followed this approach - <a href=\"https://stackoverflow.com/questions/2817752/java-code-to-convert-byte-to-hexadecimal\">Java code To convert byte to Hexadecimal</a> but the values I get when validating their example don't make sense.In Kotlin I do;</p>\n\n<pre><code>val example = byteArrayOf(0, 14, 5, 22, 32, 8)\nexample.map { Integer.parseInt(String.format(\"%02X \", it),16)}\n</code></pre>\n\n<p>First Example output is;</p>\n\n<pre><code>0 = \"00 \"\n1 = \"08 \"\n2 = \"09 \"\n3 = \"00 \"\n4 = \"0E \"\n5 = \"05 \"\n</code></pre>\n\n<p>Second Example output;</p>\n\n<pre><code>0 = \"00 \"\n1 = \"0E \"\n2 = \"05 \"\n3 = \"16 \"\n4 = \"20 \"\n5 = \"08 \"\n</code></pre>\n\n<p>What am I doing wrong? I'm starting to think the manufactures instructions could be 'misleading'</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1324, "user_id": 7231449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4GZN.jpg?s=128&g=1", "display_name": "acarlstein", "link": "https://stackoverflow.com/users/7231449/acarlstein"}, "edited": false, "score": 1, "creation_date": 1556738147, "post_id": 55941222, "comment_id": 98536136, "body": "It sounds to me that you are trying to implement an &quot;undo&quot; feature. Perhaps, implementing the Command Pattern would be a best fit for what you are traing to implement: <a href=\"https://matt.berther.io/2004/09/16/using-the-command-pattern-for-undo-functionality/\" rel=\"nofollow noreferrer\">matt.berther.io/2004/09/16/&hellip;</a>"}, {"owner": {"reputation": 1324, "user_id": 7231449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4GZN.jpg?s=128&g=1", "display_name": "acarlstein", "link": "https://stackoverflow.com/users/7231449/acarlstein"}, "edited": false, "score": 0, "creation_date": 1556738202, "post_id": 55941222, "comment_id": 98536156, "body": "Worse case scenario, perhaps you should try a Stack instead of an ArrayList."}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 6156176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f7ac8476309aca09e47171542150e46?s=128&d=identicon&r=PG&f=1", "display_name": "Justus", "link": "https://stackoverflow.com/users/6156176/justus"}, "is_accepted": false, "score": 0, "last_activity_date": 1556860686, "last_edit_date": 1592644375, "creation_date": 1556858341, "answer_id": 55963380, "question_id": 55941222, "link": "https://stackoverflow.com/questions/55941222/add-user-back-to-array-and-put-to-front/55963380#55963380", "title": "Add user back to array and put to front", "body": "<p>First, I would please you to ask questions more precisely. I'm not sure if the following answer can help to solve your problem.</p>\n<p>As both commentators already said, there are multiple ways to implement an <strong>Undo / History Behaviour</strong>.</p>\n<hr />\n<h1>1. Design Pattern</h1>\n<p>I recommend you to use the command design pattern, as <a href=\"https://stackoverflow.com/questions/55941222/add-user-back-to-array-and-put-to-front#comment98536136_55941222\">acarlstein</a> already suggested.\n<a href=\"https://refactoring.guru/design-patterns/command\" rel=\"nofollow noreferrer\">Here</a> is another link I can recommend.</p>\n<hr />\n<h1>2. Stack (duplicates)</h1>\n<p>If you want to implement it the quick &amp; easy way, you could use a Stack instead of an ArrayList.\nIt's a LIFO (Last In - First Out) Storage.</p>\n<p>You can implement the <em>Stack</em> (can hold duplicates) as follows:</p>\n<pre><code>val stack = stackOf(itemOne, itemTwo, itemThree)\nstack.push(itemFour)\nval item = stack.pop() // itemFour\n</code></pre>\n<p>But as I understand your question, you don't want to have duplicates in your history.</p>\n<hr />\n<h1>3. Stack adaption (no duplicates)</h1>\n<p>Without duplicates, you can adapt the <em>Stack</em> and override it's <code>push()</code> method to avoid duplicates.</p>\n<p>Like this:</p>\n<pre><code>class UniqueStack&lt;E&gt; : Stack&lt;E&gt;() {\n    override fun push(item : E) : E {\n        // when item is already part of the stack, push it to the top\n        if (contains(item)) remove(item)\n        return super.push(item)\n    }\n}\n</code></pre>\n<p>An implementation could look like:</p>\n<pre><code>val history = UniqueStack&lt;Int&gt;()\nhistory.push(1) // [1]\nhistory.push(1) // [1]\nhistory.push(2) // [1, 2]\nhistory.push(1) // [2, 1]\nhistory.push(1) // [2, 1]\n\nprintln(history)            // prints &quot;[2, 1]&quot;\nprintln(history.pop())  // prints &quot;1&quot;\nprintln(history)            // prints &quot;[2]&quot;\n</code></pre>\n<hr />\n<p>I hope I was able to help you.</p>\n"}], "owner": {"reputation": 83, "user_id": 11420506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IyPYN.jpg?s=128&g=1", "display_name": "sykezlol", "link": "https://stackoverflow.com/users/11420506/sykezlol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556860686, "creation_date": 1556736999, "last_edit_date": 1556737933, "question_id": 55941222, "link": "https://stackoverflow.com/questions/55941222/add-user-back-to-array-and-put-to-front", "title": "Add user back to array and put to front", "body": "<p>I want to create a regret button, kind of like in the tinder app.\nI want this button to look at the last removed user from the array, and put it back into view.</p>\n\n<p>I have tried with this code, which adds to user back to the queue, but not when pressing. The user will be put at index 0, which is next in line. If I switch out the index, the app crashes so I assume another way has to be done.</p>\n\n<p>Furthermore, the button can be pressed multiple times, and the user will appear multiple times in the view. You can see the commented code in the if statement, where I tried to solve this</p>\n\n<pre><code>fabRegret.setOnClickListener {\n\n            if (rowItems.size != 0)//&amp;&amp; rowItems[0] != lastDeleted)\n                rowItems.add(0, lastDeleted!!)\n            Toast.makeText(getContext(), \"User added to queue\", Toast.LENGTH_LONG).show()\n            cardAdapter!!.notifyDataSetChanged() //undo button can be pressed multiple times to add same person again\n        }\n\n</code></pre>\n\n<p>For clarifitcation:</p>\n\n<pre><code>rowItems = ArrayList()\nlastDeleted = rowItems.removeAt(0)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": false, "score": 0, "last_activity_date": 1556777748, "last_edit_date": 1556777748, "creation_date": 1556777338, "answer_id": 55946519, "question_id": 55940883, "link": "https://stackoverflow.com/questions/55940883/is-it-possible-to-use-ktor-and-or-kotlin-multiplatform-to-share-the-exposed/55946519#55946519", "title": "Is it possible to use Ktor and / or Kotlin multiplatform to &quot;share&quot; the exposed data between a Rest API and an Android Application?", "body": "<p>Yes.</p>\n\n<p>You can structure your code with a multi project gradle build like this:</p>\n\n<ul>\n<li><strong>API module</strong>: Put your DTOs, searialization/deserialization and routes as constants here. Define an http client to your api here as well (Ktor has an http client as well). OpenAPI is also something you might look at for defining your http api and then just generating the client.</li>\n<li><strong>Server module</strong>: Depends on the API module to implement the routes with the DTOs defined. And if you defined a client in API, test that your server implementation satisfies it.</li>\n<li><strong>Android module</strong>: Depend on the API module. Use the client, and mock it for testing.</li>\n</ul>\n\n<p>This is a little bit like the <code>Dependency Inversion Principal</code>  from SOLID. You define the interface of the data exchange in a seperate module(API module). And then, both the implementation (Server Module) and the higher level code (Android Module) depend on that for its use and implementation.</p>\n"}], "owner": {"reputation": 562, "user_id": 4342335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-_8gtMYmFAYc/AAAAAAAAAAI/AAAAAAAAAA4/pQhv2M_1z8w/photo.jpg?sz=128", "display_name": "Nino Lenoska", "link": "https://stackoverflow.com/users/4342335/nino-lenoska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556777748, "creation_date": 1556735294, "question_id": 55940883, "link": "https://stackoverflow.com/questions/55940883/is-it-possible-to-use-ktor-and-or-kotlin-multiplatform-to-share-the-exposed", "title": "Is it possible to use Ktor and / or Kotlin multiplatform to &quot;share&quot; the exposed data between a Rest API and an Android Application?", "body": "<p>The main idea is to have a sort of \"serialization / deserialization module\" that could be shared between a backend (using Ktor) and an Android application. </p>\n\n<p>I don't know how \"far\" this can go, but I would imagine that the routes are \"exposed\" for the frontend app to consume (like Retrofit does with its interface with annotations) and the (de-)serialization logic is shared too. </p>\n\n<p>So basicaly, is it possible to \"share\" not only the \"POJO / POKO\" representations of API responses, but also the possible endpoints with the expected parameters, between a server (I guess using Ktor) and an Android application (Java / Kotlin) ?</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 7, "last_activity_date": 1556734906, "last_edit_date": 1556734906, "creation_date": 1556734836, "answer_id": 55940782, "question_id": 55940722, "link": "https://stackoverflow.com/questions/55940722/is-it-possible-to-add-an-operator-overloading-extension-function-in-kotlin/55940782#55940782", "title": "Is it possible to add an operator-overloading extension function in Kotlin?", "body": "<p>This is possible, it's just that the <code>operator</code> keyword has go before the <code>fun</code> keyword in the declaration (as do other modifiers, such as <code>infix</code>, <code>inline</code>, etc.):</p>\n\n<pre><code>operator fun Table.get(column_name: String) = this.column(column_name)\n</code></pre>\n"}], "owner": {"reputation": 2164, "user_id": 5245903, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-5fU-jiQTlHk/AAAAAAAAAAI/AAAAAAAAABE/4mAEDlzlHQs/photo.jpg?sz=128", "display_name": "Veneet Reddy", "link": "https://stackoverflow.com/users/5245903/veneet-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 55940782, "answer_count": 1, "score": 4, "last_activity_date": 1556734906, "creation_date": 1556734581, "question_id": 55940722, "link": "https://stackoverflow.com/questions/55940722/is-it-possible-to-add-an-operator-overloading-extension-function-in-kotlin", "title": "Is it possible to add an operator-overloading extension function in Kotlin?", "body": "<p>I mean something like this:</p>\n\n<pre><code>fun operator Table.get(column_name: String) = this.column(column_name)\n// Currently gives an error: \"Expecting a top level declaration\"\n</code></pre>\n\n<p><code>Table</code> instance currently works like: <code>table.column(\"column_name\")</code></p>\n\n<p>I want to make it work like this: <code>table[\"column_name\"]</code></p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 16751, "user_id": 602094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/725306370a270aec71f052f366496ddb?s=128&d=identicon&r=PG", "display_name": "triad", "link": "https://stackoverflow.com/users/602094/triad"}, "is_accepted": true, "score": 1, "last_activity_date": 1556732850, "creation_date": 1556732850, "answer_id": 55940408, "question_id": 55940150, "link": "https://stackoverflow.com/questions/55940150/request-data-from-object-2-that-has-the-id-of-object-1-as-attribute/55940408#55940408", "title": "Request data from object 2 that has the id of object 1 as attribute", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\">Collection.filter</a> function is perfect for this</p>\n\n<pre><code>getTestDogs()\n  .filter { dog -&gt; dog.personId == currentPerson.personId }\n  .toMutableList()\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9360060, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4FsiT.jpg?s=128&g=1", "display_name": "Walt", "link": "https://stackoverflow.com/users/9360060/walt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 55940408, "answer_count": 1, "score": 0, "last_activity_date": 1556732850, "creation_date": 1556731727, "last_edit_date": 1556732097, "question_id": 55940150, "link": "https://stackoverflow.com/questions/55940150/request-data-from-object-2-that-has-the-id-of-object-1-as-attribute", "title": "Request data from object 2 that has the id of object 1 as attribute", "body": "<p>I have 2 data classes, Person and Dog.\nPerson has the following attributes:</p>\n\n<p>personId, name, age, isFemale</p>\n\n<pre><code>data class Person (\n  val personId: Int,\n  val name: String,\n  val age: Int,\n  val isFemale: Boolean\n)\n</code></pre>\n\n<p>Dog has the following attributes:</p>\n\n<p>dogId, personId, name, age, isFemale</p>\n\n<pre><code>data class Dog (\n  val dogId: Int,\n  val personId: Int,\n  val name: String,\n  val age: Int,\n  val isFemale: Boolean\n)\n</code></pre>\n\n<p>I want to request all the dogs of a person, by using the id attribute. But I receive an error that dogs is not initialized and empty.</p>\n\n<pre><code>fun getTestPersons(): Array&lt;Person&gt;{\n  return arrayOf(): Array&lt;Person&gt;(\n   Person(1, \"Harry\", 35, false)\n)\n}\n\nfun getTestDogs(): Array&lt;Dog&gt;{\n  return arrayOf(\n   Dog(1, 1, \"Bert\", 4, false), Dog(2, 1, \"Linda\", 6, true)\n)\n}\n</code></pre>\n\n<p>currentPerson has been initialized with for example the first one.</p>\n\n<pre><code>lateinit var dogs: MutableList&lt;Dog&gt;\nfor(dog in getTestDogs()){\nif(dog.personId == currentPerson.personId){\n  dogs.add(dog)\n }\n}\n</code></pre>\n\n<p>Expected: A MutableList with all the dogs of a specific person.</p>\n"}, {"tags": ["android", "search", "kotlin", "geolocation", "openstreetmap"], "comments": [{"owner": {"reputation": 17760, "user_id": 1340631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=128&d=identicon&r=PG", "display_name": "scai", "link": "https://stackoverflow.com/users/1340631/scai"}, "edited": false, "score": 0, "creation_date": 1556780103, "post_id": 55940109, "comment_id": 98546809, "body": "See <a href=\"https://wiki.openstreetmap.org/wiki/Search_engines\" rel=\"nofollow noreferrer\">OSM search engines</a> (aka geocoders), especially Nominatim and Photon."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 10665362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e63d5af1d1a749f5c66228421ef0ba05?s=128&d=identicon&r=PG&f=1", "display_name": "Rakan Ajlouni", "link": "https://stackoverflow.com/users/10665362/rakan-ajlouni"}, "is_accepted": false, "score": 0, "last_activity_date": 1556735087, "creation_date": 1556735087, "answer_id": 55940840, "question_id": 55940109, "link": "https://stackoverflow.com/questions/55940109/how-to-implement-location-search-in-android-app/55940840#55940840", "title": "How to implement location search in android app?", "body": "<p>Well first of all i think you should check if there's a Web API for the OpenStreetMap so the Android Application can communicate with the server and database of this OpenStreetMap and there will be a documentary over there helping you continue the work! </p>\n"}, {"tags": [], "owner": {"reputation": 1548, "user_id": 997341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8bade2ecc5240ed1779fa08dbb6a?s=128&d=identicon&r=PG", "display_name": "Michael Dougan", "link": "https://stackoverflow.com/users/997341/michael-dougan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556752122, "creation_date": 1556752122, "answer_id": 55943799, "question_id": 55940109, "link": "https://stackoverflow.com/questions/55940109/how-to-implement-location-search-in-android-app/55943799#55943799", "title": "How to implement location search in android app?", "body": "<p>Google Maps has an API that allows you to search for a place by name.  If you get several results that match, they are returned in an array of points.  OpenStreetMaps may have a similar API, but if not, you could still use the Google Map API to do the search, then once you get results, you could plot them on the OpenStreetMap.</p>\n"}], "owner": {"reputation": 423, "user_id": 9283284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IC7nh.jpg?s=128&g=1", "display_name": "Snusifer", "link": "https://stackoverflow.com/users/9283284/snusifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556752122, "creation_date": 1556731580, "question_id": 55940109, "link": "https://stackoverflow.com/questions/55940109/how-to-implement-location-search-in-android-app", "title": "How to implement location search in android app?", "body": "<p>I am using OpenStreetMap in this kotlin based android app I am making. I want the user to be able to search on locations, then get a list of all places that match the keyword. I dont know where to begin and what to use, any ideas here?</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "spring-security", "spring-webflux"], "answers": [{"comments": [{"owner": {"reputation": 1385, "user_id": 5728926, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d6d05a4ecd70bbcd8212272b78a72c00?s=128&d=identicon&r=PG&f=1", "display_name": "D&#225;niel Kis", "link": "https://stackoverflow.com/users/5728926/d%c3%a1niel-kis"}, "edited": false, "score": 0, "creation_date": 1557055935, "post_id": 55968029, "comment_id": 98630745, "body": "I have solved it, there were a dependency to spring-boot-starter-tomcat in class path in one module what I used"}], "tags": [], "owner": {"reputation": 348, "user_id": 1606145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3547de519a2f96bfc3a88fedf837e4e3?s=128&d=identicon&r=PG", "display_name": "Alex Ionescu", "link": "https://stackoverflow.com/users/1606145/alex-ionescu"}, "is_accepted": true, "score": 2, "last_activity_date": 1556879567, "creation_date": 1556879567, "answer_id": 55968029, "question_id": 55939970, "link": "https://stackoverflow.com/questions/55939970/how-to-fix-invalid-bean-definition-with-name-requestmappinghandleradapter-erro/55968029#55968029", "title": "How to fix &#39;Invalid bean definition with name requestMappingHandlerAdapter&#39; error in Spring Boot Webflux app with Spring Boot Security", "body": "<p>Can you post your configuration beans? \nDo you have both </p>\n\n<blockquote>\n  <p>@EnableWebflux</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>@EnableWebMvc</p>\n</blockquote>\n\n<p>?</p>\n\n<p>Do you rely on overriding beans on purpose?\n<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes#bean-overriding\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes#bean-overriding</a></p>\n\n<p>Regards,\nAlex</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 1277688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1389fdbe9c193aa54035df274e8220f3?s=128&d=identicon&r=PG", "display_name": "ck1910", "link": "https://stackoverflow.com/users/1277688/ck1910"}, "is_accepted": false, "score": 1, "last_activity_date": 1607488342, "creation_date": 1607488342, "answer_id": 65210673, "question_id": 55939970, "link": "https://stackoverflow.com/questions/55939970/how-to-fix-invalid-bean-definition-with-name-requestmappinghandleradapter-erro/65210673#65210673", "title": "How to fix &#39;Invalid bean definition with name requestMappingHandlerAdapter&#39; error in Spring Boot Webflux app with Spring Boot Security", "body": "<p>Encountered this today, and it happened due to this dependency<br />\n<code>org.springframework.boot:spring-boot-starter-websocket</code></p>\n<p>Apparently, this starter package for websocket depends on<br />\n<code>org.springframework.boot:spring-boot-starter-web</code></p>\n<p>After I removed it, everything comes back to normal.</p>\n"}], "owner": {"reputation": 1385, "user_id": 5728926, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d6d05a4ecd70bbcd8212272b78a72c00?s=128&d=identicon&r=PG&f=1", "display_name": "D&#225;niel Kis", "link": "https://stackoverflow.com/users/5728926/d%c3%a1niel-kis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3531, "favorite_count": 0, "accepted_answer_id": 55968029, "answer_count": 2, "score": 1, "last_activity_date": 1607488342, "creation_date": 1556730918, "question_id": 55939970, "link": "https://stackoverflow.com/questions/55939970/how-to-fix-invalid-bean-definition-with-name-requestmappinghandleradapter-erro", "title": "How to fix &#39;Invalid bean definition with name requestMappingHandlerAdapter&#39; error in Spring Boot Webflux app with Spring Boot Security", "body": "<p>I would like to use a spring security with spring boot webflux, but I get a following error when I start the application:</p>\n\n<pre><code>org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'requestMappingHandlerAdapter' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration; factoryMethodName=requestMappingHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]] for bean 'requestMappingHandlerAdapter': There is already [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.web.reactive.config.DelegatingWebFluxConfiguration; factoryMethodName=requestMappingHandlerAdapter; initMethodName=null; destroyMethodName=(inferred); defined in org.springframework.web.reactive.config.DelegatingWebFluxConfiguration] bound.\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.registerBeanDefinition(DefaultListableBeanFactory.java:897) ~[spring-beans-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod(ConfigurationClassBeanDefinitionReader.java:274) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:141) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:117) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:327) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:232) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:95) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531) ~[spring-context-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) [spring-boot-2.1.3.RELEASE.jar:2.1.3.RELEASE]\n</code></pre>\n\n<p>gradle dependencies are: </p>\n\n<ul>\n<li>org.springframework.boot:spring-boot-starter-webflux:2.1.3.RELEASE</li>\n<li>org.springframework.boot:spring-boot-starter-security:2.1.3.RELEASE</li>\n</ul>\n\n<p>Security config contains @EnableWebFluxSecurity and a minimal userDetailsService and a SecurityWebFilterChain bean definition. </p>\n\n<pre><code>    @Bean\n    fun userDetailsService(): MapReactiveUserDetailsService {\n        val user = User.withDefaultPasswordEncoder()\n                .username(\"user\")\n                .password(\"user\")\n                .roles(\"USER\")\n                .build()\n        return MapReactiveUserDetailsService(user)\n    }\n\n    @Bean\n    fun springSecurityFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain {\n        http\n                .authorizeExchange()\n                .anyExchange().authenticated()\n                .and()\n                .httpBasic().and()\n                .formLogin()\n        return http.build()\n    }\n</code></pre>\n\n<p>It seems to me that spring-boot-starter-webflux is not compatible with spring-boot-starter-security. \nI have tried spring-boot-starter-security-reactive library also, but it has only 2.0.0.M5 version. Is there any way to use spring-boot-starter-webflux with spring-boot-starter-security?</p>\n"}, {"tags": ["spring-boot", "kotlin", "swagger", "openapi"], "comments": [{"owner": {"reputation": 57048, "user_id": 113116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0v1H.png?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/113116/helen"}, "edited": false, "score": 0, "creation_date": 1559138963, "post_id": 55938207, "comment_id": 99328431, "body": "Springfox feature request to support OpenAPI 3.0: <a href=\"https://github.com/springfox/springfox/issues/2022\" rel=\"nofollow noreferrer\">github.com/springfox/springfox/issues/2022</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9589, "user_id": 5371736, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uyJ0L.jpg?s=128&g=1", "display_name": "Mathias Dpunkt", "link": "https://stackoverflow.com/users/5371736/mathias-dpunkt"}, "is_accepted": false, "score": 4, "last_activity_date": 1556735399, "creation_date": 1556735399, "answer_id": 55940901, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app/55940901#55940901", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>You could look at <a href=\"https://spring.io/projects/spring-restdocs\" rel=\"noreferrer\">spring-restdocs</a> and <a href=\"https://github.com/ePages-de/restdocs-api-spec\" rel=\"noreferrer\">restdocs-api-spec</a>.</p>\n\n<p><code>spring-restdocs</code> takes a test-driven approach to API documentation which has many advantages over the introspection-driven approach spring-fox uses. <code>restdocs-api-spec</code> is an extension for spring-restdocs that adds API specification support. Currently it supports OpenAPI2 OpenAPI3 and Postman.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2597077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41d459ff05bb9dfb792de3a19b8d889?s=128&d=identicon&r=PG", "display_name": "Jerry Li", "link": "https://stackoverflow.com/users/2597077/jerry-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1566256149, "last_edit_date": 1566256149, "creation_date": 1566255135, "answer_id": 57564805, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app/57564805#57564805", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>If you're using jax-rs this tutorial helps. It uses the Apache CXF implementation. I couldn't find any other implementation of jaxrs that uses Spring Boot AND generate Open API 3.0 spec. </p>\n\n<p>You'll need these depedencies:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-rs-service-description-openapi-v3&lt;/artifactId&gt;\n    &lt;version&gt;3.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;3.13.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Here is the general configuration, more detail is in the link:</p>\n\n<pre><code>@Configuration\n@EnableAutoConfiguration\n@ComponentScan(basePackageClasses = PeopleRestService.class)\npublic class AppConfig {\n    @Autowired private PeopleRestService peopleRestService;\n    @Bean(destroyMethod = \"destroy\")\n    public Server jaxRsServer(Bus bus) {\n        final JAXRSServerFactoryBean factory = new JAXRSServerFactoryBean();\n        factory.setApplication(new JaxRsApiApplication());\n        factory.setServiceBean(peopleRestService);\n        factory.setProvider(new JacksonJsonProvider());\n        factory.setFeatures(Arrays.asList(new OpenApiFeature()));\n        factory.setBus(bus);\n        factory.setAddress(\"/\");\n        return factory.create();\n    }\n    @Bean\n    public ServletRegistrationBean cxfServlet() {\n        final ServletRegistrationBean servletRegistrationBean = new ServletRegistrationBean(new CXFServlet(), \"/api/*\");\n        servletRegistrationBean.setLoadOnStartup(1);\n        return servletRegistrationBean;\n    }\n}\n</code></pre>\n\n<p><a href=\"https://dzone.com/articles/moving-with-the-times-towards-openapi-v300-adoptio\" rel=\"nofollow noreferrer\">https://dzone.com/articles/moving-with-the-times-towards-openapi-v300-adoptio</a></p>\n"}, {"comments": [{"owner": {"reputation": 909, "user_id": 3110101, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/vIMDO.jpg?s=128&g=1", "display_name": "pan1490", "link": "https://stackoverflow.com/users/3110101/pan1490"}, "edited": false, "score": 0, "creation_date": 1585832188, "post_id": 57681733, "comment_id": 107905331, "body": "I added this dependency in pom. The jar is downloaded. It is added in maven dependencies, but I am not able to see OpenApi description at the path you mentioned. For me the path is: <a href=\"http://localhost:15730/context-path/v3/api-docs\" rel=\"nofollow noreferrer\">localhost:15730/context-path/v3/api-docs</a> Could you please assist?"}, {"owner": {"reputation": 713, "user_id": 5871709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a8e5a6e4563c8400d8b1aaada73a73?s=128&d=identicon&r=PG", "display_name": "funder7", "link": "https://stackoverflow.com/users/5871709/funder7"}, "edited": false, "score": 0, "creation_date": 1616198387, "post_id": 57681733, "comment_id": 117936676, "body": "&quot;context-path&quot; is the context of your spring application, usually it&#39;s &quot;/&quot; if not modified :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11878890"}, "is_accepted": true, "score": 11, "last_activity_date": 1583055571, "last_edit_date": 1583055571, "creation_date": 1566937190, "answer_id": 57681733, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app/57681733#57681733", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>We have used springdoc-openapi library in our kotlin project, and it meets our need for automating the generation of API documentation using spring boot projects.</p>\n\n<p>It automatically deploys swagger-ui to a spring-boot application</p>\n\n<p>The Swagger UI page should then be available at:\n- <a href=\"http://server:port/context-path/swagger-ui.html\" rel=\"noreferrer\">http://server:port/context-path/swagger-ui.html</a>\nThe OpenAPI description will be available at the following url for json format:\n- <a href=\"http://server:port/context-path/v3/api-docs\" rel=\"noreferrer\">http://server:port/context-path/v3/api-docs</a></p>\n\n<p>Add the library to the list of your project dependencies (No additional configuration is needed)</p>\n\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n      &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n      &lt;version&gt;1.2.32&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12270436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qifErW122Vs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJyfZmgDJxNFlg27-M-HC_sp5ciw/photo.jpg?sz=128", "display_name": "Jakub Remenec", "link": "https://stackoverflow.com/users/12270436/jakub-remenec"}, "is_accepted": false, "score": 3, "last_activity_date": 1571942126, "creation_date": 1571942126, "answer_id": 58547347, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app/58547347#58547347", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>I decided to implement my own generator <a href=\"https://github.com/jrcodeza/spring-openapi\" rel=\"nofollow noreferrer\">https://github.com/jrcodeza/spring-openapi</a> maybe you can check it out too. It's based on reflection and supports javax and spring annotations. It also generates inheritance model (with discriminators) based on Jackson annotations. Besides you can define your own interceptors if you want to alter generation process (e.g. when you have your own annotations and need to adjust generated sections of schema). You can use it in runtime mode or as a maven plugin. There is also OpenAPI3 to java client generator, which generates the model from openapi3 spec. Again it generates also Javax annotations and Jackson annotations for correct inheritance.</p>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 13151296, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VXPFFWayS3c/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNv5ryE6Pv6FvLuVxSSz0o5Xy3Q2g/photo.jpg?sz=128", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/13151296/jonathan-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1587433869, "last_edit_date": 1587433869, "creation_date": 1587432182, "answer_id": 61334534, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app/61334534#61334534", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>You can also refer to \n<a href=\"https://www.baeldung.com/spring-rest-openapi-documentation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-openapi-documentation</a>\nwhich provides a tutorial on implementing OpenAPI 3.0 with a SpringBoot 1.x or 2.x application using springdoc-openapi. </p>\n\n<p>To summarize, you just add the maven dependency for springdoc-openapi into your application and when you bootRun, go to path\n<a href=\"http://server:port/v3/api-docs.yaml/\" rel=\"nofollow noreferrer\">http://server:port/v3/api-docs.yaml/</a> and you will download an Open API 3.0 spec file in yaml, generated from your application's code. </p>\n\n<p>You can do some other stuff with springdoc-openapi, by accessing the following when your SpringBoot application is running:</p>\n\n<ul>\n<li><p><a href=\"http://server:port/v3/api-docs\" rel=\"nofollow noreferrer\">http://server:port/v3/api-docs</a>: Gives your spec file in Json format.</p></li>\n<li><p><a href=\"http://server:port/swagger-ui.html\" rel=\"nofollow noreferrer\">http://server:port/swagger-ui.html</a>: Access this in your browser and you will see the swagger documentation. </p></li>\n</ul>\n"}], "owner": {"reputation": 187, "user_id": 5089746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbd357d4186c3e6917b02809a1b0c03?s=128&d=identicon&r=PG&f=1", "display_name": "ladyskynet", "link": "https://stackoverflow.com/users/5089746/ladyskynet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16427, "favorite_count": 5, "accepted_answer_id": 57681733, "answer_count": 5, "score": 17, "last_activity_date": 1587433869, "creation_date": 1556722502, "question_id": 55938207, "link": "https://stackoverflow.com/questions/55938207/how-to-generate-openapi-3-0-spec-from-existing-spring-boot-app", "title": "How to generate OpenApi 3.0 spec from existing Spring Boot App?", "body": "<p>I have a project (Spring Boot App + Kotlin) that I would like to have an Open API 3.0 spec for (preferably in YAML). The Springfox libraries are nice but they generate Swagger 2.0 JSON. What is the best way to generate an Open Api 3.0 spec from the annotations in my controllers? Is writing it from scratch the only way?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1556782819, "post_id": 55936746, "comment_id": 98548078, "body": "I think the lie here is that this shouldn&#39;t be a data class, because it&#39;s not <code>data</code>, it does things such as <code>execute()</code> potentially asynchronous operations"}], "answers": [{"comments": [{"owner": {"reputation": 1850, "user_id": 423199, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/OrFPh.jpg?s=128&g=1", "display_name": "Hector", "link": "https://stackoverflow.com/users/423199/hector"}, "edited": false, "score": 0, "creation_date": 1556725852, "post_id": 55936972, "comment_id": 98530935, "body": "I cannot see how I can @Provide my data Klasses and still build(er) them using different values. Does Dagger allow this? For instance I have to pass a unique key into my data classes each time I use them."}, {"owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "reply_to_user": {"reputation": 1850, "user_id": 423199, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/OrFPh.jpg?s=128&g=1", "display_name": "Hector", "link": "https://stackoverflow.com/users/423199/hector"}, "edited": false, "score": 2, "creation_date": 1556732224, "post_id": 55936972, "comment_id": 98533655, "body": "Depends how your app is architectured. For instance, if you have a scoped subcomponent per screen, you can just provide that key in the relevant module / submodule. Otherwise, you can find a way injecting a given key using <code>@Named</code> annotation. Another way to use the same data class structure, but with specific attributes, would be to extend <code>MyDataKlass</code> to have a specific concrete type that Dagger could to differenciate."}], "tags": [], "owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "is_accepted": true, "score": 1, "last_activity_date": 1556717074, "creation_date": 1556717074, "answer_id": 55936972, "question_id": 55936746, "link": "https://stackoverflow.com/questions/55936746/how-to-inject-into-kotlin-builder-classes-with-dagger/55936972#55936972", "title": "How to @Inject into Kotlin Builder classes with Dagger", "body": "<p>I never tried this syntax on a data class, but it may be the good one:</p>\n\n<pre><code>data class MyDataKlass @Inject constructor(\n    val onError: Consumer&lt;in Throwable&gt;,\n    val onComplete: Action,\n    val dbController: DatabaseController,\n    val lnController: ILoginNetworkController\n) : BaseSO() {\n    @SuppressLint(\"CheckResult\")\n    fun execute() {\n    }\n}\n</code></pre>\n\n<p>and in your activity:</p>\n\n<pre><code>lateinit var dataKlass: MyDataKlass @Inject set\n</code></pre>\n\n<p>Of course, your dependency graph will have to specify how to provide all the parameters of the data class.</p>\n"}], "owner": {"reputation": 1850, "user_id": 423199, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/OrFPh.jpg?s=128&g=1", "display_name": "Hector", "link": "https://stackoverflow.com/users/423199/hector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 55936972, "answer_count": 1, "score": 1, "last_activity_date": 1556717074, "creation_date": 1556715967, "question_id": 55936746, "link": "https://stackoverflow.com/questions/55936746/how-to-inject-into-kotlin-builder-classes-with-dagger", "title": "How to @Inject into Kotlin Builder classes with Dagger", "body": "<p>My current Android project employs a number of Kotlin data classes that employ builders to construct them.</p>\n\n<p>I wish to inject an instance into the Kotlin data class.</p>\n\n<p>Each of my data classes have this basic structure</p>\n\n<pre><code>data class MyDataKlass(    val onError: Consumer&lt;in Throwable&gt;,\n                           val onComplete: Action,\n                           val dbController: DatabaseController,\n                           val lnController: ILoginNetworkController) : BaseSO() {\n\n    @SuppressLint(\"CheckResult\")\n    fun execute() {\n\n    }\n\n}\n\nfun myFunction(block: MyDataKlassBuilder.() -&gt; Unit): MyDataKlass = MyDataKlassBuilder().apply(block).build()\n\nclass MyDataKlassBuilder {\n\n    var onError: Consumer&lt;in Throwable&gt; = Consumer { }\n    var onComplete: Action = Action { }\n    lateinit var dbController: DatabaseController\n    lateinit var lnController: ILoginNetworkController\n\n    fun build(): MyDataKlass = MyDataKlass(onError, onComplete, dbController, lnController)\n}\n</code></pre>\n\n<p>I employ these classes as follows:-</p>\n\n<pre><code> val myFunction = myFunction {\n                onComplete = Action { syncWorkerResult = Result.success() }\n                dbController = databaseController\n                lnController = loginNetwork\n                onError = Consumer {\n                    syncWorkerResult = Result.failure()\n                }\n            }\n\n myFunction.execute()\n</code></pre>\n\n<p>Currently I am passing in my database (<code>DatabaseController</code>) and network(<code>ILoginNetworkController</code>) controllers into the Builders of the Kotlin Data classes</p>\n\n<p>I wish to @Inject them to make my code \"cleaner\"</p>\n\n<p>I can @Inject both into my Activities and Repositories but cannot see how to employ Dagger to inject them into the above Data Classes.</p>\n\n<p>Is it possible to @Inject into Kotlin Data Classes?</p>\n"}, {"tags": ["kotlin", "idioms"], "comments": [{"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1556713374, "post_id": 55936040, "comment_id": 98524932, "body": "The example here, and the linked write-up may help you: <a href=\"https://stackoverflow.com/a/48466874/44615\">stackoverflow.com/a/48466874/44615</a>"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556713595, "post_id": 55936040, "comment_id": 98525027, "body": "I don&#39;t get it - what exactly are you asking? Both of  those appear to be fine."}, {"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "reply_to_user": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1556715030, "post_id": 55936040, "comment_id": 98525686, "body": "@MartinStone the linked write-up is about the great story <code>Kotlin</code> has for working with chains of calls on nullable values. I&#39;m asking about how to combine conditions into these chains. <code>func().takeIf{condition}</code> would work but it doesn&#39;t short circuit (and it reverses your code)."}, {"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556715074, "post_id": 55936040, "comment_id": 98525706, "body": "@Zoe I&#39;m asking if there&#39;s an idiom I&#39;m missing, a function like my <code>valueIf()</code> already in the Kotlin stdlib or any other idiomatic way to do write this function"}, {"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "edited": false, "score": 0, "creation_date": 1556715240, "post_id": 55936040, "comment_id": 98525774, "body": "Because I keep finding myself writing <code>(if (x) f() else null) ?: (if (y) g() else null) ?: (if (z) h() else null)</code> and similar and I&#39;m sure I&#39;m not the only one"}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "edited": false, "score": 0, "creation_date": 1556715950, "post_id": 55936527, "comment_id": 98526085, "body": "Ooh, this feels very idiomatic, thanks. So the trick is to start with a value I&#39;m going to dig into (<code>intent</code>) and start filtering and transforming it (<code>intent.takeIf{...}?.let{it...}?.takeIf{...}</code>). I didn&#39;t think of my code as acting <i>on intent</i>, but it is."}, {"owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "reply_to_user": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "edited": false, "score": 0, "creation_date": 1556716144, "post_id": 55936527, "comment_id": 98526159, "body": "Exactly, you got the idea. And using <code>?.</code> will ensure that the first <code>null</code> result will be returned without evaluating the rest of the chain."}, {"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "edited": false, "score": 0, "creation_date": 1556716545, "post_id": 55936527, "comment_id": 98526343, "body": "And e.g. <code>(if (x) f() else null) ?: (if (y) g() else null) ?: (if (z) h() else null)</code> would translate to <code>f.takeIf{x}?.let{it()} ?: g.takeIf{y}?.let{it()} ?: h.takeIf{z}?.let{it()}</code> (or the same with <code>0.takeIf{x}?.let{f()}</code>)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1556721478, "post_id": 55936527, "comment_id": 98528673, "body": "You may even want to omit the <code>let</code> here... e.g.: <code>fun Intent.getViewEventType() = takeIf { it.action == &quot;android.intent.action.VIEW&quot; }             ?.`data`?.pathSegments             ?.takeIf { it.size == 3 &amp;&amp; it[0] == &quot;app&quot; &amp;&amp; it[1] == &quot;event&quot; }             ?.get(2)</code>... Of course at least with appropariate new lines ;-)"}, {"owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556722546, "post_id": 55936527, "comment_id": 98529249, "body": "@Roland Absolutely, I edited the answer accordingly."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556722786, "post_id": 55936527, "comment_id": 98529374, "body": "I added it also as an answer now because the comment just looked ugly ;-) should have waited a bit :-) but I also find the destructuring makes the <code>takeIf</code> even more readable... but in the end, it&#39;s not needed... <code>takeIf</code> is the key here :-)"}], "tags": [], "owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "is_accepted": true, "score": 4, "last_activity_date": 1556722510, "last_edit_date": 1556722510, "creation_date": 1556714815, "answer_id": 55936527, "question_id": 55936040, "link": "https://stackoverflow.com/questions/55936040/whats-the-idiomatic-kotlin-way-to-write-if-else-null-as-part-of-chain/55936527#55936527", "title": "What&#39;s the idiomatic Kotlin way to write `if...else null` as part of ?./?: chains?", "body": "<p>You can still use <code>takeIf()</code> to achieve what you want, like shown here in an extension function on <code>Intent</code>:</p>\n\n<pre><code>fun Intent.getViewEventType(): String? {\n    return takeIf { it.action == \"android.intent.action.VIEW\" }\n        ?.`data`\n        ?.pathSegments\n        ?.takeIf { it.size == 3 &amp;&amp; it[0] == \"app\" &amp;&amp; it[1] == \"event\" }\n        ?.get(2)\n}\n</code></pre>\n\n<p>Edit by OP: this is the final code I went with:</p>\n\n<pre><code>fun getViewEventType(): String? {\n    return intent.takeIf { it.action == \"android.intent.action.VIEW\" }\n            ?.`data`\n            ?.pathSegments\n            ?.takeIf { it.size == 3 &amp;&amp; it[0] == \"app\" &amp;&amp; it[1] == \"event\" }\n            ?.get(2)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1556723425, "last_edit_date": 1556723425, "creation_date": 1556722610, "answer_id": 55938231, "question_id": 55936040, "link": "https://stackoverflow.com/questions/55936040/whats-the-idiomatic-kotlin-way-to-write-if-else-null-as-part-of-chain/55938231#55938231", "title": "What&#39;s the idiomatic Kotlin way to write `if...else null` as part of ?./?: chains?", "body": "<p>As shown in <a href=\"https://stackoverflow.com/a/55936527/6202869\">Wangs answer</a>: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/take-if.html\" rel=\"nofollow noreferrer\"><code>takeIf</code></a> is the way to go for such constructs.</p>\n\n<p>I will just leave the rest here for anyone interested (as my comment there was already applied): you may want to omit the <code>let</code> in favor of the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"nofollow noreferrer\">safe operator <code>?.</code></a>. Additionally you may also be interested in <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">destructing declarations</a>, which makes it a bit more readable in my opinion:</p>\n\n<pre><code>fun Intent.getViewEventType() : String? = takeIf { it.action == \"android.intent.action.VIEW\" }\n        ?.`data`?.pathSegments\n        ?.takeIf { it.size == 3 }\n        ?.takeIf { (source, actionType) -&gt; // destructuring in action... you may want to name the variables appropriately\n            source == \"app\" &amp;&amp; actionType == \"event\"\n        }\n        ?.get(2)\n</code></pre>\n\n<p>I also used a <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"nofollow noreferrer\">single expression function</a> here, but I leave that up to you. As you are chaining a lot here you may at least want to specify the return type when using such a construct (which you could also omit).</p>\n"}], "owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 55936527, "answer_count": 2, "score": 2, "last_activity_date": 1556723425, "creation_date": 1556712500, "last_edit_date": 1556716789, "question_id": 55936040, "link": "https://stackoverflow.com/questions/55936040/whats-the-idiomatic-kotlin-way-to-write-if-else-null-as-part-of-chain", "title": "What&#39;s the idiomatic Kotlin way to write `if...else null` as part of ?./?: chains?", "body": "<p>(Edited for clarity)</p>\n\n<p>I keep finding myself writing <code>(if (x) f() else null) ?: (if (y) g() else null) ?: (if (z) h() else null)</code> and similar and I'm sure I'm not the only one\u05e5</p>\n\n<p>I'm always reaching for a function like <code>valueIf</code> defined below (which is <code>takeIf</code> with order of parameters reversed so the value is lazy) , which would let me write code like <code>getViewEventType2()</code> instead of code like <code>getViewEventType1()</code> (both elaborated below).</p>\n\n<p>Is there an idiom I'm missing?</p>\n\n<p>(Also, is the compiler smart about functions like this, or should I fear creating too many temporary closures?)</p>\n\n<pre><code>    private fun getViewEventType1(): String? {\n        return if (intent.action == \"android.intent.action.VIEW\") {\n            intent.data?.pathSegments?.let {\n                if (it.size == 3 &amp;&amp; it[0] == \"app\" &amp;&amp; it[1] == \"event\") it[2]\n                else null\n            }\n        } else null\n    }\n\n    private fun getViewEventType2(): String? {\n        return valueIf(intent.action == \"android.intent.action.VIEW\") {\n            intent.data?.pathSegments?.let {\n                valueIf(it.size == 3 &amp;&amp; it[0] == \"app\" &amp;&amp; it[1] == \"event\") { it[2] }\n            }\n        }\n    }\n\n    inline fun &lt;T&gt; valueIf(condition: Boolean, func: () -&gt; T?) =\n            if (condition) func() else null\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556715972, "post_id": 55935419, "comment_id": 98526095, "body": "Would the filters array have different objects in it or the same one?"}], "answers": [{"comments": [{"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "reply_to_user": {"reputation": 19, "user_id": 7755403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KtZjKzvlPU/AAAAAAAAAAI/AAAAAAAAALY/2ciZdGSE4r8/photo.jpg?sz=128", "display_name": "Martin Arlando", "link": "https://stackoverflow.com/users/7755403/martin-arlando"}, "edited": false, "score": 0, "creation_date": 1556712331, "post_id": 55935553, "comment_id": 98524489, "body": "please try also &quot;@FieldMap(encoded = true) filters: HashMap&lt;String, RequestBody&gt;,&quot;"}, {"owner": {"reputation": 19, "user_id": 7755403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KtZjKzvlPU/AAAAAAAAAAI/AAAAAAAAALY/2ciZdGSE4r8/photo.jpg?sz=128", "display_name": "Martin Arlando", "link": "https://stackoverflow.com/users/7755403/martin-arlando"}, "edited": false, "score": 0, "creation_date": 1556712658, "post_id": 55935553, "comment_id": 98524609, "body": "still same response"}, {"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "reply_to_user": {"reputation": 19, "user_id": 7755403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KtZjKzvlPU/AAAAAAAAAAI/AAAAAAAAALY/2ciZdGSE4r8/photo.jpg?sz=128", "display_name": "Martin Arlando", "link": "https://stackoverflow.com/users/7755403/martin-arlando"}, "edited": false, "score": 0, "creation_date": 1556714249, "post_id": 55935553, "comment_id": 98525324, "body": "first try to change  &quot;Observable&lt;Response&lt;TicketListModel&gt;&gt;&quot; into &quot;Observable&lt;TicketListModel&gt;&quot; and if it doesn&#39;t work then try to use map instead of hashmap like &quot;@FieldMap(encoded = true) filters: Map&lt;String, RequestBody&gt;,&quot;"}], "tags": [], "owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "is_accepted": false, "score": 0, "last_activity_date": 1556710119, "creation_date": 1556710119, "answer_id": 55935553, "question_id": 55935419, "link": "https://stackoverflow.com/questions/55935419/how-to-send-array-of-object-with-form-url-encoded-through-retrofit-kotlin/55935553#55935553", "title": "How to send array of object with form URL encoded through Retrofit Kotlin?", "body": "<p>Please try like this:</p>\n\n<pre><code>val filters = HashMap&lt;String, RequestBody&gt;()\nfilters.put(\"userId\", toRequestBody(\"2\"))\ngetTicketStatusList(\"monitoring\", filters, 1, 5)\n</code></pre>\n\n<p>Also change hashmap of \"String\" into \"RequestBody\"</p>\n\n<pre><code>@FormUrlEncoded\n    @POST(\"ticket/status-list\")\n    fun getTicketStatusList(\n        @Field(\"allowedStatus\") allowedStatus: String,\n        @FieldMap filters: HashMap&lt;String, RequestBody&gt;,\n        @Field(\"page\") page: Int,\n        @Field(\"pageSize\") pageSize: Int\n    ): Observable&lt;Response&lt;TicketListModel&gt;&gt;\n</code></pre>\n\n<p>Below method converts String to RequestBody</p>\n\n<pre><code>fun toRequestBody(value: String): RequestBody {\n        return RequestBody.create(MediaType.parse(\"text/plain\"), value)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2836, "user_id": 5827197, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DaJzg.jpg?s=128&g=1", "display_name": "Zaid Mirza", "link": "https://stackoverflow.com/users/5827197/zaid-mirza"}, "is_accepted": false, "score": 1, "last_activity_date": 1556716427, "creation_date": 1556716427, "answer_id": 55936841, "question_id": 55935419, "link": "https://stackoverflow.com/questions/55935419/how-to-send-array-of-object-with-form-url-encoded-through-retrofit-kotlin/55936841#55936841", "title": "How to send array of object with form URL encoded through Retrofit Kotlin?", "body": "<p>Try below way :</p>\n\n<pre><code>data class Filters(var userId: String = \"\")\n\ndata class MyRequest(\n\n        var allowedStatus: String = \"\",\n        var filters: ArrayList&lt;Filters&gt;? = null,\n        var page: Int = 0,\n        var pageSize: Int = 0\n\n        )\n\n@POST(\"ticket/status-list\")\nfun getTicketStatusList(@Body request: MyRequest): Observable&lt;Response&lt;TicketListModel&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7755403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KtZjKzvlPU/AAAAAAAAAAI/AAAAAAAAALY/2ciZdGSE4r8/photo.jpg?sz=128", "display_name": "Martin Arlando", "link": "https://stackoverflow.com/users/7755403/martin-arlando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556716427, "creation_date": 1556709540, "question_id": 55935419, "link": "https://stackoverflow.com/questions/55935419/how-to-send-array-of-object-with-form-url-encoded-through-retrofit-kotlin", "title": "How to send array of object with form URL encoded through Retrofit Kotlin?", "body": "<p>I want to send form URL encoded to server, but the param need array of object</p>\n\n<p>I have tried use FieldMap from Retrofit and pass the data, but i got different response when I tried with Postman</p>\n\n<p>Param need to pass</p>\n\n<pre><code>{\n  \"allowedStatus\": \"submit\",\n  \"filters\": [\n    {\n      \"userId\": \"2\"\n    }\n  ],\n  \"page\": 1,\n  \"pageSize\": 2\n}\n</code></pre>\n\n<p>Retrofit</p>\n\n<pre><code>@FormUrlEncoded\n    @POST(\"ticket/status-list\")\n    fun getTicketStatusList(\n        @Field(\"allowedStatus\") allowedStatus: String,\n        @FieldMap filters: HashMap&lt;String, String&gt;,\n        @Field(\"page\") page: Int,\n        @Field(\"pageSize\") pageSize: Int\n    ): Observable&lt;Response&lt;TicketListModel&gt;&gt;\n</code></pre>\n\n<p>HashMap</p>\n\n<pre><code>val filters = HashMap&lt;String, String&gt;()\n        filters[\"userId\"] = \"1\"\n        Log.e(\"fieldMap\", filters.toString())\n        getTicketStatusList(\"monitoring\", filters, 1, 5)\n</code></pre>\n\n<p>Result I got {}, response is 200</p>\n"}, {"tags": ["java", "kotlin", "jersey", "jax-rs"], "comments": [{"owner": {"reputation": 187577, "user_id": 2587435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w9jTN.jpg?s=128&g=1", "display_name": "Paul Samsotha", "link": "https://stackoverflow.com/users/2587435/paul-samsotha"}, "edited": false, "score": 0, "creation_date": 1556726166, "post_id": 55934808, "comment_id": 98531069, "body": "Do you have a minimal GitHub project we can test?"}], "owner": {"reputation": 1061, "user_id": 4359863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/51e5f7cac3cd2f874529e507903c3c8c?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4359863/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556706420, "creation_date": 1556706420, "question_id": 55934808, "link": "https://stackoverflow.com/questions/55934808/jersey-jax-rs-dependency-injection", "title": "Jersey JAX-RS Dependency Injection", "body": "<p>I'm trying to build a REST API using JAX-RS, specifically the Jersey implementation. I tried to implement Authentication like in <a href=\"https://stackoverflow.com/questions/26777083/best-practice-for-rest-token-based-authentication-with-jax-rs-and-jersey/26778123#26778123\">this StackOverflow question</a>. </p>\n\n<p>Basically I'm using a <code>ContainerRequestFilter</code> to filter the HTTP Requests, based on the Authorization header. This class defines a property, annotated with the <code>@Inject</code> attribute (I'm using Kotlin, not Java):</p>\n\n<pre><code>@Inject\nvar authenticationService: IAuthenticationService? = null\n</code></pre>\n\n<p>I've registered this authentication service in my AbstractBinder:</p>\n\n<pre><code>class MyApplicationBinder : AbstractBinder() {\n    override fun configure() {\n        bind(AuthenticationService::class.java) to IAuthenticationService::class.java\n    }\n}\n</code></pre>\n\n<p>and registering this application binder to my <code>ResourceConfig</code>:</p>\n\n<pre><code>class MyResourceConfig : ResourceConfig() {\n    init {\n        // ...\n        register(MyApplicationBinder())\n    }\n}\n\n</code></pre>\n\n<p>However I'm getting the runtime exception on startup:</p>\n\n<pre><code>org.glassfish.hk2.api.UnsatisfiedDependencyException:\n    There was no object available for injection at SystemInjecteeImpl(\n        requiredType=IAuthenticationService,\n        parent=AuthenticationRequestFilter,\n        qualifiers={},\n        position=-1,\n        optional=false,\n        self=false,\n        unqualified=null,\n        452444366\n    )\n</code></pre>\n\n<p>I have no idea why the registration in my AbstractBinder is ignored by the HK2 Container! Can someone please help me out? Thanks!</p>\n"}, {"tags": ["kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "is_accepted": true, "score": 0, "last_activity_date": 1556705892, "creation_date": 1556705892, "answer_id": 55934719, "question_id": 55934676, "link": "https://stackoverflow.com/questions/55934676/java-lang-unsupportedoperationexception-packages-and-file-facades-are-not-yet-s/55934719#55934719", "title": "java.lang.UnsupportedOperationException: Packages and file facades are not yet supported in Kotlin reflection", "body": "<p>I just noticed the file <code>resources.application.conf</code> had an issue.\nIt had the wrong module name. I changed <code>com.example.ApplicationKt.module</code> to <code>com.example.ApplicationKt.demoModule</code>:</p>\n\n<pre><code>ktor {\n    deployment {\n        port = 8080\n        port = ${?PORT}\n    }\n    application {\n        modules = [ com.example.ApplicationKt.demoModule ]\n    }\n}\n</code></pre>\n\n<p>What's annoying is that the error help says nothing about it.</p>\n"}], "owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 55934719, "answer_count": 1, "score": 0, "last_activity_date": 1556705892, "creation_date": 1556705661, "question_id": 55934676, "link": "https://stackoverflow.com/questions/55934676/java-lang-unsupportedoperationexception-packages-and-file-facades-are-not-yet-s", "title": "java.lang.UnsupportedOperationException: Packages and file facades are not yet supported in Kotlin reflection", "body": "<p>When starting a basic Ktor app, I get:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedOperationException: Packages and file facades are not yet supported in Kotlin reflection. Meanwhile please use Java reflection to inspect this class: class com.example.ApplicationKt\n    at kotlin.reflect.jvm.internal.KClassImpl.reportUnresolvedClass(KClassImpl.kt:301)\n    at kotlin.reflect.jvm.internal.KClassImpl.access$reportUnresolvedClass(KClassImpl.kt:43)\n    at kotlin.reflect.jvm.internal.KClassImpl$Data$descriptor$2.invoke(KClassImpl.kt:53)\n    at kotlin.reflect.jvm.internal.KClassImpl$Data$descriptor$2.invoke(KClassImpl.kt:44)\n    at kotlin.reflect.jvm.internal.ReflectProperties$LazySoftVal.invoke(ReflectProperties.java:92)\n    at kotlin.reflect.jvm.internal.ReflectProperties$Val.getValue(ReflectProperties.java:31)\n    at kotlin.reflect.jvm.internal.KClassImpl$Data.getDescriptor(KClassImpl.kt)\n    at kotlin.reflect.jvm.internal.KClassImpl$Data$objectInstance$2.invoke(KClassImpl.kt:106)\n    at kotlin.reflect.jvm.internal.ReflectProperties$LazyVal.invoke(ReflectProperties.java:62)\n    at kotlin.reflect.jvm.internal.ReflectProperties$Val.getValue(ReflectProperties.java:31)\n    at kotlin.reflect.jvm.internal.KClassImpl$Data.getObjectInstance(KClassImpl.kt)\n    at kotlin.reflect.jvm.internal.KClassImpl.getObjectInstance(KClassImpl.kt:239)\n    at io.ktor.server.engine.ApplicationEngineEnvironmentReloading.createModuleContainer(ApplicationEngineEnvironmentReloading.kt:328)\n    at io.ktor.server.engine.ApplicationEngineEnvironmentReloading.executeModuleFunction(ApplicationEngineEnvironmentReloading.kt:317)\n    at io.ktor.server.engine.ApplicationEngineEnvironmentReloading.instantiateAndConfigureApplication(ApplicationEngineEnvironmentReloading.kt:275)\n    at io.ktor.server.engine.ApplicationEngineEnvironmentReloading.createApplication(ApplicationEngineEnvironmentReloading.kt:127)\n    at io.ktor.server.engine.ApplicationEngineEnvironmentReloading.start(ApplicationEngineEnvironmentReloading.kt:247)\n    at io.ktor.server.netty.NettyApplicationEngine.start(NettyApplicationEngine.kt:106)\n    at io.ktor.server.netty.NettyApplicationEngine.start(NettyApplicationEngine.kt:18)\n    at io.ktor.server.engine.ApplicationEngine$DefaultImpls.start$default(ApplicationEngine.kt:52)\n    at io.ktor.server.netty.EngineMain.main(EngineMain.kt:17)\n    at com.example.ApplicationKt.main(Application.kt:10)\n</code></pre>\n\n<p>The app is just:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;): Unit = EngineMain.main(args)\n\nfun Application.demoModule() {\n    routing {\n        get(\"/\") {\n            call.respondText(\"Hello ${call.parameters[\"name\"]}\")\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "json", "kotlin", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 855597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c300f3a92b0c4f5e6b7ebe52105b8c06?s=128&d=identicon&r=PG", "display_name": "andrew", "link": "https://stackoverflow.com/users/855597/andrew"}, "edited": false, "score": 0, "creation_date": 1556713632, "post_id": 55936173, "comment_id": 98525038, "body": "Unfortunately this adapter sets the &quot;type&quot; inside the object. I&#39;ve found a closed issue on the Moshi repo that further explains it: <a href=\"https://github.com/square/moshi/issues/813\" rel=\"nofollow noreferrer\">github.com/square/moshi/issues/813</a>  Apparently what I&#39;m looking to do is &quot;Polymorphism with an External Descriptor&quot;"}], "tags": [], "owner": {"reputation": 406, "user_id": 5074336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1130f64e70fab5b8168348ed36a1a372?s=128&d=identicon&r=PG&f=1", "display_name": "alexy", "link": "https://stackoverflow.com/users/5074336/alexy"}, "is_accepted": false, "score": 1, "last_activity_date": 1556713135, "creation_date": 1556713135, "answer_id": 55936173, "question_id": 55934050, "link": "https://stackoverflow.com/questions/55934050/serialize-sealed-class-with-moshi/55936173#55936173", "title": "Serialize sealed class with Moshi", "body": "<p>I think you need the polymorphic adapter to achieve this which requires the moshi-adapters artifact. This will enable serialization of sealed classes with different properties. More details are in this article here:  <a href=\"https://proandroiddev.com/moshi-polymorphic-adapter-is-d25deebbd7c5\" rel=\"nofollow noreferrer\">https://proandroiddev.com/moshi-polymorphic-adapter-is-d25deebbd7c5</a></p>\n"}, {"tags": [], "owner": {"reputation": 625, "user_id": 855597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c300f3a92b0c4f5e6b7ebe52105b8c06?s=128&d=identicon&r=PG", "display_name": "andrew", "link": "https://stackoverflow.com/users/855597/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1556720385, "creation_date": 1556720385, "answer_id": 55937731, "question_id": 55934050, "link": "https://stackoverflow.com/questions/55934050/serialize-sealed-class-with-moshi/55937731#55937731", "title": "Serialize sealed class with Moshi", "body": "<p>I have solved this by creating a Factory, an enclosing class, and an enum that can provide the classes for each item type. However this feels rather clunky and I would love a more straight forward solution. </p>\n\n<pre><code>data class AnimalObject(val type: AnimalType, val properties: Animal)\n\nenum class AnimalType(val derivedClass: Class&lt;out Animal&gt;) {\n    DOG(Animal.Dog::class.java),\n    CAT(Animal.Cat::class.java)\n}\n\nclass AnimalFactory : JsonAdapter.Factory {\n    override fun create(type: Type, annotations: MutableSet&lt;out Annotation&gt;, moshi: Moshi): JsonAdapter&lt;AnimalObject&gt;? {\n        if (!Types.getRawType(type).isAssignableFrom(AnimalObject::class.java)) {\n            return null\n        }\n\n        return object : JsonAdapter&lt;AnimalObject&gt;() {\n            private val animalTypeAdapter = moshi.adapter&lt;AnimalType&gt;(AnimalType::class.java)\n\n            override fun fromJson(reader: JsonReader): AnimalObject? {\n                TODO()\n            }\n\n            override fun toJson(writer: JsonWriter, value: AnimalObject?) {\n                writer.beginObject()\n                writer.name(\"type\")\n                animalTypeAdapter.toJson(writer, value!!.type)\n                writer.name(\"properties\")\n                moshi.adapter&lt;Animal&gt;(value.type.derivedClass).toJson(writer, value.properties)\n                writer.endObject()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Answer is taken from: github.com/square/moshi/issues/813 </p>\n"}], "owner": {"reputation": 625, "user_id": 855597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c300f3a92b0c4f5e6b7ebe52105b8c06?s=128&d=identicon&r=PG", "display_name": "andrew", "link": "https://stackoverflow.com/users/855597/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2939, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1574365355, "creation_date": 1556702329, "last_edit_date": 1574365355, "question_id": 55934050, "link": "https://stackoverflow.com/questions/55934050/serialize-sealed-class-with-moshi", "title": "Serialize sealed class with Moshi", "body": "<p>The following will produce an IllegalArgumentException because you \"Cannot serialize abstract class\"</p>\n\n<pre><code>sealed class Animal {\n    data class Dog(val isGoodBoy: Boolean) : Animal()\n    data class Cat(val remainingLives: Int) : Animal()\n}\n\nprivate val moshi = Moshi.Builder()\n    .build()\n\n@Test\nfun test() {\n    val animal: Animal = Animal.Dog(true)\n    println(moshi.adapter(Animal::class.java).toJson(animal))\n}\n</code></pre>\n\n<p>I have tried solving this using a custom adapter, but the only solution I could figure out involves explicitly writing all of the property names for each subclass. e.g:</p>\n\n<pre><code>class AnimalAdapter {\n    @ToJson\n    fun toJson(jsonWriter: JsonWriter, animal: Animal) {\n        jsonWriter.beginObject()\n        jsonWriter.name(\"type\")\n        when (animal) {\n            is Animal.Dog -&gt; jsonWriter.value(\"dog\")\n            is Animal.Cat -&gt; jsonWriter.value(\"cat\")\n        }\n\n        jsonWriter.name(\"properties\").beginObject()\n        when (animal) {\n            is Animal.Dog -&gt; jsonWriter.name(\"isGoodBoy\").value(animal.isGoodBoy)\n            is Animal.Cat -&gt; jsonWriter.name(\"remainingLives\").value(animal.remainingLives)\n        }\n        jsonWriter.endObject().endObject()\n    }\n\n    ....\n}\n</code></pre>\n\n<p>Ultimately I'm looking to produce JSON that looks like this:</p>\n\n<pre><code>{\n    \"type\" : \"cat\",\n    \"properties\" : {\n        \"remainingLives\" : 6\n    }\n}\n</code></pre>\n\n<pre><code>{\n    \"type\" : \"dog\",\n    \"properties\" : {\n        \"isGoodBoy\" : true\n    }\n}\n</code></pre>\n\n<p>I'm happy with having to use the custom adapter to write the name of each type, but I need a solution that will automatically serialize the properties for each type rather than having to write them all manually.</p>\n"}, {"tags": ["android", "kotlin", "data-binding"], "comments": [{"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1556700507, "post_id": 55933708, "comment_id": 98520123, "body": "please try like this   &quot;val binding: ActivityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main)&quot;"}, {"owner": {"reputation": 1290, "user_id": 10035978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ca7M0.jpg?s=128&g=1", "display_name": "Alex Kolydas", "link": "https://stackoverflow.com/users/10035978/alex-kolydas"}, "reply_to_user": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1556700606, "post_id": 55933708, "comment_id": 98520171, "body": "@android doesn&#39;t work.Something is wrong with the libraries i believe because also in my imports i got the error(on the line i import the ActivityMainBinding)"}, {"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 1, "creation_date": 1556700667, "post_id": 55933708, "comment_id": 98520192, "body": "have you imported the &quot;import android.databinding.DataBindingUtil&quot;?"}, {"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1556700751, "post_id": 55933708, "comment_id": 98520224, "body": "please update your library with &quot;com.android.databinding:compiler:3.5.0-alpha13&quot;"}, {"owner": {"reputation": 13823, "user_id": 1843848, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8p265.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/1843848/leo"}, "edited": false, "score": 0, "creation_date": 1556700894, "post_id": 55933708, "comment_id": 98520280, "body": "What gradle version are you using?"}, {"owner": {"reputation": 476, "user_id": 5444161, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-uGzxrg-Sch4/AAAAAAAAAAI/AAAAAAAABQU/dhbQOnBshB0/photo.jpg?sz=128", "display_name": "Rahul Agrawal", "link": "https://stackoverflow.com/users/5444161/rahul-agrawal"}, "edited": false, "score": 2, "creation_date": 1556702112, "post_id": 55933708, "comment_id": 98520675, "body": "Did you try rebuilding your project?"}, {"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1556703048, "post_id": 55933708, "comment_id": 98520997, "body": "a.  Does your xml file have the layout tag enclosing everything else? Without it, no binding class will be created. Also: try to comment out that line and build the app, maybe the binding class hasn&#39;t been built yet"}, {"owner": {"reputation": 1290, "user_id": 10035978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ca7M0.jpg?s=128&g=1", "display_name": "Alex Kolydas", "link": "https://stackoverflow.com/users/10035978/alex-kolydas"}, "reply_to_user": {"reputation": 476, "user_id": 5444161, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-uGzxrg-Sch4/AAAAAAAAAAI/AAAAAAAABQU/dhbQOnBshB0/photo.jpg?sz=128", "display_name": "Rahul Agrawal", "link": "https://stackoverflow.com/users/5444161/rahul-agrawal"}, "edited": false, "score": 0, "creation_date": 1556703990, "post_id": 55933708, "comment_id": 98521377, "body": "@RahulAgrawal wow that was it :O"}, {"owner": {"reputation": 476, "user_id": 5444161, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-uGzxrg-Sch4/AAAAAAAAAAI/AAAAAAAABQU/dhbQOnBshB0/photo.jpg?sz=128", "display_name": "Rahul Agrawal", "link": "https://stackoverflow.com/users/5444161/rahul-agrawal"}, "edited": false, "score": 3, "creation_date": 1556704068, "post_id": 55933708, "comment_id": 98521399, "body": "I have faced similar issue before and had read somewhere that the databinding file is created only on successful compile of the application. Glad i was of some help. @AlexKolydas"}, {"owner": {"reputation": 3, "user_id": 9203639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b1b6338f0ffd291afb56898e8876cc?s=128&d=identicon&r=PG&f=1", "display_name": "rugue", "link": "https://stackoverflow.com/users/9203639/rugue"}, "edited": false, "score": 0, "creation_date": 1559859766, "post_id": 55933708, "comment_id": 99562825, "body": "I had similar challenge, after some time it worked. I think you should also put on your internet connection"}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 4502993, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DNPz8.jpg?s=128&g=1", "display_name": "One Face", "link": "https://stackoverflow.com/users/4502993/one-face"}, "edited": false, "score": 0, "creation_date": 1581999748, "post_id": 55942173, "comment_id": 106615309, "body": "This worked for view binding. Had to include <code>apply plugin: &#39;kotlin-kapt&#39;</code> in the gradle file."}], "tags": [], "owner": {"reputation": 21, "user_id": 7456711, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RIVIzRWIexw/AAAAAAAAAAI/AAAAAAAAABU/3A_8FYJVsk4/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7456711/viktor"}, "is_accepted": false, "score": 2, "last_activity_date": 1556741681, "creation_date": 1556741681, "answer_id": 55942173, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/55942173#55942173", "title": "Unresolved reference:ActivityMainBinding", "body": "<pre><code>kapt \"com.android.databinding:compiler:3.4.0\"\n</code></pre>\n\n<p>change to</p>\n\n<pre><code>kapt 'androidx.databinding:databinding-compiler-common:3.4.0'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2351, "user_id": 1517551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e433e60341dfc4e3775a0e54141d74c7?s=128&d=identicon&r=PG", "display_name": "Bardo", "link": "https://stackoverflow.com/users/1517551/bardo"}, "edited": false, "score": 1, "creation_date": 1587399881, "post_id": 56667368, "comment_id": 108491072, "body": "I had layout_height and width on my Layout root node, but when only namespace attributes where left, the system proposed me to convert it to databinding layout. I cleaned and rebuild project, and the problem got solved."}], "tags": [], "owner": {"reputation": 119, "user_id": 3906799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeiCR.jpg?s=128&g=1", "display_name": "Abdelaziz refaat", "link": "https://stackoverflow.com/users/3906799/abdelaziz-refaat"}, "is_accepted": false, "score": 4, "last_activity_date": 1560953099, "last_edit_date": 1560953099, "creation_date": 1560946389, "answer_id": 56667368, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/56667368#56667368", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>It's not about the Gradle file. It is about the XML file.</p>\n\n<p>First, make sure that your layout tag contains just this line: </p>\n\n<pre><code>xmlns:android=\"http://schemas.android.com/apk/res/android\"\n</code></pre>\n\n<p>or these lines:</p>\n\n<pre><code>xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\n</code></pre>\n\n<p>Then rebuild the project.</p>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 9139691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1741000322585477/picture?type=large", "display_name": "Rob Ert", "link": "https://stackoverflow.com/users/9139691/rob-ert"}, "edited": false, "score": 0, "creation_date": 1570229152, "post_id": 57508938, "comment_id": 102859910, "body": "You can also try to reboot your IDE if it&#39;s not refreshing code, but it extremely rare."}], "tags": [], "owner": {"reputation": 375, "user_id": 9139691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1741000322585477/picture?type=large", "display_name": "Rob Ert", "link": "https://stackoverflow.com/users/9139691/rob-ert"}, "is_accepted": false, "score": 2, "last_activity_date": 1565869828, "last_edit_date": 1565869828, "creation_date": 1565868377, "answer_id": 57508938, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/57508938#57508938", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Just to sum up all useful actions:</p>\n\n<ol>\n<li>Check if you got top-level <code>&lt;layout&gt;</code> tag in respective .xml file.</li>\n<li>Verify build.gradle (app) if binding <code>enabled=true</code> in android section.</li>\n<li><p>Verify imports in activity file:</p>\n\n<pre><code>import android.databinding.DataBindingUtil\nimport com.example.[YOUR_APP_NAME].databinding.ActivityMainBinding\n</code></pre></li>\n<li><p>Try to rebuild project <strong>Build > Rebuild</strong> Project after every action just to refresh and check the results.</p>\n\n<p>Good Luck! It's just beginning of this Android journey:)</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3470, "user_id": 2645857, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Ym5Rc.png?s=128&g=1", "display_name": "michael.zech", "link": "https://stackoverflow.com/users/2645857/michael-zech"}, "edited": false, "score": 0, "creation_date": 1595507023, "post_id": 57833105, "comment_id": 111502526, "body": "Yep. That has worked for me! No actual configuration changes necessary. Thanks a lot."}], "tags": [], "owner": {"reputation": 91, "user_id": 10209979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683f4c12ae9c21ca09d549352215e449?s=128&d=identicon&r=PG&f=1", "display_name": "hivana", "link": "https://stackoverflow.com/users/10209979/hivana"}, "is_accepted": false, "score": 9, "last_activity_date": 1567854479, "creation_date": 1567854479, "answer_id": 57833105, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/57833105#57833105", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Sometimes all you need is clean and rebuild the project. </p>\n\n<pre><code>Build -&gt; Clean Project \nBuild -&gt; Rebuild Project\n</code></pre>\n\n<p>This would be enough for generating the binding classes.</p>\n\n<p><a href=\"https://developer.android.com/topic/libraries/data-binding/generated-binding\" rel=\"noreferrer\">Generated binding classes</a></p>\n"}, {"comments": [{"owner": {"reputation": 382, "user_id": 8899344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_nkSOhi1aFo/AAAAAAAAAAI/AAAAAAAABYQ/3Dm_4OED4Ls/photo.jpg?sz=128", "display_name": "TarekB", "link": "https://stackoverflow.com/users/8899344/tarekb"}, "edited": false, "score": 1, "creation_date": 1576513111, "post_id": 58177311, "comment_id": 104914909, "body": "in case someone  needs to see the code here is the github link  <a href=\"https://github.com/udacity/andfun-kotlin-android-trivia/blob/Step.01-Exercise-Creating-and-Adding-a-Fragment/app/src/main/java/com/example/android/navigation/MainActivity.kt\" rel=\"nofollow noreferrer\">github.com/udacity/andfun-kotlin-android-trivia/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 716, "user_id": 203173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c13a38a074d6b8fe94f819ba0256e0?s=128&d=identicon&r=PG", "display_name": "pshirishreddy", "link": "https://stackoverflow.com/users/203173/pshirishreddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1569896347, "creation_date": 1569896347, "answer_id": 58177311, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/58177311#58177311", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Faced similar issue while following the Android Udacity Lessons Creating and Adding Fragment. </p>\n\n<p>In my case the TitleFragment class was unable to resolve <code>com.example.android.navigation.databinding.FragmentTitleBinding</code>. </p>\n\n<p>I had to add empty <code>&lt;data&gt;&lt;/data&gt;</code> tag in fragment_title.xml file and clean/rebuild the project for the compilation error to go away.</p>\n"}, {"comments": [{"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 0, "creation_date": 1585089896, "post_id": 60839645, "comment_id": 107642558, "body": "Please avoid images of code! You can format code in your answer with the {} button"}, {"owner": {"reputation": 121, "user_id": 1283182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5cefd706a553632dd0750032233a58?s=128&d=identicon&r=PG", "display_name": "user1283182", "link": "https://stackoverflow.com/users/1283182/user1283182"}, "edited": false, "score": 0, "creation_date": 1586228707, "post_id": 60839645, "comment_id": 108045098, "body": "For some questions about unresolved FragmentTitleBinding, please try to replace the default &lt;FrameLayout&gt; tag with &lt;layout&gt; tag in your res/layout/fragment_title.xml"}], "tags": [], "owner": {"reputation": 427, "user_id": 9587132, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y3jX2oGe2EU/AAAAAAAAAAI/AAAAAAAAACE/2fBV9oaKWI4/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0418\u043d\u0436\u0435\u043d\u0435\u0440", "link": "https://stackoverflow.com/users/9587132/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%98%d0%bd%d0%b6%d0%b5%d0%bd%d0%b5%d1%80"}, "is_accepted": false, "score": 1, "last_activity_date": 1585092930, "last_edit_date": 1585092930, "creation_date": 1585085443, "answer_id": 60839645, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/60839645#60839645", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>In my project, if you don\u2019t wrap activity_main.xml in root element layout, data binding doesn\u2019t work...</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;layout&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n&lt;androidx.recyclerview.widget.RecyclerView\nandroid:id=\"@+id/resycler_data\"\nandroid:layout_width=\"0dp\"\nandroid:layout_height=\"0dp\"\napp:layout_constraintBottom_toBottomOf=\"parent\"\napp:layout_constraintEnd_toEndOf=\"parent\"\napp:layout_constraintStart_toStartOf=\"parent\"\napp:layout_constraintTop_toTopOf=\"parent\" /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 15489674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhRC8Svc-wzd90nnBlspkKEozm7SEE9vNo0hCah=k-s128", "display_name": "Tom Joney", "link": "https://stackoverflow.com/users/15489674/tom-joney"}, "edited": false, "score": 0, "creation_date": 1618292892, "post_id": 64017842, "comment_id": 118550728, "body": "Worked like a charm! Thanks :)"}], "tags": [], "owner": {"reputation": 1078, "user_id": 2289078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcWDJ.png?s=128&g=1", "display_name": "Android", "link": "https://stackoverflow.com/users/2289078/android"}, "is_accepted": false, "score": 3, "last_activity_date": 1600809632, "creation_date": 1600809632, "answer_id": 64017842, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/64017842#64017842", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>None of the suggestions worked for me, because the correct way to resolve this issue is to put (app level build.gradle)</p>\n<pre><code>buildFeatures{\n   dataBinding = true\n   viewBinding = true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14655, "user_id": 1439522, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/924a7f2067fd21632db2d88559bd1dd9?s=128&d=identicon&r=PG", "display_name": "prom85", "link": "https://stackoverflow.com/users/1439522/prom85"}, "is_accepted": false, "score": 1, "last_activity_date": 1601016491, "last_edit_date": 1601016491, "creation_date": 1601016080, "answer_id": 64059109, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/64059109#64059109", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>I see this relatively old bug every now and then (regardless of using kotlin or not, but it's very common when you convert a class from java to kotlin) and it's still an issue with the newest android studio. Cleaning the project does not help in many cases. Whenever there seems to be no valid reason for this issue, following trick <em>always</em> solves the issue for:</p>\n<p><strong>Solution 1</strong></p>\n<p>Rename the xml file (e.g. <code>main_activity2.xml), clean the project and try to do change </code>MainActivityBinding<code>to</code>MainActivity2Binding`</p>\n<p><strong>Solution 2</strong> (<em>I just found this trick recently but it seems to work reliably as well</em>)</p>\n<p>Alternatively  make a change inside the problematic xml file (add a view or so or change an attribute), clean the project and it's working again.</p>\n<p><em>Background</em></p>\n<p>I see this happening when moving layouts between modules e.g. and sometimes in other cases as well. But refactoring the structure regularly results in this issue. There is some caching problem that leads to this problem sometimes and in many cases, even deleting all temp files and cleaning the project does not help but only changing the xml or renaming it does solve the issue...</p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 2323612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sP6pS.jpg?s=128&g=1", "display_name": "pharask", "link": "https://stackoverflow.com/users/2323612/pharask"}, "is_accepted": false, "score": 0, "last_activity_date": 1601670222, "last_edit_date": 1601670222, "creation_date": 1601669794, "answer_id": 64177751, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/64177751#64177751", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Here is what I did.\nStep 1.\nGo to build.gradle(Module:app),\nadd this in android , below buildTypes:</p>\n<pre><code>buildFeatures {\n        dataBinding true\n    }\n</code></pre>\n<p>Step 2. In activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        tools:context=&quot;.MainActivity&quot;&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;!--you can add some xml tag here--&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>Step 3. In MainActivity.kt (testapp is my project)</p>\n<pre><code>import androidx.databinding.DataBindingUtil\nimport com.example.testapp.databinding.ActivityMainBinding\n</code></pre>\n<p>Step 4.</p>\n<pre><code>Go to Build-&gt;Clean Project \nand then Rebuild Project\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 10638010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ika", "link": "https://stackoverflow.com/users/10638010/ika"}, "is_accepted": false, "score": 1, "last_activity_date": 1605181622, "creation_date": 1605181622, "answer_id": 64803324, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/64803324#64803324", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Try to add in build.gradle (Module:app)</p>\n<pre><code>buildFeatures {\n   viewBinding true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8821279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b398a2a58727e8293cf8a8894c97de?s=128&d=identicon&r=PG&f=1", "display_name": "Abdel Mfossa", "link": "https://stackoverflow.com/users/8821279/abdel-mfossa"}, "is_accepted": false, "score": 0, "last_activity_date": 1611010216, "creation_date": 1611010216, "answer_id": 65783129, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding/65783129#65783129", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>Just add\n<code>import com.example.tiptime.databinding.ActivityMainBinding</code>\nin your MainActivity.kt file</p>\n"}], "owner": {"reputation": 1290, "user_id": 10035978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ca7M0.jpg?s=128&g=1", "display_name": "Alex Kolydas", "link": "https://stackoverflow.com/users/10035978/alex-kolydas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9930, "favorite_count": 1, "protected_date": 1612851599, "answer_count": 11, "score": 14, "last_activity_date": 1612848923, "creation_date": 1556700311, "last_edit_date": 1611044277, "question_id": 55933708, "link": "https://stackoverflow.com/questions/55933708/unresolved-referenceactivitymainbinding", "title": "Unresolved reference:ActivityMainBinding", "body": "<p>I know that this question have been asked before but I tried all the answers given and I still got nothing. I'm trying to define a <code>var binding:ActivityMainBinding</code> and I got an error</p>\n<pre><code>Unresolved reference:ActivityMainBinding\n</code></pre>\n<p><strong>Here is a part of my <code>mainActivity</code></strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import com.kolydas.aboutme.databinding.ActivityMainBinding //error\n\nclass MainActivity : AppCompatActivity() {\n\n    private lateinit var binding: ActivityMainBinding //error\n    //....\n}\n</code></pre>\n<p><strong>Here is my App <code>build.gradle</code></strong></p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'    \napply plugin: 'kotlin-kapt'    \napply plugin: 'kotlin-android-extensions'   \n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId &quot;com.kolydas.aboutme&quot;\n        minSdkVersion 19\n        targetSdkVersion 28\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    dataBinding{\n        enabled = true  //enable data binding\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    kapt &quot;com.android.databinding:compiler:3.4.0&quot;\n}\n</code></pre>\n<p>And of course in my xml file i have the layout /layout tags in the beginning and in the end.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "edited": false, "score": 0, "creation_date": 1556707474, "post_id": 55933725, "comment_id": 98522622, "body": "thanks, give this error on selected img, Failure delivering result ResultInfo{who=android:fragment:2, request=1000, result=-1, data=Intent { dat=content://com.google.android.apps.photos.contentprovider&zwnj;&#8203;/-1/1/content://medi&zwnj;&#8203;a/external/images/me&zwnj;&#8203;dia/48/ORIGINAL/NONE&zwnj;&#8203;/207210023 flg=0x1 clip={text/uri-list U:content://com.google.android.apps.photos.contentprovider/-&zwnj;&#8203;1/1/content%3A%2F%2F&zwnj;&#8203;media%2Fexternal%2Fi&zwnj;&#8203;mages%2Fmedia%2F48/O&zwnj;&#8203;RIGINAL/NONE/2072100&zwnj;&#8203;23} }} to activity {maps.com/maps.com.MainActivity}: java.lang.NullPointerException: uri"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "edited": false, "score": 0, "creation_date": 1556707900, "post_id": 55933725, "comment_id": 98522783, "body": "I updated the post with the modifications you indicated me."}, {"owner": {"reputation": 130, "user_id": 10398491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PbLUiqzN6aU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUmUNjLEH9UpDQKh164xZuV_IrB4A/mo/photo.jpg?sz=128", "display_name": "Amrit Bhattacharjee", "link": "https://stackoverflow.com/users/10398491/amrit-bhattacharjee"}, "edited": false, "score": 0, "creation_date": 1556773704, "post_id": 55933725, "comment_id": 98544495, "body": "Make sure you have added these permissions in manifest file:  <code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; &#47;&gt;     &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; &#47;&gt;</code>  and used same IMAGE_PICK_CODE (same integer value) in <code>pickImageFromGallery()</code> and <code>onActivityResult</code> method."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "edited": false, "score": 0, "creation_date": 1556784414, "post_id": 55933725, "comment_id": 98548850, "body": "I&#39;m having the same problem, I have the permissions on the manifest I do not understand why it does not work."}], "tags": [], "owner": {"reputation": 130, "user_id": 10398491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PbLUiqzN6aU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUmUNjLEH9UpDQKh164xZuV_IrB4A/mo/photo.jpg?sz=128", "display_name": "Amrit Bhattacharjee", "link": "https://stackoverflow.com/users/10398491/amrit-bhattacharjee"}, "is_accepted": true, "score": 2, "last_activity_date": 1556773852, "last_edit_date": 1556773852, "creation_date": 1556700405, "answer_id": 55933725, "question_id": 55933590, "link": "https://stackoverflow.com/questions/55933590/select-photo-on-gallery-kotlin/55933725#55933725", "title": "select photo on gallery kotlin", "body": "<p>At first you have to check for storage permission:</p>\n\n<pre><code>private fun checkPermissionForImage() {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n        if ((checkSelfPermission(Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED)\n            &amp;&amp; (checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED)\n        ) {\n            val permission = arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE)\n            val permissionCoarse = arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE)\n\n            requestPermissions(permission, PERMISSION_CODE_READ) // GIVE AN INTEGER VALUE FOR PERMISSION_CODE_READ LIKE 1001\n            requestPermissions(permissionCoarse, PERMISSION_CODE_WRITE) // GIVE AN INTEGER VALUE FOR PERMISSION_CODE_WRITE LIKE 1002\n        } else {\n            pickImageFromGallery()\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, If the permission is granted, I am accessing a method named <code>pickImageFromGallery()</code>. This is for accessing the gallery in order to choose image:</p>\n\n<pre><code>private fun pickImageFromGallery() {\n    val intent = Intent(Intent.ACTION_PICK)\n    intent.type = \"image/*\"\n    startActivityForResult(intent, IMAGE_PICK_CODE) // GIVE AN INTEGER VALUE FOR IMAGE_PICK_CODE LIKE 1000\n}\n</code></pre>\n\n<p>Now, you have to override the <code>onActivityResult</code> method. This will return your selected image <code>URI</code>.</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if (resultCode == Activity.RESULT_OK &amp;&amp; requestCode == IMAGE_PICK_CODE) {\n        // I'M GETTING THE URI OF THE IMAGE AS DATA AND SETTING IT TO THE IMAGEVIEW\n        imageView.setImageURI(data?.data)\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3921, "favorite_count": 0, "accepted_answer_id": 55933725, "answer_count": 1, "score": -3, "last_activity_date": 1556783515, "creation_date": 1556699641, "last_edit_date": 1556783515, "question_id": 55933590, "link": "https://stackoverflow.com/questions/55933590/select-photo-on-gallery-kotlin", "title": "select photo on gallery kotlin", "body": "<p>How can I change this code so that it opens a gallery and selects a photo. I do not need camera function. thank you</p>\n\n<p>I need this function in my app but I am not able to change that part of the code. Someone could help me to adapt it.</p>\n\n<p>I updated the post with the modifications you indicated me.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p><em>error line</em> </p>\n\n<pre><code>val bitmap = MediaStore.Images.Media.getBitmap(context.contentResolver, this.imageUri) as Bitmap\n</code></pre>\n\n<blockquote>\n  <p>Failure delivering result ResultInfo{who=android:fragment:2,\n  request=1000, result=-1, data=Intent {\n  dat=content://com.google.android.apps.photos.contentprovider/-1/1/content://media/external/images/media/48/ORIGINAL/NONE/207210023\n  flg=0x1 clip={text/uri-list\n  U:content://com.google.android.apps.photos.contentprovider/-1/1/content%3A%2F%2Fmedia%2Fexternal%2Fimages%2Fmedia%2F48/ORIGINAL/NONE/207210023}\n  }} to activity {maps.com/maps.com.MainActivity}:\n  java.lang.NullPointerException: uri</p>\n</blockquote>\n\n<pre><code>private fun checkPermissionForImage() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if ((checkSelfPermission(this.context, Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED)\n                    &amp;&amp; (checkSelfPermission(this.context, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED)\n            ) {\n                val permission = arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE)\n                val permissionCoarse = arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE)\n\n                requestPermissions(permission, PERMISSION_CODE_READ) // GIVE AN INTEGER VALUE FOR PERMISSION_CODE_READ LIKE 1001\n                requestPermissions(permissionCoarse, PERMISSION_CODE_WRITE) // GIVE AN INTEGER VALUE FOR PERMISSION_CODE_WRITE LIKE 1002\n            } else {\n                pickImageFromGallery()\n            }\n        }\n    }\n    private fun pickImageFromGallery() {\n        val intent = Intent(Intent.ACTION_PICK)\n        intent.type = \"image/*\"\n        startActivityForResult(intent, IMAGE_PICK_CODE) // GIVE AN INTEGER VALUE FOR IMAGE_PICK_CODE LIKE 1000\n    }\n\n    /**\n     * Save the picture to the thumbnail after taking it\n     */\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        if (requestCode == IMAGE_PICK_CODE &amp;&amp; resultCode == RESULT_OK) {\n            try {\n                //Getting the Bitmap from Gallery\n                val bitmap = MediaStore.Images.Media.getBitmap(context.contentResolver, this.imageUri) as Bitmap\n                this.imgThumb!!.setImageBitmap(bitmap)\n                this.pictureTaken = true\n            } catch (e:IOException) {\n                e.printStackTrace()\n            }\n        } else {\n            Toast.makeText(context, \"Error loading image\", Toast.LENGTH_LONG)\n        }\n    }\n\n    @Throws(IOException::class)\n    fun createImageFile(): File {\n        val timeStamp: String = SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(Date())\n        val imageFileName: String = \"JPEG_\" + timeStamp + \"_\"\n        val storageDir: File = activity.getExternalFilesDir(Environment.DIRECTORY_PICTURES)\n        if(!storageDir.exists()) storageDir.mkdirs()\n        val imageFile = File.createTempFile(imageFileName, \".jpg\", storageDir)\n        imageFilePath = imageFile.absolutePath\n        return imageFile\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-livedata", "android-viewmodel", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1582124204, "post_id": 55933448, "comment_id": 106669751, "body": "How to observe this in a Fragment?"}], "tags": [], "owner": {"reputation": 85180, "user_id": 493939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa881f5e177eb698ff51740270bf6f52?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/493939/user"}, "is_accepted": true, "score": 5, "last_activity_date": 1569356336, "last_edit_date": 1569356336, "creation_date": 1556699004, "answer_id": 55933448, "question_id": 55932799, "link": "https://stackoverflow.com/questions/55932799/problem-in-using-viewmodelscope-with-livedata/55933448#55933448", "title": "Problem in using viewModelScope with LiveData", "body": "<p>This code:</p>\n\n<pre><code>viewModelScope.launch {\n   deepFilterLiveData =  repo.applyFilter(compressedImage)\n}\n</code></pre>\n\n<p>returns immediately so when you first invoke the <code>onImageCompressed()</code> method you return <code>null</code> as <code>deepFilterLiveData</code>. Because in your UI you use <code>?.</code> on the <code>null</code> return value of <code>onImageCompressed()</code> the <code>when</code> clause will not be reached. The code without the coroutine works because in that case you have sequential code, your ViewModel awaits for the repository call.</p>\n\n<p>To solve this you could keep the LiveData for the ViewModel-UI interaction and return the values directly from the repository method:</p>\n\n<pre><code>class DeepFilterRepository {\n\n    suspend fun applyFilter(compressedImage: File) = withContext(Dispatchers.IO) {\n        Result.Success(\"Done\")\n    }\n\n}\n</code></pre>\n\n<p>And the ViewModel:</p>\n\n<pre><code>class DeepFilterViewModel(val repo: DeepFilterRepository) : ViewModel() {\n\n    private val _backingLiveData = MutableLiveData&lt;Result&gt;()\n    val deepFilterLiveData: LiveData&lt;Result&gt;\n       get() = _backingLiveData\n\n    fun onImageCompressed(compressedImage: File) {\n        // you could also set Loading as the initial state for _backingLiveData.value           \n       _backingLiveData.value = Result.Loading\n        viewModelScope.launch {\n            _backingLiveData.value = repo.applyFilter(compressedImage)\n        }\n    }     \n}\n</code></pre>\n"}], "owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2885, "favorite_count": 1, "accepted_answer_id": 55933448, "answer_count": 1, "score": 7, "last_activity_date": 1569356336, "creation_date": 1556694928, "question_id": 55932799, "link": "https://stackoverflow.com/questions/55932799/problem-in-using-viewmodelscope-with-livedata", "title": "Problem in using viewModelScope with LiveData", "body": "<p>I am using <code>viewModelScope</code> in the <code>ViewModel</code> which calls a suspend function in the repository as shown below:</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>class DeepFilterViewModel(val repo: DeepFilterRepository) : ViewModel() {\n\nvar deepFilterLiveData: LiveData&lt;Result&gt;? = null\n\n fun onImageCompressed(compressedImage: File): LiveData&lt;Result&gt;? {\n    if (deepFilterLiveData == null) {\n        viewModelScope.launch {\n            deepFilterLiveData =  repo.applyFilter(compressedImage)\n        }\n\n    }\n    return deepFilterLiveData\n }\n}\n</code></pre>\n\n<p><strong>Repository</strong></p>\n\n<pre><code>class DeepFilterRepository {\n\nsuspend fun applyFilter(compressedImage: File): LiveData&lt;Result&gt; {\n    val mutableLiveData = MutableLiveData&lt;Result&gt;()\n    mutableLiveData.value = Result.Loading\n\n    withContext(Dispatchers.IO) {\n        mutableLiveData.value = Result.Success(\"Done\")\n\n    }\n    return mutableLiveData\n }\n}\n</code></pre>\n\n<p>I am observing the LiveData from the Fragment as shown below:</p>\n\n<pre><code> viewModel.onImageCompressed(compressedImage)?.observe(this, Observer { result -&gt;\n        when (result) {\n\n            is Result.Loading -&gt; {\n                loader.makeVisible()\n            }\n\n            is Result.Success&lt;*&gt; -&gt; {\n                // Process result\n\n            }\n        }\n    })\n</code></pre>\n\n<p>The problem is I am getting no value from the LiveData. If I don't use <code>viewModelScope.launch {}</code> as shown below, then everything works fine.</p>\n\n<pre><code>class DeepFilterViewModel(val repo: DeepFilterRepository) : ViewModel() {\n\nvar deepFilterLiveData: LiveData&lt;Result&gt;? = null\n\n fun onImageCompressed(compressedImage: File): LiveData&lt;Result&gt;? {\n    if (deepFilterLiveData == null) {\n            deepFilterLiveData =  repo.applyFilter(compressedImage)\n    }\n    return deepFilterLiveData\n }\n}\n</code></pre>\n\n<p>I don't know what I am missing. Any help will be appreciated.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1556694904, "post_id": 55932772, "comment_id": 98518401, "body": "You need to use your <code>toggle buttons</code> like this <code>&lt;com.ktpackages.elements.buttons.ToggleImageButton</code>"}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1556695052, "post_id": 55932772, "comment_id": 98518440, "body": "Your class already is the <code>ImageButton</code>. You don&#39;t need to inflate anything internally. Aside from that, it&#39;s a little unclear what&#39;s crashing where."}, {"owner": {"reputation": 657, "user_id": 4410652, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000354098475/picture?type=large", "display_name": "Alex Weavers", "link": "https://stackoverflow.com/users/4410652/alex-weavers"}, "edited": false, "score": 0, "creation_date": 1556698814, "post_id": 55932772, "comment_id": 98519540, "body": "The exception:    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ktpackages.tacosolo/com.ktpackages.tacosol&zwnj;&#8203;o.MapsActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void com.ktpackages.elements.buttons.ToggleImageButton.setOnClick&zwnj;&#8203;Listener(android.vie&zwnj;&#8203;w.View$OnClickListen&zwnj;&#8203;er)&#39; on a null object reference  On this line:      driveThruToggle.setOnClickListener {"}, {"owner": {"reputation": 657, "user_id": 4410652, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000354098475/picture?type=large", "display_name": "Alex Weavers", "link": "https://stackoverflow.com/users/4410652/alex-weavers"}, "edited": false, "score": 0, "creation_date": 1556698919, "post_id": 55932772, "comment_id": 98519567, "body": "In addition, the button doesn&#39;t appear visually in the Android Studio editor."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1556700872, "post_id": 55932772, "comment_id": 98520272, "body": "Is that the layout, or part of the layout, that you&#39;re calling <code>setContentView()</code> with in <code>MapsActivity</code>? Or is it <code>&lt;include&gt;</code>d therein?"}, {"owner": {"reputation": 657, "user_id": 4410652, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000354098475/picture?type=large", "display_name": "Alex Weavers", "link": "https://stackoverflow.com/users/4410652/alex-weavers"}, "edited": false, "score": 0, "creation_date": 1556704671, "post_id": 55932772, "comment_id": 98521615, "body": "Yes, the line in question is two below setContentView"}, {"owner": {"reputation": 657, "user_id": 4410652, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000354098475/picture?type=large", "display_name": "Alex Weavers", "link": "https://stackoverflow.com/users/4410652/alex-weavers"}, "edited": false, "score": 0, "creation_date": 1556711067, "post_id": 55932772, "comment_id": 98523982, "body": "Thanks, I just realized that that doesn&#39;t work... I&#39;m dumb."}], "owner": {"reputation": 657, "user_id": 4410652, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000354098475/picture?type=large", "display_name": "Alex Weavers", "link": "https://stackoverflow.com/users/4410652/alex-weavers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556703646, "creation_date": 1556694763, "last_edit_date": 1556703646, "question_id": 55932772, "link": "https://stackoverflow.com/questions/55932772/why-wont-my-custom-button-class-show-up", "title": "Why won&#39;t my custom button class show up?", "body": "<p>I'm new to Android development. I wanted to make a custom ImageButton that toggles colors when you tap it for my project. I'd like to do it properly and for the button itself to keep track of its own state, so I extended the class and made ToggleImageButton below.</p>\n\n<pre><code>package com.ktpackages.elements.buttons\n\nimport android.annotation.TargetApi\nimport android.content.Context\nimport android.graphics.Color\nimport android.util.AttributeSet\nimport android.view.LayoutInflater\nimport android.view.ViewGroup\nimport android.widget.ImageButton\nimport com.google.android.libraries.places.internal.it\nimport com.ktpackages.tacosolo.R\n\nclass ToggleImageButton : ImageButton {\n    private var toggle_state = true\n\n    @JvmOverloads\n    constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) :\n            super(context, null, defStyleAttr)\n    {\n        // Add onColor and offColor to attrs.\n        setAttrs(attrs)\n    }\n\n    @TargetApi(21)\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int, defStyleRes: Int) :\n            super(context, attrs, defStyleAttr, defStyleRes) {\n        setAttrs(attrs)\n    }\n\n    private fun setAttrs(attrs: AttributeSet?) {\n        attrs?.let {\n            val a = context.obtainStyledAttributes(\n                it,\n                R.styleable.custom_component_attributes, 0, 0\n            )\n            var offColor = resources.getText(\n                a.getResourceId(\n                    R.styleable\n                        .custom_component_attributes_toggle_color_off,\n                    R.color.design_default_color_primary\n                )\n            )\n            var onColor = resources.getText(\n                a.getResourceId(\n                    R.styleable\n                        .custom_component_attributes_toggle_color_off,\n                    R.color.design_default_color_primary_dark\n                )\n            )\n\n            a.recycle()\n        }\n    }\n\n    var toggled: Boolean\n        get() {\n            return toggle_state\n        }\n        set(value) {\n            if (toggle_state != value as Boolean) {\n                toggle()\n            }\n        }\n\n    fun toggle() {\n        toggle_state = !toggle_state\n        if (toggle_state) {\n            setBackgroundColor(R.attr.toggle_color_on)\n        } else {\n            setBackgroundColor(R.attr.toggle_color_off)\n        }\n    }\n\n    init {\n        LayoutInflater.from(context)\n            .inflate(R.layout.toggle_image_button, null, true)\n    }\n}\n</code></pre>\n\n<p>I followed several tutorials to get this far, but I'm getting a bit lost. From what I understand, the button must be inflated to render correctly in the Android Studio editor. So I added that code, using null for the ViewGroup, in the init. However, I get a NullPointerException when trying to access the button and the app crashes before loading the view. This did not happen when I simply had an ImageButton.</p>\n\n<p>values/attrs.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;declare-styleable name=\"custom_component_attributes\"&gt;\n        &lt;attr name=\"toggle_color_on\" format=\"color\" /&gt;\n        &lt;attr name=\"toggle_color_off\" format=\"color\" /&gt;\n    &lt;/declare-styleable&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>layout/toggle_image_button.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;ImageButton\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"match_parent\"\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"/&gt;\n</code></pre>\n\n<p>Code that crashes:</p>\n\n<pre><code>    driveThruToggle.setOnClickListener {\n        togglePins(driveThruToggle)\n    }\n\n    foodTruckToggle.setOnClickListener {\n        togglePins(foodTruckToggle)\n    }\n\n    sitDownToggle.setOnClickListener {\n        togglePins(sitDownToggle)\n    }\n</code></pre>\n\n<p>layout.xml</p>\n\n<pre><code>&lt;TableRow\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"67dp\" android:layout_marginBottom=\"0dp\"\n            android:layout_alignBottom=\"@+id/map\" android:orientation=\"horizontal\"\n            android:gravity=\"center|center_vertical\"\n            android:background=\"@android:color/transparent\"\n            android:weightSum=\"3\"&gt;\n        &lt;com.ktpackages.elements.buttons.ToggleImageButton\n                android:layout_width=\"115dp\"\n                android:layout_height=\"wrap_content\" app:srcCompat=\"@drawable/ic_car_128\"\n                app:toggle_color_off=\"@color/colorLightText\"\n                app:toggle_color_on=\"@color/colorBackground\"\n                android:id=\"@+id/driveThruToggle\"\n                android:background=\"@color/colorLightText\" android:scaleType=\"fitCenter\" android:layout_weight=\"1\"/&gt;\n        &lt;com.ktpackages.elements.buttons.ToggleImageButton\n                android:layout_width=\"115dp\"\n                android:layout_height=\"wrap_content\" app:srcCompat=\"@drawable/ic_chairs_128\"\n                app:toggle_color_off=\"@color/colorLightText\"\n                app:toggle_color_on=\"@color/colorBackground\"\n                android:id=\"@+id/sitDownToggle\"\n                android:background=\"@color/colorLightText\" android:scaleType=\"fitCenter\" android:layout_weight=\"1\"/&gt;\n        &lt;com.ktpackages.elements.buttons.ToggleImageButton\n                android:layout_width=\"115dp\"\n                android:layout_height=\"wrap_content\"\n                app:srcCompat=\"@drawable/ic_food_truck_128\"\n                app:toggle_color_off=\"@color/colorLightText\"\n                app:toggle_color_on=\"@color/colorBackground\"\n                android:id=\"@+id/foodTruckToggle\"\n                android:background=\"@color/colorLightText\"\n                android:scaleType=\"fitCenter\"\n                android:layout_weight=\"1\"/&gt;\n\n    &lt;/TableRow&gt;\n</code></pre>\n\n<p>I understand that toggle buttons already exist, but I'd like to learn how to do this.</p>\n"}, {"tags": ["android", "kotlin", "navigation", "android-jetpack", "fragment-backstack"], "comments": [{"owner": {"reputation": 551, "user_id": 4088135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRtCc.jpg?s=128&g=1", "display_name": "Panos Gr", "link": "https://stackoverflow.com/users/4088135/panos-gr"}, "edited": false, "score": 0, "creation_date": 1615491318, "post_id": 55932672, "comment_id": 117714093, "body": "For the record. <a href=\"https://developer.android.com/guide/navigation/navigation-navigate#pop\" rel=\"nofollow noreferrer\">Documentation says</a> it&#39;s fine to use login fragment just as you used them. I couldn&#39;t get why &quot;login screens aren&#39;t supposed to work that way&quot;"}, {"owner": {"reputation": 355, "user_id": 7119059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z25gR.jpg?s=128&g=1", "display_name": "adrilz", "link": "https://stackoverflow.com/users/7119059/adrilz"}, "reply_to_user": {"reputation": 551, "user_id": 4088135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRtCc.jpg?s=128&g=1", "display_name": "Panos Gr", "link": "https://stackoverflow.com/users/4088135/panos-gr"}, "edited": false, "score": 0, "creation_date": 1615521387, "post_id": 55932672, "comment_id": 117722144, "body": "@PanosGr Are you referring to <i>&quot;For example, if your app has an initial login flow, once a user has logged in, you should pop all of the login-related destinations off of the back stack so that the Back button doesn&#39;t take users back into the login flow&quot;</i>? Well, in my case, the user isn&#39;t logged in yet. It just opens a different login method. Generally, users should be allowed to go back to the main login screen and select a different login method."}], "answers": [{"comments": [{"owner": {"reputation": 4128, "user_id": 616280, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1591651c449612f9a7397ec089fb04f0?s=128&d=identicon&r=PG", "display_name": "Fugogugo", "link": "https://stackoverflow.com/users/616280/fugogugo"}, "edited": false, "score": 6, "creation_date": 1585626739, "post_id": 56163758, "comment_id": 107820325, "body": ".... I am trying to understand this answer but I can&#39;t .  can someone explain it clearer to me?"}, {"owner": {"reputation": 80, "user_id": 4479700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DrUMbqpkULk/AAAAAAAAAAI/AAAAAAAAABo/32umrqfBLz4/photo.jpg?sz=128", "display_name": "Chris C.", "link": "https://stackoverflow.com/users/4479700/chris-c"}, "reply_to_user": {"reputation": 4128, "user_id": 616280, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1591651c449612f9a7397ec089fb04f0?s=128&d=identicon&r=PG", "display_name": "Fugogugo", "link": "https://stackoverflow.com/users/616280/fugogugo"}, "edited": false, "score": 31, "creation_date": 1585947015, "post_id": 56163758, "comment_id": 107954645, "body": "@Fugogugo When you create an action, you can add the <code>popUpTo</code> value. When you&#39;ve used this action to navigate to the destination and you back navigate, the navigation will take you back to the <code>popUpTo</code> fragment and in the case of the code sample above, that&#39;s the <code>loginFragment</code>. Setting <code>popUpToInclusive=&quot;true&quot;</code> tells the action &quot;When you back navigate, please also remove the fragment in <code>popUpTo</code>&quot; so it will also remove <code>loginFragment</code> . Does that help?"}, {"owner": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "edited": false, "score": 2, "creation_date": 1589207887, "post_id": 56163758, "comment_id": 109194157, "body": "For me works, but  there is still a glitch, namely on B fragment i still see &quot;up arror button&quot; - what is not expected"}, {"owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "edited": false, "score": 0, "creation_date": 1604983931, "post_id": 56163758, "comment_id": 114507069, "body": "Can you help me with this: <a href=\"https://stackoverflow.com/questions/64687574/android-navigation-url-deep-link-back-to-previous-app/64740896#64740896\" title=\"android navigation url deep link back to previous app\">stackoverflow.com/questions/64687574/&hellip;</a>, thank you."}], "tags": [], "owner": {"reputation": 436, "user_id": 11508481, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9a893e21c7da5adb485f946e7426725c?s=128&d=identicon&r=PG", "display_name": "Rito", "link": "https://stackoverflow.com/users/11508481/rito"}, "is_accepted": true, "score": 42, "last_activity_date": 1560352293, "last_edit_date": 1560352293, "creation_date": 1557993934, "answer_id": 56163758, "question_id": 55932672, "link": "https://stackoverflow.com/questions/55932672/navigation-popupto-and-popuptoinclusive-arent-clearing-the-backstack/56163758#56163758", "title": "Navigation popUpTo and PopUpToInclusive aren&#39;t clearing the backstack", "body": "<pre><code>&lt;action\n        android:id=\"@+id/action_login_to_emailLoginFragment\"\n        app:destination=\"@id/emailLoginFragment\"\n        app:popEnterAnim=\"@anim/slide_in_right\"\n        app:popExitAnim=\"@anim/slide_out_right\"\n        app:popUpTo=\"@+id/loginFragment\"\n        app:popUpToInclusive=\"true\"/&gt;\n</code></pre>\n\n<p>Your popUpTo is going back to the email login, and then popping it because of the inclusive.\nIf you will change the popUpTo to your login fragment, it will be navigated back to, and popped as well because of the inclusive flag, which will result in your desired behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 7119059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z25gR.jpg?s=128&g=1", "display_name": "adrilz", "link": "https://stackoverflow.com/users/7119059/adrilz"}, "edited": false, "score": 1, "creation_date": 1564326022, "post_id": 57131814, "comment_id": 100985248, "body": "Thank you, I appreciate your help. But Rito has already given the answer, and I think your answer is basically the same."}, {"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 0, "creation_date": 1609292030, "post_id": 57131814, "comment_id": 115803457, "body": "Remember that if you have a chain of Fragments A -&gt; B -&gt; C -&gt; D then you need to pass the following in popUpTo action arguments , to have exit on backPress behaviour. app:popUpTo=&quot;@id/A&quot;, app:popUpTo=&quot;@id/B&quot;, app:popUpTo=&quot;@id/C&quot;"}], "tags": [], "owner": {"reputation": 271, "user_id": 2960796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d486801748831ab7accebe50c841fa9?s=128&d=identicon&r=PG", "display_name": "Cenk", "link": "https://stackoverflow.com/users/2960796/cenk"}, "is_accepted": false, "score": 17, "last_activity_date": 1563700418, "creation_date": 1563700418, "answer_id": 57131814, "question_id": 55932672, "link": "https://stackoverflow.com/questions/55932672/navigation-popupto-and-popuptoinclusive-arent-clearing-the-backstack/57131814#57131814", "title": "Navigation popUpTo and PopUpToInclusive aren&#39;t clearing the backstack", "body": "<p>These 2 lines make the trick works:</p>\n\n<p>If you want to go from A to B and expect to finish A:</p>\n\n<p>You need to call B with this action:</p>\n\n<pre><code>    &lt;fragment\n        android:id=\"@+id/fragmentA\"            \n        tools:layout=\"@layout/fragment_a\"&gt;\n\n        &lt;action\n            android:id=\"@+id/action_call_B\"\n            app:destination=\"@+id/fragmentB\"\n            app:popUpTo=\"@id/fragmentA\"\n            app:popUpToInclusive=\"true\" /&gt;\n\n    &lt;/fragment&gt;\n\n    &lt;fragment\n        android:id=\"@+id/fragmentB\"\n        tools:layout=\"@layout/fragment_b\"&gt;\n\n\n    &lt;/fragment&gt;\n</code></pre>\n\n<p>If you put log to your fragments you can see that fragmentA is destroyed after calling fragmentB with this action.</p>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 7119059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z25gR.jpg?s=128&g=1", "display_name": "adrilz", "link": "https://stackoverflow.com/users/7119059/adrilz"}, "edited": false, "score": 2, "creation_date": 1568459281, "post_id": 57922038, "comment_id": 102285933, "body": "I think this is the same as the accepted answer, but done programmatically. Nice, though. I may need it some day."}, {"owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "edited": false, "score": 0, "creation_date": 1604983801, "post_id": 57922038, "comment_id": 114507042, "body": "Can you help me with this: <a href=\"https://stackoverflow.com/questions/64687574/android-navigation-url-deep-link-back-to-previous-app\" title=\"android navigation url deep link back to previous app\">stackoverflow.com/questions/64687574/&hellip;</a>, thank you."}], "tags": [], "owner": {"reputation": 590, "user_id": 10498159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nzuQzUz6FPo/AAAAAAAAAAI/AAAAAAAAACg/6tkW8TzU8rE/photo.jpg?sz=128", "display_name": "Ven Ren", "link": "https://stackoverflow.com/users/10498159/ven-ren"}, "is_accepted": false, "score": 13, "last_activity_date": 1591735381, "last_edit_date": 1591735381, "creation_date": 1568371039, "answer_id": 57922038, "question_id": 55932672, "link": "https://stackoverflow.com/questions/55932672/navigation-popupto-and-popuptoinclusive-arent-clearing-the-backstack/57922038#57922038", "title": "Navigation popUpTo and PopUpToInclusive aren&#39;t clearing the backstack", "body": "<p>You can do it in XML just like <a href=\"https://stackoverflow.com/a/56163758/10498159\">this answer does</a>, or you can also do it programmatically: </p>\n\n<pre><code>NavOptions navOptions = new NavOptions.Builder().setPopUpTo(R.id.loginRegister, true).build();\nNavigation.findNavController(mBinding.titleLogin).navigate(R.id.login_to_main, null, navOptions);\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 7119059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z25gR.jpg?s=128&g=1", "display_name": "adrilz", "link": "https://stackoverflow.com/users/7119059/adrilz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27210, "favorite_count": 5, "accepted_answer_id": 56163758, "answer_count": 3, "score": 34, "last_activity_date": 1591735381, "creation_date": 1556694084, "last_edit_date": 1556698056, "question_id": 55932672, "link": "https://stackoverflow.com/questions/55932672/navigation-popupto-and-popuptoinclusive-arent-clearing-the-backstack", "title": "Navigation popUpTo and PopUpToInclusive aren&#39;t clearing the backstack", "body": "<p>I'm new to the Android Jetpack Navigation architecture. I'm trying it out on a new app. There's one activity and a few fragments, two of them are login screen and email login screen. I defined those fragments in my navigations XML. The flow of the app is as follows:</p>\n\n<p><code>Login screen</code> \u2192 <code>Email Login screen</code></p>\n\n<p>What I want is, after navigating to the email login screen, when I press back, the app exits. Meaning the back-stack for login screen is removed. I know login screens aren't supposed to work that way, but I'm still just figuring things out.</p>\n\n<p>I followed the documentation from Google's <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started\" rel=\"noreferrer\">Get started with the Navigation component</a>. It said, using <code>app:popUpTo</code> and <code>apppopUpToInclusive=\"true\"</code> is supposed to clear the backstack, yet when I press back on email login screen, it still goes back to login instead of exiting.</p>\n\n<p>So, here's what I've tried.</p>\n\n<p>nav_main.xml</p>\n\n<pre><code>&lt;fragment android:id=\"@+id/loginFragment\"\n          android:name=\"com.example.myapp.ui.main.LoginFragment\"\n          android:label=\"@string/login\"\n          tools:layout=\"@layout/fragment_login\" &gt;\n\n    &lt;action\n        android:id=\"@+id/action_login_to_emailLoginFragment\"\n        app:destination=\"@id/emailLoginFragment\"\n        app:popEnterAnim=\"@anim/slide_in_right\"\n        app:popExitAnim=\"@anim/slide_out_right\"\n        app:popUpTo=\"@+id/emailLoginFragment\"\n        app:popUpToInclusive=\"true\"/&gt;\n\n&lt;/fragment&gt;\n\n&lt;fragment android:id=\"@+id/emailLoginFragment\"\n          android:name=\"com.example.myapp.ui.main.EmailLoginFragment\"\n          android:label=\"EmailLoginFragment\"\n          tools:layout=\"@layout/fragment_login_email\" /&gt;\n</code></pre>\n\n<p>LoginFragment.kt</p>\n\n<pre><code>override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View {\n    binding.emailLoginButton.setOnClickListener {\n        findNavController().navigate(R.id.action_login_to_emailLoginFragment)\n    }\n\n    return binding.root\n}\n</code></pre>\n\n<p>I gave a click event to a button. In it, I used the Navigation Controller to navigate to the email login screen by giving it the action's ID. In the <code>&lt;action&gt;</code>, there are <code>app:popUpTo</code> and <code>app:popUpToInclusive=\"true\"</code>.</p>\n\n<p>After reading the documentation over and over, as well as reading plenty of StackOverflow questions, I found those properties are supposed to remove my login screen off the back-stack. But they don't. The button does navigate to the email login screen, but when I press back, it still goes back to login screen instead of exiting the app. What am I missing?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3326, "user_id": 1150795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860d81e03dcd86d1644d0e78b18a5344?s=128&d=identicon&r=PG", "display_name": "Piotr Wittchen", "link": "https://stackoverflow.com/users/1150795/piotr-wittchen"}, "edited": false, "score": 0, "creation_date": 1560459070, "post_id": 55932196, "comment_id": 99754537, "body": "Did you resolve that? I have the same issue."}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 4397653, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VBd7y-CxOQA/AAAAAAAAAAI/AAAAAAAAAE0/QBGdrrTPUqs/photo.jpg?sz=128", "display_name": "Hemendra Gangwar", "link": "https://stackoverflow.com/users/4397653/hemendra-gangwar"}, "edited": false, "score": 0, "creation_date": 1556690963, "post_id": 55932269, "comment_id": 98517455, "body": "I am using      ext.kotlin_version = &#39;1.3.30&#39; and Android Studio version is 3.4.0"}], "tags": [], "owner": {"reputation": 154, "user_id": 9754227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5474e5a6f8b15a33215b5ef4c441dde0?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Arora", "link": "https://stackoverflow.com/users/9754227/himanshu-arora"}, "is_accepted": false, "score": 0, "last_activity_date": 1556690741, "creation_date": 1556690741, "answer_id": 55932269, "question_id": 55932196, "link": "https://stackoverflow.com/questions/55932196/how-can-is-resolve-warning-of-variant-getpackagelibrary/55932269#55932269", "title": "How can is resolve warning of variant.getPackageLibrary()", "body": "<p>set the latest version of kotlin in <code>kotlin_version</code> then rebuild the project.</p>\n"}], "owner": {"reputation": 434, "user_id": 4397653, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VBd7y-CxOQA/AAAAAAAAAAI/AAAAAAAAAE0/QBGdrrTPUqs/photo.jpg?sz=128", "display_name": "Hemendra Gangwar", "link": "https://stackoverflow.com/users/4397653/hemendra-gangwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556690741, "creation_date": 1556690208, "question_id": 55932196, "link": "https://stackoverflow.com/questions/55932196/how-can-is-resolve-warning-of-variant-getpackagelibrary", "title": "How can is resolve warning of variant.getPackageLibrary()", "body": "<p>Is there any solution to resolve this warning for now in my code, as its showing the reason 'The Kotlin plugin is currently calling this API. We are working to solve this.'</p>\n\n<p><strong>WARNING: API 'variant.getPackageLibrary()' is obsolete and has been replaced with 'variant.getPackageLibraryProvider()'.</strong></p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n   compileSdkVersion 28\n   defaultConfig {\n     minSdkVersion 15\n     targetSdkVersion 28\n     versionCode 1\n     versionName \"1.0\"\n     testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n}\n buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n     }\n   }\n}\n\n dependencies {\n     implementation fileTree(dir: 'libs', include: ['*.jar'])\n     implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:${kotlin_version}\"\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 8332511, "user_type": "registered", "profile_image": "https://graph.facebook.com/666482663561459/picture?type=large", "display_name": "Noban Hasan", "link": "https://stackoverflow.com/users/8332511/noban-hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556695014, "creation_date": 1556695014, "answer_id": 55932810, "question_id": 55932025, "link": "https://stackoverflow.com/questions/55932025/how-can-i-extract-date-and-time-from-a-long-type-variable-in-kotlin-on-android/55932810#55932810", "title": "How can I extract date and time from a Long type variable in Kotlin on Android", "body": "<p><strong>Here is the way i use in Java. You just simply change it for kotlin.</strong></p>\n\n<p>SimpleDateFormat formatter = new SimpleDateFormat(\"dd/MM/yyyy\"); </p>\n\n<p>String dateString = formatter.format(new Date(dateInMillis)));</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 11435887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d6f8f5ea28defcf2e6fffa9763fa12?s=128&d=identicon&r=PG&f=1", "display_name": "arjitsrivastava13", "link": "https://stackoverflow.com/users/11435887/arjitsrivastava13"}, "is_accepted": true, "score": 1, "last_activity_date": 1556695718, "creation_date": 1556695718, "answer_id": 55932936, "question_id": 55932025, "link": "https://stackoverflow.com/questions/55932025/how-can-i-extract-date-and-time-from-a-long-type-variable-in-kotlin-on-android/55932936#55932936", "title": "How can I extract date and time from a Long type variable in Kotlin on Android", "body": "<pre><code>import java.text.SimpleDateFormat\nimport java.util.Date\n\nfun convertLongToTime (time: Long): String {\n    val date = Date(time)\n    val format = SimpleDateFormat(\"dd/M/yyyy hh:mm:ss\")\n    return format.format(date)\n}\n</code></pre>\n\n<p>This would work in Kotlin, you can change the format in SimpleDataFormat according to how you want.</p>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 7482173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dbmHh.jpg?s=128&g=1", "display_name": "Dipakk Sharma", "link": "https://stackoverflow.com/users/7482173/dipakk-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1556704035, "creation_date": 1556704035, "answer_id": 55934387, "question_id": 55932025, "link": "https://stackoverflow.com/questions/55932025/how-can-i-extract-date-and-time-from-a-long-type-variable-in-kotlin-on-android/55934387#55934387", "title": "How can I extract date and time from a Long type variable in Kotlin on Android", "body": "<p>Just pass your milliseconds to Date Constructor <code>Date(timeinMillis)</code> it will return the date. </p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1556711011, "creation_date": 1556711011, "answer_id": 55935732, "question_id": 55932025, "link": "https://stackoverflow.com/questions/55932025/how-can-i-extract-date-and-time-from-a-long-type-variable-in-kotlin-on-android/55935732#55935732", "title": "How can I extract date and time from a Long type variable in Kotlin on Android", "body": "<p>From API level 26 on (Android) or if the JVM is your target, you can use the Java 8 Date API:</p>\n\n<pre><code>val date = Instant\n        .ofEpochMilli(1164925597950)\n        .atZone(ZoneId.systemDefault()) // change time zone if necessary\n        .toLocalDateTime()\n\nval formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\")\nprintln(formatter.format(date)) // 2006-11-30 23:26\n</code></pre>\n\n<p>Below API level 26:</p>\n\n<pre><code>val date = Date(1164925597950)\n\nval formatter = SimpleDateFormat(\"yyyy-MM-dd HH:mm\")\nprintln(formatter.format(date)) // 2006-11-30 23:26\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11373719, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZUyEAgOzu8M/AAAAAAAAAAI/AAAAAAAAAT8/Jux4G_-BS1I/photo.jpg?sz=128", "display_name": "saba abbasi", "link": "https://stackoverflow.com/users/11373719/saba-abbasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 55932936, "answer_count": 4, "score": 3, "last_activity_date": 1556711109, "creation_date": 1556688854, "last_edit_date": 1556711109, "question_id": 55932025, "link": "https://stackoverflow.com/questions/55932025/how-can-i-extract-date-and-time-from-a-long-type-variable-in-kotlin-on-android", "title": "How can I extract date and time from a Long type variable in Kotlin on Android", "body": "<p>I am using an API from USGS website.</p>\n\n<pre><code>\"properties\": {\n    \"mag\": 3.2,\n    \"place\": \"Puerto Rico region\",\n    \"time\": 1164925597950,\n    \"updated\": 1415323859614,\n    \"tz\": null\n}\n</code></pre>\n\n<p>The time is in milliseconds. I want to extract  date &amp; time from these milliseconds. How can I do this in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "edited": false, "score": 0, "creation_date": 1556690745, "post_id": 55931803, "comment_id": 98517406, "body": "<code>@Query(&quot;SELECT * FROM WORKOUTS WHERE id=:id LIMIT 1&quot;)</code> ?"}, {"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "reply_to_user": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "edited": false, "score": 0, "creation_date": 1556717061, "post_id": 55931803, "comment_id": 98526590, "body": "Id is unique. I&#39;m more asking about the connection between dao and repo and Viewmodel, how to transfer the result."}, {"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "reply_to_user": {"reputation": 3113, "user_id": 9968399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bsdzB.jpg?s=128&g=1", "display_name": "Taseer", "link": "https://stackoverflow.com/users/9968399/taseer"}, "edited": false, "score": 0, "creation_date": 1556717220, "post_id": 55931803, "comment_id": 98526666, "body": "Should I return livedata? Single? Maybe? Should my repo get by id return an object, or void and have a mutable that belongs to the repo class that updates when you get by id? That is my question: architectural"}, {"owner": {"reputation": 83, "user_id": 12016306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdef958bc8ae20521820dc745895eb25?s=128&d=identicon&r=PG&f=1", "display_name": "Francky380", "link": "https://stackoverflow.com/users/12016306/francky380"}, "edited": false, "score": 0, "creation_date": 1589902308, "post_id": 55931803, "comment_id": 109474401, "body": "@user1713450 Have you find the right way to do it? Could you give us an answer please."}], "answers": [{"tags": [], "owner": {"reputation": 2045, "user_id": 1571605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DN8Ru.png?s=128&g=1", "display_name": "Itamar Kerbel", "link": "https://stackoverflow.com/users/1571605/itamar-kerbel"}, "is_accepted": true, "score": 3, "last_activity_date": 1556741510, "creation_date": 1556741510, "answer_id": 55942140, "question_id": 55931803, "link": "https://stackoverflow.com/questions/55931803/room-repository-selecting-one-row-by-id/55942140#55942140", "title": "Room Repository: Selecting one row by ID", "body": "<p>You should never, as good practice, load all the data when you need just part of it.\nWhether this is a desktop or a mobile application you should always load just what you need.\nThat said you are on the right track.\nSince you are only loading a single row the <code>@Transaction</code> annotation is not needed.\nOther than that if <code>id</code> is declared with annotation of <code>@PrimaryKey(autoGenerate = true)</code> than the <code>getWorkoutById</code> should work just fine.</p>\n\n<p>If you are looking for a good tutorial about Room you can do this short free tutorial\n<a href=\"https://www.udacity.com/course/new-android-fundamentals--ud851\" rel=\"nofollow noreferrer\">Android Architecture Components</a>.\nJump straight to <strong>lesson 8</strong> as it is not relying on the previous lessons.</p>\n\n<p>If on the other hand you just want an example, have a look at <a href=\"https://github.com/udacity/ud851-Exercises/tree/student/Lesson09b-ToDo-List-AAC/T09b.06-Solution-UpdateTask\" rel=\"nofollow noreferrer\">this app from the tutorial</a>. To be more specific look at the DAO object <a href=\"https://github.com/udacity/ud851-Exercises/blob/student/Lesson09b-ToDo-List-AAC/T09b.06-Solution-UpdateTask/app/src/main/java/com/example/android/todolist/database/TaskDao.java\" rel=\"nofollow noreferrer\">here</a>.\nYou'll see that is exactly what you did except it is written in Java.</p>\n"}], "owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2973, "favorite_count": 0, "accepted_answer_id": 55942140, "answer_count": 1, "score": 4, "last_activity_date": 1556741510, "creation_date": 1556686706, "question_id": 55931803, "link": "https://stackoverflow.com/questions/55931803/room-repository-selecting-one-row-by-id", "title": "Room Repository: Selecting one row by ID", "body": "<p>I'm trying to figure out the best way to fetch a single row via Room by ID. I have copied code from a guide on how to fetch all my rows in an entity (<code>Workout</code> plus all the joined entities) and that works great for populating a recyclerview.</p>\n\n<p>But when I need to drill down to just one, currently, my guess code in the repository is</p>\n\n<pre><code>@WorkerThread\nsuspend fun getWorkoutById(id: Long): LiveData&lt;WorkoutTree&gt; {\n    return workoutDao.getWorkoutById(id)\n}\n</code></pre>\n\n<p>and in the DAO</p>\n\n<pre><code>@Transaction\n@Query(\"SELECT * FROM WORKOUTS WHERE id=:id\")\nfun getWorkoutById(id: Long): LiveData&lt;WorkoutTree&gt;\n</code></pre>\n\n<p>Naturally I call <code>repository.getWorkoutById(myId)</code> from my ViewModel so I can populate the data and reference it from my Activity/Fragment.</p>\n\n<p>But I'm trying to figure out whether I'm on the right track and the best way to be fetching this. It's a DB local to the phone, so shouldn't be issues of needing live updates, honestly.</p>\n\n<p>Would it be better to just serialize the object tapped in the Recyclerview listing all rows and pass that into my activity and not bother to fetch by ID?</p>\n\n<p>Pretty much every example I find online about Room and Android development gives examples for fetching all rows and use LiveData and the repository has a public property that is LiveData> populated by an initial DAO fetch of all rows from the entity.</p>\n\n<p>I'm having difficulty translating this example mentally into one where I'd just fetch one row. </p>\n\n<p>I don't really have any functioning code to share since I can't really figure out how to architect this in Kotlin and Room and such. I've never written an Android app before and come from a functional programming background via Python, JS, Scala and so am struggling with how Kotlin guides and Android guides recommend you do this with all the additional classes and interfaces used to decouple everything for a phone app.</p>\n"}, {"tags": ["regex", "kotlin", "regular-language"], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 1541042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e0cb0e58b0783b54f7f3f653b348b4?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/1541042/lucas"}, "edited": false, "score": 0, "creation_date": 1614335571, "post_id": 55930386, "comment_id": 117360190, "body": "Great! On my case it was <code>contains(&quot;YOUR_REGEX&quot;.toRegex())</code>"}], "tags": [], "owner": {"reputation": 108, "user_id": 2344841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0648448f4f65e733a809c2ed713a7cc1?s=128&d=identicon&r=PG", "display_name": "jasondlee", "link": "https://stackoverflow.com/users/2344841/jasondlee"}, "is_accepted": true, "score": 2, "last_activity_date": 1556671715, "creation_date": 1556671715, "answer_id": 55930386, "question_id": 55930275, "link": "https://stackoverflow.com/questions/55930275/kotlin-regex-boundary-matching-not-working/55930386#55930386", "title": "Kotlin Regex Boundary Matching Not working", "body": "<p>I think you're using the wrong method. From the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/matches.html\" rel=\"nofollow noreferrer\">KotlinDoc</a>:</p>\n\n<blockquote>\n  <p>Indicates whether the regular expression matches the entire input.</p>\n</blockquote>\n\n<p>I think what you may want is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/contains-match-in.html\" rel=\"nofollow noreferrer\">containsMatchIn</a>.  You can play with this on the <a href=\"https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS4zLjMxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsImpzQ29kZSI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJmb2xkZWRCdXR0b24iOnRydWUsInJlYWRPbmx5IjpmYWxzZSwiY29kZSI6ImZ1biBtYWluKGFyZ3M6IEFycmF5PFN0cmluZz4pIHtcbiAgICB2YWwgcmVnZXggPSBcIlwiXCJcXGJ2YWxcXGJcIlwiXCIudG9SZWdleCgpO1xuICAgIHJlZ2V4LmNvbnRhaW5zTWF0Y2hJbihcImZuIGZvbygpIHsgdmFsIHggPSAyO30geDtcIikuYWxzbyB7IHByaW50bG4oaXQpIH1cbn0ifQ==\" rel=\"nofollow noreferrer\">playground</a>.</p>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 55930386, "answer_count": 1, "score": 1, "last_activity_date": 1556671715, "creation_date": 1556670516, "last_edit_date": 1556671327, "question_id": 55930275, "link": "https://stackoverflow.com/questions/55930275/kotlin-regex-boundary-matching-not-working", "title": "Kotlin Regex Boundary Matching Not working", "body": "<p>I'm trying to parse a word, bounded by whitespace or punctuation on either side. </p>\n\n<p>I tried this:</p>\n\n<pre><code>\nfun main(args: Array&lt;String&gt;) {\n    val regex = \"\\bval\\b\".toRegex();\n    regex.matches(\"fn foo() { val x = 2;} x;\").also { println(it) }\n}\n</code></pre>\n\n<p>But this prints out false. I tested the regex on here <a href=\"https://regex101.com/r/vNBefF/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/vNBefF/2</a> and it works, matching against the input string. </p>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["kotlin", "jackson", "aws-lambda"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 4170815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ysvBgveJOBk/AAAAAAAAAAI/AAAAAAAAAY8/az_oaaI-jYU/photo.jpg?sz=128", "display_name": "Eric Romrell", "link": "https://stackoverflow.com/users/4170815/eric-romrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1556667538, "creation_date": 1556667538, "answer_id": 55929962, "question_id": 55929772, "link": "https://stackoverflow.com/questions/55929772/jacksonserializer-doesnt-work-in-kotlin-lambda/55929962#55929962", "title": "JacksonSerializer doesn&#39;t work in Kotlin Lambda", "body": "<p>Have you checked out your dependencies running locally versus your dependencies in AWS? I've had issues where locally I'm running with a version, but the version in AWS was different. That could especially explain the error about continuations... Perhaps the method signature is different in whatever version you're using?</p>\n\n<p>Look especially for <code>provided</code> scopes in your gradle/maven pom. Those are easy places for version to be out of sync.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 11435086, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VyPvQQJgnWk/AAAAAAAAAAI/AAAAAAAAFp0/urvkbJwRT2w/photo.jpg?sz=128", "display_name": "ThatJoeMoore", "link": "https://stackoverflow.com/users/11435086/thatjoemoore"}, "is_accepted": true, "score": 1, "last_activity_date": 1556670507, "creation_date": 1556670507, "answer_id": 55930274, "question_id": 55929772, "link": "https://stackoverflow.com/questions/55929772/jacksonserializer-doesnt-work-in-kotlin-lambda/55930274#55930274", "title": "JacksonSerializer doesn&#39;t work in Kotlin Lambda", "body": "<p>I'm guessing that you made your handler function be a kotlin <code>suspend</code> function? If so, that's your problem.</p>\n\n<p>When you mark a function <code>suspend</code>, the compiler applies a bunch of magic. Most of the time, you don't need to know anything about this, other than the fact that any <code>suspend</code> function gets an extra parameter of type <code>kotlin.coroutines.Continuation</code> added to its signature. You usually don't notice this, since the compiler also makes calls to the function pass along their own hidden <code>Continuation</code> parameter.</p>\n\n<p><code>Continuation</code>, by design, can't be created by a tool like Jackson - it's an internal thing. What you probably need to do (assuming that you did make your handler function <code>suspend</code>) is to wrap your method in <code>runBlocking {}</code> and make it not be a <code>suspend</code> function. It's probably easiest to create a new handler, like so:</p>\n\n<pre><code>fun fixedHandler(input: MyInput, context: Context) = runBlocking {\n  originalHandler(input, context)\n}\n\n\nsuspend fun originalHandler(input: MyInput, context: Context): MyOutput {\n  TODO(\"This is your original code\")\n}\n</code></pre>\n\n<p>PS - I've usually found it best to leverage the pre-defined Lambda interfaces to write my Lambda functions - it prevents you from encountering issues like this. See <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html</a> for how to do it.</p>\n"}], "owner": {"reputation": 742, "user_id": 3140599, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-OxlimsN77Ks/AAAAAAAAAAI/AAAAAAAABgg/1jjpxeBc88I/photo.jpg?sz=128", "display_name": "Blake Morgan", "link": "https://stackoverflow.com/users/3140599/blake-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 55930274, "answer_count": 2, "score": 0, "last_activity_date": 1556670507, "creation_date": 1556665939, "question_id": 55929772, "link": "https://stackoverflow.com/questions/55929772/jacksonserializer-doesnt-work-in-kotlin-lambda", "title": "JacksonSerializer doesn&#39;t work in Kotlin Lambda", "body": "<p>When I create a client with the <code>JacksonSerializer()</code> feature and make some API calls, then run that script on my local machine, I get no error and the script runs successfully. However, when I upload this script as an AWS Lambda, I get the following error: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of kotlin.coroutines.Continuation, problem: abstract types either need to be mapped to concrete types, have custom deserializer, or be instantiated with additional type information\n</code></pre>\n\n<p>At first, I thought the error originated from me constructing the client outside of the <code>Handler</code> class, but when I made the client a private value inside the <code>Handler</code> class, I still get the error. I've included <code>println()</code> statements in my function, but they don't even run. That tells me that my <code>handleRequest()</code> funciton isn't getting run. Is there some AWS/Lambda'ism that prevents me from using the <code>JacksonSerializer()</code> feature as? If so, are there any alternatives on how to parse JSON responses with the Ktor client?</p>\n\n<p>My client construction:</p>\n\n<pre><code>private val client = HttpClient(Apache) {\n    install(JsonFeature) {\n        serializer = JacksonSerializer()\n    }\n}\n</code></pre>\n\n<p>An example call using the client:</p>\n\n<pre><code>val response = client.post&lt;JsonNode&gt; {\n    url(URL(GITHUB_GRAPHQL_ENDPOINT))\n    body = reqBody\n    headers {\n        append(\"Authorization\", \"bearer $token\")\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "apache-kafka", "spring-cloud", "apache-kafka-streams", "spring-cloud-stream"], "comments": [{"owner": {"reputation": 3219, "user_id": 2070861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08e6680212d29999e9fe53f1992470e7?s=128&d=identicon&r=PG", "display_name": "sobychacko", "link": "https://stackoverflow.com/users/2070861/sobychacko"}, "edited": false, "score": 0, "creation_date": 1556733315, "post_id": 55929162, "comment_id": 98534201, "body": "That is very interesting. Will look into it. One reason I can think of is because of the message conversions that the binder needs to do. So, if you can turn native decoding/encoding enabled, I think that will reduce the topology a bit. In addition to that, there are other paths in which the binder may add more topologies such as the use of DLQ etc."}], "answers": [{"comments": [{"owner": {"reputation": 3219, "user_id": 2070861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08e6680212d29999e9fe53f1992470e7?s=128&d=identicon&r=PG", "display_name": "sobychacko", "link": "https://stackoverflow.com/users/2070861/sobychacko"}, "edited": false, "score": 1, "creation_date": 1568403393, "post_id": 55943420, "comment_id": 102276400, "body": "Starting with 3.0 version of Spring Cloud Stream Kafka Streams binder, the default deserialization is done natively by Kafka. Thus the topology generated by the Spring application is equivalent to the one generated by the native application."}], "tags": [], "owner": {"reputation": 3219, "user_id": 2070861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08e6680212d29999e9fe53f1992470e7?s=128&d=identicon&r=PG", "display_name": "sobychacko", "link": "https://stackoverflow.com/users/2070861/sobychacko"}, "is_accepted": true, "score": 2, "last_activity_date": 1556749449, "last_edit_date": 1556749449, "creation_date": 1556749139, "answer_id": 55943420, "question_id": 55929162, "link": "https://stackoverflow.com/questions/55929162/spring-cloud-stream-generates-unnecessary-complex-kafka-topologies-why/55943420#55943420", "title": "Spring Cloud Stream generates unnecessary complex Kafka topologies, why?", "body": "<p>@codependent The reason why you have those extra processors in the topology is because you are using the de/serailzers provided by the framework (native decoding and encoding default to <code>false</code>). Basically, we receive the data from Kafka topic as a <code>byte[]</code> and then do the transformations internally. For these transformations, we go through a few extra processors and thus you end up with that deeper topology. </p>\n\n<p>Here is a basic <code>StreamListener</code> in Java (pretty much what you have up there, but using simpler value type):</p>\n\n<pre><code>@StreamListener\npublic void process(@Input(\"input\") KStream&lt;Integer, String&gt; input ) {\n\n}\n</code></pre>\n\n<p>With the standard out of the box setting in the binder, I was able to get the same deeper topology that you have observed. However, when I modified application's configuration as shown below,</p>\n\n<pre><code>spring.cloud.stream.kafka.streams:\n  binder.configuration:\n    default.key.serde: org.apache.kafka.common.serialization.Serdes$IntegerSerde\n    default.value.serde: org.apache.kafka.common.serialization.Serdes$StringSerde\nspring.cloud.stream.bindings.input.consumer.useNativeDecoding: true\n\n</code></pre>\n\n<p>my topology is reduced as below:</p>\n\n<pre><code>2019-05-01 18:02:12.705 DEBUG 67539 --- [           main] o.s.k.config.StreamsBuilderFactoryBean   : Topologies:\n   Sub-topology: 0\n    Source: KSTREAM-SOURCE-0000000000 (topics: [hello-1])\n      --&gt; KSTREAM-MAPVALUES-0000000001\n    Processor: KSTREAM-MAPVALUES-0000000001 (stores: [])\n      --&gt; none\n      &lt;-- KSTREAM-SOURCE-0000000000\n</code></pre>\n\n<p>This is still not the same as the topology that you got from the plain Kafka Streams application, but this turns out to be something that we can improve in the binder to avoid. In short, by switching to native decoding and encoding provided by Kafka Streams, you can avoid all those extra level of topologies built by the binder. </p>\n\n<p>In some cases, you don't have a choice, but rely on the deserialization provided by Spring Cloud Stream, for e.g., you receive data from a producer that is based on Spring Cloud Stream that used some special serializers. I think that is true in your case since from what I remember, your producer is based on Spring Cloud Stream and that uses an Avro serializer provided by the framework. In that case, using Kafka Stream's Avro <code>Serde</code> in your processor won't work as those serializers are not compatible. So here are some of your options.</p>\n\n<p>Approcah #1:</p>\n\n<ol>\n<li>Make your producers use native serializers provided by Kafka.</li>\n<li>Then use Serde's that use the same serializer/deserializer in your Kafka Streams application.</li>\n</ol>\n\n<p>Approach #2:</p>\n\n<ol>\n<li>Use message serializers provided by SCSt.</li>\n<li>Then use the default de/serialization provided by Kafka Streams binder which is the default.</li>\n</ol>\n\n<p>The downside of #2 is obviously what you brought up above, i.e. deeper topologies. That might be okay depending on your use cases and throughput. If this becomes a real performance issue, we can try to streamline this process when conversion is done by the framework.</p>\n\n<p>With all that said, I created an <a href=\"https://github.com/spring-cloud/spring-cloud-stream-binder-kafka/issues/651\" rel=\"nofollow noreferrer\">issue</a> in the Kafka binder to make a change in the next release of the binder. Your feedback, suggestions, up/down votes are welcomed there. </p>\n"}], "owner": {"reputation": 17815, "user_id": 1729795, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/13c75bbb8e19632287de96f25a1938ff?s=128&d=identicon&r=PG", "display_name": "codependent", "link": "https://stackoverflow.com/users/1729795/codependent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 55943420, "answer_count": 1, "score": 1, "last_activity_date": 1556749449, "creation_date": 1556661469, "question_id": 55929162, "link": "https://stackoverflow.com/questions/55929162/spring-cloud-stream-generates-unnecessary-complex-kafka-topologies-why", "title": "Spring Cloud Stream generates unnecessary complex Kafka topologies, why?", "body": "<p>I have a KStream application with a bunch of KStreams, joins and other operations. I enabled <code>logging.level.org.springframework.kafka.config=debug</code> to verify the Topology that was being generated and found out a lot of nodes that didn't make sense at all.</p>\n\n<p>Then I simplified the application to just this:</p>\n\n<pre><code>interface ShippingKStreamProcessor {\n\n    @Input(\"input\")\n    fun input(): KStream&lt;Int, Customer&gt;\n\n}\n\n@Suppress(\"UNCHECKED_CAST\")\n@Configuration\nclass ShippingKStreamConfiguration {\n\n    @StreamListener\n    fun process(@Input(\"input\") input: KStream&lt;Int, Customer&gt; {}\n\n}\n</code></pre>\n\n<p>Oddly enough such a simple KStream declaration generates this complex topology:</p>\n\n<pre><code>2019-04-30 23:47:03.881 DEBUG 2944 --- [           main] o.s.k.config.StreamsBuilderFactoryBean   : Topologies:\n   Sub-topology: 0\n    Source: KSTREAM-SOURCE-0000000000 (topics: [customer])\n      --&gt; KSTREAM-MAPVALUES-0000000001\n    Processor: KSTREAM-MAPVALUES-0000000001 (stores: [])\n      --&gt; KSTREAM-BRANCH-0000000003, KSTREAM-PROCESSOR-0000000002\n      &lt;-- KSTREAM-SOURCE-0000000000\n    Processor: KSTREAM-BRANCH-0000000003 (stores: [])\n      --&gt; KSTREAM-BRANCHCHILD-0000000004, KSTREAM-BRANCHCHILD-0000000005\n      &lt;-- KSTREAM-MAPVALUES-0000000001\n    Processor: KSTREAM-BRANCHCHILD-0000000004 (stores: [])\n      --&gt; KSTREAM-MAPVALUES-0000000007\n      &lt;-- KSTREAM-BRANCH-0000000003\n    Processor: KSTREAM-BRANCHCHILD-0000000005 (stores: [])\n      --&gt; KSTREAM-PROCESSOR-0000000006\n      &lt;-- KSTREAM-BRANCH-0000000003\n    Processor: KSTREAM-MAPVALUES-0000000007 (stores: [])\n      --&gt; none\n      &lt;-- KSTREAM-BRANCHCHILD-0000000004\n    Processor: KSTREAM-PROCESSOR-0000000002 (stores: [])\n      --&gt; none\n      &lt;-- KSTREAM-MAPVALUES-0000000001\n    Processor: KSTREAM-PROCESSOR-0000000006 (stores: [])\n      --&gt; none\n      &lt;-- KSTREAM-BRANCHCHILD-0000000005\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/81Z5d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/81Z5d.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The same simple stream in a native Kafka application results in a more logical topology:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    val builder = StreamsBuilder()\n\n    val streamsConfiguration = Properties()\n    streamsConfiguration[StreamsConfig.APPLICATION_ID_CONFIG] = \"kafka-shipping-service\"\n    streamsConfiguration[StreamsConfig.BOOTSTRAP_SERVERS_CONFIG] = \"http://localhost:9092\"\n    streamsConfiguration[AbstractKafkaAvroSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG] = \"http://localhost:8081\"\n\n    val serdeConfig = mapOf(\n        AbstractKafkaAvroSerDeConfig.SCHEMA_REGISTRY_URL_CONFIG to \"http://localhost:8081\",\n        AbstractKafkaAvroSerDeConfig.VALUE_SUBJECT_NAME_STRATEGY to TopicRecordNameStrategy::class.java.name\n    )\n\n    //val byteArraySerde = Serdes.ByteArray()\n    val intSerde = Serdes.IntegerSerde()\n    val customerSerde = SpecificAvroSerde&lt;Customer&gt;()\n    customerSerde.configure(serdeConfig, false)\n\n    val customerStream = builder.stream&lt;Int, Customer&gt;(\"customer\",\n        Consumed.with(intSerde, customerSerde)) as KStream&lt;Int, Customer&gt;\n\n    val topology = builder.build()\n    println(topology.describe())\n\n    val streams = KafkaStreams(topology, streamsConfiguration)\n    streams.start()\n}\n</code></pre>\n\n<p>Topology: </p>\n\n<pre><code>Topologies:\n   Sub-topology: 0\n    Source: KSTREAM-SOURCE-0000000000 (topics: [customer])\n      --&gt; none\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UXHgY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UXHgY.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What's the reason why Spring Cloud Stream generates such a complex topology?</p>\n"}, {"tags": ["inheritance", "kotlin", "constructor"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1556661771, "post_id": 55929144, "comment_id": 98512020, "body": "The Java code is invalid. super() must be the first instruction of the child constructor. So you have the exact same problem in Java than the one you have in Kotlin, don&#39;t you?"}, {"owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556662849, "post_id": 55929144, "comment_id": 98512304, "body": "Ah! You are right! I&#39;m tying myself into knots trying to do things the Kotlin way -- in this case, having properties instead of accessor methods. Maybe my solution is to use abstract properties in the base class. Investigating..."}], "answers": [{"tags": [], "owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "is_accepted": false, "score": 0, "last_activity_date": 1556857561, "last_edit_date": 1556857561, "creation_date": 1556663653, "answer_id": 55929488, "question_id": 55929144, "link": "https://stackoverflow.com/questions/55929144/transforming-child-constructor-params-for-parent-constructor-in-kotlin/55929488#55929488", "title": "Transforming child constructor params for parent constructor in Kotlin", "body": "<p>The comment by JB Nizet above set me on the right track: you can't do it this way in Java either. I've been tying myself in knots trying to do things the Kotlin way. In this case, I'm trying to use properties everywhere I would use accessor methods in Java.</p>\n\n<p>One solution is to make the base properties abstract:</p>\n\n<pre><code>abstract class Base {\n    abstract val w: Int\n    abstract val h: Int\n\n    // base implementation\n}\n\nclass Derived(x: Int) : Base() {\n    private val c = Converter(x)\n\n    override val w: Int\n        get() = c.a\n\n    override val h: Int\n        get() = c.b\n}\n\nclass Converter(x: Int) {\n    // implementation not relevant here\n    val a = x + 2\n    val b = x - 2\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "edited": false, "score": 0, "creation_date": 1556754575, "post_id": 55933426, "comment_id": 98541044, "body": "Oh right, a factory method with a private constructor does the job too. Did you mean to construct via <code>Derived(1)</code> -- only one argument? I&#39;m extremely fond of Kotlin, but this seems like one case where Java provides an easier to understand syntax, even if longer. I did not know about this way of creating a virtual secondary constructor. Thanks for the tip!"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "reply_to_user": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "edited": false, "score": 1, "creation_date": 1556755585, "post_id": 55933426, "comment_id": 98541217, "body": "@JoeLapp: Yep, that was a typo \u2014 now fixed!  Companion objects are quite common, so you get used to the syntax; it&#39;s roughly equivalent to static methods in Java."}, {"owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "edited": false, "score": 0, "creation_date": 1556756011, "post_id": 55933426, "comment_id": 98541287, "body": "Another thought. You here demonstrated that Kotlin can do exactly what I had in mind, even as Java couldn&#39;t. In Java it would be a static method call <code>Derived.create(1)</code>. I&#39;m a bit weirded out by all the concepts that went into the solution, but I&#39;m left even more impressed with Kotlin. Thanks again!"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 1, "last_activity_date": 1556755237, "last_edit_date": 1556755237, "creation_date": 1556698893, "answer_id": 55933426, "question_id": 55929144, "link": "https://stackoverflow.com/questions/55929144/transforming-child-constructor-params-for-parent-constructor-in-kotlin/55933426#55933426", "title": "Transforming child constructor params for parent constructor in Kotlin", "body": "<p>I'd suggest using a simpler, private constructor, and adding <strong>a factory method</strong> to do the conversion, e.g.:</p>\n\n<pre><code>class Derived private constructor(val w: Int, val h: Int) : Base(w, h) {\n    companion object {\n        operator fun invoke(x: Int): Derived {\n            // Some complex derivation\u2026\n            val c = Converter(x)\n            return Derived(c.a, c.b)\n        }\n    }\n}\n</code></pre>\n\n<p>This can be called in exactly the same way as a constructor, e.g. <code>val d = Derived(1)</code>, but it has several advantages:</p>\n\n<ul>\n<li><p>It can do lots of processing before calling the constructor.</p></li>\n<li><p>It can return cached values instead of new instances, where appropriate.</p></li>\n<li><p>It can return a subclass.\u00a0 (So <code>Derived</code> could be an abstract class \u2014 or you might not even need it at all.)\u00a0 The exact class can differ between calls, and can even be an anonymous type.</p></li>\n<li><p>It can have a name.\u00a0 This is especially important if you need multiple methods taking the same parameters.\u00a0 (E.g. a Point object which could be constructed from rectangular or polar co-ordinates.)\u00a0 However, a factory method doesn't need a specific name; if you implement the <code>invoke()</code> method in the companion object (as above), you can call it in exactly the same way as a constructor.</p></li>\n<li><p>It makes it easier to change the implementation of the class without affecting its public interface.</p></li>\n</ul>\n\n<p>There's one disadvantage, though:</p>\n\n<ul>\n<li>It can't be used by subclass constructors.</li>\n</ul>\n\n<p>Unlike the property-based answer, this doesn't require any changes to the rest of the class, and doesn't keep the <code>Convertor</code> object around; it's purely a different way of calling the constructor.</p>\n\n<p>(In some cases, you might not need to make the primary constructor private; it could provide an alternative to the factory method(s), as long as the signatures don't match.)</p>\n"}], "owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 55933426, "answer_count": 2, "score": 0, "last_activity_date": 1556857561, "creation_date": 1556661373, "question_id": 55929144, "link": "https://stackoverflow.com/questions/55929144/transforming-child-constructor-params-for-parent-constructor-in-kotlin", "title": "Transforming child constructor params for parent constructor in Kotlin", "body": "<p>I'm a Java veteran who's learning Kotlin. I'm finding myself a bit mystified about how take constructor parameters provided to a child class and transform them to the parameters required by the parent class. The problem arises when the parameters provided to the child are not suitable for the parent.</p>\n\n<p>For example, when I have IntelliJ IDEA convert the following to Kotlin...</p>\n\n<pre><code>class Base\n{\n    final int w;\n    final int h;\n\n    Base(int w, int h)\n    {\n        this.w = w;\n        this.h = h;\n    }\n}\n\nclass Derived extends Base\n{\n    Derived(int x)\n    {\n        // some complex derivation\n        Converter c = new Converter(x);\n        super(c.a, c.b);\n    }\n}\n\nclass Converter\n{\n    final int a;\n    final int b;\n\n    Converter(int x)\n    {\n        a = x + 2;\n        b = x - 2;\n    }\n}\n</code></pre>\n\n<p>I get the following, including an error at the indicated position saying that parameters were not passed in for <code>w</code> and <code>h</code>...</p>\n\n<pre><code>open class Base(val w: Int, val h: Int)\n\nclass Derived(x: Int) : Base() {\n    //                       ^ error\n    init {\n        // some complex derivation\n        val c = Converter(x)\n        // How do I provide c.a and c.b?\n    }\n}\n\nclass Converter(x: Int) {\n    val a: Int\n    val b: Int\n\n    init {\n        a = x + 2\n        b = x - 2\n    }\n}\n</code></pre>\n\n<p>What's the general solution to this problem? (Clearly, I'm not doing anything as simple as shown here. I simplified just to present the problem.)</p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-amqp"], "answers": [{"comments": [{"owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "reply_to_user": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "edited": false, "score": 0, "creation_date": 1556728706, "post_id": 55937085, "comment_id": 98532154, "body": "I just tested it (again) with Java and it works fine - I&#39;ll try Kotlin to see if that&#39;s the issue."}, {"owner": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "edited": false, "score": 0, "creation_date": 1556730315, "post_id": 55937085, "comment_id": 98532836, "body": "most likely it has something to do with the mqtt aspect (that I didn&#39;t mention because I didn&#39;t think it would be relevant) that or the fact that I have many of these doing the old way and have only converted one..."}, {"owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "reply_to_user": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "edited": false, "score": 0, "creation_date": 1556730612, "post_id": 55937085, "comment_id": 98532942, "body": "If you can provide more information about this &quot;mqtt aspect&quot;, I can take a look to see if there is something we can do."}, {"owner": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "edited": false, "score": 0, "creation_date": 1556730884, "post_id": 55937085, "comment_id": 98533043, "body": "well the short of it is I publish via mqtt <a href=\"https://www.rabbitmq.com/mqtt.html\" rel=\"nofollow noreferrer\">rabbitmq.com/mqtt.html</a> and then am listening on amqp. I can try to provide more info later, but the bindings I&#39;ve shown have been working though that&#39;s more likely dumb luck than understanding."}, {"owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "reply_to_user": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "edited": false, "score": 0, "creation_date": 1556735100, "post_id": 55937085, "comment_id": 98534943, "body": "The problem is your exchange name - see my second edit."}], "tags": [], "owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "is_accepted": true, "score": 2, "last_activity_date": 1556735077, "last_edit_date": 1556735077, "creation_date": 1556717541, "answer_id": 55937085, "question_id": 55928905, "link": "https://stackoverflow.com/questions/55928905/is-it-possible-to-declare-these-bindings-with-rabbitlistener/55937085#55937085", "title": "is it possible to declare these bindings with RabbitListener?", "body": "<p>You need to add the routing key to the <code>@QueueBinding</code>...</p>\n\n<pre><code>key = Amqp.BODY_WEIGHT_NEW\n</code></pre>\n\n<p>(that's what the <code>with</code> clause on the <code>BindingBuilder</code> does).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Works fine for me...</p>\n\n<pre><code>@SpringBootApplication\nopen class So55928905Application {\n\n    @RabbitListener(bindings = [QueueBinding(value = Queue(\"foo\"), \n                                  exchange = Exchange(\"amqp.topic\"), \n                                  key = [\"foo\"])])\n    fun `in`(`in`: String) {\n\n    }\n\n    companion object {\n\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            SpringApplication.run(So55928905Application::class.java, *args)\n        }\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1PCjv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1PCjv.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>The problem is your exchange name MQTT publishes to the standard <code>amq.topic</code> not <code>amqp.topic</code>.</p>\n\n<pre><code>@SpringBootApplication\nopen class So55928905Application {\n\n    @RabbitListener(bindings = [QueueBinding(value = Queue(\"foo\"),\n                        exchange = Exchange(name = \"amq.topic\", type = \"topic\"),\n                        key = [\"foo\"])])\n    fun listen(string: String) {\n        println(string)\n    }\n\n    companion object {\n\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            SpringApplication.run(So55928905Application::class.java, *args)\n        }\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13761, "user_id": 206466, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG", "display_name": "xenoterracide", "link": "https://stackoverflow.com/users/206466/xenoterracide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 55937085, "answer_count": 1, "score": 0, "last_activity_date": 1556735077, "creation_date": 1556659902, "last_edit_date": 1556677561, "question_id": 55928905, "link": "https://stackoverflow.com/questions/55928905/is-it-possible-to-declare-these-bindings-with-rabbitlistener", "title": "is it possible to declare these bindings with RabbitListener?", "body": "<p>given this code</p>\n\n<pre><code>\n    @Bean\n    open fun exchange(): TopicExchange {\n        return TopicExchange(\"amq.topic\")\n    }\n</code></pre>\n\n<pre><code>\n    @RabbitListener(queues = [Amqp.BODY_WEIGHT_NEW])\n    open fun record(entity: Collection&lt;BodyWeight&gt;) {\n        log.trace(\"saving: {}\", entity)\n    }\n\n    @Bean\n    open fun weight(): Queue {\n        return Queue(Amqp.BODY_WEIGHT_NEW)\n    }\n\n    @Bean\n    open fun bindWeight(): Binding {\n        return BindingBuilder.bind(weight()).to(exchange).with(Amqp.BODY_WEIGHT_NEW)\n    }\n</code></pre>\n\n<p>is it possible to reduce my @Bean declarations using <code>@RabbitListener</code>? I know I can list the queue as a queue to declare, but I'm not sure on what the bindings would look like.</p>\n\n<p>tried this</p>\n\n<pre><code>    @RabbitListener(bindings = [QueueBinding(value = Queue(Amqp.BODY_WEIGHT_NEW), exchange = Exchange(\"amqp.topic\"))])\n</code></pre>\n\n<p>but it doesn't seem to bind to the exchange in the same way, as my tests aren't passing.</p>\n"}, {"tags": ["android", "kotlin", "navigation", "navigation-drawer"], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557341625, "post_id": 56047120, "comment_id": 98736237, "body": "You are right i have done this but i want it in fragment"}, {"owner": {"reputation": 337, "user_id": 6761436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035886293191010/picture?type=large", "display_name": "Zeeshan Ayaz", "link": "https://stackoverflow.com/users/6761436/zeeshan-ayaz"}, "reply_to_user": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557390605, "post_id": 56047120, "comment_id": 98751219, "body": "A fragment always contains a base activity. You can have your navigation drawer in that activity......."}, {"owner": {"reputation": 337, "user_id": 6761436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035886293191010/picture?type=large", "display_name": "Zeeshan Ayaz", "link": "https://stackoverflow.com/users/6761436/zeeshan-ayaz"}, "reply_to_user": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557510153, "post_id": 56047120, "comment_id": 98803118, "body": "what the benefit of using it in fragment?  for example: if you use it in a 1st Fragment, and by navigating to another fragment through any item from navigation drawer, it will navigate to another fragment, and you have to create navigation drawer to that fragment as well to navigate again to any other ..... and soon...."}, {"owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557510612, "post_id": 56047120, "comment_id": 98803328, "body": "My navigation drawer will only be available in one fragment"}, {"owner": {"reputation": 337, "user_id": 6761436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035886293191010/picture?type=large", "display_name": "Zeeshan Ayaz", "link": "https://stackoverflow.com/users/6761436/zeeshan-ayaz"}, "reply_to_user": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557558939, "post_id": 56047120, "comment_id": 98813254, "body": "then, try to create custom toolbar in fragment and make your activity theme as noActionBar.  Hopefully it works...."}], "tags": [], "owner": {"reputation": 337, "user_id": 6761436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035886293191010/picture?type=large", "display_name": "Zeeshan Ayaz", "link": "https://stackoverflow.com/users/6761436/zeeshan-ayaz"}, "is_accepted": false, "score": -1, "last_activity_date": 1557678211, "last_edit_date": 1557678211, "creation_date": 1557340726, "answer_id": 56047120, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/56047120#56047120", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>In Kotlin, simply override this method in your activity, </p>\n\n<pre><code>override fun onBackPressed() {\n    if (drawer_layout.isDrawerOpen(GravityCompat.START))\n        drawer_layout.closeDrawer(GravityCompat.START)\n    else\n        super.onBackPressed()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557388348, "post_id": 56054491, "comment_id": 98749987, "body": "No,  thanks but i have done this actually but i was asking that is that possible ? to do that ? directly in fragment without  writting in activity"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "reply_to_user": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557389452, "post_id": 56054491, "comment_id": 98750609, "body": "@ArbazPirwani Then I&#39;m afraid the answer is <b>It&#39;s not possible</b>"}], "tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": false, "score": 2, "last_activity_date": 1557389396, "last_edit_date": 1592644375, "creation_date": 1557387768, "answer_id": 56054491, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/56054491#56054491", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<h2>Short answer</h2>\n<p>It's not possible to intercept <code>onBackPressed</code> callback inside <code>Fragment</code> without adding additional code inside hosting <code>Activity</code>. It's simply not implemented in <code>Android SDK</code>. Just stop.</p>\n<h2>Original answer</h2>\n<p>There is no such thing as <code>onBackPressed</code> callback in <code>Fragment</code> class. But you can implement it yourself:</p>\n<p>Create an interface:</p>\n<pre><code>interface FragmentOnBackPressedListener {\n  fun onBackPressed()\n}\n</code></pre>\n<p>Now in your activity:</p>\n<pre><code>override fun onBackPressed() {\n  // find top fragment\n  val currentFragment = supportFragmentManager\n    .findFragmentById(R.id.your_nav_host_fragment_id)?.let {\n      it.childFragmentManager.fragments.getOrNull(0)\n    }\n  // check if it implements FragmentOnBackPressedListener \n  if (currentFragment is FragmentOnBackPressedListener ) {\n    // if it does, transfer flow to the fragment\n    return currentFragment.onBackPressed()\n  }\n  // if it doesn't, apply default behaviour\n  super.onBackPressed()\n}\n</code></pre>\n<p>Then in your fragment:</p>\n<pre><code>class ExampleFragment : Fragment(), FragmentOnBackPressedListener {\n\n  override fun onBackPressed() {\n    // close your drawer layout here if visible\n\n    // Also: to close fragment, invoke \n    // findNavController().navigateUp() or findNavController().popBackStack()\n  }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557483077, "post_id": 56075414, "comment_id": 98789144, "body": "My drawer is in my activity"}, {"owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 0, "creation_date": 1557493510, "post_id": 56075414, "comment_id": 98794545, "body": "I have implemented onback press in activity. But I was asking to handle it in directly fragment not want to write code in activity"}, {"owner": {"reputation": 938, "user_id": 8174825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JEfn.jpg?s=128&g=1", "display_name": "Mehul Solanki", "link": "https://stackoverflow.com/users/8174825/mehul-solanki"}, "reply_to_user": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "edited": false, "score": 1, "creation_date": 1557740239, "post_id": 56075414, "comment_id": 98852768, "body": "Here are two different methods, <code>onBackPressed()</code> for activity and <code>onBackStackChanged()</code> for fragment with <code>FragmentManager.OnBackStackChangedListener</code> on activty so when fragment is visible and back action triggers at that time <code>onBackStackChanged()</code> called. and inside <code>onBackStackChanged()</code> we syncing the drawer taggle <code>toggle.syncState()</code> so if drawer is open so drawer going to be close."}, {"owner": {"reputation": 80, "user_id": 11494599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58UeHyRzV2E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4KB7DIK1PWCr7YXUJRcT5u9yxnQ/mo/photo.jpg?sz=128", "display_name": "Hello world ", "link": "https://stackoverflow.com/users/11494599/hello-world"}, "edited": false, "score": 0, "creation_date": 1557897009, "post_id": 56075414, "comment_id": 98914148, "body": "Hey this answer need explanation in kotlin language and you are providing in java"}, {"owner": {"reputation": 938, "user_id": 8174825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JEfn.jpg?s=128&g=1", "display_name": "Mehul Solanki", "link": "https://stackoverflow.com/users/8174825/mehul-solanki"}, "edited": false, "score": 0, "creation_date": 1557898671, "post_id": 56075414, "comment_id": 98914684, "body": "As per android doc, java and kotlin working together very smoothly and another thing are you can easily convert your any java code to kotlin in android studio."}, {"owner": {"reputation": 80, "user_id": 11494599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58UeHyRzV2E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4KB7DIK1PWCr7YXUJRcT5u9yxnQ/mo/photo.jpg?sz=128", "display_name": "Hello world ", "link": "https://stackoverflow.com/users/11494599/hello-world"}, "edited": false, "score": 0, "creation_date": 1557899218, "post_id": 56075414, "comment_id": 98914866, "body": "And the second part of the question is menu click listener i have added in my answer please if you can review it thanks"}], "tags": [], "owner": {"reputation": 938, "user_id": 8174825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JEfn.jpg?s=128&g=1", "display_name": "Mehul Solanki", "link": "https://stackoverflow.com/users/8174825/mehul-solanki"}, "is_accepted": false, "score": 4, "last_activity_date": 1557721314, "last_edit_date": 1557721314, "creation_date": 1557482994, "answer_id": 56075414, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/56075414#56075414", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>You can do that within a <code>Fragment</code> by implementing <code>OnBackStackChangedListener</code> on your drawer activity.<br>\nThen, link your drawer with <code>ActionBarDrawerToggle</code> and override <code>onBackStackChanged()</code> and synchronize your drawer toggle.</p>\n\n<p>Here is the full snippet:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity implements FragmentManager.OnBackStackChangedListener {\n\n\n    private DrawerLayout drawer;\n    private ActionBarDrawerToggle toggle;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //Bind listener here\n        getSupportFragmentManager().addOnBackStackChangedListener(this);\n        drawer = findViewById(R.id.drawer_layout);\n        toggle = new ActionBarDrawerToggle(this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);\n        toggle.setToolbarNavigationClickListener(view -&gt; onBackPressed());\n        drawer.addDrawerListener(toggle);\n        toggle.syncState();\n\n    }\n\n\n    //Override fragment backstack lister method \n    @Override\n    public void onBackStackChanged() {\n        //toggle.setDrawerIndicatorEnabled(getSupportFragmentManager().getBackStackEntryCount() == 0);\n        //getSupportActionBar().setDisplayHomeAsUpEnabled(getSupportFragmentManager().getBackStackEntryCount() &gt; 0);\n        toggle.syncState();\n    }\n\n    @Override\n    public void onBackPressed() {\n        drawer = findViewById(R.id.drawer_layout);\n        if (drawer.isDrawerOpen(GravityCompat.START))\n            drawer.closeDrawer(GravityCompat.START);\n        else {\n            //super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n\n<p>I hope this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 11494599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58UeHyRzV2E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4KB7DIK1PWCr7YXUJRcT5u9yxnQ/mo/photo.jpg?sz=128", "display_name": "Hello world ", "link": "https://stackoverflow.com/users/11494599/hello-world"}, "is_accepted": true, "score": 8, "last_activity_date": 1557774231, "creation_date": 1557774231, "answer_id": 56118448, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/56118448#56118448", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>Hello there you can do it by getting your fragment in activity and override onbackpress with kotlin code </p>\n\n<p>This is your backpress function and in this you can get your nav host and then you can check your current fragment or the fragment you want to open drawer in .</p>\n\n<pre><code>override fun onBackPressed() {\n\n    val navHostFragment = supportFragmentManager.findFragmentById(R.id.fragmentHomeHost)\n    val completeFragmentList = navHostFragment?.childFragmentManager?.fragments\n\n    if (completeFragmentList != null) {\n        when {\n            completeFragmentList[0] is HomeFragment -&gt; {\n                val home = (completeFragmentList[0] as HomeFragment)\n\n\n            }\n            else -&gt; super.onBackPressed()\n        }\n    }\n\n    if (drawerLayoutHome.isDrawerOpen(GravityCompat.START)) {\n        drawerLayoutHome.closeDrawer(GravityCompat.START)\n    } else {\n        super.onBackPressed()\n    }\n}\n</code></pre>\n\n<p>And here is hoe you can get selection item listener </p>\n\n<pre><code>override fun onNavigationItemSelected(item: MenuItem): Boolean {\n    drawerLayoutHome.closeDrawer(GravityCompat.START)\n\n    return true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1557913214, "creation_date": 1557913214, "answer_id": 56146194, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/56146194#56146194", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>I have had a similar problem.</p>\n\n<p>So, I added this in <strong>onBackPressed</strong> of my Activity file.</p>\n\n<pre><code>FragmentManager manager = getSupportFragmentManager();\n if (manager.getBackStackEntryCount() &gt; 0) {\n                while (manager.getBackStackEntryCount() &gt; 0) {\n                    manager.popBackStackImmediate();\n                }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 8771403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2d4798793091bb636b14e52f79cd640?s=128&d=identicon&r=PG&f=1", "display_name": "tfad334", "link": "https://stackoverflow.com/users/8771403/tfad334"}, "is_accepted": false, "score": 0, "last_activity_date": 1599965434, "creation_date": 1599965434, "answer_id": 63866700, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme/63866700#63866700", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>You can control <code>onBackPress()</code> from within fragments with <code>OnBackPressedDispatcher</code>.</p>\n<pre><code>class SampleFragment: Fragment() {\n \n    override fun onCreate(savedInstanceState: Bundle?) {\n            super.onCreate(savedInstanceState)\n        \n        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, object : OnBackPressedCallback(true){\n            override fun handleOnBackPressed() {\n                if (drawer.isDrawerOpen(GravityCompat.START)) {\n                    drawer.closeDrawer(GravityCompat.START)\n                } else{\n                    isEnabled = false\n                    requireActivity().onBackPressed() }}\n                }\n            })\n        }\n }\n</code></pre>\n"}], "owner": {"reputation": 850, "user_id": 7970480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116415491838310/picture?type=large", "display_name": "Arbaz Pirwani", "link": "https://stackoverflow.com/users/7970480/arbaz-pirwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1801, "favorite_count": 2, "accepted_answer_id": 56118448, "answer_count": 6, "score": 17, "last_activity_date": 1599965434, "creation_date": 1556654813, "last_edit_date": 1557339758, "question_id": 55928012, "link": "https://stackoverflow.com/questions/55928012/how-to-close-navigation-drawerlayout-onbackpressed-in-navigation-controls-fragme", "title": "How to close navigation DrawerLayout onBackPressed in Navigation Controls Fragment", "body": "<p>I have created an <strong>Androidx</strong> project with <strong>Navigation</strong> pattern. Now I want to close <em>drawerLayout</em> <code>onBackPressed()</code> in fragment. And also I want to set <code>OnClickListener</code> to drawer menu items to my custom menu there is no way I guess to override the <code>onBackPressed()</code> in fragment. </p>\n\n<p>I want to know how I can achieve this?</p>\n\n<p>Here is my drawer:</p>\n\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\"\n    android:id=\"@+id/drawerLayoutHome\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=\"@+id/nav_view\"\n        android:layout_width=\"350dp\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        android:background=\"@color/colorPrimaryDark\"\n        android:fitsSystemWindows=\"true\"\n        app:headerLayout=\"@layout/nav_header_main\"\n        app:itemIconTint=\"@color/white\"\n        app:itemTextColor=\"@color/white\"\n        app:menu=\"@menu/activity_main_drawer\"/&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n\n<p>I want to achieve this:</p>\n\n<pre><code>override fun onBackPressed() {\n\n    if (drawerLayoutHome.isDrawerOpen(GravityCompat.END)) {\n        drawerLayoutHome.closeDrawer(GravityCompat.END)\n    } else {\n        super.onBackPressed()\n    }\n}\n</code></pre>\n\n<p>But this is for <code>Activity</code>, how to achieve this in <code>Fragment</code>?</p>\n"}, {"tags": ["android", "kotlin", "junit", "mockito", "viewmodel"], "answers": [{"tags": [], "owner": {"reputation": 188, "user_id": 4734658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f7e10156eaf3e08754dda10f078e96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Denger", "link": "https://stackoverflow.com/users/4734658/ben-denger"}, "is_accepted": true, "score": 2, "last_activity_date": 1556651039, "creation_date": 1556651039, "answer_id": 55927253, "question_id": 55927031, "link": "https://stackoverflow.com/questions/55927031/junit-test-not-sending-values-as-parameters-to-function-kotlin/55927253#55927253", "title": "JUnit test not sending values as parameters to function (Kotlin)", "body": "<p>Mocked classes will not really be called. If you want to test your currencyViewModel.calculateValue() method, create a real object of that class and mock possible constructor arguments. </p>\n"}, {"tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": false, "score": 1, "last_activity_date": 1556653097, "creation_date": 1556653097, "answer_id": 55927675, "question_id": 55927031, "link": "https://stackoverflow.com/questions/55927031/junit-test-not-sending-values-as-parameters-to-function-kotlin/55927675#55927675", "title": "JUnit test not sending values as parameters to function (Kotlin)", "body": "<p>To add to what Ben has said: the class you want to test has to be a real object, not a mock. A mock \"does nothing\" per default, and only does what you do it to tell you, so to test it does not make any sense. </p>\n\n<p>What you mock is the dependencies of the class you test, i.e. the objects you pass to its' constructor. </p>\n\n<p>In short: if you want to test <code>CurrencyViewModel</code>, create an object of it instead of mocking it. </p>\n"}], "owner": {"reputation": 13, "user_id": 5203656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdfd377929cb4835ff4a251f94a46f3?s=128&d=identicon&r=PG&f=1", "display_name": "user5203656", "link": "https://stackoverflow.com/users/5203656/user5203656"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 55927253, "answer_count": 2, "score": 1, "last_activity_date": 1556653097, "creation_date": 1556650004, "question_id": 55927031, "link": "https://stackoverflow.com/questions/55927031/junit-test-not-sending-values-as-parameters-to-function-kotlin", "title": "JUnit test not sending values as parameters to function (Kotlin)", "body": "<p>I am creating a simple junit test to test a function in my view model but the first assertion fails as the function I call returns null. When I debug the function I call has null parameters which is weird cause I pass them in.</p>\n\n<p>I have spent time debugging and searching for why I am having that issue but I have found nothing that fixes my issue or tells me what the issue is.</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass CurrencyUnitTest {\n\n    @Rule\n    @JvmField\n    val rule = InstantTaskExecutorRule()\n\n    @Mock\n    val currencyViewModel : CurrencyViewModel = mock(CurrencyViewModel::class.java)\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n\n        val rates: HashMap&lt;String, Double&gt; =\n                hashMapOf(\n                    \"USD\" to 1.323234,\n                    \"GBP\" to 2.392394,\n                    \"AUD\" to 0.328429,\n                    \"KWR\" to 893.4833\n                )\n\n        val currencyRates = MutableLiveData&lt;Resource&lt;CurrencyRatesData?&gt;&gt;()\n        val resource = Resource&lt;CurrencyRatesData?&gt;(Status.SUCCESS, CurrencyRatesData(\"CAD\", rates, 0))\n        currencyRates.value = resource\n\n        `when`(currencyViewModel.currencyRatesData).thenReturn(currencyRates)\n\n        val baseCurrency = MutableLiveData&lt;String&gt;()\n        baseCurrency.value = \"CAD\"\n\n        `when`(currencyViewModel.baseCurrency).thenReturn(baseCurrency)\n    }\n\n    @Test\n    fun calculateValueTest() {\n        // this fails\n        assertEquals(\"0.36\", currencyViewModel.calculateValue(\"AUD\", \"1.11\"))\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "sdk", "chromecast"], "answers": [{"tags": [], "owner": {"reputation": 3042, "user_id": 8342742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMVCJ.jpg?s=128&g=1", "display_name": "M\u03b1\u03c0\u03bcQ\u03bc\u03b1\u03c0k\u03b3V\u03c0.0", "link": "https://stackoverflow.com/users/8342742/m%ce%b1%cf%80%ce%bcq%ce%bc%ce%b1%cf%80k%ce%b3v%cf%80-0"}, "is_accepted": false, "score": 0, "last_activity_date": 1556697667, "creation_date": 1556697667, "answer_id": 55933221, "question_id": 55925445, "link": "https://stackoverflow.com/questions/55925445/mediaroutebutton-state-unstable-in-fragmentactivity/55933221#55933221", "title": "MediaRouteButton State unstable in FragmentActivity", "body": "<p>This behavior was written in the <a href=\"https://developer.android.com/reference/kotlin/androidx/mediarouter/app/MediaRouteButton\" rel=\"nofollow noreferrer\">documentation for <strong><code>MediaRouteButton</code></strong></a>:</p>\n\n<blockquote>\n  <p>When the default route is selected or when the currently selected\n  route does not match the\n  <a href=\"https://developer.android.com/reference/kotlin/androidx/mediarouter/app/MediaRouteButton#getRouteSelector()\" rel=\"nofollow noreferrer\"><strong><code>selector</code></strong></a>,\n  the button will appear in an inactive state indicating that the\n  application is not connected to a route of the kind that it wants to\n  use. Clicking on the button opens a\n  <a href=\"https://developer.android.com/reference/kotlin/androidx/mediarouter/app/MediaRouteChooserDialog.html\" rel=\"nofollow noreferrer\"><strong><code>MediaRouteChooserDialog</code></strong></a>\n  to allow the user to select a route. If no non-default routes match\n  the selector and it is not possible for an active scan to discover any\n  matching routes, then the button is disabled and cannot be clicked.</p>\n  \n  <p>When a non-default route is selected that matches the selector, the\n  button will appear in an active state indicating that the application\n  is connected to a route of the kind that it wants to use. The button\n  may also appear in an intermediary connecting state if the route is in\n  the process of connecting to the destination but has not yet completed\n  doing so. In either case, clicking on the button opens a\n  <a href=\"https://developer.android.com/reference/kotlin/androidx/mediarouter/app/MediaRouteControllerDialog.html\" rel=\"nofollow noreferrer\"><strong><code>MediaRouteControllerDialog</code></strong></a>\n  to allow the user to control or disconnect from the current route.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 2636248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c321eae8f782495dad5defd7b11a55?s=128&d=identicon&r=PG", "display_name": "luis hasbon", "link": "https://stackoverflow.com/users/2636248/luis-hasbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556697667, "creation_date": 1556642770, "question_id": 55925445, "link": "https://stackoverflow.com/questions/55925445/mediaroutebutton-state-unstable-in-fragmentactivity", "title": "MediaRouteButton State unstable in FragmentActivity", "body": "<p>How to keep MediaRouteButton state and avoid disabled state on FragmentActivity</p>\n\n<p>I have written a service to handle all cast sdk logic on fragment activities in my project. When created that MediaRouteButton is enabled and I'm able to connect but if I disconnect from cast device or do not select a device soon enough, the button is disabled and is shown in grey color. It may be related with the default route connection. I have tried setting a mediaRouteSelector and also leaving it with the default one. How to keep the MediaRouteButton state and keep it enabled. (Chromecast device is present in the same network, registered as dev device with the receiver ID etc)</p>\n\n<pre><code>// mButton.routeSelector = mediaRouteSelector\nCastButtonFactory.setUpMediaRouteButton(activity, mButton)\nif(castContext == null) castContext = CastContext.getSharedInstance(activity.applicationContext)\nsetUpButton(castContext!!.castState, mButton)\n\nExpected: MediaRouteButton state is kept (disabled avoided)\nActual: The MediaRouteButton is enabled and works for a while then disabled.\n</code></pre>\n"}, {"tags": ["kotlin", "websocket", "broadcast", "http4k"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1556697000, "creation_date": 1556697000, "answer_id": 55933120, "question_id": 55925439, "link": "https://stackoverflow.com/questions/55925439/how-can-websocket-broadcast-be-implemented-with-http4k/55933120#55933120", "title": "How can websocket broadcast be implemented with http4k?", "body": "<p>If the question is \"does http4k ship with an entire distributed messaging platform\", then the answer is no :) . However, if you just want to have a single messaging node which keeps track of all of the messages and connected websockets in memory, then it's quite simple to do. </p>\n\n<p>This code is adapted from an <a href=\"https://github.com/daviddenton/http4k-demo-irc\" rel=\"nofollow noreferrer\">http4k demo project</a> which implements a chat server in 30 lines of Kotlin:</p>\n\n<pre><code>fun IrcApp(): PolyHandler {\n    val userCounter = AtomicInteger()\n    val participants = ConcurrentHashMap&lt;String, Websocket&gt;()\n\n    fun newConnection(ws: Websocket) {\n        val id = \"user${userCounter.incrementAndGet()}\"\n        participants += id to ws\n        ws.onMessage { new -&gt;\n            participants.values\n                .filterNot { it == ws }\n                .forEach { it.send(WsMessage(\"$id: ${new.bodyString()}\")) }\n        }\n        ws.onClose {\n            participants -= id\n        }\n    }\n\n    return PolyHandler(\n        static(ResourceLoader.Classpath()),\n        websockets(\"/ws\" bind ::newConnection)\n    )\n}\n\n</code></pre>\n"}], "owner": {"reputation": 1203, "user_id": 3021120, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9h0Ca.jpg?s=128&g=1", "display_name": "Talysson", "link": "https://stackoverflow.com/users/3021120/talysson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556697000, "creation_date": 1556642738, "question_id": 55925439, "link": "https://stackoverflow.com/questions/55925439/how-can-websocket-broadcast-be-implemented-with-http4k", "title": "How can websocket broadcast be implemented with http4k?", "body": "<p>I'm building a small websocket app with <a href=\"https://www.http4k.org/cookbook/websockets/\" rel=\"nofollow noreferrer\">http4k websocket</a> and looks like there is no documentation about how to implement message broadcasting with it (<em>i.e.</em> react to a message sending it to all the clients except the one that sent the message). Is it possible?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 2470, "user_id": 7756492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qmPw.jpg?s=128&g=1", "display_name": "ucMedia", "link": "https://stackoverflow.com/users/7756492/ucmedia"}, "edited": false, "score": 0, "creation_date": 1600345250, "post_id": 55925179, "comment_id": 113062368, "body": "Salam saman, Did you solve your problem?"}, {"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "reply_to_user": {"reputation": 2470, "user_id": 7756492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qmPw.jpg?s=128&g=1", "display_name": "ucMedia", "link": "https://stackoverflow.com/users/7756492/ucmedia"}, "edited": false, "score": 1, "creation_date": 1600420100, "post_id": 55925179, "comment_id": 113088681, "body": "Hi @ucMedia.I think this is because the USA sanctions again iran. We can access some features like login in firebase."}], "answers": [{"comments": [{"owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1556703805, "post_id": 55928795, "comment_id": 98521295, "body": "I had enabled Google in Sign-in method in Console=&gt;MY_PROJECT=&gt;Authentication"}, {"owner": {"reputation": 11, "user_id": 10239571, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bvvFCy4-Eng/AAAAAAAAAAI/AAAAAAAAE3Q/EWM1REQCDBc/photo.jpg?sz=128", "display_name": "Romain Pamart", "link": "https://stackoverflow.com/users/10239571/romain-pamart"}, "reply_to_user": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "edited": false, "score": 0, "creation_date": 1556796903, "post_id": 55928795, "comment_id": 98555073, "body": "Everything is correctly setup in your google-services.json ? Be careful in the firebase documentation they specified you needed at least 2 authentication providers for sign in with a credential"}], "tags": [], "owner": {"reputation": 11, "user_id": 10239571, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bvvFCy4-Eng/AAAAAAAAAAI/AAAAAAAAE3Q/EWM1REQCDBc/photo.jpg?sz=128", "display_name": "Romain Pamart", "link": "https://stackoverflow.com/users/10239571/romain-pamart"}, "is_accepted": false, "score": 0, "last_activity_date": 1556659227, "creation_date": 1556659227, "answer_id": 55928795, "question_id": 55925179, "link": "https://stackoverflow.com/questions/55925179/firebase-auth-problem-with-insert-user-on-google-sign-in-in-android/55928795#55928795", "title": "Firebase auth: problem with insert user on Google Sign-In in Android", "body": "<p>Do you activate the support of at least 2 authentication providers on your firebase console like it's specified in the <a href=\"https://firebase.google.com/docs/auth/android/account-linking#before-you-begin\" rel=\"nofollow noreferrer\">documentation</a>?</p>\n\n<p>Please check in Firebase <strong>Console => Authentication => Connection Mode</strong> and enable the connection method you needed. </p>\n"}], "owner": {"reputation": 1539, "user_id": 2843041, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/044938a2a4f9ebffb21fa62ff6de9a52?s=128&d=identicon&r=PG", "display_name": "Saman", "link": "https://stackoverflow.com/users/2843041/saman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556659227, "creation_date": 1556641605, "question_id": 55925179, "link": "https://stackoverflow.com/questions/55925179/firebase-auth-problem-with-insert-user-on-google-sign-in-in-android", "title": "Firebase auth: problem with insert user on Google Sign-In in Android", "body": "<p>I try to create auth with <code>Firebase</code> in my android project. after following the documentation, I can access user details like <code>email</code> or <code>displayName</code> but method <code>signInWithCredential</code> in firebase displays error.</p>\n\n<p><em>code</em>:</p>\n\n<pre><code> private fun firebaseAuthWithGoogle(acct: GoogleSignInAccount) {\n        val credential = GoogleAuthProvider.getCredential(acct.idToken, null)\n        auth.signInWithCredential(credential)\n                .addOnCompleteListener(this) { task -&gt;\n                    if (task.isSuccessful) {\n                        val user = auth.currentUser\n                    } else {\n                        Log.w(\"LOG\", \"signInWithCredential:failure\", task.exception)\n                    }\n                }\n    }\n</code></pre>\n\n<p><strong>error</strong>:</p>\n\n<pre><code>W/LOG: signInWithCredential:failure\n    com.google.firebase.FirebaseException: An internal error has occurred. [ &lt;!DOCTYPE html&gt;\n    &lt;html lang=en&gt;\n      &lt;meta charset=utf-8&gt;\n      &lt;meta name=viewport content=\"initial-scale=1, minimum-scale=1, width=device-width\"&gt;\n      &lt;title&gt;Error 403 (Forbidden)!!1&lt;/title&gt;\n      &lt;style&gt;\n        *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\n      &lt;/style&gt;\n      &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;\n      &lt;p&gt;&lt;b&gt;403.&lt;/b&gt; &lt;ins&gt;That\u2019s an error.&lt;/ins&gt;\n      &lt;p&gt;Your client does not have permission to get URL &lt;code&gt;/identitytoolkit/v3/relyingparty/verifyAssertion&lt;/code&gt; from this server.  &lt;ins&gt;That\u2019s all we know.&lt;/ins&gt; ]\n        at com.google.firebase.auth.api.internal.zzdr.zzb(Unknown Source:18)\n        at com.google.firebase.auth.api.internal.zzey.zza(Unknown Source:16)\n        at com.google.firebase.auth.api.internal.zzeo.zzc(Unknown Source:33)\n        at com.google.firebase.auth.api.internal.zzeq.onFailure(Unknown Source:49)\n        at com.google.firebase.auth.api.internal.zzdx.dispatchTransaction(Unknown Source:18)\n        at com.google.android.gms.internal.firebase_auth.zza.onTransact(Unknown Source:13)\n        at android.os.Binder.execTransact(Binder.java:675)\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1556640953, "post_id": 55924879, "comment_id": 98503607, "body": "Why do you write a subclass of Button? Are you drawing the  buttondifferently than Button does?"}, {"owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1556642011, "post_id": 55924879, "comment_id": 98504104, "body": "Yes! Why are you asking about this?"}, {"owner": {"reputation": 590, "user_id": 9132597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74695f17df89aed6988f7cd235075a61?s=128&d=identicon&r=PG&f=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/9132597/brent"}, "edited": false, "score": 0, "creation_date": 1556651340, "post_id": 55924879, "comment_id": 98508221, "body": "why not just make an on touch listener on the whole view and then check if the touch was on the button if not...do something"}, {"owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "reply_to_user": {"reputation": 590, "user_id": 9132597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74695f17df89aed6988f7cd235075a61?s=128&d=identicon&r=PG&f=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/9132597/brent"}, "edited": false, "score": 0, "creation_date": 1556653335, "post_id": 55924879, "comment_id": 98508991, "body": "@Brent How can I check whether the touch of a button?"}], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 9132597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74695f17df89aed6988f7cd235075a61?s=128&d=identicon&r=PG&f=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/9132597/brent"}, "is_accepted": false, "score": 0, "last_activity_date": 1556936748, "creation_date": 1556936748, "answer_id": 55978968, "question_id": 55924879, "link": "https://stackoverflow.com/questions/55924879/pressed-out-button/55978968#55978968", "title": "Pressed out button", "body": "<p>If you want to handle the push down and release on a button you can just do</p>\n\n<pre><code>    Button button = (Button) findViewById(R.id.button);\n    button.setOnTouchListener(new View.OnTouchListener() {        \n    @Override\n    public boolean onTouch(View v, MotionEvent event) {\n        switch(event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // PRESSED\n                break; // if you want to handle the touch event\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_CANCEL\n                // RELEASED\n                break; // if you want to handle the touch event\n        }\n        return false;\n    }\n});\n</code></pre>\n\n<p>this will handle if a button is pushed down and if a button is released and if you just want pushed you can change accordingly</p>\n\n<p>You have kotlin and java both tagged this is java so if you want it in kotlin just let me know</p>\n\n<p>ps im returning false because if you dont you will circumvent the button's regular touch processing. Which means you will loose the visual effects of pressing the button down and the touch ripple. Also, Button#isPressed() will return false while the button is actually pressed.</p>\n"}], "owner": {"reputation": 39, "user_id": 11302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cdcc52894c8f898ae802f9ace81a79?s=128&d=identicon&r=PG&f=1", "display_name": "zzzzza", "link": "https://stackoverflow.com/users/11302084/zzzzza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556936748, "creation_date": 1556640372, "question_id": 55924879, "link": "https://stackoverflow.com/questions/55924879/pressed-out-button", "title": "Pressed out button", "body": "<p>I have class \"myButton\" that inherits from class \"Button\". Inside implemented method \"onTouch\", which works if you press the button. And I need to perform actions when you click wherever outside the button.</p>\n\n<p>Is there any way to verify that the touch was made outside the button?</p>\n\n<p>I came up with the idea to add a touch check to the View (full screen). But in this case, if you click on the button, two events \"onTouch\" will be activated: inside my class \"myButton\" and clicking on View.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 3, "creation_date": 1556640333, "post_id": 55924666, "comment_id": 98503298, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/51399793/assignments-are-not-expressions-kotlin\">Assignments are not expressions - Kotlin</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1556656311, "last_edit_date": 1556656311, "creation_date": 1556649427, "answer_id": 55926925, "question_id": 55924666, "link": "https://stackoverflow.com/questions/55924666/assignments-are-not-expressions-and-only-expressions-are-allowed-in-this-contex/55926925#55926925", "title": "Assignments are not expressions, and only expressions are allowed in this context", "body": "<p>It looks like you're trying to copy the InputStream contents to an OutputStream. For this task you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/copy-to.html\" rel=\"nofollow noreferrer\"><code>InputStream.copyTo</code></a> extension function in Kotlin:</p>\n\n<pre><code>// instead of while loop\ninputStream.copyTo(outputStream, bufferSize = 1024)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "is_accepted": false, "score": 1, "last_activity_date": 1556656384, "last_edit_date": 1556656384, "creation_date": 1556655790, "answer_id": 55928179, "question_id": 55924666, "link": "https://stackoverflow.com/questions/55924666/assignments-are-not-expressions-and-only-expressions-are-allowed-in-this-contex/55928179#55928179", "title": "Assignments are not expressions, and only expressions are allowed in this context", "body": "<p>You can fix this like so:</p>\n\n<pre><code>    ...\n    var length = inputStream.read(buff)\n\n    while(length  &gt; 0) {\n        outputStream.write(buff , 0 , length)\n        length = inputStream.read(buff)\n    }\n    ...  \n</code></pre>\n\n<p>but @Ilya is right, you are in Kotlin land and be better off using the tools Kotlin provides</p>\n"}], "owner": {"reputation": 1, "user_id": 11433397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZOQhaVlantY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reI4dHlQnWCQWlw9CWUhMAxo26XWw/mo/photo.jpg?sz=128", "display_name": "amira batam", "link": "https://stackoverflow.com/users/11433397/amira-batam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556656384, "creation_date": 1556639611, "last_edit_date": 1556639749, "question_id": 55924666, "link": "https://stackoverflow.com/questions/55924666/assignments-are-not-expressions-and-only-expressions-are-allowed-in-this-contex", "title": "Assignments are not expressions, and only expressions are allowed in this context", "body": "<pre><code>private fun copyDatabase(context: Context): Boolean {\n    try {\n\n        val inputStream = context.assets.open(DatabaseHelper.DBNAME)\n        val outFileName = DatabaseHelper.DBLOCATION + DatabaseHelper.DBNAME\n        val outputStream = FileOutputStream(outFileName)\n        val buff = ByteArray(1024)\n        var length = 0\n\n        while((length = inputStream.read(buff)) &gt; 0) {\n            outputStream.write(buff , 0 , length)\n        }\n\n        outputStream.flush()\n        outputStream.close()\n        Log.w(\"MainActivity\" , \"DB copied\")\n        return true\n    } catch (e: Exception) {\n        e.printStackTrace()\n        return false\n    }\n\n}\n</code></pre>\n\n<p>\"while\" in this code is not working i need help please</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1574, "user_id": 1811356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c6d672e1975b8ead85528142b85a65?s=128&d=identicon&r=PG", "display_name": "Hardian", "link": "https://stackoverflow.com/users/1811356/hardian"}, "edited": false, "score": 0, "creation_date": 1556634868, "post_id": 55923049, "comment_id": 98500132, "body": "What is the value for IMG_RESULT ?"}, {"owner": {"reputation": 1442, "user_id": 11288846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDoB.png?s=128&g=1", "display_name": "Ferran", "link": "https://stackoverflow.com/users/11288846/ferran"}, "edited": false, "score": 0, "creation_date": 1556638757, "post_id": 55923049, "comment_id": 98502422, "body": "Are you calling <code>startActivityForResult</code> from a <code>Fragment</code> or an <code>Activity</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 2739778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59c40f049b29f88289ee41006d8daa0?s=128&d=identicon&r=PG&f=1", "display_name": "Marijan", "link": "https://stackoverflow.com/users/2739778/marijan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556635461, "creation_date": 1556635461, "answer_id": 55923428, "question_id": 55923049, "link": "https://stackoverflow.com/questions/55923049/im-calling-startactivityforresult-and-finding-that-onactivityresult-is-not-call/55923428#55923428", "title": "I&#39;m calling startActivityForResult and finding that onActivityResult is not called", "body": "<p>When using <code>android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI</code> there is no guarantee that the user will pick an image.</p>\n\n<p>The solution below will limit the user to picking an image and does not specify from which location it'll be done - the user is free to navigate and choose what he wants.</p>\n\n<pre><code> val intent = Intent(Intent.ACTION_GET_CONTENT)\n intent.type = \"image/*\"\n intent.putExtra(Intent.EXTRA_MIME_TYPES, arrayOf(\"image/jpeg\", \"image/png\", \"image/bmp\"))\n startActivityForResult(intent, IMG_RESULT)\n</code></pre>\n\n<p>This exact solution works in my project and should be fine out of the box for you as well.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11432986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1wX6.png?s=128&g=1", "display_name": "brando f", "link": "https://stackoverflow.com/users/11432986/brando-f"}, "edited": false, "score": 0, "creation_date": 1556683369, "post_id": 55923925, "comment_id": 98515945, "body": "Oh  your second answer was correct! My problem was that my IMG_RESULT  was set to -1. Thank you so much!"}], "tags": [], "owner": {"reputation": 1574, "user_id": 1811356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c6d672e1975b8ead85528142b85a65?s=128&d=identicon&r=PG", "display_name": "Hardian", "link": "https://stackoverflow.com/users/1811356/hardian"}, "is_accepted": true, "score": 0, "last_activity_date": 1581920814, "last_edit_date": 1581920814, "creation_date": 1556637096, "answer_id": 55923925, "question_id": 55923049, "link": "https://stackoverflow.com/questions/55923049/im-calling-startactivityforresult-and-finding-that-onactivityresult-is-not-call/55923925#55923925", "title": "I&#39;m calling startActivityForResult and finding that onActivityResult is not called", "body": "<p>Two possibilities:</p>\n\n<ol>\n<li><code>onActivityResult()</code>  is never invoked if your activity sets noHistory to true.</li>\n</ol>\n\n<p><code>android:noHistory=\"true\"</code></p>\n\n<blockquote>\n  <p>This method is never invoked if your activity sets noHistory to true.\n  <a href=\"https://developer.android.com/reference/android/app/Activity.html#startActivityForResult\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/app/Activity.html#startActivityForResult</a></p>\n</blockquote>\n\n<ol start=\"2\">\n<li>request code is &lt; 0, will not trigger <code>onActivityResult()</code> (could not find it documented anywhere, but as per the comments from many fellow developers).</li>\n</ol>\n\n<blockquote>\n  <p>requestCode int: If >= 0, this code will be returned in\n  onActivityResult() when the activity exits, as described in\n  startActivityForResult(Intent, int).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1442, "user_id": 11288846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDoB.png?s=128&g=1", "display_name": "Ferran", "link": "https://stackoverflow.com/users/11288846/ferran"}, "is_accepted": false, "score": 0, "last_activity_date": 1556639427, "creation_date": 1556639427, "answer_id": 55924611, "question_id": 55923049, "link": "https://stackoverflow.com/questions/55923049/im-calling-startactivityforresult-and-finding-that-onactivityresult-is-not-call/55924611#55924611", "title": "I&#39;m calling startActivityForResult and finding that onActivityResult is not called", "body": "<p>If you are calling <code>startActivityForResult</code> from a <code>fragment</code> be sure that the parent activity will propagate the result. </p>\n\n<p>In your Activity</p>\n\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    switch (requestCode) {\n        case A_REQUEST_CODE_USED_IN_YOUR_ACTIVITY:\n            ...\n            break;\n        case ANOTHER_REQUEST_CODE_USED_IN_YOUR_ACTIVITY:\n            ...\n            break;\n        default:\n            // this will propagate the result to your Fragment\n            super.onActivityResult(requestCode, resultCode, data);\n    }\n}\n</code></pre>\n\n<p>In your Fragment</p>\n\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    switch (requestCode) {\n        case IMG_RESULT:\n            if (resultCode = RESULT_OK) {\n                // put here your code\n                ...\n            }\n            break;\n        default:\n            super.onActivityResult(requestCode, resultCode, data);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11432986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1wX6.png?s=128&g=1", "display_name": "brando f", "link": "https://stackoverflow.com/users/11432986/brando-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 55923925, "answer_count": 3, "score": 1, "last_activity_date": 1581920814, "creation_date": 1556634313, "last_edit_date": 1556639267, "question_id": 55923049, "link": "https://stackoverflow.com/questions/55923049/im-calling-startactivityforresult-and-finding-that-onactivityresult-is-not-call", "title": "I&#39;m calling startActivityForResult and finding that onActivityResult is not called", "body": "<p>I'm trying to choose an image from the gallery and apply it to a text view. </p>\n\n<p>I have made a call to startActivityForResult() function and override onActivityResult() function but on testing I have found that onActivityResult() is not getting called. What Would be the reason for this ?</p>\n\n<p>It has super.onActivityResult(requestCode, resultCode, data)</p>\n\n<pre><code>\nvar intent: Intent = Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI)\n               startActivityForResult(intent, IMG_RESULT)\n\n\n            }\n\n\n        }\n\n    }\n\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n//I made this toast to see if the program arrived to onActivityResult but it never showed\n        Toast.makeText(this, \"Success\", Toast.LENGTH_SHORT).show()\n\n        if (resultCode == Activity.RESULT_OK)\n            if (data != null) {\n                val contentURI = data!!.data\n                try {\n\n                    val bitmap = MediaStore.Images.Media.getBitmap(this.contentResolver, contentURI)\n                    val path = saveImage(bitmap)\n                    Toast.makeText(this@MainActivity, \"Image Saved!\", Toast.LENGTH_SHORT).show()\n                    image_blank!!.setImageBitmap(bitmap)\n\n                } catch (e: IOException) {\n                    e.printStackTrace()\n                    Toast.makeText(this@MainActivity, \"Failed!\", Toast.LENGTH_SHORT).show()\n                }\n\n\n            }\n\n\n    }\n\n    fun saveImage(myBitmap: Bitmap): String {\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "is_accepted": true, "score": 0, "last_activity_date": 1557233568, "creation_date": 1557233568, "answer_id": 56023076, "question_id": 55922590, "link": "https://stackoverflow.com/questions/55922590/application-crashes-while-uploading-image-using-retrofit-on-kitkat-4-4-4-api-19/56023076#56023076", "title": "Application crashes while uploading image using retrofit on KitKat 4.4.4 API 19", "body": "<p>After a lot of trial and error and with some help of my senior and <a href=\"https://stackoverflow.com/questions/40128740/random-crash-on-capturing-image-on-lower-android-versions\">this</a>, I finally resolved the respective issue.</p>\n\n<p>The issue was, as soon as I used to capture photo from back camera the android system was killing my respective <code>Activity</code> class in order to conserve resources. When the camera was closed and returned to my <code>Activity</code>, the  <code>Activity</code> was being re-created due to which the instance variable which was used to save the file path of the captured image was null. As a result the application used to crash.</p>\n\n<p>So in order to preserve the instance variable I used <code>onSaveInstanceState(outState: Bundle?)</code> method as follows, in my <code>PrintActivity</code> class(the <code>Activity</code> from which the <code>Camera Intent</code> was fired),</p>\n\n<pre><code>override fun onSaveInstanceState(outState: Bundle?) {\n    super.onSaveInstanceState(outState)\n    outState?.putString(Constants.PRINT_IMAGE_FILE_PATH,printImageFilePath) \n  // printImageFilePath is the path of the image file , \n //  Constants.PRINT_IMAGE_FILE_PATH is my key for the bundle\n\n}\n</code></pre>\n\n<p>And then in my <code>PrintActivity</code> inside the <code>onCreate(savedInstanceState: Bundle?)</code>  I re-assign instance variable like this,</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    if(savedInstanceState?.get(Constants.PRINT_IMAGE_FILE_PATH)!=null){\n    printImageFilePath = \n    savedInstanceState.get(Constants.PRINT_IMAGE_FILE_PATH)\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 56023076, "answer_count": 1, "score": 3, "last_activity_date": 1605597731, "creation_date": 1556632771, "last_edit_date": 1605597731, "question_id": 55922590, "link": "https://stackoverflow.com/questions/55922590/application-crashes-while-uploading-image-using-retrofit-on-kitkat-4-4-4-api-19", "title": "Application crashes while uploading image using retrofit on KitKat 4.4.4 API 19", "body": "<p>As per the requirement, The user of the app clicks an image from device camera and then uploads it to server. Everything is working fine when I test my APK on Lollipop and above but when I test it on below Lollipop(specifically on KitKat 4.4.4 API 19) the app crashes with the exception <code>java.io.FileNotFoundException: /: open failed: EISDIR (Is a directory)</code>.</p>\n\n<p>Before passing the <code>intent</code> to <code>Camera</code> I am creating a <code>File</code> and passing it the <code>Uri</code>.Also during <code>File</code> creation I am saving the file path in some variable.</p>\n\n<p>Later on <code>onActivityResult()</code>, I create a new file with the path(saved in variable) and then pass it to server using retrofit multipart.</p>\n\n<p>This is how I pass <code>Intent</code> to <code>Camera</code></p>\n\n<pre><code>Intent(MediaStore.ACTION_IMAGE_CAPTURE).also { takePictureIntent -&gt;\n                        takePictureIntent.resolveActivity(packageManager)?.also {\n                            val photoFile = try {\n                                createImageFile()\n                            } catch (e: Exception) {\n                                null\n                            }\n\n                            Log.e(\"file tag\", photoFile!!.absolutePath)\n\n                            photoFile?.also {\n                                val photoUri = FileProvider.getUriForFile(this@PrintActivity, \"$packageName.fileprovider\", it)\n                                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri)\n                                if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.LOLLIPOP) {\n                                    takePictureIntent.clipData = ClipData.newRawUri(\"\", photoUri)\n                                    takePictureIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION)\n                                }\n                                startActivityForResult(takePictureIntent, REQUEST_CAMERA)\n                            }\n                        }\n                    }\n</code></pre>\n\n<p>The <code>createImageFile()</code> method is as follows :</p>\n\n<pre><code>@Throws(IOException::class)\n    private fun createImageFile(): File {\n        val timeStamp = SimpleDateFormat(\"yyyyMMdd_HHmmss\", Locale.ENGLISH).format(Date())\n        val storageDir = getExternalFilesDir(\"Allocation\")\n        return File.createTempFile(\"JPEG_${timeStamp}_\", \".jpg\", storageDir).apply {\n            printImageFilePath = absolutePath\n        }\n    }\n</code></pre>\n\n<p>This is the <code>file_paths</code> I provided</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;paths xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;external-path name=\"my_images\" path=\"Android/data/$packageName/files/Allocation\" /&gt;\n&lt;/paths&gt;\n</code></pre>\n\n<p>This is how I declared <code>Provider</code> in my <code>AndroidManifest</code> under the <code>application</code> tag</p>\n\n<pre><code>&lt;provider\n            android:name=\"android.support.v4.content.FileProvider\"\n            android:authorities=\"$packageName.fileprovider\"\n            android:exported=\"false\"\n            android:grantUriPermissions=\"true\"&gt;\n            &lt;meta-data\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\n                android:resource=\"@xml/file_paths\" /&gt;\n        &lt;/provider&gt;\n\n</code></pre>\n\n<p>This is the method <code>OnActivityResult()</code></p>\n\n<pre><code> override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        if (requestCode == REQUEST_CAMERA &amp;&amp; resultCode == Activity.RESULT_OK) {\n            try {\n                val printedImageFile = File(printImageFilePath)\n                doImageUpload(printedImageFile)\n            } catch (e: Throwable) {\n                e.stackTrace\n            }\n        }\n}\n</code></pre>\n\n<p>This is my <code>doImageUpload()</code> method</p>\n\n<pre><code>private fun doImageUpload(printedImageFile: File?) {\n        if (networkUtil.isConnected()) {\n            try {\n                launch(UI) {\n                    val response = dataManager.uploadImage(printedImageFile)\n                    Log.v(\"ImageUploadSuccess\", response.body())\n\n}catch(e:Exception){\n\n}\n\n    }\n</code></pre>\n\n<p>This is my <code>dataManager.uploadImage(printedImageFile)</code> method</p>\n\n<pre><code>suspend fun uploadImage(printImageFile: File?): Response&lt;String&gt; {\n\n        val printImageBody: RequestBody\n        val printImagePart: MultipartBody.Part\n\n            printImageBody = \n RequestBody.create(MediaType.parse(\"multipart/formdata\"),printImageFile)\n            printImagePart = MultipartBody.Part.createFormData(\"my_file1\", printImageFile.name, printImageBody)\n            restService.uploadImage(printImagePart).await()\n}\n</code></pre>\n\n<p>And Finally this is my retrofit multipart interface method,</p>\n\n<pre><code>@Multipart\n    @POST\n    fun uploadImage(@Part myFile2: MultipartBody.Part?): Deferred&lt;Response&lt;String&gt;&gt;\n</code></pre>\n\n<p>This is the crash log I am receiving</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: $packageName, PID: 24339\njava.io.FileNotFoundException: /: open failed: EISDIR (Is a directory)\n    at libcore.io.IoBridge.open(IoBridge.java:409)\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:78)\n    at okio.Okio.source(Okio.java:168)\n    at okhttp3.RequestBody$3.writeTo(RequestBody.java:119)\n    at okhttp3.MultipartBody.writeOrCountBytes(MultipartBody.java:173)\n    at okhttp3.MultipartBody.writeTo(MultipartBody.java:114)\n    at com.readystatesoftware.chuck.ChuckInterceptor.intercept(ChuckInterceptor.java:154)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:254)\n    at okhttp3.RealCall$AsyncCall.execute(RealCall.java:200)\n    at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n    at java.lang.Thread.run(Thread.java:841)\n Caused by: libcore.io.ErrnoException: open failed: EISDIR (Is a directory)\n    at libcore.io.IoBridge.open(IoBridge.java:398)\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:78)\u00a0\n    at okio.Okio.source(Okio.java:168)\u00a0\n    at okhttp3.RequestBody$3.writeTo(RequestBody.java:119)\u00a0\n    at okhttp3.MultipartBody.writeOrCountBytes(MultipartBody.java:173)\u00a0\n    at okhttp3.MultipartBody.writeTo(MultipartBody.java:114)\u00a0\n    at com.readystatesoftware.chuck.ChuckInterceptor.intercept(ChuckInterceptor.java:154)\u00a0\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:147)\u00a0\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:121)\u00a0\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:254)\u00a0\n    at okhttp3.RealCall$AsyncCall.execute(RealCall.java:200)\u00a0\n    at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\u00a0\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\u00a0\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\u00a0\n    at java.lang.Thread.run(Thread.java:841)\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "gradle-plugin", "kotlinc"], "answers": [{"comments": [{"owner": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1556985724, "post_id": 55962839, "comment_id": 98617914, "body": "Thanks a lot! Really appreciated. I&#39;ll look into it and merge your efforts :)"}, {"owner": {"reputation": 1732, "user_id": 4465539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bZhz.png?s=128&g=1", "display_name": "deduper", "link": "https://stackoverflow.com/users/4465539/deduper"}, "reply_to_user": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1556996387, "post_id": 55962839, "comment_id": 98620807, "body": "My pleasure. You&#39;ll notice that I resolved the dependencies problem only. The actually functionality of the class under test, I left to your expertise ;)"}, {"owner": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1557141536, "post_id": 55962839, "comment_id": 98653814, "body": "Hmm, it doesn&#39;t seem to actually run the tests inside GradleRunner, and IntelliJ doesn&#39;t pick up the <code>functionalTest</code> dependencies (e.g. Spock&#39;s <code>Specification</code>) .  I&#39;ll have to work some more on this :)"}, {"owner": {"reputation": 1732, "user_id": 4465539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bZhz.png?s=128&g=1", "display_name": "deduper", "link": "https://stackoverflow.com/users/4465539/deduper"}, "reply_to_user": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1557163422, "post_id": 55962839, "comment_id": 98664863, "body": "All I can tell you is that it works for me. <a href=\"https://i.imgur.com/urXP7WU.png\" rel=\"nofollow noreferrer\"><i>This screenshot shows</i></a> the result of running the <i><code>functionalTestClasses</code></i> task. <a href=\"https://imgur.com/FlFlpro.png\" rel=\"nofollow noreferrer\"><i>This second screenshot shows</i></a> the result of running the <i><code>functionalTest</code></i> task."}, {"owner": {"reputation": 1732, "user_id": 4465539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bZhz.png?s=128&g=1", "display_name": "deduper", "link": "https://stackoverflow.com/users/4465539/deduper"}, "reply_to_user": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1557164177, "post_id": 55962839, "comment_id": 98665149, "body": "<a href=\"https://imgur.com/klYZlVd.png\" rel=\"nofollow noreferrer\"><i>Here&#39;s another screenshot</i></a> showing the Spock Specification dependency in IntelliJ. You can see in the editor that there are no compilation errors in the Spock functional test. Like I said before, I don&#39;t know what the actually functionality of your code is intended to do. So I didn&#39;t set out to make your code itself work. I only set out to resolve the <i><code>NoClassDefFoundError</code></i> issue you originally asked about. Are you still getting <i><code>NoClassDefFoundError</code>s</i>?"}, {"owner": {"reputation": 1732, "user_id": 4465539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bZhz.png?s=128&g=1", "display_name": "deduper", "link": "https://stackoverflow.com/users/4465539/deduper"}, "reply_to_user": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "edited": false, "score": 0, "creation_date": 1557164924, "post_id": 55962839, "comment_id": 98665427, "body": "<a href=\"https://imgur.com/BbylgfH.png\" rel=\"nofollow noreferrer\"><i>One more for you</i></a>; just to be on the safe side."}], "tags": [], "owner": {"reputation": 1732, "user_id": 4465539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bZhz.png?s=128&g=1", "display_name": "deduper", "link": "https://stackoverflow.com/users/4465539/deduper"}, "is_accepted": false, "score": 2, "last_activity_date": 1556853248, "creation_date": 1556853248, "answer_id": 55962839, "question_id": 55922492, "link": "https://stackoverflow.com/questions/55922492/how-do-i-add-dependencies-to-my-custom-gradle-plugin/55962839#55962839", "title": "How do I add dependencies to my custom Gradle plugin?", "body": "<p>I suspect your problem is because of <a href=\"https://youtu.be/P7SvwkRXjSU?t=1616\" rel=\"nofollow noreferrer\"><em>known classloader issues</em></a> with plugins exercised with Gradle's TestKit.</p>\n\n<p>I will paraphrase what that link says: Your plugin and its runtime classpath are loaded with one classloader. The functional test and its classpath are loaded in yet a second different classloader. Such a situation is the classic recipe for <em><code>NoClassDefFoundError</code>s</em>. Therefore, when using TestKit with a custom plugin, the plugin's runtime classpath must be explicitly injected into the runtime classpath of the functional test that is exercising the plugin.</p>\n\n<p>The way your project is organized \u2014 <em>with the functional test as a subproject</em> \u2014 is likely to compound those known classloader issues. It certainly makes things more complicated than they need to be.</p>\n\n<p>The answer to your question, therefore, is: <a href=\"https://github.com/deduper/kotlin-really-allopen/tree/able-to-add-dependencies\" rel=\"nofollow noreferrer\"><strong><em>Reorganize your project</em></strong></a>.</p>\n\n<p>Using <a href=\"https://docs.gradle.org/current/userguide/test_kit.html#sub:test-kit-automatic-classpath-injection\" rel=\"nofollow noreferrer\"><em>the Gradle User Guide as a guide</em></a>, I simplified your project.\nI forked and reorganized it <a href=\"https://github.com/gradle/gradle/tree/master/subprojects/docs/src/samples/testKit/gradleRunner/automaticClasspathInjectionCustomTestSourceSet\" rel=\"nofollow noreferrer\"><em>the way Gradle advises</em></a>. </p>\n\n<p>The fixed code is in the <a href=\"https://github.com/deduper/kotlin-really-allopen/tree/able-to-add-dependencies\" rel=\"nofollow noreferrer\"><strong><em>able-to-add-dependencies branch</em></strong></a> of the fork.</p>\n"}], "owner": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1556853248, "creation_date": 1556632436, "last_edit_date": 1556634044, "question_id": 55922492, "link": "https://stackoverflow.com/questions/55922492/how-do-i-add-dependencies-to-my-custom-gradle-plugin", "title": "How do I add dependencies to my custom Gradle plugin?", "body": "<p>I get a <code>NoClassDefFoundError</code> when trying to add a dependency to my custom Gradle plugin, and I haven't found a way to solve it.</p>\n\n<p>Added to <a href=\"https://github.com/henrik242/kotlin-really-allopen/commit/094f801c561f6bde73ff8390e29527bd7d6fd139#diff-a0a9a7986a27cdb01d0ec9b4d1ae436bR23\" rel=\"nofollow noreferrer\">the plugin's dependency block</a>:</p>\n\n<pre><code>implementation(\"org.apache.logging.log4j:log4j-api:2.11.2\")\nimplementation(\"org.apache.logging.log4j:log4j-core:2.11.2\")\n</code></pre>\n\n<p>Added to <a href=\"https://github.com/henrik242/kotlin-really-allopen/commit/094f801c561f6bde73ff8390e29527bd7d6fd139#diff-11d623f04490908cafcd8004b06ba939R105\" rel=\"nofollow noreferrer\">the plugin's DeclarationAttributeAltererExtension implementation</a>:</p>\n\n<pre><code>val log = LogManager.getLogger(ReallyAllOpenExtension::class.java)\n</code></pre>\n\n<p>Here's the full stacktrace:</p>\n\n<pre><code>no.synth.kotlin.plugins.reallyallopen.FunctionalPluginTest &gt; should include plugin via plugins block FAILED\n    org.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /var/folders/g4/024g2mzn7jl5s2b2cvg_ythh00016k/T/junit5022572406008108408 with arguments [build]\n\n    Output:\n\n    &gt; Task :compileKotlin FAILED\n    e: java.lang.NoClassDefFoundError: org/apache/logging/log4j/LogManager\n        at no.synth.kotlin.plugins.reallyallopen.ReallyAllOpenExtension.&lt;clinit&gt;(ReallyAllOpenPlugin.kt:106)\n        at no.synth.kotlin.plugins.reallyallopen.ReallyAllOpenRegistrar.registerProjectComponents(ReallyAllOpenPlugin.kt:79)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment.&lt;init&gt;(KotlinCoreEnvironment.kt:174)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment.&lt;init&gt;(KotlinCoreEnvironment.kt:123)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinCoreEnvironment$Companion.createForProduction(KotlinCoreEnvironment.kt:413)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.createCoreEnvironment(K2JVMCompiler.kt:259)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:124)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:54)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:84)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:42)\n        at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:103)\n        at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:364)\n        at org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:105)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:237)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.access$compileIncrementally(IncrementalCompilerRunner.kt:37)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner$compile$2.invoke(IncrementalCompilerRunner.kt:79)\n        at org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:91)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.execIncrementalCompiler(CompileServiceImpl.kt:597)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.access$execIncrementalCompiler(CompileServiceImpl.kt:102)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:455)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:102)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:1023)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:102)\n        at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:1065)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:1022)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:454)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:562)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:796)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:677)\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:676)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:834)\n    Caused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.LogManager\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 44 more\n</code></pre>\n\n<p>The full implementation and test case is in a separate branch at <a href=\"https://github.com/henrik242/kotlin-really-allopen/tree/unable-to-add-dependencies\" rel=\"nofollow noreferrer\">https://github.com/henrik242/kotlin-really-allopen/tree/unable-to-add-dependencies</a></p>\n\n<p>Recreate the problem by running <code>./gradlew clean :kotlin-really-allopen:build :kotlin-really-allopen:publishToMavenLocal :functional-test:build</code></p>\n"}, {"tags": ["spring-boot", "exception", "kotlin", "spring-webflux"], "answers": [{"tags": [], "owner": {"reputation": 2978, "user_id": 4337243, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-udTk8gjSxkc/AAAAAAAAAAI/AAAAAAAAAPM/CQbedZVkCr8/photo.jpg?sz=128", "display_name": "Ilya Zinkovich", "link": "https://stackoverflow.com/users/4337243/ilya-zinkovich"}, "is_accepted": true, "score": 1, "last_activity_date": 1557323335, "creation_date": 1557323335, "answer_id": 56042341, "question_id": 55922477, "link": "https://stackoverflow.com/questions/55922477/throw-exception-spring-boot-webflux/56042341#56042341", "title": "Throw exception spring boot webflux", "body": "<p>Try this:</p>\n\n<pre><code>@GetMapping(value = [\"/{id}\"])\nfun find(@PathVariable id: String): Mono&lt;ResponseEntity&lt;?&gt;&gt; {\n  service.find(id).map(person -&gt; ResponseEntity.ok().body(person))\n    .onErrorResume(DataNotFound.class, exception -&gt; ResponseEntity.notFound())\n}\n\nfun find(id: String): Mono&lt;Person&gt; {\n  repository.findById(id).onErrorMap(error -&gt; new DataNotFound(\"Person not found\"))\n}\n</code></pre>\n\n<p>It returns OK response if a person exists and NOT_FOUND otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 2757, "user_id": 6237026, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/844pQ.jpg?s=128&g=1", "display_name": "Dina Bogdan", "link": "https://stackoverflow.com/users/6237026/dina-bogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1599823093, "creation_date": 1599823093, "answer_id": 63846035, "question_id": 55922477, "link": "https://stackoverflow.com/questions/55922477/throw-exception-spring-boot-webflux/63846035#63846035", "title": "Throw exception spring boot webflux", "body": "<p>Usually, in a more complex scenario, you want to do a translation from exceptions to some kind of error resource.</p>\n<p>In this scenario, you will use the same response type for your method which handles the HTTP request. More precisely, in your case:</p>\n<pre><code>@GetMapping(value = [&quot;/{id}&quot;])\nfun find(@PathVariable id: String): Mono&lt;ResponseEntity&lt;Mono&lt;Person&gt;&gt;&gt; {\n    return ResponseEntity.ok().body(service.find(id)).toMono()\n}\n</code></pre>\n<p>(this will remain as it is!)</p>\n<p>And next, you will provide a so-called <code>ControllerAdvice</code> which can look in your case like in the following snippet:</p>\n<pre><code>@ControllerAdvice(assignableTypes = [YourRestController::class]\nclass ControllerAdvice {\n\n   @ExceptionHandler\n   fun handle(ex: DataNotFoundException): ResponseEntity&lt;DataNotFoundErrorResource&gt; {\n      return ResponseEntity.status(HttpStatus.NOT_FOUND).body(DataNotFoundErrorResource.from(ex)\n   }\n}\n</code></pre>\n<p><strong>Note</strong>: Be aware that I've not used a Kotlin compiler, but I've compiled it in my mind :) I hope that it will be ok!</p>\n"}], "owner": {"reputation": 303, "user_id": 9910654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hRoyXFDnkPo/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq09IaNybHiPDJ2argdD2c-JdOauEQ/mo/photo.jpg?sz=128", "display_name": "Rodrigo Batista", "link": "https://stackoverflow.com/users/9910654/rodrigo-batista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2569, "favorite_count": 0, "accepted_answer_id": 56042341, "answer_count": 2, "score": 1, "last_activity_date": 1599823093, "creation_date": 1556632395, "question_id": 55922477, "link": "https://stackoverflow.com/questions/55922477/throw-exception-spring-boot-webflux", "title": "Throw exception spring boot webflux", "body": "<p>I am trying to make a condition, which if not satisfied, throw an exception. But I tried in many ways and without success.</p>\n\n<p>My restcontroller:</p>\n\n<pre><code>@GetMapping(value = [\"/{id}\"])\n    fun find(@PathVariable id: String): Mono&lt;ResponseEntity&lt;Mono&lt;Person&gt;&gt;&gt; {\n        return ResponseEntity.ok().body(service.find(id)).toMono()\n}\n</code></pre>\n\n<p>My service</p>\n\n<pre><code>override fun find(id: String): Mono&lt;Person&gt; {\n        return repository.findById(id).doOnError { throw DataNotFound(\"Person not found\")}\n  }\n</code></pre>\n\n<p>If I enter an existing ID, it returns me a registered person.\nBut if I enter a nonexistent ID, instead of throwing the exception, it returns me a 200 with empty body.</p>\n\n<p>How do I solve this? Could anyone help?</p>\n"}, {"tags": ["android", "kotlin", "push-notification"], "comments": [{"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1556630052, "post_id": 55921712, "comment_id": 98497197, "body": "yes, use data only message and show custom notification"}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 2, "creation_date": 1556630692, "post_id": 55921712, "comment_id": 98497576, "body": "You can create a pending intent and define which activity you want to show on a notification click. <a href=\"https://developer.android.com/training/notify-user/build-notification.html#click\" rel=\"nofollow noreferrer\">developer.android.com/training/notify-user/&hellip;</a>"}, {"owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "edited": false, "score": 0, "creation_date": 1556631594, "post_id": 55921712, "comment_id": 98498107, "body": "Also pay attention when server send info in <code>notification</code> block <code>onMessageReceived</code> will be called only if app in foreground,  and if in <code>data</code> block, notifications will be always managed through onMessageReceived."}], "owner": {"reputation": 1309, "user_id": 898307, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Sf992.jpg?s=128&g=1", "display_name": "Jim Clermonts", "link": "https://stackoverflow.com/users/898307/jim-clermonts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556629965, "creation_date": 1556629965, "question_id": 55921712, "link": "https://stackoverflow.com/questions/55921712/override-onclick-behaviour-of-push-message-android", "title": "override onclick behaviour of Push message Android", "body": "<p>I'm developing a chat message App.</p>\n\n<p>When clicking on the Push Message I want to be able to influence the behaviour based on the state of the App. Because: </p>\n\n<ul>\n<li>when the App is out of the phone memory, it should show the login screen </li>\n<li>But when the App is active and opened, and the list of chats is displayed, it should show the push message and when clicking it shouldn't show the login because the user is already logged in.</li>\n</ul>\n\n<p>code:</p>\n\n<pre><code>class PushMessageService : FirebaseMessagingService() {\n\n    override fun onMessageReceived(message: RemoteMessage?) {\n        // override some method that gets triggered as soon as user clicks on the push message.\n    }\n}\n</code></pre>\n\n<p>Now it starts the activity defined as MAIN in Androidmanifest:</p>\n\n<pre><code>        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n</code></pre>\n\n<p>I can add the code in that Activity but I prefer PushMessageService to handle this. Is this possible?</p>\n"}, {"tags": ["kotlin", "build.gradle"], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 1389063, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bb879bd45a994d22b35d87f59bad7a?s=128&d=identicon&r=PG", "display_name": "dasAnderl ausMinga", "link": "https://stackoverflow.com/users/1389063/dasanderl-ausminga"}, "edited": false, "score": 0, "creation_date": 1584709199, "post_id": 55953573, "comment_id": 107526473, "body": "amazing...was looking for an answer for quite a while....this one works...thx"}, {"owner": {"reputation": 141, "user_id": 2597637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f6de6496ad82e944572ed2c3ec458?s=128&d=identicon&r=PG", "display_name": "manishbelsare", "link": "https://stackoverflow.com/users/2597637/manishbelsare"}, "edited": false, "score": 0, "creation_date": 1606933153, "post_id": 55953573, "comment_id": 115115865, "body": "just what is required. thanks"}], "tags": [], "owner": {"reputation": 682, "user_id": 2258205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ekus3.jpg?s=128&g=1", "display_name": "Suraj Muraleedharan", "link": "https://stackoverflow.com/users/2258205/suraj-muraleedharan"}, "is_accepted": true, "score": 8, "last_activity_date": 1556803673, "creation_date": 1556803673, "answer_id": 55953573, "question_id": 55921605, "link": "https://stackoverflow.com/questions/55921605/unable-to-exclude-generated-classes-from-kotlin-jacoco-test-coverage/55953573#55953573", "title": "Unable to Exclude generated classes from kotlin jacoco test coverage", "body": "<p>It is a limitaion with <code>jacoco plugin</code> on <code>kotlin</code>. Since the <code>classDirectories</code> is not final, we cant go with the old way. We need to use the method <code>classDirectories.setFrom</code> to set the value.</p>\n\n<pre><code>tasks.withType&lt;JacocoCoverageVerification&gt; {\n    violationRules {\n        rule {\n            limit {\n                minimum = BigDecimal(0.62)\n            }\n        }\n    }\n\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.map {\n            fileTree(it).apply {\n                exclude(\"com/generate/**\")\n            }\n        }))\n    }\n}\n\ntasks.withType&lt;JacocoReport&gt; {\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.map {\n            fileTree(it).apply {\n                exclude(\"com/generate/**\")\n            }\n        }))\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 11010792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gwZa.jpg?s=128&g=1", "display_name": "abin peter", "link": "https://stackoverflow.com/users/11010792/abin-peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1784, "favorite_count": 1, "accepted_answer_id": 55953573, "answer_count": 1, "score": 4, "last_activity_date": 1556803673, "creation_date": 1556629642, "question_id": 55921605, "link": "https://stackoverflow.com/questions/55921605/unable-to-exclude-generated-classes-from-kotlin-jacoco-test-coverage", "title": "Unable to Exclude generated classes from kotlin jacoco test coverage", "body": "<p>I am trying to exclude some generated classes from jacoco coverage report. Which is working fine with groovy but after converting to Kotlin it's not working</p>\n\n<pre><code>tasks.withType&lt;JacocoCoverageVerification&gt; {\nafterEvaluate {\n     files(classDirectories.files.forEach() {\n        fileTree(it).apply {\n            exclude(\"com/generate/**\")\n        }\n    })\n}\nviolationRules {\n    rule {\n        limit {\n            minimum = BigDecimal(0.30)\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>tasks.getByName(\"check\")\n.dependsOn(tasks.getByName(\"jacocoTestCoverageVerification\"))\n</code></pre>\n\n<p>But violation rule working perfectly.</p>\n"}, {"tags": ["android", "kotlin", "android-memory", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1556628588, "post_id": 55921068, "comment_id": 98496291, "body": "You never assign anything to <code>initEngineJob</code> neither do you use <code>coroutineContext</code> - is your sample incomplete?"}, {"owner": {"reputation": 762, "user_id": 9163128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhkjI.png?s=128&g=1", "display_name": "Viktor Vostrikov", "link": "https://stackoverflow.com/users/9163128/viktor-vostrikov"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1556631197, "post_id": 55921068, "comment_id": 98497877, "body": "I assign initiEngineJob in onCreate. Isn&#39;t coroutineContext already overriden, if I use it in Fragment? Android Studio shows that it selects correct coroutineContext"}], "answers": [{"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1556640524, "post_id": 55922315, "comment_id": 98503383, "body": "Just one comment, <code>withContext</code> is not a shorthand for <code>async {}.await()</code> and they differ precisely in exception handling. An exception within <code>async</code> that escapes its scope will cause the <code>async</code> coroutine to be canceled and propagate the cancellation to the parent coroutine. This will happen whether or not you put <code>await</code> inside a <code>try-catch</code>. Since <code>withContext</code> doesn&#39;t create a new coroutine, an exception that escapes it won&#39;t cancel anything, it will land in the surrounding <code>try-catch</code>."}, {"owner": {"reputation": 2954, "user_id": 5652513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2bQCi.jpg?s=128&g=1", "display_name": "methodsignature", "link": "https://stackoverflow.com/users/5652513/methodsignature"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1556720023, "post_id": 55922315, "comment_id": 98527948, "body": "@MarkoTopolnik thanks. i admit i have neglected some additional studying since the move to structured concurrency.  my answer has been updated with what i believe is a more accurate comment on the matter."}, {"owner": {"reputation": 762, "user_id": 9163128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhkjI.png?s=128&g=1", "display_name": "Viktor Vostrikov", "link": "https://stackoverflow.com/users/9163128/viktor-vostrikov"}, "edited": false, "score": 0, "creation_date": 1556746349, "post_id": 55922315, "comment_id": 98539167, "body": "Thanks both of you for clear explanation. I seem to finally get it :) Will try this and will let you (accept answer) shortly"}], "tags": [], "owner": {"reputation": 2954, "user_id": 5652513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2bQCi.jpg?s=128&g=1", "display_name": "methodsignature", "link": "https://stackoverflow.com/users/5652513/methodsignature"}, "is_accepted": false, "score": 5, "last_activity_date": 1556719905, "last_edit_date": 1556719905, "creation_date": 1556631940, "answer_id": 55922315, "question_id": 55921068, "link": "https://stackoverflow.com/questions/55921068/how-should-i-restart-retry-kotlin-coroutine-after-exception-in-android/55922315#55922315", "title": "How should I restart/retry Kotlin coroutine after exception in Android", "body": "<p>You should treat your code as linear imperative and try/catch where it makes the most logical sense in your code.  With this mindset, your question is probably less about coroutines and more about try/catch retry.  You might do something like so:</p>\n\n<pre><code>fun main() {\n    GlobalScope.launch {\n        initWorkEngineCoroutine()\n    }\n}\n\nsuspend fun initWorkEngineCoroutine() {\n    var failures = 0\n    val maxFailures = 3\n    while(failures &lt;= maxFailures) {\n        try {\n             getResultsFromEngine()?.let {\n                draw!!.showResult(it)\n            }\n        } catch (e: Exception) {\n            failures++\n        }\n    }\n}\n\n// withContext is like async{}.await() except an exception occuring inside \n// withContext can be caught from inside the coroutine.\n// here, we are mapping getResultFromEngine() to a call to withContext and \n// passing withContext the lambda which does the work\nsuspend fun getResultsFromEngine() :Result? = withContext(Dispatchers.Default) {\n    Result()\n}\n</code></pre>\n\n<p>I've included some logic to prevent infinite loop.  It's probably not going to fit your requirements, but you might consider some sort of thing to prevent an issue where exceptions are raised immediately by <code>getResultsFromEngine()</code> and end up causing an infinite loop that could result in unexpected behavior and potential stackoverflow.</p>\n"}], "owner": {"reputation": 762, "user_id": 9163128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhkjI.png?s=128&g=1", "display_name": "Viktor Vostrikov", "link": "https://stackoverflow.com/users/9163128/viktor-vostrikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3267, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556719905, "creation_date": 1556627613, "last_edit_date": 1556628290, "question_id": 55921068, "link": "https://stackoverflow.com/questions/55921068/how-should-i-restart-retry-kotlin-coroutine-after-exception-in-android", "title": "How should I restart/retry Kotlin coroutine after exception in Android", "body": "<p>I am really happy that I switched my long running tasks, which constantly produce <strong>results to UI thread</strong> to <strong>coroutines</strong>. It improved performance and decreased memory usage by 3 times and all memory leaks disappeared compared to AsyncTask or regular Threads in Android. </p>\n\n<p>The only problem remains is that, I don't know how should I restart my long running operation after exception <strong>has occurred at some time</strong>...</p>\n\n<p>I feel I did not understand exception handling in coroutines at all after reading tons of article. Let me know how can I achieve desired behaviour.</p>\n\n<ol>\n<li>I  have coroutine scope in fragment(will move to VM in near future).</li>\n</ol>\n\n<p>&#8203;</p>\n\n<pre><code>    lateinit var initEngineJob: Job\n    override val coroutineContext: CoroutineContext\n        get() = initEngineJob + Dispatchers.Main\n</code></pre>\n\n<p>&#x200B;</p>\n\n<ol start=\"2\">\n<li>Long running task with async/await.</li>\n</ol>\n\n<p>&#x200B;</p>\n\n<pre><code>fun initWorkEngineCoroutine()\n    {\n        launch {\n\n            while(true) {\n                val deferred = async(Dispatchers.Default) {\n                    getResultsFromEngine()\n                }\n                    val result = deferred.await()\n                    if (result != null) {\n                    //UI thread\n                        draw!!.showResult(result)\n                    }\n                }\n            }\n\n        }\n\nfun getResultsFromEngine() :Result? {\n           result = // some results from native c++ engine, which throws exception at some times\n           return result\n   }\n</code></pre>\n\n<p>i don't know where should I put try catch. I tried to surround deferred.await() with try catch, but I could <strong>not call same method in catch block</strong> to retry long running task. I tried <em>SupervisorJob</em>(), but no success either. I still could not call <strong>initWorkEngineCoroutine() again</strong> and <strong>start new coroutine</strong>...  </p>\n\n<p>Help to solve this issue finally :)</p>\n"}, {"tags": ["java", "android", "kotlin", "flutter"], "answers": [{"tags": [], "owner": {"reputation": 3866, "user_id": 1664556, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/301ced2f5f11eb00948a8ed4b18303ec?s=128&d=identicon&r=PG", "display_name": "rockgecko", "link": "https://stackoverflow.com/users/1664556/rockgecko"}, "is_accepted": true, "score": 1, "last_activity_date": 1556629322, "creation_date": 1556629322, "answer_id": 55921521, "question_id": 55920435, "link": "https://stackoverflow.com/questions/55920435/how-to-create-text-field-in-android-to-use-in-a-flutter-app/55921521#55921521", "title": "How to create Text Field in Android to use in a Flutter app", "body": "<p>Sure, it's technically possible, by using a Flutter Platform View. This is how Google Maps works on Android and iOS, it calls out to the native Google Maps library.</p>\n\n<p>Using it for an Android <code>EditText</code> is almost certainly <em>unusual</em>, but if you want, here's a step-by-step guide (just swap out the Android <code>TextView</code> with <code>EditText</code>)\n<a href=\"https://medium.com/flutter-community/flutter-platformview-how-to-create-flutter-widgets-from-native-views-366e378115b6\" rel=\"nofollow noreferrer\">https://medium.com/flutter-community/flutter-platformview-how-to-create-flutter-widgets-from-native-views-366e378115b6</a></p>\n"}], "owner": {"reputation": 449, "user_id": 10854681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HaPsL.jpg?s=128&g=1", "display_name": "Syed Mushaheed", "link": "https://stackoverflow.com/users/10854681/syed-mushaheed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 55921521, "answer_count": 1, "score": 0, "last_activity_date": 1556629322, "creation_date": 1556625360, "last_edit_date": 1556626132, "question_id": 55920435, "link": "https://stackoverflow.com/questions/55920435/how-to-create-text-field-in-android-to-use-in-a-flutter-app", "title": "How to create Text Field in Android to use in a Flutter app", "body": "<p>Instead of a TextField Widget, I want to use the android text field in my flutter app. I can use TextField widget but there are a few problems I get with it. Is there a way to use Android Text field with flutter? How can I set and get a text in it?</p>\n\n<p>The Problems I get with Flutter's TextField Widget is:</p>\n\n<ul>\n<li>Can't use Autofill</li>\n<li>I can't change cursor height</li>\n<li>There's no Select all option or search on web when long pressed</li>\n<li>Scrolling is not smooth</li>\n<li>Strange behavior with text over a page or 2 long, when we hide the keyboard and show it again by clicking on a line or selecting a word.</li>\n</ul>\n\n<p>I've read this <a href=\"https://flutter.dev/docs/development/platform-integration/platform-channels\" rel=\"nofollow noreferrer\">Documentation</a>, but I'm not able to fully understand it.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1556623728, "post_id": 55919803, "comment_id": 98493665, "body": "Use <code>localCache.insert(userPreferences, object :InsertCallback{            &#47;&#47;&#47;&#47;&#47;&#47;         })</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 0, "last_activity_date": 1556624006, "creation_date": 1556624006, "answer_id": 55920011, "question_id": 55919803, "link": "https://stackoverflow.com/questions/55919803/java-to-kotlin-type-mismatch/55920011#55920011", "title": "java to kotlin Type mismatch", "body": "<p>Java supports <em>functional interfaces</em> (interfaces with one non-default, non-static method) to be instantiated using lambda expressions. Kotlin doesn't have this relation.</p>\n\n<p>You can either instantiate the interface on its own, using object literals:</p>\n\n<pre><code>localCache.insert(userPreferences, object : InsertCallback {\n    override fun ...\n})\n</code></pre>\n\n<p>Or, you directly use a functional type in Kotlin:</p>\n\n<pre><code>typealias InsertCallback = () -&gt; Unit\n\nlocalCache.insert(userPreferences) {\n    // lambda here\n}\n</code></pre>\n\n<p>If <code>InsertCallback</code> is still a Java interface, you can instantiate it using SAM conversions. This does not work for Kotlin interfaces.</p>\n\n<pre><code>localCache.insert(userPreferences, InsertCallback {\n    // lambda here\n})\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 10516463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OrmLjkyvSpY/AAAAAAAAAAI/AAAAAAAAAGU/bwjDNubpaTM/photo.jpg?sz=128", "display_name": "d-feverx", "link": "https://stackoverflow.com/users/10516463/d-feverx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 1, "closed_date": 1556629650, "accepted_answer_id": 55920011, "answer_count": 1, "score": 1, "last_activity_date": 1556624006, "creation_date": 1556623246, "question_id": 55919803, "link": "https://stackoverflow.com/questions/55919803/java-to-kotlin-type-mismatch", "closed_reason": "Duplicate", "title": "java to kotlin Type mismatch", "body": "<p>i try to convert   the given java(below) code to Kotlin but stuck at some point ,showing \nan error  <strong>Type mismatch</strong></p>\n\n<p>this is the java code i would try to convert to kotlin</p>\n\n<pre><code>public void insert(List&lt;UserPreference&gt; userPreferences,InsertCallback callback ){\n        ioExecutor.execute(()-&gt;\n        {\n            userPrefDao.insert(userPreferences);\n            callback.insertFinished();\n        });\n    }\n</code></pre>\n\n<pre><code> @Override\n    public void onSuccess(List&lt;UserPreference&gt; userPreferences) {\n\n        localCache.insert(userPreferences,()-&gt; {  lastRequestedPage++;\n            Log.d(TAG, \"onSuccess: inserted\");\n            isRequestInProgress = false;});\n\n\n    }\n</code></pre>\n\n<p>this is the kotlin code i invented but get an error type mismatch</p>\n\n<pre><code>fun insert(userPreferences: List&lt;UserPreference&gt;, callback: InsertCallback) {\n        ioExecutor.execute({\n            userPrefDao.insert(userPreferences)\n            callback.insertFinished()\n        })\n    }\n</code></pre>\n\n<pre><code>   override fun onSuccess(userPreferences: List&lt;UserPreference&gt;) {\n\n        localCache.insert(userPreferences, {\n            lastRequestedPage++\n            Log.d(TAG, \"onSuccess: inserted\")\n            isRequestInProgress = false\n        })\n\n\n    }\n</code></pre>\n\n<pre><code>Type mismatch.\nRequired:\nUserPrefLocalCache.InsertCallback\nFound:\n() \u2192 Unit\n</code></pre>\n\n<p>How to fix this please help me </p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556622869, "post_id": 55919198, "comment_id": 98493271, "body": "I think what you&#39;re looking for is <code>sealed class</code>es, or a private constructor with two static factory functions in the companion object, while making <code>motorCycle</code> and <code>bus</code> nullable fields."}], "answers": [{"comments": [{"owner": {"reputation": 3816, "user_id": 9779471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63Vvd.png?s=128&g=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/9779471/quinn"}, "edited": false, "score": 0, "creation_date": 1556630010, "post_id": 55921659, "comment_id": 98497168, "body": "I see what you&#39;re doing, but his Vehicle class has more than 0 parameters, you may want to have the TwoWheel and FourWheel classes pass in the type and the objects they were instantiated with as well."}, {"owner": {"reputation": 2537, "user_id": 1680703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvIM9.png?s=128&g=1", "display_name": "Anis BEN NSIR", "link": "https://stackoverflow.com/users/1680703/anis-ben-nsir"}, "reply_to_user": {"reputation": 3816, "user_id": 9779471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63Vvd.png?s=128&g=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/9779471/quinn"}, "edited": false, "score": 0, "creation_date": 1556633068, "post_id": 55921659, "comment_id": 98499036, "body": "all parameters to Vehicule must be the same for all subclass, if you need custom you can add to the subclass as needed... For the type, no need to pass it to vehicle, you can use the subclass type...  so you haven&#39;t to manager mandatory/optional parameters, all parameters are mandatory and scoped by type."}], "tags": [], "owner": {"reputation": 2537, "user_id": 1680703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvIM9.png?s=128&g=1", "display_name": "Anis BEN NSIR", "link": "https://stackoverflow.com/users/1680703/anis-ben-nsir"}, "is_accepted": true, "score": 1, "last_activity_date": 1556629809, "creation_date": 1556629809, "answer_id": 55921659, "question_id": 55919198, "link": "https://stackoverflow.com/questions/55919198/android-making-properties-mandatory-based-on-type/55921659#55921659", "title": "Android - Making Properties mandatory Based on Type", "body": "<pre><code>sealed class Vehicle\ndata class TwoWheel(val motorCycle: Any) : Vehicle()\ndata class FourWheel(val bus: Any) : Vehicle()\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 55921659, "answer_count": 1, "score": 0, "last_activity_date": 1556629809, "creation_date": 1556620805, "last_edit_date": 1556623596, "question_id": 55919198, "link": "https://stackoverflow.com/questions/55919198/android-making-properties-mandatory-based-on-type", "title": "Android - Making Properties mandatory Based on Type", "body": "<p>I am using kotlin for  android development, I have a data class say for example <code>Vehicle</code> and there will be three field <code>vehicleType</code>, <code>MotorCycle</code>, and <code>Bus</code>, when i set the <code>vehicleType</code> as <code>twoWheeler</code> it should show <code>MotorCycle</code> as mandatory and when i set <code>Bus</code> as a <code>vehicleType</code> at the compile time it should show me <code>Bus</code> field as mandatory(like annotations)<br>\n<strong>Example</strong></p>\n\n<pre><code>data class Vehicle(val type : vehicleType, val motorCycle : Any, val bus : Any ){\n\n    companion object{\n      const val TWO_WHEEL = 0\n      const val FOUR_WHEEL = 1\n  }\n\n}\n</code></pre>\n\n<p>If i create a data class <code>Vehicle</code> for type <code>TWO_WHEEL</code> it should show me <code>motorCycle</code> as mandatory at compile time<br>\nIs there is any custom solution for this ?<br>\nAny help</p>\n"}, {"tags": ["kotlin", "bean-validation", "micronaut"], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 4786162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6d7c98f84a3ff4930e2ec24f507d4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Hansen", "link": "https://stackoverflow.com/users/4786162/florian-hansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1556623836, "creation_date": 1556623836, "answer_id": 55919965, "question_id": 55918902, "link": "https://stackoverflow.com/questions/55918902/micronaut-how-to-inject-hibernate-validator/55919965#55919965", "title": "Micronaut - How to inject Hibernate validator", "body": "<p>One can provide the validator by adding a Factory that provides the Validation bean like this:</p>\n\n<pre><code>@Factory\nclass ValidatorFactory {\n    @Singleton\n    fun validator(): Validator = Validation.buildDefaultValidatorFactory().validator\n}\n</code></pre>\n\n<p>This adds the necessary Validator bean to the application context and makes it available.</p>\n"}, {"tags": [], "owner": {"reputation": 11498, "user_id": 1264846, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/87e2978960ad82ab77fcd409e0dd72d6?s=128&d=identicon&r=PG", "display_name": "James Kleeh", "link": "https://stackoverflow.com/users/1264846/james-kleeh"}, "is_accepted": true, "score": 1, "last_activity_date": 1556687991, "creation_date": 1556687991, "answer_id": 55931927, "question_id": 55918902, "link": "https://stackoverflow.com/questions/55918902/micronaut-how-to-inject-hibernate-validator/55931927#55931927", "title": "Micronaut - How to inject Hibernate validator", "body": "<p>You can inject a <code>javax.validation.ValidatorFactory</code> that will delegate to whatever implementation you have on the classpath. </p>\n\n<p>Starting in 1.2.0 (not released yet), you will be able to inject a <code>io.micronaut.validation.validator.Validator</code> that is Micronaut's implementation of validation that doesn't use reflection. </p>\n"}], "owner": {"reputation": 646, "user_id": 4786162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6d7c98f84a3ff4930e2ec24f507d4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Hansen", "link": "https://stackoverflow.com/users/4786162/florian-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 55931927, "answer_count": 2, "score": 0, "last_activity_date": 1556687991, "creation_date": 1556619824, "question_id": 55918902, "link": "https://stackoverflow.com/questions/55918902/micronaut-how-to-inject-hibernate-validator", "title": "Micronaut - How to inject Hibernate validator", "body": "<p>I am using the Hibernate validation mechanism in my Micronaut project as the documentation suggests.</p>\n\n<p>Unfortunately, I need to react to validation errors manually and handle the errors with specific exceptions. Thus, I can not use the recommended way of validating method arguments</p>\n\n<pre><code>fun doStuff(@Valid argument: MyArgument): ... {...}\n</code></pre>\n\n<p>I want to inject the Validator to my class, call it and process the results myself. In Spring this was easily doable. Micronaut unfortunately tells me it does not know how to provide a validator:</p>\n\n<pre><code>Message: No bean of type [javax.validation.Validator] exists\n</code></pre>\n\n<p>My class looks like this</p>\n\n<pre><code>import javax.validation.Validator\n\n@Controller\nclass MyController(val validator: Validator) {...}\n</code></pre>\n\n<p>Am I missing something? I read somewhere that there should be a default validation bean factory available as I am using Micronaut v1.1.0.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10834500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cnZsXoS6Yfc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2hfaIZf8-luF1ef6fBxMmDw1vSg/mo/photo.jpg?sz=128", "display_name": "acinom_", "link": "https://stackoverflow.com/users/10834500/acinom"}, "edited": false, "score": 0, "creation_date": 1556868475, "post_id": 55918608, "comment_id": 98581019, "body": "Thank you very much it works. But i have another question. How to display just data(List&lt;DataLogin&gt; ?"}, {"owner": {"reputation": 1649, "user_id": 8370559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEKe9.jpg?s=128&g=1", "display_name": "ikerfah", "link": "https://stackoverflow.com/users/8370559/ikerfah"}, "reply_to_user": {"reputation": 13, "user_id": 10834500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cnZsXoS6Yfc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2hfaIZf8-luF1ef6fBxMmDw1vSg/mo/photo.jpg?sz=128", "display_name": "acinom_", "link": "https://stackoverflow.com/users/10834500/acinom"}, "edited": false, "score": 0, "creation_date": 1556872805, "post_id": 55918608, "comment_id": 98583051, "body": "This should be from your API first, you are pushing objects into data array , and then putting this data array inside another data object, you have to change your outer data field to array and then push objects directly inside it (object : employeeId,fullname,...)"}, {"owner": {"reputation": 13, "user_id": 10834500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cnZsXoS6Yfc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2hfaIZf8-luF1ef6fBxMmDw1vSg/mo/photo.jpg?sz=128", "display_name": "acinom_", "link": "https://stackoverflow.com/users/10834500/acinom"}, "edited": false, "score": 0, "creation_date": 1557112906, "post_id": 55918608, "comment_id": 98643597, "body": "This is output when im Log.d Data = DataLogin(data=Data(data=[DataX(branchId=999, employeeId=david999  , fullName=MUHAMMAD DAVID, isActive=true, loginConfins=david999    )], totalRecord=1), header=Header(errors=[])). How to show just this data DataX(branchId=999, employeeId=david999  , fullName=MUHAMMAD DAVID, isActive=true, loginConfins=david999    ) ?"}], "tags": [], "owner": {"reputation": 1649, "user_id": 8370559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEKe9.jpg?s=128&g=1", "display_name": "ikerfah", "link": "https://stackoverflow.com/users/8370559/ikerfah"}, "is_accepted": true, "score": 4, "last_activity_date": 1556618765, "creation_date": 1556618765, "answer_id": 55918608, "question_id": 55918381, "link": "https://stackoverflow.com/questions/55918381/retrofit-respone-null-in-data-class/55918608#55918608", "title": "Retrofit respone null in Data Class", "body": "<p>You have an issue with your schema , Your DataLogin class is different of your postman schema , Retrofit is waiting for : fullName, isActive ...., and the response is : header , data .. , you have to create class that contains header as variable of type <code>Header(errors:List&lt;AnotherClass&gt;)</code>, data as variable of type <code>Data(data(List&lt;DataLogin&gt;),totalRecord:Int)</code>, i would suggest if you use helper website like <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">JSON to Class</a> , parse your postman response there , and he will give you your correct response class but it's will be in java , you have to rewrite the code yourself of just copy paste in android studio and he will convert the code to Kotlin for you. (in the web site , check Source type: JSON)</p>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "is_accepted": false, "score": 0, "last_activity_date": 1556618976, "creation_date": 1556618976, "answer_id": 55918667, "question_id": 55918381, "link": "https://stackoverflow.com/questions/55918381/retrofit-respone-null-in-data-class/55918667#55918667", "title": "Retrofit respone null in Data Class", "body": "<p>You have to match the json structure with your data classes if you do not provide a custom adapter to Gson. So if you want to have a result, maybe something like this will work:</p>\n\n<pre><code>data class Response(\n    @SerializedName(\"headers\") val headers: List&lt;Any&gt;,\n    @SerializedName(\"data\") val data: Data\n)\n\ndata class Data(\n    @SerializedName(\"data\") val data: List&lt;DataLogin&gt;,\n    @SerializedName(\"totalRecord\") val totalRecord: Int\n)\n\ndata class DataLogin (\n    @SerializedName(\"employeeId\") val employeeId : String,\n    @SerializedName(\"fullName\") val fullName : String,\n    @SerializedName(\"loginConfins\") val loginConfins : String,\n    @SerializedName(\"branchId\") val branchId : String,\n    @SerializedName(\"isActive\") val isActive : String\n)\n</code></pre>\n\n<p>You need to return a Response object from your retrofit call. </p>\n\n<p>Also a few tips about kotlin, Gson works well for Java, but it has some issues with kotlin (about null safety). I use Moshi when the project language is kotlin and it works well with it. </p>\n\n<p>Try to avoid using <code>!!</code> in kotlin because it will cause RuntimeException. There are other ways of checking null and to protect your code from RuntimeExceptions.</p>\n"}], "owner": {"reputation": 13, "user_id": 10834500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cnZsXoS6Yfc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2hfaIZf8-luF1ef6fBxMmDw1vSg/mo/photo.jpg?sz=128", "display_name": "acinom_", "link": "https://stackoverflow.com/users/10834500/acinom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1897, "favorite_count": 0, "accepted_answer_id": 55918608, "answer_count": 2, "score": 1, "last_activity_date": 1556627964, "creation_date": 1556618058, "last_edit_date": 1556627964, "question_id": 55918381, "link": "https://stackoverflow.com/questions/55918381/retrofit-respone-null-in-data-class", "title": "Retrofit respone null in Data Class", "body": "<p>I'm a newbie about Kotlin. My first project is to consume a rest api. I already made that using retrofit. But I have a problem when I'm logging the response, my data class is null. I don't know where is the error.</p>\n\n<p><strong>My Rerofit Client</strong></p>\n\n<pre><code>object RetrofitClient {\n    var retrofit: Retrofit? = null\n\n    fun getClient(baseUrl: String): Retrofit? {\n        if (retrofit == null) {\n            //TODO While release in Google Play Change the Level to NONE\n            val interceptor = HttpLoggingInterceptor()\n            interceptor.level = HttpLoggingInterceptor.Level.BODY\n            val client = OkHttpClient.Builder()\n                .addInterceptor(interceptor)\n                .connectTimeout(100, TimeUnit.SECONDS)\n                .readTimeout(100, TimeUnit.SECONDS)\n                .build()\n\n            retrofit = Retrofit.Builder()\n                .client(client)\n                .baseUrl(baseUrl)\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n        }\n\n        return retrofit\n\n    }\n}\n</code></pre>\n\n<p><strong>My Interface</strong></p>\n\n<pre><code>public interface ApiLoginService {\n\n    @POST(\"UserManagementCoreAPI/api/v1/users\")\n    fun loginService(@Body request: RequestBody): Call&lt;DataLogin&gt;\n}\n\n\nobject ApiUtils {\n\n    val BASE_URL = \"------\"\n\n    val apiLoginService: ApiLoginService\n        get() = RetrofitClient.getClient(BASE_URL)!!.create(ApiLoginService::class.java)\n\n}\n</code></pre>\n\n<p><strong>My class data</strong></p>\n\n<pre><code>data class DataLogin (\n    @SerializedName(\"employeeId\") val employeeId : String,\n    @SerializedName(\"fullName\") val fullName : String,\n    @SerializedName(\"loginConfins\") val loginConfins : String,\n    @SerializedName(\"branchId\") val branchId : String,\n    @SerializedName(\"isActive\") val isActive : String\n)\n</code></pre>\n\n<p><strong>Main Activity</strong></p>\n\n<pre><code>mApiLoginService!!.loginService(requestBody).enqueue(object : Callback&lt;DataLogin&gt;{\n                    override fun onResponse(call: Call&lt;DataLogin&gt;, response: Response&lt;DataLogin&gt;) {\n                        if(response.isSuccessful()){\n                            if(response.body().toString() == null){\n                                Log.d(tag,\"Null\")\n                            }else{\n                                Log.d(tag,\"Logging In  \" + response.body()!!)\n                                progressBar.visibility = View.GONE\n                                btn_submit.visibility = View.VISIBLE\n                                startActivity(Intent(this@MainActivity, HomeActivity::class.java))\n                            }\n                        }else{\n                            Toast.makeText(applicationContext, \"Invalid username or password\", Toast.LENGTH_LONG).show()\n                            Log.d(tag,\"Error  \" + response.errorBody().toString())\n                            progressBar.visibility = View.GONE\n                            btn_submit.visibility = View.VISIBLE\n                        }\n                    }\n                    override fun onFailure(call: Call&lt;DataLogin&gt;, t: Throwable) {\n                        progressBar.visibility = View.GONE\n                        btn_submit.visibility = View.VISIBLE\n                    }\n                })\n</code></pre>\n\n<p><strong>My Respone Log</strong></p>\n\n<pre><code>message: Logging In  DataLogin(employeeId=null, fullName=null, loginConfins=null, branchId=null, isActive=null)\n</code></pre>\n\n<p>I don't know where is the error and why my data is null. If the response succeeds is still gives me null.</p>\n\n<p>This is a postman example\n<img src=\"https://i.stack.imgur.com/0VHMw.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["kotlin", "butterknife"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556618644, "post_id": 55918360, "comment_id": 98491072, "body": "You are most likely missing <code>apply plugin: &#39;kotlin-kapt&#39;</code>."}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556619030, "post_id": 55918360, "comment_id": 98491282, "body": "No. This is clearly a butterknife issue. I removed it. Butterknife is useless in Kotlin."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556621432, "post_id": 55918360, "comment_id": 98492512, "body": "What was your ButterKnife version?"}], "answers": [{"comments": [{"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1556618990, "post_id": 55918561, "comment_id": 98491261, "body": "I did then just before you posted your answer and that solved the problem. To be honest, I took that code from a sample app. This just confirms my opinion that developers have become so dependent on ridiculous third party libraries like Butterknife that only end up costing hours to fix problems."}], "tags": [], "owner": {"reputation": 1109, "user_id": 5856547, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/77b5de76656b796f124e2a9193e030e0?s=128&d=identicon&r=PG&f=1", "display_name": "elbert rivas", "link": "https://stackoverflow.com/users/5856547/elbert-rivas"}, "is_accepted": true, "score": 2, "last_activity_date": 1556618991, "last_edit_date": 1556618991, "creation_date": 1556618617, "answer_id": 55918561, "question_id": 55918360, "link": "https://stackoverflow.com/questions/55918360/layout-view-is-not-initialized-with-butterknife/55918561#55918561", "title": "Layout view is not initialized with Butterknife", "body": "<p>I'm not really sure what went wrong but to fix the issue, you can consider using kotlin built in synthetic binding and just get rid of butterknife. It's more efficient. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/42453010/android-kotlin-with-butterknife#45592221\">explained here</a> </p>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 55918561, "answer_count": 1, "score": 0, "last_activity_date": 1556618991, "creation_date": 1556617971, "question_id": 55918360, "link": "https://stackoverflow.com/questions/55918360/layout-view-is-not-initialized-with-butterknife", "title": "Layout view is not initialized with Butterknife", "body": "<p>In the following code:</p>\n\n<pre><code>class LobbyFragment : Fragment() {\n\n    @Inject\n    lateinit var lobbyFragmentHelloService: LobbyFragmentHelloService\n\n    @BindView(R.id.lobby_fragment_hello)\n    lateinit var lobbyFragmentHelloTextView: TextView\n\n    lateinit var unbinder: Unbinder\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.lobby_fragment, container, false)\n        unbinder = ButterKnife.bind(this, view)\n        return view\n    }\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        sayFragmentHello()\n    }\n\n    override fun onAttach(context: Context?) {\n        AndroidInjection.inject(this)\n        super.onAttach(context)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        unbinder.unbind()\n    }\n\n    private fun sayFragmentHello() {\n        lobbyFragmentHelloTextView.text = lobbyFragmentHelloService.sayHello()\n    }\n}\n</code></pre>\n\n<p>lobbyFragmentHelloTextView is never initialized. Butterknife is used to initialize this variable. Why is not initialized by the time sayFramentHello is called?</p>\n"}, {"tags": ["android", "kotlin", "collections"], "answers": [{"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 3, "last_activity_date": 1556620233, "creation_date": 1556620233, "answer_id": 55919019, "question_id": 55918288, "link": "https://stackoverflow.com/questions/55918288/to-check-the-element-of-the-collection/55919019#55919019", "title": "To check the element of the collection", "body": "<blockquote>\n  <p>I want to check if my collection already has an item with the same name(connection.name)</p>\n</blockquote>\n\n<p>You can do that with <code>find()</code> (to get the result) or <code>any()</code> (to see if a criterion holds true for at least one element):</p>\n\n<pre><code>val found: ConnectionViewModel? = list.find { it.name == expectedName }\n\nval nameExists: Boolean = list.any { it.name == expectedName }\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>and if there is, then call a method that will do something, for example, change the field: connection.name</p>\n</blockquote>\n\n<p>This should be straightforward given the result of <code>found</code> or <code>nameExists</code> from above.</p>\n\n<pre><code>list.map {\n    if (nameExists)\n        it.copy(name = differentName)\n    else\n        it\n}\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556620233, "creation_date": 1556617768, "last_edit_date": 1556618054, "question_id": 55918288, "link": "https://stackoverflow.com/questions/55918288/to-check-the-element-of-the-collection", "title": "To check the element of the collection", "body": "<p>I want to check if my collection already has an item with the same name(<code>connection.name</code>) and if there is, then call a method that will do something, for example, change the field: <code>connection.name</code></p>\n\n<p>At the moment I get the collection as follows:</p>\n\n<pre><code>override fun getListItems(context: Context): List&lt;ConnectionViewModel&gt; {\nreturn connectionsRepository.getAll().map { connection -&gt;\n    ConnectionViewModel(\n            code = connection.code,\n            name = connection.name,\n   }\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "kotlin"], "comments": [{"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 3, "creation_date": 1556615965, "post_id": 55917700, "comment_id": 98489544, "body": "Does your component scan cover  and register <code>ServiceClass</code>?"}, {"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 1, "creation_date": 1556615996, "post_id": 55917700, "comment_id": 98489565, "body": "&quot;i&#39;ve asked this before&quot; please link to the previous questions, and describe exactly what about the answers that didn&#39;t make sense."}, {"owner": {"reputation": 19610, "user_id": 5050667, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3WJfP.jpg?s=128&g=1", "display_name": "Yassin Hajaj", "link": "https://stackoverflow.com/users/5050667/yassin-hajaj"}, "edited": false, "score": 0, "creation_date": 1556616032, "post_id": 55917700, "comment_id": 98489582, "body": "Why not use constructor DI ?"}, {"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "reply_to_user": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1556621770, "post_id": 55917700, "comment_id": 98492670, "body": "@AndyTurner there is no answer to link."}, {"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "reply_to_user": {"reputation": 19610, "user_id": 5050667, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3WJfP.jpg?s=128&g=1", "display_name": "Yassin Hajaj", "link": "https://stackoverflow.com/users/5050667/yassin-hajaj"}, "edited": false, "score": 0, "creation_date": 1556621973, "post_id": 55917700, "comment_id": 98492775, "body": "@YassinHajaj i dont know, there is no bean type of ServiceClass is what intelliJ keeps telling me, thats the question"}, {"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1556636677, "post_id": 55917700, "comment_id": 98501195, "body": "@Clomez which link? You say that you never had an answer <i>that made sense</i>. If you don&#39;t tell us what didn&#39;t make sense, you might get another answer in the same terms."}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "edited": false, "score": 0, "creation_date": 1556621917, "post_id": 55917990, "comment_id": 98492751, "body": "yeah, thats nice. but the problem is that there is no bean type of ServiceClass available, i can inject repository however i want, it seems."}], "tags": [], "owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "is_accepted": false, "score": 4, "last_activity_date": 1556623404, "last_edit_date": 1556623404, "creation_date": 1556616924, "answer_id": 55917990, "question_id": 55917700, "link": "https://stackoverflow.com/questions/55917700/autowired-in-kotlin/55917990#55917990", "title": "Autowired in Kotlin", "body": "<p>In kotlin (and in Java I think) you can inject your dependencies in the constructor like this: </p>\n\n<pre><code>import org.springframework.stereotype.Repository\nimport org.springframework.stereotype.Service\n\n@Service\nclass ServiceClass constructor(\n    private val repository: AddressRepository\n) {\n    // Do stuff here\n}\n\n@Repository\nclass AddressRepository\n</code></pre>\n\n<p>this is the same that:  </p>\n\n<pre><code>@Service\nclass ServiceClass {\n    @Autowired\n    private lateinit var repository: AddressRepository\n\n    // Do stuff here\n}\n\n@Repository\nclass AddressRepository\n</code></pre>\n\n<p>but it allow you to make unit tests without the need of a Spring Context (@SpringBootTest).</p>\n\n<p>Then you can inject your service in another the same way</p>\n\n<pre><code>@Service\nclass OtherService constructor(\n    private val service: ServiceClass\n) {\n    // Other stuff here\n}\n</code></pre>\n\n<p>There's no bean problem with this code for me. (IntelliJ 2019.1.1)</p>\n"}], "owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1933, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556623404, "creation_date": 1556615877, "last_edit_date": 1556615974, "question_id": 55917700, "link": "https://stackoverflow.com/questions/55917700/autowired-in-kotlin", "title": "Autowired in Kotlin", "body": "<p>i've asked this before but never had any answer that made sense.</p>\n\n<p>if ServiceClass is annotated with <code>@Service</code> in java spring i can do</p>\n\n<pre><code>@Autowired\nprivate ServiceClass serviceClass;\n</code></pre>\n\n<p>or better yet</p>\n\n<pre><code>private final ServiceClass serviceClass;\n\npublic userManagementClass(ServiceClass serviceClass) {\n        this.serviceClass = serviceClass;\n    }\n</code></pre>\n\n<p>Then i changed to kotlin and..</p>\n\n<pre><code>@Autowired\nprivate lateinit var addressRepository: AddressRepository\n</code></pre>\n\n<p>where AddressRepository is annotated with <code>@Repository</code> is okey but now the first one, ServiceClass with <code>@Service</code></p>\n\n<pre><code>@Autowired\nprivate lateinit var serviceClass: ServiceClass\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Autowired constructor(\n      private val serviceClass: ServiceClass\n)\n</code></pre>\n\n<p>both give error <code>No beans of type found</code>\nDo i now need a constructor for my services in kotlin or what? </p>\n\n<p>I've read many articles titled like \"understanding kotlin lateinit\" and what not, but i think im still missing some core ideas since none of them make any goddamn sense... Kotlin documentation is okey, but only for concepts you already know.. otherwise it also is very confusing.</p>\n\n<p><strong>EDIT</strong> appears that giving ServiceClass a constructor didnt do anything either</p>\n"}, {"tags": ["unit-testing", "kotlin", "sealed-class"], "answers": [{"comments": [{"owner": {"reputation": 3253, "user_id": 1023670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c5e983546a165c1faf67298a5d6f29d8?s=128&d=identicon&r=PG", "display_name": "Kitesurfer", "link": "https://stackoverflow.com/users/1023670/kitesurfer"}, "edited": false, "score": 0, "creation_date": 1556877504, "post_id": 55917793, "comment_id": 98585693, "body": "Took my a while to come back here. using assertThat with instanceOf or &#39;is&#39; makes no difference and may be a matter of choice."}], "tags": [], "owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "is_accepted": true, "score": 5, "last_activity_date": 1556616238, "creation_date": 1556616238, "answer_id": 55917793, "question_id": 55917420, "link": "https://stackoverflow.com/questions/55917420/kotlin-sealed-class-and-type-inference/55917793#55917793", "title": "Kotlin sealed class and type inference", "body": "<p>there is no problem with your code for me.</p>\n\n<pre><code>import org.hamcrest.CoreMatchers.instanceOf\nimport org.junit.Test\n\nimport org.junit.Assert.*\nimport java.io.IOException\n\nclass ExampleUnitTest {\n    @Test\n    fun test1() {\n        val error = Result.Error(IOException(\"message\"))\n        assertTrue(error is Result.Error)\n    }\n\n    @Test\n    fun test2() {\n        val error = Result.Error(IOException(\"message\"))\n        assertThat(error , instanceOf(Result.Error::class.java))\n    }\n\n    sealed class Result&lt;out T : Any&gt; {\n        data class Success&lt;out T : Any&gt;(val data: T) : Result&lt;T&gt;()\n        data class Error(val exception: Exception) : Result&lt;Nothing&gt;()\n    }\n}\n</code></pre>\n\n<p>Also, I'll suggest you to use the keyword <code>is</code> to check if your class is an instance of something in kotlin (like in test1)</p>\n"}, {"tags": [], "owner": {"reputation": 3253, "user_id": 1023670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c5e983546a165c1faf67298a5d6f29d8?s=128&d=identicon&r=PG", "display_name": "Kitesurfer", "link": "https://stackoverflow.com/users/1023670/kitesurfer"}, "is_accepted": false, "score": 0, "last_activity_date": 1556877743, "creation_date": 1556877743, "answer_id": 55967544, "question_id": 55917420, "link": "https://stackoverflow.com/questions/55917420/kotlin-sealed-class-and-type-inference/55967544#55967544", "title": "Kotlin sealed class and type inference", "body": "<p>Looks like i was looking in the false API. As im mostly using assertj.\nBelow code is clean and fluent to read</p>\n\n<pre><code>assertThat(result).isInstanceOf(Result.Error::class.java)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 444252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jT9iB.jpg?s=128&g=1", "display_name": "HariKrishnan", "link": "https://stackoverflow.com/users/444252/harikrishnan"}, "is_accepted": false, "score": 0, "last_activity_date": 1581856826, "last_edit_date": 1581856826, "creation_date": 1581786460, "answer_id": 60241099, "question_id": 55917420, "link": "https://stackoverflow.com/questions/55917420/kotlin-sealed-class-and-type-inference/60241099#60241099", "title": "Kotlin sealed class and type inference", "body": "<p>To avoid ::class I prefer this.</p>\n\n<p><code>assertThat(result is Result.Error).isTrue()</code></p>\n"}], "owner": {"reputation": 3253, "user_id": 1023670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c5e983546a165c1faf67298a5d6f29d8?s=128&d=identicon&r=PG", "display_name": "Kitesurfer", "link": "https://stackoverflow.com/users/1023670/kitesurfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 0, "accepted_answer_id": 55917793, "answer_count": 3, "score": 0, "last_activity_date": 1581856826, "creation_date": 1556614945, "question_id": 55917420, "link": "https://stackoverflow.com/questions/55917420/kotlin-sealed-class-and-type-inference", "title": "Kotlin sealed class and type inference", "body": "<p>im using a sealed class to report back success or error to client code:</p>\n\n<pre><code>sealed class Result&lt;out T : Any&gt; {\n    data class Success&lt;out T : Any&gt;(val data: T) : Result&lt;T&gt;()\n    data class Error(val exception: Exception) : Result&lt;Nothing&gt;()\n}\n</code></pre>\n\n<p>But im stuck getting even the simplest unit test to compile using it:</p>\n\n<pre><code>    val error = Result.Error(IOException(\"message\"))\n    assertThat(error, instanceOf(Result.Error::class.java))\n</code></pre>\n\n<p>I get the message : Type Inference failed. Not enough information to infer parameter T in fun  instanceOf(type : Class&lt;*>) : Matcher!</p>\n\n<p>Looks like im missing something important in Kotlin.</p>\n\n<p>Thanks for helping me out!</p>\n"}, {"tags": ["java", "kotlin", "interop"], "comments": [{"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 1, "creation_date": 1556615009, "post_id": 55917371, "comment_id": 98489019, "body": "Huh. Works in Java, though that doesn&#39;t help you. :-)"}, {"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 2, "creation_date": 1556615014, "post_id": 55917371, "comment_id": 98489025, "body": "Just out of curiosity, why would you do that? I see no real use case where this would be appropriate"}, {"owner": {"reputation": 83, "user_id": 2187967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f5b3e92661fb0b1d0e69d6f7aa82d0?s=128&d=identicon&r=PG", "display_name": "keccs", "link": "https://stackoverflow.com/users/2187967/keccs"}, "edited": false, "score": 0, "creation_date": 1556620803, "post_id": 55917371, "comment_id": 98492208, "body": "My database schemas are stored in classes named Schema_V1 to Schema_V42, with static members that store information about the tables/columns. There is also a derived Schema_Latest class, that extends the latest schema. This Schema_Latest is basically just a type alias for the latest schema, which is the one used everywhere, except in the code that does database schema upgrades.  I&#39;m trying to reference Schema_Latest.MyTable.SomeColumn in a query, in kotlin code."}], "answers": [{"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 3, "last_activity_date": 1556619315, "last_edit_date": 1556619315, "creation_date": 1556619002, "answer_id": 55918675, "question_id": 55917371, "link": "https://stackoverflow.com/questions/55917371/accessing-static-inner-class-defined-in-java-through-derived-class/55918675#55918675", "title": "Accessing static inner class defined in Java, through derived class", "body": "<p>In Kotlin, nested types and companion objects are not automatically inherited.</p>\n\n<p>This behavior is not specific to Java, you can reproduce the same behavior in Kotlin alone:</p>\n\n<pre><code>open class Base {\n    class Nested\n}\n\nclass Derived : Base()\n\nval base = Base.Nested::class        // OK\nval derived = Derived.Nested::class  // Error: 'Nested' unresolved\n</code></pre>\n\n<p>As such, you explicitly have to qualify the nested class using the base class.</p>\n\n<p>This behavior was deliberately made more strict in Kotlin, to avoid some of the confusion in Java related to accessing static members/classes via derived types. You also see that a lot of IDEs warn you in Java when you use a derived class name to refer to static symbols in the base class.</p>\n\n<p>Regarding terminology, Kotlin has a clear definition of <em>inner classes</em> (namely those annotated with the <code>inner</code> keyword). Not all nested classes are inner classes. See also <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/47296133/5427663\">Kotlin - accessing companion object members in derived types</a></li>\n<li><a href=\"https://stackoverflow.com/q/39303180/5427663\">Kotlin: How can I create a &quot;static&quot; inheritable function?</a></li>\n</ul>\n"}], "owner": {"reputation": 83, "user_id": 2187967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f5b3e92661fb0b1d0e69d6f7aa82d0?s=128&d=identicon&r=PG", "display_name": "keccs", "link": "https://stackoverflow.com/users/2187967/keccs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 55918675, "answer_count": 1, "score": 6, "last_activity_date": 1556619315, "creation_date": 1556614788, "question_id": 55917371, "link": "https://stackoverflow.com/questions/55917371/accessing-static-inner-class-defined-in-java-through-derived-class", "title": "Accessing static inner class defined in Java, through derived class", "body": "<p>I've got some classes defined in java, similar to the code below.\nI'm trying to access <code>SomeValue</code> through a derived java class, which is allowed in java, but not in kotlin.</p>\n\n<p>Is there a way to access the field through the derived class?</p>\n\n<pre><code>// java file\n// -------------------------------------------------\n\nclass MyBaseClass {\n    public static final class MyInnerClass\n    {\n        public static int SomeValue = 42;\n    }\n}\n\nfinal class MyDerivedClass extends MyBaseClass {\n}\n\n// kotlin file\n// -------------------------------------------------\n\nval baseAccess = MyBaseClass.MyInnerClass.SomeValue;\n// this compiles\n\nval derivedAccess = MyDerivedClass.MyInnerClass.SomeValue;\n//                                 ^ compile error: Unresolved reference: MyInnerClass\n\n</code></pre>\n"}, {"tags": ["spring", "groovy", "kotlin", "spock"], "comments": [{"owner": {"reputation": 9495, "user_id": 2145769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CIiA2.png?s=128&g=1", "display_name": "Leonard Br&#252;nings", "link": "https://stackoverflow.com/users/2145769/leonard-br%c3%bcnings"}, "edited": false, "score": 2, "creation_date": 1556649639, "post_id": 55916321, "comment_id": 98507520, "body": "See <a href=\"http://spockframework.org/spock/docs/1.3/all_in_one.html#_combining_mocking_and_stubbing\" rel=\"nofollow noreferrer\">spockframework.org/spock/docs/1.3/&hellip;</a>"}, {"owner": {"reputation": 169, "user_id": 1241663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd028459e476f0f99b7bfb52ef3d8b8?s=128&d=identicon&r=PG", "display_name": "user1241663", "link": "https://stackoverflow.com/users/1241663/user1241663"}, "reply_to_user": {"reputation": 9495, "user_id": 2145769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CIiA2.png?s=128&g=1", "display_name": "Leonard Br&#252;nings", "link": "https://stackoverflow.com/users/2145769/leonard-br%c3%bcnings"}, "edited": false, "score": 0, "creation_date": 1610200668, "post_id": 55916321, "comment_id": 116059955, "body": "@LeonardBr&#252;nings It would help spot the information if there was a comment at the top of that example like <code># This will not work</code>, the &quot;not&quot; in the sentence above is easy to miss... end of paragraph... visually hard to spot. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 2578324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208da47bfd3655ff5a2321479224ab17?s=128&d=identicon&r=PG", "display_name": "jndietz", "link": "https://stackoverflow.com/users/2578324/jndietz"}, "edited": false, "score": 0, "creation_date": 1615305073, "post_id": 55918879, "comment_id": 117646930, "body": "This does not work well with Spring Webflux.  I can tell my mocked class to return a <code>Mono</code>, but it always returns <code>null</code>:  <code>1 * someService.getData(id) &gt;&gt; Mono.just(new Response())</code> will always return null if used in a <code>then</code> block.  Using Mockito seemed to work better :("}], "tags": [], "owner": {"reputation": 3541, "user_id": 9709361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lSWOW.jpg?s=128&g=1", "display_name": "cgrim", "link": "https://stackoverflow.com/users/9709361/cgrim"}, "is_accepted": false, "score": 4, "last_activity_date": 1556619746, "creation_date": 1556619746, "answer_id": 55918879, "question_id": 55916321, "link": "https://stackoverflow.com/questions/55916321/mocked-method-returns-null-when-invocations-are-checked-as-well/55918879#55918879", "title": "Mocked method returns null when invocations are checked as well", "body": "<p>There is a problem in combining of mocking with invocation count checking, because mock is not called then.</p>\n\n<p>You can rewrite your combined test in this way to have it working:</p>\n\n<pre><code>def \"combined check\"() {\n    given:\n    def test = 'my test string'\n\n    when:\n    def demo = demoService.demo(test)\n\n    then:\n    1 * downStream.something(test) &gt;&gt; 'xxx'\n    demo == 'xxx'\n}\n</code></pre>\n"}], "owner": {"reputation": 692, "user_id": 2254506, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3aebbb53bd69c60b3933a3dac4ed4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2254506/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1556619746, "creation_date": 1556611092, "question_id": 55916321, "link": "https://stackoverflow.com/questions/55916321/mocked-method-returns-null-when-invocations-are-checked-as-well", "title": "Mocked method returns null when invocations are checked as well", "body": "<p>I'm not sure if I'm misusing interaction based testing or if I'm doing something conceptionally wrong. I'm working on a Spring Boot Application (Kotlin) and my tests are using Spock/Groovy.</p>\n\n<p>I have a class under test which invokes another service to query information. The class under test is supposed to cache results. However, I'm not able to mock a method with a return value AND check the number of invocations, because the mocked method always returns null as soon as I add the check for invocation. </p>\n\n<p>I created an isolated example, which demonstrates the issue.</p>\n\n<p>This is the class under test:</p>\n\n<pre><code>@Service\nclass DemoService(private val downstreamService: DownstreamService) {\n    fun demo(id: String): String {\n        val something = downstreamService.something(id)\n        return something\n    }\n}\n</code></pre>\n\n<p>which is using this service:</p>\n\n<pre><code>@Service\nclass DownstreamService {\n    fun something(id: String): String {\n        return id\n    }\n}\n</code></pre>\n\n<p>and this is how my tests look like: </p>\n\n<pre><code>class DemoServiceTest extends Specification {\n    def downStream = Mock(DownstreamService)\n    def demoService = new DemoService(downStream)\n\n    def \"value check\"() {\n        given:\n        def test = \"my test string\"\n        downStream.something(test) &gt;&gt; \"xxx\"\n\n        when:\n        def actual = demoService.demo(test)\n\n        then:\n        actual == \"xxx\" // works\n    }   \n\n    def \"invocation check\"() {\n        given:\n        def test = \"my test string\"\n        downStream.something(test) &gt;&gt; \"xxx\"\n\n        when:\n        demoService.demo(test)\n\n        then:\n        1 * downStream.something(test) // works\n    }\n\n    def \"combined check\"() {\n        given:\n        def test = \"my test string\"\n        downStream.something(test) &gt;&gt; \"xxx\"\n\n        when:\n        def demo = demoService.demo(test)\n\n        then:\n        1 * downStream.something(test)\n        demo == \"xxx\" // fails because demo is null\n    }\n\n}\n</code></pre>\n\n<p>The first two tests are working as expected but the last one fails because the return value is always null when I add the check for the invocation.</p>\n"}, {"tags": ["spring-boot", "kotlin", "enums", "cassandra"], "comments": [{"owner": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "edited": false, "score": 0, "creation_date": 1556616380, "post_id": 55915849, "comment_id": 98489772, "body": "I&#39;m not sure about Spring, but you can do following in Java driver: <a href=\"https://docs.datastax.com/en/developer/java-driver/3.6/manual/custom_codecs/extras/#enums\" rel=\"nofollow noreferrer\">docs.datastax.com/en/developer/java-driver/3.6/manual/&hellip;</a>"}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "reply_to_user": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "edited": false, "score": 0, "creation_date": 1556617787, "post_id": 55915849, "comment_id": 98490585, "body": "@AlexOtt Thanks for the hint. However I did not yet get it working. My <code>PersistenceTest.kt</code> now looks like <a href=\"https://gist.github.com/Dobiasd/9bf5c7ea3d52515cad0e97c5fa480d0d\" rel=\"nofollow noreferrer\">this</a>, but the error is still the same."}, {"owner": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "edited": false, "score": 0, "creation_date": 1556620499, "post_id": 55915849, "comment_id": 98492063, "body": "Unfortunately I can&#39;t say - it looks like a problem inside Spring... Do you really need to use Spring, and not use Object Mapper from Java driver?"}, {"owner": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "edited": false, "score": 0, "creation_date": 1556620531, "post_id": 55915849, "comment_id": 98492079, "body": "also, things like, <code>findAll</code> are very bad for Cassandra, and you&#39;ll start to get problems as soon as your data grow enough..."}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "reply_to_user": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "edited": false, "score": 0, "creation_date": 1556624766, "post_id": 55915849, "comment_id": 98494188, "body": "Thanks. Yes, I&#39;d very much like to use Spring Boot for consistency with other microservices of our fleet. And yes, I know about <code>findAll</code>. I only use it for the tests in this minimal example."}, {"owner": {"reputation": 303, "user_id": 2086033, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b17a0b715c09bb2cd11e4abc02dd1663?s=128&d=identicon&r=PG", "display_name": "ankit", "link": "https://stackoverflow.com/users/2086033/ankit"}, "edited": false, "score": 0, "creation_date": 1563341042, "post_id": 55915849, "comment_id": 100661957, "body": "would it be fair to say there&#39;s a performance benefit to saving it as an ordinal?"}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1563389529, "post_id": 55915849, "comment_id": 100687804, "body": "Likely, yes. But in case of doubt, always measure your own use case."}], "answers": [{"comments": [{"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1556952387, "post_id": 55978992, "comment_id": 98609919, "body": "Thanks! Saving to Cassandra works fine after adding <a href=\"https://gist.github.com/Dobiasd/371446dbc71aa233815442b413965901\" rel=\"nofollow noreferrer\">CassandraConfig</a>. However now the load part (<code>val things = thingRepository.findAll()</code>) fails with <code>java.lang.IllegalArgumentException: No enum constant enumtest.SomeEnum.0</code>. I tried <a href=\"https://gist.github.com/Dobiasd/83630aa1ff47b2271effa607f5f0fa26\" rel=\"nofollow noreferrer\">adding</a> the needed <code>@ReadingConverter</code>, but to no avail. Any further ideas?"}, {"owner": {"reputation": 263, "user_id": 11411335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-36Ds5A1Q6Wg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4LIm6pEFx4Aw1KPy1Nh16ShYV5w/mo/photo.jpg?sz=128", "display_name": "chas spenlau", "link": "https://stackoverflow.com/users/11411335/chas-spenlau"}, "reply_to_user": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1556986458, "post_id": 55978992, "comment_id": 98618086, "body": "You were very close! But you forgot to register the read converter in the CassandraCustomConversions. Although....when i did this i still had an error, and fixed it by slightly changing the read and write converters as so. See edit above."}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 1, "creation_date": 1556992879, "post_id": 55978992, "comment_id": 98619952, "body": "Thanks again. Actually I once had the <code>EnumReadConverter</code> also registered, just not in the version I pasted into the gist. With the registration I get <code>com.datastax.driver.core.exceptions.CodecNotFoundException: Codec not found for requested operation: [ANY &lt;-&gt; enumtest.Something]</code>. Your new version, the once with <code>INSTANCE; ...</code> instead of <code>INSTANCE { ...</code>, however works perfectly."}, {"owner": {"reputation": 263, "user_id": 11411335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-36Ds5A1Q6Wg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4LIm6pEFx4Aw1KPy1Nh16ShYV5w/mo/photo.jpg?sz=128", "display_name": "chas spenlau", "link": "https://stackoverflow.com/users/11411335/chas-spenlau"}, "reply_to_user": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1556993187, "post_id": 55978992, "comment_id": 98620025, "body": "I had the same error and when I looked a previous examples where I had done this I noticed that was the only difference. Glad it worked!"}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1557072651, "post_id": 55978992, "comment_id": 98635417, "body": "Small remark for future readers: In case one does want to persist as <code>tinyint</code> instead of <code>int</code> in Cassandra, the <code>@ReadingConverter</code> needs to be <code>enum class EnumReadConverter : Converter&lt;Byte, MyEnum&gt;</code> instead of <code>enum class EnumReadConverter : Converter&lt;Byte, Enum&lt;MyEnum&gt;&gt;</code>."}], "tags": [], "owner": {"reputation": 263, "user_id": 11411335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-36Ds5A1Q6Wg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4LIm6pEFx4Aw1KPy1Nh16ShYV5w/mo/photo.jpg?sz=128", "display_name": "chas spenlau", "link": "https://stackoverflow.com/users/11411335/chas-spenlau"}, "is_accepted": true, "score": 2, "last_activity_date": 1556986308, "last_edit_date": 1556986308, "creation_date": 1556937109, "answer_id": 55978992, "question_id": 55915849, "link": "https://stackoverflow.com/questions/55915849/how-to-persist-enums-as-ordinals-with-spring-boot-and-cassandra/55978992#55978992", "title": "How to persist enums as ordinals with Spring Boot and Cassandra?", "body": "<p>I've been trying to get this working for quite awhile and it seems I finally got it!</p>\n\n<p>I was running into the same issue you were with the codec...I have no idea why that's not working. According to their documentation you were doing it exactly right. </p>\n\n<p>So I implemented my own Cassandra Write Converter. See below</p>\n\n<pre><code>@Configuration\nclass CassandraConfig(val cluster: Cluster){\n\n    @Bean\n    fun setCustomCassandraConversions() = CassandraCustomConversions(listOf(EnumWriteConverter.INSTANCE, EnumReadConverter.INSTANCE))\n\n    @WritingConverter\n    enum class EnumWriteConverter : Converter&lt;Enum&lt;MyEnum&gt;, Int&gt; {\n        INSTANCE;\n        override fun convert(source: Enum&lt;MyEnum&gt;) = source.ordinal\n    }\n     @ReadingConverter\n    enum class EnumReadConverter : Converter&lt;Int, Enum&lt;MyEnum&gt;&gt; {\n        INSTANCE;\n        override fun convert(source: Int) = MyEnum.values()[source]\n    }\n}\n</code></pre>\n\n<p>This should on every write you do to Cassandra convert all enums it sees of type MyEnum to an Int using the overridden converter. This opens you up to the possibility of having multiple of these for different types of Enums where maybe for some reason you would like to write other custom values from them instead of always converting all enums. </p>\n\n<p>Hope this works!</p>\n\n<p><strong><em>EDIT</em></strong>\nNote the change in removing { } for INSTANCE on each converter, and registering the ReadingConverter with the CassandraCustomConversions</p>\n"}, {"tags": [], "owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1558620936, "creation_date": 1558620936, "answer_id": 56277223, "question_id": 55915849, "link": "https://stackoverflow.com/questions/55915849/how-to-persist-enums-as-ordinals-with-spring-boot-and-cassandra/56277223#56277223", "title": "How to persist enums as ordinals with Spring Boot and Cassandra?", "body": "<p>This is <a href=\"https://jira.spring.io/browse/DATACASS-652\" rel=\"nofollow noreferrer\">fixed</a> since Spring Boot version <code>2.1.5</code>.</p>\n\n<p>However, the <code>@CassandraType</code> needs to be placed at the getter explicitly in Kotlin, because otherwise it is not seen at runtime.</p>\n\n<p>In practice this simply means replacing this:</p>\n\n<pre><code>    @CassandraType(type = DataType.Name.INT)\n    var someEnum: SomeEnum\n</code></pre>\n\n<p>with that:</p>\n\n<pre><code>    @get: CassandraType(type = DataType.Name.INT)\n    var someEnum: SomeEnum\n</code></pre>\n"}], "owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 55978992, "answer_count": 2, "score": 2, "last_activity_date": 1558620936, "creation_date": 1556609187, "last_edit_date": 1556971845, "question_id": 55915849, "link": "https://stackoverflow.com/questions/55915849/how-to-persist-enums-as-ordinals-with-spring-boot-and-cassandra", "title": "How to persist enums as ordinals with Spring Boot and Cassandra?", "body": "<p>To the enum field of my entity I have added <code>@CassandraType(type = DataType.Name.INT)</code>. However not the ordinal of the enum, but the string representation instead, is used in the statement sent to Cassandra. Thus I get the following error:</p>\n\n<pre><code>org.springframework.data.cassandra.CassandraInvalidQueryException: SessionCallback; CQL [INSERT INTO thing (thing_id,some_enum) VALUES (1,'Foo');]; Expected 4 or 0 byte int (3); nested exception is com.datastax.driver.core.exceptions.InvalidQueryException: Expected 4 or 0 byte int (3)\n</code></pre>\n\n<p>Below you can find a minimal example, reproducing the problem.</p>\n\n<p>What am I doing wrong?</p>\n\n<h2><code>test/src/main/kotlin/enumtest/Application.kt</code></h2>\n\n<pre><code>package enumtest\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\n\n\n@SpringBootApplication\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;Application&gt;(*args)\n}\n</code></pre>\n\n<h2><code>test/src/main/kotlin/enumtest/SomeEnum.kt</code></h2>\n\n<pre><code>package enumtest\n\n\nenum class SomeEnum {\n    Foo,\n    Bar\n}\n</code></pre>\n\n<h2><code>test/src/main/kotlin/enumtest/Thing.kt</code></h2>\n\n<pre><code>package enumtest\n\nimport com.datastax.driver.core.DataType\nimport org.springframework.data.cassandra.core.cql.PrimaryKeyType\nimport org.springframework.data.cassandra.core.mapping.CassandraType\nimport org.springframework.data.cassandra.core.mapping.Column\nimport org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn\nimport org.springframework.data.cassandra.core.mapping.Table\n\n\n@Table(\"thing\")\n@Suppress(\"unused\")\nclass Thing(\n\n    @PrimaryKeyColumn(name = \"thing_id\", ordinal = 0, type = PrimaryKeyType.PARTITIONED)\n    var thingId: Long,\n\n    @CassandraType(type = DataType.Name.INT)\n    @Column(\"some_enum\")\n    var someEnum: SomeEnum\n\n)\n</code></pre>\n\n<h2><code>test/src/main/kotlin/enumtest/ThingRepository.kt</code></h2>\n\n<pre><code>package enumtest\n\nimport org.springframework.data.cassandra.repository.CassandraRepository\nimport org.springframework.stereotype.Repository\n\n@Repository\ninterface ThingRepository : CassandraRepository&lt;Thing, Long&gt;\n</code></pre>\n\n<h2><code>test/src/main/resources/application.yml</code></h2>\n\n<pre><code>spring:\n  data:\n    cassandra:\n      contact-points: localhost\n      port: 9142\n      keyspace_name: enumtest\n</code></pre>\n\n<h2><code>test/src/test/kotlin/enumtest/PersistenceTest.kt</code></h2>\n\n<pre><code>package enumtest\n\nimport org.cassandraunit.spring.CassandraDataSet\nimport org.cassandraunit.spring.CassandraUnitDependencyInjectionTestExecutionListener\nimport org.cassandraunit.spring.EmbeddedCassandra\nimport org.junit.Assert\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.test.context.TestExecutionListeners\nimport org.springframework.test.context.junit4.SpringRunner\n\n@RunWith(SpringRunner::class)\n@SpringBootTest\n@TestExecutionListeners(\n    listeners = [CassandraUnitDependencyInjectionTestExecutionListener::class],\n    mergeMode = TestExecutionListeners.MergeMode.MERGE_WITH_DEFAULTS\n)\n@CassandraDataSet(value = [\"cql/cassandra_schema.cql\"], keyspace = \"enumtest\")\n@EmbeddedCassandra\nclass PersistenceTest {\n    @Autowired\n    lateinit var thingRepository: ThingRepository\n\n    @Test\n    fun `test save`() {\n        thingRepository.save(Thing(1, SomeEnum.Foo))\n        val things = thingRepository.findAll()\n        Assert.assertEquals(1, things.size)\n        val thing = things[0]\n        Assert.assertEquals(SomeEnum.Foo, thing.someEnum)\n    }\n}\n</code></pre>\n\n<h2><code>test/src/test/resources/cql/cassandra_schema.cql</code></h2>\n\n<pre><code>CREATE KEYSPACE IF NOT exists enumtest\nWITH REPLICATION = {'class':'SimpleStrategy', 'replication_factor':1};\n\nCREATE TABLE IF NOT exists enumtest.thing (\n    thing_id     bigint,\n    some_enum    int,\n    PRIMARY KEY (thing_id)\n);\n</code></pre>\n\n<h2><code>test/build.gradle</code></h2>\n\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.1.4.RELEASE'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.30'\n    id 'org.jetbrains.kotlin.plugin.spring' version '1.3.30'\n}\n\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n    mavenCentral()\n    maven { url \"https://repository.apache.org/snapshots/\" }\n}\n\ndependencies {\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-cassandra'\n    implementation group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib-jdk8'\n    implementation group: 'org.jetbrains.kotlin', name: 'kotlin-reflect'\n\n    testImplementation group: 'org.cassandraunit', name: 'cassandra-unit-spring', version: '3.5.0.1'\n    testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test'\n}\n\ncompileKotlin {\n    kotlinOptions {\n        freeCompilerArgs = ['-Xjsr305=strict']\n        jvmTarget = '1.8'\n    }\n}\n\ncompileTestKotlin {\n    kotlinOptions {\n        freeCompilerArgs = ['-Xjsr305=strict']\n        jvmTarget = '1.8'\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Here is the full version of the minimal example as a download to faciliate experimentation: <a href=\"https://drive.google.com/open?id=1zzIDhbWycaj4WXrze2sAmw8xRPacA8Js\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1zzIDhbWycaj4WXrze2sAmw8xRPacA8Js</a></p>\n\n<p>Edit: Since it seems to be a bug, I just opened <a href=\"https://jira.spring.io/browse/DATACASS-652\" rel=\"nofollow noreferrer\">a Jira issue</a>.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 1, "creation_date": 1556612371, "post_id": 55915815, "comment_id": 98487616, "body": "There should be some information in the logcat regarding that issue"}], "answers": [{"comments": [{"owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "reply_to_user": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556610429, "post_id": 55915882, "comment_id": 98486626, "body": "@Bip901 did you use local database (sqlite) in your project?"}, {"owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556610602, "post_id": 55915882, "comment_id": 98486710, "body": "No, I don&#39;t even know what it is."}], "tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1556609314, "creation_date": 1556609314, "answer_id": 55915882, "question_id": 55915815, "link": "https://stackoverflow.com/questions/55915815/apk-file-works-in-android-emulator-but-wont-install-on-my-device/55915882#55915882", "title": "APK File works in android emulator but won&#39;t install on my device", "body": "<p>If you have install apk before in your device you can not install it again</p>\n\n<p>For fix that </p>\n\n<p><strong>1)</strong> You can uninstall app from device and reinstall from apk.</p>\n\n<p><strong>2)</strong> You can change <strong>versionCode</strong> in build.gradle(app)</p>\n\n<pre><code>defaultConfig {\n    applicationId your_package_name   \n    versionCode 2 //try to increase every time\n    versionName \"1.0.0\" //no need to change but better change it\n    //other codes\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556610307, "post_id": 55915898, "comment_id": 98486558, "body": "Thank you for you answer. I selected &quot;App&quot;, but it, too, has a red X mark on it. I built the APK again with &quot;App&quot; selected, but the problem persists."}], "tags": [], "owner": {"reputation": 2990, "user_id": 6944758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMedv.jpg?s=128&g=1", "display_name": "Firoz Memon", "link": "https://stackoverflow.com/users/6944758/firoz-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1556609383, "creation_date": 1556609383, "answer_id": 55915898, "question_id": 55915815, "link": "https://stackoverflow.com/questions/55915815/apk-file-works-in-android-emulator-but-wont-install-on-my-device/55915898#55915898", "title": "APK File works in android emulator but won&#39;t install on my device", "body": "<ol>\n<li>Select the MainActivity(with X mark)</li>\n<li>A dropdown will appear</li>\n<li>Select your application Module (By Default it is <code>app</code>)</li>\n<li>Run the Project (It should install the apk and run on your device)</li>\n</ol>\n\n<p>Hope it helps!!</p>\n"}, {"comments": [{"owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556610539, "post_id": 55916032, "comment_id": 98486675, "body": "Yes, I have restarted my system after updating the AVD location. Just tried deleting the .iml file and rebuilding, and unfortunately that didn&#39;t work either."}, {"owner": {"reputation": 159, "user_id": 7628524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P3vvZQahoHE/AAAAAAAAAAI/AAAAAAAAAZw/dYFJIjn2rC0/photo.jpg?sz=128", "display_name": "Adnan Yousaf", "link": "https://stackoverflow.com/users/7628524/adnan-yousaf"}, "reply_to_user": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 1, "creation_date": 1556611030, "post_id": 55916032, "comment_id": 98486934, "body": "then you should have to create new sample project and check it will be working or not"}, {"owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556878242, "post_id": 55916032, "comment_id": 98586097, "body": "You should convert this comment into an answer, that&#39;s what I ended up doing"}, {"owner": {"reputation": 159, "user_id": 7628524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P3vvZQahoHE/AAAAAAAAAAI/AAAAAAAAAZw/dYFJIjn2rC0/photo.jpg?sz=128", "display_name": "Adnan Yousaf", "link": "https://stackoverflow.com/users/7628524/adnan-yousaf"}, "reply_to_user": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556878515, "post_id": 55916032, "comment_id": 98586242, "body": "@Bip901 i have added the new answer"}], "tags": [], "owner": {"reputation": 159, "user_id": 7628524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P3vvZQahoHE/AAAAAAAAAAI/AAAAAAAAAZw/dYFJIjn2rC0/photo.jpg?sz=128", "display_name": "Adnan Yousaf", "link": "https://stackoverflow.com/users/7628524/adnan-yousaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1556609933, "creation_date": 1556609933, "answer_id": 55916032, "question_id": 55915815, "link": "https://stackoverflow.com/questions/55915815/apk-file-works-in-android-emulator-but-wont-install-on-my-device/55916032#55916032", "title": "APK File works in android emulator but won&#39;t install on my device", "body": "<p>Try it by delete <code>.iml</code> file from your project directory and rebuild project</p>\n\n<p>Have you restart your system after updating location of <strong>AVD</strong> ?</p>\n"}, {"comments": [{"owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "edited": false, "score": 0, "creation_date": 1556895019, "post_id": 55967742, "comment_id": 98595245, "body": "I created a new project and copied my scripts to there, and it now works properly. Not really a solution since this took a lot of time, but it solved the problem."}], "tags": [], "owner": {"reputation": 159, "user_id": 7628524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P3vvZQahoHE/AAAAAAAAAAI/AAAAAAAAAZw/dYFJIjn2rC0/photo.jpg?sz=128", "display_name": "Adnan Yousaf", "link": "https://stackoverflow.com/users/7628524/adnan-yousaf"}, "is_accepted": true, "score": 2, "last_activity_date": 1556878466, "creation_date": 1556878466, "answer_id": 55967742, "question_id": 55915815, "link": "https://stackoverflow.com/questions/55915815/apk-file-works-in-android-emulator-but-wont-install-on-my-device/55967742#55967742", "title": "APK File works in android emulator but won&#39;t install on my device", "body": "<p><strong>You should have to create new sample project and check it will be working or not</strong> </p>\n"}], "owner": {"reputation": 278, "user_id": 7812339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/87P6m.png?s=128&g=1", "display_name": "Bip901", "link": "https://stackoverflow.com/users/7812339/bip901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 0, "accepted_answer_id": 55967742, "answer_count": 4, "score": 0, "last_activity_date": 1578303744, "creation_date": 1556609020, "last_edit_date": 1556649168, "question_id": 55915815, "link": "https://stackoverflow.com/questions/55915815/apk-file-works-in-android-emulator-but-wont-install-on-my-device", "title": "APK File works in android emulator but won&#39;t install on my device", "body": "<p>I'm new to Android Studio (downloaded it yesterday on my Windows 7 machine) and just finished creating an app using Kotlin. It works properly on the Android Emulator, but when I build a signed APK file and try installing it on my Samsung S7 (Android 8.0.0) phone it shows the mysterious error \"App not installed\".</p>\n\n<p>I noticed there's a red X mark near MainActivity in the top bar, maybe it has something to do with the problem? It doesn't prevent me from building...</p>\n\n<p><img src=\"https://i.imgur.com/GmBhDbj.png\" alt=\"Red X Screenshot\"></p>\n\n<p>Previous builds of the same app installed properly. The only thing I changed before it started breaking is the location of the AVD folder (using <a href=\"https://www.mysysadmintips.com/windows/clients/761-move-android-studio-avd-folder-to-a-new-location\" rel=\"nofollow noreferrer\">this</a>) from the C drive to the D drive, since I ran out of memory there. I deleted all virtual devices, created the environment variable then created the virtual devices again.</p>\n\n<p>Things I already tried without any luck:</p>\n\n<ul>\n<li>The top 5 solutions <a href=\"https://stackoverflow.com/questions/4226132/app-not-installed-error-on-android\">here</a></li>\n<li>Deleting debug.keystore</li>\n<li>Cleaning and rebuilding the project</li>\n<li>Changing the build variant to \"Release\"</li>\n</ul>\n\n<p>EDIT: I created a new project and copied my scripts to there, and it now works properly. Not really a solution since this took a lot of time, but it solved the problem.</p>\n"}, {"tags": ["sql", "kotlin", "null"], "comments": [{"owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "edited": false, "score": 1, "creation_date": 1556625447, "post_id": 55915696, "comment_id": 98494544, "body": "The official kotlin documentation should provide you with the wanted information. Nullability is expained <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">here</a>.  In your <code>map</code>-sample you are using a lambda that maps <code>Address</code> to <code>Unit</code> and has a side effect, resulting in a <code>List&lt;Unit&gt;</code> what clearly is not what you intend. The <a href=\"https://try.kotlinlang.org/#/Kotlin%20Koans/Collections/Introduction/Task.kt\" rel=\"nofollow noreferrer\">Kotlin Koans</a> explain working with collections very well"}, {"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "reply_to_user": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "edited": false, "score": 0, "creation_date": 1556706426, "post_id": 55915696, "comment_id": 98522235, "body": "Thank you @FrankNeblung but im still quite confused. map Address to Unit? Kotlin documentation says &quot;This type corresponds to the void type in Java.&quot; and List&lt;Void&gt; is propably not what i should be thinking here. Can you write an short example about how i should map input string to every objects email filed, in this list? input is type of Email which has email field inside. much thanks to you!"}, {"owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "edited": false, "score": 0, "creation_date": 1556778617, "post_id": 55915696, "comment_id": 98546181, "body": "I&#39;m sorry, but I do not understand what you mean by <i>how i should map input string to every objects email filed</i>. Given that you have <code>val addresses: List&lt;Address&gt;</code> and <code>val newEmail: String</code>, you might want to do one of the following: 1. assign each address a new email: <code>addresses.forEach { it.email = newEmail }</code> 2. collect the addresses&#39; emails <code>val emails: List&lt;String&gt; = addresses.map { it.email }</code>, 3. associate the addresses by its email <code>val map: Map&lt;String, Address&gt; = addresses.associateBy { it.email }</code>. But you should definitely ask a dedicated question for that concern."}], "answers": [{"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 4, "last_activity_date": 1556608792, "creation_date": 1556608792, "answer_id": 55915757, "question_id": 55915696, "link": "https://stackoverflow.com/questions/55915696/kotlin-optional-or-something-similar/55915757#55915757", "title": "Kotlin optional, or something similar", "body": "<p>If SQL does not return anything, that would correspond to 0 found item, <strong>i.e. an empty list</strong>, rather than no list at all. I would also model it accordingly:</p>\n\n<pre><code>@Query(value = \"FROM Address a WHERE a.userId = :userId\")\nfun findAddressByUserId(@Param(\"userId\") userId: String) : List&lt;Address&gt;\n</code></pre>\n\n<p>That will also let you omit the <code>!!</code> when using it.</p>\n\n<p>I don't know the library you're using -- but if it strictly does not allow to have return types non-nullable, then you could write a wrapper function that just calls the other one. Use the <code>?:</code> (Elvis) operator for that case:</p>\n\n<pre><code>@Query(value = \"FROM Address a WHERE a.userId = :userId\")\nprivate fun _findAddressByUserId(@Param(\"userId\") userId: String) : List&lt;Address&gt;?\n\nfun findAddressByUserId(userId: String) : List&lt;Address&gt; =\n    _findAddressByUserId(userId) ?: emptyList()\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 55915757, "answer_count": 1, "score": 1, "last_activity_date": 1556608792, "creation_date": 1556608533, "question_id": 55915696, "link": "https://stackoverflow.com/questions/55915696/kotlin-optional-or-something-similar", "title": "Kotlin optional, or something similar", "body": "<p>i find kotlin intresting, but also i find it very difficult to find any understandable enough documentation about how to <em>properly</em> deal with nulls.</p>\n\n<p>Im a Java dev, so i should be able to pivot to kotlin pretty easily, yet i find myself struggeling with with simple stuff.</p>\n\n<p>following SQL query:</p>\n\n<pre><code> @Query(value = \"FROM Address a WHERE a.userId = :userId\")\n fun findAddressByuserId(@Param(\"userId\") userId: String) : List&lt;Address&gt;?\n</code></pre>\n\n<p>Can i somehow get rid of the ? at the end of <code>List&lt;Address&gt;?</code> ?\nit is possible for SQL to not return anything, so produce null.</p>\n\n<p>and after the query i try to map result but now that takes <code>!!</code> because of nullable list.</p>\n\n<pre><code>customerAddresses!!.map { a -&gt; a.email = email.email }\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["java", "intellij-idea", "kotlin", "annotations"], "answers": [{"tags": [], "owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1557296469, "creation_date": 1557296469, "answer_id": 56034658, "question_id": 55915462, "link": "https://stackoverflow.com/questions/55915462/propertykey-annotation-is-not-working-with-kotlin-but-with-java/56034658#56034658", "title": "@PropertyKey Annotation is not working with Kotlin but with Java", "body": "<p>Thanks for the report, the bug was submitted at <a href=\"https://youtrack.jetbrains.com/issue/KT-31359\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-31359</a>, please <a href=\"https://intellij-support.jetbrains.com/hc/articles/207241135\" rel=\"nofollow noreferrer\">follow it for updates</a>.</p>\n"}], "owner": {"reputation": 340, "user_id": 11373502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a6a596c0dec14509997c012e983c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Mosch", "link": "https://stackoverflow.com/users/11373502/mosch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 56034658, "answer_count": 1, "score": 1, "last_activity_date": 1557296469, "creation_date": 1556607494, "last_edit_date": 1556856441, "question_id": 55915462, "link": "https://stackoverflow.com/questions/55915462/propertykey-annotation-is-not-working-with-kotlin-but-with-java", "title": "@PropertyKey Annotation is not working with Kotlin but with Java", "body": "<p>When i add a new properties file to my project inside resources and name it as for example \"lang1\" than the BUNDLE_NAME is recognized correctly.</p>\n\n<p>But if i add an ResourceBundle containing lang2_de and lang2_en and try to use its base name as BUNDLE_NAME it shows me the following error \"Invalid resource bundle reference 'lang2'.</p>\n\n<p>So i basically have 3 files.</p>\n\n<ol>\n<li>lang1_de.properties</li>\n<li>lang2_de.properties</li>\n<li>lang2_en.properties</li>\n</ol>\n\n<p>lang2 is bundled into an Resource Bundle with \"'base name' = lang2\" </p>\n\n<p>This is working with kotlin:</p>\n\n<pre><code>private const val BUNDLE_NAME = \"lang1\"\n\nfun foo(@PropertyKey(resourceBundle = BUNDLE_NAME) key: String): String {\n    return key\n}\n\n</code></pre>\n\n<p>This is not:</p>\n\n<pre><code>private const val BUNDLE_NAME = \"lang2\"\n\nfun foo(@PropertyKey(resourceBundle = BUNDLE_NAME) key: String): String {\n    return key\n}\n\n</code></pre>\n\n<p>But if i do the same thing with java it is working ...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private static final String BUNDLE_NAME = \"lang2\";\n\npublic static void foo(@PropertyKey(resourceBundle = BUNDLE_NAME) String key) {\n    return key;\n}\n</code></pre>\n\n<p>I am doing this for getting the information about my properties being used inside my code.</p>\n\n<p>The properties are marked correctly inside the property files for both examples.</p>\n\n<p>But for lang2 the strings used inside the code are all shown with inspection error \"String literal 'testprop' doesn't appear to be valid property key ...\"</p>\n\n<p>I also created a issue for that inside the JetBrains/java-annotations:<br>\n<a href=\"https://github.com/JetBrains/java-annotations/issues/13\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/java-annotations/issues/13</a></p>\n"}, {"tags": ["networking", "kotlin", "multicastsocket", "ssdp"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556607566, "post_id": 55914941, "comment_id": 98485281, "body": "You need to join the group via all relevant network interfaces, not just the last one you found that matches your criteria. The &#39;print for debugging&#39; code should be inside the <code>try</code> block, otherwise it is meaningless."}, {"owner": {"reputation": 3196, "user_id": 1231245, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/86Lrq.jpg?s=128&g=1", "display_name": "StefMa", "link": "https://stackoverflow.com/users/1231245/stefma"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556609473, "post_id": 55914941, "comment_id": 98486158, "body": "When I try to join all networks I got a <code>SocketException: Can&#39;t assign requested address</code>. This happens with the <code>utun0</code> network (whatever this is \ud83e\udd37\u200d\u2642\ufe0f)."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556612449, "post_id": 55914941, "comment_id": 98487671, "body": "I carefully did not say &#39;all networks&#39;. Read what I wrote."}, {"owner": {"reputation": 3196, "user_id": 1231245, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/86Lrq.jpg?s=128&g=1", "display_name": "StefMa", "link": "https://stackoverflow.com/users/1231245/stefma"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556613389, "post_id": 55914941, "comment_id": 98488194, "body": "Ups. Sry for that :). But what are &quot;relevant network interfaces&quot;? For testing I have put a simply try/catch around <code>joinGroup()</code> and join each network interface where it&#39;s possible. It seems that it work at least on my mac for now. But I have still the same issue on the CI."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556613734, "post_id": 55914941, "comment_id": 98488358, "body": "The &#39;relevant&#39; network interfaces are the ones that pass your five-line test. This seems obvious to me."}], "owner": {"reputation": 3196, "user_id": 1231245, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/86Lrq.jpg?s=128&g=1", "display_name": "StefMa", "link": "https://stackoverflow.com/users/1231245/stefma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556606975, "creation_date": 1556605012, "last_edit_date": 1556606975, "question_id": 55914941, "link": "https://stackoverflow.com/questions/55914941/mutlicastsocket-receive-not-always", "title": "MutlicastSocket receive not always", "body": "<p>I want to implement a \"simple\" SSDP discovering client. Means the client should send out a </p>\n\n<pre><code>M-SEARCH * HTTP/1.1\nHOST: 239.255.255.250:1900\nMAN: \"ssdp:discover\"\nMX: 1\nST: ssdp:all\n\n</code></pre>\n\n<p>and afterwards listen to \"the network\"(?) to get the list of IP addresses.</p>\n\n<p>To test the implementation I've written a unit test which creates a \"fake\" <code>MulticastServer</code> which simply hear to the SSDP IP&amp;Port and, when receive something, send the same message back.</p>\n\n<p>The problem is that this code works on my machine (macOS) most of the time but <strong>never</strong> on our CI Server (Linux). I (macOS) receive <strong>sometimes</strong> the same assertion failed error as on the CI. But as I said - only sometimes! Not always. And I don't know why.</p>\n\n<p>This is the implementation on the client side:</p>\n\n<pre><code>interface GatewayDiscoverer {\n\n    companion object {\n        val instance: GatewayDiscoverer = DefaultGatewayDiscoverer()\n    }\n\n    suspend fun discoverGateways(timeoutMillis: Int = 1000): List&lt;String&gt;\n}\n\ninternal class DefaultGatewayDiscoverer : GatewayDiscoverer {\n\n    override suspend fun discoverGateways(timeoutMillis: Int): List&lt;String&gt; {\n        require(timeoutMillis in 1000..5000) {\n            \"timeoutMillis should be between 1000 (inclusive) and 5000 (inclusive)!\"\n        }\n\n        val socket = DatagramSocket()\n        sendSsdpPacket(socket)\n\n        val gateways = receiveSsdpPacket(socket, timeoutMillis)\n\n        return gateways\n    }\n\n    private fun sendSsdpPacket(socket: DatagramSocket) {\n        val packetToSend =\n            \"M-SEARCH * HTTP/1.1\\r\\nHOST: 239.255.255.250:1900\\r\\nMAN: \\\"ssdp:discover\\\"\\r\\nMX: 1\\r\\nST: ssdp:all\\r\\n\\r\\n\"\n        val packetToSendAsBytes = packetToSend.toByteArray()\n        val packet = DatagramPacket(\n            packetToSendAsBytes,\n            packetToSendAsBytes.size,\n            InetAddress.getByName(\"239.255.255.250\"),\n            1900\n        )\n        socket.send(packet)\n    }\n\n    private fun receiveSsdpPacket(socket: DatagramSocket, timeoutInMillis: Int): List&lt;String&gt; {\n        val gatewayList = mutableListOf&lt;String&gt;()\n\n        while (true) {\n            val receivedData = ByteArray(12)\n            val packetToReceive = DatagramPacket(receivedData, receivedData.size)\n            socket.soTimeout = timeoutInMillis\n            try {\n                socket.receive(packetToReceive)\n                packetToReceive.address?.hostName?.let { gatewayList.add(it) }\n            } catch (socketTimeout: SocketTimeoutException) {\n                return gatewayList\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And this the test (includes the <code>MulticastServer</code>):</p>\n\n<pre><code>class DefaultGatewayDiscovererTest {\n\n    @Test\n    fun `discover gateways should return a list of gateway IPs`() = with(MulticastServer()) {\n        start()\n\n        val list = runBlocking { GatewayDiscoverer.instance.discoverGateways(1000) }\n\n        close()\n        assertThat(list.size).isEqualTo(1)\n        assertThat(list).contains(InetAddress.getLocalHost().hostAddress)\n        Unit\n    }\n}\n\n/**\n * A \"MulticastServer\" which will join the\n * 239.255.255.250:1900 group to listen on SSDP events.\n * They will report back with the same package\n * it received.\n */\nclass MulticastServer : Thread(), Closeable {\n\n    private val group = InetAddress.getByName(\"239.255.255.250\")\n    private val socket: MulticastSocket = MulticastSocket(1900)\n\n    init {\n        // This force to use IPv4...\n        var netinterface: NetworkInterface? = null\n        // Otherwise it will (at least on macOS) use IPv6 which leads to issues\n        // while joining the group...\n        val networkInterfaces = NetworkInterface.getNetworkInterfaces()\n        while (networkInterfaces.hasMoreElements()) {\n            val networkInterface = networkInterfaces.nextElement()\n            val addressesFromNetworkInterface = networkInterface.inetAddresses\n            while (addressesFromNetworkInterface.hasMoreElements()) {\n                val inetAddress = addressesFromNetworkInterface.nextElement()\n                if (inetAddress.isSiteLocalAddress\n                    &amp;&amp; !inetAddress.isAnyLocalAddress\n                    &amp;&amp; !inetAddress.isLinkLocalAddress\n                    &amp;&amp; !inetAddress.isLoopbackAddress\n                    &amp;&amp; !inetAddress.isMulticastAddress\n                ) {\n                    netinterface = NetworkInterface.getByName(networkInterface.name)\n                }\n            }\n        }\n\n        socket.joinGroup(InetSocketAddress(\"239.255.255.250\", 1900), netinterface!!)\n    }\n\n    override fun run() {\n        while (true) {\n            val buf = ByteArray(256)\n            val packet = DatagramPacket(buf, buf.size)\n            try {\n                socket.receive(packet)\n            } catch (socketEx: SocketException) {\n                break\n            }\n            // Print for debugging\n            val message = String(packet.data, 0, packet.length)\n            println(message)\n            socket.send(packet)\n        }\n    }\n\n    override fun close() = with(socket) {\n        leaveGroup(group)\n        close()\n    }\n}\n</code></pre>\n\n<p>When the test fails it fails on that line:</p>\n\n<pre><code>assertThat(list.size).isEqualTo(1)\n</code></pre>\n\n<p>The <code>list</code> is empty. </p>\n\n<p>After some debugging I found out that the <code>MulticastServer</code> don't receive the message. Therefore the client don't get the response and add the IP address to the <code>list</code>. </p>\n\n<p>I would expect that the <code>MulticastServer</code> will <strong>always</strong> work without that \"flakiness\". Do I something wrong with the implementation?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 1, "creation_date": 1556602725, "post_id": 55914499, "comment_id": 98483349, "body": "Try the solution here: <a href=\"https://stackoverflow.com/a/32332208/1468093\">Glide load local image by Uri</a>"}, {"owner": {"reputation": 31, "user_id": 11260950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60f6e4c5d14990eaf02bb8d0fa6fa8a?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/11260950/user"}, "reply_to_user": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556603391, "post_id": 55914499, "comment_id": 98483566, "body": "@KamranAhmed i have list of paths of files not actual images. i need to extaract icon of each file from this path."}, {"owner": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556616689, "post_id": 55914499, "comment_id": 98489945, "body": "You mean you want to show icons based on type of files, right?"}, {"owner": {"reputation": 31, "user_id": 11260950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60f6e4c5d14990eaf02bb8d0fa6fa8a?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/11260950/user"}, "reply_to_user": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556620329, "post_id": 55914499, "comment_id": 98491971, "body": "@KamranAhmed Exactly."}, {"owner": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556632745, "post_id": 55914499, "comment_id": 98498828, "body": "There is no place to extract icons based on file types unless you are planning to show the default app icon that can open a particular kind of file... is that what you want to do?"}, {"owner": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556633069, "post_id": 55914499, "comment_id": 98499039, "body": "Can you share an example of whats the content of list[position]?"}, {"owner": {"reputation": 31, "user_id": 11260950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60f6e4c5d14990eaf02bb8d0fa6fa8a?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/11260950/user"}, "reply_to_user": {"reputation": 7141, "user_id": 1468093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29b71bf721780f42b0715be471854110?s=128&d=identicon&r=PG", "display_name": "Kamran Ahmed", "link": "https://stackoverflow.com/users/1468093/kamran-ahmed"}, "edited": false, "score": 0, "creation_date": 1556864851, "post_id": 55914499, "comment_id": 98579459, "body": "@KamranAhmed Sorry brother for late reply. Yes it might be not possible to extract icon of file so i some how i solved it by using default icons placed in project&#39;s drawable. I appreciate your effort."}], "owner": {"reputation": 31, "user_id": 11260950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60f6e4c5d14990eaf02bb8d0fa6fa8a?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/11260950/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556620380, "creation_date": 1556602351, "last_edit_date": 1556620380, "question_id": 55914499, "link": "https://stackoverflow.com/questions/55914499/is-it-possible-to-load-icon-of-any-file-from-file-path-using-glide-library-in-an", "title": "Is it possible to load icon of any file from file path using glide library in android?", "body": "<p>I have list of file's paths which are not images. I need to load icon of every file as stored in device directory using file paths i hav. I am trying this with glide but it gives load.enguine.Exception. Is there anyway to handle this using glide?</p>\n\n<pre><code> override fun onBindViewHolder(holder: VideoViewHolder, position: Int) {\n    try {\n        var a = list[position]\n        var uri = Uri.parse(a)\n        Glide.with(activity).load(Uri.fromFile(File(a))).into(holder.icon)\n    }catch (ex: Exception){\n        ex.printStackTrace()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-kotlin"], "comments": [{"owner": {"reputation": 365, "user_id": 11197211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6290631c4cb098cb2c5e6b28f860d232?s=128&d=identicon&r=PG&f=1", "display_name": "Infusion Analysts", "link": "https://stackoverflow.com/users/11197211/infusion-analysts"}, "edited": false, "score": 0, "creation_date": 1556602324, "post_id": 55914451, "comment_id": 98483237, "body": "read about by keyword in kotlin."}, {"owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "reply_to_user": {"reputation": 365, "user_id": 11197211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6290631c4cb098cb2c5e6b28f860d232?s=128&d=identicon&r=PG&f=1", "display_name": "Infusion Analysts", "link": "https://stackoverflow.com/users/11197211/infusion-analysts"}, "edited": false, "score": 0, "creation_date": 1556602398, "post_id": 55914451, "comment_id": 98483255, "body": "yeah, but delegation is not feasible for this i think so."}, {"owner": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "edited": false, "score": 0, "creation_date": 1568402852, "post_id": 55914451, "comment_id": 102276185, "body": "What library is @Binds from? You are just looking for a transform L1 -&gt; L2 -&gt; L1?"}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556602041, "creation_date": 1556602041, "question_id": 55914451, "link": "https://stackoverflow.com/questions/55914451/android-replacing-one-interface-with-other-one-using-rx-kotlin", "title": "Android - Replacing One interface with other one using rx-kotlin", "body": "<p>I have a three layers in my application <strong>app</strong>, <strong>data</strong>, <strong>domain</strong>, i will be getting my result entity for my <strong>app</strong> from <strong>domain</strong> layer , the result entity class will be implementing with some interface <strong>L1</strong>, my need is when the result reaches app layer i need to replace the interface <strong>L1</strong> which is implemented in result entity  to interface <strong>L2</strong></p>\n\n<p>Example<br>\n<strong>Domain</strong></p>\n\n<pre><code>interface L1\n</code></pre>\n\n<p>The above interface will not contain any methods or variables </p>\n\n<pre><code>data class Result(val data : Any) : L1\n</code></pre>\n\n<p><strong>App</strong> </p>\n\n<pre><code>interface L2\n</code></pre>\n\n<p>same as like interface L1</p>\n\n<pre><code>data class Result(val data : Any) : L2\n</code></pre>\n\n<p>I am not sure whether i can achieve using rxkotlin, i had a rough idea about it like</p>\n\n<pre><code>@Binds\nabstract fun bindL1WithL2(l2 : L2) : L1\n</code></pre>\n\n<p>Is there is any solution for this ?<br>\nAny help</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 11425465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469d1cae6518e37de1a3fc2ecdc4e5fa?s=128&d=identicon&r=PG&f=1", "display_name": "flx_h", "link": "https://stackoverflow.com/users/11425465/flx-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1556606347, "last_edit_date": 1556606347, "creation_date": 1556601873, "answer_id": 55914430, "question_id": 55913788, "link": "https://stackoverflow.com/questions/55913788/recyclerview-adapter-is-loaded-with-square-the-amount-of-object-in-the-database/55914430#55914430", "title": "Recyclerview adapter is loaded with square the amount of object in the database(e.g. 25 for 5, 16 for 4 etc)", "body": "<p>function <code>onChildAdded</code> on firebase <code>ChildEventListener</code> will always be called at least once for every children after you assign your listener to database reference. </p>\n\n<p>So in your case, after you clear your list, <code>onChildAdded</code> will add every notification data at your list, because you assign a new listener to database reference</p>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556606347, "creation_date": 1556596848, "last_edit_date": 1556598269, "question_id": 55913788, "link": "https://stackoverflow.com/questions/55913788/recyclerview-adapter-is-loaded-with-square-the-amount-of-object-in-the-database", "title": "Recyclerview adapter is loaded with square the amount of object in the database(e.g. 25 for 5, 16 for 4 etc)", "body": "<p>I have a recyclerView the holds the user's notifications. A new notification has a colored background where an old one has a white background. My data base holds the information about every notification saying whether it is new (simply sing 0 for new and 1 for seen).</p>\n\n<p>I have on top a button for \"Mark all as read\". WHen clicked, I have a listener for the user's notifications and on every child added, it changes the value of that child from 0 to 1.\nWhen that is done I would like to repopulate the recyclerView so all the notifications would have the proper background (white - for old notification).</p>\n\n<p>I have a separate function that listens to notifications also with a child event listener, and that I am calling that function on every child added of the previous function.</p>\n\n<p>Now the result of this SHOULD BE what I've described - for each child added, the notifications listener is called and then it loads all the notifications,so granted I should end up with square the amount of actual notifications. The reason I a confused is because I clear the adapter every time the listen to notifications function is called, so as far as I can understand, only the last time the function is called should stick, because all the previous calls have been cleared, but that is not the case.</p>\n\n<p>Would appreciate help understanding why that happens. Thanks!</p>\n\n<pre><code>        notifications_mark_all_as_read.setOnClickListener {\n            refFeedNotifications.addListenerForSingleValueEvent(object : ValueEventListener {\n                override fun onDataChange(p0: DataSnapshot) {\n\n                    for (i in p0.children) {\n                        val notificationsRef =\n                            FirebaseDatabase.getInstance()\n                                .getReference(\"/users/$uid/notifications/gallery/${i.key}/seen\")\n                        notificationsRef.setValue(1)\n\n                        notificationsRecyclerAdapter.clear()\n                        listenToNotifications()\n                    }\n\n                }\n\n                override fun onCancelled(p0: DatabaseError) {}\n\n            })\n\n\n        }\n\n\n private fun listenToNotifications() {\n\n        notificationsRecyclerAdapter.clear()\n\n        refFeedNotifications.addChildEventListener(object : ChildEventListener {\n\n            override fun onChildAdded(p0: DataSnapshot, p1: String?) {\n\n                val notification = p0.getValue(Notification::class.java)\n\n                if (notification != null) {\n                    notificationsRecyclerAdapter.add(SingleFeedNotification(notification, activity as MainActivity))\n                }\n            }\n\n            override fun onCancelled(p0: DatabaseError) {\n            }\n\n            override fun onChildMoved(p0: DataSnapshot, p1: String?) {\n            }\n\n            override fun onChildChanged(p0: DataSnapshot, p1: String?) {\n            }\n\n            override fun onChildRemoved(p0: DataSnapshot) {\n            }\n        })\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2", "rx-android"], "comments": [{"owner": {"reputation": 2187, "user_id": 1077539, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ac36a35b456dd2b335b368d32ebd0f15?s=128&d=identicon&r=PG", "display_name": "sadat", "link": "https://stackoverflow.com/users/1077539/sadat"}, "edited": false, "score": 0, "creation_date": 1556596665, "post_id": 55913717, "comment_id": 98481831, "body": "Maybe first 2 observables can be zipped"}, {"owner": {"reputation": 474, "user_id": 8713068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a972a6bec2ccc8cbaa72046fa56c5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Karzel", "link": "https://stackoverflow.com/users/8713068/karzel"}, "edited": false, "score": 0, "creation_date": 1556599951, "post_id": 55913717, "comment_id": 98482564, "body": "Try using <code>combineLatest</code> (<a href=\"http://reactivex.io/documentation/operators/combinelatest.html\" rel=\"nofollow noreferrer\">reactivex.io/documentation/operators/combinelatest.html</a>). This way, it will wait for first and second observable to fetch data, and then you will have both of them in one function. You can then delete local and insert remote list."}], "owner": {"reputation": 2187, "user_id": 1077539, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ac36a35b456dd2b335b368d32ebd0f15?s=128&d=identicon&r=PG", "display_name": "sadat", "link": "https://stackoverflow.com/users/1077539/sadat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556598854, "creation_date": 1556596265, "last_edit_date": 1556598854, "question_id": 55913717, "link": "https://stackoverflow.com/questions/55913717/running-observables-sequentially-while-passing-parameters-in-rxjava", "title": "Running Observables Sequentially while passing Parameters in RxJava", "body": "<p>I was trying to perform a task using RxJava. Basically, there are four observables. I figured out how to run Observables sequentially. However, I could not get the answer to how I can pass one output to the other. The Observables are like,</p>\n\n<ol>\n<li>Get Remote Data such as List</li>\n<li>Get Local Data same List</li>\n<li>Delete All Local data from 2nd Observable</li>\n<li>Insert Remote List </li>\n</ol>\n\n<p>I am using retrofit and Room to access remote and local data respectively. Any help or suggestion would be really great.</p>\n\n<p>So far, what I did is (this is not right for sure)</p>\n\n<pre><code>disposables.add(Observable.zip(dataManager.allXs, dataManager.Xs, object : BiFunction&lt;List&lt;X&gt;, List&lt;X&gt;, List&lt;X&gt;&gt; {\n        @Throws(Exception::class)\n        override fun apply( s: List&lt;X&gt;, s2: List&lt;X&gt;): List&lt;X&gt; {\n            dataManager.deleteXs(s2)\n            return s\n        }\n    }).map {\n        dataManager.insertXs(it)\n    }. subscribeOn(Schedulers.computation()).observeOn(AndroidSchedulers.mainThread()).\n        subscribe { \n\n        }\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin", "fastjson"], "comments": [{"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556600181, "post_id": 55913715, "comment_id": 98482625, "body": "Please include response json body"}, {"owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "reply_to_user": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556601115, "post_id": 55913715, "comment_id": 98482888, "body": "@awesoon added, thanks"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556601405, "post_id": 55913715, "comment_id": 98482968, "body": "The keys in the table do not match keys in the <code>response.body</code> on the screenshot. Anyway I asked about actual json you have received, not a table. Please include actual json."}, {"owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "reply_to_user": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556601564, "post_id": 55913715, "comment_id": 98483012, "body": "@awesoon i cannot received any json, it always report the error shown as the image above, or empty json if using com.google.gson.JsonObject"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556601711, "post_id": 55913715, "comment_id": 98483054, "body": "You received something (maybe this is valid json, maybe not), inspect the response object and include response raw body."}, {"owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "reply_to_user": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556602162, "post_id": 55913715, "comment_id": 98483186, "body": "@awesoon I included raw response... the response body is empty if using com.google.gson.JsonObject, and raw response told me code is 200 but nothing..."}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556602734, "post_id": 55913715, "comment_id": 98483353, "body": "The last screenshot does not produce error you&#39;ve mentioned in the question (compare <code>response.body</code> - on the first screenshot it contains 4 elements, on the second it is empty). Make sure your request fails with JSON parse error and include raw response for that request."}, {"owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "reply_to_user": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556603250, "post_id": 55913715, "comment_id": 98483508, "body": "@awesoon raw responses are actually same, no matter which JSONObject type used.... The difference is json parse error or empty json"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 0, "creation_date": 1556603493, "post_id": 55913715, "comment_id": 98483603, "body": "You&#39;re right, I was confused by <code>return_code</code> and <code>timestamp</code>"}, {"owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1556603503, "post_id": 55913715, "comment_id": 98483608, "body": "Can you change the Retrofit API to request a String instead of a JSONObject? Then show us the string you received from the server."}, {"owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "reply_to_user": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "edited": false, "score": 0, "creation_date": 1556603902, "post_id": 55913715, "comment_id": 98483741, "body": "@JensV changed and posted the response...."}], "answers": [{"tags": [], "owner": {"reputation": 3463, "user_id": 2232127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0af1bc4a99affc5af6d890404baf5f30?s=128&d=identicon&r=PG", "display_name": "JensV", "link": "https://stackoverflow.com/users/2232127/jensv"}, "is_accepted": true, "score": 0, "last_activity_date": 1556606842, "creation_date": 1556606842, "answer_id": 55915325, "question_id": 55913715, "link": "https://stackoverflow.com/questions/55913715/json-parse-error-syntax-error-expect-actual-error-pos-0-fastjson-version/55915325#55915325", "title": "JSON parse error: syntax error, expect {, actual error, pos 0, fastjson-version 1.2.57 when using RoyalPay SDK", "body": "<p>The server is expecting a JSON Body request. You are annotating your data with <code>@Field</code> which will result in the request formed as a queryString.</p>\n\n<p>I.e. your request body will look something like this:</p>\n\n<pre><code>description=foo&amp;price=123...\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>{\n    \"description\": \"foo\",\n    \"price\": 123,\n    ...\n}\n</code></pre>\n\n<p>To achieve what you want, check <a href=\"https://stackoverflow.com/questions/21398598/how-to-post-raw-whole-json-in-the-body-of-a-retrofit-request\">this question here</a>. The first answer works directly with Java objects, but you can also use the second answer if you don't want to work with custom classes.</p>\n"}], "owner": {"reputation": 69, "user_id": 8498194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a798757a1ab0be49cd353d48c39c18a?s=128&d=identicon&r=PG&f=1", "display_name": "kate", "link": "https://stackoverflow.com/users/8498194/kate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "accepted_answer_id": 55915325, "answer_count": 1, "score": 2, "last_activity_date": 1556606842, "creation_date": 1556596224, "last_edit_date": 1556604007, "question_id": 55913715, "link": "https://stackoverflow.com/questions/55913715/json-parse-error-syntax-error-expect-actual-error-pos-0-fastjson-version", "title": "JSON parse error: syntax error, expect {, actual error, pos 0, fastjson-version 1.2.57 when using RoyalPay SDK", "body": "<p>I am trying to use RoyalPay SDK to create order and make Alipay payment. The response code is 200, but I cannot parse JSON in response. </p>\n\n<p>How do I solve this problem? </p>\n\n<p>The code I create api request with:</p>\n\n<pre><code>    interface RoyalPayApi {\n\n    @FormUrlEncoded\n    @Headers(\"Accept: application/json\", \"Content-Type: application/json\")\n    @PUT(\"/api/v1.0/gateway/partners/{partner_code}/app_orders/{order_id}\")\n    fun createRoyalPaySDKOrder(@Path(value = \"partner_code\", encoded = true) partner_code: String, @Path(value = \"order_id\", encoded = true) order_id: String,\n                               @Query(\"time\") time: Long, @Query(\"nonce_str\") nonce_str: String, @Query(\"sign\") sign: String,\n                               @Field(\"description\") description: String,\n                               @Field(\"price\") price: Int,\n                               @Field(\"currency\") currency: String,\n                               @Field(\"channel\") channel: String,\n                               @Field(\"operator\") operator: String,\n                               @Field(\"system\") system: String): Call&lt;JSONObject&gt; // com.alibaba.fastjson.JSONObject\n}\n</code></pre>\n\n<p>The code I get retrofit service:</p>\n\n<pre><code>fun createService(): RoyalPayApi {\n        val retrofit = Retrofit.Builder()\n        .baseUrl(ROYAL_PAY_ADDRESS)\n        .addConverterFactory(FastJsonConverterFactory.create())\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .build()\n\n    return retrofit.create(RoyalPayApi::class.java)\n}\n</code></pre>\n\n<p>The code I send request and receive response:</p>\n\n<pre><code> var api = createService()\n    var call = api.createRoyalPaySDKOrder(ROYAL_PAY_PARTNER_CODE, order_id, time, ROYAL_PAY_NONCE_STR, sign,\n        description, price, \"AUD\", channel, \"kate\", \"android\")\n\n    call.enqueue(object : Callback&lt;JSONObject&gt;{\n        override fun onResponse(call: Call&lt;JSONObject&gt;, response: Response&lt;JSONObject&gt;) {\n            val str = \"\"\n        }\n\n        override fun onFailure(call: Call&lt;JSONObject&gt;, t: Throwable) {\n            val str = \"\"\n        }\n    })\n</code></pre>\n\n<p>This is the response I received:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pnpSW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pnpSW.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the response body (Chinese here should not affect understanding):</p>\n\n<p><a href=\"https://i.stack.imgur.com/PnIYW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PnIYW.png\" alt=\"enter image description here\"></a></p>\n\n<p>This includes raw response (using com.google.gson.JsonObject):</p>\n\n<p><a href=\"https://i.stack.imgur.com/vUlTM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vUlTM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Raw response using com.alibaba.fastjson.JSONObject\n<a href=\"https://i.stack.imgur.com/IGjYw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IGjYw.png\" alt=\"enter image description here\"></a></p>\n\n<p>if change JSONObject to String, it just return the String version of error :(:\n<a href=\"https://i.stack.imgur.com/hQ54n.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hQ54n.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 937, "user_id": 1303658, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c6c7c4ea7a8b79e12210cb9d85e257d?s=128&d=identicon&r=PG", "display_name": "Ladessa", "link": "https://stackoverflow.com/users/1303658/ladessa"}, "edited": false, "score": 0, "creation_date": 1578917187, "post_id": 55910759, "comment_id": 105583338, "body": "please, could you help me with my question? I have a similar problem, but I&#39;m getting error in second flavor because I&#39;m using android annotation: <a href=\"https://stackoverflow.com/questions/59715835/androidannotation-with-2-productflavors\" title=\"androidannotation with 2 productflavors\">stackoverflow.com/questions/59715835/&hellip;</a>"}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "reply_to_user": {"reputation": 937, "user_id": 1303658, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c6c7c4ea7a8b79e12210cb9d85e257d?s=128&d=identicon&r=PG", "display_name": "Ladessa", "link": "https://stackoverflow.com/users/1303658/ladessa"}, "edited": false, "score": 1, "creation_date": 1579007262, "post_id": 55910759, "comment_id": 105617472, "body": "@Ladessa I&#39;ve just seen your comment and question post. Glad that you figured it out. :)"}], "tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": true, "score": 0, "last_activity_date": 1556571724, "creation_date": 1556571724, "answer_id": 55910759, "question_id": 55910676, "link": "https://stackoverflow.com/questions/55910676/this-same-class-for-two-different-product-flavor/55910759#55910759", "title": "This same class for two different product flavor", "body": "<p>Create two copies of your <code>Http</code> class, one in <code>src/first/com.androidapp.testproject/repo</code> and the other one in <code>src/second/com.androidapp.testproject/repo</code>, and remove the copy from <code>src/main/...</code>.</p>\n\n<p>The first version of your class in <code>src/first/...</code> will get built for your flavor <code>first</code>, and the one in <code>src/second/...</code> will get built for your flavor <code>second</code>. Of course, you have to adjust the value for <code>CODE</code> in the appropriate copy of your classes.</p>\n\n<p>See the following answer for more information <a href=\"https://stackoverflow.com/a/16746755/3286819\">https://stackoverflow.com/a/16746755/3286819</a></p>\n"}, {"comments": [{"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1556576268, "post_id": 55910979, "comment_id": 98477958, "body": "Agree. This would be a better solution than mine for such a simple case. In case you need a more complex solution (e.g. different methods depending on your flavor) then my solution will be the way to go."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 3, "last_activity_date": 1556572897, "creation_date": 1556572897, "answer_id": 55910979, "question_id": 55910676, "link": "https://stackoverflow.com/questions/55910676/this-same-class-for-two-different-product-flavor/55910979#55910979", "title": "This same class for two different product flavor", "body": "<p>If your classes are the same but the only difference is the constant, then you do not need to duplicate the code and all you need to do is create gradle constants that you access via the <code>BuildConfig</code> class:</p>\n\n<pre><code>productFlavors {\n    flavor1 {\n        buildConfigField 'int', 'CODE', '1000'\n    }\n\n    flavor2 {\n        buildConfigField 'int', 'CODE', '2000'\n    }\n}\n</code></pre>\n\n<p>Then you would use</p>\n\n<pre><code>BuildConfig.CODE\n</code></pre>\n\n<p>in your HTTP calls, that would hold 1000 or 2000 depending on the flavor.</p>\n"}], "owner": {"reputation": 351, "user_id": 10418137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b7d600152d87e55ee0feeb8767d6b1?s=128&d=identicon&r=PG&f=1", "display_name": "purcha", "link": "https://stackoverflow.com/users/10418137/purcha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 55910759, "answer_count": 2, "score": 0, "last_activity_date": 1556572897, "creation_date": 1556571227, "last_edit_date": 1556571821, "question_id": 55910676, "link": "https://stackoverflow.com/questions/55910676/this-same-class-for-two-different-product-flavor", "title": "This same class for two different product flavor", "body": "<p>I have 2 product flavors:</p>\n\n<pre><code>productFlavors {\n    first{}\n    second{}\n}\n</code></pre>\n\n<p>and I have a class <code>Http</code> with constant value like on screen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7V2J0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7V2J0.png\" alt=\"enter image description here\"></a></p>\n\n<p>My problem is:  </p>\n\n<p>If I have set build <code>first</code>, I want <code>Http</code> class with <code>CODE = 2000</code><br>\nbut if I have set build <code>second</code> I want <code>Http</code> class with <code>CODE = 1000</code></p>\n\n<p>I have seen such a project which looked like : repo(first) and after change\nbuild repo(second) and class http was different depending on the current build, but can't replicate it :/</p>\n"}, {"tags": ["android", "kotlin", "imageview", "android-constraintlayout", "android-databinding"], "comments": [{"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1556571418, "post_id": 55910365, "comment_id": 98476647, "body": "Anything interesting in the logs? Also, maybe too obvious, but have to ask: is the <code>BindingAdapter</code> for <code>imageRatio</code> being called?"}, {"owner": {"reputation": 1225, "user_id": 3570019, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83c28cf91005c1043806f405c36c8ebb?s=128&d=identicon&r=PG", "display_name": "Jake_", "link": "https://stackoverflow.com/users/3570019/jake"}, "reply_to_user": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1556571814, "post_id": 55910365, "comment_id": 98476767, "body": "Good questions, if I set a break point I do see <code>imageRatio</code> being called for each view. I&#39;m not seeing anything noteworthy in the logs either."}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 3570019, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83c28cf91005c1043806f405c36c8ebb?s=128&d=identicon&r=PG", "display_name": "Jake_", "link": "https://stackoverflow.com/users/3570019/jake"}, "edited": false, "score": 1, "creation_date": 1556641666, "post_id": 55911285, "comment_id": 98503958, "body": "yep, that seemed to do the trick. Thank you so much! The code is seemingly interchangeable but clearly isn&#39;t... I was going to lose my mind :)"}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "reply_to_user": {"reputation": 1225, "user_id": 3570019, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83c28cf91005c1043806f405c36c8ebb?s=128&d=identicon&r=PG", "display_name": "Jake_", "link": "https://stackoverflow.com/users/3570019/jake"}, "edited": false, "score": 1, "creation_date": 1556657450, "post_id": 55911285, "comment_id": 98510602, "body": "Glad it helped!"}], "tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": true, "score": 2, "last_activity_date": 1556574750, "creation_date": 1556574750, "answer_id": 55911285, "question_id": 55910365, "link": "https://stackoverflow.com/questions/55910365/constraintlayout-ratio-binding-has-width-but-not-height/55911285#55911285", "title": "ConstraintLayout Ratio binding has width but not height", "body": "<p>After some tests, I've realized that as your layout is already laid out, you should use <code>constraintSet.applyTo(constraintLayout)</code>, like so:</p>\n\n<pre><code>@BindingAdapter(\"imageRatio\")\nfun setConstraintRatio(view: ImageView, ratio: String) {\n    val constraintLayout = view.parent as ConstraintLayout\n    val constraintSet = ConstraintSet()\n    constraintSet.clone(constraintLayout)\n    constraintSet.setDimensionRatio(view.id, ratio)\n    constraintSet.applyTo(constraintLayout)\n}\n</code></pre>\n\n<p>Also, I've always seen the <code>DimensionRatio</code> direction letter as lower case (could be another issue to be found later). So, just in case, change in your Formatter:</p>\n\n<pre><code>val dimensionRatio: String\n    get() {\n        return if (showB) \"1:1\"\n        else \"h,16:9\"\n    }\n</code></pre>\n\n<p>Hope this solves the issue!</p>\n"}], "owner": {"reputation": 1225, "user_id": 3570019, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83c28cf91005c1043806f405c36c8ebb?s=128&d=identicon&r=PG", "display_name": "Jake_", "link": "https://stackoverflow.com/users/3570019/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 55911285, "answer_count": 1, "score": 2, "last_activity_date": 1556574750, "creation_date": 1556569487, "question_id": 55910365, "link": "https://stackoverflow.com/questions/55910365/constraintlayout-ratio-binding-has-width-but-not-height", "title": "ConstraintLayout Ratio binding has width but not height", "body": "<p>I am trying to dynamically set the ratio of 2 <code>ImageView</code>s using databinding. If a flag is true, the second <code>ImageView</code>'s (B) visibility is set to gone and the first (A) should display in <code>16:9</code> format and expand to fill the width of the parent. If both views are supposed to be visible, they are supposed to be <code>1:1</code> and display side by side.</p>\n\n<p>The problem is that the left image view, A, never displays. With the layout inspector I can verify that it exists and has a width, but it has no height. </p>\n\n<p>Am I missing something? B displays as expected. If I manually set the ratio on A it displays properly.</p>\n\n<p>My Binding looks like this: </p>\n\n<pre><code>@BindingAdapter(\"imageRatio\")\nfun setConstraintRatio(view: ImageView, ratio: String) {\n    val constraintLayout = view.parent as ConstraintLayout\n    val constraintSet = ConstraintSet()\n    constraintSet.clone(constraintLayout)\n    constraintSet.setDimensionRatio(view.id, ratio)\n    constraintLayout.setConstraintSet(constraintSet)\n}\n</code></pre>\n\n<p>Formatter: </p>\n\n<pre><code>val dimensionRatio: String\n    get() {\n        return if (showB) \"1:1\"\n        else \"H,16:9\"\n    }\n</code></pre>\n\n<p>My Layout looks like this:</p>\n\n<pre><code>&lt;ImageView\n        android:id=\"@+id/card_image_a\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginEnd=\"8dp\" android:scaleType=\"centerCrop\"\n        app:imageRatio=\"@{formatter.dimensionRatio}\"\n        app:layout_constraintEnd_toStartOf=\"@id/card_image_b\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/divider\"\n        android:visibility=\"visible\" /&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/card_image_b\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginEnd=\"16dp\"\n        android:scaleType=\"centerCrop\"\n        app:imageRatio=\"@{formatter.dimensionRatio}\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toEndOf=\"@id/card_image_a\"\n        app:layout_constraintTop_toBottomOf=\"@id/divider\"\n        app:visibleOrGone=\"@{formatter.showImageB}\"\n        tools:visibility=\"visible\" /&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "build.gradle"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1556565761, "post_id": 55909478, "comment_id": 98474492, "body": "Upgrade the Kotlin used in your Gradle build files to at least <code>1.3.0</code>. The latest is <code>1.3.30</code>."}, {"owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1556566315, "post_id": 55909478, "comment_id": 98474699, "body": "@CommonsWare Thanks! If you want, could you reply as answer so I could upvote&amp;accept for future refence if anyone else might end up with same error."}], "answers": [{"comments": [{"owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "edited": false, "score": 0, "creation_date": 1556571796, "post_id": 55909794, "comment_id": 98476758, "body": "Thanks again for the help."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 4, "last_activity_date": 1556566716, "creation_date": 1556566716, "answer_id": 55909794, "question_id": 55909478, "link": "https://stackoverflow.com/questions/55909478/android-org-gradle-api-gradleexception-cannot-find-a-version-of-org-jetbrains/55909794#55909794", "title": "ANDROID: org.gradle.api.GradleException: Cannot find a version of &#39;org.jetbrains.kotlin:kotlin-stdlib&#39; that satisfies the version constraints", "body": "<p>Some libraries will require particular versions of Kotlin, typically if they depend upon newer language features (e.g., coroutines in Kotlin 1.3).</p>\n\n<p>In your case, <code>androidx.room:room-testing:2.1.0-alpha04</code>, through its <code>androidx.room:room-migration:2.1.0-alpha04</code> dependency, wants Kotlin 1.3.0 or higher, but your project is set for Kotlin 1.2.71.</p>\n\n<p>The typically-simple solution is to bump your Kotlin version. In a typical current Android Studio project, that is set in an <code>ext.kotlin_version</code> line in the <code>buildscript</code> closure of the top-level <code>build.gradle</code> file. Otherwise, hunt around your Gradle build scripts and properties files, looking for <code>1.2.71</code>. Replace it with <code>1.3.0</code> or higher &mdash; as of late April 2019, the latest production Kotlin version is 1.3.30.</p>\n\n<p>If upgrading your Kotlin version causes other problems, such as failed tests, you could elect to downgrade the dependencies that are calling for the higher Kotlin version. Eventually, though, you will want to resolve the problems and get on a current Kotlin version.</p>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 0, "last_activity_date": 1590292255, "last_edit_date": 1590292255, "creation_date": 1590291840, "answer_id": 61981386, "question_id": 55909478, "link": "https://stackoverflow.com/questions/55909478/android-org-gradle-api-gradleexception-cannot-find-a-version-of-org-jetbrains/61981386#61981386", "title": "ANDROID: org.gradle.api.GradleException: Cannot find a version of &#39;org.jetbrains.kotlin:kotlin-stdlib&#39; that satisfies the version constraints", "body": "<p>You should update the gradle distribution to <code>6.1.1</code> and the dependency of the project.</p>\n\n<p>Check the following answer: <a href=\"https://stackoverflow.com/a/61981410/5279996\">https://stackoverflow.com/a/61981410/5279996</a></p>\n\n<p>GL</p>\n"}], "owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "accepted_answer_id": 55909794, "answer_count": 2, "score": 1, "last_activity_date": 1590292255, "creation_date": 1556565160, "last_edit_date": 1590291902, "question_id": 55909478, "link": "https://stackoverflow.com/questions/55909478/android-org-gradle-api-gradleexception-cannot-find-a-version-of-org-jetbrains", "title": "ANDROID: org.gradle.api.GradleException: Cannot find a version of &#39;org.jetbrains.kotlin:kotlin-stdlib&#39; that satisfies the version constraints", "body": "<p>I tried running a test class and i caught this build error below. It only appears when trying to run test(s) and not when building&amp;running app. Any suggestions on how to resolve this? I am not using kotlin in my app at all.</p>\n\n<pre><code>org.gradle.api.internal.tasks.TaskDependencyResolveException: Could not determine the dependencies of task ':app:preDebugAndroidTestBuild'.\n    at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:68)\n    at org.gradle.execution.plan.TaskDependencyResolver.resolveDependenciesFor(TaskDependencyResolver.java:46)\n    at org.gradle.execution.plan.LocalTaskNode.getDependencies(LocalTaskNode.java:106)\n    at org.gradle.execution.plan.LocalTaskNode.resolveDependencies(LocalTaskNode.java:79)\n    at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:167)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph.addEntryTasks(DefaultTaskExecutionGraph.java:139)\n    at org.gradle.execution.TaskNameResolvingBuildConfigurationAction.configure(TaskNameResolvingBuildConfigurationAction.java:48)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:57)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.access$200(DefaultBuildConfigurationActionExecuter.java:26)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter$2.proceed(DefaultBuildConfigurationActionExecuter.java:63)\n    at org.gradle.execution.DefaultTasksBuildExecutionAction.configure(DefaultTasksBuildExecutionAction.java:44)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:57)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.access$200(DefaultBuildConfigurationActionExecuter.java:26)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter$2.proceed(DefaultBuildConfigurationActionExecuter.java:63)\n    at org.gradle.execution.ExcludedTaskFilteringBuildConfigurationAction.configure(ExcludedTaskFilteringBuildConfigurationAction.java:47)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.configure(DefaultBuildConfigurationActionExecuter.java:57)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.access$200(DefaultBuildConfigurationActionExecuter.java:26)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter$1.run(DefaultBuildConfigurationActionExecuter.java:43)\n    at org.gradle.internal.Factories$1.create(Factories.java:25)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry.withLenientState(DefaultProjectStateRegistry.java:132)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry.withLenientState(DefaultProjectStateRegistry.java:124)\n    at org.gradle.execution.DefaultBuildConfigurationActionExecuter.select(DefaultBuildConfigurationActionExecuter.java:39)\n    at org.gradle.initialization.DefaultGradleLauncher$CalculateTaskGraph.run(DefaultGradleLauncher.java:333)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.initialization.DefaultGradleLauncher.constructTaskGraph(DefaultGradleLauncher.java:218)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)\n    at org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:134)\n    at org.gradle.internal.invocation.GradleBuildController$1.execute(GradleBuildController.java:58)\n    at org.gradle.internal.invocation.GradleBuildController$1.execute(GradleBuildController.java:55)\n    at org.gradle.internal.invocation.GradleBuildController$3.create(GradleBuildController.java:82)\n    at org.gradle.internal.invocation.GradleBuildController$3.create(GradleBuildController.java:75)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:183)\n    at org.gradle.internal.work.StopShieldingWorkerLeaseService.withLocks(StopShieldingWorkerLeaseService.java:40)\n    at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:75)\n    at org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:55)\n    at org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:55)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:58)\n    at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\n    at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:39)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:49)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:44)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:315)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:305)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:101)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:44)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:49)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:46)\n    at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:78)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:46)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:31)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:42)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:28)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:52)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:59)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:36)\n    at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:68)\n    at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:38)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:37)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:26)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:60)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:55)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:41)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:48)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:32)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:81)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all task dependencies for configuration ':app:debugAndroidTestRuntimeClasspath'.\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.rethrowFailure(DefaultConfiguration.java:1175)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$2100(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationTaskDependency.visitDependencies(DefaultConfiguration.java:1657)\n    at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext$TaskGraphImpl.getNodeValues(CachingTaskDependencyResolveContext.java:106)\n    at org.gradle.internal.graph.CachingDirectedGraphWalker$GraphWithEmpyEdges.getNodeValues(CachingDirectedGraphWalker.java:211)\n    at org.gradle.internal.graph.CachingDirectedGraphWalker.doSearch(CachingDirectedGraphWalker.java:121)\n    at org.gradle.internal.graph.CachingDirectedGraphWalker.findValues(CachingDirectedGraphWalker.java:73)\n    at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:66)\n    ... 105 more\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}.\nRequired by:\n    project :app\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.graph.builder.EdgeState.failWith(EdgeState.java:155)\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.graph.builder.DependencyGraphBuilder.attachFailureToEdges(DependencyGraphBuilder.java:382)\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.graph.builder.DependencyGraphBuilder.validateGraph(DependencyGraphBuilder.java:326)\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.graph.builder.DependencyGraphBuilder.resolve(DependencyGraphBuilder.java:133)\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.DefaultArtifactDependencyResolver.resolve(DefaultArtifactDependencyResolver.java:121)\n    at org.gradle.api.internal.artifacts.ivyservice.DefaultConfigurationResolver.resolveGraph(DefaultConfigurationResolver.java:171)\n    at org.gradle.api.internal.artifacts.ivyservice.ShortCircuitEmptyConfigurationResolver.resolveGraph(ShortCircuitEmptyConfigurationResolver.java:86)\n    at org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingConfigurationResolver.resolveGraph(ErrorHandlingConfigurationResolver.java:73)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$7.run(DefaultConfiguration.java:580)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveGraphIfRequired(DefaultConfiguration.java:571)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$600(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$6.run(DefaultConfiguration.java:551)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$SafeExclusiveLockImpl.withLock(DefaultProjectStateRegistry.java:244)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveExclusively(DefaultConfiguration.java:547)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveToStateOrLater(DefaultConfiguration.java:542)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$2200(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationResolvableDependencies.assertArtifactsResolved(DefaultConfiguration.java:1409)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationResolvableDependencies.access$3500(DefaultConfiguration.java:1297)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationResolvableDependencies$LenientResolutionResult.resolve(DefaultConfiguration.java:1424)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationResolvableDependencies$LenientResolutionResult.getAllComponents(DefaultConfiguration.java:1461)\n    at com.android.build.gradle.internal.dependency.ConstraintHandler.execute(ConstraintHandler.kt:38)\n    at com.android.build.gradle.internal.dependency.ConstraintHandler.execute(ConstraintHandler.kt:31)\n    at org.gradle.configuration.internal.DefaultUserCodeApplicationContext$2.execute(DefaultUserCodeApplicationContext.java:77)\n    at org.gradle.internal.event.BroadcastDispatch$ActionInvocationHandler.dispatch(BroadcastDispatch.java:91)\n    at org.gradle.internal.event.BroadcastDispatch$ActionInvocationHandler.dispatch(BroadcastDispatch.java:80)\n    at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:42)\n    at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:230)\n    at org.gradle.internal.event.BroadcastDispatch$SingletonDispatch.dispatch(BroadcastDispatch.java:149)\n    at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:58)\n    at org.gradle.internal.event.BroadcastDispatch$CompositeDispatch.dispatch(BroadcastDispatch.java:324)\n    at org.gradle.internal.event.BroadcastDispatch$CompositeDispatch.dispatch(BroadcastDispatch.java:234)\n    at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:140)\n    at org.gradle.internal.event.ListenerBroadcast.dispatch(ListenerBroadcast.java:37)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n    at com.sun.proxy.$Proxy29.beforeResolve(Unknown Source)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.performPreResolveActions(DefaultConfiguration.java:633)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$800(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$7.run(DefaultConfiguration.java:578)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveGraphIfRequired(DefaultConfiguration.java:571)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$600(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$6.run(DefaultConfiguration.java:551)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$SafeExclusiveLockImpl.withLock(DefaultProjectStateRegistry.java:244)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveExclusively(DefaultConfiguration.java:547)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveToStateOrLater(DefaultConfiguration.java:542)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.resolveGraphForBuildDependenciesIfRequired(DefaultConfiguration.java:692)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration.access$3700(DefaultConfiguration.java:135)\n    at org.gradle.api.internal.artifacts.configurations.DefaultConfiguration$ConfigurationTaskDependency.visitDependencies(DefaultConfiguration.java:1652)\n    ... 110 more\nCaused by: org.gradle.api.GradleException: Cannot find a version of 'org.jetbrains.kotlin:kotlin-stdlib' that satisfies the version constraints: \n   Dependency path 'App:app:unspecified' --&gt; 'com.jakewharton.rxbinding3:rxbinding:3.0.0-alpha2' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:1.2.71'\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Dependency path 'App:app:unspecified' --&gt; 'androidx.room:room-testing:2.1.0-alpha04' --&gt; 'androidx.room:room-migration:2.1.0-alpha04' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:1.3.0'\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n   Constraint path 'App:app:unspecified' --&gt; 'org.jetbrains.kotlin:kotlin-stdlib:{strictly 1.2.71}' because of the following reason: debugRuntimeClasspath uses version 1.2.71\n\n    at org.gradle.api.internal.artifacts.ivyservice.resolveengine.graph.builder.DependencyGraphBuilder.validateGraph(DependencyGraphBuilder.java:325)\n    ... 164 more\n</code></pre>\n"}, {"tags": ["kotlin", "google-cloud-dataflow", "apache-beam"], "comments": [{"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1556594767, "post_id": 55908999, "comment_id": 98481477, "body": "Is this at runtime or at compile time? Can you share more of the stack trace?"}, {"owner": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1556623967, "post_id": 55908999, "comment_id": 98493776, "body": "@mkobit stack trace added to <a href=\"https://gist.github.com/marcoslin/e1e19afdbacac9757f6974592cfd8d7f#file-stack-trace-txt\" rel=\"nofollow noreferrer\">gist.github.com/marcoslin/&hellip;</a>.  Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "edited": false, "score": 1, "creation_date": 1556624470, "post_id": 55911859, "comment_id": 98494037, "body": "thanks but per my question, if I do the import it does work.  That shouldn&#39;t be needed with Kotlin as <code>Iterable</code> is equivalent to <code>java.lang.Iterable</code>.  This problem manifest itself in other area as well.  For example, when using <code>GroupByKey</code> that returns a <code>Iterable</code> (which I cannot set), it raises the same error when combined with <code>ParDo</code>."}], "tags": [], "owner": {"reputation": 699, "user_id": 10173412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b110ca47d2722db5e2619ca0d2a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/10173412/ankur"}, "is_accepted": false, "score": 1, "last_activity_date": 1556579006, "creation_date": 1556579006, "answer_id": 55911859, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam/55911859#55911859", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>I am not very familiar with kotlin but it seems that you need to import <code>import java.lang.Iterable</code> before using it in your code. </p>\n"}, {"comments": [{"owner": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "edited": false, "score": 0, "creation_date": 1557419600, "post_id": 56037692, "comment_id": 98767784, "body": "Thanks @mxm. I tried that but still getting the same <code>IllegalArgumentException</code>.  Added sample code and stacktrace to gist above.  Similar to the other example, <code>MutableList</code> works just fine."}, {"owner": {"reputation": 585, "user_id": 2225100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05fd97f6ceebd7fe39f99305f4f2d763?s=128&d=identicon&r=PG", "display_name": "mxm", "link": "https://stackoverflow.com/users/2225100/mxm"}, "reply_to_user": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "edited": false, "score": 0, "creation_date": 1557738856, "post_id": 56037692, "comment_id": 98851954, "body": "Got it. Thanks for the update! We will look into this."}], "tags": [], "owner": {"reputation": 585, "user_id": 2225100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05fd97f6ceebd7fe39f99305f4f2d763?s=128&d=identicon&r=PG", "display_name": "mxm", "link": "https://stackoverflow.com/users/2225100/mxm"}, "is_accepted": false, "score": 3, "last_activity_date": 1557308364, "creation_date": 1557308364, "answer_id": 56037692, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam/56037692#56037692", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>This looks like a bug in the Beam Kotlin SDK. The Reflection analysis for your <code>@ProcessElement</code> method does not work correctly. You can probably work around this by using <code>ProcessContext ctx</code> instead of using the <code>@Element</code> parameter.</p>\n"}, {"comments": [{"owner": {"reputation": 962, "user_id": 5473669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36798d3580a2113bd6babeeb2f0c666b?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/5473669/maxg"}, "edited": false, "score": 0, "creation_date": 1575682588, "post_id": 59222226, "comment_id": 104659759, "body": "this is not an answer to the question"}, {"owner": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "edited": false, "score": 0, "creation_date": 1575802295, "post_id": 59222226, "comment_id": 104681314, "body": "@HardWorker you should ask a question with some sample code where other can easily run.  I can try to help further with more info."}, {"owner": {"reputation": 390, "user_id": 1088176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ce85a33f90156ca680598f5b9716ff?s=128&d=identicon&r=PG&f=1", "display_name": "KalanyuZ", "link": "https://stackoverflow.com/users/1088176/kalanyuz"}, "edited": false, "score": 0, "creation_date": 1575865755, "post_id": 59222226, "comment_id": 104696056, "body": "@HardWorker Just noticed you are experiencing similar problem. My answer above might be useful to you."}], "tags": [], "owner": {"reputation": 1, "user_id": 12494194, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e34cef867cae79bc0b6e69e9850c4bc3?s=128&d=identicon&r=PG", "display_name": "HardWorker", "link": "https://stackoverflow.com/users/12494194/hardworker"}, "is_accepted": false, "score": 0, "last_activity_date": 1575681736, "creation_date": 1575681736, "answer_id": 59222226, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam/59222226#59222226", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>May I know how to fix the issue when we get the iterable from groupbykey.create(). i could not groupbykey as you did  javalang iterable </p>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 1088176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ce85a33f90156ca680598f5b9716ff?s=128&d=identicon&r=PG&f=1", "display_name": "KalanyuZ", "link": "https://stackoverflow.com/users/1088176/kalanyuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1575865491, "creation_date": 1575865491, "answer_id": 59242531, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam/59242531#59242531", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>For those are experiencing this issue and found their way here, my current workaround to keep writing the pipeline in kotlin is to create a Java static class with function(s) that creates, contains, and processes your Iterable(s). The result (in non-iterable format) can then be passed back to the kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 3101295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229ff95365f50e02fd739e53a725dc16?s=128&d=identicon&r=PG&f=1", "display_name": "AlecBrooks", "link": "https://stackoverflow.com/users/3101295/alecbrooks"}, "is_accepted": false, "score": 4, "last_activity_date": 1584331228, "creation_date": 1584331228, "answer_id": 60700181, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam/60700181#60700181", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>I ran into this problem as well, when using a <code>ParDo</code> following a <code>GroupByKey</code>. It turns out that a <code>@JvmWildcard</code> annotation is needed in the <code>Iterable</code> generic type when writing a transformation that accepts the result of a <code>GroupByKey</code>.</p>\n\n<p>See the contrived example below that reads a file and groups by the first character of each line.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class BeamPipe {\n  class ConcatLines : DoFn&lt;KV&lt;String, Iterable&lt;@JvmWildcard String&gt;&gt;, KV&lt;String, String&gt;&gt;() {\n    @ProcessElement\n    fun processElement(@Element input: KV&lt;String, Iterable&lt;@JvmWildcard String&gt;&gt;, receiver: OutputReceiver&lt;KV&lt;String, String&gt;&gt;) {\n      receiver.output(KV.of(input.key, input.value.joinToString(\"\\n\")))\n    }\n  }\n\n  fun pipe(options: PipelineOptions) {\n    val file =\n        \"testFile.txt\"\n    val p = Pipeline.create(options)\n    p.apply(TextIO.read().from(file))\n        .apply(\"Key lines by first character\",\n            WithKeys.of { line: String -&gt; line[0].toString() }\n                .withKeyType(TypeDescriptors.strings()))\n        .apply(\"Group lines by first character\", GroupByKey.create&lt;String, String&gt;())\n        .apply(\"Concatenate lines\", ParDo.of(ConcatLines()))\n        .apply(\"Write to files\", FileIO.writeDynamic&lt;String, KV&lt;String, String&gt;&gt;()\n            .by { it.key }\n            .withDestinationCoder(StringUtf8Coder.of())\n            .via(Contextful.fn(ProcessFunction { it.value }), TextIO.sink())\n            .to(\"whatever\")\n            .withNaming { key -&gt; FileIO.Write.defaultNaming(key, \".txt\") }\n        )\n    p.run()\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3755, "user_id": 2355087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9891d8ed7bb8f3deccf42058452e7e35?s=128&d=identicon&r=PG", "display_name": "marcoseu", "link": "https://stackoverflow.com/users/2355087/marcoseu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "answer_count": 5, "score": 10, "last_activity_date": 1584331228, "creation_date": 1556562734, "last_edit_date": 1562059147, "question_id": 55908999, "link": "https://stackoverflow.com/questions/55908999/kotlin-iterable-not-supported-in-apache-beam", "title": "Kotlin Iterable not supported in Apache Beam?", "body": "<p>Apache beam seems to be refusing to recognise Kotlin's <code>Iterable</code>.  Here is a sample code:</p>\n\n<pre><code>@ProcessElement\nfun processElement(\n    @Element input: KV&lt;String, Iterable&lt;String&gt;&gt;, receiver: OutputReceiver&lt;String&gt;\n) {\n    val output = input.key + \"|\" + input.value.toString()\n    println(\"output: $output\")\n    receiver.output(output)\n}\n</code></pre>\n\n<p>I get the following weird error:</p>\n\n<pre><code>java.lang.IllegalArgumentException:\n   ...PrintString, @ProcessElement processElement(KV, OutputReceiver), @ProcessElement processElement(KV, OutputReceiver):\n   @Element argument must have type org.apache.beam.sdk.values.KV&lt;java.lang.String, java.lang.Iterable&lt;? extends java.lang.String&gt;&gt;\n</code></pre>\n\n<p>Sure enough, if I replace <code>Iterable</code> with <code>java.lang.Iterable</code>, the same code works just fine.  What am I doing wrong?</p>\n\n<p>Version of depedencies:</p>\n\n<ul>\n<li>kotlin-jvm: <code>1.3.21</code></li>\n<li>org.apache.beam: <code>2.11.0</code></li>\n</ul>\n\n<p>Here is a gist with full codes and stack trace:</p>\n\n<ul>\n<li><a href=\"https://gist.github.com/marcoslin/e1e19afdbacac9757f6974592cfd8d7f#file-apache-beam-iterable-notworking-kt\" rel=\"noreferrer\">https://gist.github.com/marcoslin/e1e19afdbacac9757f6974592cfd8d7f#file-apache-beam-iterable-notworking-kt</a></li>\n</ul>\n\n<p><strong>Update</strong>:</p>\n\n<p>After a bit of trial and error, I found out that while <code>List&lt;String&gt;</code> throws similar exception but <code>MutableList&lt;String&gt;</code> actually works:</p>\n\n<pre><code>class PrintString: DoFn&lt;KV&lt;String, MutableList&lt;String&gt;&gt;, String&gt;() {\n    @ProcessElement\n    fun processElement(\n        @Element input: KV&lt;String, MutableList&lt;String&gt;&gt;, receiver: OutputReceiver&lt;String&gt;\n    ) {\n        val output = input.key + \"|\" + input.value.toString()\n        println(\"output: $output\")\n        receiver.output(output)\n    }\n}\n</code></pre>\n\n<p>So, this reminded me that Kotlin's Immutable collection are actually only interface and that underlying collection is still mutable.  However, attempt to replace <code>Iterable</code> with <code>MutableIterable</code> continue to raise the error.</p>\n\n<p><strong>Update 2</strong>:</p>\n\n<p>I deployed my Kotlin Dataflow job using the <code>MutableList</code> per above and job failed with:</p>\n\n<pre><code>java.lang.RuntimeException: org.apache.beam.sdk.util.UserCodeException: java.lang.ClassCastException:\norg.apache.beam.runners.dataflow.worker.util.BatchGroupAlsoByWindowViaIteratorsFn$WindowReiterable cannot be cast to java.util.List\n    at org.apache.beam.runners.dataflow.worker.GroupAlsoByWindowsParDoFn$1.output(GroupAlsoByWindowsParDoFn.java:184)\n    at org.apache.beam.runners.dataflow.worker.GroupAlsoByWindowFnRunner$1.outputWindowedValue(GroupAlsoByWindowFnRunner.java:102)\n</code></pre>\n\n<p>I had to switch back to use <code>java.lang.Iterable</code>.</p>\n"}, {"tags": ["android", "unit-testing", "kotlin"], "comments": [{"owner": {"reputation": 14060, "user_id": 1008278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d751e2e43f29815d97b9e9f8a40e854?s=128&d=identicon&r=PG", "display_name": "VenomVendor", "link": "https://stackoverflow.com/users/1008278/venomvendor"}, "edited": false, "score": 0, "creation_date": 1556559652, "post_id": 55908353, "comment_id": 98471933, "body": "<code>callbackCaptor</code> is null"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "reply_to_user": {"reputation": 14060, "user_id": 1008278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d751e2e43f29815d97b9e9f8a40e854?s=128&d=identicon&r=PG", "display_name": "VenomVendor", "link": "https://stackoverflow.com/users/1008278/venomvendor"}, "edited": false, "score": 0, "creation_date": 1556559719, "post_id": 55908353, "comment_id": 98471963, "body": "I have seen many articles where the ArgumentCaptor is initialized the way I do it, Im doing it wrong ?"}, {"owner": {"reputation": 1181, "user_id": 3872482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdsSF.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3872482/mike"}, "edited": false, "score": 0, "creation_date": 1556605946, "post_id": 55908353, "comment_id": 98484578, "body": "Try making it <code>callbackCaptor?.capture()</code> or <code>callbackCaptor?.capture()!!</code>. The callback isn&#39;t returning properly I guess"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1556673790, "post_id": 55908353, "comment_id": 98514379, "body": "it isnt working either"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556559662, "creation_date": 1556559530, "last_edit_date": 1556559662, "question_id": 55908353, "link": "https://stackoverflow.com/questions/55908353/unit-testing-failing-with-kotlin-illegalstateexception", "title": "Unit Testing failing with kotlin IllegalStateException", "body": "<p>I'm trying to verify that when I call my createUser interactor in my presenter, a user is created into Firebase. </p>\n\n<p>To do this I simply implemented this test case</p>\n\n<h2>RegisterTest.class</h2>\n\n<pre><code>    @Captor\n    var callbackCaptor: ArgumentCaptor&lt;RegisterInteractor.RegisterCallBack&gt;? = null\n\n    @Mock\n    lateinit var view: RegisterContract.View\n\n    @Mock\n    lateinit var interactor: RegisterInteractor\n    lateinit var presenter: RegisterPresenter\n\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        presenter = RegisterPresenter(interactor)\n        presenter.attachView(view)\n    }\n\n    @Test\n        fun should_SignUpUser(){\n            //give\n            presenter.signUp(\"testUser\",\"testEmail@gmail.com\",\"123456\")\n            //when\n            verify(interactor).createUserWithEmailAndPassword(\"testUser\",\"testEmail@gmail.com\",\"123456\", callbackCaptor!!.capture())\n            callbackCaptor?.value?.onRegistrationSucces()\n            //then\n            verify(view).navigateToMain()\n        }\n</code></pre>\n\n<h2>RegisterInteractor Callback</h2>\n\n<pre><code>interface RegisterInteractor {\n\n    interface RegisterCallBack {\n        fun onRegistrationSucces()\n        fun onRegistrationFailure(errorMsg:String)\n    }\n\n    fun createUserWithEmailAndPassword(fullName:String,email:String,password:String,listener:RegisterCallBack)\n}\n</code></pre>\n\n<h2>RegisterPresenter</h2>\n\n<p>Here is where I call the signUp method to test</p>\n\n<pre><code> override fun signUp(fullName:String, email: String, password: String) {\n        view?.showProgress()\n        registerInteractor?.createUserWithEmailAndPassword(fullName,email, password, object : RegisterInteractor.RegisterCallBack {\n\n                override fun onRegistrationSucces() {\n                    if(isViewAttached()){\n                        view?.navigateToLogin()\n                        view?.hideProgress()\n                    }\n                }\n\n                override fun onRegistrationFailure(errorMsg:String) {\n                    if(isViewAttached()){\n                        view?.showError(errorMsg)\n                        view?.hideProgress()\n                    }\n                }\n\n            })\n    }\n</code></pre>\n\n<h2>RegisterInteractorImpl</h2>\n\n<pre><code>  override fun createUserWithEmailAndPassword(fullName:String,email:String,password:String,listener: RegisterInteractor.RegisterCallBack){\n        FirebaseAuth.getInstance().createUserWithEmailAndPassword(email, password)\n            .addOnCompleteListener { task -&gt;\n                if (task.isSuccessful) {\n                    // Sign in success, set full name and navigate to main.\n                    val user = FirebaseAuth.getInstance().currentUser\n                    val profileUpdates = UserProfileChangeRequest.Builder()\n                        .setDisplayName(fullName)\n                        .build()\n\n                    // Checks if the user is already in the database, if not, it will write it and go to the main activity\n                    user?.updateProfile(profileUpdates)\n                        ?.addOnCompleteListener { updateTask -&gt;\n                            if (updateTask.isSuccessful) {\n                                userRepository.createUser(fullName,email,object : UserRepository.UserRepositoryCallback{\n\n                                    override fun onRemoteSuccess() {\n                                        listener.onRegistrationSucces()\n                                    }\n\n                                    override fun onRemoteFailure(errormsg:String) {\n                                        // Since the task is the one who decides if an user is created or not by checking if the email is not duplicated, this callback has no effect on saving a call to Firestore\n                                    }\n                                })\n\n                            }\n                        }\n\n                } else {\n                    listener.onRegistrationFailure(task.exception?.message!!)\n                }\n            }\n    }\n</code></pre>\n\n<p>And I'm getting a <strong>IllegalStateException</strong> when executing my test, this is the following message I receive</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: callbackCaptor!!.capture() must not\n  be null</p>\n  \n  <p>at\n  com.logintest.presentation.register.presenter.RegisterPresenterTest.should_SignUpUser(RegisterPresenterTest.kt:123)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at\n  org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at\n  org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at\n  org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at\n  org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:363)     at\n  org.junit.runner.JUnitCore.run(JUnitCore.java:137)    at\n  com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at\n  com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at\n  com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at\n  com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)</p>\n</blockquote>\n\n<p>And the line it refers the error is on the test</p>\n\n<pre><code>verify(interactor).createUserWithEmailAndPassword(\"userTest\",\"userEmail@gmail.com\",\"123456\", callbackCaptor!!.capture())\n</code></pre>\n\n<p>Where is this error coming from ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "json", "kotlin"], "comments": [{"owner": {"reputation": 8798, "user_id": 3734116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sms0Y.jpg?s=128&g=1", "display_name": "luckyhandler", "link": "https://stackoverflow.com/users/3734116/luckyhandler"}, "edited": false, "score": 0, "creation_date": 1556559380, "post_id": 55908244, "comment_id": 98471843, "body": "Please post the stacktrace"}, {"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1556559459, "post_id": 55908244, "comment_id": 98471864, "body": "Hi, this might be of interest <a href=\"https://stackoverflow.com/a/36129285/235354\">stackoverflow.com/a/36129285/235354</a>"}, {"owner": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "edited": false, "score": 0, "creation_date": 1556560234, "post_id": 55908244, "comment_id": 98472149, "body": "Caused by: java.io.FileNotFoundException: /document/raw:/storage/emulated/0/Download/reteta.json (No such file or directory)         at java.io.FileInputStream.open0(Native Method)         at java.io.FileInputStream.open(FileInputStream.java:231)         at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:165)         at kotlin.io.FilesKt__FileReadWriteKt.readBytes(FileReadWrite.k&zwnj;&#8203;t:63)         at kotlin.io.FilesKt__FileReadWriteKt.readText(FileReadWrite.kt&zwnj;&#8203;:101)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "edited": false, "score": 0, "creation_date": 1556562719, "post_id": 55908615, "comment_id": 98473275, "body": "Do you have any suggestion on how could i implement that ?"}, {"owner": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "edited": false, "score": 0, "creation_date": 1556563959, "post_id": 55908615, "comment_id": 98473788, "body": "This can not be done . You can not call readText() on that InputStream to read it in as text."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "edited": false, "score": 1, "creation_date": 1556564089, "post_id": 55908615, "comment_id": 98473847, "body": "@TeodorRadu: Ah, sorry, I was mis-remembering. You need to convert the <code>InputStream</code> into a <code>BufferedReader</code>:  <a href=\"https://stackoverflow.com/a/39500046/115145\">stackoverflow.com/a/39500046/115145</a>"}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 2, "last_activity_date": 1556560976, "creation_date": 1556560976, "answer_id": 55908615, "question_id": 55908244, "link": "https://stackoverflow.com/questions/55908244/how-to-read-json-file-from-path-using-kotlin/55908615#55908615", "title": "How to read json file from path using kotlin", "body": "<blockquote>\n  <p>I'm trying to open a file picker in android</p>\n</blockquote>\n\n<p>That is not a file picker. That allows the user to choose a piece of content, which may or may not be a file.</p>\n\n<blockquote>\n  <p>The app crashes after i select the file</p>\n</blockquote>\n\n<p>You are not picking a file. You are picking a piece of content. That content is identified by a <code>Uri</code>, and the scheme of your <code>Uri</code> is <code>content</code>, not <code>file</code>.</p>\n\n<p>Use <code>ContentResolver</code> and <code>openInputStream()</code> to get an <code>InputStream</code> on the content identified by the <code>Uri</code>. You can call <code>readText()</code> on that <code>InputStream</code> to read it in as text.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "is_accepted": true, "score": 0, "last_activity_date": 1556566043, "creation_date": 1556566043, "answer_id": 55909658, "question_id": 55908244, "link": "https://stackoverflow.com/questions/55908244/how-to-read-json-file-from-path-using-kotlin/55909658#55909658", "title": "How to read json file from path using kotlin", "body": "<p>This is my final working code : </p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        val path = data?.data\n        val jsonSelectedFile =  contentResolver.openInputStream(path);\n        val inputAsString = jsonSelectedFile.bufferedReader().use { it.readText() }\n\n        Toast.makeText(this, \"Json: \" +  inputAsString , Toast.LENGTH_LONG).show()\n    }\n</code></pre>\n\n<p>And for calling :</p>\n\n<pre><code> importJsonButton.setOnClickListener {\n            val myFileIntent = Intent()\n                .setType(\"*/*\")\n                .setAction(Intent.ACTION_GET_CONTENT)\n\n            startActivityForResult(myFileIntent,10)\n        }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7230734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c9354b3986982abdcf541fecc91b2b?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Radu", "link": "https://stackoverflow.com/users/7230734/teodor-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 55909658, "answer_count": 2, "score": 2, "last_activity_date": 1556566043, "creation_date": 1556558985, "question_id": 55908244, "link": "https://stackoverflow.com/questions/55908244/how-to-read-json-file-from-path-using-kotlin", "title": "How to read json file from path using kotlin", "body": "<p>I'm trying to open a file picker in android, select a json file then get the text from it. \nThe app crashes after i select the file because it can not find the path.</p>\n\n<p>I have tried adding external storage read / write permission and changing the path format</p>\n\n<pre><code>/// some Activity code\nval myFileIntent=Intent()\n.setType(\"*/*\")\n.setAction(Intent.ACTION_GET_CONTENT)\nstartActivityForResult(myFileIntent,10)\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        val path = data!!.data.path\n        val jsonContent = File(path).readText()\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-toolbar"], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 8332511, "user_type": "registered", "profile_image": "https://graph.facebook.com/666482663561459/picture?type=large", "display_name": "Noban Hasan", "link": "https://stackoverflow.com/users/8332511/noban-hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556567608, "creation_date": 1556567608, "answer_id": 55909958, "question_id": 55907885, "link": "https://stackoverflow.com/questions/55907885/how-to-stop-share-section-on-toolbar-from-displaying-default-app/55909958#55909958", "title": "How to stop share section on toolbar from displaying default app?", "body": "<ul>\n<li>You can save a <strong>Boolean</strong> Value in <strong>sharedPreference</strong></li>\n<li>In the <strong>onCreate</strong> of Your first launching Activity you check the <strong>sharedPreference</strong> is null or false </li>\n<li>If null you will show the first time portion code</li>\n<li>And You have to set it to (<strong>boolean</strong> firstRun=<em>false</em>) \nThen After all the time your app will get false and will show next What you need.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 3151182, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003020537890/picture?type=large", "display_name": "Ziemi", "link": "https://stackoverflow.com/users/3151182/ziemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556587827, "creation_date": 1556557488, "last_edit_date": 1556587827, "question_id": 55907885, "link": "https://stackoverflow.com/questions/55907885/how-to-stop-share-section-on-toolbar-from-displaying-default-app", "title": "How to stop share section on toolbar from displaying default app?", "body": "<p>I'm looking for a way to stop my share button from changing after first use. After first use share \"section\" on toolbar starts dispaying default app icon next to share icon. Below is screenshot showing the transition.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8iYMp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8iYMp.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>My menu_main.xml content:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item android:id=\"@+id/action_create_order\"\n        android:title=\"@string/create_order_title\"\n        android:icon=\"@drawable/ic_add_white_24dp\"\n        android:orderInCategory=\"1\"\n        app:showAsAction=\"ifRoom\"/&gt;\n\n    &lt;item android:id=\"@+id/action_share\"\n        android:title=\"@string/action_share\"\n        android:orderInCategory=\"2\"\n        app:showAsAction=\"ifRoom\"\n        app:actionProviderClass=\"android.support.v7.widget.ShareActionProvider\"\n        /&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>And my Kotlin code:</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.menu_main, menu)\n        val menuItem = menu.findItem(R.id.action_share);\n        shareActionProvider = MenuItemCompat.getActionProvider(menuItem) as \n        ShareActionProvider\n        setShareActionIntent(\"Want to join me for pizza?\")\n        return super.onCreateOptionsMenu(menu)\n    }\n\nprivate fun setShareActionIntent(text: String){\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"text/plain\"\n        intent.putExtra(Intent.EXTRA_TEXT, text)\n        shareActionProvider!!.setShareIntent(intent)\n    }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 0, "last_activity_date": 1556557815, "creation_date": 1556557815, "answer_id": 55907966, "question_id": 55907426, "link": "https://stackoverflow.com/questions/55907426/generating-kotlin-interface-class-from-java-generates-errors/55907966#55907966", "title": "Generating Kotlin interface class from Java generates errors", "body": "<p>Using <code>var</code>, both a get/set method will be generated for use in Java. For <code>val</code> however, only a get method is provided (since val implies read-only). You can just consolidate to two <code>var</code>s to match the Java implementation:</p>\n\n<pre><code>interface ValueFormElement : BaseElement {\n  var value: Pair&lt;Boolean, Hashtable&lt;String, String&gt;&gt;\n  var name: String\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1556803508, "creation_date": 1556803508, "answer_id": 55953518, "question_id": 55907426, "link": "https://stackoverflow.com/questions/55907426/generating-kotlin-interface-class-from-java-generates-errors/55953518#55953518", "title": "Generating Kotlin interface class from Java generates errors", "body": "<p>Java code using this Kotlin interface will still see getters and setters, same as before, so they won't be affected. Only the Kotlin code will be. And if you aren't prepared to fix them at the moment, I wouldn't bother converting the interface to Kotlin at all. </p>\n\n<p>While it's possible to write</p>\n\n<pre><code>fun getName(): String\n</code></pre>\n\n<p>etc. in a Kotlin interface, it'll make it <em>less</em> usable than the Java version is. Namely, Kotlin won't let you write <code>x.value</code> or <code>x.name = ...</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 9863033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Codedruid13", "link": "https://stackoverflow.com/users/9863033/codedruid13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556803508, "creation_date": 1556555409, "question_id": 55907426, "link": "https://stackoverflow.com/questions/55907426/generating-kotlin-interface-class-from-java-generates-errors", "title": "Generating Kotlin interface class from Java generates errors", "body": "<p>I hava a Java interface class that has been converted to Kotlin. On Conversion it creates a lot of errors on the other files as the getters and setters are used.</p>\n\n<p>The Java interface class:</p>\n\n<pre><code>public interface ValueFormElement extends BaseElement {\n\n\n    Pair&lt;Boolean, Hashtable&lt;String,String&gt;&gt; getValue();\n\n    String getName();\n\n    void setName(String name);\n    void setValue(String value);\n\n\n}\n</code></pre>\n\n<p>On conversion it removes the getter and am using the getter in other classes. This is the generated Kotlin class</p>\n\n<pre><code>interface ValueFormElement : BaseElement {\n\n\n    val value: Pair&lt;Boolean, Hashtable&lt;String, String&gt;&gt;\n\n    var name: String\n    fun setValue(value: String)\n\n\n}\n</code></pre>\n\n<p>If anyone has a way of implementing or doing it cleanly with get and set without affecting the rest of the code ,please show me or direct me.</p>\n"}, {"tags": ["android", "kotlin", "functional-programming"], "answers": [{"tags": [], "owner": {"reputation": 1685, "user_id": 3891038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXlsK.png?s=128&g=1", "display_name": "Julio E. Rodr&#237;guez Caba&#241;as", "link": "https://stackoverflow.com/users/3891038/julio-e-rodr%c3%adguez-caba%c3%b1as"}, "is_accepted": true, "score": 5, "last_activity_date": 1556554772, "creation_date": 1556554772, "answer_id": 55907268, "question_id": 55906808, "link": "https://stackoverflow.com/questions/55906808/return-is-not-allowed-here-when-returning-inside-a-kotlin-lambda/55907268#55907268", "title": "&quot;return is not allowed here&quot; when returning inside a kotlin lambda", "body": "<p>You can achieve this by labelling the lambda. For example, if you label it with <code>dataUpdated</code>:</p>\n\n<pre><code>private val onDataUpdated: (Resource&lt;List&lt;Int&gt;&gt;) -&gt; Unit = dataUpdated@ {\n    if (it.data.isNullOrEmpty()) {\n        // Handle no data callback and return early.\n        return@dataUpdated\n    }\n\n    // Handle the data update\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8556642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343039be4103ad613de9f9d99cd29a9e?s=128&d=identicon&r=PG&f=1", "display_name": "Dogcatfee", "link": "https://stackoverflow.com/users/8556642/dogcatfee"}, "is_accepted": false, "score": 0, "last_activity_date": 1587357379, "creation_date": 1587357379, "answer_id": 61315194, "question_id": 55906808, "link": "https://stackoverflow.com/questions/55906808/return-is-not-allowed-here-when-returning-inside-a-kotlin-lambda/61315194#61315194", "title": "&quot;return is not allowed here&quot; when returning inside a kotlin lambda", "body": "<p>Usually you'll just put the \"return\" at the bottom of the lambda. Here's an example using Dispatchers.IO:</p>\n\n<pre><code>var res = async(Dispatchers.IO){\n   var text : String? = null\n   if(channel==null) {\n      text = networkRequest(url)\n   }\n   text\n}.await()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10910819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4d64f786f4c5f496b8da7903c4d447?s=128&d=identicon&r=PG&f=1", "display_name": "Salladsmannen", "link": "https://stackoverflow.com/users/10910819/salladsmannen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 0, "accepted_answer_id": 55907268, "answer_count": 2, "score": 2, "last_activity_date": 1587357379, "creation_date": 1556553007, "question_id": 55906808, "link": "https://stackoverflow.com/questions/55906808/return-is-not-allowed-here-when-returning-inside-a-kotlin-lambda", "title": "&quot;return is not allowed here&quot; when returning inside a kotlin lambda", "body": "<p>I use a lambda to handle callbacks from an asynchronous call. I'd like to define the callback outside the calling method to avoid a bulky method, but I can't seem to use early returns within the lambda, which makes the code unnecessarily difficult to read.</p>\n\n<p>I've tried defining the lambda as a variable but returns are not viable inside the lambda.</p>\n\n<p>I've tried defining the lambda inside a function and returning but returns were not viable there either.</p>\n\n<p>For example:</p>\n\n<pre><code> private fun onDataUpdated(): (Resource&lt;List&lt;Int&gt;&gt;) -&gt; Unit =  {\n   if (it.data.isNullOrEmpty()) {          \n     // Handle no data callback and return early.\n     return@onDataUpdated // This is not allowed   \n    }\n\n   // Handle the data update\n   }\n }\n</code></pre>\n\n<p>I've also tried:</p>\n\n<pre><code> private val onDataUpdated: (Resource&lt;List&lt;Int&gt;&gt;) -&gt; Unit =  {\n   if (it.data.isNullOrEmpty()) {          \n     // Handle no data callback and return early.\n     return // This is not allowed   \n    }\n\n   // Handle the data update\n   }\n }\n</code></pre>\n\n<p>I'd like to perform an early return instead of using an else case, to avoid unnecessary indent, but I can't seem to find a way to use returns inside a lambda.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "nosql", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1556619960, "post_id": 55917981, "comment_id": 98491755, "body": "By &quot;querying it twice&quot; you mean making two different calls to firebase and then creating a list with tasks that were fetched on both calls?"}, {"owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1556625854, "post_id": 55917981, "comment_id": 98494759, "body": "I understand that&#39;s a limitation on firebase and I really appreciate your help :) However, I&#39;m not sure if a solution that fetches more documents than my entire collection would be the way to go (considering pricing and reading time)"}, {"owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1556626582, "post_id": 55917981, "comment_id": 98495172, "body": "I thought about having a array of &quot;month-year&quot; so I can do something like this: <code>.whereArrayContains(&quot;months&quot;, &quot;04-2019&quot;)</code>. What do you think about this option?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1556627542, "post_id": 55917981, "comment_id": 98495703, "body": "Currently this is what the docs states. Please also see my updated answer from alternative solutions."}, {"owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1556804010, "post_id": 55917981, "comment_id": 98559183, "body": "Thanks for being so helpful and I&#39;m sorry it took me some time to accept your answer. It turns out the PO on my project decided to have only one date field, but regardless, those are the solutions we have on firebase land."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1556627530, "last_edit_date": 1592644375, "creation_date": 1556616901, "answer_id": 55917981, "question_id": 55906586, "link": "https://stackoverflow.com/questions/55906586/firebase-date-range-query-to-fetch-documents-that-have-stardate-and-enddate/55917981#55917981", "title": "Firebase date range query to fetch documents that have starDate and endDate", "body": "<p>Firestore allows to chain multiple &quot;where()&quot; methods to create more specific queries but only on the same field. As you can probably see in the official documentation regardin <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#query_limitations\" rel=\"nofollow noreferrer\">Query limitations</a>:</p>\n<blockquote>\n<p>Cloud Firestore does not support the following types of queries:</p>\n<ul>\n<li>Queries with range filters on different fields, as described in the previous section.</li>\n</ul>\n</blockquote>\n<p>So range filters on different fields are forbidden.</p>\n<p>To achieve what you want, you need to query your database twice, once to fiter data using  a call to:</p>\n<pre><code>.whereGreaterThanOrEqualTo(&quot;dateFrom&quot;, startDate)\n</code></pre>\n<p>And second using a call to:</p>\n<pre><code>.whereLessThanOrEqualTo(&quot;dateTo&quot;, endDate)\n</code></pre>\n<p>But unfortunately you cannot use them in the same query.</p>\n<p><strong>Edit:</strong></p>\n<p>When we are designing a database schema, basically we structure it for our queries. So beside the above solution in which you can filter on one field in the query, and on the other field in your client-side code, there is also another approach in which you can combine the values of the two range into a single field in some way that will allow your use-case with a single field.</p>\n<p>One of the most successful examples I've seen so far is the combination used in <code>Geohashes</code> to filter on latitude and longitude as explained by Frank van Puffelen in the following video:</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=mx1mMdHBi5Q\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=mx1mMdHBi5Q</a></li>\n</ul>\n<p>Knowing the difference in effort between these two solutions, I'd recommend using the first one.</p>\n<p>There is also a third solution, in which you should to add all tasks from Mar-Apr into a single collection. Then you could query this new collection with:</p>\n<pre><code> db.collection(&quot;tasks-aps-mar&quot;)\n    .whereGreaterThanOrEqualTo(&quot;day&quot;, 1)\n    .whereLessThanOrEqualTo(&quot;day&quot;, 30);\n</code></pre>\n<p>Even a more general solution would be to store the tasks in a collection for each month, and then perform a query to get all the tasks that correspond with the desired month. In your use case, you should query your database to get the documents within one of each collection <code>tasks-mar-2019</code>, <code>tasks-apr-2019</code>, <code>tasks-may-2019</code> and so on.</p>\n<p>Regarding your comment, using arrays won't help you at all since you cannot use range intervals.</p>\n"}], "owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 1, "accepted_answer_id": 55917981, "answer_count": 1, "score": 1, "last_activity_date": 1556627530, "creation_date": 1556552226, "question_id": 55906586, "link": "https://stackoverflow.com/questions/55906586/firebase-date-range-query-to-fetch-documents-that-have-stardate-and-enddate", "title": "Firebase date range query to fetch documents that have starDate and endDate", "body": "<p>I have a collection of tasks on my Firestore database like this:</p>\n\n<pre><code>\"tasks\": {\n    v8NC4GovVOPe21fhwtp0 : {\n        id: \"v8NC4GovVOPe21fhwtp0\"\n        status: 0\n        dateFrom: 30 april 2019 at 00:00:00 UTC-3\n        dateTo: 05 may 2019 at 00:00:00 UTC-3\n        ....\n    },\n    v7NC4GaxVOPe48ftstp1 : {\n        id:\"v7NC4GaxVOPe48ftstp1\"\n        status: 0\n        dateFrom: 29 april 2019 at 00:00:00 UTC-3\n        dateTo: 02 may 2019 at 00:00:00 UTC-3\n        ....\n    }\n}\n</code></pre>\n\n<p>The document has a <code>dateFrom</code> field, which indicates the first date the user can start working on that task and an <code>dateTo</code> field, which indicates the last day the user have to finish that task. </p>\n\n<p>I was trying to get all tasks from April 2019, which means the ones that either <code>dateFrom</code> or <code>dateTo</code> belongs to this month/year (in this example, if the month is April-2019, it must fetch both tasks).</p>\n\n<p>On Android, I get the first date of the chosen month (<code>startDate</code>) and te last date from the chosen month (<code>endDate</code>) and I was trying to do something like:</p>\n\n<pre><code>val missionsCollection = FirebaseFirestore.getInstance()\n        .collection(\"/users\").document(uid).collection(\"tasks\")\n        .whereGreaterThanOrEqualTo(\"dateFrom\", startDate).whereLessThanOrEqualTo(\"dateTo\", endDate)\n</code></pre>\n\n<p>But I get an error saying that <code>All where filters other than whereEqualTo() must be on the same field. But you have filters on 'dateFrom' and 'dateTo'</code>.</p>\n\n<p>I thought about some workarounds, but they all look bad and even though I could not find a nice solution, I'm sure there's gotta be one.</p>\n"}, {"tags": ["kotlin", "mismatch"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae833b56c66fa3352db88b9dd2f4c87?s=128&d=identicon&r=PG&f=1", "display_name": "YellowMaple", "link": "https://stackoverflow.com/users/8302084/yellowmaple"}, "edited": false, "score": 0, "creation_date": 1556584841, "post_id": 55907050, "comment_id": 98479651, "body": "Thanks for  your help. I thought the annotation @Throw would handle the exception when JdbcTemplate returns Null,so I don\u2019t need to handle it myself."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": true, "score": 1, "last_activity_date": 1556553888, "creation_date": 1556553888, "answer_id": 55907050, "question_id": 55906418, "link": "https://stackoverflow.com/questions/55906418/type-inference-failed-in-kotlin-fun/55907050#55907050", "title": "type inference failed in Kotlin fun", "body": "<p><code>JdbcTemplate</code>, I suppose, is being compiled from Java source code file, and in Java any reference can point to <code>null</code>. That's why <code>queryForObject</code> returns a nullable type - Kotlin tends to treat all Java's references return declarations to be nullable (refer to \"<a href=\"https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow noreferrer\">platform types</a>\" for more info).</p>\n\n<p>And if <code>queryForObject</code> returns <code>null</code>, then the mapper function you provide will be just omitted and <code>null</code> will be returned from the function eventually.</p>\n\n<p>It is possible to either make <code>findById</code> function return a nullable type (change the declaration so that it returns an <code>Ingredient?</code>), specify a default object to return if <code>queryForObject</code> returned <code>null</code> (e.g. <code>jdbc.queryForObject(...) ?: DEFAULT_RESPONSE</code>) or make use of force \"unboxing\" to the non-null type (e.g. <code>jdbc.queryForObject(...)!!</code>).</p>\n\n<p>P.S.: it is quite common to get an empty response by id querying (e.g. an item by this id was deleted or so) and repositories often return nullable type or throw an exception in such a case, so personally I'd stick to this solution. But if your design guarantees that an item always be present when queried by id, I'd use the <code>!!</code> to cast nullable type to non-nullable by force.</p>\n"}], "owner": {"reputation": 55, "user_id": 8302084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae833b56c66fa3352db88b9dd2f4c87?s=128&d=identicon&r=PG&f=1", "display_name": "YellowMaple", "link": "https://stackoverflow.com/users/8302084/yellowmaple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 55907050, "answer_count": 1, "score": 1, "last_activity_date": 1556553888, "creation_date": 1556551588, "question_id": 55906418, "link": "https://stackoverflow.com/questions/55906418/type-inference-failed-in-kotlin-fun", "title": "type inference failed in Kotlin fun", "body": "<p>translate a springboot java demo into a kotlin one,and run into a type inference failed problem. </p>\n\n<p>it is a repository fun to get back the target result</p>\n\n<pre><code>package tacocloud.data\n\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.jdbc.core.JdbcTemplate\nimport org.springframework.stereotype.Repository\nimport tacocloud.Ingredient\nimport tacocloud.Type\nimport java.sql.ResultSet\nimport java.sql.SQLException\n\n\n@Repository\nclass JdbcIngredientRepository\n@Autowired\nconstructor( private val jdbc: JdbcTemplate) : IngredientRepository {\n    override fun findAll(): Iterable&lt;Ingredient&gt; {\n        return jdbc.query(\"select id, name, type from Ingredient\"\n        ) { rs, rowNum -&gt; this.mapRowToIngredient(rs, rowNum) }\n    }\n    override fun findById(id: String): Ingredient {\n        return jdbc.queryForObject(\n                \"select id, name, type from Ingredient where id=?\",\n                { rs, rowNum -&gt; mapRowToIngredient(rs, rowNum)}, arrayOf(id))\n    }\n    @Throws(SQLException::class)\n    private fun mapRowToIngredient(rs: ResultSet, rowNum: Int): Ingredient {\n        return Ingredient(\n                rs.getString(\"id\"),\n                rs.getString(\"name\"),\n                Type.valueOf(rs.getString(\"type\")))\n    }\n    override fun save(ingredient: Ingredient): Ingredient {\n        jdbc.update(\n                \"insert into Ingredient (id, name, type) values (?, ?, ?)\",\n                ingredient.id,\n                ingredient.name,\n                ingredient.type.toString())\n        return ingredient\n    }\n}\n</code></pre>\n\n<p>the findById funtion keeps saying that \"Error:(29, 21) Kotlin: Type inference failed. Expected type mismatch: inferred type is Ingredient? but Ingredient was expected\".the delegate funtion mapRowToIngredient(rs: ResultSet, rowNum: Int): Ingredient  has return a Ingredient,not a Ingredient?</p>\n\n<p>any ideas?</p>\n\n<ol>\n<li>List item</li>\n</ol>\n"}, {"tags": ["kotlin", "kotlin-coroutines", "kotlinx.coroutines.channels"], "comments": [{"owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "edited": false, "score": 0, "creation_date": 1556549891, "post_id": 55905245, "comment_id": 98467455, "body": "not sure if this can help but I though I should give you some <a href=\"https://medium.com/@elizarov/blocking-threads-suspending-coroutines-d33e11bf4761\" rel=\"nofollow noreferrer\">hint</a>"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556562574, "post_id": 55905245, "comment_id": 98473213, "body": "I feel like wanting to clear the channel is a bit of a code smell... I feel like it is almost like wanting to cancel the call of a function you have already called. Can you give more context?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556564952, "post_id": 55905245, "comment_id": 98474196, "body": "I would look at either implementing something like an expiry  on each message, or a way of setting some counter for each message and then controlling some greater than offset for your consumer. Messages that are too old or have a sequence less than the offset get dropped instead of processed."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 3, "creation_date": 1556607827, "post_id": 55905245, "comment_id": 98485378, "body": "General note: channels are single-consumer, so you shouldn&#39;t try to find a way to get in from the side and take out messages. The dedicated consumer should be the only one to take them and it should decide when not to take any action."}, {"owner": {"reputation": 4996, "user_id": 1446466, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10323ea92c899813de7c21bf38082525?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1446466/sean"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556698135, "post_id": 55905245, "comment_id": 98519342, "body": "Thank you all for your comments. l&#39;ll rethink the approach, I&#39;ll probably set an expiry or something alike to messages (as @Laurence said) and will have the consumer be the dedicated consumer (as @Marko) said"}], "owner": {"reputation": 4996, "user_id": 1446466, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10323ea92c899813de7c21bf38082525?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1446466/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556548499, "creation_date": 1556547295, "last_edit_date": 1556548499, "question_id": 55905245, "link": "https://stackoverflow.com/questions/55905245/how-to-clear-sent-values-from-coroutines-channel", "title": "How to clear sent values from Coroutine&#39;s Channel?", "body": "<p>Lets say I've sent a few values in a channel,</p>\n\n<pre><code>val channel = Channel&lt;Int&gt;()\nlaunch {\n    for (x in 1..5) channel.send(x * x)\n}\n</code></pre>\n\n<p>How can I \"clear\" them? Meaning consume them without using them</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-architecture-navigation"], "answers": [{"comments": [{"owner": {"reputation": 3385, "user_id": 5701085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbsOs.jpg?s=128&g=1", "display_name": "Asad Ali Choudhry", "link": "https://stackoverflow.com/users/5701085/asad-ali-choudhry"}, "edited": false, "score": 0, "creation_date": 1556546464, "post_id": 55904915, "comment_id": 98465465, "body": "And if it doesn&#39;t work in fragment, and you want to pass that event to fragment from activity, in your activity you must have fragment object when you initialized it, so you can write a method in your fragment, and can call when back button from activity."}, {"owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556584719, "post_id": 55904915, "comment_id": 98479635, "body": "Hi thanks for reply, I don&#39;t know why but onOptionsItemSelected method doesn&#39;t invokes when I click &quot;up button&quot; neither in fragment nor in activity; clicking another options menu invokes it as expected. I also came up with your another way, but this click listener became global for every screen and not just for specific screen (fragment)"}], "tags": [], "owner": {"reputation": 3385, "user_id": 5701085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbsOs.jpg?s=128&g=1", "display_name": "Asad Ali Choudhry", "link": "https://stackoverflow.com/users/5701085/asad-ali-choudhry"}, "is_accepted": false, "score": -1, "last_activity_date": 1556546223, "creation_date": 1556546223, "answer_id": 55904915, "question_id": 55904485, "link": "https://stackoverflow.com/questions/55904485/custom-navigate-up-behavior-for-certain-fragment-using-navigation-component/55904915#55904915", "title": "Custom &quot;navigate up&quot; behavior for certain fragment using Navigation component", "body": "<p>Add click event to toolbar back button in this way</p>\n\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n switch (item.getItemId()) {\ncase android.R.id.home:\n    // Toolbar back button pressed, do something you want    \n\ndefault:\n    return super.onOptionsItemSelected(item);\n  }\n}\n</code></pre>\n\n<p>Another way</p>\n\n<pre><code>  Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n    // Title and subtitle\n    toolbar.setNavigationOnClickListener(new OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            // Toolbar back button pressed, do something you want    \n        }\n    });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 1, "creation_date": 1556584182, "post_id": 55905155, "comment_id": 98479537, "body": "Thank you for your reply, but thing is onOptionsItemSelected method doesn&#39;t invoke when I press &quot;up button&quot;. But it does when I select another menu item in toolbar. Tried both in fragment and in activity"}, {"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "reply_to_user": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556585761, "post_id": 55905155, "comment_id": 98479800, "body": "Can you temporarily replace  <code>onBackPressedDispatcher.onBackPressed()</code> with a log message? Let me know if it is called."}, {"owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556586511, "post_id": 55905155, "comment_id": 98479929, "body": "Sure I logged onOptionsItemSelected and it doesn&#39;t call. Seems like Navigation component handling &quot;up navigation&quot; event internally. What else worth to mention, that onSupportNavigateUp method also doesn&#39;t invoke in Activity"}, {"owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556674897, "post_id": 55905155, "comment_id": 98514556, "body": "FYI onBackPressedDispatcher doesn&#39;t have onBackPressed() method, call handleOnBackPressed()  method from OnBackPressedCallback interface"}, {"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "reply_to_user": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556675556, "post_id": 55905155, "comment_id": 98514664, "body": "<code>getOnBackPressedDispatcher()</code> returns <code>OnBackPressedDispatcher</code> (in kotlin it is <code>onBackPressedDispatcher</code> property) and it has a public method called <code>onBackPressed()</code>. The <code>handleOnBackPressed()</code> must not be called explicitly because it defeats the purpose of having an interface. Btw this is from <code>androix.activity</code>."}, {"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "reply_to_user": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "edited": false, "score": 0, "creation_date": 1556678105, "post_id": 55905155, "comment_id": 98515107, "body": "@RokoSpark you can view the actual framework source <a href=\"https://android.googlesource.com/platform/frameworks/support/+/a5a22718f4d920df72666da8fe2325cfee0bedd7/activity/src/main/java/androidx/activity/OnBackPressedDispatcher.java#131\" rel=\"nofollow noreferrer\">here</a> for <code>OnBackPressedDispatcher</code>."}, {"owner": {"reputation": 1810, "user_id": 426180, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/842588516960b41c058cb11c5d02b1fb?s=128&d=identicon&r=PG&f=1", "display_name": "xarly", "link": "https://stackoverflow.com/users/426180/xarly"}, "edited": false, "score": 0, "creation_date": 1582643099, "post_id": 55905155, "comment_id": 106843266, "body": "This wasn&#39;t working for me, because the <code>onOptionsItemSelected</code> wasn&#39;t been called. To fix that you need to call <code>setHasOptionsMenu(true)</code> in onCreate in your fragment"}], "tags": [], "owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "is_accepted": false, "score": 7, "last_activity_date": 1592473122, "last_edit_date": 1592473122, "creation_date": 1556546989, "answer_id": 55905155, "question_id": 55904485, "link": "https://stackoverflow.com/questions/55904485/custom-navigate-up-behavior-for-certain-fragment-using-navigation-component/55905155#55905155", "title": "Custom &quot;navigate up&quot; behavior for certain fragment using Navigation component", "body": "<p>You need to call <code>onBackPressed()</code> from <code>onBackPressedDispatcher</code> property. Assuming your Toolbar is properly setup you can use the code below in your Activity.</p>\n\n<pre><code>override fun onOptionsItemSelected(menuItem : MenuItem?) : Boolean {\n    if (menuItem.getItemId() == android.R.id.home) {\n        onBackPressedDispatcher.onBackPressed()\n        return true // must return true to consume it here\n\n    }\n    return super.onOptionsItemSelected(menuItem)\n}\n</code></pre>\n\n<p>on Fragment override</p>\n\n<pre><code>override fun onAttach(context: Context) {\n        super.onAttach(context)            \n\n        //enable menu\n        setHasOptionsMenu(true)\n\n        requireActivity()\n                .onBackPressedDispatcher\n                .addCallback(this){\n                   //true means that the callback is enabled\n                    this.isEnabled = true\n                    exitDialog() //dialog to conform exit\n                }\n    }\n</code></pre>\n\n<p>What this does is :</p>\n\n<blockquote>\n  <p>Trigger a call to the currently added OnBackPressedCallback\n  callbacks in reverse order in which they were added. Only if the most \n  <strong>false</strong> from its <code>OnBackPressedCallback#handleOnBackPressed()</code>\n  will any previously added callback be called.</p>\n</blockquote>\n\n<p>I am using AndroidX in my example therefore my import will look like </p>\n\n<p><code>import androidx.appcompat.app.AppCompatActivity</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 6, "creation_date": 1576101770, "post_id": 55930024, "comment_id": 104794033, "body": "Does this have to be set up in an Activity, or can it be in a Fragment?"}, {"owner": {"reputation": 5451, "user_id": 4587527, "user_type": "registered", "profile_image": "https://graph.facebook.com/656830941094290/picture?type=large", "display_name": "Somesh Kumar", "link": "https://stackoverflow.com/users/4587527/somesh-kumar"}, "reply_to_user": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1611816214, "post_id": 55930024, "comment_id": 116572866, "body": "@IgorGanapolsky You  can call activty&#39;s <code>onBackPressed()</code> from <code>onSupportNavigateUp()</code> and it will get override in fragment&#39;s <code>onBackPressedDispatcher()</code>."}], "tags": [], "owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "is_accepted": true, "score": 21, "last_activity_date": 1556674638, "last_edit_date": 1556674638, "creation_date": 1556668160, "answer_id": 55930024, "question_id": 55904485, "link": "https://stackoverflow.com/questions/55904485/custom-navigate-up-behavior-for-certain-fragment-using-navigation-component/55930024#55930024", "title": "Custom &quot;navigate up&quot; behavior for certain fragment using Navigation component", "body": "<p>I found a solution</p>\n\n<p><code>handleOnBackPressed()</code> method invokes only on device's back button click.\nI wonder, why neither <code>onOptionsItemSelected()</code> nor <code>onSupportNavigateUp()</code> methods haven't been called on pressing \"up button\" in toolbar. And the answer is I used</p>\n\n<pre><code>NavigationUI.setupWithNavController(toolbar, navController, appBarConfiguration)\n</code></pre>\n\n<p>in activity to setup toolbar with navigation component.\nAnd that made toolbar responsive for work with navigation internally, pressing \"up button\" haven't invoked any of overridden methods in activity or fragments.</p>\n\n<p>Instead should be used</p>\n\n<pre><code>NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration)\n</code></pre>\n\n<p>That will make actionBar responsive for navigation, thus I can use overridden functions <code>onOptionsItemSelected()</code> and <code>onSupportNavigateUp()</code>\nAnd best place (in my case) to add custom behavior on \"up button\" click for certain screen is</p>\n\n<pre><code>onSupportNavigateUp()\n</code></pre>\n\n<p>of hosted activity, like that</p>\n\n<pre><code>override fun onSupportNavigateUp(): Boolean {\n        val navController = this.findNavController(R.id.mainNavHostFragment)\n        return when(navController.currentDestination?.id) {\n            R.id.destinationOfInterest -&gt; {\n                // custom behavior here \n                true\n            }\n            else -&gt; navController.navigateUp()\n        }\n}\n</code></pre>\n\n<p>But worth to say, that if you want implement custom behavior directly in fragment, answer of @Enzokie should work like a charm</p>\n"}, {"comments": [{"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 1, "creation_date": 1588442694, "post_id": 58418527, "comment_id": 108899989, "body": "This opens a way to `        toolbar.setNavigationOnClickListener {             onBackPressedDispatcher.onBackPressed()         }` - was really helpful in my case, thanks."}, {"owner": {"reputation": 692, "user_id": 4725548, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ed50de5a6079e90287252c9e902c3b24?s=128&d=identicon&r=PG&f=1", "display_name": "Izak", "link": "https://stackoverflow.com/users/4725548/izak"}, "reply_to_user": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1617898240, "post_id": 58418527, "comment_id": 118444356, "body": "@Juan @ror a combination of your answers worked. Thanks. Docs says there should be a call to <code>onBackPressedDispatcher.hasEnabledCallbacks()</code> before calling <code>onBackPressedDispatcher.onBackPressed() </code>"}], "tags": [], "owner": {"reputation": 7645, "user_id": 6401755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xakd.jpg?s=128&g=1", "display_name": "Juan Cruz Soler", "link": "https://stackoverflow.com/users/6401755/juan-cruz-soler"}, "is_accepted": false, "score": 3, "last_activity_date": 1571246000, "creation_date": 1571246000, "answer_id": 58418527, "question_id": 55904485, "link": "https://stackoverflow.com/questions/55904485/custom-navigate-up-behavior-for-certain-fragment-using-navigation-component/58418527#58418527", "title": "Custom &quot;navigate up&quot; behavior for certain fragment using Navigation component", "body": "<p>This set up also works and you won't need to override <code>onSupportNavigateUp</code> in your activity:</p>\n\n<pre><code>NavigationUI.setupWithNavController(toolbar, navController, appBarConfiguration)\ntoolbar.setNavigationOnClickListener {\n    if (navController.currentDestination?.id == R.id.destinationOfInterest) {\n        // Custom behavior here\n    } else {\n        NavigationUI.navigateUp(navController, configuration)\n    }\n}\n</code></pre>\n\n<p>I prefer to set up the <code>Toolbar</code> since it will handle automatically the up navigation and open/close a <code>DrawerLayout</code> if you have one.</p>\n"}], "owner": {"reputation": 465, "user_id": 10914552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1nwdWpt8RSM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZdxgc-L9XSzNSG9M33Z_atEDz_Cw/mo/photo.jpg?sz=128", "display_name": "Roko Spark", "link": "https://stackoverflow.com/users/10914552/roko-spark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6895, "favorite_count": 7, "accepted_answer_id": 55930024, "answer_count": 4, "score": 24, "last_activity_date": 1592473122, "creation_date": 1556544670, "last_edit_date": 1556669353, "question_id": 55904485, "link": "https://stackoverflow.com/questions/55904485/custom-navigate-up-behavior-for-certain-fragment-using-navigation-component", "title": "Custom &quot;navigate up&quot; behavior for certain fragment using Navigation component", "body": "<p>I want to add custom <em>up navigation</em> from fragment using Navigation component</p>\n\n<p>In my <code>build.gradle(app)</code> I use <code>androidx.appcompat:appcompat:1.1.0-alpha04</code> dependency to have access to <code>onBackPressedDispatcher</code> from activity.</p>\n\n<p>So I implemented <code>OnBackPressedCallback</code> in my fragment and\nregistered callback to dispatcher:</p>\n\n<pre><code>requireActivity().onBackPressedDispatcher.addCallback(this)\n</code></pre>\n\n<p>I expected that pressing <em>navigate up</em> in toolbar will call it, but it doesn't. \nPressing device's back button calls it as expected.</p>\n\n<p>Is there a similar way to add some callback in fragment on navigate up action?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>overridden methods <code>onOptionsItemSelected</code> and <code>onSupportNavigateUp</code> doesn't invoked on pressing <em>up button</em> in toolbar</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "edited": false, "score": 0, "creation_date": 1556562320, "post_id": 55906375, "comment_id": 98473099, "body": "thanks for the pointers :)  My overall goal is to basically simulate goroutines with waitgroup. So an execution like this: ``` do_parallelel_operation(); add(a,b); wait_until_parallel_op_is_completed();``` I guess what I could do is, capture the suspend context in which the par operation is invoked, then ``join()``` the job in the same context when I want to &quot;wait&quot;."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "edited": false, "score": 0, "creation_date": 1556608440, "post_id": 55906375, "comment_id": 98485647, "body": "ok... I somehow missed the &quot;go part&quot;... sorry for that... I don&#39;t know what &quot;sync.WaitGroup&quot; is actually doing and I am not so sure whether what you have shown so far in Kotlin is coming close to that... that&#39;s also why I can&#39;t really say anything about your comment now... but.. I think the linked documentation will get you to your answer rather soon... maybe you are looking for <a href=\"https://kotlinlang.org/docs/reference/coroutines/coroutine-context-and-dispatchers.html\" rel=\"nofollow noreferrer\">context and dispatchers</a>? (at least it seems it has similar samples to your problem)"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 8, "last_activity_date": 1556551393, "creation_date": 1556551393, "answer_id": 55906375, "question_id": 55904099, "link": "https://stackoverflow.com/questions/55904099/how-to-wait-for-all-coroutines-to-finish/55906375#55906375", "title": "How to wait for all coroutines to finish?", "body": "<p>Actually for your sample the <code>job.join()</code> is the way to ensure that at this point it waits until the given job is finished. Unfortunately you packed it inside a <code>GlobalScope.launch</code> again, which just puts that waiting in a background thread. Therefore it reaches the <code>done</code> earlier then you expect and on my machine it didn't even print any <code>hello</code> (but it could).</p>\n\n<p>I assume you used <code>launch</code> because <code>join</code> can only be called from a coroutine or another suspending function? For your example it would have been sufficed to just add <code>suspend</code> to <code>main</code>, e.g.:</p>\n\n<pre><code>suspend fun main() {\n  val job = GlobalScope.launch { hello() }\n  job.join()\n  print(\"done\")\n}\n</code></pre>\n\n<p>or you could have used <code>runBlocking</code> and wrap the <code>main</code> with it, e.g.:</p>\n\n<pre><code>fun main() = runBlocking {\n  val job = launch { hello() }      \n  job.join()\n  print(\"done\")\n}\n</code></pre>\n\n<p>Now the disclaimer... you may want to consult the following sources before continuing (if you didn't do already):</p>\n\n<ol>\n<li><a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html#coroutine-basics\" rel=\"noreferrer\">Coroutine basics</a></li>\n<li><a href=\"https://medium.com/@elizarov/the-reason-to-avoid-globalscope-835337445abc\" rel=\"noreferrer\">The reason to avoid GlobalScope</a> by <a href=\"https://stackoverflow.com/users/1051598/roman-elizarov\">Roman Elizarov</a></li>\n<li><a href=\"https://kotlinexpertise.com/kotlin-coroutines-concurrency/\" rel=\"noreferrer\">Concurrent coroutines - Concurrency is not parallelism</a> by <a href=\"https://stackoverflow.com/users/8073652/s1m0nw1\">@s1m0nw1</a></li>\n</ol>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7130, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1556551898, "creation_date": 1556543333, "last_edit_date": 1556551476, "question_id": 55904099, "link": "https://stackoverflow.com/questions/55904099/how-to-wait-for-all-coroutines-to-finish", "title": "How to wait for all coroutines to finish?", "body": "<p>I'm launching a coroutine and I want it to finish before I resume execution of main thread. </p>\n\n<p>My code simplified looks like this:</p>\n\n<pre><code>fun hello() {\n    for (i in 0..100) {\n        println(\"hello\")\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val job = GlobalScope.launch { hello() } //launch parallel \n    GlobalScope.launch { job.join() }  //try to wait for job to finish\n    print(\"done\")\n}\n</code></pre>\n\n<p>The problem is, because <code>job.join()</code> needs to be within a coroutine, the main line of execution is deferred to \"done\", so the output looks like this:</p>\n\n<pre><code>donehello\nhello\nhello\nhello\n</code></pre>\n\n<p>I want to wait for the job to complete, like  using <code>sync.WaitGroup</code> in Go. So my output would deterministically look like this:</p>\n\n<pre><code>hello\nhello\nhello\nhello\n...\ndone\n</code></pre>\n\n<p>How do I accomplish this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1556544396, "creation_date": 1556544396, "answer_id": 55904412, "question_id": 55903777, "link": "https://stackoverflow.com/questions/55903777/how-to-initialize-and-use-chararray-in-kotlin/55904412#55904412", "title": "How to initialize and use charArray in Kotlin", "body": "<p>If you declare your CharArray as it, you must initialize it immediately. Otherwise you can specify that you will initialized it later with the property <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">lateinit</a>, or you can declare your variable as a CharArray and set it to null, or you can use a </p>\n\n<pre><code>var str : CharArray? = null\nvar lateinit str: CharArray\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 651, "user_id": 4075178, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d8b82a00ee0563cbb139427df4f2a3d2?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Pandey", "link": "https://stackoverflow.com/users/4075178/vikas-pandey"}, "edited": false, "score": 0, "creation_date": 1556610164, "post_id": 55905990, "comment_id": 98486489, "body": "size will be known after user input,"}, {"owner": {"reputation": 18913, "user_id": 7130820, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOH4yHyDgeU/AAAAAAAAAAI/AAAAAAAAAKs/P77SRUZBp0c/photo.jpg?sz=128", "display_name": "Andrey Turkovsky", "link": "https://stackoverflow.com/users/7130820/andrey-turkovsky"}, "reply_to_user": {"reputation": 651, "user_id": 4075178, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d8b82a00ee0563cbb139427df4f2a3d2?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Pandey", "link": "https://stackoverflow.com/users/4075178/vikas-pandey"}, "edited": false, "score": 0, "creation_date": 1556611212, "post_id": 55905990, "comment_id": 98487021, "body": "So, I&#39;d recommended to use <code>charArrayOf()</code>. And after user&#39;s input you can set this field to new <code>CharArray</code> with known size"}], "tags": [], "owner": {"reputation": 18913, "user_id": 7130820, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOH4yHyDgeU/AAAAAAAAAAI/AAAAAAAAAKs/P77SRUZBp0c/photo.jpg?sz=128", "display_name": "Andrey Turkovsky", "link": "https://stackoverflow.com/users/7130820/andrey-turkovsky"}, "is_accepted": false, "score": 3, "last_activity_date": 1556549926, "creation_date": 1556549926, "answer_id": 55905990, "question_id": 55903777, "link": "https://stackoverflow.com/questions/55903777/how-to-initialize-and-use-chararray-in-kotlin/55905990#55905990", "title": "How to initialize and use charArray in Kotlin", "body": "<p>You can initialize it this way:</p>\n\n<pre><code>var str : CharArray = CharArray(3) //if you know size\nvar str : CharArray = charArrayOf() //creates empty array\nvar str : CharArray? = null //makes your array nullable\n</code></pre>\n\n<p>Or you can use <code>lateinit</code> for initializing later</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1556560713, "creation_date": 1556560713, "answer_id": 55908561, "question_id": 55903777, "link": "https://stackoverflow.com/questions/55903777/how-to-initialize-and-use-chararray-in-kotlin/55908561#55908561", "title": "How to initialize and use charArray in Kotlin", "body": "<p>You have declared a variable of type <code>CharArray</code>, but haven't assigned it with any instance. </p>\n\n<p>Before you can set elements of that <code>CharArray</code>, you have to create an instance of <code>CharArray</code>. It looks like you know the size of that array in advance, then you can use the following array constructor:</p>\n\n<pre><code>// creates an instance of CharArray of 4 elements, filled with \\u0000 chars\nval str = CharArray(4)  \n\n// after that you can set elements in the array\n</code></pre>\n\n<p>Bonus point: if you have a function that can provide an array element value given its index you can use the similar constructor to create instance and initialized its elements at once:</p>\n\n<pre><code>val str = CharArray(4) { index -&gt; \n    array[i + index][j]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 236, "user_id": 2188312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f37baccba598f3a59c7a80296a02a5?s=128&d=identicon&r=PG&f=1", "display_name": "Janin", "link": "https://stackoverflow.com/users/2188312/janin"}, "is_accepted": false, "score": 0, "last_activity_date": 1611865082, "creation_date": 1611865082, "answer_id": 65944604, "question_id": 55903777, "link": "https://stackoverflow.com/questions/55903777/how-to-initialize-and-use-chararray-in-kotlin/65944604#65944604", "title": "How to initialize and use charArray in Kotlin", "body": "<p>There are many ways to initialize arrays in Kotlin.  The easiest, if all values are the same (here I'm using blanks), is this:</p>\n<pre><code>var chars = CharArray(26) { ' ' }\n</code></pre>\n<p>If you have a specific set of characters (here I made it a constant), I found this to be an easy way:</p>\n<pre><code>val CHARS = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toCharArray()\n</code></pre>\n<p>If you want to copy one to another (clone), you can do this:</p>\n<pre><code>val array2 = CharArray(array.size) { i -&gt; array[i] }\n</code></pre>\n<p>In the example you gave above, you're trying to initialize an array of CharArray.  Not sure if that's what you really want, but you can do it this way (I have an array of 25 items, each of which is an array with 5 blanks):</p>\n<pre><code>var array2D = Array&lt;CharArray&gt;(25) { CharArray(5) { ' ' } } \n</code></pre>\n"}], "owner": {"reputation": 651, "user_id": 4075178, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d8b82a00ee0563cbb139427df4f2a3d2?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Pandey", "link": "https://stackoverflow.com/users/4075178/vikas-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1893, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1611865082, "creation_date": 1556542179, "last_edit_date": 1606247621, "question_id": 55903777, "link": "https://stackoverflow.com/questions/55903777/how-to-initialize-and-use-chararray-in-kotlin", "title": "How to initialize and use charArray in Kotlin", "body": "<p>I have this code</p>\n\n<pre><code> var str : CharArray\n\n\nvar t =0\nfor (k in i..i+3) {\n    str[t++] = array[k][j]\n</code></pre>\n\n<p>and it says str must be initialized, i don't know how to initialize.</p>\n\n<p>I tried to initialize like this, but it says type mismatch, </p>\n\n<pre><code>var array: Array&lt;CharArray&gt; = arrayOf(\"India\");\n</code></pre>\n\n<p><strong>Type inference failed. Expected type mismatch: \nrequired:\nArray\nfound:\nArray</strong></p>\n"}, {"tags": ["kotlin", "libgdx", "box2d"], "comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556563193, "post_id": 55903552, "comment_id": 98473480, "body": "You are not doing anything with bullet position other than applying a force to the bullets when you fire them?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556563809, "post_id": 55903552, "comment_id": 98473723, "body": "Also, are you using a contact listener, or are you iterating and checking contacts?"}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556565592, "post_id": 55903552, "comment_id": 98474428, "body": "@Laurence No, I am not setting the bullet&#39;s (or player&#39;s, for that matter) position manually, I only apply a force when I fire them. And yes, I am using a <code>ContactListener</code>, overriding the <code>beginContact(contact: Contact)</code> function."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556566009, "post_id": 55903552, "comment_id": 98474581, "body": "It looks like it is some section of the wall that remains &quot;broken&quot;. In your collision listener, your bullet and wall fixtures will not always be the same arguments. You are definitely destroying or manipulating the bullet in your collisions?"}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556567654, "post_id": 55903552, "comment_id": 98475177, "body": "@Laurence If you are asking if I check whether the bodies from the contact are a platform and a bullet, yes, I am checking. I keep the entity that owns that body in its <code>userData</code> and check if it <code>is Platform</code> or <code>is Bullet</code>. And yes, I am definitely destroying the bullet after it collides with a platform (the <code>world.bodyCount</code> behaves correctly)."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556569286, "post_id": 55903552, "comment_id": 98475874, "body": "Cool  ya just ruling things out. Just to let you know I have built games which shoot constant streams of bullets that bounced, so this is not a box2d issue."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556569370, "post_id": 55903552, "comment_id": 98475898, "body": "Can you turn your own rendering off, just the box2d debug?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556569447, "post_id": 55903552, "comment_id": 98475925, "body": "But the fact that your player and bullets pass through wall. You have done something to the walls physics."}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556571140, "post_id": 55903552, "comment_id": 98476544, "body": "@Laurence <a href=\"https://i.imgur.com/eDEW3UM.mp4\" rel=\"nofollow noreferrer\">Here</a> is how it looks only with the Box2D debug rendering (pretty much the same). I guess the problem is in my code, but I don&#39;t really know what would cause Box2D to behave in this way, for collision to work only in half the platform. What do you mean by doing something to the walls physics? Do you have any examples?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556572552, "post_id": 55903552, "comment_id": 98476983, "body": "Wow. Too weird. Happy to run it and try dig into it if you post a bigger snippet?"}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556572929, "post_id": 55903552, "comment_id": 98477080, "body": "@Laurence Well the game&#39;s <a href=\"https://github.com/Luca1152/gravity-box\" rel=\"nofollow noreferrer\">open-source</a>, if you are willing to go through it, as there isn&#39;t really one snippet I can post."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556690389, "post_id": 55903552, "comment_id": 98517341, "body": "been trying to recreate on desktop...  no luck so far. Are you only seeing the bug on android?"}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556699346, "post_id": 55903552, "comment_id": 98519711, "body": "@Laurence No. But it seems to happen more often at level #25 (after spamming bullets) for some reason, so you could try that."}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1556822824, "post_id": 55903552, "comment_id": 98568644, "body": "@Laurence I managed to fix it! I posted my answer, but as I mentioned there, I am not really sure why I need to do that in order for it to work."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556823052, "post_id": 55903552, "comment_id": 98568737, "body": "Ah dude. Cool. :) I did checkout and change the level id to 25. Got the bug to appear once, but forgot to run in debug... but ya, cool. I still find it really weird that half of a fixture was effected."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1556823087, "post_id": 55903552, "comment_id": 98568754, "body": "Nice little game as well btw :)"}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "is_accepted": true, "score": 2, "last_activity_date": 1557086614, "last_edit_date": 1557086614, "creation_date": 1556822775, "answer_id": 55958474, "question_id": 55903552, "link": "https://stackoverflow.com/questions/55903552/box2d-collision-detection-fails-after-firing-a-lot-of-bullets/55958474#55958474", "title": "Box2D collision detection fails after firing a lot of bullets", "body": "<p>I finally managed to fix it.</p>\n\n<p>The solution I found was to loop through every entity that has a body and call <code>refilter()</code>, which seems to fix it:</p>\n\n<pre><code>engine.getEntitiesFor(Family.one(BodyComponent::class.java).get()).forEach {\n    it.body.body.fixtureList.first().refilter()\n}\n\n</code></pre>\n\n<p>In the future, I could call <code>refilter()</code> only when needed (if I can determine when I have to call it) instead of calling it every frame, but it works for now.</p>\n\n<p>It looks like you should call <code>refilter()</code> after you change the <code>filterData</code> of a body (changing its <code>categoryBits</code> or <code>maskBits</code>) outside the <code>FixtureDef</code>, but I don't seem to be doing that (or maybe I am missing something), so it is a bit weird.</p>\n"}], "owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "accepted_answer_id": 55958474, "answer_count": 1, "score": 1, "last_activity_date": 1557086614, "creation_date": 1556541366, "last_edit_date": 1556543401, "question_id": 55903552, "link": "https://stackoverflow.com/questions/55903552/box2d-collision-detection-fails-after-firing-a-lot-of-bullets", "title": "Box2D collision detection fails after firing a lot of bullets", "body": "<p>I am working on a physics game and encountered a strange bug: sometimes, after firing a lot of bullets, collision detection starts to fail.</p>\n\n<p>As can be seen in the following GIF, the collision works only on half the platform, which is very strange. Also, the Box2D debug renderer is enabled and it can also be seen that the platform is a single body.</p>\n\n<p><img src=\"https://media.giphy.com/media/mF5baL0APsRn6sZJss/giphy.gif\" alt=\"Bug\"></p>\n\n<p>Here is how I get this bug to happen, as it only happens only after firing lots of bullets (in the beginning everything works fine):</p>\n\n<p><img src=\"https://media.giphy.com/media/TEhmr4j5PbneFMD5sA/giphy.gif\" alt=\"Replicate\"></p>\n\n<p><strong>Notes:</strong><br>\n- the bullet has the <code>bullet</code> field set to <code>true</code><br>\n- I set the player's <code>bullet</code> field to <code>true</code>, did not make a difference<br>\n- the player is 1 meter by 1 meter<br>\n- the player and the bullets are <code>DynamicBodies</code> and the platforms are <code>StaticBodies</code><br>\n- the map is near to (0, 0), though it goes a bit in the negatives (-1.5), I doubt it matters<br>\n- the <code>categoryBits</code> and <code>maskBits</code> are correct (the collision should happen, and it does happen, but glitches)<br>\n- after the bullets disappear, the number of bodies is the same as when the game starts (so they are actually destroyed)<br>\n- the <code>World</code>'s gravity is (0, -25f)<br>\n- the game runs at 60fps</p>\n\n<p>Here is the Box2D timestep code, similar to the stepping code from the <a href=\"https://github.com/libgdx/libgdx/wiki/box2d#stepping-the-simulation\" rel=\"nofollow noreferrer\">libGDX wiki</a>:</p>\n\n<pre><code>companion object {\n    private const val TIME_STEP = 1f / 300f\n    private const val VELOCITY_ITERATIONS = 6\n    private const val POSITION_ITERATIONS = 2\n}\n\nprivate var accumulator = 0f\n\noverride fun update(deltaTime: Float) {\n    accumulator += Math.min(deltaTime, 0.25f)\n    while (accumulator &gt;= TIME_STEP) {\n        world.step(TIME_STEP, VELOCITY_ITERATIONS, POSITION_ITERATIONS)\n        accumulator -= TIME_STEP\n    }\n}\n</code></pre>\n\n<p><strong>I tried changing:</strong><br>\n- <code>TIME_STEP</code> to a lower value, like 1/60f<br>\n- <code>VELOCITY_ITERATIONS</code> a bit higher, to 8<br>\n- <code>POSITION_ITERATIONS</code> a bit higher, to 6<br>\n- <code>VELOCITY_ITERATIONS</code> and <code>POSITION_ITERATIONS</code> to 100<br>\nand there was no (obvious) difference.</p>\n\n<p><strong>Concern:</strong><br>\nThe bugged platform seems to start behaving like a bullet (it doesn't collide with other bullets or with the player), at least halfway. So could its <code>categoryBits</code> and <code>maskBits</code> be changed on-the-fly, after a lot of <code>world.createBody()</code> and <code>world.destroyBody()</code>, maybe due to pooling?</p>\n\n<p>So what should I try for the collision not to fail in this case?</p>\n"}, {"tags": ["kotlin", "base64", "hex"], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1556561319, "creation_date": 1556561319, "answer_id": 55908680, "question_id": 55903003, "link": "https://stackoverflow.com/questions/55903003/convert-hex-value-to-base64-using-kotlin/55908680#55908680", "title": "Convert Hex value to Base64 using Kotlin", "body": "<p>It looks like the input string represents 16 bytes, where each byte is coded with two hex digit chars of that string.</p>\n\n<p>On the contrary <code>toByteArray(UTF_8)</code> encodes the string in UTF-8 encoding turning each char into one or more bytes. When you convert these bytes to base64, first you get the longer result and second \u2014 these are completely different bytes.</p>\n\n<p>I suppose the correct way to convert the input hex string into byte array would be:</p>\n\n<pre><code>    val input = \"263e5df7a93ec5f5ea6ac215ed957c30\"\n    val bytes = input.chunked(2).map { it.toInt(16).toByte() }.toByteArray()\n</code></pre>\n\n<p>Then you encode these <code>bytes</code> to base64 as usual.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2158448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b42a6ee84f627d6323ee2c6afb2e75e?s=128&d=identicon&r=PG", "display_name": "yiperu", "link": "https://stackoverflow.com/users/2158448/yiperu"}, "is_accepted": false, "score": 1, "last_activity_date": 1572726414, "creation_date": 1572726414, "answer_id": 58675010, "question_id": 55903003, "link": "https://stackoverflow.com/questions/55903003/convert-hex-value-to-base64-using-kotlin/58675010#58675010", "title": "Convert Hex value to Base64 using Kotlin", "body": "<p>To complete the previous:</p>\n\n<pre><code>val input = \"263e5df7a93ec5f5ea6ac215ed957c30\"\nval bytes = input.chunked(2).map { it.toInt(16).toByte() }.toByteArray()\nval encodeBase64 = Base64.encodeToString(bytes, Base64.DEFAULT)\n</code></pre>\n\n<p>Now you have: Jj5d96k+xfXqasIV7ZV8MA==</p>\n"}], "owner": {"reputation": 1309, "user_id": 898307, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Sf992.jpg?s=128&g=1", "display_name": "Jim Clermonts", "link": "https://stackoverflow.com/users/898307/jim-clermonts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 55908680, "answer_count": 2, "score": 1, "last_activity_date": 1572726414, "creation_date": 1556539446, "question_id": 55903003, "link": "https://stackoverflow.com/questions/55903003/convert-hex-value-to-base64-using-kotlin", "title": "Convert Hex value to Base64 using Kotlin", "body": "<p>I have this value:</p>\n\n<pre><code>263e5df7a93ec5f5ea6ac215ed957c30\n</code></pre>\n\n<p>When I fill this in on: <a href=\"https://8gwifi.org/base64Hex.jsp\" rel=\"nofollow noreferrer\">https://8gwifi.org/base64Hex.jsp</a> (Hex to Base64)\nIt gives me back: </p>\n\n<pre><code>Jj5d96k+xfXqasIV7ZV8MA==\n</code></pre>\n\n<p>This is the expected value. However, when I try this in Kotlin, </p>\n\n<pre><code>val encodedHexB64 = Base64.encodeToString(\"263e5df7a93ec5f5ea6ac215ed957c30\".toByteArray(UTF_8), Base64.NO_WRAP)\n</code></pre>\n\n<p>It gives me back:</p>\n\n<pre><code>MjYzZTVkZjdhOTNlYzVmNWVhNmFjMjE1ZWQ5NTdjMzA=\n</code></pre>\n\n<p>How to get the correct value in Kotlin?</p>\n"}, {"tags": ["kotlin", "instanceof", "kotlintest"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1556538949, "post_id": 55902818, "comment_id": 98461279, "body": "must it be done with a custom matcher? Could just <code>assertTrue { value is ExpectedType }</code>"}, {"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1556539155, "post_id": 55902818, "comment_id": 98461397, "body": "My goal is not to reinvent the wheel. If there is some 1 liner in kotlin-test, I would prefer it in favour of a custom implmentation."}, {"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1556539316, "post_id": 55902818, "comment_id": 98461486, "body": "<code>assertTrue { value is ExpectedType }</code> would work, but it doesn&#39;t read fluid and the exception message doesn&#39;t reveal any information of the actual exception, in case of an failure."}], "answers": [{"comments": [{"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1556539833, "post_id": 55902955, "comment_id": 98461748, "body": "That spacing is weired. I wonder why they added the alias <code>instanceOf(expected: KClass&lt;*&gt;): Matcher&lt;Any?&gt;</code> but not an refied infix version like in the question."}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 1, "creation_date": 1556541223, "post_id": 55902955, "comment_id": 98462543, "body": "<code>shouldBe</code> is comparing against <b>equality</b> of its left and right argument. While they could have overloaded it for matchers, it would be confusing (e.g. what if the right-hand argument is passed as type <code>Any</code>?). I think the circumstance that the same function name always performs the same validation helps understanding, even if less intuitive from an English language point of view."}, {"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1556545756, "post_id": 55902955, "comment_id": 98465047, "body": "FYI <code>shouldBe</code> is implemented to be usable with <code>Matcher</code> &#39;s, so it is not tied to equality checks. Here you can see its implementation: <a href=\"https://github.com/kotlintest/kotlintest/blob/master/kotlintest-assertions/src/commonMain/kotlin/io/kotlintest/dsl.kt#L86\" rel=\"nofollow noreferrer\">dsl.kt</a>"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1556556086, "post_id": 55902955, "comment_id": 98470511, "body": "Thanks! Good to know, even though questionable that <code>x should y</code>, <code>x shouldBe y</code> and <code>x shouldHave y</code> can be used interchangeably with matchers. Apparently they want to make everyone happy..."}, {"owner": {"reputation": 14965, "user_id": 2048448, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9875a5906274bc61f9e3106537a601fc?s=128&d=identicon&r=PG", "display_name": "sksamuel", "link": "https://stackoverflow.com/users/2048448/sksamuel"}, "edited": false, "score": 0, "creation_date": 1557440812, "post_id": 55902955, "comment_id": 98776404, "body": "The idea behind shouldBe and shouldHave was to allow matchers to be named things like &quot;size&quot; so you could then write, a shouldHave size(4). In hindsight it was not a great idea."}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 9, "last_activity_date": 1556539282, "creation_date": 1556539282, "answer_id": 55902955, "question_id": 55902818, "link": "https://stackoverflow.com/questions/55902818/kotlin-test-how-to-test-for-a-specific-type-like-is-y-instance-of-x/55902955#55902955", "title": "kotlin-test: How to test for a specific type like: &quot;is y instance of X&quot;", "body": "<p>In KotlinTest, a lot is about proper spacing :)\nYou can use <code>should</code> to get access to a variety of built-in matchers.</p>\n\n<pre><code>import io.kotlintest.matchers.beInstanceOf\nimport io.kotlintest.should\n\nvalue should beInstanceOf&lt;Type&gt;()\n</code></pre>\n\n<p>There is also an alternative syntax:</p>\n\n<pre><code>value.shouldBeInstanceOf&lt;Type&gt;()\n</code></pre>\n\n<p>See <a href=\"https://github.com/kotlintest/kotlintest/blob/master/doc/matchers.md\" rel=\"noreferrer\">here</a> for more information.</p>\n"}], "owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1973, "favorite_count": 0, "accepted_answer_id": 55902955, "answer_count": 1, "score": 4, "last_activity_date": 1556539551, "creation_date": 1556538779, "last_edit_date": 1556539551, "question_id": 55902818, "link": "https://stackoverflow.com/questions/55902818/kotlin-test-how-to-test-for-a-specific-type-like-is-y-instance-of-x", "title": "kotlin-test: How to test for a specific type like: &quot;is y instance of X&quot;", "body": "<p>How to test if a val/var is of an expected type? </p>\n\n<p>Is there something I am missing in Kotlin Test, like:</p>\n\n<pre><code>value shouldBe instanceOf&lt;ExpectedType&gt;()\n</code></pre>\n\n<p>Here is how I implemented it:</p>\n\n<pre><code>inline fun &lt;reified T&gt; instanceOf(): Matcher&lt;Any&gt; {\n    return object : Matcher&lt;Any&gt; {\n        override fun test(value: Any) =\n                Result(value is T, \"Expected an instance of type: ${T::class} \\n Got: ${value::class}\", \"\")\n\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 7482173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dbmHh.jpg?s=128&g=1", "display_name": "Dipakk Sharma", "link": "https://stackoverflow.com/users/7482173/dipakk-sharma"}, "is_accepted": true, "score": 4, "last_activity_date": 1556595418, "last_edit_date": 1556595418, "creation_date": 1556538804, "answer_id": 55902822, "question_id": 55902784, "link": "https://stackoverflow.com/questions/55902784/how-to-get-back-to-login-screen-once-user-click-on-signout-button-in-kotlin/55902822#55902822", "title": "how to get back to login screen once user click on signout button in kotlin?", "body": "<pre><code>val intent = Intent(context, LoginActivity::class.java)\nintent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)\nstartActivity(intent)\nfinish()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11419673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211258487218210/picture?type=large", "display_name": "Ashish Yadav", "link": "https://stackoverflow.com/users/11419673/ashish-yadav"}, "edited": false, "score": 0, "creation_date": 1556540633, "post_id": 55903024, "comment_id": 98462168, "body": "You have to create multiple activities to simply your app structure. By this, you can also manage login sessions."}], "tags": [], "owner": {"reputation": 11, "user_id": 11419673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211258487218210/picture?type=large", "display_name": "Ashish Yadav", "link": "https://stackoverflow.com/users/11419673/ashish-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1556540609, "last_edit_date": 1556540609, "creation_date": 1556539494, "answer_id": 55903024, "question_id": 55902784, "link": "https://stackoverflow.com/questions/55902784/how-to-get-back-to-login-screen-once-user-click-on-signout-button-in-kotlin/55903024#55903024", "title": "how to get back to login screen once user click on signout button in kotlin?", "body": "<p>You have to create multiple activities to simply your app structure. By this, you can also manage login sessions.\nOnClick logout button set intent to login Screen</p>\n\n<p>signout.setOnClickListener {</p>\n\n<pre><code>        val intent = Intent(this, LoginActivity::class.java)\n                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)\n                startActivity(intent)\n                finish()    \n\n    }\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 8585699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2a3b7ca523966709a1975d6093fafbb?s=128&d=identicon&r=PG&f=1", "display_name": "Khagendra", "link": "https://stackoverflow.com/users/8585699/khagendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 1, "accepted_answer_id": 55902822, "answer_count": 2, "score": 2, "last_activity_date": 1556595433, "creation_date": 1556538669, "last_edit_date": 1556595433, "question_id": 55902784, "link": "https://stackoverflow.com/questions/55902784/how-to-get-back-to-login-screen-once-user-click-on-signout-button-in-kotlin", "title": "how to get back to login screen once user click on signout button in kotlin?", "body": "<p>I am a beginner with <code>kotlin</code> and i want to know how we can take users back to sign in screen using <code>firebase-ui</code> when user clicks on sign out button. i am trying to implement this on android.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\nprivate val RC_SIGN_IN = 123;\nval auth=FirebaseAuth.getInstance()\n// Choose authentication providers\nval providers = arrayListOf(\n    AuthUI.IdpConfig.EmailBuilder().build(),\n    AuthUI.IdpConfig.PhoneBuilder().build(),\n    AuthUI.IdpConfig.GoogleBuilder().build())\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    signout.setOnClickListener{v -&gt;\n        AuthUI.getInstance()\n            .signOut(this)\n            .addOnCompleteListener {\n                // ...\n            }\n    }\n\n    if(auth.currentUser!=null)\n    {\n\n    }\n    else\n    {\n        // Create and launch sign-in intent\n        startActivityForResult(\n            AuthUI.getInstance()\n                .createSignInIntentBuilder()\n                .setAvailableProviders(providers)\n                .build(),\n            RC_SIGN_IN)\n    }\n}\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if (requestCode == RC_SIGN_IN) {\n        val response = IdpResponse.fromResultIntent(data)\n        if (resultCode == Activity.RESULT_OK) {                \n            val user = FirebaseAuth.getInstance().currentUser\n        } else {\n\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "file", "kotlin"], "comments": [{"owner": {"reputation": 95, "user_id": 7361144, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M3qUzLl73Uw/AAAAAAAAAAI/AAAAAAAADX4/MIuMPDWivQc/photo.jpg?sz=128", "display_name": "md shoaib", "link": "https://stackoverflow.com/users/7361144/md-shoaib"}, "edited": false, "score": 0, "creation_date": 1556536689, "post_id": 55902183, "comment_id": 98460153, "body": "Here the old image gets added in to the imageView but new image is added in external storage"}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 1782738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5486e2bfc73c8e34907f34cd325f485b?s=128&d=identicon&r=PG", "display_name": "hartwecm", "link": "https://stackoverflow.com/users/1782738/hartwecm"}, "is_accepted": true, "score": 1, "last_activity_date": 1556538345, "creation_date": 1556538345, "answer_id": 55902706, "question_id": 55902183, "link": "https://stackoverflow.com/questions/55902183/deleting-an-image-file-from-the-file-system-and-then-adding-a-new-image-file-wit/55902706#55902706", "title": "deleting an image file from the file system and then adding a new image file with the same name returns an old image when added using Uri in android", "body": "<p>Glide caches your images, so probably you are loading a cached version of the old image. </p>\n\n<p>As suggested in <a href=\"https://bumptech.github.io/glide/doc/caching.html#cache-invalidation\" rel=\"nofollow noreferrer\">Glide's docs</a> you should add a signature to handle cache invalidation:</p>\n\n<pre><code>Glide.with(yourFragment)\n    .load(yourFileDataModel)\n    .signature(new ObjectKey(yourVersionMetadata))\n    .into(yourImageView);\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7361144, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M3qUzLl73Uw/AAAAAAAAAAI/AAAAAAAADX4/MIuMPDWivQc/photo.jpg?sz=128", "display_name": "md shoaib", "link": "https://stackoverflow.com/users/7361144/md-shoaib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55902706, "answer_count": 1, "score": 1, "last_activity_date": 1556538345, "creation_date": 1556536440, "last_edit_date": 1556536801, "question_id": 55902183, "link": "https://stackoverflow.com/questions/55902183/deleting-an-image-file-from-the-file-system-and-then-adding-a-new-image-file-wit", "title": "deleting an image file from the file system and then adding a new image file with the same name returns an old image when added using Uri in android", "body": "<p>I'm trying to create an application where i am required to add or delete an image simultaneously from image view and external storage. While doing the same, when I try adding the new image into the imageview using Uri, the old image keeps getting added again.</p>\n\n<p>Here is my code</p>\n\n<pre><code>if (resultCode == Activity.RESULT_OK &amp;&amp; requestCode == IMAGE_PICK_CODE_GALLERY) {\n            var selectedImage = data?.data\n            try {\n val bitmap = MediaStore.Images.Media.getBitmap(context?.contentResolver,selectedImage)\n                if(bitmap!=null) {\n                    val imageURI: String = getImageUri(context!!, bitmap)\n                }\n\n\nprivate fun getImageUri(context: Context, inImage: Bitmap): String {\n        var fOut: OutputStream?\n        var path: String? = null\n        var fileName: String? = abc\n        var file: File? = null\n\n                file = File(\n                    Environment.getExternalStorageDirectory().toString() + File.separator + \"myDirectory\",\n                    \"$fileName\"\n                )\n\n            if (file.exists())\n            {\n                file.getCanonicalFile().delete()\n                if (file.exists())\n                {\n                    context?.deleteFile(file.getName())\n                }\n                file.delete()\n            }\n            file.createNewFile() //If file already exists will do nothing\n            fOut = FileOutputStream(file)\n            inImage.compress(Bitmap.CompressFormat.JPEG, 40, fOut)\n            Glide.with(this).load(file).into(imageView!!)\n            fOut.flush()\n            fOut.close()\n           // path = MediaStore.Images.Media.insertImage(context.contentResolver,file.absolutePath,file.getName(),null);\n        } catch (ex: Exception) {\n            ex.printStackTrace()\n        }\n  return file.toString()\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 365, "user_id": 11197211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6290631c4cb098cb2c5e6b28f860d232?s=128&d=identicon&r=PG&f=1", "display_name": "Infusion Analysts", "link": "https://stackoverflow.com/users/11197211/infusion-analysts"}, "edited": false, "score": 0, "creation_date": 1556536131, "post_id": 55901863, "comment_id": 98459902, "body": "you can take two recyclerview ."}], "answers": [{"tags": [], "owner": {"reputation": 1613, "user_id": 10989990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8eSzj.jpg?s=128&g=1", "display_name": "Priyanka", "link": "https://stackoverflow.com/users/10989990/priyanka"}, "is_accepted": false, "score": 0, "last_activity_date": 1556536155, "creation_date": 1556536155, "answer_id": 55902100, "question_id": 55901863, "link": "https://stackoverflow.com/questions/55901863/use-same-layout-for-multiple-recyclerviews-with-different-orientation/55902100#55902100", "title": "Use same layout for multiple RecyclerView&#39;s with different orientation", "body": "<p>try this</p>\n\n<pre><code>&lt;androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"@dimen/_150sdp\"\n    android:layout_height=\"wrap_content\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/ll_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvTitle\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"@dimen/separator\"\n            android:ellipsize=\"end\"\n            tools:text=\"Title\"\n            android:maxLines=\"1\"\n            android:textSize=\"@dimen/normal_text_size\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvDescrip\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:ellipsize=\"end\"\n            android:maxLines=\"1\"\n            tools:text=\"Description\"\n            android:textSize=\"@dimen/small_text_size\" /&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n\n<p>in in adapter...</p>\n\n<p>in vertical <code>recyclerview</code> use this</p>\n\n<pre><code>llMain.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));\nllMain.setOrientation(LinearLayout.VERTICAL);\n</code></pre>\n\n<p>in horizontal <code>recyclerview</code> use this</p>\n\n<pre><code> llMain.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));\n llMain.setOrientation(LinearLayout.HORIZONTAL);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "edited": false, "score": 0, "creation_date": 1556537117, "post_id": 55902101, "comment_id": 98460368, "body": "thanks for your response, this is exactly what I want, just can you tell me which method I should override to use your code? I edited my post to include <code>CustomViewHolder</code>, I am also able to pass <code>isVertical</code> variable"}], "tags": [], "owner": {"reputation": 1649, "user_id": 8370559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEKe9.jpg?s=128&g=1", "display_name": "ikerfah", "link": "https://stackoverflow.com/users/8370559/ikerfah"}, "is_accepted": true, "score": 1, "last_activity_date": 1556541746, "last_edit_date": 1556541746, "creation_date": 1556536162, "answer_id": 55902101, "question_id": 55901863, "link": "https://stackoverflow.com/questions/55901863/use-same-layout-for-multiple-recyclerviews-with-different-orientation/55902101#55902101", "title": "Use same layout for multiple RecyclerView&#39;s with different orientation", "body": "<p>Inside your viewholder , you have to test the orientation (you can pass it as variable to your adapter)\nand then : </p>\n\n<pre><code>val view = LayoutInflater.from(p0.context).inflate(R.layout.item_layout, p0, false)\nif(isVertical){\n// width,height\nview.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));\n}else{\n// Here you need to use your 250dp,\n// You have to convert the code to Kotlin\nfloat width = getResources().getDimension(R.dimen._150sdp);\nview.setLayoutParams(new LayoutParams(width, LayoutParams.WRAP_CONTENT));\n}\n// No need to pass isVertical to the view holder\nreturn CustomViewHolder(view, isVertical)\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "is_accepted": false, "score": 0, "last_activity_date": 1556538745, "creation_date": 1556538745, "answer_id": 55902804, "question_id": 55901863, "link": "https://stackoverflow.com/questions/55901863/use-same-layout-for-multiple-recyclerviews-with-different-orientation/55902804#55902804", "title": "Use same layout for multiple RecyclerView&#39;s with different orientation", "body": "<p>I am able to change <code>layout_width</code> by overriding <code>onCreateViewHolder</code> of <code>RecyclerView.Adapter</code>, like so</p>\n\n<pre><code>class CustomAdapter(val items: ArrayList&lt;Item&gt;, val isVertical: Boolean = false): RecyclerView.Adapter&lt;CustomViewHolder&gt;() {\n\n    override fun onCreateViewHolder(p0: ViewGroup, p1: Int): CustomViewHolder {\n        val view = LayoutInflater.from(p0.context).inflate(R.layout.item_layout, p0, false)\n        if (isVertical) {\n            view.setLayoutParams(ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT))\n        }\n        return CustomViewHolder(view)\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 55902101, "answer_count": 3, "score": 0, "last_activity_date": 1556541746, "creation_date": 1556535235, "last_edit_date": 1556536729, "question_id": 55901863, "link": "https://stackoverflow.com/questions/55901863/use-same-layout-for-multiple-recyclerviews-with-different-orientation", "title": "Use same layout for multiple RecyclerView&#39;s with different orientation", "body": "<p>I am new to Android programming, it is hard to explain, but here is my situation.</p>\n\n<p>I got 2 <code>RecyclerView</code>s both using same layout.xml file in <code>ViewHolder</code></p>\n\n<p>I set a static <code>layout_width</code> which works fine for horizontal scrolling RecyclerView, xml code below</p>\n\n<pre><code>rvFirst.layoutManager = LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5Fivt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Fivt.png\" alt=\"enter image description here\"></a></p>\n\n<p>But 2nd vertically scrolling RecyclerView, where width of cell is not covering the parent,</p>\n\n<p><strong>is it possible</strong> to use same layout file as below and be able to change <code>layout_width</code> to match/fill parent?</p>\n\n<p><a href=\"https://i.stack.imgur.com/V43mg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V43mg.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>&lt;androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"@dimen/_150sdp\"\n    android:layout_height=\"wrap_content\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"@dimen/activity_vertical_margin\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvTitle\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"@dimen/separator\"\n            android:ellipsize=\"end\"\n            tools:text=\"Title\"\n            android:maxLines=\"1\"\n            android:textSize=\"@dimen/normal_text_size\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvDescrip\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:ellipsize=\"end\"\n            android:maxLines=\"1\"\n            tools:text=\"Description\"\n            android:textSize=\"@dimen/small_text_size\" /&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n\n<p>I can pass <code>isVertical: Boolean</code> parameter to both Adapter and ViewHolder, but I have no idea where I should change the layout</p>\n\n<pre><code>class CustomAdapter(val items: ArrayList&lt;Item&gt;, val isVertical: Boolean = false): RecyclerView.Adapter&lt;CustomViewHolder&gt;() {\n\n    override fun onCreateViewHolder(p0: ViewGroup, p1: Int): CustomViewHolder {\n        val view = LayoutInflater.from(p0.context).inflate(R.layout.item_layout, p0, false)\n        return CustomViewHolder(view, isVertical)\n    }\n\n    override fun getItemCount(): Int {\n        return items.size\n    }\n\n    override fun onBindViewHolder(p0: CustomViewHolder, p1: Int) {\n        items.getOrNull(p1)?.let {\n            p0.bindData(it)\n        }\n    }\n}\n\nclass CustomViewHolder(val view: View, isVertical: Boolean) : RecyclerView.ViewHolder(view) {\n\n    private val tvTitle: TextView = view.findViewById(R.id.tvTitle)\n    private val tvDescrip: TextView = view.findViewById(R.id.tvDescrip)\n\n    fun bindData(item: Item) {\n        tvTitle.text = \"Title\"\n        tvDescrip.text = \"Description\"\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "date", "kotlin", "simpledateformat"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1556534126, "post_id": 55901210, "comment_id": 98458979, "body": "Show us your code with a little explanation, please..."}, {"owner": {"reputation": 3142, "user_id": 3178068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb4e98428566e55b8d5e2ec73113646?s=128&d=identicon&r=PG&f=1", "display_name": "TiiJ7", "link": "https://stackoverflow.com/users/3178068/tiij7"}, "edited": false, "score": 1, "creation_date": 1556537279, "post_id": 55901210, "comment_id": 98460458, "body": "Instead of <code>&#39;Z&#39;</code> in your pattern, try putting <code>XXX</code> (without quotes)."}, {"owner": {"reputation": 117, "user_id": 9996550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OZXkpw9lFxs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3-0pmpCUgZtLZ2oMRC0TMW5n72tA/mo/photo.jpg?sz=128", "display_name": "Artur A", "link": "https://stackoverflow.com/users/9996550/artur-a"}, "reply_to_user": {"reputation": 3142, "user_id": 3178068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb4e98428566e55b8d5e2ec73113646?s=128&d=identicon&r=PG&f=1", "display_name": "TiiJ7", "link": "https://stackoverflow.com/users/3178068/tiij7"}, "edited": false, "score": 0, "creation_date": 1556538102, "post_id": 55901210, "comment_id": 98460867, "body": "Thank you @TiiJ7"}], "answers": [{"tags": [], "owner": {"reputation": 3142, "user_id": 3178068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb4e98428566e55b8d5e2ec73113646?s=128&d=identicon&r=PG&f=1", "display_name": "TiiJ7", "link": "https://stackoverflow.com/users/3178068/tiij7"}, "is_accepted": true, "score": 1, "last_activity_date": 1556538832, "creation_date": 1556538832, "answer_id": 55902831, "question_id": 55901210, "link": "https://stackoverflow.com/questions/55901210/how-to-parse-date-without-using-local-time-zone/55902831#55902831", "title": "How to parse date without using Local Time Zone?", "body": "<p>The problem lies with the pattern for your SimpleDateFormat. At the end, you have <code>'Z'</code>, which indicates there should be a literal \"Z\" in the date string to be parsed. However, the \"Z\" at the end of the date has a special meaning, namely <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Coordinated_Universal_Time_(UTC)\" rel=\"nofollow noreferrer\">it signifies the UTC timezone</a>. Hence, you should parse it as a timezone designator so that the correct date value will be obtained. You can do this with the pattern <code>XXX</code> (See <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">JavaDocs</a>).</p>\n\n<pre><code>private val serverTimeDateFormat = SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\",Locale.ENGLISH)\nval iso8601 = \"2019-04-29T10:04:39.322Z\" \nprint( serverTimeDateFormat.parse(iso8601).time ) // 1556532279322\n</code></pre>\n\n<p><a href=\"https://pl.kotl.in/FfnPFEqPm\" rel=\"nofollow noreferrer\">Runnable example on pl.kotl.in</a></p>\n\n<hr>\n\n<p><strong>Addendum</strong>: While the above code should work for you, if at all possible, you should consider adding ThreeTen Android Backport to your project. This will give you access to the newer time classes added by JSR310 to Java/Kotlin (Also available by default in <a href=\"https://developer.android.com/reference/java/time/package-summary\" rel=\"nofollow noreferrer\">Android API >=26</a>). The classes have generally easier API, and use ISO8601 by default, so you wouldn't need any formatter at all:</p>\n\n<pre><code>print( ZonedDateTime.parse(iso8601).toInstant().toEpochMilli() )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "is_accepted": false, "score": 1, "last_activity_date": 1556550347, "last_edit_date": 1556550347, "creation_date": 1556549464, "answer_id": 55905862, "question_id": 55901210, "link": "https://stackoverflow.com/questions/55901210/how-to-parse-date-without-using-local-time-zone/55905862#55905862", "title": "How to parse date without using Local Time Zone?", "body": "<h1>Avoid legacy date-time classes</h1>\n\n<p>You are using <em>terrible</em> date-time classes that were supplanted years ago by the modern <em>java.time</em> classes defined in JSR 310. </p>\n\n<h2><code>Date::toString</code> lies</h2>\n\n<blockquote>\n  <p>why is the result 2 hours behind </p>\n</blockquote>\n\n<p>It is not actually two hours behind. </p>\n\n<p>The problem is that while a  <code>java.util.Date</code> represents a moment in UTC, its <code>toString</code> method dynamically applies the JVM\u2019s current default time zone while generating the text representing the value of the date-time object. While well-intentioned, this anti-feature confusingly creates the illusion of the <code>Date</code> object having that time zone. </p>\n\n<p>In other words, <code>Date::toString</code> lies. One of many poor design decisions found in these legacy classes. And one of many reasons to never use these legacy classes. </p>\n\n<h1><em>java.time</em></h1>\n\n<h2><code>Instant</code></h2>\n\n<p>Parse your count of milliseconds since the epoch reference of first moment of 1970 in UTC as a <code>Instant</code>.</p>\n\n<pre><code>Instant instant = Instant.ofEpochMilli( 1556532279322 );\n</code></pre>\n\n<p>Your other input, a standard ISO 8601 string, can also be parsed as an instant. </p>\n\n<pre><code>Instant instant = Instant.parse( \"2019-04-29T10:04:39.322Z\" ) ;\n</code></pre>\n\n<h1><code>ZonedDateTime</code></h1>\n\n<p>To see the same moment through the wall-clock time used by the people of a particular region (a time zone), apply a <code>ZoneId</code> to get a <code>ZonedDateTime</code> object. </p>\n\n<pre><code>ZoneId z = ZoneId.of( \"America/Montreal\" ) ;\nZonedDateTime zdt = instant.atZone( z ) ) ;\n</code></pre>\n\n<p>Both the <code>instant</code> and <code>zdt</code> objects represent the same simultaneous moment. Two ways of reading the same moment, as two people conversing on the phone in Iceland and Qu\u00e9bec would each see a different time on the clock on the wall while glancing simultaneously. </p>\n"}], "owner": {"reputation": 117, "user_id": 9996550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OZXkpw9lFxs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3-0pmpCUgZtLZ2oMRC0TMW5n72tA/mo/photo.jpg?sz=128", "display_name": "Artur A", "link": "https://stackoverflow.com/users/9996550/artur-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 55902831, "answer_count": 2, "score": 0, "last_activity_date": 1556550347, "creation_date": 1556532740, "last_edit_date": 1556536696, "question_id": 55901210, "link": "https://stackoverflow.com/questions/55901210/how-to-parse-date-without-using-local-time-zone", "title": "How to parse date without using Local Time Zone?", "body": "<p>From Server I get following values:</p>\n\n<pre><code>epochMillis=1556532279322\niso8601=2019-04-29T10:04:39.322Z\n</code></pre>\n\n<p>When I do  <code>serverTimeDateFormat.parse(iso8601)</code>, I get as a result <code>Mon Apr 29 10:04:39 GMT+02:00 2019</code></p>\n\n<p>and for <code>serverTimeDateFormat.parse(iso8601).time</code>, the result is <code>1556525079322</code>, which is different from what I get from the server (2 hours behind from UNIX time), while I am in timeZone + 2 hours.</p>\n\n<p>When I format it back with <code>serverTimeDatFormat.format(1556525079322)</code>, the result is <code>2019-04-29T10:04:39.322Z</code>\nI understand that <code>SimpleDateFormat</code> is using local timezone, but why is the result 2 hours behind and how can I parse the <code>Date</code> without taking into account timezone? I don't understand the logic of all this.</p>\n\n<p>My code:</p>\n\n<pre><code>private val serverTimeDateFormat = SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",Locale.ENGLISH)\nval iso8601 = \"2019-04-29T10:04:39.322Z\" \nval epochMillis = 1556532279322\nserverTimeDateFormat.parse(iso8601).time\n</code></pre>\n"}, {"tags": ["android", "ios", "swift", "kotlin", "flutter"], "answers": [{"comments": [{"owner": {"reputation": 2107, "user_id": 3523298, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8582b755b86448fe143e0d0f26a4f9df?s=128&d=identicon&r=PG&f=1", "display_name": "Zufar Muhamadeev", "link": "https://stackoverflow.com/users/3523298/zufar-muhamadeev"}, "edited": false, "score": 0, "creation_date": 1569857165, "post_id": 55903211, "comment_id": 102722971, "body": "Does it mean we can&#39;t return custom objects?"}], "tags": [], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "is_accepted": true, "score": 10, "last_activity_date": 1556542232, "last_edit_date": 1556542232, "creation_date": 1556540199, "answer_id": 55903211, "question_id": 55900977, "link": "https://stackoverflow.com/questions/55900977/passing-custom-object-through-method-channel-flutter/55903211#55903211", "title": "Passing custom object through method channel flutter", "body": "<p>You can pass data in hash map.</p>\n\n<p><strong>In Android:</strong></p>\n\n<pre><code>result.success(hashMapOf(\n    \"CREDITS\" to user.credits,\n    \"EMAIL\" to user.email,\n    ...\n))\n</code></pre>\n\n<p><strong>In iOS:</strong></p>\n\n<pre><code>let data: [String: Any] = [...]\nresult(data)\n</code></pre>\n\n<p><strong>In Flutter:</strong></p>\n\n<pre><code>final result = await platform.invokeMethod&lt;Map&lt;String, dynamic&gt;&gt;('loginUser', ...);\nfinal credits = result['CREDITS'] as String;\nfinal email = result['EMAIL'] as String;\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 711, "user_id": 6462382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X3PQ514HKNs/AAAAAAAAAAI/AAAAAAAAAEI/7WjwFDh3Zno/photo.jpg?sz=128", "display_name": "elhoucine ayoub", "link": "https://stackoverflow.com/users/6462382/elhoucine-ayoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1567960034, "last_edit_date": 1567960034, "creation_date": 1567957934, "answer_id": 57843454, "question_id": 55900977, "link": "https://stackoverflow.com/questions/55900977/passing-custom-object-through-method-channel-flutter/57843454#57843454", "title": "Passing custom object through method channel flutter", "body": "<p>you can use invokeMapMethod which is an implementation of invokeMethod that can return typed maps.\nlike this : </p>\n\n<pre><code>final result = await platform.invokeMapMethod('loginUser', ...);\n</code></pre>\n\n<p><strong>or you can pass json object as string like that :</strong></p>\n\n<p><strong>in android</strong></p>\n\n<pre><code>platform.success(\n    \"{\\\"CREDITS\\\":\\\"${user.credits}\\\",\\\"EMAIL\\\":\\\"${user.email}\\\",\\\"LAST_ACTIVE\\\":\\\"${user.lastActiveAt}\\\"}\"\n)\n</code></pre>\n\n<p><strong>in flutter</strong></p>\n\n<pre><code>var result = await methodChannel.invokeMethod('loginUser' , '');\nvar json = json.decode(result);\n\nvar credit = json['CREDITS'];\nvar email = json['EMAIL'];\nvar lastActive = json['LAST_ACTIVE'];\n</code></pre>\n"}], "owner": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4693, "favorite_count": 1, "accepted_answer_id": 55903211, "answer_count": 2, "score": 6, "last_activity_date": 1567960034, "creation_date": 1556531897, "last_edit_date": 1556542210, "question_id": 55900977, "link": "https://stackoverflow.com/questions/55900977/passing-custom-object-through-method-channel-flutter", "title": "Passing custom object through method channel flutter", "body": "<p>I am trying to pass a custom object which is of type <code>User</code> from native platform to Flutter. The <code>User</code> class is part of a library and not accessible directly for editing. Here is my android and iOS code implementation for the same. Problem is I am not able to find a solution on how to pass this object through method channels in such a way that I can parse it in the Dart code easily.</p>\n\n<p><strong>Android part</strong>:</p>\n\n<pre><code>private fun loginUser(uid: String, apiKey: String, result: MethodChannel.Result) {\n        MyChat.login(uid, apiKey, object : MyChat.CallbackListener&lt;User&gt;() {\n            override fun onSuccess(user: User) {\n                Log.e(TAG, user.toString())\n                result.success(hashMapOf(\"RESULT\" to true, \"AVATAR\" to user.avatar,\n                        \"CREDITS\" to user.credits,\n                        \"EMAIL\" to user.email,\n                        \"LAST_ACTIVE\" to user.lastActiveAt,\n                        \"NAME\" to user.name,\n                        \"ROLE\" to user.role,\n                        \"STATUS\" to user.status,\n                        \"STATUS_MESSAGE\" to user.statusMessage).toString())\n            }\n\n            override fun onError(p0: MyChatException?) {\n                Log.e(TAG, p0?.message)\n                result.error(\"FAILED\", \"Unable to create login\", null)\n            }\n        })\n    } \n</code></pre>\n\n<p><strong>iOS implementation</strong>:</p>\n\n<pre><code>func loginUser(result: @escaping FlutterResult, uid: String, apiKey: String){\n        MyChat.login(UID: uid, apiKey: apiKey, onSuccess: { (user) in\n            // Login Successful\n            let data: [String: Any] = [\"RESULT\":true,\n                                       \"AVATAR\":user.avatar!,\n                                       \"CREDITS\": user.credits,\n                                       \"EMAIL\": user.email!,\n                                       \"LAST_ACTIVE\":String(user.lastActiveAt),\n                                       \"NAME\":user.name!,\n                                       \"ROLE\":user.role!,\n                                       \"STATUS\":user.status.rawValue,\n                                       \"STATUS_MESSAGE\":user.statusMessage]\n            let jsonData =  try? JSONSerialization.data(withJSONObject: data, options: [.prettyPrinted])\n            result(String(data: jsonData!, encoding: .ascii))\n        }) { (error) in\n            // Login error\n            result(FlutterError(code: \"FAILED\", message:\"Login failed with exception: \" + error.errorDescription, details: nil))\n\n        }\n    }\n</code></pre>\n\n<p><strong>My dart code</strong>:</p>\n\n<pre><code>    Future&lt;String&gt; isUserLoggedIn() async {\n    String status = \"\";\n    try {\n      final String result = await platform\n          .invokeMethod('loginUser', {\"UID\": UID, \"API_KEY\": API_KEY});\n      print(result); //How to parse?\n    status = \"Hello\";\n    } on PlatformException catch (e) {\n      print(\"Exception\");\n      status = e.message;\n    }\n    return status;\n  }\n</code></pre>\n"}, {"tags": ["android", "android-activity", "kotlin", "back-stack", "application-lifecycle"], "comments": [{"owner": {"reputation": 195, "user_id": 5453659, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XvU0k3fEh6A/AAAAAAAAAAI/AAAAAAAAAEI/_SLq-Msg_pY/photo.jpg?sz=128", "display_name": "Viswas Kg", "link": "https://stackoverflow.com/users/5453659/viswas-kg"}, "edited": false, "score": 0, "creation_date": 1556623375, "post_id": 55900437, "comment_id": 98493479, "body": "you can start activity D with startActivityForResult. for those cases you want to close activity C also when D is closed, pass some value to the onActivityResult of activity C and handle it from there."}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 1782738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5486e2bfc73c8e34907f34cd325f485b?s=128&d=identicon&r=PG", "display_name": "hartwecm", "link": "https://stackoverflow.com/users/1782738/hartwecm"}, "is_accepted": false, "score": 1, "last_activity_date": 1556532895, "creation_date": 1556532895, "answer_id": 55901242, "question_id": 55900437, "link": "https://stackoverflow.com/questions/55900437/get-specific-activity-from-backstack/55901242#55901242", "title": "Get specific Activity from backstack", "body": "<p>Using <a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html#aff\" rel=\"nofollow noreferrer\">android:taskAffinity</a> could be an option for you. </p>\n\n<p>You can configure <code>ActivityC</code> and <code>ActivityD</code> with the same affinity. When <code>ActivityD</code> is closed using <a href=\"https://developer.android.com/reference/android/app/Activity.html#finishAffinity()\" rel=\"nofollow noreferrer\"><code>Activity#finishAffinity()</code></a> <code>ActivityD</code> and <code>ActivityC</code> are finished -- <code>ActivityB</code> is resumed with its previous intent.</p>\n"}], "owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556532895, "creation_date": 1556530060, "question_id": 55900437, "link": "https://stackoverflow.com/questions/55900437/get-specific-activity-from-backstack", "title": "Get specific Activity from backstack", "body": "<pre><code>Activity A -&gt; Activity B -&gt; Activity C -&gt; Activity D \n</code></pre>\n\n<p>Let's assume we have this flow. From <code>Activity D</code> I want to come back to <code>Activity B</code>, so my stack should look after I close <code>Activity D</code> like this: </p>\n\n<pre><code>Activity A -&gt; Activity B \n</code></pre>\n\n<p>I have used <code>startActivity(this, Activity B).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)</code> but it does not restore the activity from back stack, it created it again; </p>\n\n<p>When I initially start <code>Activity B</code> from <code>Activity A</code> I had sent some data in bundle which is lost now; So, do I have to sent that data through <code>Activity C</code> -> <code>Activity D</code> so I can have it and send it back to <code>Activity B</code> when I open it form <code>Activity D</code>, or I can some how restore <code>Activity B</code>?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 4341, "user_id": 1152643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/095bf83a49faf8a8c8282020b28dfb5b?s=128&d=identicon&r=PG", "display_name": "Oleg Gryb", "link": "https://stackoverflow.com/users/1152643/oleg-gryb"}, "edited": false, "score": 0, "creation_date": 1556575263, "post_id": 55899972, "comment_id": 98477716, "body": "Is it the whole code? What is the line #44 in your code? Where this error is coming from: compilation or runtime? If it&#39;s latter, provide the whole stack trace.Also, do you have any messages in Log with GREC tag?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "reply_to_user": {"reputation": 4341, "user_id": 1152643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/095bf83a49faf8a8c8282020b28dfb5b?s=128&d=identicon&r=PG", "display_name": "Oleg Gryb", "link": "https://stackoverflow.com/users/1152643/oleg-gryb"}, "edited": false, "score": 0, "creation_date": 1556575549, "post_id": 55899972, "comment_id": 98477773, "body": "@Oleg Gryb ohh ok, marked line error TAG &quot;ERROR LINE&quot; in code, yes this full code."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "edited": false, "score": 0, "creation_date": 1556571855, "post_id": 55900945, "comment_id": 98476780, "body": "Hi, thanks for your reply, I have re-created the code in a new activity specific to the function, but I still have an error in the same place, even with the changes that you sent me, could you help me?"}], "tags": [], "owner": {"reputation": 74, "user_id": 11238317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00cbb021803e4902b13e5202fa20c653?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed farhan", "link": "https://stackoverflow.com/users/11238317/mohammed-farhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556531787, "creation_date": 1556531787, "answer_id": 55900945, "question_id": 55899972, "link": "https://stackoverflow.com/questions/55899972/parameter-imagepath-is-uninitialized-here/55900945#55900945", "title": "Parameter &#39;imagePath&#39; is uninitialized here", "body": "<p>I think your are doing something wrong in saveBitmap() method, try this way</p>\n\n<pre><code>  @Throws(IOException::class)\nprivate fun createScreenShotImageFile(): File {\n    var mediaStorageDir = File(\n        Environment.getExternalStorageDirectory(),\n        \"YourAppName\"\n    )\n    var screenShotDirectory = \"${mediaStorageDir}/screenShots\"\n    val file = File(screenShotDirectory)\n    if (!file.exists()) {\n        file.mkdirs()\n    }\n    val timeStamp = SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(Date())\n    val imageFileName = \"screeShotImage-$timeStamp.png\"\n    return File(screenShotDirectory, imageFileName)\n}\n\nfun saveBitmap(bitmap: Bitmap) {\n    imagePath =  createScreenShotImageFile()\n    val fos: FileOutputStream\n    try {\n        fos = FileOutputStream(imagePath)\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos)\n        fos.flush()\n        fos.close()\n    } catch (e: FileNotFoundException) {\n        Log.e(\"GREC\", e.message, e)\n    } catch (e: IOException) {\n        Log.e(\"GREC\", e.message, e)\n    }\n}\n</code></pre>\n\n<p>by doing this <code>imagePath</code> will be initialized and you wont get this error.</p>\n"}, {"tags": [], "owner": {"reputation": 4341, "user_id": 1152643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/095bf83a49faf8a8c8282020b28dfb5b?s=128&d=identicon&r=PG", "display_name": "Oleg Gryb", "link": "https://stackoverflow.com/users/1152643/oleg-gryb"}, "is_accepted": true, "score": 0, "last_activity_date": 1556576742, "creation_date": 1556576742, "answer_id": 55911602, "question_id": 55899972, "link": "https://stackoverflow.com/questions/55899972/parameter-imagepath-is-uninitialized-here/55911602#55911602", "title": "Parameter &#39;imagePath&#39; is uninitialized here", "body": "<p>Try this:</p>\n\n<pre><code>fun shareIt(imagePath: File? = this.imagePath) {\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10973334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 55911602, "answer_count": 2, "score": 1, "last_activity_date": 1556576742, "creation_date": 1556528278, "last_edit_date": 1556575501, "question_id": 55899972, "link": "https://stackoverflow.com/questions/55899972/parameter-imagepath-is-uninitialized-here", "title": "Parameter &#39;imagePath&#39; is uninitialized here", "body": "<p>I'm having this problem in my code worked on android well now with kotlin I'm having this error, could anyone help?</p>\n\n<p>The 'imagePath' parameter was not initialized here. but I do not know where to put the imagePath to boot properly, does anyone guide me where I can put it in code to work properly?</p>\n\n<p>C:\\COMPARTILHAR\\app\\src\\main\\java\\calculadora\\franquia\\compartilhar\\MainActivity.kt: (44, 40): Parameter 'imagePath' is uninitialized her</p>\n\n<p>EDIT: CLEAN CODE</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private var scrollView: ScrollView? = null\n    private var imagePath: File? = null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        //create bitmap from the ScrollView\n        fun getBitmapFromView(view: View, height: Int, width: Int): Bitmap {\n            val bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)\n            val canvas = Canvas(bitmap)\n            val bgDrawable = view.background\n            if (bgDrawable != null)\n                bgDrawable.draw(canvas)\n            else\n                canvas.drawColor(Color.WHITE)\n            view.draw(canvas)\n            return bitmap\n        }\n\n        ERROR LINE fun shareIt(imagePath: File? = imagePath) {\n\n            val uri = FileProvider.getUriForFile(this@MainActivity, BuildConfig.APPLICATION_ID + \".provider\", imagePath!!)\n\n            val sharingIntent = Intent(Intent.ACTION_SEND)\n            sharingIntent.type = \"image/*\"\n            val shareBody = \"APP\"\n            sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, \"APP\")\n            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody)\n            sharingIntent.putExtra(Intent.EXTRA_STREAM, uri)\n\n            startActivity(Intent.createChooser(sharingIntent, \"SARE VIA\"))\n        }\n        var share = findViewById&lt;View&gt;(R.id.share) as Button\n        share = findViewById&lt;View&gt;(R.id.share) as Button\n        share.setOnClickListener {\n            val bitmap = getBitmapFromView(scrollView!!, scrollView!!.getChildAt(0).height, scrollView!!.getChildAt(0).width)\n            saveBitmap(bitmap)\n            shareIt()\n        }\n    }\n    @Throws(IOException::class)\n    private fun createScreenShotImageFile(): File {\n        var mediaStorageDir = File(\n            Environment.getExternalStorageDirectory(),\n            \"YourAppName\"\n        )\n        var screenShotDirectory = \"${mediaStorageDir}/screenShots\"\n        val file = File(screenShotDirectory)\n        if (!file.exists()) {\n            file.mkdirs()\n        }\n        val timeStamp = SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(Date())\n        val imageFileName = \"screeShotImage-$timeStamp.png\"\n        return File(screenShotDirectory, imageFileName)\n    }\n\n    fun saveBitmap(bitmap: Bitmap) {\n        imagePath =  createScreenShotImageFile()\n        val fos: FileOutputStream\n        try {\n            fos = FileOutputStream(imagePath)\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos)\n            fos.flush()\n            fos.close()\n        } catch (e: FileNotFoundException) {\n            Log.e(\"GREC\", e.message, e)\n        } catch (e: IOException) {\n            Log.e(\"GREC\", e.message, e)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["ssl", "kotlin", "xmpp", "ejabberd", "starttls"], "comments": [{"owner": {"reputation": 1285, "user_id": 211453, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/16e23ad799639e30ef87c145b6df84ce?s=128&d=identicon&r=PG", "display_name": "Wojtek", "link": "https://stackoverflow.com/users/211453/wojtek"}, "edited": false, "score": 0, "creation_date": 1556583987, "post_id": 55899530, "comment_id": 98479499, "body": "Are you sure that your server supports SSL/TLS? Is it required? Which Smack version do you use? There was a fix (<a href=\"https://github.com/igniterealtime/Smack/commit/a9d5cd4a611f47123f9561bc5a81a4555fe7cb04\" rel=\"nofollow noreferrer\">github.com/igniterealtime/Smack/commit/&hellip;</a>) for something possibly related. Please also fix the formatting - one source code section lack formatting."}, {"owner": {"reputation": 57, "user_id": 10804247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp6SpL1vOsA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iMzyRopjiRTH4b44-_pg1yYzKQVg/mo/photo.jpg?sz=128", "display_name": "Amit Ranjan", "link": "https://stackoverflow.com/users/10804247/amit-ranjan"}, "reply_to_user": {"reputation": 1285, "user_id": 211453, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/16e23ad799639e30ef87c145b6df84ce?s=128&d=identicon&r=PG", "display_name": "Wojtek", "link": "https://stackoverflow.com/users/211453/wojtek"}, "edited": false, "score": 0, "creation_date": 1556641476, "post_id": 55899530, "comment_id": 98503861, "body": "Smack Version : implementation &quot;org.igniterealtime.smack:smack-android-extensions:4.2.0&quot;     implementation &quot;org.igniterealtime.smack:smack-tcp:4.2.0&quot;"}, {"owner": {"reputation": 1285, "user_id": 211453, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/16e23ad799639e30ef87c145b6df84ce?s=128&d=identicon&r=PG", "display_name": "Wojtek", "link": "https://stackoverflow.com/users/211453/wojtek"}, "edited": false, "score": 0, "creation_date": 1556655001, "post_id": 55899530, "comment_id": 98509666, "body": "So this should work. Please check other suggestions."}, {"owner": {"reputation": 57, "user_id": 10804247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp6SpL1vOsA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iMzyRopjiRTH4b44-_pg1yYzKQVg/mo/photo.jpg?sz=128", "display_name": "Amit Ranjan", "link": "https://stackoverflow.com/users/10804247/amit-ranjan"}, "reply_to_user": {"reputation": 1285, "user_id": 211453, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/16e23ad799639e30ef87c145b6df84ce?s=128&d=identicon&r=PG", "display_name": "Wojtek", "link": "https://stackoverflow.com/users/211453/wojtek"}, "edited": false, "score": 0, "creation_date": 1556655647, "post_id": 55899530, "comment_id": 98509925, "body": "can you help me to know how to create keystore , i am getting following exception now after editing the code: SMACKException: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found."}, {"owner": {"reputation": 57, "user_id": 10804247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp6SpL1vOsA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iMzyRopjiRTH4b44-_pg1yYzKQVg/mo/photo.jpg?sz=128", "display_name": "Amit Ranjan", "link": "https://stackoverflow.com/users/10804247/amit-ranjan"}, "reply_to_user": {"reputation": 1285, "user_id": 211453, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/16e23ad799639e30ef87c145b6df84ce?s=128&d=identicon&r=PG", "display_name": "Wojtek", "link": "https://stackoverflow.com/users/211453/wojtek"}, "edited": false, "score": 0, "creation_date": 1556658689, "post_id": 55899530, "comment_id": 98510999, "body": "@Wojtek thanks bro , i resolved the issue ,posted the answer below :)"}, {"owner": {"reputation": 711, "user_id": 10121512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aoC6i.gif?s=128&g=1", "display_name": "kapsid", "link": "https://stackoverflow.com/users/10121512/kapsid"}, "edited": false, "score": 1, "creation_date": 1571983515, "post_id": 55899530, "comment_id": 103425840, "body": "Is there any solution to above problem if SSL is not enabled at server but still receiving this error at client side ?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3996936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5136ce24a7cb711b8ac9acc024857eba?s=128&d=identicon&r=PG&f=1", "display_name": "Mahbub Mukul", "link": "https://stackoverflow.com/users/3996936/mahbub-mukul"}, "edited": false, "score": 0, "creation_date": 1594593874, "post_id": 55928695, "comment_id": 111172320, "body": "what should be the type of my_keystore file??"}], "tags": [], "owner": {"reputation": 57, "user_id": 10804247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp6SpL1vOsA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iMzyRopjiRTH4b44-_pg1yYzKQVg/mo/photo.jpg?sz=128", "display_name": "Amit Ranjan", "link": "https://stackoverflow.com/users/10804247/amit-ranjan"}, "is_accepted": false, "score": 2, "last_activity_date": 1556658630, "creation_date": 1556658630, "answer_id": 55928695, "question_id": 55899530, "link": "https://stackoverflow.com/questions/55899530/smack-ssl-tls-required-by-server-but-disabled-in-client/55928695#55928695", "title": "Smack: SSL/TLS required by server but disabled in client", "body": "<p>After lot's of struggle i found the solution :)</p>\n\n<p>MyXmpp Class : </p>\n\n<pre><code>        val serviceName = JidCreate.domainBareFrom(\"localhost\")// if user is register as admin@localhost ,you should have to take only string after \"@\" i.e localhost\n        val config = XMPPTCPConnectionConfiguration.builder()\n        config.setSecurityMode(ConnectionConfiguration.SecurityMode.required);\n        config.setXmppDomain(serviceName);\n        config.setHostAddress( InetAddress.getByName(\"192.168.0.101\"))// your server ip address or for local host ,pc ip address\n        config.setPort(5222)\n        config.setDebuggerEnabled(true)\n        val sslContext = getSSLContext()// setting ssl\n        config.setCustomSSLContext(sslContext)\n        SASLAuthentication.blacklistSASLMechanism(\"SCRAM-SHA-1\")\n        SASLAuthentication.blacklistSASLMechanism(\"DIGEST-MD5\")\n        SASLAuthentication.unBlacklistSASLMechanism(\"PLAIN\")\n        XMPPTCPConnection.setUseStreamManagementResumptiodDefault(true)\n        XMPPTCPConnection.setUseStreamManagementDefault(true)\n        connection = XMPPTCPConnection(config.build())\n        connection?.login(\"admin\", \"localhost\")//ejabber server login id .if you have admin@localhost then take only admin as a username . password i am having as localhost.\n</code></pre>\n\n<p>Enabling the SSL :</p>\n\n<pre><code>@Throws(IOException::class,\n    CertificateException::class, NoSuchAlgorithmException::class, KeyStoreException::class, KeyManagementException::class)\n       private fun getSSLContext():SSLContext{\n        var cf: CertificateFactory? =null\n\n\n        try {\n            cf = CertificateFactory.getInstance(\"X.509\");\n        } catch (e:CertificateException) {\n            Log.d(\"ca\", \"ca=\" + e.message);\n        }\n\n        var input = context.getResources().openRawResource(R.raw.my_keystore); // R.raw.chain is CA Root Certificate added in RAW resources folder\n\n        var caInput =  BufferedInputStream(input);\n        var ca:Certificate?=null\n        try {\n            ca = cf!!.generateCertificate(caInput)\n           // Log.d(\"ca\", \"ca=\" + ((X509Certificate) ca).getSubjectDN())\n\n        }\n        catch (e:Exception){\n            Log.e(\"ca\", e.message);\n        }\n        finally {\n            caInput.close();\n        }\n\n        // Create a KeyStore containing our trusted CAs\n        var keyStoreType = KeyStore.getDefaultType();\n        var keyStore = KeyStore.getInstance(keyStoreType);\n        keyStore.load(null, null);\n        keyStore.setCertificateEntry(\"ca\", ca);\n\n        // Create a TrustManager that trusts the CAs in our KeyStore\n        var tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n        var tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\n        tmf.init(keyStore);\n\n        // Create an SSLContext that uses our TrustManager\n        var sslContext = SSLContext.getInstance(\"TLS\");\n        sslContext.init(null, tmf.getTrustManagers(), null);\n        return sslContext;\n    }\n</code></pre>\n\n<p>Here i got stuck : How to find the my_keystore . Then I found in server.pem file in ejabbered  there you find private key that key i have to paste in the client side(Android Studio->res->raw(folder)->my_keystore(make a empty file like this)) i.e in my_keystore file .Here is the full path to reach server.pem . <code>/opt/ejabberd/conf</code> </p>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 7985871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouWFo.png?s=128&g=1", "display_name": "emad pirayesh", "link": "https://stackoverflow.com/users/7985871/emad-pirayesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1606213731, "creation_date": 1606213731, "answer_id": 64984553, "question_id": 55899530, "link": "https://stackoverflow.com/questions/55899530/smack-ssl-tls-required-by-server-but-disabled-in-client/64984553#64984553", "title": "Smack: SSL/TLS required by server but disabled in client", "body": "<p>in your initialiseConnection() method</p>\n<p>change</p>\n<blockquote>\n<p>config.setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)</p>\n</blockquote>\n<p>to</p>\n<blockquote>\n<p>config.setSecurityMode(ConnectionConfiguration.SecurityMode.ifpossible)</p>\n</blockquote>\n<p>solve this issue for me</p>\n"}], "owner": {"reputation": 57, "user_id": 10804247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wp6SpL1vOsA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iMzyRopjiRTH4b44-_pg1yYzKQVg/mo/photo.jpg?sz=128", "display_name": "Amit Ranjan", "link": "https://stackoverflow.com/users/10804247/amit-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1606213731, "creation_date": 1556526459, "last_edit_date": 1556641233, "question_id": 55899530, "link": "https://stackoverflow.com/questions/55899530/smack-ssl-tls-required-by-server-but-disabled-in-client", "title": "Smack: SSL/TLS required by server but disabled in client", "body": "<p>I am developing one to one chat , but i am facing the issue SSL/TLS required by server but disabled in client ,don't know what i am doing wrong , please help me out to figure out the mistake</p>\n\n<p>My Service Class:</p>\n\n<pre><code>class ChatService:Service() {\n\n    var text = \"\"\n\n    var  chat:Chat?=null\n    companion object {\n        private val DOMAIN = \"localhost\"\n        private val USERNAME = \"admin@localhost\"\n        private val PASSWORD = \"localhost\"\n\n        var cm: ConnectivityManager? = null\n        var xmpp: MyXMPP? = null\n        var ServerchatCreated = false\n\n        fun isNetworkConnected(): Boolean {\n            return cm!!.getActiveNetworkInfo() != null\n        }\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        cm= getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager?\n        xmpp = MyXMPP.getInstance(this, DOMAIN, USERNAME, PASSWORD);\n        xmpp!!.connect(\"onCreate\");\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        return START_NOT_STICKY\n    }\n\n    override fun onBind(intent: Intent?): IBinder? {\n        return LocalBinder&lt;ChatService&gt;(this)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        xmpp!!.disconnect();\n    }\n}\n</code></pre>\n\n<p>My XMPP Class For the connection:</p>\n\n<pre><code>companion object {\n        fun getInstance(context: ChatService, server: String, user: String, pass: String): MyXMPP {\n\n        if (instance == null) {\n            instance = MyXMPP(context, server, user, pass)\n            instanceCreated = true\n        }\n        return instance!!\n\n    }\n}\n\n\nconstructor(context: ChatService, serverAdress: String, logiUser: String, passwordser: String) {\n    this.serverAddress = serverAdress\n    this.loginUser = logiUser\n    this.passwordUser = passwordser\n    this.context = context\n    initialiseConnection()\n}\n\nprivate fun initialiseConnection() {\n            val serviceName = JidCreate.domainBareFrom(\"localhost\")\n            val config = XMPPTCPConnectionConfiguration.builder()\n            config.setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\n            config.setServiceName(serviceName)\n            config.setHostAddress(InetAddress.getByName(\"192.168.0.101\"))//my ip address\n            config.setPort(5222)\n            config.setXmppDomain(serviceName)\n            config.setDebuggerEnabled(true)\n            //System.setProperty(\"smack.debugEnabled\", \"true\")\n            XMPPTCPConnection.setUseStreamManagementResumptiodDefault(true)\n            XMPPTCPConnection.setUseStreamManagementDefault(true)\n            connection = XMPPTCPConnection(config.build())\n            val connectionListener = XMPPConnectionListener()\n            connection!!.addConnectionListener(connectionListener)\n        }\n</code></pre>\n\n<p>Inner class to MyXMPP class:</p>\n\n<pre><code>inner class XMPPConnectionListener : ConnectionListener {\n            override fun connected(connection: XMPPConnection) {\n\n                Log.d(\"xmpp\", \"Connected!\")\n                connected = true\n                if (!connection.isAuthenticated) {\n                    login()\n                }\n            }\n\n            override fun connectionClosed() {\n                if (isToasted)\n\n                    Handler(Looper.getMainLooper()).post(Runnable {\n                        // TODO Auto-generated method stub\n\n                        Toast.makeText(\n                            context, \"ConnectionCLosed!\",\n                            Toast.LENGTH_SHORT\n                        ).show()\n                    })\n                Log.d(\"xmpp\", \"ConnectionCLosed!\")\n                connected = false\n                chat_created = false\n                loggedin = false\n            }\n\n            override fun connectionClosedOnError(arg0: Exception) {\n                if (isToasted)\n\n                    Handler(Looper.getMainLooper()).post(Runnable {\n                        Toast.makeText(\n                            context, \"ConnectionClosedOn Error!!\",\n                            Toast.LENGTH_SHORT\n                        ).show()\n                    })\n                Log.d(\"xmpp\", \"ConnectionClosedOn Error!\")\n                connected = false\n\n                chat_created = false\n                loggedin = false\n            }\n</code></pre>\n\n<p>Login to ejabber server :</p>\n\n<pre><code>fun login() {\n\n            try {\n                connection?.login(loginUser, passwordUser)\n                Log.i(\"LOGIN\", \"Yey! We're connected to the Xmpp server!\")\n\n            } catch (e: XMPPException) {\n                e.printStackTrace()\n            } catch (e: SmackException) {\n                e.printStackTrace()\n            } catch (e: IOException) {\n                e.printStackTrace()\n            } catch (e: Exception) {\n            }\n\n        }\n</code></pre>\n\n<p>Logcat :</p>\n\n<pre><code>D/SMACK: RECV (0): &lt;?xml version='1.0'?&gt;&lt;stream:stream id='1777473137180053616' version='1.0' xml:lang='en' xmlns:stream='http://etherx.jabber.org/streams' from='localhost' xmlns='jabber:client'&gt;\n2019-04-29 13:25:40.247 30893-30976/shop.com.letsshop D/SMACK: RECV (0): &lt;stream:features&gt;&lt;starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'&gt;&lt;required/&gt;&lt;/starttls&gt;&lt;/stream:features&gt;\n2019-04-29 13:25:40.249 30893-30974/shop.com.letsshop E/(onCreate): SMACKException: SSL/TLS required by server but disabled in client\n2019-04-29 13:25:40.251 30893-30976/shop.com.letsshop W/AbstractXMPPConnection: Connection XMPPTCPConnection[not-authenticated] (0) closed with error\n    org.jivesoftware.smack.SmackException$SecurityRequiredByServerException: SSL/TLS required by server but disabled in client\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection.afterFeaturesReceived(XMPPTCPConnection.java:928)\n        at org.jivesoftware.smack.AbstractXMPPConnection.parseFeatures(AbstractXMPPConnection.java:1446)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection.access$1100(XMPPTCPConnection.java:149)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.parsePackets(XMPPTCPConnection.java:1048)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.access$300(XMPPTCPConnection.java:980)\n        at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader$1.run(XMPPTCPConnection.java:996)\n        at java.lang.Thread.run(Thread.java:764)\n2019-04-29 13:25:40.252 30893-30976/shop.com.letsshop D/xmpp: ConnectionClosedOn Error!\n</code></pre>\n"}, {"tags": ["android", "kotlin", "gradle", "proguard", "android-r8"], "answers": [{"tags": [], "owner": {"reputation": 296, "user_id": 2111147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f0911bd1cc90bdf7199e8b29135ef0?s=128&d=identicon&r=PG", "display_name": "Ian Zerny", "link": "https://stackoverflow.com/users/2111147/ian-zerny"}, "is_accepted": false, "score": 0, "last_activity_date": 1556537649, "creation_date": 1556537649, "answer_id": 55902500, "question_id": 55899426, "link": "https://stackoverflow.com/questions/55899426/gradle-5-1-1-update-breaks-my-proguard-rules-in-android/55902500#55902500", "title": "Gradle 5.1.1 update breaks my proguard rules in Android", "body": "<p>Adding as an answer entry, since I can't yet comment :-(</p>\n\n<p>We would need more information to narrow down if this is an issue in R8 or case of missing keep rules. If you <a href=\"https://issuetracker.google.com/issues/new?component=326788&amp;template=1025938\" rel=\"nofollow noreferrer\">file a bug report on R8</a>, including information that could help us investigate, such as your APK if possible, we will do our best to help you out!</p>\n"}, {"tags": [], "owner": {"reputation": 1181, "user_id": 3872482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdsSF.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3872482/mike"}, "is_accepted": true, "score": 0, "last_activity_date": 1557996298, "creation_date": 1557996298, "answer_id": 56164424, "question_id": 55899426, "link": "https://stackoverflow.com/questions/55899426/gradle-5-1-1-update-breaks-my-proguard-rules-in-android/56164424#56164424", "title": "Gradle 5.1.1 update breaks my proguard rules in Android", "body": "<p>Was resolved by adding </p>\n\n<blockquote>\n  <p>-keep class org.jsoup.**</p>\n</blockquote>\n"}], "owner": {"reputation": 1181, "user_id": 3872482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdsSF.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3872482/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 56164424, "answer_count": 2, "score": 0, "last_activity_date": 1587630652, "creation_date": 1556526053, "last_edit_date": 1587630652, "question_id": 55899426, "link": "https://stackoverflow.com/questions/55899426/gradle-5-1-1-update-breaks-my-proguard-rules-in-android", "title": "Gradle 5.1.1 update breaks my proguard rules in Android", "body": "<p>I updated my gradle version to 5.1.1 and suddenly it broke some of my proguard rules (app crashes). An example would be this library that I use:\n<a href=\"https://github.com/LeonardoCardoso/Android-Link-Preview\" rel=\"nofollow noreferrer\">https://github.com/LeonardoCardoso/Android-Link-Preview</a></p>\n\n<p>I applied the proguard rule:</p>\n\n<pre><code>-keeppackagenames org.jsoup.nodes\n</code></pre>\n\n<p>Which was working before (v4.10.1 and below) but now it broke and it gives this error:</p>\n\n<pre><code>java.lang.IllegalStateException: Could not read resource entities-xhtml.properties. Make sure you copy resources for cMb\n</code></pre>\n\n<p>My question is, did you add any special rules when you are updating your version to 5.1.1? I know that starting from this version of Android Studio (3.4) it comes with R8 as well.</p>\n"}, {"tags": ["java", "csv", "kotlin", "jackson-databind"], "comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1556526736, "post_id": 55899247, "comment_id": 98455313, "body": "I think there is an open issue on Jackson for this: <a href=\"https://github.com/FasterXML/jackson-module-kotlin/issues/130\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-module-kotlin/issues/130</a>"}, {"owner": {"reputation": 21, "user_id": 9521257, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220185258086260/picture?type=large", "display_name": "Sachin Maurya", "link": "https://stackoverflow.com/users/9521257/sachin-maurya"}, "reply_to_user": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1556528889, "post_id": 55899247, "comment_id": 98456344, "body": "@Joffrey Thank you for sharing this issue. But the issue that you shared is for the json data. We fixed it by registering the kotlinmodule in the csvmapper. For me with json data it&#39;s working. But the same thing is not working when i am using csv data."}], "owner": {"reputation": 21, "user_id": 9521257, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220185258086260/picture?type=large", "display_name": "Sachin Maurya", "link": "https://stackoverflow.com/users/9521257/sachin-maurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1556525145, "creation_date": 1556525145, "question_id": 55899247, "link": "https://stackoverflow.com/questions/55899247/empty-field-deserialized-to-null-instead-of-taking-default-value", "title": "Empty field deserialized to null instead of taking default value", "body": "<p>Following is my data class</p>\n\n<pre><code>@JsonPropertyOrder(\"firstName\", \"lastName\", \"age\")\ndata class Data(\n@JsonProperty(\"firstName\") val firstName: String = \"Default\",\n@JsonProperty(\"lastName\") val lastName: String,\n@JsonProperty(\"age\") val age: Int\n)\n</code></pre>\n\n<p>When I try to deserialize it with jackson, the object is containing the null values instead of the default.</p>\n\n<pre><code>val input = \",test,10\"\nval reader: ObjectReader = (CsvMapper().registerModule(KotlinModule()) as CsvMapper)\n        .readerWithSchemaFor(Data::class.java)\nval readValue = reader.readValue&lt;Data&gt;(input)\nprint(readValue.toString())`\n</code></pre>\n\n<p>Is there a way i can set the default value in case of null/empty string present in the csv input ?</p>\n"}, {"tags": ["spring-boot", "gradle", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 1, "user_id": 6772501, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MML5xCwHy5g/AAAAAAAAAAI/AAAAAAAAAA4/GE_9RSnCk6A/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6772501/andy"}, "edited": false, "score": 0, "creation_date": 1556521679, "post_id": 55898498, "comment_id": 98453035, "body": "code url is : <a href=\"https://github.com/houshuai0816/gradle-multimodule-kotlin-bug\" rel=\"nofollow noreferrer\">github.com/houshuai0816/gradle-multimodule-kotlin-bug</a>"}, {"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 0, "creation_date": 1556523012, "post_id": 55898498, "comment_id": 98453605, "body": "It seems like the issue is in gradle, is that right? Could you post the relevant gradle snippet too, please?"}, {"owner": {"reputation": 1, "user_id": 6772501, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MML5xCwHy5g/AAAAAAAAAAI/AAAAAAAAAA4/GE_9RSnCk6A/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6772501/andy"}, "reply_to_user": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 0, "creation_date": 1556548965, "post_id": 55898498, "comment_id": 98466937, "body": "<a href=\"https://github.com/gradle/gradle/issues/9310\" rel=\"nofollow noreferrer\">github.com/gradle/gradle/issues/9310</a>  yes\uff0cthis is my issue"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6772501, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MML5xCwHy5g/AAAAAAAAAAI/AAAAAAAAAA4/GE_9RSnCk6A/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6772501/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1556590657, "creation_date": 1556590657, "answer_id": 55913116, "question_id": 55898498, "link": "https://stackoverflow.com/questions/55898498/gradle-kotlin-in-gradle5-2-unresolved-reference-dependtest/55913116#55913116", "title": "Gradle kotlin in Gradle5.2 Unresolved reference: dependtest", "body": "<p>I created two modules, test-test and depend-test.\nThe depend-test project is test-test 's dependency.\nI tried to call the parameters of depend-test, but it failed to compile and package.</p>\n\n<h1>Env</h1>\n\n<ul>\n<li>gradle-5.2.1</li>\n<li>Kotlin 1.3.31</li>\n<li>Springboot 2.1.4</li>\n<li>java 1.8</li>\n</ul>\n\n<h1>step one</h1>\n\n<ul>\n<li>Edit settings.gradle </li>\n</ul>\n\n<pre><code>rootProject.name = 'demo'\ninclude \":depend-test\"\ninclude \":test-test\"\nproject(\":depend-test\").projectDir = file(\"depend/depend-test\")\nproject(\":test-test\").projectDir = file(\"test/test-test\")\n</code></pre>\n\n<ul>\n<li>I used the 1.3.31 version of the kotlin plug-in. The build.gradle file reads as follows</li>\n</ul>\n\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = '1.3.31'\n    }\n    repositories {\n        mavenCentral()\n        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/'}\n        maven { url \"https://plugins.gradle.org/m2/\" }\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n        classpath \"org.jetbrains.kotlin:kotlin-allopen:$kotlinVersion\"\n    }\n}\n\n\nplugins {\n    id 'org.springframework.boot' version '2.1.4.RELEASE'\n    id 'org.jetbrains.kotlin.jvm' version '1.2.71'\n    id 'org.jetbrains.kotlin.plugin.spring' version '1.2.71'\n}\n\n\nallprojects {\n    apply plugin: 'idea'\n    apply plugin: 'kotlin'\n\n    repositories {\n        mavenCentral()\n    }\n}\n\nsubprojects {\n    apply plugin: 'kotlin'\n    apply plugin: 'java'\n    apply plugin: 'eclipse'\n    apply plugin: \"application\"\n    apply plugin: 'org.springframework.boot'\n    apply plugin: 'io.spring.dependency-management'\n\n    repositories {\n        mavenLocal()\n        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/'}\n        maven { url \"https://plugins.gradle.org/m2/\" }\n        mavenCentral()\n        jcenter()\n        maven { url \"http://repo.spring.io/snapshot\" }\n        maven { url \"http://repo.spring.io/milestone\" }\n        maven { url 'http://maven.springframework.org/release' }\n        maven { url 'http://maven.springframework.org/milestone' }\n    }\n\n    version = '1.0'\n    apply plugin: 'io.spring.dependency-management'\n\n    group = 'com.mutil.test'\n    sourceCompatibility = '1.8'\n\n    compileKotlin {\n        kotlinOptions {\n            freeCompilerArgs = ['-Xjsr305=strict']\n            jvmTarget = '1.8'\n        }\n    }\n\n    compileTestKotlin {\n        kotlinOptions {\n            freeCompilerArgs = ['-Xjsr305=strict']\n            jvmTarget = '1.8'\n        }\n    }\n\n    dependencies {\n        implementation 'org.springframework.boot:spring-boot-starter'\n        implementation 'com.fasterxml.jackson.module:jackson-module-kotlin'\n        implementation 'org.jetbrains.kotlin:kotlin-reflect'\n        implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'\n        testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    }\n}\n\ndependencies {\n    subprojects.forEach {\n        archives(it)\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\n</code></pre>\n\n<h1>step two</h1>\n\n<p>build jar for test-test project ,I used two ways, but the results were the same.</p>\n\n<ul>\n<li>terminal use cmd is <code>./gradlew :test-test:bootJar</code></li>\n<li>user IDEA gradle tool </li>\n</ul>\n\n<h1>result</h1>\n\n<p>The class file written by kotlin in the submodule cannot be found.</p>\n\n<p>I do not know if the lack of necessary plug-ins caused the failure to package properly.</p>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 9008002, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bJcWD9fwKSA/AAAAAAAAAAI/AAAAAAAAABk/M1UklNhB5lw/photo.jpg?sz=128", "display_name": "Ivan Baranuk", "link": "https://stackoverflow.com/users/9008002/ivan-baranuk"}, "edited": false, "score": 0, "creation_date": 1593964011, "post_id": 61218698, "comment_id": 110954258, "body": "To be fair <code>jar {enabled=true}</code> is all is needed. bootJar still can be used in case of individual module deployment .  If i understood it correctly: spring boot plugin disabeling <code>jar</code> task by default"}], "tags": [], "owner": {"reputation": 171, "user_id": 1794262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UT7hO.jpg?s=128&g=1", "display_name": "iglen_", "link": "https://stackoverflow.com/users/1794262/iglen"}, "is_accepted": false, "score": 1, "last_activity_date": 1586905455, "creation_date": 1586905455, "answer_id": 61218698, "question_id": 55898498, "link": "https://stackoverflow.com/questions/55898498/gradle-kotlin-in-gradle5-2-unresolved-reference-dependtest/61218698#61218698", "title": "Gradle kotlin in Gradle5.2 Unresolved reference: dependtest", "body": "<p>Try adding this to your build.gradle file</p>\n\n<pre><code>bootJar {\n  enabled = false\n}\n\njar {\n  enabled = true\n}\n</code></pre>\n\n<p>Just in case someone else comes across this problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 6772501, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MML5xCwHy5g/AAAAAAAAAAI/AAAAAAAAAA4/GE_9RSnCk6A/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6772501/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1586905455, "creation_date": 1556521628, "question_id": 55898498, "link": "https://stackoverflow.com/questions/55898498/gradle-kotlin-in-gradle5-2-unresolved-reference-dependtest", "title": "Gradle kotlin in Gradle5.2 Unresolved reference: dependtest", "body": "<p>A multi module project with Kotlin source code, which used to work, stops working after upgrading to Gradle 5.2, because the Kotlin classes from the compile project('depend-test') dependency are not found.</p>\n\n<ol>\n<li>Attempted to change plugin version</li>\n<li>already viewed <a href=\"https://github.com/gradle/gradle/issues/8980\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/8980</a> </li>\n</ol>\n\n<p>i defind <code>Test</code> class in project('depend-test') </p>\n\n<pre><code>object Test {\n    const val test = \"123\"\n}\n</code></pre>\n\n<p>i want to use <code>Test</code> class in project('test-test')</p>\n\n<pre><code>package com.example.test.controller\n\nimport com.example.dependtest.Test\nimport org.slf4j.LoggerFactory\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.web.bind.annotation.RequestMapping\nimport org.springframework.web.bind.annotation.RestController\n\n@RestController\n@RequestMapping\nclass TestController {\n\n    private val log = LoggerFactory.getLogger(TestController::class.java)\n\n    @GetMapping(value = [\"/test\"])\n    fun test() {\n        log.info(Test.test)\n    }\n}\n</code></pre>\n\n<p>when i want to build project('test-test') to jar where i used gradle bootJar\u3002 I get this error:</p>\n\n<pre><code>\n&gt; Task :test-test:compileKotlin FAILED\ne: /Users/houshuai/Documents/dev/demo/test/test-test/src/main/kotlin/com/example/test/controller/TestController.kt: (3, 20): Unresolved reference: dependtest\ne: /Users/houshuai/Documents/dev/demo/test/test-test/src/main/kotlin/com/example/test/controller/TestController.kt: (22, 18): Unresolved reference: Test\n</code></pre>\n\n<p>Expected Behavior\nThe Kotlin classes in the compile project('depend-test') dependency should be found.</p>\n\n<p>Current Behavior\nThe Kotlin classes in the compile project('depend-test') dependency are not found:</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1556516909, "post_id": 55897548, "comment_id": 98451307, "body": "Create a Singleton class that contains start , stop ,pause method and for each View use music path and pass it to start function  and then check if media.is already playing any music stop it and play given new path."}, {"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "reply_to_user": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1556516982, "post_id": 55897548, "comment_id": 98451332, "body": "Would you care to write that for me, considering me as confused?"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1556517327, "post_id": 55897548, "comment_id": 98451452, "body": "start doing a little bit RND for your better understanding.. <a href=\"https://www.tutorialspoint.com/how-to-use-android-media-player-singleton\" rel=\"nofollow noreferrer\">tutorialspoint.com/how-to-use-android-media-player-singleton</a>  <a href=\"https://stackoverflow.com/questions/30743351/how-to-use-a-mediaplayer-singleton\" title=\"how to use a mediaplayer singleton\">stackoverflow.com/questions/30743351/&hellip;</a>  <a href=\"https://stackoverflow.com/questions/28380525/android-one-mediaplayer-instance-singleton\" title=\"android one mediaplayer instance singleton\">stackoverflow.com/questions/28380525/&hellip;</a>"}, {"owner": {"reputation": 1481, "user_id": 6059583, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BdoQK.png?s=128&g=1", "display_name": "Jeeva", "link": "https://stackoverflow.com/users/6059583/jeeva"}, "edited": false, "score": 0, "creation_date": 1556519438, "post_id": 55897548, "comment_id": 98452155, "body": "@RahulSingh so everytime onclick gets exceuted you will be playing same single file lik that"}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556517429, "post_id": 55897679, "comment_id": 98451478, "body": "<a href=\"https://developer.android.com/guide/topics/media/mediaplayer\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/media/mediaplayer</a> if you go to this link you will find this comment in code snippet saying that // no need to call prepare(); create() does that for you, Since I&#39;m new dev, I will appreciate if you code some snippet for me for better understanding, will you?"}, {"owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "reply_to_user": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 1, "creation_date": 1556519058, "post_id": 55897679, "comment_id": 98452015, "body": "Can you pass the MediaPlayer in a constructor of Adapter. Because It was getting acquired by multiple list items so it was creating a problem."}, {"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556519476, "post_id": 55897679, "comment_id": 98452170, "body": "Yes, After passing in constructor?"}, {"owner": {"reputation": 1481, "user_id": 6059583, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BdoQK.png?s=128&g=1", "display_name": "Jeeva", "link": "https://stackoverflow.com/users/6059583/jeeva"}, "reply_to_user": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556519528, "post_id": 55897679, "comment_id": 98452187, "body": "@RahulSingh as mohamed says try to create single static instance for media player  and just call the play method to play ur raw file"}, {"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556519743, "post_id": 55897679, "comment_id": 98452260, "body": "Yes, I&#39;m trying that, I&#39;ll update in no time, please wait."}, {"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556520842, "post_id": 55897679, "comment_id": 98452705, "body": "After passing it to constructer mediaPlayer.create() method is not being shown, why is that?"}, {"owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "edited": false, "score": 0, "creation_date": 1556520900, "post_id": 55897679, "comment_id": 98452724, "body": "You should implicitly specify the constructor value as MediaPlayer. Make sure that is done"}, {"owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "edited": false, "score": 0, "creation_date": 1556522254, "post_id": 55897679, "comment_id": 98453268, "body": "Consider the code above and implement it for me, I relatively new to the coding, these terms are not clear for me without proper demonstration."}], "tags": [], "owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "is_accepted": false, "score": 0, "last_activity_date": 1556519830, "last_edit_date": 1556519830, "creation_date": 1556517159, "answer_id": 55897679, "question_id": 55897548, "link": "https://stackoverflow.com/questions/55897548/how-to-use-mediaplayer-in-recyclerviewadapter-in-kotlin/55897679#55897679", "title": "How to use MediaPlayer in RecyclerViewAdapter in Kotlin?", "body": "<p>According to Android docs on MediaPlayer implementation, MediaPlayer should be prepared before start playing.</p>\n\n<blockquote>\n  <p>For reference MediaPlayer state diagram:</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/v0bW0.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v0bW0.gif\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>A MediaPlayer object must first enter the Prepared state before\n  playback can be started.</p>\n</blockquote>\n\n<p>Please check if you have performed these steps.</p>\n\n<p><strong>What I feel you can do it as.</strong></p>\n\n<p>Instead of creating the <code>MediaPlayer</code> in the <code>onBindViewHolder()</code> of <code>RecyclerView</code> pass it as a parameter from where the adapter is getting created, this will be efficient, because each time list is scrolled MediaPlayer object will get created, which I think is not a correct way to call. Open for discussion.</p>\n"}], "owner": {"reputation": 203, "user_id": 9867482, "user_type": "registered", "profile_image": "https://graph.facebook.com/214582295992439/picture?type=large", "display_name": "Rahul Singh", "link": "https://stackoverflow.com/users/9867482/rahul-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556519830, "creation_date": 1556516344, "last_edit_date": 1556516717, "question_id": 55897548, "link": "https://stackoverflow.com/questions/55897548/how-to-use-mediaplayer-in-recyclerviewadapter-in-kotlin", "title": "How to use MediaPlayer in RecyclerViewAdapter in Kotlin?", "body": "<p>I just wanted to play some audio file(.mp3 for instance) in my Recyclerview Adapter class, I implemented it pretty easily, but I don't know why it is not playing as well as not showing any error for trace, have a look on code below, and guide me please:</p>\n\n<pre><code> override fun onBindViewHolder(holder: PriceAdapter.PriceHolder, pos: Int) {\n    holder.qt!!.text = questionsList[pos].priceText\n\n    holder.qt!!.setOnClickListener(View.OnClickListener {\n        if (questionsList[pos].price == questionsList[pos].priceNow) {\n\n      //This is where I wanted to implement my mediaplayer:\n\n     var mediaPlayer: MediaPlayer? =MediaPlayer.create(it.context,R.raw.sound_file_1)\n     mediaPlayer?.start()\n     }\n   }\n</code></pre>\n\n<p>It is not playing anything, rest are good, I have the raw mp3 file in res/raw/sound_file_1.mp3, what is possibly wrong with this? </p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1556493606, "post_id": 55895359, "comment_id": 98447123, "body": "&quot;This code would be pretty common in a DiffUtil for an Adapter that has multiple types&quot; -- that first case in your <code>when</code> seems rather strange. The contents are the same... purely based on what Kotlin class they are?"}, {"owner": {"reputation": 6934, "user_id": 616971, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cddd3d4ab0a08a03f552cef036bb0c39?s=128&d=identicon&r=PG", "display_name": "Ben Trengrove", "link": "https://stackoverflow.com/users/616971/ben-trengrove"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1556493697, "post_id": 55895359, "comment_id": 98447141, "body": "Just a contrived example, you&#39;re right that it probably wouldn&#39;t happen in the real world but I wanted to keep the example simple"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556520966, "post_id": 55895359, "comment_id": 98452759, "body": "Where exactly are you getting the class from? The <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/DiffUtil.Callback.html#areContentsTheSame(int,%2520int)\" rel=\"nofollow noreferrer\">embedded DiffUtil</a> takes ints in the <code>areContentsTheSame</code>, and there are no generic types."}, {"owner": {"reputation": 6934, "user_id": 616971, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cddd3d4ab0a08a03f552cef036bb0c39?s=128&d=identicon&r=PG", "display_name": "Ben Trengrove", "link": "https://stackoverflow.com/users/616971/ben-trengrove"}, "edited": false, "score": 0, "creation_date": 1556521514, "post_id": 55895359, "comment_id": 98452971, "body": "This one, <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/DiffUtil.ItemCallback.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/androidx/recyclerview/widget&zwnj;&#8203;/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4194, "user_id": 6272369, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/20101c5043e5ecd04e7e9e7c4cefb1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Marat", "link": "https://stackoverflow.com/users/6272369/marat"}, "edited": false, "score": 0, "creation_date": 1582903315, "post_id": 55898835, "comment_id": 106948381, "body": "Excuse me, this might be a stupid question, but what is <code>MySharedItemClass</code>? I don&#39;t see it&#39;s implementation in your answer."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 4194, "user_id": 6272369, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/20101c5043e5ecd04e7e9e7c4cefb1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Marat", "link": "https://stackoverflow.com/users/6272369/marat"}, "edited": false, "score": 0, "creation_date": 1582907350, "post_id": 55898835, "comment_id": 106950376, "body": "@Marat I have no idea. Assumed it was a typo and that I meant <code>Equatable</code>. No idea where it came from, but it&#39;s not supposed to be there :&#39;)"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 19, "last_activity_date": 1582907314, "last_edit_date": 1592644375, "creation_date": 1556523334, "answer_id": 55898835, "question_id": 55895359, "link": "https://stackoverflow.com/questions/55895359/lint-error-suspicious-equality-check-equals-is-not-implemented-in-object-dif/55898835#55898835", "title": "Lint Error: Suspicious equality check: equals() is not implemented in Object DiffUtilEquals", "body": "<p>All <code>java.lang.Object</code>s have an <code>equals()</code> function. It's a part of the base of the language. However, not all override it, and that's what the linter is triggering on. <code>(SomeClass() as Any).equals(SomeClass())</code> will compile fine for an instance (assuming you have a class named <code>SomeClass</code> of course).</p>\n<p>I couldn't reproduce this with just any class - it <em>had</em> to be the one you mentioned (<code>DiffUtil.ItemCallback</code>). I expanded the inspection, which says:</p>\n<blockquote>\n<p>Suspicious equality check: equals() is not implemented in Object</p>\n<p>Inspection info:areContentsTheSame is used by DiffUtil to produce diffs. If the method is implemented incorrectly, such as using identity equals instead of equals, or calling equals on a class that has not implemented it, weird visual artifacts can occur.</p>\n</blockquote>\n<p>This answer is best demonstrated with a different snippet:</p>\n<pre><code>data class One(val t: String)\n\nval x = object : DiffUtil.ItemCallback&lt;One&gt;() {\n    override fun areItemsTheSame(p0: One, p1: One): Boolean { TODO() }\n    override fun areContentsTheSame(p0: One, p1: One): Boolean {\n        return p0 == p1\n    }\n\n}\n</code></pre>\n<p>This will compile. If you don't know, a <code>data class</code> generates a custom <code>equals</code> method. If you, in Android Studio, remove the <code>data</code> keyword, the error will reappear, because there is no overridden equals method.</p>\n<p><strong>TL;DR:</strong> The inspection complains about a lack of a custom <code>equals</code> method, and/or the use of <a href=\"https://stackoverflow.com/a/1692882/6296561\">identity checking</a> (<code>==</code> in Java or <code>===</code> in Kotlin). However, <code>===</code> will raise a separate message which is considerably easier to actually identify the solution to:</p>\n<blockquote>\n<p>Suspicious equality check: Did you mean <code>==</code> instead of <code>===</code>?</p>\n</blockquote>\n<p>And I imagine <code>==</code> in Java raises a similar message, but with <code>equals</code> as the suggested replacement. <sub>I have not verified this</sub></p>\n<p>As for solutions:</p>\n<h1>If you know what you're doing (NOT recommended)</h1>\n<p>You can suppress or change the severity away from error. Changing the severity or suppressing globally is in the same place. File -&gt; Settings -&gt; Editor  -&gt; Inspections &gt; Android -&gt; Lint -&gt; Correctness -&gt; Suspicious DiffUtil equality</p>\n<p><a href=\"https://i.stack.imgur.com/hC8lP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hC8lP.png\" alt=\"enter image description here\" /></a></p>\n<p>Or you can suppress it locally with:</p>\n<pre><code>@SuppressLint(&quot;DiffUtilEquals&quot;)\n</code></pre>\n<h1>If you want to play it safe</h1>\n<p>This is unfortunately more complicated.</p>\n<p><code>Any</code> has <strong>no guarantee</strong> <code>equals</code> is overridden - hence the inspection. The only viable option you really have is to use a different class. And using an <code>Equatable</code> isn't a bad idea either. However, unlike Any, this isn't implemented by default. In fact, it doesn't exist in the SDK. You can, however, create one yourself.</p>\n<p>The catch is, any of the implementing classes <em>need</em> an equals method now. If you use <code>data class</code>es, this isn't a problem (and I've demonstrated this in the code). However, if you don't, you'll need to implement it manually. Manually here either means you write it, or you otherwise have it generated (for an instance with annotations).</p>\n<pre><code>interface Equatable  {\n    override fun equals(other: Any?) : Boolean;\n}\n\n// Data classes generate the necessary equals methods. Equatable ensures all child classes do implement it, which fixes what the inspection wants you to fix.\ndata class One(val t: String) : Equatable  \ndata class Two(val title: String) : Equatable  \n\nval x = object : DiffUtil.ItemCallback&lt;Equatable /*Or a higher level inheritance model, i.e. a MySharedItemClass, where it either contains an abstract equals or implements Equatable. Implementing it doesn't require it to be abstract, but it depends on where you want the equals implementation. Equatable is an example of forced equals implementation, but there's many ways to Rome. */&gt;() {\n    override fun areItemsTheSame(p0: Equatable, p1: Equatable): Boolean {\n        TODO(&quot;not implemented&quot;)\n    }\n\n    override fun areContentsTheSame(p0: Equatable, p1: Equatable): Boolean {\n         return when {\n             p0 is One &amp;&amp; p1 is One -&gt; true\n             p0 is Two &amp;&amp; p1 is Two -&gt; p0.title == p1.title\n             else -&gt; p0 == p1 // No error!\n         }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 299, "user_id": 8391757, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/q5rjR.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8391757/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1595642774, "creation_date": 1595642774, "answer_id": 63083569, "question_id": 55895359, "link": "https://stackoverflow.com/questions/55895359/lint-error-suspicious-equality-check-equals-is-not-implemented-in-object-dif/63083569#63083569", "title": "Lint Error: Suspicious equality check: equals() is not implemented in Object DiffUtilEquals", "body": "<p>bro all what you need is to override equals() in your POJO class and voila this error will disappear</p>\n"}], "owner": {"reputation": 6934, "user_id": 616971, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cddd3d4ab0a08a03f552cef036bb0c39?s=128&d=identicon&r=PG", "display_name": "Ben Trengrove", "link": "https://stackoverflow.com/users/616971/ben-trengrove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3821, "favorite_count": 3, "accepted_answer_id": 55898835, "answer_count": 2, "score": 11, "last_activity_date": 1595642774, "creation_date": 1556493488, "last_edit_date": 1560071934, "question_id": 55895359, "link": "https://stackoverflow.com/questions/55895359/lint-error-suspicious-equality-check-equals-is-not-implemented-in-object-dif", "title": "Lint Error: Suspicious equality check: equals() is not implemented in Object DiffUtilEquals", "body": "<p>It seems Android Studio/Gradle 3.4 has introduced a new lint error <code>DiffUtilEquals</code>. It is triggered by having a <code>DiffUtil&lt;Any&gt;</code> and then calling as a fallback <code>oldItem == newItem</code> in the <code>areContentsTheSame</code> function. The error the linter throws is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Suspicious equality check: equals() is not implemented in Object\n</code></pre>\n\n<p>Example code:</p>\n\n<pre><code> override fun areContentsTheSame(oldItem: Any, newItem: Any): Boolean {\n        return when {\n            oldItem is MyKotlinClass &amp;&amp; newItem is MyKotlinClass -&gt; true\n            oldItem is MyKotlinClass2 &amp;&amp; newItem is MyKotlinClass2 -&gt; oldItem.title == newItem.title\n            else -&gt; oldItem == newItem // Lint error on this line\n        }\n    }\n</code></pre>\n\n<p>This when statement would be pretty common in a DiffUtil for an Adapter that has multiple types where you compare each type based on their class.</p>\n\n<p>What is the best way to handle this error? Should <code>&lt;Any&gt;</code> be changed to some interface that is like <code>Equatable</code> or maybe all the classes used in the adapter should implement some interface that includes a way to compare them?</p>\n"}]