[{"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 950011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222238266f8140f0566944b023bfdb8f?s=128&d=identicon&r=PG", "display_name": "Daniel Ferreira Monteiro Alves", "link": "https://stackoverflow.com/users/950011/daniel-ferreira-monteiro-alves"}, "is_accepted": false, "score": 0, "last_activity_date": 1493866833, "creation_date": 1493866833, "answer_id": 43773128, "question_id": 43769389, "link": "https://stackoverflow.com/questions/43769389/react-kotlin-wrapper-setstate-method/43773128#43773128", "title": "React-Kotlin wrapper setState method", "body": "<p>If you want to get the result of a setState, then you have to call setState(newState, callback).</p>\n\n<p>Probably, this React binding is doing more than just a wrapper over react. I think that the react is a facade over the real react.</p>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 5858542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f7f4567e48c9c162d52fb4f47175e6?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandr", "link": "https://stackoverflow.com/users/5858542/aleksandr"}, "is_accepted": false, "score": 0, "last_activity_date": 1541447558, "creation_date": 1541447558, "answer_id": 53161263, "question_id": 43769389, "link": "https://stackoverflow.com/questions/43769389/react-kotlin-wrapper-setstate-method/53161263#53161263", "title": "React-Kotlin wrapper setState method", "body": "<p>If you look at create-react-kotlin-app source code you will find this comment before setState invocation:\n\"actually, the operation is performed on a state's copy, so it stays effectively immutable\".</p>\n\n<p><a href=\"https://github.com/JetBrains/create-react-kotlin-app/blob/master/packages/react-scripts/template/src/ticker/Ticker.kt\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/create-react-kotlin-app/blob/master/packages/react-scripts/template/src/ticker/Ticker.kt</a></p>\n\n<p>That's it, kotlin copies state and pass copy as receiver to setState method. So, instead of \"counter: state.counter + props.increment\"' you should write \"counter = counter + props.increment\".</p>\n"}], "owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 975, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1541447558, "creation_date": 1493843172, "question_id": 43769389, "link": "https://stackoverflow.com/questions/43769389/react-kotlin-wrapper-setstate-method", "title": "React-Kotlin wrapper setState method", "body": "<p>On the react docs here:</p>\n\n<p><a href=\"https://facebook.github.io/react/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous\" rel=\"nofollow noreferrer\">https://facebook.github.io/react/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous</a></p>\n\n<p>It says that the following code is unsafe to use because state is updated asynchronously:</p>\n\n<pre><code>this.setState({\n  counter: this.state.counter + this.props.increment,\n});\n</code></pre>\n\n<p>And instead to pass in the previous state and props like this:</p>\n\n<pre><code>this.setState(function(prevState, props) {\n  return {\n    counter: prevState.counter + props.increment\n  };\n});\n</code></pre>\n\n<p>However, the React-Kotlin wrapper located here:</p>\n\n<p><a href=\"https://github.com/Kotlin/kotlin-fullstack-sample/tree/master/frontend/src/org/jetbrains/react\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlin-fullstack-sample/tree/master/frontend/src/org/jetbrains/react</a></p>\n\n<p>Has the state change passed in as an extension function of state, which modifies the variables on the state object:</p>\n\n<pre><code>//Located in the ReactComponent class in ReactComponent.kt\nfun setState(builder: S.() -&gt; Unit) {\n    ...\n}\n</code></pre>\n\n<p>If I call <code>setState</code> function like this in Kotlin:</p>\n\n<pre><code>setState {\n    counter: state.counter + props.increment\n}\n</code></pre>\n\n<p>Isn't that equivalent to the unsafe method above? Wouldn't it need to be implemented like this in the React-Kotlin wrapper?</p>\n\n<pre><code>fun setState(builder: S.(prevState: S, props: P) -&gt; Unit) {\n    ...\n}\n</code></pre>\n\n<p>And then called like this?</p>\n\n<pre><code>setState { prevState, props -&gt;\n    counter: prevState.counter + props.increment\n}\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "factory"], "comments": [{"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1493897765, "post_id": 43766792, "comment_id": 74603697, "body": "You mean where <code>T</code> is not a concrete type?"}, {"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "reply_to_user": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1493910100, "post_id": 43766792, "comment_id": 74613311, "body": "Exactly. I would want to write a factory that creates a mapper for <code>List&lt;T&gt;</code> for any <code>T</code>. This is possible because the factory can look up how to map the elements of type <code>T</code> with the <code>MapperLookupContext</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "is_accepted": true, "score": 1, "last_activity_date": 1493986570, "creation_date": 1493986570, "answer_id": 43804720, "question_id": 43766792, "link": "https://stackoverflow.com/questions/43766792/kotlin-factory-interface-with-generics/43804720#43804720", "title": "Kotlin factory interface with generics", "body": "<p>I found the solution myself, using the <code>invoke</code> operator fun I posted in my original question I can write the following:</p>\n\n<pre><code>private class ListResultMapper&lt;out E&gt;(private val elementMapper: ResultMapper&lt;E&gt;) : ResultMapper&lt;List&lt;E&gt;&gt; { /* ... */ }\n\nval listMapperFactory = ResultMapperFactory&lt;List&lt;*&gt;&gt; { type, context -&gt; context.resultMapperFactory.get(type.elementType(), context)?.let { ListResultMapper(it) } }\n</code></pre>\n"}], "owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1346, "favorite_count": 1, "accepted_answer_id": 43804720, "answer_count": 1, "score": 2, "last_activity_date": 1493986570, "creation_date": 1493833503, "question_id": 43766792, "link": "https://stackoverflow.com/questions/43766792/kotlin-factory-interface-with-generics", "title": "Kotlin factory interface with generics", "body": "<p>I have a factory interface in my Kotlin code, like so (using Guava's <a href=\"https://github.com/google/guava/wiki/ReflectionExplained#typetoken\" rel=\"nofollow noreferrer\"><code>TypeToken</code></a>):</p>\n\n<pre><code>interface ResultMapperFactory {\n    fun &lt;T&gt; get(type: TypeToken&lt;T&gt;, context: MapperLookupContext): ResultMapper&lt;T&gt;?\n}\n</code></pre>\n\n<p>So far, so good. This is very easy to use when calling it, however implementation almost always requires an unsafe cast: </p>\n\n<pre><code>object StringFactory : ResultMapperFactory {\n    override fun &lt;T&gt; get(type: TypeToken&lt;T&gt;, context: MapperLookupContext): ResultMapper&lt;T&gt;? {\n        return if (type.rawType == String::class.java) MyStringMapper as ResultMapper&lt;T&gt; else null\n    }\n}\n</code></pre>\n\n<p>This is ugly, but I have overcome it with a nice trick. First, a little utility function for creating <code>TypeToken</code> instances:</p>\n\n<pre><code>inline fun &lt;reified T&gt; typeToken(): TypeToken&lt;T&gt; = object : TypeToken&lt;T&gt;() {}\n</code></pre>\n\n<p>Now I added a companion object to my factory interface:</p>\n\n<pre><code>companion object {\n\n    inline operator fun &lt;reified R&gt; invoke(crossinline body: (TypeToken&lt;R&gt;, MapperLookupContext) -&gt; ResultMapper&lt;R&gt;?): ResultMapperFactory {\n        val t = typeToken&lt;R&gt;().type\n        return object : ResultMapperFactory {\n            override fun &lt;T&gt; get(type: TypeToken&lt;T&gt;, context: MapperLookupContext): ResultMapper&lt;T&gt;? {\n                return if (type.isSubtypeOf(t)) body(type as TypeToken&lt;R&gt;, context) as ResultMapper&lt;T&gt;? else null\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This allows me to have the unchecked (but safe) cast in one place and I can write code like the following:</p>\n\n<pre><code>val stringMapper: ResultMapper&lt;String&gt; = TODO()\nval stringMapperFactory = ResultMapperFactory&lt;String&gt; { type, context -&gt;\n    stringMapper\n}\n</code></pre>\n\n<p>However this approach also falls apart as soon as I want to implement a factory that takes a <code>TypeToken&lt;List&lt;T&gt;&gt;</code> and returns a <code>ResultMapper&lt;List&lt;T&gt;&gt;</code>, because there is nowhere for me to put that <code>T</code> parameter.</p>\n\n<p>I am eager to hear your suggestions.</p>\n"}, {"tags": ["kotlin", "optional", "unwrap"], "answers": [{"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 18, "last_activity_date": 1493833562, "creation_date": 1493833562, "answer_id": 43766802, "question_id": 43766661, "link": "https://stackoverflow.com/questions/43766661/does-kotlin-have-an-equivalent-to-implicitly-unwrapped-optionals-in-swift/43766802#43766802", "title": "Does Kotlin have an equivalent to Implicitly Unwrapped Optionals in Swift?", "body": "<p><code>lateinit var</code> may be a suitable solution. Kotlin just assumes they are not null.\n<a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties</a></p>\n"}], "owner": {"reputation": 349, "user_id": 5069256, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153344620274155/picture?type=large", "display_name": "stantronic", "link": "https://stackoverflow.com/users/5069256/stantronic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1472, "favorite_count": 2, "accepted_answer_id": 43766802, "answer_count": 1, "score": 8, "last_activity_date": 1495222913, "creation_date": 1493833008, "last_edit_date": 1495222913, "question_id": 43766661, "link": "https://stackoverflow.com/questions/43766661/does-kotlin-have-an-equivalent-to-implicitly-unwrapped-optionals-in-swift", "title": "Does Kotlin have an equivalent to Implicitly Unwrapped Optionals in Swift?", "body": "<p>Implicitly unwrapped optionals are a useful feature of Swift for things like UI elements that are not assigned during a class's constructor, but can be safely be assumed to be non-null for the majority of functions (as they will have been assigned in a viewDidLoad).</p>\n\n<p>eg.</p>\n\n<pre><code>@IBOutlet weak var textView : UITextView! \n</code></pre>\n\n<p>Is there an equivalent for Kotlin, or a workaround that achieves the same effect?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1493980342, "post_id": 43766441, "comment_id": 74644566, "body": "This question basically asks how a particular piece of code runs. Wouldn&#39;t it be more productive to just check the result in a sand box? <a href=\"http://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 1, "creation_date": 1502021883, "post_id": 43766613, "comment_id": 78023829, "body": "Thanks for the demo!"}, {"owner": {"reputation": 883, "user_id": 2938966, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KUo5W.jpg?s=128&g=1", "display_name": "Dmitry Gryazin", "link": "https://stackoverflow.com/users/2938966/dmitry-gryazin"}, "edited": false, "score": 0, "creation_date": 1542640050, "post_id": 43766613, "comment_id": 93630435, "body": "I wanna add such demos to my answers too!"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 883, "user_id": 2938966, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KUo5W.jpg?s=128&g=1", "display_name": "Dmitry Gryazin", "link": "https://stackoverflow.com/users/2938966/dmitry-gryazin"}, "edited": false, "score": 0, "creation_date": 1542642172, "post_id": 43766613, "comment_id": 93631770, "body": "@DmitryGryazin, consider using <a href=\"https://play.kotl.in\" rel=\"nofollow noreferrer\">play.kotl.in</a>, this is a more recent playground than <a href=\"https://try.kotl.in\" rel=\"nofollow noreferrer\">try.kotl.in</a>."}, {"owner": {"reputation": 662, "user_id": 2382353, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5fe1ab035c880f2b43deb674d9b9d935?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2382353/alex"}, "edited": false, "score": 0, "creation_date": 1561646575, "post_id": 43766613, "comment_id": 100141589, "body": "Is it possible to initialize the class before the superclass?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 662, "user_id": 2382353, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5fe1ab035c880f2b43deb674d9b9d935?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2382353/alex"}, "edited": false, "score": 0, "creation_date": 1561646928, "post_id": 43766613, "comment_id": 100141834, "body": "@Doruko, no, you can&#39;t do this with inheritance because the ordering of constructor invocations is enforced by the virtual machine (in case of the JVM) and the compiler (in case of the other platforms). If you need to run some logic before initialization logic of the other class, you should probably prefer composition over inheritance."}, {"owner": {"reputation": 662, "user_id": 2382353, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5fe1ab035c880f2b43deb674d9b9d935?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2382353/alex"}, "edited": false, "score": 0, "creation_date": 1561648414, "post_id": 43766613, "comment_id": 100142758, "body": "@hotkey the problem is that the superclass&#39; constuctor is calling a function that needs a variable from the class (which is unitialized yet), is there a way to solve this?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1561648547, "post_id": 43766613, "comment_id": 100142832, "body": "If you control the superclass, you can pass the value of the variable to the constructor of the superclass. Otherwise, I doubt there is an elegant way."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 18, "last_activity_date": 1493894567, "last_edit_date": 1493894567, "creation_date": 1493832834, "answer_id": 43766613, "question_id": 43766441, "link": "https://stackoverflow.com/questions/43766441/init-method-inheritance/43766613#43766613", "title": "Init method inheritance", "body": "<p>Yes, an <code>init</code> block of a base class gets run when the derived class instance is initialized.</p>\n\n<p>In Kotlin, similarly to Java, an instance of a class is constructed in the following way:</p>\n\n<ol>\n<li><p>An object is allocated.</p></li>\n<li><p>The constructor of the class is called. <em>(a)</em></p>\n\n<ol>\n<li><p>If the class has a superclass, <strong>the superclass constructor is called before the class construction logic is executed</strong>; <br><sup>(i.e., the point <em>(a)</em> is executed recursively for the superclass, then the execution continues from here)</sup></p></li>\n<li><p>If the class has property initializers or <code>init</code> blocks, they are executed in the same order as they appear in the class body;</p></li>\n<li><p>If the constructor has a body (i.e. it is a <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">secondary constructor</a>) then the body is executed.</p></li>\n</ol></li>\n</ol>\n\n<p>In this description, you can see that, when <code>B</code> is constructed, the constructor of <code>A</code> is called before <code>B</code> initialization logic is executed, and, in particular, all <code>init</code> blocks of <code>A</code> are executed.</p>\n\n<p><sup><a href=\"https://try.kotlinlang.org/#/UserProjects/dark2jd0kp97m52f2kpn3426ej/1n0qfonaeh6825mfaepeipjvvv\" rel=\"noreferrer\">(runnable demo of this logic)</a></sup></p>\n\n<hr>\n\n<p>A small remark on terminology: <code>init</code> block is not actually a separate method. Instead, all <code>init</code> blocks together with member property initializers are compiled into the code of the constructor, so they should rather be considered a part of the constructor.</p>\n"}], "owner": {"reputation": 4616, "user_id": 515377, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qczen.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/515377/graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3125, "favorite_count": 1, "accepted_answer_id": 43766613, "answer_count": 1, "score": 6, "last_activity_date": 1493894567, "creation_date": 1493832253, "question_id": 43766441, "link": "https://stackoverflow.com/questions/43766441/init-method-inheritance", "title": "Init method inheritance", "body": "<p>If I have abstract class A with an init method:</p>\n\n<pre><code>abstract class A(){\n  init {\n    println(\"Hello\")\n  }     \n}\n</code></pre>\n\n<p>And then class B that extends A</p>\n\n<pre><code>class B(): A()\n</code></pre>\n\n<p>If I instantiate B like this</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n  B()\n}\n</code></pre>\n\n<p>Does the init method in A still get run and <code>Hello</code> gets printed?</p>\n\n<p>And if not, what do I need to do to have the init method of A get run?</p>\n"}, {"tags": ["csv", "kotlin", "jackson-dataformat-csv"], "answers": [{"comments": [{"owner": {"reputation": 1282, "user_id": 620213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914dd772f2ad2d606843a349542e0967?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Power", "link": "https://stackoverflow.com/users/620213/tom-power"}, "edited": false, "score": 1, "creation_date": 1516878954, "post_id": 43763281, "comment_id": 83874202, "body": "<code>.enable(JsonGenerator.Feature.IGNORE_UNKNOWN)</code> helped me with similar issues when trying to write from a class that had more fields than the schema I was using"}], "tags": [], "owner": {"reputation": 369, "user_id": 1812095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SDs67.jpg?s=128&g=1", "display_name": "mbaranauskas", "link": "https://stackoverflow.com/users/1812095/mbaranauskas"}, "is_accepted": true, "score": 10, "last_activity_date": 1493822610, "creation_date": 1493822610, "answer_id": 43763281, "question_id": 43760431, "link": "https://stackoverflow.com/questions/43760431/jackson-dataformat-csv-does-not-ignore-unknown-properties/43763281#43763281", "title": "jackson-dataformat-csv does not ignore unknown properties", "body": "<p>Found solution:</p>\n\n<pre><code>csvMapper.enable(CsvParser.Feature.IGNORE_TRAILING_UNMAPPABLE)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 974, "user_id": 3263523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/193e46dc2e88fedd58cf8347da57326c?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/3263523/caesar"}, "is_accepted": false, "score": 4, "last_activity_date": 1560310236, "creation_date": 1560310236, "answer_id": 56554312, "question_id": 43760431, "link": "https://stackoverflow.com/questions/43760431/jackson-dataformat-csv-does-not-ignore-unknown-properties/56554312#56554312", "title": "jackson-dataformat-csv does not ignore unknown properties", "body": "<p>This worked for me:</p>\n\n<pre><code>csvMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 618, "user_id": 7643283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebb16ecce08aaa1a108d2d0d6919bed?s=128&d=identicon&r=PG", "display_name": "Xobotun", "link": "https://stackoverflow.com/users/7643283/xobotun"}, "edited": false, "score": 0, "creation_date": 1606560005, "post_id": 61914587, "comment_id": 114999875, "body": "Just on a side note, there is a also <code>List&lt;T&gt; MappingIterator#readAll()</code>, so you could&#39;have amended <code>results::add</code> and simply write <code>List&lt;U&gt; results = iterator.readAll()</code>. Not sure if there are any complications, though."}], "tags": [], "owner": {"reputation": 4459, "user_id": 1039203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64f07d75c81b412e986d5c8008163596?s=128&d=identicon&r=PG", "display_name": "KeyMaker00", "link": "https://stackoverflow.com/users/1039203/keymaker00"}, "is_accepted": false, "score": 2, "last_activity_date": 1589982399, "last_edit_date": 1589982399, "creation_date": 1589981979, "answer_id": 61914587, "question_id": 43760431, "link": "https://stackoverflow.com/questions/43760431/jackson-dataformat-csv-does-not-ignore-unknown-properties/61914587#61914587", "title": "jackson-dataformat-csv does not ignore unknown properties", "body": "<p><strong>Introduction</strong></p>\n\n<p>For the sake of comprehensibility, here is a simple (Java) example that:</p>\n\n<ol>\n<li><p>read a CSV-file from an InputStream (<code>jackson-dataformat-csv</code>\ndependency)</p></li>\n<li><p>map its content to a list of objects (<code>jackson-core</code> dependency)</p></li>\n</ol>\n\n<p><strong>CSV file content</strong></p>\n\n<p>Let be <code>data.csv</code> a CSV file with the following data:</p>\n\n<pre><code>a;b;c\n1;2;0.5\n3;4;\n</code></pre>\n\n<p><strong>Java Class Data with a missing attributes</strong></p>\n\n<p>The class <code>MyModel</code> represents a data class with the following attributes:</p>\n\n<pre><code>private Long a;\nprivate Integer b;\n</code></pre>\n\n<p>Note the attribute <code>c</code> is missing, hence the parser will have to ignore it. </p>\n\n<p><strong>Read the CSV content and map into a list of objects</strong></p>\n\n<p>So the <code>CsvMapper</code> can be coupled with the Jackson object mapper to read records from a CSV file to a list of objects, the whole in a convenient method:</p>\n\n<pre><code>&lt;U&gt; List&lt;U&gt; mapRecordsToObjects(InputStream inputStream, Class&lt;U&gt; encodingType) {\n    CsvMapper csvMapper = new CsvMapper();\n    CsvSchema bootstrapSchema = CsvSchema.emptySchema() //\n                                         .withHeader() //\n                                         .withColumnSeparator(\";\");\n    ObjectReader reader = csvMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES) //\n                                   .readerFor(encodingType) //\n                                   .with(bootstrapSchema);\n    MappingIterator&lt;U&gt; iterator;\n    try {\n        iterator = reader.readValues(inputStream);\n    } catch (IOException e) {\n        throw new IllegalStateException(String.format(\"could not access file [%s]\", this.source), e);\n    }\n    List&lt;U&gt; results = new ArrayList&lt;&gt;();\n    iterator.forEachRemaining(results::add);\n    return results;\n}\n</code></pre>\n\n<p>Finally, let's call this method:</p>\n\n<pre><code>List&lt;MyModel&gt; result = mapRecordsToObjects(fileInputStream, MyModel.class);\n</code></pre>\n\n<p>In order to read the file, you will just need to initialise the InputStream.</p>\n\n<p><strong>Deserialization feature</strong></p>\n\n<p>In the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/DeserializationFeature.html\" rel=\"nofollow noreferrer\">documentation</a>, the class <code>DeserializationFeature</code> has the following description:</p>\n\n<blockquote>\n  <p>Enumeration that defines simple on/off features that affect the way\n  Java objects are deserialized from JSON</p>\n</blockquote>\n\n<p>In this enumeration class, there are many feature with a default state (sometimes per default enabled, sometimes disabled). The feature <code>FAIL_ON_UNKOWN_PROPERTIES</code> is <em>disable</em> per default can can be enabled as shown in the example. In its description, one can read:</p>\n\n<blockquote>\n  <p>Feature that determines whether encountering of unknown properties\n  (ones that do not map to a property, and there is no \"any setter\" or\n  handler that can handle it) should result in a failure (by throwing a\n  {@link JsonMappingException}) or not.</p>\n</blockquote>\n"}], "owner": {"reputation": 369, "user_id": 1812095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SDs67.jpg?s=128&g=1", "display_name": "mbaranauskas", "link": "https://stackoverflow.com/users/1812095/mbaranauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6777, "favorite_count": 0, "accepted_answer_id": 43763281, "answer_count": 3, "score": 4, "last_activity_date": 1589982487, "creation_date": 1493815538, "last_edit_date": 1589982487, "question_id": 43760431, "link": "https://stackoverflow.com/questions/43760431/jackson-dataformat-csv-does-not-ignore-unknown-properties", "title": "jackson-dataformat-csv does not ignore unknown properties", "body": "<p>Trying to parse .csv file with jackson-dataformat-csv. File contains a lot of columns not relevant for my program. </p>\n\n<p>Tried to use <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> on my data class,\nand <code>csvMapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)</code>, but neither works, and application throws exception:</p>\n\n<pre><code>com.fasterxml.jackson.databind.RuntimeJsonMappingException: Too many entries: expected at most 2 (value #2 (17 chars) \"policy_issue_date\")\n at [Source: (com.fasterxml.jackson.dataformat.csv.impl.UTF8Reader); line: 1, column: 37]\n\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:194)\n    at pl.polins.readers.oc.OcPolicyCsvReader.readNext(OcPolicyCsvReader.kt:25)\n    at pl.polins.readers.oc.OcPolicyCsvReaderTest.should read PolicyCsv from .csv file(OcPolicyCsvReaderTest.groovy:19)\nCaused by: com.fasterxml.jackson.dataformat.csv.CsvMappingException: Too many entries: expected at most 2 (value #2 (17 chars) \"policy_issue_date\")\n at [Source: (com.fasterxml.jackson.dataformat.csv.impl.UTF8Reader); line: 1, column: 37]\n    at com.fasterxml.jackson.dataformat.csv.CsvMappingException.from(CsvMappingException.java:23)\n    at com.fasterxml.jackson.dataformat.csv.CsvParser._reportCsvMappingError(CsvParser.java:1210)\n    at com.fasterxml.jackson.dataformat.csv.CsvParser._handleExtraColumn(CsvParser.java:965)\n    at com.fasterxml.jackson.dataformat.csv.CsvParser._handleNextEntry(CsvParser.java:826)\n    at com.fasterxml.jackson.dataformat.csv.CsvParser.nextToken(CsvParser.java:580)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:418)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1266)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:325)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)\n    at com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:277)\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:192)\n    ... 2 more\n</code></pre>\n\n<p>Is there any solution to ignore unwanted columns in csv?</p>\n"}, {"tags": ["java", "multithreading", "kotlin"], "comments": [{"owner": {"reputation": 1498, "user_id": 4998135, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ufjB7.jpg?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/4998135/nico"}, "edited": false, "score": 0, "creation_date": 1493803549, "post_id": 43755679, "comment_id": 74553476, "body": "<code>The join method allows one thread to wait for the completion of another. If t is a Thread object whose thread is currently executing, t.join(); causes the current thread to pause execution until t&#39;s thread terminates.</code> taken from: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/join.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/join.h&zwnj;&#8203;tml</a>  So calling <code>pollingThread.join</code> will cause your current thread to pause execution until pollingThread is finished. My wild guess is that your checkStatus is having problems but I would like to ask for the log to see what get&#39;s logged and what not."}, {"owner": {"reputation": 1164, "user_id": 1287962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c278d9fd533793ce5a90a3440d87ef17?s=128&d=identicon&r=PG", "display_name": "Ben Flowers", "link": "https://stackoverflow.com/users/1287962/ben-flowers"}, "reply_to_user": {"reputation": 1498, "user_id": 4998135, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ufjB7.jpg?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/4998135/nico"}, "edited": false, "score": 0, "creation_date": 1493809622, "post_id": 43755679, "comment_id": 74557685, "body": "@Nico i have added the test log to the question. Thanks."}], "owner": {"reputation": 1164, "user_id": 1287962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c278d9fd533793ce5a90a3440d87ef17?s=128&d=identicon&r=PG", "display_name": "Ben Flowers", "link": "https://stackoverflow.com/users/1287962/ben-flowers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493809600, "creation_date": 1493802415, "last_edit_date": 1493809600, "question_id": 43755679, "link": "https://stackoverflow.com/questions/43755679/thead-join-killing-running-thread-java-kotlin", "title": "Thead.join killing running thread java (kotlin)", "body": "<p>I have a Managed object (Dropwizard) which is processing an in-memory queue. When the shutdown signal is sent, i need to process the end of the queue. When i set the shutdown signal to true without joining the thread i can see if i put a sleep in my test that the items are processed. However when I join the thread it seems to stop the thread dead rather than waiting for the run method to finish.</p>\n\n<pre><code> class LedgerProcessor constructor(\n    private val ledgerProcessorQueue: LedgerProcessorQueue,\n    private val paymentDao: PaymentDao) : Managed {\n\nprivate lateinit var pollingThread: Thread\n\nprivate val shuttingDown: AtomicBoolean = AtomicBoolean(false)\n\n\noverride fun start() {\n    log.info { \"Started Processing ledger requests\" }\n    pollingThread = object : Thread() {\n        override fun run() {\n            while (checkStatus()) {\n                val payment = ledgerProcessorQueue.next()\n                log.info { \"Upserting payment ${payment.tokenId} status: ${payment.status}\" }\n                paymentDao.upsert(payment)\n            }\n        }\n    }\n    pollingThread.start()\n}\n\nprivate fun checkStatus(): Boolean  {\n    val isShuttingDown = shuttingDown.get()\n    val hasMore = ledgerProcessorQueue.hasNext()\n    log.info { \"isShuttingDown: $isShuttingDown, hasMore: $hasMore - ${!isShuttingDown || hasMore}\" }\n    return !isShuttingDown || hasMore\n}\n\noverride fun stop() {\n    shuttingDown.set(true)\n    pollingThread.join() // this seems to stop the run in process\n}\n</code></pre>\n\n<p>This test fails when pollingThread.join() is present but passes when no joining</p>\n\n<pre><code>    @Test\nfun whenStartedButStoppedBeforeAllProcessedThenAllPaymentsInQueueShouldBeProcessedBeforeEnd(){\n    val payment0 = aPayment()\n    val payment1 = aPayment()\n    val payment2 = aPayment()\n    ledgerQueue.add(payment0)\n    ledgerQueue.add(payment1)\n    ledgerQueue.add(payment2)\n\n    whenever(paymentDao.upsert(payment0)).then {\n        ledgerProcessor.stop()\n    }\n\n    ledgerProcessor.start()\n    //Thread.sleep(5000)\n\n    verify(paymentDao).upsert(payment0)\n    verify(paymentDao).upsert(payment1)\n    verify(paymentDao).upsert(payment2)\n\n}\n</code></pre>\n\n<p>Test Log with Thread.join on:</p>\n\n<pre><code>INFO   [12:02:44.734] [main] c.w.p.d.l.LedgerProcessor -  Started \nProcessing ledger requests \nINFO   [12:02:44.738] [Thread-0] c.w.p.d.l.LedgerProcessor -  \nisShuttingDown: false, hasMore: true - true \nINFO   [12:02:44.739] [Thread-0] c.w.p.d.l.LedgerProcessor -  Upserting \npayment 61a20508-37e6-4347-a7d1-2538fda8c470 status: Processing \n</code></pre>\n\n<p>test log with Thread.join off:</p>\n\n<pre><code>INFO   [12:04:41.994] [main] c.w.p.d.l.LedgerProcessor -  Started Processing ledger requests \nINFO   [12:04:41.999] [Thread-0] c.w.p.d.l.LedgerProcessor -  isShuttingDown: false, hasMore: true - true \nINFO   [12:04:41.999] [Thread-0] c.w.p.d.l.LedgerProcessor -  Upserting payment 5de161b7-3158-4ee4-a5d7-a690b3b500d6 status: Processing \nINFO   [12:04:42.004] [Thread-0] c.w.p.d.l.LedgerProcessor -  isShuttingDown: true, hasMore: true - true \nINFO   [12:04:42.004] [Thread-0] c.w.p.d.l.LedgerProcessor -  Upserting payment 741ab5ee-48af-426c-b167-97641286e796 status: Processing \nINFO   [12:04:42.004] [Thread-0] c.w.p.d.l.LedgerProcessor -  isShuttingDown: true, hasMore: true - true \nINFO   [12:04:42.004] [Thread-0] c.w.p.d.l.LedgerProcessor -  Upserting payment 79546c86-5d02-4bd7-91b8-c2e0c5c4eb5f status: Processing \nINFO   [12:04:42.004] [Thread-0] c.w.p.d.l.LedgerProcessor -  isShuttingDown: true, hasMore: false - false \n</code></pre>\n"}, {"tags": ["java", "maven", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 13324, "user_id": 2051454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1", "display_name": "Software Engineer", "link": "https://stackoverflow.com/users/2051454/software-engineer"}, "edited": false, "score": 0, "creation_date": 1493738967, "post_id": 43740083, "comment_id": 74526535, "body": "What is the specific error you&#39;re getting (because the poms are fine)?"}, {"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "reply_to_user": {"reputation": 13324, "user_id": 2051454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1", "display_name": "Software Engineer", "link": "https://stackoverflow.com/users/2051454/software-engineer"}, "edited": false, "score": 0, "creation_date": 1493740099, "post_id": 43740083, "comment_id": 74527260, "body": "@EngineerDollery the tests fail when I run all of them (across the whole project). It seems like the <code>kotlin-reflect</code> is missing in the addon module like if it wasn&#39;t there. However when I run tests only in the addon module they are working perfectly fine"}, {"owner": {"reputation": 13324, "user_id": 2051454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1", "display_name": "Software Engineer", "link": "https://stackoverflow.com/users/2051454/software-engineer"}, "edited": false, "score": 0, "creation_date": 1493803165, "post_id": 43740083, "comment_id": 74553178, "body": "Surely if it were missing you&#39;d get a NoClassDefFoundError and a stack-trace due to the library being missing from the runtime classpath? Can you try it from the shell using maven? Maybe it&#39;s an intellij thing. A simple <code>mvn clean install</code> at the root should run all your tests. If that works, see if the same thing works in idea (highlight clean and install in the maven window and then run them from the context menu)."}, {"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "reply_to_user": {"reputation": 13324, "user_id": 2051454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1", "display_name": "Software Engineer", "link": "https://stackoverflow.com/users/2051454/software-engineer"}, "edited": false, "score": 0, "creation_date": 1493828644, "post_id": 43740083, "comment_id": 74572074, "body": "Tested it and this problem didn&#39;t occur. It only occurs when I run the tests using configuration in the question. The actual error is: <code>java.lang.AbstractMethodError: kotlin.reflect.jvm.internal.KTypeImpl.getClassifier()Lkotlin&zwnj;&#8203;\u200c\u200b&#47;reflect&#47;KClassifi&zwnj;&#8203;er\u200c\u200b;</code> which from my interpretation occurs because only <code>kotlin-reflect</code> implements given type and intellij doesn&#39;t include it while addon runs (seems like intellij includes only the artifacts for parent module). Is this a IDE bug?"}], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493738599, "creation_date": 1493734320, "last_edit_date": 1493738599, "question_id": 43740083, "link": "https://stackoverflow.com/questions/43740083/intellij-idea-when-testing-multiple-modules-at-once-only-artifacts-from-one-modu", "title": "IntelliJ Idea when testing multiple modules at once only artifacts from one module are included", "body": "<p>I have a project which uses Maven with 3 modules: a parent one, core, and addon. Core has the same artifacts as parent, but addon has an additional one. When I run tests for addon only everything works okay. The problem occurs when I test both modules at once. The tests act as if the addon module didn't have that additional artifact which, causes tests fails. Again, this only occurs when I test both modules at once. Below you can find my configuration.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ToLTq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ToLTq.png\" alt=\"config\"></a></p>\n\n<p>Parent pom:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.github.mibac138.argparser&lt;/groupId&gt;\n    &lt;artifactId&gt;parent&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;modules&gt;\n        &lt;module&gt;Binder&lt;/module&gt;\n        &lt;module&gt;Core&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;java.source&gt;1.6&lt;/java.source&gt;\n        &lt;java.target&gt;1.6&lt;/java.target&gt;\n        &lt;kotlin.version&gt;1.1.2&lt;/kotlin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;jcenter&lt;/id&gt;\n            &lt;name&gt;JCenter&lt;/name&gt;\n            &lt;url&gt;https://jcenter.bintray.com/&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n    &lt;licenses&gt;\n        &lt;license&gt;\n            &lt;name&gt;MIT License&lt;/name&gt;\n            &lt;url&gt;http://www.opensource.org/licenses/mit-license.php&lt;/url&gt;\n        &lt;/license&gt;\n    &lt;/licenses&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-runtime&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testifyproject.mock&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito&lt;/artifactId&gt;\n            &lt;version&gt;0.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.nhaarman&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-kotlin&lt;/artifactId&gt;\n            &lt;version&gt;1.4.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-test-junit&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.7.9&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n            &lt;groupId&gt;org.jetbrains.dokka&lt;/groupId&gt;\n            &lt;artifactId&gt;dokka-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.9.13&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;attach-kotlindocs&lt;/id&gt;\n                        &lt;phase&gt;pre-site&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;javadoc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n        &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.source}&lt;/source&gt;\n                    &lt;target&gt;${java.source}&lt;/target&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;testCompile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-compile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Core pom:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;groupId&gt;com.github.mibac138.argparser&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;argparser-core&lt;/artifactId&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Addon pom:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;groupId&gt;com.github.mibac138.argparser&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;argparser-binder&lt;/artifactId&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.mibac138.argparser&lt;/groupId&gt;\n            &lt;artifactId&gt;argparser-core&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Specifically, the <code>kotlin-reflect</code> acts is it wasn't there when running test across whole project.</p>\n"}, {"tags": ["java", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1493733680, "post_id": 43739546, "comment_id": 74522587, "body": "Make sure that Kotlin code is located in the same package."}], "answers": [{"tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 0, "last_activity_date": 1524822761, "creation_date": 1524822761, "answer_id": 50059803, "question_id": 43739546, "link": "https://stackoverflow.com/questions/43739546/kotlin-java-abstract-class-illegalaccesserror/50059803#50059803", "title": "Kotlin java abstract class IllegalAccessError", "body": "<p>Your code looks like:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    JavaTest()\n    KotlinTest()\n}\n\nclass KotlinTest {\n    val testHolder: TestHolder\n\n    init {\n        testHolder = TestHolder()\n        testHolder.test= Test()\n    }\n}\n</code></pre>\n\n<p>Which doesn't show any package declaration.</p>\n\n<p>Adding <code>package test</code> at the beginning of this file will probably solve this.</p>\n\n<p>In Kotlin, you're not forced to make your file location match your package name, so no package name will not cause an \"error\", but lead to an <code>IllegalAccessException</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 2263251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d32de306f9d84eaafd6d89dc07a32d5?s=128&d=identicon&r=PG", "display_name": "Srki Rakic", "link": "https://stackoverflow.com/users/2263251/srki-rakic"}, "is_accepted": false, "score": 0, "last_activity_date": 1564008744, "last_edit_date": 1564008744, "creation_date": 1564006834, "answer_id": 57191984, "question_id": 43739546, "link": "https://stackoverflow.com/questions/43739546/kotlin-java-abstract-class-illegalaccesserror/57191984#57191984", "title": "Kotlin java abstract class IllegalAccessError", "body": "<p>I ran into the same issue and found that it's a bug in Kotlin compiler. The issue is tracked here: </p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-1170\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-1170</a> </p>\n\n<p>Other resources: </p>\n\n<p><a href=\"https://discuss.kotlinlang.org/t/kotlin-java-abstract-class-illegalaccesserror/2544/4\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/kotlin-java-abstract-class-illegalaccesserror/2544/4</a></p>\n"}], "owner": {"reputation": 325, "user_id": 97873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e01a4334f1ac59d457d8ff559bb2c52c?s=128&d=identicon&r=PG", "display_name": "Manish V", "link": "https://stackoverflow.com/users/97873/manish-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 527, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564008744, "creation_date": 1493732724, "last_edit_date": 1524822608, "question_id": 43739546, "link": "https://stackoverflow.com/questions/43739546/kotlin-java-abstract-class-illegalaccesserror", "title": "Kotlin java abstract class IllegalAccessError", "body": "<p>I am having a issue with java interop and Kotlin I have a package protected java abstract class, <code>AbstractTest</code>, which is used as a member in another class, <code>TestHolder</code>. When I create a derived instance of the abstract class , <code>Test</code>, and try to use it in kotlin I get:</p>\n\n<blockquote>\n  <p>java.lang.IllegalAccessError: tried to access class test.AbtractTest from class KotlinTest</p>\n</blockquote>\n\n<p>The Java version of the same code seems to work fine though ...</p>\n\n<pre><code>package test;\n\nabstract class AbtractTest {\n}\n\npackage test;\n\npublic class Test extends AbtractTest {\n}\n\npackage test;\n\npublic class TestHolder {\n    private AbtractTest test;\n\n    public AbtractTest getTest() {\n        return test;\n    }\n\n    public void setTest(AbtractTest test) {\n        this.test = test;\n    }\n}\n\npublic class JavaTest {\n    private TestHolder testHolder;\n\n    public JavaTest() {\n        testHolder = new TestHolder();\n        testHolder.setTest(new Test());\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    JavaTest()\n    KotlinTest()\n}\n\nclass KotlinTest {\n    val testHolder: TestHolder\n\n    init {\n        testHolder = TestHolder()\n        testHolder.test= Test()\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4715, "user_id": 4534687, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50519a4d49a1bd330a8686bb9c237b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph Aleph", "link": "https://stackoverflow.com/users/4534687/aleph-aleph"}, "edited": false, "score": 16, "creation_date": 1493729016, "post_id": 43737962, "comment_id": 74519271, "body": "Many thanks. From the link you posted, I understand that it is preferable to use functional types (e.g. <code>Location -&gt; Unit</code>) instead of single-method interfaces if possible - is that correct?"}, {"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "edited": false, "score": 4, "creation_date": 1493731945, "post_id": 43737962, "comment_id": 74521316, "body": "It is correct. You should use functional type wherever possible."}, {"owner": {"reputation": 7165, "user_id": 430673, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9a5acff2a35974a8b7d3f8e63e7bf6e6?s=128&d=identicon&r=PG", "display_name": "Tash Pemhiwa", "link": "https://stackoverflow.com/users/430673/tash-pemhiwa"}, "edited": false, "score": 0, "creation_date": 1542225692, "post_id": 43737962, "comment_id": 93496466, "body": "However in my case the interface (SurfaceTextureListener) had multiple methods."}, {"owner": {"reputation": 80, "user_id": 7796689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KIsI3.jpg?s=128&g=1", "display_name": "TT_W", "link": "https://stackoverflow.com/users/7796689/tt-w"}, "edited": false, "score": 0, "creation_date": 1549374586, "post_id": 43737962, "comment_id": 95873254, "body": "Thanks so much. This answer must have more likes or some special mark, couse it is very useful information and unfortunately some learners can become very confused when learn Kotlin by articles or by &quot;Kotlin in Action&quot; when they look at SAM topic."}, {"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "edited": false, "score": 0, "creation_date": 1578886801, "post_id": 43737962, "comment_id": 105572556, "body": "from &quot;Kotlin in Action&quot;, yes, you can use lambda in Java&#39;s SAM param for shorten and cleaner code, but not Kotlin&#39;s SAM, function type is the first class in Kotlin, so, SAM has not meaning for Kotlin, function type with typealias  is more Kotlin style."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 241, "last_activity_date": 1493728223, "creation_date": 1493728223, "answer_id": 43737962, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/43737962#43737962", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>Your Java code relies on SAM conversion - an automatic conversion of a lambda into an interface with a single abstract method. SAM conversion is <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"noreferrer\">currently not supported</a> for interfaces defined in Kotlin. Instead, you need to define an anonymous object implementing the interface:</p>\n\n<pre><code>val obj = object : MyInterface {\n    override fun onLocationMeasured(location: Location) { ... }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17145, "user_id": 5093961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3736a281ed5cdc18e41f6d3100d76dcc?s=128&d=identicon&r=PG", "display_name": "Steven Spungin", "link": "https://stackoverflow.com/users/5093961/steven-spungin"}, "is_accepted": false, "score": 18, "last_activity_date": 1509946825, "last_edit_date": 1509946825, "creation_date": 1508699246, "answer_id": 46878071, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/46878071#46878071", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>The best solution is to use a typealias in-place of your Java interface </p>\n\n<p><code>typealias MyInterface = (Location) -&gt; Unit</code></p>\n\n<pre><code>fun addLocationHandler(myInterface:MyInterface) {\n\n}\n</code></pre>\n\n<p>Register it like this:</p>\n\n<pre><code>val myObject = { location -&gt; ...}\naddLocationHandler(myObject)\n</code></pre>\n\n<p>or even cleaner</p>\n\n<pre><code>addLocationHandler { location -&gt; ...}\n</code></pre>\n\n<p>Invoke it like this:</p>\n\n<pre><code>myInterface.invoke(location)\n</code></pre>\n\n<p>The 3 current options seem to be:</p>\n\n<ul>\n<li>typealias (messy when called from java)</li>\n<li>kotlin interface (messy when called from kotlin; you need to create an object)  This is a big step back IMO.</li>\n<li>java interface (less messy when called from kotlin; lambda needs interface name prepended so you don't need an object; also can't use lambda outside of function parenthesis convention)</li>\n</ul>\n\n<p>When converting our libraries to Kotlin, we actually left all the interfaces in Java code, as it was cleaner to call Java from Kotlin than Kotlin from Kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 3198, "user_id": 1367344, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cAx41.jpg?s=128&g=1", "display_name": "Adnan Abdollah Zaki", "link": "https://stackoverflow.com/users/1367344/adnan-abdollah-zaki"}, "is_accepted": false, "score": 7, "last_activity_date": 1530118711, "last_edit_date": 1530118711, "creation_date": 1512997441, "answer_id": 47753636, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/47753636#47753636", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>if you have <strong><em>Java class</em></strong> like this :</p>\n\n<pre><code>recyclerView.addOnItemTouchListener(new RecyclerTouchListener(getActivity(), recyclerView, new RecyclerTouchListener.ClickListener()\n        {\n              //Your Code\n        }));\n</code></pre>\n\n<p>you shoud convert this code from Java to <strong><em>Kotlin</em></strong> like this :</p>\n\n<pre><code>override fun showJozList (list : List&lt;ResponseGetJuzList.Parameter4&gt;) {\n        adapter.addData(list)\n        jozlist_recycler.addOnItemTouchListener(RecyclerTouchListener(\n                activity ,\n                jozlist_recycler ,\n                object : RecyclerTouchListener.ClickListener\n                    {\n                          //Your Code\n                    }))\n</code></pre>\n\n<hr>\n\n<p>convert <strong>Java Interface</strong> :</p>\n\n<pre><code>new RecyclerTouchListener.ClickListener()\n</code></pre>\n\n<p>to <strong>Kotlin Interface</strong> Style:</p>\n\n<pre><code>object : RecyclerTouchListener.ClickListener\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 11319773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bZ4_ENIpF3Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd0woEiR5ylqC2yg2aF6GwuiJvkKw/mo/photo.jpg?sz=128", "display_name": "Axes Grinds", "link": "https://stackoverflow.com/users/11319773/axes-grinds"}, "edited": false, "score": 1, "creation_date": 1619024822, "post_id": 52669080, "comment_id": 118782158, "body": "This is the correct answer."}], "tags": [], "owner": {"reputation": 3132, "user_id": 5364583, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/67aed09085b954ecc27caed47ae20969?s=128&d=identicon&r=PG", "display_name": "J&#233;w&#244;m&#39;", "link": "https://stackoverflow.com/users/5364583/j%c3%a9w%c3%b4m"}, "is_accepted": false, "score": 12, "last_activity_date": 1538753790, "creation_date": 1538753790, "answer_id": 52669080, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/52669080#52669080", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>Try to access to your interface like this :</p>\n\n<pre><code> object : MyInterface {\n    override fun onSomething() { ... }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12237069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25395520f24a74ab743961499ab6d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Shin Seungwoo", "link": "https://stackoverflow.com/users/12237069/shin-seungwoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1571384681, "creation_date": 1571384681, "answer_id": 58446167, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/58446167#58446167", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>If the interface is for a listener method of a class, change the interface definition to the function type. That makes the code more concise. See the following.</p>\n\n<p>Class containing listener definition</p>\n\n<pre><code>// A class\nprivate var mLocationMeasuredListener = (location: Location) -&gt; Unit = {}\n\nvar setOnLocationMeasuredListener(listener: (location: Location) -&gt; Unit) {\n    mLocationMeasuredListener = listener\n}\n\n// somewhere in A class\nmLocationMeasuredListener(location)\n</code></pre>\n\n<p>Another class</p>\n\n<pre><code>// B class\naClass.setOnLocationMeasuredListener { location -&gt;\n    // your code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 0, "last_activity_date": 1581304626, "creation_date": 1581304626, "answer_id": 60143653, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/60143653#60143653", "title": "Kotlin: Interface ... does not have constructors", "body": "<pre><code>class YourClass : YourInterface {  \n    override fun getTest() = \"test\"    \n}\n\ninterface YourInterface {\n    fun getTest(): String\n}\n\nval objectYourClass: YourInterface = YourClass()\nprint(objectYourClass.getTest())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 10239009, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PdmDbsFN89Q/AAAAAAAAAAI/AAAAAAAAA7A/d5LxEJ1D87w/photo.jpg?sz=128", "display_name": "Mujeeb Rahaman T", "link": "https://stackoverflow.com/users/10239009/mujeeb-rahaman-t"}, "edited": false, "score": 1, "creation_date": 1610456842, "post_id": 63477337, "comment_id": 116133900, "body": "This wrkd for me"}], "tags": [], "owner": {"reputation": 4728, "user_id": 13363205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33l5N.png?s=128&g=1", "display_name": "iknow", "link": "https://stackoverflow.com/users/13363205/iknow"}, "is_accepted": false, "score": 6, "last_activity_date": 1597788778, "creation_date": 1597788778, "answer_id": 63477337, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors/63477337#63477337", "title": "Kotlin: Interface ... does not have constructors", "body": "<p><strong>SAM conversion is supported for interfaces defined in Kotlin since <code>1.4.0</code></strong></p>\n<p><a href=\"https://kotlinlang.org/docs/reference/whatsnew14.html#sam-conversions-for-kotlin-interfaces\" rel=\"noreferrer\">What's New in Kotlin <code>1.4.0</code></a></p>\n<blockquote>\n<p>Before Kotlin <code>1.4.0</code>, you could apply SAM (Single Abstract Method) conversions only when working with Java methods and Java interfaces from Kotlin. From now on, you can use SAM conversions for Kotlin interfaces as well. To do so, mark a Kotlin interface explicitly as functional with the <strong><code>fun</code></strong> modifier.</p>\n</blockquote>\n<blockquote>\n<p>SAM conversion applies if you pass a lambda as an argument when an interface with only one single abstract method is expected as a parameter. In this case, the compiler automatically converts the lambda to an instance of the class that implements the abstract member function.</p>\n</blockquote>\n<p>So the example in Your question will look something like this:</p>\n<pre><code>fun interface MyInterface\n{\n    fun onLocationMeasured(location: String)\n}\n\nfun main()\n{\n    val myObj = MyInterface { println(it) }\n\n    myObj.onLocationMeasured(&quot;New York&quot;)\n}\n</code></pre>\n"}], "owner": {"reputation": 4715, "user_id": 4534687, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50519a4d49a1bd330a8686bb9c237b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph Aleph", "link": "https://stackoverflow.com/users/4534687/aleph-aleph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44835, "favorite_count": 15, "accepted_answer_id": 43737962, "answer_count": 7, "score": 149, "last_activity_date": 1597788778, "creation_date": 1493727707, "question_id": 43737785, "link": "https://stackoverflow.com/questions/43737785/kotlin-interface-does-not-have-constructors", "title": "Kotlin: Interface ... does not have constructors", "body": "<p>I am converting some of my Java code to Kotlin and I do not quite understand how to instantiate interfaces that are defined in Kotlin code. As an example, I have an interface (defined in Java code):</p>\n\n<pre><code>public interface MyInterface {\n    void onLocationMeasured(Location location);\n}\n</code></pre>\n\n<p>And then further in my Kotlin code I instantiate this interface:</p>\n\n<pre><code>val myObj = new MyInterface { Log.d(\"...\", \"...\") }\n</code></pre>\n\n<p>and it works fine. However, when I convert MyInterface to Kotlin:</p>\n\n<pre><code>interface MyInterface {\n    fun onLocationMeasured(location: Location)\n}\n</code></pre>\n\n<p>I get an error message: <code>Interface MyListener does not have constructors</code> when I try to instantiate it - though it seems to me that nothing has changed except syntax. Do I misunderstand how interfaces work in Kotlin?</p>\n"}, {"tags": ["spring", "hibernate", "spring-boot", "kotlin", "spring-transactions"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8967317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1fc83c6d35d7ebd6057f4208b66b0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Arius", "link": "https://stackoverflow.com/users/8967317/arius"}, "is_accepted": false, "score": 1, "last_activity_date": 1511165904, "creation_date": 1511165904, "answer_id": 47387643, "question_id": 43725538, "link": "https://stackoverflow.com/questions/43725538/write-call-transaction-is-dropped-in-transactionaleventlistener/47387643#47387643", "title": "Write call/transaction is dropped in TransactionalEventListener", "body": "<p>I ran into the same problem. This behavior is actually mentioned in the documentation of the TransactionSynchronization#afterCompletion(int) which is referred to by the TransactionPhase.AFTER_COMMIT (which is the default TransactionPhase attribute of the @TransactionalEventListener):</p>\n\n<blockquote>\n  <p>The transaction will have been committed or rolled back already, but the transactional resources might still be active and accessible. As a consequence, any data access code triggered at this point will still \"participate\" in the original transaction, allowing to perform some cleanup (with no commit following anymore!), unless it explicitly declares that it needs to run in a separate transaction. Hence: Use PROPAGATION_REQUIRES_NEW for any transactional operation that is called from here.</p>\n</blockquote>\n\n<p>Unfortunately this seems to leave no other option than to enforce a new transaction via Propagation.REQUIRES_NEW. The problem is that the transactionalEventListeners are implemented as transaction synchronizations and hence bound to the transaction. When the transaction is closed and its resources cleaned up, so are the listeners. There might be a way to use a customized EntityManager which stores events and then publishes them after its close() was called. </p>\n\n<p>Note that you can use TransactionPhase.BEFORE_COMMIT on your @TransactionalEventListener which will take place before the commit of the transaction. This will write your changes to the database but you won't know whether the transaction you're listening on was actually committed or is about to be rolled back.</p>\n"}], "owner": {"reputation": 13, "user_id": 628921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/997339cd5c80df263668b592ad6fdc47?s=128&d=identicon&r=PG", "display_name": "Nitin Singh", "link": "https://stackoverflow.com/users/628921/nitin-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 3, "answer_count": 1, "score": 0, "last_activity_date": 1511165904, "creation_date": 1493668455, "last_edit_date": 1493703779, "question_id": 43725538, "link": "https://stackoverflow.com/questions/43725538/write-call-transaction-is-dropped-in-transactionaleventlistener", "title": "Write call/transaction is dropped in TransactionalEventListener", "body": "<p>I am using spring-boot(1.4.1) with hibernate(5.0.1.Final). I noticed that when I try to write to the db from within <code>@TransactionalEventListener</code> handler the call is simply ignored. A read call works just fine. \nWhen I say ignore, I mean there is no write in the db and there are no logs. I even enabled log4jdbc and still no logs which mean no hibernate session was created. From this, I reckon, somewhere in spring-boot we identify that its a transaction event handler and ignore a write call. </p>\n\n<p>Here is an example. </p>\n\n<pre><code>// This function is defined in a class marked with @Service\n@TransactionalEventListener\nopen fun handleEnqueue(event: EnqueueEvent) {\n    // some code to obtain encodeJobId\n    this.uploadService.saveUploadEntity(uploadEntity, encodeJobId)\n}\n\n@Service\n@Transactional\nclass UploadService {\n    //.....code\n\n    open fun saveUploadEntity(uploadEntity: UploadEntity, encodeJobId: String): UploadEntity {\n        // some code\n        return this.save(uploadEntity)\n    }\n}\n</code></pre>\n\n<p>Now if I force a new Transaction by annotating </p>\n\n<pre><code>@Transactional(propagation = Propagation.REQUIRES_NEW)\nsaveUploadEntity \n</code></pre>\n\n<p>a new transaction with connection is made and everything works fine. </p>\n\n<ol>\n<li><p>I dont like that there is complete silence in logs when this write is dropped (again reads succeed). Is there a known bug?</p></li>\n<li><p>How to enable the handler to start a new transaction? If I do Propogation.Requires_new on my handleEnqueue event, it does not work. </p></li>\n</ol>\n\n<p>Besides, enabling log4jdbc which successfully logs reads/writes I have following settings in spring. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "operator-keyword"], "comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 6, "creation_date": 1493653054, "post_id": 43721362, "comment_id": 74487130, "body": "Unlike Java, Kotlin does not automatically promote numbers to wider types. You have to explicitly use the same types for these comparisons. Franscesc gave the correct answer, but if your int was stored in a variable, you would do <code>if (drawerItem.identifier == id.toLong())</code>."}], "answers": [{"comments": [{"owner": {"reputation": 14027, "user_id": 494879, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/1wDc0.png?s=128&g=1", "display_name": "ataulm", "link": "https://stackoverflow.com/users/494879/ataulm"}, "edited": false, "score": 0, "creation_date": 1569327982, "post_id": 43721536, "comment_id": 102554873, "body": "The L explicitly casts declares the <code>1</code> as a <code>Long</code> type so they can be compared now. &quot;Explicitly indicating that the right side is a Long fixes the error.&quot;"}, {"owner": {"reputation": 1027, "user_id": 814422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad082805d1ce2e3766886195c720fca6?s=128&d=identicon&r=PG", "display_name": "kbolino", "link": "https://stackoverflow.com/users/814422/kbolino"}, "edited": false, "score": 0, "creation_date": 1572640210, "post_id": 43721536, "comment_id": 103634180, "body": "How broadly true is the statement &quot;Kotlin does not promote/widen types&quot;? Other things do work, like ordered comparisons and the elvis operator. For example, <code>if (someLongValue &gt; 1)</code> works (ditto <code>&gt;=</code>, <code>&lt;</code>, and <code>&lt;=</code>), and <code>someNullableLongValue ?: 0</code> works and has type <code>Long</code>."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 127, "last_activity_date": 1536863532, "last_edit_date": 1536863532, "creation_date": 1493652067, "answer_id": 43721536, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin/43721536#43721536", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>Simply use long on your right side</p>\n\n<pre><code>if (drawerItem.identifier == 1L)\n</code></pre>\n\n<p>Edit: the reason this is required is that Kotlin does not promote Ints to Longs (or, more generally, does not widen types); on the left side we had a Long and on the right side we had an Int, which lead to the error. Explicitly indicating that the right side is a Long fixes the error.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 5725819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wI16vFRp9M/AAAAAAAAAAI/AAAAAAAAAKI/V219napJk-o/photo.jpg?sz=128", "display_name": "Ranajit Sawant", "link": "https://stackoverflow.com/users/5725819/ranajit-sawant"}, "is_accepted": false, "score": 0, "last_activity_date": 1507892654, "creation_date": 1507892654, "answer_id": 46728441, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin/46728441#46728441", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>if you facing problem of \n&lt; <strong>operator != not applied to long and int</strong> >\nsolve it Simply using long on your right side \nie value!= 1L\nthats it..</p>\n"}, {"comments": [{"owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 1, "creation_date": 1534793244, "post_id": 51937244, "comment_id": 90824653, "body": "For what it&#39;s worth, testing for -1 or 1 is not the same as testing for negative or positive."}], "tags": [], "owner": {"reputation": 909, "user_id": 3090337, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/60b5c3149bb01219e29fe4b55ee57484?s=128&d=identicon&r=PG&f=1", "display_name": "cfl", "link": "https://stackoverflow.com/users/3090337/cfl"}, "is_accepted": false, "score": 2, "last_activity_date": 1534793712, "last_edit_date": 1534793712, "creation_date": 1534792914, "answer_id": 51937244, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin/51937244#51937244", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>For interest, another solution would be to use <code>compareTo()</code>. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/compare-to.html\" rel=\"nofollow noreferrer\">compareTo</a> returns zero if the values are equal, negative if its less than the other, or positive if its greater than the other:</p>\n\n<pre><code> if(drawerItem.identifier.compareTo(1) == 0)   \"Equals\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11742936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-t8-NRF3vLL8/AAAAAAAAAAI/AAAAAAAAC9E/TlxPpcTVULk/photo.jpg?sz=128", "display_name": "Sarang Srivastava", "link": "https://stackoverflow.com/users/11742936/sarang-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1609227256, "creation_date": 1609227256, "answer_id": 65488807, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin/65488807#65488807", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>If the above solution didn't work for you,\ntry <strong>explicitly</strong> converting the value on right to the particular <em>wider</em> type on left side</p>\n<pre><code>num = 5.7\nif (num == 4.toDouble()) {\n    //some code\n}\n</code></pre>\n<p>Every number type supports the following conversions:</p>\n<ul>\n<li>toByte(): Byte</li>\n<li>toShort(): Short</li>\n<li>toInt(): Int</li>\n<li>toLong(): Long</li>\n<li>toFloat(): Float</li>\n<li>toDouble(): Double</li>\n<li>toChar(): Char</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 11951366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OEL6jFkER-0/AAAAAAAAAAI/AAAAAAAAAAc/H2cFqp6eO0w/photo.jpg?sz=128", "display_name": "Jalees Mukarram", "link": "https://stackoverflow.com/users/11951366/jalees-mukarram"}, "is_accepted": false, "score": 0, "last_activity_date": 1618516070, "creation_date": 1618516070, "answer_id": 67115163, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin/67115163#67115163", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>Make sure when you are comparing Double with any number like myDouble == 5 it will not work until you add .0 at the end. It is because Kotlin guesses the type from the entered number and it will consider 5 as int and myDouble as double and will product same error</p>\n<p>So, always explicitly make the comparing variable same of other variable</p>\n<pre><code>drawerItem.identifier == (1.0)\n</code></pre>\n"}], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24323, "favorite_count": 0, "accepted_answer_id": 43721536, "answer_count": 5, "score": 39, "last_activity_date": 1618516070, "creation_date": 1493651396, "question_id": 43721362, "link": "https://stackoverflow.com/questions/43721362/operator-cannot-be-applied-to-long-and-int-in-kotlin", "title": "Operator == cannot be applied to &#39;Long&#39; and &#39;Int&#39; in Kotlin", "body": "<p>I'm attempting to implement parts of Mike Penz' NavigationDrawer (<a href=\"https://github.com/mikepenz/MaterialDrawer\" rel=\"noreferrer\">https://github.com/mikepenz/MaterialDrawer</a>) in Kotlin. Since then I've run into only a few issues, primarily with operators. Here is part of the code to instantiate the drawer itself. Android Studio doesn't throw any errors except where I'm using the == operator on int and Long variables:</p>\n\n<pre><code>        // Create the Drawer\n        result = DrawerBuilder()\n                .withSliderBackgroundColor(ContextCompat.getColor(applicationContext, R.color.top_header))\n                .withActivity(this)\n                .withToolbar(toolbar)\n                .withHasStableIds(true)\n                .withItemAnimator(AlphaCrossFadeAnimator())\n                .withAccountHeader(headerResult!!)\n                .addDrawerItems(\n                        PrimaryDrawerItem().withName(R.string.drawer_item_profile).withIcon(FontAwesome.Icon.faw_user).withIdentifier(1).withSelectable(false).withIconColor(ContextCompat.getColor(applicationContext, R.color.icon_grey)).withTextColor(ContextCompat.getColor(applicationContext, R.color.stroke)),\n                        PrimaryDrawerItem().withName(R.string.drawer_item_create).withIcon(FontAwesome.Icon.faw_paint_brush).withIdentifier(2).withSelectable(false).withIconColor(ContextCompat.getColor(applicationContext, R.color.icon_grey)).withTextColor(ContextCompat.getColor(applicationContext, R.color.stroke)),\n                        PrimaryDrawerItem().withName(R.string.drawer_item_yaanich_news).withIcon(FontAwesome.Icon.faw_newspaper_o).withIdentifier(3).withSelectable(false).withIconColor(ContextCompat.getColor(applicationContext, R.color.icon_grey)).withTextColor(ContextCompat.getColor(applicationContext, R.color.stroke)),\n                        PrimaryDrawerItem().withName(R.string.drawer_item_my_groups).withIcon(FontAwesome.Icon.faw_users).withIdentifier(4).withSelectable(false).withIconColor(ContextCompat.getColor(applicationContext, R.color.icon_grey)).withTextColor(ContextCompat.getColor(applicationContext, R.color.stroke)),\n                        PrimaryDrawerItem().withName(R.string.drawer_item_settings).withIcon(FontAwesome.Icon.faw_cog).withIdentifier(5).withSelectable(false).withIconColor(ContextCompat.getColor(applicationContext, R.color.icon_grey)).withTextColor(ContextCompat.getColor(applicationContext, R.color.stroke))\n                )\n                .withOnDrawerItemClickListener { view, position, drawerItem -&gt;\n\n                    if (drawerItem != null) {\n                        var intent: Intent? = null\n                        if (drawerItem.identifier == (1) {\n                            intent = Intent(this, UserProfileActivity::class.java)\n                        } else if (drawerItem.identifier == 2) {\n                            intent = Intent(this, YeetActivity::class.java)\n                        } else if (drawerItem.identifier == 3) {\n                            intent = Intent(this, RssActivity::class.java)\n                        } else if (drawerItem.identifier == 4) {\n                            intent = Intent(this, GroupsActivity::class.java)\n                        } else if (drawerItem.identifier == 5) {\n                            intent = Intent(this, UserSettingsActivity::class.java)\n                        }\n                        if (intent != null) {\n                            this.startActivity(intent)\n                        }\n                    }\n                    false\n                }\n                .withSavedInstance(savedInstanceState)\n                .withShowDrawerOnFirstLaunch(true)\n                .build()\n\n        RecyclerViewCacheUtil&lt;IDrawerItem&lt;*, *&gt;&gt;().withCacheSize(2).apply(result!!.recyclerView, result!!.drawerItems)\n\n        if (savedInstanceState == null) {\n            result!!.setSelection(21, false)\n            headerResult!!.activeProfile = profile\n        }\n    }\n</code></pre>\n\n<p><strong>Errors:</strong></p>\n\n<p><code>if (drawerItem.identifier == (1)</code></p>\n\n<p><code>if (drawerItem.identifier == 2)</code></p>\n\n<p><code>Operator == cannot be applied to 'Long and' 'Int'</code></p>\n"}, {"tags": ["mongodb", "kotlin", "spring-data-mongodb"], "answers": [{"tags": [], "owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "is_accepted": true, "score": 2, "last_activity_date": 1493691607, "creation_date": 1493691607, "answer_id": 43729090, "question_id": 43713652, "link": "https://stackoverflow.com/questions/43713652/kotlin-getter-override-mongodb/43729090#43729090", "title": "Kotlin getter override + MongoDB", "body": "<p>I haven't kept up to the latest and greates spring-data-mongo changes but if you simply change your id to be of type String? instead of ObjectId <strong>and</strong> your string value happens to be the \"string\" hex code representation of an ObjectId, spring data will auto-convert that to an ObjectId when saving to the database and auto-translate the ObjectId to a String when reading it back out to the bean.</p>\n\n<p>Basically the spring-data-mongo does the magic for you. I doubt they changed that behavior from the 1.x days but I might be wrong.</p>\n"}], "owner": {"reputation": 377, "user_id": 3236840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21923f3bc07e0d0c3531f9c93824e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Julieta", "link": "https://stackoverflow.com/users/3236840/julieta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 43729090, "answer_count": 1, "score": 0, "last_activity_date": 1493691607, "creation_date": 1493607119, "question_id": 43713652, "link": "https://stackoverflow.com/questions/43713652/kotlin-getter-override-mongodb", "title": "Kotlin getter override + MongoDB", "body": "<p>I'm new to Kotlin development and I cannot figure out how to deal with this issue. I have the following Kotlin data class mapped to a MongoDB collection (Spring Data MongoDB):</p>\n\n<pre><code>@Document(collection = \"orders\")\ndata class OrderEntity\n@PersistenceConstructor\nconstructor(@Id val id: ObjectId? = null, val place: String, var date: Date,\n            val closed: Boolean = false, val price: Int = 0)\n</code></pre>\n\n<p>I want to override the default id getter and return a string instead of an ObjectId. It seems that \"id\" field name cannot be changed because I'm getting the message \"Customizing field name for id property not allowed! Custom name will not be considered!\" so I can't use the _id solution that is always suggested. </p>\n\n<p>How could one achieve this? Am I missing something?</p>\n"}, {"tags": ["c++", "arrays", "class", "kotlin"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 1, "creation_date": 1493588292, "post_id": 43711025, "comment_id": 74467180, "body": "A note for those who know C/C++ and want to learn Java/Kotlin. In Java and Kotlin you can&#39;t just declare a variable, you must initialize it explicitly, e. g. <code>Widget widget;</code> in Java or <code>val widget: Widget</code> in Kotlin won&#39;t create a new Widget, <code>Widget widget = new Widget();</code> or <code>val widget: Widget = Widget()</code> would. Similarly, <code>val data: Array&lt;Widget&gt;</code> is just a varable, and <code>val data: Array&lt;Widget&gt; = Array(100) { Widget() }</code> is an array initialization, since arrays are objects too and behave identically. Also, Kotlin equivalent of Java&#39;s <code>new Something[x]</code> is <code>arrayOfNulls&lt;Something&gt;(x)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1493624190, "last_edit_date": 1493624190, "creation_date": 1493585490, "answer_id": 43711190, "question_id": 43711025, "link": "https://stackoverflow.com/questions/43711025/kotlin-equivalent-for-c-class-array/43711190#43711190", "title": "Kotlin equivalent for c++ class array", "body": "<p>If you have a <code>class Widget</code> declared, you can create an array of 100 <code>Widget</code>s like so:</p>\n\n<pre><code>val data = Array(100) { Widget() }\n</code></pre>\n\n<p>The <code>Array</code> constructor takes two arguments. The first argument is the size of the array, the second one is the initialization function for creating its elements. In the example, I just call the default constructor of <code>Widget</code>. </p>\n\n<p>Also, this initialization function receives the index of the element being created as a parameter, should you need that for creating your elements.</p>\n\n<p><strong>Edit:</strong> @Miha_x64 made some good points in the comment above, so I'll include some of it here as well.</p>\n\n<p>You can also create an array without creating elements to put in it immediately, using <code>arrayOfNulls</code>.</p>\n\n<pre><code>val nullableWidgets = arrayOfNulls&lt;Widget&gt;(100)\n</code></pre>\n\n<p>This will give you an <code>Array&lt;Widget?&gt;</code> instead of an <code>Array&lt;Widget&gt;</code>, and initialize all of the array's elements to <code>null</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7021707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12bdd4e36223ef8d86defee05f0c5705?s=128&d=identicon&r=PG&f=1", "display_name": "Sean S", "link": "https://stackoverflow.com/users/7021707/sean-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 43711190, "answer_count": 1, "score": 0, "last_activity_date": 1493624190, "creation_date": 1493584291, "question_id": 43711025, "link": "https://stackoverflow.com/questions/43711025/kotlin-equivalent-for-c-class-array", "title": "Kotlin equivalent for c++ class array", "body": "<p>I'm trying to find the Kotlin equivalent of making a class array in C++</p>\n\n<pre><code>class Widget {\npublic:\n  int x;              \n  float w; \n}\n\nWidget data[100];\n</code></pre>\n"}, {"tags": ["android", "annotations", "kotlin"], "comments": [{"owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1493567602, "post_id": 43708240, "comment_id": 74460546, "body": "That&#39;s not the right log. Can you post the output of <code>gradlew.bat assembleDebug</code>/<code>.&#47;gradlew assembleDebug</code>?"}, {"owner": {"reputation": 117, "user_id": 5272499, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-SUWiPljjfW4/AAAAAAAAAAI/AAAAAAAAATo/Sn_CwazQ5Y4/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041a\u0443\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5272499/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9a%d1%83%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1493567822, "post_id": 43708240, "comment_id": 74460624, "body": "$ ./gradlew clean assembleDebug &gt;&gt; output.log <a href=\"https://gist.github.com/LionZXY/4a737b35f95fc40ff33a6c975ae08a9f\" rel=\"nofollow noreferrer\">gist.github.com/LionZXY/4a737b35f95fc40ff33a6c975ae08a9f</a>"}, {"owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1493711427, "post_id": 43708240, "comment_id": 74508537, "body": "Weird, only warnings in that log, not errors, yet it fails kapt. Can you try making <code>mSearchView</code> and <code>mRecyclerView</code> <code>protected</code> instead of <code>private</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 2328444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oVW6X.jpg?s=128&g=1", "display_name": "Ahasan", "link": "https://stackoverflow.com/users/2328444/ahasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1550919661, "creation_date": 1550919661, "answer_id": 54840867, "question_id": 43708240, "link": "https://stackoverflow.com/questions/43708240/android-annotation-with-kotlin/54840867#54840867", "title": "Android Annotation with Kotlin", "body": "<p>Annotations are means of attaching metadata to code. Annotations are supported in Kotlin with kapt plugin.Please ensure kotlin latest version 1.3 + <br/><br/>\nYou can apply plugin syntax in module-level build file as follows</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>Then you can add dependency</p>\n\n<pre><code>dependencies {\n...\nimplementation 'androidx.room:room-runtime:2.1.0-alpha04'\nkapt 'androidx.room:room-compiler:2.1.0-alpha04'\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 5272499, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-SUWiPljjfW4/AAAAAAAAAAI/AAAAAAAAATo/Sn_CwazQ5Y4/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041a\u0443\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5272499/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9a%d1%83%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 758, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550942934, "creation_date": 1493567268, "question_id": 43708240, "link": "https://stackoverflow.com/questions/43708240/android-annotation-with-kotlin", "title": "Android Annotation with Kotlin", "body": "<p>I can't run Android Annotation with Kotlin Android Project.\nWhen i try run my application with link to MainActivity_, my app is crashed. But i mark Activity class with @EActivity</p>\n\n<blockquote>\n  <p>Unable to instantiate activity\n  ComponentInfo{ru.lionzxy.jetbrainsintership/ru.lionzxy.jetbrainsintership.MainActivity_}</p>\n</blockquote>\n\n<p>I try add</p>\n\n<pre><code>kapt {\n    generateStubs = true\n    arguments {\n        arg(\"androidManifestFile\", variant.outputs[0].processResourcesTask.manifestFile)\n    }\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>kapt \"org.androidannotations:androidannotations:$AAVersion\"\ncompile \"org.androidannotations:androidannotations-api:$AAVersion\"\n</code></pre>\n\n<p>in my build.gradle file. Clean and build. And get this error:</p>\n\n<blockquote>\n  <p>Error:Execution failed for task ':app:kaptDebugKotlin'.</p>\n  \n  <blockquote>\n    <p>Compilation error. See log for more details</p>\n  </blockquote>\n</blockquote>\n\n<p>My log file in /app/build/outputs/logs/manifest-merger-debug-report.txt:\n<a href=\"https://gist.github.com/LionZXY/bf398a3b64f787a56d985a5a0ea03bfe\" rel=\"nofollow noreferrer\">https://gist.github.com/LionZXY/bf398a3b64f787a56d985a5a0ea03bfe</a></p>\n\n<p>I don't understand why it not work. \nMy full build.gradle: <a href=\"https://gist.github.com/LionZXY/4e672579fe89ad22cea07d2fe15a1621\" rel=\"nofollow noreferrer\">https://gist.github.com/LionZXY/4e672579fe89ad22cea07d2fe15a1621</a></p>\n"}, {"tags": ["sockets", "tcp", "kotlin"], "comments": [{"owner": {"reputation": 72, "user_id": 2683913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2bd88b51d0045f88f2f6da656a10618?s=128&d=identicon&r=PG&f=1", "display_name": "ntrch", "link": "https://stackoverflow.com/users/2683913/ntrch"}, "edited": false, "score": 0, "creation_date": 1596381264, "post_id": 43706394, "comment_id": 111787669, "body": "Can you add the rest of the code? It can help me with my own project in Kotlin. Thanks in advance."}], "answers": [{"tags": [], "owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "is_accepted": true, "score": 8, "last_activity_date": 1493556633, "creation_date": 1493556633, "answer_id": 43706552, "question_id": 43706394, "link": "https://stackoverflow.com/questions/43706394/create-a-tcp-listener-in-kotlin/43706552#43706552", "title": "Create a TCP Listener in Kotlin", "body": "<p>In this particular case, you could rewrite this as</p>\n\n<pre><code>val FullString = generateSequence { ClientBufferReader.readLine() }.joinToString(separator = \"\")\n</code></pre>\n\n<p>This works because <code>generateSequence</code> evaluates the lambda passed to it until it returns <code>null</code> and emits all non-null items. <code>joinToString</code> then efficiently creates a concatenated <code>String</code> using a <code>StringBuilder</code>.</p>\n\n<p>In general of course, the pattern</p>\n\n<pre><code>while((x = foo()) != something) { bar() }\n</code></pre>\n\n<p>can be replaced by</p>\n\n<pre><code>var x = foo()\nwhile (x != something) {\n  bar()\n  x = foo()\n}\n</code></pre>\n\n<p>though obviously this is more verbose.</p>\n\n<p>One more note: Your variable names should not start with a capital letter. <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#naming-style\" rel=\"noreferrer\">See style guide for more info.</a></p>\n"}], "owner": {"reputation": 191, "user_id": 2836497, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/151f6fb21eb9f9048373a19a82ba1177?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Sansom", "link": "https://stackoverflow.com/users/2836497/matthew-sansom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3173, "favorite_count": 0, "accepted_answer_id": 43706552, "answer_count": 1, "score": 2, "last_activity_date": 1493556633, "creation_date": 1493555539, "question_id": 43706394, "link": "https://stackoverflow.com/questions/43706394/create-a-tcp-listener-in-kotlin", "title": "Create a TCP Listener in Kotlin", "body": "<p>I'm currently giving Kotlin a whirl for a project I am working on. This project requires me to open a Socket and listen for TCP Packets on a port, so that I can later parse them. In Java, the following works if the variables referenced are defined, using a buffer reader, a socket and a server socket:</p>\n\n<pre><code>while((CurrentLine = ClientBufferReader.readLine()) != null){FullString += CurrentLine}\n</code></pre>\n\n<p>However, in Kotlin, this does not work, as it is not possible to evaluate an assignment. How could I go about retrieving the same result in Kotlin?</p>\n"}, {"tags": ["java", "automated-tests", "kotlin", "gmail-api", "rest-assured"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "edited": false, "score": 0, "creation_date": 1493543800, "post_id": 43701154, "comment_id": 74454163, "body": "Thanks for your response and for new things I learned :)  \t But, you&#39;ll be laughing realy realy hard, my failure was because I forgot a goddamn <b>dot</b> after <code>when</code> statement :D This is the most stupid error I could ever make! I spend HOURS to fix this problem XD \t Anyway, BIG THANKS to you for <code>log</code> and <code>kotlin json</code> feature!"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 1, "last_activity_date": 1493505652, "creation_date": 1493505652, "answer_id": 43701154, "question_id": 43699258, "link": "https://stackoverflow.com/questions/43699258/restassured-cannot-master-post-method/43701154#43701154", "title": "restAssured - cannot master post method", "body": "<p>I think your use of RestAssured and HashMap is correct. I think you are getting a 400 from this API because you are specifying the <code>id</code> property. By playing with this in Google's API Explorer, I was able to generate 400 errors by doing that. According to <a href=\"https://developers.google.com/gmail/api/v1/reference/users/labels/create\" rel=\"nofollow noreferrer\">the documentation</a>, the only things you need to specify for a <code>POST/Create</code> are: <code>labelListVisibility</code>, <code>messageListVisibility</code>, and <code>name</code>. The <code>id</code> is returned to you as part of the response.</p>\n\n<p>A good feature in RestAssured is that you can have it log what it sends or receives when there is an error or all the time.</p>\n\n<p>Log all requests:</p>\n\n<pre><code>given().log().all()\n</code></pre>\n\n<p>Log all responses:</p>\n\n<pre><code>`when`().log().all()\n</code></pre>\n\n<p>Or just when validations fail:</p>\n\n<pre><code>`when`().log().ifValidationFails()\n</code></pre>\n\n<p>Using that will give you a more precise reason why your interaction with the API is failing because it will show whatever Google is sending back. So we can see for sure if I'm right about the <code>id</code>.</p>\n\n<p>And since you seem to be using Kotlin for this, you might want to take advantage of its great multiline string capabilities and just create the JSON payload manually:</p>\n\n<pre><code>val body = \"\"\"\n    {\n        \"labelListVisibility\": \"labelShow\",\n        \"messageListVisibility\": \"show\",\n        \"name\": \"ThisIsATest\"\n    }\n\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 6537905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daafef9ebeb1761a43416cbac9db0b76?s=128&d=identicon&r=PG&f=1", "display_name": "Viterzgir", "link": "https://stackoverflow.com/users/6537905/viterzgir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 43701154, "answer_count": 1, "score": 1, "last_activity_date": 1493536458, "creation_date": 1493491296, "last_edit_date": 1493536458, "question_id": 43699258, "link": "https://stackoverflow.com/questions/43699258/restassured-cannot-master-post-method", "title": "restAssured - cannot master post method", "body": "<p>fellow stackoverflowians :) </p>\n\n<p>I've been for quit time to make a Post call using Gmail API. \nBeen trying to use createDraft and createLabel.\nNow I guess I've found how to do this correctly (mostly) but I get this error:</p>\n\n<pre><code>    java.lang.AssertionError: 1 expectation failed.\nExpected status code &lt;200&gt; but was &lt;400&gt;.\n</code></pre>\n\n<p>I realise that this error occurs because I make incorrect request. </p>\n\n<p>Could You, guys, help me with this? \nHere's my code: </p>\n\n<pre><code>import io.restassured.RestAssured.*\nimport io.restassured.http.ContentType\nimport io.restassured.matcher.RestAssuredMatchers.*\nimport org.hamcrest.Matchers.*\nimport org.testng.annotations.Test\n\n\n\n\nclass RestAPIAutoTestPost {\n    @Test\n    fun createLabelInGoogleMail() {\n        RestAssured.baseURI = \"https://www.googleapis.com/gmail/v1/users/me\"\n        val accessToken = \"ya29.Glw7BEv6***\"\n\n        val jsonAsMap = HashMap&lt;String, Any&gt;()\n        jsonAsMap.put(\"id\", \"labelAPITestNameID\")\n        jsonAsMap.put(\"labelListVisibility\", \"labelShow\")\n        jsonAsMap.put(\"messageListVisibility\", \"show\")\n        jsonAsMap.put(\"messagesTotal\", \"0\")\n        jsonAsMap.put(\"messagesUnread\", \"0\")\n        jsonAsMap.put(\"name\", \"labelAPITestName\")\n        jsonAsMap.put(\"threadsTotal\", \"0\")\n        jsonAsMap.put(\"threadsUnread\", \"0\")\n        jsonAsMap.put(\"type\", \"user\")\n\n\n        given().\n                contentType(ContentType.JSON).\n                body(jsonAsMap).\n\n        `when`()\n                post(\"/labels?access_token=$accessToken\").\n        then().\n                statusCode(200)\n    }\n\n}\n</code></pre>\n\n<p>I suppose I use HashMap incorrectly or I use some incorrect body fields. \nI've only started to learn <strong>restAssured</strong> so I beg my pardons for newby question. </p>\n\n<p>Thanks! </p>\n\n<p>P.S. I'd really appreciate for any help with <strong>Post</strong> methods and puting <strong>data</strong> into <strong>body</strong></p>\n"}, {"tags": ["java", "reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493645494, "post_id": 43703299, "comment_id": 74483209, "body": "I have Kotlin 1.1.2 though the first way throws the following exception: <code>java.lang.AbstractMethodError: kotlin.reflect.jvm.internal.KTypeImpl.getClassifier()Lkotlin&zwnj;&#8203;&#47;reflect&#47;KClassifier&zwnj;&#8203;;</code>"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493646273, "post_id": 43703299, "comment_id": 74483580, "body": "That would be werid. Try with a clean download. The above code work fine on my end. Also check if some of your library depends on older kotlin and it messed up your classes."}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493646339, "post_id": 43703299, "comment_id": 74483615, "body": "After all, it&#39;s an <code>AbstractMethodError</code>, which typically means there is a something very bad happening outside the source code."}, {"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493646591, "post_id": 43703299, "comment_id": 74483730, "body": "It kind of works. My project has 2 modules but only in one of them I got <code>kotiln-reflect</code> artifact (I use Maven). If I test both of them at the same time I get the exception but if a test only the one with <code>kotlin-reflect</code> it works fine. Any idea how to fix this?"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493647335, "post_id": 43703299, "comment_id": 74484104, "body": "It sounds quite werid. Maybe the kotlin version of your two projects are different? Or it won&#39;t bug when testing them together. reflect and stdlib of the same version should be compatible with each other even if they are included multiple times in the classpath. Anyway, I updated my anwser to include the warning about the <code>kotlin-reflect</code>."}, {"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493647718, "post_id": 43703299, "comment_id": 74484311, "body": "Both modules have a common parent in which there is the <code>kotlin-stdlib</code> as well as <code>kotlin-runtime</code> so these have the same version for sure. Double checked <code>kotlin-reflect</code> and it has 1.1.2 too. It&#39;s bugging only when I test two modules at once. If I test only the module with <code>kotlin-reflect</code> everything works 100% fine. May it be a IDE bug?"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1493723593, "post_id": 43703299, "comment_id": 74515725, "body": "I don&#39;t know. However I do think the situation is werid enough to open a seperate question. It will attract more people among whom someone knows what&#39;s going on may occur."}], "tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": true, "score": 6, "last_activity_date": 1493647004, "last_edit_date": 1493647004, "creation_date": 1493530827, "answer_id": 43703299, "question_id": 43698237, "link": "https://stackoverflow.com/questions/43698237/kotlin-check-parameters-type/43703299#43703299", "title": "Kotlin check parameter&#39;s type", "body": "<p>If you are using Kotlin 1.1+, </p>\n\n<p>1) You have <code>kotlin-reflect</code>, then you should use <code>callable.parameters[i].type.jvmErasure.java</code>.</p>\n\n<p>2) You don't have <code>kotlin-reflect</code>, then go to 3)</p>\n\n<p>If you are using older version, I strongly suggest you to port your code to 1.1. If for some reason you have to stick to the older one, go to 3), </p>\n\n<p>3) You should first add this piece of code, which calculates the rawtype of a given <code>java.lang.reflect.Type</code>:</p>\n\n<pre><code>import java.lang.reflect.*\n\nval Type.rawtype: Class&lt;*&gt;\n    get() = when (this) {\n        is Class&lt;*&gt; -&gt; this\n        is ParameterizedType -&gt; rawType as Class&lt;*&gt;\n        is GenericArrayType -&gt; genericComponentType.rawtype.asArrayType()\n        is TypeVariable&lt;*&gt; -&gt;\n            this.bounds[0]?.rawtype ?: Any::class.java // &lt;--- A bug of smart cast here, forcing the use of \"this.\"\n        is WildcardType -&gt; lowerBounds[0].rawtype\n        else -&gt; throw AssertionError(\"Unexpected type of Type: \" + javaClass)\n    }\n\nfun Class&lt;*&gt;.asArrayType() = java.lang.reflect.Array.newInstance(this, 0).javaClass\n</code></pre>\n\n<p>then just call <code>callable.parameters[i].type.javaType.rawtype</code>.</p>\n"}], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 43703299, "answer_count": 1, "score": 0, "last_activity_date": 1493647004, "creation_date": 1493484901, "question_id": 43698237, "link": "https://stackoverflow.com/questions/43698237/kotlin-check-parameters-type", "title": "Kotlin check parameter&#39;s type", "body": "<p>When working with Java's reflection I can do something like this:\n<code>method.getParameterTypes()[i]</code> which gives me parameter's <code>i</code> type (<code>Class</code>).</p>\n\n<p>How can I achieve this using Kotlin's <code>KCallable</code>?\nI've tried doing something like this: <code>callable.parameters[i].type</code> but the only thing I found was <code>type.javaType</code> but it returns <code>Type</code> which didn't help me at all. I also tried <code>parameters[i].kind</code> but that didn't help me at all.</p>\n\n<p>How can I do Java's <code>method.getParameterTypes()</code> using Kotlin's <code>KCallable</code>?</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1493660772, "post_id": 43715983, "comment_id": 74491065, "body": "Good call. I will post an answer with another suggestion tonight :)"}], "tags": [], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "is_accepted": false, "score": 0, "last_activity_date": 1493625089, "creation_date": 1493625089, "answer_id": 43715983, "question_id": 43696899, "link": "https://stackoverflow.com/questions/43696899/tornadofx-javafx-how-to-reload-a-view-component/43715983#43715983", "title": "Tornadofx Javafx - How to reload a view / component", "body": "<p>I ended up using Tornadofx -> EventBus  </p>\n\n<p>Basically, when I change any of the filters, I fire an even which rebuilds the Node with the updated values.  </p>\n\n<p>Not sure whether the approach is right, that's why still keeping it open for discussion.</p>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1494390339, "post_id": 43724225, "comment_id": 74801631, "body": "wow that was a neat way of doing it. Thanks !! helped me a lot."}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1494484371, "post_id": 43724225, "comment_id": 74849307, "body": "Great! The ViewModel, and especially the ItemViewModel is a fantastic tool to bind disparate UI components together. I use it a lot."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 4, "last_activity_date": 1493663258, "last_edit_date": 1493663258, "creation_date": 1493662869, "answer_id": 43724225, "question_id": 43696899, "link": "https://stackoverflow.com/questions/43696899/tornadofx-javafx-how-to-reload-a-view-component/43724225#43724225", "title": "Tornadofx Javafx - How to reload a view / component", "body": "<p>The EventBus is one valid solution to this. Another would be to use a ViewModel or Controller as the UserContext object and let that include the actual observable list of employees and then bind that list to the <code>TableView</code> in <code>EmployeeTableView</code>. Whenever the list in the context is updated, the TableView will update as well.</p>\n\n<p>The filter view would call a function in the UserContext to perform the actual REST call and update the list of employees based on that.</p>\n\n<p>You could create a separate EmployeeQuery object that can be injected into both the <code>EmployeeFilterView</code> and the <code>UserContext</code> so it can extract the selected filter values to perform the query. This query object contains a list of all the search parameters you want to pass to the server.</p>\n\n<p>You could also consider creating a separate scope to keep these components separated if that makes sense to your architecture.</p>\n\n<p>Exactly how you define these components are mostly a matter of taste, here is one suggestion. I used the <code>RangeSlider</code> from ControlsFX for the mock search UI.</p>\n\n<p>To make it easier to imagine how this ties together, here is a screenshot:</p>\n\n<p>(All names and salaries are fiction :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/0nUv9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0nUv9.png\" alt=\"Employee App\"></a></p>\n\n<pre><code>/**\n * The employee domain model, implementing JsonModel so it can be fetched \n * via the REST API\n */\nclass Employee : JsonModel {\n    val nameProperty = SimpleStringProperty()\n    var name by nameProperty\n\n    val salaryProperty = SimpleIntegerProperty()\n    var salary by salaryProperty\n\n    val genderProperty = SimpleObjectProperty&lt;Gender&gt;()\n    var gender by genderProperty\n\n    override fun updateModel(json: JsonObject) {\n        with (json) {\n            name = getString(\"name\")\n            salary = getInt(\"salary\")\n            gender = Gender.valueOf(getString(\"gender\"))\n        }\n    }\n}\n\nenum class Gender { Male, Female }\n\n/**\n * Container for the list of employees as well as a search function called by the filter\n * view whenever it should update the employee list.\n */\nclass EmployeeContext : Controller() {\n    val api: Rest by inject()\n    val query: EmployeeQuery by inject()\n    val employees = SimpleListProperty&lt;Employee&gt;()\n\n    fun search() {\n        runAsync {\n            FXCollections.observableArrayList(Employee().apply {\n                name = \"Edvin Syse\"\n                gender = Gender.Male\n                salary = 200_000\n            })\n            //api.post(\"employees/query\", query).list().toModel&lt;Employee&gt;()\n        } ui {\n            employees.value = it\n        }\n    }\n}\n\n/**\n * Query object used to define the query sent to the server\n */\nclass EmployeeQuery : ViewModel(), JsonModel {\n    val genderProperty = SimpleObjectProperty&lt;Gender&gt;(Gender.Female)\n    var gender by genderProperty\n\n    val salaryMinProperty = SimpleIntegerProperty(50_000)\n    var salaryMin by salaryMinProperty\n\n    val salaryMaxProperty = SimpleIntegerProperty(250_000)\n    var salaryMax by salaryMaxProperty\n\n    val salaryDescription = stringBinding(salaryMinProperty, salaryMaxProperty) {\n        \"$$salaryMin - $$salaryMax\"\n    }\n\n    override fun toJSON(json: JsonBuilder) {\n        with(json) {\n            add(\"gender\", gender.toString())\n            add(\"salaryMin\", salaryMin)\n            add(\"salaryMax\", salaryMax)\n        }\n    }\n}\n\n/**\n * The search/filter UI\n */\nclass EmployeeFilterView : View() {\n    val query: EmployeeQuery by inject()\n    val context: EmployeeContext by inject()\n\n    override val root = form {\n        fieldset(\"Employee Filter\") {\n            field(\"Gender\") {\n                combobox(query.genderProperty, Gender.values().toList())\n            }\n            field(\"Salary Range\") {\n                vbox {\n                    alignment = Pos.CENTER\n                    add(RangeSlider().apply {\n                        max = 500_000.0\n                        lowValueProperty().bindBidirectional(query.salaryMinProperty)\n                        highValueProperty().bindBidirectional(query.salaryMaxProperty)\n                    })\n                    label(query.salaryDescription)\n                }\n            }\n            button(\"Search\").action {\n                context.search()\n            }\n        }\n    }\n}\n\n/**\n * The UI that shows the search results\n */\nclass EmployeeTableView : View() {\n    val context: EmployeeContext by inject()\n\n    override val root = borderpane {\n        center {\n            tableview(context.employees) {\n                column(\"Name\", Employee::nameProperty)\n                column(\"Gender\", Employee::genderProperty)\n                column(\"Salary\", Employee::salaryProperty)\n            }\n        }\n    }\n}\n\n/**\n * A sample view that ties the filter UI and result UI together\n */\nclass MainView : View(\"Employee App\") {\n    override val root = hbox {\n        add(EmployeeFilterView::class)\n        add(EmployeeTableView::class)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2577, "favorite_count": 0, "accepted_answer_id": 43724225, "answer_count": 2, "score": 2, "last_activity_date": 1493663258, "creation_date": 1493476651, "question_id": 43696899, "link": "https://stackoverflow.com/questions/43696899/tornadofx-javafx-how-to-reload-a-view-component", "title": "Tornadofx Javafx - How to reload a view / component", "body": "<p>So its a basic question.<br>\nWhat I am trying to achieve is refreshing views from another views.  </p>\n\n<p>Lets say I have a view EmployeeTableView which shows a tabular representation of employees by doing a REST API call.<br>\nIn another view, I have a the filter EmployeeFilterView wherein I have gender, salary range, employee type, etc.<br>\nI also have a userContext object in which I store the user preferences. So by default lets say I have stored the value of gender filter to be Male, salary range to be ALL, etc. This object is send as a parameter to the EmployeeTableView.</p>\n\n<p>When the EmployeeTableView is loaded I do a restAPI call with the userContext values to get the employee details. So that works fine. Now I change the gender filter to Female and assign this value in my userContext.<br>\nNow if I could just reload the EmployeeTableView with the userContext object, the restapi call would get the updated values.</p>\n\n<p>But how can I do that ?<br>\nAlso suggest a better approach if you have.</p>\n"}, {"tags": ["kotlin", "kotlin-js-interop"], "comments": [{"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1493720641, "post_id": 43696152, "comment_id": 74513793, "body": "How does it prevent sharing interfaces between PouchDoc and non-PouchDoc classes?"}, {"owner": {"reputation": 1058, "user_id": 320456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b2c8c956e2e8f57f70aa11bd6f7b81?s=128&d=identicon&r=PG", "display_name": "HughG", "link": "https://stackoverflow.com/users/320456/hughg"}, "reply_to_user": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1493995121, "post_id": 43696152, "comment_id": 74654436, "body": "@bashor, if a PouchDoc and non-PouchDoc class implement the same interface (or, indeed, different interfaces) then the overriden properties of the interface become virtual in the class.  So, they don&#39;t appear as simple properties in the JavaScript object, but like this: <code>Object.defineProperty(DocWrapper.prototype, &#39;_id&#39;, {     get: function () {       return this.doc_mmz446$_0._id;     }   });</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1058, "user_id": 320456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b2c8c956e2e8f57f70aa11bd6f7b81?s=128&d=identicon&r=PG", "display_name": "HughG", "link": "https://stackoverflow.com/users/320456/hughg"}, "edited": false, "score": 0, "creation_date": 1494146746, "post_id": 43736366, "comment_id": 74696336, "body": "Thanks, that was informative.  I found that Impl2 and Impl3 work but Impl1 still gets me mangled property names.  I tried using a property delegate (as I&#39;ll describe in an answer-to-self below) but that got me into infinite recursion.  A neater answer was over on the Kotlin forums at  <a href=\"https://discuss.kotlinlang.org/t/controlling-the-jsname-of-fields-for-pouchdb-interop/2531\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a> but that needed a bit of work, too."}], "tags": [], "owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "is_accepted": false, "score": 2, "last_activity_date": 1493728678, "last_edit_date": 1493728678, "creation_date": 1493723275, "answer_id": 43736366, "question_id": 43696152, "link": "https://stackoverflow.com/questions/43696152/how-can-i-set-the-jsname-for-a-propertys-backing-field-in-kotlin/43736366#43736366", "title": "How can I set the JsName for a property&#39;s backing field in Kotlin?", "body": "<p>I think your problem should be covered by  <a href=\"https://youtrack.jetbrains.com/issue/KT-8127\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-8127</a></p>\n\n<p>Also, I've created some other related issues:\n<a href=\"https://youtrack.jetbrains.com/issue/KT-17682\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-17682</a>\n<a href=\"https://youtrack.jetbrains.com/issue/KT-17683\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-17683</a></p>\n\n<p>And right now You can use one of next solutions, IMO third is most lightweight.</p>\n\n<pre><code>interface PouchDoc1 {\n    var id: String\n    var _id: String\n        get() = id\n        set(v) { id = v}\n\n    var rev: String?\n    var _rev: String?\n        get() = rev\n        set(v) { rev = v}\n}\n\nclass Impl1 : PouchDoc1 {\n    override var id = \"id0\"\n    override var rev: String? = \"rev0\"\n}\n\ninterface PouchDoc2 {\n    var id: String \n        get() = this.asDynamic()[\"_id\"]\n        set(v) { this.asDynamic()[\"_id\"] = v}\n\n    var rev: String?\n        get() = this.asDynamic()[\"_rev\"]\n        set(v) { this.asDynamic()[\"_rev\"] = v}\n}\n\nclass Impl2 : PouchDoc2 {\n    init {\n        id = \"id1\"\n        rev = \"rev1\"\n    }\n}\n\nexternal interface PouchDoc3 { // marker interface \n}\n\nvar PouchDoc3.id: String \n    get() = this.asDynamic()[\"_id\"]\n    set(v) { this.asDynamic()[\"_id\"] = v}\n\nvar PouchDoc3.rev: String?\n    get() = this.asDynamic()[\"_rev\"]\n    set(v) { this.asDynamic()[\"_rev\"] = v}\n\nclass Impl3 : PouchDoc3 {\n    init {\n        id = \"id1\"\n        rev = \"rev1\"\n    }\n}\n\nfun keys(a: Any) = js(\"Object\").getOwnPropertyNames(a)\n\nfun printKeys(a: Any) {\n    println(a::class.simpleName)\n    println(\" instance keys: \" + keys(a).toString())\n    println(\"__proto__ keys: \" + keys(a.asDynamic().__proto__).toString())\n    println()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    printKeys(Impl1())\n    printKeys(Impl2())\n    printKeys(Impl3())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1058, "user_id": 320456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b2c8c956e2e8f57f70aa11bd6f7b81?s=128&d=identicon&r=PG", "display_name": "HughG", "link": "https://stackoverflow.com/users/320456/hughg"}, "is_accepted": false, "score": 0, "last_activity_date": 1494148723, "last_edit_date": 1494148723, "creation_date": 1494148170, "answer_id": 43829752, "question_id": 43696152, "link": "https://stackoverflow.com/questions/43696152/how-can-i-set-the-jsname-for-a-propertys-backing-field-in-kotlin/43829752#43829752", "title": "How can I set the JsName for a property&#39;s backing field in Kotlin?", "body": "<p>I got a good answer from one of the JetBrains guys, Alexey Andreev, over on the JetBrains forum at <a href=\"https://discuss.kotlinlang.org/t/controlling-the-jsname-of-fields-for-pouchdb-interop/2531/\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/controlling-the-jsname-of-fields-for-pouchdb-interop/2531/</a>.  Before I describe that, I'll mention a further failed attempt at refining @bashor's answer.</p>\n\n<h2>Property delegates</h2>\n\n<p>I thought that @bashor's answer was crying out to use property delegates but I couldn't get that to work without infinite recursion.</p>\n\n<pre><code>class JSMapDelegate&lt;T&gt;(\n        val jsobject: dynamic\n) {\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T {\n        return jsobject[property.name]\n    }\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        jsobject[property.name] = value\n    }\n}\n\nexternal interface PouchDoc4 {\n    var _id: String\n    var _rev: String\n}\n\nclass Impl4() : PouchDoc4 {\n    override var _id: String by JSMapDelegate&lt;String&gt;(this)\n    override var _rev: String by JSMapDelegate&lt;String&gt;(this)\n\n    constructor(_id: String) : this() {\n        this._id = _id\n    }\n}\n</code></pre>\n\n<p>The call within the delegate to <code>jsobject[property.name] = value</code> calls the set function for the property, which calls the delegate again ...</p>\n\n<p>(Also, it turns out you can't put a delegate on a property in an interface, even though you can define a getter/setter pair which work just like a delegate, as @bashor's <code>PouchDoc2</code> example shows.)</p>\n\n<h2>Using an external class</h2>\n\n<p>Alexey's answer on the Kotlin forums basically says, \"You're mixing the business  (with behaviour) and persistence (data only) layers: the right answer would be to explicitly serialise to/from JS but we don't provide that yet; as a workaround, use an external class.\"  The point, I think, is that <em>external</em> classes don't turn into JavaScript which defines property getters/setters, because Kotlin doesn't let you define behaviour for external classes.  Given that steer, I got the following to work, which does what I want.</p>\n\n<pre><code>external interface PouchDoc5 {\n    var _id: String\n    var _rev: String\n}\n\nexternal class Impl5 : PouchDoc5 {\n    override var _id: String\n    override var _rev: String\n}\n\nfun &lt;T&gt; create(): T = js(\"{ return {}; }\")\nfun Impl5(_id: String): Impl5 {\n    return create&lt;Impl5&gt;().apply {\n        this._id = _id\n    }\n}\n</code></pre>\n\n<p>The output of <code>keys</code> for this is</p>\n\n<pre><code>null\n instance keys: _id\n__proto__ keys: toSource,toString,toLocaleString,valueOf,watch,unwatch,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,__defineGetter__,__defineSetter__,__lookupGetter__,__lookupSetter__,__proto__,constructor\n</code></pre>\n\n<h3>Creating external classes</h3>\n\n<p>Three notes about creating instances of external classes.  First, Alexey said to write</p>\n\n<pre><code>fun &lt;T&gt; create(): T = js(\"{}\")\n</code></pre>\n\n<p>but for me (with Kotlin 1.1) that turns into</p>\n\n<pre><code>function jsobject() {\n}\n</code></pre>\n\n<p>whose return value is <code>undefined</code>.  I think this might be a bug, because the official doc recommends the shorter form, too.</p>\n\n<p>Second, you can't do this</p>\n\n<pre><code>fun Impl5(_id: String): Impl5 {\n    return (js(\"{}\") as Impl5).apply {\n        this._id = _id\n    }\n}\n</code></pre>\n\n<p>because that explicitly inserts a type-check for <code>Impl5</code>, which throws <code>ReferenceError: Impl5 is not defined</code> (in Firefox, at least).  The generic function approach skips the type-check.  I'm guessing that's not a bug, since Alexey recommended it, but it seems odd, so I'll ask him.</p>\n\n<p>Lastly, you can mark <code>create</code> as <code>inline</code>, though you'll need to suppress a warning :-)</p>\n"}], "owner": {"reputation": 1058, "user_id": 320456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b2c8c956e2e8f57f70aa11bd6f7b81?s=128&d=identicon&r=PG", "display_name": "HughG", "link": "https://stackoverflow.com/users/320456/hughg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1494148723, "creation_date": 1493471858, "last_edit_date": 1493719661, "question_id": 43696152, "link": "https://stackoverflow.com/questions/43696152/how-can-i-set-the-jsname-for-a-propertys-backing-field-in-kotlin", "title": "How can I set the JsName for a property&#39;s backing field in Kotlin?", "body": "<p>I played about with Kotlin's unsupported JavaScript backend in 1.0.x and am now trying to migrate my toy project to 1.1.x.  It's the barest bones of a single-page web app interfacing with PouchDB.  To add data to PouchDB you need JavaScript objects with specific properties <code>_id</code> and <code>_rev</code>.  They also need to <em>not</em> have any other properties beginning with <code>_</code> because they're reserved by PouchDB.</p>\n\n<p>Now, if I create a class like this, I can send instances to PouchDB.</p>\n\n<pre><code>class PouchDoc(\n        var _id: String\n) {\n    var _rev: String? = null\n}\n</code></pre>\n\n<p>However, if I do anything to make the properties virtual -- have them override an interface, or make the class open and create a subclass which overrides them -- the <code>_id</code> field name becomes mangled to something like <code>_id_mmz446$_0</code> and so PouchDB rejects the object.  If I apply <code>@JsName(\"_id\")</code> to the property, that only affects the generated getter and setter -- it still leaves the backing field with a mangled name.</p>\n\n<p>Also, for any virtual properties whose names don't begin with <code>_</code>, PouchDB will accept the object but it only stores the backing fields with their mangled names, not the nicely-named properties.</p>\n\n<p>For now I can work around things by making them not virtual, I think.  But I was thinking of sharing interfaces between PouchDoc and non-PouchDoc classes in Kotlin, and it seems I can't do that.</p>\n\n<p>Any idea how I could make this work, or does it need a Kotlin language change?</p>\n"}, {"tags": ["maven", "maven-3", "kotlin", "jrebel", "hotdeploy"], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 556985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1dc6e81ecf0d1b9339839734be9a1c?s=128&d=identicon&r=PG", "display_name": "Murka", "link": "https://stackoverflow.com/users/556985/murka"}, "is_accepted": false, "score": 1, "last_activity_date": 1493819409, "creation_date": 1493819409, "answer_id": 43762001, "question_id": 43694960, "link": "https://stackoverflow.com/questions/43694960/can-jrebel-reload-kotlin-classes-when-they-are-used-by-kotlin-maven-plugin-plugi/43762001#43762001", "title": "Can JRebel reload Kotlin classes when they are used by kotlin-maven-plugin plugin on maven?", "body": "<p>JRebel will reload kotlin classes provided they are compiled either via IDE or manually by invoking maven compile.</p>\n\n<p>Also the classes must either be compiled to the path specified in the rebel.xml or to the classloader's classpath(e.g. when using exploded deployment with <code>target/classes</code> or <code>target/artifact-name/WEB-INF/classes</code> as the root).</p>\n\n<p>Usually achieving this requires no extra steps and it should be just: Enable JRebel -> Start server &amp; deploy application -> Make changes -> make/compile to reload</p>\n\n<p>If you have not done so yet, please try the free trial at <a href=\"https://zeroturnaround.com/software/jrebel/trial/\" rel=\"nofollow noreferrer\">https://zeroturnaround.com/software/jrebel/trial/</a>\nand report back any issues and suggestions to support@zeroturnaround.com</p>\n"}], "owner": {"reputation": 298, "user_id": 209046, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ccdc5c0b5b7b96c800b3dad50f4e959e?s=128&d=identicon&r=PG", "display_name": "Dagvadorj", "link": "https://stackoverflow.com/users/209046/dagvadorj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1493819409, "creation_date": 1493464438, "question_id": 43694960, "link": "https://stackoverflow.com/questions/43694960/can-jrebel-reload-kotlin-classes-when-they-are-used-by-kotlin-maven-plugin-plugi", "title": "Can JRebel reload Kotlin classes when they are used by kotlin-maven-plugin plugin on maven?", "body": "<p>Can JRebel reload Kotlin classes when they are used by kotlin-maven-plugin plugin on Maven?</p>\n\n<p>The project runs on an application server.</p>\n"}, {"tags": ["jvm", "kotlin", "nullable", "non-nullable"], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 2219288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rjz5S.jpg?s=128&g=1", "display_name": "Rik", "link": "https://stackoverflow.com/users/2219288/rik"}, "edited": false, "score": 1, "creation_date": 1495140219, "post_id": 43694645, "comment_id": 75139895, "body": "Thank you for this, both work great.  I haven&#39;t decided which one I prefer (I&#39;m not completely convinced option 2 actually shows the map of map contract better) but regardless, both are succinct solutions - I need to think more in terms of extension methods (and operators...) in the Kotlin world."}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 6, "last_activity_date": 1493463233, "last_edit_date": 1493463233, "creation_date": 1493462617, "answer_id": 43694645, "question_id": 43693083, "link": "https://stackoverflow.com/questions/43693083/in-kotlin-how-do-i-idiomatically-access-nullable-nested-map-values-or-return-a/43694645#43694645", "title": "In Kotlin, how do I idiomatically access nullable nested map values, or return a default?", "body": "<p>I would use an extension operator method for that.</p>\n\n<pre><code>// Option 1\noperator fun &lt;K, V&gt; Map&lt;K, V&gt;?.get(key: K) = this?.get(key)\n// Option 2\noperator fun &lt;K, K2, V&gt; Map&lt;K, Map&lt;K2, V&gt;&gt;.get(key1: K, key2: K2): V? = get(key1)?.get(key2)\n</code></pre>\n\n<p><strong>Option 1:</strong></p>\n\n<p>Define an extension that provides <code>get</code> operator for nullable map. In Kotlin's stdlib such approach appears with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to-string.html\" rel=\"noreferrer\"><code>Any?.toString()</code></a> extension method. </p>\n\n<pre><code>fun getUserWidgetCount(username: String, widgetType: String): Int {\n    return userWidgetCount[username][widgetType] ?: 0\n}\n</code></pre>\n\n<p><strong>Option 2:</strong></p>\n\n<p>Create a special extension for map of maps. In my opinion, it is better because it shows the contract of the <code>map of maps</code> better than two <code>get</code>s in a row.</p>\n\n<pre><code>fun getUserWidgetCount(username: String, widgetType: String): Int {\n    return userWidgetCount[username, widgetType] ?: 0\n}\n</code></pre>\n"}], "owner": {"reputation": 612, "user_id": 2219288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rjz5S.jpg?s=128&g=1", "display_name": "Rik", "link": "https://stackoverflow.com/users/2219288/rik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2328, "favorite_count": 0, "accepted_answer_id": 43694645, "answer_count": 1, "score": 4, "last_activity_date": 1493463233, "creation_date": 1493451467, "question_id": 43693083, "link": "https://stackoverflow.com/questions/43693083/in-kotlin-how-do-i-idiomatically-access-nullable-nested-map-values-or-return-a", "title": "In Kotlin, how do I idiomatically access nullable nested map values, or return a default?", "body": "\n\n<p>Quick Kotlin best practices question, as I couldn't really work out the best way to do this from the documentation.</p>\n\n<p>Assume I have the following nested map (typing specified explicitly for the purpose of this question):</p>\n\n<pre><code>val userWidgetCount: Map&lt;String, Map&lt;String, Int&gt;&gt; = mapOf(\n        \"rikbrown\" to mapOf(\n                \"widgetTypeA\" to 1,\n                \"widgetTypeB\" to 2))\n</code></pre>\n\n<p>Can the following mode be any more succinct?</p>\n\n<pre><code> fun getUserWidgetCount(username: String, widgetType: String): Int {\n    return userWidgetCount[username]?.get(widgetType)?:0\n}\n</code></pre>\n\n<p>In other words, I want to return the user widget count iff the user is known and they have an entry for that widget type, otherwise zero.  In particular I saw I can use <code>[]</code> syntax to access the map initially, but I couldn't see a way to do this at the second level after using <code>?.</code>.</p>\n"}, {"tags": ["intellij-idea", "gradle", "kotlin", "rx-java2", "rx-kotlin"], "comments": [{"owner": {"reputation": 2537, "user_id": 1680703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvIM9.png?s=128&g=1", "display_name": "Anis BEN NSIR", "link": "https://stackoverflow.com/users/1680703/anis-ben-nsir"}, "edited": false, "score": 0, "creation_date": 1537973730, "post_id": 43681939, "comment_id": 91980942, "body": "why you are using rxjava2 kotlin and org.reactivestreams:reactive-streams:1.0.0 ?  io.reactivex.rxjava2:rxjava:2.x.y...  I think that you have to use io.reactivex:rxkotlin:1.x.y if you need to use  org.reactivestreams:reactive-streams:1.0.0 or pass to v2 version. <a href=\"https://github.com/ReactiveX/RxKotlin\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxKotlin</a>"}], "owner": {"reputation": 1938, "user_id": 2114895, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/vrccB.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2114895/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1576, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1494255531, "creation_date": 1493387644, "last_edit_date": 1495535485, "question_id": 43681939, "link": "https://stackoverflow.com/questions/43681939/exception-caused-by-java-lang-classnotfoundexception-org-reactivestreams-publi", "title": "Exception caused by: java.lang.ClassNotFoundException: org.reactivestreams.Publisher", "body": "<p>In a JavaFX Gradle-based application that I develop using RxJava and Kotlin in IntelliJ IDEA 2017.1.2 (Build #IC-171.4249.39), I'm getting an exception:</p>\n\n<blockquote>\n  <p>Exception in thread \"JavaFX Application Thread\" java.lang.NoClassDefFoundError: org/reactivestreams/Publisher</p>\n</blockquote>\n\n<p>everytime a code like this</p>\n\n<pre><code>return Completable.complete()\n</code></pre>\n\n<p>is executed. Following a suggestion of a similar question <a href=\"https://stackoverflow.com/questions/43231477/why-i-am-getting-noclassdeffounderror-org-reactivestreams-publisher\">Why I am getting NoClassDefFoundError: org/reactivestreams/Publisher</a>, I've tried to add include the reactive-streams to the <code>dependencies</code> block of my <code>build.gradle</code> script</p>\n\n<pre><code>dependencies {\n    compile 'org.jetbrains.kotlin:kotlin-stdlib:1.1.2'\n    compile 'org.reactivestreams:reactive-streams:1.0.0'\n    compile 'io.reactivex.rxjava2:rxkotlin:2.0.0'\n}\n</code></pre>\n\n<p>but the problem persists. The dependency tree looks like this one:</p>\n\n<pre><code>compile - Dependencies for source set 'main' (deprecated, use 'implementation ' instead).\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\ncompileClasspath - Compile classpath for source set 'main'.\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\n\\--- org.jetbrains.kotlin:kotlin-annotation-processing:1.1.2\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n          \\--- org.jetbrains:annotations:13.0\n\nkaptTest\n\\--- org.jetbrains.kotlin:kotlin-annotation-processing:1.1.2\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n          \\--- org.jetbrains:annotations:13.0\n\nruntime - Runtime dependencies for source set 'main' (deprecated, use 'runtimeOnly ' instead).\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\nruntimeClasspath - Runtime classpath of source set 'main'.\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\ntestCompile - Dependencies for source set 'test' (deprecated, use 'testImplementation ' instead).\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\ntestCompileClasspath - Compile classpath for source set 'test'.\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\ntestRuntime - Runtime dependencies for source set 'test' (deprecated, use 'testRuntimeOnly ' instead).\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n\ntestRuntimeClasspath - Runtime classpath of source set 'test'.\n+--- org.jetbrains.kotlin:kotlin-stdlib:1.1.2\n|    \\--- org.jetbrains:annotations:13.0\n+--- org.reactivestreams:reactive-streams:1.0.0\n\\--- io.reactivex.rxjava2:rxkotlin:2.0.0\n     +--- io.reactivex.rxjava2:rxjava:2.0.7\n     |    \\--- org.reactivestreams:reactive-streams:1.0.0\n     \\--- org.jetbrains.kotlin:kotlin-stdlib:1.1.0 -&gt; 1.1.2 (*)\n</code></pre>\n\n<p>As you can see, <strong>org.reactivestreams:reactive-streams</strong> is present in each environment. </p>\n\n<p>Now, I've managed to resolve the problem by adding manually dependency on a <a href=\"https://jar-download.com/?detail_search=g%3A%22io.reactivex.rxjava2%22&amp;g=io.reactivex.rxjava2\" rel=\"nofollow noreferrer\">reactive-streams-1.0.0.jar</a>, but I don't like this solution at all. </p>\n\n<p>Could somebody advice a better solution? Thanks!</p>\n"}, {"tags": ["generics", "interface", "copy", "kotlin", "self-type"], "comments": [{"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "edited": false, "score": 0, "creation_date": 1493368614, "post_id": 43667628, "comment_id": 74397396, "body": "Since there are no <code>self types</code> in Kotlin, you have 2 options: casting or recursive generics"}], "answers": [{"comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1493393212, "post_id": 43674807, "comment_id": 74413545, "body": "covariance solution is valid even in plain java. I think in java7 or java6 return type can be covariant."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1493468489, "post_id": 43674807, "comment_id": 74436162, "body": "@glee8e this is correct. The reason this is slightly more convenient in Kotlin is the single expression function syntax which infers the covariant return type wtihout you having to type it."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 5, "last_activity_date": 1493366436, "last_edit_date": 1493366436, "creation_date": 1493365569, "answer_id": 43674807, "question_id": 43667628, "link": "https://stackoverflow.com/questions/43667628/write-a-copyable-interface-more-elegant-than-in-java/43674807#43674807", "title": "Write a Copyable interface more elegant than in Java", "body": "<p>Here's an attempt to reduce the generic boilerplate by sacrificing some static type safety:</p>\n\n<pre><code>interface Copyable {\n    fun createCopy(): Copyable\n}\n\ninline fun &lt;reified T : Copyable&gt; T.copy(): T = createCopy() as T\n</code></pre>\n\n<p>We can leverage extension functions to get the generic type of the receiver without recursive generics. We make the extension function inline to reify the type parameter so that the cast will be checked and throws an exception if the implementing class doesn't return an instance of the same type.</p>\n\n<p>Here's an example usage</p>\n\n<pre><code>class Example(val a: String) : Copyable {\n    constructor(e: Example) : this(e.a)\n\n    override fun createCopy() = Example(this)\n}\n\n\nfun main(args: Array&lt;String&gt;) {\n    val copiedExample: Example = Example(\"a\").copy()\n}\n</code></pre>\n\n<h2>Alternative solution using covariance</h2>\n\n<p>Depending on your use case, you don't even need the <code>copy</code> method to be generic as we can leverage <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"noreferrer\">covariance</a>. Declare your types like so</p>\n\n<pre><code>interface Copyable {\n    fun copy(): Copyable\n}\n\nclass Example(val a: String) : Copyable {\n    constructor(f: Example) : this(f.a)\n\n    override fun copy() = Example(this)\n}\n</code></pre>\n\n<p>And as you can see, the code <code>val copiedExample: Example = Example(\"a\").copy()</code> still compiles. This is because overriden methods can return a more specific type than the super method and using Kotlin's <a href=\"http://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"noreferrer\">single expression functions</a> the type we want is automatically inferred.</p>\n\n<p>This can however lead to problems if you're not working with the specific type directly, but say a subinterface of <code>Copyable</code>. The following code does not compile:</p>\n\n<pre><code>interface CopyableIterable&lt;T&gt; : Iterable&lt;T&gt;, Copyable\n\nclass Example : CopyableIterable&lt;String&gt; {\n\n    constructor(e: Example)\n\n    override fun copy() = Example(this)\n    override fun iterator() = TODO()\n}\n\nfun foo(ci: CopyableIterable&lt;String&gt;) {\n    val copy: CopyableIterable&lt;String&gt; = ci.copy() // error: type mismatch\n}\n</code></pre>\n\n<p>The fix for this is simple, override the <code>copy</code> method in the subinterface as well:</p>\n\n<pre><code>interface CopyableIterable&lt;T&gt; : Iterable&lt;T&gt;, Copyable {\n    override fun copy(): CopyableIterable&lt;T&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 1390, "user_id": 5517612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311c4cfa84f7914806dfb88a75ee219?s=128&d=identicon&r=PG&f=1", "display_name": "Todd Sewell", "link": "https://stackoverflow.com/users/5517612/todd-sewell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1339, "favorite_count": 1, "accepted_answer_id": 43674807, "answer_count": 1, "score": 5, "last_activity_date": 1493368477, "creation_date": 1493326032, "last_edit_date": 1493368477, "question_id": 43667628, "link": "https://stackoverflow.com/questions/43667628/write-a-copyable-interface-more-elegant-than-in-java", "title": "Write a Copyable interface more elegant than in Java", "body": "<p>I'm trying to write an interface that classes can implement to make them \"copyable\", a (type)safe Clonable.</p>\n\n<p>In Java, I would do something like this, using recursive generics:</p>\n\n<pre><code> public interface Copyable&lt;C extends Copyable&lt;C&gt;&gt; {\n      C copy();\n }\n\n public class Example implements Copyable&lt;Example&gt; {\n      ...\n\n      @Override\n      public Example copy()\n      {\n           return new Example(this); //invoke copy constructor\n      }\n }\n</code></pre>\n\n<p>Obviously this is not that elegant, both the headers of <code>Copyable</code> and <code>Example</code> look overcomplicated. Is there a more elegant way to achieve this in Kotlin?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1493314178, "post_id": 43664345, "comment_id": 74375687, "body": "Thank you for this"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 1, "creation_date": 1493315177, "post_id": 43664345, "comment_id": 74376282, "body": "@AdamHughes Also, it is the same for <code>is</code>-check: its negation is <code>!is</code>."}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 71, "last_activity_date": 1493327237, "last_edit_date": 1493327237, "creation_date": 1493314098, "answer_id": 43664345, "question_id": 43664110, "link": "https://stackoverflow.com/questions/43664110/kotlin-if-item-not-in-list-proper-syntax/43664345#43664345", "title": "Kotlin: &quot;if item not in list&quot; proper syntax", "body": "<p>Use <code>x !in list</code> syntax.</p>\n\n<p>The following code:</p>\n\n<pre><code>val arr = intArrayOf(1,2,3)\nif (2 !in arr)\n   println(\"in list\")\n</code></pre>\n\n<p>is compiled down to the equivalent of:</p>\n\n<pre><code>int[] arr = new int[]{1, 2, 3};\n// uses xor since JVM treats booleans as int\nif(ArraysKt.contains(arr, 2) ^ true) { \n   System.out.println(\"in list\");\n}\n</code></pre>\n\n<p>The <code>in</code> and <code>!in</code> operators use any accessible method or extension method that is named <code>contains</code> and returns <code>Boolean</code>. For a collection (list, set...) , it uses <code>collection.contains</code> method. For arrays (including primitive arrays) it uses the extension method <code>Array.contains</code> which is implemented as <code>indexOf(element) &gt;= 0</code></p>\n"}, {"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1493314160, "post_id": 43664348, "comment_id": 74375679, "body": "Ah, I never saw this operator overloading doc, thank you."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 21, "last_activity_date": 1493314105, "creation_date": 1493314105, "answer_id": 43664348, "question_id": 43664110, "link": "https://stackoverflow.com/questions/43664110/kotlin-if-item-not-in-list-proper-syntax/43664348#43664348", "title": "Kotlin: &quot;if item not in list&quot; proper syntax", "body": "<p>The operator for this in Kotlin is <code>!in</code>. So you can do</p>\n\n<pre><code>if (x !in myList) { ... }\n</code></pre>\n\n<p>You can find this in the official docs about <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#binary-operations\" rel=\"noreferrer\">operator overloading</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13458163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xDW5h.png?s=128&g=1", "display_name": "InfoBook Technologies", "link": "https://stackoverflow.com/users/13458163/infobook-technologies"}, "is_accepted": false, "score": -1, "last_activity_date": 1588704359, "creation_date": 1588704359, "answer_id": 61620667, "question_id": 43664110, "link": "https://stackoverflow.com/questions/43664110/kotlin-if-item-not-in-list-proper-syntax/61620667#61620667", "title": "Kotlin: &quot;if item not in list&quot; proper syntax", "body": "<pre><code>if (myList!!.contains(x)){\n\n    }\n\nif (!myList!!.contains(x)){\n\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22786, "user_id": 974045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad548cd357d81ab99c5d60e64e02070?s=128&d=identicon&r=PG", "display_name": "Gibolt", "link": "https://stackoverflow.com/users/974045/gibolt"}, "is_accepted": false, "score": 0, "last_activity_date": 1589243665, "creation_date": 1589243665, "answer_id": 61741767, "question_id": 43664110, "link": "https://stackoverflow.com/questions/43664110/kotlin-if-item-not-in-list-proper-syntax/61741767#61741767", "title": "Kotlin: &quot;if item not in list&quot; proper syntax", "body": "<h2>!in with matching data classes</h2>\n\n<p>Although <code>==</code> will compare duplicated data classes as equal, <code>!in</code> doesn't consider duplicate copies to be the same.</p>\n\n<p>Here is my solution:</p>\n\n<pre><code>// Create a set of hashcodes\nval itemHashes = myCollection.map { it.hashCode() }.toSet()\n\n// Use !in with the set\nitem.hashCode() !in itemHashes\n\n// For comparing a whole collection\nmyCollection.filter { it.hashCode() !in itemHashes }\n</code></pre>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19540, "favorite_count": 0, "accepted_answer_id": 43664345, "answer_count": 4, "score": 40, "last_activity_date": 1589243665, "creation_date": 1493313271, "last_edit_date": 1493382234, "question_id": 43664110, "link": "https://stackoverflow.com/questions/43664110/kotlin-if-item-not-in-list-proper-syntax", "title": "Kotlin: &quot;if item not in list&quot; proper syntax", "body": "<p>Given Kotlin's list lookup syntax,</p>\n\n<pre><code>if (x in myList)\n</code></pre>\n\n<p>as opposed to idiomatic Java, </p>\n\n<pre><code>if (myList.contains(x))\n</code></pre>\n\n<p>how can one express negation?  The compiler doesn't like either of these:</p>\n\n<pre><code>if (x not in mylist)\n\nif !(x in mylist)\n</code></pre>\n\n<p>Is there an idiomatic way to express this other than <code>if !(mylist.contains(x)))</code>?  I didn't see it mentioned in the <a href=\"https://kotlinlang.org/docs/reference/control-flow.html\" rel=\"noreferrer\">Kotlin Control Flow docs.</a></p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "kapt"], "comments": [{"owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1493309887, "post_id": 43661018, "comment_id": 74372964, "body": "Can you show your root build.gradle as well?"}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1493313167, "post_id": 43661018, "comment_id": 74375083, "body": "@ChristianBr&#252;ggemann Sure"}], "answers": [{"comments": [{"owner": {"reputation": 1813, "user_id": 509681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4UiBI.jpg?s=128&g=1", "display_name": "Semanticer", "link": "https://stackoverflow.com/users/509681/semanticer"}, "edited": false, "score": 1, "creation_date": 1494585843, "post_id": 43666311, "comment_id": 74903487, "body": "Can you please elaborate on the solution? I don&#39;t get it."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 1813, "user_id": 509681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4UiBI.jpg?s=128&g=1", "display_name": "Semanticer", "link": "https://stackoverflow.com/users/509681/semanticer"}, "edited": false, "score": 2, "creation_date": 1494879698, "post_id": 43666311, "comment_id": 75005458, "body": "@Semanticer In Java wildcards can either be unbounded, <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html\" rel=\"nofollow noreferrer\">upper bounded</a> or <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/lowerBounded.html\" rel=\"nofollow noreferrer\">lower bounded</a> by using either no keyword, the <code>extends</code> keyword or the <code>super</code> keyword (respectively). These keywords correspond to the <code>in</code> and <code>out</code> variance annotations in <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">Kotlin</a>. The error states that I was using <code>extends</code> when I should be using <code>super</code>; or when translated to Kotlin, <code>in</code> when I should be using <code>out</code>."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 5541, "user_id": 1744379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a413835ed4aa8047dba481793dc9f663?s=128&d=identicon&r=PG", "display_name": "John Ernest Guadalupe", "link": "https://stackoverflow.com/users/1744379/john-ernest-guadalupe"}, "edited": false, "score": 0, "creation_date": 1497961080, "post_id": 43666311, "comment_id": 76290798, "body": "@JohnErnestGuadalupe You <i>want</i> to generate the same error logs? You should be able to just copy the <code>MainActivityModule</code> above, but using the <code>in</code> variance (<code>AndroidInjector.Factory&lt;in Activity&gt;</code>), and add it to your <code>AppComponent</code> (or any part of your Dagger object graph)."}, {"owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "edited": false, "score": 4, "creation_date": 1505233446, "post_id": 43666311, "comment_id": 79325374, "body": "Don&#39;t you hope that <code>kapt</code> errors find their way into the standard Studio error log pane?  Boy, I sure do.."}], "tags": [], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "is_accepted": true, "score": 10, "last_activity_date": 1497961144, "last_edit_date": 1497961144, "creation_date": 1493320949, "answer_id": 43666311, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/43666311#43666311", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>Bah, I missed part of the error message that was before the break:</p>\n\n<pre><code>:app:kaptDebugKotlin\ne: /Users/me/Downloads/App/app/build/tmp/kapt3/stubs/debug/com/example/app/ui/module/main/MainActivityModule.java:10: error: @dagger.android.ActivityKey methods should bind dagger.android.AndroidInjector.Factory&lt;? extends android.app.Activity&gt;, not dagger.android.AndroidInjector.Factory&lt;? super android.app.Activity&gt;. See google.github.io/dagger/android\ne: \n\ne:     public abstract dagger.android.AndroidInjector.Factory&lt;? super android.app.Activity&gt; bindMainActivityInjectorFactory(@org.jetbrains.annotations.NotNull()\ne:                                                                                          ^\n\nw: warning: The following options were not recognized by any processor: '[kapt.kotlin.generated]'\nw: \n\n\ne: /Users/me/Downloads/App/app/src/main/kotlin/com/example/app/ApplicationComponent.kt: (1, 1): Some error(s) occurred while processing annotations. Please see the error messages above.\n</code></pre>\n\n<p>I was using the <code>in</code> variance annotation instead of the <code>out</code> annotation when creating the <code>AndroidInjector.Factory</code>.</p>\n\n<pre><code>@Module(subcomponents = arrayOf(MainActivitySubcomponent::class))\nabstract class MainActivityModule {\n\n    @Binds @IntoMap @ActivityKey(MainActivity::class)\n    abstract fun bindMainActivityInjectorFactory(\n            builder: MainActivitySubcomponent.Builder): AndroidInjector.Factory&lt;out Activity&gt; // Was using `in` annotation instead of `out`\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2223, "user_id": 2332327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7r0y4.jpg?s=128&g=1", "display_name": "DimitrisCBR", "link": "https://stackoverflow.com/users/2332327/dimitriscbr"}, "edited": false, "score": 0, "creation_date": 1505907043, "post_id": 45105628, "comment_id": 79602467, "body": "This one fixed this issue for me."}], "tags": [], "owner": {"reputation": 114, "user_id": 1299129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sQaK.jpg?s=128&g=1", "display_name": "Yury", "link": "https://stackoverflow.com/users/1299129/yury"}, "is_accepted": false, "score": 8, "last_activity_date": 1500112246, "last_edit_date": 1500112246, "creation_date": 1500043031, "answer_id": 45105628, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/45105628#45105628", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>I think the problem is related to the <strong>kotlin-stdlib-jre7</strong>, it doesn't work properly with dagger, I suggest you change this  <strong>kotlin-stdlib-jre7</strong> for <strong>kotlin-stdlib</strong> : </p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib:1.1.2\"\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:1.1.2\"\n</code></pre>\n\n<p>it works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 855778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cfdf972fed4642ef97e4e4f7a9348a?s=128&d=identicon&r=PG", "display_name": "Sridhar Nalam", "link": "https://stackoverflow.com/users/855778/sridhar-nalam"}, "is_accepted": false, "score": 2, "last_activity_date": 1505226042, "creation_date": 1505226042, "answer_id": 46178917, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/46178917#46178917", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>There is no single reason for this build failure. It's not always related to <strong>kotlin</strong> as well.</p>\n\n<p>Check your logs in <strong>Android studio</strong>'s <strong>Gradle Console</strong> \nfor clear information about the cause.\nYou can find the clue about the failure.</p>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 4, "creation_date": 1510548279, "post_id": 46809952, "comment_id": 81465246, "body": "You do not need <code>generateStubs = true</code> if you applied the <code>kotlin-kapt</code> plugin, it is for the older kapt. Gradle will show the warning about this."}], "tags": [], "owner": {"reputation": 573, "user_id": 3351569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9da141ff0fa86fce93f785b8697bc8b3?s=128&d=identicon&r=PG", "display_name": "Alexiscanny", "link": "https://stackoverflow.com/users/3351569/alexiscanny"}, "is_accepted": false, "score": 3, "last_activity_date": 1508328884, "creation_date": 1508328884, "answer_id": 46809952, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/46809952#46809952", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>I went through the same problem.\nI had to take off from my build.gradle:</p>\n\n<ol>\n<li><code>apply plugin: 'kotlin-kapt'</code> </li>\n<li><code>kapt 'groupId:artifactId:$kapt_version'</code></li>\n</ol>\n\n<p>And I added this (straight away after apply plug:....):</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>I hope this could help someone else.</p>\n"}, {"tags": [], "owner": {"reputation": 3939, "user_id": 5710872, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecb59af7d4d59ec44d2a05193c74062a?s=128&d=identicon&r=PG&f=1", "display_name": "Qamar", "link": "https://stackoverflow.com/users/5710872/qamar"}, "is_accepted": false, "score": 1, "last_activity_date": 1555897027, "creation_date": 1555897027, "answer_id": 55788215, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/55788215#55788215", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>I tried many ways but the error message was not meaningful after next day I add </p>\n\n<p><code>MoviesViewModel @Inject constructor(private val movieService: MovieService): ViewModel()</code> then :)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6897924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa73ffb16d8c7ddee7dc26ceb01e03ec?s=128&d=identicon&r=PG&f=1", "display_name": "Marek94", "link": "https://stackoverflow.com/users/6897924/marek94"}, "is_accepted": false, "score": 0, "last_activity_date": 1576144691, "creation_date": 1576144691, "answer_id": 59301939, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/59301939#59301939", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>I have had a similar problem with kapt and I dissolved it to add:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>compileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1823, "user_id": 3816476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eRioD.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/3816476/sunil"}, "is_accepted": false, "score": 0, "last_activity_date": 1591207653, "creation_date": 1591207653, "answer_id": 62179737, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor/62179737#62179737", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>Go to SDK manager in Android studio and install NDK. it works for me.</p>\n"}], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39791, "favorite_count": 4, "accepted_answer_id": 43666311, "answer_count": 7, "score": 21, "last_activity_date": 1591207653, "creation_date": 1493304281, "last_edit_date": 1493313150, "question_id": 43661018, "link": "https://stackoverflow.com/questions/43661018/kapt-build-fails-with-dagger-android-processor", "title": "kapt Build Fails With Dagger Android Processor", "body": "<p>I am attempting to include the Dagger Android Processor (documented <a href=\"https://google.github.io/dagger/android.html\" rel=\"noreferrer\">here</a>) in my project with the <a href=\"https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin/\" rel=\"noreferrer\">Kotlin Annotation Processing Tool</a> (kapt).</p>\n\n<p>I have included the proper dependencies in my <code>build.gradle</code> file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n    defaultConfig {\n        applicationId \"com.example.app\"\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n        exclude group: 'com.google.code.findbugs', module: 'jsr305'\n    })\n\n    // Support libraries\n    compile \"com.android.support:appcompat-v7:25.3.1\"\n    compile \"com.android.support:design:25.3.1\"\n    compile \"com.android.support.constraint:constraint-layout:1.0.2\"\n\n    // Google libraries\n    compile \"com.google.dagger:dagger-android:2.10\"\n    compile \"com.google.dagger:dagger-android-support:2.10\"\n    kapt \"com.google.dagger:dagger-android-processor:2.10\"\n\n    // ReactiveX libraries\n    compile \"io.reactivex.rxjava2:rxandroid:2.0.1\"\n    compile \"io.reactivex.rxjava2:rxjava:2.0.9\"\n\n    // Kotlin libraries\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:1.1.2\"\n\n    // Test instrumentation\n    testCompile \"junit:junit:4.12\"\n}\n</code></pre>\n\n<p>But when I build the project I get the following <code>GradleException</code>:</p>\n\n<pre><code>:app:kaptDebugKotlin FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:kaptDebugKotlin'.\n&gt; Internal compiler error. See log for more details\n\n* Try:\nRun with --info or --debug option to get more log output.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:84)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:236)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:228)\n    at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:61)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:228)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:215)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:77)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:58)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:32)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:113)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n    at org.gradle.initialization.DefaultGradleLauncher$3.execute(DefaultGradleLauncher.java:196)\n    at org.gradle.initialization.DefaultGradleLauncher$3.execute(DefaultGradleLauncher.java:193)\n    at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:56)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:193)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:119)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:102)\n    at org.gradle.launcher.exec.GradleBuildController.run(GradleBuildController.java:71)\n    at org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:50)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.runner.RunAsBuildOperationBuildActionRunner$1.execute(RunAsBuildOperationBuildActionRunner.java:43)\n    at org.gradle.tooling.internal.provider.runner.RunAsBuildOperationBuildActionRunner$1.execute(RunAsBuildOperationBuildActionRunner.java:40)\n    at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:56)\n    at org.gradle.tooling.internal.provider.runner.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:40)\n    at org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:75)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:41)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:75)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:49)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:44)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:29)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:47)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\nCaused by: org.gradle.api.GradleException: Internal compiler error. See log for more details\n    at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:9)\n    at org.jetbrains.kotlin.gradle.internal.KaptTask.compile(KaptTask.kt:72)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.doExecute(DefaultTaskClassInfoStore.java:141)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:134)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:123)\n    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:632)\n    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:615)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:95)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:76)\n    ... 78 more\n</code></pre>\n\n<p>According to the Kotlin 1.0.4 <a href=\"https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/\" rel=\"noreferrer\">release changelog</a>:</p>\n\n<blockquote>\n  <p>You should enable [<code>generateStubs</code>] only if you\u2019ve run into problems with the\n  default <code>kapt</code> annotation processing implementation.</p>\n</blockquote>\n\n<p>Which I tried, but no luck.</p>\n\n<hr>\n\n<p>Root <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.2\"\n        classpath \"com.android.tools.build:gradle:2.3.1\"\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1505506204, "post_id": 43657807, "comment_id": 79457890, "body": "I think to sum up what you are trying to do, you want to add extensions to the <code>buildscript</code> block? Do you have a lower bound on Gradle version you are using?"}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1505521748, "post_id": 43657807, "comment_id": 79462173, "body": "@mkobit no, i&#39;m in the process of upgrading to 4.1. I guess I&#39;m really trying to improve the way our builds configure nexus, and make our plugins available to the project. The current solution (as documented at the start of this question) works, but the plugin configuration especially feels like a hack!"}, {"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1505657463, "post_id": 43657807, "comment_id": 79492684, "body": "Thanks for clarifying. There may be a few ways that may/may not work/improve upon what you have already done. One would be to write an <a href=\"https://docs.gradle.org/current/userguide/init_scripts.html#sec:init_script_plugins\" rel=\"nofollow noreferrer\">init script plugin</a> that you can apply in the <code>settings.gradle</code>. In the current <code>4.2-rc</code> there is also support for <i>Script plugins are cached and only downloaded when necessary instead of on every build.</i> which may improve upon some issues you are having. Another idea may be to provide a custom plugin portal like (<a href=\"https://github.com/linkedin/custom-gradle-plugin-portal\" rel=\"nofollow noreferrer\">github.com/linkedin/custom-gradle-plugin-portal</a>)."}, {"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1510784548, "post_id": 43657807, "comment_id": 81587792, "body": "Regarding the comment about <i>&quot;build should work without relying on an init script&quot;</i>, that can be found at <a href=\"https://github.com/gradle/gradle/issues/745#issuecomment-278302497\" rel=\"nofollow noreferrer\">github.com/gradle/gradle/issues/745#issuecomment-278302497</a>."}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1510798948, "post_id": 43657807, "comment_id": 81592140, "body": "Awesome, thanks @mkobit! I knew it was somewhere :)"}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 1, "creation_date": 1510799269, "post_id": 43657807, "comment_id": 81592216, "body": "I had a chat with Rodrigo (aka Bamboo) at KotlinConf about this. His suggestion was to publish a bootstrap plugin to the gradle plugin portal. We also discussed how remote script plugins might be not so bad any more now they&#39;re cached. It would be awesome if someone came up with a really clean and convincing approach - I&#39;m still a bit undecided!"}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 1, "creation_date": 1528071711, "post_id": 43657807, "comment_id": 88353959, "body": "Hi @mkobit I&#39;ve just added an answer with the solution I ended up going with. I did try applying the plugin management config from a remote script, but even though it&#39;s cached, it still tried to do a HEAD request against the script which failed when I didn&#39;t have a connection to our Nexus repo (where the script was hosted). So I ended up with a little bit of boilerplate in every <code>settings.gradle.kts</code> file, but it&#39;s not too bad!"}], "answers": [{"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1494460027, "post_id": 43897240, "comment_id": 74842567, "body": "Hmm that&#39;s a similar approach to the <a href=\"https://discuss.gradle.org/t/how-can-you-use-an-init-script-to-specify-a-repo-dependency-for-a-plugin-jar-but-allow-version-to-be-configured-in-builds-root-project/5416/4\" rel=\"nofollow noreferrer\">workaround</a> I&#39;m currently using - except my boilerplate is defined once in the initscript (inside my custom distribution) instead of in the <code>buildSrc</code> of every codebase."}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1511002885, "post_id": 43897240, "comment_id": 81683321, "body": "Hi Jonathon, I&#39;ve updated my question. Hopefully it makes it more obvious that we both have a very similar approach - except you configure things from your <code>sharedValues</code> script via <code>extra</code> (which could be hosted remotely and cached in new versions of Gradle), and I configure things from an init script plugin via an extension. I&#39;m hoping to find a better solution - I&#39;m not happy with either of our solutions (sorry!)."}], "tags": [], "owner": {"reputation": 744, "user_id": 3708426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1696669719/picture?type=large", "display_name": "Jonathan Leitschuh", "link": "https://stackoverflow.com/users/3708426/jonathan-leitschuh"}, "is_accepted": false, "score": 2, "last_activity_date": 1510953050, "last_edit_date": 1510953050, "creation_date": 1494431097, "answer_id": 43897240, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl/43897240#43897240", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>I've been doing something like this in my build</p>\n\n<pre><code>buildscript {\n    project.apply {\n        from(\"${rootProject.projectDir}/sharedValues.gradle.kts\")\n    }\n    val configureRepository: (Any) -&gt; Unit by extra\n    configureRepository.invoke(repositories)\n}\n</code></pre>\n\n<p>In my <code>sharedValues.gradle.kts</code> file I have code like this:</p>\n\n<pre><code>/**\n * This method configures the repository handler to add all of the maven repos that your company relies upon.\n * When trying to pull this method out of the [ExtraPropertiesExtension] use the following code:\n *\n * For Kotlin:\n * ```kotlin\n * val configureRepository : (Any) -&gt; Unit by extra\n * configureRepository.invoke(repositories)\n * ```\n * Any other casting will cause a compiler error.\n *\n * For Groovy:\n * ```groovy\n * def configureRepository = project.configureRepository\n * configureRepository.invoke(repositories)\n * ```\n *\n * @param repoHandler The RepositoryHandler to be configured with the company repositories.\n */\nfun repositoryConfigurer(repoHandler : RepositoryHandler) {\n    repoHandler.apply {\n        // Do stuff here\n    }\n}\n\nvar configureRepository : (RepositoryHandler) -&gt; Unit by extra\nconfigureRepository = this::repositoryConfigurer\n</code></pre>\n\n<p>I follow a similar patter for configuring the resolution strategy for plugins.</p>\n\n<p>The nice thing about this pattern is that anything you configure in <code>sharedValues.gradle.kts</code> can also be used from your <code>buildSrc</code> project meaning that you can reuse repository declarations.</p>\n\n<hr>\n\n<p>Updated:</p>\n\n<p>You can apply another script from a URL, for example doing this:</p>\n\n<pre><code>apply {\n    // This was actually a plugin that I used at one point.\n    from(\"http://dl.bintray.com/shemnon/javafx-gradle/8.1.1/javafx.plugin\")\n}\n</code></pre>\n\n<p>Simply host your script that you want all your builds to share on some http server (would highly recommend using HTTPS so your build can't be targeted by a man in the middle attack).</p>\n\n<p>The downside of this is that I don't think that scripts applied from urls aren't cached so they will be re-downloaded every time you run your build.\nThis may have been fixed by now, I'm not certain.</p>\n"}, {"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 1, "creation_date": 1511306608, "post_id": 47380418, "comment_id": 81803642, "body": "To me, this is a last resort. It will certainly work, and as we&#39;ve discussed on Slack, is probably how big companies like Netflix probably solve this problem, but the maintenance overhead is a massive point against this approach to me (having to constantly maintain a fork of such an active repo). With my current approach I simply have to bump the version every time Gradle updates and my new custom dist gets published to Nexus - I don&#39;t have to merge and I don&#39;t have to build from source."}], "tags": [], "owner": {"reputation": 744, "user_id": 3708426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1696669719/picture?type=large", "display_name": "Jonathan Leitschuh", "link": "https://stackoverflow.com/users/3708426/jonathan-leitschuh"}, "is_accepted": false, "score": 1, "last_activity_date": 1511116039, "creation_date": 1511116039, "answer_id": 47380418, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl/47380418#47380418", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>A solution offered to me by Stefan Oehme when I was having a similar problem was to vendor my own custom distribution of Gradle. According to him this is a common thing to do at large companies.</p>\n\n<p>Simply create a custom fork of the gradle repo, add your companies special sauce to every project using this custom version of gradle.</p>\n"}, {"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1511403118, "post_id": 47429918, "comment_id": 81848356, "body": "I haven&#39;t had time to try this out yet, but the bounty is up and I feel that this is the answer most in the spirit of my question. Enjoy your 500 points :)"}, {"owner": {"reputation": 3485, "user_id": 300053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc4f36b549c1066a3b47bcfa85d40da?s=128&d=identicon&r=PG", "display_name": "eskatos", "link": "https://stackoverflow.com/users/300053/eskatos"}, "reply_to_user": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1512393823, "post_id": 47429918, "comment_id": 82226313, "body": ":) Please come back with some feedback once you had a chance to implement this"}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 1, "creation_date": 1528071280, "post_id": 47429918, "comment_id": 88353899, "body": "Hi Paul, I&#39;ve finally had time to come back and post my results - see the answer below. Basically I went with your suggestions, minus the applying from a URL (as it made testing plugin updates more difficult, and introduced a dependency on a connection to Nexus as that&#39;s where I hosted the script)."}], "tags": [], "owner": {"reputation": 3485, "user_id": 300053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc4f36b549c1066a3b47bcfa85d40da?s=128&d=identicon&r=PG", "display_name": "eskatos", "link": "https://stackoverflow.com/users/300053/eskatos"}, "is_accepted": false, "score": 13, "last_activity_date": 1529412186, "last_edit_date": 1529412186, "creation_date": 1511339231, "answer_id": 47429918, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl/47429918#47429918", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>If you want to benefit from all the Gradle Kotlin DSL goodness you should strive to apply all plugins using the <code>plugins {}</code> block. See <a href=\"https://github.com/gradle/kotlin-dsl/blob/master/doc/getting-started/Configuring-Plugins.md\" rel=\"noreferrer\">https://github.com/gradle/kotlin-dsl/blob/master/doc/getting-started/Configuring-Plugins.md</a></p>\n\n<p>You can manage plugin repositories and resolution strategies (e.g. their version) in your settings files. Starting with Gradle 4.4 this file can be written using the Kotlin DSL, aka <code>settings.gradle.kts</code>. See <a href=\"https://docs.gradle.org/4.4-rc-1/release-notes.html\" rel=\"noreferrer\">https://docs.gradle.org/4.4-rc-1/release-notes.html</a>.</p>\n\n<p>With this in mind you could then have a centralized <code>Settings</code> script plugin that sets things up and apply it in your builds <code>settings.gradle.kts</code> files:</p>\n\n<pre><code>// corporate-settings.gradle.kts\npluginManagement {\n    repositories {\n        maven {\n            name = \"Corporate Nexus\"\n            url = uri(\"https://example.com/repository/maven-public\")\n        }\n        gradlePluginPortal()\n    }\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>// settings.gradle.kts\napply(from = \"https://url.to/corporate-settings.gradle.kts\")\n</code></pre>\n\n<p>Then in your project build scripts you can simply request plugins from your corporate repository:</p>\n\n<pre><code>// build.gradle.kts\nplugins {\n    id(\"my-corporate-plugin\") version \"1.2.3\"\n}\n</code></pre>\n\n<p>If you want your project build scripts in a multi-project build to not repeat the plugin version you can do so with <a href=\"https://docs.gradle.org/4.3.1/release-notes.html#more-use-cases-supported-using-the-plugins-%7B%7D-block\" rel=\"noreferrer\">Gradle 4.3</a> by declaring versions in your root project. Note that you also could set the versions in <code>settings.gradle.kts</code> using <code>pluginManagement.resolutionStrategy</code> if having all builds use the same plugins version is what you need.</p>\n\n<p>Also note that for all this to work, your plugins must be published with their <a href=\"https://docs.gradle.org/current/userguide/plugins.html#sec:plugin_markers\" rel=\"noreferrer\">plugin marker artifact</a>. This is easily done by using the <code>java-gradle-plugin</code> plugin.</p>\n"}, {"tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": true, "score": 5, "last_activity_date": 1535528124, "last_edit_date": 1535528124, "creation_date": 1528028533, "answer_id": 50666373, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl/50666373#50666373", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>I promised @eskatos that I would come back and give feedback on his answer - so here it is!</p>\n\n<p>My final solution consists of:</p>\n\n<ul>\n<li>Gradle 4.7 wrapper per project (pointed at a mirror of <a href=\"http://services.gradle.org/distributions\" rel=\"nofollow noreferrer\">http://services.gradle.org/distributions</a> setup in Nexus as a raw proxy repository, i.e. it's vanilla Gradle but downloaded via Nexus)</li>\n<li>Custom Gradle plugins published to our Nexus repo along with plugin markers (generated by the <a href=\"https://docs.gradle.org/current/userguide/java_gradle_plugin.html\" rel=\"nofollow noreferrer\">Java Gradle Plugin Development Plugin</a>)</li>\n<li>Mirroring the Gradle Plugin Portal in our Nexus repo (i.e. a proxy repo pointing at <a href=\"https://plugins.gradle.org/m2\" rel=\"nofollow noreferrer\">https://plugins.gradle.org/m2</a>)</li>\n<li>A <code>settings.gradle.kts</code> file per project that configures our maven repo and gradle plugin portal mirror (both in Nexus) as plugin management repositories.</li>\n</ul>\n\n<p>The <code>settings.gradle.kts</code> file contains the following:</p>\n\n<pre><code>pluginManagement {\n    repositories {\n        // local maven to facilitate easy testing of our plugins\n        mavenLocal()\n\n        // our plugins and their markers are now available via Nexus\n        maven {\n            name = \"CorporateNexus\"\n            url = uri(\"https://nexus.example.com/repository/maven-public\")\n        }\n\n        // all external gradle plugins are now mirrored via Nexus\n        maven {\n            name = \"Gradle Plugin Portal\"\n            url = uri(\"https://nexus.example.com/repository/gradle-plugin-portal\")\n        }\n    }\n}\n</code></pre>\n\n<p>This means that all plugins and their dependencies are now proxied via Nexus, and Gradle will find our plugins by id as the plugin markers are published to Nexus as well. Having <code>mavenLocal</code> in there as well facilitates easy testing of our plugin changes locally.</p>\n\n<p>Each project's root <code>build.gradle.kts</code> file then applies the plugins as follows:</p>\n\n<pre><code>plugins {\n    // plugin markers for our custom plugins allow us to apply our\n    // plugins by id as if they were hosted in gradle plugin portal\n    val corporatePluginsVersion = \"1.2.3\"\n    id(\"corporate-project\") version corporatePluginsVersion\n    // 'apply false` means this plugin can be applied in a subproject\n    // without having to specify the version again\n    id(\"corporate-publishing\") version corporatePluginsVersion apply false\n    // and so on...\n}\n</code></pre>\n\n<p>And configures the gradle wrapper to use our mirrored distribution, which when combined with the above means that everything (gradle, plugins, dependencies) all come via Nexus):</p>\n\n<pre><code>tasks {\n    \"wrapper\"(Wrapper::class) {\n        distributionUrl = \"https://nexus.example.com/repository/gradle-distributions/gradle-4.7-bin.zip\"\n    }\n}\n</code></pre>\n\n<p>I was hoping to avoid the boilerplate in the settings files using @eskatos's suggestion of applying a script from a remote URL in <code>settings.gradle.kts</code>. i.e.</p>\n\n<pre><code>apply { from(\"https://nexus.example.com/repository/maven-public/com/example/gradle/corporate-settings/1.2.3/corporate-settings-1.2.3.kts\" }\n</code></pre>\n\n<p>I even managed to generate a templated script (published alongside our plugins) that:</p>\n\n<ul>\n<li>configured the plugin repos (as in the above settings script)</li>\n<li>used a resolution strategy to apply the version of the plugins associated with the script if the requested plugin id was one of our plugins and the version wasn't supplied (so you can just apply them by id)</li>\n</ul>\n\n<p>However, even though it removed the boilerplate, it meant our builds were reliant on having a connection to our Nexus repo, as it seems that even though scripts applied from a URL are cached, Gradle does a HEAD request anyway to check for changes. It also made it annoying to test plugin changes locally, as I had to point it manually at the script in my local maven directory. With my current config, I can simply publish the plugins to maven local and update the version in my project.</p>\n\n<p>I'm quite happy with the current setup - I think it's far more obvious to developers now how the plugins are applied. And it's made it far easier to upgrade Gradle and our plugins independently now that there's no dependency between the two (and no custom gradle distribution required).</p>\n"}, {"tags": [], "owner": {"reputation": 3606, "user_id": 178274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8bcbf9deef69f1d6a2f658eefe4487c4?s=128&d=identicon&r=PG", "display_name": "denis.zhdanov", "link": "https://stackoverflow.com/users/178274/denis-zhdanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539992263, "creation_date": 1539992263, "answer_id": 52901111, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl/52901111#52901111", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>I encountered a similar problem when common config is replicated in each and every project. Solved it by a custom gradle distribution with the common settings defined in init script.  </p>\n\n<p>Created a gradle plugin for preparing such custom distributions - <a href=\"http://gradle-dist.oss.harmonysoft.tech/\" rel=\"nofollow noreferrer\">custom-gradle-dist</a>. It works perfectly for my projects, e.g. a <em>build.gradle</em> for a library project looks like this (this is a complete file):  </p>\n\n<pre class=\"lang-groove prettyprint-override\"><code>dependencies {\n    compile 'org.springframework.kafka:spring-kafka'\n}\n</code></pre>\n"}], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4454, "favorite_count": 8, "accepted_answer_id": 50666373, "answer_count": 5, "score": 31, "last_activity_date": 1539992263, "creation_date": 1493296043, "last_edit_date": 1528083650, "question_id": 43657807, "link": "https://stackoverflow.com/questions/43657807/boilerplate-project-configuration-in-gradle-with-gradle-kotlin-dsl", "title": "Boilerplate project configuration in Gradle with Gradle Kotlin DSL", "body": "<p>I'm currently trying to improve the way our projects share their configuration. We have lots of different multi-module gradle projects for all of our libraries and microservices (i.e. many git repos). </p>\n\n<p>My main goals are:</p>\n\n<ul>\n<li>To not have my Nexus repository config duplicated in every project (also, I can safely assume that the URL won't change)</li>\n<li>To make my custom Gradle plugins (published to Nexus) available to every project with minimal boilerplate / duplication (they should be available to every project, and the only thing the project cares about is the version it's using)</li>\n<li>No magic - it should be obvious to developers how everything is configured</li>\n</ul>\n\n<p>My current solution is a custom gradle distribution with an init script that:</p>\n\n<ul>\n<li>adds <code>mavenLocal()</code> and our Nexus repository to the project repos (very similar to the Gradle <a href=\"https://docs.gradle.org/current/userguide/init_scripts.html#sec:init_script_plugins\" rel=\"noreferrer\">init script documentation example</a>, except it adds repos as well as validating them)</li>\n<li>configures an extension that allows our gradle plugins to be added to the buildscript classpath (using <a href=\"https://discuss.gradle.org/t/how-can-you-use-an-init-script-to-specify-a-repo-dependency-for-a-plugin-jar-but-allow-version-to-be-configured-in-builds-root-project/5416/4\" rel=\"noreferrer\">this workaround</a>). It also adds our Nexus repo as a buildscript repo as that's where the plugins are hosted. We have quite a few plugins (built upon Netflix's excellent <a href=\"https://github.com/nebula-plugins\" rel=\"noreferrer\">nebula plugins</a>) for various boilerplate: standard project setup (kotlin setup, test setup, etc), releasing, publishing, documentation, etc and it means our project <code>build.gradle</code> files are pretty much just for dependencies.</li>\n</ul>\n\n<p>Here is the init script (sanitised):</p>\n\n<pre><code>/**\n * Gradle extension applied to all projects to allow automatic configuration of Corporate plugins.\n */\nclass CorporatePlugins {\n\n    public static final String NEXUS_URL = \"https://example.com/repository/maven-public\"\n    public static final String CORPORATE_PLUGINS = \"com.example:corporate-gradle-plugins\"\n\n    def buildscript\n\n    CorporatePlugins(buildscript) {\n        this.buildscript = buildscript\n    }\n\n    void version(String corporatePluginsVersion) {\n        buildscript.repositories {\n            maven {\n                url NEXUS_URL\n            }\n        }\n        buildscript.dependencies {\n            classpath \"$CORPORATE_PLUGINS:$corporatePluginsVersion\"\n        }\n    }\n\n}\n\nallprojects {\n    extensions.create('corporatePlugins', CorporatePlugins, buildscript)\n}\n\napply plugin: CorporateInitPlugin\n\nclass CorporateInitPlugin implements Plugin&lt;Gradle&gt; {\n\n    void apply(Gradle gradle) {\n\n        gradle.allprojects { project -&gt;\n\n            project.repositories {\n                all { ArtifactRepository repo -&gt;\n                    if (!(repo instanceof MavenArtifactRepository)) {\n                        project.logger.warn \"Non-maven repository ${repo.name} detected in project ${project.name}. What are you doing???\"\n                    } else if(repo.url.toString() == CorporatePlugins.NEXUS_URL || repo.name == \"MavenLocal\") {\n                        // Nexus and local maven are good!\n                    } else if (repo.name.startsWith(\"MavenLocal\") &amp;&amp; repo.url.toString().startsWith(\"file:\")){\n                        // Duplicate local maven - remove it!\n                        project.logger.warn(\"Duplicate mavenLocal() repo detected in project ${project.name} - the corporate gradle distribution has already configured it, so you should remove this!\")\n                        remove repo\n                    } else {\n                        project.logger.warn \"External repository ${repo.url} detected in project ${project.name}. You should only be using Nexus!\"\n                    }\n                }\n\n                mavenLocal()\n\n                // define Nexus repo for downloads\n                maven {\n                    name \"CorporateNexus\"\n                    url CorporatePlugins.NEXUS_URL\n                }\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Then I configure each new project by adding the following to the root build.gradle file:</p>\n\n<pre><code>buildscript {\n    // makes our plugins (and any others in Nexus) available to all build scripts in the project\n    allprojects {\n        corporatePlugins.version \"1.2.3\"\n    }\n}\n\nallprojects  {\n    // apply plugins relevant to all projects (other plugins are applied where required)\n    apply plugin: 'corporate.project'\n\n    group = 'com.example'\n\n    // allows quickly updating the wrapper for our custom distribution\n    task wrapper(type: Wrapper) {\n        distributionUrl = 'https://com.example/repository/maven-public/com/example/corporate-gradle/3.5/corporate-gradle-3.5.zip'\n    }\n}\n</code></pre>\n\n<p>While this approach works, allows reproducible builds (unlike our previous setup which applied a build script from a URL - which at the time wasn't cacheable), and allows working offline, it does make it a little magical and I was wondering if I could do things better. </p>\n\n<p>This was all triggered by reading <a href=\"https://github.com/gradle/gradle/issues/745#issuecomment-278302497\" rel=\"noreferrer\">a comment on Github</a> by Gradle dev Stefan Oehme stating that a build should work without relying on an init script, i.e. init scripts should just be decorative and do things like the documented example - preventing unauthorised repos, etc.</p>\n\n<p>My idea was to write some extension functions that would allow me to add our Nexus repo and plugins to a build in a way that looked like they were built into gradle (similar to the extension functions <a href=\"https://github.com/gradle/kotlin-dsl/blob/0164aa440b01430089edc7f753b6d83748a537f3/provider/src/main/kotlin/org/gradle/kotlin/dsl/ProjectExtensions.kt#L219\" rel=\"noreferrer\"><code>gradleScriptKotlin()</code></a> and <a href=\"https://github.com/gradle/kotlin-dsl/blob/6a3c51a65e8423aa33432b816996360cd32e7906/buildSrc/src/main/kotlin/codegen/GenerateKotlinDependencyExtensions.kt#L131\" rel=\"noreferrer\"><code>kotlin-dsl()</code></a> provided by the Gradle Kotlin DSL.</p>\n\n<p>So I created my extension functions in a kotlin gradle project:</p>\n\n<pre><code>package com.example\n\nimport org.gradle.api.artifacts.dsl.DependencyHandler\nimport org.gradle.api.artifacts.dsl.RepositoryHandler\nimport org.gradle.api.artifacts.repositories.MavenArtifactRepository\n\nfun RepositoryHandler.corporateNexus(): MavenArtifactRepository {\n    return maven {\n        with(it) {\n            name = \"Nexus\"\n            setUrl(\"https://example.com/repository/maven-public\")\n        }\n    }\n}\n\nfun DependencyHandler.corporatePlugins(version: String) : Any {\n    return \"com.example:corporate-gradle-plugins:$version\"\n}\n</code></pre>\n\n<p>With the plan to use them in my project's <code>build.gradle.kts</code> as follows:</p>\n\n<pre><code>import com.example.corporateNexus\nimport com.example.corporatePlugins\n\nbuildscript {\n\n    repositories {\n        corporateNexus()\n    }\n\n    dependencies {\n        classpath(corporatePlugins(version = \"1.2.3\"))\n    }\n}\n</code></pre>\n\n<p>However, Gradle was unable to see my functions when used in the <code>buildscript</code> block (unable to compile script). Using them in the normal project repos/dependencies worked fine though (they are visible and work as expected). </p>\n\n<p>If this worked, I was hoping to bundle the jar into my custom distribution , meaning my init script could just do simple validation instead of hiding away the magical plugin and repo configuration. The extension functions wouldn't need to change, so it wouldn't require releasing a new Gradle distribution when plugins change.</p>\n\n<p>What I tried:</p>\n\n<ul>\n<li>adding my jar to the test project's buildscript classpath (i.e. <code>buildscript.dependencies</code>) - doesn't work (maybe this doesn't work by design as it doesn't seem right to be adding a dependency to <code>buildscript</code> that's referred to in the same block)</li>\n<li>putting the functions in <code>buildSrc</code> (which works for normal project deps/repos but not <code>buildscript</code>, but is not a real solution as it just moves the boilerplate)</li>\n<li>dropping the jar in the <code>lib</code> folder of the distribution</li>\n</ul>\n\n<p>So my question really boils down to:</p>\n\n<ul>\n<li>Is what I'm trying to achieve possible (is it possible to make custom classes/functions visible to the <code>buildScript</code> block)? </li>\n<li>Is there a better approach to configuring a corporate Nexus repo and making custom plugins (published to Nexus) available across lots of separate projects (i.e. totally different codebases) with minimal boilerplate configuration?</li>\n</ul>\n"}, {"tags": ["android", "xmpp", "kotlin", "smack"], "owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493276103, "creation_date": 1493275774, "last_edit_date": 1493276103, "question_id": 43650518, "link": "https://stackoverflow.com/questions/43650518/how-to-get-message-delivery-status-using-smack", "title": "How to get message delivery status using smack?", "body": "<p>Requesting for delivery status while sending message</p>\n\n<pre><code> var message:Message = Message()\n            message.addBody(\"EN\",msg_text.text.toString())\n            Log.i(\"Delivery Request id \",DeliveryReceiptRequest.addTo(message))\n\n            Log.v(\"Chat Response msg \",chat.send(message).toString())\n</code></pre>\n\n<p>DeliveryReceiptListener</p>\n\n<p>//delivery status recipient</p>\n\n<pre><code>var deliveryReceiptManager= DeliveryReceiptManager.getInstanceFor(connection)\n        deliveryReceiptManager.autoReceiptMode = DeliveryReceiptManager.AutoReceiptMode.always\n        deliveryReceiptManager.autoAddDeliveryReceiptRequests()\n        deliveryReceiptManager.addReceiptReceivedListener { fromJid, toJid, receiptId, receipt -&gt;\n\n            Log.i(\"From jid \",fromJid.toString())\n            Log.i(\"To jid \",toJid.toString())\n            Log.i(\"Receipt id  \",receiptId.toString())\n            Log.i(\"recipt \",receipt.toString())\n\n        }\n</code></pre>\n\n<p>I am not able to get the delivery status i.e read/unread/msg received. How will I implement this?</p>\n"}]