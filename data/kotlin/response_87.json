[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 3, "creation_date": 1473286649, "post_id": 39377043, "comment_id": 66087512, "body": "You should be using the Jackson-Kotiln module and then none of this is likely needed.  <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-module-kotlin</a>"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473286873, "post_id": 39377043, "comment_id": 66087582, "body": "@JaysonMinard Thank you. I have downloaded it and built a jar out of it using Maven. I will be using it going forward."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1473286976, "post_id": 39377043, "comment_id": 66087612, "body": "It has artifacts in Maven Central, no need to build it... <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.module/jackson-module-kotlin/2.8.2\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.fasterxml.jackson.module/&hellip;</a>"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473287164, "post_id": 39377043, "comment_id": 66087678, "body": "Thank you. I guess I am going to have to read a lot of documentation before I can make any use of Maven or Gradle properly. I intend to."}], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473277233, "post_id": 39377732, "comment_id": 66083628, "body": "Many thanks. The Kotlin plug-in for Eclipse, which I am using does not resolve the type <code>TypeReference</code>. It also offers little to no intellisense in finding where a type you want to reference belongs. Could you please tell me the package I need to import to get it?"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1473278866, "last_edit_date": 1473278866, "creation_date": 1473276735, "answer_id": 39377732, "question_id": 39377043, "link": "https://stackoverflow.com/questions/39377043/how-do-i-get-the-class-name-from-a-type-name/39377732#39377732", "title": "How do I get the class name from a type name?", "body": "<p>The following works as expected:</p>\n\n<pre><code>val type = mapper.typeFactory.constructParametricType(OperationalResult::class.java, String::class.java)\nval operationalResult = mapper.readValue&lt;OperationalResult&lt;String&gt;&gt;(\"\"\"{\"result\":\"stack\"}\"\"\", type)\nprintln(operationalResult.result) // -&gt; stack\n</code></pre>\n\n<p>A simpler alternative to deserialize generic types using <a href=\"http://fasterxml.github.io/jackson-core/javadoc/2.0.0/com/fasterxml/jackson/core/type/TypeReference.html\" rel=\"nofollow\">com.fasterxml.jackson.core.type.TypeReference</a>:</p>\n\n<pre><code>val operationalResult = mapper.readValue&lt;OperationalResult&lt;Double&gt;&gt;(\"\"\"{\"result\":\"5.5\"}\"\"\",\n        object : TypeReference&lt;OperationalResult&lt;Double&gt;&gt;() {})\nprintln(operationalResult.result) // -&gt; 5.5\n</code></pre>\n\n<p>And with the aid of <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">jackson-kotlin-module</a> you can even write:</p>\n\n<pre><code>val operationalResult = mapper.readValue&lt;OperationalResult&lt;Long&gt;&gt;(\"\"\"{\"result\":\"5\"}\"\"\")\nprintln(operationalResult.result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1473277012, "post_id": 39377753, "comment_id": 66083510, "body": "Thank you. I&#39;d actually tried that as well but the intellisense fails to propose any suggestions once I type <code>OperationResult::class.</code>. I believe it is an issue with the Kotlin plug-in for Eclipse in that it fails to load the kotlin reflection assembly. But I can&#39;t be sure. I am switching IDE&#39;s to IntelliJ IDEA Ultimate and will report back if the solution you suggest works, which I am positive it will. Thanks again. :-)"}, {"owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473277283, "post_id": 39377753, "comment_id": 66083647, "body": "Even the free version (Intellij IDEA Community) works great with Kotlin :)"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473277389, "post_id": 39377753, "comment_id": 66083692, "body": "You are right, it does but I want to write servlets, which the Community Edition does not support. <a href=\"http://stackoverflow.com/q/39072303/303685\">stackoverflow.com/q/39072303/303685</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473286614, "post_id": 39377753, "comment_id": 66087500, "body": "You can write servlets @WaterCoolerv2 but you may have to startup the application server.  You can always use embedded Jetty, Undertow or Vert.x which you just run as apps and your code will be compiled with them.  And your code can be servlets."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473287027, "post_id": 39377753, "comment_id": 66087629, "body": "@JaysonMinard I am in an unexplored turf when it comes to Java or Kotlin. All of those tools are new to me. I am scared. :-) I am just practicing. I will try them out in time. For me just now, the largest obstacle seems to be the plethora of tools you have to use and their documentation just to do simple stuff. With .NET, it&#39;s all under one roof and really very simple."}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 4, "last_activity_date": 1473276814, "creation_date": 1473276814, "answer_id": 39377753, "question_id": 39377043, "link": "https://stackoverflow.com/questions/39377043/how-do-i-get-the-class-name-from-a-type-name/39377753#39377753", "title": "How do I get the class name from a type name?", "body": "<p>You need to obtain instance of <code>Class</code> not <code>KClass</code>. To get it you simply use <code>::class.java</code> instead of <code>::class</code>.</p>\n\n<pre><code>val type : JavaType = mapper.typeFactory.constructParametricType(OperationResult::class.java, String::class.java)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473328071, "post_id": 39380052, "comment_id": 66101806, "body": "Thank you for such a lovely and detailed answer. I loved all the explanation. I am aware of and have used object declarations, object expressions (to create substitutes of Java&#39;s lambda expressions, for .e.g. inline mouselisteners, etc.) and companion objects. I understand what&#39;s happening when you say <code>object : TypeReference&lt;Something&gt;() { }</code>. Still, I really liked the way you explain things. Thank you very much for your time. :-)"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 4, "last_activity_date": 1473288017, "creation_date": 1473288017, "answer_id": 39380052, "question_id": 39377043, "link": "https://stackoverflow.com/questions/39377043/how-do-i-get-the-class-name-from-a-type-name/39380052#39380052", "title": "How do I get the class name from a type name?", "body": "<p>Kotlin has a few things that become a concern when using Jackson, GSON or other libraries that instantiate Kotlin objects.  One, is how do you get the <code>Class</code>, <code>TypeToken</code>, <code>TypeReference</code> or other specialized class that some libraries want to know about.  The other is how can they construct classes that do not always have default constructors, or are immutable.</p>\n\n<p>For Jackson, a module was built specifically to cover these cases.  It is mentioned in @miensol's answer.  He shows an example similar to:</p>\n\n\n\n<pre><code>import com.fasterxml.jackson.module.kotlin.*  // added for clarity\n\nval operationalResult: OperationalResult&lt;Long&gt; = mapper.readValue(\"\"{\"result\":\"5\"}\"\"\")\n</code></pre>\n\n<p>This is actually calling an inline extension function added to <code>ObjectMapper</code> by the Kotlin module, and it uses the inferred type of the result grabbing the reified generics (available to inline functions) to do whatever is needed to tell Jackson about the data type.  It creates a Jackson <code>TypeReference</code> behind the scenes for you and passes it along to Jackson. This is the source of the function:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; ObjectMapper.readValue(content: String): T = readValue(content, object: TypeReference&lt;T&gt;() {})  \n</code></pre>\n\n<p>You can easily code the same, but the module has a larger number of these helpers to do this work for you.  In addition it handles being able to call non-default constructors and static factory methods for you as well.  And in Jackson 2.8.+ it also can deal more intelligently with nullability and default method parameters (allowing the values to be missing in the JSON and therefore using the default value).  Without the module, you will soon find new errors.</p>\n\n<p>As for your use of <code>mapper.typeFactory.constructParametricType</code> you should use <code>TypeReference</code> instead, it is much easier and follows the same pattern as above.</p>\n\n<pre><code>val myTypeRef = object: TypeReference&lt;SomeOtherClass&gt;() {}\n</code></pre>\n\n<p>This code creates an anonymous instance of a class (via an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"nofollow\">object expression</a>) that has a super type of <code>TypeRefrence</code> with your generic class specified.  Java reflection can then query this information.</p>\n\n<p>Be careful using <code>Class</code> directly because it erases generic type information, so using <code>SomeOtherClass::class</code> or <code>SomeOtherClass::class.java</code> all lose the generics and should be avoided for things that require knowledge of them.</p>\n\n<p>So even if you can get away with some things without using the Jackson-Kotlin module, you'll soon run into a lot of pain later.  Instead of having to mangle your Kotlin this module removes these types of errors and lets you do things more in the \"Kotlin way.\"</p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4117, "favorite_count": 0, "accepted_answer_id": 39377732, "answer_count": 3, "score": 0, "last_activity_date": 1473288017, "creation_date": 1473273652, "question_id": 39377043, "link": "https://stackoverflow.com/questions/39377043/how-do-i-get-the-class-name-from-a-type-name", "title": "How do I get the class name from a type name?", "body": "<p>I am trying to deserialize a Json string into an object of type <code>OperationResult&lt;String&gt;</code> using Jackson with Kotlin.</p>\n\n<p>I need to construct a type object like so:</p>\n\n<pre><code>val mapper : ObjectMapper = ObjectMapper();\nval type : JavaType = mapper.getTypeFactory()\n         .constructParametricType(*/ class of OperationResult */,, \n          /* class of String */);\nval result : OperationResult&lt;String&gt; = mapper.readValue(\n                  responseString, type);\n</code></pre>\n\n<p>I've tried the following but they do not work.</p>\n\n<pre><code>val type : JavaType = mapper.getTypeFactory()\n            .constructParametricType(\n             javaClass&lt;OperationResult&gt;, \n             javaClass&lt;String&gt;); // Unresolved javaClass&lt;T&gt;\n\nval type : JavaType = mapper.getTypeFactory()\n            .constructParametricType(\n             OperationResult::class, \n             String::class);\n</code></pre>\n\n<p>How do I get a java class from the type names?</p>\n"}, {"tags": ["java", "generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473258950, "post_id": 39372560, "comment_id": 66073540, "body": "I saw its extension methods syntax and it looks likes <code>fun TheClassToExtend.yourExtensionMethod() { ... }</code>. I also came across this <code>run { }</code> block a couple of times I can&#39;t remember where -- whether it was the documentation or the code recommender within the IDE. I still don&#39;t know what those are and have to study them. Thanks so much. :-)"}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 1, "creation_date": 1473268356, "post_id": 39372560, "comment_id": 66079455, "body": "As a side note, you can use <code>attributes + (TextAttribute.UNDERLINE to TextAttribute.UNDERLINE_ON)</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473312592, "post_id": 39372560, "comment_id": 66093596, "body": "Won&#39;t it copy the whole map on <code>plus</code>? A <code>MutableMap</code> may be for fitting here"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473315548, "post_id": 39372560, "comment_id": 66094670, "body": "@voddan it will but I&#39;m pretty sure that&#39;s not going to be a bottle neck here."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1473258505, "last_edit_date": 1473258505, "creation_date": 1473258273, "answer_id": 39372560, "question_id": 39372238, "link": "https://stackoverflow.com/questions/39372238/what-compile-time-type-must-i-assign-to-receieve-a-return-value-of-java-util-map/39372560#39372560", "title": "What compile-time type must I assign to receieve a return value of java.util.Map&lt;TextAttribute, ?&gt;", "body": "<p>The first problem is that the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#getAttributes()\" rel=\"nofollow\"><code>getAttributes</code></a> method returns a map that can hold nulls whereas <code>Map&lt;TextAttribute, Any&gt;</code> declares that its values must not be null. \nThe second problem is that the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/\" rel=\"nofollow\"><code>Map</code></a> interface in Kotlin does not allow mutation. </p>\n\n<p>To resolve the problems change your code to e.g.:</p>\n\n<pre><code>val attributes : Map&lt;TextAttribute, *&gt; = font.getAttributes();\nval updatedAttributes = attributes.plus(TextAttribute.UNDERLINE to TextAttribute.UNDERLINE_ON)\n</code></pre>\n\n<p>or even more concise:</p>\n\n<pre><code>val updatedAttributes = font.attributes.plus(TextAttribute.UNDERLINE to TextAttribute.UNDERLINE_ON)\n</code></pre>\n\n<p>Finally since Kotlin has handy extension methods the whole font mangling can be turned into:</p>\n\n<pre><code>label.font = label.font.run { \n    deriveFont(attributes.plus(TextAttribute.UNDERLINE to TextAttribute.UNDERLINE_ON)) \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "is_accepted": false, "score": 1, "last_activity_date": 1473258413, "creation_date": 1473258413, "answer_id": 39372609, "question_id": 39372238, "link": "https://stackoverflow.com/questions/39372238/what-compile-time-type-must-i-assign-to-receieve-a-return-value-of-java-util-map/39372609#39372609", "title": "What compile-time type must I assign to receieve a return value of java.util.Map&lt;TextAttribute, ?&gt;", "body": "<p>I looked up <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow\">Star Projections</a> in the Kotlin documentation and from a quick reading, it appears that it is Kotlin's way of introducing variance into generic types, so the asterisk <code>*</code> in an <code>out</code> position means <code>out Any?</code>, so I changed my code to this and it worked:</p>\n\n<pre><code>val attributesMap : Map&lt;TextAttribute, Any?&gt; = font.getAttributes();\nval attributes : MutableMap&lt;TextAttribute, Any?&gt; = \n      attributesMap as MutableMap&lt;TextAttribute, Any?&gt;;\n</code></pre>\n\n<p>And also there was that the compile-time type I used was a read-only interface <code>kotlin.collections.Map&lt;K, V&gt;</code> where as I was putting items into it. But that was something I was mindful of and was about to take care of once I'd gotten rid of the casting error in the previous line.</p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 39372560, "answer_count": 2, "score": 1, "last_activity_date": 1473258505, "creation_date": 1473257483, "last_edit_date": 1473258072, "question_id": 39372238, "link": "https://stackoverflow.com/questions/39372238/what-compile-time-type-must-i-assign-to-receieve-a-return-value-of-java-util-map", "title": "What compile-time type must I assign to receieve a return value of java.util.Map&lt;TextAttribute, ?&gt;", "body": "<p>I'd like to make a font derived out of another font. Here's what I am trying to do:</p>\n\n<pre><code>val font : Font = this.label.getFont();\nval attributes : Map&lt;TextAttribute, Any&gt; = font.getAttributes();\nattributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);\nthis.label.setFont(font.deriveFont(attributes));\n</code></pre>\n\n<p>However, the Kotlin compiler complains at the line:</p>\n\n<pre><code>val attributes : Map&lt;TextAttribute, Any&gt; = font.getAttributes();\n</code></pre>\n\n<p>With the message:</p>\n\n<pre><code> Type mismatch: inferred type is \n(Mutable)Map&lt;TextAttribute!, *&gt;! but \nMap&lt;TextAttribute, Any&gt; was expected\n</code></pre>\n\n<p>Per my limited understanding of generics in Java, I understand that font.getAttributes() returns a <code>java.util.Map&lt;TextAttribute, ?&gt;</code>; the latter type parameter means <em>when you create a bounded / closed generic type out of this map, please specify as the second type parameter, anything that extends java.lang.Object</em>.</p>\n\n<p>So, when I tried with the following line at first:</p>\n\n<pre><code>val attributes : java.util.Map&lt;TextAttribute, Object&gt; = font.getAttributes();\n</code></pre>\n\n<p>The Kotlin compiler said:</p>\n\n<blockquote>\n  <p>This class shouldn't be used in Kotlin. Use kotlin.collections.Map or kotlin.collections.MutableMap instead.</p>\n</blockquote>\n\n<p>and it also said:</p>\n\n<pre><code> Type mismatch: inferred type is \n (MutableMap&lt;TextAttribute!, *&gt;..kotlin.collections.Map&lt;TextAttribute!, *&gt;?) \n but java.util.Map&lt;TextAttribute, Object&gt; was expected\n</code></pre>\n\n<p>I have no idea what the <code>!</code> symbol means and that wildcard asterisk symbol means. What is it saying?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473264006, "post_id": 39365736, "comment_id": 66077114, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class\">Is it possible to use Mockito with Kotlin without open the class?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6060710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fkGEg7WI32s/AAAAAAAAAAI/AAAAAAAAABI/0I5taSio4Pg/photo.jpg?sz=128", "display_name": "David_Jiang", "link": "https://stackoverflow.com/users/6060710/david-jiang"}, "edited": false, "score": 0, "creation_date": 1473254950, "post_id": 39366011, "comment_id": 66070477, "body": "Thank you, and sorry for my superficial knowledge of Kotlin which cause the simple problem. Your further reading links are very useful. Wish you have a good day."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 9, "last_activity_date": 1473240168, "last_edit_date": 1495540109, "creation_date": 1473240168, "answer_id": 39366011, "question_id": 39365736, "link": "https://stackoverflow.com/questions/39365736/a-simple-kotlin-class-with-mockito-test-caused-missingmethodinvocationexception/39366011#39366011", "title": "A simple kotlin class with mockito test caused MissingMethodInvocationException", "body": "<p>By default Kotlin's <a href=\"https://kotlinlang.org/docs/reference/classes.html#wait-how-will-i-hack-my-libraries-now\" rel=\"noreferrer\">classes and members are final</a>. Mockito is not able to <a href=\"https://github.com/mockito/mockito/wiki/FAQ#what-are-the-limitations-of-mockito\" rel=\"noreferrer\">mock final classes nor methods</a>. To use Mockito you need to <code>open</code> the method you wish to mock:</p>\n\n<pre><code>open fun changeLogin() : Boolean {\n    return !isLogin\n}\n</code></pre>\n\n<p>Further reading</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30305217/is-it-possible-to-use-mockito-in-kotlin\">Is it possible to use Mockito in Kotlin?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class?rq=1\">Is it possible to use Mockito with Kotlin without open the class?</a> </li>\n</ul>\n\n<p><em>PS. In my humble opinion, as long as you keep you interfaces small through i.e <a href=\"https://en.wikipedia.org/wiki/Interface_segregation_principle\" rel=\"noreferrer\">ISP</a>, a test code that uses Mockito or other mocking framework is rarely more readable and easy to understand than hand written fakes/stubs.</em></p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6060710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fkGEg7WI32s/AAAAAAAAAAI/AAAAAAAAABI/0I5taSio4Pg/photo.jpg?sz=128", "display_name": "David_Jiang", "link": "https://stackoverflow.com/users/6060710/david-jiang"}, "edited": false, "score": 0, "creation_date": 1473255339, "post_id": 39367070, "comment_id": 66070743, "body": "Thanks for offering a project which is easy and simple to solve the problem. Why I choose another answer because he tells me why. It&#39;s not means your better way to solve the problem is useless, just merely I prefer to know where I am wrong. So wish you have a good day."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 4, "last_activity_date": 1473264308, "last_edit_date": 1473264308, "creation_date": 1473243169, "answer_id": 39367070, "question_id": 39365736, "link": "https://stackoverflow.com/questions/39365736/a-simple-kotlin-class-with-mockito-test-caused-missingmethodinvocationexception/39367070#39367070", "title": "A simple kotlin class with mockito test caused MissingMethodInvocationException", "body": "<p>As @miensol mentions, your problem occurs because the classes are <code>final</code> by default in Kotlin.  The error message isn't very clear although this part mentions <code>final</code> as one of the possible causes:</p>\n\n<blockquote>\n  <ol>\n  <li>you stub either of: final/private/equals()/hashCode() methods.</li>\n  </ol>\n</blockquote>\n\n<p>There is a project specifically to help deal with Kotlin \"final by default\" in unit testing with Mockito.  For JUNIT, you can use the <a href=\"https://github.com/dpreussler/kotlin-testrunner\" rel=\"nofollow\">kotlin-testrunner</a> which is an easy way to make any Kotlin test automatically open up classes for testing as they are loaded by the classloader.  Usage is simple, just add one annotation of <code>@RunWith(KotlinTestRunner::class)</code>, for example:</p>\n\n\n\n<pre><code>@RunWith(KotlinTestRunner::class)\nclass MyKotlinTestclass {\n   @Test \n   fun test() {\n   ...\n   }\n}\n</code></pre>\n\n<p>This is thoroughly covered in the article <a href=\"https://medium.com/@dpreussler/never-say-final-mocking-kotlin-classes-in-unit-tests-314d275b82b1\" rel=\"nofollow\">Never say final: mocking Kotlin classes in unit tests</a></p>\n\n<p>This covers your use case in an automatic way by allowing all classes to be mocked that otherwise would not be allowed.</p>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 2523410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d7f6522c869c6f24c98f812787c3c4?s=128&d=identicon&r=PG", "display_name": "Nabzi", "link": "https://stackoverflow.com/users/2523410/nabzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1590498326, "creation_date": 1590498326, "answer_id": 62022843, "question_id": 39365736, "link": "https://stackoverflow.com/questions/39365736/a-simple-kotlin-class-with-mockito-test-caused-missingmethodinvocationexception/62022843#62022843", "title": "A simple kotlin class with mockito test caused MissingMethodInvocationException", "body": "<p>For anybody reaching this post  , you can use kotlin-allopen library to open your classes for testing : </p>\n\n<p>First add the dependency in your build.gradle (project) file:</p>\n\n<pre><code>dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-allopen:$kotlin_version\"\n    }\n</code></pre>\n\n<p>After that apply the plugin in your build.gradle (app mobdule) file:</p>\n\n<pre><code>apply plugin: 'kotlin-allopen'\n</code></pre>\n\n<p>Then specify the list of annotations that will make classes open:</p>\n\n<pre><code>allOpen {\n    annotation('com.example.myproject.OpenForTesting')\n}\n</code></pre>\n\n<p>And define the annotation in a file named OpenForTesting(file must be in location com.example.myproject.OpenForTesting) in your project:</p>\n\n<pre><code> /**\n     * This annotation allows us to open some classes for mocking purposes while they are final in\n     * release builds.\n     */\n    @Target(AnnotationTarget.ANNOTATION_CLASS)\n    annotation class OpenClass\n\n    /**\n     * Annotate a class with [OpenForTesting] if you want it to be extendable in debug builds.\n     */\n    @OpenClass\n    @Target(AnnotationTarget.CLASS)\n    annotation class OpenForTesting\n</code></pre>\n\n<p>And use this annotation for every class which you want to be open</p>\n\n<p>@OpenForTesting</p>\n\n<p>Here is the Kotlin official documentation about All-open: <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/compiler-plugins.html</a></p>\n"}], "owner": {"reputation": 53, "user_id": 6060710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fkGEg7WI32s/AAAAAAAAAAI/AAAAAAAAABI/0I5taSio4Pg/photo.jpg?sz=128", "display_name": "David_Jiang", "link": "https://stackoverflow.com/users/6060710/david-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2792, "favorite_count": 1, "accepted_answer_id": 39366011, "answer_count": 3, "score": 4, "last_activity_date": 1590498326, "creation_date": 1473239399, "last_edit_date": 1515708012, "question_id": 39365736, "link": "https://stackoverflow.com/questions/39365736/a-simple-kotlin-class-with-mockito-test-caused-missingmethodinvocationexception", "title": "A simple kotlin class with mockito test caused MissingMethodInvocationException", "body": "<p>I start to learn Kotlin and Mockito, so I code a simple module to test it.</p>\n\n<p>AccountData_K.kt:</p>\n\n<pre><code>open class AccountData_K {\nvar isLogin: Boolean = false\nvar userName: String? = null\n\n    fun changeLogin() : Boolean {\n        return !isLogin\n    }\n}\n</code></pre>\n\n<p>AccountDataMockTest_K.kt:</p>\n\n<pre><code>class AccountDataMockTest_K {\n    @Mock\n    val accountData = AccountData_K()\n\n    @Before\n    fun setupAccountData() {\n        MockitoAnnotations.initMocks(this)\n    }\n\n    @Test\n    fun testNotNull() {\n        assertNotNull(accountData)\n    }\n\n    @Test\n    fun testIsLogin() {\n        val result = accountData.changeLogin()\n        assertEquals(result, true)\n    }\n\n    @Test\n    fun testChangeLogin() {        \n        `when`(accountData.changeLogin()).thenReturn(false)\n        val result = accountData.changeLogin()\n        assertEquals(result, false)\n    }\n}\n</code></pre>\n\n<p>And when I run the test, it reports an exception about the <code>testChangeLogin()</code> method:</p>\n\n<pre><code>org.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n2. inside when() you don't call method on mock but on some other object.\n3. the parent of the mocked class is not public.\n   It is a limitation of the mock engine.\n\nat com.seal.materialdesignwithkotlin.AccountDataMockTest_K.testChangeLogin(AccountDataMockTest_K.kt:57)\n...\n</code></pre>\n\n<p>I doubt why the method is not a method call on a mock...</p>\n\n<p>So please help me, thanks.</p>\n"}, {"tags": ["spring-boot", "jersey", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1473256902, "post_id": 39362122, "comment_id": 66071925, "body": "@voddan <a href=\"http://stackoverflow.com/a/36701687/155213\">JVM allows this</a> and from Kotlin perspective the getter and method are distinguishable. I wonder though if this should be an error since it&#39;s forbidden in Java."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473257100, "post_id": 39362122, "comment_id": 66072059, "body": "Thank you for the link, strange indeed. I was sure it were a &quot;clashing jvm signature error&quot; in kotlinc"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1473227754, "creation_date": 1473227754, "answer_id": 39362122, "question_id": 39356519, "link": "https://stackoverflow.com/questions/39356519/spring-boot-kotlin-jersey-modelvalidationexception/39362122#39362122", "title": "Spring Boot Kotlin Jersey ModelValidationException", "body": "<p>The problem is that the following property:</p>\n\n<pre><code>val genres : List&lt;Genre&gt; = listOf(Genre(1,\"Butt\"), Genre(2, \"Cow\"))\n</code></pre>\n\n<p>Generates a method that on JVM level has a following signature:</p>\n\n<pre><code>@NotNull\npublic final List&lt;Genre&gt; getGenres()\n</code></pre>\n\n<p>As you can see it conflicts with the other method in your controller. To resolve it change the property to be <code>private</code> or rename one of the methods.</p>\n\n<p>PS. The error message is pretty clear about the problem:</p>\n\n<blockquote>\n  <p><code>public javax.ws.rs.core.Response\n  com.joescodeshack.igdb.controller.GenreController.getGenres()</code> and\n  <code>public final java.util.List\n  com.joescodeshack.igdb.controller.GenreController.getGenres()</code> at\n  matching regular expression /genre. These two methods produces and\n  consumes exactly the same mime-types and therefore their invocation as\n  a resource methods will always fail.;</p>\n</blockquote>\n"}], "owner": {"reputation": 5548, "user_id": 2272004, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5a4a49705088dabef2989f0008cf405f?s=128&d=identicon&r=PG", "display_name": "greyfox", "link": "https://stackoverflow.com/users/2272004/greyfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 39362122, "answer_count": 1, "score": 1, "last_activity_date": 1473227754, "creation_date": 1473190332, "question_id": 39356519, "link": "https://stackoverflow.com/questions/39356519/spring-boot-kotlin-jersey-modelvalidationexception", "title": "Spring Boot Kotlin Jersey ModelValidationException", "body": "<p>I am trying to get Spring Boot + Jersey working with Kotlin. I configured the way I typically would in Java but getting a the following stacktrace. It seems to indicate the controller is being instantiated twice but it shouldn't.</p>\n\n<p>Here is my JerseyConfig class:</p>\n\n<pre><code>package com.joescodeshack.igdb.config\n\nimport com.fasterxml.jackson.module.kotlin.KotlinModule\nimport com.joescodeshack.igdb.controller.GenreController\nimport org.glassfish.jersey.server.ResourceConfig\nimport org.springframework.context.annotation.Bean\nimport org.springframework.http.converter.json.Jackson2ObjectMapperBuilder\nimport org.springframework.stereotype.Component\nimport javax.ws.rs.ApplicationPath\n\n@Component\n@ApplicationPath(\"/api\")\nopen class JerseyConfig : ResourceConfig {\n\n    constructor() {\n        register(GenreController());\n    }\n\n    @Bean\n    open fun objectMapperBuilder(): Jackson2ObjectMapperBuilder\n            = Jackson2ObjectMapperBuilder().modulesToInstall(KotlinModule())\n}\n</code></pre>\n\n<p>GenreController (JAX-RS endpoint)</p>\n\n<pre><code>package com.joescodeshack.igdb.controller\n\nimport com.joescodeshack.igdb.domain.Genre\nimport javax.ws.rs.GET\nimport javax.ws.rs.Path\nimport javax.ws.rs.Produces\nimport javax.ws.rs.core.MediaType\nimport javax.ws.rs.core.Response\n\n@Path(\"/genre\")\nopen class GenreController {\n\n    val genres : List&lt;Genre&gt; = listOf(Genre(1,\"Butt\"), Genre(2, \"Cow\"))\n\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    open fun getGenres() : Response {\n        return Response.ok(genres).build();\n    }\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>2016-09-06 15:26:26.529 ERROR 17332 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[.[.j.i.c.JerseyConfig]    : Allocate exception for servlet com.joescodeshack.igdb.config.JerseyConfig\n\norg.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.\n[[FATAL] A resource model has ambiguous (sub-)resource method for HTTP method GET and input mime-types as defined by\"@Consumes\" and \"@Produces\" annotations at Java methods public javax.ws.rs.core.Response com.joescodeshack.igdb.controller.GenreController.getGenres() and public final java.util.List com.joescodeshack.igdb.controller.GenreController.getGenres() at matching regular expression /genre. These two methods produces and consumes exactly the same mime-types and therefore their invocation as a resource methods will always fail.; source='org.glassfish.jersey.server.model.RuntimeResource@1b6cce78']\n    at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:555) ~[jersey-server-2.23.1.jar:na]\n    at org.glassfish.jersey.server.ApplicationHandler.access$500(ApplicationHandler.java:184) ~[jersey-server-2.23.1.jar:na]\n    at org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:350) ~[jersey-server-2.23.1.jar:na]\n    at org.glassfish.jersey.server.ApplicationHandler$3.call(ApplicationHandler.java:347) ~[jersey-server-2.23.1.jar:na]\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315) ~[jersey-common-2.23.1.jar:na]\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297) ~[jersey-common-2.23.1.jar:na]\n    at org.glassfish.jersey.internal.Errors.processWithException(Errors.java:255) ~[jersey-common-2.23.1.jar:na]\n    at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:347) ~[jersey-server-2.23.1.jar:na]\n    at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:392) ~[jersey-container-servlet-core-2.23.1.jar:na]\n    at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:177) ~[jersey-container-servlet-core-2.23.1.jar:na]\n    at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:369) ~[jersey-container-servlet-core-2.23.1.jar:na]\n    at javax.servlet.GenericServlet.init(GenericServlet.java:158) ~[tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1194) ~[tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:806) ~[tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:133) ~[tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:108) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:522) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:1110) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:785) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_102]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_102]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.4.jar:8.5.4]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_102]\n</code></pre>\n"}, {"tags": ["java", "eclipse", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473175144, "post_id": 39352380, "comment_id": 66034870, "body": "What build system do you use?"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473175164, "post_id": 39352380, "comment_id": 66034885, "body": "I am using Eclipse&#39;s internal build process."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473175519, "post_id": 39352380, "comment_id": 66035115, "body": "Have you clean-build-project?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473187875, "post_id": 39352380, "comment_id": 66041834, "body": "In your questions, it would be helpful it you told us what you already tried in terms of finding your own answers.  Did you read the help for Eclipse? did you use operating system search tool to find files?  did you google for the answer?  Otherwise evidence is missing, because we do not know if you tried anything at all, the simple things -- and knowing that helps know if we are looking for something complicated, buggy, or unknown."}, {"owner": {"reputation": 848, "user_id": 714104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/322acd8eee1820fde66a9be602718bb1?s=128&d=identicon&r=PG", "display_name": "Dominik", "link": "https://stackoverflow.com/users/714104/dominik"}, "edited": false, "score": 0, "creation_date": 1498131804, "post_id": 39352380, "comment_id": 76379564, "body": "Probably the project does not have the Kotlin nature. This can be added on the project using the &quot;Configure Kotlin&quot; context menu on the project."}], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1473179061, "post_id": 39352686, "comment_id": 66037206, "body": "Thank you. What if I do not use a build system like Maven or Gradle. Can I configure Eclipse&#39;s build process to use the Kotlin compiler and output class files? How do I do that? I posted a separate question here: <a href=\"http://stackoverflow.com/q/39352745/303685\">stackoverflow.com/q/39352745/303685</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473180724, "post_id": 39352686, "comment_id": 66038046, "body": "It should all be done automatically by the Kotlin Eclipse plugin"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473180767, "post_id": 39352686, "comment_id": 66038079, "body": "My point is that the answer is probably the same as for a Java class compiled by Eclipse"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473181591, "post_id": 39352686, "comment_id": 66038547, "body": "I am a beginner so I need some definite steps. But I figured out by some searching that the Kotlin plug-in for Eclipse does not persist class files in a folder external to the one it &quot;secretly hides them in.&quot; I have also experienced many other problems with the plug-in, some of which are -- a broken intellisense basically in all kinds of avatars. It&#39;s pretty much like programming in the old days in a text editor."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473182175, "post_id": 39352686, "comment_id": 66038877, "body": "If so I strongly recommend trying InteliJ. Its Kotlin support is vastly superior (for obvious reasons). Also almost all other things are better / simpler / more automated compared to Eclipse."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473189269, "post_id": 39352686, "comment_id": 66042486, "body": "Thank you. I&#39;d started with IntelliJ Community but it seems like I&#39;ll need the Ultimate Edition to create servlets with that. <a href=\"http://stackoverflow.com/questions/39072303/how-to-create-a-java-servlet-application-in-intellij-idea-community-edition-with\" title=\"how to create a java servlet application in intellij idea community edition with\">stackoverflow.com/questions/39072303/&hellip;</a> I&#39;ll give that a try."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473189531, "post_id": 39352686, "comment_id": 66042601, "body": "I is very suspicious that InteliJ CE can&#39;t work with Java EE. Usually if it doesn&#39;t support a technology it means that specific xml is not auto-correct, that sort of stuff."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473189766, "post_id": 39352686, "comment_id": 66042733, "body": "This chart also seems to indicate that the community edition does not support Java EE. <a href=\"https://www.jetbrains.com/idea/?fromMenu#chooseYourEdition\" rel=\"nofollow noreferrer\">jetbrains.com/idea/?fromMenu#chooseYourEdition</a>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1473175489, "creation_date": 1473175489, "answer_id": 39352686, "question_id": 39352380, "link": "https://stackoverflow.com/questions/39352380/where-are-the-class-files/39352686#39352686", "title": "Where are the .class files?", "body": "<p>Kotlin the language is in the same league as Java, and uses the same infrastructure. The code must be compiled (via a build tool plugin) and packed into a <code>jar</code> to be run later.</p>\n\n<p>For a pure Kotlin project (without Java files) <code>kotlinc</code> works the same way as <code>javac</code>. Depending on your build system (Maven, Gradle) the <code>.class</code> files should be in their default location.</p>\n\n<p>In InteliJ all <code>.class</code> files from Kotlin and Java end up after compilation in the default folder all together. </p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 1, "accepted_answer_id": 39352686, "answer_count": 1, "score": 1, "last_activity_date": 1473175489, "creation_date": 1473174579, "question_id": 39352380, "link": "https://stackoverflow.com/questions/39352380/where-are-the-class-files", "title": "Where are the .class files?", "body": "<p>I am really not sure if I understand what happens when you write Kotlin code. I just wrote some and I see that the <strong>build</strong> folder that Eclipse points to for my project, i.e. the <strong>bin</strong> folder of my project does not have any <code>.class</code> files. It just has the <code>.kt</code> Kotlin source files.</p>\n\n<p>What does that mean? Is this language dynamically compiled? Is it interpreted? How do I set the %CLASSPATH% for my project?</p>\n"}, {"tags": ["eclipse", "apache", "tomcat", "servlets", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1473188678, "post_id": 39351875, "comment_id": 66042239, "body": "This and your two other class path related issues seem very broad &quot;technical support&quot; type questions.  What makes a good question: <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> ... If you understood how your IDE works with web apps and how they deploy class files to a web app, then you would know which part of your project is broken.  You show all the wrong evidence given your error message, so maybe you haven&#39;t taken the time to learn the basics.  Google, ask your coworkers, do your homework, learn the basics before asking questions.  This may seem harsh, there are other sites for interactive help"}], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1475492421, "post_id": 39824922, "comment_id": 66949651, "body": "Thank you. I edited your answer to include the solution from the url you linked to, just in case that link ever goes dead a few years from now and someone else wanders into this problem."}, {"owner": {"reputation": 1783, "user_id": 958160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4CVw.jpg?s=128&g=1", "display_name": "Li Ying", "link": "https://stackoverflow.com/users/958160/li-ying"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1475628197, "post_id": 39824922, "comment_id": 67015532, "body": "Actually, I DID NOT solved this problem. I thought I did, but another error happened.  Please read:  <a href=\"https://discuss.kotlinlang.org/t/can-not-publish-kotlin-class-files-to-tomcat-server/1961/3\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a>  The class files in the [/kotlin_bin] folder contain only the class and method declaration information, but the implementation code are not generated in these class files.  So, these incomplete class files will cause a java.lang.ClassFormatError with the following error message:  Absent Code attribute in method that is not native or abstract in class file xxxx/xxxx/xxxx"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1475648312, "post_id": 39824922, "comment_id": 67020839, "body": "Thank you for the update. I am taking the green checkie off your answer for now just so someone else facing this problem doesn&#39;t think this will solve their problem. Personally, I switched to IntelliJ Ultimate and had a smooth experience. But I agree, the Eclipse plug-in for Kotlin should have better support. <a href=\"https://github.com/Sathyaish/Bookyard/#what-technologies-did-you-use-to-develop-this-application\" rel=\"nofollow noreferrer\">github.com/Sathyaish/Bookyard/&hellip;</a>"}, {"owner": {"reputation": 1783, "user_id": 958160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4CVw.jpg?s=128&g=1", "display_name": "Li Ying", "link": "https://stackoverflow.com/users/958160/li-ying"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1479345513, "post_id": 39824922, "comment_id": 68522262, "body": "Hi friends, I created an issue for this problem:  <a href=\"https://youtrack.jetbrains.com/issue/KT-14838\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-14838</a>"}], "tags": [], "owner": {"reputation": 1783, "user_id": 958160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4CVw.jpg?s=128&g=1", "display_name": "Li Ying", "link": "https://stackoverflow.com/users/958160/li-ying"}, "is_accepted": false, "score": 1, "last_activity_date": 1504519571, "last_edit_date": 1504519571, "creation_date": 1475471575, "answer_id": 39824922, "question_id": 39351875, "link": "https://stackoverflow.com/questions/39351875/apache-tomcat-8-0-unable-to-load-servlet-class-written-in-kotlin-using-eclipse-f/39824922#39824922", "title": "Apache Tomcat 8.0 unable to load servlet class written in Kotlin using Eclipse for Java EE, Mars 2", "body": "<p>==================================================================</p>\n\n<p>EDIT at 2017/09/04:</p>\n\n<p>Hi friends:</p>\n\n<p>I find a workaround. Maybe it can help you.</p>\n\n<p>(1)Create a Kotlin main class, for example:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(\"Hello, world!\")\n}\n</code></pre>\n\n<p>(2)Right click this main class, and select \"Run\"=>\"Kotlin Application\"\nThis will make the Kotlin plugin compile all the Kotlin source files, and generate class files.</p>\n\n<p>(3)Deploy your web app to the App server, but use the outputed class folder instead of the source folders.\nfor example, if the \"output folder\" of your app is \"var/classes\", you can deploy it to the App Server,\nlike this, in the WTP setting file [.settings/org.eclipse.wst.common.component] :</p>\n\n<pre><code>&lt;wb-resource deploy-path=\"/WEB-INF/classes\" source-path=\"/var/classes\"/&gt;\n</code></pre>\n\n<p>also you can set this from the Eclipse \"Web Deployment Assembly\" dialog:\n<a href=\"https://eclipse.org/webtools/releases/3.2.0/NewAndNoteworthy/javaee.php\" rel=\"nofollow noreferrer\">https://eclipse.org/webtools/releases/3.2.0/NewAndNoteworthy/javaee.php</a></p>\n\n<p>Now, Eclipse WTP plugin will deploy the \"var/classes\" folder to the app Server, which include all the class files compiled by the Kotlin plugin</p>\n\n<p>==================================================================</p>\n\n<p>EDIT at 2016/11/17:</p>\n\n<p>Hi friends, I created an issue for this problem:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-14838\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-14838</a></p>\n\n<p>==================================================================</p>\n\n<p>Looks like your kotlin class is not delpoyed to the Tomcat server.</p>\n\n<p>I have the same problem, and still working on it.</p>\n\n<p>Please read this post:\n<a href=\"https://discuss.kotlinlang.org/t/can-not-publish-kotlin-class-files-to-tomcat-server/\" rel=\"nofollow noreferrer\">Can not publish Kotlin class files to Tomcat server</a></p>\n\n<p>I finally solved this problem,\nby adding the following setting into the WTP setting file <strong>.settings/org.eclipse.wst.common.component</strong> :</p>\n\n<pre><code>&lt;wb-resource deploy-path=\"/WEB-INF/classes\" \n             source-path=\"/kotlin_bin\"/&gt;\n</code></pre>\n\n<p>Now the Kotlin class files will be compiled into virtual folder <strong>/kotlin_bin</strong>, and class files in this folder will be deployed into Tomcat Server.</p>\n\n<p>But I think the Kotlin Eclipse plugin should take care of this problem for developers</p>\n\n<p><strong>But new problem happened</strong>.</p>\n\n<p>The class files in the [/kotlin_bin] folder contain only the class and method declaration information, but the implementation code are not generated in these class files.</p>\n\n<p>So, even these class files are deployed into the Tomcat Server, When I try to start the Tomcat Server, these incomplete class files will cause a java.lang.ClassFormatError with the following error message:</p>\n\n<blockquote>\n  <p>Absent Code attribute in method that is not native or abstract in\n  class file xxxx/xxxx/xxxx</p>\n</blockquote>\n\n<p>If I run a console app from my project, the kotlin plugin will compile source files and generate class files, then I can copy these class files to the Tomcat Server manually.\nBut this is very inconvenience because I have to do it over and over again in my development process.</p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1322, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1504519571, "creation_date": 1473173136, "last_edit_date": 1473173698, "question_id": 39351875, "link": "https://stackoverflow.com/questions/39351875/apache-tomcat-8-0-unable-to-load-servlet-class-written-in-kotlin-using-eclipse-f", "title": "Apache Tomcat 8.0 unable to load servlet class written in Kotlin using Eclipse for Java EE, Mars 2", "body": "<p>I am using Eclipse for Java EE, Mars 2. I wrote a servlet application first using Java 8 and Apache Tomcat 8.0.x in this IDE and that runs just fine.</p>\n\n<p>Now, I am trying to port the code to Kotlin. But the Apache Tomcat server, it seems like from the information posted below, is unable to locate and load my class <code>LoginServlet</code>.</p>\n\n<p>I've ported the helper classes and just the one servlet class just now named <code>LoginServlet</code>. I am removing all the rest of the code in this question just to present a bare bones skeleton.</p>\n\n<p>Here is my set up:</p>\n\n<pre><code>package bookyard.server;\n\n// import statements ommitted for brevity\n\nopen class LoginServlet : HttpServlet() {\n\n    override fun doGet(request : HttpServletRequest, response : HttpServletResponse) {\n        val msg: String = \"HTTP GET method not supported.\";\n\n        try {\n            response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, msg);\n        } catch (e: IOException) {\n            e.printStackTrace();\n        }\n    }\n\n    override fun doPost(request : HttpServletRequest, response : HttpServletResponse) {\n        this.doPostInternal(request, response);\n    }\n\n    private fun doPostInternal(request: HttpServletRequest, response: HttpServletResponse) {\n        ...\n    }\n}\n</code></pre>\n\n<p>I first annotated the <code>LoginServlet</code> class with the <code>@WebServlet(\"/login\")</code> annotation but that ran the server just fine but gave me a 404 for the path <strong>/login</strong> and even for the <code>ServletContext</code> path <strong><a href=\"http://localhost:8080/BookyardServer/\" rel=\"nofollow noreferrer\">http://localhost:8080/BookyardServer/</a></strong>.</p>\n\n<p>So, I moved the servlet configuration to the <code>WEB-INF\\web.xml</code> file and it now looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\" id=\"WebApp_ID\" version=\"3.0\"&gt;\n  &lt;display-name&gt;BookyardServer&lt;/display-name&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;bookyard.server.LoginServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/login&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>My project <strong>Build Path</strong> includes references to all the libraries my code uses. A snapshot of it is provided here.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6dHJj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6dHJj.png\" alt=\"enter image description here\"></a></p>\n\n<p>In my <strong>Project Facets</strong> and the <strong>Targeted Runtimes</strong>, I have a reference to the <strong>Apache Tomcat 8.0</strong> runtime.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4D03g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4D03g.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/vCSCa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vCSCa.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I <strong>Debug As -> Debug on Server</strong>, the browser reports the following error:</p>\n\n<blockquote>\n  <p><strong>HTTP Status 500 - Error instantiating servlet class bookyard.server.LoginServlet</strong></p>\n  \n  <p><strong>message</strong> Error instantiating servlet class bookyard.server.LoginServlet</p>\n  \n  <p><strong>description</strong> The server encountered an internal error that prevented it from fulfilling this request.</p>\n  \n  <p><strong>exception</strong>\n  javax.servlet.ServletException: Error instantiating servlet class\n  bookyard.server.LoginServlet\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Unknown Source)</p>\n  \n  <p><strong>root cause</strong> java.lang.ClassNotFoundException:\n  bookyard.server.LoginServlet\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1332)\n    org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1166)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\n    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Unknown Source)</p>\n</blockquote>\n\n<p>I am pretty sure this has something to do with the <strong>%CLASSPATH%</strong> but I am not sure what. I have set the <strong>Apache Tomcat</strong> jar files in the class path. Everything else that my code uses is also in the class path.</p>\n\n<p>I am not sure why it isn't able to load my servlet class. Could you please help?</p>\n"}, {"tags": ["casting", "null", "functional-programming", "kotlin"], "comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 1, "creation_date": 1473202399, "post_id": 39350700, "comment_id": 66047569, "body": "You can use <code>mylist.filterNotNull()[0].xxx</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 6, "last_activity_date": 1473169850, "creation_date": 1473169850, "answer_id": 39350735, "question_id": 39350700, "link": "https://stackoverflow.com/questions/39350700/is-there-a-better-way-for-filter-null-in-a-list/39350735#39350735", "title": "Is there a better way for filter null in a list?", "body": "<p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-not-null.html\"><code>filterNotNull</code></a> like so:</p>\n\n<pre><code>val onlyPresent = myList.filterNotNull()\n</code></pre>\n"}], "owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1473228315, "accepted_answer_id": 39350735, "answer_count": 1, "score": 0, "last_activity_date": 1473169850, "creation_date": 1473169762, "question_id": 39350700, "link": "https://stackoverflow.com/questions/39350700/is-there-a-better-way-for-filter-null-in-a-list", "closed_reason": "Duplicate", "title": "Is there a better way for filter null in a list?", "body": "<p>I do that for filtering list of null value:</p>\n\n<pre><code>val myList: List&lt;Any?&gt; = [...]\nmyList.filter { it != null }.map { it!! }\nmyList.get(0).xxx // don't need to write \"?.\"\n</code></pre>\n\n<p>If I don't add the <code>map</code>, the list don't become <code>List&lt;...&gt;</code>. Is there a more elegant way to do that?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 3, "creation_date": 1473169039, "post_id": 39350353, "comment_id": 66030533, "body": "You&#39;re using <code>String?</code> instead of <code>String</code> as the data type for a lot of the parameters. They aren&#39;t interchangeable. You can make your interface use nullable Strings and it won&#39;t complain about the signature."}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 1, "last_activity_date": 1473169297, "creation_date": 1473169297, "answer_id": 39350525, "question_id": 39350353, "link": "https://stackoverflow.com/questions/39350353/whats-the-correct-syntax-for-overriding-an-interface-member-function-with-a-vis/39350525#39350525", "title": "What&#39;s the correct syntax for overriding an interface member function with a visibility modifier?", "body": "<p>Every overridden method needs to conform to the interface declared parameter nullability. In other words the correct way to implement the interface would be:</p>\n\n<pre><code>class DatabaseAuthenticationManager :  IAuthenticationManager&lt;User&gt; {\n    override fun authenticateUser(userName: String, password: String, appId: String, appSecret: String): OperationResult&lt;User&gt; {\n        ...\n    }\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1473169827, "post_id": 39350597, "comment_id": 66031150, "body": "Thank you. Well spotted. That was an oversight on my part."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1473169903, "post_id": 39350597, "comment_id": 66031214, "body": "@WaterCoolerv2 To be fair, it took me a while to spot it too. Easy mistake!"}], "tags": [], "owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "is_accepted": true, "score": 3, "last_activity_date": 1546687646, "last_edit_date": 1546687646, "creation_date": 1473169509, "answer_id": 39350597, "question_id": 39350353, "link": "https://stackoverflow.com/questions/39350353/whats-the-correct-syntax-for-overriding-an-interface-member-function-with-a-vis/39350597#39350597", "title": "What&#39;s the correct syntax for overriding an interface member function with a visibility modifier?", "body": "<p>Your problem is that you're using nullable Strings when attempting to implement the interface.</p>\n\n<p><em>From <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">Kotlin's documentation about null-safety</a>...</em></p>\n\n<blockquote>\n  <p>In Kotlin, the type system distinguishes between references that can hold null (nullable references) and those that can not (non-null references).</p>\n</blockquote>\n\n<p><code>String?</code> (nullable String) and <code>String</code> are considered to be <strong>different types</strong> by Kotlin. Therefore the compiler thinks that you haven't implemented the method.</p>\n\n<h3>Your options...</h3>\n\n<p>You have 2 options:</p>\n\n<ol>\n<li><p><strong>Update your interface</strong> to use nullable parameters (by adding <code>?</code> to the end of each type).</p></li>\n<li><p><strong>Update your implementation</strong> to use non-nullable parameters (<code>String</code>).</p></li>\n</ol>\n\n<p>I think option 2 is slightly cleaner since it <strong>won't break</strong> any other existing implementations of the interface.</p>\n\n<h3>Example (for option 2):</h3>\n\n<p><em>The interface stays unchanged.</em></p>\n\n<p><em>Here's the new implementation...</em></p>\n\n<pre><code>package bookyard.server.util\n\nimport bookyard.contracts.IAuthenticationManager\n\nclass DatabaseAuthenticationManager : IAuthenticationManager&lt;User&gt; {\n\n    override fun authenticateUser(userName : String,\n                                  password : String,\n                                  appId : String,\n                                  appSecret : String) : OperationResult&lt;User&gt; {\n        // Your implementation...\n    }\n}\n</code></pre>\n\n<p>You can see that all I've done is change each parameter from <code>String?</code> to <code>String</code>.</p>\n\n<h3>Notes:</h3>\n\n<ul>\n<li><p>Classes/fields/interfaces are <strong>public by default</strong>, the <code>public</code> keyword is unnecessary.</p></li>\n<li><p>Kotlin has <strong>semi-colon inference</strong> so you don't need to add semi-colons yourself. There are <em>rare</em> cases where you will actually <em>need</em> to, but the compiler will warn you in advance.</p></li>\n</ul>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "accepted_answer_id": 39350597, "answer_count": 2, "score": 4, "last_activity_date": 1546687646, "creation_date": 1473168804, "question_id": 39350353, "link": "https://stackoverflow.com/questions/39350353/whats-the-correct-syntax-for-overriding-an-interface-member-function-with-a-vis", "title": "What&#39;s the correct syntax for overriding an interface member function with a visibility modifier?", "body": "<p>Neither of the two pages, the one on <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow\">Interfaces</a>, nor the one on <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow\">Visibility Modifiers</a> provides an example of the syntax I am after, so I ask.</p>\n\n<p>I have an interface like so:</p>\n\n<pre><code>package bookyard.contracts;\n\npublic interface IAuthenticationManager&lt;T&gt; {\n    fun authenticateUser(userName: String, password : String,\n                            appId: String, appSecret : String) : OperationResult&lt;T&gt;;\n}\n</code></pre>\n\n<p>And I am writing an implementation for it but neither of the three below listed syntaxes work. Each time, the compiler reports the following error:</p>\n\n<blockquote>\n  <ol>\n  <li><p>'authenticateUser' overrides nothing</p></li>\n  <li><p>Class 'DatabaseAuthenticationManager' must be declared abstract or implement abstract member public abstract fun authenticateUser(userName: String, password: String, appId: String, appSecret: String): OperationResult defined in bookyard.contracts.IAuthenticationManager</p></li>\n  </ol>\n</blockquote>\n\n<pre><code>package bookyard.server.util\n\nimport bookyard.contracts.IAuthenticationManager;\n\npublic class DatabaseAuthenticationManager :  IAuthenticationManager&lt;User&gt; {\n\n    /* override public fun authenticateUser(userName : String?,\n                                password : String?,\n                                appId : String?,\n                                appSecret : String?) : OperationResult&lt;User&gt; {\n    }\n\n    public override fun authenticateUser(userName : String?,\n                                password : String?,\n                                appId : String?,\n                                appSecret : String?) : OperationResult&lt;User&gt; {\n    }\n\n    public fun authenticateUser(userName : String?,\n                                password : String?,\n                                appId : String?,\n                                appSecret : String?) : OperationResult&lt;User&gt; {\n    } */\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 953, "user_id": 514672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7c18ee0746871b60d98156eb8fe79379?s=128&d=identicon&r=PG", "display_name": "Actorclavilis", "link": "https://stackoverflow.com/users/514672/actorclavilis"}, "edited": false, "score": 1, "creation_date": 1473167125, "post_id": 39349700, "comment_id": 66029165, "body": "I believe that the compiler will only prove that <code>foo !=</code> null if it&#39;s within the conditional block. You could try replacing your null check with <code>if (foo != null) { ... }</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1473173273, "post_id": 39349700, "comment_id": 66033633, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\">In Kotlin, what is the idiomatic way to deal with nullable values, referencing or converting them</a>"}], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 514672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7c18ee0746871b60d98156eb8fe79379?s=128&d=identicon&r=PG", "display_name": "Actorclavilis", "link": "https://stackoverflow.com/users/514672/actorclavilis"}, "edited": false, "score": 0, "creation_date": 1473167183, "post_id": 39349756, "comment_id": 66029209, "body": "This will throw <code>NullPointerException</code> if <code>foo.name</code> is null. It seems that OP wants to do nothing in that case, not throw."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473167200, "post_id": 39349756, "comment_id": 66029222, "body": "Thank you. I was putting the double-exclamation mark in the wrong place. I had read about it but was using <code>foo!!.name</code> and it wouldn&#39;t compile and I was loosing hope. Many thanks. 11 more minutes before I can mark this answer."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 953, "user_id": 514672, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7c18ee0746871b60d98156eb8fe79379?s=128&d=identicon&r=PG", "display_name": "Actorclavilis", "link": "https://stackoverflow.com/users/514672/actorclavilis"}, "edited": false, "score": 1, "creation_date": 1473167247, "post_id": 39349756, "comment_id": 66029258, "body": "@Actorclavilis Yes, thank you. That&#39;s the behavior I want. I mean, I know and can guarantee that that won&#39;t happen so that&#39;s the behavior I am after, anyway. I&#39;d read about this operator the NPE-operator, they call it, but wasn&#39;t sure where to put it in the expression."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 36, "last_activity_date": 1473167320, "last_edit_date": 1473167320, "creation_date": 1473167110, "answer_id": 39349756, "question_id": 39349700, "link": "https://stackoverflow.com/questions/39349700/convert-a-nullable-type-to-its-non-nullable-type/39349756#39349756", "title": "Convert a nullable type to its non-nullable type?", "body": "<p>You need double exclamation mark like so:</p>\n\n<pre><code>val bar = makeNewBar(foo.name!!)\n</code></pre>\n\n<p>As documented in <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"noreferrer\">Null Safety section</a>:</p>\n\n<blockquote>\n  <p>The third option is for NPE-lovers. We can write b!!, and this will\n  return a non-null value of b (e.g., a String in our example) or throw\n  an NPE if b is null:</p>\n\n<pre><code>val l = b!!.length \n</code></pre>\n  \n  <p>Thus, if you want an NPE, you can have it, but you have to ask for it explicitly, and it does not appear out of the\n  blue.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 4459, "user_id": 2318632, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/kd7KQ.jpg?s=128&g=1", "display_name": "Sir Codesalot", "link": "https://stackoverflow.com/users/2318632/sir-codesalot"}, "is_accepted": false, "score": 1, "last_activity_date": 1576137991, "creation_date": 1576137991, "answer_id": 59300122, "question_id": 39349700, "link": "https://stackoverflow.com/questions/39349700/convert-a-nullable-type-to-its-non-nullable-type/59300122#59300122", "title": "Convert a nullable type to its non-nullable type?", "body": "<p>You could use an extension:</p>\n\n<pre><code>fun &lt;T&gt; T?.default(default: T): T {\n    return this ?: default\n}\n</code></pre>\n\n<p>Then use it like this:</p>\n\n<pre><code>fun getNonNullString(): String {\n    return getNullableString().default(\"null\")\n}\n</code></pre>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15192, "favorite_count": 2, "accepted_answer_id": 39349756, "answer_count": 2, "score": 30, "last_activity_date": 1576137991, "creation_date": 1473166957, "question_id": 39349700, "link": "https://stackoverflow.com/questions/39349700/convert-a-nullable-type-to-its-non-nullable-type", "title": "Convert a nullable type to its non-nullable type?", "body": "<p>I have a bunch of beans that have nullable properties like so:</p>\n\n<pre><code>package myapp.mybeans;\n\ndata class Foo(val name : String?);\n</code></pre>\n\n<p>And I have a method in the global space like so:</p>\n\n<pre><code>package myapp.global;\n\npublic fun makeNewBar(name : String) : Bar\n{\n  ...\n}\n</code></pre>\n\n<p>And somewhere else, I need to make a <code>Bar</code> from the stuff that's inside <code>Foo</code>. So, I do this:</p>\n\n<pre><code>package myapp.someplaceElse;\n\npublic fun getFoo() : Foo? { }\n...\nval foo : Foo? = getFoo();\n\nif (foo == null) { ... return; }\n\n\n// I know foo isn't null and *I know* that foo.name isn't null\n// but I understand that the compiler doesn't.\n// How do I convert String? to String here? if I do not want\n// to change the definition of the parameters makeNewBar takes?\nval bar : Bar = makeNewBar(foo.name);\n</code></pre>\n\n<p>Also, doing some conversion here with <code>foo.name</code> to cleanse it every time with every little thing, while on the one hand provides me compile-time guarantees and safety it is a big bother most of the time. Is there some short-hand to get around these scenarios?</p>\n"}, {"tags": ["java", "c#", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1473154653, "post_id": 39345248, "comment_id": 66021075, "body": "See <a href=\"http://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections/38002121\" title=\"kotlin and immutable collections\">stackoverflow.com/questions/33727657/&hellip;</a> for thorough overview of Kotlin and collections"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1473170398, "post_id": 39345248, "comment_id": 66031588, "body": "Take a look at this repo <a href=\"https://github.com/Kotlin/kotlinx.collections.immutable\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.collections.immutable</a>"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1473171055, "post_id": 39345248, "comment_id": 66032024, "body": "@IRus Sorry, am I missing something? Those are a bunch of interfaces. Where&#39;s the implementation?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1473171452, "post_id": 39345248, "comment_id": 66032320, "body": "@WaterCoolerv2 inside git submodule."}], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473154617, "post_id": 39345596, "comment_id": 66021040, "body": "Thank you. I understand that I can use the Java collections. I was under the impression that Kotlin standard library provided its own implementations as well."}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 3, "creation_date": 1473154789, "post_id": 39345596, "comment_id": 66021158, "body": "They reused as much as possible of java to have a small standard-library (benefits on android -&gt; dex-count) and to maximize interoperability."}], "tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": true, "score": 5, "last_activity_date": 1473154669, "last_edit_date": 1473154669, "creation_date": 1473154555, "answer_id": 39345596, "question_id": 39345248, "link": "https://stackoverflow.com/questions/39345248/does-kotlin-provide-any-implementations-of-its-collection-interfaces/39345596#39345596", "title": "Does Kotlin provide any implementations of its collection interfaces?", "body": "<p>Kotlin uses the implementations of Java.</p>\n\n<p>So</p>\n\n<pre><code>val list = listOf&lt;T&gt;()\n</code></pre>\n\n<p>is basically </p>\n\n<pre><code>val list: List&lt;T&gt; = ArrayList&lt;T&gt;()\n</code></pre>\n\n<p>These functions are created for convenience</p>\n\n<p>Using Java-Collections is fine too:</p>\n\n<pre><code>val list: List&lt;Book&gt; = ArrayList&lt;Book&gt;()\nval mutableList: MutableList&lt;Book&gt; = ArrayList&lt;Book&gt;()\n</code></pre>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 39345596, "answer_count": 1, "score": 2, "last_activity_date": 1473154669, "creation_date": 1473153614, "last_edit_date": 1473154263, "question_id": 39345248, "link": "https://stackoverflow.com/questions/39345248/does-kotlin-provide-any-implementations-of-its-collection-interfaces", "title": "Does Kotlin provide any implementations of its collection interfaces?", "body": "<p>I see that Kotlin provides a number of interfaces for implementing collections. They are listed on <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html\" rel=\"nofollow\">this page</a>.</p>\n\n<p>I do not see any implementations of these provided by Kotlin.</p>\n\n<p>I do, however, see that there are functions in the global namespace that help us create instances of these collections. For e.g. to create a mutable list of numbers, we may say:</p>\n\n<pre><code>var numbers : MutableList&lt;Int&gt; = mutableListOf(1, 2, 3);\n</code></pre>\n\n<p>To create a read-only view of the list, we may say:</p>\n\n<pre><code>val readOnlyViewOfNumbers : List&lt;Int&gt; = numbers;\n</code></pre>\n\n<p>Or, to create a read-only list of numbers, we may say:</p>\n\n<pre><code>val readOnlyListOfNumbers : List&lt;Int&gt; = listOf(1, 2, 3);\n</code></pre>\n\n<p>To create a list of <code>n</code> items and initialize each element with the value <code>null</code>, we might say:</p>\n\n<pre><code>// Sorry, I forgot the function name for this one. It\n// is not nullableListOf(...)\nval numbers : List&lt;Int&gt; = nullableListOf(n);\n</code></pre>\n\n<p>To create an Array, say, 5 elements with an initializer function for each element of the array, we may say:</p>\n\n<pre><code>val myArray : Array&lt;Int&gt; = Array(5, (i) =&gt; { /* return whatever */ };\n</code></pre>\n\n<p>However, if I'd like to create a <code>List&lt;Book&gt;</code> without any books in it but I'd simply like to initialize it like this (Java or C# code):</p>\n\n<pre><code>List&lt;Book&gt; books = new ArrayList&lt;Book&gt;(); // Java or\nList&lt;Book&gt; books = new List&lt;Book&gt;(); // C#\n</code></pre>\n\n<p>How may I do that in Kotlin?</p>\n\n<p>Are there publicly exposed implementations of its collection interfaces? Do they have default constructors?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "edited": false, "score": 0, "creation_date": 1473148589, "post_id": 39343348, "comment_id": 66017335, "body": "are you notified somehow about new #kotlin questions? :P"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1473164683, "post_id": 39343348, "comment_id": 66027584, "body": "If you know which planet is nullable, but you&#39;re sure it&#39;s not, you can simply write <code>planet!!</code>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 9, "last_activity_date": 1473148737, "last_edit_date": 1473148737, "creation_date": 1473147972, "answer_id": 39343348, "question_id": 39343267, "link": "https://stackoverflow.com/questions/39343267/kotlin-type-inference-failed-type-mismatch-found-array-required-array/39343348#39343348", "title": "Kotlin type inference failed - type mismatch &quot;Found Array&lt;*?&gt;, Required Array&lt;*&gt;?&quot;", "body": "<p>At least one of the planets (<code>earth, mars, saturn, jupiter, uranus, neptune, pluto</code>) is of nullable type <code>Planet?</code> hence the inferred type of <code>arrayListOf(earth, ...)</code> is <code>ArrayList&lt;Planet?&gt;</code>.</p>\n\n<p>Since <code>ArrayList&lt;Planet&gt;</code> is not contravariant on type <code>Planet</code> it cannot be safely to assigned with value <code>ArrayList&lt;Planet?&gt;</code>.</p>\n\n<p>To resolve the problem you can:</p>\n\n<ul>\n<li>make sure all planets are of not nullable type <code>Planet</code></li>\n<li><p>if the above is not feasible change </p>\n\n<pre><code>var planets: ArrayList&lt;Planet&gt;? = null\n</code></pre>\n\n<p>to</p>\n\n<pre><code>var planets = arrayListOf&lt;Planet?&gt;()\n</code></pre></li>\n<li><p>filter out <code>null</code> planets and then assign the result collections to <code>planets</code>:</p>\n\n<pre><code>planets = arrayListOf(*arrayListOf(earth, ...).filterNotNull().toTypedArray())\n</code></pre></li>\n</ul>\n\n<p>Another way to make the compiler happy is to make the <code>planets</code> <a href=\"https://kotlinlang.org/docs/reference/generics.html#variance\">contravariant</a> like so:</p>\n\n<pre><code>var planets: ArrayList&lt;in Planet&gt;? = null\n</code></pre>\n\n<p>PS. Use <a href=\"https://kotlinlang.org/docs/reference/collections.html\">kotlin collection types</a> <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code> and corresponding <code>listOf</code>, <code>setOf</code> instead of Java's counterparts whenever possible.</p>\n"}, {"tags": [], "owner": {"reputation": 641, "user_id": 5479247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AC0-V9DmUv4/AAAAAAAAAAI/AAAAAAAAFc0/7D0Qqwhjgbg/photo.jpg?sz=128", "display_name": "Eugene Krivenja", "link": "https://stackoverflow.com/users/5479247/eugene-krivenja"}, "is_accepted": false, "score": 1, "last_activity_date": 1473151312, "last_edit_date": 1473151312, "creation_date": 1473150625, "answer_id": 39344197, "question_id": 39343267, "link": "https://stackoverflow.com/questions/39343267/kotlin-type-inference-failed-type-mismatch-found-array-required-array/39344197#39344197", "title": "Kotlin type inference failed - type mismatch &quot;Found Array&lt;*?&gt;, Required Array&lt;*&gt;?&quot;", "body": "<p>Your planets in the list have type <code>Planet?</code>, not <code>Planet</code>. Please, check it out.  </p>\n\n<p>To fix there are three ways:<br>\n1. Change planets type to <code>Planet</code>.<br>\n2. Change list definition to  </p>\n\n<pre><code>var planets: ArrayList&lt;Planet?&gt;? = null\n</code></pre>\n\n<p>3. Map existed planets if you sure they are not null  </p>\n\n<pre><code>planets = ArrayList(listOf(earth, ... ).map { it!! })\n// or safer way\nplanets = ArrayList(listOf(earth, ... ).filterNotNull())\n</code></pre>\n\n<p>Number 2 is the worst one, I prefer number 1, if it is impossible, number 3 as workaround. </p>\n"}], "owner": {"reputation": 111, "user_id": 6789561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb83b60415e0ff8c36fd196f0ccf5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Hobbes", "link": "https://stackoverflow.com/users/6789561/simon-hobbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12717, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1473151312, "creation_date": 1473147725, "question_id": 39343267, "link": "https://stackoverflow.com/questions/39343267/kotlin-type-inference-failed-type-mismatch-found-array-required-array", "title": "Kotlin type inference failed - type mismatch &quot;Found Array&lt;*?&gt;, Required Array&lt;*&gt;?&quot;", "body": "<p>I am encountering an issue with Kotlin's type system. I declared the variable as below at class scope:</p>\n\n<pre><code>var planets: ArrayList&lt;Planet&gt;? = null\n</code></pre>\n\n<p>and in the constructor I try to initialize the array but I am encountering a type mismatch error:</p>\n\n<pre><code>planets = arrayListOf(earth, mars, saturn, jupiter, uranus, neptune, pluto)\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>Required: ArrayList&lt;Planet&gt;?\nFound: ArrayList&lt;Planet?&gt;\n</code></pre>\n\n<p>Why am I getting this error and how do I fix it?</p>\n"}, {"tags": ["java", "git", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 4, "creation_date": 1473074990, "post_id": 39329564, "comment_id": 65990621, "body": "There is no way to convert Kotlin to Java that would give you your original source back. If you don&#39;t know how to fix those problems, you&#39;re welcome to ask."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 2, "creation_date": 1473076469, "post_id": 39329564, "comment_id": 65991487, "body": "This is a good reason to commit regularly or at least before you try something as big as this. I think you&#39;ll just have to re-implement everything you didn&#39;t commit."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1473076753, "post_id": 39329564, "comment_id": 65991651, "body": "If theres <i>too</i> much stuff to re-implement then I would just convert it back and refactor it to something acceptable."}, {"owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1473077283, "post_id": 39329564, "comment_id": 65991937, "body": "@BrandonIbbotson Well what exactly do you mean by converting it back as there is no way to convert it back in IntelliJ, only Java&gt;Kotlin"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 2, "creation_date": 1473077430, "post_id": 39329564, "comment_id": 65992020, "body": "@WalidNawfalSabihi <a href=\"http://stackoverflow.com/questions/34957430/how-to-convert-a-kotlin-source-file-to-a-java-source-file\" title=\"how to convert a kotlin source file to a java source file\">stackoverflow.com/questions/34957430/&hellip;</a>"}, {"owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1473077924, "post_id": 39329564, "comment_id": 65992333, "body": "@BrandonIbbotson Decompiling doesn&#39;t always result in clean, close to original code so I guess I will just reimplement what I have lost seeing that it&#39;s going to take much less effort especially if I compare it with Kotlin (I can code in Kotlin I just am not ready to switch the full code base to it from Java)"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1473086973, "post_id": 39329564, "comment_id": 65997531, "body": "Have you tried to use &quot;Undo&quot; in IDEA?"}, {"owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1473091191, "post_id": 39329564, "comment_id": 65999644, "body": "@KirillRakhman Yeah at the time there was no Undo possible"}, {"owner": {"reputation": 17947, "user_id": 4510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a51b77dc8b8d8a2dd5d0f882f2cc736?s=128&d=identicon&r=PG", "display_name": "Bas Leijdekkers", "link": "https://stackoverflow.com/users/4510/bas-leijdekkers"}, "edited": false, "score": 0, "creation_date": 1473095728, "post_id": 39329564, "comment_id": 66001624, "body": "Can&#39;t you use Local history?"}, {"owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "reply_to_user": {"reputation": 17947, "user_id": 4510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a51b77dc8b8d8a2dd5d0f882f2cc736?s=128&d=identicon&r=PG", "display_name": "Bas Leijdekkers", "link": "https://stackoverflow.com/users/4510/bas-leijdekkers"}, "edited": false, "score": 0, "creation_date": 1473150522, "post_id": 39329564, "comment_id": 66018428, "body": "@BasLeijdekkers What&#39;s that?"}, {"owner": {"reputation": 17947, "user_id": 4510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a51b77dc8b8d8a2dd5d0f882f2cc736?s=128&d=identicon&r=PG", "display_name": "Bas Leijdekkers", "link": "https://stackoverflow.com/users/4510/bas-leijdekkers"}, "edited": false, "score": 0, "creation_date": 1473150767, "post_id": 39329564, "comment_id": 66018559, "body": "@WalidNawfalSabihi Right-click on a changed folder in the project view and invoke <code>Local History  | Show History</code>."}, {"owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "edited": false, "score": 0, "creation_date": 1473150860, "post_id": 39329564, "comment_id": 66018613, "body": "I have since restarted the computer and closed IntelliJ IDEA, will the history still work? And is it related to Git or what"}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 9, "last_activity_date": 1473173608, "last_edit_date": 1592644375, "creation_date": 1473173608, "answer_id": 39352057, "question_id": 39329564, "link": "https://stackoverflow.com/questions/39329564/reverting-source-code-to-java-after-intellijs-kotlin-java-conversion/39352057#39352057", "title": "Reverting source code to Java after IntelliJ&#39;s Kotlin &gt; Java conversion", "body": "<p>Intellij has a feature called <a href=\"https://www.jetbrains.com/help/idea/2016.2/local-history.html\" rel=\"noreferrer\">Local History</a> and it can be used to go back in time for things you did not commit to your source control system. This history is retained until you install a new version of IntelliJ IDEA or invalidate caches.  Read more in the Intellij <a href=\"https://www.jetbrains.com/help/idea/2016.2/using-local-history.html\" rel=\"noreferrer\">help for the feature</a>.</p>\n<blockquote>\n<p>Your source code constantly changes as you edit, test, or compile. Any version control system tracks the differences between the committed versions, but the local changes between commits pass unnoticed. Local History is your personal version control system that tracks changes to your source code on your computer and enables you to compare versions and roll changes back, if necessary. Local History is always at your disposal, no steps are required to enable it.</p>\n<p>Local History is independent of external version control systems and works with the directories of your project even when they are not under any VCS control. It applies to any structural artifacts: a project, a directory or package, a file, a class, class members, tags, or selected fragment of text.</p>\n</blockquote>\n"}], "owner": {"reputation": 77, "user_id": 4808116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6b4f9f9efa74eb4029233ae0ab8069?s=128&d=identicon&r=PG&f=1", "display_name": "WalidSabihi", "link": "https://stackoverflow.com/users/4808116/walidsabihi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2315, "favorite_count": 1, "accepted_answer_id": 39352057, "answer_count": 1, "score": 2, "last_activity_date": 1473173608, "creation_date": 1473074665, "question_id": 39329564, "link": "https://stackoverflow.com/questions/39329564/reverting-source-code-to-java-after-intellijs-kotlin-java-conversion", "title": "Reverting source code to Java after IntelliJ&#39;s Kotlin &gt; Java conversion", "body": "<p>So I wanted to try out converting our backend API source code which is written in Java and see how it looks (IIRC there is a preview before converting), but once I did it it automatically started converting all the files in the selected folders, and in the end it asked for code corrections, which I responded with no as I wanted to cancel it and now I am stuck with a broken code base with no other options than: </p>\n\n<ul>\n<li>Reverting to the last git commit and reimplementing all the changes done from my side (I could have prevented it but committing before the conversion but oh well)</li>\n<li>Continue using Kotlin to code in but I have code errors which I don't know how to fix</li>\n</ul>\n\n<p>What I am asking instead is if there's anyway to convert Kotlin back to Java in IntelliJ IDEA? Thank you in advance</p>\n"}, {"tags": ["android", "ios", "swift", "functional-programming", "kotlin"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1473027365, "post_id": 39321735, "comment_id": 65975896, "body": "You can&#39;t tell the compiler the order of methods, but you can (in your case) enforce the type to <code>String</code> and provide an unuseful default value : <code>var savedStateMessage: String = &quot;default stupid value&quot;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user887210"}, "edited": false, "score": 0, "creation_date": 1473032279, "post_id": 39321735, "comment_id": 65976741, "body": "You should probably split this question into separate questions for each relevant programming language/environment. If you don&#39;t then you run into the problem that several answers may be correct even though only one can be accepted."}, {"owner": {"reputation": 1509, "user_id": 375830, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/43aa4c0ca13734c632d1691d859aa5f7?s=128&d=identicon&r=PG", "display_name": "codysehl", "link": "https://stackoverflow.com/users/375830/codysehl"}, "edited": false, "score": 0, "creation_date": 1473253178, "post_id": 39321735, "comment_id": 66069216, "body": "I agree with you, ColGraff. I should have separated this question into two: one for Android and one for iOS. Next time I&#39;ll ask only one, or create both questions."}], "answers": [{"tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": true, "score": 6, "last_activity_date": 1473026358, "creation_date": 1473026358, "answer_id": 39321850, "question_id": 39321735, "link": "https://stackoverflow.com/questions/39321735/lifecycle-methods-in-statically-typed-languages/39321850#39321850", "title": "Lifecycle methods in statically typed languages", "body": "<p>Although this won't answer your actual question, in Kotlin you can use <code>lateinit</code> to tell the compiler that you'll initialize a <code>var</code> at a later point in time:</p>\n\n<p><code>lateinit var savedStateMessage: String</code></p>\n\n<p>You'll get a very specific <code>UninitializedPropertyAccessException</code> if you try to use this variable before initializing it. This feature is useful in use cases like JUnit, where you'd usually initialize variables in <code>@Before</code>-annotated method, and Android <code>Activity</code>s, where you don't have access to the constructor and initialize stuff in <code>onCreate()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1509, "user_id": 375830, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/43aa4c0ca13734c632d1691d859aa5f7?s=128&d=identicon&r=PG", "display_name": "codysehl", "link": "https://stackoverflow.com/users/375830/codysehl"}, "edited": false, "score": 0, "creation_date": 1473253369, "post_id": 39322387, "comment_id": 66069352, "body": "Does the compiler produce any warnings if somewhere I accidentally write <code>myCustomStringConvertable.description = null</code>? Ideally the compiler would yell at me when <i>I</i> set the variable to null, but will not yell at me when the compiler cant verify whether or not it&#39;s been initialized."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user887210"}, "is_accepted": false, "score": 0, "last_activity_date": 1473032168, "creation_date": 1473032168, "answer_id": 39322387, "question_id": 39321735, "link": "https://stackoverflow.com/questions/39321735/lifecycle-methods-in-statically-typed-languages/39322387#39322387", "title": "Lifecycle methods in statically typed languages", "body": "<p>In Swift this is where you would use an implicitly-unwrapped <code>Optional</code>:</p>\n\n<pre><code>class Example: CustomStringConvertible {\n  var savedStateMessage: String! // implicitly-unwrapped Optional&lt;String&gt;\n  var description: String { return savedStateMessage }\n  init() {\n    savedStateMessage = \"Hello World!\"\n  }\n}\n\nprint(Example()) // =&gt; \"Hello World!\\n\"\n</code></pre>\n\n<p>By using the operator <code>!</code> at the end of <code>String</code> in the second line of the example you are promising that the variable will be set before it can be used. This is accomplished in the <code>init</code> method of the example. It's still an <code>Optional</code> but code can treat it as a <code>String</code> since it will be automatically unwrapped before each use. You must take care that the variable is never set to <code>nil</code> when it might be accessed or a runtime exception may be generated.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 1, "last_activity_date": 1473174154, "creation_date": 1473174154, "answer_id": 39352227, "question_id": 39321735, "link": "https://stackoverflow.com/questions/39321735/lifecycle-methods-in-statically-typed-languages/39352227#39352227", "title": "Lifecycle methods in statically typed languages", "body": "<p>As mentioned in another answer, <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"nofollow\"><code>lateinit</code></a> is available as an option to defer initialization to a later point in a <em>guaranteed lifecycle</em>.  An alternative is to use a delegate:</p>\n\n<pre><code>var savedStateMessage: String by Delegates.notNull()\n</code></pre>\n\n<p>Which is equivalent, in that it will report an error if you access the variable before initializing it.</p>\n"}], "owner": {"reputation": 1509, "user_id": 375830, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/43aa4c0ca13734c632d1691d859aa5f7?s=128&d=identicon&r=PG", "display_name": "codysehl", "link": "https://stackoverflow.com/users/375830/codysehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 39321850, "answer_count": 3, "score": 0, "last_activity_date": 1473174154, "creation_date": 1473025311, "question_id": 39321735, "link": "https://stackoverflow.com/questions/39321735/lifecycle-methods-in-statically-typed-languages", "title": "Lifecycle methods in statically typed languages", "body": "<p>In the last year I've become a mobile developer and a functional programming admirer.</p>\n\n<p>In each of the mobile arenas there are components with lifecycle methods that make up the meat of the app. The following will use Android and Kotlin as examples, but the same applies to iOS and Swift.</p>\n\n<p>In Android, there are <code>Activity</code>'s with lifecycle methods like <code>onCreate()</code>. You might also define a function, <code>onButtonClicked()</code>, which will do exactly what the name describes.</p>\n\n<p>For the purposes of the question, let's say there's a variable defined in <code>onCreate()</code> that is used in a button click handler <code>onButtonClickedPrintMessageLength()</code> (<em>This is usually the case - <code>onCreate()</code> is essentially <code>Activity</code>'s setup method</em>).</p>\n\n<p>The example class would look like this:</p>\n\n<pre><code>class ExampleActivity: Activity() {\n    var savedStateMessage: String? = null\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        savedStateMessage = \"Hello World!\"\n    }\n\n    fun onButtonClickedPrintMessageLength() {\n        System.out.println(savedStateMessage?.length)\n    }\n}\n</code></pre>\n\n<p>Notice the declaration of <code>savedStateMessage</code> as a <code>String?</code> (nullable string) and the use of <code>?.</code> (null safe call). These are required because the compiler cant guarantee that <code>onCreate()</code> will be called before <code>onButtonClickedPrintMessageLength()</code>. As developers though, <a href=\"https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle\" rel=\"nofollow\">we know that <code>onCreate</code> will always be called first</a><strong>*</strong> <strong>**</strong>.</p>\n\n<p>My question is <strong>how can I tell the compiler about the guaranteed order of these methods and eliminate the null checking behavior?</strong> </p>\n\n<p>* I suppose it's possible to <code>new</code> up our <code>ExampleActivity</code> and call <code>onButtonClickedPrintMessageLength()</code> directly, thus sidestepping the Android framework and lifecycle methods, but the compiler/JVM would likely run into an error before anything interesting happened.</p>\n\n<p>** The guarantee that <code>onCreate</code> is called first is provided by the Android framework, which is an external source of truth and might break/function differently in the future. Seeing that all Android apps are based on this source of truth though, I believe it's safe to trust.</p>\n"}, {"tags": ["kotlin", "syntax", "grammar"], "comments": [{"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473011912, "post_id": 39318457, "comment_id": 65971822, "body": "@JaysonMinard I&#39;m not exactly a specialist in JavaScript, I&#39;m simply aware that there are some language constructs there which seem fine but don&#39;t actually behave correctly. And the problem with them is that you don&#39;t know that there is a problem until you&#39;ve found a bug in your program, which may or may not happen soon after you make a mistake. I&#39;m pretty sure that none or almost none of JavaScript&#39;s problematic expressions apply here, but that doesn&#39;t mean that Kotlin doesn&#39;t have its own set of such tricky cases. And if I knew what they are, I wouldn&#39;t need to ask, that&#39;s the problem."}], "answers": [{"comments": [{"owner": {"reputation": 4945, "user_id": 923041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bf89042b03247a640ef2b2d07c4e6878?s=128&d=identicon&r=PG", "display_name": "Stephen Friedrich", "link": "https://stackoverflow.com/users/923041/stephen-friedrich"}, "edited": false, "score": 4, "creation_date": 1567435984, "post_id": 39319228, "comment_id": 101954149, "body": "How about this example that indeed &quot;occurred naturally&quot;: <a href=\"https://android.jlelse.eu/why-i-missed-semi-colons-today-e2fb136f58e5\" rel=\"nofollow noreferrer\">android.jlelse.eu/why-i-missed-semi-colons-today-e2fb136f58e&zwnj;&#8203;5</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 108923, "user_id": 20394, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a662b85e473c0c03c90a3a0ca42dff8?s=128&d=identicon&r=PG", "display_name": "Mike Samuel", "link": "https://stackoverflow.com/users/20394/mike-samuel"}, "edited": false, "score": 1, "creation_date": 1574893755, "post_id": 39319228, "comment_id": 104395672, "body": "@MikeSamuel that question is best asked in Kotlin slack under the contributors channel, or in the forums."}, {"owner": {"reputation": 358, "user_id": 1199298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e49cf62e1315c823291ec1c47684e7?s=128&d=identicon&r=PG", "display_name": "glycoslave", "link": "https://stackoverflow.com/users/1199298/glycoslave"}, "edited": false, "score": 1, "creation_date": 1607560379, "post_id": 39319228, "comment_id": 115314743, "body": "i have seen it occur naturally.  i am insisting on using semicolons in a our kotlin code because code quality/correctness/readability should always take precedence over aesthetics.  there is nothing gained by leaving semicolons out."}, {"owner": {"reputation": 2666, "user_id": 4469112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9rSU.jpg?s=128&g=1", "display_name": "Alessio", "link": "https://stackoverflow.com/users/4469112/alessio"}, "reply_to_user": {"reputation": 358, "user_id": 1199298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e49cf62e1315c823291ec1c47684e7?s=128&d=identicon&r=PG", "display_name": "glycoslave", "link": "https://stackoverflow.com/users/1199298/glycoslave"}, "edited": false, "score": 0, "creation_date": 1616427370, "post_id": 39319228, "comment_id": 117992542, "body": "@glycoslave you&#39;re one of the few devs who really understood the key point! I also think not using semicolons is an error, because it forces me (or devs) to go to the compiler level and know the inference rules, which is the very last thing I want to think about when I code"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 29, "last_activity_date": 1618363350, "last_edit_date": 1618363350, "creation_date": 1473007509, "answer_id": 39319228, "question_id": 39318457, "link": "https://stackoverflow.com/questions/39318457/what-are-the-rules-of-semicolon-inference/39319228#39319228", "title": "What are the rules of semicolon inference?", "body": "<p>You only need to specify semicolons in cases where it is ambiguous to the compiler what you are trying to do, and the absence of a semicolon would result in an obvious compiler error.</p>\n<p><strong>The rule is:</strong> Don't worry about this and don't use semicolons at all (other than the two cases below).  The compiler will tell you when you get it wrong, guaranteed.  Even if you accidentally add an extra semicolon the syntax highlighting will show you it is unnecessary with a warning of &quot;redundant semicolon&quot;.</p>\n<p><strong>The two common cases for semi-colons:</strong></p>\n<p>An enum class that has a list of enums and also properties or functions in the enum requires a <code>;</code> after the enum list, for example:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>enum class Things {\n    ONE, TWO;\n\n    fun isOne(): Boolean = this == ONE\n}\n</code></pre>\n<p>And in this case the compiler will tell you directly if you fail to do it correctly:</p>\n<blockquote>\n<p>Error:(y, x) Kotlin: Expecting ';' after the last enum entry or '}' to close enum class body</p>\n</blockquote>\n<p>Otherwise the only other common case is when you are doing two statements on the same line, maybe for brevity sake:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>myThingMap.forEach { val (key, value) = it; println(&quot;mapped $key to $value&quot;) } \n</code></pre>\n<p>Absence of a semicolon in this last example will give you a more mysterious error at the point where it is confused what you are doing.  It is really hard to make some code that would both be valid as two statements separated by a semicolon that are also valid when the semicolon is removed and they become one.</p>\n<p>In the past there were other cases like an initialization block of a class which was more &quot;anonymous&quot; <code>{ ... }</code> before Kotlin 1.0 and later became <code>init { ... }</code> which no longer needed the semicolon because it is much clearer.  These cases no longer remain in the language.</p>\n<p><strong>Confidence in this feature:</strong></p>\n<blockquote>\n<p>Also I have suspicions that there are some cases where this feature may not work correctly and cause problems.</p>\n</blockquote>\n<p>The feature works well, there is no evidence anywhere that there are problems with this feature and years of Kotlin experience have not turned up any known cases where this feature backfires.  If there is a problem with a missing <code>;</code> the compiler will report an error.</p>\n<p>Searching all of my open-source Kotlin, and our internal rather large Kotlin projects, I find no semi-colons other than the cases above -- and very very few in total.  Supporting the notion of &quot;don't use semicolons in Kotlin&quot; as the rule.</p>\n<p>However, it is possible that you can intentionally contrive a case where the compiler doesn't report an error because you created code that is valid and has different meaning with and without a semicolon.  This would look like the following (a modified version of the answer by @Ruckus):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun whatever(msg: String, optionalFun: ()-&gt;Unit = {}): () -&gt; Unit = ...\n\nval doStuff: () -&gt; Unit = when(x) {\n    is String -&gt; {\n        { doStuff(x) }\n    }\n    else -&gt; { \n        whatever(&quot;message&quot;) // absence or presence of semicolon changes behavior\n        { doNothing() }\n    }\n}\n</code></pre>\n<p>In this case doStuff is being assigned the result of the call to  <code>whatever(&quot;message&quot;) { doNothing() }</code> which is a function of type <code>()-&gt;Unit</code>; and if you add a semicolon it is being assigned the function <code>{ doNothing() }</code> which is also of type <code>()-&gt;Unit</code>.  So the code is valid both ways.  <strong>But I have not seen something like this occur naturally</strong> since everything has to line up perfectly.  The <a href=\"https://youtrack.jetbrains.com/issue/KT-8695\" rel=\"nofollow noreferrer\">feature suggested <code>emit</code> keyword or <code>^</code> hat operator</a> would have made this case impossible, and it was considered but dropped before 1.0 due to strongly opposed opinions and time constraints.</p>\n"}, {"comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1473060692, "post_id": 39325679, "comment_id": 65983015, "body": "Note that in this case the compiler will still give an error saying it can&#39;t find a version of println that takes both a String and a function argument, but if the marked line were a function that either took a function as the last argument or had an invoke operation that took a function, it wouldn&#39;t show an error as that is now acceptable code."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 2, "creation_date": 1473068207, "post_id": 39325679, "comment_id": 65986912, "body": "Thanks a lot, that&#39;s precisely the type of errors I was looking for! That&#39;s why I&#39;m usually very cautious when someone says that inference always works correctly. Jayson Minard seems to be a bit too fixated on my mention of JavaScript, and this is a great example of how similar problems manifest themselves in Kotlin, albeit to a much lesser degree."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 1, "creation_date": 1473168992, "post_id": 39325679, "comment_id": 66030492, "body": "@Malcolm the difference is that Kotlin will give you a compile time error in this case as it does in the others.  It does not just let the code run and give unexpected behavior.  This case is actually valid syntax with and without the <code>;</code> if the method accepted a lambda as the last parameter, so the compile catches the ambiguous situation and gives an error.  It is not dangerous.  And that is what I wanted to point out vs. javascript in that it does not introduce danger by having inference of <code>;</code> in Kotlin."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473169577, "post_id": 39325679, "comment_id": 66030955, "body": "@malcom, I&#39;m not fixated on anything you didn&#39;t bring up in your question, and hope you appreciate people who take time to give you comprehensive answers."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473170241, "post_id": 39325679, "comment_id": 66031471, "body": "@JaysonMinard Your answer has a whole section which assumes that I &quot;carry JavaScript experience into Kotlin&quot;. If you look at my profile, you will find that I have <i>zero</i> activity in the JavaScript tag. Also why would I try to reproduce corner cases from one language in another? All I want to know if there are any corner cases with this feature in Kotlin, and I couldn&#39;t care less if there are any similarities with JavaScript. You can skip the &quot;like in JavaScript&quot; in my question, in no way it will change the question&#39;s intent."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473170583, "post_id": 39325679, "comment_id": 66031695, "body": "@malcom other readers and people searching might take the comparison to JavaScript differently than you, and answers here are for the community, not just for the one person asking a question."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473171079, "post_id": 39325679, "comment_id": 66032040, "body": "@JaysonMinard Why do you ask me about &quot;specific cases of semi colon inference that worry [me] (from the JavaScript world)&quot; then? If other people need comparison between JavaScript and Kotlin, they should open another question, that&#39;s out of scope of this one. I&#39;m removing the mention of JavaScript from the question since it creates so much confusion. P.S. It&#39;s Malcolm, not &quot;malcom&quot;."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 0, "creation_date": 1473172265, "post_id": 39325679, "comment_id": 66032897, "body": "@Malcolm I asked that because I was really asking &quot;did you do your own homework&quot;.  I updated my answer based on you edit, thanks."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473172377, "post_id": 39325679, "comment_id": 66032975, "body": "@JaysonMinard Yeah, it&#39;s much more complete now. I&#39;ll accept it in a day or two unless someone comes up with something else."}], "tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": false, "score": 10, "last_activity_date": 1473172191, "last_edit_date": 1473172191, "creation_date": 1473060498, "answer_id": 39325679, "question_id": 39318457, "link": "https://stackoverflow.com/questions/39318457/what-are-the-rules-of-semicolon-inference/39325679#39325679", "title": "What are the rules of semicolon inference?", "body": "<p>I addition to Jayson Minard's answer, I've run into one other weird edge case where a semicolon is needed. If you are in a statement block that returns a function without using the return statement, you need a semicolon. For example:</p>\n\n<pre><code>val doStuff: () -&gt; Unit = when(x) {\n    is String -&gt; {\n        { doStuff(x) }\n    }\n    else -&gt; { \n        println(\"This is the alternate\");  // Semicolon needed here\n        { doNothing() }\n    }\n}\n</code></pre>\n\n<p>Without the semicolon, Kotlin thinks the <code>{ doNothing() }</code> statement is a second argument to <code>println()</code> and the compiler reports an error.</p>\n"}, {"tags": [], "owner": {"reputation": 6413, "user_id": 997251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZqLx3.jpg?s=128&g=1", "display_name": "Florian Loitsch", "link": "https://stackoverflow.com/users/997251/florian-loitsch"}, "is_accepted": false, "score": 8, "last_activity_date": 1484861167, "creation_date": 1484861167, "answer_id": 41751983, "question_id": 39318457, "link": "https://stackoverflow.com/questions/39318457/what-are-the-rules-of-semicolon-inference/41751983#41751983", "title": "What are the rules of semicolon inference?", "body": "<p>Kotlin seems to <em>mostly</em> infer semicolons eagerly. There seem to be exceptions (as shown in Jayson Minard's enum example).</p>\n\n<p>Generally, the type system will catch badly inferred semicolons, but here are some cases where the compiler fails.</p>\n\n<p>If an invocation's arguments are in the next line (including the parenthesis), Kotlin will assume that arguments are simply a new parenthesised expression statement:</p>\n\n<pre><code>fun returnFun() : (x: Int) -&gt; Unit {\n  println(\"foo\")\n  return { x -&gt; println(x) }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    println(\"Hello, world!\")\n    returnFun()\n       (1 + 2)    // The returned function is not called.\n}\n</code></pre>\n\n<p>A more common case could be the following, where we have a return with the expression in the next line. Most of the time the type system would complain that there is no return value, but if the return type is <code>Unit</code>, then all bets are off:</p>\n\n<pre><code>fun voidFun() : Unit {\n    println(\"void\")\n}\n\nfun foo() : Unit {\n    if (1 == 1) return \n    voidFun()  // Not called.\n }\n\nfun bar() : Unit {\n    if (1 == 1)\n        return \n            voidFun()  // Not called.\n }\n</code></pre>\n\n<p>The <code>bar</code> function could potentially happen, if the <code>return voidFun()</code> wouldn't fit on one line. That said, must developers would simply write the call to the function on a separate line.</p>\n"}], "owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9686, "favorite_count": 2, "accepted_answer_id": 39319228, "answer_count": 3, "score": 18, "last_activity_date": 1618363350, "creation_date": 1473002397, "last_edit_date": 1553459140, "question_id": 39318457, "link": "https://stackoverflow.com/questions/39318457/what-are-the-rules-of-semicolon-inference", "title": "What are the rules of semicolon inference?", "body": "<blockquote>\n  <p>Kotlin provides \u201csemicolon inference\u201d: syntactically, subsentences (e.g., statements, declarations etc) are separated by the pseudo-token SEMI, which stands for \u201csemicolon or newline\u201d. In most cases, there\u2019s no need for semicolons in Kotlin code.</p>\n</blockquote>\n\n<p>This is what the <a href=\"https://kotlinlang.org/docs/reference/grammar.html\" rel=\"noreferrer\">grammar</a> page says. This seems to imply that there is a need to specify semicolons in some cases, but it doesn't specify them, and the grammar tree below doesn't exactly make this obvious. Also I have suspicions that there are some cases where this feature may not work correctly and cause problems.</p>\n\n<p>So the question is when should one insert a semicolon and what are the corner cases one needs to be aware of to avoid writing erroneous code?</p>\n"}, {"tags": ["kotlin", "extension-function"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1472952286, "post_id": 39310128, "comment_id": 65958354, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33911457/how-can-one-add-static-methods-to-java-classes-in-kotlin\">How can one add static methods to Java classes in Kotlin</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1472928431, "post_id": 39310228, "comment_id": 65953245, "body": "While this is a good idea, creating an object called <code>System</code> will shadow existing classes like <code>java.lang.System</code>. I tested it out and that was my result. Although I could have been doing it wrong."}, {"owner": {"reputation": 5110, "user_id": 1542319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d8051261a5786e0fed00556f644191?s=128&d=identicon&r=PG", "display_name": "SerCe", "link": "https://stackoverflow.com/users/1542319/serce"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1472929850, "post_id": 39310228, "comment_id": 65953668, "body": "It is not a good idea to mimic <code>java.lang.System</code> (the same package and the same name). It can lead you to problems with classloading, compilation and ide support. AFAIK, it is not possible to create a companion object for java class."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1472930038, "post_id": 39310228, "comment_id": 65953727, "body": "Okay, you should add this info into your answer. It&#39;s quite useful. My question is more about adding static methods to existing classes, rather than just creating &quot;static&quot; methods using objects."}], "tags": [], "owner": {"reputation": 5110, "user_id": 1542319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d8051261a5786e0fed00556f644191?s=128&d=identicon&r=PG", "display_name": "SerCe", "link": "https://stackoverflow.com/users/1542319/serce"}, "is_accepted": false, "score": 1, "last_activity_date": 1472928087, "creation_date": 1472928087, "answer_id": 39310228, "question_id": 39310128, "link": "https://stackoverflow.com/questions/39310128/can-extension-functions-be-called-in-a-static-way/39310228#39310228", "title": "Can extension functions be called in a &quot;static&quot; way?", "body": "<p>You can define extension function for an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow\"><code>object</code></a> and use it from system-wide context. An object will be created only once.</p>\n\n<pre><code>object MyClz\n\nfun MyClz.exit() = System.exit(0)\n\nfun main(args: Array&lt;String&gt;) {\n    MyClz.exit()\n}\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>class MyClz {\n    companion object\n}\n\nfun MyClz.Companion.exit() = System.exit(0)\n\nfun main(args: Array&lt;String&gt;) {\n    MyClz.exit()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 9, "last_activity_date": 1472952268, "last_edit_date": 1495542812, "creation_date": 1472951632, "answer_id": 39312709, "question_id": 39310128, "link": "https://stackoverflow.com/questions/39310128/can-extension-functions-be-called-in-a-static-way/39312709#39312709", "title": "Can extension functions be called in a &quot;static&quot; way?", "body": "<p>You are really asking for \"extension functions for a Class reference\" or \"adding static methods to existing classes\" which was covered by another question here: <a href=\"https://stackoverflow.com/questions/33911457/how-can-one-add-static-methods-to-java-classes-in-kotlin\">How can one add static methods to Java classes in Kotlin</a> which is covered by a feature request <a href=\"https://youtrack.jetbrains.com/issue/KT-11968\" rel=\"nofollow noreferrer\">KT-11968</a> </p>\n\n<p>Extension functions cannot be added to anything that does not have an instance.  A reference to a Class is not an instance and therefore you cannot extend something like <code>java.lang.System</code>.  You can however <a href=\"https://kotlinlang.org/docs/reference/extensions.html#companion-object-extensions\" rel=\"nofollow noreferrer\">extend a companion object</a> of an existing class.  For example:</p>\n\n<pre><code>class LibraryThing {\n    companion object { /* ... */ }\n}\n</code></pre>\n\n<p>Allows you to extend <code>LibraryThing.Companion</code> and therefore calling some new <code>myExtension()</code> method would look like you are extending the Class reference itself, when really you are extending the singleton instance of the companion object:</p>\n\n<pre><code>fun LibraryThing.Companion.myExtension() = \"foo\"\n\nLibraryThing.Companion.myExtension() // results in \"foo\"\nLibraryThing.myExtension() // results in \"foo\"\n</code></pre>\n\n<p>Therefore you might find some Kotlin libraries add empty companion objects just for this case.  Others do not, and for those you are \"out of luck.\"  Since Java does not have companion objects, you cannot do the same for Java either.</p>\n\n<p>The other commonly requested feature is to take an existing Java static method that accepts an instance of a class as the first parameter, and make it behave as an extension function.  This is tracked by issues <a href=\"https://youtrack.jetbrains.com/issue/KT-5261\" rel=\"nofollow noreferrer\">KT-5261</a>, <a href=\"https://youtrack.jetbrains.com/issue/KT-2844\" rel=\"nofollow noreferrer\">KT-2844</a>, <a href=\"https://youtrack.jetbrains.com/issue/KT-732\" rel=\"nofollow noreferrer\">KT-732</a>, <a href=\"https://youtrack.jetbrains.com/issue/KT-3487\" rel=\"nofollow noreferrer\">KT-3487</a> and probably other feature requests.</p>\n"}], "owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 2, "accepted_answer_id": 39312709, "answer_count": 2, "score": 5, "last_activity_date": 1578846323, "creation_date": 1472927405, "last_edit_date": 1578846323, "question_id": 39310128, "link": "https://stackoverflow.com/questions/39310128/can-extension-functions-be-called-in-a-static-way", "title": "Can extension functions be called in a &quot;static&quot; way?", "body": "<p>Is it possible to create an extension function and call it <strong>as if it were static</strong>?</p>\n\n<h3>For Example...</h3>\n\n<pre><code>fun System.sayByeAndExit() {\n    println(\"Goodbye!\")\n    System.exit()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    System.sayByeAndExit() // I'd like to be able to call this\n}\n</code></pre>\n\n<h3>I know that the code sample doesn't work...</h3>\n\n<ul>\n<li><p>I understand that kotlin's extension functions are <strong>resolved statically</strong>, <em>as mentioned in the <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">Kotlin Reference (Extension Functions)</a></em>, but this does not mean they can be called as if they were static functions within a class (in a Java sense).</p></li>\n<li><p>I also understand that this code will not work because there is <strong>no instance</strong> of System to pass into the method that the compiler will generate; therefore it won't compile.</p></li>\n</ul>\n\n<h3>Why would I want this?</h3>\n\n<p>Some of you might be wondering why this behaviour is desirable. I can understand why you would think that is isn't, so here are some reasons:</p>\n\n<ol>\n<li>It has all of the benefits that standard extension functions give.</li>\n<li>An instance of the class <strong>doesn't need to be created</strong> <em>just</em> to access the extra functionality.</li>\n<li>The functions can be accessed from an <strong>application-wide context</strong> (provided the class is visible).</li>\n</ol>\n\n<h3>To summarise...</h3>\n\n<p><em>Does Kotlin have a way to \"hook\" a static function onto a class?</em> I'd love to know.</p>\n"}, {"tags": ["function", "kotlin"], "comments": [{"owner": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 0, "creation_date": 1472876932, "post_id": 39303180, "comment_id": 65940298, "body": "What&#39;s the point to make a static function inheritable???"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 1, "creation_date": 1472877245, "post_id": 39303180, "comment_id": 65940346, "body": "@DanielTran Well it&#39;s not necessarily &quot;static&quot; since it&#39;s Kotlin. The purpose is to create an &quot;alternative operator&quot; to construction, like <code>Child[1, 2, 3]</code> instead of <code>Child(1, 2, 3)</code>"}, {"owner": {"reputation": 946, "user_id": 1446177, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/bIovS.jpg?s=128&g=1", "display_name": "IARI", "link": "https://stackoverflow.com/users/1446177/iari"}, "reply_to_user": {"reputation": 5461, "user_id": 5366891, "user_type": "registered", "profile_image": "https://graph.facebook.com/718933983/picture?type=large", "display_name": "Daniel Tran", "link": "https://stackoverflow.com/users/5366891/daniel-tran"}, "edited": false, "score": 1, "creation_date": 1505820557, "post_id": 39303180, "comment_id": 79560694, "body": "@DanielTran How about for instance enforcing factory methods for child classes?"}], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1472877098, "post_id": 39303219, "comment_id": 65940321, "body": "Is there any way to get around having to define the companion object?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1472878689, "post_id": 39303219, "comment_id": 65940545, "body": "It may be a regular object ;)"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 15, "last_activity_date": 1472876701, "creation_date": 1472876701, "answer_id": 39303219, "question_id": 39303180, "link": "https://stackoverflow.com/questions/39303180/kotlin-how-can-i-create-a-static-inheritable-function/39303219#39303219", "title": "Kotlin: How can I create a &quot;static&quot; inheritable function?", "body": "<p>Since companion objects play by the same rules as any others, it is easy to use normal means of code reuse on them:</p>\n\n<pre><code>open class Example {\n    fun example() {}\n}\n\nclass Parent {\n    companion object : Example()\n}\n\nclass Child {\n    companion object : Example()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Child.example()\n    Parent.example()\n}\n</code></pre>\n\n<p>Alternatively with class delegation you can reuse the implementation from <code>Parent</code> directly:</p>\n\n<pre><code>interface Example {\n    fun example()\n}\n\nclass Parent {\n    companion object : Example {\n        override fun example() {}\n    }\n}\n\nclass Child {\n    companion object : Example by Parent.Companion\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1472925296, "post_id": 39305339, "comment_id": 65952280, "body": "All that you mentioned is right, but child classes can&#39;t use them."}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1472926601, "post_id": 39305339, "comment_id": 65952689, "body": "Did you miss the import of the extension function? Static extension functions should be available in sub-classes when you have it imported"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1472930902, "post_id": 39305339, "comment_id": 65953949, "body": "Sorry, I should have worded that better. I meant that you can&#39;t use them automatically for child classes. As in defining a function <code>example()</code> in the companion object of a parent called <code>Parent</code> will let you do <code>Parent.example()</code>; with a child of <code>Parent</code> called <code>Child</code>, you can&#39;t do <code>Child.example()</code> automatically."}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1473151183, "post_id": 39305339, "comment_id": 66018811, "body": "You are right, its not even working with static extension functions"}], "tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": false, "score": 0, "last_activity_date": 1472894686, "creation_date": 1472894686, "answer_id": 39305339, "question_id": 39303180, "link": "https://stackoverflow.com/questions/39303180/kotlin-how-can-i-create-a-static-inheritable-function/39305339#39305339", "title": "Kotlin: How can I create a &quot;static&quot; inheritable function?", "body": "<blockquote>\n  <p>The purpose is to create an \"alternative operator\" to construction</p>\n</blockquote>\n\n<p>In Java you should use a Factory instead of a static method when used as a \"constructor\".</p>\n\n<p>On the Kotlin side you could use a top-level-function instead of a Factory.</p>\n\n<p>Or if you really want to have a \"static method\" in your class,\nI'd create a companion object and add static extension methods.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 29, "last_activity_date": 1473006809, "last_edit_date": 1495542868, "creation_date": 1472953085, "answer_id": 39312817, "question_id": 39303180, "link": "https://stackoverflow.com/questions/39303180/kotlin-how-can-i-create-a-static-inheritable-function/39312817#39312817", "title": "Kotlin: How can I create a &quot;static&quot; inheritable function?", "body": "<p>What you are asking for does not exist, you appear to be asking:</p>\n\n<blockquote>\n  <p>Can I reference a companion object method of a superclass from a class reference of its descendants</p>\n</blockquote>\n\n<p>or maybe you are asking:</p>\n\n<blockquote>\n  <p>Can I reference a static member of a superclass from a reference of its descendants.</p>\n</blockquote>\n\n<p>The answer for both is <strong>no</strong>.  It is <strong>by design</strong> of Kotlin that this is disallowed, was a conscious decision, was intentional.  If you wish to change this decision you would need to <a href=\"http://kotl.in/issue\" rel=\"noreferrer\">file an issue in YouTrack</a>.  Programmers in Java were <strong>heavily confused</strong> by the inheritance and overriding of static methods and the behavior when called from one reference versus another and how it is statically resolved rather than dynamically. Java 8 team when adding static methods to interfaces realize the confusion this could cause so they took a more Kotlin approach of only allowing it to be called by the interface reference.  To avoid these types of nightmares, the Kotlin team disallowed it.  Just as they disallowed many other confusing aspects of Java.</p>\n\n<p>The other answers (@voddan's for example) are giving you work-arounds to have the same feel of calling syntax by using <a href=\"https://kotlinlang.org/docs/reference/classes.html#companion-objects\" rel=\"noreferrer\">companion objects</a> but you reject those in your comments by saying you want to avoid a companion object, even though your question states you are trying to use them.  So assuming you do not want to use them, the answer is simply <strong>no, can't be done</strong>.  </p>\n\n<p>To get rid of the companion object, you would want to talk about <a href=\"https://stackoverflow.com/a/39312709/3679676\">Can extension functions be called in a \u201cstatic\u201d way?</a> ... which will be disappointing since it is not yet allowed.</p>\n\n<p>Going back to companion objects (sorry, but they are the one path to glory here), you can also just manually delegate the method of the child to the parent:</p>\n\n<pre><code>open class Parent {\n    companion object { // required, sorry, no way around it!\n        fun foo() = /* some cool logic here */\n    }\n}\n\nclass Child: Parent() {\n    companion object {  // required, sorry, no way around it!\n        fun foo() = Parent.foo() \n    }\n}\n</code></pre>\n\n<p>Or as extensions:</p>\n\n<pre><code>open class Parent {\n    companion object {} // required, sorry, no way around it!\n}\n\nclass Child: Parent() {\n    companion object {} // required, sorry, no way around it!\n}\n\nfun Parent.Companion.foo() = /* some cool logic here */\nfun Child.Companion.foo() = Parent.foo()\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13416, "favorite_count": 3, "accepted_answer_id": 39312817, "answer_count": 3, "score": 27, "last_activity_date": 1473006809, "creation_date": 1472876220, "question_id": 39303180, "link": "https://stackoverflow.com/questions/39303180/kotlin-how-can-i-create-a-static-inheritable-function", "title": "Kotlin: How can I create a &quot;static&quot; inheritable function?", "body": "<p>For example, I want to have a function <code>example()</code> on a type <code>Child</code> that extends <code>Parent</code> so that I can use the function on both.</p>\n\n<pre><code>Child.example()\nParent.example()\n</code></pre>\n\n<p>The first \"obvious\" way to do this is through the companion object of <code>Parent</code>, but this doesn't allow <code>example()</code> for <code>Child</code>.</p>\n\n<p>The second way I tried was defining an extension function on <code>Parent.Companion</code>, which is inconvenient because you are forced to define a companion object. It also doesn't allow <code>example()</code> for <code>Child</code>.</p>\n\n<p>Does anybody know how I can do this?</p>\n"}, {"tags": ["android", "android-layout", "material-design", "kotlin", "anko"], "comments": [{"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1473133351, "post_id": 39296436, "comment_id": 66011560, "body": "have you tried to set fitsSystemWindows = true to appBarLayout?"}, {"owner": {"reputation": 3643, "user_id": 4206925, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PhlNi.png?s=128&g=1", "display_name": "MewX", "link": "https://stackoverflow.com/users/4206925/mewx"}, "edited": false, "score": 0, "creation_date": 1484821085, "post_id": 39296436, "comment_id": 70671426, "body": "Exactly the same problem here, I put just a <code>Drawer</code>, the status bar had a white background out there. idk, but with xml it works quite fine."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472840306, "post_id": 39297625, "comment_id": 65931110, "body": "I don&#39;t really think themes are the problem, as I have I&#39;m using the default example proyect &quot;Navigation Drawer Activity&quot; from Android Studio&#39;s new proyect. If I compile the app, with setContentView(R.layout.activity_main), it load&#39;s the xml&#39;s view (the first screenshot I did), and, if instead of that, I set MainActivityUi().setContentView(this), the anko&#39;s view is loaded, and it shows like the second picture I did, so theme seems to be fine"}, {"owner": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472840737, "post_id": 39297625, "comment_id": 65931299, "body": "I&#39;ve edit my question too, thanks for the help anyways, but transparency is working fine with the xml, so the problem has to be anko&#39;s DSL related"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472841721, "post_id": 39297625, "comment_id": 65931792, "body": "nope, that&#39;s not problem with anko. Write the same in java and you would find the same effect. Anko was made to ommit <code>xml</code> files due to increase the app performance"}, {"owner": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472843597, "post_id": 39297625, "comment_id": 65932673, "body": "exactly, that&#39;s the anko point, so how do you explain that with the xml&#39;s layout the transparency is working fine and with the anko&#39;s one isn&#39;t? It should be the same"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472846222, "post_id": 39297625, "comment_id": 65933725, "body": "i don&#39;t see in your code changing status bar color. I only see changing color of toolbar"}, {"owner": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472848784, "post_id": 39297625, "comment_id": 65934779, "body": "Yeah now I understand what are you talking about. Let me explain, my statusbar color is set to transparent in styles, so when you use the xml layout, the statusbar takes the color of the toolbar, but, when I use anko, it doesn&#39;t, and it shows the white, so there must be some problem in my anko layout as the statusbar is taking the color of some element that it&#39;s not the toolbar, and this is what I don&#39;t understand, as my anko&#39;s layout is just the same as the xml&#39;s one"}], "tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 0, "last_activity_date": 1472840385, "last_edit_date": 1472840385, "creation_date": 1472836211, "answer_id": 39297625, "question_id": 39296436, "link": "https://stackoverflow.com/questions/39296436/statusbar-is-not-transparent-but-white/39297625#39297625", "title": "Statusbar is not transparent but white", "body": "<p>You're wrong thinking that the status bar is <code>transparent</code> by default.</p>\n\n<p>According to this image</p>\n\n<p><a href=\"https://i.stack.imgur.com/auSbY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/auSbY.png\" alt=\"enter image description here\"></a></p>\n\n<p>taken from Android Developers Reference. Check: <a href=\"https://developer.android.com/training/material/theme.html\" rel=\"nofollow noreferrer\">https://developer.android.com/training/material/theme.html</a></p>\n\n<p>the status bar color depends on what you have defined in <code>colors.xml</code> or <code>styles.xml</code> in <code>values</code> folder as <code>colorPrimaryDark</code>, so it's not transparent.</p>\n\n<p>Your problem is not <code>white</code> color in status bar which is correct for transparency, but not enough knowledge of using themes in Android applications. </p>\n\n<p><strong>EDIT:</strong> Changing status bar color (Java):</p>\n\n<pre><code>Window window = activity.getWindow();\n\n// clear FLAG_TRANSLUCENT_STATUS flag:\nwindow.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);\n\n// add FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS flag to the window\nwindow.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\n\n// finally change the color\nwindow.setStatusBarColor(activity.getResources().getColor(R.color.my_statusbar_color));\n</code></pre>\n\n<p>or </p>\n\n<pre><code> public void setStatusBarColor(View statusBar,int color){\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n           Window w = getWindow();\n           w.setFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS,WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);\n           //status bar height\n           int actionBarHeight = getActionBarHeight();\n           int statusBarHeight = getStatusBarHeight();\n           //action bar height\n           statusBar.getLayoutParams().height = actionBarHeight + statusBarHeight;\n           statusBar.setBackgroundColor(color);\n     }\n}\n</code></pre>\n\n<p>Hope it will help</p>\n"}, {"comments": [{"owner": {"reputation": 1487, "user_id": 3901086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76b9b8411c49f87fa9837212d2eebe4?s=128&d=identicon&r=PG&f=1", "display_name": "Shadab K", "link": "https://stackoverflow.com/users/3901086/shadab-k"}, "reply_to_user": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "edited": false, "score": 0, "creation_date": 1472843393, "post_id": 39298146, "comment_id": 65932590, "body": "See the edited answer for Kotlin plugin sample for status bar translucent issue."}], "tags": [], "owner": {"reputation": 1487, "user_id": 3901086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76b9b8411c49f87fa9837212d2eebe4?s=128&d=identicon&r=PG&f=1", "display_name": "Shadab K", "link": "https://stackoverflow.com/users/3901086/shadab-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1472843339, "last_edit_date": 1472843339, "creation_date": 1472838444, "answer_id": 39298146, "question_id": 39296436, "link": "https://stackoverflow.com/questions/39296436/statusbar-is-not-transparent-but-white/39298146#39298146", "title": "Statusbar is not transparent but white", "body": "<p>It is not your statusbar color issue. <br/>Correct me if I am wrong, I believe you are using the <strong>Cyanogenmod OS 13.0 edition</strong> by the looks of your battery symbol. Switch it back to the default theme in your themes section. Then report back if the issue still persists with your <code>colors.xml</code> file.</p>\n\n<p><br/>\nRefer this link here for your Kotlin translucent status bar issue. \n<br/>\n<a href=\"https://github.com/fython/MaterialStatusBarCompat\" rel=\"nofollow\">https://github.com/fython/MaterialStatusBarCompat</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5603269, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5e12V2k-XeU/AAAAAAAAAAI/AAAAAAAAAHY/LTjRBRorazc/photo.jpg?sz=128", "display_name": "manhong2112", "link": "https://stackoverflow.com/users/5603269/manhong2112"}, "is_accepted": false, "score": 2, "last_activity_date": 1606998136, "last_edit_date": 1606998136, "creation_date": 1489330450, "answer_id": 42748877, "question_id": 39296436, "link": "https://stackoverflow.com/questions/39296436/statusbar-is-not-transparent-but-white/42748877#42748877", "title": "Statusbar is not transparent but white", "body": "<p>Try to do</p>\n<p><code>window.setFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS,  WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS)</code></p>\n<p>inside onCreate()</p>\n<p>it worked for me</p>\n<p><a href=\"https://stackoverflow.com/questions/27856603/lollipop-draw-behind-statusbar-with-its-color-set-to-transparent\">Reference</a></p>\n<p>EDIT:\nAlso My Code</p>\n<pre><code>drawerLayout {\n  lparams(width = matchParent, height = matchParent)\n\n  coordinatorLayout {\n     setPadding(0, dip(24), 0, 0)\n\n     appBarLayout {\n        toolbar {\n           backgroundColor = primaryColor\n           setTitleTextColor(primaryColorText)\n        }.lparams(width = matchParent, height = dip(toolbar_size))\n\n     }.lparams(width = matchParent, height = dip(toolbar_size))\n\n  }.lparams(width = matchParent, height = matchParent)\n\n  navigationView {\n\n  }.lparams(width = dip(302), height = matchParent) {\n     gravity = Gravity.START\n  }\n}\n</code></pre>\n<p>EDIT 2:\nBy looking at the <a href=\"https://android.googlesource.com/platform/frameworks/support/+/refs/heads/androidx-activity-release/drawerlayout/src/main/java/androidx/drawerlayout/widget/DrawerLayout.java#363\" rel=\"nofollow noreferrer\">source code of androidx</a>, they add some code to handle &quot;fitsSystemWindows&quot;. We can copy and paste to archive the same effect. Although Anko is dead, it still useful to create Drawerlayout programmatically (and with any other DSL library)</p>\n<pre><code>if (ViewCompat.getFitsSystemWindows(this)) {\n    if (Build.VERSION.SDK_INT &gt;= 21) {\n        setOnApplyWindowInsetsListener(new View.OnApplyWindowInsetsListener() {\n            @Override\n            public WindowInsets onApplyWindowInsets(View view, WindowInsets insets) {\n                final DrawerLayout drawerLayout = (DrawerLayout) view;\n                drawerLayout.setChildInsets(insets, insets.getSystemWindowInsetTop() &gt; 0);\n                return insets.consumeSystemWindowInsets();\n            }\n        });\n        setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);\n        final TypedArray a = context.obtainStyledAttributes(THEME_ATTRS);\n        try {\n            mStatusBarBackground = a.getDrawable(0);\n        } finally {\n            a.recycle();\n        }\n    } else {\n        mStatusBarBackground = null;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e392359e178d355d6cdfcc1bdae6c4?s=128&d=identicon&r=PG&f=1", "display_name": "yaymalaga", "link": "https://stackoverflow.com/users/6788330/yaymalaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1288, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1606998136, "creation_date": 1472831617, "last_edit_date": 1472841520, "question_id": 39296436, "link": "https://stackoverflow.com/questions/39296436/statusbar-is-not-transparent-but-white", "title": "Statusbar is not transparent but white", "body": "<p>To test kotlin with anko DSL I decided to start a new proyect in last android studio ide (2.1.3), using kotlin plugin (1.0.3) and latest anko library (0.9)</p>\n\n<p>I used the default proyect Navigation Drawer Activity, so I just had to convert the main xml to anko.</p>\n\n<p>This is the xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.v4.widget.DrawerLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/drawer_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:openDrawer=\"start\"&gt;\n\n    &lt;android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" &gt;\n\n        &lt;android.support.design.widget.AppBarLayout\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"match_parent\"\n            android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                android:background=\"?attr/colorPrimary\"\n                app:popupTheme=\"@style/AppTheme.PopupOverlay\" /&gt;\n\n        &lt;/android.support.design.widget.AppBarLayout&gt;\n\n        &lt;RelativeLayout\n            xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            xmlns:tools=\"http://schemas.android.com/tools\"\n            xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n            android:paddingRight=\"@dimen/activity_horizontal_margin\"\n            android:paddingTop=\"@dimen/activity_vertical_margin\"\n            android:paddingBottom=\"@dimen/activity_vertical_margin\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" &gt;\n\n            &lt;TextView\n                android:text=\"Hello World!\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\" /&gt;\n\n        &lt;/RelativeLayout&gt;\n\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\n\n    &lt;android.support.design.widget.NavigationView\n        android:id=\"@+id/nav_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        android:fitsSystemWindows=\"true\"\n        app:headerLayout=\"@layout/nav_header_main\"\n        app:menu=\"@menu/activity_main_drawer\" /&gt;\n\n&lt;/android.support.v4.widget.DrawerLayout&gt;\n</code></pre>\n\n<p>And it is working perfectly, as you can see here:\n<a href=\"https://i.stack.imgur.com/cT0L5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cT0L5.png\" alt=\"[xml]\"></a></p>\n\n<p>With anko, I tried to copy every detail from the xml, getting this code:</p>\n\n<pre><code>class MainActivityUi: AnkoComponent&lt;MainActivity&gt; {\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n\n        drawerLayout {\n            id = R.id.drawer_layout\n            fitsSystemWindows = true\n\n            coordinatorLayout {\n\n                appBarLayout(R.style.AppTheme_AppBarOverlay) {\n\n                    toolbar {\n                        id = R.id.toolbar\n                        backgroundColor = colorAttr(R.attr.colorPrimary)\n                        popupTheme = R.style.AppTheme_PopupOverlay\n                    }.lparams(height=dimenAttr(R.attr.actionBarSize),width=matchParent)\n\n                }.lparams(width=matchParent)\n\n                relativeLayout {\n                    padding = dip(16)\n\n                    textView(\"Hello World!\")\n\n                }.lparams(height=matchParent,width=matchParent) {\n                   behavior = AppBarLayout.ScrollingViewBehavior()\n                }\n\n            }.lparams(height=matchParent,width=matchParent)\n\n            navigationView {\n                id = R.id.nav_view\n                inflateHeaderView(R.layout.nav_header_main)\n                inflateMenu(R.menu.activity_main_drawer)\n\n            }.lparams(height=matchParent) {\n                gravity = Gravity.START\n                fitsSystemWindows = true\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And instead, I'm getting this white statusbar: <a href=\"https://i.stack.imgur.com/sKWfb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sKWfb.png\" alt=\"anko\"></a></p>\n\n<p>The only changes I did was in the MainActivity change the setContentView(R.layout.activity_main), to MainActivityUi.setContentView(this).</p>\n\n<p>So, my question is, why is this happening when they are the same views and layouts? and how can I fix that?</p>\n\n<p>EDIT: I'm using the default proyect that it's created when in Android Studio you choose new proyect, and then you choose DrawerNavigationActivity. If in setContentView I choose to show the xml's view, the statusbar is blue (first screenshot), but if I choose to show the anko's view I get the white statusbar.</p>\n\n<p>In both cases, I'm using same themes, colors, etc, and when using the xml layout, everything is working perfectly, so it must be an anko's problem</p>\n"}, {"tags": ["mockito", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 7, "last_activity_date": 1472752808, "last_edit_date": 1472752808, "creation_date": 1472752151, "answer_id": 39277928, "question_id": 39276289, "link": "https://stackoverflow.com/questions/39276289/is-it-not-possible-to-set-expectations-on-a-lazy-property/39277928#39277928", "title": "Is it not possible to set expectations on a lazy property?", "body": "<p>In your example, <code>AA.bb</code> is <code>final</code>. <code>final</code>/<code>private</code>/<code>equals()</code>/<code>hashCode()</code> methods cannot be stubbed/verified by Mockito. You need to mark <code>bb</code> as <code>open</code>:</p>\n\n<pre><code>open class AA(){\n    open val bb by lazy { \"cc\" }\n}\n</code></pre>\n\n<p>You might also consider using <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"noreferrer\">nhaarman/mockito-kotlin: Using Mockito with Kotlin</a>. e.g.:</p>\n\n<pre><code>class GarbTest {\n    @Test\n    fun xx() {\n        val aa = mock&lt;AA&gt;() {\n            on { bb } doReturn \"zz\"\n        }\n    }\n\n    open class AA() {\n        val bb: String = \"cc\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 39277928, "answer_count": 1, "score": 5, "last_activity_date": 1472752808, "creation_date": 1472746112, "question_id": 39276289, "link": "https://stackoverflow.com/questions/39276289/is-it-not-possible-to-set-expectations-on-a-lazy-property", "title": "Is it not possible to set expectations on a lazy property?", "body": "<p>The following test yields a <code>NullPointerException</code>. Is it not possible to set expectations on a lazy property?</p>\n\n<pre><code>class GarbTest {\n    @Test\n    fun xx(){\n        val aa = Mockito.mock(AA::class.java)\n        Mockito.`when`(aa.bb).thenReturn(\"zz\")\n    }\n\n    open class AA(){\n        val bb by lazy { \"cc\" }\n    }\n}\n</code></pre>\n"}, {"tags": ["dependency-injection", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1472741688, "post_id": 39273902, "comment_id": 65884289, "body": "Also take a look at different ways to inject beans in Kotlin with Spring: <a href=\"http://stackoverflow.com/questions/35479631/how-to-use-spring-annotations-like-autowired-in-kotlin/35480801#35480801\" title=\"how to use spring annotations like autowired in kotlin\">stackoverflow.com/questions/35479631/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1472746060, "post_id": 39274393, "comment_id": 65887219, "body": "For the sake of clarity, if the OP is using xml-free configuration (e.g. as in Spring Boot), then that component scan can be declared in annotations as well and there won&#39;t be any need to use application context directly to get any beans. That&#39;d be automatically done by Spring."}, {"owner": {"reputation": 924, "user_id": 447360, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xB4RF.jpg?s=128&g=1", "display_name": "diogocarmo", "link": "https://stackoverflow.com/users/447360/diogocarmo"}, "edited": false, "score": 0, "creation_date": 1472757715, "post_id": 39274393, "comment_id": 65893234, "body": "I&#39;m using Spring Boot, so I don&#39;t have to declare <code>@ComponentScan</code>? Do I have to do both steps?"}, {"owner": {"reputation": 19277, "user_id": 383087, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/J4W5G.jpg?s=128&g=1", "display_name": "Evgeni Dimitrov", "link": "https://stackoverflow.com/users/383087/evgeni-dimitrov"}, "reply_to_user": {"reputation": 924, "user_id": 447360, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xB4RF.jpg?s=128&g=1", "display_name": "diogocarmo", "link": "https://stackoverflow.com/users/447360/diogocarmo"}, "edited": false, "score": 0, "creation_date": 1472798314, "post_id": 39274393, "comment_id": 65905665, "body": "@dccarmo If you have <code>@SpringBootApplication</code> - it already inherits <code>@ComponentScan</code>"}, {"owner": {"reputation": 924, "user_id": 447360, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xB4RF.jpg?s=128&g=1", "display_name": "diogocarmo", "link": "https://stackoverflow.com/users/447360/diogocarmo"}, "edited": false, "score": 0, "creation_date": 1472822922, "post_id": 39274393, "comment_id": 65920914, "body": "Yeah, you&#39;re correct. I found my issue and created my own answer here. Thank you for the detailed explanation!"}], "tags": [], "owner": {"reputation": 19277, "user_id": 383087, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/J4W5G.jpg?s=128&g=1", "display_name": "Evgeni Dimitrov", "link": "https://stackoverflow.com/users/383087/evgeni-dimitrov"}, "is_accepted": false, "score": 7, "last_activity_date": 1472754375, "last_edit_date": 1472754375, "creation_date": 1472740405, "answer_id": 39274393, "question_id": 39273902, "link": "https://stackoverflow.com/questions/39273902/how-to-make-autowired-work-in-a-regular-class/39274393#39274393", "title": "How to make @Autowired work in a regular class?", "body": "<p>Just adding <code>@Component</code> to the class is not enough.</p>\n\n<p>1) When you use <code>@Component</code> you have to make sure that the class is scanned by a component scan. It depends on how you bootstrap your applciation, but you can use <code>&lt;context:component-scan base-package=\"com.myCompany.myProject\" /&gt;</code> for XML config or <code>@ComponentScan</code> for java configuration.</p>\n\n<p>If you're using Spring boot - you don't need to declare  <code>@ComponentScan</code> yourself, because <code>@SpringBootApplication</code> inherits it and by default it scans all the classes in the current package and all it's sub packages. </p>\n\n<p>2) You have to get the bean from the spring context. Creating an object with <code>new</code> will not work.</p>\n\n<p>Basically there are two ways to get a bean from the application context:</p>\n\n<ul>\n<li>If you have an access to the ApplicationContext object then you can do something like this:</li>\n</ul>\n\n<p><code>ApplicationContext ctx = ...;\n MyBean mb = ctx.getBean(MyBean.class);//getting by type</code></p>\n\n<ul>\n<li>Any spring bean that's declared in the context can access the other beans using dependency injection (<code>@Autowired</code>)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 679, "user_id": 3477266, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c347c86dc88117c3f7d9d3e568f80cd?s=128&d=identicon&r=PG&f=1", "display_name": "luislhl", "link": "https://stackoverflow.com/users/3477266/luislhl"}, "edited": false, "score": 1, "creation_date": 1563285482, "post_id": 39280943, "comment_id": 100643512, "body": "This is what I needed, after going through dozens of tutorials and discussions. It seems like everybody assumes this is somewhat obvious."}], "tags": [], "owner": {"reputation": 924, "user_id": 447360, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xB4RF.jpg?s=128&g=1", "display_name": "diogocarmo", "link": "https://stackoverflow.com/users/447360/diogocarmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1472764413, "creation_date": 1472764413, "answer_id": 39280943, "question_id": 39273902, "link": "https://stackoverflow.com/questions/39273902/how-to-make-autowired-work-in-a-regular-class/39280943#39280943", "title": "How to make @Autowired work in a regular class?", "body": "<p>So I'm very new to Spring and was trying to call <code>FooController</code> by creating a instance of it through <code>new</code> instead of <code>@Autowire</code>ing everywhere. When I added <code>FooController</code> as a dependency of the class it was being called from, it worked.</p>\n"}], "owner": {"reputation": 924, "user_id": 447360, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xB4RF.jpg?s=128&g=1", "display_name": "diogocarmo", "link": "https://stackoverflow.com/users/447360/diogocarmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4371, "favorite_count": 0, "accepted_answer_id": 39280943, "answer_count": 2, "score": 3, "last_activity_date": 1472764413, "creation_date": 1472739201, "question_id": 39273902, "link": "https://stackoverflow.com/questions/39273902/how-to-make-autowired-work-in-a-regular-class", "title": "How to make @Autowired work in a regular class?", "body": "<p>Here's what I've got:</p>\n\n<pre><code>@Component\nclass FooController {\n\n    fun createFoo() {\n        val foo = FooEntity()\n        foo.name = \"Diogo\"\n\n        fooRepository.save(foo)\n    }\n\n    @Autowired\n    internal lateinit var fooRepository: FooRepository\n\n}\n</code></pre>\n\n<p>When trying to call <code>createFoo()</code>, I get the following error:</p>\n\n<p><code>kotlin.UninitializedPropertyAccessException: lateinit property fooRepository has not been initialized</code></p>\n\n<p>I thought that adding a <code>@Component</code> at the top would make my class discoverable by Spring and hence make <code>@Autowired</code> work, but maybe I got it wrong?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 8, "creation_date": 1472739189, "post_id": 39273672, "comment_id": 65882414, "body": "Alternatively you can use <code>with</code>: <code>with(startEndDate(200137)) { start = first; end = second }</code>."}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1506344228, "post_id": 39273672, "comment_id": 79768972, "body": "@mfulton26 : can you elaborate <code>with</code>? how can we use with here as alternative?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "edited": false, "score": 1, "creation_date": 1506369840, "post_id": 39273672, "comment_id": 79784417, "body": "@Kushal, if you have some variables that you assigned via destructing and want to reassign them then you can use <code>with</code> to more easily reassign them. e.g. <code>with(startEndDate(200137)) { start = first; end = second }</code> instead of <code>var tmpDate = startEndDate(200137); start = tmpDate.first; end = tmpDate.second</code>, <code>var tmpDate = startEndDate(200137); start = tmpDate.startDate; end = tmpDate.endDate</code>, etc. (depending on the return type of <code>startEndDate</code>)."}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1506519407, "post_id": 39273672, "comment_id": 79854302, "body": "@mfulton26 : Thanks a lot"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 12, "last_activity_date": 1472739266, "last_edit_date": 1472739266, "creation_date": 1472738636, "answer_id": 39273672, "question_id": 39273283, "link": "https://stackoverflow.com/questions/39273283/reassigning-variables-via-destructuring/39273672#39273672", "title": "Reassigning Variables via Destructuring", "body": "<p>From the language perspective, the variables declared in destructuring declaration are just separate independent variables, and at the moment Kotlin doesn't provide a way to assign multiple variables in a single statement.</p>\n\n<p>You can only destructure your expression again and assign the variables one by one:</p>\n\n<pre><code>var (start, end) = startEndDate(198502)\n\nval (newStart, newEnd) = startEndDate(200137)\nstart = newStart\nend = newEnd\n</code></pre>\n\n<hr>\n\n<p>If you need to show that these two variables have have some special meaning and should be assigned together, you can declare a local function that reassigns them like this:</p>\n\n<pre><code>var (start, end) = startEndDate(198502)\nfun setStartEnd(pair: Pair&lt;SomeType, SomeType&gt;) { start = pair.first; end = pair.second }\n\nsetStartEnd(startEndDate(200137))\n</code></pre>\n"}], "owner": {"reputation": 8470, "user_id": 1245622, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/V7rHB.jpg?s=128&g=1", "display_name": "linqu", "link": "https://stackoverflow.com/users/1245622/linqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 1, "accepted_answer_id": 39273672, "answer_count": 1, "score": 15, "last_activity_date": 1472739266, "creation_date": 1472737613, "question_id": 39273283, "link": "https://stackoverflow.com/questions/39273283/reassigning-variables-via-destructuring", "title": "Reassigning Variables via Destructuring", "body": "<p>I love Kotlin's destructuring features, they help me to declutter code and focus on the essential.</p>\n\n<p>I encountered a case for which I could not figure out the correct syntax, how can I reassign variables via destructing?</p>\n\n<pre><code>var (start, end) = startEndDate(198502)\n\n// intellij neither accept this ...\nstart, end = startEndDate(200137)\n\n// ... nor this\n(start, end) = startEndDate(200137)\n</code></pre>\n"}]