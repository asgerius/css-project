[{"tags": ["android", "android-service", "kotlin", "android-service-binding"], "comments": [{"owner": {"reputation": 9097, "user_id": 44816, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/aOoXk.jpg?s=128&g=1", "display_name": "Enrico", "link": "https://stackoverflow.com/users/44816/enrico"}, "edited": false, "score": 4, "creation_date": 1469064443, "post_id": 38492427, "comment_id": 64387816, "body": "What version of kotlin are you using? Using 1.0.3, when I converted a service the method signature was <code>override fun onBind(intent: Intent): IBinder?</code> and generating the override in Android Studio gave me <code>override fun onBind(intent: Intent?): IBinder</code> but I was able to change that to <code>IBinder?</code> without issue"}], "answers": [{"tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 19, "last_activity_date": 1534356414, "last_edit_date": 1534356414, "creation_date": 1469087010, "answer_id": 38498024, "question_id": 38492427, "link": "https://stackoverflow.com/questions/38492427/creating-unbound-service-in-kotlin/38498024#38498024", "title": "Creating unbound service in Kotlin", "body": "<p>As Enrico mentioned you can change a type of <code>IBinder</code> to <code>IBinder?</code> and it will be still matching the interface.</p>\n\n<p>An example is below:</p>\n\n<pre><code>override fun onBind(intent: Intent): IBinder? {\n   return null\n}\n</code></pre>\n\n<p>In general, be careful when using Android Studio to override Android methods. The real problem comes when it generates non-null type when the system actually can return a null reference. It causes runtime kotlin exceptions you really don't expect.</p>\n\n<p>If I remember correctly I had a lot of issues when overloading <code>Fragment</code> class and methods related to <code>View</code> creation.</p>\n"}], "owner": {"reputation": 404, "user_id": 6547247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a903a15473a3b590d0922ad4c16e0c3?s=128&d=identicon&r=PG&f=1", "display_name": "frozzyk", "link": "https://stackoverflow.com/users/6547247/frozzyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2569, "favorite_count": 1, "accepted_answer_id": 38498024, "answer_count": 1, "score": 13, "last_activity_date": 1534356414, "creation_date": 1469057020, "last_edit_date": 1508695646, "question_id": 38492427, "link": "https://stackoverflow.com/questions/38492427/creating-unbound-service-in-kotlin", "title": "Creating unbound service in Kotlin", "body": "<p>I'm trying to create a simple unbound service in kotlin, but I can't. When I override <code>onBind()</code> method in Java I can return <code>null</code>, but in kotlin it says I'm only allowed to return <code>IBinder</code> and not <code>IBinder?</code>, that means it can't be <code>null</code>. Any ideas how to fix that except rewriting MyService class into Java? </p>\n\n<p>[SOLVED] Thank you, guys! I can realy change <code>IBinder</code> to <code>IBinder?</code>. It works!!</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 15, "creation_date": 1469087572, "post_id": 38492103, "comment_id": 64396258, "body": "Please consider changing the structure of your code so that negative values are converted to 0 when the class is instantiated, and not in a getter. If you override the getter as described in the answer below, all other generated methods such as equals(), toString() and component access will still use the original negative value, which will likely lead to surprising behavior."}], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 3304280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/00ff2ad918b67d736a7aa3f2a97bc882?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/3304280/cheng"}, "edited": false, "score": 2, "creation_date": 1530626567, "post_id": 38492283, "comment_id": 89296482, "body": "I got an error on IDE, it says &quot;Initializer is not allowed here since this property has no backing field&quot;"}], "tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": false, "score": 33, "last_activity_date": 1469055958, "creation_date": 1469055958, "answer_id": 38492283, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/38492283#38492283", "title": "Override getter for Kotlin data class", "body": "<p>You could try something like this:</p>\n\n<pre><code>data class Test(private val _value: Int) {\n  val value = _value\n    get(): Int {\n      return if (field &lt; 0) 0 else field\n    }\n}\n\nassert(1 == Test(1).value)\nassert(0 == Test(0).value)\nassert(0 == Test(-1).value)\n\nassert(1 == Test(1)._value) // Fail because _value is private\nassert(0 == Test(0)._value) // Fail because _value is private\nassert(0 == Test(-1)._value) // Fail because _value is private\n</code></pre>\n\n<ul>\n<li><p>In a data class you must to mark the primary constructor's parameters with either <code>val</code> or <code>var</code>.</p></li>\n<li><p>I'm assigning the value of <code>_value</code> to <code>value</code> in order to use the desired name for the property.</p></li>\n<li><p>I defined a custom accessor for the property with the logic you described.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 8, "last_activity_date": 1476176935, "last_edit_date": 1476176935, "creation_date": 1469089502, "answer_id": 38498870, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/38498870#38498870", "title": "Override getter for Kotlin data class", "body": "<p>The answer depends on what capabilities you actually use that <code>data</code> provides. @EPadron mentioned a nifty trick (improved version):</p>\n\n<pre><code>data class Test(private val _value: Int) {\n    val value: Int\n        get() = if (_value &lt; 0) 0 else _value\n}\n</code></pre>\n\n<p>That will works as expected, e.i it has <strong>one</strong> field, one getter, right <code>equals</code>, <code>hashcode</code> and <code>component1</code>. The catch is that <code>toString</code> and <code>copy</code> are weird:</p>\n\n<pre><code>println(Test(1))          // prints: Test(_value=1)\nTest(1).copy(_value = 5)  // &lt;- weird naming\n</code></pre>\n\n<p>To fix the problem with <code>toString</code> you may redefine it by hands. I know of no way to fix the parameter naming but not to use <code>data</code> at all.</p>\n"}, {"comments": [{"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 1, "creation_date": 1506145301, "post_id": 45208122, "comment_id": 79711724, "body": "Not sure I&#39;d call this a drawback. It&#39;s merely a limitation of the data class feature, which isn&#39;t a feature that Java offers."}], "tags": [], "owner": {"reputation": 2376, "user_id": 4949974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf69ff8841965fe84a46f7b8238828d9?s=128&d=identicon&r=PG", "display_name": "Asher Stern", "link": "https://stackoverflow.com/users/4949974/asher-stern"}, "is_accepted": false, "score": 0, "last_activity_date": 1500535662, "creation_date": 1500535662, "answer_id": 45208122, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/45208122#45208122", "title": "Override getter for Kotlin data class", "body": "<p>This seems to be one (among other) annoying drawbacks of Kotlin.</p>\n\n<p>It seems that the only reasonable solution, which completely keeps backward compatibility of the class is to convert it into a regular class (not a \"data\" class), and implement by hand (with the aid of the IDE) the methods: hashCode(), equals(), toString(), copy() and componentN()</p>\n\n<pre><code>class Data3(i: Int)\n{\n    var i: Int = i\n\n    override fun equals(other: Any?): Boolean\n    {\n        if (this === other) return true\n        if (other?.javaClass != javaClass) return false\n\n        other as Data3\n\n        if (i != other.i) return false\n\n        return true\n    }\n\n    override fun hashCode(): Int\n    {\n        return i\n    }\n\n    override fun toString(): String\n    {\n        return \"Data3(i=$i)\"\n    }\n\n    fun component1():Int = i\n\n    fun copy(i: Int = this.i): Data3\n    {\n        return Data3(i)\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 641, "user_id": 1870447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5obdQ.jpg?s=128&g=1", "display_name": "Antek", "link": "https://stackoverflow.com/users/1870447/antek"}, "edited": false, "score": 0, "creation_date": 1532609275, "post_id": 46376746, "comment_id": 90045955, "body": "what about data classes used for serialisation/deserialisation, flattening a nested structure? E.g. I just wrote <code>data class class(@JsonProperty(&quot;iss_position&quot;) private val position: Map&lt;String, Double&gt;) {     val latitude = position[&quot;latitude&quot;]; val longitude = position[&quot;longitude&quot;] }</code>, and I consider it quite good for my case, tbh. What do you think about this? (there were ofc other fields and hence I believe it made no sense to me to recreate that nested json structure in my code)"}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "reply_to_user": {"reputation": 641, "user_id": 1870447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5obdQ.jpg?s=128&g=1", "display_name": "Antek", "link": "https://stackoverflow.com/users/1870447/antek"}, "edited": false, "score": 0, "creation_date": 1532620677, "post_id": 46376746, "comment_id": 90053778, "body": "@Antek Given that you aren&#39;t altering the data, I don&#39;t see anything wrong with this approach. I will also mention that the reason you are doing this is because the server-side model that you are being sent is not convenient to use on the client. To  counter such situations, my team creates a client-side model that we translate the server-side model to after deserialization. We wrap all of this up in a client-side api. Once you start to get examples that are more complicated than what you&#39;ve shown, this approach is very helpful as it protects the client from bad server model decisions / apis."}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1562484575, "post_id": 46376746, "comment_id": 100382891, "body": "I disagree with what you claim to be the &quot;best approach&quot;. The problem I see is that it&#39;s <b>very</b> common to want to set a value in a data class, and never change it. For example, parsing a string into an int. Custom getters/setters on a data class are not only useful, but also necessary; otherwise, you&#39;re left with Java bean POJOs that do nothing and their behavior + validation is contained in some other class."}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1562561834, "post_id": 46376746, "comment_id": 100398190, "body": "What I said is &quot;This is probably the best approach for most cases&quot;. In most cases, unless certain circumstances arise, devs should have a clear separation between their model and algorithm / business logic, where the resulting model from their algorithm clearly represents the various states of the possible results. Kotlin is fantastic for this, with sealed classes, and data classes. For your example of <code>parsing a string into an int</code>, you are clearly allowing the business logic of parsing and error handling non-numeric Strings into your model class..."}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1562562506, "post_id": 46376746, "comment_id": 100398348, "body": "...The practice of muddying the line between model and business logic always leads to less maintainable code, and I&#39;d argue is an anti-pattern. Probably 99% of the data classes I create are immutable / lacking setters. I think you&#39;d really enjoy taking some time to read about the benefits of your team keeping its models immutable. With immutable models I can guarantee my models aren&#39;t accidentally modified in some other random place in code, which reduces side-effects, and again, leads to maintainable code. i.e. Kotlin didn&#39;t separate <code>List</code> and <code>MutableList</code> for no reason."}, {"owner": {"reputation": 3033, "user_id": 3339394, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ciehO.jpg?s=128&g=1", "display_name": "The_Martian", "link": "https://stackoverflow.com/users/3339394/the-martian"}, "edited": false, "score": 0, "creation_date": 1599243843, "post_id": 46376746, "comment_id": 112725005, "body": "In the solution number 3, what&#39;s the point of the safeValue variable?"}], "tags": [], "owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "is_accepted": true, "score": 165, "last_activity_date": 1525968795, "last_edit_date": 1525968795, "creation_date": 1506148019, "answer_id": 46376746, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/46376746#46376746", "title": "Override getter for Kotlin data class", "body": "<p>After spending almost a full year of writing Kotlin daily I've found that attempting to override data classes like this is a bad practice. There are 3 valid approaches to this, and after I present them, I'll explain why the approach other answers have suggested is bad.</p>\n\n<ol>\n<li><p>Have your business logic that creates the <code>data class</code> alter the value to be 0 or greater before calling the constructor with the bad value. <strong>This is probably the best approach for most cases.</strong></p></li>\n<li><p>Don't use a <code>data class</code>. Use a regular <code>class</code> and have your IDE generate the <code>equals</code> and <code>hashCode</code> methods for you (or don't, if you don't need them). Yes, you'll have to re-generate it if any of the properties are changed on the object, but you are left with total control of the object.</p>\n\n<pre><code>class Test(value: Int) {\n  val value: Int = value\n    get() = if (field &lt; 0) 0 else field\n\n  override fun equals(other: Any?): Boolean {\n    if (this === other) return true\n    if (other !is Test) return false\n    return true\n  }\n\n  override fun hashCode(): Int {\n    return javaClass.hashCode()\n  }\n}\n</code></pre></li>\n<li><p>Create an additional safe property on the object that does what you want instead of having a private value that's effectively overriden.</p>\n\n<pre><code>data class Test(val value: Int) {\n  val safeValue: Int\n    get() = if (value &lt; 0) 0 else value\n}\n</code></pre></li>\n</ol>\n\n<p><strong>A bad approach that other answers are suggesting:</strong></p>\n\n<pre><code>data class Test(private val _value: Int) {\n  val value: Int\n    get() = if (_value &lt; 0) 0 else _value\n}\n</code></pre>\n\n<p>The problem with this approach is that <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"noreferrer\">data classes</a> aren't really meant for altering data like this. They are really just for holding data. Overriding the getter for a data class like this would mean that <code>Test(0)</code> and <code>Test(-1)</code> wouldn't <code>equal</code> one another and would have different <code>hashCode</code>s, but when you called <code>.value</code>, they would have the same result. This is inconsistent, and while it may work for you, other people on your team who see this is a data class, may accidentally misuse it without realizing how you've altered it / made it not work as expected (i.e. this approach wouldn't work correctly in a <code>Map</code> or a <code>Set</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 4720495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ftCn.gif?s=128&g=1", "display_name": "gori", "link": "https://stackoverflow.com/users/4720495/gori"}, "edited": false, "score": 0, "creation_date": 1593016316, "post_id": 47431187, "comment_id": 110634124, "body": "I agree with your solution but than in the code you would have to call it like this  <code>val value = test.getValue()</code>  and not like other getters   <code>val value = test.value</code>"}, {"owner": {"reputation": 526, "user_id": 1900854, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa65cd905d6f4ece4e134e0526a45a76?s=128&d=identicon&r=PG", "display_name": "bio007", "link": "https://stackoverflow.com/users/1900854/bio007"}, "reply_to_user": {"reputation": 737, "user_id": 4720495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ftCn.gif?s=128&g=1", "display_name": "gori", "link": "https://stackoverflow.com/users/4720495/gori"}, "edited": false, "score": 0, "creation_date": 1593082888, "post_id": 47431187, "comment_id": 110657961, "body": "Yes. That&#39;s correct. It&#39;s little bit different if you call it from Java as there it&#39;s always <code>.getValue()</code>"}], "tags": [], "owner": {"reputation": 526, "user_id": 1900854, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa65cd905d6f4ece4e134e0526a45a76?s=128&d=identicon&r=PG", "display_name": "bio007", "link": "https://stackoverflow.com/users/1900854/bio007"}, "is_accepted": false, "score": 3, "last_activity_date": 1511343510, "creation_date": 1511343510, "answer_id": 47431187, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/47431187#47431187", "title": "Override getter for Kotlin data class", "body": "<p>I know this is an old question but it seems nobody mentioned the possibility to make value private and writing custom getter like this: </p>\n\n<pre><code>data class Test(private val value: Int) {\n    fun getValue(): Int = if (value &lt; 0) 0 else value\n}\n</code></pre>\n\n<p>This should be perfectly valid as Kotlin will not generate default getter for private field.</p>\n\n<p>But otherwise I definitely agree with spierce7 that data classes are for holding data and you should avoid hardcoding \"business\" logic there.</p>\n"}, {"comments": [{"owner": {"reputation": 1298, "user_id": 925675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bce668e8f8e80ce17fc2d630fa596d9?s=128&d=identicon&r=PG", "display_name": "schatten", "link": "https://stackoverflow.com/users/925675/schatten"}, "reply_to_user": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1540848409, "post_id": 53052420, "comment_id": 93007725, "body": "@spierce7 Nope, it&#39;s not. <code>_value</code> is being modified in the init block and <code>equals</code> and <code>hashCode</code>  are not broken."}], "tags": [], "owner": {"reputation": 1298, "user_id": 925675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bce668e8f8e80ce17fc2d630fa596d9?s=128&d=identicon&r=PG", "display_name": "schatten", "link": "https://stackoverflow.com/users/925675/schatten"}, "is_accepted": false, "score": 0, "last_activity_date": 1540872142, "last_edit_date": 1540872142, "creation_date": 1540840979, "answer_id": 53052420, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/53052420#53052420", "title": "Override getter for Kotlin data class", "body": "<p>I found the following to be the best approach to achieve what you need without breaking <code>equals</code> and <code>hashCode</code>:</p>\n\n<pre><code>data class TestData(private var _value: Int) {\n    init {\n        _value = if (_value &lt; 0) 0 else _value\n    }\n\n    val value: Int\n        get() = _value\n}\n\n// Test value\nassert(1 == TestData(1).value)\nassert(0 == TestData(-1).value)\nassert(0 == TestData(0).value)\n\n// Test copy()\nassert(0 == TestData(-1).copy().value)\nassert(0 == TestData(1).copy(-1).value)\nassert(1 == TestData(-1).copy(1).value)\n\n// Test toString()\nassert(\"TestData(_value=1)\" == TestData(1).toString())\nassert(\"TestData(_value=0)\" == TestData(-1).toString())\nassert(\"TestData(_value=0)\" == TestData(0).toString())\nassert(TestData(0).toString() == TestData(-1).toString())\n\n// Test equals\nassert(TestData(0) == TestData(-1))\nassert(TestData(0) == TestData(-1).copy())\nassert(TestData(0) == TestData(1).copy(-1))\nassert(TestData(1) == TestData(-1).copy(1))\n\n// Test hashCode()\nassert(TestData(0).hashCode() == TestData(-1).hashCode())\nassert(TestData(1).hashCode() != TestData(-1).hashCode())\n</code></pre>\n\n<p>However, </p>\n\n<p>First, note that <code>_value</code> is <code>var</code>, not <code>val</code>, but on the other hand, since it's private and data classes cannot be inherited from, it's fairly easy to make sure that it is not modified within the class.</p>\n\n<p>Second, <code>toString()</code> produces a slightly different result than it would if <code>_value</code> was named <code>value</code>, but it's consistent and <code>TestData(0).toString() == TestData(-1).toString()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1589471078, "post_id": 61800761, "comment_id": 109314110, "body": "Making fields mutable just so you can modify them during initialization is a bad practice. It&#39;d be better to make the constructor private, and then create a function that acts as a constructor (i.e. <code>fun Recording(...): Recording { ... }</code>). Also maybe a data class isn&#39;t what you want, since with non-data classes you can separate your properties from your constructor parameters. It&#39;s better to be explicit with your mutability intentions in your class definition. If those fields also happen to be mutable anyways, then a data class is fine, but almost all my data classes are immutable."}, {"owner": {"reputation": 376, "user_id": 9137227, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209342128055642/picture?type=large", "display_name": "Simou", "link": "https://stackoverflow.com/users/9137227/simou"}, "reply_to_user": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1589471423, "post_id": 61800761, "comment_id": 109314294, "body": "@spierce7 is it really that bad to deserve a down vote? Anyways, this solution suits me well, it doesn&#39;t require so much coding and it keeps the hash and equals intact."}, {"owner": {"reputation": 105, "user_id": 9191098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YaFs4WceUuo/AAAAAAAAAAI/AAAAAAAAACE/68Ks2Nr-QAg/photo.jpg?sz=128", "display_name": "Qiyu Zhang", "link": "https://stackoverflow.com/users/9191098/qiyu-zhang"}, "edited": false, "score": 0, "creation_date": 1609799955, "post_id": 61800761, "comment_id": 115931194, "body": "I think this one is actually better than others for some customer setters or getters with simple logic"}], "tags": [], "owner": {"reputation": 376, "user_id": 9137227, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209342128055642/picture?type=large", "display_name": "Simou", "link": "https://stackoverflow.com/users/9137227/simou"}, "is_accepted": false, "score": 3, "last_activity_date": 1589468764, "creation_date": 1589468764, "answer_id": 61800761, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class/61800761#61800761", "title": "Override getter for Kotlin data class", "body": "<p>I have seen your answer, I agree that data classes are meant for holding data only, but sometimes we need to make somethings out of them.</p>\n\n<p>Here is what i'm doing with my data class, I changed some properties from val to var, and overid them in the constructor.</p>\n\n<p>like so:</p>\n\n<pre><code>data class Recording(\n    val id: Int = 0,\n    val createdAt: Date = Date(),\n    val path: String,\n    val deleted: Boolean = false,\n    var fileName: String = \"\",\n    val duration: Int = 0,\n    var format: String = \" \"\n) {\n    init {\n        if (fileName.isEmpty())\n            fileName = path.substring(path.lastIndexOf('\\\\'))\n\n        if (format.isEmpty())\n            format = path.substring(path.lastIndexOf('.'))\n\n    }\n\n\n    fun asEntity(): rc {\n        return rc(id, createdAt, path, deleted, fileName, duration, format)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66713, "favorite_count": 14, "accepted_answer_id": 46376746, "answer_count": 7, "score": 109, "last_activity_date": 1589468764, "creation_date": 1469054767, "question_id": 38492103, "link": "https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class", "title": "Override getter for Kotlin data class", "body": "<p>Given the following Kotlin class:</p>\n\n<pre><code>data class Test(val value: Int)\n</code></pre>\n\n<p>How would I override the <code>Int</code> getter so that it returns 0 if the value negative?</p>\n\n<p>If this isn't possible, what are some techniques to achieve a suitable result?</p>\n"}, {"tags": ["java-8", "kotlin", "jodatime", "jsr310"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1469038842, "post_id": 38487906, "comment_id": 64377850, "body": "What version of the JDK are you using?"}, {"owner": {"reputation": 522, "user_id": 1216678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHd3U.jpg?s=128&g=1", "display_name": "Joel Handwell", "link": "https://stackoverflow.com/users/1216678/joel-handwell"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1469038902, "post_id": 38487906, "comment_id": 64377883, "body": "java -version --&gt; java version &quot;1.8.0_92&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2841, "user_id": 1307108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a3597ff7f20fe726589d2dbf56e3fb66?s=128&d=identicon&r=PG", "display_name": "Groostav", "link": "https://stackoverflow.com/users/1307108/groostav"}, "edited": false, "score": 1, "creation_date": 1469042298, "post_id": 38488080, "comment_id": 64379817, "body": "I was about to suggest JodaTime as an alternative for java 6 or 7, but if the author of that library himself is suggesting you use a backport of <code>java.time</code>..."}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "reply_to_user": {"reputation": 2841, "user_id": 1307108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a3597ff7f20fe726589d2dbf56e3fb66?s=128&d=identicon&r=PG", "display_name": "Groostav", "link": "https://stackoverflow.com/users/1307108/groostav"}, "edited": false, "score": 1, "creation_date": 1469046775, "post_id": 38488080, "comment_id": 64382278, "body": "@Groostav He is also the specification lead for JSR 310"}], "tags": [], "owner": {"reputation": 53151, "user_id": 38896, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c9a662be575728ba1c4921d3ba2f8ba?s=128&d=identicon&r=PG", "display_name": "JodaStephen", "link": "https://stackoverflow.com/users/38896/jodastephen"}, "is_accepted": true, "score": 10, "last_activity_date": 1469039015, "creation_date": 1469039015, "answer_id": 38488080, "question_id": 38487906, "link": "https://stackoverflow.com/questions/38487906/javax-time-in-kotlin/38488080#38488080", "title": "javax.time in Kotlin", "body": "<p><code>javax.time</code> is a dead package.</p>\n\n<p>Use <code>java.time</code> in Java SE 8.\nOr <code>org.threeten.bp</code> for the backport.</p>\n"}], "owner": {"reputation": 522, "user_id": 1216678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHd3U.jpg?s=128&g=1", "display_name": "Joel Handwell", "link": "https://stackoverflow.com/users/1216678/joel-handwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 38488080, "answer_count": 1, "score": 2, "last_activity_date": 1510033178, "creation_date": 1469038392, "last_edit_date": 1510033178, "question_id": 38487906, "link": "https://stackoverflow.com/questions/38487906/javax-time-in-kotlin", "title": "javax.time in Kotlin", "body": "<p>I tried following code to use javax.time in Kotlin:</p>\n\n<pre><code>import javax.time.calendar.LocalDate\n\nfun main(args: Array&lt;String&gt;){\n  println(\"Today is ${LocalDate.now()}\");\n}\n</code></pre>\n\n<p>And got compilation error:</p>\n\n<pre><code>C:\\kotlin-hello-world&gt;kotlinc hello.kt -include-runtime -d hello.jar\nhello.kt:1:14: error: unresolved reference: time\nimport javax.time.calendar.LocalDate\n             ^\n</code></pre>\n\n<p>And google search shows in Kotlin javax.time can not be used and people recommend to use <a href=\"https://github.com/ThreeTen/threetenbp\" rel=\"nofollow\">ThreeTenBP</a> with <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow\">ThreeTenABP</a> if android. My use case is use javax.time classes in server side with Kotlin.</p>\n\n<p>But when I tried to use TreeTenBP, I have to import <code>org.threeten.bp.LocalDate</code> instead of <code>javax.time.calendar.LocalDate</code> as TreeTen* is not implementation of JSR-310 but back port.</p>\n\n<p>Is there any way to use javax.time in Kotlin other than those backport libraries? If so, how to configure such environment or how to write such code?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1469018380, "post_id": 38481463, "comment_id": 64365116, "body": "What do you mean by odd ranges ?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1469024040, "post_id": 38481463, "comment_id": 64369613, "body": "Did you try to code this at all?  You don&#39;t show any work.  Is this a homework assignment?  interview question?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1469040165, "post_id": 38481463, "comment_id": 64378582, "body": "this is likely to be solvable with <code>for</code> loops, <code>if</code>s and mutable lists. Can&#39;t say for sure since I have no idea what a &quot;non-breaking range&quot; is"}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 1, "last_activity_date": 1469019101, "creation_date": 1469019101, "answer_id": 38481853, "question_id": 38481463, "link": "https://stackoverflow.com/questions/38481463/how-can-i-split-sequence-of-integer-into-ranges-java-kotlin/38481853#38481853", "title": "How can I split sequence of integer into ranges (java\\kotlin)", "body": "<p>Here's one way using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow\"><code>map</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow\"><code>let</code></a>:</p>\n\n<pre><code>val a = (\"1,3,5,7,11,13,15,17,21,23,25,27,29,33,35\")\nval nonBreakingRanges = a.split(',')\n    .map { it.toLong() }\n    .let { list -&gt;\n        var lastRange = mutableListOf&lt;Long&gt;()\n        list.map {\n            val previousElement = lastRange.lastOrNull() ?: it\n            if (it == previousElement + 2) {\n                lastRange.add(it)\n            } else {\n                lastRange = mutableListOf(it)\n            }\n            lastRange\n        }.distinct()\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 4, "last_activity_date": 1469110754, "last_edit_date": 1469110754, "creation_date": 1469025290, "answer_id": 38484212, "question_id": 38481463, "link": "https://stackoverflow.com/questions/38481463/how-can-i-split-sequence-of-integer-into-ranges-java-kotlin/38484212#38484212", "title": "How can I split sequence of integer into ranges (java\\kotlin)", "body": "<p>You can use a <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/RangeSet.html\" rel=\"nofollow\">RangeSet</a> from <a href=\"https://github.com/google/guava\" rel=\"nofollow\">google/guava: Google Core Libraries for Java 6+</a>:</p>\n\n\n\n<pre><code>val rangeSet: RangeSet&lt;Int&gt; = ImmutableRangeSet.builder&lt;Int&gt;()\n        .apply { sequence.forEach { add(Range.closedOpen(it, it + 2)) } }\n        .build()\nval nonBreakingRanges = rangeSet.asRanges()\n        .map { ContiguousSet.create(it, DiscreteDomain.integers()).filter { it % 2 != 0 } }\n</code></pre>\n\n<p>You can use <code>fold</code>:</p>\n\n<pre><code>val nonBreakingRanges = sequence.fold(mutableListOf&lt;MutableList&lt;Int&gt;&gt;()) {\n    nonBreakingRanges, element -&gt;\n    val lastRange = nonBreakingRanges.lastOrNull()\n    if (lastRange != null &amp;&amp; lastRange.lastOrNull() == element - 2) {\n        lastRange.add(element)\n    } else {\n        nonBreakingRanges.add(mutableListOf(element))\n    }\n    nonBreakingRanges\n}\n</code></pre>\n\n<p>You can use <code>groupBy</code>:</p>\n\n<pre><code>var previousElement: Int? = null\nvar rangeIndex = 0\nfun rangeIndexSelector(currentElement: Int): Int {\n    if (previousElement != currentElement - 2) {\n        rangeIndex++\n    }\n    previousElement = currentElement\n    return rangeIndex\n}\n\nval nonBreakingRanges = sequence.groupBy(::rangeIndexSelector).values\n</code></pre>\n"}], "owner": {"reputation": 2035, "user_id": 1915099, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5e87077519e77294d3ee929a118f076d?s=128&d=identicon&r=PG", "display_name": "NCNecros", "link": "https://stackoverflow.com/users/1915099/ncnecros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 38481853, "answer_count": 2, "score": -1, "last_activity_date": 1469110754, "creation_date": 1469018043, "last_edit_date": 1469106615, "question_id": 38481463, "link": "https://stackoverflow.com/questions/38481463/how-can-i-split-sequence-of-integer-into-ranges-java-kotlin", "title": "How can I split sequence of integer into ranges (java\\kotlin)", "body": "<p>Now I have a sequence like this</p>\n\n<pre><code>(\"1,3,5,7,11,13,15,17,21,23,25,27,29,33,35\")\n</code></pre>\n\n<p>How can I split into non-breaking ranges. For example I need get list with odd ranges like this:</p>\n\n<pre><code>([1,3,5,7] [11,13,15,17] [21,23,25,27,29] [33,35])\n</code></pre>\n\n<p>UPD. My code:</p>\n\n<pre><code>fun test1 (arr : List&lt;Int&gt;): List&lt;List&lt;Int&gt;&gt;{\n        var lastElem: Int? = null\n        val arr = ArrayList(arr)\n        Collections.sort(arr)\n        val iter = arr.iterator()\n        val resultList = ArrayList&lt;List&lt;Int&gt;&gt;()\n        val tmlList = ArrayList&lt;Int&gt;()\n        while(iter.hasNext()){\n            val currElem = iter.next()\n            if (lastElem == null) {\n                lastElem = currElem\n                tmlList.add(currElem)\n            }else if(lastElem+2==currElem){\n                tmlList.add(currElem)\n                lastElem = currElem\n            }else if(lastElem+2 != currElem){\n                resultList.add(ArrayList(tmlList))\n                tmlList.clear()\n                tmlList.add(currElem)\n                lastElem = currElem\n            }\n        }\n        resultList.add(ArrayList(tmlList))\n        return resultList;\n}\n</code></pre>\n\n<p>UPD. I'm sorry about code. I added my version of solution. I'm looking for a more beautiful version.</p>\n"}, {"tags": ["java", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469040402, "post_id": 38481135, "comment_id": 64378721, "body": "Note that you don&#39;t really need <code>data</code> here"}, {"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469041555, "post_id": 38481135, "comment_id": 64379363, "body": "@voddan <code>data</code> as in <code>data class</code>? Why not?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469053858, "post_id": 38481135, "comment_id": 64385264, "body": "your initial java class does not have <code>toString</code>or <code>equals</code>, right? So the kotlin version does actually more if you add <code>data</code>. Nothing bad about it, but something to note ;)"}], "answers": [{"comments": [{"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 0, "creation_date": 1469018820, "post_id": 38481421, "comment_id": 64365479, "body": "Thanks. Just had another quick question. When I put the extension function <code>Context.fetchName()</code> in the data class, it still gave me the warning, but when I moved it outside the data class, the warning disappeared. Why is this?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 3, "creation_date": 1469019408, "post_id": 38481421, "comment_id": 64365927, "body": "When an extension function is in the class it&#39;s still a function that has access to all members of the enclosing class instance and thus requires <b>the instance</b>."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 16, "last_activity_date": 1469019533, "last_edit_date": 1495541286, "creation_date": 1469017944, "answer_id": 38481421, "question_id": 38481135, "link": "https://stackoverflow.com/questions/38481135/access-function-before-calling-superclass-constructor-in-kotlin-data-class/38481421#38481421", "title": "Access function before calling superclass constructor in Kotlin data class", "body": "<p>You can only use member functions on a fully constructed objects. \nOne way to work around that is to use private <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">extension function</a> or simply a function to fetch name:</p>\n\n<pre><code>private fun Context.fetchName(): String {\n    ///...\n    return cursor.getString(1)\n}\n\ndata class DataObject(val id: Int, val name: String) {\n    constructor(context: Context, id: Int) : this(id, context.fetchName())\n}\n</code></pre>\n\n<p>Although I do think that using <code>Cursor</code> is a bit too heavy job for <code>constructor</code>. I'd use separate <a href=\"https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)\" rel=\"noreferrer\"><code>Factory</code></a> like so:</p>\n\n<pre><code>data class DataObject(val id: Int, val name: String) {\n    object FromCursorFactory {\n        fun create(id: Int, context: Context): DataObject {\n            val name = context.fetchName()\n            return DataObject(id, name)\n        }\n    }\n}\n</code></pre>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/7048515/is-doing-a-lot-in-constructors-bad\">Is doing a lot in constructors bad?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18348797/why-is-it-considered-bad-practice-to-call-a-method-from-within-a-constructor\">Why is it considered bad practice to call a method from within a constructor?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 11148315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wt8C5Mh_vwE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reqVi87Cjg_WC83GbPiWffDflPR-w/mo/photo.jpg?sz=128", "display_name": "Alexander Larin", "link": "https://stackoverflow.com/users/11148315/alexander-larin"}, "is_accepted": false, "score": 0, "last_activity_date": 1579101070, "creation_date": 1579101070, "answer_id": 59754271, "question_id": 38481135, "link": "https://stackoverflow.com/questions/38481135/access-function-before-calling-superclass-constructor-in-kotlin-data-class/59754271#59754271", "title": "Access function before calling superclass constructor in Kotlin data class", "body": "<p>Another approach is to use companion object. This will allow you to call the function \noutside of the data class as well (maybe not useful in your particular case)</p>\n\n<pre><code>data class DataObject(val id: Int, val name: String) {\n\n  constructor(context: Context, id: Int) : this(id, fetchName(context))\n\n  companion object {\n\n    fun fetchName(context: Context): String {\n      val cursor = ...\n      ...\n      return name\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4675, "favorite_count": 1, "accepted_answer_id": 38481421, "answer_count": 2, "score": 11, "last_activity_date": 1579101070, "creation_date": 1469017200, "question_id": 38481135, "link": "https://stackoverflow.com/questions/38481135/access-function-before-calling-superclass-constructor-in-kotlin-data-class", "title": "Access function before calling superclass constructor in Kotlin data class", "body": "<p>I'm using data classes in Kotlin to significantly reduce the amount of Java code I would otherwise have to write.</p>\n\n<p>However, in one of my Java classes, I'm not sure what to do to achieve the same result in Kotlin.</p>\n\n<p>My Java class looks a bit like this:</p>\n\n<pre><code>public class DataObject {\n\n    private int mId;\n    private String mName;\n\n    public DataObject(int id, String name) {\n        mId = id;\n        mName = name;\n    }\n\n    public DataObject(Context context, int id) {\n        mId = id;\n        Cursor cursor = ...\n        cursor.moveToFirst();\n        mName = cursor.getString(...);\n        cursor.close();\n    }\n\n    public int getId() {\n        return mId;\n    }\n\n    public String getName() {\n        return mName;\n    }\n\n}\n</code></pre>\n\n<p>I've tried to rewrite it in Kotlin, and so far I have this:</p>\n\n<pre><code>data class DataObject(val id: Int, val name: String) {\n\n    constructor(context: Context, id: Int) : this(id, fetchName(context))\n\n    private fun fetchName(context: Context): String {\n        val cursor = ...\n        cursor.moveToFirst()\n        val name = cursor.getString(...)\n        cursor.close()\n        return name\n    }\n\n}\n</code></pre>\n\n<p>But my IDE (Android Studio) is underlining the part where I call <code>fetchName(context)</code> in my <code>constructor</code> in red. It displays the following message:</p>\n\n<blockquote>\n  <p>Cannot access <code>fetchName</code> before superclass constructor has been called</p>\n</blockquote>\n\n<p>How should I resolve this issue?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "owner": {"reputation": 343, "user_id": 4319593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nox3N.jpg?s=128&g=1", "display_name": "Gamoonbi", "link": "https://stackoverflow.com/users/4319593/gamoonbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468998607, "creation_date": 1468998607, "question_id": 38474578, "link": "https://stackoverflow.com/questions/38474578/anko-value-initialize-with-rxandroid", "title": "anko value initialize with rxAndroid", "body": "<p>I want editText 'B' get text from 'A' when 'A' text changed with anko</p>\n\n<p>So I made function get two edit text value with Rxandroid </p>\n\n<pre><code>val A = editText {\n\n                textChangedListener {\n                    addTextinB(this@editText,B)\n                }\n            }\nval B = editText {\n                hint = \"should be changed \"\n            }\n\nfun addTextinB(v: EditText, v2:EditText) {\n      RxTextView.afterTextChangeEvents(v)\n                .debounce(50, TimeUnit.MILLISECONDS)\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe { tvChangeEvent -&gt;\n                    v2.setText(tvChangeEvent.view().text)\n   }\n</code></pre>\n\n<p>But when I run, I see \"Property B should be initialized before get\" \nI think B should Initialized before call addTextinB, So I changed.</p>\n\n<pre><code>var A by Delegates.notNull&lt;EditText&gt;()\nvar B by Delegates.notNull&lt;EditText&gt;()\n\n override fun onCreateView(){\n   //anko Code here \n   ... \n          A=editText {...}\n          B=editText {...}\n }\n</code></pre>\n\n<p>but fail again.</p>\n\n<p>When I changed A,B are nullable, \nthere is no error message but addTextinB function not work</p>\n\n<p>finally I changed addTextinB, and everyting is ok</p>\n\n<pre><code>fun addTextinB(v: EditText ) {\n  RxTextView.afterTextChangeEvents(v)\n            .debounce(50, TimeUnit.MILLISECONDS)\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe { tvChangeEvent -&gt;\n                B.setText(tvChangeEvent.view().text)\n}\n</code></pre>\n\n<p>I'm wonder there is way to get two parameter.</p>\n"}, {"tags": ["android", "unit-testing", "junit", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 8, "last_activity_date": 1468912651, "creation_date": 1468912651, "answer_id": 38451850, "question_id": 38444821, "link": "https://stackoverflow.com/questions/38444821/how-can-i-run-a-single-android-test-using-kotlin/38451850#38451850", "title": "How can I run a single Android Test using Kotlin?", "body": "<p>There's an <a href=\"https://youtrack.jetbrains.com/issue/KT-10814\" rel=\"noreferrer\">issue</a> with the IntelliJ Platform that causes the tests for the entire class to be executed if you try to run a single test method and have an existing run configuration for the entire class.</p>\n\n<p>To run a single method, you need to delete the configuration for the entire class using the Run | Edit Configurations... action.</p>\n"}], "owner": {"reputation": 225, "user_id": 3920311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oxwve.jpg?s=128&g=1", "display_name": "Yiyo Castillo", "link": "https://stackoverflow.com/users/3920311/yiyo-castillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 1, "accepted_answer_id": 38451850, "answer_count": 1, "score": 6, "last_activity_date": 1468912651, "creation_date": 1468871124, "question_id": 38444821, "link": "https://stackoverflow.com/questions/38444821/how-can-i-run-a-single-android-test-using-kotlin", "title": "How can I run a single Android Test using Kotlin?", "body": "<p>I am using Kotlin 1.0.3 for Android Development in Unit Testing but when I try to run a single test it runs all tests of the class. Does anyone know how to avoid that behaviour?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5367, "user_id": 1321642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/149a22aaf15829addf85a65cc647e836?s=128&d=identicon&r=PG", "display_name": "Heinrisch", "link": "https://stackoverflow.com/users/1321642/heinrisch"}, "edited": false, "score": 0, "creation_date": 1468857236, "post_id": 38440982, "comment_id": 64287799, "body": "Don&#39;t know how I forgot about that. Thanks!"}, {"owner": {"reputation": 5367, "user_id": 1321642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/149a22aaf15829addf85a65cc647e836?s=128&d=identicon&r=PG", "display_name": "Heinrisch", "link": "https://stackoverflow.com/users/1321642/heinrisch"}, "edited": false, "score": 0, "creation_date": 1468869223, "post_id": 38440982, "comment_id": 64294021, "body": "Could you updated your answer with: class MyView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyleRes: Int = 0): View(context, attrs, defStyleAttr, defStyleRes)? With that its working when using the view from xml."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468948536, "post_id": 38440982, "comment_id": 64333313, "body": "the formatting is a bit odd. I think this is a good case for splitting the constructor into a multiline"}, {"owner": {"reputation": 5367, "user_id": 1321642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/149a22aaf15829addf85a65cc647e836?s=128&d=identicon&r=PG", "display_name": "Heinrisch", "link": "https://stackoverflow.com/users/1321642/heinrisch"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469032449, "post_id": 38440982, "comment_id": 64374057, "body": "@voddan this syntax is not the same as having the constructor inside the class. This still lets you use init{} inside the class"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 5367, "user_id": 1321642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/149a22aaf15829addf85a65cc647e836?s=128&d=identicon&r=PG", "display_name": "Heinrisch", "link": "https://stackoverflow.com/users/1321642/heinrisch"}, "edited": false, "score": 0, "creation_date": 1469039865, "post_id": 38440982, "comment_id": 64378392, "body": "@Heinrisch see my answer"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 6, "last_activity_date": 1468869415, "last_edit_date": 1495541686, "creation_date": 1468856821, "answer_id": 38440982, "question_id": 38440858, "link": "https://stackoverflow.com/questions/38440858/hiding-view-default-constructors/38440982#38440982", "title": "Hiding view default constructors", "body": "<p>You can use <a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"nofollow noreferrer\">default arguments</a>:</p>\n\n<pre><code>class MyView(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyleRes: Int = 0): View(context, attrs, defStyleAttr, defStyleRes)\n</code></pre>\n\n<p>In case you need to invoke these constructors from Java, consider <a href=\"https://stackoverflow.com/questions/35748906/jvmoverloads-annotation-for-class-primary-constructor\">applying</a> the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-overloads/index.html\" rel=\"nofollow noreferrer\"><code>@JvmOverloads</code></a> annotation to the constructor:</p>\n\n<pre><code>class MyView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyleRes: Int = 0): View(context, attrs, defStyleAttr, defStyleRes)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1469039849, "creation_date": 1469039849, "answer_id": 38488341, "question_id": 38440858, "link": "https://stackoverflow.com/questions/38440858/hiding-view-default-constructors/38488341#38488341", "title": "Hiding view default constructors", "body": "<p>More or less proper formatting for the @udalov's answer:</p>\n\n<pre><code>class MyView(context: Context, \n             attrs: AttributeSet? = null, \n             defStyleAttr: Int = 0, \n             defStyleRes: Int = 0) : View(context, attrs, defStyleAttr, defStyleRes)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class MyView @JvmOverloads constructor(\n        context: Context, \n        attrs: AttributeSet? = null, \n        defStyleAttr: Int = 0, \n        defStyleRes: Int = 0\n) : View(context, attrs, defStyleAttr, defStyleRes) {\n    // ....\n}\n</code></pre>\n"}], "owner": {"reputation": 5367, "user_id": 1321642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/149a22aaf15829addf85a65cc647e836?s=128&d=identicon&r=PG", "display_name": "Heinrisch", "link": "https://stackoverflow.com/users/1321642/heinrisch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 38440982, "answer_count": 2, "score": 2, "last_activity_date": 1469039849, "creation_date": 1468856468, "question_id": 38440858, "link": "https://stackoverflow.com/questions/38440858/hiding-view-default-constructors", "title": "Hiding view default constructors", "body": "<p>Is there a way in Kotlin to hide (place somewhere else) the default constructors of a view? Maybe creating a subview or extension or something similar.</p>\n\n<p>Currently all my views look like this, which is a little verbose:</p>\n\n<pre><code>class MyView(context: Context, attrs: AttributeSet?, defStyleAttr: Int, defStyleRes: Int): View(context, attrs, defStyleAttr, defStyleRes) {\n    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int): this(context, attrs, defStyleAttr, 0)\n    constructor(context: Context, attrs: AttributeSet?): this(context, attrs, 0, 0)\n    constructor(context: Context): this(context, null, 0)\n}\n</code></pre>\n"}, {"tags": ["java", "javafx", "fxml", "kotlin"], "comments": [{"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 0, "creation_date": 1468799450, "post_id": 38426980, "comment_id": 64260629, "body": "I don&#39;t know Kotlin: is the <code>init</code> method called as part of object construction?"}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 2, "creation_date": 1468948441, "post_id": 38426980, "comment_id": 64333248, "body": "You should check out <a href=\"https://github.com/edvin/tornadofx\" rel=\"nofollow noreferrer\">TornadoFX</a>. It makes JavaFX in Kotlin really nice, and has type safe DSLs for both the layout and the styles."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 2, "creation_date": 1469080007, "post_id": 38426980, "comment_id": 64391820, "body": "To add to @RuckusT-Boom&#39;s comment, it also supports FXML and streamlines it quite nicely. <a href=\"https://github.com/edvin/tornadofx-guide/blob/master/Part%202%20-%20Usage%20Basics/10.%20FXML.md\" rel=\"nofollow noreferrer\">github.com/edvin/tornadofx-guide/blob/master/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 175596, "user_id": 2189127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=128&d=identicon&r=PG", "display_name": "James_D", "link": "https://stackoverflow.com/users/2189127/james-d"}, "edited": false, "score": 6, "creation_date": 1468799720, "post_id": 38427027, "comment_id": 64260678, "body": "Note that you don&#39;t actually need to implement <code>Initializable</code>; simply defining an <code>initialize()</code> method is enough."}, {"owner": {"reputation": 884, "user_id": 448864, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/53ed77b63335920562af010922784631?s=128&d=identicon&r=PG", "display_name": "GregInWI2", "link": "https://stackoverflow.com/users/448864/greginwi2"}, "edited": false, "score": 0, "creation_date": 1468800086, "post_id": 38427027, "comment_id": 64260728, "body": "Yep, that did it! Awesome. I did it the shorter way without the override."}, {"owner": {"reputation": 3293, "user_id": 3000387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ho6gm.png?s=128&g=1", "display_name": "Marv", "link": "https://stackoverflow.com/users/3000387/marv"}, "edited": false, "score": 1, "creation_date": 1468800173, "post_id": 38427027, "comment_id": 64260745, "body": "Thats the recommended way as per the <a href=\"https://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html\" rel=\"nofollow noreferrer\">JavaFX documentation</a> anyways: NOTE This interface has been superseded by automatic injection of location and resources properties into the controller. <code>FXMLLoader</code> will now automatically call any suitably annotated no-arg <code>initialize()</code> method defined by the controller. It is recommended that the injection approach be used whenever possible."}], "tags": [], "owner": {"reputation": 3293, "user_id": 3000387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ho6gm.png?s=128&g=1", "display_name": "Marv", "link": "https://stackoverflow.com/users/3000387/marv"}, "is_accepted": true, "score": 6, "last_activity_date": 1468799815, "last_edit_date": 1468799815, "creation_date": 1468799668, "answer_id": 38427027, "question_id": 38426980, "link": "https://stackoverflow.com/questions/38426980/fxml-control-always-null-when-using-kotlin/38427027#38427027", "title": "FXML control always null when using Kotlin", "body": "<p>Just like with Java constructors, <code>fx:id</code> fields will not be populated before but <strong>after</strong>  the <code>init</code> (or in Java the constructor) is called. A common solution is to implement the <code>Initializable</code> interface (or just define an <code>initialize()</code> method) and do additional setup inside the method like so:</p>\n\n<pre><code>import javafx.fxml.FXML\nimport javafx.scene.control.Label\n\nclass MainWindowController : Initializable {\n    @FXML \n    var helloLabel: Label? = null\n\n    override fun initialize(location: URL?, resources: ResourceBundle?) {\n        println(\"Label is null? ${helloLabel == null}\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 426, "user_id": 3172286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/96f87d271050238aec1f9e8e80ea4297?s=128&d=identicon&r=PG&f=1", "display_name": "Payne", "link": "https://stackoverflow.com/users/3172286/payne"}, "is_accepted": false, "score": 15, "last_activity_date": 1499441401, "creation_date": 1499441401, "answer_id": 44974595, "question_id": 38426980, "link": "https://stackoverflow.com/questions/38426980/fxml-control-always-null-when-using-kotlin/44974595#44974595", "title": "FXML control always null when using Kotlin", "body": "<p>As mentioned before. Check if fx:id is set.</p>\n\n<p>Is also possible to use <code>lateinit</code> modifier. </p>\n\n<p>Your code could looks like:</p>\n\n<pre><code>import javafx.fxml.FXML\nimport javafx.scene.control.Label\n\nclass MainWindowController {\n    @FXML \n    lateinit var helloLabel : Label\n}\n</code></pre>\n"}], "owner": {"reputation": 884, "user_id": 448864, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/53ed77b63335920562af010922784631?s=128&d=identicon&r=PG", "display_name": "GregInWI2", "link": "https://stackoverflow.com/users/448864/greginwi2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2790, "favorite_count": 1, "accepted_answer_id": 38427027, "answer_count": 2, "score": 8, "last_activity_date": 1566111454, "creation_date": 1468799124, "last_edit_date": 1468800183, "question_id": 38426980, "link": "https://stackoverflow.com/questions/38426980/fxml-control-always-null-when-using-kotlin", "title": "FXML control always null when using Kotlin", "body": "<p>Using IntelliJ I created a JavaFX application and then added Kotlin and Maven as frameworks to it. It came with a sample.fxml file and a Controller.java and Main.java. I created a new class for the controller in Kotlin (MainWindowController.kt) and renamed the sample.fxml file to MainWindow.fxml. I updated the MainWindow.fxml to look like:</p>\n\n<pre><code>&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.GridPane?&gt;\n&lt;GridPane fx:controller=\"reader.MainWindowController\" xmlns:fx=\"http://javafx.com/fxml\" xmlns=\"http://javafx.com/javafx/8\" alignment=\"center\" hgap=\"10\" vgap=\"10\"&gt;\n    &lt;Label fx:id=\"helloLabel\" text=\"Hello\"/&gt;\n&lt;/GridPane&gt;\n</code></pre>\n\n<p>And in my MainWindowController.kt file I have:</p>\n\n<pre><code>package reader\n\nimport javafx.fxml.FXML\nimport javafx.scene.control.Label\n\nclass MainWindowController {\n\n    @FXML var helloLabel: Label? = null\n\n    init {\n        println(\"Label is null? ${helloLabel == null}\")\n    }\n}\n</code></pre>\n\n<p>Here's my Main.java:</p>\n\n<pre><code>import javafx.stage.Stage;\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception{\n        Parent root = FXMLLoader.load(getClass().getClassLoader().getResource(\"MainWindow.fxml\"));\n        primaryStage.setTitle(\"My App\");\n        primaryStage.setScene(new Scene(root, 1000, 600));\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n\n<p>When I run the app the print line shows that the label is null but otherwise the window shows properly and I see the text from my label. The null is the problem I'm having. I haven't found much on using FXML with Kotlin and what I did find was a little out-dated and didn't appear to have an actual working solution.</p>\n\n<p>Does anyone know why the label is null? I must be doing something wrong or misunderstanding something.</p>\n\n<p>Edit: Here's what I have that now works thanks to the quick replies:</p>\n\n<pre><code>package reader\n\nimport javafx.fxml.FXML\nimport javafx.scene.control.Label\n\nclass MainWindowController {\n\n    @FXML var helloLabel: Label? = null\n\n    fun initialize() {\n        println(\"Label is null? ${helloLabel == null}\")\n    }\n}\n</code></pre>\n"}, {"tags": ["json", "jackson", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1468861072, "post_id": 38426825, "comment_id": 64289918, "body": "He asked about a case where he has a default value for the parameter, which from Jackson 2.8.0 forward (as Miensol mentions) works just fine.  And nullability is smarter for that release as well.  He would have no problems if he uses 2.8.0."}], "tags": [], "owner": {"reputation": 383, "user_id": 6601236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DtXsGq4TPsg/AAAAAAAAAAI/AAAAAAAAI2I/5jKNsCtEs2c/photo.jpg?sz=128", "display_name": "Greg Konush", "link": "https://stackoverflow.com/users/6601236/greg-konush"}, "is_accepted": false, "score": -1, "last_activity_date": 1468797395, "creation_date": 1468797395, "answer_id": 38426825, "question_id": 38426579, "link": "https://stackoverflow.com/questions/38426579/in-kotlin-jackson-deserialization-error-with-data-class/38426825#38426825", "title": "In Kotlin, Jackson Deserialization error with data class", "body": "<p>I think one of your incoming properties are null, so you going to need to place <code>?</code> after jsonProperty that could be null(in you case this is your date field). You can also use raw String data type for your testing with triple quotes <code>\"\"\"\\unescaped string\"\"\"</code>\nso it should be like this\n<code>val ts: Date?</code> inside of your data class. And you don't have to redeclare the type.\nSo final answer would be :\n<code>data class Pojo(val name: String, val age: Int, val list: List&lt;String&gt;, val ts: Date?)</code></p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1468861127, "post_id": 38429322, "comment_id": 64289954, "body": "Correct, this change was new for 2.8.x and <i>cannot</i> be back ported to earlier versions, so you must upgrade as new API&#39;s were added to Jackson explicitly to give more control to the plugin modules."}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1468887541, "post_id": 38429322, "comment_id": 64300890, "body": "Thanks, that did the trick. I was using 2.7.5 which was the very latest at the time I started this little effort. Never crossed my mind that I simply needed to upgrade the libs. Glad for an easy fix."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 14, "last_activity_date": 1468820649, "creation_date": 1468820649, "answer_id": 38429322, "question_id": 38426579, "link": "https://stackoverflow.com/questions/38426579/in-kotlin-jackson-deserialization-error-with-data-class/38429322#38429322", "title": "In Kotlin, Jackson Deserialization error with data class", "body": "<p>With the <a href=\"https://github.com/FasterXML/jackson-module-kotlin/releases/tag/jackson-module-kotlin-2.8.0\"><code>2.8.0</code></a> release of <a href=\"https://github.com/FasterXML/jackson-module-kotlin\"><code>jackson-kotlin-module</code></a> it:</p>\n\n<blockquote>\n  <p>now supports using default values in constructor and creator methods</p>\n</blockquote>\n\n<p>The following example depicts the feature:</p>\n\n<pre><code>data class Question(val title: String = \"Is programming hard?\", val answer: String)\n\nval q = mapper.readValue&lt;Question&gt;(\"\"\"{\"answer\": \"Sure it can be\"}\"\"\")\nprintln(q) //-&gt; Question(title=Is programming hard?, answer=Sure it can be)\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4818, "favorite_count": 0, "accepted_answer_id": 38429322, "answer_count": 2, "score": 7, "last_activity_date": 1468820649, "creation_date": 1468794966, "last_edit_date": 1468795306, "question_id": 38426579, "link": "https://stackoverflow.com/questions/38426579/in-kotlin-jackson-deserialization-error-with-data-class", "title": "In Kotlin, Jackson Deserialization error with data class", "body": "<p>Not really sure how best to explain the problem so I whipped up the same code as both java and kotlin to better demonstration.</p>\n\n<p>When I read JSON, it appears that it is forcing a data beans value to be NULL even though the parameter is not even part of the json to start with and the data bean defaults the value of the missing field. In java it works correctly never attempting to nullify the value that was never provided to start with. In Kotlin it seems to break because it tries to nullify a non-nullable field.</p>\n\n<p>In Kotlin</p>\n\n<pre><code>data class Pojo(val name: String, val age: Int, val list: List&lt;String&gt; = emptyList(), val ts: Date = Date())\n\nprivate val mapper: ObjectMapper = ObjectMapper().registerModule(KotlinModule())\n    .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n\nfun main(args: Array&lt;String&gt;) {\n    mapper.readValue(\"\"\"{\"name\": \"John Doe\", \"list\": [\"yellow\", \"green\"], \"age\": 42}\"\"\", Pojo::class.java)\n}\n</code></pre>\n\n<p>Which throws an exception of </p>\n\n<pre><code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method Pojo.&lt;init&gt;, parameter ts\n</code></pre>\n\n<p>In Java (everything works fine)</p>\n\n<pre><code>public class Transform {\n  private static ObjectMapper mapper = new ObjectMapper()\n        .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\n\n  public static class Pojo {\n    private String name;\n    private int age;\n    private List&lt;String&gt; list;\n    private Date ts = new Date();\n    &lt;getters and setters for all&gt;\n  }\n\n  public static void main(String[] args) throws IOException {\n    String json = \"{\\\"name\\\": \\\"John Doe\\\", \\\"list\\\": [\\\"yellow\\\", \\\"green\\\"], \\\"age\\\": 42}\";\n    Pojo p = mapper.readValue(json, Pojo.class);\n    System.out.printf(\"Bean: name=%s, age=%s, list=%s, ts=%s\\n\", p.name, p.age, p.list, p.ts);\n  }\n}\n</code></pre>\n\n<p>Even if I make it a class instead of a data class in kotlin, it still errors out the same way.</p>\n\n<p>My question is, how can I get the Jackson deserialization to work in Kotlin with my POJO's. The expected behavior is that it \"should\" break if a null/incorrect value is passed in for something where null is not allowed. But in the scenario above where no attempt at all was made to change the ts field to a null, it should have used the default value like it does with java.</p>\n\n<p>The only thing that crosses my mind that seems to work is to not use the concept of the data bean at all and to write my beans like</p>\n\n<pre><code>class Pojo(val name: String, val age: Int) {\n    var list: List&lt;String&gt; = emptyList()\n    var ts: Date = Date()\n}\n</code></pre>\n\n<p>But then my .equals does not work and it allows others downstream to manipulate the contents of the list and ts properties when I want them to be read-only.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 0, "creation_date": 1468832979, "post_id": 38432455, "comment_id": 64270997, "body": "Thank you for your answer. I already have a fairly large Java project (for Android) which I am going to add Kotlin files to and convert a few Java files to Kotlin. I agree that moving each converted file will be tedious, and I imagine it would also be inconvenient to have to navigate through different directories to find a Kotlin file which would normally be under the same package as a Java file. At the moment, I&#39;m favouring the option of keeping all files under one source directory, but is there a way to rename the <code>java</code> source directory to something more relevant."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 0, "creation_date": 1468833491, "post_id": 38432455, "comment_id": 64271362, "body": "You can use the same setup code as shown in your question to create a source root with the name that you prefer, and simply delete the &quot;java&quot; source root. However, if you&#39;re worried about conventions, I don&#39;t think such a setup would be conventional."}, {"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 0, "creation_date": 1468834042, "post_id": 38432455, "comment_id": 64271694, "body": "Thanks again. I think I&#39;ll keep using the <code>java</code> source directory for now, and perhaps when I have a large number of kotlin files, I&#39;ll move them to a separate source directory."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 30, "last_activity_date": 1468832246, "creation_date": 1468832246, "answer_id": 38432455, "question_id": 38425871, "link": "https://stackoverflow.com/questions/38425871/should-kotlin-files-be-put-in-a-separate-source-directory-in-android/38432455#38432455", "title": "Should Kotlin files be put in a separate source directory in Android?", "body": "<p>Putting the Kotlin files in a separate source directory exists as a documented possibility because in early (pre-1.0) versions of Kotlin this was the only supported setup. Afterwards, the Kotlin Gradle plugin was made more flexible, so the directory separation is no longer necessary. I'm not aware of any benefits that could be gained by putting Kotlin files in a separate source directory.</p>\n\n<p>Having a separate source directory is especially inconvenient when you have a Java project which you're gradually converting to Kotlin. Moving each converted file to a different source directory makes the conversion process unnecessarily more cumbersome.</p>\n"}, {"comments": [{"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 1, "creation_date": 1468833257, "post_id": 38432481, "comment_id": 64271185, "body": "Thank you for your answer. Is there a way to rename the <code>java</code> source directory, so it makes more sense, as it would contain not only java source files, but also kotlin source files?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 1, "creation_date": 1468833443, "post_id": 38432481, "comment_id": 64271326, "body": "That&#39;s more a Grade question that a Kotlin one. Personally I would not bothered to rename anything"}, {"owner": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "edited": false, "score": 0, "creation_date": 1482247401, "post_id": 38432481, "comment_id": 69691342, "body": "getting a classnotfoundexception when trying to run an empty kotlin mainactivity?"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 5, "last_activity_date": 1468832322, "creation_date": 1468832322, "answer_id": 38432481, "question_id": 38425871, "link": "https://stackoverflow.com/questions/38425871/should-kotlin-files-be-put-in-a-separate-source-directory-in-android/38432481#38432481", "title": "Should Kotlin files be put in a separate source directory in Android?", "body": "<p>Since the placement of files does not mean much to the Kotlin compiler, the convention is to place the in the modules \"logically\" the same way you would do with Java files.</p>\n\n<p>For example, if you have decided to refactor a Java class by converting it into Kotlin, the resulting Kotlin file should take the place of the original Java file.</p>\n"}], "owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5087, "favorite_count": 3, "accepted_answer_id": 38432455, "answer_count": 2, "score": 28, "last_activity_date": 1494678174, "creation_date": 1468789112, "last_edit_date": 1494678174, "question_id": 38425871, "link": "https://stackoverflow.com/questions/38425871/should-kotlin-files-be-put-in-a-separate-source-directory-in-android", "title": "Should Kotlin files be put in a separate source directory in Android?", "body": "<p>I'm going to start using Kotlin for Android development in addition to Java because of its benefits. I have installed the Android Studio plugin and included the relevant dependencies in my gradle files.</p>\n\n<p>So I've read from the Kotlin documentation and Stack Overflow that it's possible to include a separate source directory for Kotlin files, like so:</p>\n\n<blockquote>\n  <p>app:<br>\n  -manifest<br>\n  -java<br>\n  <strong>-kotlin</strong><br>\n  -res  </p>\n</blockquote>\n\n<p>I know I can create this directory by adding the following to my <code>build.gradle</code> file:</p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n</code></pre>\n\n<p>My question is: <strong>should Kotlin files 'live' with Java files in the same directory or not?</strong></p>\n\n<p>In addition to opinions, I would like to know whether there is a particular convention for this, and if so, why it is the way that it is.</p>\n\n<p>If not, then what are the advantages and disadvantages of each option?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468833007, "post_id": 38426380, "comment_id": 64271018, "body": "The compiler works according to kotlin semantics, so this is not really &quot;helping&quot;, but rather &quot;guidening&quot;"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468833034, "post_id": 38426380, "comment_id": 64271044, "body": "Also the term &quot;erasure&quot; is misused here, I believe"}], "tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 6, "last_activity_date": 1468881905, "last_edit_date": 1468881905, "creation_date": 1468793120, "answer_id": 38426380, "question_id": 38423531, "link": "https://stackoverflow.com/questions/38423531/fix-generic-type-to-the-type-of-the-first-parameter/38426380#38426380", "title": "Fix generic type to the type of the first parameter", "body": "<p>The only way to do it requires telling the compiler what you want.</p>\n\n<pre><code>fun &lt;T&gt; T.f(x: T) {\n}\n</code></pre>\n\n<p>In order to use it, you have to tell Kotlin what you want the type to be.</p>\n\n<pre><code>\"1\".f&lt;String&gt;(\"2\")  // Okay\n\"1\".f(2)  // Okay (see voddan's answer for a good explanation)\n\"1\".f&lt;String&gt;(2)  // Fails because 2 isn't a String\n\"1\".f&lt;Int&gt;(2)  // Fails because \"1\" isn't an Int\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 4, "last_activity_date": 1468832894, "creation_date": 1468832894, "answer_id": 38432678, "question_id": 38423531, "link": "https://stackoverflow.com/questions/38423531/fix-generic-type-to-the-type-of-the-first-parameter/38432678#38432678", "title": "Fix generic type to the type of the first parameter", "body": "<p>When you call <code>fun &lt;T&gt; T.f(x: T) {}</code> like <code>\"1\".f(1)</code>, the compiler looks for a common super-type of <code>String</code> and <code>Int</code>, which is <code>Any</code>. Then it decides that <code>T is Any</code>, and issues no error. The only way to influence this process is to specify <code>T</code> explicitly: <code>\"1\".f&lt;String&gt;(1)</code></p>\n\n<p>Since all the checks are performed by the compiler, the issue has nothing to do with type erasure.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 4, "last_activity_date": 1468864680, "last_edit_date": 1468864680, "creation_date": 1468862918, "answer_id": 38442694, "question_id": 38423531, "link": "https://stackoverflow.com/questions/38423531/fix-generic-type-to-the-type-of-the-first-parameter/38442694#38442694", "title": "Fix generic type to the type of the first parameter", "body": "<p>Your issue is like saying \"<em>John is 3 years older than Carl, and Carl is 3 years younger than John</em>\" ... you still don't know either of their ages without more information.  That's the type of evidence you gave the compiler and then you expected it to guess correctly.  The only truth you can get from that information is that John is at least 3 years old and Carl is at least 1 day old.  </p>\n\n<p>And this type of assumption is just like the compiler finding the common upper bounds of <code>Any</code>.  It had two strong literal types to chose from and no ability to vary either.  How would it decide if the <code>Int</code> or <code>String</code> is more important, and at the same time you told it that any <code>T</code> with upper bounds of <code>Any?</code> was valid given your type specification.  So the safe answer is to see if both literals could meet the criteria of <code>T: Any?</code> and of course they do, they both have ancestors of <code>Any</code>.  The compiler met all of your criteria, even if you didn't want it to.</p>\n\n<p>If you had tie-breaking criteria, this would work out differently.  For example, if you had a return type of <code>T</code> and a variable of type <code>String</code> receiving the value, then that would influence the decision of Type inference.  This for example produces an error:</p>\n\n<pre><code>fun &lt;T: Any&gt; T.f2(x: T): T = x\n\nval something: String = \"1\".f2(1) // ERROR\n</code></pre>\n\n<p>Because now the type <code>T</code> is anchored by the \"left side\" of the expression expecting <code>String</code> without any doubt.</p>\n\n<p>There is also the possibility that this could also be an type inference issue that is not intended, check issues reported in <a href=\"http://youtrack.jetbrains.com/\" rel=\"nofollow\">YouTrack</a> or add your own to get a definite answer from the compiler team.  I added a feature request as <a href=\"https://youtrack.jetbrains.com/issue/KT-13138\" rel=\"nofollow\">KT-13138</a> for anchoring a specific type parameter to see how the team responds.</p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1468936190, "last_edit_date": 1468936190, "creation_date": 1468874621, "answer_id": 38445684, "question_id": 38423531, "link": "https://stackoverflow.com/questions/38423531/fix-generic-type-to-the-type-of-the-first-parameter/38445684#38445684", "title": "Fix generic type to the type of the first parameter", "body": "<p>You can fix <code>T</code> to the receiver type by making <code>f</code> an <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-properties\" rel=\"nofollow\">extension property</a> that returns an invokable object:</p>\n\n<pre><code>val &lt;T&gt; T.f: (T) -&gt; Unit\n    get() = { x -&gt; }\n\nfun main(vararg args: String) {\n    \"1\".f(\"1\") // will be OK once KT-10364 is resolved\n    \"1\".f(1) // error: The integer literal does not conform to the expected type String\n}\n</code></pre>\n\n<p>Unfortunately <code>\"1\".f(\"1\")</code> currently causes an error: \"Type mismatch: inferred type is String but T was expected\". This is a compiler issue. See <a href=\"https://youtrack.jetbrains.com/issue/KT-10364\" rel=\"nofollow\">KT-10364</a>. See also <a href=\"https://youtrack.jetbrains.com/issue/KT-13139\" rel=\"nofollow\">KT-13139</a>. You can vote on and/or watch the issues for updates. Until this is fixed you can still do the following:</p>\n\n<pre><code>\"1\".f.invoke(\"1\")\n/* or */\n(\"1\".f)(\"1\")\n/* or */\nval f = \"1\".f\nf(\"1\")\n</code></pre>\n"}], "owner": {"reputation": 8267, "user_id": 315129, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mSRT4.jpg?s=128&g=1", "display_name": "vbezhenar", "link": "https://stackoverflow.com/users/315129/vbezhenar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4638, "favorite_count": 1, "accepted_answer_id": 38426380, "answer_count": 4, "score": 2, "last_activity_date": 1545535092, "creation_date": 1468773676, "question_id": 38423531, "link": "https://stackoverflow.com/questions/38423531/fix-generic-type-to-the-type-of-the-first-parameter", "title": "Fix generic type to the type of the first parameter", "body": "<p>I want to write an extension function which will be available on any type and accept parameter of the same type or subtype, but not a completely different type.</p>\n\n<p>I tried naive approach but it didn't work:</p>\n\n<pre><code>fun &lt;T&gt; T.f(x: T) {\n}\n\nfun main(args: Array&lt;String&gt;) {\n  \"1\".f(\"1\") // ok\n  \"1\".f(1) // should be error\n}\n</code></pre>\n\n<p>It seems that compiler just uses Any for T. I want T to be fixed to receiver type.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1468748038, "post_id": 38416066, "comment_id": 64246272, "body": "This seems more like a statement/opinion than a question better for Kotlin discussion forums or Slack than for Stackoverflow.  Kotlin is consistent, as it is in this case with all other places you can shadow a variable, and receive IDE inspection warnings.  Change your warning level in the IDE for this inspection to an error."}, {"owner": {"reputation": 21581, "user_id": 4754790, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0hACp.jpg?s=128&g=1", "display_name": "Dragan Bozanovic", "link": "https://stackoverflow.com/users/4754790/dragan-bozanovic"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1468754515, "post_id": 38416066, "comment_id": 64247853, "body": "@JaysonMinard Thanks. Are you aware of any links to the official documentation where the shadowing rules are explained?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1468765030, "post_id": 38416066, "comment_id": 64250666, "body": "I don&#39;t have a link offhand.  I just remember early discussions on the topic.  Really, I&#39;d prefer you never could shadow a variable name anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 21581, "user_id": 4754790, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0hACp.jpg?s=128&g=1", "display_name": "Dragan Bozanovic", "link": "https://stackoverflow.com/users/4754790/dragan-bozanovic"}, "edited": false, "score": 1, "creation_date": 1468767706, "post_id": 38422331, "comment_id": 64251538, "body": "Makes sense, thanks. I wasn&#39;t aware that everything else can be shadowed as well, hence the loop example in my question."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468833326, "post_id": 38422331, "comment_id": 64271234, "body": "Name shadowing is very useful when you have a constructor argument and a property with the same name, for example ;)"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 10, "last_activity_date": 1468766782, "last_edit_date": 1468766782, "creation_date": 1468765901, "answer_id": 38422331, "question_id": 38416066, "link": "https://stackoverflow.com/questions/38416066/scope-of-variable-defined-in-for-loop-header/38422331#38422331", "title": "Scope of variable defined in for loop header", "body": "<p>Kotlin does not restrict variable shadowing in any way.  The rationale is simple:  \"<em>consistency</em>.\"  </p>\n\n<p>Since you could shadow variables in most other places why would you exclude only some loop variables from the allowed options?  Why would they be so special?  It is an arbitrary difference.</p>\n\n<p>Any scope can shadow a variable used in another scope.  It is <strong>NOT</strong> good practice and does produce a compiler warning -- but it is allowed.  </p>\n\n<p>If you want to engage in a dialog with the contributors of the project, try the discussion forum or slack channel, both are linked from the <a href=\"https://kotlinlang.org/community.html\" rel=\"noreferrer\">Kotlin Community page</a>.  Otherwise if you feel it is a bug please add an Issue report to <a href=\"https://youtrack.jetbrains.com/oauth?state=%2F\" rel=\"noreferrer\">Kotlin YouTrack</a> and the answer you receive there will be definitive as well.</p>\n\n<p>In the meantime, you are free to write nonsensical code such as:</p>\n\n<pre><code>val i = 1\nclass Foo() {\n    val i = \"monkey\"\n    init { println(i) }\n    @Test fun boo() {\n        println(i)\n        val i = i.length\n        println(i)\n        if (i == 6) {\n            val i = Date(System.currentTimeMillis() + i) // Shadow warning\n            println(i)\n        }\n        for (i in 0..i) {                                // Shadow warning\n            val i = \"chimp $i\"                           // Shadow warning\n            println(i)\n        }\n        InnerFoo()\n    }\n    class InnerFoo() {\n        val i: Long = 100L\n        init { println(i) }\n    }\n}\n</code></pre>\n\n<p>Which in Kotlin 1.0.3 produces 3 warnings.  </p>\n\n<blockquote>\n  <p>Warning:(15, 21) Kotlin: Name shadowed: i<br/>\n  Warning:(18, 18) Kotlin: Name shadowed: i<br/>\n  Warning:(19, 21) Kotlin: Name shadowed: i<br/></p>\n</blockquote>\n\n<p>And outputs:</p>\n\n<blockquote>\n  <p>monkey<br/>monkey<br/>6<br/>Sun Jul 17 11:31:23 UYT 2016<br/>chimp 0<br/>chimp 1<br/>chimp 2<br/>chimp 3<br/>chimp 4<br/>chimp 5<br/>chimp 6<br/>100</p>\n</blockquote>\n"}], "owner": {"reputation": 21581, "user_id": 4754790, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0hACp.jpg?s=128&g=1", "display_name": "Dragan Bozanovic", "link": "https://stackoverflow.com/users/4754790/dragan-bozanovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2693, "favorite_count": 0, "accepted_answer_id": 38422331, "answer_count": 1, "score": 5, "last_activity_date": 1468766782, "creation_date": 1468706629, "question_id": 38416066, "link": "https://stackoverflow.com/questions/38416066/scope-of-variable-defined-in-for-loop-header", "title": "Scope of variable defined in for loop header", "body": "<p>I noticed that the following Kotlin code compiles and executes successfully:</p>\n\n<pre><code>for (i in 1..2) {\n    val i = \"a\"\n    print(i)\n}\n</code></pre>\n\n<p>This prints <code>aa</code>. However, I failed to find rationale behind the decision to allow this kind of variable shadowing. I would say that this is not a good practice, and is prohibited even in Java.</p>\n\n<p>I think that Kotlin designers did a great work of improving Java syntax and accommodating it to the everyday practical use, so I must be missing something here?</p>\n"}, {"tags": ["extension-methods", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468616310, "post_id": 38397160, "comment_id": 64218353, "body": "Importing is almost never a problem when using an IDE, especially IDEA"}], "answers": [{"comments": [{"owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "edited": false, "score": 1, "creation_date": 1468590493, "post_id": 38397382, "comment_id": 64203891, "body": "Thanks! Couldn&#39;t the Kotlin compiler figure out that when you import <code>Vector2</code> you also want to use <code>Vector2</code>&#39;s extension methods."}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "reply_to_user": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "edited": false, "score": 3, "creation_date": 1468592295, "post_id": 38397382, "comment_id": 64205137, "body": "The extension methods could come from anywhere on classpath, so there is no clear association and the compiler would have to scan all classes. Also, you could have conflicting extension methods. And lastly I think the designers wanted to make this explicit."}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 7, "last_activity_date": 1468589382, "creation_date": 1468589382, "answer_id": 38397382, "question_id": 38397160, "link": "https://stackoverflow.com/questions/38397160/make-extension-method-property-available-globally/38397382#38397382", "title": "Make extension method / property available globally", "body": "<p>You cannot do that, because extension methods are resolved statically by the compiler.</p>\n\n<p>Without an import, the compiler does not know about the extension.</p>\n"}], "owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 38397382, "answer_count": 1, "score": 4, "last_activity_date": 1468589382, "creation_date": 1468588669, "question_id": 38397160, "link": "https://stackoverflow.com/questions/38397160/make-extension-method-property-available-globally", "title": "Make extension method / property available globally", "body": "<p>In Kotlin you can define extension methods and properties for existing classes:</p>\n\n<pre><code>operator inline fun Vector2.plus(other: Vector2) = Vector2(x + other.x, y + other.y)\n</code></pre>\n\n<p>This allows one to do this:</p>\n\n<pre><code>val result = Vector2(1.1f, 2.3f) + Vector2(2f, 4f)\n</code></pre>\n\n<p>Is there any way I can make this extension global so that I don't have to import this in every class that uses this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1468589706, "post_id": 38395507, "comment_id": 64203326, "body": "UPD: Added a more Kotlin-idiomatic approach."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 25, "last_activity_date": 1468589555, "last_edit_date": 1495540934, "creation_date": 1468583676, "answer_id": 38395507, "question_id": 38395115, "link": "https://stackoverflow.com/questions/38395115/interfaces-function-clashes-with-propertys-getter/38395507#38395507", "title": "Interface&#39;s function clashes with Property&#39;s getter", "body": "<p>This feature seems not to be implemented in any way.</p>\n\n<p>@AndreyBreslav's comment on a <a href=\"https://stackoverflow.com/questions/29268526/how-to-overcome-same-jvm-signature-error-when-implementing-a-java-interface\">similar question</a>: </p>\n\n<blockquote>\n  <p>You can not override Java methods with Kotlin properties at the moment. It would be nice if we could support it, but we don't know how to do it consistently for mixed hierarchies</p>\n</blockquote>\n\n<hr>\n\n<p>This does not solve your problem but at least makes the code compile: you can change JVM name of the getter with the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-name/\" rel=\"noreferrer\"><code>@JvmName</code> annotation</a>:</p>\n\n<pre><code>interface A {\n    fun getFoo(): SomeType\n}\n\nclass B: A {\n    override fun getFoo() = foo\n\n    val foo: SomeType = someValue()\n        @JvmName(\"getFoo_\") get() = field\n}\n</code></pre>\n\n<hr>\n\n<p>Also, consider changing to a more idiomatic approach: define the <code>val</code>-property in your interface, so that you can override it in the implementations:</p>\n\n<pre><code>interface A {\n    val foo: SomeType\n}\n\nclass B : A {\n    override val foo: SomeType = someValue()\n}\n\nclass C : A {\n    override val foo: SomeType\n        get() = someCustomGetter()\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2447, "user_id": 320761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abRk9.png?s=128&g=1", "display_name": "Lukasz Frankowski", "link": "https://stackoverflow.com/users/320761/lukasz-frankowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1593172641, "creation_date": 1593172641, "answer_id": 62594243, "question_id": 38395115, "link": "https://stackoverflow.com/questions/38395115/interfaces-function-clashes-with-propertys-getter/62594243#62594243", "title": "Interface&#39;s function clashes with Property&#39;s getter", "body": "<p>The Kotlin-idiomatic approach from the answer above is OK until we stick with Kotlin, but if these interface are defined in Java it's not applicable. There're a plenty of propositions reported in <a href=\"https://youtrack.jetbrains.com/issue/KT-6653\" rel=\"nofollow noreferrer\">KT-6653</a> but none of them is currently implemented. I'm currently writing some app which is partially in Java and partially in Kotlin and this problem completely kills &quot;Kotlin-Java interoperability&quot; concept.</p>\n<p>The only solution I've found to workaround it is the following one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface A {\n  String getFoo();\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class B(private val _foo: String): A {\n\n  override fun getFoo(): String = _foo\n\n}\n</code></pre>\n<p>It's also possible to extend this class with setter:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class B(private var _foo: String): A {\n\n  override fun getFoo(): String = _foo\n\n  fun setFoo(foo: String) {\n    _foo = foo\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 55477, "user_id": 397991, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zZTWl.jpg?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/397991/eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2994, "favorite_count": 3, "accepted_answer_id": 38395507, "answer_count": 2, "score": 26, "last_activity_date": 1593172641, "creation_date": 1468582465, "question_id": 38395115, "link": "https://stackoverflow.com/questions/38395115/interfaces-function-clashes-with-propertys-getter", "title": "Interface&#39;s function clashes with Property&#39;s getter", "body": "<p>An interface's function name clashes with a property's getter name intentionally, but it's prohibited by the compiler because of accidental override problem. Is it possible to instruct the compiler this is intentional?</p>\n\n<pre><code>interface A {\n  fun getFoo()\n}\n\nclass B: A {\n  val foo\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-companion"], "answers": [{"tags": [], "owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "is_accepted": false, "score": 19, "last_activity_date": 1468523194, "last_edit_date": 1468523194, "creation_date": 1468522855, "answer_id": 38382234, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields/38382234#38382234", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<blockquote>\n  <p>Why is it called \"companion\"?</p>\n</blockquote>\n\n<p>This object is a companion of the instances.\nIIRC there was lengthy discussion here: <a href=\"https://blog.jetbrains.com/kotlin/2015/03/upcoming-change-class-objects-rethought/\">upcoming-change-class-objects-rethought</a></p>\n\n<blockquote>\n  <p>Does it mean that to create multiple static properties, I have to group it together inside companion object block?</p>\n</blockquote>\n\n<p>Yes. Every \"static\" property/method needs to be placed inside this companion.</p>\n\n<blockquote>\n  <p>To instantly create a singleton instance that is scoped to a class, I often write</p>\n</blockquote>\n\n<p>You do not create the singleton instance instantly. It is created when accessing <code>singleton</code> for the first time.</p>\n\n<blockquote>\n  <p>which seems like an unidiomatic way of doing it. What's the better way?</p>\n</blockquote>\n\n<p>Rather go with <code>object Singleton { }</code> to define a singleton-class. See: <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\">Object Declarations</a>\nYou do not have to create an instance of <code>Singleton</code>, just use it like that <code>Singleton.doWork()</code></p>\n\n<p>Just keep in mind that Kotlin offers other stuff to organize your code. There are now alternatives to simple static functions e.g. you could use Top-Level-Functions instead.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 114, "last_activity_date": 1557067694, "last_edit_date": 1557067694, "creation_date": 1468523562, "answer_id": 38382433, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields/38382433#38382433", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<ul>\n<li><blockquote>\n  <p>What is the intended meaning of \"companion object\"? Why is it called \"companion\"?</p>\n</blockquote>\n\n<p>First, Kotlin doesn't use the Java concept of <code>static</code> members because Kotlin has its own <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"noreferrer\">concept of <code>object</code>s</a> for describing properties and functions connected with singleton state, and Java <code>static</code> part of a class can be elegantly expressed in terms of singleton: it's a singleton object that can be called by the class' name. Hence the naming: it's an object that comes with a class.</p>\n\n<p>Its name used to be <a href=\"https://blog.jetbrains.com/kotlin/2015/03/upcoming-change-class-objects-rethought/\" rel=\"noreferrer\"><code>class object</code> and <code>default object</code></a>, but then <a href=\"https://blog.jetbrains.com/kotlin/2015/03/follw-up-new-class-object-syntax/\" rel=\"noreferrer\">it got renamed to <code>companion object</code></a> which is more clear and is also consistent with <a href=\"http://docs.scala-lang.org/tutorials/tour/singleton-objects.html\" rel=\"noreferrer\">Scala companion objects</a>.</p>\n\n<p>Apart from naming, it is more powerful than Java <code>static</code> members: it can extend classes and interfaces, and you can reference and pass it around just like other objects.</p></li>\n<li><blockquote>\n  <p>Does it mean that to create multiple static properties, I have to group it together inside <code>companion object</code> block?</p>\n</blockquote>\n\n<p>Yes, that's the idiomatic way. Or you can even group them in non-companion objects by their meaning:</p>\n\n<pre><code>class MyClass {\n    object IO {\n        fun makeSomethingWithIO() { /* ... */ }\n    }\n\n    object Factory {\n        fun createSomething() { /* ... */ }\n    }\n}\n</code></pre></li>\n<li><blockquote>\n  <p>To instantly create a singleton instance that is scoped to a class, I often write <code>/*...*/</code> which seems like an unidiomatic way of doing it. What's the better way?</p>\n</blockquote>\n\n<p>It depends on what you need in each particular case. Your code suits well for storing state bound to a class which is initialized upon the first call to it.</p>\n\n<p>If you don't need it to be connected with a class, just use object declaration:</p>\n\n<pre><code>object Foo {\n    val something by lazy { ... }\n}\n</code></pre>\n\n<p>You can also remove <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"noreferrer\"><code>lazy { ... }</code> delegation</a> to make the property initialize on first class' usage, just like Java static initializers</p>\n\n<p>You might also find useful ways of <a href=\"https://stackoverflow.com/questions/35587652/kotlin-thread-save-native-lazy-singleton-with-parameter\">initializing singleton state</a>.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "edited": false, "score": 1, "creation_date": 1521899330, "post_id": 48292414, "comment_id": 85933592, "body": "&quot;object&quot; without &quot;companion&quot; is called like this (MyClass().create()). Like a singleton, but to access the singleton object you have to initialize the &quot;outer&quot; class first."}], "tags": [], "owner": {"reputation": 171, "user_id": 6668743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e37ab0542960c7db9de3e96745916f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lyn", "link": "https://stackoverflow.com/users/6668743/lyn"}, "is_accepted": false, "score": 7, "last_activity_date": 1516152831, "creation_date": 1516152831, "answer_id": 48292414, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields/48292414#48292414", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<p><strong>Why is it called \"companion\"?</strong></p>\n\n<p>An object declaration inside a class can be marked with the companion keyword:</p>\n\n<pre><code>class MyClass {\n    companion object Factory {\n        fun create(): MyClass = MyClass()\n    }\n}\n</code></pre>\n\n<p>Members of the companion object can be called by using simply the class name as the qualifier:</p>\n\n<pre><code>val instance = MyClass.create()\n</code></pre>\n\n<p>If you only use 'object' without 'companion', you have to do like this:</p>\n\n<pre><code>val instance = MyClass.Factory.create()\n</code></pre>\n\n<p>In my understanding, 'companion' means this object is companion with the outter class.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8567318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0o8gM.jpg?s=128&g=1", "display_name": "Ankur Yadav", "link": "https://stackoverflow.com/users/8567318/ankur-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1548783826, "creation_date": 1548783826, "answer_id": 54426782, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields/54426782#54426782", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<p>We can say that companion is same as \"Static Block\" like Java, But in case of Kotlin there is no Static Block concept, than companion comes into the frame.</p>\n\n<p>How to define a companion block:</p>\n\n<pre><code>class Example {\n      companion object {\n        fun display(){\n        //place your code\n     }\n  }\n}\n</code></pre>\n\n<p>Calling method of companion block, direct with class name</p>\n\n<pre><code>Example.Companion.display\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15831, "user_id": 5925259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/89crf.jpg?s=128&g=1", "display_name": "Yogesh Umesh Vaity", "link": "https://stackoverflow.com/users/5925259/yogesh-umesh-vaity"}, "is_accepted": false, "score": 1, "last_activity_date": 1612628039, "last_edit_date": 1612628039, "creation_date": 1612627698, "answer_id": 66078944, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields/66078944#66078944", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<p>When the classes/objects with related functionalities belong together, they are like companions of each other. A companion means a partner or an associate, in this case.</p>\n<hr />\n<h2>Reasons for companionship</h2>\n<p><strong>Cleaner top-level namespace</strong></p>\n<p>When some independent function is intended to be used with some specific class only, instead of defining it as a top-level function, we define it in that particular class. This prevents the pollution of top-level namespace and helps with more relevant auto-completion hints by IDE.</p>\n<p><strong>Packaging convenience</strong></p>\n<p>It's convenient to keep the classes/objects together when they are closely related to each other in terms of the functionality they offer to each other. We save the effort of keeping them in different files and tracking the association between them.</p>\n<p><strong>Code readability</strong></p>\n<p>Just by looking at the companionship, you get to know that this <code>object</code> provides helper functionality to the outer class and may not be used in any other contexts. Because if it was to be used with other classes, it would be a separate top level <code>class</code> or <code>object</code> or function.</p>\n<hr />\n<h2>Primary purpose of <code>companion object</code></h2>\n<p><strong>Problem: companion <code>class</code></strong></p>\n<p>Let's have a look at the kinds of problems the companion objects solve. We'll take a simple real world example. Say we have a class <code>User</code> to represent a user in our app:</p>\n<pre><code>data class User(val id: String, val name: String)\n</code></pre>\n<p>And an <code>interface</code> for the data access object <code>UserDao</code> to add or remove the <code>User</code> from the database:</p>\n<pre><code>interface UserDao {\n    fun add(user: User)\n    fun remove(id: String)\n}\n</code></pre>\n<p>Now since the functionalities of the <code>User</code> and implementation of the <code>UserDao</code> are logically related to each other, we may decide to group them together:</p>\n<pre><code>data class User(val id: String, val name: String) {\n    class UserAccess : UserDao {\n        override fun add(user: User) { }\n        override fun remove(id: String) { }\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>fun main() {\n    val john = User(&quot;34&quot;, &quot;John&quot;)\n    val userAccess = User.UserAccess()\n    userAccess.add(john)\n}\n</code></pre>\n<p>While this is a good setup, there are several problems in it:</p>\n<ol>\n<li>We have an extra step of creating the <code>UserAccess</code> object before we can add/remove a <code>User</code>.</li>\n<li>Multiple instances of the <code>UserAccess</code> can be created which we don't want. We just want one data access <code>object</code> (singleton) for <code>User</code> in the entire application.</li>\n<li>There is a possibility of the <code>UserAccess</code> class to be used with or extended with other classes. So, it doesn't make our intent clear of exactly what we want to do.</li>\n<li>The naming <code>userAccess.add()</code> or <code>userAccess.addUser()</code> doesn't seem very elegant. We would prefer something like <code>User.add()</code>.</li>\n</ol>\n<p><strong>Solution: <code>companion object</code></strong></p>\n<p>In the <code>User</code> class, we just replace the two words <em><code>class UserAccess</code></em> with the two other words <em><code>companion object</code></em> and it's done! All the problems mentioned above have been solved suddenly:</p>\n<pre><code>data class User(val id: String, val name: String) {\n    companion object : UserDao {\n        override fun add(user: User) { }\n        override fun remove(id: String) { }\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>fun main() {\n    val john = User(&quot;34&quot;, &quot;John&quot;)\n    User.add(john)\n}\n</code></pre>\n<p>The ability to extend interfaces and classes is one of the features that sets the companion objects apart from Java's static functionality. Also, companions are objects, we can pass them around to the functions and assign them to variables just like all the other objects in Kotlin. We can pass them to the functions that accept those interfaces and classes and take advantage of the polymorphism.</p>\n<hr />\n<h2><code>companion object</code> for compile-time <code>const</code></h2>\n<p>When the compile-time constants are closely associated with the class, they can be defined inside the <code>companion object</code>.</p>\n<pre><code>data class User(val id: String, val name: String) {\n    companion object {\n        const val DEFAULT_NAME = &quot;Guest&quot;\n        const val MIN_AGE = 16\n    }\n}\n</code></pre>\n<p>This is the kind of grouping you have mentioned in the question. This way we prevent the top-level namespace from polluting with the unrelated constants.</p>\n<hr />\n<h2><code>companion object</code> with <code>lazy { }</code></h2>\n<p>The <code>lazy { }</code> construct is not necessary to get a singleton. A <code>companion object</code> is by default a singleton, the <code>object</code> is initialized only once and it is thread safe. It is initialized when its corresponding class is loaded. Use <code>lazy { }</code> when you want to defer the initialization of the member of the <code>companion object</code> or when you have multiple members that you want to be initialized only on their first use, one by one:</p>\n<pre><code>data class User(val id: Long, val name: String) {\n    companion object {\n\n        val list by lazy {\n            print(&quot;Fetching user list...&quot;)\n            listOf(&quot;John&quot;, &quot;Jane&quot;)\n        }\n\n        val settings by lazy {\n            print(&quot;Fetching settings...&quot;)\n            mapOf(&quot;Dark Theme&quot; to &quot;On&quot;, &quot;Auto Backup&quot; to &quot;On&quot;)\n        }\n    }\n}\n</code></pre>\n<p>In this code, fetching the <code>list</code> and <code>settings</code> are costly operations. So, we use <code>lazy { }</code> construct to initialize them only when they are actually required and first called, not all at once.</p>\n<p>Usage:</p>\n<pre><code>fun main() {\n    println(User.list)      // Fetching user list...[John, Jane]\n    println(User.list)      // [John, Jane]\n    println(User.settings)  // Fetching settings...{Dark Theme=On, Auto Backup=On}\n    println(User.settings)  // {Dark Theme=On, Auto Backup=On}\n}\n</code></pre>\n<p>The fetching statements will be executed only on the first use.</p>\n<hr />\n<h2><code>companion object</code> for factory functions</h2>\n<p>Companion objects are used for defining factory functions while keeping the <code>constructor</code> <code>private</code>. For example, the <code>newInstance()</code> factory function in the following snippet creates a user by generating the <code>id</code> automatically:</p>\n<pre><code>class User private constructor(val id: Long, val name: String) {\n    companion object {\n        private var currentId = 0L;\n        fun newInstance(name: String) = User(currentId++, name)\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>val john = User.newInstance(&quot;John&quot;)\n</code></pre>\n<p>Notice how the <code>constructor</code> is kept <code>private</code> but the <code>companion object</code> has access to the <code>constructor</code>. This is useful when you want to provide multiple ways to create an object where the object construction process is complex.</p>\n<p>In the code above, consistency of the next <code>id</code> generation is guaranteed because a <code>companion object</code> is a singleton, only one object will keep track of the <code>id</code>, there won't be any duplicate <code>id</code>s.</p>\n<p>Also notice that companion objects can have properties (<code>currentId</code> in this case) to represent state.</p>\n<hr />\n<h2><code>companion object</code> extension</h2>\n<p>Companion objects cannot be inherited but we can use extension functions to enhance their functionality:</p>\n<pre><code>fun User.Companion.isLoggedIn(id: String): Boolean { }\n</code></pre>\n<p>The default class name of the <code>companion object</code> is <code>Companion</code>, if you don't specify it.</p>\n<p>Usage:</p>\n<pre><code>if (User.isLoggedIn(&quot;34&quot;)) { allowContent() }\n</code></pre>\n<p>This is useful for extending the functionality of the companion objects of third party library classes. Another advantage over Java's <code>static</code> members.</p>\n<hr />\n<h2>When to avoid <code>companion object</code></h2>\n<p><strong>Somewhat related members</strong></p>\n<p>When the functions/properties are not closely related but only somewhat related to a class, it is recommended that you use top-level functions/properties instead of <code>companion object</code>. And preferably define those functions before the class declaration in the same file as that of class:</p>\n<pre><code>fun getAllUsers() { }\n\nfun getProfileFor(userId: String) { }\n\ndata class User(val id: String, val name: String)\n</code></pre>\n<p><strong>Maintain single responsibility principle</strong></p>\n<p>When the functionality of the <code>object</code> is complicated or when the classes are big, you may want to separate them into individual classes. For example, You may need a separate class to represent a <code>User</code> and another class <code>UserDao</code> for database operations. A separate <code>UserCredentials</code> class for functions related to login. When you have a huge list of constants that are used in different places, you may want to group them in another separate class or file <code>UserConstants</code>. A different class <code>UserSettings</code> to represent settings. Yet another class <code>UserFactory</code> to create different instances of the <code>User</code> and so on.</p>\n<hr />\n<p>That's it! Hope that helps make your code more idiomatic to Kotlin.</p>\n"}], "owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39186, "favorite_count": 24, "accepted_answer_id": 38382433, "answer_count": 5, "score": 155, "last_activity_date": 1612628039, "creation_date": 1468521304, "last_edit_date": 1510551098, "question_id": 38381748, "link": "https://stackoverflow.com/questions/38381748/why-do-we-use-companion-object-as-a-kind-of-replacement-for-java-static-fields", "title": "Why do we use &quot;companion object&quot; as a kind of replacement for Java static fields in Kotlin?", "body": "<p>What is the intended meaning of \"companion object\"? So far I have been using it just to replace Java's <code>static</code> when I need it. </p>\n\n<p>I am confused with:</p>\n\n<ul>\n<li>Why is it called \"companion\"?</li>\n<li>Does it mean that to create multiple <em>static</em> properties, I have to group it together inside <code>companion object</code> block?</li>\n<li>To instantly create a singleton instance that is scoped to a class, I often write</li>\n</ul>\n\n<p>:</p>\n\n<pre><code>companion object {\n    val singleton by lazy { ... }\n}\n</code></pre>\n\n<p>which seems like an unidiomatic way of doing it. What's the better way?</p>\n"}, {"tags": ["android", "http", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1468491567, "creation_date": 1468491567, "answer_id": 38371604, "question_id": 38367915, "link": "https://stackoverflow.com/questions/38367915/none-of-the-following-functions-can-be-called-with-the-arguments-supplied-with/38371604#38371604", "title": "&quot;None of the following functions can be called with the arguments supplied&quot; with Fuel HTTP", "body": "<p>Got it - I was using an extremely old version of Android Studio (1.1 when latest is 2.1!). Updating Android Studio fixed all of the errors I mentioned, as well as some others that I encountered while tinkering where some built-in SDK functions were missing.</p>\n"}, {"comments": [{"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1468491719, "post_id": 38371621, "comment_id": 64153820, "body": "Before I fixed the issue myself I tried the last method you listed, but that didn&#39;t work. I&#39;ve fixed the problem now by updating Android Studio. Thanks for your reply though."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1468496478, "post_id": 38371621, "comment_id": 64156875, "body": "@OrangeFlash81 updating Android Studio by itself will not fix the compilation problem you posted in the question."}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1468496560, "post_id": 38371621, "comment_id": 64156930, "body": "I updated Android Studio, which then caused the Kotlin plugin to update. I didn&#39;t change my code at all."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1468497639, "post_id": 38371621, "comment_id": 64157643, "body": "@OrangeFlash81 Well, <code>Fuel.get(&quot;http:&#47;&#47;httpbin.org&#47;get&quot;).responseString({request, response, result -&gt; })</code> does not compile in 1.0.3 version of Kotlin compiler on my box - for reasons exaplained in the answer. <b>Notice the parentheses</b> - without them it will compile."}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1468497729, "post_id": 38371621, "comment_id": 64157702, "body": "Oh, you&#39;re right. Sorry about that. Before the update however it didn&#39;t work with or without parentheses."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1468491603, "creation_date": 1468491603, "answer_id": 38371621, "question_id": 38367915, "link": "https://stackoverflow.com/questions/38367915/none-of-the-following-functions-can-be-called-with-the-arguments-supplied-with/38371621#38371621", "title": "&quot;None of the following functions can be called with the arguments supplied&quot; with Fuel HTTP", "body": "<p>There are several overloads of <code>responseString</code> the one you see used a lot in <a href=\"https://github.com/kittinunf/Fuel#async-mode\" rel=\"nofollow\">Readme</a> has following signature:</p>\n\n<pre><code>fun responseString(\n    charset: Charset = Charsets.UTF_8, \n    handler: (Request, Response, Result&lt;String, FuelError&gt;) -&gt; Unit): Request\n</code></pre>\n\n<p>As you can see the first parameter has a default value. Notice also that the second (and at the same last) argument is a lambda that has no default value. If you choose to use a default parameter value (<code>charset</code>) you need to also use default values for subsequent parameters or you'll need to use <a href=\"https://kotlinlang.org/docs/reference/functions.html#named-arguments\" rel=\"nofollow\">named arguments</a>:</p>\n\n<pre><code>Fuel.get(\"http://httpbin.org/get\").responseString(handler = {request, response, result -&gt;\n    // Some callback code her\n})\n</code></pre>\n\n<p>Because:</p>\n\n<blockquote>\n  <p>In Kotlin, there is a convention that if the last parameter to a\n  function is a function, that parameter can be specified outside of the\n  parentheses</p>\n</blockquote>\n\n<p>You can also use the method as specified in Readme but <strong>without parentheses</strong>:</p>\n\n<pre><code>Fuel.get(\"http://httpbin.org/get\").responseString {request, response, result -&gt;\n    // Some callback code her\n}\n</code></pre>\n"}], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4798, "favorite_count": 0, "accepted_answer_id": 38371621, "answer_count": 2, "score": 2, "last_activity_date": 1468491603, "creation_date": 1468480786, "question_id": 38367915, "link": "https://stackoverflow.com/questions/38367915/none-of-the-following-functions-can-be-called-with-the-arguments-supplied-with", "title": "&quot;None of the following functions can be called with the arguments supplied&quot; with Fuel HTTP", "body": "<p>I've created a new Kotlin project in Android Studio, and I'm now trying to use the <a href=\"https://github.com/kittinunf/Fuel\" rel=\"nofollow noreferrer\">Fuel HTTP library</a> in that project. However, when I try to use the functions like in the examples on the GitHub readme, I get two errors:</p>\n\n<ol>\n<li><p>\"None of the following functions can be called with the arguments supplied.\" - <em>on the reference to responseString</em>\n<img src=\"https://i.imgur.com/fGZ0zJh.png\" alt=\"Screenshot\"></p></li>\n<li><p>\"Cannot infer a type for this parameter. Please specify it explicitly.\" - <em>on each of the arguments to the callback function</em></p></li>\n</ol>\n\n<p>This is the code I am using:</p>\n\n<pre><code>package me.myname.morefueltesting\n\nimport android.support.v7.app.ActionBarActivity\nimport android.os.Bundle\nimport android.view.Menu\nimport android.view.MenuItem\nimport com.github.kittinunf.fuel.Fuel\n\n\npublic class MainActivity : ActionBarActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        /*                                  First error       /--Second errors--\\\n                                                 |            |         |       |\n                                           \\/\\/\\/\\/\\/\\/\\/  \\/\\/\\/\\  /\\/\\/\\/\\  /\\/\\/\\   */\n        Fuel.get(\"http://httpbin.org/get\").responseString({request, response, result -&gt;\n            // Some callback code here\n        })\n    }\n}\n</code></pre>\n\n<p>My <em>build.gradle</em>:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion '22.0.1'\n\n    defaultConfig {\n        applicationId \"me.myname.morefueltesting\"\n        minSdkVersion 15\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile 'com.android.support:appcompat-v7:22.1.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile 'com.github.kittinunf.fuel:fuel-rxjava:1.3.1'\n    compile 'com.github.kittinunf.fuel:fuel-android:1.3.1'\n\n}\nbuildscript {\n    ext.kotlin_version = '1.0.3'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>How can I resolve these errors?</p>\n"}, {"tags": ["rest", "spring-boot", "jackson", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 1583160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/204fddf9820b18f8d994dbec3e860242?s=128&d=identicon&r=PG", "display_name": "irotsoma", "link": "https://stackoverflow.com/users/1583160/irotsoma"}, "edited": false, "score": 0, "creation_date": 1468529582, "post_id": 38365573, "comment_id": 64178013, "body": "Works great!  Any advice on getting this to work with an integration test?  I&#39;m getting the same error.  I created an HttpEntity with a header using the JSON MediaType and used a TestRestTemplate.postForEntity.  Seems to deserialize for the request, but the REST service is throwing the same error even though it works fine with a REST client when it&#39;s running normally."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 705, "user_id": 1583160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/204fddf9820b18f8d994dbec3e860242?s=128&d=identicon&r=PG", "display_name": "irotsoma", "link": "https://stackoverflow.com/users/1583160/irotsoma"}, "edited": false, "score": 0, "creation_date": 1468564922, "post_id": 38365573, "comment_id": 64187788, "body": "@irotsoma make sure you custom <code>ObjectMapperConfiguration</code> is <code>@Imported</code> in test."}, {"owner": {"reputation": 705, "user_id": 1583160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/204fddf9820b18f8d994dbec3e860242?s=128&d=identicon&r=PG", "display_name": "irotsoma", "link": "https://stackoverflow.com/users/1583160/irotsoma"}, "edited": false, "score": 1, "creation_date": 1468608806, "post_id": 38365573, "comment_id": 64214820, "body": "The first thing I tried was adding <code>@Import(ObjectMapperConfiguration::class)</code> to the test class along with <code>@RunWith(SpringJUnit4ClassRunner::class) @SpringApplicationConfiguration(CentralController::class) @WebIntegrationTest</code>.  Any ideas on what else to check?"}, {"owner": {"reputation": 8754, "user_id": 386201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1de5c0457dfa4095e308a0901413b5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stuck", "link": "https://stackoverflow.com/users/386201/stuck"}, "reply_to_user": {"reputation": 705, "user_id": 1583160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/204fddf9820b18f8d994dbec3e860242?s=128&d=identicon&r=PG", "display_name": "irotsoma", "link": "https://stackoverflow.com/users/1583160/irotsoma"}, "edited": false, "score": 0, "creation_date": 1618833152, "post_id": 38365573, "comment_id": 118713951, "body": "@irotsoma did you figure out a solution for the tests?"}, {"owner": {"reputation": 8754, "user_id": 386201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1de5c0457dfa4095e308a0901413b5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stuck", "link": "https://stackoverflow.com/users/386201/stuck"}, "edited": false, "score": 0, "creation_date": 1618833334, "post_id": 38365573, "comment_id": 118714029, "body": "The error might also originate from missing <code>@RequestBody</code> on the controller parameter."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 7, "last_activity_date": 1468470971, "last_edit_date": 1495540859, "creation_date": 1468470971, "answer_id": 38365573, "question_id": 38364627, "link": "https://stackoverflow.com/questions/38364627/spring-boot-rest-service-json-deserialization-not-working/38365573#38365573", "title": "Spring Boot REST Service: JSON Deserialization Not Working", "body": "<p>You need to help Jackson in deserializing data classes as indicated in the error message. You can do so by registering <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\">jackson-module-kotlin</a> in <code>ObjectMapper</code> like so:</p>\n\n<pre><code>val mapper = ObjectMapper().registerModule(KotlinModule())\n</code></pre>\n\n<p>To tell spring about your own customized <code>ObjectMapper</code> <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-customize-the-jackson-objectmapper\" rel=\"nofollow noreferrer\">define a <code>@Bean</code> and mark it as <code>@Primary</code></a>:</p>\n\n<pre><code>@Configuration\nopen class ObjectMapperConfiguration {\n  @Bean\n  @Primary\n  open fun objectMapper() = ObjectMapper().apply { \n    registerModule(KotlinModule()) \n  }\n}\n</code></pre>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/33368328/how-to-use-jackson-to-deserialize-to-kotlin-collections\">How to use jackson to deserialize to Kotlin collections</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34716697/how-do-i-deserialize-json-into-a-listsometype-with-kotlin-jackson/34717277#34717277\">How do I deserialize JSON into a List&lt;SomeType&gt; with Kotlin + Jackson</a></li>\n</ul>\n"}], "owner": {"reputation": 705, "user_id": 1583160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/204fddf9820b18f8d994dbec3e860242?s=128&d=identicon&r=PG", "display_name": "irotsoma", "link": "https://stackoverflow.com/users/1583160/irotsoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10870, "favorite_count": 0, "accepted_answer_id": 38365573, "answer_count": 1, "score": 7, "last_activity_date": 1470529678, "creation_date": 1468463930, "last_edit_date": 1470529678, "question_id": 38364627, "link": "https://stackoverflow.com/questions/38364627/spring-boot-rest-service-json-deserialization-not-working", "title": "Spring Boot REST Service: JSON Deserialization Not Working", "body": "<p>I'm working on a REST service using spring-boot and Kotlin.  (I should mention it's my first time using both.)  I'm having trouble getting Jackson to deserialize JSON from a POST request using this code:</p>\n\n<pre><code>@RequestMapping(\"cloudservice/login/{uuid}\", method = arrayOf(RequestMethod.POST))\nfun login(@PathVariable(value=\"uuid\")uuid: String, @RequestBody user: CloudServiceUser ) : ResponseEntity&lt;CloudServiceUser&gt; {\n\n    val cloudServiceFactory : Class&lt;CloudServiceFactory&gt; = cloudServiceRepository.cloudServiceExtensions[UUID.fromString(uuid)] ?: throw InvalidPathVariableException(\"Invalid UUID.\")\n    var token : String\n    try {\n        token = cloudServiceFactory.newInstance().authenticationService.login(user.userId, user.password)\n    } catch (e:Exception ){\n        throw CloudServiceException(e.message)\n    }\n\n    return ResponseEntity(CloudServiceUser(userId=user.userId, password = \"\", token = token),HttpStatus.OK)\n}\n</code></pre>\n\n<p>The user object is simply:</p>\n\n<pre><code>data class CloudServiceUser(val userId: String, val password:String, val token:String)\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>org.springframework.http.converter.HttpMessageNotReadableException: Could not read document: Can not construct instance of com.irotsoma.cloudbackenc.cloudservice.CloudServiceUser: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: java.io.PushbackInputStream@682b15d6; line: 1, column: 2]; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.irotsoma.cloudbackenc.cloudservice.CloudServiceUser: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: java.io.PushbackInputStream@682b15d6; line: 1, column: 2]\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:229) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:213) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:197) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:147) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:125) ~[spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:99) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:161) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:128) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:832) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:743) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:961) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:895) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) [spring-webmvc-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) [tomcat-embed-websocket-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:261) [spring-boot-actuator-1.3.5.RELEASE.jar:1.3.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:115) [spring-boot-actuator-1.3.5.RELEASE.jar:1.3.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103) [spring-boot-actuator-1.3.5.RELEASE.jar:1.3.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:522) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1095) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1502) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1458) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_92]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_92]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.33.jar:8.0.33]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.irotsoma.cloudbackenc.cloudservice.CloudServiceUser: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: java.io.PushbackInputStream@682b15d6; line: 1, column: 2]\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:261) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1420) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1011) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1201) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3789) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2913) ~[jackson-databind-2.8.0.jar:2.8.0]\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:226) ~[spring-web-4.2.6.RELEASE.jar:4.2.6.RELEASE]\n    ... 66 common frames omitted\n</code></pre>\n\n<p>However, the serializing in the return statement works just fine to serialize to a JSON object and sends the response.  It's just the deserialization that isn't working.</p>\n\n<p>If I change the body variable to a String and manually create mapper, it also works fine. Like this:</p>\n\n<pre><code>@RequestMapping(\"cloudservice/login/{uuid}\", method = arrayOf(RequestMethod.POST))\nfun login(@PathVariable(value=\"uuid\")uuid: String, @RequestBody user: String ) : ResponseEntity&lt;CloudServiceUser&gt; {\n\n    val mapper = ObjectMapper().registerModule(KotlinModule())\n    val mapperData: CloudServiceUser = mapper.readValue(user)\n\n\n    val cloudServiceFactory : Class&lt;CloudServiceFactory&gt; = cloudServiceRepository.cloudServiceExtensions[UUID.fromString(uuid)] ?: throw InvalidPathVariableException(\"Invalid UUID.\")\n    var token : String\n    try {\n        token = cloudServiceFactory.newInstance().authenticationService.login(mapperData.userId, mapperData.password)\n    } catch (e:Exception ){\n        throw CloudServiceException(e.message)\n    }\n\n    return ResponseEntity(CloudServiceUser(userId=mapperData.userId, password = \"\", token = token),HttpStatus.OK)\n}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>It's an open source project, so feel free to browse it if you need more info:  <a href=\"https://github.com/irotsoma/cloudbackenc\" rel=\"noreferrer\">https://github.com/irotsoma/cloudbackenc</a>.  Note that it is in a very early state at the moment.</p>\n\n<p>EDIT:  Just wanted to add a note about my troubles with Integration tests as noted in comments on the accepted answer.  I ended up never getting the integration test to be able to deserialize the response (though the REST controller side of things worked fine just like in production).  So I found a workaround using a Map object, which for some reason it was able to deserialize to, and then manually processing it rather than using the class object.  Since it's just a problem with the test and not the code being tested, this was fine for me.</p>\n\n<pre><code>val returnValue = template.postForEntity(\"REQUEST URL\", httpEntity, Map::class.java)\n</code></pre>\n"}]