[{"tags": ["generics", "kotlin", "kotlin-android-extensions", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10648203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rA5r99Ynd8g/AAAAAAAAAAI/AAAAAAAAAAc/yu9QxNJDIZg/photo.jpg?sz=128", "display_name": "Ryan Shea", "link": "https://stackoverflow.com/users/10648203/ryan-shea"}, "edited": false, "score": 0, "creation_date": 1555017933, "post_id": 55623697, "comment_id": 97973163, "body": "Deleted my comment because the formatting was bad and added it as an edit to the post. I think this is a good idea but my cases are actually function calls on a String variable (URL in this case) so it looks like <code>variable.contains(&quot;...&quot;)</code> or <code>variable.startswith(&quot;...&quot;)</code> for parsing a URL that represents a string."}, {"owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "reply_to_user": {"reputation": 73, "user_id": 10648203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rA5r99Ynd8g/AAAAAAAAAAI/AAAAAAAAAAc/yu9QxNJDIZg/photo.jpg?sz=128", "display_name": "Ryan Shea", "link": "https://stackoverflow.com/users/10648203/ryan-shea"}, "edited": false, "score": 1, "creation_date": 1555037796, "post_id": 55623697, "comment_id": 97977389, "body": "That&#39;s tricky, the only improvement I can think of is delegating the responsibility of determining the type of URL to another function and representing the result as an enum or sealed class."}], "tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": true, "score": 1, "last_activity_date": 1555037783, "last_edit_date": 1555037783, "creation_date": 1554948538, "answer_id": 55623697, "question_id": 55622840, "link": "https://stackoverflow.com/questions/55622840/is-there-a-way-in-kotlin-to-combine-an-inline-function-and-a-when-expression-wit/55623697#55623697", "title": "Is there a way in Kotlin to combine an inline function and a when expression with an extension function?", "body": "<p>You can perform the cast inside the argument of the when statement.</p>\n\n<p>E.g.</p>\n\n<pre><code>when (variable as? Type) {\n    case1 -&gt; ...\n    case2 -&gt; ...\n    null -&gt; ...\n    else -&gt; ...\n}\n</code></pre>\n\n<p>Another example based on comment:</p>\n\n<pre><code>enum class UrlType { TYPE_1, TYPE_2, TYPE_3, NULL }\n\nfun String?.urlType(): UrlType {\n    return when {\n        this?.contains(\"...\") == true -&gt; UrlType.TYPE_1\n        this?.startsWith(\"...\") == true -&gt; UrlType.TYPE_2\n        this != null -&gt; UrlType.TYPE_3\n        else -&gt; UrlType.NULL\n    }\n}\n\nwhen (variable.urlType()) {\n    UrlType.TYPE_1 -&gt; doSomething()\n    UrlType.TYPE_2 -&gt; doSomethingElse()\n    UrlType.TYPE_3 -&gt; ...\n    UrlType.NULL -&gt; ...\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10648203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rA5r99Ynd8g/AAAAAAAAAAI/AAAAAAAAAAc/yu9QxNJDIZg/photo.jpg?sz=128", "display_name": "Ryan Shea", "link": "https://stackoverflow.com/users/10648203/ryan-shea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 55623697, "answer_count": 1, "score": 5, "last_activity_date": 1555037783, "creation_date": 1554940632, "last_edit_date": 1555017789, "question_id": 55622840, "link": "https://stackoverflow.com/questions/55622840/is-there-a-way-in-kotlin-to-combine-an-inline-function-and-a-when-expression-wit", "title": "Is there a way in Kotlin to combine an inline function and a when expression with an extension function?", "body": "<p>I would like to reduce the size of an if-elseif-else ladder but can't use just <code>when</code> because the smartcast doesn't catch the cases I'm dealing with. I'm wondering if I can combine something like a <code>let</code> or an <code>also</code> and a <code>when</code> into a single inline function to solve this.</p>\n\n<p>I've tried using smart casting with <code>is</code> but it's problematic because I'd have to do a <code>when</code> within the outer <code>when</code> to actually get the result I wanted. I ended up doing something similar to one of the responses from this post: <a href=\"https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v\">Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value</a> by just having a <code>let</code> block acting on the non-null variable then executing the <code>when</code> block inside that <code>let</code>.</p>\n\n<p>Case I'm currently going with:</p>\n\n<pre><code>variable?.let { safeVariable -&gt;\n    when {\n        case1 -&gt; doSomething(safeVariable)\n        case2 -&gt; doSomethingElse(safeVariable)\n         ...\n        else -&gt; catchAll(safeVariable)\n    }\n    return@let\n}\nLog.e(TAG, \"variable was null\")\n</code></pre>\n\n<p>Cases I've considered:</p>\n\n<pre><code>when(variable) {\n    is Type -&gt; when {\n                   case1 -&gt; doSomething(variable)\n                   case2 -&gt; doSomethingElse(variable)\n                   ...\n                   else -&gt; catchAll(variable)\n               }\n   else -&gt; Log.e(TAG, \"variable was null\")\n}\n</code></pre>\n\n<pre><code>if (variable is Type) {\n    when {\n        case1 -&gt; doSomething(variable)\n        case2 -&gt; doSomethingElse(variable)\n         ...\n        else -&gt; catchAll(variable)\n    }\n} else {\n    Log.e(TAG, \"variable was null\")\n}\n</code></pre>\n\n<p>What I'd like to be able to write would look like this:</p>\n\n<pre><code>variable?.alsoWhen { safeVariable -&gt;\n    case1 -&gt; doSomething(safeVariable)\n    case2 -&gt; doSomethingElse(safeVariable)\n     ...\n    else -&gt; catchAll(safeVariable)\n} ?: Log.e(TAG, \"variable was null\")\n</code></pre>\n\n<p>Is this possible to write in Kotlin with an extension function and if not is there at least an alternative to what I wrote above to make it more compact and readable?</p>\n\n<p>EDIT:</p>\n\n<p>Based on Damon's comment below I did think of a slightly cleaner way to approach this with:</p>\n\n<pre><code>when(true) { \n    variable?.case1 -&gt; doSomething(variable) \n    variable?.case2 -&gt; doSomethingElse(variable) \n     ... \n    variable is String -&gt; catchAll(variable)\n    else -&gt; Log.e(TAG, \"variable was null\") \n} \n</code></pre>\n\n<p>It would be nice to get rid of the <code>(true)</code> next to the when if possible but this is clean enough that I'm pretty happy with the solution.</p>\n"}, {"tags": ["android", "kotlin", "system.reactive"], "comments": [{"owner": {"reputation": 308, "user_id": 6232474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aee26cbaa25681b3894e6760ff671a15?s=128&d=identicon&r=PG&f=1", "display_name": "Iain", "link": "https://stackoverflow.com/users/6232474/iain"}, "edited": false, "score": 0, "creation_date": 1554974928, "post_id": 55622100, "comment_id": 97949740, "body": "Did you manage to get this working in the end?"}, {"owner": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "reply_to_user": {"reputation": 308, "user_id": 6232474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aee26cbaa25681b3894e6760ff671a15?s=128&d=identicon&r=PG&f=1", "display_name": "Iain", "link": "https://stackoverflow.com/users/6232474/iain"}, "edited": false, "score": 0, "creation_date": 1555024982, "post_id": 55622100, "comment_id": 97975091, "body": "@lain No, it didn&#39;t work for me. It&#39;s not iterating the list. I don&#39;t know what I&#39;m doing wrong. I changed it to your solution and didn&#39;t work."}, {"owner": {"reputation": 308, "user_id": 6232474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aee26cbaa25681b3894e6760ff671a15?s=128&d=identicon&r=PG&f=1", "display_name": "Iain", "link": "https://stackoverflow.com/users/6232474/iain"}, "edited": false, "score": 0, "creation_date": 1555027733, "post_id": 55622100, "comment_id": 97975624, "body": "I&#39;ve made a correct to my answer. If you have more issues then maybe you could provide me with the source code."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "edited": false, "score": 0, "creation_date": 1555090618, "post_id": 55622329, "comment_id": 98002524, "body": "This worked like a charm. The stream was producing some errors, but I managed to fix them, and this solution was the one. Thanks!"}], "tags": [], "owner": {"reputation": 308, "user_id": 6232474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aee26cbaa25681b3894e6760ff671a15?s=128&d=identicon&r=PG&f=1", "display_name": "Iain", "link": "https://stackoverflow.com/users/6232474/iain"}, "is_accepted": true, "score": 1, "last_activity_date": 1555027641, "last_edit_date": 1555027641, "creation_date": 1554936530, "answer_id": 55622329, "question_id": 55622100, "link": "https://stackoverflow.com/questions/55622100/populate-some-list-before-returning-it-with-rx/55622329#55622329", "title": "Populate some list before returning it with RX", "body": "<p>Is the use of <code>Flowable</code> necessary? </p>\n\n<p>Something like this would probably be more suitable:</p>\n\n<pre><code>    private val destinations = listOf(\"1\", \"2\", \"3\", \"4\")\n\n    fun getAirportDestinations(airportCode: String): Single&lt;List&lt;String&gt;&gt; =\n            Observable.just(destinations)\n                    .flatMapIterable { it }\n                    .flatMapSingle { getAirportByCode(it) }\n                    .toList()\n\n    private fun getAirportByCode(destinationCode: String): Single&lt;String&gt; =\n            Single.just(\"ABC1\")\n</code></pre>\n\n<p>\"it's emitting an observable per item inside the list\" - <code>flatmap</code> will emit for every item. The use of <code>toList()</code> will mean that it \"<strong>Returns a Single that emits a single item, a list composed of all the items emitted by the finite source ObservableSource.</strong>\"</p>\n"}], "owner": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55622329, "answer_count": 1, "score": 0, "last_activity_date": 1555027641, "creation_date": 1554934863, "question_id": 55622100, "link": "https://stackoverflow.com/questions/55622100/populate-some-list-before-returning-it-with-rx", "title": "Populate some list before returning it with RX", "body": "<p>I'm trying to populate a list with detailed info about an airport. First off, I'm getting the list of airports that fulfill certain condition, and getting detailed info of every item that's in the list. And finally, i'm returning the populated list.</p>\n\n<p>Here'w what i have:</p>\n\n<pre><code>override fun createObservable(params: String): Flowable&lt;List&lt;AirportsEntity&gt;&gt; {\n        val destinationAirports = mutableSetOf&lt;AirportsEntity&gt;()\n        return this.searchFlightRepository.getDestinationsByCode(params)\n            .flatMap {\n                Flowable.fromIterable(it)\n            }\n            .flatMap {\n                this.searchFlightRepository.getAirportByCode(it.destination)\n            }\n            .flatMap {\n                destinationAirports.add(it)\n                Flowable.just(destinationAirports.toList())\n            }\n    }\n</code></pre>\n\n<p>The above code works just fine, but it's emitting an observable per item inside the list. I wonder how to change it in order to populate the list first, and then return it when the fetching process is done.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "xml", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 4, "creation_date": 1554934540, "post_id": 55621956, "comment_id": 97937056, "body": "You&#39;re trying to hide different instances than the ones that you create and transact in <code>onCreate()</code>. Either keep references to the ones you&#39;re creating in <code>onCreate()</code>, or add tags to their transactions, and use <code>FragmentManager#findFragmentByTag()</code> to get them in <code>onNavigationItemSelected()</code>."}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 1, "creation_date": 1554935186, "post_id": 55621956, "comment_id": 97937297, "body": "Thankyou! <code>transaction.add(R.id.fragment_layout, GameFragment(), &quot;add_game&quot;)</code> and <code>val game = supportFragmentManager.findFragmentByTag(&quot;add_game&quot;)</code> works perfect."}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554933956, "creation_date": 1554933956, "question_id": 55621956, "link": "https://stackoverflow.com/questions/55621956/fragment-hide-does-not-hide-my-fragment", "title": "Fragment.hide() does not hide my Fragment", "body": "<p>I've implemented the most basic form of <code>hide()</code> Fragment and it simply doesn't work. </p>\n\n<p>My initial <code>onCreate()</code> adds all 3 fragments to the activity (they all show at the same time). Then when a navigation item is clicked I call <code>hide()</code> on 2 fragments - however they don't disappear from the screen - nothing changes. </p>\n\n<p><strong>My activity:</strong></p>\n\n<pre><code>class TruthOrDare : FragmentActivity(), BottomNavigationView.OnNavigationItemSelectedListener {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_truth_or_dare)\n        bottomNav_truthordare.setOnNavigationItemSelectedListener(this)\n        bottomNav_truthordare.selectedItemId = R.id.action_game\n        if (savedInstanceState != null) {\n            return\n        }\n        firstFragment.arguments = intent.extras\n        val transaction = supportFragmentManager.beginTransaction()\n        transaction.add(R.id.fragment_layout, GameFragment())\n        transaction.add(R.id.fragment_layout, LeaderboardsFragment())\n        transaction.add(R.id.fragment_layout, OptionsFragment())\n        transaction.commit()\n\n    }\n\n    override fun onNavigationItemSelected(item: MenuItem): Boolean {\n        val transaction = supportFragmentManager.beginTransaction()\n        transaction.hide(GameFragment())\n        transaction.hide(OptionsFragment())\n        transaction.commit()\n\n        return true\n    }\n</code></pre>\n\n<p><strong>My XML:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/layout_truthordare\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:animateLayoutChanges=\"true\"\n    tools:context=\".TruthOrDare\"&gt;\n\n    &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar_truthordare\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"@color/colorPrimaryDark\"\n        android:elevation=\"4dp\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.ActionBar\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:popupTheme=\"@color/colorPrimaryDark\"\n        app:title=\"Level 1\" /&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/fragment_layout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_above=\"@id/bottomNav_truthordare\" android:layout_below=\"@id/toolbar_truthordare\"&gt;\n\n    &lt;/FrameLayout&gt;\n\n    &lt;android.support.design.widget.BottomNavigationView\n        android:id=\"@+id/bottomNav_truthordare\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@color/colorPrimaryDark\"\n        app:itemIconTint=\"@color/bottom_nav_items\"\n        app:itemTextColor=\"@color/bottom_nav_items\"\n        android:layout_alignParentBottom=\"true\"\n        app:menu=\"@menu/menu\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Can someone tell me why <code>hide()</code> doesn't work?</p>\n"}, {"tags": ["android", "kotlin", "mockito", "robolectric"], "answers": [{"tags": [], "owner": {"reputation": 595, "user_id": 2980980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Gn509.jpg?s=128&g=1", "display_name": "AmirG", "link": "https://stackoverflow.com/users/2980980/amirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1554992918, "creation_date": 1554992918, "answer_id": 55634938, "question_id": 55621615, "link": "https://stackoverflow.com/questions/55621615/why-mocked-object-function-throws-nulls-instead-of-mocked-data-when-using-robole/55634938#55634938", "title": "why mocked object function throws nulls instead of mocked data when using RobolectricTestRunner?", "body": "<p>I found that you don't need the rule for rewriting the configuration of RX if you are running with Robolectric</p>\n\n<p>So the code worked after deleting this classrule:</p>\n\n<pre><code>companion object {\n        @ClassRule\n        @JvmField\n        val schedulers = RxImmediateeSchedulerRule()\n    }\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 2980980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Gn509.jpg?s=128&g=1", "display_name": "AmirG", "link": "https://stackoverflow.com/users/2980980/amirg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554992918, "creation_date": 1554932059, "last_edit_date": 1554989469, "question_id": 55621615, "link": "https://stackoverflow.com/questions/55621615/why-mocked-object-function-throws-nulls-instead-of-mocked-data-when-using-robole", "title": "why mocked object function throws nulls instead of mocked data when using RobolectricTestRunner?", "body": "<p>i have this test class running with <code>MockitoJUnitRunner</code> before and then i added <code>RoboLectric</code>, now i use <code>RobolectricTestRunner</code> </p>\n\n<p>So the first thing it tryed is running my old tests but just changing the runner and the test now always fail. I do not really understand what is happening here, i am just trying to make my old test work with <code>RobolectricTestRunner</code> without stop using <code>Mockito</code>.</p>\n\n<p><strong>My Code before changing to RoboLectric (TEST PASS SUCCESSFULLY)</strong></p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass LauncherViewModelTest {\n\n    companion object {\n        @ClassRule\n        @JvmField\n        val schedulers = RxImmediateeSchedulerRule()\n    }\n\n    @Rule\n    @JvmField\n    val rule = InstantTaskExecutorRule()\n\n    @Mock\n    private lateinit var mockContext: MyApplication\n\n    @Mock\n    private lateinit var mockedDatabase: MyDatabase\n\n    @Mock\n    private lateinit var session: Session\n\n    // \n    @Mock\n    lateinit var mockedDatabaseRxWrapper: DatabaseRxWrapper\n\n    /** Evaluated class **/\n\n    @InjectMocks\n    lateinit var launcherViewModel: LauncherViewModel\n\n    @Test\n    fun checkIfHasSessionSuccess() {\n\n        val sessionFlowable: Flowable&lt;Session&gt; = Flowable.fromCallable { session }\n\n        FieldSetter.setField(launcherViewModel,\n                launcherViewModel.javaClass.getDeclaredField(\"databaseRxWrapper\"), mockedDatabaseRxWrapper)\n\n        doReturn(sessionFlowable).`when`(mockedDatabaseRxWrapper).getSession()\n\n        launcherViewModel.checkIfHasSession()\n\n        //$hasSession is a mutable live data\n        Assert.assertEquals(true, launcherViewModel.hasSession.value)\n    }\n}\n</code></pre>\n\n<p><strong>My Code after changing to RoboLectric :</strong> (DatabaseRxWrapper.getSession() returns always null even when i use Mockito.doReturn().when())</p>\n\n<pre><code>@RunWith(RobolectricTestRunner::class)\nclass LauncherViewModelTest {\n\n    companion object {\n        @ClassRule\n        @JvmField\n        val schedulers = RxImmediateeSchedulerRule()\n    }\n\n    @Rule\n    @JvmField\n    val rule = InstantTaskExecutorRule()\n\n    @get:Rule\n    val mockitoRule = MockitoJUnit.rule()\n\n    @Mock\n    private lateinit var mockContext: MyApplication\n\n    @Mock\n    private lateinit var mockedDatabase: MyDatabase\n\n    @Mock\n    private lateinit var session: Session\n\n    // \n    @Mock\n    lateinit var mockedDatabaseRxWrapper: DatabaseRxWrapper\n\n    /** Evaluated class **/\n\n    @InjectMocks\n    lateinit var launcherViewModel: LauncherViewModel\n\n    @Test\n    fun checkIfHasSessionSuccess() {\n\n        val sessionFlowable: Flowable&lt;Session&gt; = Flowable.fromCallable { session }\n\n        FieldSetter.setField(launcherViewModel,\n                launcherViewModel.javaClass.getDeclaredField(\"databaseRxWrapper\"), mockedDatabaseRxWrapper)\n\n        doReturn(sessionFlowable).`when`(mockedDatabaseRxWrapper).getSession()\n\n        launcherViewModel.checkIfHasSession()\n\n        //$hasSession is a mutable live data\n        Assert.assertEquals(true, launcherViewModel.hasSession.value)\n    }\n}\n</code></pre>\n\n<p><strong>Class under Test</strong></p>\n\n<pre><code>class LauncherViewModel(application: Application) : AndroidViewModel(application) {\n\n        @Inject\n        lateinit var databaseRxWrapper: DatabaseRxWrapper\n\n        val hasSession: MutableLiveData&lt;Boolean&gt; = MutableLiveData()\n\n        val application by lazy { getApplication&lt;MyApplication&gt;() }\n\n        init {\n            application.getAppComponent()?.inject(this)\n        }\n\n        fun saveLocation(location: Location) = sharedPreferenceManager.saveLocation(location)\n\n        fun checkIfHasSession() {\n            databaseRxWrapper.getSession()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe({\n                    hasSession.postValue(true)\n                }, {\n                    hasSession.postValue(false)\n                })\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "edited": false, "score": 0, "creation_date": 1554962577, "post_id": 55621511, "comment_id": 97943444, "body": "What do you mean by load the button? Make the button visible? What&#39;s your goal here? Do you want the onClickListener to behave differently for the same button depending on the view change?"}, {"owner": {"reputation": 11, "user_id": 11342809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF5NI.jpg?s=128&g=1", "display_name": "Sparib", "link": "https://stackoverflow.com/users/11342809/sparib"}, "reply_to_user": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "edited": false, "score": 0, "creation_date": 1555066928, "post_id": 55621511, "comment_id": 97988946, "body": "I meant load the button&#39;s onClickListener with it being on a separate view because if you try to set onClickListener for a button not in the current view, it gives an error saying you tried changing a null value"}], "owner": {"reputation": 11, "user_id": 11342809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF5NI.jpg?s=128&g=1", "display_name": "Sparib", "link": "https://stackoverflow.com/users/11342809/sparib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554959817, "creation_date": 1554931398, "last_edit_date": 1554959817, "question_id": 55621511, "link": "https://stackoverflow.com/questions/55621511/is-there-a-way-to-load-a-buttons-onclicklistener-if-its-not-already-being-show", "title": "Is there a way to load a button&#39;s onClickListener if it&#39;s not already being shown?", "body": "<p>I'm trying to make a back button for a different page than the originally loaded one but unless the button is already loaded, you can't do anything with it. How do I load a button once a certain page is loaded, and unload it when the view is switched?</p>\n\n<p>I've already tried if statements and while loops but if statements do nothing and while loops prevent the page from loading.</p>\n\n<p>These are what the if statements look like:</p>\n\n<pre><code>if (view == 1) {\n   formulas.setOnClickListener { \n      setContentView(activity_main)\n      view = 2\n   }\n}\n\nif (view == 2) {\n   back.setOnClickListener { \n      setContentView(formulas_main)\n      view = 1\n   }\n}\n</code></pre>\n\n<p>and the while loops look like:</p>\n\n<pre><code>while (view == 1) {\n   formulas.setOnClickListener {\n      setContentView(activity_main)\n      view = 2\n   }\n}\n\nwhile (view == 2) {\n   back.setOnClickListener {\n      setContentView(formulas_main)\n      view = 1\n   }\n}\n</code></pre>\n"}, {"tags": ["swift", "design-patterns", "kotlin", "software-design"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 2777865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff645c335ad7c355dc6dcf22d3390aa3?s=128&d=identicon&r=PG&f=1", "display_name": "dimart.sp", "link": "https://stackoverflow.com/users/2777865/dimart-sp"}, "edited": false, "score": 0, "creation_date": 1554993689, "post_id": 55621570, "comment_id": 97961604, "body": "Thanks! One moment though: it doesn&#39;t seem to be working when <code>FooInterface</code> is compiled to Objective-C by Kotlin/Native, since it&#39;s not possible to mark functions with @objc in a protocol extenstion."}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 317, "user_id": 2777865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff645c335ad7c355dc6dcf22d3390aa3?s=128&d=identicon&r=PG&f=1", "display_name": "dimart.sp", "link": "https://stackoverflow.com/users/2777865/dimart-sp"}, "edited": false, "score": 1, "creation_date": 1554996419, "post_id": 55621570, "comment_id": 97963426, "body": "@dimart.sp, thanks for your comment. And yes, it&#39;s true, you cannot implement <code>@objc</code> methods with protocol extension. As for now, I cannot think of something concise in this case. By the way, Property Delegation is currently one of the hot topics in Evolution of forums.swift.org, so Class Delegation may also be included in future Swift."}], "tags": [], "owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "is_accepted": true, "score": 2, "last_activity_date": 1554931751, "creation_date": 1554931751, "answer_id": 55621570, "question_id": 55621147, "link": "https://stackoverflow.com/questions/55621147/what-is-the-proper-way-to-code-kotlins-by-clause-a-k-a-class-delegation-in-s/55621570#55621570", "title": "What is the proper way to code Kotlin&#39;s by-clause (a.k.a. Class Delegation) in Swift?", "body": "<p>As you already know, Swift does not have direct support for Class Delegation.</p>\n\n<p>So, you may need more code than Kotlin, which has direct support for Delegation. But, instead of extending each class which implements the protocol, you can add default implementation for delegation.</p>\n\n<pre><code>protocol FooInterface {\n    func fooFun1()\n\n    //...\n}\nprotocol FooDelegateable {\n    var fooDelegate: FooInterface {get}\n}\nextension FooInterface where Self: FooDelegateable {\n    func fooFun1() {\n        self.fooDelegate.fooFun1()\n    }\n\n    //...\n}\n\nstruct SomeFoo: FooInterface {\n    func fooFun1() {\n        print(\"FooInterface is delegated to SomeFoo.\")\n    }\n}\n\nclass A: FooInterface, FooDelegateable {\n    private let foo: FooInterface\n\n    //FooDelegateable\n    var fooDelegate: FooInterface {return foo}\n\n    init(_ foo: FooInterface) {\n        self.foo = foo\n    }\n\n    //...\n}\n\nlet a = A(SomeFoo())\na.fooFun1() //-&gt;FooInterface is delegated to SomeFoo.\n</code></pre>\n\n<p>How is it?</p>\n"}], "owner": {"reputation": 317, "user_id": 2777865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff645c335ad7c355dc6dcf22d3390aa3?s=128&d=identicon&r=PG&f=1", "display_name": "dimart.sp", "link": "https://stackoverflow.com/users/2777865/dimart-sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 55621570, "answer_count": 1, "score": 1, "last_activity_date": 1554931751, "creation_date": 1554929477, "question_id": 55621147, "link": "https://stackoverflow.com/questions/55621147/what-is-the-proper-way-to-code-kotlins-by-clause-a-k-a-class-delegation-in-s", "title": "What is the proper way to code Kotlin&#39;s by-clause (a.k.a. Class Delegation) in Swift?", "body": "<p>I need to re-code in Swift a Kotlin class defined like this:</p>\n\n<pre><code>class A(private val foo: FooInterface = FooBase()) : FooInterface by foo {\n  ...\n}\n</code></pre>\n\n<p>Is the only way to achieve that is by directly extending the class A with the <code>FooInterface</code> protocol and redirecting all calls to a local private <code>Foo</code> instance?</p>\n\n<pre><code>extension A: FooInterface {\n  func fooFun1() {\n    self.privateFooInstance.fooFun1()\n  }\n}\n</code></pre>\n\n<p>What is the most concise way to do that?</p>\n"}, {"tags": ["android", "json", "kotlin"], "comments": [{"owner": {"reputation": 6686, "user_id": 9086466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JI5yN.png?s=128&g=1", "display_name": "Ctznkane525", "link": "https://stackoverflow.com/users/9086466/ctznkane525"}, "edited": false, "score": 1, "creation_date": 1554926208, "post_id": 55620367, "comment_id": 97933800, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21450060/how-to-join-two-javascript-objects-without-using-jquery\">How to join two JavaScript Objects, without using JQUERY</a>"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1554926233, "post_id": 55620367, "comment_id": 97933807, "body": "Which language? Java or Kotlin? Choose one..."}, {"owner": {"reputation": 517, "user_id": 11162243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U7CnTVvDPEc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIqAR-LoNw_pZaCFkU0iJLZxuX2A/mo/photo.jpg?sz=128", "display_name": "Alexander Gapanowich", "link": "https://stackoverflow.com/users/11162243/alexander-gapanowich"}, "edited": false, "score": 0, "creation_date": 1554926775, "post_id": 55620367, "comment_id": 97934031, "body": "What if use a dataBase, and update, only fields you need?"}, {"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1554926941, "post_id": 55620367, "comment_id": 97934112, "body": "Kotlin will be preferred @Code-Apprentice"}, {"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "edited": false, "score": 0, "creation_date": 1554927005, "post_id": 55620367, "comment_id": 97934151, "body": "I am not looking for solution in JavaScript but in Java or kotlin"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1554927116, "post_id": 55620367, "comment_id": 97934201, "body": "@codepeaker Start by breaking this into several smaller pieces. First you need to parse the JSON response. Then you need to determine how you represent the object in Kotlin. Then you need to update the individual fields in that representation."}, {"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "reply_to_user": {"reputation": 517, "user_id": 11162243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U7CnTVvDPEc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIqAR-LoNw_pZaCFkU0iJLZxuX2A/mo/photo.jpg?sz=128", "display_name": "Alexander Gapanowich", "link": "https://stackoverflow.com/users/11162243/alexander-gapanowich"}, "edited": false, "score": 0, "creation_date": 1554927216, "post_id": 55620367, "comment_id": 97934238, "body": "@Alexander That will be one of the way, but Incorporating DB in an app won&#39;t be a good idea for the sake of solution"}, {"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "edited": false, "score": 0, "creation_date": 1554927342, "post_id": 55620367, "comment_id": 97934294, "body": "Traversing through individual fields won&#39;t be maintainable in the long run"}, {"owner": {"reputation": 31251, "user_id": 51591, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TsvFC.jpg?s=128&g=1", "display_name": "Micha\u0142 Ziober", "link": "https://stackoverflow.com/users/51591/micha%c5%82-ziober"}, "edited": false, "score": 1, "creation_date": 1554927555, "post_id": 55620367, "comment_id": 97934390, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1301697/helper-in-order-to-copy-non-null-properties-from-object-to-another-java\">Helper in order to copy non null properties from object to another ? (Java)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 517, "user_id": 11162243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U7CnTVvDPEc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIqAR-LoNw_pZaCFkU0iJLZxuX2A/mo/photo.jpg?sz=128", "display_name": "Alexander Gapanowich", "link": "https://stackoverflow.com/users/11162243/alexander-gapanowich"}, "is_accepted": false, "score": 1, "last_activity_date": 1554928464, "creation_date": 1554928464, "answer_id": 55620939, "question_id": 55620367, "link": "https://stackoverflow.com/questions/55620367/how-to-update-only-non-null-json-fields-of-a-object-in-an-existing-json-object-i/55620939#55620939", "title": "How to update only Non Null Json fields of a Object in an Existing Json Object in Android", "body": "<p>You can use a HashMap for it, let the value name be a key, and the value will be a value ))) :</p>\n\n<pre><code>HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;(); \n\n\n    hashMap.put(\"name\", \"Jack\"); \n    hashMap.put( \"age\", \"27\");\n</code></pre>\n\n<p>Now, if you need to update values, just add it with the same key:</p>\n\n<pre><code> hashMap.put( \"age\", \"67\");\n</code></pre>\n\n<p>Now you just need to iterate through your hashMap and get all values back, it could be like this:</p>\n\n<pre><code> Iterator it = hashMap.entrySet().iterator();\n while (it.hasNext()) {\n    Map.Entry pair = (Map.Entry)it.next();\n    System.out.println(pair.getKey() + \" = \" + pair.getValue());\n    it.remove();\n } \n</code></pre>\n\n<p>And no dataBase, as you can see ))) </p>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "edited": false, "score": 0, "creation_date": 1555062431, "post_id": 55620969, "comment_id": 97986552, "body": "Plus 1 Seems fine but I have to convert JSONObject to User object which I think is a overhead."}, {"owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "edited": false, "score": 0, "creation_date": 1555063014, "post_id": 55620969, "comment_id": 97986895, "body": "Alternatively I converted the class members to field array and merged both the object with null check."}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 1, "last_activity_date": 1554928621, "creation_date": 1554928621, "answer_id": 55620969, "question_id": 55620367, "link": "https://stackoverflow.com/questions/55620367/how-to-update-only-non-null-json-fields-of-a-object-in-an-existing-json-object-i/55620969#55620969", "title": "How to update only Non Null Json fields of a Object in an Existing Json Object in Android", "body": "<p>A <code>JSONObject</code> is essentially just a map of keys/values. Assuming you only care about one level deep, a trivial approach here would be to just map the key/values from the second object (where the values are not null) to the current object. </p>\n\n<p>This could be defined as an extension function on <code>JSONObject</code>, such as:</p>\n\n<pre><code>fun JSONObject.mergeWith(other: JSONObject): JSONObject = apply {\n    other.keys()\n        .asSequence()\n        .associateWith(other::get)\n        .filterValues { it != null }\n        .forEach { (key, value) -&gt; this.put(key, value) }\n}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>val firstJson = JSONObject().apply {\n    put(\"x\", 1)\n    put(\"y\", \"1\")\n}\n\nval secondJson = JSONObject().apply {\n    put(\"x\", 2)\n    put(\"y\", null)\n}\n\nval mergedJson = firstJson.mergeWith(secondJson) // contains x = 2, y = \"1\"\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 6466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6ee18ea9c3fbe625672ceb143c4312?s=128&d=identicon&r=PG&f=1", "display_name": "codepeaker", "link": "https://stackoverflow.com/users/6466099/codepeaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554928621, "creation_date": 1554926057, "last_edit_date": 1554927458, "question_id": 55620367, "link": "https://stackoverflow.com/questions/55620367/how-to-update-only-non-null-json-fields-of-a-object-in-an-existing-json-object-i", "title": "How to update only Non Null Json fields of a Object in an Existing Json Object in Android", "body": "<p>Suppose, we have a <code>User</code> <code>JSON</code> response:</p>\n\n<pre><code>{\n    \"name\": \"Jack\",\n    \"age\": 28,\n    \"address\": \"Some address\",\n    \"occupation\": \"Employee\",\n    \"gender\":\"male\"\n}\n</code></pre>\n\n<p>With some network calls, we got another <code>JSON</code> response:</p>\n\n<pre><code>{ \"age\":\"27\", \"address\":\"Some new address\" }\n</code></pre>\n\n<p>Now, the requirement is to update the existing object with the updated fields. For e.g:</p>\n\n<pre><code>{\n    \"name\": \"Jack\",\n    \"age\":\"27\",\n    \"address\":\"Some new address\",\n    \"occupation\": \"Employee\",\n    \"gender\":\"male\"\n}\n</code></pre>\n\n<p>Notice that <code>age</code> and <code>address</code> was changed. This can be done by making <code>null</code> checks for small user object but doesn't look smart enough for some object like <code>Product</code> that will have more than 100 fields.</p>\n\n<p>Looking for an efficient way to do it in <code>Java</code>/<code>Kotlin</code>.</p>\n"}, {"tags": ["kotlin", "freemarker"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 418200, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/951508e327a9150b955eaeba0cb27ea0?s=128&d=identicon&r=PG&f=1", "display_name": "ReinForce", "link": "https://stackoverflow.com/users/418200/reinforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1554931107, "creation_date": 1554931107, "answer_id": 55621464, "question_id": 55620288, "link": "https://stackoverflow.com/questions/55620288/freemarker-giving-unresolved-reference-for-theapp-object/55621464#55621464", "title": "Freemarker giving unresolved reference for &quot;TheApp&quot; object", "body": "<p>'TheApp' needs to be replaced with 'this'. 'this' picks up the instance of the application being run for ktor.</p>\n\n<p>'model' needs to be a mapOf reference type even if the values aren't being used.</p>\n"}], "owner": {"reputation": 101, "user_id": 418200, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/951508e327a9150b955eaeba0cb27ea0?s=128&d=identicon&r=PG&f=1", "display_name": "ReinForce", "link": "https://stackoverflow.com/users/418200/reinforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554931107, "creation_date": 1554925724, "question_id": 55620288, "link": "https://stackoverflow.com/questions/55620288/freemarker-giving-unresolved-reference-for-theapp-object", "title": "Freemarker giving unresolved reference for &quot;TheApp&quot; object", "body": "<p>I'm following this <a href=\"https://ktor.io/servers/features/templates/freemarker.html\" rel=\"nofollow noreferrer\">guide</a> but \"TheApp\" portion is highlighted red and I get a blank webpage as output. Do I need to import some library for this to get recognized?</p>\n\n<p>Also if I'm not passing any data into the template can I leave the 'model' as a blank string?</p>\n\n<p>My kotlin code:</p>\n\n<pre><code>import io.ktor.server.netty.*\nimport io.ktor.routing.*\nimport io.ktor.application.*\nimport io.ktor.response.*\nimport io.ktor.server.engine.*\nimport freemarker.cache.*\nimport io.ktor.freemarker.*\nimport io.ktor.freemarker.FreeMarkerContent\n\nfun main(args: Array&lt;String&gt;) {    \n    embeddedServer(Netty, 3000) {    \n        install(FreeMarker) {\n            templateLoader = ClassTemplateLoader(TheApp::class.java.classLoader, \"templates\")\n        }\n\n        routing {\n            get(\"/\") {\n                call.respond(FreeMarkerContent(\"templ.ftl\", \"\", \"e\"))\n            }\n        }\n    }.start(wait = true) }\n</code></pre>\n\n<p>gradle portion:</p>\n\n<pre><code>plugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.21'\n}\n\ngroup 'rest-group'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\next.ktor_version = '1.1.3'\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n    compile \"io.ktor:ktor:$ktor_version\"\n    compile \"io.ktor:ktor-gson:$ktor_version\"\n    compile \"io.ktor:ktor-freemarker:$ktor_version\"\n    compile \"io.ktor:ktor-html-builder:$ktor_version\"\n    compile \"io.ktor:ktor-server-netty:$ktor_version\"\n    compile \"io.ktor:ktor-auth:$ktor_version\"\n    compile \"io.ktor:ktor:$ktor_version\"\n    compile \"ch.qos.logback:logback-classic:1.2.3\"\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n"}, {"tags": ["model-view-controller", "kotlin", "interface"], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 10523960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aBqZ6.jpg?s=128&g=1", "display_name": "Neytsab", "link": "https://stackoverflow.com/users/10523960/neytsab"}, "is_accepted": true, "score": 1, "last_activity_date": 1554986619, "creation_date": 1554986619, "answer_id": 55632821, "question_id": 55620223, "link": "https://stackoverflow.com/questions/55620223/making-a-view-for-a-program-for-windows/55632821#55632821", "title": "Making a view for a program for windows", "body": "<p>I am not an expert programmer but in Java I used JavaFX to make interfaces. You can use it the same way in kotlin, but I heard TornadoFX was a good idea. I think there are many JavaFX tutorials, so it is not very complicated.</p>\n"}], "owner": {"reputation": 133, "user_id": 10525018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03318ebb733597c921d981d0a0d26ee3?s=128&d=identicon&r=PG&f=1", "display_name": "Yeste", "link": "https://stackoverflow.com/users/10525018/yeste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 55632821, "answer_count": 1, "score": 0, "last_activity_date": 1554986619, "creation_date": 1554925468, "last_edit_date": 1554985848, "question_id": 55620223, "link": "https://stackoverflow.com/questions/55620223/making-a-view-for-a-program-for-windows", "title": "Making a view for a program for windows", "body": "<p>I need some help on creating the view part of my program. \nI started working in Kotlin because I would like to get familiar with it but now I face the problem that I have no experience on creating a view, an interface for my program.</p>\n\n<p>Where is a good place to start on making good interfaces with Kotlin? \nI work with intellIJ IDE</p>\n\n<p>Apologies if my English is not that great. \nAsk me if you have any questions, thanks.</p>\n"}, {"tags": ["json", "arraylist", "kotlin"], "owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 639, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554984304, "creation_date": 1554924205, "last_edit_date": 1554984304, "question_id": 55619914, "link": "https://stackoverflow.com/questions/55619914/kotlin-kotlinnullpointerexception", "title": "kotlin.kotlinnullpointerexception", "body": "<p>JSON displays data get in Android and shows in TextView and TableLayout.JSON have Nine Records and its parsing using Retrofit2 and RXjava2. \nAll the data gets in android side and Store in ArrayList. \nIn ArrayList Size is Nine get All Data.</p>\n\n<p>Textview shows data but in TableLayout only two record display another seven record is not display. in Third record goeson var tax_total its give Error : \"kotlin.kotlinnullpointerexception\"</p>\n\n<p>What's the problem that the other data is not displayed? </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private fun fetchYearData(){\n\n        val retrofit = APIClient.apIClient\n        if (retrofit != null) {\n            api = retrofit.create(APIInterface::class.java)\n        }\n\n        compositeDisposable!!.add(api.getSalesGSTData(1,1,\"04/01/2018\",\"31/03/2019\")\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe( {\n                    displaySalesGSTData(it.salesGst) },\n                {\n\n                    Toast.makeText(this,it.message,Toast.LENGTH_LONG).show() }))\n }\nprivate fun displaySalesGSTData(salesGSt : List&lt;SalesGST&gt;) {\n\n        salesGST = SalesGST()\n        tvSalesCompanyName.setText(salesGSt.get(1).Cmp_Name)\n        tvGSTIN.setText(salesGSt.get(1).GSTIN)\n\n\n        val rowHeader = TableRow(this@Sales)\n        rowHeader.setBackgroundColor(Color.parseColor(\"#c0c0c0\"))\n        rowHeader.setLayoutParams(TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,\n                TableLayout.LayoutParams.WRAP_CONTENT))\n        val headerText = arrayOf&lt;String&gt;(\"Sr.No.\", \"Invoice Type\", \"Bill No.\", \"Bill Date\", \"Firm Name\", \"GST NO\",\"TAX Total\",\"CGST\",\"SGST\",\"IGST\",\"Net Amount\")\n        for (c in headerText)\n        {\n            val tv = TextView(this@Sales)\n            tv.setLayoutParams(TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,\n                    TableRow.LayoutParams.WRAP_CONTENT))\n            tv.setGravity(Gravity.CENTER)\n           // tv.setBackgroundResource(R.drawable.table_header)\n            tv.setTextColor(Color.parseColor(\"#3F51B5\"))\n            tv.setTextSize(18F)\n            tv.setPadding(5, 5, 5, 5)\n            tv.setText(c)\n            rowHeader.addView(tv)\n        }\n        tableMarks.addView(rowHeader)\n\n        for (j in 0 until salesGSt.size)\n        {\n            var fName : String = salesGSt[j].FirmName!!\n            var invoice : String = salesGSt[j].InvoiceType!!\n            var bill_no : String = salesGSt[j].ChallanNo!!\n            var bill_date : String = salesGSt[j].ChallanDate!!\n            var gst_no : String = salesGSt[j].PartyGST!!\n            var tax_total : String = salesGSt[j].TaxTotal!!\n            var cgst : String = salesGSt[j].CGSTTotal!!\n            var igst : String = salesGSt[j].IGSTTotal!!\n            var sgst : String = salesGSt[j].SGSTTotal!!\n            var net_amount : String = salesGSt[j].ChallanAmount!!\n\n            var sr : Int = j\n            // dara rows\n            val row = TableRow(this@Sales)\n            row.setLayoutParams(TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,\n                    TableLayout.LayoutParams.WRAP_CONTENT))\n            val colText = arrayOf&lt;String&gt;(sr.toString(),(invoice), bill_no, bill_date, fName, gst_no,tax_total,cgst,sgst,igst,net_amount)\n            for (text in colText)\n            {\n                val tv = TextView(this@Sales)\n                tv.setLayoutParams(TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,\n                        TableRow.LayoutParams.WRAP_CONTENT))\n                tv.setGravity(Gravity.CENTER)\n               // tv.setBackgroundResource(R.drawable.table_shape)\n                tv.setTextSize(18F)\n                tv.setTextColor(Color.parseColor(\"#000000\"))\n                tv.setPadding(5, 5, 5, 5)\n                tv.setText(text)\n                row.addView(tv)\n            }\n            tableMarks.addView(row)\n        }\n</code></pre>\n\n<p>JSON :</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\"success\":1,\"salesGst\":[{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"1\",\"ChallanDate\":\"2019-03-15 00:00:00\",\"ChallanAmount\":\"2778.75\",\"TaxTotal\":\"2778.75\",\"InvoiceType\":\"Retail Invoice\",\"CGSTTotal\":\"0.0\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"0.0\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"1\",\"ChallanDate\":\"2019-03-13 00:00:00\",\"ChallanAmount\":\"2203.0\",\"TaxTotal\":\"2118.5\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"52.96\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"52.96\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"VIKAS\",\"ChallanNo\":\"2\",\"ChallanDate\":\"2019-03-16 00:00:00\",\"ChallanAmount\":\"6975.0\",\"TaxTotal\":\"6975.0\",\"InvoiceType\":\"Retail Invoice\",\"CGSTTotal\":\"0.0\",\"PartyGST\":null,\"SGSTTotal\":\"0.0\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES MH\",\"ChallanNo\":\"2\",\"ChallanDate\":\"2019-03-13 00:00:00\",\"ChallanAmount\":\"420.0\",\"TaxTotal\":\"403.75\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"0.0\",\"PartyGST\":\"ABC\",\"SGSTTotal\":\"0.0\",\"IGSTTotal\":\"20.19\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"3\",\"ChallanDate\":\"2019-03-14 00:00:00\",\"ChallanAmount\":\"4788.0\",\"TaxTotal\":\"4560.0\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"114.0\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"114.0\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"4\",\"ChallanDate\":\"2019-03-15 00:00:00\",\"ChallanAmount\":\"241.9\",\"TaxTotal\":\"230.38\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"5.76\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"5.76\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"5\",\"ChallanDate\":\"2019-03-15 00:00:00\",\"ChallanAmount\":\"5563.68\",\"TaxTotal\":\"5101.5\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"231.28\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"231.28\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES GJ\",\"ChallanNo\":\"6\",\"ChallanDate\":\"2019-03-16 00:00:00\",\"ChallanAmount\":\"13238.0\",\"TaxTotal\":\"12459.25\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"389.29\",\"PartyGST\":\"CDE\",\"SGSTTotal\":\"389.29\",\"IGSTTotal\":\"0.0\"},{\"Cmp_Name\":\"ABC\",\"GSTIN\":\"AAAA\",\"FirmName\":\"SALES MH\",\"ChallanNo\":\"7\",\"ChallanDate\":\"2019-03-16 00:00:00\",\"ChallanAmount\":\"2074.0\",\"TaxTotal\":\"1975.0\",\"InvoiceType\":\"Tax Invoice\",\"CGSTTotal\":\"0.0\",\"PartyGST\":\"ABC\",\"SGSTTotal\":\"0.0\",\"IGSTTotal\":\"98.75\"}]}\n</code></pre>\n\n<p>xml :</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ScrollView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n&lt;HorizontalScrollView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fillViewport=\"true\"\n    android:scrollbarStyle=\"insideInset\"\n    android:fadeScrollbars=\"true\"\n    android:scrollbarSize=\"10dp\"\n    android:fitsSystemWindows=\"true\"&gt;\n    &lt;TableLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/tableMarks\"\n\n        android:stretchColumns=\"*\"\n        android:layout_marginTop=\"20dp\"\n        android:orientation=\"horizontal\"\n        &gt;&lt;/TableLayout&gt;\n\n&lt;/HorizontalScrollView&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "cucumber"], "comments": [{"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1554938912, "post_id": 55619855, "comment_id": 97938187, "body": "I&#39;m not sure if it works, but have you tried making all your classes open, as in: <code>open class</code> ?"}], "owner": {"reputation": 108, "user_id": 4504518, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-COBeRzcbzTQ/AAAAAAAAAAI/AAAAAAAAHZM/hakv-YevBlo/photo.jpg?sz=128", "display_name": "Deep", "link": "https://stackoverflow.com/users/4504518/deep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 790, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554923962, "creation_date": 1554923962, "question_id": 55619855, "link": "https://stackoverflow.com/questions/55619855/how-to-configure-spring-boot-jpa-for-cucumber-integration-testing", "title": "How to configure Spring Boot JPA for Cucumber Integration testing?", "body": "<p>I have a Spring Boot project that is using PostgreSQL. I am using Spring Data and creating <code>CrudRepository</code>. This works fine for the application as I am able to use Auto Configuration and all the beans work. Now I am trying to write integration tests using Cucumber. For my tests, I want to use Spring JPA to connect to the embedded H2 database. I have created <code>DataSource</code> bean and also a repository interface that extends <code>CrudRepository</code>. When the tests boot up, it throws an exception along the lines of: </p>\n\n<pre><code>Specified class is an interface\n</code></pre>\n\n<p>I have even tried to do this manually by creating <code>LocalContainerEntityManagerFactoryBean</code> but, I am running into this exception:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'getEntityManagerFactory' defined in com.package.integration.repository.RepoConfig: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n</code></pre>\n\n<p>My <code>ConfigLoaderStepDefs</code></p>\n\n<pre><code>@SpringBootTest(classes = [IntegrationTestConfig::class, JMeterRunner::class,\n    RepoConfig::class])\nclass ConfigLoaderStepDefs : StepDefs\n\n</code></pre>\n\n<p>My <code>RepoConfig</code></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"&lt;repo package&gt;\")\n@EnableTransactionManagement\nclass RepoConfig {\n\n    @Bean\n    fun getEntityManagerFactory(): LocalContainerEntityManagerFactoryBean {\n        return LocalContainerEntityManagerFactoryBean().also { factory -&gt;\n            factory.setPackagesToScan(\"&lt;entities package&gt;\")\n            factory.jpaVendorAdapter = HibernateJpaVendorAdapter()\n        }\n    }\n\n    @ConfigurationProperties(prefix = \"spring.datasource\")\n    @Bean\n    @Primary\n    fun getDataSource(): DataSource {\n\n        val dataSourceBuilder = DataSourceBuilder.create()\n        dataSourceBuilder.url(\"jdbc:h2:mem:memorydb\")\n                .username(\"sa\")\n\n        return dataSourceBuilder.build()\n    }\n}\n</code></pre>\n\n<p>My <code>CucumberIT</code></p>\n\n<pre><code>@Tag(\"it\")\n@RunWith(Cucumber::class)\n@CucumberOptions(\n        plugin = [\"html:build/reports/cucumber/cucumber-html-report\",\n            \"json:build/reports/cucumber/cucumber-json-report.json\"],\n        features = [\"classpath:features\"],\n        glue = [\"com.package.integration\"])\n@SpringBootTest\nclass CucumberIT\n\n</code></pre>\n\n<p>Does anyone know who to configure JPA repository when working with cucumber?</p>\n"}, {"tags": ["kotlin", "build.gradle", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1554933980, "post_id": 55619577, "comment_id": 97936882, "body": "I tried it and <code>plugins</code> scope seems very strict, You can still use fully qualified name to reference the value, even bind it to a variable inside it but any import seems to be ignored. You actually get an odd warning if You try to set <code>val</code> to VERSION outside the scope and try to reference it inside."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 9193894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXakR.png?s=128&g=1", "display_name": "mig4", "link": "https://stackoverflow.com/users/9193894/mig4"}, "is_accepted": true, "score": 3, "last_activity_date": 1555856503, "last_edit_date": 1555856503, "creation_date": 1555169946, "answer_id": 55667160, "question_id": 55619577, "link": "https://stackoverflow.com/questions/55619577/unresolved-reference-kotlincompilerversion-in-build-gradle-kts/55667160#55667160", "title": "Unresolved reference: KotlinCompilerVersion in build.gradle.kts", "body": "<p>Yes, the syntax of the plugins DSL is limited because Gradle parses it <strong>before</strong> parsing the rest of the file, which requires the definition to be static (no references to variables, constants, etc., pretty much no code is allowed). See <a href=\"https://docs.gradle.org/current/userguide/plugins.html#plugins_dsl_limitations\" rel=\"nofollow noreferrer\">Limitations of the plugins DSL</a> for details.</p>\n\n<p>The way I handle defining Kotlin version only once is by actually using the version I specify in the plugins block as canonical in other sections of the file (I picked this up from <a href=\"http://kotlinexpertise.com/gradlekotlindsl/\" rel=\"nofollow noreferrer\">this blog post by Simon Wirtz</a>) like so:</p>\n\n<pre><code>import org.jetbrains.kotlin.gradle.plugin.KotlinPluginWrapper\n\nval kotlinVersion = plugins.getPlugin(KotlinPluginWrapper::class.java)\n        .kotlinPluginVersion\n\nplugins {\n    kotlin(\"jvm\") version \"1.3.30\"\n}\n\ndependencies {\n    implementation(platform(kotlin(\"bom\", kotlinVersion)))\n    implementation(kotlin(\"stdlib-jdk8\"))\n}\n</code></pre>\n\n<p>But yeah, in the plugins block it needs to be static and unfortunately repeated if needed.</p>\n\n<hr>\n\n<p><strong>Update</strong>: I actually just learned it's possible to use constants in the plugins DSL, but they must be defined before Gradle parses the <code>build.gradle.kts</code> file, i.e. from <code>buildSrc</code>. I noticed this in the <a href=\"https://github.com/kittinunf/fuel\" rel=\"nofollow noreferrer\">fuel</a> library. In essence, create <code>buildSrc/build.gradle.kts</code> with the following contents:</p>\n\n<pre><code>plugins {\n    `kotlin-dsl`\n}\n\nrepositories {\n    jcenter()\n}\n</code></pre>\n\n<p>Then create <code>buildSrc/src/main/kotlin/Constants.kt</code> with the following contents:</p>\n\n<pre><code>object Kotlin {\n    const val version = \"1.3.30\"\n}\n</code></pre>\n\n<p>And then you'll be able to use the following in your main <code>build.gradle.kts</code>:</p>\n\n<pre><code>plugins {\n    kotlin(\"jvm\") version Kotlin.version\n}\n</code></pre>\n"}], "owner": {"reputation": 100, "user_id": 8361368, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F9Ff3jROfrs/AAAAAAAAAAI/AAAAAAAAACU/6BiWzrO5FvI/photo.jpg?sz=128", "display_name": "Qi Chen", "link": "https://stackoverflow.com/users/8361368/qi-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3257, "favorite_count": 0, "accepted_answer_id": 55667160, "answer_count": 1, "score": 3, "last_activity_date": 1555856503, "creation_date": 1554922690, "question_id": 55619577, "link": "https://stackoverflow.com/questions/55619577/unresolved-reference-kotlincompilerversion-in-build-gradle-kts", "title": "Unresolved reference: KotlinCompilerVersion in build.gradle.kts", "body": "<p>In <code>build.gradle.kts</code> file, I include this code on the top line. Then I use KotlinCompilerVesion.VERSION below.  </p>\n\n<pre><code>import org.jetbrains.kotlin.config.KotlinCompilerVersion\n</code></pre>\n\n<p>Some code works fine, but some code failed:</p>\n\n<p>It seems like only <code>plugins</code> block can not enable this <code>import</code>.</p>\n\n<p>Here works fine:</p>\n\n<pre><code>dependencies {\n    Implementation(kotlin(\"stdlib-jdk7\", KotlinCompilerVersion.VERSION))\n    Implementation(kotlin(\"test\", KotlinCompilerVersion.VERSION))\n}\n</code></pre>\n\n<p>Here always wrong:</p>\n\n<pre><code>plugins {\n    id(\"com.android.application\")\n    kotlin(\"android\")\n    kotlin(\"android.extensions\")\n\n    /*\n    * Error: Unresolved reference: KotlinCompilerVersion\n    */\n    id(\"kotlinx-serialization\") version KotlinCompilerVersion.VERSION\n\n    /*\n    * Error: Unresolved reference: KotlinCompilerVersion\n    */\n    id(\"kotlinx-serialization\") version \"$KotlinCompilerVersion.VERSION\"\n\n    /*\n    * Error: Unresolved reference: KotlinCompilerVersion\n    */\n    id(\"kotlinx-serialization\") version \"${KotlinCompilerVersion.VERSION}\"\n}\n</code></pre>\n\n<p>How can I use it correctly in here, without declare an <code>ext.xxxVersion</code> var?</p>\n"}, {"tags": ["java", "date", "kotlin", "stripe-payments", "illegalstateexception"], "answers": [{"comments": [{"owner": {"reputation": 2090, "user_id": 8588359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiqvE.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8588359/raj"}, "edited": false, "score": 0, "creation_date": 1554924582, "post_id": 55619792, "comment_id": 97933057, "body": "I just started writing this yesterday and haven&#39;t thought about the security aspect of it yet. I will obviously not be using this code in production. I just want to <code>create a charge</code> for now."}], "tags": [], "owner": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "is_accepted": false, "score": 0, "last_activity_date": 1554923585, "creation_date": 1554923585, "answer_id": 55619792, "question_id": 55619445, "link": "https://stackoverflow.com/questions/55619445/stripe-integration-in-kotlin-app-illegalstateexception/55619792#55619792", "title": "Stripe integration in Kotlin App -- IllegalStateException", "body": "<p>So while this is \"possible\" you absolutely should not do this. It's a very large security vulnerability. Anyone with your App would be able to sniff your Stripe Secret API Key and do any number of bad things. They could, for instance, test credit cards or even take money from your account.</p>\n\n<p>When implementing Stripe on Android you should <em>only</em> use your Publishable API Key and only use the key to create Tokens/Sources. All other operations should leverage your Secret API Key on a secured backend.</p>\n"}, {"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 0, "last_activity_date": 1554926662, "creation_date": 1554926662, "answer_id": 55620519, "question_id": 55619445, "link": "https://stackoverflow.com/questions/55619445/stripe-integration-in-kotlin-app-illegalstateexception/55620519#55620519", "title": "Stripe integration in Kotlin App -- IllegalStateException", "body": "<p>Best I can tell from the API documentation, you're accessing <code>getMetadata()</code> which is returning null (as you've never set a value on it). Basically, the line:</p>\n\n<pre><code>chargeParams.metadata[\"start_date\"] = LocalDate.parse(\"2018-12-31\", formatter).toString()\n</code></pre>\n\n<p>is equivalent to the Java code:</p>\n\n<pre><code>chargeParams.getMetadata().put(\"start_date\", LocalDate.parse(\"2018-12-31\", formatter).toString())\n</code></pre>\n\n<p>and in your situation <code>getMetadata()</code> is null. I believe changing this to be:</p>\n\n<pre><code>chargeParams.setMetadata(\n    mapOf(\n        \"start_date\" to LocalDate.parse(\"2018-12-31\", formatter).toString(),\n        \"end_date\" to LocalDate.parse(\"2019-03-31\", formatter).toString()\n    )\n)\n</code></pre>\n\n<p>will resolve the issue.</p>\n"}], "owner": {"reputation": 2090, "user_id": 8588359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiqvE.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8588359/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554926662, "creation_date": 1554922126, "question_id": 55619445, "link": "https://stackoverflow.com/questions/55619445/stripe-integration-in-kotlin-app-illegalstateexception", "title": "Stripe integration in Kotlin App -- IllegalStateException", "body": "<p>I am integrating Stripe for Java in a Kotlin app.</p>\n\n<p>This is the code that I wrote to <a href=\"https://stripe.com/docs/api/charges/create\" rel=\"nofollow noreferrer\"><code>create a Charge</code></a></p>\n\n<p>createCharge function:</p>\n\n<pre><code>fun createCharge(charge: Charge, testApiKey: String): Charge? {\n        //met\n\n        // On your server, grab the Stripe token in the POST parameters submitted by your form. From there, it\u2019s one simple API call to charge the card\n        Stripe.apiKey = testApiKey\n\n        try {\n            val chargeParams = mutableMapOf&lt;String, Any?&gt;()\n\n            chargeParams[\"amount\"] = charge.amount\n            chargeParams[\"currency\"] = charge.currency\n            chargeParams[\"description\"] = charge.description\n            chargeParams[\"source\"] = charge.source\n            chargeParams[\"customer\"] = charge.customer\n            chargeParams[\"receipt_email\"] = charge.receiptEmail\n\n            val requestOptions = idempotencyKeySetter()\n\n            val initialMetadata = mutableMapOf&lt;String, String?&gt;()\n            initialMetadata[\"start_date\"] = charge.metadata[\"start_date\"]\n            initialMetadata[\"end_date\"] = charge.metadata[\"end_date\"]\n\n            chargeParams[\"metadata\"] = initialMetadata\n\n            return Charge.create(chargeParams, requestOptions)\n\n        } catch (e: StripeException) {\n\n            e.printStackTrace()\n            return null\n        }\n    }\n</code></pre>\n\n<p>and the function calling the createCharge function:</p>\n\n<pre><code>var formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\")\nfun checkCreateCharge() {\n        val chargeParams: Charge = Charge()\n\n        chargeParams.amount = 2000\n        chargeParams.currency = \"usd\"\n        chargeParams.description = description\n        chargeParams.source = PaymentSource { \"\" }\n        chargeParams.customer = customerId\n        chargeParams.receiptEmail = testEmail\n\n        chargeParams.metadata[\"start_date\"] = LocalDate.parse(\"2018-12-31\", formatter).toString()\n        chargeParams.metadata[\"end_date\"] = LocalDate.parse(\"2019-03-31\", formatter).toString()\n\n        val newCharge: Charge? = createCharge(chargeParams, testApiKey)\n    }\n</code></pre>\n\n<p>When I the function <code>checkCreateCharge</code> runs, it sends the following error:\n<code>java.lang.IllegalStateException: chargeParams.metadata must not be null\n</code></p>\n\n<p>Does anyone know why this is the case?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554920229, "post_id": 55618840, "comment_id": 97931120, "body": "I want to change txvTitle color when the function is called from fragment. How can I use notifyDataSetChanged in this case?"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554920539, "post_id": 55618840, "comment_id": 97931268, "body": "@JohnJoe Add <code>someField</code> to your adapter. When the function is called from fragment update value of <code>someField</code> and call <code>notifyDataSetChanged</code>. Inside <code>onBindViewHolder</code> you should respect <code>someField</code>. Like: <code>if(someField) { use color1} else {use color2}</code>"}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554919741, "creation_date": 1554919741, "answer_id": 55618840, "question_id": 55618741, "link": "https://stackoverflow.com/questions/55618741/use-viewholder-element-outside-onbindviewholder/55618840#55618840", "title": "Use ViewHolder element outside onBindViewHolder?", "body": "<p>Normally you should not use <code>ViewHolder</code> outside <code>onBindViewHolder</code>. All UI-related code should be called inside <code>onBindViewHolder</code>. Prefer to call <code>notifyDataSetChanged</code> or other <code>notifyXXX</code> method to redraw your <code>RecyclerView</code> content.</p>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 10648865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FZ5ePNXHoPg/AAAAAAAAAAI/AAAAAAAAOGs/HY80R-CL6D4/photo.jpg?sz=128", "display_name": "dglozano", "link": "https://stackoverflow.com/users/10648865/dglozano"}, "is_accepted": false, "score": 2, "last_activity_date": 1554920172, "creation_date": 1554920172, "answer_id": 55618948, "question_id": 55618741, "link": "https://stackoverflow.com/questions/55618741/use-viewholder-element-outside-onbindviewholder/55618948#55618948", "title": "Use ViewHolder element outside onBindViewHolder?", "body": "<p>Even though <strong>I do not recommend using it</strong>, you can call the following method to get the ViewHolder for data element at position <code>i</code>:</p>\n\n<pre><code>MyViewHolder holder = (MyViewHolder) mRecyclerView.findViewHolderForAdapterPosition(i);\nif(holder != null) {\n    // Do whatever you want\n}\n</code></pre>\n\n<p>Keep in mind what the <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html#findViewHolderForAdapterPosition(int)\" rel=\"nofollow noreferrer\">documentation</a> says about that method:</p>\n\n<blockquote>\n  <p>Return the <code>ViewHolder</code> for the item in the given position of the data set. Unlike <code>findViewHolderForLayoutPosition(int)</code> this method takes into account any pending adapter changes that may not be reflected to the layout yet. <strong>On the other hand, if <code>notifyDataSetChanged()</code> has been called but the new layout has not been calculated yet, this method will return null since the new positions of views are unknown until the layout is calculated</strong>.</p>\n</blockquote>\n\n<p>Instead, <strong>what I would do if I were you</strong>, is to have an attribute in your model class that indicates which color its ViewHolder should use to display the <code>txtView.title</code> text.</p>\n\n<p>Then, whenever you want to update the color of an element (or elements) in your RecyclerView, you can change that attribute of your model class and then call <code>notifyDataSetChanged();</code></p>\n"}, {"comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554961639, "post_id": 55619010, "comment_id": 97943096, "body": "I use <code>notifyDataSetChanged()</code>. Thanks !"}], "tags": [], "owner": {"reputation": 100, "user_id": 6409815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f7f54bda76ee9a1f448949d3b7d5d0?s=128&d=identicon&r=PG&f=1", "display_name": "Tomirio", "link": "https://stackoverflow.com/users/6409815/tomirio"}, "is_accepted": false, "score": 1, "last_activity_date": 1554920765, "last_edit_date": 1554920765, "creation_date": 1554920459, "answer_id": 55619010, "question_id": 55618741, "link": "https://stackoverflow.com/questions/55618741/use-viewholder-element-outside-onbindviewholder/55619010#55619010", "title": "Use ViewHolder element outside onBindViewHolder?", "body": "<p>The adapter has no way to know what <code>txvTitle</code> means, as it is specific to a single item in the <code>RecyclerView</code>.\nWithin a <code>ViewHolder</code> however, this property (if existent) is related to the view that is being \"prepared\".</p>\n\n<p>Thus, updates to the view should only be done in the <code>ViewHolder</code> class.</p>\n\n<p>Take a look at <a href=\"https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit\" rel=\"nofollow noreferrer\">this</a> example.\nIn this example, a separate class is created which extends <code>RecyclerView.Viewholder(view)</code>.\nWithin this class, a method called <code>bind</code> is defined, which is passed the object (or model) that is used to populate the view. \nThe <code>create</code> method inflates the layout of the view to be drawn in the <code>RecyclerView</code></p>\n"}, {"comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554950681, "post_id": 55619170, "comment_id": 97940545, "body": "You want to change text color of holder item based on that adapter method right?"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554950743, "post_id": 55619170, "comment_id": 97940556, "body": "Ya. How can I pass the two parameters from fragment to adapter class ?"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554950908, "post_id": 55619170, "comment_id": 97940578, "body": "Where are that both parameters? Are they at adapter class or at fragment class?"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554950976, "post_id": 55619170, "comment_id": 97940589, "body": "This line in FragmentA <code>mAdapter.checkHashMapExists(hashMap,otList)</code>"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1554958202, "post_id": 55619170, "comment_id": 97941995, "body": "It seems I&#39;m not able to understand your dilemma clearly."}], "tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": false, "score": 1, "last_activity_date": 1554921048, "creation_date": 1554921048, "answer_id": 55619170, "question_id": 55618741, "link": "https://stackoverflow.com/questions/55618741/use-viewholder-element-outside-onbindviewholder/55619170#55619170", "title": "Use ViewHolder element outside onBindViewHolder?", "body": "<p>You can create a function in your adapter class which takes <strong><a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">Higher order function</a></strong> as parameter and then expose your <code>ViewHolder</code> object in that function to be used outside of <strong>Adapter class</strong>.</p>\n\n<p>See how it can be done :</p>\n\n<p>Let's say you've <strong>Adapter class</strong> as below</p>\n\n<pre><code>class Adapter {\n    ...\n    // Here we create object of our Higher order function\n    var holderCallback: ((RecyclerView.ViewHolder?) -&gt; Unit)? = null\n\n    //Then We provide callback like below in onBindViewHolder method\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        ... Some binding stuff\n        holderCallback?.let {\n           it(holder)\n        }\n        ... even some more stuff\n    }\n}\n</code></pre>\n\n<p>And now we can access from outside <em>(In your case, from Fragment class)</em></p>\n\n<pre><code>class Fragment {\n    // Here we have adapter object\n    ...\n    //So, we get our callback like below from any method in here\n    ...Inside some method where we receive callback\n    adapter.holderCallback { viewHolder: RecyclerView.ViewHolder? -&gt; //Here you've got ViewHolder object\n        // Now do some amazing stuff here !!\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 55618840, "answer_count": 4, "score": 1, "last_activity_date": 1554950847, "creation_date": 1554919297, "last_edit_date": 1554950847, "question_id": 55618741, "link": "https://stackoverflow.com/questions/55618741/use-viewholder-element-outside-onbindviewholder", "title": "Use ViewHolder element outside onBindViewHolder?", "body": "<p>Is it possible to use ViewHolder element outside onBindViewHolder?</p>\n\n<p>This is my adapter class</p>\n\n<pre><code>    @SuppressLint(\"SetTextI18n\")\n        override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n            val item = mValues[position]\n            with(holder.mView) {\n                tag = item\n                txvTitle.text = item.title\n                setOnClickListener(mOnClickListener)\n            }\n        }\n\n   inner class ViewHolder(val mView: View) :RecyclerView.ViewHolder(mView{})\n</code></pre>\n\n<p>If I have one function in adapter, how can I use <code>txvTitle</code>?</p>\n\n<pre><code>fun checkHashMapExists(hashMap: HashMap&lt;Long, ABC&gt;?, newValues: ArrayList&lt;OT&gt;){\n      for(i in newValues){\n         if(hashMap?.keys.toString().contains(i.id)){\n             txvTitle.setTextColor(Color.parseColor(\"#000000\")) // txvTitle cannot resolved\n         }\n      }   \n    }\n</code></pre>\n\n<p><strong>FragmentA</strong></p>\n\n<pre><code> override fun onResume() {\n        super.onResume()\n        mAdapter.checkHashMapExists(hashMap,otList)\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit"], "answers": [{"tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1554917271, "creation_date": 1554917271, "answer_id": 55618264, "question_id": 55618032, "link": "https://stackoverflow.com/questions/55618032/android-retrofit-dynamic-query-variable/55618264#55618264", "title": "Android Retrofit Dynamic Query Variable", "body": "<p>When you have \"dynamic\" queries (either an unknown set of query params or an unknown query key name), the easiest way to handle it is to use <a href=\"https://square.github.io/retrofit/2.x/retrofit/index.html?retrofit2/http/QueryMap.html\" rel=\"nofollow noreferrer\">the <code>@QueryMap</code> annotation</a>.</p>\n\n<pre><code>interface MainApi {\n\n    @GET(\"/api/updateuser\")\n    fun updateUser(\n            @Query(\"userId\") userId: UserId,\n            @Nullable @Query(\"programId\") programId: ProgramId?,\n            @QueryMap Map&lt;String, String&gt; hobbies\n    ): Observable&lt;UserResponse&gt;\n}\n</code></pre>\n\n<p>And then you could call it as:</p>\n\n<pre><code>val hobbies = mapOf(\"hobby_12\" to \"15\")\nservice.updateUser(\"foo\", null, hobbies)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val hobbies = mapOf(\"hobby_35\" to \"100\")\nservice.updateUser(\"foo\", null, hobbies)\n</code></pre>\n"}], "owner": {"reputation": 8943, "user_id": 456850, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cb15af790f2b2df4dd38f1cc989f99a2?s=128&d=identicon&r=PG", "display_name": "Devin Dixon", "link": "https://stackoverflow.com/users/456850/devin-dixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554917271, "creation_date": 1554916389, "last_edit_date": 1554916958, "question_id": 55618032, "link": "https://stackoverflow.com/questions/55618032/android-retrofit-dynamic-query-variable", "title": "Android Retrofit Dynamic Query Variable", "body": "<p>I am currently using the Retrofit Library for android: <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">https://square.github.io/retrofit/</a></p>\n\n<pre><code>interface MainApi {\n@GET('/api/updateuser')\n    fun updateUser(\n            @Query(\"userId\") userId: UserId,\n            @Nullable @Query(\"programId\") programId: ProgramId?): Observable&lt;UserResponse&gt;\n}\n</code></pre>\n\n<p>But I am having an issue where I need to add a dynamic variable into the GET or POST such that <code>hobby_x = id</code>. So for example: <code>hobby_12=15</code> or  <code>hobby_35=100</code>.</p>\n\n<p>How can I execute this in with the Retrofit Library?</p>\n"}, {"tags": ["kotlin", "jvm"], "comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1555050976, "post_id": 55617977, "comment_id": 97981003, "body": "you get your answer?"}], "answers": [{"comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1555232061, "post_id": 55618580, "comment_id": 98032568, "body": "I would also add @<code>Andrew Churilo</code> answer which provides an example of using <code>subList</code>"}], "tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": true, "score": 0, "last_activity_date": 1554918586, "creation_date": 1554918586, "answer_id": 55618580, "question_id": 55617977, "link": "https://stackoverflow.com/questions/55617977/kotlin-generatesequence-do-not-remember-internal-state/55618580#55618580", "title": "Kotlin generateSequence do not remember internal state", "body": "<p>I understand your need, but I think it is a misfit for the intent of a Sequence. It is meant to be a definition of an infinite stream that can be used multiple times to generate the same stream.</p>\n\n<p>I think you will have to do a little bit of your own wrapping and adapting if you want to produce some set of slices of values. Here are some options:</p>\n\n<pre><code>fun main() {\n    val myList = generateSequence(0) { it + 1 }.take(10).toList()\n    val myList2 = generateSequence(10) { it + 1 }.take(3).toList()\n    println(myList)\n    println(myList2)\n\n    val myListV2 = List(10) { index -&gt; index }\n    val myListV2_2 = List(3) { index -&gt; 10 + index }\n    println(myListV2)\n    println(myListV2_2)\n\n    val myListV3 = (0..9).toList()\n    val myListV3_2 = (10..12).toList()\n    println(myListV3)\n    println(myListV3_2)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1554919091, "creation_date": 1554919091, "answer_id": 55618696, "question_id": 55617977, "link": "https://stackoverflow.com/questions/55617977/kotlin-generatesequence-do-not-remember-internal-state/55618696#55618696", "title": "Kotlin generateSequence do not remember internal state", "body": "<p>No, you can't save state of <code>Sequence</code>. But you can take all items and split them to separate lists.</p>\n\n<pre><code>val numberGenerator: Sequence&lt;Int&gt; = generateSequence(0) { it + 1 }\nval fullList = numberGenerator.take(13).toList()\nval part1 = fullList.subList(0, 10)\nval part2 = fullList.subList(10, 13)\nprintln(part1)\nprintln(part2)\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 7123940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YxBsJ.jpg?s=128&g=1", "display_name": "apologiessirnoclue", "link": "https://stackoverflow.com/users/7123940/apologiessirnoclue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 55618580, "answer_count": 2, "score": 0, "last_activity_date": 1554919091, "creation_date": 1554916187, "question_id": 55617977, "link": "https://stackoverflow.com/questions/55617977/kotlin-generatesequence-do-not-remember-internal-state", "title": "Kotlin generateSequence do not remember internal state", "body": "<p>So I'm learning Kotlin and I have a question about <code>generateSequence</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>val numberGenerator: Sequence&lt;Int&gt; = generateSequence(0) { it + 1 }\nprintln(numberGenerator.take(10).toList())\nprintln(numberGenerator.take(3).toList())\n</code></pre>\n\n<p>Code above generated this results:</p>\n\n<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n[0, 1, 2]\n</code></pre>\n\n<p>I would like to achive sth like that:</p>\n\n<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n[10, 11, 12]\n</code></pre>\n\n<p>I would like this generator to remember internal state about last element and continue from that, is there built in solution for that in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "bluetooth", "parcelable", "parcel"], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 1, "last_activity_date": 1554916616, "creation_date": 1554916616, "answer_id": 55618097, "question_id": 55617953, "link": "https://stackoverflow.com/questions/55617953/type-mismatch-inferred-type-is-bluetoothdevice-but-bluetoothdevice-was-expecte/55618097#55618097", "title": "Type mismatch: inferred type is BluetoothDevice? but BluetoothDevice was expected", "body": "<p>This is because <code>Parcel.readParcelable</code> is nullable. If the <code>Parcel</code> had previously had a null value written to it at that position, null would be returned. In your case, if you can guarantee that you are never writing null to the <code>Parcel</code>, you can simply assert that the value is not null:</p>\n\n<pre><code>constructor(parcel: Parcel) : this(\n    parcel.readParcelable(BluetoothDevice::class.java.classLoader)!!,\n    parcel.readInt()\n)\n</code></pre>\n\n<p>This would crash at runtime if a null value were written to the <code>Parcel</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1554917150, "post_id": 55618110, "comment_id": 97929624, "body": "Ask an easy question and you get an easy answer. I&#39;ll make it harder next time! Thanks!"}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1554916665, "creation_date": 1554916665, "answer_id": 55618110, "question_id": 55617953, "link": "https://stackoverflow.com/questions/55617953/type-mismatch-inferred-type-is-bluetoothdevice-but-bluetoothdevice-was-expecte/55618110#55618110", "title": "Type mismatch: inferred type is BluetoothDevice? but BluetoothDevice was expected", "body": "<p>The <a href=\"https://developer.android.com/reference/android/os/Parcel#readParcelable(java.lang.ClassLoader)\" rel=\"nofollow noreferrer\">documentation for <code>Parcel.readerParcelable()</code></a> says:</p>\n\n<blockquote>\n  <p>Returns the newly created <code>Parcelable</code>, or <code>null</code> if a null object has been written.</p>\n</blockquote>\n\n<p>This means that, if we were living in Kotlin world, the return type of <code>Parcel.readParcelable()</code> would be <code>T?</code> and not <code>T</code> (i.e. it would be nullable).</p>\n\n<p>Since you are in control of the writing, you <em>know</em> that it won't return null. That means that you're safe to convert the result to a non-nullable type by using the <code>!!</code> operator:</p>\n\n<pre><code>parcel.readParcelable(BluetoothDevice::class.java.classLoader)!!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1554924588, "post_id": 55619047, "comment_id": 97933061, "body": "I like that too"}], "tags": [], "owner": {"reputation": 23, "user_id": 7697619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmxiV.jpg?s=128&g=1", "display_name": "Korbinian", "link": "https://stackoverflow.com/users/7697619/korbinian"}, "is_accepted": false, "score": 1, "last_activity_date": 1554920608, "creation_date": 1554920608, "answer_id": 55619047, "question_id": 55617953, "link": "https://stackoverflow.com/questions/55617953/type-mismatch-inferred-type-is-bluetoothdevice-but-bluetoothdevice-was-expecte/55619047#55619047", "title": "Type mismatch: inferred type is BluetoothDevice? but BluetoothDevice was expected", "body": "<p>Instead of using !! it would probably be better to to perform a null safe call like this. </p>\n\n<pre><code>parcel?.let{\n    it.readParcelable(BluetoothDevice::class.java.classLoader) \n    it.readInt()\n}\n</code></pre>\n\n<p>This only executes the code when parcel is not null. Only use <code>!!</code> when you are 100% sure that variable/object is not null.</p>\n"}], "owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "accepted_answer_id": 55618110, "answer_count": 3, "score": 0, "last_activity_date": 1554920608, "creation_date": 1554916105, "question_id": 55617953, "link": "https://stackoverflow.com/questions/55617953/type-mismatch-inferred-type-is-bluetoothdevice-but-bluetoothdevice-was-expecte", "title": "Type mismatch: inferred type is BluetoothDevice? but BluetoothDevice was expected", "body": "<p>I know that this is a very simple error but I can't quite comprehend the nuances of kotlin enough to solve it just yet.</p>\n\n<p>I'm getting the error:</p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is BluetoothDevice? but BluetoothDevice was expected</p>\n</blockquote>\n\n<p>When trying to pass a <code>BluetoothDevice</code> in as parcelable</p>\n\n<pre><code>class ScanDevice(var device: BluetoothDevice, var rssi: Int): Parcelable {\n   ...\n    constructor(parcel: Parcel) : this(\n        parcel.readParcelable(BluetoothDevice::class.java.classLoader), &lt;--- here\n        parcel.readInt()\n    )\n    ...\n</code></pre>\n\n<p>It's technically just a warning and not actually an error but I'm not sure what is happening here.</p>\n"}, {"tags": ["java", "kotlin", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": false, "score": 7, "last_activity_date": 1554916189, "creation_date": 1554916189, "answer_id": 55617978, "question_id": 55617808, "link": "https://stackoverflow.com/questions/55617808/how-do-i-pass-a-lambda-from-java-to-a-kotlin-method/55617978#55617978", "title": "How do I pass a lambda from Java to a Kotlin method?", "body": "<p>You need to create instance of <code>Function0</code>:</p>\n\n<pre><code>foo(new Function0&lt;Unit&gt;() {\n    @Override\n    public Unit invoke() {\n        // Here should be a code you need\n        return null;\n    }\n});\n</code></pre>\n\n<p>or if you use Java 8 it can be simplified</p>\n\n<pre><code>foo(() -&gt; {\n    // Here should be a code you need\n    return null;\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554916854, "post_id": 55618051, "comment_id": 97929473, "body": "Are you sure about that <code>null</code>? Won&#39;t the intrinstics say &quot;expected non-null but received null&quot;?"}, {"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1554916966, "post_id": 55618051, "comment_id": 97929531, "body": "@EpicPandaForce I was worried about that, but I ran it and nothing complained."}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 5, "last_activity_date": 1554916442, "creation_date": 1554916442, "answer_id": 55618051, "question_id": 55617808, "link": "https://stackoverflow.com/questions/55617808/how-do-i-pass-a-lambda-from-java-to-a-kotlin-method/55618051#55618051", "title": "How do I pass a lambda from Java to a Kotlin method?", "body": "<p>You can call this but need to be careful of the return types. If your Kotlin function returns a <code>Unit</code>, Java will either need to return <code>Unit</code> or <code>null</code>, because <code>void</code> is not quite the same as <code>Unit</code>.</p>\n\n<p>My example that worked:</p>\n\n<pre><code>foo(() -&gt; {\n    System.out.println(\"Hi\");\n    return null;\n});\n</code></pre>\n\n<p>Or, if you want to be really explicit about <code>Unit</code>...</p>\n\n<pre><code>foo(() -&gt; {\n    System.out.println(\"Hi\");\n    return Unit.INSTANCE;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1915, "user_id": 2750224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YVZYK.jpg?s=128&g=1", "display_name": "Zia", "link": "https://stackoverflow.com/users/2750224/zia"}, "is_accepted": false, "score": 0, "last_activity_date": 1616387035, "creation_date": 1616387035, "answer_id": 66740309, "question_id": 55617808, "link": "https://stackoverflow.com/questions/55617808/how-do-i-pass-a-lambda-from-java-to-a-kotlin-method/66740309#66740309", "title": "How do I pass a lambda from Java to a Kotlin method?", "body": "<p>I totally agree with Andrew's Answer, There is a better way to approach</p>\n<ol>\n<li>You need to see generated Kotlin Bytecode -&gt; Decompile it</li>\n</ol>\n<p>In your case it looks something like this:</p>\n<pre><code>   public static final void foo(@NotNull Function0 acceptLambda) {\n      Intrinsics.checkNotNullParameter(acceptLambda, &quot;acceptLambda&quot;);\n   }\n</code></pre>\n<p>now you know in order to call this function form Java you need to create instance of Function0 something like this</p>\n<pre><code>foo(new Function0&lt;Unit&gt;() {\n    @Override\n    public Unit invoke() {\n        // Your Code\n        return null;\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 11149, "user_id": 706628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NICFY.jpg?s=128&g=1", "display_name": "Barry Fruitman", "link": "https://stackoverflow.com/users/706628/barry-fruitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 55618051, "answer_count": 3, "score": 4, "last_activity_date": 1616387035, "creation_date": 1554915547, "question_id": 55617808, "link": "https://stackoverflow.com/questions/55617808/how-do-i-pass-a-lambda-from-java-to-a-kotlin-method", "title": "How do I pass a lambda from Java to a Kotlin method?", "body": "<p>Can I call this Kotlin method from Java?</p>\n\n<p><code>fun foo(() -&gt; Unit)</code></p>\n\n<p>If so, what's the syntax?</p>\n"}, {"tags": ["java", "android", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "edited": false, "score": 5, "creation_date": 1554913043, "post_id": 55617081, "comment_id": 97927557, "body": "&quot;when day = 1, month = 8, year = 1947, it jumped out of the loop.&quot;  false AND true AND true is <b>false</b>"}, {"owner": {"reputation": 136042, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 0, "creation_date": 1554914616, "post_id": 55617081, "comment_id": 97928370, "body": "As &quot;we all know&quot;, that loop would also skip in Java when day = 1, because you wrote the loop to only iterate when <code>day != 1</code>. --- <i>&quot;So what exactly is the &quot;and&quot; and &quot;or&quot; operator in Kotlin?&quot;</i> They are the same as in Java, as you&#39;d know if you bothered with a web search for <a href=\"https://www.google.com/search?q=Kotlin+Operator\" rel=\"nofollow noreferrer\"><code>Kotlin Operator</code></a>, which would lead you right to the <a href=\"https://kotlinlang.org/docs/reference/keyword-reference.html#operators-and-special-symbols\" rel=\"nofollow noreferrer\"><b>Kotlin documentation</b></a>: <i>&quot;<code>&amp;&amp;</code>, <code>||</code>, <code>!</code> - logical &#39;and&#39;, &#39;or&#39;, &#39;not&#39; operators&quot;</i>."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 10675759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb12da047217846029fb530162abb762?s=128&d=identicon&r=PG&f=1", "display_name": "dem30", "link": "https://stackoverflow.com/users/10675759/dem30"}, "is_accepted": false, "score": 2, "last_activity_date": 1554914638, "last_edit_date": 1554914638, "creation_date": 1554913466, "answer_id": 55617266, "question_id": 55617081, "link": "https://stackoverflow.com/questions/55617081/what-is-the-and-and-or-operator-in-kotlin/55617266#55617266", "title": "What is the &quot;and&quot; and &quot;or&quot; Operator in Kotlin?", "body": "<p>To not jump out of the loop for day = 1, month = 8, year = 1947, the condition would have to be, for example: </p>\n\n<pre><code>while(day==1 &amp;&amp; month != 1 &amp;&amp; year!= 0) {\n    ...\n    ...\n}\n</code></pre>\n\n<p>Your initial condition says = If \"day\" isn't 1 and \"month\" isn't 1 and \"year\" isn't 0, only then continue. So it works as intended since parameter \"day\" is actually 1, and breaks out of the loop. You should read up on negation and logic gates, it will help you understand programming better, since logic gates have been exactly the same for around 100 years.</p>\n"}, {"tags": [], "owner": {"reputation": 4910, "user_id": 4896784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7D2Mdu6NAdk/AAAAAAAAAAI/AAAAAAAAAQg/OgEfBdpBgXg/photo.jpg?sz=128", "display_name": "ismail alaoui", "link": "https://stackoverflow.com/users/4896784/ismail-alaoui"}, "is_accepted": false, "score": 1, "last_activity_date": 1554914322, "creation_date": 1554914322, "answer_id": 55617459, "question_id": 55617081, "link": "https://stackoverflow.com/questions/55617081/what-is-the-and-and-or-operator-in-kotlin/55617459#55617459", "title": "What is the &quot;and&quot; and &quot;or&quot; Operator in Kotlin?", "body": "<p>There are two logical operators in Kotlin:</p>\n\n<blockquote>\n  <p>\u00a0||\u00a0:true\u00a0if either of the Boolean expression is\u00a0true</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>\u00a0&amp;&amp;: true if all Boolean expressions are\u00a0true</p>\n</blockquote>\n\n<p>Note that,\u00a0or\u00a0and\u00a0and\u00a0are functions that support\u00a0infix notations\n.\nLogical operators are used in control flow such as\u00a0if expression,\u00a0when expression, and\u00a0loops.</p>\n\n<p>For more information <a href=\"https://www.programiz.com/kotlin-programming/operators\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 109, "user_id": 8671825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kXCLD-iFZxs/AAAAAAAAAAI/AAAAAAAACQE/Y1VsDSJZq-w/photo.jpg?sz=128", "display_name": "61 Keys to Music", "link": "https://stackoverflow.com/users/8671825/61-keys-to-music"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6171, "favorite_count": 0, "closed_date": 1555005838, "answer_count": 2, "score": -3, "last_activity_date": 1554914638, "creation_date": 1554912756, "question_id": 55617081, "link": "https://stackoverflow.com/questions/55617081/what-is-the-and-and-or-operator-in-kotlin", "closed_reason": "Not suitable for this site", "title": "What is the &quot;and&quot; and &quot;or&quot; Operator in Kotlin?", "body": "<p>We all know that in Java, we use the &amp;&amp; operator for \"and\" and || operator or \"or\". But when it comes to Kotlin, this doesn't work. When I was trying out a simple program, I noticed that the &amp;&amp; operator in Kotlin was behaving like the || operator in Java using IntelliJ, I have no idea why.</p>\n\n<pre><code>while(day!=1 &amp;&amp; month != 1 &amp;&amp; year!= 0) {\n    ...\n    ...\n}\n</code></pre>\n\n<p>When I debugged the program, I saw that when day = 1, month = 8, year = 1947, it jumped out of the loop.</p>\n\n<p>I modified the code and debugged again, this time it jumped out when day = 31, month = 1, year = 1947.</p>\n\n<p>So what exactly is the \"and\" and \"or\" operator in Kotlin?</p>\n"}, {"tags": ["xml", "kotlin", "replace", "replaceall"], "comments": [{"owner": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1554912705, "post_id": 55616904, "comment_id": 97927381, "body": "If the legacy system actually handles XML, it can handle any special characters that might be in there. Can you describe more closely what the legacy system does?"}, {"owner": {"reputation": 1, "user_id": 10625576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9693ac69f872bbb52504a459c7abe5bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/10625576/kris"}, "reply_to_user": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1554913018, "post_id": 55616904, "comment_id": 97927541, "body": "It is external but throws an exception for invalid XML characters...we cannot get access to the logs..actually built a hack sanitize function to work around it, but that is not right and are just adding as we run into issues.  We know the patterns of characters we need to remove for 1.0 compatibility so trying to replicate what I do in Java...description.replace(&quot;&amp;&quot;,&quot;&quot;).replace(&quot;&#189;&quot;,&quot;&quot;).replace(&quot;&zwnj;&#8203;\\&quot;&quot;,&quot;&quot;).replace(&quot;&lt;&quot;,&zwnj;&#8203;&quot;&quot;).replace(&quot;&gt;&quot;,&quot;&quot;).&zwnj;&#8203;replace(&quot;\\u00AE&quot;,&quot;&quot;)&zwnj;&#8203;.replace(&quot;\\u00A9&quot;,&quot;&quot;&zwnj;&#8203;).replace(&quot;\\u2122&quot;,&quot;&zwnj;&#8203;&quot;).replace(&quot;&#233;&quot;,&quot;&quot;).r&zwnj;&#8203;eplace(&quot;&amp;#232&quot;,&quot;&quot;).r&zwnj;&#8203;eplace(&quot;&#232;&quot;,&quot;&quot;).repla&zwnj;&#8203;ce(&quot;\\u00E8&quot;,&quot;&quot;)"}, {"owner": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1554913100, "post_id": 55616904, "comment_id": 97927579, "body": "Are you sure you are saving the XML file in the correct file encoding, i.e. the XML declaration <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;...&quot;?&gt;</code> and the actual encoding of the file are in agreement?"}, {"owner": {"reputation": 1, "user_id": 10625576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9693ac69f872bbb52504a459c7abe5bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/10625576/kris"}, "reply_to_user": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1554913451, "post_id": 55616904, "comment_id": 97927751, "body": "See above, not a file, string API call to a .NET service...no encoding...returns generic 500 internal exception, can&#39;t change their service (which is unfortunate) so trying to work within that constraint"}, {"owner": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1554914242, "post_id": 55616904, "comment_id": 97928159, "body": "So it&#39;s a HTTP web service? Are you sure that the <code>Content-Type</code> header you send in your request and the byte encoding of the request payload are in agreement?"}], "owner": {"reputation": 1, "user_id": 10625576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9693ac69f872bbb52504a459c7abe5bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/10625576/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554912226, "creation_date": 1554912226, "question_id": 55616904, "link": "https://stackoverflow.com/questions/55616904/replacing-invalid-xml-1-0-characters-with-kotlin", "title": "Replacing invalid XML 1.0 characters with Kotlin", "body": "<p>I am working with Kotlin code that publishes to a legacy system that cannot handle any special character in XML 1.0.   </p>\n\n<p>In Java...I can use ReplaceAll to accomplish.....in Kotlin, I believe I need to use Regex, but unsure if my pattern string will work.</p>\n\n<p>Thoughts on a solution?</p>\n\n<p>Java</p>\n\n<pre><code>String pattern = \"[^\"+ \"\\u0009\\r\\n\"\n               + \"\\u0020-\\uD7FF\"\n                + \"\\uE000-\\uFFFD\"\n                + \"\\ud800\\udc00-\\udbff\\udfff\"\n                + \"]\";\n\nString result = thestring.replaceAll(pattern, \"\");\n</code></pre>\n\n<p>Kotlin????</p>\n\n<pre><code>str pattern = \"[^\"+ \"\\u0009\\r\\n\"\n               + \"\\u0020-\\uD7FF\"\n                + \"\\uE000-\\uFFFD\"\n                + \"\\ud800\\udc00-\\udbff\\udfff\"\n                + \"]\";\nstr = str.replace(Regex(pattern), \"\")\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mediastore"], "comments": [{"owner": {"reputation": 2594, "user_id": 7379765, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TVi7ot4M7K4/AAAAAAAAAAI/AAAAAAAAADo/bvtc9JNjmSE/photo.jpg?sz=128", "display_name": "Neeraj Sewani", "link": "https://stackoverflow.com/users/7379765/neeraj-sewani"}, "edited": false, "score": 0, "creation_date": 1554913907, "post_id": 55616785, "comment_id": 97928004, "body": "Please properly format the code and add more info regarding the problem. The formatting help would be provided in the right side of the screen."}, {"owner": {"reputation": 5202, "user_id": 2480714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nz3xK.png?s=128&g=1", "display_name": "PGMacDesign", "link": "https://stackoverflow.com/users/2480714/pgmacdesign"}, "edited": false, "score": 0, "creation_date": 1554914115, "post_id": 55616785, "comment_id": 97928105, "body": "Are you forgetting to update the adapter? <a href=\"https://stackoverflow.com/a/53005512/2480714\">stackoverflow.com/a/53005512/2480714</a>"}], "owner": {"reputation": 41, "user_id": 10353762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffb0efd7817c52b0a23a79a7316157d?s=128&d=identicon&r=PG&f=1", "display_name": "Grim", "link": "https://stackoverflow.com/users/10353762/grim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554911825, "creation_date": 1554911793, "last_edit_date": 1554911825, "question_id": 55616785, "link": "https://stackoverflow.com/questions/55616785/recyclerview-not-updating-with-changes-in-medialibrary", "title": "Recyclerview not updating with changes in medialibrary", "body": "<p>I have a code to retrieve list of all music from storage but after i renamed a file the recyclerview doesnt update with the change\neven after deleting a file it still remains the same</p>\n\n<p>fun Context.musicFiles():MutableList{</p>\n\n<pre><code>val list:MutableList&lt;Music&gt; = mutableListOf()\n\nval uri: Uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI\n//val uri: Uri = MediaStore.Audio.Media.INTERNAL_CONTENT_URI\n\n// IS_MUSIC : Non-zero if the audio file is music\nval selection = MediaStore.Audio.Media.IS_MUSIC + \"!= 0\"\n\n// Sort the musics\nval sortOrder = MediaStore.Audio.Media.TITLE + \" ASC\"\n//val sortOrder = MediaStore.Audio.Media.TITLE + \" DESC\"\n\n// Query the external storage for music files\nval cursor: Cursor = this.contentResolver.query(\n        uri, // Uri\n        null, // Projection\n        selection, // Selection\n        null, // Selection arguments\n        sortOrder // Sort order\n)\n\n// If query result is not empty\nif (cursor!= null &amp;&amp; cursor.moveToFirst()){\n    val id:Int = cursor.getColumnIndex(MediaStore.Audio.Media._ID)\n    val title:Int = cursor.getColumnIndex(MediaStore.Audio.Media.TITLE)\n    val artist:Int= cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST)\n    val musicpathh:Int= cursor.getColumnIndex(MediaStore.Audio.Media.DATA)\n    val album:Int = cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM)\n\n\n    // Now loop through the music files\n    do {\n        val audioId:Long = cursor.getLong(id)\n        val audioTitle:String = cursor.getString(title)\n        val audioArtist:String = cursor.getString(artist)\n        val audiopath:String = cursor.getString(musicpathh)\n        val audioalbum:String = cursor.getString(album)\n\n        // Add the current music to the list\n        list.add(Music(audioId,audioTitle,audioArtist,audiopath,audioalbum))\n    }while (cursor.moveToNext())\n}\n\n// Finally, return the music files list\nreturn  list\n</code></pre>\n\n<p>}</p>\n\n<p>data class Music(val id:Long, val title:String, val artist:String, val audiopath:String, val audioalbumm:String)</p>\n\n<p>Function to get musicfiles</p>\n\n<p>val list:MutableList = musicFiles()</p>\n\n<pre><code>    val titles = mutableListOf&lt;String&gt;()\n    val artist = mutableListOf&lt;String&gt;()\n    val musicpath = mutableListOf&lt;String&gt;()\n    val album = mutableListOf&lt;String&gt;()\n    val checkd = mutableListOf&lt;Boolean&gt;()\n    for (music in list){titles.add(music.title)}\n    for (music in list){artist.add(music.artist)}\n    for (music in list){musicpath.add(music.audiopath)}\n    for (music in list){album.add(music.audioalbumm)}\n    for (music in list){checkd.add(false)}\n\n    val adapter= HobbiesAdapter(this, titles, artist, musicpath, album, checkd)\n</code></pre>\n\n<h2>        recyclerView.adapter = adapter</h2>\n\n<p>adapter</p>\n\n<p>class HobbiesAdapter(val context: Context, val hobbies: MutableList, val artis: MutableList, val pathh: MutableList, val albumm: MutableList, val checkd: MutableList) : RecyclerView.Adapter() {</p>\n\n<pre><code>override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n    val view = LayoutInflater.from(context).inflate(R.layout.list_item, parent, false)\n    return MyViewHolder(view)\n}\n\noverride fun getItemCount(): Int {\n    return hobbies.size\n}\n\noverride fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n    val hobby = hobbies[position]\n    val artistt = artis[position]\n    val patth = pathh[position]\n    val albbum = albumm[position]\n    holder.setData(hobby, artistt, patth, position, albbum)\n}\n\ninner class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n    var currentHobby: String = \"\"\n    var currentArtist: String = \"\"\n    var currentPath: String = \"\"\n    var currentAlbum: String = \"\"\n    var currentPosition: Int = 0\n    var checkdd:Int=0\n    var currentCheckedStatus:Boolean=false\n\n    init {\n        itemView.setOnClickListener {\n            if(itemView.checkstatus.isChecked==true){\n                itemView.checkstatus.isChecked=false\n                checkdd=adapterPosition\n                checkd.set(checkdd,false)\n            }\n            else{\n                itemView.checkstatus.isChecked=true\n                checkdd=adapterPosition\n                checkd.set(checkdd,true)\n            }\n        }\n        itemView.checkstatus.setOnClickListener {\n            if(itemView.checkstatus.isChecked==true){\n                itemView.checkstatus.isChecked=false\n                checkdd=adapterPosition\n                checkd.set(checkdd,false)\n            }\n            else{\n                itemView.checkstatus.isChecked=true\n                checkdd=adapterPosition\n                checkd.set(checkdd,true)\n            }\n        }\n    }\n\n    fun setData(hobby: String, artiist: String, paath: String, pos: Int, albuum: String) {\n        itemView.txvTitle.text = hobby\n        itemView.txvArtist.text=artiist\n        itemView.txvPath.text=paath\n        itemView.txvAlbum.text=albuum\n        itemView.checkstatus.isChecked=checkd.get(pos)\n\n        this.currentHobby = hobby\n        this.currentArtist = artiist\n        this.currentPath = paath\n        this.currentAlbum = albuum\n        this.currentPosition = pos\n        this.currentCheckedStatus=checkd.get(pos)\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "kotlin", "file-io"], "owner": {"reputation": 41, "user_id": 10353762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffb0efd7817c52b0a23a79a7316157d?s=128&d=identicon&r=PG&f=1", "display_name": "Grim", "link": "https://stackoverflow.com/users/10353762/grim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554911103, "creation_date": 1554907668, "last_edit_date": 1554911103, "question_id": 55615503, "link": "https://stackoverflow.com/questions/55615503/2nd-file-gets-deleted-on-batch-renaming", "title": "2nd file gets deleted on batch renaming", "body": "<p>I am making a batch renamer and i have a function to rename which i call in a for loop.\nwhen i select two files the 2nd file gets deleted while the 1st one is renamed (if i select just 1 file it gets renamed properly)\ni havent tried selecting more than 2 files\nRenaming is done by a service\nAlso is it correct to call onDestroy inside onStartCommand?\ni did it bcz the service was not stopping after renaming</p>\n\n<pre><code>override fun onStartCommand(intent: Intent, flags: Int, startId: Int): Int {\n        val bundle: Bundle?=intent.extras\n        val pathss = bundle!!.getStringArray(\"path\")\n        val namess = bundle!!.getStringArray(\"newname\")\n        val resultt:MutableList&lt;String&gt; = mutableListOf()\n        val notifID = 595\n        val maxProgress = pathss.size\n        var currentProgress = 1\n\n        val inten = Intent(this, HobbiesActivity::class.java)\n        inten.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n\n        val pendingIntent : PendingIntent = PendingIntent.getActivity(this,0,inten, 0)\n\n        val builderr = NotificationCompat.Builder(this, \"Renamer\")\n                .setSmallIcon(R.drawable.ic_stat_name)\n                .setContentTitle(\"Renaming \" + pathss.size.toString() + \" files\")\n                .setPriority(NotificationCompat.PRIORITY_HIGH)\n                .setVisibility(1)\n\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val name = \"ChannelMain\"\n            val descText = \"Renaming Progress\"\n            val imp = NotificationManager.IMPORTANCE_HIGH\n            val channel = NotificationChannel(\"Renamer\", name, imp).apply {\n                description = descText\n                enableVibration(true)\n            }\n            val notificationManager: NotificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n            notificationManager.createNotificationChannel(channel)\n        }\n        Toast.makeText(this,\"Renaming\",Toast.LENGTH_SHORT).show()\n        startForeground(notifID,builderr.build())\n\n        with(NotificationManagerCompat.from(this)){\n            builderr.setProgress(maxProgress, currentProgress, false)\n            notify(notifID, builderr.build())\n\n            for(i in 0 until pathss.size)\n            {\n                if(renameTarget(pathss[i],namess[i])!=0)\n                {\n                    resultt.add(\"Failed\")\n                }\n                else\n                {\n                    resultt.add(\"Success\")\n                }\n                currentProgress = i+1\n                builderr.setContentTitle(\"Renaming \" + currentProgress.toString() + \" of \" + pathss.size.toString())\n                builderr.setProgress(maxProgress,currentProgress,false)\n                notify(notifID,builderr.build())\n            }\n\n            stopForeground(true)\n            builderr.setContentTitle(\"Rename Complete\")\n                    .setContentText(\"Renamed \" + maxProgress.toString() + \" files\")\n                    .setProgress(0,0,false)\n                    .setPriority(NotificationCompat.PRIORITY_HIGH)\n                    .setSmallIcon(R.drawable.ic_stat_name)\n                    .setContentIntent(pendingIntent)\n                    .setAutoCancel(true)\n            notify(notifID,builderr.build())\n        }\n        onDestroy()\n        return Service.START_STICKY\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        Toast.makeText(this,\"Renaming completed\",Toast.LENGTH_SHORT).show()\n        stopSelf()\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<h2>Rename Function</h2>\n\n<pre><code>fun renameTarget(filePath:String, newName:String):Int{\n    val src= File(filePath)\n    var ext=\"\"\n    val dest: File\n    if(src.isFile)\n    {\n        ext=filePath.substring(filePath.lastIndexOf(\".\"),filePath.length)\n    }\n    if(newName.isEmpty())\n    {\n        return -1\n    }\n    val temp=filePath.substring(0,filePath.lastIndexOf(\"/\"))\n    dest= File(\"$temp/$newName$ext\")\n    return if(src.renameTo(dest)) {\n        0\n    } else {\n        1\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1554907847, "post_id": 55615409, "comment_id": 97924527, "body": "IDE integration is usually always based on the linter, which the compiler usually calls too (unless it has its own). Either way it builds on the same source set, so you&#39;d have to find an IDE that builds on top of the source in a way that makes it able to process it"}, {"owner": {"reputation": 690, "user_id": 5334551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3DZmZ.png?s=128&g=1", "display_name": "Highbrainer", "link": "https://stackoverflow.com/users/5334551/highbrainer"}, "edited": false, "score": 0, "creation_date": 1554907918, "post_id": 55615409, "comment_id": 97924568, "body": "If the <code>@Deprecated</code> annotation (or javadoc tag) does not match your need, try a warning message in the javadoc, this is a good start !"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 2, "creation_date": 1554908712, "post_id": 55615409, "comment_id": 97925077, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1752607/how-to-intentionally-cause-a-custom-java-compiler-warning-message\">How to intentionally cause a custom java compiler warning message?</a>"}, {"owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1554908986, "post_id": 55615409, "comment_id": 97925246, "body": "@Laurence thanks I will check that"}, {"owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "reply_to_user": {"reputation": 690, "user_id": 5334551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3DZmZ.png?s=128&g=1", "display_name": "Highbrainer", "link": "https://stackoverflow.com/users/5334551/highbrainer"}, "edited": false, "score": 0, "creation_date": 1554909023, "post_id": 55615409, "comment_id": 97925276, "body": "@Highbrainer is there something like warning tag? or you mean just raw text into comment"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1554909151, "post_id": 55615409, "comment_id": 97925358, "body": "@svkaka - ya, I know it is not kotlin, but should not be too difficult to do something similar with pure kotlin annotations."}, {"owner": {"reputation": 690, "user_id": 5334551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3DZmZ.png?s=128&g=1", "display_name": "Highbrainer", "link": "https://stackoverflow.com/users/5334551/highbrainer"}, "edited": false, "score": 0, "creation_date": 1554988505, "post_id": 55615409, "comment_id": 97957925, "body": "@svakaka AFAIK there is no standard warning tag. Yet you can write your own !"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 9122671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b575aaf26120c5570d0ecd752dffe92?s=128&d=identicon&r=PG&f=1", "display_name": "Starmixcraft", "link": "https://stackoverflow.com/users/9122671/starmixcraft"}, "is_accepted": false, "score": 0, "last_activity_date": 1554907725, "creation_date": 1554907725, "answer_id": 55615521, "question_id": 55615409, "link": "https://stackoverflow.com/questions/55615409/is-there-a-way-to-warn-other-developers-about-function/55615521#55615521", "title": "Is there a way to warn other developers about function?", "body": "<p>Sadly I think thats not possible, but it depends on the IDE that you are using, there is no native java way to have the method display a warning, you have to make changes to the IDE's code analyser to get what you want</p>\n"}, {"comments": [{"owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "edited": false, "score": 0, "creation_date": 1554908908, "post_id": 55615699, "comment_id": 97925206, "body": "Thanks, I see that this won&#39;t be very easy to fix. I will try to create an issue on Kotlin issue tracker, as I think it can be very helpful."}], "tags": [], "owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "is_accepted": false, "score": 0, "last_activity_date": 1554908217, "creation_date": 1554908217, "answer_id": 55615699, "question_id": 55615409, "link": "https://stackoverflow.com/questions/55615409/is-there-a-way-to-warn-other-developers-about-function/55615699#55615699", "title": "Is there a way to warn other developers about function?", "body": "<p>Say you have a <code>foo.bar()</code> Make a delegation instead:</p>\n\n<pre><code>foo.special.bar()\nfoo.special().bar()\n</code></pre>\n\n<p>In this way can mark the \"special\" member, find usages.\nRefactoring required.</p>\n\n<p>This is a bit like a getter for a specific Business Object:</p>\n\n<pre><code>foo.getBazBO().bar()\n</code></pre>\n\n<p>An alternative would be to use your own <strong>annotation</strong>, use Doxygen or some other annotation processing, invest effort in IDE programming. More effort, less immediate results.</p>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 4099295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbc51b615d2491cefeb381fe8555d38?s=128&d=identicon&r=PG", "display_name": "Haomin", "link": "https://stackoverflow.com/users/4099295/haomin"}, "is_accepted": false, "score": 1, "last_activity_date": 1570040755, "last_edit_date": 1570040755, "creation_date": 1568043829, "answer_id": 57857236, "question_id": 55615409, "link": "https://stackoverflow.com/questions/55615409/is-there-a-way-to-warn-other-developers-about-function/57857236#57857236", "title": "Is there a way to warn other developers about function?", "body": "<p>Here is my take, it might be considered as totally incorrect. You can use @Deprecated to achieve the same result:</p>\n\n<pre><code>@Deprecated(\"test_only\")\nfun getNumberFormatterInstanceForTesting(context: Context, localeCode: String): NumberFormat {\n        if (!::numberFormat.isInitialized) numberFormat = NumberFormat.getCurrencyInstance(parseLocaleCode(localeCode))\n        return numberFormat\n}\n</code></pre>\n\n<p>Some more Example:</p>\n\n<pre><code>@VisibleForTesting\n@Deprecated(\"Test ONLY, DO NOT use in production\")\nconstructor(application: Application) : this(null, application)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 4072335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01e60f5fbc56b9ba59dde7a80bc59fc?s=128&d=identicon&r=PG&f=1", "display_name": "Can_of_awe", "link": "https://stackoverflow.com/users/4072335/can-of-awe"}, "is_accepted": false, "score": 0, "last_activity_date": 1568049896, "creation_date": 1568049896, "answer_id": 57858595, "question_id": 55615409, "link": "https://stackoverflow.com/questions/55615409/is-there-a-way-to-warn-other-developers-about-function/57858595#57858595", "title": "Is there a way to warn other developers about function?", "body": "<p>You can use Kotlin's <code>@Experimental</code> annotation:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/experimental.html#experimental-status-of-experimental-api-markers\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/experimental.html#experimental-status-of-experimental-api-markers</a></p>\n\n<p>This would make consumers of such functions require explicit opt-in, and you can chose between propagation and non-propagation of the marker.</p>\n\n<p>Note that as of Kotlin 1.3, the <code>@Experimental</code> annotation is itself experimental.</p>\n"}], "owner": {"reputation": 3174, "user_id": 4858147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-WvQqad2FrJE/AAAAAAAAAAI/AAAAAAAAAeM/8CaDjrq8nHw/photo.jpg?sz=128", "display_name": "svkaka", "link": "https://stackoverflow.com/users/4858147/svkaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1570040755, "creation_date": 1554907388, "last_edit_date": 1554911991, "question_id": 55615409, "link": "https://stackoverflow.com/questions/55615409/is-there-a-way-to-warn-other-developers-about-function", "title": "Is there a way to warn other developers about function?", "body": "<p>I want developers to be able to use the function but I want them to be aware that it's not intended for use in most cases.</p>\n\n<p>Is there a way to warn other developers about function. Similar to what lint does. Is there something like <code>@Warning(\"Prefer using #fooo() if possible)</code> annotation for the method? \nI want to know how to do it java or kotlin. Something similar to @Deprecated but making more sense in my context.</p>\n\n<p>I want my IDE to aware of that warning too, not only compiler.</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "is_accepted": true, "score": 2, "last_activity_date": 1554907946, "creation_date": 1554907946, "answer_id": 55615590, "question_id": 55615333, "link": "https://stackoverflow.com/questions/55615333/using-subcomponent-android-dagger-2-x-not-working/55615590#55615590", "title": "Using @Subcomponent android dagger 2.x not working", "body": "<p>You should switch <code>AndroidInjector.Factory</code> to <code>AndroidInjector.Builder</code> instead which implements <code>AndroidInjector.Factory</code>.</p>\n\n<pre><code>abstract class Builder: AndroidInjector.Builder&lt;OnBoardingWelcomeFragment&gt;\n</code></pre>\n\n<p>The <code>Factory</code> interface adds a method for <code>dagger.android</code> to use which you would have to implement yourself, since Dagger doesn't know how to&mdash;hence the error.</p>\n"}], "owner": {"reputation": 500, "user_id": 3809653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ezd9I.png?s=128&g=1", "display_name": "ArbenMaloku", "link": "https://stackoverflow.com/users/3809653/arbenmaloku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 55615590, "answer_count": 1, "score": 0, "last_activity_date": 1554907946, "creation_date": 1554907217, "last_edit_date": 1554907646, "question_id": 55615333, "link": "https://stackoverflow.com/questions/55615333/using-subcomponent-android-dagger-2-x-not-working", "title": "Using @Subcomponent android dagger 2.x not working", "body": "<p>I'm facing an issue while trying to use Dagger's subcomponent. When I try to build this I get this error.</p>\n\n<blockquote>\n  <p>@Subcomponent.Builder setter methods must return void, the builder, or a supertype of the builder. Inherited method: create(T).</p>\n</blockquote>\n\n<p>Does anyone have any idea what I'm doing wrong here?</p>\n\n<p>Thanks.</p>\n\n<pre><code>@FragmentScope\n@Subcomponent(modules = [OnBoardingWelcomeFragmentModule::class])\ninterface OnBoardingWelcomeFragmentComponent: AndroidInjector&lt;OnBoardingWelcomeFragment&gt; {\n\n  @Subcomponent.Builder\n  interface Builder: AndroidInjector.Factory&lt;OnBoardingWelcomeFragment&gt;\n\n\n}\n\n@Module\nopen class OnBoardingWelcomeFragmentModule {\n\n  @Provides\n  @FragmentScope\n  fun provideUI() = OnBoardingWelcomeFragmentUi()\n\n  @Provides\n  @ViewModelForDagger\n  fun providesViewModelForDagger(sharedPrefsStorage: SharedPrefsStorage): OnboardingViewModel =\n    OnboardingViewModel(sharedPrefsStorage)\n\n  @Provides\n  fun providesViewModelFactory(@ViewModelForDagger\n                               viewModel: Lazy&lt;OnboardingViewModel&gt;): ViewModelFactory&lt;OnboardingViewModel&gt; =\n    ViewModelFactory(viewModel)\n\n}\n</code></pre>\n"}, {"tags": ["java", "serialization", "kotlin", "gson", "assertj"], "comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1554909412, "post_id": 55615221, "comment_id": 97925517, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33381384/how-to-use-typetoken-generics-with-gson-in-kotlin\">How to use TypeToken + generics with Gson in Kotlin</a>"}, {"owner": {"reputation": 4000, "user_id": 1348834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca907a8681a3bdf665a604d316fae00?s=128&d=identicon&r=PG", "display_name": "Joel Costigliola", "link": "https://stackoverflow.com/users/1348834/joel-costigliola"}, "edited": false, "score": 0, "creation_date": 1554932419, "post_id": 55615221, "comment_id": 97936364, "body": "maybe try to ignore &quot;root&quot;, &quot;entrySet&quot;, &quot;values&quot; fields along with &quot;statusCode&quot; ? not great but if it works ..."}, {"owner": {"reputation": 521, "user_id": 6934058, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4dbeaacc0bff0fe5c7b5da3a6757d58d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitalii Plagov", "link": "https://stackoverflow.com/users/6934058/vitalii-plagov"}, "reply_to_user": {"reputation": 4000, "user_id": 1348834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca907a8681a3bdf665a604d316fae00?s=128&d=identicon&r=PG", "display_name": "Joel Costigliola", "link": "https://stackoverflow.com/users/1348834/joel-costigliola"}, "edited": false, "score": 0, "creation_date": 1554962414, "post_id": 55615221, "comment_id": 97943384, "body": "@JoelCostigliola well, I tried to ignore &quot;root, &quot;entrySet&quot; and &quot;values&quot; as well and it works. But when I remove &quot;statusCode&quot; from the list of ignored fields, then test doesn&#39;t fail. So I assume that POJOs are under the <code>root</code> field and thus the whole object is ignored when I ignore the <code>root</code> field."}, {"owner": {"reputation": 4000, "user_id": 1348834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca907a8681a3bdf665a604d316fae00?s=128&d=identicon&r=PG", "display_name": "Joel Costigliola", "link": "https://stackoverflow.com/users/1348834/joel-costigliola"}, "edited": false, "score": 1, "creation_date": 1554975557, "post_id": 55615221, "comment_id": 97950127, "body": "likely so Vitalii. If that is possible, you could try another approach and asserting directly the JSON data with <a href=\"https://github.com/lukas-krecan/JsonUnit\" rel=\"nofollow noreferrer\">github.com/lukas-krecan/JsonUnit</a> wich supports ignoring values"}], "owner": {"reputation": 521, "user_id": 6934058, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4dbeaacc0bff0fe5c7b5da3a6757d58d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitalii Plagov", "link": "https://stackoverflow.com/users/6934058/vitalii-plagov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554906925, "creation_date": 1554906925, "question_id": 55615221, "link": "https://stackoverflow.com/questions/55615221/gson-adds-root-entryset-values-fields-after-deserialization", "title": "Gson adds &quot;root&quot;, &quot;entrySet&quot;, &quot;values&quot; fields after deserialization", "body": "<p>I have the following JSON String:</p>\n\n<pre><code>[\n  {\n    \"id\": 23425,\n    \"mailboxGroupId\": 6659,\n    \"statusCode\": \"ACTIVE\"\n  },\n  {\n    \"id\": 23425,\n    \"groupId\": 6659,\n    \"statusCode\": \"INACTIVE\"\n  }\n]\n</code></pre>\n\n<p>I want to deserialize it into a list of two objects of Kotlin data class type:</p>\n\n<pre><code>val myList: List&lt;Foo&gt; = Gson().fromJson(response, ArrayList&lt;Foo&gt;().javaClass)\n</code></pre>\n\n<p>Next, I need to compare with AssertJ these two objects and assert that all fields except for <code>statusCode</code> are equal:</p>\n\n<pre><code>assertThat(myList.first()).isEqualToIgnoringGivenFields(myList.last(), \"statusCode\")\n</code></pre>\n\n<p>But when I run the test, I get an assertion error:</p>\n\n<pre><code>Expecting values:\n&lt;.....&gt;\nin fields:\n  &lt;[\"root\", \"entrySet\", \"values\"]&gt;\n</code></pre>\n\n<p>Looks like Gson adds <code>\"root\", \"entrySet\", \"values\"</code> during the deserialization, but I can't understand how can I exclude them?</p>\n\n<p>Or I don't need to exclude them and just need to change my assertion?</p>\n"}, {"tags": ["android", "kotlin", "scroll", "ontouchlistener"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1554906929, "creation_date": 1554906929, "answer_id": 55615223, "question_id": 55614689, "link": "https://stackoverflow.com/questions/55614689/kotlin-android-button-pressed-should-continue-scroll/55615223#55615223", "title": "Kotlin/Android - Button pressed should continue scroll", "body": "<p>You should use a ClickListener:</p>\n\n<pre><code>val button = findViewById&lt;Button&gt;(R.id.buttonx)\n   button.setOnClickListener { report_web_page.pageDown(true)}\n</code></pre>\n\n<blockquote>\n  <p>public boolean pageDown (boolean bottom)</p>\n  \n  <p>Scrolls the contents of this WebView down by half the page size.</p>\n</blockquote>\n"}], "owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554906929, "creation_date": 1554905407, "last_edit_date": 1554905923, "question_id": 55614689, "link": "https://stackoverflow.com/questions/55614689/kotlin-android-button-pressed-should-continue-scroll", "title": "Kotlin/Android - Button pressed should continue scroll", "body": "<p>I have a button that I want to scroll with a <code>webview</code> inside (but it could be something else) when pressed. \nUnfortunately I can't find a solution for it in Kotlin. \nThis is the code I have now:  </p>\n\n<pre><code>val button = findViewById&lt;Button&gt;(R.id.buttonx)\n   var count:Int = 0\n   button.setOnTouchListener { v, event -&gt;\n      when (event?.action) {\n         MotionEvent.ACTION_DOWN -&gt; report_web_page.scrollBy(0, count++)\n      }\n      v?.onTouchEvent(event) ?: true\n }\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["android", "generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 9702461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69b01c245bf7742b6282953ac51382b?s=128&d=identicon&r=PG&f=1", "display_name": "Denathan", "link": "https://stackoverflow.com/users/9702461/denathan"}, "edited": false, "score": 1, "creation_date": 1554968114, "post_id": 55614805, "comment_id": 97945910, "body": "Thanks but I don&#39;t think that will solve my problem. I don&#39;t have a problem with <code>constructor</code> while I have declared default values so I choose if I want to pass anything more than <code>Context</code>. The problem is that I still can&#39;t have one, parent class for all the custom views which can be specified type, for example, <code>NavigationView</code> so I could use methods from itself. At this moment when I change my custom view to implement my base class, there&#39;s no way to get methods from specified <code>View</code>."}], "tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1554905747, "creation_date": 1554905747, "answer_id": 55614805, "question_id": 55614639, "link": "https://stackoverflow.com/questions/55614639/how-to-create-base-class-for-custom-views-in-android-using-kotlin/55614805#55614805", "title": "How to create base class for custom views in Android using Kotlin?", "body": "<p>Try to declare your class like this:</p>\n\n<pre><code>abstract class MyCustomView&lt;VS : ViewState, V : View&lt;VS&gt;, P : Presenter&lt;VS, V, *&gt;&gt;() : View{ \n\n constructor(context: Context) : super(context)\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr)\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int, defStyleRes: Int) : super(context, attrs, defStyleAttr, defStyleRes)\n\n\n\n(...)\n }\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 9702461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69b01c245bf7742b6282953ac51382b?s=128&d=identicon&r=PG&f=1", "display_name": "Denathan", "link": "https://stackoverflow.com/users/9702461/denathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554905747, "creation_date": 1554905269, "question_id": 55614639, "link": "https://stackoverflow.com/questions/55614639/how-to-create-base-class-for-custom-views-in-android-using-kotlin", "title": "How to create base class for custom views in Android using Kotlin?", "body": "<p>I want to create a base class for all of my custom views. It can be a different type, for example, <code>RelativeLayout</code> or <code>NavigationView</code>. </p>\n\n<p>So I've created <code>abstract class</code> with generics which is implementing the deepest class of these views which is connecting them - <code>View</code>. This is what I've got:</p>\n\n<pre><code>abstract class MyCustomView&lt;VS : ViewState, V : View&lt;VS&gt;, P : Presenter&lt;VS, V, *&gt;&gt;(\ncontext: Context,\nattrs: AttributeSet? = null,\ndefStyleAttr: Int = 0,\ndefStyleRes: Int = 0\n) : View(context, attrs, defStyleAttr, defStyleRes) { ... }\n</code></pre>\n\n<p>But the problem is that now I'm able to inherit only from the <code>View</code>. How can I build somehow generic that must be a child of the <code>View</code> so I could implement it and still to be able inside my base class to <code>override</code> methods like <code>onAttachedToWindow</code>?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1554905013, "post_id": 55614513, "comment_id": 97922827, "body": "The context is not null, the RV &quot;educationDisplay&quot; is null"}, {"owner": {"reputation": 2956, "user_id": 8430649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e074258011c72401b1f2f3939f3689c?s=128&d=identicon&r=PG&f=1", "display_name": "S-Sh", "link": "https://stackoverflow.com/users/8430649/s-sh"}, "edited": false, "score": 0, "creation_date": 1554905127, "post_id": 55614513, "comment_id": 97922905, "body": "Why do you want to set adapter for <code>educationDisplay</code> in activity? It&#39;s a RV inside Fragment, so <code>Education</code> should keep all logic itself, not Activity"}, {"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1554905171, "post_id": 55614513, "comment_id": 97922921, "body": "educationDisplay will be not null in Fragment&#39;s onViewCreated... (of course if you are using some kinds of auto binder)"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554906267, "post_id": 55614513, "comment_id": 97923562, "body": "It says that <code>educationDisplay must not be null</code> meaning it is <code>null</code>. Maybe it is not in the layout?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1554906299, "post_id": 55614513, "comment_id": 97923584, "body": "Your Activity should not be directly calling into the Views of a Fragment."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11254330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c50224179bed40bb435b2a650c97fa?s=128&d=identicon&r=PG&f=1", "display_name": "CookieTheMonsta", "link": "https://stackoverflow.com/users/11254330/cookiethemonsta"}, "edited": false, "score": 1, "creation_date": 1555361618, "post_id": 55614864, "comment_id": 98076478, "body": "I had to put the code from displayEducationData() to &quot;override fun onViewCreated&quot;. After that, it worked as intended."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4266957, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-hn2_WWVX1LQ/AAAAAAAAAAI/AAAAAAAAADM/AKc2MeKbj_M/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/4266957/ricardo"}, "is_accepted": true, "score": 1, "last_activity_date": 1555398731, "last_edit_date": 1555398731, "creation_date": 1554905950, "answer_id": 55614864, "question_id": 55614513, "link": "https://stackoverflow.com/questions/55614513/how-to-pass-correct-context-in-a-fragment-with-recycler-view/55614864#55614864", "title": "How to pass correct context in a fragment with recycler view?", "body": "<p>You are handling your fragments UI in the Activity, which you should not and thats why you end up with a NPE.</p>\n\n<p>Let's go step by step. Define the Activity and set the ViewPager along with its tab's behaviours, and that's the only UI logic your Activity class will have</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        setUpUi()\n    }\n\n    private fun setUpUi() {\n        viewPager.adapter = FragmentAdapter(supportFragmentManager)\n        tabLayout.setupWithViewPager(viewPager)\n\n        // set tabLayout's behaviour with the corresponding fragments\n    }\n}\n</code></pre>\n\n<p>Now that your ViewPager is set, and you have added the Fragment, handle your Fragments View, for example:</p>\n\n<pre><code>class Education: Fragment() {\n\n    companion object {\n        fun newInstance(): Education {\n            return Education()\n        }\n    }\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        displayEducationData()\n    }\n\n    private fun displayEducationData() {\n        educationDisplay.layoutManager = LinearLayoutManager(activity,RecyclerView.VERTICAL,false)\n        educationDisplay.itemAnimator = DefaultItemAnimator()\n   educationDisplay.addItemDecoration(DividerItemDecoration(activity, RecyclerView.VERTICAL))\n        educationDisplay.adapter = EducationAdapter(EducationRepository.educations)\n    } \n}\n</code></pre>\n\n<p>Now do the same for the WorkExperience Fragment.</p>\n\n<p>PS: I'm assuming you are using Kotlin view extension, if not dont forget to get the reference to educationDisplay with <code>findViewById</code> inside <code>displayEducationData()</code> before calling anything on it</p>\n"}], "owner": {"reputation": 3, "user_id": 11254330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c50224179bed40bb435b2a650c97fa?s=128&d=identicon&r=PG&f=1", "display_name": "CookieTheMonsta", "link": "https://stackoverflow.com/users/11254330/cookiethemonsta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 55614864, "answer_count": 1, "score": -1, "last_activity_date": 1555398731, "creation_date": 1554904871, "last_edit_date": 1554905076, "question_id": 55614513, "link": "https://stackoverflow.com/questions/55614513/how-to-pass-correct-context-in-a-fragment-with-recycler-view", "title": "How to pass correct context in a fragment with recycler view?", "body": "<p>I'm making an android app in Kotlin, that is supposed to represent my CV. I made it with fragments and recycler view in mind. The first tab in tabLayout is supposed to have my biography, second should have education and third work experience. Also, the second and third tab should be made with recycler view. Problem is that one of the recycler views return null where context is. Education and work experience work in the same way.</p>\n\n<p>I've tried different context types and didn't find any that work. Also tried moving layoutManager and DefaultItemAnimator to MainActivity, but it didn't help ( I used \"this\" as context when I moved it to MainActivity).</p>\n\n<pre><code>Github link: https://github.com/CookieTheMonsta/MyCV\n</code></pre>\n\n<pre><code>class Education: Fragment() {\n\n    companion object {\n        fun newInstance(): Education {\n            return Education()\n        }\n    }\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.education,container,false)\n        educationDisplay.layoutManager = LinearLayoutManager(container?.context,RecyclerView.VERTICAL,false)\n        educationDisplay.itemAnimator = DefaultItemAnimator()\n        educationDisplay.addItemDecoration(DividerItemDecoration(container?.context, RecyclerView.VERTICAL))\n        return view\n    }\n}\n</code></pre>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        setUpUi()\n    }\n\n    private fun setUpUi() {\n        viewPager.adapter = FragmentAdapter(supportFragmentManager)\n        tabLayout.setupWithViewPager(viewPager)\n\n\n        displayData()\n\n    }\n\n    fun displayData() {\n\n        /*educationDisplay.adapter = EducationAdapter(EducationRepository.educations)\n        workexpDisplay.adapter = WorkExperienceAdapter(WorkRepository.works)*/\n    }\n}\n</code></pre>\n\n<p>Error list from Logcat</p>\n\n<pre><code>2019-04-10 15:57:44.260 9004-9004/hr.ferit.sumigaborna.mycv E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: hr.ferit.sumigaborna.mycv, PID: 9004\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{hr.ferit.sumigaborna.mycv/hr.ferit.sumigaborna.mycv.MainActivity}: java.lang.IllegalStateException: educationDisplay must not be null\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2913)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n     Caused by: java.lang.IllegalStateException: educationDisplay must not be null\n        at hr.ferit.sumigaborna.mycv.MainActivity.displayData(MainActivity.kt:39)\n        at hr.ferit.sumigaborna.mycv.MainActivity.setUpUi(MainActivity.kt:33)\n        at hr.ferit.sumigaborna.mycv.MainActivity.onCreate(MainActivity.kt:25)\n        at android.app.Activity.performCreate(Activity.java:7136)\n        at android.app.Activity.performCreate(Activity.java:7127)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2893)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\u00a0\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\u00a0\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\u00a0\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n        at android.os.Looper.loop(Looper.java:193)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\u00a0\n</code></pre>\n\n<p>App should have 3 tabs, first is biography, which you can ignore because it doesn't give problems. Education and work experience tabs should give recycler views with my info in it. But they don't because</p>\n"}, {"tags": ["android", "performance", "kotlin", "google-maps-android-api-2", "android-architecture-navigation"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 7119707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44e4c10c5471cbea93380f4cc05e1bb3?s=128&d=identicon&r=PG&f=1", "display_name": "Umskiptingur", "link": "https://stackoverflow.com/users/7119707/umskiptingur"}, "is_accepted": true, "score": 0, "last_activity_date": 1554969180, "creation_date": 1554969180, "answer_id": 55627360, "question_id": 55614381, "link": "https://stackoverflow.com/questions/55614381/googles-supportmapfragment-mapview-low-performance-after-poping-back-from-anoth/55627360#55627360", "title": "Google&#39;s SupportMapFragment MapView low performance after poping back from another Fragment", "body": "<p>So the problem is not with the Mapfragment or Google's SupportMapFragment but its an Android UI bug of some kind. I was able to avoid it and I want to share the solution.</p>\n\n<p>The problem itself occurred by the ActionBar's navigation, the original setup was like this. In res/menu/menu.xml</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item\n        android:title=\"@string/about\"\n        android:id=\"@+id/options_more\"\n        android:icon=\"@drawable/ic_baseline_more_vert_24px\"\n        android:orderInCategory=\"100\"\n        app:showAsAction=\"always\" /&gt;\n        &lt;menu&gt;\n            &lt;item\n                android:id=\"@+id/anotherFragment\"\n                android:title=\"@string/another_menu_title\" /&gt;\n\n            &lt;item\n                android:id=\"@+id/alsoAnotherFragment\"\n                android:title=\"@string/alsoanother_menu_title\" /&gt;\n        &lt;/menu&gt;\n    &lt;/item&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>In this case a drop down menu appears (which contains two more items) when one clicks the menu item in the upper right corner.</p>\n\n<p>When I used the layout like this the lagging occurred. After some hours of trial and error I separated the drop-down menu into two individual buttons like this:</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item\n        android:id=\"@+id/anotherFragment\"\n        android:icon=\"@drawable/ic_baseline_location_city_24px\"\n        android:title=\"@string/about\"\n        app:showAsAction=\"ifRoom\"/&gt;\n    &lt;item\n        android:id=\"@+id/alsoAnotherFragment\"\n        android:icon=\"@drawable/ic_baseline_more_vert_24px\"\n        android:title=\"@string/about\"\n        app:showAsAction=\"ifRoom\"/&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>So the drop-down menu had been dismissed and the problem is now gone. Everything works fine the lagging disappeared. I don't really understand what is the root of the problem but I think it has to have some kind of explanation. </p>\n"}], "owner": {"reputation": 115, "user_id": 7119707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44e4c10c5471cbea93380f4cc05e1bb3?s=128&d=identicon&r=PG&f=1", "display_name": "Umskiptingur", "link": "https://stackoverflow.com/users/7119707/umskiptingur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 55627360, "answer_count": 1, "score": 2, "last_activity_date": 1554969180, "creation_date": 1554904474, "question_id": 55614381, "link": "https://stackoverflow.com/questions/55614381/googles-supportmapfragment-mapview-low-performance-after-poping-back-from-anoth", "title": "Google&#39;s SupportMapFragment MapView low performance after poping back from another Fragment", "body": "<p>SupportMapFragment lags and all together has a bad performance after it's back from stack.</p>\n\n<p>The promblem is strange because I use navigation graph for navigation purposes and the problem is not always present. Here are the two different scenarios:</p>\n\n<p>MapFragment -> AnotherFragment (Through ActionBar menu item) -> Mapfragment</p>\n\n<pre><code>override fun onOptionsItemSelected(item: MenuItem?): Boolean {\n        onNavDestinationSelected(item!!, navController)\n        return super.onOptionsItemSelected(item)\n    }\n</code></pre>\n\n<p>In this case the MapFragment is lagging after back button pressed in AnotherFragment</p>\n\n<p>MapFragment -> AnotherFragment (Through a default button) -> Mapfragment</p>\n\n<pre><code>navController.navigate(R.id.action_mapFragment_to_anotherFragment)\n</code></pre>\n\n<p>In this case the MapFragment acts normally.</p>\n\n<p>I have tried to use <code>navController.navigate(R.id.action_mapFragment_to_anotherFragment)</code> in <code>onOptionsItemSelected(item: MenuItem?)</code> but I ended up with the same result.</p>\n\n<p>I also know about <a href=\"https://stackoverflow.com/questions/16265346/google-maps-v2-lag-after-popping-their-fragment-back-from-stack\">this</a> question with the same problems but under really different circumstances also the answers are not really helpful.</p>\n"}, {"tags": ["kotlin", "plugins", "flutter", "flutter-dependencies"], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 4708950, "user_type": "registered", "accept_rate": 32, "profile_image": "https://lh6.googleusercontent.com/-_gA4KDd_rF0/AAAAAAAAAAI/AAAAAAAAAcg/ss1IMpRQXKM/photo.jpg?sz=128", "display_name": "Derek Hannah", "link": "https://stackoverflow.com/users/4708950/derek-hannah"}, "edited": false, "score": 0, "creation_date": 1554912177, "post_id": 55616256, "comment_id": 97927096, "body": "that was it thanks, I&#39;m just getting back into Kotlin so im rusty haha"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1554909974, "creation_date": 1554909974, "answer_id": 55616256, "question_id": 55614366, "link": "https://stackoverflow.com/questions/55614366/kotlin-null-pointer-exception-when-trying-to-get-context-from-registar-in-flutte/55616256#55616256", "title": "Kotlin null pointer exception when trying to get context from Registar in Flutter", "body": "<p>In <code>getContext</code> you have <code>registrar!!</code>. And <code>registrar</code> is a nullable field which you initialize to <code>null</code> and can only set in a method which you never call. Note that <code>fun MychartPlugin</code> isn't a constructor, you'd call it as e.g.</p>\n\n<pre><code>val plugin = MychartPlugin()\nplugin.MychartPlugin(registrar)\n</code></pre>\n\n<p>But it doesn't seem like there is any reason to make <code>registrar</code> nullable or mutable in the first place. You can change to</p>\n\n<pre><code>class MychartPlugin(private val registrar: Registrar): ...\n</code></pre>\n\n<p>and </p>\n\n<pre><code>fun registerWith(registrar: Registrar) {\n  val channel = MethodChannel(registrar.messenger(), \"mychart_plugin\")\n  channel.setMethodCallHandler(MychartPlugin(registrar))\n}\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 4708950, "user_type": "registered", "accept_rate": 32, "profile_image": "https://lh6.googleusercontent.com/-_gA4KDd_rF0/AAAAAAAAAAI/AAAAAAAAAcg/ss1IMpRQXKM/photo.jpg?sz=128", "display_name": "Derek Hannah", "link": "https://stackoverflow.com/users/4708950/derek-hannah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 55616256, "answer_count": 1, "score": 2, "last_activity_date": 1554909974, "creation_date": 1554904441, "question_id": 55614366, "link": "https://stackoverflow.com/questions/55614366/kotlin-null-pointer-exception-when-trying-to-get-context-from-registar-in-flutte", "title": "Kotlin null pointer exception when trying to get context from Registar in Flutter", "body": "<p>I'm trying to create a Flutter Plugin that uses a native Android sdk</p>\n\n<p>I'm able to compile the .aar libraries of the sdk and use them in the project but the sdk requires me to get the context of the main activity</p>\n\n<p>here is the error im getting </p>\n\n<pre><code>E/MethodChannel#mychart_plugin(16277): Failed to handle method call\nE/MethodChannel#mychart_plugin(16277): kotlin.KotlinNullPointerException\nE/MethodChannel#mychart_plugin(16277):  at org.ccf.flutter.plugin.mychart_plugin.MychartPlugin.getContext(MychartPlugin.kt:79)\nE/MethodChannel#mychart_plugin(16277):  at epic.mychart.android.library.api.authentication.WPAPIAuthentication$1.getContext(WPAPIAuthentication.java:564)\nE/MethodChannel#mychart_plugin(16277):  at epic.mychart.android.library.prelogin.AuthenticationService.libraryLogin(AuthenticationService.java:461)\nE/MethodChannel#mychart_plugin(16277):  at epic.mychart.android.library.api.authentication.WPAPIAuthentication.login(WPAPIAuthentication.java:411)\nE/MethodChannel#mychart_plugin(16277):  at org.ccf.flutter.plugin.mychart_plugin.MychartPlugin.onMethodCall(MychartPlugin.kt:42)\nE/MethodChannel#mychart_plugin(16277):  at io.flutter.plugin.common.MethodChannel$IncomingMethodCallHandler.onMessage(MethodChannel.java:201)\nE/MethodChannel#mychart_plugin(16277):  at io.flutter.embedding.engine.dart.DartMessenger.handleMessageFromDart(DartMessenger.java:88)\nE/MethodChannel#mychart_plugin(16277):  at io.flutter.embedding.engine.FlutterJNI.handlePlatformMessage(FlutterJNI.java:219)\nE/MethodChannel#mychart_plugin(16277):  at android.os.MessageQueue.nativePollOnce(Native Method)\nE/MethodChannel#mychart_plugin(16277):  at android.os.MessageQueue.next(MessageQueue.java:325)\nE/MethodChannel#mychart_plugin(16277):  at android.os.Looper.loop(Looper.java:142)\nE/MethodChannel#mychart_plugin(16277):  at android.app.ActivityThread.main(ActivityThread.java:6541)\nE/MethodChannel#mychart_plugin(16277):  at java.lang.reflect.Method.invoke(Native Method)\nE/MethodChannel#mychart_plugin(16277):  at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\nE/MethodChannel#mychart_plugin(16277):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\n</code></pre>\n\n<p>here is my code for getting the context</p>\n\n<pre><code>class MychartPlugin: MethodCallHandler, WPAPIAuthentication.IWPOnLoginListener {\nprivate var registrar: PluginRegistry.Registrar? = null\nprivate val LOGIN_REQUEST_CODE = 9876\n\nfun MychartPlugin(registrar: PluginRegistry.Registrar) {\n  this.registrar = registrar\n}\ncompanion object {\n  @JvmStatic\n  fun registerWith(registrar: Registrar) {\n    val channel = MethodChannel(registrar.messenger(), \"mychart_plugin\")\n    channel.setMethodCallHandler(MychartPlugin())\n  }\n}\n\noverride fun onMethodCall(call: MethodCall, result: Result) {\n  if (call.method == \"getPlatformVersion\") {\n    result.success(\"Android ${android.os.Build.VERSION.RELEASE}\")\n  } else if (call.method == \"MyChartSdkLogin\") {\n  WPAPIAuthentication.login(this, \"TURKJ123\", \"TurkJ123\", LOGIN_REQUEST_CODE)\n    result.success(\"called MyChartSdkLogin\")\n  }  else {\n    result.notImplemented()\n  }\n}\n\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {\n  // super.onActivityResult(requestCode, resultCode, data)\n  if (requestCode == LOGIN_REQUEST_CODE) {\n    if (resultCode == Activity.RESULT_OK) {\n      // login successful\n      Log.i(\"LoginFragment\", \"OK\")\n\n    } else {\n      // login failed\n      val result = WPAPIAuthentication.getLoginResult(data)\n      Log.i(\"LoginFragment\", result.toString())\n      val errorMessage = result.getErrorMessage(getContext())\n      if (!errorMessage.isEmpty()) {\n        Toast.makeText(getContext(), errorMessage, Toast.LENGTH_LONG).show()\n      }\n    }\n  }\n}\n\noverride fun startActivityForResult(p0: Intent, p1: Int) {\n  // super.startActivityForResult(p0, p1)\n}\n\noverride fun getSupportFragmentManager(): FragmentManager {\n  val act = registrar!!.activity() as FragmentActivity\n  return act.getSupportFragmentManager()\n}\n\noverride fun getContext(): Context {\n  val cxt = registrar!!.context()\n  return cxt\n}\n\n}\n</code></pre>\n\n<p>notice the override getContext() method that im overriding from the sdk, I think this context call to the registar is where my KotlinNullPointerException is coming from </p>\n"}, {"tags": ["java", "kotlin", "collections", "java-8", "stream"], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 2, "last_activity_date": 1554904713, "creation_date": 1554904713, "answer_id": 55614461, "question_id": 55614304, "link": "https://stackoverflow.com/questions/55614304/is-it-possible-to-send-the-result-of-a-steam-operation-to-another-function-witho/55614461#55614461", "title": "Is it possible to send the result of a steam operation to another function without collecting it in another variable", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\">let</a> is what you are looking for. You don't even have to call <code>.let { anotherFunction(it) }</code> but can use a function reference <code>.let(::anotherFunction)</code></p>\n"}], "owner": {"reputation": 272, "user_id": 2514784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7e47460b47888a47d001b87608f7eaa3?s=128&d=identicon&r=PG", "display_name": "Prasad", "link": "https://stackoverflow.com/users/2514784/prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 55614461, "answer_count": 1, "score": 2, "last_activity_date": 1554904713, "creation_date": 1554904285, "question_id": 55614304, "link": "https://stackoverflow.com/questions/55614304/is-it-possible-to-send-the-result-of-a-steam-operation-to-another-function-witho", "title": "Is it possible to send the result of a steam operation to another function without collecting it in another variable", "body": "<p>For example, in Kotlin/java I have a list of Strings. I have filtered the list and passed it through a mapping function. In the end I can collect it into another list and then use that list anywhere I want like send it to another function. Is there any way to send the output list to another function without explicitly collecting it? Code snippet below:</p>\n\n<pre><code>val resultantList = stringList.filter { it.startsWith(\"a\") }\n            .map { it.substringAfter(\"b\") }\nanotherFunction(resultantList)\n</code></pre>\n\n<p>In the above piece of code I dont want to declare resultantList. Instead, at the end of map, can I pass the result to 'anotherFunction` directly. Something like</p>\n\n<pre><code>stringList.filter { it.startsWith(\"a\") }\n            .map { it.substringAfter(\"b\") }.&lt;something&gt;{anotherFunction(it)}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-asynctask", "retrofit", "retrofit2"], "owner": {"reputation": 71, "user_id": 11312038, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OAEtLBwZZQA/AAAAAAAAAAI/AAAAAAAAGD4/tUvnw6FLZWs/photo.jpg?sz=128", "display_name": "Joan Mart&#237;n", "link": "https://stackoverflow.com/users/11312038/joan-mart%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554903857, "creation_date": 1554902920, "last_edit_date": 1554903857, "question_id": 55613821, "link": "https://stackoverflow.com/questions/55613821/e-surface-getslotfrombufferlocked-unknown-buffer-when-i-try-to-send-a-delete", "title": "&quot;E/Surface: getSlotFromBufferLocked: unknown buffer&quot; when I try to send a delete request", "body": "<p>I'm developing an app that show, save and delete tasks. These tasks are stored on a server. I can post tasks and get tasks from the server but I can't delete because I get this error:</p>\n\n<p>E/Surface: getSlotFromBufferLocked: unknown buffer: 0xb8e7e8b8</p>\n\n<p>Retrofit interface:</p>\n\n<pre><code>\npackage com.e.databaseapp\n\nimport retrofit2.Call\nimport retrofit2.http.*\n\ninterface Service {\n    @Headers(\"user: joan\",\"Content-Type: application/json\")\n    @GET( \"task\" )\n    fun getListTask() : Call&lt;TaskListContainer&gt;\n\n    @Headers(\"user: joan\")\n    @FormUrlEncoded\n    @POST(\"task\")\n    fun saveTask (@Field(\"task\") taskname: String) : Call&lt;Task&gt;\n\n    @Headers(\"user: joan\")\n    @FormUrlEncoded\n    @DELETE(\"task\")\n    fun deleteTask (@Field(\"task\") taskname: String) : Call&lt;Void&gt;\n}\n\n</code></pre>\n\n<p>How I'm trying to save the task in the server:</p>\n\n<pre><code>fun delete(task: Task) {\n        DeleteAsyncTask(taskDao, service).execute(task)\n...\n}\n</code></pre>\n\n<pre><code>private class DeleteAsyncTask(private val taskDao: TaskDao, private val service: Service) :\n        AsyncTask&lt;Task, Void, Void&gt;() {\n        override fun doInBackground(vararg tasks: Task?): Void? {\n            for (task in tasks) {\n                task?.apply {\n                    service.deleteTask(this.task).execute()\n                    taskDao.deleteTask(task)\n                }\n            }\n            return null\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "realm", "viewmodel"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1554902582, "post_id": 55613645, "comment_id": 97921225, "body": "<code>when I leave my app, one Realm connection stays open, because activity is not in the Finished state.</code> that&#39;s a bug in your code, considering <code>onCleared()</code> is called when you leave the app (finish the Activity)."}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 1, "creation_date": 1554902785, "post_id": 55613645, "comment_id": 97921365, "body": "You should share <b>live data</b> across multiple fragments using shared <code>ViewModel</code> but for your Realm connections <i>(Realm related objects)</i>, I would recommend to use <code>ViewModel</code> that&#39;s attached to each fragments individually."}, {"owner": {"reputation": 1911, "user_id": 292465, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12b3b7441247c744295996b1e9fb7344?s=128&d=identicon&r=PG", "display_name": "Dra\u0161ko", "link": "https://stackoverflow.com/users/292465/dra%c5%a1ko"}, "reply_to_user": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1554913503, "post_id": 55613645, "comment_id": 97927776, "body": "@JeelVankhede, you are right, but this SharedViewModel alsohas some livedata which activity uses and also other fragments."}], "answers": [{"tags": [], "owner": {"reputation": 1911, "user_id": 292465, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12b3b7441247c744295996b1e9fb7344?s=128&d=identicon&r=PG", "display_name": "Dra\u0161ko", "link": "https://stackoverflow.com/users/292465/dra%c5%a1ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1554913409, "creation_date": 1554913409, "answer_id": 55617252, "question_id": 55613645, "link": "https://stackoverflow.com/questions/55613645/can-not-close-realm-instance-in-viewmodel-connected-with-activity/55617252#55617252", "title": "Can not close Realm instance in ViewModel connected with Activity", "body": "<p>As a matter of fact, @EpicPandaForce was right, the bug was in ViewModel's creation. I used <strong>Dagger 2</strong> for injection of <code>ViewModelFactory</code> which looks like this: </p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Singleton\nclass ViewModelFactory @Inject constructor(\n        private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;\n) : ViewModelProvider.Factory {\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        val creator = creators[modelClass] ?: creators.entries.firstOrNull {\n            modelClass.isAssignableFrom(it.key)\n        }?.value ?: throw IllegalArgumentException(\"unknown model class $modelClass\")\n        try {\n            @Suppress(\"UNCHECKED_CAST\")\n            return creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n\n<p>and <code>ViewModel</code>s provided by this factory were not bound to lifecycle of any activity and fragment. When I changed the creation of ViewModel as:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>sharedViewModel = ViewModelProviders.of(this).get(SharedViewModel::class.java)\n</code></pre>\n\n<p>after <code>OnDestroy()</code> of activity, <code>onCleared()</code> get called.</p>\n\n<p>Thanks, guys!</p>\n"}], "owner": {"reputation": 1911, "user_id": 292465, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12b3b7441247c744295996b1e9fb7344?s=128&d=identicon&r=PG", "display_name": "Dra\u0161ko", "link": "https://stackoverflow.com/users/292465/dra%c5%a1ko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55617252, "answer_count": 1, "score": 2, "last_activity_date": 1554913409, "creation_date": 1554902410, "question_id": 55613645, "link": "https://stackoverflow.com/questions/55613645/can-not-close-realm-instance-in-viewmodel-connected-with-activity", "title": "Can not close Realm instance in ViewModel connected with Activity", "body": "<p>I have <strong>single activity app</strong> and I have <code>SharedViewModel</code> attached to it, its main purpose is to be used for inner communication between fragments, etc. I also use <strong>Realm</strong> as storage solution. This viewModel as well as the others viewModels extends BaseViewModel.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>open class BaseViewModel(): ViewModel() {\n\n    val  realm: Realm = Realm.getDefaultInstance()\n\n    override fun onCleared() {\n        super.onCleared()\n        realm.close()\n        Log.d(\"BVM\", \"realm is ${ if (realm.isClosed) \"closed.\" else \"not closed.  Opened connections: ${Realm.getLocalInstanceCount(Realm.getDefaultConfiguration()!!)}\"}\")\n    }\n}\n</code></pre>\n\n<p>We are all familiar with this picture <a href=\"https://i.stack.imgur.com/hnuQT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hnuQT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Since <code>SharedViewModel</code>'s lyfecycle depends on lifecycle of activity's lifecycle, <code>onCleared()</code> method of this viewModel will be called not after <code>onDestroy</code> call of activity, but when activity is finished. It is not the same thing. As a result of that, when I leave my app, one Realm connection stays open, because activity is not in the <strong>Finished</strong> state. All other viewmodels connected from fragments had called their own <code>onCleared()</code> methods and their Realm's connections are closed. </p>\n\n<p>What is the best and cleanest way to handle this?</p>\n\n<p>I have a workaround in which I call viewModel's <code>onCleared()</code> manually in <code>onDestroy</code> method of activity and it's working, but that solution is rubbish. </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["kotlin", "retrofit"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10390792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OKMgAMM6zRw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUdM8zn_dkLrmqZaL2tyqTxzuvrw/mo/photo.jpg?sz=128", "display_name": "RT16", "link": "https://stackoverflow.com/users/10390792/rt16"}, "edited": false, "score": 0, "creation_date": 1554975544, "post_id": 55613411, "comment_id": 97950117, "body": "where should i add this code and how will my model class look..??@Laurence"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "reply_to_user": {"reputation": 35, "user_id": 10390792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OKMgAMM6zRw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUdM8zn_dkLrmqZaL2tyqTxzuvrw/mo/photo.jpg?sz=128", "display_name": "RT16", "link": "https://stackoverflow.com/users/10390792/rt16"}, "edited": false, "score": 0, "creation_date": 1554979246, "post_id": 55613411, "comment_id": 97952316, "body": "@RT16 - I updated the answer, hopefully that is enough for you to adjust your own code to do a manual deserialization of that Map."}], "tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": false, "score": 0, "last_activity_date": 1554979200, "last_edit_date": 1554979200, "creation_date": 1554901731, "answer_id": 55613411, "question_id": 55612919, "link": "https://stackoverflow.com/questions/55612919/how-to-get-the-key-value-from-json-using-retrofit/55613411#55613411", "title": "How to get the key value from json using retrofit", "body": "<p>So I believe retrofit allows for manual usage of gson, as per <a href=\"https://guides.codepath.com/android/Leveraging-the-Gson-Library\" rel=\"nofollow noreferrer\">leveraging gson</a></p>\n\n<p>The structure of the json you have described means that you do not have a kotlin land object at the top level, but a kotlin land Map. If you have any control over the API you are consuming, try not to put Maps at the top level - what is it a map of? Ideally you have a nice well defined object at the top level, and it has fields in it which convey the semantics of the data they encasulate. But, that is an asside.</p>\n\n<p>Let us define an object that your dates map to:</p>\n\n<pre><code>data class ImageMapping(\n        val path: String,\n        val org_name: String\n)\n</code></pre>\n\n<p>And then, for your particular data structure, you will need to use a direct call of your Retrofit service and access the body of the response directly. Once you have that, you can deserialize it yourself. I do not know how or what your endpoints look like, and this question is not about wiring up Retrofit I think, it is about deserializing json with a Map as the top object. Hopefully this is enough for you to wire it into your own code:</p>\n\n<pre><code>    val call = yourRetrofitService.getYourData(yourArgument)\n    val result = call.execute().body()\n    val gson = Gson()\n    val type = object : TypeToken&lt;Map&lt;String, List&lt;ImageMapping&gt;&gt;&gt;() {}.type\n    val map: Map&lt;String, List&lt;ImageMapping&gt;&gt; = gson.fromJson(result, type)\n    map.forEach{entry -&gt;\n        println(entry.key) // This should be your dates.\n    }\n</code></pre>\n\n<p>The key part to get json to work with the Map type in Kotlin is to define that TypeToken.</p>\n"}], "owner": {"reputation": 35, "user_id": 10390792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OKMgAMM6zRw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUdM8zn_dkLrmqZaL2tyqTxzuvrw/mo/photo.jpg?sz=128", "display_name": "RT16", "link": "https://stackoverflow.com/users/10390792/rt16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554979200, "creation_date": 1554900325, "question_id": 55612919, "link": "https://stackoverflow.com/questions/55612919/how-to-get-the-key-value-from-json-using-retrofit", "title": "How to get the key value from json using retrofit", "body": "<p>I have a Json response like this ,How to get the date</p>\n\n<pre><code>     {\n  \"2019-04-08\": [\n{\n  \"path\": \"/HEdY2Ry1fIMVq0GmN5NipS62SMcHpGH6ocZ0PU0p.png\",\n  \"org_name\": \"bmi_icon.png\"\n},\n{\n  \"path\": \"/v5QvdZfpZgGHh3ZfWNlvpTKYssXItbl1M6aaxlCJ.png\",\n  \"org_name\": \"heartrate.png\"\n}\n  ],\n   \"2019-04-01\": [\n{\n  \"path\": \"/L6xuyZGhy0giq8K4rxGnkcO1OND9lRzDrDHvokol.png\",\n  \"org_name\": \"avatar.png\"\n}\n  ],\n  \"2019-04-04\": [\n{\n  \"path\": \"/lRwBmuVMPv1AWdo00onOy5eOXuCacvfbfBVAaCZ1.jpeg\",\n  \"org_name\": \"bp.jpg\"\n}\n  ],\n    \"2019-04-10\": [\n{\n  \"path\": \"/aA5rV0FAStrtCH328jX9lLwHYRCIo8TuQ7f0PouV.png\",\n  \"org_name\": \"Screenshot_20180717-183728.png\"\n}\n  ]\n}\n</code></pre>\n\n<p>I need to get the date from the response </p>\n\n<p>I need to get the date  for every loop</p>\n"}, {"tags": ["design-patterns", "kotlin", "dependency-injection", "dagger-2", "kodein"], "comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1554900312, "post_id": 55612575, "comment_id": 97919727, "body": "I think that for any async task that is potentially long running in the background, and you have functions which seem to allow checking as to wheather any of them are currently running... you are going to have to do book keeping of those long running tasks in some way; keeping a reference and checking on state etc. Even if you wrapped these in coroutines, you would still need to keep a ref to the job to be able to do that check... feels like you might be stuck with it.."}, {"owner": {"reputation": 10753, "user_id": 1371329, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oqbUC.png?s=128&g=1", "display_name": "jaco0646", "link": "https://stackoverflow.com/users/1371329/jaco0646"}, "edited": false, "score": 0, "creation_date": 1554900329, "post_id": 55612575, "comment_id": 97919746, "body": "What&#39;s wrong with the callbacks you have? Spring provides callback hooks for all of its lifecycle events. That&#39;s generally the nature of event-driven programming."}, {"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1554900488, "post_id": 55612575, "comment_id": 97919849, "body": "Terminology nitpicks : that&#39;s not what is usually called <a href=\"http://callbackhell.com/\" rel=\"nofollow noreferrer\">callback hell</a>. I would also avoid the term clustered as it has a specific meaning in the industry (multiples instances of the same process set up to increase concurrency)"}, {"owner": {"reputation": 117, "user_id": 11079014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19d230d6c2c72b82d3f0b11be968a70?s=128&d=identicon&r=PG&f=1", "display_name": "NoamEpstein", "link": "https://stackoverflow.com/users/11079014/noamepstein"}, "reply_to_user": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1554902565, "post_id": 55612575, "comment_id": 97921212, "body": "@Aaron Hell &lt;- amount and clustered &lt;- combined"}, {"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1554908918, "post_id": 55612575, "comment_id": 97925209, "body": "Those callbackWrappers you&#39;ve written, they are in libModule or myApp? It may be that the abstraction work in libModule hasn&#39;t been pushed far enough and that it exposes an API that is still too low-level : I have a hard time understanding why a frontend would need to orchestrate asynchronously a dozen functions just to log an user in."}], "owner": {"reputation": 117, "user_id": 11079014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19d230d6c2c72b82d3f0b11be968a70?s=128&d=identicon&r=PG&f=1", "display_name": "NoamEpstein", "link": "https://stackoverflow.com/users/11079014/noamepstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554902534, "creation_date": 1554899285, "last_edit_date": 1554902534, "question_id": 55612575, "link": "https://stackoverflow.com/questions/55612575/how-to-get-rid-of-callback-amount-better-design", "title": "How to get rid of callback amount, better design?", "body": "<p>For Android:\nI have </p>\n\n<ul>\n<li>a core library with some basic functions: <strong>libCore</strong> . <em>libCore</em> is written is Java and contains some basic functions with calculations, does not contain any Android related libraries, pure Java. It has an interface offering those functions to the outer ring</li>\n<li>a library, what suses this core: <strong>libModule</strong> . <em>libModule</em> is written in Kotlin and is an Android library. libModule imports libCore and combines those basic calculations to more complex functions.</li>\n<li>finally my Android App : <strong>myApp</strong> . <em>myApp</em> is an Android App written also in Kotlin, this just imports libModule and not libCore. On this level we want to hide libCore stuff and do want to see any libcore stuff here..</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/EiptM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EiptM.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have a battery of callbacks from <em>libModule</em> to <em>myApp</em>, which I combined in the meanwhile to some Wrapper classes. Example:</p>\n\n<pre><code>class LoginCallbackWrapper {\n internal lateinit var authenticationCallback : AuthenticationCallback\n internal lateinit var loginCallback : LoginCallback\n internal lateinit var andDozenOtherCallback: DozenOtherCallbacks\n\n val isAuthInitialized = fun(): Boolean{\n  return ::authenticationCallback.isInitialized\n }\n //.. also for the other callbacks\n\n}\n</code></pre>\n\n<p>Further I have other CallbackWrapper with combined Callbacks.</p>\n\n<p><strong>I was hopeing there is another more elegant way for these amount of callbacks? \nAny design pattern, another library.. I've heard something about Dagger2. So maybe with dependency injection?</strong></p>\n"}, {"tags": ["android", "kotlin", "mapbox", "mapbox-gl", "mapbox-android"], "comments": [{"owner": {"reputation": 1331, "user_id": 6282077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjCAL.png?s=128&g=1", "display_name": "riastrad", "link": "https://stackoverflow.com/users/6282077/riastrad"}, "edited": false, "score": 0, "creation_date": 1554930584, "post_id": 55612377, "comment_id": 97935685, "body": "Can you clarify which version of the Maps SDK you are building with? Older versions of the SDK have different gesture logic, so this could be one reason you are seeing this behavior."}, {"owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "reply_to_user": {"reputation": 1331, "user_id": 6282077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjCAL.png?s=128&g=1", "display_name": "riastrad", "link": "https://stackoverflow.com/users/6282077/riastrad"}, "edited": false, "score": 0, "creation_date": 1554933051, "post_id": 55612377, "comment_id": 97936568, "body": "I am using v7.3.0"}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "is_accepted": false, "score": 1, "last_activity_date": 1554946780, "creation_date": 1554946780, "answer_id": 55623481, "question_id": 55612377, "link": "https://stackoverflow.com/questions/55612377/mapbox-map-only-semi-responds-to-panning-gestures/55623481#55623481", "title": "Mapbox map only semi responds to panning gestures", "body": "<p>My problem was that even though my fragment was external, it was hosted inside a scroll layout so the gestures were lost between the two view probably</p>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1554946780, "creation_date": 1554898689, "last_edit_date": 1554934012, "question_id": 55612377, "link": "https://stackoverflow.com/questions/55612377/mapbox-map-only-semi-responds-to-panning-gestures", "title": "Mapbox map only semi responds to panning gestures", "body": "<p>I have implements a mapbox MapView. It appears on screen just fine, but when I try to pan the map around, it kinds moves a few pixels on the screen in the direction I intended and then it stop while my finger is still sliding. Sometimes that would happen and sometimes it wouldn't respond at all.\nWhen it stops, it doesn't mean it is stuck now - I can try again and it might move again but the same way.\nIt's very unpredictable, not consistent and clunky.</p>\n\n<p>**I have to mention, that double click for zooming always works. So it's something with the swipe gesture that doesn't sit well.</p>\n\n<p>I have the map hosted in a fragment and I show in in a frame inside another fragment. Could it have anything to do to the fact that it's two layers of fragment managers (fragment within fragment).</p>\n\n<p>This is my map's fragment xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:mapbox=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".fragments.ImageMapViewFragment\"\n        tools:showIn=\"@layout/fragment_image_expanded\"&gt;\n\n\n    &lt;com.mapbox.mapboxsdk.maps.MapView\n            android:id=\"@+id/mapView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            mapbox:mapbox_cameraZoom=\"11\"/&gt;\n\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>This is my fragment:</p>\n\n<pre><code>    mapView = view.findViewById(co.getdere.R.id.mapView)\n\n\n\n    mapView?.getMapAsync { mapboxMap -&gt;\n        mapboxMap.setStyle(Style.LIGHT) { style -&gt;\n\n            style.addImage(\n                DERE_PIN,\n                BitmapUtils.getBitmapFromDrawable(resources.getDrawable(R.drawable.pin_icon))!!,\n                true\n            )\n\n            val geoJsonOptions = GeoJsonOptions().withTolerance(0.4f)\n            val symbolManager = SymbolManager(mapView!!, mapboxMap, style, null, geoJsonOptions)\n            symbolManager.iconAllowOverlap = true\n\n            sharedViewModelForImage.sharedImageObject.observe(this, Observer {\n                it?.let { image -&gt;\n\n\n\n\n                    val symbolOptions = SymbolOptions()\n                        .withLatLng(LatLng(image.location[0], image.location[1]))\n                        .withIconImage(DERE_PIN)\n                        .withIconSize(1.3f)\n                        .withZIndex(10)\n                        .withDraggable(true)\n\n                    symbolManager.create(symbolOptions)\n\n                    val position = CameraPosition.Builder()\n                        .target(LatLng(image.location[0], image.location[1]))\n                        .zoom(10.0)\n                        .build()\n\n                    mapboxMap.animateCamera(CameraUpdateFactory.newCameraPosition(position))\n\n\n                }\n            })\n\n\n        }\n    }\n</code></pre>\n\n<p>These are my dependencies (the last I've added trying to solve my problem but it remains, that dependency didn't change anything really)</p>\n\n<pre><code>implementation 'com.mapbox.mapboxsdk:mapbox-android-sdk:7.4.0-alpha.1'\nimplementation 'com.mapbox.mapboxsdk:mapbox-android-plugin-annotation-v7:0.6.0'\nimplementation 'com.mapbox.mapboxsdk:mapbox-android-gestures:0.4.0'\n</code></pre>\n"}, {"tags": ["android", "kotlin", "default", "android-dialer"], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 1814284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59cc2d88eb462d14e2899ef447d479e?s=128&d=identicon&r=PG", "display_name": "frezze09", "link": "https://stackoverflow.com/users/1814284/frezze09"}, "is_accepted": false, "score": 3, "last_activity_date": 1555446826, "creation_date": 1555446826, "answer_id": 55716209, "question_id": 55612361, "link": "https://stackoverflow.com/questions/55612361/telecommanager-action-change-default-dialer-returns-result-canceled-on-huawei-p8/55716209#55716209", "title": "TelecomManager.ACTION_CHANGE_DEFAULT_DIALER returns RESULT_CANCELED on huawei P8 Lite", "body": "<p>Try to add some intent filters to your Activity in AndroidManifest.</p>\n\n<pre><code>&lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.VIEW\"/&gt;\n    &lt;action android:name=\"android.intent.action.DIAL\"/&gt;\n\n    &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n    &lt;category android:name=\"android.intent.category.BROWSABLE\"/&gt;\n\n    &lt;data android:scheme=\"tel\"/&gt;\n&lt;/intent-filter&gt;\n&lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.DIAL\"/&gt;\n\n    &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 959505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGRAh.jpg?s=128&g=1", "display_name": "Pygmalion", "link": "https://stackoverflow.com/users/959505/pygmalion"}, "is_accepted": false, "score": 4, "last_activity_date": 1590753600, "creation_date": 1590753600, "answer_id": 62085481, "question_id": 55612361, "link": "https://stackoverflow.com/questions/55612361/telecommanager-action-change-default-dialer-returns-result-canceled-on-huawei-p8/62085481#62085481", "title": "TelecomManager.ACTION_CHANGE_DEFAULT_DIALER returns RESULT_CANCELED on huawei P8 Lite", "body": "<p>You'll also get a RESULT_CANCELED when targeting Android Q or higher, as the PermissionPolicyService removes the Action. You should use RoleManager.createRequestRoleIntent() instead.</p>\n"}, {"tags": [], "owner": {"reputation": 4303, "user_id": 1848639, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000351124204/picture?type=large", "display_name": "Tushar Monirul", "link": "https://stackoverflow.com/users/1848639/tushar-monirul"}, "is_accepted": false, "score": 3, "last_activity_date": 1601612531, "creation_date": 1601612531, "answer_id": 64166133, "question_id": 55612361, "link": "https://stackoverflow.com/questions/55612361/telecommanager-action-change-default-dialer-returns-result-canceled-on-huawei-p8/64166133#64166133", "title": "TelecomManager.ACTION_CHANGE_DEFAULT_DIALER returns RESULT_CANCELED on huawei P8 Lite", "body": "<p>If you run this code in <code>Android Q</code> or above it will not work. Its just fine for below <code>Q</code>. To get it working in <code>Android Q</code> try the code below:</p>\n<pre><code>RoleManager rm = (RoleManager) getSystemService(Context.ROLE_SERVICE);\nstartActivityForResult(rm.createRequestRoleIntent(RoleManager.ROLE_DIALER), 120);\n</code></pre>\n<p>It will popup the app chooser dialog.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 13712302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YGG8.png?s=128&g=1", "display_name": "javakam", "link": "https://stackoverflow.com/users/13712302/javakam"}, "is_accepted": false, "score": 0, "last_activity_date": 1610614382, "last_edit_date": 1610614382, "creation_date": 1610613074, "answer_id": 65715677, "question_id": 55612361, "link": "https://stackoverflow.com/questions/55612361/telecommanager-action-change-default-dialer-returns-result-canceled-on-huawei-p8/65715677#65715677", "title": "TelecomManager.ACTION_CHANGE_DEFAULT_DIALER returns RESULT_CANCELED on huawei P8 Lite", "body": "<p>My way:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SuppressLint(&quot;QueryPermissionsNeeded&quot;)\n@TargetApi(Build.VERSION_CODES.M)\nfun launchSetDefaultDialerIntent(activity: AppCompatActivity) {\n    Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra(\n        TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,\n        activity.packageName\n    ).apply {\n        if (resolveActivity(activity.packageManager) != null) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                val rm: RoleManager? = activity.getSystemService(RoleManager::class.java)\n                if (rm?.isRoleAvailable(RoleManager.ROLE_DIALER) == true) {\n                    @Suppress(&quot;DEPRECATION&quot;)\n                    activity.startActivityForResult(\n                        rm.createRequestRoleIntent(RoleManager.ROLE_DIALER),\n                        REQUEST_CODE_SET_DEFAULT_DIALER\n                    )\n                }\n            } else {\n                @Suppress(&quot;DEPRECATION&quot;)\n                activity.startActivityForResult(this, REQUEST_CODE_SET_DEFAULT_DIALER)\n            }\n        } else {\n            activity.toastShort(R.string.no_contacts_found)\n        }\n    }\n}\n</code></pre>\n<p>Then use it directly in Activity.</p>\n"}], "owner": {"reputation": 31, "user_id": 11175168, "user_type": "registered", "profile_image": "https://graph.facebook.com/117430659405992/picture?type=large", "display_name": "Yousaf Bungash", "link": "https://stackoverflow.com/users/11175168/yousaf-bungash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1434, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1610614478, "creation_date": 1554898641, "last_edit_date": 1610614478, "question_id": 55612361, "link": "https://stackoverflow.com/questions/55612361/telecommanager-action-change-default-dialer-returns-result-canceled-on-huawei-p8", "title": "TelecomManager.ACTION_CHANGE_DEFAULT_DIALER returns RESULT_CANCELED on huawei P8 Lite", "body": "<p>I want to change Android default dialer and want to make my own customized dialer. For this purpose I have choose this  <a href=\"https://github.com/mbarrben/android_dialer_replacement\" rel=\"nofollow noreferrer\">GIthub repo</a> as start up project. This works well on all other phone and stops working on huawei p8 lite. The default pop up message does not shows up for setting the app as default.\nHere is code block</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private fun checkDefaultDialer() {\n    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.M) return\n\n    val telecomManager = getSystemService(TELECOM_SERVICE) as TelecomManager\n    val isAlreadyDefaultDialer = packageName == telecomManager.defaultDialerPackage\n    if (isAlreadyDefaultDialer) return\n\n    val intent = Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER).putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME, packageName)\n    startActivityForResult(intent, REQUEST_CODE_SET_DEFAULT_DIALER)\n}\n\nprivate fun checkSetDefaultDialerResult(resultCode: Int) {\n    val message = when (resultCode) {\n        RESULT_OK -&gt; &quot;User accepted request to become default dialer&quot;\n        RESULT_CANCELED -&gt; &quot;User declined request to become default dialer&quot;\n        else -&gt; &quot;Unexpected result code $resultCode&quot;\n    }\n    Toast.makeText(this, message, Toast.LENGTH_SHORT).show()\n}\n</code></pre>\n<p><code>StertActivityforResult</code> returns with <code>RESULT_CANCELED</code> and message</p>\n<pre><code>User declined request to become default dialer\n</code></pre>\n<p>Can't find any solution for this. Any help will be greatly appreciated.</p>\n"}, {"tags": ["android", "kotlin", "wear-os", "android-wear-data-api"], "comments": [{"owner": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1554996265, "post_id": 55612020, "comment_id": 97963327, "body": "anything in logcat?"}, {"owner": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1555000118, "post_id": 55612020, "comment_id": 97965597, "body": "I&#39;d just generally say that the Data API has quite a few moving parts to get right, and it&#39;s tough to tell from your snippets what might be wrong. One obvious thing is that if you&#39;re always sending the same <code>&quot;TEST TEXT&quot;</code>, you&#39;ll never get <code>onDataChanged</code>, because the data isn&#39;t <i>changing</i>. But you could have other issues as well. A good tactic might be to start with the API sample from Google and adapt its already-working code for your use case."}, {"owner": {"reputation": 49, "user_id": 11078428, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hl7HIxIUUZ4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP3v8rwDTALq9iSzCjG-1sSL9aGwQ/mo/photo.jpg?sz=128", "display_name": "Bartson", "link": "https://stackoverflow.com/users/11078428/bartson"}, "reply_to_user": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1555018539, "post_id": 55612020, "comment_id": 97973367, "body": "Ohh, I get the point of onDataChanged :D But now I have a problem with my app logic. I have an option list in a wearable. Is data item a good way to switch options from the handheld?  Today I spend some time on google sample. I think that I don&#39;t get the sending data part. Can I send data in onClickListener? And one more thing, can I somehow check if the data item has been sent successfully (e.g. onDataRecived method)?"}, {"owner": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1555081200, "post_id": 55612020, "comment_id": 97997650, "body": "AFAIK, there&#39;s nothing like an &quot;onDataReceived&quot; event; we&#39;re at WearOS&#39; mercy on this. And it&#39;s probably best to open a new question regarding <code>onClickListener</code>, with more details about your setup."}, {"owner": {"reputation": 49, "user_id": 11078428, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hl7HIxIUUZ4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP3v8rwDTALq9iSzCjG-1sSL9aGwQ/mo/photo.jpg?sz=128", "display_name": "Bartson", "link": "https://stackoverflow.com/users/11078428/bartson"}, "reply_to_user": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1555082397, "post_id": 55612020, "comment_id": 97998384, "body": "Thank you, I think I&#39;m really close to the solution. But I can&#39;t understand one thing. Can I somehow get the first received data? Because every next data is intercepting by onDataChanged, but first is lost. Thank you for your patience :D"}, {"owner": {"reputation": 5595, "user_id": 252080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73d28072b248c62daa400049d37e6812?s=128&d=identicon&r=PG", "display_name": "String", "link": "https://stackoverflow.com/users/252080/string"}, "edited": false, "score": 0, "creation_date": 1555177548, "post_id": 55612020, "comment_id": 98022830, "body": "I don&#39;t understand what you&#39;re asking, sorry. No data should be &quot;intercepted&quot; by <code>onDataChanged</code>; all changes to data should be relied by the API to that method."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 11078428, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hl7HIxIUUZ4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP3v8rwDTALq9iSzCjG-1sSL9aGwQ/mo/photo.jpg?sz=128", "display_name": "Bartson", "link": "https://stackoverflow.com/users/11078428/bartson"}, "is_accepted": true, "score": 0, "last_activity_date": 1555088169, "creation_date": 1555088169, "answer_id": 55656417, "question_id": 55612020, "link": "https://stackoverflow.com/questions/55612020/how-to-send-string-via-dataitem/55656417#55656417", "title": "How to send String via DataItem", "body": "<p>I spend some time on this but finally, I get this working. In my watch face class I have onDataChange method that is receiving data item:</p>\n\n<pre><code>override fun onDataChanged(dataEvents: DataEventBuffer) {\n            dataEvents.forEach { event -&gt;\n                if (event.type == DataEvent.TYPE_CHANGED) {\n                    val path = event.dataItem.uri.path\n                    event.dataItem.also { item -&gt;\n                        if (path.compareTo(\"/testPath\") == 0) {\n                            DataMapItem.fromDataItem(item).dataMap.apply {\n                               //I'm changing var that is printed on the watchface screen\n                                testVar = getInt(\"key\").toString()\n                            }\n                        }\n                    }\n                } else if (event.type == DataEvent.TYPE_DELETED) {\n                    //DataItem deleted\n                } else {\n                    //Unknown data type event\n                }\n            }\n        }\n</code></pre>\n\n<p>You cannot forget about:</p>\n\n<pre><code> Wearable.getDataClient(applicationContext).addListener(this)\n</code></pre>\n\n<p>in your onCreate method.\nI'm sending data item from my handheld activity on button press.</p>\n\n<pre><code>sendDataItem.setOnClickListener {\n            putDataMapReq = PutDataMapRequest.create(\"/testPath\")\n            putDataMapReq.dataMap.putInt(\"key\", testVar++)\n            putDataReq = putDataMapReq.asPutDataRequest()\n            putDataReq.setUrgent()\n            putDataTask = Wearable.getDataClient(applicationContext).putDataItem(putDataReq)\n        }\n</code></pre>\n\n<p>It's not perfect but at least it's working and I'm able to go ahead. If anything is unclear feel free to write the comment. </p>\n"}], "owner": {"reputation": 49, "user_id": 11078428, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hl7HIxIUUZ4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP3v8rwDTALq9iSzCjG-1sSL9aGwQ/mo/photo.jpg?sz=128", "display_name": "Bartson", "link": "https://stackoverflow.com/users/11078428/bartson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 55656417, "answer_count": 1, "score": 0, "last_activity_date": 1555088169, "creation_date": 1554897531, "question_id": 55612020, "link": "https://stackoverflow.com/questions/55612020/how-to-send-string-via-dataitem", "title": "How to send String via DataItem", "body": "<p>I can't connect my watchface with a handheld app. I want to send a simple text (on click button in the handheld) for understanding how it works. Unfortunately, I'm missing something because I have not any message in the watchface.</p>\n\n<p>My onClickListener in the handheld MainActivity </p>\n\n<pre><code>sendDataItem.setOnClickListener {\n            val putDataReq: PutDataRequest = PutDataMapRequest.create(\"/test\").run {\n                dataMap.putString(\"key\", \"TEST TEXT\")\n                asPutDataRequest()\n            }\n            val putDataTask: Task&lt;DataItem&gt; = dataClient.putDataItem(putDataReq)\n        }\n</code></pre>\n\n<p>My override OnDataChanged method that (what I at least want to do) send data to my watchface</p>\n\n<pre><code>override fun onDataChanged(dataEvents: DataEventBuffer) {\n            dataEvents.forEach { event -&gt;\n                // DataItem changed\n                if (event.type == DataEvent.TYPE_CHANGED) {\n                    event.dataItem.also { item -&gt;\n                        if (item.uri.path.compareTo(\"/test\") == 0) {\n                            DataMapItem.fromDataItem(item).dataMap.apply {\n                                weatherTemp = getString(\"key\")\n                            }\n                        }\n                    }\n                } else if (event.type == DataEvent.TYPE_DELETED) {\n                    // DataItem deleted\n                }\n            }\n        }\n</code></pre>\n\n<p>I want a simple result. As soon I receive data I want to save it to weatherTemp var.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions", "annotation-processing", "kotlin-extension"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 0, "last_activity_date": 1554897477, "creation_date": 1554897477, "answer_id": 55612006, "question_id": 55611538, "link": "https://stackoverflow.com/questions/55611538/how-can-i-add-some-generated-code-in-existing-method/55612006#55612006", "title": "How can I add some generated code in existing method", "body": "<p>Kotlin Android Extensions is a compiler plugin, not an annotation processor. The Kotlin compiler plugin API is currently undocumented and unsupported; a supported API is being considered for future versions of Kotlin.</p>\n"}], "owner": {"reputation": 71, "user_id": 7656896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae635d406cf14e3eb24fc00fb52b0d2?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Kudoyar", "link": "https://stackoverflow.com/users/7656896/vlad-kudoyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554897477, "creation_date": 1554896081, "question_id": 55611538, "link": "https://stackoverflow.com/questions/55611538/how-can-i-add-some-generated-code-in-existing-method", "title": "How can I add some generated code in existing method", "body": "<p>Synthetic adds clearFindViewCache() in Activity.onDestroy() and Fragment.onDestroyView() methods. How can I add extra code to existing method with my own annotation processor?\nIf we look to the synthetic's implementation we can see usage of classes like ClassBuilderInterceptorExtension, ClassBuilderFactory, etc. Where can I find docs and examples about this API?</p>\n"}, {"tags": ["java", "android", "kotlin", "dagger"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11339934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3QmDeHQV8Ag/AAAAAAAAAAI/AAAAAAAAAl8/uHUDZEG8lAo/photo.jpg?sz=128", "display_name": "Nita Ioan Madalin", "link": "https://stackoverflow.com/users/11339934/nita-ioan-madalin"}, "edited": false, "score": 0, "creation_date": 1554895276, "post_id": 55611204, "comment_id": 97916739, "body": "I already have those, but for example when I want to use AndroidInjectionModule I get &quot;Unresolved Reference&quot;"}], "tags": [], "owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "is_accepted": false, "score": 0, "last_activity_date": 1554894941, "creation_date": 1554894941, "answer_id": 55611204, "question_id": 55611161, "link": "https://stackoverflow.com/questions/55611161/how-to-import-the-packages-from-https-google-github-io-dagger-api-2-12-dagger/55611204#55611204", "title": "How to import the packages from https://google.github.io/dagger/api/2.12/dagger/android/package-summary.html into Android Studio Project?", "body": "<p>Add on your gradle file:</p>\n\n<pre><code>dependencies {\n    implementation \"com.google.dagger:dagger:2.13\"\n    kapt \"com.google.dagger:dagger-compiler:2.13\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2655, "user_id": 4649110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpll5.jpg?s=128&g=1", "display_name": "Basi", "link": "https://stackoverflow.com/users/4649110/basi"}, "is_accepted": true, "score": 1, "last_activity_date": 1554895789, "creation_date": 1554895789, "answer_id": 55611469, "question_id": 55611161, "link": "https://stackoverflow.com/questions/55611161/how-to-import-the-packages-from-https-google-github-io-dagger-api-2-12-dagger/55611469#55611469", "title": "How to import the packages from https://google.github.io/dagger/api/2.12/dagger/android/package-summary.html into Android Studio Project?", "body": "<p>// Add Dagger dependencies</p>\n\n<pre><code>dependencies {\n  implementation 'com.google.dagger:dagger:2.x'\n  annotationProcessor 'com.google.dagger:dagger-compiler:2.x'\n}\n</code></pre>\n\n<p>If you're using classes in dagger.android you'll also want to include:</p>\n\n<pre><code>implementation 'com.google.dagger:dagger-android:2.x'\nimplementation 'com.google.dagger:dagger-android-support:2.x' // if you use the support libraries\nannotationProcessor 'com.google.dagger:dagger-android-processor:2.x'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11339934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3QmDeHQV8Ag/AAAAAAAAAAI/AAAAAAAAAl8/uHUDZEG8lAo/photo.jpg?sz=128", "display_name": "Nita Ioan Madalin", "link": "https://stackoverflow.com/users/11339934/nita-ioan-madalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55611469, "answer_count": 2, "score": -2, "last_activity_date": 1554895789, "creation_date": 1554894786, "question_id": 55611161, "link": "https://stackoverflow.com/questions/55611161/how-to-import-the-packages-from-https-google-github-io-dagger-api-2-12-dagger", "title": "How to import the packages from https://google.github.io/dagger/api/2.12/dagger/android/package-summary.html into Android Studio Project?", "body": "<p>How to import the packages from <a href=\"https://google.github.io/dagger/api/2.12/dagger/android/package-summary.html\" rel=\"nofollow noreferrer\">https://google.github.io/dagger/api/2.12/dagger/android/package-summary.html</a> into Android Studio Project? I was trying for a while but didnt get it</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 1473, "user_id": 4896472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-okq5ETw24NA/AAAAAAAAAAI/AAAAAAAAAAk/BsBfA9ermIQ/photo.jpg?sz=128", "display_name": "TheChubbyPanda", "link": "https://stackoverflow.com/users/4896472/thechubbypanda"}, "edited": false, "score": 0, "creation_date": 1554893715, "post_id": 55610806, "comment_id": 97915915, "body": "Please post the error you get."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1554902507, "post_id": 55610806, "comment_id": 97921177, "body": "<a href=\"https://medium.com/androiddevelopers/room-coroutines-422b786dc4c5\" rel=\"nofollow noreferrer\">medium.com/androiddevelopers/room-coroutines-422b786dc4c5</a>"}, {"owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "edited": false, "score": 0, "creation_date": 1554916482, "post_id": 55610806, "comment_id": 97929287, "body": "saw it but did not help"}], "answers": [{"tags": [], "owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "is_accepted": true, "score": 0, "last_activity_date": 1554976574, "creation_date": 1554976574, "answer_id": 55629696, "question_id": 55610806, "link": "https://stackoverflow.com/questions/55610806/how-to-get-deffered-from-dao/55629696#55629696", "title": "how to get Deffered from DAO?", "body": "<p>here is dependency which allows me to use <code>async{}.await</code> <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md</a></p>\n\n<p>The problem was that I was using old version which doesn't support it.</p>\n"}], "owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 55629696, "answer_count": 1, "score": 2, "last_activity_date": 1554976574, "creation_date": 1554893656, "last_edit_date": 1554894464, "question_id": 55610806, "link": "https://stackoverflow.com/questions/55610806/how-to-get-deffered-from-dao", "title": "how to get Deffered from DAO?", "body": "<p>I want to get Kotlin Coroutnies Deffered from DAO </p>\n\n<pre><code>@Query(\"select * from gameprocess where cabinId = :cabinId \")\nfun getAllGameProccesBiCabin(cabinId :Int) : Deferred&lt;GameProcess&gt;\n</code></pre>\n\n<p>but it does not compile (room does not know how to handle Deffered), but I need to use 'wait' from 'Deffered'   how can do this?</p>\n\n<p>as another option I could use extension function from this post but, dont know how to integrate it into dao:</p>\n\n<p><a href=\"https://codelabs.developers.google.com/codelabs/kotlin-coroutines/index.html?index=..%2F..index#6\" rel=\"nofollow noreferrer\">https://codelabs.developers.google.com/codelabs/kotlin-coroutines/index.html?index=..%2F..index#6</a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1554892306, "post_id": 55610276, "comment_id": 97915112, "body": "Use Gson or any parsing lib. it will parse your json into model without any iteration."}, {"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1554893210, "post_id": 55610276, "comment_id": 97915628, "body": "@HemantParmar what does Gson have to do with it? The question doesn&#39;t even mention JSON."}], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": false, "score": 0, "last_activity_date": 1554897915, "creation_date": 1554897915, "answer_id": 55612153, "question_id": 55610276, "link": "https://stackoverflow.com/questions/55610276/how-to-insert-items-in-list-of-item-without-a-lot-of-iterations/55612153#55612153", "title": "How to insert items in list of item without a lot of iterations", "body": "<p>So what you have is a DAG of depth 3. I am going to make some other adjustments other than just solving your iteration problem.</p>\n\n<p>First, I think the structure of your data classes is a bit redundant for describing a graph of objects. You do not need the category and subcategory fields in my opinion. Stripping out the irrelevant fields, this is what mine would look like:</p>\n\n<pre><code>data class MyItem(\n        var code: String,\n        var parent: String? = null,\n        var categories: MutableList&lt;MyItem&gt; = mutableListOf()\n){\n    val subcategories: List&lt;MyItem&gt;\n        get() = categories.flatMap { it.categories }\n\n}\n</code></pre>\n\n<p>A root/top item will be any item where the parent is null. And then its categories are its immediate children, and its sub categories are its grandchildren. I have provided a property here which will take care of grandchildren if you really want that accessor, and it means if you add something to a child, the parents grandchildren will be updated automatically :D.</p>\n\n<p>Now for version 1 of creating the object graph. This keeps things in line with your apparent structure of knowing which ones are roots, children and grand children. But this is not needed as you will see in version 2.</p>\n\n<pre><code>fun main() {\n    val topItems = listOf(MyItem(\"1\"), MyItem(\"2\"))\n    val middleItems = listOf(MyItem(\"1_1\", \"1\"), MyItem(\"1_2\", \"1\"), MyItem(\"2_1\", \"2\"))\n    val bottomItems = listOf(MyItem(\"1_1_1\", \"1_1\"), MyItem(\"1_2_1\", \"1_2\"), MyItem(\"2_1_1\", \"2_1\"))\n\n    val topByID = topItems.map { it.code to it }.toMap()\n    val middleByID = middleItems.map { it.code to it }.toMap()\n\n    bottomItems.forEach { middleByID[it.parent]?.categories?.add(it) }\n    middleItems.forEach { topByID[it.parent]?.categories?.add(it) }\n\n    println(topItems)\n    println(topItems[0].subcategories)\n}\n</code></pre>\n\n<p>But really, all you need to know for building an obect graph is parent child relationship, and they can all just be in a big collection. Then you can rebuild your object graph like this:</p>\n\n<pre><code>fun main() {\n    val topItems = listOf(MyItem(\"1\", \"*\"), MyItem(\"2\", \"*\"))\n    val middleItems = listOf(MyItem(\"1_1\", \"1\"), MyItem(\"1_2\", \"1\"), MyItem(\"2_1\", \"2\"))\n    val bottomItems = listOf(MyItem(\"1_1_1\", \"1_1\"), MyItem(\"1_2_1\", \"1_2\"), MyItem(\"2_1_1\", \"2_1\"))\n\n    val allItems = topItems + middleItems + bottomItems\n    val allItemsByID = allItems.map { it.code to it }.toMap()\n\n    allItems.forEach {\n        allItemsByID[it.parent]?.categories?.add(it)\n    }\n\n    println(topItems)\n    println(topItems[0].subcategories)\n}\n</code></pre>\n\n<p>This is my favorite approach :D </p>\n"}], "owner": {"reputation": 587, "user_id": 10490583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1e73ca2aa6d3d621d41ed1c6a7c7ec?s=128&d=identicon&r=PG&f=1", "display_name": "Strangelove", "link": "https://stackoverflow.com/users/10490583/strangelove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554897915, "creation_date": 1554892159, "last_edit_date": 1554893249, "question_id": 55610276, "link": "https://stackoverflow.com/questions/55610276/how-to-insert-items-in-list-of-item-without-a-lot-of-iterations", "title": "How to insert items in list of item without a lot of iterations", "body": "<p>I have a dataClass, which contains a unique <code>code</code> of item, code of the parent and two lists - <code>categories</code> and <code>subcategories</code>. </p>\n\n<pre><code>data class MyItem (\n        var code: String,\n        var name: String,*\n        var data: String,\n        var count: Int,\n        var parent: String,\n        var categories: MutableList&lt;MyItem&gt;,\n        var subcategories: MutableList&lt;MyItem&gt;\n)\n</code></pre>\n\n<p>I've got from server 3 different items list. And structure that I want to get is:</p>\n\n<pre><code>- listOfTopLevelItems\n--- listOfMiddleLevelItems\n----- listOfBottomLevelItems\n</code></pre>\n\n<p>where every topLevelItem contains a list of middleLevelItems and every middle level items contains a list of bottom level items. For that i used code below</p>\n\n<pre><code>                for (topItem in topLevelItems) {\n                    for (middleItem in middleLevelItems) {\n                        if (topItem.code == middleItem.parent) {\n                            val middleResultItem = middleItem\n\n                            for (bottomItem in bottomLevelItems) {\n                                if (middleItem.code == bottomItem.parent) {\n                                    middleResultItem.subcategories.add(bottomItem)\n                                }\n                            }\n\n                            topItem.categories.add(middleResultItem)\n                        }\n                    }\n\n                    result.add(topItem)\n                }\n</code></pre>\n\n<p>But the problem is if i will have a lots of items on bottom level, than it will be a lot of iterations. Is there is another way to solve this?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 717, "user_id": 4188684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb97b9c7751295149f50cd1cb422a25c?s=128&d=identicon&r=PG&f=1", "display_name": "Joachim Haglund", "link": "https://stackoverflow.com/users/4188684/joachim-haglund"}, "is_accepted": false, "score": 0, "last_activity_date": 1554893031, "creation_date": 1554893031, "answer_id": 55610587, "question_id": 55610266, "link": "https://stackoverflow.com/questions/55610266/how-to-save-instance-state-of-fragment-after-using-replace/55610587#55610587", "title": "How to save instance state of fragment after using replace()?", "body": "<p>You could use a handler class</p>\n\n<pre><code>public static class GameHandler {\n  public static string truthisvisible;\n}\n</code></pre>\n\n<p>and then just call</p>\n\n<pre><code>Gamehandler.truthisvisible = \"stringafter\";\nval previousValue = Gamehandler.truthisvisible;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554894681, "post_id": 55610701, "comment_id": 97916416, "body": "Does <code>view</code> refer to <code>getView()</code> here? I&#39;ve added my onCreateView in my code now - I&#39;m not sure how your code fits with my function: <a href=\"https://i.imgur.com/C1EJKja.png\" rel=\"nofollow noreferrer\">i.imgur.com/C1EJKja.png</a>"}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554900323, "post_id": 55610701, "comment_id": 97919739, "body": "In your code <code>View view = inflater.inflate()...</code>, then <code>return view</code>;"}], "tags": [], "owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "is_accepted": false, "score": 0, "last_activity_date": 1554893375, "creation_date": 1554893375, "answer_id": 55610701, "question_id": 55610266, "link": "https://stackoverflow.com/questions/55610266/how-to-save-instance-state-of-fragment-after-using-replace/55610701#55610701", "title": "How to save instance state of fragment after using replace()?", "body": "<p>You can try stopping your fragment from re-inflating it's view in <code>onCreateView()</code> like this </p>\n\n<pre><code> if (view != null) {\n    ViewGroup parent = (ViewGroup) view.getParent();\n    parent.removeView(view);\n } else {\n    //here you put your current code from `onCreateView()`\n }\n</code></pre>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1554894959, "creation_date": 1554892114, "last_edit_date": 1554894959, "question_id": 55610266, "link": "https://stackoverflow.com/questions/55610266/how-to-save-instance-state-of-fragment-after-using-replace", "title": "How to save instance state of fragment after using replace()?", "body": "<p>My Activity has 3 child fragments - with only 1 showing at a time. I'm using a BottomNavigationView to switch between child fragments. The initial child fragment shown, GameFragment(), is inflated when the activity is created via <code>supportFragmentManager.beginTransaction().replace()</code> which replaces the fragment container in my XML.</p>\n\n<p>Firstly, let me show you the full lifecycle of me entering my activity, switching fragment on <code>replace()</code>, then switching back to the initial fragment on <code>replace()</code>. These log statements are only related to the Activity and Fragment A (fragment B &amp; C not shown).</p>\n\n<pre><code>onCreate (Activity)\nonAttach (Fragment A)\nonCreate (Fragment A)\nonCreateView (Fragment A)\nonActivityCreated (Fragment A)\n</code></pre>\n\n<p><code>.replace()</code> Fragment A with Fragment B</p>\n\n<pre><code>onPause (Fragment A)\nonStop (Fragment A)\n</code></pre>\n\n<p><code>.replace()</code> Fragment B with Fragment A</p>\n\n<pre><code>onAttach (Fragment A)\nonCreate (Fragment A)\nonCreateView (Fragment A)\nonActivityCreated (Fragment A)\n</code></pre>\n\n<p>In order to retain my fragment state when switching fragments using <code>replace()</code>, I've tried the following methods which have both failed.</p>\n\n<ol>\n<li><p>Changing the value of a member variable in the fragment in <code>onDestroyView()</code> and then accessing it in <code>onActivityCreated()</code></p></li>\n<li><p>Adding to <code>getArguments()</code> in <code>onDestroyView()</code>and accessing in <code>onActivityCreated()</code>.</p>\n\n<pre><code>class GameFragment : Fragment(), View.OnClickListener {\n\n    var truthisvisible = \"string\"\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        truthisvisible = \"stringafter\"\n        arguments?.putString(\"success\", \"success\")\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.fragment_game, container, false)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        Log.d(\"truthisvisible\", truthisvisible) // prints \"string\"\n        if (savedInstanceState != null){\n            Log.d(\"LifecycleChange\", \"onActivityCreated savedInstanceState\") // savedInstanceState is always null\n        }\n        super.onActivityCreated(savedInstanceState)\n        Log.d(\"truthisvisible\", truthisvisible) // prints \"string\"\n        val print = arguments?.getString(\"success\", \"failure\")\n        Log.d(\"bool\", \"...\" + print) // prints \"...null\"\n</code></pre></li>\n</ol>\n\n<p>I've also tried changing the variable <code>truthisvisible</code> in <code>onPause()</code>, as well as trying to receive the variable in <code>onCreateView()</code> however the variable never changes to <code>stringafter</code>. Same goes for <code>getArguments()</code> - the arguments don't change.</p>\n\n<p>Also, the <code>savedInstanceState</code> in all these methods are <code>null</code>. Though I expect this as <code>onSaveInstanceState()</code> is never fired when replacing fragments. </p>\n\n<p>I'm totally at a dead end here. How do I change or save a variable in my fragment when <code>replace()</code> is called? Here's my parent activity if you're curious:</p>\n\n<pre><code>var initialFragmentLoad = false\n\nclass TruthOrDare : FragmentActivity(), BottomNavigationView.OnNavigationItemSelectedListener {\n\n    override fun onNavigationItemSelected(item: MenuItem): Boolean {\n        if (!initialFragmentLoad){\n            return true\n        }\n        val selectedFragment = when (item.itemId){\n            R.id.action_leaderboards -&gt; LeaderboardsFragment()\n            R.id.action_options -&gt; OptionsFragment()\n            else -&gt; GameFragment()\n        }\n        Log.d(\"ChosenFragment\", selectedFragment.toString())\n        val transaction = supportFragmentManager.beginTransaction().replace(R.id.fragment_layout, selectedFragment)\n        transaction.addToBackStack(null)\n        transaction.commit()\n        return true\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_truth_or_dare)\n        bottomNav_truthordare.setOnNavigationItemSelectedListener(this)\n        bottomNav_truthordare.selectedItemId = R.id.action_game\n        initialFragmentLoad = true\n        if (savedInstanceState != null) {\n            return\n        }\n        val firstFragment = GameFragment()\n        firstFragment.arguments = intent.extras\n        supportFragmentManager.beginTransaction().replace(R.id.fragment_layout, firstFragment).commit();\n    }\n\n}\n</code></pre>\n\n<p>I would also like to know <em>why</em> I can't change the variables using my above methods. </p>\n"}, {"tags": ["java", "android", "kotlin", "geolocation", "latitude-longitude"], "comments": [{"owner": {"reputation": 175, "user_id": 10289760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OslQv.jpg?s=128&g=1", "display_name": "X-Byte Technolabs pvt. ltd.", "link": "https://stackoverflow.com/users/10289760/x-byte-technolabs-pvt-ltd"}, "edited": false, "score": 0, "creation_date": 1554892038, "post_id": 55610188, "comment_id": 97914957, "body": "<b>val locality = addresses[0].locality</b> is your cityName in Address"}, {"owner": {"reputation": 338, "user_id": 9663575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sandeep Insan", "link": "https://stackoverflow.com/users/9663575/sandeep-insan"}, "edited": false, "score": 0, "creation_date": 1554892189, "post_id": 55610188, "comment_id": 97915050, "body": "<a href=\"https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android\" title=\"how to get city name by latitude longitude in android\">stackoverflow.com/questions/22323974/&hellip;</a> check it out once"}, {"owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "reply_to_user": {"reputation": 175, "user_id": 10289760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OslQv.jpg?s=128&g=1", "display_name": "X-Byte Technolabs pvt. ltd.", "link": "https://stackoverflow.com/users/10289760/x-byte-technolabs-pvt-ltd"}, "edited": false, "score": 0, "creation_date": 1554892197, "post_id": 55610188, "comment_id": 97915055, "body": "@X-ByteTechnolabspvt.ltd. Maybe for some addresses it is. In Leeds and Wakefield, <code>locality</code> returns a small suburb or null."}, {"owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "reply_to_user": {"reputation": 338, "user_id": 9663575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sandeep Insan", "link": "https://stackoverflow.com/users/9663575/sandeep-insan"}, "edited": false, "score": 0, "creation_date": 1554892281, "post_id": 55610188, "comment_id": 97915093, "body": "@SandeepInsan I already checked that out before posting. I even mentioned it in my question. All the answers to that question do not work for me. The problem is there are too many variations to how the addresses are stored and too many edge cases to code for and I cannot test for all possible edge cases because there are too many cities and possible locations."}], "answers": [{"comments": [{"owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "edited": false, "score": 0, "creation_date": 1554892821, "post_id": 55610438, "comment_id": 97915400, "body": "addresses.get(0).getAddressLine(0) contains a lot more than just the city name. With <code>53.801f</code> and <code>-1.549f</code> it returns <code>Portland Place, 5 Calverley St, Leeds LS1 3DA, UK</code>, and sometimes the street name is abbreviated but not in <code>thoroughfare</code> so I can&#39;t simply remove all the parts of the address that aren&#39;t the city to be left with the city."}], "tags": [], "owner": {"reputation": 53, "user_id": 7745543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PKrMwAofI-k/AAAAAAAAAAI/AAAAAAAAAJE/bMr1nc3U2yQ/photo.jpg?sz=128", "display_name": "navya sree", "link": "https://stackoverflow.com/users/7745543/navya-sree"}, "is_accepted": false, "score": 0, "last_activity_date": 1554894072, "last_edit_date": 1554894072, "creation_date": 1554892607, "answer_id": 55610438, "question_id": 55610188, "link": "https://stackoverflow.com/questions/55610188/how-can-i-get-city-name-from-geocoder/55610438#55610438", "title": "How can I get city name from Geocoder?", "body": "<pre><code>Geocoder geocoder = new Geocoder(this, Locale.getDefault());\nList addresses = geocoder.getFromLocation(MyLat, MyLong, 1); \nString cityName = addresses.get(0).getAddressLine(0); \nString stateName = addresses.get(0).getAddressLine(1); \nString countryName = addresses.get(0).getAddressLine(2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11089145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a898f769b16f4adbfe462409b5fbe2?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanka.k", "link": "https://stackoverflow.com/users/11089145/priyanka-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1554899715, "creation_date": 1554899715, "answer_id": 55612719, "question_id": 55610188, "link": "https://stackoverflow.com/questions/55610188/how-can-i-get-city-name-from-geocoder/55612719#55612719", "title": "How can I get city name from Geocoder?", "body": "<p>private void getPlaceInfo(double lat, double lon) throws IOException {</p>\n\n<pre><code>    mGeocoder = new Geocoder(AddressSelectorActivity.this, Locale.ENGLISH);\n    List&lt;Address&gt; addresses = mGeocoder.getFromLocation(lat, lon, 1);\n    if (addresses.get(0).getPostalCode() != null) {\n        String ZIP = addresses.get(0).getPostalCode();\n        Log.d(\"ZIP CODE\",ZIP);\n\n        google_add_pincode.setText(ZIP);\n    }\n\n    if (addresses.get(0).getLocality() != null) {\n        String city = addresses.get(0).getLocality();\n       Log.d(\"CITY\",city);\n\n\n    }\n\n    if (addresses.get(0).getAdminArea() != null) {\n        String state = addresses.get(0).getAdminArea();\n        Log.d(\"STATE\",state);\n\n    }\n\n    if (addresses.get(0).getCountryName() != null) {\n        String country = addresses.get(0).getCountryName();\n        Log.d(\"COUNTRY\",country);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5464, "user_id": 2452680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/jgUMi.jpg?s=128&g=1", "display_name": "Dan Bray", "link": "https://stackoverflow.com/users/2452680/dan-bray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1925, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1554905028, "creation_date": 1554891833, "last_edit_date": 1554905028, "question_id": 55610188, "link": "https://stackoverflow.com/questions/55610188/how-can-i-get-city-name-from-geocoder", "title": "How can I get city name from Geocoder?", "body": "<p>In Android (either Java or Kotlin is fine) how can I get the city name from the longitude and latitude?</p>\n\n<p>Below I've written a function to display address data. I would like to modify it so that it returns the city name:</p>\n\n<pre><code>private fun getCity(context: Context, latitude: Float, longitude: Float) {\n    val gcd = Geocoder(context, Locale.getDefault())\n    val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\n    Log.d(\"-----\", \"-----\")\n    Log.d(\"latitude\", latitude.toString())\n    Log.d(\"longitude\", longitude.toString())\n    if (addresses.size &gt; 0) {\n        val locality = addresses[0].locality\n        if (locality != null) {\n            Log.d(\"locality\", locality.toString())\n        }\n        val adminArea = addresses[0].adminArea\n        if (adminArea != null) {\n            Log.d(\"adminArea\", adminArea.toString())\n        }\n        val subAdminArea = addresses[0].subAdminArea\n        if (subAdminArea != null) {\n            Log.d(\"subAdminArea\", subAdminArea.toString())\n        }\n        val subLocality = addresses[0].subLocality\n        if (subLocality != null) {\n            Log.d(\"subLocality\", subLocality.toString())\n        }\n        val thoroughfare = addresses[0].thoroughfare\n        if (thoroughfare != null) {\n            Log.d(\"thoroughfare\", thoroughfare.toString())\n        }\n        val subThoroughfare = addresses[0].subThoroughfare\n        if (subThoroughfare != null) {\n            Log.d(\"subThoroughfare\", subThoroughfare.toString())\n        }\n        val extras = addresses[0].extras\n        if (extras != null) {\n            Log.d(\"extras\", extras.toString())\n        }\n        val premises = addresses[0].premises\n        if (premises != null) {\n            Log.d(\"premises\", premises.toString())\n        }\n        val postalCode = addresses[0].postalCode\n        if (postalCode != null) {\n            Log.d(\"postalCode\", postalCode.toString())\n        }\n        val featureName = addresses[0].featureName\n        if (featureName != null) {\n            Log.d(\"featureName\", featureName.toString())\n        }\n        val getAddressLine0 = addresses[0].getAddressLine(0)\n        if (getAddressLine0 != null)\n            Log.d(\"getAddressLine0\", getAddressLine0.toString())\n        for (i in 0 until addresses[0].maxAddressLineIndex) {\n            Log.d(\"getAddressLine($i)\", addresses[0].getAddressLine(i).toString())\n        }\n    }\n}\n</code></pre>\n\n<p>If I run <code>getCity(context, 53.7f, -1.506f)</code>, <code>featureName</code> contains the correct city name, Wakefield.</p>\n\n<p>If I run <code>getCity(context, 53.801f, -1.549f)</code>, <code>featureName</code> now contains the street name, Portland Place. <code>getAddressLine(0)</code> return Portland Place, 5 Calverley St, Leeds LS1 3DA, UK, which contains the correct city, Leeds. I could remove the street name, post code, and house number from getAddressLine(0) to be left with the city. Unfortunately, there are edge cases where that won't work because sometimes the street name contains abbreviations in <code>getAddressLine(0)</code> but not in <code>thoroughfare</code>.</p>\n\n<p>This question <a href=\"https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android\">How to Get City Name by Latitude &amp;Longitude in android?</a> has answers that are completely different because the addresses in different countries are stored in a different way.</p>\n\n<p>There seem to be quite a few variations and edge cases I need to code for just to get the city name for 2 neighbouring cities in the UK. How can I get the correct city name from any latitude or longitude world wide? There are way too many cities in the world to test my code against and code for, and there may be many edge cases and variations that I am unaware even exist.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The function below correctly gets the city in the UK. Unfortunately, it fails in the USA and India and probably any country that has states.</p>\n\n<pre><code>private fun getCity(context: Context, latitude: Float, longitude: Float): String {\n    val gcd = Geocoder(context, Locale.getDefault())\n    val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\n    if (addresses.size &gt; 0) {\n        val locality = addresses[0].locality\n        val getAddressLine0 = addresses[0].getAddressLine(0)\n        if (getAddressLine0 != null) {\n            val strs = getAddressLine0.split(\",\").toTypedArray()\n            if (strs.count() == 1) {\n                if (locality != null &amp;&amp; locality != \"\") {\n                    return \"$locality, ${strs[0]}\"\n                }\n                return strs[0]\n            }\n            for (str in strs) {\n                var tempStr = str.replace(postalCode, \"\")\n                if (tempStr != str) {\n                    tempStr = tempStr.trim()\n                    if (locality != null &amp;&amp; locality != \"\" &amp;&amp; locality != tempStr) {\n                        return \"$locality, $tempStr\"\n                    }\n                    return tempStr\n                }\n            }\n        }\n        if (locality != null) {\n            return locality\n        }\n    }\n    return \"\"\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-view", "viewflipper"], "answers": [{"tags": [], "owner": {"reputation": 860, "user_id": 6145406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbYUy.jpg?s=128&g=1", "display_name": "S.Bozzoni", "link": "https://stackoverflow.com/users/6145406/s-bozzoni"}, "is_accepted": false, "score": 5, "last_activity_date": 1554901227, "creation_date": 1554901227, "answer_id": 55613220, "question_id": 55609641, "link": "https://stackoverflow.com/questions/55609641/is-it-possible-to-extend-a-viewflipper-as-a-custom-view-so-to-change-the-initial/55613220#55613220", "title": "Is it possible to extend a ViewFlipper as a custom View so to change the initial page in preview?", "body": "<p>UPDATE:\n i found the answer on my own, don't know if there could be better solutions, here is what i've done:</p>\n\n<pre><code>class ViewFlipperEng : ViewFlipper {\n    var initialPage:Int=0;\n\n    constructor(context: Context) : super(context){\n        initialPage=0\n    }\n\n    constructor(context: Context, attrs: AttributeSet):    super(context, attrs){\n\n        if (attrs != null) {\n            // Attribute initialization\n            val a: TypedArray = context.obtainStyledAttributes(attrs, R.styleable.ViewFlipperEng, 0, 0);\n            initialPage = a.getInt(R.styleable.ViewFlipperEng_displayedChild,0);\n        }\n    }\n\n\n    override fun onAttachedToWindow()\n    {\n        displayedChild=initialPage\n        super.onAttachedToWindow()\n    }\n}\n</code></pre>\n\n<p>in res/values/attrs.xml i've added the attribute displayedChild</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;declare-styleable name=\"ViewFlipperEng\"&gt;\n        &lt;attr name=\"displayedChild\" format=\"integer\" /&gt;\n    &lt;/declare-styleable&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>for to use this new Custom view just use in your layout:</p>\n\n<pre><code>&lt;com.yourpackage.ViewFlipperEng\n            android:id=\"@+id/view_flipper_example\"\n            android:layout_width=\"match_parent\"\n            app:displayedChild=\"2\"        \n            android:layout_height=\"match_parent\"&gt;\n\n...declare your views here (at least 3 views since we are using displayedChild=\"2\")\n\n&lt;/com.yourpackage.ViewFlipperEng&gt;\n</code></pre>\n"}], "owner": {"reputation": 860, "user_id": 6145406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbYUy.jpg?s=128&g=1", "display_name": "S.Bozzoni", "link": "https://stackoverflow.com/users/6145406/s-bozzoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1554901716, "creation_date": 1554889959, "last_edit_date": 1554901716, "question_id": 55609641, "link": "https://stackoverflow.com/questions/55609641/is-it-possible-to-extend-a-viewflipper-as-a-custom-view-so-to-change-the-initial", "title": "Is it possible to extend a ViewFlipper as a custom View so to change the initial page in preview?", "body": "<p>Is it possible to extend a <code>ViewFlipper</code> as a custom <code>View</code> so that i could set an xml attribute for the first page to show in the preview?</p>\n\n<p>To see if it works i tried an example that should show the third page in the preview, but it doesn't work. This is the example in kotlin:</p>\n\n<pre><code>class ViewFlipperEng: ViewFlipper {\n\n  constructor(context: Context): super(context) {\n    init(context)\n  }\n\n  constructor(context: Context, attrs: AttributeSet): super(context, attrs) {\n    init(context)\n  }\n\n  private fun init(cxt: Context) {\n    displayedChild = 2\n    invalidate()\n    //also tried showNext or showPrevious\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "maven", "kotlin", "integration-testing", "maven-surefire-plugin"], "comments": [{"owner": {"reputation": 12923, "user_id": 944849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/af1b857e489439dc3c7b6cdc878562df?s=128&d=identicon&r=PG", "display_name": "user944849", "link": "https://stackoverflow.com/users/944849/user944849"}, "edited": false, "score": 2, "creation_date": 1554908469, "post_id": 55609640, "comment_id": 97924907, "body": "First, try using the same version of the surefire and failsafe plugins. They are closely related. Not sure it will fix anything, but IMO consistency is the first step."}, {"owner": {"reputation": 12923, "user_id": 944849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/af1b857e489439dc3c7b6cdc878562df?s=128&d=identicon&r=PG", "display_name": "user944849", "link": "https://stackoverflow.com/users/944849/user944849"}, "edited": false, "score": 0, "creation_date": 1554908653, "post_id": 55609640, "comment_id": 97925042, "body": "Also, the <code>&lt;useSystemClassLoader&gt;</code> attribute was added to the Surefire config, but it&#39;s Failsafe that&#39;s having the problem."}, {"owner": {"reputation": 360, "user_id": 8547799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c411a60f59489e43995ba795401818?s=128&d=identicon&r=PG&f=1", "display_name": "Tns", "link": "https://stackoverflow.com/users/8547799/tns"}, "edited": false, "score": 2, "creation_date": 1559577246, "post_id": 55609640, "comment_id": 99455934, "body": "For Spring Boot see <a href=\"https://stackoverflow.com/a/50804520/8547799\">stackoverflow.com/a/50804520/8547799</a> and <a href=\"https://github.com/spring-projects/spring-boot/issues/6254\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/6254</a>"}, {"owner": {"reputation": 2783, "user_id": 3344832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UAA19.jpg?s=128&g=1", "display_name": "Mohamed Ennahdi El Idrissi", "link": "https://stackoverflow.com/users/3344832/mohamed-ennahdi-el-idrissi"}, "edited": false, "score": 0, "creation_date": 1576756451, "post_id": 55609640, "comment_id": 105005606, "body": "Are you using jmockit?"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1509, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554908546, "creation_date": 1554889953, "last_edit_date": 1554908546, "question_id": 55609640, "link": "https://stackoverflow.com/questions/55609640/maven-failsafe-noclassdeffounderror-for-integration-tests", "title": "Maven Failsafe: NoClassDefFoundError for integration tests", "body": "<p>Setup: Kotlin integration tests in a spring boot application.</p>\n\n<p>Tests work fine when I run them with IntelliJ.\nWhen I try to run the integration tests with maven, though:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test (default) on project myapp: Execution default of goal org.apache.maven.plugins:maven-failsafe-plugin:2.19.1:integration-test failed: There was an error in the forked process\n[ERROR] java.lang.NoClassDefFoundError: ch/cypherk/myapp/service/CustomerService\n[ERROR]         at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\n[ERROR]         at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3138)\n[ERROR]         at java.base/java.lang.Class.getConstructor0(Class.java:3343)\n[ERROR]         at java.base/java.lang.Class.getConstructor(Class.java:2152)\n[ERROR]         at org.apache.maven.surefire.junit.PojoAndJUnit3Checker.isPojoTest(PojoAndJUnit3Checker.java:51)\n...\n</code></pre>\n\n<p>which is very annoying since I kind of need bamboo to run the darn things.</p>\n\n<p>The <code>CustomerService</code> is an interface and yes, it is compiled, there's a corresponding <code>.class</code> file in maven's <code>./target</code> directory and IntelliJ is set up to use the same.</p>\n\n<p>Can't quite figure out why this is failing and would appreciate some help with the plugin.</p>\n\n<p>Relavant excerpt from the <code>pom.xml</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.22.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;!-- doesn't make a difference if `true` or `false`--&gt;\n        &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.19.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;integration-test&lt;/goal&gt;\n                &lt;goal&gt;verify&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*IT*&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;excludes&gt;\n            &lt;exclude&gt;**/ui/*&lt;/exclude&gt;\n        &lt;/excludes&gt;\n        &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Full <code>pom.xml</code>: <a href=\"http://freetexthost.com/dbghyawijj\" rel=\"nofollow noreferrer\">http://freetexthost.com/dbghyawijj</a></p>\n\n<p>Full log of the failing integration test step: <a href=\"http://freetexthost.com/gbsmd3mwm2\" rel=\"nofollow noreferrer\">http://freetexthost.com/gbsmd3mwm2</a></p>\n"}, {"tags": ["kotlin", "retrofit2", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 0, "last_activity_date": 1554889574, "creation_date": 1554889574, "answer_id": 55609517, "question_id": 55609123, "link": "https://stackoverflow.com/questions/55609123/kotlin-uninitializedpropertyaccessexception-lateinit-property-salesgst-model-cl/55609517#55609517", "title": "kotlin.UninitializedPropertyAccessException: lateinit property salesGST Model class has not instalized", "body": "<p>This error is really clear. You try to use your variable salesGST before you initialized it.</p>\n\n<p>I guess this is coming from here:</p>\n\n<pre><code>class SalesGSTList {\n\n    val success : String = \"\"\n    // salesGST expects to be initialize soon and is never initialized\n    lateinit var salesGST: ArrayList&lt;SalesGST&gt;\n}\n</code></pre>\n\n<p>You should either do a lazy initialization of salesGST, or set it as:</p>\n\n<pre><code>var salesGST: ArrayList&lt;SalesGST&gt;? = null \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554889574, "creation_date": 1554888358, "question_id": 55609123, "link": "https://stackoverflow.com/questions/55609123/kotlin-uninitializedpropertyaccessexception-lateinit-property-salesgst-model-cl", "title": "kotlin.UninitializedPropertyAccessException: lateinit property salesGST Model class has not instalized", "body": "<p>Json Data parse using Retrofit2 and rxjav2. then its give error of lateinit Property of salesGST :</p>\n\n<p>\"kotlin.UninitializedPropertyAccessException: lateinit property salesGST has not been initialized\"</p>\n\n<p>Model Class SalesGSTList in JSONObject  key success after SalesGST data in ArrayList.</p>\n\n<pre><code>class SalesGSTList {\n\n    val success : String = \"\"\n\n    lateinit var salesGST: ArrayList&lt;SalesGST&gt;\n}\n</code></pre>\n\n<p>JSON Key declare in SalesGST.</p>\n\n<pre><code>class SalesGST {\n\n    var FYearID : Int = 0\n\n    var Cmp_Name : String? = \"\"\n\n    var GSTIN : String? = \"\"\n\n    var FirmName : String? = \"\"\n}\n</code></pre>\n\n<p>Parsing Json data Display in Textview and TableLayout. when data Subscribe then give error.</p>\n\n<p>sales.kt</p>\n\n<pre><code>class Sales : AppCompatActivity() {\n\n    internal lateinit var api : APIInterface\n\n    private var compositeDisposable : CompositeDisposable? = null\n\n    private var salesGST : SalesGST? = null\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_sales)\n\n\n        compositeDisposable = CompositeDisposable()\n\n        fetchYearData()\n    }\n\n    private fun fetchYearData(){\n\n        val retrofit = APIClient.apIClient\n        if (retrofit != null) {\n            api = retrofit.create(APIInterface::class.java)\n        }\n\n        /*compositeDisposable!!.add(api.getSalesGSTData(cid,fid,fDate,tDate)\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe { displaySalesGSTData(it.salesGST) })*/\n\n        compositeDisposable!!.add(api.getSalesGSTData(1,1,\"04/01/2018\",\"31/03/2019\")\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe( {\n                    displaySalesGSTData(it.salesGST) },\n                {\n\n                    Toast.makeText(this,it.message,Toast.LENGTH_LONG).show()\n\n\n        }))\n\n\n\n    }\n\n\n    private fun displaySalesGSTData(salesGSt : List&lt;SalesGST&gt;) {\n\n        salesGST = SalesGST()\n        tvSalesCompanyName.setText(salesGST!!.Cmp_Name)\n        tvGSTIN.setText(salesGST!!.GSTIN)\n\n\n        val rowHeader = TableRow(this@Sales)\n        rowHeader.setBackgroundColor(Color.parseColor(\"#c0c0c0\"))\n        rowHeader.setLayoutParams(TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,\n                TableLayout.LayoutParams.WRAP_CONTENT))\n        val headerText = arrayOf&lt;String&gt;(\"Sr.No.\", \"Invoice Type\", \"Bill No.\", \"Bill Date\", \"Firm Name\", \"GST NO\",\"TAX Total\",\"CGST\",\"SGST\",\"IGST\",\"Net Amount\")\n        for (c in headerText)\n        {\n            val tv = TextView(this@Sales)\n            tv.setLayoutParams(TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,\n                    TableRow.LayoutParams.WRAP_CONTENT))\n            tv.setGravity(Gravity.CENTER)\n           // tv.setBackgroundResource(R.drawable.table_header)\n            tv.setTextColor(Color.parseColor(\"#3F51B5\"))\n            tv.setTextSize(18F)\n            tv.setPadding(5, 5, 5, 5)\n            tv.setText(c)\n            rowHeader.addView(tv)\n        }\n        tableMarks.addView(rowHeader)\n\n        for (j in 0 until salesGSt.size)\n        {\n\n            var fName : String = salesGSt[j].FirmName!!\n            var invoice : String = salesGSt[j].InvoiceType!!\n            var bill_no : String = salesGSt[j].ChallanNo!!\n            var bill_date : String = salesGSt[j].ChallanDate!!\n            var gst_no : String = salesGSt[j].PartyGST!!\n            var tax_total : String = salesGSt[j].TaxTotal!!\n            var cgst : String = salesGSt[j].CGSTTotal!!\n            var igst : String = salesGSt[j].IGSTTotal!!\n            var sgst : String = salesGSt[j].SGSTTotal!!\n            var net_amount : String = salesGSt[j].ChallanAmount!!\n\n            var sr : Int = j\n            // dara rows\n            val row = TableRow(this@Sales)\n            row.setLayoutParams(TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,\n                    TableLayout.LayoutParams.WRAP_CONTENT))\n            val colText = arrayOf&lt;String&gt;(sr.toString(),(invoice), bill_no, bill_date, fName, gst_no,tax_total,cgst,sgst,igst,net_amount)\n            for (text in colText)\n            {\n                val tv = TextView(this@Sales)\n                tv.setLayoutParams(TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,\n                        TableRow.LayoutParams.WRAP_CONTENT))\n                tv.setGravity(Gravity.CENTER)\n               // tv.setBackgroundResource(R.drawable.table_shape)\n                tv.setTextSize(18F)\n                tv.setTextColor(Color.parseColor(\"#000000\"))\n                tv.setPadding(5, 5, 5, 5)\n                tv.setText(text)\n                row.addView(tv)\n            }\n            tableMarks.addView(row)\n        }\n    }\n}\n</code></pre>\n\n<p>Interface</p>\n\n<pre><code>@GET(\"SalesGST.php\")\n    fun getSalesGSTData(@Query(\"cid\") cid : Int,@Query(\"fid\") fid : Int,@Query(\"fd\") fd : String,@Query(\"td\") td : String) : Observable&lt;SalesGSTList&gt;\n</code></pre>\n"}, {"tags": ["arrays", "dictionary", "kotlin"], "comments": [{"owner": {"reputation": 3624, "user_id": 1293087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuLOs.jpg?s=128&g=1", "display_name": "Laksitha Ranasingha", "link": "https://stackoverflow.com/users/1293087/laksitha-ranasingha"}, "edited": false, "score": 1, "creation_date": 1554887998, "post_id": 55608696, "comment_id": 97912403, "body": "There&#39;s no native support, I don&#39;t think there will be either. <a href=\"https://discuss.kotlinlang.org/t/the-standard-library-and-a-kotlin-manifesto/1303\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a> Can&#39;t you use guava <code>MultiMap</code>?"}, {"owner": {"reputation": 75, "user_id": 495836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf94462872707bd5550e6900e4e217c8?s=128&d=identicon&r=PG", "display_name": "safepost", "link": "https://stackoverflow.com/users/495836/safepost"}, "reply_to_user": {"reputation": 3624, "user_id": 1293087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuLOs.jpg?s=128&g=1", "display_name": "Laksitha Ranasingha", "link": "https://stackoverflow.com/users/1293087/laksitha-ranasingha"}, "edited": false, "score": 0, "creation_date": 1554888313, "post_id": 55608696, "comment_id": 97912613, "body": "MutliMap seems exactly what i need but I avoid adding dependencies to my project when not vital. I&#39;ll stick to my poor implementation :) Thanks anyway for your reply !"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1554889701, "post_id": 55608696, "comment_id": 97913552, "body": "I have put an answer down, but I just wanted to clarify that the issue you are wanting a solution to is &quot;How to make a Map with default values if key is not present?&quot; and not a way to effeciently read a 400k line csv?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 495836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf94462872707bd5550e6900e4e217c8?s=128&d=identicon&r=PG", "display_name": "safepost", "link": "https://stackoverflow.com/users/495836/safepost"}, "edited": false, "score": 0, "creation_date": 1554905766, "post_id": 55609501, "comment_id": 97923272, "body": "Thanks ! Did the trick ! I can&#39;t figure how it works because in documentation it&#39;s said that if a value is already stored, then the subsequent calls have no effect ?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "reply_to_user": {"reputation": 75, "user_id": 495836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf94462872707bd5550e6900e4e217c8?s=128&d=identicon&r=PG", "display_name": "safepost", "link": "https://stackoverflow.com/users/495836/safepost"}, "edited": false, "score": 0, "creation_date": 1554907836, "post_id": 55609501, "comment_id": 97924517, "body": "Ya, so it will only build the default value once is what it is trying to say I think. So if you set it back to null, it won&#39;t work."}], "tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": true, "score": 1, "last_activity_date": 1554889519, "creation_date": 1554889519, "answer_id": 55609501, "question_id": 55608696, "link": "https://stackoverflow.com/questions/55608696/how-to-make-a-map-with-default-values-if-key-is-not-present/55609501#55609501", "title": "How to make a Map with default values if key is not present?", "body": "<p>Use <code>getOrPut</code> like:</p>\n\n<pre><code>data class MyObject(\n        val name: String,\n        val nicknames: String\n)\n\nfun main() {\n    val myObjectList = listOf(\n            MyObject(\"primary\", \"secondary1;secondary2\"),\n            MyObject(\"primary\", \"secondary3\")\n    )\n    val nameToNicks = mutableMapOf&lt;String, MutableList&lt;String&gt;&gt;()\n\n    myObjectList.forEach { myObj -&gt;\n        nameToNicks.getOrPut(myObj.name, {mutableListOf()}) .addAll(myObj.nicknames.split(\";\"))\n    }\n\n    print(nameToNicks)\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 495836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf94462872707bd5550e6900e4e217c8?s=128&d=identicon&r=PG", "display_name": "safepost", "link": "https://stackoverflow.com/users/495836/safepost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 55609501, "answer_count": 1, "score": 0, "last_activity_date": 1554906181, "creation_date": 1554887131, "last_edit_date": 1554906181, "question_id": 55608696, "link": "https://stackoverflow.com/questions/55608696/how-to-make-a-map-with-default-values-if-key-is-not-present", "title": "How to make a Map with default values if key is not present?", "body": "<p>I want to build a map of array parsing a list of object.\nWhen a index of that map as already been added, i need to add the elements of the array that were not added before, else i need to create the new element in the Map.</p>\n\n<p>Let's say we have a csv with data like this</p>\n\n<pre><code>names,nicknames\nTom,tommy;timmy\nSam,sammy\nTom,timmy;mymen\n</code></pre>\n\n<p>And i want a map like this :</p>\n\n<pre><code>Map[\"Tom\"] = [\"tommy\", \"timmy\", \"mymen\"]\nMap[\"Sam\"] = [\"sammy\"]\n</code></pre>\n\n<p>I'm quite surprised that there is no native function for that</p>\n\n<p>What's working, but should be improved ? (i have a 400k lines CSV to parse)</p>\n\n<pre><code>    val myObjectList: List&lt;myObject&gt; = beans.parse() /* importing POJOs from csv*/\n    val myMap: MutableMap&lt;String,List&lt;String&gt;&gt; = mutableMapOf()\n\n    myObjectList.forEach { entry -&gt;\n       if ( myMap[entry.name].isNullOrEmpty()) {\n           myMap[entry.name] = entry.nicknames.split(\";\")\n       } else {\n           myMap[entry.name]!!.plus(entry.nicknames.split(\";\"))\n       }\n    }\n\n\n    return myMap\n</code></pre>\n"}, {"tags": ["java", "android", "twitter", "kotlin"], "comments": [{"owner": {"reputation": 8279, "user_id": 262478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1526dcb784188b422544c6344ef223c2?s=128&d=identicon&r=PG", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/262478/andy-piper"}, "edited": false, "score": 0, "creation_date": 1554947888, "post_id": 55608310, "comment_id": 97940033, "body": "This is correct, the Composer does not provide a success or failure. If you need to check, you\u2019ll have to manually use the Twitter API to confirm whether a Tweet was posted."}], "owner": {"reputation": 384, "user_id": 11060614, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P7IOiWaZIlI/AAAAAAAAAAI/AAAAAAAAATg/fu147J6HHVY/photo.jpg?sz=128", "display_name": "Shahid Khan", "link": "https://stackoverflow.com/users/11060614/shahid-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554887465, "creation_date": 1554885894, "last_edit_date": 1554887465, "question_id": 55608310, "link": "https://stackoverflow.com/questions/55608310/twitter-composer-is-not-broadcast-the-status-of-tweet", "title": "Twitter composer is not broadcast the status of tweet", "body": "<p>I have implemented the Twitter composer in my app and it is successfully tweeting to my account but it doesn't broadcast the status of the tweet like success or failed. \nBelow is my code:</p>\n\n<pre><code>  TweetComposer.Builder builder = new TweetComposer.Builder(activity).text(shareContent)\n  builder.show();\n</code></pre>\n\n<p>Broadcast Reciever code:</p>\n\n<pre><code>public class MyTwitterResultReciver extends BroadcastReceiver {\n@Override\npublic void onReceive(Context context, Intent intent) {\n    if (TweetUploadService.UPLOAD_SUCCESS.equals(intent.getAction())) {\n        Toast.makeText(context, \"Tweet uploaded successfully with Tweet ID : \" + tweetId, Toast.LENGTH_SHORT).show();\n    } else if (TweetUploadService.UPLOAD_FAILURE.equals(intent.getAction())) {\n        Toast.makeText(context, \"Failed to uploaded tweet.\", Toast.LENGTH_SHORT).show();\n    } else if (TweetUploadService.TWEET_COMPOSE_CANCEL.equals(intent.getAction())) {\n        Toast.makeText(context, \"User cancelled Tweet compose..\", Toast.LENGTH_SHORT).show();\n    }\n}\n}\n</code></pre>\n\n<p>And i have added this reciever in my manifest file like below:</p>\n\n<pre><code>   &lt;receiver android:name=\".twitter.MyTwitterResultReciver\"\n              android:exported=\"false\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.twitter.sdk.android.tweetcomposer.UPLOAD_SUCCESS\"/&gt;\n            &lt;action android:name=\"com.twitter.sdk.android.tweetcomposer.UPLOAD_FAILURE\"/&gt;\n            &lt;action android:name=\"com.twitter.sdk.android.tweetcomposer.TWEET_COMPOSE_CANCEL\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-xml"], "answers": [{"comments": [{"owner": {"reputation": 12144, "user_id": 1581185, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/UVLZc.jpg?s=128&g=1", "display_name": "Sagar Maiyad", "link": "https://stackoverflow.com/users/1581185/sagar-maiyad"}, "edited": false, "score": 0, "creation_date": 1554891214, "post_id": 55609771, "comment_id": 97914512, "body": "I tried with almost all emojis and its working fine with utf-8."}], "tags": [], "owner": {"reputation": 10325, "user_id": 1372866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb12cb068802938b40b8b36ea0c43ecd?s=128&d=identicon&r=PG", "display_name": "ashakirov", "link": "https://stackoverflow.com/users/1372866/ashakirov"}, "is_accepted": false, "score": 0, "last_activity_date": 1554891215, "last_edit_date": 1554891215, "creation_date": 1554890351, "answer_id": 55609771, "question_id": 55608267, "link": "https://stackoverflow.com/questions/55608267/java-lang-illegalargumentexception-illegal-character-u0-in-writing-xml-file/55609771#55609771", "title": "java.lang.IllegalArgumentException: Illegal character (U+0) in writing xml file android", "body": "<p><code>\"U+...\"</code> means that it is <code>utf16</code> symbol. I guess it crashes on SMS with emoji, because emojis are <code>utf16</code> symbols. Try to save SMS with emoji to check this guess. </p>\n\n<pre><code> xmlSerializer.text(\"\ud83d\udd96\ud83d\ude0e\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 4078111, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f0d6aa1286fefe3262c4c9a029683e38?s=128&d=identicon&r=PG&f=1", "display_name": "chaviaras michalis", "link": "https://stackoverflow.com/users/4078111/chaviaras-michalis"}, "edited": false, "score": 0, "creation_date": 1593161930, "post_id": 55610033, "comment_id": 110688816, "body": "What sanitize does mean ?"}], "tags": [], "owner": {"reputation": 353, "user_id": 1134429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DrbMS.jpg?s=128&g=1", "display_name": "Willie Nel", "link": "https://stackoverflow.com/users/1134429/willie-nel"}, "is_accepted": true, "score": 2, "last_activity_date": 1554891291, "creation_date": 1554891291, "answer_id": 55610033, "question_id": 55608267, "link": "https://stackoverflow.com/questions/55608267/java-lang-illegalargumentexception-illegal-character-u0-in-writing-xml-file/55610033#55610033", "title": "java.lang.IllegalArgumentException: Illegal character (U+0) in writing xml file android", "body": "<p>I suspect that you are receiving a unicode null character and that is the reason why it is breaking.</p>\n\n<blockquote>\n  <p>Illegal character (U+0)</p>\n</blockquote>\n\n<p>More info can be found at: <a href=\"https://www.fileformat.info/info/unicode/char/0000/index.htm\" rel=\"nofollow noreferrer\">https://www.fileformat.info/info/unicode/char/0000/index.htm</a></p>\n\n<p>Log the contents of msg.body to confirm this and if it is the case you need to sanitize it before you attempt to save it.</p>\n\n<p>I was able to recreate the original error message using this snippet</p>\n\n<pre><code>private fun writeMessageBodyTest() {\n\n    val xmlSerializer = Xml.newSerializer()\n\n    val writer = StringWriter()\n\n    try {\n\n        xmlSerializer.setOutput(writer)\n        xmlSerializer.startDocument(\"UTF-8\", true)\n\n        val illegalChar = '\\u0000'\n\n        xmlSerializer.startTag(\"\", \"message\")\n        xmlSerializer.text(\"$illegalChar\")\n        xmlSerializer.endTag(\"\", \"message\")\n\n        xmlSerializer.endDocument()\n        xmlSerializer.flush()\n\n        Log.d(TAG, \"Xml: ${writer.toString()}\")\n\n    } catch (e: Exception) {\n        Log.e(TAG, e.message, e)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 12144, "user_id": 1581185, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/UVLZc.jpg?s=128&g=1", "display_name": "Sagar Maiyad", "link": "https://stackoverflow.com/users/1581185/sagar-maiyad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 55610033, "answer_count": 2, "score": 3, "last_activity_date": 1554891291, "creation_date": 1554885751, "last_edit_date": 1554888373, "question_id": 55608267, "link": "https://stackoverflow.com/questions/55608267/java-lang-illegalargumentexception-illegal-character-u0-in-writing-xml-file", "title": "java.lang.IllegalArgumentException: Illegal character (U+0) in writing xml file android", "body": "<p>I am creating xml file for sms backup. It works fine in most of devices , but  in some devices, it gives error.</p>\n\n<p>Below is the code for writing xml file:</p>\n\n<pre><code>fun writeAllMsgs(msgList: ArrayList&lt;MsgModel&gt;, fileNm: String): Boolean{\n        val xmlSerializer = Xml.newSerializer()\n        val writer = StringWriter()\n        try {\n\n            xmlSerializer.setOutput(writer)\n            xmlSerializer.startDocument(\"UTF-8\", true)\n            xmlSerializer.startTag(\"\", MSG_ALL_SMS)\n\n            for (msg in msgList) {\n                xmlSerializer.startTag(\"\", MSG_SMS)\n\n                xmlSerializer.startTag(\"\", MSG_ADDRESS)\n                xmlSerializer.text(msg.address)\n                xmlSerializer.endTag(\"\", MSG_ADDRESS)\n\n                xmlSerializer.startTag(\"\", MSG_BODY)\n                xmlSerializer.text(msg.body)\n                xmlSerializer.endTag(\"\", MSG_BODY)\n\n\n                xmlSerializer.startTag(\"\", MSG_DATE)\n                xmlSerializer.text(msg.date)\n                xmlSerializer.endTag(\"\", MSG_DATE)\n\n                xmlSerializer.startTag(\"\", MSG_TYPE)\n                xmlSerializer.text(msg.type)\n                xmlSerializer.endTag(\"\", MSG_TYPE)\n\n                xmlSerializer.startTag(\"\", MSG_NAME)\n                xmlSerializer.text(msg.name)\n                xmlSerializer.endTag(\"\", MSG_NAME)\n\n                xmlSerializer.startTag(\"\", MSG_READ)\n                xmlSerializer.text(msg.read)\n                xmlSerializer.endTag(\"\", MSG_READ)\n\n                xmlSerializer.startTag(\"\", MSG_SER_CENTER)\n                xmlSerializer.text(msg.serviceCenter)\n                xmlSerializer.endTag(\"\", MSG_SER_CENTER)\n\n                xmlSerializer.startTag(\"\", MSG_PHOTO_URI)\n                if (msg.photo.isNullOrEmpty())\n                    xmlSerializer.text(\"\")\n                else\n                    xmlSerializer.text(msg.photo)\n                xmlSerializer.endTag(\"\", MSG_PHOTO_URI)\n                xmlSerializer.endTag(\"\", MSG_SMS)\n\n            }\n\n            xmlSerializer.endTag(\"\", MSG_ALL_SMS)\n            xmlSerializer.endDocument()\n            xmlSerializer.flush()\n\n            val createdFile = CreateSMSFile(fileNm)\n            val out = mContext.contentResolver.openOutputStream(createdFile)\n            val strData = writer.toString()\n            out!!.write(strData.toByteArray())\n            out.close()\n            return true\n\n        } catch (e: Exception) {\n            Applog.e(TAG, e)\n            return false\n        }\n    }\n</code></pre>\n\n<p>I am getting following crash log:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Illegal character (U+0)\n       at org.kxml2.io.KXmlSerializer.reportInvalidCharacter(KXmlSerializer.java:148)\n       at org.kxml2.io.KXmlSerializer.writeEscaped(KXmlSerializer.java:139)\n       at org.kxml2.io.KXmlSerializer.text(KXmlSerializer.java:540)\n       at com.allbackup.helpers.MsgHelper.writeAllMsgs(MsgHelper.java:156)\n       at com.allbackup.ui.activity.InnerHomeActivity$backupData.doInBackground(InnerHomeActivity.java:553)\n       at com.allbackup.ui.activity.InnerHomeActivity$backupData.doInBackground(InnerHomeActivity.java:523)\n       at android.os.AsyncTask$2.call(AsyncTask.java:295)\n       at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n       at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234)\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n       at java.lang.Thread.run(Thread.java:818)\n</code></pre>\n\n<p>As per above error, it shows error on this line:</p>\n\n<pre><code>xmlSerializer.text(msg.body)\n</code></pre>\n\n<p>As my understanding, it happens due to latin character or special character and for that handling I already implemented \"UTF-8\" as you can see in writing xml file but still facing this error.</p>\n\n<p>Kindly help me with this issue to resolve</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 2675353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BGJEH.jpg?s=128&g=1", "display_name": "Godz", "link": "https://stackoverflow.com/users/2675353/godz"}, "is_accepted": false, "score": 0, "last_activity_date": 1554887232, "creation_date": 1554887232, "answer_id": 55608725, "question_id": 55608138, "link": "https://stackoverflow.com/questions/55608138/how-could-i-know-what-the-number-of-threads-is-used-by-specific-coroutines-dispa/55608725#55608725", "title": "How could I know what the number of threads is used by specific coroutines dispatcher?", "body": "<p>You can use the Android profiler to monitor threads.</p>\n\n<p><a href=\"https://developer.android.com/studio/profile/am-basics\" rel=\"nofollow noreferrer\">Android Monitor tools</a> were replaced with <a href=\"https://developer.android.com/studio/profile/\" rel=\"nofollow noreferrer\"><strong>Android Profiler</strong></a>, in <a href=\"https://android-developers.googleblog.com/2017/10/android-studio-30.html\" rel=\"nofollow noreferrer\">Android Studio 3.0</a>:</p>\n\n<blockquote>\n  <p><strong>Android Profiler</strong> - Android Studio 3.0 includes a brand new suite of tools to help debug performance problems in your app. We completely rewrote the previous set of Android Monitor tools, and replaced them with the Android Profiler. Once you deploy your app to a running device or emulator, click on the Android Profiler tab and you will now have access to a real-time &amp; unified view of the CPU, Memory, &amp; Network activity for your app. ...</p>\n</blockquote>\n\n<p>To monitor threads, use <a href=\"https://developer.android.com/studio/profile/cpu-profiler\" rel=\"nofollow noreferrer\"><strong>CPU Profiler</strong></a> in Android Profiler.</p>\n\n<blockquote>\n  <ol>\n  <li>Click <strong>View > Tool Windows > Android Profiler</strong> (you can also click <strong>Android Profiler</strong> in the toolbar).</li>\n  <li>Select the device and app process you want to profile from the Android Profiler toolbar. If you've connected a device over USB but don't see it listed, ensure that you have enabled USB debugging.</li>\n  <li>Click anywhere in the <strong>CPU</strong> timeline to open the CPU Profiler.</li>\n  </ol>\n</blockquote>\n\n<p>From: <a href=\"https://stackoverflow.com/a/50691178/2675353\">https://stackoverflow.com/a/50691178/2675353</a></p>\n"}, {"tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1554888774, "creation_date": 1554888774, "answer_id": 55609263, "question_id": 55608138, "link": "https://stackoverflow.com/questions/55608138/how-could-i-know-what-the-number-of-threads-is-used-by-specific-coroutines-dispa/55609263#55609263", "title": "How could I know what the number of threads is used by specific coroutines dispatcher?", "body": "<p>As you can read <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-i-o.html\" rel=\"nofollow noreferrer\">here</a> <code>Dispatchers.IO</code> doesn't have own pool of threads, it uses a shared pool. <code>Dispatchers.Default</code> uses the same pool of threads. There no simple way to get active threads currently used by <code>Dispatchers.IO</code>. But you can try get thread count inside shared pool of threads.\nThe common pool of threads is creating inside <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/e06b6caac44b87d698ab54049ae6f6ecfa382de6/core/kotlinx-coroutines-core/src/main/kotlin/kotlinx/coroutines/experimental/CommonPool.kt\" rel=\"nofollow noreferrer\"><code>CommonPool.kt</code></a>. It can create own pool or use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">ForkJoinPool</a>. All threads created in pool have a specific name. So you can find all active thread of shared pool by name.</p>\n\n<pre><code>val threads = Thread.getAllStackTraces().keys.filter {\n    it.name.startsWith(\"CommonPool\") || it.name.startsWith(\"ForkJoinPool\")\n}\nthreads.size\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 1063214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa83c24be907d9915e9ab54bf8197927?s=128&d=identicon&r=PG&f=1", "display_name": "dkzm", "link": "https://stackoverflow.com/users/1063214/dkzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 55609263, "answer_count": 2, "score": 4, "last_activity_date": 1554889012, "creation_date": 1554885287, "last_edit_date": 1554889012, "question_id": 55608138, "link": "https://stackoverflow.com/questions/55608138/how-could-i-know-what-the-number-of-threads-is-used-by-specific-coroutines-dispa", "title": "How could I know what the number of threads is used by specific coroutines dispatcher?", "body": "<p>How could I know what the number of threads Dispatchers.IO is currently using ?</p>\n"}, {"tags": ["android", "date", "kotlin", "gmt", "localdate"], "comments": [{"owner": {"reputation": 1987, "user_id": 7540393, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yVoRD.jpg?s=128&g=1", "display_name": "Arthur Attout", "link": "https://stackoverflow.com/users/7540393/arthur-attout"}, "edited": false, "score": 0, "creation_date": 1554884026, "post_id": 55607706, "comment_id": 97910150, "body": "What is the type of <code>pickup</code> ?"}, {"owner": {"reputation": 1987, "user_id": 7540393, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yVoRD.jpg?s=128&g=1", "display_name": "Arthur Attout", "link": "https://stackoverflow.com/users/7540393/arthur-attout"}, "edited": false, "score": 0, "creation_date": 1554884428, "post_id": 55607706, "comment_id": 97910361, "body": "Sorry, what is the type returned by <code>pickup.begin()</code> * ?"}, {"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "reply_to_user": {"reputation": 1987, "user_id": 7540393, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yVoRD.jpg?s=128&g=1", "display_name": "Arthur Attout", "link": "https://stackoverflow.com/users/7540393/arthur-attout"}, "edited": false, "score": 0, "creation_date": 1554885013, "post_id": 55607706, "comment_id": 97910653, "body": "<code>final @Nullable Object begin;  &#47;**      * The datetime the range begins.      *&#47;     public @Nullable Object begin() {       return this.begin;     }</code>  . it is from a generated class"}, {"owner": {"reputation": 977, "user_id": 8101634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2071bbc2522f51e59d4a184bedea0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "primo", "link": "https://stackoverflow.com/users/8101634/primo"}, "edited": false, "score": 0, "creation_date": 1554885052, "post_id": 55607706, "comment_id": 97910681, "body": "you need to convert it to your local time"}, {"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "edited": false, "score": 0, "creation_date": 1554885161, "post_id": 55607706, "comment_id": 97910732, "body": "I need to show the hour from server + GMT  from the response (in that case +3,but it may vary)"}, {"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "reply_to_user": {"reputation": 1987, "user_id": 7540393, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yVoRD.jpg?s=128&g=1", "display_name": "Arthur Attout", "link": "https://stackoverflow.com/users/7540393/arthur-attout"}, "edited": false, "score": 0, "creation_date": 1554887299, "post_id": 55607706, "comment_id": 97912007, "body": "@ArthurAttout I&#39;ve looked now in debug, the <code>pickup.begin()</code> returns a <code>Date</code> object"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 2, "creation_date": 1554894246, "post_id": 55607706, "comment_id": 97916190, "body": "As an aside consider throwing away the long outmoded and notoriously troublesome <code>SimpleDateFormat</code> and friends, and adding <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project in order to use <code>java.time</code>, the modern Java date and time API. It is so much nicer to work with."}], "answers": [{"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1554894820, "post_id": 55607911, "comment_id": 97916497, "body": "It will not make any difference. Locale and time zone are independent concepts."}], "tags": [], "owner": {"reputation": 717, "user_id": 4188684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb97b9c7751295149f50cd1cb422a25c?s=128&d=identicon&r=PG&f=1", "display_name": "Joachim Haglund", "link": "https://stackoverflow.com/users/4188684/joachim-haglund"}, "is_accepted": false, "score": 0, "last_activity_date": 1554884515, "creation_date": 1554884515, "answer_id": 55607911, "question_id": 55607706, "link": "https://stackoverflow.com/questions/55607706/date-add-gmt-to-hour/55607911#55607911", "title": "Date add GMT to hour", "body": "<p>Try adding a Locale to your simpledateformat, matching the +3 timezone.</p>\n\n<pre><code>val startHour = SimpleDateFormat(\"HH:mm\", Locale.Germany).format(pickup.begin())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "edited": false, "score": 0, "creation_date": 1554887237, "post_id": 55608120, "comment_id": 97911968, "body": "well, this adds my GMT which is +2 and not the GMT response from server which is +3"}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 0, "creation_date": 1554917734, "post_id": 55608120, "comment_id": 97929914, "body": "These terrible date-time classes were supplanted years ago by the modern <i>java.time</i> classes with the adoption of JSR 310."}], "tags": [], "owner": {"reputation": 977, "user_id": 8101634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2071bbc2522f51e59d4a184bedea0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "primo", "link": "https://stackoverflow.com/users/8101634/primo"}, "is_accepted": false, "score": 0, "last_activity_date": 1554885201, "creation_date": 1554885201, "answer_id": 55608120, "question_id": 55607706, "link": "https://stackoverflow.com/questions/55607706/date-add-gmt-to-hour/55608120#55608120", "title": "Date add GMT to hour", "body": "<p>You can try something like this</p>\n\n<p>I take 'date' as string here</p>\n\n<pre><code>  String date=\"something\" \n val sdf = SimpleDateFormat(\"HH:mm\")\n sdf.timeZone = TimeZone.getTimeZone(\"UTC\")\n val gmt = sdf.parse(date)\n</code></pre>\n\n<p>If this is your case </p>\n\n<pre><code>Date date=\"somevalue\"\n</code></pre>\n\n<p>then</p>\n\n<p>val gmt = sdf.format(date)</p>\n\n<p>gmt will return you your local time</p>\n"}, {"tags": [], "owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "is_accepted": true, "score": 3, "last_activity_date": 1554918239, "last_edit_date": 1554918239, "creation_date": 1554894950, "answer_id": 55611210, "question_id": 55607706, "link": "https://stackoverflow.com/questions/55607706/date-add-gmt-to-hour/55611210#55611210", "title": "Date add GMT to hour", "body": "<p>No, you\u2019ve misunderstood. <code>Wed Apr 10 10:00:00 GMT+03:00 2019</code> is (the textual representation of) a <code>java.util.Date</code> the value of which equals 2019-04-10T07:00 UTC. It seems your default time zone is GMT+03:00, and <code>Date</code> is trying to be friendly to you and print the time in this time zone, which is why it prints 10:00:00. 13:00 would certainly be incorrect no matter if you wanted the time in UTC or in your own default time zone.</p>\n\n<p>The <code>Date</code> class returned from <code>pickup.begin()</code> is poorly designed and long outdated, so you may want to consider if a type from java.time, the modern Java date and time API, could be returned instead. It may also make the matter clearer. </p>\n\n<p>Alternatively, convert that <code>java.util.Date</code> object to its modern counterpart, a <code>java.time.Instant</code>. Look for new conversion methods added to the old classes. </p>\n\n<pre><code>Instant instant = pickup.begin().toInstant() ;  // Converting legacy `Date` object to modern `Instant` object. \n</code></pre>\n\n<p>Search Stack Overflow and read the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\">Oracle Tutorial</a> to learn more about <code>Instant</code>, <code>OffsetDateTime</code>, and <code>ZonedDateTime</code> classes. </p>\n\n<p>You can use java.time on older Android versions if you add ThreeTenABP to your Android project. It\u2019s the Android adaptation of the backport of java.time.</p>\n\n<p><strong>Links</strong></p>\n\n<ul>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"}], "owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55611210, "answer_count": 3, "score": 0, "last_activity_date": 1554918239, "creation_date": 1554883797, "question_id": 55607706, "link": "https://stackoverflow.com/questions/55607706/date-add-gmt-to-hour", "title": "Date add GMT to hour", "body": "<pre><code>val startHour = SimpleDateFormat(\"HH:mm\").format(pickup.begin())\n</code></pre>\n\n<p>The pickup.begin value is \"<em>Wed Apr 10 10:00:00 GMT+03:00 2019</em>\", so I need the start hour to be 10:00 +3h -> 13:00, but I get startHour value of 10:00.</p>\n\n<p>I don't know how to add the GMT value to hour.</p>\n"}, {"tags": ["android-intent", "kotlin"], "comments": [{"owner": {"reputation": 911, "user_id": 2924690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f367b16c683405ffd42c9449fcfd1be9?s=128&d=identicon&r=PG", "display_name": "csabapap", "link": "https://stackoverflow.com/users/2924690/csabapap"}, "edited": false, "score": 2, "creation_date": 1554882853, "post_id": 55607203, "comment_id": 97909507, "body": "You should delete the updateUI() method call from the onStart() method if you want to call that method only on a button click."}], "owner": {"reputation": 95, "user_id": 8366902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c086446b67fc28f684f0a555850e79a0?s=128&d=identicon&r=PG&f=1", "display_name": "Xelonovia", "link": "https://stackoverflow.com/users/8366902/xelonovia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554881980, "creation_date": 1554881980, "question_id": 55607203, "link": "https://stackoverflow.com/questions/55607203/how-to-prevent-the-execution-of-a-method-in-the-new-activity-during-intent-in-ko", "title": "How to prevent the execution of a method in the new activity during Intent in Kotlin Android", "body": "<p>I have SignUpActivity.kt, LoginActivity.kt and ProfileActivity.kt. In SignUpActivity.kt I use Intent to start LoginActivity.kt and in LoginActivity.kt I use Intent to start ProfileActivity.kt.</p>\n\n<p>SignUpActivity.kt</p>\n\n<pre><code>...\nsetContentView(R.layout.activity_sign_up)\n...\n\nalready_have_account_text_view.setOnClickListener {\nstartActivity(Intent(this, LoginActivity::class.java))\nfinish()\n}\n</code></pre>\n\n<p>LoginActivity.kt</p>\n\n<p>'''   </p>\n\n<pre><code>...\nsetContentView(R.layout.activity_login)\n...\n\nlogin_button_login.setOnClickListener {\nperformLogin()\n}\n\nauth.signInWithEmailAndPassword(email, password)\n    .addOnCompleteListener(this) { task -&gt;\n        if (task.isSuccessful) {\n            val user = auth.currentUser\n            updateUI(user)\n        } else {                    \n            updateUI(null)\n        }                \n    }\n\npublic override fun onStart() {\n    super.onStart()        \n val currentUser = auth.currentUser\n updateUI(currentUser)\n}\n\nprivate fun updateUI(currentUser: FirebaseUser?) {\n    if(currentUser != null) {\n        startActivity(Intent(this, ProfileActivity::class.java))\n    }else {\n        Toast.makeText(baseContext, \"Login failed\", \n        Toast.LENGTH_SHORT).show()\n    }\n}\n</code></pre>\n\n<p>'''</p>\n\n<p>The program is running properly but the message of toast \"Login failed\" is showed up during the Intent. Which is should not be like that. The updateUI function must be only execute when login button is clicked. </p>\n\n<p>Another problem if I let it like that, when the user register in the SingUpActivity, the user will be directed to ProfileActivity. Which should be like that. I want the user to Login after sign up.</p>\n\n<p>How can I make the execution of updateUI function not during the Intent but only when user click the login button?</p>\n"}, {"tags": ["android", "kotlin", "service", "notifications"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554881921, "post_id": 55606985, "comment_id": 97908993, "body": "&quot;How can I do?&quot; \u2013 You just post a regular <code>Notification</code>. You don&#39;t necessarily even need a <code>Service</code> for that. You could do it from a <code>BroadcastReceiver</code>."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882051, "post_id": 55606985, "comment_id": 97909068, "body": "I want to post <code>Notification</code> at <code>service</code>, not app. So I need <code>service</code>."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882085, "post_id": 55606985, "comment_id": 97909085, "body": "If i use <code>BroadcastReceiver</code>, maybe I should launch app."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882105, "post_id": 55606985, "comment_id": 97909103, "body": "Why? What else is the <code>Service</code> doing? You don&#39;t need to launch an <code>Activity</code> to use a <code>BroadcastReceiver</code> as an alarm target, if that&#39;s what you&#39;re thinking."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882371, "post_id": 55606985, "comment_id": 97909243, "body": "Always service will be running, and check for blog - was posted."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882385, "post_id": 55606985, "comment_id": 97909255, "body": "So service should post noti."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882639, "post_id": 55606985, "comment_id": 97909382, "body": "Then, can I post nofication through <code>BroadcastReceiver</code>? <code>Service</code> or <code>Activity</code> weren&#39;t needed?"}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882640, "post_id": 55606985, "comment_id": 97909383, "body": "Well, aside from how battery-unfriendly that probably is, you&#39;ll need to <a href=\"https://stackoverflow.com/posts/55606985/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue you&#39;re having on Pie. Real quick, though, are you creating and using a <code>NotificationChannel</code> on versions Oreo and up? If not, that&#39;s likely your problem: <a href=\"https://stackoverflow.com/q/43093260\">Notification not showing in Android 8 Oreo</a>."}, {"owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882815, "post_id": 55606985, "comment_id": 97909480, "body": "Nono, ongoing notification was perfectly posted, and I set <code>NotificationChannel</code> too."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1554882920, "post_id": 55606985, "comment_id": 97909550, "body": "Then you&#39;ll need to provide us with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue."}], "owner": {"reputation": 9, "user_id": 8436657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5mYXfX_IgU/AAAAAAAAAAI/AAAAAAAApj8/U9xq3KLBb4k/photo.jpg?sz=128", "display_name": "Ericano Rhee", "link": "https://stackoverflow.com/users/8436657/ericano-rhee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554985568, "creation_date": 1554881262, "last_edit_date": 1554985568, "question_id": 55606985, "link": "https://stackoverflow.com/questions/55606985/not-getting-notification-using-alarmmanager", "title": "Not getting Notification using AlarmManager", "body": "<p>I'm working with Android API 28.\nThrough <code>AlarmManager</code>, I wanted to send push Notification at certain time in <code>Service</code>. So in the service, <code>alarmManager</code> sets specific duration for sending push notification.</p>\n\n<p>I was trying to make it, so searched for some example. It worked at 'Marshmallow 6.0, and Nougat 7.0'. \nBut not working at my Phone (Android Pie 9.0).</p>\n\n<p>Only I found that working is 'onGoing' Notification, but I need removable notification from service.</p>\n\n<p>How can I do? I need your help. Thank you for reading my question.</p>\n\n<p><strong>ADDED CODE</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n     tabletnoti_channel = new NotificationChannel(TABLETNOTI_ID, getString(R.string.noti), NotificationManager.IMPORTANCE_DEFAULT);\n     tabletnoti_channel.setDescription(getString(R.string.app_name));\n     tabletnoti_channel.enableLights(true);\n     tabletnoti_channel.setLightColor(ContextCompat.getColor(getApplicationContext(), R.color.colorPrimary));\n     tabletnoti_channel.enableVibration(true);\n     tabletnoti_channel.setVibrationPattern(new long[]{100, 200, 100, 200});\n     tabletnoti_channel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\n\n     nm.createNotificationChannel(tabletnoti_channel);\n }\n\n if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n     Statebuilder = new Notification.Builder(getApplicationContext(), TABLETNOTI_ID);\n } else {\n     Statebuilder = new Notification.Builder(getApplicationContext());\n }\n\n StateBuilder.setContentTitle(sharedPreferences.getString(\"connectDevice\", \"sample\") + \" \" + getString(R.string.device_bat))\n     .setContentText(getString(R.string.not_connected))\n     .setOngoing(true)\n     .setShowWhen(false)\n     .setColor(ContextCompat.getColor(getApplicationContext(), R.color.colorPrimary))\n     .setSmallIcon(R.drawable.ic_cloud_off)\n     .setOnlyAlertOnce(true);\n\n if (sharedPreferences.getBoolean(\"show_noti\", true)) nm.notify(STATE_NOTI_ID, StateBuilder.build());\n else nm.cancel(STATE_NOTI_ID);\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5594482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207466961011731/picture?type=large", "display_name": "Hayton Leung", "link": "https://stackoverflow.com/users/5594482/hayton-leung"}, "edited": false, "score": 0, "creation_date": 1554885205, "post_id": 55607397, "comment_id": 97910759, "body": "For some other requirements I will have to stick with coroutines, but thanks for your suggestion."}], "tags": [], "owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "is_accepted": false, "score": 1, "last_activity_date": 1554883434, "last_edit_date": 1554883434, "creation_date": 1554882682, "answer_id": 55607397, "question_id": 55606533, "link": "https://stackoverflow.com/questions/55606533/repeat-a-task-within-a-duration-with-delay/55607397#55607397", "title": "Repeat a task within a duration with delay", "body": "<p>Coroutine does not provide precise timing. If the processor is busy running other stuff at the same time, coroutines can be easily delayed. Use the <a href=\"https://developer.android.com/reference/java/util/Timer\" rel=\"nofollow noreferrer\">Timer Class</a> for precise timing. Here is an example. I log the time every seconds and cancel the timer after 6 seconds. The results are only off by a few milliseconds.</p>\n\n<pre><code>    var startTime = 0L\n    val timer : Timer = Timer()\n    val task = object : TimerTask()\n    {\n        var lastTime = 0L\n        override fun run() {\n            val now = System.currentTimeMillis()\n            if(now/1000 &gt; lastTime/1000 )\n            {\n                Log.d(\"timer\",\"total time= ${now - startTime}\")\n                lastTime = now\n            }\n            if(now - startTime &gt;= 6000)\n            {\n                timer.cancel()\n            }\n    }\n    startTime = System.currentTimeMillis()\n    timer.scheduleAtFixedRate(task,0,6)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 5594482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207466961011731/picture?type=large", "display_name": "Hayton Leung", "link": "https://stackoverflow.com/users/5594482/hayton-leung"}, "edited": false, "score": 0, "creation_date": 1554885371, "post_id": 55607504, "comment_id": 97910865, "body": "Dropping the <code>repeat</code> and replace with <code>while</code> is the key. On average the total time is <code>601X</code>, which is close enough for my use case. Thanks a lot."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "reply_to_user": {"reputation": 65, "user_id": 5594482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207466961011731/picture?type=large", "display_name": "Hayton Leung", "link": "https://stackoverflow.com/users/5594482/hayton-leung"}, "edited": false, "score": 0, "creation_date": 1554886443, "post_id": 55607504, "comment_id": 97911475, "body": "@HaytonLeung - no problem."}], "tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": true, "score": 2, "last_activity_date": 1554883084, "creation_date": 1554883084, "answer_id": 55607504, "question_id": 55606533, "link": "https://stackoverflow.com/questions/55606533/repeat-a-task-within-a-duration-with-delay/55607504#55607504", "title": "Repeat a task within a duration with delay", "body": "<p>so what you are doing here is simulating progress. Ideally, there would be some way of checking the actual progress of your bar, and updating it, and when it is done, ending. But, if this is not possible, then ya, simulation is your choice.</p>\n\n<p>So, with coroutines we are dealing with a threaded environment, and within that, we have our coroutines which need to be continued when the hand over control of execution. In your implementation, this happens at the <code>delay</code> call. For this reason, it is very difficult to guarantee that your coroutine will complete in your desired time. All delay can do is say that it will not resume before \"at least\" the specified time has elapsed, and probably quite often, more time would have elapsed, not the exact time.</p>\n\n<p>So, how do we get this to execute in as close to your desired time frame as possible? What we need to do is drop the <code>repeat</code>, and rather check on the elapsed time to decide if we finish. Here is a rough implementation that will hopefully help.</p>\n\n<pre><code>class Bar(val barLength: Int = 1000) {\n    var progress = 0\n}\n\nsuspend fun simulateProgress(bar: Bar, job: Job, totalDurationMillis: Long, incrementsMills: Long): Job {\n    var startTime = System.currentTimeMillis()\n    return CoroutineScope(Dispatchers.Default + job).launch {\n        var totalElapsed = 0L\n        while (totalElapsed &lt; totalDurationMillis) {\n            totalElapsed = System.currentTimeMillis() - startTime\n            val progressRatio = totalElapsed.toDouble()/totalDurationMillis.toDouble()\n            bar.progress = (progressRatio * bar.barLength.toDouble()).toInt()\n            delay(incrementsMills)\n        }\n        println(\"Elapsed: $totalElapsed, Progress: ${bar.progress}\")\n    }\n}\n\nfun main() = runBlocking {\n    val job = Job()\n    val bar = Bar()\n    val progressJob = simulateProgress(bar, job, 6000, 10)\n    progressJob.join()\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 5594482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207466961011731/picture?type=large", "display_name": "Hayton Leung", "link": "https://stackoverflow.com/users/5594482/hayton-leung"}, "edited": false, "score": 0, "creation_date": 1554884200, "post_id": 55607643, "comment_id": 97910253, "body": "Thank you for your explanation. I didn&#39;t notice the for loop inside <code>delay</code> until you point it out. I guess this is where the extra time comes from"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1554886261, "post_id": 55607643, "comment_id": 97911365, "body": "Just for info - you should not use Thread tools when you are achieving concurrency with coroutines. It sort of defeats the whole point."}], "tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": false, "score": 0, "last_activity_date": 1554883549, "creation_date": 1554883549, "answer_id": 55607643, "question_id": 55606533, "link": "https://stackoverflow.com/questions/55606533/repeat-a-task-within-a-duration-with-delay/55607643#55607643", "title": "Repeat a task within a duration with delay", "body": "<p>Your are not only measuring the delay of 6 milli seconds but also the time needed to execute the <code>for</code> loop (hidden in <code>repeat</code>), plus the time of <code>progressBar.progress += 1</code> and the cost of <code>delay</code> itself.</p>\n\n<p>For example:</p>\n\n<pre><code>CoroutineScope(Dispatchers.Default + progressJob).launch {\n    startTime = System.currentTimeMillis()\n    repeat(1000){\n        delay(6)\n    }\n    val endTime = System.currentTimeMillis() - startTime\n    println(\"total time= $endTime\")\n}\n</code></pre>\n\n<p>needs 6751ms (avg. of 100 runs) on my machine. </p>\n\n<p>If I use <code>Thread.sleep</code> instead of delay:</p>\n\n<pre><code>CoroutineScope(Dispatchers.Default + progressJob).launch {\n    startTime = System.currentTimeMillis()\n    repeat(1){\n        delay(6)\n    }\n    val endTime = System.currentTimeMillis() - startTime\n    println(\"total time= $endTime\")\n}\n</code></pre>\n\n<p>it takes 6701ms.</p>\n\n<p>If I execute repeat only once:</p>\n\n<pre><code>CoroutineScope(Dispatchers.Default + progressJob).launch {\n    startTime = System.currentTimeMillis()\n    repeat(1){\n        Thread.sleep(6)\n    }\n    val endTime = System.currentTimeMillis() - startTime\n    println(\"total time= $endTime\")\n}\n</code></pre>\n\n<p>8ms</p>\n\n<p>If I remove repeat:</p>\n\n<pre><code>CoroutineScope(Dispatchers.Default + progressJob).launch {\n    startTime = System.currentTimeMillis()         \n    Thread.sleep(6)\n    val endTime = System.currentTimeMillis() - startTime\n    println(\"total time= $endTime\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1873, "user_id": 2033223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XjnI4.png?s=128&g=1", "display_name": "Javatar", "link": "https://stackoverflow.com/users/2033223/javatar"}, "is_accepted": false, "score": 2, "last_activity_date": 1579688836, "creation_date": 1579688836, "answer_id": 59857577, "question_id": 55606533, "link": "https://stackoverflow.com/questions/55606533/repeat-a-task-within-a-duration-with-delay/59857577#59857577", "title": "Repeat a task within a duration with delay", "body": "<p>I would do it with something like this:</p>\n\n<pre><code>withTimeout(1300L) {\n    repeat(1000) { i -&gt;\n        println(\"Blip Blop $i ...\")\n        delay(500L)\n    }\n}\n</code></pre>\n\n<p>For more examples see official doc:\n<a href=\"https://kotlinlang.org/docs/reference/coroutines/cancellation-and-timeouts.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/cancellation-and-timeouts.html</a></p>\n"}], "owner": {"reputation": 65, "user_id": 5594482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207466961011731/picture?type=large", "display_name": "Hayton Leung", "link": "https://stackoverflow.com/users/5594482/hayton-leung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6188, "favorite_count": 0, "accepted_answer_id": 55607504, "answer_count": 4, "score": 4, "last_activity_date": 1579688836, "creation_date": 1554879632, "question_id": 55606533, "link": "https://stackoverflow.com/questions/55606533/repeat-a-task-within-a-duration-with-delay", "title": "Repeat a task within a duration with delay", "body": "<p>I have to move a progress bar within a time frame, for example within 6s. I am using coroutines and the \"repeat\" function. The code executes except that the total execution time is not as specified. Below is my code.</p>\n\n<pre><code>val progressJob = Job()\nvar startTime = 0L\nCoroutineScope(Dispatchers.Default + progressJob).launch {\n    startTime = System.currentTimeMillis()\n    repeat(1000) {\n        progressBar.progress += 1\n        delay(6)\n    }\n    Log.d(TAG, \"total time= ${System.currentTimeMillis() - startTime}\")\n}\n</code></pre>\n\n<p>I am expecting \"total time\" would be 6000, but I am getting values greater than 6000 by at least 500. </p>\n\n<p>Basically I just want to repeatedly increment the progress bar within a time frame, and I am not using animation because of performance issue.</p>\n\n<p>Is there anything I am missing?</p>\n"}, {"tags": ["android", "kotlin", "gson", "retrofit2"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 1, "creation_date": 1554879716, "post_id": 55606386, "comment_id": 97907776, "body": "<code>response.body()</code> will return <code>LoginDataModel</code> directly ."}], "answers": [{"tags": [], "owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "is_accepted": true, "score": 4, "last_activity_date": 1554880290, "creation_date": 1554880290, "answer_id": 55606716, "question_id": 55606386, "link": "https://stackoverflow.com/questions/55606386/how-to-parse-retrofit-json-body-using-gson-in-kotlin/55606716#55606716", "title": "How to parse retrofit json body using gson in kotlin", "body": "<p>Just add the <code>.addConverterFactory(GsonConverterFactory.create())</code>\n in your retrofit Builder . I believe you will need <a href=\"https://github.com/square/retrofit/tree/master/retrofit-converters/gson\" rel=\"nofollow noreferrer\">this</a>\nin case you miss the <code>GsonCOnverterFactory.create()</code></p>\n\n<p>and no need there for long parsing. </p>\n\n<p>Example : </p>\n\n<pre><code>Retrofit retrofit = new Retrofit.Builder()\n.baseUrl(\"https://api.github.com\")\n.addConverterFactory(GsonConverterFactory.create())\n.build();\n</code></pre>\n\n<p><strong>EDIT</strong> : \nYou will also need to annotate your model class with the @  <code>@SerializedName(\"jsonKey\")</code> above your variables</p>\n"}], "owner": {"reputation": 2501, "user_id": 2991069, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/984f6f40dfce0d50c00724b64e74da63?s=128&d=identicon&r=PG&f=1", "display_name": "skyshine", "link": "https://stackoverflow.com/users/2991069/skyshine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 55606716, "answer_count": 1, "score": 1, "last_activity_date": 1554880831, "creation_date": 1554879077, "last_edit_date": 1554880831, "question_id": 55606386, "link": "https://stackoverflow.com/questions/55606386/how-to-parse-retrofit-json-body-using-gson-in-kotlin", "title": "How to parse retrofit json body using gson in kotlin", "body": "<p>I am working on android app writing in kotlin. I have a issue with json parsing actually i am hitting webservice using retrofit library for pojo i have taken kotlin data class. I am getting success response after that i am trying to parse json response with gson library here i am getting error.</p>\n\n<p>code:</p>\n\n<pre><code>override fun onResponse(call: Call&lt;LoginDataModel&gt;, response: Response&lt;LoginDataModel&gt;) {\n    if(response.isSuccessful){\n        var loginDataModel = response.body()\n\n        print(loginDataModel)\n    }else{}\n}\n</code></pre>\n\n<p>model:</p>\n\n<pre><code>data class LoginDataModel(var userId: Int, var id: Int, var title: String, var body: String) {}\n</code></pre>\n\n<p>error:\n    \u00a0\u00a0</p>\n\n<pre><code>fun &lt;T : Any!&gt; fromJson(json: JsonElement!, classOfT: Class&lt;T!&gt;!): T! defined in com.google.gson.Gson\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "casting", "factory"], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": true, "score": 3, "last_activity_date": 1554880060, "creation_date": 1554880060, "answer_id": 55606645, "question_id": 55606111, "link": "https://stackoverflow.com/questions/55606111/kotlin-generic-factory-dynamic-cast/55606645#55606645", "title": "Kotlin generic factory dynamic cast", "body": "<p>You just need to do some unchecked casting I am afraid.</p>\n\n<pre><code>interface Foo&lt;T&gt; {\n    fun buzz(param: T)\n}\n\nclass FooImpl1 : Foo&lt;String&gt; {\n    override fun buzz(param: String) {\n        println(param)\n    }\n}\n\nclass FooImpl2 : Foo&lt;Int&gt; {\n    override fun buzz(param: Int) {\n        println(param)\n    }\n}\n\nval implementationMap = mapOf&lt;String, Foo&lt;*&gt;&gt;(\n        Pair(\"firstKey\", FooImpl1()),\n        Pair(\"secKey\", FooImpl2())\n)\n\nval paramMap = mapOf&lt;String, Any&gt;(\n        Pair(\"firstKey\", \"String param\"),\n        Pair(\"secKey\", 12)\n)\n\n\nfun main() {\n    @Suppress(\"UNCHECKED_CAST\")\n    val imp = implementationMap[\"firstKey\"] as Foo&lt;Any?&gt;\n    val param = paramMap[\"firstKey\"]\n    imp.buzz(param)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1554896603, "creation_date": 1554896603, "answer_id": 55611719, "question_id": 55606111, "link": "https://stackoverflow.com/questions/55606111/kotlin-generic-factory-dynamic-cast/55611719#55611719", "title": "Kotlin generic factory dynamic cast", "body": "<p>Well, if you can group them together...</p>\n\n<pre><code>class FooWithParam&lt;T&gt;(foo: Foo&lt;T&gt;, param: T) {\n    fun doBuzz() = foo.buzz(param)\n}\n\nval fooWithParamMap = mapOf&lt;String, FooWithParam&lt;*&gt;&gt;(\n    Pair(firstKey, FooWithParam(FooImpl1(), \"String param\"),\n    Pair(secKey, FooWithParam(FooImpl2(), 12))\n)\n\nimplementationMap[firstKey].doBuzz()\n</code></pre>\n"}], "owner": {"reputation": 1634, "user_id": 3279023, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc45b36cc5dc9cf5da937273adf696b0?s=128&d=identicon&r=PG&f=1", "display_name": "Lau", "link": "https://stackoverflow.com/users/3279023/lau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 55606645, "answer_count": 2, "score": 1, "last_activity_date": 1554896603, "creation_date": 1554878041, "question_id": 55606111, "link": "https://stackoverflow.com/questions/55606111/kotlin-generic-factory-dynamic-cast", "title": "Kotlin generic factory dynamic cast", "body": "<p>I want to create factory of objects with generic parameter:</p>\n\n<pre><code>interface Foo&lt;T&gt; {\n    fun buzz(param: T)\n}\n</code></pre>\n\n<p>I have two implementations for tests:</p>\n\n<pre><code>class FooImpl1 : Foo&lt;String&gt; {\n    override fun buzz(param: String) {\n        // implementation 1\n    }\n}\n\nclass FooImpl2 : Foo&lt;Int&gt; {\n    override fun buzz(param: Int) {\n        // implementation 2\n    }\n}\n</code></pre>\n\n<p>Now I have created map to contain all my implementations </p>\n\n<pre><code>val implementationMap = mapOf&lt;String, Foo&lt;*&gt;&gt;(\n    Pair(firstKey, FooImpl1()),\n    Pair(secKey, FooImpl2())\n)\n</code></pre>\n\n<p>also I have map with params:</p>\n\n<pre><code>val paramMap = mapOf&lt;String, Any&gt;(\n    Pair(firstKey, \"String param\"),\n    Pair(secKey, 12)\n)\n</code></pre>\n\n<p>but now when I fetch first element from my map:</p>\n\n<pre><code>implementationMap.getValue(firstKey).buzz(paramMap.getValue(firstKey))\n</code></pre>\n\n<p>my <code>buzz</code> method rejects any param (wants <code>Nothing</code> as type)</p>\n\n<p>So I have created another map with types</p>\n\n<pre><code>val classMap = mapOf&lt;String, KClass&lt;*&gt;&gt;(\n    Pair(firstKey, FooImpl1::class),\n    Pair(secKey, FooImpl2::class)\n)\n\nval paramClassMap = mapOf&lt;String, KClass&lt;*&gt;&gt;(\n    Pair(firstKey, String::class),\n    Pair(secKey, Int::class)\n)\n</code></pre>\n\n<p>But I cannot cast it like that:</p>\n\n<pre><code>implementationMap.getValue(firstKey)\n    .cast &lt; classMap.getValue(firstKey) &gt; () // not possible\n    .buzz(\n        paramMap.getValue(firstKey)\n        .cast &lt; paramClassMap.getValue(firstKey) &gt; () // not possible\n    )\n</code></pre>\n\n<p>or that</p>\n\n<pre><code>(implementationMap.getValue(firstKey) // FooImpl1\n    /*not possible */ as classMap.getValue(firstKey)) // (FooImpl1::class)\n    .buzz(\n        paramMap.getValue(firstKey) // String\n        /*not possible */ as paramClassMap.getValue(firstKey)) // (String::class)\n</code></pre>\n\n<p>I also tried to use <code>Token</code> type but it does not help eather:</p>\n\n<pre><code>val classMap = mapOf&lt;String, Type&gt;(\n    Pair(firstKey, object: TypeToken&lt;FooImpl1&gt;() {}.type),\n    Pair(secKey, object: TypeToken&lt;FooImpl1&gt;() {}.type)\n)\n</code></pre>\n\n<p>Any ideas how to cast it properly? Or some \"different approach\" ideas?</p>\n"}, {"tags": ["java", "azure", "kotlin", "azure-storage", "azure-storage-blobs"], "comments": [{"owner": {"reputation": 12698, "user_id": 10504999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d210a83ff5a5b5cf4a926f4fb6a07b?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ju", "link": "https://stackoverflow.com/users/10504999/tony-ju"}, "edited": false, "score": 0, "creation_date": 1554954394, "post_id": 55605560, "comment_id": 97941216, "body": "How did you create the pipeline?"}, {"owner": {"reputation": 548, "user_id": 1736615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/583f456a4ae4aab1a5f46634279dc6e8?s=128&d=identicon&r=PG", "display_name": "A Bit of Help", "link": "https://stackoverflow.com/users/1736615/a-bit-of-help"}, "reply_to_user": {"reputation": 12698, "user_id": 10504999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d210a83ff5a5b5cf4a926f4fb6a07b?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ju", "link": "https://stackoverflow.com/users/10504999/tony-ju"}, "edited": false, "score": 0, "creation_date": 1554968833, "post_id": 55605560, "comment_id": 97946285, "body": "Hi Tony,  I&#39;ve added the method that is requesting to download a blob from Azure to my original posting.  I could change it to use a Promise for the download operation, but I am not sure whether this is the best practice when using a Reactive paradigm.  I am somewhat of a newbie in the Rx/FRP world..."}, {"owner": {"reputation": 548, "user_id": 1736615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/583f456a4ae4aab1a5f46634279dc6e8?s=128&d=identicon&r=PG", "display_name": "A Bit of Help", "link": "https://stackoverflow.com/users/1736615/a-bit-of-help"}, "reply_to_user": {"reputation": 12698, "user_id": 10504999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d210a83ff5a5b5cf4a926f4fb6a07b?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Ju", "link": "https://stackoverflow.com/users/10504999/tony-ju"}, "edited": false, "score": 0, "creation_date": 1555041951, "post_id": 55605560, "comment_id": 97978218, "body": "... I&#39;d really appreciate any feedback or suggestions..."}], "owner": {"reputation": 548, "user_id": 1736615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/583f456a4ae4aab1a5f46634279dc6e8?s=128&d=identicon&r=PG", "display_name": "A Bit of Help", "link": "https://stackoverflow.com/users/1736615/a-bit-of-help"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554968906, "creation_date": 1554875571, "last_edit_date": 1554968906, "question_id": 55605560, "link": "https://stackoverflow.com/questions/55605560/azure-blob-storage-java-sdk-why-isnt-asynchronous-working", "title": "Azure Blob Storage Java SDK: Why isn&#39;t asynchronous working?", "body": "<p>I am still spinning up on the Azure Storage Java SDK 10 and its use of reactive programming the paradigm.  I wrote the following method to asynchronously download a blob to a byte stream as fast as possible.  When I use the synchronous version (below), it works properly.  When I comment out the blockingAwait() and uncomment the subscribe, the write and the doOnComplete never are executed...  Basically, the run just falls out of the bottom of the method back to the caller.  I am sure that I have made an asynchronous processing mistake, and hope that someone can steer me in the correct direction.  By the way, I was surprised to find that there are very few samples of downloading to a stream rather than to a file...  Hopefully, this posting will help others.</p>\n\n<h2>Thank you for your time and interest in my problem...</h2>\n\n<pre><code>override fun downloadBlob(url: String, downloadStream: OutputStream) {\n\n    BlockBlobURL(URL(url), pipeline)\n            .download(null, null, false, null)\n            .flatMapCompletable { response -&gt;\n                FlowableUtil.collectBytesInBuffer(response.body(null))\n                        .map {\n                            Channels.newChannel(downloadStream).write(it)\n                        }.toCompletable()\n            }.doOnComplete {\n                println(\"The blob was downloaded...\")\n            }.blockingAwait()\n            //.subscribe()\n}\n</code></pre>\n\n<p>Here is the code that is calling the above method:</p>\n\n<pre><code>fun getAerialImageBlobStream(aerialImageUrl: String): MapOutputStream {\n\n    val aerialImageStream = MapOutputStream()\n    blobStorage.downloadBlob(aerialImageUrl, aerialImageStream)\n    return aerialImageStream\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "lambda", "android-workmanager"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10678150, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_nDC6s6jXYs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gbylPtKCgIrnt47SfeXT7s6At76g/mo/photo.jpg?sz=128", "display_name": "Ulmasbek rakhmatullaev", "link": "https://stackoverflow.com/users/10678150/ulmasbek-rakhmatullaev"}, "edited": false, "score": 0, "creation_date": 1618737734, "post_id": 55620850, "comment_id": 118688087, "body": "What is BlurWorker and _testContext"}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "reply_to_user": {"reputation": 103, "user_id": 10678150, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_nDC6s6jXYs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gbylPtKCgIrnt47SfeXT7s6At76g/mo/photo.jpg?sz=128", "display_name": "Ulmasbek rakhmatullaev", "link": "https://stackoverflow.com/users/10678150/ulmasbek-rakhmatullaev"}, "edited": false, "score": 0, "creation_date": 1618752680, "post_id": 55620850, "comment_id": 118691814, "body": "Sorry, just a copy&amp;paste error. Let me know if this is clearer"}], "tags": [], "owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "is_accepted": true, "score": 1, "last_activity_date": 1618752647, "last_edit_date": 1618752647, "creation_date": 1554928050, "answer_id": 55620850, "question_id": 55605538, "link": "https://stackoverflow.com/questions/55605538/how-can-i-pass-a-lambda-to-the-myworkmanager-class/55620850#55620850", "title": "How can I pass a Lambda to the MyWorkManager class?", "body": "<p>The <a href=\"https://developer.android.com/reference/androidx/work/Data.Builder\" rel=\"nofollow noreferrer\"><code>Data</code></a> class in WorkManager it's only intended for base types and their arrays. You cannot use it to pass a lamba.</p>\n<p>A possible solution is to customize WorkManager's initialization, <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/advanced/custom-configuration.html\" rel=\"nofollow noreferrer\">as explained in the documentation</a>, and use a custom WorkerFactory to add a parameter to the constructor that you can use to retrieve the lambda. Keep in mind that you are configuring WorkManager just once, at initialization time. This means that you can pass directly the lambda as the additional parameter, but it will not be possible to customize it for each WorkRequest.</p>\n<p>Depending on what you want to achieve exactly, something similar can be used as a starting point:</p>\n<pre><code>// provide custom configuration\nval config = Configuration.Builder()\n        .setMinimumLoggingLevel(android.util.Log.INFO)\n        .setWorkerFactory(MyWorkerFactory(lambda))\n        .build()\n\n//initialize WorkManager\nWorkManager.initialize(this, config)\n\nval workManager = WorkManager.getInstance()\n</code></pre>\n<p>And then have your WorkerFactory:</p>\n<pre><code>class MyWorkerFactory(private val lambda: Unit) : WorkerFactory() {\n    override fun createWorker(appContext: Context,\n                          workerClassName: String,\n                          workerParameters: WorkerParameters): MyWorker {\n\n        return MyWorker(appContext, workerParameters, lambda)\n    }\n}\n</code></pre>\n<p>You can then have your worker that use the new constructor:</p>\n<pre><code>class MyWorker(val context: Context, workerParams: WorkerParameters, private val lambda: Unit) : Worker(context, workerParams) {\n    override fun doWork(): Result {\n        //Passed from the WorkManager's configuration\n        lambda()\n\n        return Result.success()\n    }\n}\n</code></pre>\n<p>Remember to disable the default WorkManager initialization adding to the <code>AndroidManifest.xml</code>:</p>\n<pre><code>&lt;provider\n          android:name=&quot;androidx.work.impl.WorkManagerInitializer&quot;\n          android:authorities=&quot;${applicationId}.workmanager-init&quot;\n          tools:node=&quot;remove&quot; /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 513, "user_id": 9842357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2bed5374cbbde59531d2bd8806f2a11?s=128&d=identicon&r=PG&f=1", "display_name": "SumirKodes", "link": "https://stackoverflow.com/users/9842357/sumirkodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1555105542, "creation_date": 1555105542, "answer_id": 55659826, "question_id": 55605538, "link": "https://stackoverflow.com/questions/55605538/how-can-i-pass-a-lambda-to-the-myworkmanager-class/55659826#55659826", "title": "How can I pass a Lambda to the MyWorkManager class?", "body": "<p>I think it's worth revisiting your question to see what you are trying to do and why it's fundamentally flawed.  You are trying to pass a lambda from an Activity to a worker, which is something that runs in the background, even if the Activity is no longer around.  This doesn't make any sense.  Please don't do this - it's only going to result in memory leaks, crashes, and/or strange errors that will be hard for you to track down.  Remember that workers need to be able to be created from scratch when the OS tells your app to run them.</p>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 1261206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z681J.jpg?s=128&g=1", "display_name": "febaisi", "link": "https://stackoverflow.com/users/1261206/febaisi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573106117, "creation_date": 1573106117, "answer_id": 58742742, "question_id": 55605538, "link": "https://stackoverflow.com/questions/55605538/how-can-i-pass-a-lambda-to-the-myworkmanager-class/58742742#58742742", "title": "How can I pass a Lambda to the MyWorkManager class?", "body": "<p>Actually, you <strong>CAN</strong> do it ONLY using what WorkManager provides to us. IMO changing the WorkManager initialization is too complex/risk for a simple thing like this as suggested in the other answer.<br><br>\nWorkRequests accept ByteArray input, which can be any object, right? So, create a serialized object wrapping the lambda function that will be later called<br><br></p>\n\n<p>Define a serializable wrapper class passing the lambda(logRequestTime): LambdaSerializable</p>\n\n<pre><code>package com.febaisi.lambdawithworkers\nimport java.io.Serializable\n\nclass LambdaSerializable(val logRequestTime: () -&gt; (Unit)): Serializable {\n}\n</code></pre>\n\n<p><br>\nConvert it to ByteArray and <em>put</em> it in the input object. </p>\n\n<pre><code>val lambdaObject = LambdaSerializable { //Lambda function\n   Log.e(\"Lambda\", \"Request time was -&gt; $requestTime\") \n}\nval input = Data.Builder()\n.putByteArray(SimpleWorker.LAMBDA_OBJECT, serializeObject((lambdaObject as Object)))\n.build()\n\nval simpleWorker = OneTimeWorkRequest.Builder(SimpleWorker::class.java)\n.setInputData(input)\n.build()\n\nWorkManager.getInstance(applicationContext).enqueueUniqueWork(\"lambda_worker\", ExistingWorkPolicy.KEEP, simpleWorker)\n\n</code></pre>\n\n<p><br>\nCall it from the worker. SimpleWorker</p>\n\n<pre><code>class SimpleWorker(context: Context, workerParams: WorkerParameters) :\n    Worker(context, workerParams) {\n\n    companion object {\n       val LAMBDA_OBJECT = \"LAMBDA_OBJECT\"\n    }\n\n    override fun doWork(): Result {\n        Log.e(\"Lambda\", \"Executing worker - Sleeping for 5 seconds - Compare request vs current time\")\n        val lambdaSerializable = inputData.getByteArray(LAMBDA_OBJECT)?.let{ getByteInput(it) }\n\n        runBlocking {\n            delay(5000)\n            val sdf = SimpleDateFormat(\"yyyyMMdd__HH:mm:ss\", Locale.getDefault())\n            Log.e(\"Lambda\", \"Current time is -&gt; ${sdf.format(Date())}\")\n            (lambdaSerializable as LambdaSerializable).logRequestTime() // High level - Calling Lambda\n        }\n\n        return Result.success()\n    }\n}\n</code></pre>\n\n<p><BR><BR>\n<strong>FULL EXAMPLE HERE:</strong> <a href=\"https://github.com/febaisi/LambdaWithWorkers/\" rel=\"nofollow noreferrer\">https://github.com/febaisi/LambdaWithWorkers/</a> <br>\nCheck logs to see lambda function being called.</p>\n"}], "owner": {"reputation": 57, "user_id": 10770729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uUWSCqya61k/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jxnQXhCuDdWpVwfSKzqEDjEDOPXg/mo/photo.jpg?sz=128", "display_name": "Vishak A Kamath", "link": "https://stackoverflow.com/users/10770729/vishak-a-kamath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 55620850, "answer_count": 3, "score": 0, "last_activity_date": 1618752647, "creation_date": 1554875464, "question_id": 55605538, "link": "https://stackoverflow.com/questions/55605538/how-can-i-pass-a-lambda-to-the-myworkmanager-class", "title": "How can I pass a Lambda to the MyWorkManager class?", "body": "<p>I'm using kotlin for android and I'm trying to create a generic Worker class in which I can pass a lambda which can be called from doWork() method.</p>\n\n<pre><code>class BaseWorker(val context: Context, workerParams: WorkerParameters) : Worker(context, workerParams) {\n    override fun doWork(): Result {\n\n        //Passed from the activity while creating the work request\n        someLambda()\n\n        return Result.success()\n    }\n}\n</code></pre>\n\n<p>The problem is I am not instantiating the <code>BaseWorker</code> class by calling the constructor.\nIs it possible to pass the Lambda using <code>setInputData()</code> of <code>OneTimeWorkRequestBuilder</code> class.</p>\n\n<p>I referred <a href=\"https://stackoverflow.com/questions/53850469/how-to-pass-the-worker-parameters-to-workmanager-class\">How to pass the worker parameters to WorkManager class</a> where the constructor of the class is being called which I think is not the right way.</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "dagger"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1554871772, "post_id": 55604885, "comment_id": 97904950, "body": "No, you can&#39;t simply inject local variable due to it&#39;s scope is limited to method level. You&#39;ll need to declare that variable at Class level <i>(Global level)</i>."}, {"owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "reply_to_user": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1554871835, "post_id": 55604885, "comment_id": 97904961, "body": "any other option to declare like this ? @JeelVankhede"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1554872424, "post_id": 55604885, "comment_id": 97905107, "body": "You can declare it at class level <i>(outside you method)</i> like this :  <code>@JvmField  @Inject  var testClass : TestClass? = null</code>"}], "answers": [{"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1554874254, "creation_date": 1554874254, "answer_id": 55605298, "question_id": 55604885, "link": "https://stackoverflow.com/questions/55604885/android-dagger-injection-inside-the-method/55605298#55605298", "title": "Android - Dagger injection inside the method", "body": "<p>Inject element should be global in the  activity or fragment</p>\n\n<pre><code>@Inject\nlateint var testClass : TestClass  //global declaration\n\n\nfun someMethod(){\ntestClass.dosomething()\n} \n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554874254, "creation_date": 1554871610, "question_id": 55604885, "link": "https://stackoverflow.com/questions/55604885/android-dagger-injection-inside-the-method", "title": "Android - Dagger injection inside the method", "body": "<p>In my application am using dagger, i would like to inject the class inside the method, but it shows compile time error</p>\n\n<pre><code>fun someMethod(){\n  @Inject\n  val testClass : TestClass\n } \n</code></pre>\n\n<p>It shows me error like</p>\n\n<pre><code>This annotation is not applicable to local variable\n</code></pre>\n\n<p>Any help how to handle this ?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 1, "creation_date": 1554871245, "post_id": 55604794, "comment_id": 97904817, "body": "use lateinit keyword while you init bitmap with null"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1554871272, "post_id": 55604794, "comment_id": 97904825, "body": "If you want to create nullable Bitmap then use this syntax : <code>private var bmp : Bitmap? = null </code>"}, {"owner": {"reputation": 1689, "user_id": 6228959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h1dfl.jpg?s=128&g=1", "display_name": "Mr.vicky patel", "link": "https://stackoverflow.com/users/6228959/mr-vicky-patel"}, "edited": false, "score": 0, "creation_date": 1554871591, "post_id": 55604794, "comment_id": 97904915, "body": "use like this &quot;lateinit var bmp : Bitmap&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": false, "score": 9, "last_activity_date": 1554871637, "creation_date": 1554871637, "answer_id": 55604891, "question_id": 55604794, "link": "https://stackoverflow.com/questions/55604794/property-getter-or-setter-expected/55604891#55604891", "title": "property getter or setter expected", "body": "<p>Issue is that you're going to create <strong>Nullable</strong> object using safe call operator, but your syntax is wrong. Inspite of placing <strong><code>?</code></strong> at variable, you'll need to put it at Reference type.</p>\n\n<p>Check correct syntax :</p>\n\n<pre><code>private var bmp : Bitmap? = null\n</code></pre>\n\n<p>And then you can access this variable with safe call operator like below :</p>\n\n<pre><code>bmp?.someMethodCall() // This line will never throw you null pointer exception because of ? (Safe call operator)\n</code></pre>\n\n<p>Check out more <strong><a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"noreferrer\">here</a>.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 1689, "user_id": 6228959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h1dfl.jpg?s=128&g=1", "display_name": "Mr.vicky patel", "link": "https://stackoverflow.com/users/6228959/mr-vicky-patel"}, "is_accepted": false, "score": 3, "last_activity_date": 1554872377, "creation_date": 1554872377, "answer_id": 55604990, "question_id": 55604794, "link": "https://stackoverflow.com/questions/55604794/property-getter-or-setter-expected/55604990#55604990", "title": "property getter or setter expected", "body": "<p>Please try below line</p>\n\n<pre><code>lateinit var bmp : Bitmap\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5456373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93585875e0da35c1b60d5e5aa42016f1?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Sangdeuk", "link": "https://stackoverflow.com/users/5456373/kim-sangdeuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4073, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1554872377, "creation_date": 1554870854, "last_edit_date": 1554870920, "question_id": 55604794, "link": "https://stackoverflow.com/questions/55604794/property-getter-or-setter-expected", "title": "property getter or setter expected", "body": "<p>I want to use a bitmap var in a class. It makes 'property getter or setter expected' error. What is the problem?\nThe error shows around 'bmp? : Bitmap = null'.\nHow can I solve the problem?</p>\n\n<p>And I don't understand why I must use getter or setter for private properties in a class.</p>\n\n<pre><code>class MyView(context: Context?) : View(context) {\n    private var bmp? : Bitmap = null\n\n    init {\n        bmp = BitmapFactory.decodeResource(resources, R.mipmap.ic_launcher)\n    }\n\n    override fun onDraw(canvas: Canvas?) {\n        super.onDraw(canvas)\n        canvas?.drawColor(Color.BLUE)\n        canvas?.drawBitmap(bmp,10f,10f, null)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore", "android-livedata", "mutablelivedata"], "answers": [{"comments": [{"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1555391662, "post_id": 55700513, "comment_id": 98083333, "body": "The <code>getFilteredData()</code> and <code>getBookmarkedList()</code> do not return a list of <code>MyItem</code>, they return different Objects, such as a <code>Filter</code> to search by, so I can&#39;t simply set the value of the <code>result</code> in the <code>ViewModel</code>. I think I need to either cache the entire list from <code>getListFromServer()</code>, or I need to make that call again after getting the new <code>Filter</code>."}, {"owner": {"reputation": 1031, "user_id": 7135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JldMZ.png?s=128&g=1", "display_name": "SamiAzar", "link": "https://stackoverflow.com/users/7135845/samiazar"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1555399602, "post_id": 55700513, "comment_id": 98086530, "body": "@Advice-Dog in <code>addSource</code> section you can add any logic that customizes your list. see my edited answer."}], "tags": [], "owner": {"reputation": 1031, "user_id": 7135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JldMZ.png?s=128&g=1", "display_name": "SamiAzar", "link": "https://stackoverflow.com/users/7135845/samiazar"}, "is_accepted": true, "score": 3, "last_activity_date": 1555474469, "last_edit_date": 1555474469, "creation_date": 1555388497, "answer_id": 55700513, "question_id": 55604553, "link": "https://stackoverflow.com/questions/55604553/livedata-with-multiple-sources-of-different-types/55700513#55700513", "title": "LiveData with multiple sources of different types", "body": "<p>I don't know am I get your question correctly or not, but if you have a view that work with one list (something like <code>MyItemList</code>) and this list updated or changed by several situations, you must work with <code>MediatorLiveData</code>.</p>\n\n<p>I mean you must have three <code>LiveData</code> that each one responsible for a situation and one MediatorLiveData that notified if each one of them has changed.</p>\n\n<p>see below:</p>\n\n<h2><strong>database</strong></h2>\n\n<pre><code>fun getListFromServer(id: String): LiveData&lt;List&lt;MyItem&gt;&gt; {\n    val dataFromServer = MutableLiveData&lt;List&lt;MyItem&gt;&gt;()\n\n    firestore\n      .collection(\"groups\")\n      .document(id)\n      .collection(\"items\")\n          .addSnapshotListener { snapshot, exception -&gt;\n              val items = snapshot?.toObjects(MyItem::class.java) ?: emptyList()\n              dataFromServer.postValue(items)\n      }\n\n    return dataFromServer\n}\n\nfun getFilteredData(id: String): LiveData&lt;FilterData&gt; {\n    return DAO.user.getFilteredData(id)\n}\n\nfun getBookmarkedList(id: String): LiveData&lt;BookmarkData&gt; {\n    return DAO.user.getBookmarkedData(id)\n}\n</code></pre>\n\n<p>And in the <code>viewModel</code> you have one <code>MediatorLiveData</code> that observe on these <code>liveData</code>s till if any data has changed notify view.</p>\n\n<h2><strong>viewModel</strong></h2>\n\n<pre><code>private val result = MediatorLiveData&lt;&lt;List&lt;MyItem&gt;&gt;()\n\nfun observeOnData(id: String, owner: LifeCycleOwner, observer: Observer&lt;List&lt;MyItem&gt;&gt;) {\n   result.observe(owner, observer);\n\n   result.addSource(Database.getListFromServer(id), MyItemList -&gt; {\n        if(MyItemList != null)\n            result.setValue(MyItemList)\n   });\n   result.addSource(Database.getFilteredData(id), filterData -&gt; {\n        if(filterData != null) {\n            val myItemList = result.getValue()\n            if (myItemList == null) return\n\n            //here add logic for update myItemList depend On filterData\n\n            result.setValue(myItemList)\n        }\n   });\n   result.addSource(Database.getBookmarkedList(id), bookmarkData -&gt; {\n        if(MyItemList != null) {\n            val myItemList = result.getValue()\n            if (myItemList == null) return\n\n            //here add logic for update myItemList depend On bookmarkData\n\n            result.setValue(myItemList)\n        }\n   });\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 1, "last_activity_date": 1555889328, "creation_date": 1555889328, "answer_id": 55787623, "question_id": 55604553, "link": "https://stackoverflow.com/questions/55604553/livedata-with-multiple-sources-of-different-types/55787623#55787623", "title": "LiveData with multiple sources of different types", "body": "<p>Your implementation of <code>contents</code> includes several references to outer variables, which makes it hard to follow and keep track of the state. I'd just keep the references as local as possible and trust <code>switchMap(liveData)</code> to do a proper job. The following code should be doing just the same as yours:</p>\n\n<pre><code>val contents = Transformations.switchMap(database.group) { id -&gt;\n    val data = MediatorLiveData&lt;Resource&lt;List&lt;MyItem&gt;&gt;()\n\n    if (id == null) {\n        data.value = Resource.init(null)\n    } else {\n        data.value = Resource.loading(null)\n        data.addSource(database.getList(id)) {\n            data.value = Resource.success(it)\n        }\n    }\n\n    return liveData\n}\n</code></pre>\n\n<p>In regards of <code>getList(id)</code> you might also want to handle the <code>exception</code> properly.</p>\n"}], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6675, "favorite_count": 0, "accepted_answer_id": 55700513, "answer_count": 2, "score": 10, "last_activity_date": 1555889328, "creation_date": 1554868644, "question_id": 55604553, "link": "https://stackoverflow.com/questions/55604553/livedata-with-multiple-sources-of-different-types", "title": "LiveData with multiple sources of different types", "body": "<p>I currently have a project that contains a list of <code>MyItem</code>, and using Firebase/LiveData. It's structured into groups, and each group has items.</p>\n\n<p>I want to be able to update this list if any of the following happen:</p>\n\n<ol>\n<li>An item is updated (on the backend through Firebase)</li>\n<li>A filter is changed (a separate table on Firebase for each user)</li>\n<li>An item is bookmarked (a separate table on Firebase for each user)</li>\n</ol>\n\n<p>To get the list of contents, I have a function like this to return LiveData that will update whenever an item is updated (#1).</p>\n\n<h2>database</h2>\n\n<pre><code>getList(id: String): LiveData&lt;List&lt;MyItem&gt;&gt; {\n    val data = MutableLiveData&lt;List&lt;MyItem&gt;&gt;()\n\n    firestore\n        .collection(\"groups\")\n        .document(id)\n        .collection(\"items\")\n            .addSnapshotListener { snapshot, exception -&gt;\n                val items = snapshot?.toObjects(MyItem::class.java) ?: emptyList()\n\n                // filter items \n\n                data.postValue(items)\n        }\n\n    return data\n}\n</code></pre>\n\n<p>And within my ViewModel, I have logic for handling that case. </p>\n\n<h2>viewmodel</h2>\n\n<pre><code>private val result = MediatorLiveData&lt;Resource&lt;List&lt;MyItem&gt;&gt;&gt;()\n\nprivate var source: LiveData&lt;List&lt;MyItem&gt;&gt;? = null\nval contents: LiveData&lt;Resource&lt;List&lt;MyItem&gt;&gt;&gt;\n    get() {\n        val group = database.group\n\n        // if the selected group is changed.\n        return Transformations.switchMap(group) { id -&gt;\n            // showing loading indicator\n            result.value = Resource.loading(null)\n\n            if (id != null) {\n                // only 1 source for the current group\n                source?.let {\n                    result.removeSource(it)\n                }\n\n                source = database.getList(id).also {\n                    result.addSource(it) {\n                        result.value = Resource.success(it)\n                    }\n                }\n\n                // how to add in source of filter changes?\n\n            } else {\n                result.value = Resource.init(null)\n            }\n            return@switchMap result\n        }\n    }\n</code></pre>\n\n<p>The logic is pretty complex, and hard to follow. Is there a better way to structure this to handle multiple different changes? What's the best way to store the user's current filters?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["android", "kotlin", "mpandroidchart"], "comments": [{"owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1554873099, "post_id": 55604490, "comment_id": 97905266, "body": "can you describe in detail what you exactly want and its better if you share screenshot or ui."}, {"owner": {"reputation": 63, "user_id": 11200414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n54Xzw_ltiI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9e7nRt28Ca-03vPMq_3UWWPg9Zg/mo/photo.jpg?sz=128", "display_name": "Arnolfo Teope", "link": "https://stackoverflow.com/users/11200414/arnolfo-teope"}, "reply_to_user": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1554874549, "post_id": 55604490, "comment_id": 97905714, "body": "i want to format my Line graph x asis in HH:mm time base im using the function valueFormatter but its not working"}, {"owner": {"reputation": 63, "user_id": 11200414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n54Xzw_ltiI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9e7nRt28Ca-03vPMq_3UWWPg9Zg/mo/photo.jpg?sz=128", "display_name": "Arnolfo Teope", "link": "https://stackoverflow.com/users/11200414/arnolfo-teope"}, "reply_to_user": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1554875112, "post_id": 55604490, "comment_id": 97905900, "body": "@android !<a href=\"https://i.imgur.com/16Chf8s.png\" rel=\"nofollow noreferrer\">Valid XHTML</a>"}, {"owner": {"reputation": 63, "user_id": 11200414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n54Xzw_ltiI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9e7nRt28Ca-03vPMq_3UWWPg9Zg/mo/photo.jpg?sz=128", "display_name": "Arnolfo Teope", "link": "https://stackoverflow.com/users/11200414/arnolfo-teope"}, "reply_to_user": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "edited": false, "score": 0, "creation_date": 1554875148, "post_id": 55604490, "comment_id": 97905908, "body": "it needs to look like the image on the link"}, {"owner": {"reputation": 408, "user_id": 6382210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9SM6S.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6382210/rahul"}, "edited": false, "score": 0, "creation_date": 1554878983, "post_id": 55604490, "comment_id": 97907441, "body": "<code>getFormattedValue(value: Float, axis: AxisBase)</code> this method i think deprecated"}], "answers": [{"tags": [], "owner": {"reputation": 2302, "user_id": 7326905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqAOR.jpg?s=128&g=1", "display_name": "android", "link": "https://stackoverflow.com/users/7326905/android"}, "is_accepted": false, "score": 1, "last_activity_date": 1555048009, "last_edit_date": 1555048009, "creation_date": 1554876278, "answer_id": 55605713, "question_id": 55604490, "link": "https://stackoverflow.com/questions/55604490/xasis-millisecond-to-hhmm-format-in-mpandroidchart-using-kotlin/55605713#55605713", "title": "xAsis millisecond to HH:mm format in MPAndroidChart using kotlin", "body": "<p><strong>To display values as date/time format in xAxis in MpAndroidChart, do as below:</strong></p>\n\n<p>First take String arraylist named as \"xValsDateLabel\" as below:</p>\n\n<pre><code>val xValsDateLabel = ArrayList&lt;String&gt;()\n</code></pre>\n\n<p>Now For exmpale i have 5 values to be printed on x axis in date or time format then first take those values as milliseconds in one arraylist like below:</p>\n\n<pre><code>val xValsOriginalMillis = ArrayList&lt;Long&gt;()\nxValsOriginalMillis.add(1554875423736L)\nxValsOriginalMillis.add(1555275494836L)\nxValsOriginalMillis.add(1585578525900L)\nxValsOriginalMillis.add(1596679626245L)\nxValsOriginalMillis.add(1609990727820L)\n</code></pre>\n\n<p>Now loop with \"xValsOriginalMillis\" and then put values as HH:mm in \"xValsDateLabel\" String ArrayList by converting milliseconds to HH:mm as below:</p>\n\n<pre><code>for (i in xValsOriginalMillis.indices) {\n            val mm = xValsOriginalMillis[i] / 60 % 60\n            val hh = xValsOriginalMillis[i] / (60 * 60) % 24\n            val mDateTime = \"$hh:$mm\"\n            xValsDateLabel.add(mDateTime)\n        }\n</code></pre>\n\n<p>Now format your xAxis values as below:</p>\n\n<pre><code>class MyValueFormatter(private val xValsDateLabel: ArrayList&lt;String&gt;) : ValueFormatter() {\n\n        override fun getFormattedValue(value: Float): String {\n            return value.toString()\n        }\n\n        override fun getAxisLabel(value: Float, axis: AxisBase): String {\n            if (value.toInt() &gt;= 0 &amp;&amp; value.toInt() &lt;= xValsDateLabel.size - 1) {\n                return xValsDateLabel[value.toInt()]\n            } else {\n                return (\"\").toString()\n            }\n        }\n    }\n</code></pre>\n\n<p>And use that value formatter with below line:</p>\n\n<pre><code>xAxis.valueFormatter = (MyValueFormatter(xValsDateLabel))\n</code></pre>\n\n<p><strong>Hi, i have edit my answer as below: (There is type mismatch error because you are adding float value in \"entries\" array list)</strong></p>\n\n<blockquote>\n  <p>Note: Please try to add the same number of array list items in\n  \"xValsOriginalMillis\" as in \"entries\" arraylist, otherwise it will\n  give you ArrayIndexOutOfBound Exception.</p>\n</blockquote>\n\n<pre><code>class MainLineActivity : AppCompatActivity() {\n\n    private lateinit var mLineChart: LineChart\n    private var entries = java.util.ArrayList&lt;Entry&gt;()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main_line)\n        mLineChart = findViewById(R.id.lineChart)\n\n        entries.add(Entry(0f, 5f))\n        entries.add(Entry(1f, 10f))\n        entries.add(Entry(2f, 15f))\n        entries.add(Entry(3f, 20f))\n        entries.add(Entry(4f, 5f))\n        entries.add(Entry(5f, 10f))\n        // Log.d(\"itoNa\", \"$entries\")\n\n        val set1 = LineDataSet(entries, \"Water\")\n        set1.fillAlpha = 110\n\n        var dataSet = java.util.ArrayList&lt;ILineDataSet&gt;()\n        dataSet.add(set1)\n\n        val lineData = LineData(dataSet)\n        mLineChart.data = lineData\n\n        set1.color = Color.RED\n        set1.mode = LineDataSet.Mode.CUBIC_BEZIER\n        mLineChart.description.text = \"\"\n        mLineChart.legend.isEnabled = false\n        mLineChart.invalidate()\n        mLineChart.axisRight.isEnabled = false\n        mLineChart.axisLeft.setPosition(YAxis.YAxisLabelPosition.OUTSIDE_CHART)\n        mLineChart.axisRight.setPosition(YAxis.YAxisLabelPosition.OUTSIDE_CHART)\n\n\n        val xAxis = mLineChart.xAxis\n        xAxis.position = XAxis.XAxisPosition.BOTTOM\n        xAxis.setDrawGridLines(false)\n        xAxis.labelCount = 4\n        xAxis.granularity = 1f\n        xAxis.isGranularityEnabled = true\n\n        val xValsDateLabel = ArrayList&lt;String&gt;()\n\n        val xValsOriginalMillis = ArrayList&lt;Long&gt;()\n        xValsOriginalMillis.add(1554875423736L)\n        xValsOriginalMillis.add(1555275494836L)\n        xValsOriginalMillis.add(1585578525900L)\n        xValsOriginalMillis.add(1596679626245L)\n        xValsOriginalMillis.add(1609990727820L)\n        xValsOriginalMillis.add(1709990727820L)\n\n        for (i in xValsOriginalMillis) {\n            val mm = i / 60 % 60\n            val hh = i / (60 * 60) % 24\n            val mDateTime = \"$hh:$mm\"\n            xValsDateLabel.add(mDateTime)\n        }\n\n        xAxis.valueFormatter = (MyValueFormatter(xValsDateLabel))\n    }\n\n\n    class MyValueFormatter(private val xValsDateLabel: ArrayList&lt;String&gt;) : ValueFormatter() {\n\n        override fun getFormattedValue(value: Float): String {\n            return value.toString()\n        }\n\n        override fun getAxisLabel(value: Float, axis: AxisBase): String {\n            if (value.toInt() &gt;= 0 &amp;&amp; value.toInt() &lt;= xValsDateLabel.size - 1) {\n                return xValsDateLabel[value.toInt()]\n            } else {\n                return (\"\").toString()\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Here is the screenshot attached below what i have achieved with above code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6kVFV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6kVFV.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 63, "user_id": 11200414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n54Xzw_ltiI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9e7nRt28Ca-03vPMq_3UWWPg9Zg/mo/photo.jpg?sz=128", "display_name": "Arnolfo Teope", "link": "https://stackoverflow.com/users/11200414/arnolfo-teope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555048009, "creation_date": 1554868116, "last_edit_date": 1554883296, "question_id": 55604490, "link": "https://stackoverflow.com/questions/55604490/xasis-millisecond-to-hhmm-format-in-mpandroidchart-using-kotlin", "title": "xAsis millisecond to HH:mm format in MPAndroidChart using kotlin", "body": "<p>I'm creating a program that will display the data in a line graph according to time base with format of \"HH:mm\" but my code did not format my xAsis</p>\n\n<p>I'm trying different ways to format but its not working like the codes bellow.</p>\n\n<pre><code>    xAxis.valueFormatter = IAxisValueFormatter { value, _-&gt; SimpleDateFormat(\"HH:mm\", Locale.ENGLISH).format(value.toLong()) } as ValueFormatter\n</code></pre>\n\n<p>and also this one.</p>\n\n<pre><code>    xAxis.valueFormatter = formatter\n\n    var formatter: ValueFormatter  = object : ValueFormatter() {\n\n                    // we don't draw numbers, so no decimal digits needed\n                    var sdf = SimpleDateFormat(\"HH:mm\", Locale.ENGLISH)\n\n                    override fun getFormattedValue(value: Float, axis: AxisBase): String {\n                        return sdf.format(value)\n                    }\n                }\n</code></pre>\n\n<p>my actual result must be in HH:mm format</p>\n\n<p>Below is the updated code snippet</p>\n\n<pre><code>    class MainActivity : AppCompatActivity() {\nprivate lateinit var mLineChart: LineChart\nprivate var entries = java.util.ArrayList&lt;Entry&gt;()\n\noverride fun onCreate(savedInstanceState: Bundle?)\n{\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    mLineChart = findViewById(R.id.chart)\n\n    entries.add(Entry(0f, 5f))\n    entries.add(Entry(1f, 10f))\n    entries.add(Entry(2f, 15f))\n    entries.add(Entry(3f, 20f))\n    entries.add(Entry(4f, 5f))\n    entries.add(Entry(5f, 10f))\n\n    val set1 = LineDataSet(entries, \"Water\")\n    set1.fillAlpha = 110\n\n    var dataSet = java.util.ArrayList&lt;ILineDataSet&gt;()\n    dataSet.add(set1)\n\n    val lineData = LineData(dataSet)\n    mLineChart.data = lineData\n\n    set1.color = Color.RED\n    set1.mode = LineDataSet.Mode.CUBIC_BEZIER\n    mLineChart.description.text = \"\"\n    mLineChart.legend.isEnabled = false\n    mLineChart.invalidate()\n    mLineChart.axisRight.isEnabled = false\n    mLineChart.axisLeft.setPosition(YAxis.YAxisLabelPosition.OUTSIDE_CHART)\n    mLineChart.axisRight.setPosition(YAxis.YAxisLabelPosition.OUTSIDE_CHART)\n\n\n    val xAxis = mLineChart.xAxis\n    xAxis.position = XAxis.XAxisPosition.BOTTOM\n    xAxis.setDrawGridLines(false)\n    xAxis.labelCount = 4\n    xAxis.granularity = 1f\n    xAxis.isGranularityEnabled = true\n\n    val xValsDateLabel = ArrayList&lt;String&gt;()\n\n    val xValsOriginalMillis = ArrayList&lt;Long&gt;()\n    xValsOriginalMillis.add(1554875423736L)\n    xValsOriginalMillis.add(1555275494836L)\n    xValsOriginalMillis.add(1585578525900L)\n    xValsOriginalMillis.add(1596679626245L)\n    xValsOriginalMillis.add(1609990727820L)\n    xValsOriginalMillis.add(1709990727820L)\n\n    for (i in xValsOriginalMillis) {\n        val mm = i / 60 % 60\n        val hh = i / (60 * 60) % 24\n        val mDateTime = \"$hh:$mm\"\n        xValsDateLabel.add(mDateTime)\n    }\n\n    xAxis.valueFormatter = IAxisValueFormatter { value, axis -&gt;\n        if (xValsDateLabel != null &amp;&amp; value.toInt() &gt;= 0\n            &amp;&amp; value.toInt() &lt;= xValsDateLabel!!.size - 1) {\n            xValsDateLabel!![value.toInt()].toString()\n        } else {\n            (\"\").toString()\n        }\n    } as ValueFormatter\n} }\n</code></pre>\n\n<p>Below is the updated code snippet of my manifest</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n\n&lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n    &lt;activity android:name=\".MainActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p></p>\n\n<p>bellow is the full stack trace error </p>\n\n<pre><code>    2019-04-10 15:34:05.458 27746-27746/com.example.graph E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.graph, PID: 27746\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.graph/com.example.graph.MainActivity}: java.lang.ClassCastException: com.example.graph.MainActivity$onCreate$1 cannot be cast to com.github.mikephil.charting.formatter.ValueFormatter\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2778)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:169)\n    at android.app.ActivityThread.main(ActivityThread.java:6521)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n Caused by: java.lang.ClassCastException: com.example.graph.MainActivity$onCreate$1 cannot be cast to com.github.mikephil.charting.formatter.ValueFormatter\n    at com.example.graph.MainActivity.onCreate(MainActivity.kt:79)\n    at android.app.Activity.performCreate(Activity.java:7051)\n    at android.app.Activity.performCreate(Activity.java:7042)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1215)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\u00a0\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n    at android.os.Looper.loop(Looper.java:169)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6521)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\u00a0\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11337765"}, "edited": false, "score": 0, "creation_date": 1554866506, "post_id": 55604195, "comment_id": 97903748, "body": "Ah I get it! Anything residing inside the double quotes is a constant hence immutable. And when I assign <i>str3 = str3.tripcon(str1,str2)</i>,  str3 reference variable just &quot;points&quot; to another String object possessing a value of str1+str2+&quot;strings.&quot;"}, {"owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "edited": false, "score": 0, "creation_date": 1554866804, "post_id": 55604195, "comment_id": 97903805, "body": "Yip  You&#39;ve got it!"}], "tags": [], "owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "is_accepted": true, "score": 2, "last_activity_date": 1554906271, "last_edit_date": 1554906271, "creation_date": 1554865805, "answer_id": 55604195, "question_id": 55604135, "link": "https://stackoverflow.com/questions/55604135/how-does-one-modify-the-object-itself-from-which-an-extension-function-has-been/55604195#55604195", "title": "How does one modify the object itself from which an extension function has been called?", "body": "<p>Strings are immutable.  You can't ever modify a string, inside an extension function or otherwise.</p>\n\n<p>Even if you could, you wouldn't assign a new value to <code>this</code>.  <code>this</code> is the object you're extending the behavior of. You'd then not be modifying that object, but trying to \"replace\" it, or something.  I frankly would have no idea what that would result in if Kotlin let you do it.  But it doesn't.  If String were not immutable, you'd want to do something like <code>this.setValue(s1 + s2 + this)</code></p>\n\n<p><code>str3 = str3.tripcon(str1,str2)</code> works because <code>tripcon</code> is constructing a new String, and then you're assigning that new String to the reference <code>str3</code>.  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11337765"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55604195, "answer_count": 1, "score": 4, "last_activity_date": 1554906271, "creation_date": 1554865351, "question_id": 55604135, "link": "https://stackoverflow.com/questions/55604135/how-does-one-modify-the-object-itself-from-which-an-extension-function-has-been", "title": "How does one modify the object itself from which an extension function has been called?", "body": "<p>So I am fairly new to Kotlin Programming and while taking tutorials, I stumbled upon the topic of Extension Functions. The tutorial had presented an example of concatenating three strings at once using extension function (say tripcon) as follows: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>fun main() {\n    val str1=\"Three \"\n    val str2=\"concantenated \"\n    var str3=\"strings.\"\n    str3 = str3.tripcon(str1,str2)\n    println(str3)\n}\n\nfun String.tripcon(s1: String,  s2: String) : String{\n    return s1 + s2 + this\n}\n</code></pre>\n\n<p>The above code will give a correct output as</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Three concatenated strings.\n</code></pre>\n\n<p>However, if I modify the tripcon() function as:</p>\n\n<pre><code>fun String.tripcon(s1: String,  s2: String){\n    this= s1+s2+this\n}\n</code></pre>\n\n<p>And subsequently modify the second last line in main() function as:</p>\n\n<pre><code>str3.tripcon(str1,str2)\n</code></pre>\n\n<p>It brings out an error stating <em>Variable expected</em> in the line:</p>\n\n<pre><code>this= s1+s2+this\n</code></pre>\n\n<p>So my question is, is it possible for an object which has called the extension function be modified inside it? Or are there other alternatives? Thanks!</p>\n"}, {"tags": ["android", "xml", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554881332, "post_id": 55602995, "comment_id": 97908699, "body": "&quot;You back press and Fragment B got fully destroyed because you logically leaving that.&quot; I thought only the view would get destroyed?"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554886133, "post_id": 55602995, "comment_id": 97911300, "body": "&quot;all of them already got detached out of your view hierarchy and can&#39;t be used anymore&quot; Can&#39;t they be used once the fragment view is rebuilt? (e.g. onActivityCreated())?"}, {"owner": {"reputation": 1090, "user_id": 2723437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4vnIE.jpg?s=128&g=1", "display_name": "Peregreen", "link": "https://stackoverflow.com/users/2723437/peregreen"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1554923072, "post_id": 55602995, "comment_id": 97932440, "body": "&gt;&gt; I thought only the view would get destroyed? A: not in the case when you go back in terms of back stack. You logically leaving your fragment, so your Fragment B will be destroyed fully.  &gt;&gt; Can&#39;t they be used once the fragment view is rebuilt? A: no, the fragment will create a new view (usually inflate from XML). So if you keep a reference to old views, you basically hold the memory from being freed up.  &gt;&gt; (e.g. onActivityCreated()) A: Activity usually has even longer lifecycle then fragments. Fragment&#39;s view can be created/destroyed while Activity basically stays in the same state."}], "tags": [], "owner": {"reputation": 1090, "user_id": 2723437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4vnIE.jpg?s=128&g=1", "display_name": "Peregreen", "link": "https://stackoverflow.com/users/2723437/peregreen"}, "is_accepted": false, "score": 0, "last_activity_date": 1554855546, "creation_date": 1554855546, "answer_id": 55602995, "question_id": 55602194, "link": "https://stackoverflow.com/questions/55602194/why-does-clearfindviewbyidcache-have-to-be-called-in-ondestroyview/55602995#55602995", "title": "Why does clearFindViewByIdCache() have to be called in onDestroyView()?", "body": "<p>The important note here is that Fragments usually have a longer lifecycle then their views. Let's consider the following flow:</p>\n\n<ol>\n<li>You created <code>Fragment A</code> and placed it into a container</li>\n<li><code>Fragment A</code> view got created (this onCreateView + onViewCreated)</li>\n<li>You created <code>Fragment B</code> and replace <code>Fragment A</code> with the new fragment in the container + keep back stack</li>\n<li><code>Fragment A</code> views will be destroyed at this moment, but the fragment will be kept inside of <code>FragmentManager</code>.</li>\n<li>You <code>back press</code> and Fragment B got fully destroyed because you logically leaving that. At this moment system replaces it back with <code>Fragment A</code> and it creates a new view again.</li>\n</ol>\n\n<p><strong>So here are a few important notes:</strong></p>\n\n<p>At step #4 if you keep any links to subviews, then your memory just leaks because all of them already got detached out of your view hierarchy and can't be used anymore. Basically, you still hold all those views in memory, even though they are not in use anymore. Usually, ppl don't notice that and all views will get rebound again with new onViewCreated (and <code>findViewById</code>), but kotlin extensions keep them in a cache and basically do not execute this <code>findViewById</code> again, so you can get old (read as dead) views that are not those views that just got created. </p>\n\n<p>If you use ButterKnife at the moment for instance, they have description about that as well in <code>Binding Reset</code> section. (<a href=\"http://jakewharton.github.io/butterknife/#reset\" rel=\"nofollow noreferrer\">http://jakewharton.github.io/butterknife/#reset</a>).</p>\n\n<p>Last important note is that Kotlin extensions do this job for you, so you don't really need to call it inside of onDestroyView, you just use it and it works (as magic...)</p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 921, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554855546, "creation_date": 1554848884, "question_id": 55602194, "link": "https://stackoverflow.com/questions/55602194/why-does-clearfindviewbyidcache-have-to-be-called-in-ondestroyview", "title": "Why does clearFindViewByIdCache() have to be called in onDestroyView()?", "body": "<p>I'm trying to understand Kotlin Android extensions and <a href=\"https://proandroiddev.com/kotlin-android-extensions-the-definitive-guide-786d190b30e7\" rel=\"nofollow noreferrer\">this article</a> says says:</p>\n\n<pre><code>When asked for a view, it will try to find it in the cache. If it\u2019s not there, it will find it and add it to the cache. Pretty simple indeed.\n\nBesides, it adds a function to clear the cache: clearFindViewByIdCache. You can use it for instance if you have to rebuild the view, as the old views won't be valid anymore.\n</code></pre>\n\n<p>Why won't the old views be valid anymore once you rebuild the view after onDestroy()? The view references are still going to be there once you rebuild the view, for example in OnActivityCreated().</p>\n"}, {"tags": ["android", "android-layout", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "reply_to_user": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 1, "creation_date": 1554923363, "post_id": 55601812, "comment_id": 97932571, "body": "@GiorgosNeokleous Removing the import will not fix the issue. But it is still worth noting that importing anything with <code>.*</code> is not suggested."}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "reply_to_user": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "edited": false, "score": 0, "creation_date": 1554923620, "post_id": 55601812, "comment_id": 97932675, "body": "@theThapa Thanks for pointing out. I know that&#39;s not recommended. Personally I am not a big fan of kotlin synthetics. However, if that was the answer, there should be a reason explaining why."}, {"owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "reply_to_user": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1554923864, "post_id": 55601812, "comment_id": 97932765, "body": "@GiorgosNeokleous I agree with you. If removing that import is the answer, it would be good to get some explanation."}], "tags": [], "owner": {"reputation": 1129, "user_id": 11233871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GgPqb.png?s=128&g=1", "display_name": "Happy Singh", "link": "https://stackoverflow.com/users/11233871/happy-singh"}, "is_accepted": false, "score": -2, "last_activity_date": 1554846434, "creation_date": 1554846434, "answer_id": 55601812, "question_id": 55601671, "link": "https://stackoverflow.com/questions/55601671/android-kotlin-cannot-change-a-text-string-within-a-function/55601812#55601812", "title": "Android Kotlin cannot change a text string within a function", "body": "<p>remove this import </p>\n\n<pre><code>import kotlinx.android.synthetic.main.activity_main.view.*\n</code></pre>\n\n<p>Hope this will work</p>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 7537239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OFGLGjeP0xA/AAAAAAAAAAI/AAAAAAAAXTo/kD7R7-ivZfo/photo.jpg?sz=128", "display_name": "RBusarow", "link": "https://stackoverflow.com/users/7537239/rbusarow"}, "is_accepted": false, "score": 2, "last_activity_date": 1554862812, "creation_date": 1554862812, "answer_id": 55603813, "question_id": 55601671, "link": "https://stackoverflow.com/questions/55601671/android-kotlin-cannot-change-a-text-string-within-a-function/55603813#55603813", "title": "Android Kotlin cannot change a text string within a function", "body": "<p>You're overwriting the click listener.  The <code>OnClickListener</code> is a single property - not a list.</p>\n\n<pre><code>imageButton1.setOnClickListener {v: View -&gt; \n  toast(v)\n  imageButton1.setImageResource(R.drawable.greenbutton)\n  textView1.text = \"1234\"\n}\n\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "is_accepted": false, "score": 1, "last_activity_date": 1554864591, "creation_date": 1554864591, "answer_id": 55604032, "question_id": 55601671, "link": "https://stackoverflow.com/questions/55601671/android-kotlin-cannot-change-a-text-string-within-a-function/55604032#55604032", "title": "Android Kotlin cannot change a text string within a function", "body": "<pre><code>imageButton1.setOnClickListener {v: View -&gt; toast(v) }\n\nimageButton1.setOnClickListener {\n    imageButton1.setImageResource(R.drawable.greenbutton)\n    textView1.text = \"1234\"\n}\n</code></pre>\n\n<p><strong>Problem:</strong> <code>ImageButton</code> have only one <code>OnClickListener</code> to listen the event when there is a click event on it own. You can set the listener by using <code>setOnClickListener</code>. Because in your code, you use <code>setOnClickListener</code> two times, so the second one will override the first one.</p>\n\n<p><strong>Solution:</strong> Change your code to</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        imageButton1.setOnClickListener {\n            imageButton1.setImageResource(R.drawable.greenbutton)\n            textView1.text = \"1234\"\n            textView2.text = \"1234\"\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 8423930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45441bf595fbdadd61fb7c6865d3a122?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon Shaw", "link": "https://stackoverflow.com/users/8423930/brendon-shaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1554873894, "creation_date": 1554873894, "answer_id": 55605243, "question_id": 55601671, "link": "https://stackoverflow.com/questions/55601671/android-kotlin-cannot-change-a-text-string-within-a-function/55605243#55605243", "title": "Android Kotlin cannot change a text string within a function", "body": "<p>Many thanks, how simple is the solution many thanks for all the help, the setOnClickListener is setup only once to trigger the function. This is the finial code that works</p>\n\n<pre><code>package com.example.sandpit9\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.activity_main.view.*\nimport org.w3c.dom.Text\n\nclass MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    imageButton1.setOnClickListener{v: View -&gt; toast(v)}\n\n    }\n\n\n\nprivate fun toast(v: View) {\n    imageButton1.setImageResource(R.drawable.greenbutton)\n    textView1.text = \"1234\"\n    textView2.text = \"1234\"\n\n\n\n}\n\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 8423930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45441bf595fbdadd61fb7c6865d3a122?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon Shaw", "link": "https://stackoverflow.com/users/8423930/brendon-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1554873894, "creation_date": 1554845715, "last_edit_date": 1554871329, "question_id": 55601671, "link": "https://stackoverflow.com/questions/55601671/android-kotlin-cannot-change-a-text-string-within-a-function", "title": "Android Kotlin cannot change a text string within a function", "body": "<p>I have some really simple Kotlin code for changing a text string within a function generated from a button press, but it does not work. I have a single button and two text strings, one the button press the first text string changes but the text string within the function does not change.</p>\n\n<p>I am sure the problem is with the function call and not passing the right information about the activity, but just cannot work out what is wrong.</p>\n\n<p>MainActivty.kt</p>\n\n<pre><code>package com.example.sandpit9\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.activity_main.view.*\nimport org.w3c.dom.Text\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        imageButton1.setOnClickListener {v: View -&gt; toast(v) }\n\n        imageButton1.setOnClickListener {\n            imageButton1.setImageResource(R.drawable.greenbutton)\n            textView1.text = \"1234\"\n        }\n    }\n\n    public fun toast(v: View) {\n        v.textView2.text = \"1234\"\n    }\n}\n</code></pre>\n\n<p>MainActivty.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n&lt;TextView\n        android:text=\"TextView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView1\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/imageButton1\"\n        android:layout_marginBottom=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:textSize=\"34sp\"/&gt;\n&lt;TextView\n        android:text=\"textvar1\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView2\"\n        android:textSize=\"34sp\"\n        android:layout_marginTop=\"108dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/imageButton1\"\n        android:layout_marginEnd=\"8dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginRight=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:layout_marginLeft=\"8dp\"\n        app:layout_constraintHorizontal_bias=\"0.535\"/&gt;\n&lt;ImageButton\n        android:layout_width=\"174dp\"\n        android:layout_height=\"154dp\"\n        app:srcCompat=\"@drawable/download\"\n        android:id=\"@+id/imageButton1\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        android:layout_marginBottom=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.542\"\n        app:layout_constraintVertical_bias=\"0.187\"/&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1554875000, "creation_date": 1554875000, "answer_id": 55605454, "question_id": 55601473, "link": "https://stackoverflow.com/questions/55601473/function-getting-class-of-retrofit-interface-to-be-created-causes-wrong-return-t/55605454#55605454", "title": "Function getting class of retrofit interface to be created causes wrong return type", "body": "<p>Because the type inferred for <code>when(...)</code> is not <code>Class&lt;*&gt;</code>, but <code>Class&lt;out X&gt;</code>, where <code>X</code> is the common supertype of <code>Api1Interface</code> and <code>Api2Interface</code>. So <code>create</code> returns <code>X</code>.</p>\n\n<p>You should be able to see that by removing the return type for <code>getInterfaceClass</code> and checking what the IDE shows.</p>\n"}], "owner": {"reputation": 221, "user_id": 1849493, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ea48fdd511942926f3bce29014a8c836?s=128&d=identicon&r=PG", "display_name": "karex", "link": "https://stackoverflow.com/users/1849493/karex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55605454, "answer_count": 1, "score": 0, "last_activity_date": 1554875000, "creation_date": 1554844741, "question_id": 55601473, "link": "https://stackoverflow.com/questions/55601473/function-getting-class-of-retrofit-interface-to-be-created-causes-wrong-return-t", "title": "Function getting class of retrofit interface to be created causes wrong return type", "body": "<p>I am working on an app that has 3 weather APIs and I want my user to be able to choose which one should be used. Each of those APIs has each own data format, so I wanted to create a function that creates proper interface and than wrapps it, so the result is something common, so that I could handle it the same way for each interface.\nSo my code looks like that:</p>\n\n<pre><code>fun create(api: Apis): ApiDataSource = retrofitBuilder\n        .baseUrl(getBaseUrlFor(api))\n        .build()\n        .create(getInterfaceClassFor(api))\n        .convertWith(interfaceConverter)\n}\n\nfun Api1.convertWith(interfaceConverter: InterfaceConverter): CommonWeatherDataEntity = ...\n\nprivate fun getInterfaceClass(api: Apis): Class&lt;*&gt; = when (api) {\n    Apis.Api1 -&gt; Api1Interface::class.java\n    Apis.Api2 -&gt; Api2Interface::class.java\n}\n</code></pre>\n\n<p>However line after <code>.create(...)</code> is highlighted red and error says \"Unresolved reference\". That's because create is returning <code>Any!</code></p>\n\n<p>What I don't understand (are generics obviously) is why the following code works fine:</p>\n\n<pre><code>fun Apis.createInterface(retrofitBuilder: Retrofit.Builder) =\n    retrofitBuilder.baseUrl(getBaseUrlFor(this))\n        .build()\n        .create(\n            when (this) {\n                Apis.Api1 -&gt; Api1Interface::class.java\n                Apis.Api2 -&gt; Api2Interface::class.java\n            }\n        ).convertWith(interfaceConverter)\n</code></pre>\n"}, {"tags": ["java", "kotlin", "return", "try-catch", "stripe-payments"], "comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 3, "creation_date": 1554843259, "post_id": 55601150, "comment_id": 97898241, "body": "The method must return a <code>Subscription</code>, but you only do that inside the <code>try</code>. If an exception is thrown then what is the method supposed to return?. Looks like it tries to return the result of <code>printStackTrace</code>, which is <code>Unit</code> not a <code>Subscription</code>. There are at least two solutions: (1) Let the exception bubble up rather than catching it, or (2) make the return type nullable and return null when an exception is thrown. Or make the return type some kind of optional and return an empty value when an exception is thrown."}, {"owner": {"reputation": 2090, "user_id": 8588359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiqvE.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8588359/raj"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1554843706, "post_id": 55601150, "comment_id": 97898407, "body": "I thought about making it nullable but if I make the return type nullable, won&#39;t it throw a NullPointerException when it actually throws an error? Also, what exactly do you mean by <code>let the exception bubble up</code>?"}, {"owner": {"reputation": 2167, "user_id": 10992886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ea364872e8995970feec09206d2d39?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/10992886/jordan"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1554844430, "post_id": 55601150, "comment_id": 97898708, "body": "Whether or not returning null is acceptable depends entirely on what the code calling this method does with the return value.  Kotlin has lots of ways to safeguard against nulls.  As for letting the exception bubble up, @Slaw meant to not catch the exception at all.  That way, whatever is calling this function can deal with it, instead.  Or whatever calls <i>that</i> function.  The exception will &quot;bubble up&quot; through the call stack until it hits a try/catch block."}, {"owner": {"reputation": 2090, "user_id": 8588359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiqvE.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8588359/raj"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1554846041, "post_id": 55601150, "comment_id": 97899256, "body": "I think I&#39;m gonna go with Bubbling.  Thanks, @Slaw and @Jordan!"}], "answers": [{"tags": [], "owner": {"reputation": 503, "user_id": 10367546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b939590245b2d75a807ed02e8367170?s=128&d=identicon&r=PG&f=1", "display_name": "AleksW", "link": "https://stackoverflow.com/users/10367546/aleksw"}, "is_accepted": false, "score": 2, "last_activity_date": 1554843553, "creation_date": 1554843553, "answer_id": 55601248, "question_id": 55601150, "link": "https://stackoverflow.com/questions/55601150/try-catch-block-in-kotlin-what-to-return/55601248#55601248", "title": "Try-catch block in Kotlin -- what to return", "body": "<p>Your function <code>cancelSubscription</code> must return a subscription or null\nor there is an exception is does not do this so it's not valid</p>\n\n<p>Better explained in the comment by Slaw, which it did not show me before I posted :/</p>\n"}, {"tags": [], "owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "is_accepted": true, "score": 6, "last_activity_date": 1554847677, "last_edit_date": 1554847677, "creation_date": 1554846929, "answer_id": 55601892, "question_id": 55601150, "link": "https://stackoverflow.com/questions/55601150/try-catch-block-in-kotlin-what-to-return/55601892#55601892", "title": "Try-catch block in Kotlin -- what to return", "body": "<p>You have a function with a return type of <code>Subscription</code>. This means all possible code paths in the function must end up returning a <code>Subscription</code> or throwing an exception. As you currently have it, your code only returns in the <code>try</code> block. This is a problem; if an exception is thrown it moves into the <code>catch</code> block which has no return statements, nor are there any return statements after the <code>catch</code> block. This means there's a code path that results in no return\u2014thus the error.</p>\n\n<p>There are at least two solutions to this error:</p>\n\n<ol>\n<li><p>Don't catch the exception; just let it bubble up out of the method to the caller.</p>\n\n<pre><code>fun cancelSubscription(cancelStripeSubscription: CancelStripeSubscription): Subscription =\n     Subscription.retrieve(\"superSecret\").cancel(null)\n</code></pre></li>\n<li><p>Make the return type nullable and return null if an exception is thrown.</p>\n\n<pre><code>fun cancelSubscription(cancelStripeSubscription: CancelStripeSubscription): Subscription? =\n    try {\n        Subscription.retrieve(\"superSecret\").cancel(null)\n    } catch (ex: StripeException) {\n        null\n    }\n</code></pre>\n\n<blockquote>\n  <p>I thought about making it nullable but if I make the return type nullable, won't it throw a NullPointerException when it actually throws an error?</p>\n</blockquote>\n\n<p>The function itself won't throw an NPE, no. And since the return type is now nullable Kotlin will force you to handle that when you try to use the result. For more information, see <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"noreferrer\">Null Safety - Kotlin Programming Language</a>.</p></li>\n</ol>\n"}], "owner": {"reputation": 2090, "user_id": 8588359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiqvE.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8588359/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5932, "favorite_count": 0, "accepted_answer_id": 55601892, "answer_count": 2, "score": 2, "last_activity_date": 1554847677, "creation_date": 1554843014, "last_edit_date": 1554847609, "question_id": 55601150, "link": "https://stackoverflow.com/questions/55601150/try-catch-block-in-kotlin-what-to-return", "title": "Try-catch block in Kotlin -- what to return", "body": "<pre><code>fun cancelSubscription(cancelStripeSubscription: CancelStripeSubscription): Subscription {\n        Stripe.apiKey = testApiKey\n        try {\n            val sub = Subscription.retrieve(\"superSecret\")\n            return sub.cancel(null)\n        } catch (e: StripeException) {\n            e.printStackTrace()\n        }\n    }\n</code></pre>\n\n<p><code>Background</code>: </p>\n\n<p>Kotlin newbie here trying to integrate Stripe Billing into a Kotlin app.</p>\n\n<p><code>Problem</code>: </p>\n\n<p>As <code>e.printStackTrace()</code> is of type <code>Unit</code> according to Kotlin, I see an error that says <code>A 'return' expression required in a function with a block body.({...})</code>.</p>\n\n<p>How can I make this work?</p>\n\n<p><strong>Edit</strong>: I am using <code>stripe-java</code> here.. </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 928, "user_id": 3692518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1435358aff8b85085d27278c34a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/3692518/wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1554845163, "creation_date": 1554845163, "answer_id": 55601567, "question_id": 55601044, "link": "https://stackoverflow.com/questions/55601044/display-specific-field-from-array-list-in-spinner/55601567#55601567", "title": "Display specific field from array list in spinner", "body": "<p>As you're using Kotlin, you can use an extension function on your class to keep the same syntax as before. Supposing your generated class is called <code>UniversityGenerated</code>, the extension function would look like that:</p>\n\n<pre><code>fun UniversityGenerated.toString(): String {\n    return \"${this.abbr} - ${this.university}\"\n}\n</code></pre>\n\n<p>with <code>abbr</code> and <code>university</code> still being publicly accessible. You can read more in the official documentation <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/extension-functionsproperties.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 2171, "user_id": 8150077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cu35k.jpg?s=128&g=1", "display_name": "Nux", "link": "https://stackoverflow.com/users/8150077/nux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554845163, "creation_date": 1554842560, "question_id": 55601044, "link": "https://stackoverflow.com/questions/55601044/display-specific-field-from-array-list-in-spinner", "title": "Display specific field from array list in spinner", "body": "<p>I want to show only one field in spinner from arraylist.</p>\n\n<p>I used to overide toString in model class like this.</p>\n\n<pre><code>data class University(\n        @SerializedName(\"university\") val university: String,\n        @SerializedName(\"abbr\") val abbr: String,\n        @SerializedName(\"university_id\") val university_id: String) {\n\n    override fun toString(): String {\n        return \"$abbr - $university\"\n    }\n}\n</code></pre>\n\n<p>And used it like this in activity</p>\n\n<pre><code>        viewModel.getUniversities().observe(\n                this,\n                Observer { universities -&gt;\n                    val adapter = ArrayAdapter&lt;University&gt;(this, android.R.layout.simple_spinner_dropdown_item, universities)\n                    universitySpinner.adapter = adapter\n\n                    universitySpinner.onItemSelectedListener = object : OnItemSelectedListener {\n\n                        override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View, position: Int, id: Long) {\n                            universityId = universities!![position].university_id.toString()\n                        }\n\n                        override fun onNothingSelected(arg0: AdapterView&lt;*&gt;) {\n\n                        }\n                    }\n                }\n        )\n</code></pre>\n\n<p>This returns one string as I intended.</p>\n\n<p>Now I have similar problem but now my model class is generated  so I cant do override toString but I would like to display only one field(University) in spinner. So what should I do in activity?</p>\n"}, {"tags": ["android", "inheritance", "kotlin", "android-recyclerview", "abstract"], "answers": [{"tags": [], "owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "is_accepted": true, "score": 1, "last_activity_date": 1554843119, "last_edit_date": 1554843119, "creation_date": 1554842666, "answer_id": 55601066, "question_id": 55600793, "link": "https://stackoverflow.com/questions/55600793/abstract-recycler-fragment-in-kotlin/55601066#55601066", "title": "Abstract recycler fragment in Kotlin", "body": "<p>Define your generic types in the abstract class, and provide them in the concrete implementation :</p>\n\n<pre><code>class PeopleAdapter(context: Context?) : RecyclerView.Adapter&lt;PeopleAdapter.PersonViewHolder&gt;() {\n\n        inner class PersonViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n            // ...\n        }\n\n        // ...\n }\n\nabstract class RecyclerFragment&lt;VH : RecyclerView.ViewHolder, out T :  RecyclerView.Adapter&lt;VH&gt;&gt; : Fragment() {\n\n    protected abstract fun createAdapter(context: Context?): T\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.recycler_view, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        val adapter = createAdapter(context)\n        recycler_view.adapter = adapter\n\n        // ...\n    }\n}\n\nclass PeopleFragment : RecyclerFragment&lt;PeopleAdapter.PersonViewHolder, PeopleAdapter&gt;() {\n\n    override fun createAdapter(context: Context?): PeopleAdapter {\n        return PeopleAdapter(context)\n    }\n}\n</code></pre>\n\n<p>The closest you could get currently is an unchecked cast :</p>\n\n<p><code>return PeopleAdapter(context) as RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;</code></p>\n"}], "owner": {"reputation": 11256, "user_id": 1015595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3SRWR.jpg?s=128&g=1", "display_name": "Big McLargeHuge", "link": "https://stackoverflow.com/users/1015595/big-mclargehuge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 55601066, "answer_count": 1, "score": 0, "last_activity_date": 1554843119, "creation_date": 1554841488, "question_id": 55600793, "link": "https://stackoverflow.com/questions/55600793/abstract-recycler-fragment-in-kotlin", "title": "Abstract recycler fragment in Kotlin", "body": "<p>I'm trying to create an abstract fragment class that sets up a recycler view. This is the relevant part of my adapter:</p>\n\n<pre><code>class PeopleAdapter(context: Context?) : RecyclerView.Adapter&lt;PeopleAdapter.PersonViewHolder&gt;() {\n\n    inner class PersonViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        // ...\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>This is the abstract fragment:</p>\n\n<pre><code>abstract class RecyclerFragment : Fragment() {\n\n    protected abstract fun createAdapter(context: Context?): RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.recycler_view, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        val adapter = createAdapter(context)\n        recycler_view.adapter = adapter\n\n        // ...\n    }\n}\n</code></pre>\n\n<p>This is how I'd like to use it:</p>\n\n<pre><code>class PeopleFragment : RecyclerFragment() {\n\n    override fun createAdapter(context: Context?): RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\n        return PeopleAdapter(context)\n    }\n}\n</code></pre>\n\n<p>Android Studio throws an error on <code>return PeopleAdapter(context)</code>:</p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is PeopleAdapter but\n  RecyclerView.Adapter was expected</p>\n</blockquote>\n\n<p>I don't understand why it's a problem. <code>PersonAdapter</code> extends <code>RecyclerView.Adapter</code>, and <code>PersonViewHolder</code> extends <code>RecyclerView.ViewHolder</code>, so isn't it implied that <code>PersonAdapter</code> extends <code>RecyclerView.Adapater&lt;RecyclerView.ViewHolder&gt;</code>?</p>\n\n<p>I tried changing the <code>createAdapter</code> method as follows:</p>\n\n<pre><code>protected abstract fun &lt;T : RecyclerView.ViewHolder?&gt; createAdapter(context: Context?): RecyclerView.Adapter&lt;T&gt;\n</code></pre>\n\n<p>I changed the implementation also:</p>\n\n<pre><code>override fun &lt;T : RecyclerView.ViewHolder?&gt; createAdapter(context: Context?): RecyclerView.Adapter&lt;T&gt; {\n    return PeopleAdapter(context)\n}\n</code></pre>\n\n<p>This time, the error is:</p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is PeopleAdapter but\n  RecyclerView.Adapter was expected</p>\n</blockquote>\n\n<p>Again, I'm expecting the types to line up but not sure what I'm doing wrong.</p>\n"}, {"tags": ["java", "hibernate", "kotlin"], "comments": [{"owner": {"reputation": 3600, "user_id": 3841161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf3ec13097b93112cf97da8cf4e06a9?s=128&d=identicon&r=PG&f=1", "display_name": "coladict", "link": "https://stackoverflow.com/users/3841161/coladict"}, "edited": false, "score": 2, "creation_date": 1554834202, "post_id": 55598437, "comment_id": 97894347, "body": "Your <code>UserType</code> contribution should work without change until 6.0 when the entire type system will be revamped, and almost none of the old APIs will remain. Its deprication marking is merely a warning for the future. If it stopped working between 5.2 and 5.3, then you should file a regression bug."}], "owner": {"reputation": 2129, "user_id": 2769597, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/42e57ebb9f8ec65fbd37f15971f2c354?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Bil", "link": "https://stackoverflow.com/users/2769597/micha%c5%82-bil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1554831866, "creation_date": 1554831866, "question_id": 55598437, "link": "https://stackoverflow.com/questions/55598437/how-to-contribute-type-with-key-in-hibernate-5-3", "title": "How to contribute type with key in hibernate 5.3", "body": "<p>In my application I want to register name for a custom type while declaring a custom dialect. I don't want to use @TypeDef annotation because I want to have different type mapped for tests loaded on startup than in concrete app. Prior to Hibernate 5.3 I would do something like </p>\n\n<pre><code>class TestCustomH2Dialect : PostgreSQL94Dialect() {\n    init {\n        this.registerColumnType(Types.JAVA_OBJECT, \"LONGVARCHAR\")\n    }\n\n    override fun contributeTypes(typeContributions: TypeContributions, serviceRegistry: ServiceRegistry) {\n        super.contributeTypes(typeContributions, serviceRegistry)\n        typeContributions.contributeType(\n                MyTestType(),\n                MyClass::class.java.canonicalName,\n                \"MyTestType\"\n        )\n    }\n\n} \n</code></pre>\n\n<p>And then this declaration works</p>\n\n<pre><code>@Type(type = \"MyTestType\")\n@Column(name = \"test_type\", nullable = false)\nvar testType: TestType,\n</code></pre>\n\n<p>In Hibernate 5.3 this contributeType method is deprecated and due to documentation one should use version with only BasicType as parameter. Problem is when I'm trying to use it my alias for type is not being recognized unless I put @TypeDef or write a full class path to @Type annotation. Is there some alternative?</p>\n"}, {"tags": ["kotlin", "apache-camel", "spring-camel"], "answers": [{"comments": [{"owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 0, "creation_date": 1554910111, "post_id": 55606665, "comment_id": 97925915, "body": "Thanks but I don&#39;t think this will work for me because I believe your strategy would lose the properties on the original non-aggregated exchanges, which are required by the metrics library that I&#39;m using (micrometer)"}, {"owner": {"reputation": 5166, "user_id": 8035582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KCMN0.png?s=128&g=1", "display_name": "burki", "link": "https://stackoverflow.com/users/8035582/burki"}, "reply_to_user": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 0, "creation_date": 1555056214, "post_id": 55606665, "comment_id": 97983309, "body": "I extended my comment, unfortunately what you want seems to be not possible"}, {"owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 1, "creation_date": 1555079428, "post_id": 55606665, "comment_id": 97996538, "body": "yep agreed, it doesn&#39;t appear to be natively supported. I implemented a custom solution (below) that splits to a <i>nearly</i> identical state"}], "tags": [], "owner": {"reputation": 5166, "user_id": 8035582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KCMN0.png?s=128&g=1", "display_name": "burki", "link": "https://stackoverflow.com/users/8035582/burki"}, "is_accepted": true, "score": 1, "last_activity_date": 1555056174, "last_edit_date": 1555056174, "creation_date": 1554880142, "answer_id": 55606665, "question_id": 55598135, "link": "https://stackoverflow.com/questions/55598135/how-can-i-split-a-groupedexchangeaggregationstrategy-aggregate-exchange-into-the/55606665#55606665", "title": "How can I split a GroupedExchangeAggregationStrategy aggregate exchange into the original exchanges?", "body": "<p>Yeah, the <a href=\"https://camel.apache.org/maven/camel-2.15.0/camel-core/apidocs/org/apache/camel/processor/aggregate/GroupedExchangeAggregationStrategy.html\" rel=\"nofollow noreferrer\"><code>GroupedExchangeAggregationStrategy</code></a> does nothing else than create a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html\" rel=\"nofollow noreferrer\"><code>java.util.List</code></a> of all <a href=\"https://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Exchange.html\" rel=\"nofollow noreferrer\">Exchanges</a>. The <a href=\"http://camel.apache.org/splitter.html\" rel=\"nofollow noreferrer\">Splitter EIP</a> on the other hand splits by default a List into the elements and puts the element into the message body. Therefore <strong>you end up with an Exchange that contains an Exchange</strong> in its body. </p>\n\n<p>What you need is an AggregationStrategy that <strong>collects all body Objects</strong> in a List instead of all Exchanges.</p>\n\n<p>You could try to use <strong>Camels <a href=\"https://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/util/toolbox/FlexibleAggregationStrategy.html\" rel=\"nofollow noreferrer\"><code>FlexibleAggregationStrategy</code></a> that is configurable through a fluent API</strong>.</p>\n\n<p>new FlexibleAggregationStrategy()\n                .storeInBody()\n                .accumulateInCollection(ArrayList.class)\n                .pick(new SimpleExpression(\"${body}\")); </p>\n\n<p>This should create an AggregationStrategy that extracts the body of every message (you can perhaps omit the pick method since body extraction is the pick default), collects them in a List and stores the aggregation in the message body. </p>\n\n<p>To split this aggregate again, a simple <code>split(body())</code> should be enough. </p>\n\n<h3>EDIT due to comment</h3>\n\n<p>Yes, you are right, a <strong>side effect of my solution</strong> is that you lose properties and headers of the original messages because it only aggregates the message bodies. </p>\n\n<p>What you want to do, is splitting the List of Exchanges back into the originals. i.e. the <strong>Splitter must not create new Exchanges, but use the already present ones</strong> and throw away the aggregated wrapper Exchange. </p>\n\n<p>As far as I can see in the <a href=\"https://github.com/apache/camel/blob/b9a3117f19dd19abd2ea8b789c42c3e86fe4c488/core/camel-core/src/main/java/org/apache/camel/processor/Splitter.java\" rel=\"nofollow noreferrer\">source code of the Splitter</a>, this is <strong>currently not possible</strong>: </p>\n\n<pre><code>Exchange newExchange = ExchangeHelper.createCorrelatedCopy(copy, false);\n...\nif (part instanceof Message) {\n    newExchange.setIn((Message) part);\n} else {\n    Message in = newExchange.getIn();\n    in.setBody(part);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "is_accepted": false, "score": 0, "last_activity_date": 1555080136, "creation_date": 1555080136, "answer_id": 55654153, "question_id": 55598135, "link": "https://stackoverflow.com/questions/55598135/how-can-i-split-a-groupedexchangeaggregationstrategy-aggregate-exchange-into-the/55654153#55654153", "title": "How can I split a GroupedExchangeAggregationStrategy aggregate exchange into the original exchanges?", "body": "<p>Per the accepted answer, it doesn't appear to be natively supported.</p>\n\n<p>This custom processor will <em>unwrap</em> a split exchange (i.e. copying the nested exchange <code>Message</code> and properties to the root exchange). The unwrapped exchange will be <em>nearly</em> identical to the original -- it will retain all non-conflicting properties from the root exchange (e.g. <code>Splitter</code>-related properties like split index, etc.)</p>\n\n<pre><code>class ExchangeUnwrapper : Processor {\n\n    override fun process(exchange: Exchange) {\n        val wrappedExchange = exchange.`in`.body as Exchange\n        ExchangeHelper.copyResultsPreservePattern(exchange, wrappedExchange)\n    }\n}\n\n// Route.kt\n\nfrom(...)\n.aggregate(...)\n.process { /* do things with aggregate */ }\n.split(exchangeProperty(Exchange.GROUPED_EXCHANGE))\n  .process(ExchangeUnwrapper())\n  .process { /* do something with the original exchange */ }\n.end()\n</code></pre>\n"}], "owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 55606665, "answer_count": 2, "score": 0, "last_activity_date": 1555080136, "creation_date": 1554830520, "last_edit_date": 1554992004, "question_id": 55598135, "link": "https://stackoverflow.com/questions/55598135/how-can-i-split-a-groupedexchangeaggregationstrategy-aggregate-exchange-into-the", "title": "How can I split a GroupedExchangeAggregationStrategy aggregate exchange into the original exchanges?", "body": "<p>After aggregating exchanges using a <code>GroupedExchangeAggregationStrategy</code> I need to split them back apart (to emit individual processing time metrics) into the original exchanges. </p>\n\n<p>I tried splitting with the following but the resulting split exchange wraps the original exchange and puts it in the <code>Message</code> body.</p>\n\n<p>Is it possible to split a <code>GroupedExchangeAggregationStrategy</code> aggregate exchange into the original exchanges without the wrapper exchange? I need to use the original exchange properties and would like to do so with a SpEL expression.</p>\n\n<pre><code>.aggregate(constant(true), myGroupedExchangeAggregationStrategy)\n    .completionInterval(1000)\n    .completeAllOnStop()\n    .process { /* do stuff */ }\n.split(exchangeProperty(Exchange.GROUPED_EXCHANGE))\n    .to(/* micrometer timer metric using SpEL expression */)\n    // ^- the resulting split exchange is wrapped in another exchange\n</code></pre>\n\n<p>In the event that this isn't currently supported, I'm trying to figure out the best way to implement this behavior on my own without creating a custom <code>Splitter</code> processor for this single feature. I was hoping to somehow override the <code>SplitterIterable</code> that does the wrapping but it doesn't appear to be possible.</p>\n"}, {"tags": ["android", "android-fragments", "android-activity", "kotlin", "android-toolbar"], "comments": [{"owner": {"reputation": 1414, "user_id": 6280156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w5NgB.jpg?s=128&g=1", "display_name": "Venky", "link": "https://stackoverflow.com/users/6280156/venky"}, "edited": false, "score": 1, "creation_date": 1554831872, "post_id": 55597664, "comment_id": 97893268, "body": "Please add XML file"}, {"owner": {"reputation": 988, "user_id": 9652613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c1e9c1119d86cd24714add8d598ef?s=128&d=identicon&r=PG&f=1", "display_name": "Rakhi Dhavale", "link": "https://stackoverflow.com/users/9652613/rakhi-dhavale"}, "edited": false, "score": 0, "creation_date": 1554837114, "post_id": 55597664, "comment_id": 97895707, "body": "@CesarJoelGurrola Check my answer , I&#39;ve also given an example on how the sequence of layout should be, along with how to update the title within a fragment."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5230973, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9RmI-YI_tP0/AAAAAAAAAAI/AAAAAAAAGIs/tb_bCrTRZws/photo.jpg?sz=128", "display_name": "Cesar Joel Gurrola", "link": "https://stackoverflow.com/users/5230973/cesar-joel-gurrola"}, "edited": false, "score": 0, "creation_date": 1554912767, "post_id": 55599655, "comment_id": 97927414, "body": "didn&#39;t work I  tried  (activity as? AppCompatActivity)?.setSupportActionBar(findViewById(toolbar&zwnj;&#8203;)), any comments? Greets"}, {"owner": {"reputation": 988, "user_id": 9652613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c1e9c1119d86cd24714add8d598ef?s=128&d=identicon&r=PG&f=1", "display_name": "Rakhi Dhavale", "link": "https://stackoverflow.com/users/9652613/rakhi-dhavale"}, "reply_to_user": {"reputation": 11, "user_id": 5230973, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9RmI-YI_tP0/AAAAAAAAAAI/AAAAAAAAGIs/tb_bCrTRZws/photo.jpg?sz=128", "display_name": "Cesar Joel Gurrola", "link": "https://stackoverflow.com/users/5230973/cesar-joel-gurrola"}, "edited": false, "score": 0, "creation_date": 1554924662, "post_id": 55599655, "comment_id": 97933094, "body": "May I know why you&#39;re setting up the toolbar again within your fragment ? Set the toolbar only inside your MainActivity, which adds/replaces the fragment. Let the fragment just update the title , instead of setting up toolbar, this will prevent showing two Toolbars one above the other"}, {"owner": {"reputation": 11, "user_id": 5230973, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9RmI-YI_tP0/AAAAAAAAAAI/AAAAAAAAGIs/tb_bCrTRZws/photo.jpg?sz=128", "display_name": "Cesar Joel Gurrola", "link": "https://stackoverflow.com/users/5230973/cesar-joel-gurrola"}, "edited": false, "score": 0, "creation_date": 1554928368, "post_id": 55599655, "comment_id": 97934732, "body": "it&#39;s because i need to change it to a (backToolbar) instead the menu one,  I need to: -  in Main Activity -&gt; MenuToolbar -  in Fragment1 -&gt; BackToolbar any idea how can I achieve this?"}], "tags": [], "owner": {"reputation": 988, "user_id": 9652613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c1e9c1119d86cd24714add8d598ef?s=128&d=identicon&r=PG&f=1", "display_name": "Rakhi Dhavale", "link": "https://stackoverflow.com/users/9652613/rakhi-dhavale"}, "is_accepted": false, "score": 0, "last_activity_date": 1554836796, "creation_date": 1554836796, "answer_id": 55599655, "question_id": 55597664, "link": "https://stackoverflow.com/questions/55597664/how-to-change-the-toolbar-when-i-change-from-an-activity-to-a-fragment/55599655#55599655", "title": "How to change the toolbar when I change from an activity to a fragment", "body": "<p>Inside your Activity</p>\n\n<pre><code>setSupportActionBar(yourToolbar)\nsupportActionBar?.setDisplayHomeAsUpEnabled(true)\nsupportActionBar?.setDisplayShowHomeEnabled(true)\n</code></pre>\n\n<p>In Your Fragment</p>\n\n<pre><code>(activity as? AppCompatActivity)?.supportActionBar?.title = \"Your Title\"\n</code></pre>\n\n<p>Your Activity layout should probably follow the sequence in the below example</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\nandroid:id=\"@+id/main_content\"\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n&lt;!-- AppBarLayout is a wrapper for a Toolbar --&gt;\n&lt;!-- Note that AppBarLayout expects to be the first child nested within a CoordinatorLayout --&gt;\n&lt;android.support.design.widget.AppBarLayout\n    android:id=\"@+id/appBar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:theme=\"@style/ThemeOverlay.AppCompat.ActionBar\"&gt;\n\n    &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        app:layout_scrollFlags=\"scroll|enterAlways\" /&gt;\n&lt;/android.support.design.widget.AppBarLayout&gt;\n\n\n&lt;!-- FrameLayout can be used to insert fragments to display the content of the screen --&gt;\n\n&lt;FrameLayout\n    android:id=\"@+id/content\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    /&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5230973, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9RmI-YI_tP0/AAAAAAAAAAI/AAAAAAAAGIs/tb_bCrTRZws/photo.jpg?sz=128", "display_name": "Cesar Joel Gurrola", "link": "https://stackoverflow.com/users/5230973/cesar-joel-gurrola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 612, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554912600, "creation_date": 1554828585, "last_edit_date": 1554912600, "question_id": 55597664, "link": "https://stackoverflow.com/questions/55597664/how-to-change-the-toolbar-when-i-change-from-an-activity-to-a-fragment", "title": "How to change the toolbar when I change from an activity to a fragment", "body": "<p>I have an Activity, a Toolbar and several fragments, how can I change the toolbar passed to a fragment from MainActivity</p>\n\n<p>i've tried calling the toolbar from fragment1.xml but it show two Toolbars one above the other</p>\n\n<p>This is where I called the fragment</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>        R.id.menu_acercade -&gt; {\n                    binding.navegacionInferior.selectedItemId = item.itemId\n                    cerrarDrawer()\n                    false\n                }\n        R.id.menu_acercade -&gt; {\n                            intercalarIconosMenu(false)\n                            intercalarPagers(true)\n                            binding.navegacionInferior.menu.getItem(2).isCheckable = true  //binding.navegacionInferior.menu.getItem(2).isCheckable = true\n                            binding.viewpagerSecciones.setCurrentItem(0, true) //antes 0\n                            true\n                        }\n</code></pre>\n\n<p>Here is the XML of the fragment in which I want to change the ActionBar, but whenever I add the layou tag it add another Actionbar example</p>\n\n<p><a href=\"https://i.stack.imgur.com/kIiur.jpg\" rel=\"nofollow noreferrer\">two ActionBars</a></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"&gt;\n        &lt;!--&lt;include layout=\"@layout/toolbar_atras\" /&gt;--&gt;\n        &lt;LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"542dp\"\n            android:orientation=\"vertical\"&gt;\n            &lt;ImageView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:layout_marginTop=\"24dp\"\n                android:src=\"@drawable/about_logo\" /&gt;\n            &lt;android.support.v7.widget.AppCompatTextView\n                style=\"@style/Titulo.Principal\"\n                android:layout_marginBottom=\"24dp\"\n                android:text=\"@string/menu_opcion_acercade\" /&gt;\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"36dp\"\n                android:layout_marginRight=\"36dp\"\n                android:layout_marginBottom=\"16dp\"\n                android:text=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\"\n                android:textColor=\"@color/colorTexto\" /&gt;\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"36dp\"\n                android:layout_marginRight=\"36dp\"\n                android:text=\"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\n                android:textColor=\"@color/colorTexto\" /&gt;\n        &lt;/LinearLayout&gt;\n\n\n        &lt;android.support.design.widget.BottomNavigationView\n            android:id=\"@+id/navegacionInferior\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"0dp\"\n            android:layout_marginBottom=\"0dp\"\n            android:background=\"@color/colorBlanco\"\n            android:paddingEnd=\"0dp\"\n            android:paddingBottom=\"0dp\"\n            app:elevation=\"16dp\"\n            app:itemBackground=\"@drawable/fondo_navegacioninferior\"\n            app:itemIconTint=\"@color/colorPrimario\"\n            app:itemTextColor=\"@color/colorPrimario\"\n            tools:menu=\"@menu/menu_inferior\" /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "webview", "scroll", "horizontal-scrolling"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1554831000, "post_id": 55597575, "comment_id": 97892895, "body": "I really wouldn&#39;t.  This is not a normal way that people use mobile devices.  Your users are going to feel either frustrated or confused (if they can use it at all).  Most people wouldn&#39;t think on a touch device that they have to actually use the scroll bar."}, {"owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1554848427, "post_id": 55597575, "comment_id": 97900030, "body": "I&#39;ve seen it in another app and is very intuitive. The problem here is the conflict that occurs with the horizontal scrolls of the graphics, it&#39;s almost impossible to use it, so this solution seems plausible to use. Thanks for your comment @GabeSechan"}], "owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1554828819, "creation_date": 1554828306, "last_edit_date": 1554828819, "question_id": 55597575, "link": "https://stackoverflow.com/questions/55597575/is-it-possible-to-only-allow-scroll-when-the-finger-is-in-the-scroll-thumb", "title": "Is it possible to only allow scroll when the finger is in the scroll thumb?", "body": "<p>I got the following activity:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mw7fd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mw7fd.jpg\" alt=\"enter image description here\"></a>\nWhat I want to do here is just allow the user scrolls in the view (in this case is a <code>webview</code>, but it's not important for this problem) if he touches the scroll thumb (the big grey block), because I have multiple graphics with horizontal scroll that get in conflict with the vertical. Any solution for this or there is a simple way to do it? Thank you in advance.</p>\n"}, {"tags": ["android", "kotlin", "dialog-preference"], "owner": {"reputation": 726, "user_id": 5329293, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2553037df0ac753036033a8a37846fc?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Makov", "link": "https://stackoverflow.com/users/5329293/anton-makov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1555114871, "creation_date": 1554828237, "question_id": 55597562, "link": "https://stackoverflow.com/questions/55597562/implementing-onsetinitialvalue-with-null-pointer-exception-in-dialogpreference", "title": "Implementing onSetInitialValue with null pointer exception in DialogPreference", "body": "<p>I want to implement a TimePreference using DialogPreference, I found a good tutorial to do that <a href=\"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec\" rel=\"nofollow noreferrer\">here</a>\nafter implementing the TimePreference I noticed the onSetInitialValue(bool,Object) was deprecated and\u00a0I implemented instead onSetInitialValue(Object) </p>\n\n<p>When I try to implement onSetInitialValue(object) I'm getting a null pointer exception because defaultValue is null,\nAlthough everything is working properly with the deprecated function</p>\n\n<pre><code>    fun setTime(time: Int) {\n\n\u00a0 \u00a0 \u00a0 \u00a0 mTime = time\n\n\u00a0 \u00a0 \u00a0 \u00a0 // Save to SharedPreference\n\n\u00a0 \u00a0 \u00a0 \u00a0 persistInt(time)\n\n}\n\n\n\u00a0//old version - works \u00a0 \u00a0 \u00a0 \n\noverride fun onSetInitialValue(restorePersistedValue: Boolean, defaultValue: Any?) {\n\n\u00a0 \u00a0 \u00a0 \u00a0 setTime(\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if (restorePersistedValue)\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 getPersistedInt(mTime)\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 else\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 defaultValue as Int\n\n\u00a0 \u00a0 \u00a0 \u00a0 )\n\n\u00a0 \u00a0 }\n\n//New function doesn't work\n\n    override fun onSetInitialValue(defaultValue: Any?) {\n\n\u00a0 \u00a0 \u00a0 \u00a0 setTime(\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if (mTime!=0)\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 getPersistedInt(mTime)\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 else\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 defaultValue as Int\n\n\u00a0 \u00a0 \u00a0 \u00a0 )\n\n\u00a0 \u00a0 }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 4106055, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100000504416040/picture?type=large", "display_name": "Javy", "link": "https://stackoverflow.com/users/4106055/javy"}, "edited": false, "score": 0, "creation_date": 1554824075, "post_id": 55596242, "comment_id": 97889431, "body": "thanks but the activity I want to launch is in app1 and when I type it in <code>intent.setComponent</code> it does not come up. Am I missing  a step?"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 371, "user_id": 4106055, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100000504416040/picture?type=large", "display_name": "Javy", "link": "https://stackoverflow.com/users/4106055/javy"}, "edited": false, "score": 1, "creation_date": 1554824651, "post_id": 55596242, "comment_id": 97889758, "body": "@AdamNewman <code>app1</code> is a module of <code>app</code>. <code>app1</code> is inside <code>app</code>. You can access <code>app1</code>&#39;s classes from <code>app</code>, but can&#39;t <code>app</code>&#39;s classes from <code>app1</code>. So you can&#39;t start  <code>MainActivity</code> that inside <code>app</code> module from <code>app1</code> using <code>Intent(this, MainActivity::class.java)</code>. To solve this issue you need use my approach where you enter package name and class name manually. Hint should not come out."}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554824883, "last_edit_date": 1554824883, "creation_date": 1554823388, "answer_id": 55596242, "question_id": 55596158, "link": "https://stackoverflow.com/questions/55596158/call-another-module-on-a-onclicklistener-button-click/55596242#55596242", "title": "call another module on a onCLickListener button click", "body": "<p>You need to use another way to create your <code>Intent</code>. I should use <code>setComponent</code> method.</p>\n\n<pre><code>val intent = Intent()\n// ComponentName(\"The package name of the activity that you wish to launch\",\"Its fully qualified class name\"))\nintent.setComponent(ComponentName(\"com.example.mainscreen\", \"com.example.mainscreen.MainActivity\"))\nstartActivity(intent)\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 4106055, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100000504416040/picture?type=large", "display_name": "Javy", "link": "https://stackoverflow.com/users/4106055/javy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 55596242, "answer_count": 1, "score": 1, "last_activity_date": 1554824883, "creation_date": 1554823148, "last_edit_date": 1554823608, "question_id": 55596158, "link": "https://stackoverflow.com/questions/55596158/call-another-module-on-a-onclicklistener-button-click", "title": "call another module on a onCLickListener button click", "body": "<p>I want to call another module within my original module. Below I have my two modules: app and app1:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dJRMS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dJRMS.png\" alt=\"enter image description here\"></a></p>\n\n<p>below is my MainActivity for the module app:</p>\n\n<pre><code>package com.example.mainscreen\n\nclass MainActivity : AppCompatActivity() {\n\n    lateinit var button: Button\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n       val b = findViewById&lt;View&gt;(R.id.button2) as Button\n        b.setOnClickListener { startActivity(Intent(this@MainActivity, Pop::class.java)) }\n\n\n\n\n        button = findViewById&lt;View&gt;(R.id.button) as Button\n        button.setOnClickListener {\n            finish()\n            System.exit(0)\n        }}}\n</code></pre>\n\n<p>How would I use the OnClickListener for the button from my module app to call the MainActivity file from app2? I am not entirely sure how to approach this</p>\n"}, {"tags": ["android", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1554822100, "post_id": 55595772, "comment_id": 97888225, "body": "Can you post full xml please?"}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1554822751, "post_id": 55595772, "comment_id": 97888647, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41609252/android-data-binding-error119-29-identifiers-must-have-user-defined-types\">Android Data binding - Error:(119, 29) Identifiers must have user defined types from the XML file. main_radio_subscribe is missing it</a>"}], "answers": [{"comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1554822809, "post_id": 55595855, "comment_id": 97888692, "body": "the <code>import</code> indeed directly addresses the error message."}, {"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1554822854, "post_id": 55595855, "comment_id": 97888724, "body": "@MartinZeitler Yep, exactly."}], "tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": false, "score": 3, "last_activity_date": 1554822498, "last_edit_date": 1554822498, "creation_date": 1554822195, "answer_id": 55595855, "question_id": 55595772, "link": "https://stackoverflow.com/questions/55595772/androidvisibility-not-working-with-visibile-or-gone-options/55595855#55595855", "title": "android:visibility Not working with visibile or gone options", "body": "<p>You should use <code>View</code> as follows to use the constants: </p>\n\n<pre><code>android:visibility=\"@{viewModel.interfaceEnable ? View.VISIBLE : View.GONE}\"\n</code></pre>\n\n<p>For more information check the <a href=\"https://developer.android.com/reference/android/transition/Visibility\" rel=\"nofollow noreferrer\">Visibility documentation</a> that you can use <a href=\"https://developer.android.com/reference/android/view/View.html#GONE\" rel=\"nofollow noreferrer\"><code>View.GONE</code></a>, <a href=\"https://developer.android.com/reference/android/view/View.html#INVISIBLE\" rel=\"nofollow noreferrer\"><code>View.INVISIBLE</code></a> and <a href=\"https://developer.android.com/reference/android/view/View.html#VISIBLE\" rel=\"nofollow noreferrer\"><code>View.VISIBLE</code></a></p>\n\n<p>Also make sure you use the correct import type for this as follows</p>\n\n<pre><code>&lt;data&gt;\n    &lt;import type=\"android.view.View\" /&gt;\n    &lt;variable\n        name=\"anyName\"\n        type=\"com.example.AnyName\"/&gt;\n&lt;/data&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 1, "last_activity_date": 1554822209, "creation_date": 1554822209, "answer_id": 55595861, "question_id": 55595772, "link": "https://stackoverflow.com/questions/55595772/androidvisibility-not-working-with-visibile-or-gone-options/55595861#55595861", "title": "android:visibility Not working with visibile or gone options", "body": "<p>visible and gone are still constants in View (<code>View.VISIBLE</code> and <code>View.GONE</code>) and that statement should reflect it </p>\n\n<pre><code>android:visibility=\"@{viewModel.interfaceEnable ? View.VISIBLE : View.GONE}\"\n</code></pre>\n\n<p>alternatively you cold use a simple binding adapter for it. EG</p>\n\n<pre><code> @BindingAdapter(\"toVisibility\")\n fun View.toVisibility(visible: Boolean) {\n    visibility = if (visible) { View.VISIBLE } else { View.GONE }\n }\n</code></pre>\n\n<p>and in your xml use </p>\n\n<pre><code>toVisibility=\"@{viewModel.interfaceEnable}\"\n</code></pre>\n"}], "owner": {"reputation": 8943, "user_id": 456850, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cb15af790f2b2df4dd38f1cc989f99a2?s=128&d=identicon&r=PG", "display_name": "Devin Dixon", "link": "https://stackoverflow.com/users/456850/devin-dixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55595861, "answer_count": 2, "score": 0, "last_activity_date": 1554822498, "creation_date": 1554821940, "question_id": 55595772, "link": "https://stackoverflow.com/questions/55595772/androidvisibility-not-working-with-visibile-or-gone-options", "title": "android:visibility Not working with visibile or gone options", "body": "<p>I am trying to show and hide an element based on a boolean. In my xml I have the following:</p>\n\n<pre><code>android:visibility=\"@{viewModel.interfaceEnable ? visible : gone}\"\n</code></pre>\n\n<p><code>viewModel.interfaceEnable</code> is an ObservableField as as such: <code>var interfaceEnable = ObservableField&lt;Boolean&gt;()</code>. And <code>visible</code> and <code>gone</code> are values for the <code>android:visibility</code> attribute. But I am getting this error:</p>\n\n<pre><code>****/ data binding error ****msg:Identifiers must have user defined types from the XML file. visibile is missing it\n</code></pre>\n\n<p>Why is this attribute not settable this method?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 2, "creation_date": 1554820560, "post_id": 55595346, "comment_id": 97887218, "body": "Please <a href=\"https://stackoverflow.com/posts/55595346/edit\">edit</a> your question to provide the complete <a href=\"https://stackoverflow.com/a/23353174\">stack trace from the crash</a>."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1554821548, "post_id": 55595346, "comment_id": 97887800, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this\">Unfortunately MyApp has stopped. How can I solve this?</a>"}, {"owner": {"reputation": 320, "user_id": 3472838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b546f56f9ad87319fece57b3d4162478?s=128&d=identicon&r=PG&f=1", "display_name": "MajorShepard", "link": "https://stackoverflow.com/users/3472838/majorshepard"}, "edited": false, "score": 0, "creation_date": 1554821757, "post_id": 55595346, "comment_id": 97887983, "body": "I would go for some missing permission. Your app is probably throwing a SecurityException ?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1554822262, "post_id": 55595346, "comment_id": 97888324, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\" title=\"what causes a java lang arrayindexoutofboundsexception and how do i prevent it\">stackoverflow.com/questions/5554734/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9364229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a943c95a329ee802cd5e6e2efff58525?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard E", "link": "https://stackoverflow.com/users/9364229/gerard-e"}, "edited": false, "score": 0, "creation_date": 1554821831, "post_id": 55595656, "comment_id": 97888031, "body": "Don&#39;t know why downvoting, I can&#39;t post a comment so I&#39;m posting what I think can help in this answer, of course once I can see the error output I will edit this answer"}, {"owner": {"reputation": 27, "user_id": 9364229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a943c95a329ee802cd5e6e2efff58525?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard E", "link": "https://stackoverflow.com/users/9364229/gerard-e"}, "reply_to_user": {"reputation": 41, "user_id": 10353762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffb0efd7817c52b0a23a79a7316157d?s=128&d=identicon&r=PG&f=1", "display_name": "Grim", "link": "https://stackoverflow.com/users/10353762/grim"}, "edited": false, "score": 0, "creation_date": 1554823069, "post_id": 55595656, "comment_id": 97888862, "body": "the problem is with the index of the arrayList  java.lang.IndexOutOfBoundsException: Invalid index 2, size is 2  you are accessing outside your array in some point of your code"}], "tags": [], "owner": {"reputation": 27, "user_id": 9364229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a943c95a329ee802cd5e6e2efff58525?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard E", "link": "https://stackoverflow.com/users/9364229/gerard-e"}, "is_accepted": false, "score": -1, "last_activity_date": 1554821520, "creation_date": 1554821520, "answer_id": 55595656, "question_id": 55595346, "link": "https://stackoverflow.com/questions/55595346/app-crashes-on-button-click-calling-service/55595656#55595656", "title": "App crashes on button click calling service", "body": "<p>Without the stack trace requested by Mike in the comments the only thing I can think about is that u forgot to link your button with the ID of the xml button</p>\n\n<pre><code>findViewById(R.id.button);\n</code></pre>\n\n<p>something like this</p>\n"}, {"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 0, "last_activity_date": 1554826668, "creation_date": 1554826668, "answer_id": 55597176, "question_id": 55595346, "link": "https://stackoverflow.com/questions/55595346/app-crashes-on-button-click-calling-service/55597176#55597176", "title": "App crashes on button click calling service", "body": "<p>The issue is most likely caused by this line: <code>for(i in 0..cc)</code>. The reason is that the operator <code>..</code> creates an closed range, where <code>cc</code> is included, so if <code>cc</code> is equal to the size of your list/array then you'll get the <code>IndexOutOfBoundsException</code>. To fix that you can simply change your line to <code>for (i in 0 until cc)</code>, since the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/until.html\" rel=\"nofollow noreferrer\"><code>until</code></a> function creates a range that doesn't include the end element. </p>\n"}], "owner": {"reputation": 41, "user_id": 10353762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffb0efd7817c52b0a23a79a7316157d?s=128&d=identicon&r=PG&f=1", "display_name": "Grim", "link": "https://stackoverflow.com/users/10353762/grim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 55597176, "answer_count": 2, "score": -1, "last_activity_date": 1554882455, "creation_date": 1554820533, "last_edit_date": 1554882455, "question_id": 55595346, "link": "https://stackoverflow.com/questions/55595346/app-crashes-on-button-click-calling-service", "title": "App crashes on button click calling service", "body": "<p>I'm making a batch renamer and when i click on rename button after selecting files it should call a background service to rename it while showing notification but the app crashes upon click.\nIm testing on android 5.0\ni tried putting a toast message at the start but it crashed before that as well\nim thinking it crashes before executing buttons click event</p>\n\n<h2>Stack Trace from crash</h2>\n\n<pre><code>04-09 20:19:00.077 834-1027/? E/ConnectivityService: RemoteException caught trying to send a callback msg for NetworkRequest [ id=143, legacyType=-1, [ Capabilities: INTERNET&amp;NOT_RESTRICTED&amp;TRUSTED] ]\n04-09 20:25:47.388 834-1024/? E/WifiStateMachine: setSuspendOptimizationsNative: 4 false -want true stack:setSuspendOptimizationsNative - access$16400 - processMessage - processMsg\n04-09 20:25:53.743 18486-18506/com.pride.msgshareapp E/[DRVB][EXT][UTIL]: disp_only_chk: DRVB CHECK0 PROCESS DONE ! STATUS (0x2000)\n04-09 20:25:53.748 18486-18506/com.pride.msgshareapp E/GED: Failed to get GED Log Buf, err(0)\n04-09 20:26:59.738 18486-18486/com.pride.msgshareapp E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.pride.msgshareapp, PID: 18486\n    java.lang.IndexOutOfBoundsException: Invalid index 2, size is 2\n        at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:260)\n        at java.util.ArrayList.get(ArrayList.java:313)\n        at com.pride.msgshareapp.RenameOption$onCreate$5.onClick(RenameOption.kt:80)\n        at android.view.View.performClick(View.java:4848)\n        at android.view.View$PerformClick.run(View.java:20262)\n        at android.os.Handler.handleCallback(Handler.java:815)\n        at android.os.Handler.dispatchMessage(Handler.java:104)\n        at android.os.Looper.loop(Looper.java:194)\n        at android.app.ActivityThread.main(ActivityThread.java:5643)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:372)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:960)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)\n</code></pre>\n\n<hr>\n\n<pre><code>renamebtn.setOnClickListener {\n        val paramtxt = paratxt.text.toString().trim()\n        var reptxt = paramtxt\n        for(i in 0..cc)\n        {\n            reptxt = reptxt.replace(\"%title\",seltitle[i],true)\n            reptxt = reptxt.replace(\"%album\",selalbum[i],true)\n            reptxt = reptxt.replace(\"%artist\",selartist[i],true)\n            resultt.add(reptxt)\n        }\n        val inte = Intent(this,RenameService::class.java)\n        inte.putExtra(\"path\",selpath.toTypedArray())\n        inte.putExtra(\"newname\",resultt.toTypedArray())\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n        {\n            startForegroundService(inte)\n        }\n        else{\n            startService(inte)\n        }\n    }\n</code></pre>\n\n<hr>\n\n<h2>Service Code</h2>\n\n<pre><code>class RenameService : Service() {\n\noverride fun onBind(intent: Intent): IBinder? {\n    return null\n}\n\noverride fun onStartCommand(intent: Intent, flags: Int, startId: Int): Int {\n    val bundle: Bundle?=intent.extras\n    val pathss = bundle!!.getStringArray(\"path\")\n    val namess = bundle!!.getStringArray(\"newname\")\n    val resultt:MutableList&lt;String&gt; = mutableListOf()\n    val notifID = 595\n    val maxProgress = pathss.size\n    var currentProgress = 0\n\n    val inten = Intent(this, HobbiesActivity::class.java)\n    inten.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n\n    val pendingIntent : PendingIntent = PendingIntent.getActivity(this,0,inten,0)\n\n    val builderr = NotificationCompat.Builder(this, \"Renamer\")\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .setContentTitle(\"Renaming \" + pathss.size.toString() + \" files\")\n            .setContentText(\"Renaming....\")\n            .setStyle(NotificationCompat.BigTextStyle()\n                    .bigText(\"Renaming...\"))\n            .setPriority(NotificationCompat.PRIORITY_HIGH)\n            .setVisibility(1)\n\n    if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        val name = \"ChannelMain\"\n        val descText = \"Renaming Progress\"\n        val imp = NotificationManager.IMPORTANCE_HIGH\n        val channel = NotificationChannel(\"Renamer\", name, imp).apply {\n            description = descText\n            enableVibration(true)\n        }\n        val notificationManager: NotificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n        notificationManager.createNotificationChannel(channel)\n    }\n    Toast.makeText(this,\"Renaming\",Toast.LENGTH_SHORT).show()\n    startForeground(notifID,builderr.build())\n\n    with(NotificationManagerCompat.from(this)){\n        builderr.setProgress(maxProgress, currentProgress, false)\n        notify(notifID, builderr.build())\n\n        for(i in 0..pathss.size)\n        {\n            if(renameTarget(pathss[i],namess[i])!=0)\n            {\n                resultt.add(\"Failed\")\n            }\n            else\n            {\n                resultt.add(\"Success\")\n            }\n            currentProgress = i\n            builderr.setContentText(\"Renaming \" + i.toString() + \" of \" + pathss.size.toString())\n            builderr.setProgress(maxProgress,currentProgress,false)\n            notify(notifID,builderr.build())\n        }\n\n        builderr.setContentText(\"Rename Complete\")\n                .setProgress(0,0,false)\n                .setContentIntent(pendingIntent)\n                .setAutoCancel(true)\n        notify(notifID,builderr.build())\n    }\n    return Service.START_REDELIVER_INTENT\n}\n\noverride fun onDestroy() {\n    super.onDestroy()\n    Toast.makeText(this,\"Renaming completed\",Toast.LENGTH_SHORT).show()\n    stopForeground(true)\n}\n\noverride fun onTaskRemoved(rootIntent: Intent?) {\n    super.onTaskRemoved(rootIntent)\n    stopSelf()\n}\n}\n\nfun renameTarget(filePath:String, newName:String):Int{\nval src= File(filePath)\nvar ext=\"\"\nval dest: File\nif(src.isFile)\n{\n    ext=filePath.substring(filePath.lastIndexOf(\".\"),filePath.length)\n}\nif(newName.isEmpty())\n{\n    return -1\n}\nval temp=filePath.substring(0,filePath.lastIndexOf(\"/\"))\ndest= File(\"$temp/$newName$ext\")\nreturn if(src.renameTo(dest)) {\n    0\n} else {\n    1\n}\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit"], "comments": [{"owner": {"reputation": 897, "user_id": 2855810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0mS1.png?s=128&g=1", "display_name": "Ergin Ersoy", "link": "https://stackoverflow.com/users/2855810/ergin-ersoy"}, "edited": false, "score": 0, "creation_date": 1554889634, "post_id": 55594741, "comment_id": 97913503, "body": "look at android paging library it has awesome features <a href=\"https://developer.android.com/topic/libraries/architecture/paging\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/paging</a>"}, {"owner": {"reputation": 217, "user_id": 7775597, "user_type": "registered", "profile_image": "https://graph.facebook.com/160397301148643/picture?type=large", "display_name": "Vijay Ram", "link": "https://stackoverflow.com/users/7775597/vijay-ram"}, "edited": false, "score": 0, "creation_date": 1588988512, "post_id": 55594741, "comment_id": 109121172, "body": "<a href=\"https://androidride.com/android-recyclerview-load-more-on-scroll-example/\" rel=\"nofollow noreferrer\">3 RecyclerView load more Examples - Retrofit too..</a>"}], "answers": [{"tags": [], "owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "is_accepted": false, "score": 0, "last_activity_date": 1554818736, "creation_date": 1554818736, "answer_id": 55594773, "question_id": 55594741, "link": "https://stackoverflow.com/questions/55594741/how-to-properly-load-more-items-in-a-recyclerview-using-retrofit-kotlin/55594773#55594773", "title": "How to properly load more items in a recyclerView, using Retrofit ? (kotlin)", "body": "<p>You can use the Paging library:\n<a href=\"https://developer.android.com/topic/libraries/architecture/paging\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/paging</a></p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11334968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918d90d8de44c8f278953d14aa7fc824?s=128&d=identicon&r=PG&f=1", "display_name": "Endyrmion", "link": "https://stackoverflow.com/users/11334968/endyrmion"}, "edited": false, "score": 1, "creation_date": 1554820640, "post_id": 55595301, "comment_id": 97887264, "body": "I think that will do the trick, I knew it was something like that but since i&#39;m really new to these I just cannot figure how to set it, It won&#39;t happen again :D I&#39;ll tell you if it works"}, {"owner": {"reputation": 15, "user_id": 11334968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918d90d8de44c8f278953d14aa7fc824?s=128&d=identicon&r=PG&f=1", "display_name": "Endyrmion", "link": "https://stackoverflow.com/users/11334968/endyrmion"}, "edited": false, "score": 0, "creation_date": 1554822095, "post_id": 55595301, "comment_id": 97888216, "body": "I&#39;m getting a bunch of errors, I&#39;ve tried to get rid of them but, I think you&#39;ll be more efficient than me x) !  When I try to add these variables directly inside the fragment I get Unsolved Reference error :  ```     private var moviesAdapter = MovieAdapter(movies = result.results)     private var moviesList.adapter = moviesAdapter ``` And in the callback, addResult is also an unsolved reference  For the adapter.notifyDataSetChanged() I don&#39;t know exactly where to put it ...   Thank you kindly !"}, {"owner": {"reputation": 6555, "user_id": 994939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fc3e78a90fde1b61cfba1020b128f3d?s=128&d=identicon&r=PG", "display_name": "veritas1", "link": "https://stackoverflow.com/users/994939/veritas1"}, "reply_to_user": {"reputation": 15, "user_id": 11334968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918d90d8de44c8f278953d14aa7fc824?s=128&d=identicon&r=PG&f=1", "display_name": "Endyrmion", "link": "https://stackoverflow.com/users/11334968/endyrmion"}, "edited": false, "score": 0, "creation_date": 1554823622, "post_id": 55595301, "comment_id": 97889161, "body": "For MovieAdapter, init with empty constructor as you don&#39;t have reference to results yet, <code>private var moviesAdapter = MovieAdapter()</code>. <code>moviesList</code> must reference the recyclerview first e.g using findViewById, it must be in your code somewhere, you didn&#39;t post that part. <code>addResults</code> is a method that you need to define...."}], "tags": [], "owner": {"reputation": 6555, "user_id": 994939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fc3e78a90fde1b61cfba1020b128f3d?s=128&d=identicon&r=PG", "display_name": "veritas1", "link": "https://stackoverflow.com/users/994939/veritas1"}, "is_accepted": false, "score": 0, "last_activity_date": 1554823521, "last_edit_date": 1554823521, "creation_date": 1554820377, "answer_id": 55595301, "question_id": 55594741, "link": "https://stackoverflow.com/questions/55594741/how-to-properly-load-more-items-in-a-recyclerview-using-retrofit-kotlin/55595301#55595301", "title": "How to properly load more items in a recyclerView, using Retrofit ? (kotlin)", "body": "<p>The issue is here:</p>\n\n<pre><code>.subscribe ({ result -&gt;\n   moviesAdapter = MovieAdapter(movies = result.results)\n   moviesList.adapter = moviesAdapter\n}\n</code></pre>\n\n<p>You are creating a new adapter for each api response. You want to set your adapter once. Then you can pass results to the same adapter on each response, and call <code>notifyDatasetChanged()</code></p>\n\n<p>Something like:</p>\n\n<pre><code>// Initial adapter set\nmoviesAdapter = MovieAdapter()\nmoviesList.adapter = moviesAdapter\n\n// Then on callback\n.subscribe ({ result -&gt;\n   moviesList.addResults(result.results)\n}\n</code></pre>\n\n<p>Then inside the adapter, add the new results to your list, and call <code>adapter.notifyDataSetChanged()</code></p>\n\n<p><a href=\"https://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged()\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged()</a></p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 11334968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918d90d8de44c8f278953d14aa7fc824?s=128&d=identicon&r=PG&f=1", "display_name": "Endyrmion", "link": "https://stackoverflow.com/users/11334968/endyrmion"}, "is_accepted": true, "score": 0, "last_activity_date": 1554889509, "creation_date": 1554889509, "answer_id": 55609499, "question_id": 55594741, "link": "https://stackoverflow.com/questions/55594741/how-to-properly-load-more-items-in-a-recyclerview-using-retrofit-kotlin/55609499#55609499", "title": "How to properly load more items in a recyclerView, using Retrofit ? (kotlin)", "body": "<p>@veritas1 was right\nbut to properly correct my mistake I had to do so :</p>\n\n<p>All of this is in my Fragment. </p>\n\n<p>First declaring the adapter, and the array that will contain my informations:</p>\n\n<pre><code>    private var moviesAdapter: MovieAdapter? = null\n    private var movies = ArrayList&lt;Movie&gt;()\n</code></pre>\n\n<p>and in the callback, take the previous request and then call notifyDataSetChanged()</p>\n\n<pre><code>    movies.addAll(result.results)\n    moviesAdapter!!.notifyDataSetChanged()\n</code></pre>\n\n<p>Since I'm using recyclerView I had to properly set my Adapter</p>\n\n<pre><code>    private fun initRecyclerView(){\n        moviesList.apply {layoutManager = layoutMng}\n        moviesList.adapter = moviesAdapter\n        moviesList.addOnScrollListener(\n            InfiniteScrollListener({getPopularMovies(page)},{nextPage()}, layoutMng))\n    }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11334968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918d90d8de44c8f278953d14aa7fc824?s=128&d=identicon&r=PG&f=1", "display_name": "Endyrmion", "link": "https://stackoverflow.com/users/11334968/endyrmion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 55609499, "answer_count": 3, "score": 1, "last_activity_date": 1554889509, "creation_date": 1554818608, "last_edit_date": 1554821593, "question_id": 55594741, "link": "https://stackoverflow.com/questions/55594741/how-to-properly-load-more-items-in-a-recyclerview-using-retrofit-kotlin", "title": "How to properly load more items in a recyclerView, using Retrofit ? (kotlin)", "body": "<p>I'm really new to Android Dev, and I'm actually working on a personnal project in Kotlin, using retrofit to do the API calls.</p>\n\n<p>I've implemented <code>infiniteScroll</code> on the app, but the problem here is that when I hit the bottom of the page, my item gets replaced by the new items. </p>\n\n<p>I don't want that behavior, I would prefer that every items just stack one another without loosing the previous items.</p>\n\n<p>here in my fragment, is the function that I call to repopulate my view:</p>\n\n<pre><code>    private fun getPopularMovies(page: Int){\n        val repository = MoviesRepositoryProvider.provideMovieRepository()\n        repository.getPopularMovies(page)\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribeOn(Schedulers.io())\n            .subscribe ({ result -&gt;\n                moviesAdapter = MovieAdapter(movies = result.results)\n                moviesList.adapter = moviesAdapter\n            }, { error -&gt;\n                error.printStackTrace()\n            })\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "is_accepted": true, "score": 3, "last_activity_date": 1554819264, "creation_date": 1554819264, "answer_id": 55594928, "question_id": 55594707, "link": "https://stackoverflow.com/questions/55594707/how-to-rewrite-groovy-gradle-task-to-kotlin-gradle-scripts/55594928#55594928", "title": "How to rewrite Groovy gradle task to Kotlin gradle scripts", "body": "<p>I believe the following should do the trick:</p>\n\n<pre><code>tasks {\n\n    // will need to import KotlinCompile or use the fully qualified name\n    withType&lt;KotlinCompile&gt; {\n        kotlinOptions.jvmTarget = \"1.8\"\n    }\n\n    register&lt;Exec&gt;(\"clearAppCache\") {\n        commandLine = listOf(\"adb\", \"shell\", \"pm\", \"clear\", \"io.hrushka.pocketplay\")\n    }\n\n}\n</code></pre>\n\n<p>Some links:</p>\n\n<ul>\n<li><a href=\"https://guides.gradle.org/writing-gradle-tasks/\" rel=\"nofollow noreferrer\">Writing Custom Gradle Tasks</a><sup>1</sup></li>\n<li><a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"nofollow noreferrer\">Gradle Kotlin DSL Primer</a></li>\n</ul>\n\n<hr>\n\n<p><sup>1. Switch the example code blocks from Groovy to Kotlin.</sup></p>\n"}], "owner": {"reputation": 1176, "user_id": 6108532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-ER-WChilI0c/AAAAAAAAAAI/AAAAAAAACh0/miIzszqnL-c/photo.jpg?sz=128", "display_name": "Tom Wayne", "link": "https://stackoverflow.com/users/6108532/tom-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 55594928, "answer_count": 1, "score": 0, "last_activity_date": 1554974230, "creation_date": 1554818512, "last_edit_date": 1554974230, "question_id": 55594707, "link": "https://stackoverflow.com/questions/55594707/how-to-rewrite-groovy-gradle-task-to-kotlin-gradle-scripts", "title": "How to rewrite Groovy gradle task to Kotlin gradle scripts", "body": "<p>I have these two gradle tasks written in groovy and I can't find a proper way how to rewrite them to Kotlin:</p>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n\n\ntask clearAppCache(type: Exec) {\n    def clearDataCommand = ['adb', 'shell', 'pm', 'clear', 'io.hruska.pocketplay']\n    commandLine clearDataCommand\n}\n</code></pre>\n\n<p>I am especially not sure about how to replace the \"commandLine\" method and how to add a \"type:Exec\" argument to task.</p>\n"}, {"tags": ["firebase", "kotlin", "google-cloud-firestore", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1554819143, "post_id": 55594393, "comment_id": 97886361, "body": "Please add your database structure as a screenshot, the content of your <code>myModel</code> class and the code that you are using to get data."}, {"owner": {"reputation": 812, "user_id": 8572174, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x3-QYhk4xzE/AAAAAAAAAAI/AAAAAAAAAV0/9t5osXfRmAo/photo.jpg?sz=128", "display_name": "glisu", "link": "https://stackoverflow.com/users/8572174/glisu"}, "edited": false, "score": 0, "creation_date": 1554820070, "post_id": 55594393, "comment_id": 97886926, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52284861/firebase-firestore-toobject-fails-on-boolean-property-mapping\">Firebase Firestore toObject fails on Boolean property mapping</a>"}], "owner": {"reputation": 13, "user_id": 9460827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ff4db09d74abecbe13dbbd9c19a0d2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil BHadouria", "link": "https://stackoverflow.com/users/9460827/nikhil-bhadouria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554817532, "creation_date": 1554817532, "question_id": 55594393, "link": "https://stackoverflow.com/questions/55594393/firestore-document-doesnt-copy-single-value-to-my-pojo-class-using-document-too", "title": "Firestore document doesnt copy single value to my pojo class using (document.toObject(myPojo::class.java))", "body": "<p>Doument recieved from firestore contains a key as \"isAccepted\" which is of string datatype , but firestore function ( document.toObject(myModel::class.java)) does not copy this key to my pojo class , where as there are more string values which are being copied only the keys having \"is\" in the starting doesnt copy. In java it was working properly all values were copied.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1554818094, "post_id": 55594358, "comment_id": 97885705, "body": "The duplicate shows an XOR approach, which looks like <code>currentPlayer = currentPlayer xor 1</code> in Kotlin. Not particularly shorter than the subtraction approach, however."}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 2, "last_activity_date": 1554817809, "creation_date": 1554817809, "answer_id": 55594475, "question_id": 55594358, "link": "https://stackoverflow.com/questions/55594358/efficient-way-to-toggle-between-numbers-in-kotlin/55594475#55594475", "title": "Efficient way to toggle between numbers in Kotlin?", "body": "<p>This is not Kotlin specific, it's just simple:</p>\n\n<pre><code>currentPlayer = 1 - currentPlayer\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10404070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cefabe9b3cbc0c5fd4f94ebfbbd270c?s=128&d=identicon&r=PG", "display_name": "Fester", "link": "https://stackoverflow.com/users/10404070/fester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1554817848, "accepted_answer_id": 55594475, "answer_count": 1, "score": 1, "last_activity_date": 1554817809, "creation_date": 1554817408, "question_id": 55594358, "link": "https://stackoverflow.com/questions/55594358/efficient-way-to-toggle-between-numbers-in-kotlin", "closed_reason": "Duplicate", "title": "Efficient way to toggle between numbers in Kotlin?", "body": "<p>I'm making a Tic-Tac-Toe application for Android, and I'm looking to toggle between 2 players (0 - 1) when taking turns. 0 will be for the first player; 1 for the second.</p>\n\n<p>The easiest way to achieve this is by doing:</p>\n\n<pre><code>if (currentPlayer == 1) {\n   currentPlayer = 0\n} else {\n   currentPlayer = 1\n}\n</code></pre>\n\n<p>But are there any more efficient ways to go about it with Kotlin? Thanks in advance</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5947, "user_id": 1276636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/5pipn.jpg?s=128&g=1", "display_name": "Sufian", "link": "https://stackoverflow.com/users/1276636/sufian"}, "edited": false, "score": 0, "creation_date": 1554815601, "post_id": 55593484, "comment_id": 97883964, "body": "Please share the full crash log/stacktrace."}], "answers": [{"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1554815079, "creation_date": 1554815079, "answer_id": 55593625, "question_id": 55593484, "link": "https://stackoverflow.com/questions/55593484/java-util-concurrentmodificationexception-when-try-to-remove-item-from-list-in-a/55593625#55593625", "title": "java.util.ConcurrentModificationException when try to remove item from list in android", "body": "<p>Use list <strong>filter function</strong> like this for your concept</p>\n\n<pre><code> fun main()\n {\n  val myList : MutableList&lt;ColorInfo&gt; = mutableListOf(\n    ColorInfo(color = \"red\",colorcode = \"1111\"),\n    ColorInfo(color = \"green\",colorcode = \"1123\"),\n    ColorInfo(color = \"yellow\",colorcode = \"1134\")\n)\n\n\nval filteredList = myList.filter { !it.color.equals(\"red\") }\nprintln(filteredList.toString())\n //out put is [Event(color=green, colorcode=1123), Event(color=yellow, colorcode=1134)]\n}\n\ndata class ColorInfo(var color : String,var colorcode : String)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1202, "user_id": 6383050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NHp1c0Sxru8/AAAAAAAAAAI/AAAAAAAACkY/SIs23eVmRKI/photo.jpg?sz=128", "display_name": "Nikolay", "link": "https://stackoverflow.com/users/6383050/nikolay"}, "is_accepted": false, "score": 0, "last_activity_date": 1554817642, "creation_date": 1554817642, "answer_id": 55594428, "question_id": 55593484, "link": "https://stackoverflow.com/questions/55593484/java-util-concurrentmodificationexception-when-try-to-remove-item-from-list-in-a/55594428#55594428", "title": "java.util.ConcurrentModificationException when try to remove item from list in android", "body": "<p>It happens because you're trying mutate you list inside <code>map()</code> callback while it's iterating around list.\nTo avoid it you should call removeAll()/removeIf() first:</p>\n\n<pre><code>class Variant(val colors: List&lt;Int&gt;)\n\nfun main() {\n    val badColor = 2\n    val variants = mutableListOf(\n            Variant(listOf(1, 2, 3)),\n            Variant(listOf(2, 4, 6)),\n            Variant(listOf(3, 5, 7)))\n    // try removeAll()\n    variants.removeAll {\n        it in variants.filter {variant -&gt;\n            badColor in variant.colors\n        }\n    }\n    //  or removeIf()\n    variants.removeIf {\n        badColor in it.colors\n    }\n\n    print(variants)\n}\n</code></pre>\n"}], "owner": {"reputation": 3007, "user_id": 705544, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01d0590a2787663c5eac4283092cbc12?s=128&d=identicon&r=PG", "display_name": "edi233", "link": "https://stackoverflow.com/users/705544/edi233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554817642, "creation_date": 1554814636, "last_edit_date": 1554815550, "question_id": 55593484, "link": "https://stackoverflow.com/questions/55593484/java-util-concurrentmodificationexception-when-try-to-remove-item-from-list-in-a", "title": "java.util.ConcurrentModificationException when try to remove item from list in android", "body": "<p>I have list of variants where every variant has list of colors. I want to check for every variant if has color from filter and if no, I want to remove that variant from list of variants. When I tried to remove I get error: java.util.ConcurrentModificationException\nThis is what I tried:</p>\n\n<pre><code>list.map { variant -&gt;\n    variant.variantColors.map { color -&gt;\n        if (color != filterModel.color) {\n            list.removeIf { color != filterModel.color }\n        }\n    }\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>list.map { variant -&gt;\n    variant.variantColors.map { color -&gt;\n        if (color != filterModel.color) {\n            list.removeAll { color != filterModel.color }\n        }\n    }\n}\n</code></pre>\n\n<p>and: </p>\n\n<pre><code>val iterator = list.iterator()\nwhile (iterator.hasNext()) {\n    val item = iterator.next()\n    val iteratorSec = item.variantColors.iterator()\n    while (iteratorSec.hasNext()) {\n        val itema = iteratorSec.next()\n        if (itema != filterModel.color)\n            iterator.remove()\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "gradle", "intellij-idea", "kotlin", "libgdx"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1554835751, "post_id": 55593359, "comment_id": 97895089, "body": "Did you check <a href=\"https://stackoverflow.com/a/55012160/104891\">this answer</a>? Does it help?"}, {"owner": {"reputation": 373, "user_id": 7805116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EGvAv4zK0W8/AAAAAAAAAAI/AAAAAAAAE0c/TrOcQKdAqbY/photo.jpg?sz=128", "display_name": "Rolodophone", "link": "https://stackoverflow.com/users/7805116/rolodophone"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1554895383, "post_id": 55593359, "comment_id": 97916789, "body": "Somehow that evaded my radar. Thanks that fixed my problem."}], "owner": {"reputation": 373, "user_id": 7805116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EGvAv4zK0W8/AAAAAAAAAAI/AAAAAAAAE0c/TrOcQKdAqbY/photo.jpg?sz=128", "display_name": "Rolodophone", "link": "https://stackoverflow.com/users/7805116/rolodophone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "closed_date": 1554895414, "answer_count": 0, "score": 0, "last_activity_date": 1554814262, "creation_date": 1554814262, "question_id": 55593359, "link": "https://stackoverflow.com/questions/55593359/how-to-upgrade-gradle-wrapper-version-for-libgdx", "closed_reason": "Duplicate", "title": "How to upgrade gradle wrapper version for LibGDX", "body": "<p>I'm trying to generate a new LibGDX project for Kotlin for IntelliJ IDEA. I'm using Java 12. When I click generate it comes up with the error: <code>Could not determine Java version from '12'</code>. In the advanced settings I have \"IDEA\" and \"Use Kotlin\" ticked.</p>\n\n<p>Apparently this means you have to upgrade your Gradle wrapper version. I have tried opening the generated folder in IntelliJ and changing <code>distributionUrl</code> to the 5.3.1 Gradle version. But this fails with <code>Could not get unknown property 'classesDir' for main classes of type org.gradle.api.internal.tasks.DefaultSourceSetOutput.</code></p>\n\n<p>Gradle version:</p>\n\n<pre><code>------------------------------------------------------------\nGradle 5.3.1\n------------------------------------------------------------\n\nBuild time:   2019-03-28 09:09:23 UTC\nRevision:     f2fae6ba563cfb772c8bc35d31e43c59a5b620c3\n\nKotlin:       1.3.21\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          12 (Oracle Corporation 12+33)\nOS:           Windows 10 10.0 amd64\n</code></pre>\n\n<p>gradle-wrapper.properties:</p>\n\n<pre><code>#Fri Jun 09 23:06:52 EDT 2017\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-5.3.1-bin.zip\n</code></pre>\n\n<p>I've done some research but I don't understand what most of the answers are telling me to do. I'm completely unfamiliar with gradle.</p>\n\n<p>Am I not correctly upgrading the gradle wrapper version or is IntelliJ's gradle wrapper simply incompatible with java 12?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2", "dagger"], "comments": [{"owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "edited": false, "score": 1, "creation_date": 1554816410, "post_id": 55593294, "comment_id": 97884518, "body": "Can you post the errors you get?"}, {"owner": {"reputation": 2655, "user_id": 4649110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpll5.jpg?s=128&g=1", "display_name": "Basi", "link": "https://stackoverflow.com/users/4649110/basi"}, "edited": false, "score": 0, "creation_date": 1554816730, "post_id": 55593294, "comment_id": 97884766, "body": "please include stacktrace"}], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 4780451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7b6a0dce4e45621b4731d427335da3?s=128&d=identicon&r=PG", "display_name": "peterwhy", "link": "https://stackoverflow.com/users/4780451/peterwhy"}, "is_accepted": true, "score": 3, "last_activity_date": 1555373962, "creation_date": 1555373962, "answer_id": 55698885, "question_id": 55593294, "link": "https://stackoverflow.com/questions/55593294/android-dagger-injection-at-runtime/55698885#55698885", "title": "Android - Dagger injection at runtime", "body": "<p>You can't annotate something in runtime, <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.7.1\" rel=\"nofollow noreferrer\">the element value in Java annotation has to be a constant expression</a>.</p>\n\n<p>But this use case can be solved by map multibind.</p>\n\n<p>In your <code>Module</code>, in addition to just <code>@Bind</code> or <code>@Provide</code>, also annotate the abstract fun with <code>@IntoMap</code> and the map key (sorry for any error in my Kotlin)</p>\n\n<pre><code>@Binds\n@IntoMap\n@StringKey(\"p1\")\nabstract fun bindP1Class(p1: P1): PerformActionInterface\n\n@Binds\n@IntoMap\n@StringKey(\"p2\")\nabstract fun bindP2Class(p2: P2): PerformActionInterface\n</code></pre>\n\n<p>Then in your <code>PerformAction</code> class, declare a dependency of a map from <code>String</code> to <code>PerformActionInterface</code>, and do whatever with the map:</p>\n\n<pre><code>// map value type can be Lazy&lt;&gt; or Provider&lt;&gt; as needed\nclass PerformAction @Inject constructor(\n        val map: Map&lt;String, @JvmSuppressWildcards PerformActionInterface&gt;) {\n\n    fun perform(name: String) {\n        map.get(name)?.performAction()\n        // or do something if the get returns null\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 1, "accepted_answer_id": 55698885, "answer_count": 1, "score": 1, "last_activity_date": 1555373962, "creation_date": 1554814074, "last_edit_date": 1554819756, "question_id": 55593294, "link": "https://stackoverflow.com/questions/55593294/android-dagger-injection-at-runtime", "title": "Android - Dagger injection at runtime", "body": "<p>i need to inject the class at runtime using dagger. what my problem is am getting compile time error while injecting the class locally in method and also i was not able to inject at runtime without using constant for @Named</p>\n\n<p>Example</p>\n\n<pre><code>interface PerformActionInterface{\n      fun performAction()\n}\n\nclass P1 : PerformActionInterface{\n   override fun performAction(){\n   }\n}\n\nclass P2 : PerformActionInterface{\n   override fun performAction(){\n   }\n}\n\n\nclass PerformAction @Inject constructor(){\n\n      fun perform(name : String){\n\n        @Inject\n        @Named(name)\n        performActionInterface : PerformActionInterface\n\n        performActionInterface.performAction()\n    }\n}\n</code></pre>\n\n<p>were as in dagger implementation i will be doing like this</p>\n\n<pre><code> @Binds\n @Named(\"p1\")\n abstract bindP1Class(p1 : P1) :PerformActionInterface\n\n @Binds\n @Named(\"p2\")\n abstract bindP1Class(p2 : P2) :PerformActionInterface\n</code></pre>\n\n<p>Any help for how to inject this at runtime ?</p>\n"}, {"tags": ["android", "performance", "kotlin", "android-mapview"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1554815472, "post_id": 55592795, "comment_id": 97883904, "body": "refer <a href=\"https://stackoverflow.com/questions/26265526/what-makes-my-map-fragment-loading-slow\" title=\"what makes my map fragment loading slow\">stackoverflow.com/questions/26265526/&hellip;</a>"}, {"owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1554825889, "post_id": 55592795, "comment_id": 97890443, "body": "the answer to that question only works if your mapview is not displayed right after your app launches as the answer mentions: &#39;My mapFragment is not displayed right after the app launches! Otherwise this would not make sense.&#39;"}], "owner": {"reputation": 24, "user_id": 10857778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j2mudJAOTJg/AAAAAAAAAAI/AAAAAAAAFCk/kYMSgzRzUjk/photo.jpg?sz=128", "display_name": "Arno van Liere", "link": "https://stackoverflow.com/users/10857778/arno-van-liere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554827215, "creation_date": 1554812615, "last_edit_date": 1554827215, "question_id": 55592795, "link": "https://stackoverflow.com/questions/55592795/fragment-with-mapview-is-slow", "title": "Fragment with MapView is slow", "body": "<p>I'm making an app with one activity in which all actions regarding drawer etc. are handeld, and three fragments in which the main content is displayed. In the MainActivity a fragment with a map is placed inside a fragmentcontainer. But when I start the app, the screen is white for 2-3 seconds before the map is showed.</p>\n\n<p>I've tried with getMapAsync with an OnMapReadyCallback, which didn't work, and I've searched for other solutions, but couldn't find any that worked.</p>\n\n<p><b>MainActivity.kt</b></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.main_activity)\n    setSupportActionBar(toolbar)\n    supportActionBar?.title = getString(R.string.app_name)\n\n    val toggle = ActionBarDrawerToggle(\n        this, drawer_layout, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close\n    )\n    drawer_layout.addDrawerListener(toggle)\n    toggle.syncState()\n    nav_view.setNavigationItemSelectedListener(this)\n\n    supportFragmentManager.beginTransaction()\n        .replace(R.id.fragmentContainer, MapFragment())\n        .commit()\n\n    if (!checkDataConnection()) {\n        val dialogView = View.inflate(this, R.layout.dialog_no_data, null)\n        val dialogBuilder = AlertDialog.Builder(this)\n            .setView(dialogView)\n            .setCancelable(false)\n        val alertDialog = dialogBuilder.show()\n\n        dialogView.rescanDataConnection.setOnClickListener {\n            if (checkDataConnection()) {\n                alertDialog.dismiss()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><b>MapFragment.kt</b></p>\n\n<pre><code>class MapFragment : Fragment(), OnMapReadyCallback {\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        val view = inflater.inflate(R.layout.fragment_map, container, false)\n\n        val mapView = view.findViewById&lt;MapView&gt;(R.id.mapView)\n        mapView.onCreate(savedInstanceState)\n        mapView.getMapAsync(this)\n\n        try {\n            MapsInitializer.initialize(this.activity)\n        } catch (e: GooglePlayServicesNotAvailableException) {\n            e.printStackTrace()\n        }\n        return view\n    }\n\n    override fun onMapReady(p0: GoogleMap?) {\n        // Necessary function for loading map async\n    }\n}\n</code></pre>\n\n<p>So can anybody help me with improving the performance?</p>\n"}, {"tags": ["java", "spring", "kotlin"], "comments": [{"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 0, "creation_date": 1554815367, "post_id": 55592010, "comment_id": 97883845, "body": "Posting more code and any exceptions you get would be more helpful."}], "owner": {"reputation": 31, "user_id": 11040807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ae938841dae57cf9191ad31aa4e4a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/11040807/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554810295, "creation_date": 1554809985, "last_edit_date": 1554810295, "question_id": 55592010, "link": "https://stackoverflow.com/questions/55592010/container-of-bean-to-transparently", "title": "Container of Bean to transparently", "body": "<p>I've got a Kotlin wrapper data class whose purpose is to wrap arbitrary values with additional information about their state. For the purposes of this question, something like this will suffice:</p>\n\n<pre><code>data class Wrapper&lt;T&gt;(val content: T)\n</code></pre>\n\n<p>Unfortunately, sometimes (specifically, in javax validation constraint violation paths) Spring tries to access nested properties directly:</p>\n\n<pre><code>data class Name(val first: Wrapper&lt;String&gt;)\ndata class Person(val name: Wrapper&lt;Name&gt;)\n\nval foo = Person(Wrapper(Name(Wrapper(\"Steve\"))))\n</code></pre>\n\n<p>Obviously, for a value of type <code>foo</code>, the property path <code>name.first</code> is not defined, as it should be <code>name.content.first.content</code> instead. So if Spring receives, say, ConstraintViolation with a path of <code>name.first</code> (we wrote a validator to create paths for <code>Wrapper</code> this way), it tries to access that path on <code>foo</code>. <code>foo</code> does have <code>name</code> but that's a <code>Wrapper</code>, which only has <code>content</code>, and not <code>first</code>, so Spring throws an exception.</p>\n\n<p>Is there a way to tell Spring that all values of type <code>Wrapper</code> have the exact same fields that their <code>content</code> has? This kind of feels like AOP and Proxies, but I can't wrap my head around how to make <code>Wrapper</code> a Proxy, and if that's possible at all.</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1554811440, "post_id": 55591696, "comment_id": 97881363, "body": "Unfortunately it&#39;s not possible to help you without having more information. If this project is available for public download, please post a link to where you downloaded it."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "edited": false, "score": 0, "creation_date": 1554885320, "post_id": 55600509, "comment_id": 97910827, "body": "I admire your issue. And I removed conflicted kotlin version1.2.71 with your opinion. So I fitted kotlin conflicted warnning. But this was not real reason for my issue.  This was detected not to export gradle module. I fitted my errors with terminal command&quot; ./gradle build&quot;. Thanks a lot."}, {"owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "reply_to_user": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "edited": false, "score": 0, "creation_date": 1554886773, "post_id": 55600509, "comment_id": 97911680, "body": "ok, can you share how you imported the problematic module with not exists <code>map</code>?. or even share the whole gradle?"}], "tags": [], "owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "is_accepted": true, "score": 0, "last_activity_date": 1554840219, "creation_date": 1554840219, "answer_id": 55600509, "question_id": 55591696, "link": "https://stackoverflow.com/questions/55591696/i-can-not-fix-the-errors-in-spring-project-using-kotlin-please-show-me-reason-f/55600509#55600509", "title": "I can not fix the errors in Spring project using kotlin. Please show me reason for these errors", "body": "<p>About the errors photo you attached, it seems you have 2 kotlin versions installed (1.2.71 &amp; 1.3.10).\nI suggest to remove one of them (probably the old one) and try to build again.</p>\n\n<p>About the <code>map</code> module - I don't know what is this project - how you import it, which version it has, etc..</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "is_accepted": false, "score": 0, "last_activity_date": 1555686049, "creation_date": 1555686049, "answer_id": 55763819, "question_id": 55591696, "link": "https://stackoverflow.com/questions/55591696/i-can-not-fix-the-errors-in-spring-project-using-kotlin-please-show-me-reason-f/55763819#55763819", "title": "I can not fix the errors in Spring project using kotlin. Please show me reason for these errors", "body": "<p>Oh I forgot set environment value. It is solved when I run after set environment value as 'source shell/env.proto.sh'. Thanks a lot. But I can fix kotlin conflic error to remove ko</p>\n"}], "owner": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 55600509, "answer_count": 2, "score": 0, "last_activity_date": 1555686049, "creation_date": 1554808971, "last_edit_date": 1554810353, "question_id": 55591696, "link": "https://stackoverflow.com/questions/55591696/i-can-not-fix-the-errors-in-spring-project-using-kotlin-please-show-me-reason-f", "title": "I can not fix the errors in Spring project using kotlin. Please show me reason for these errors", "body": "<p>I am a basic developer with kotlin.\nI tried to download this project and build it in order to study more about kotlin.\nBut this project has some errors.\nThis is a Spring project using kotlin.\nNow it could not find and import some modules.\nSo it has not built and has these <a href=\"https://i.stack.imgur.com/BbcWN.png\" rel=\"nofollow noreferrer\">errors</a></p>\n\n<p>But I have one issue.\nThe <code>map</code>module does not exist in this project really.\nWhat is this situation and how can I build this successfully?\n<a href=\"https://i.stack.imgur.com/Qa5Qo.png\" rel=\"nofollow noreferrer\">module path</a></p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication", "firebaseui"], "comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1554816833, "post_id": 55591666, "comment_id": 97884841, "body": "The first code snippet and the link to the docs you show are for web developers, while the second code snippet is written in Kotlin. Are you using Kotlin? If so, the first snippet and docs are not relevant to you. The Firebase Android SDK automatically persists user information between app restarts. All you need to do it pick up the sign in state, as @Kasiopeous&#39;s answer shows."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11334402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c72d18a084c745cb0c2de3accd1b06?s=128&d=identicon&r=PG&f=1", "display_name": "Kasiopeous", "link": "https://stackoverflow.com/users/11334402/kasiopeous"}, "is_accepted": true, "score": 0, "last_activity_date": 1554812645, "creation_date": 1554812645, "answer_id": 55592806, "question_id": 55591666, "link": "https://stackoverflow.com/questions/55591666/implementing-state-persistence-in-kotlin/55592806#55592806", "title": "Implementing State Persistence in kotlin", "body": "<p>If I understand your question correctly you want to keep your user logged in the app and not require them to log in. If that is the case all you need to do is check whether </p>\n\n<pre><code>FirebaseAuth.getInstance().currentUser\n</code></pre>\n\n<p>returns null. If it returns null you can then initialize the FirebaseAuthUI in order to have them login. So the end product should be something like the following snippet:</p>\n\n<pre><code>val mUser = FirebaseAuth.getInstance().currentUser\nmUser?.let{\n//do your stuff here\n} ?: showSignInOptions()\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 10487799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eHAQ6weViyI/AAAAAAAAAAI/AAAAAAAAAn4/LbMT5NG3Syk/photo.jpg?sz=128", "display_name": "Emek Cohen", "link": "https://stackoverflow.com/users/10487799/emek-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 55592806, "answer_count": 1, "score": -1, "last_activity_date": 1554812645, "creation_date": 1554808873, "last_edit_date": 1554810999, "question_id": 55591666, "link": "https://stackoverflow.com/questions/55591666/implementing-state-persistence-in-kotlin", "title": "Implementing State Persistence in kotlin", "body": "<p>I 've tried to implement state persistence to my android app so users will stay signed-in, but I couldn't understand the docs so I ran here for help.</p>\n\n<p>Here's the snippet: </p>\n\n<pre><code>firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)\n  .then(function() {\n    // Existing and future Auth states are now persisted in the current\n    // session only. Closing the window would clear any existing state even\n    // if a user forgets to sign out.\n    // ...\n    // New sign-in will be persisted with session persistence.\n    return firebase.auth().signInWithEmailAndPassword(email, password);\n  })\n  .catch(function(error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n  });\n</code></pre>\n\n<p>I've tried many things but I don't quite get where they instance the <code>firebase</code> variable.</p>\n\n<p>In the <a href=\"https://firebase.google.com/docs/auth/web/auth-state-persistence\" rel=\"nofollow noreferrer\">Docs</a> there's this line:</p>\n\n<blockquote>\n  <p>This will change the type of persistence on the specified Auth\n  instance for the currently saved Auth session and apply this type of\n  persistence for future sign-in requests</p>\n</blockquote>\n\n<p>But I still couldn't quite get which Auth instance, I am using FirebaseAuth UI.</p>\n\n<p>Here is some of my code:</p>\n\n<pre><code>    private fun showSignInOptions() {\n        startActivityForResult(\n            AuthUI.getInstance()\n                .createSignInIntentBuilder()\n                .setAvailableProviders(providers)\n                .build(),\n            RC_SIGN_IN\n        )\n    }\n\n    // FirebaseUI Auth code.\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        if (requestCode == RC_SIGN_IN) {\n            val response = IdpResponse.fromResultIntent(data)\n\n            if (resultCode == Activity.RESULT_OK) {\n                // Successfully signed in\n                val user = FirebaseAuth.getInstance().currentUser\n\n                Log.d(\"AUTH\", \"Sign in SUCCESSFUL. $user\")\n                // ...\n            } else {\n                Log.d(\"AUTH\", \"Sign in failed.\")\n                // Sign in failed. If response is null the user canceled the\n                // sign-in flow using the back button. Otherwise check\n                // response.getError().getErrorCode() and handle the error.\n                // ...\n            }\n        }\n\n\n    }\n</code></pre>\n\n<p>I'm calling <code>showSignInOptions()</code> in <code>onCreate()</code>.</p>\n\n<p>Thanks in advance for the help :D</p>\n"}, {"tags": ["java", "spring", "kotlin", "javabeans", "aop"], "owner": {"reputation": 8728, "user_id": 11797, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/15f2ffaf40ab4f0b1e10f1be1043e3c8?s=128&d=identicon&r=PG", "display_name": "Aleksandar Dimitrov", "link": "https://stackoverflow.com/users/11797/aleksandar-dimitrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554809730, "creation_date": 1554808377, "last_edit_date": 1554809730, "question_id": 55591516, "link": "https://stackoverflow.com/questions/55591516/container-bean-to-transparently-proxy-get-set-to-container", "title": "Container Bean to transparently proxy get/set to container", "body": "<p>I've got a Kotlin wrapper data class whose purpose is to wrap arbitrary values with additional information about their state. For the purposes of this question, something like this will suffice:</p>\n\n<pre><code>data class Wrapper&lt;T&gt;(val content: T)\n</code></pre>\n\n<p>Unfortunately, sometimes (specifically, in javax validation constraint violation paths) Spring tries to access nested properties directly:</p>\n\n<pre><code>data class Name(val first: Wrapper&lt;String&gt;)\ndata class Person(val name: Wrapper&lt;Name&gt;)\n\nval foo = Person(Wrapper(Name(Wrapper(\"Steve\"))))\n</code></pre>\n\n<p>Obviously, for a value of type <code>foo</code>, the property path <code>name.first</code> is not defined, as it should be <code>name.content.first.content</code> instead. So if Spring receives, say, ConstraintViolation with a path of <code>name.first</code> (we wrote a validator to create paths for <code>Wrapper</code> this way), it tries to access that path on <code>foo</code>. <code>foo</code> does have <code>name</code> but that's a <code>Wrapper</code>, which only has <code>content</code>, and not <code>first</code>, so Spring throws an exception.</p>\n\n<p>Is there a way to tell Spring that all values of type <code>Wrapper</code> have the exact same fields that their <code>content</code> has? This kind of feels like AOP and Proxies, but I can't wrap my head around how to make <code>Wrapper</code> a Proxy, and if that's possible at all.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1554806576, "post_id": 55590776, "comment_id": 97878453, "body": "Why don&#39;t just pass device id to <code>ApiClient</code> constructor instead passing <code>Context</code>.."}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1554807235, "post_id": 55590776, "comment_id": 97878825, "body": "@ADM, thanks dear but how can i it? because i should pass this constructor in this code : <code>apiClient = ApiClient()</code>"}, {"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1554807412, "post_id": 55590776, "comment_id": 97878931, "body": "Create Constructor <code>class ApiClient(val deviceId:String)</code> And Use <code>deviceId</code> inside <code>ApiClient</code>."}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1554807592, "post_id": 55590776, "comment_id": 97879033, "body": "@ADM, yes my friend but not found deviceId! in write this code : <code>class ApiClient constructor(private val deviceUUID: String)</code> but in this code : <code>apiClient = ApiClient()</code> not found <b>deviceUUID</b> !!!  why not found ?!"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1554808063, "post_id": 55590776, "comment_id": 97879346, "body": "@ADM , do you have free time for help me? thanks"}], "answers": [{"tags": [], "owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "is_accepted": true, "score": 1, "last_activity_date": 1554808531, "creation_date": 1554808531, "answer_id": 55591570, "question_id": 55590776, "link": "https://stackoverflow.com/questions/55590776/how-to-use-context-in-kotlin-classes-on-android/55591570#55591570", "title": "How to use context in Kotlin classes on Android", "body": "<p>You need to modify <code>ApiClient</code> have a constructor and a parameter in <code>get()</code>. </p>\n\n<pre><code>class APiClient(var deviceId: String) {\ninit {\n    //Stuff goes here\n}\ncompanion object {\n    private var apiClient: APiClient? = null\n    fun getInstance(deviceId: String): APiClient =\n            apiClient ?: synchronized(this) {\n                apiClient ?: APiClient(deviceId).also {\n                    apiClient = it\n                }\n            }\n}\n}\n</code></pre>\n\n<p>PS, <code>deviceUUID</code> can be Global cause it will not change. A better approach will be just  let it be in Global Access like in Application class . From where you can directly use it . No need to pass it in constructor each time . </p>\n"}], "owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 55591570, "answer_count": 1, "score": 1, "last_activity_date": 1554809862, "creation_date": 1554806025, "last_edit_date": 1554809862, "question_id": 55590776, "link": "https://stackoverflow.com/questions/55590776/how-to-use-context-in-kotlin-classes-on-android", "title": "How to use context in Kotlin classes on Android", "body": "<p>In my application i have use <strong>Retrofit</strong> and <strong>okHttpClient</strong> for get some request to server.<br>\nIn this <strong>retrofit</strong> config i want send some data into <code>Header</code> to server.<br>\nThis data is <strong>device UUID</strong> and for get <strong>device UUID</strong> i write below code in one class (this class name is Extensions) : </p>\n\n<pre><code>@SuppressLint(\"HardwareIds\")\nfun Context.getDeviceUUID(): String {\n    return try {\n        Settings.Secure.getString(contentResolver, Settings.Secure.ANDROID_ID)\n    } catch (e: Exception) {\n        \"exception\"\n    }\n}\n</code></pre>\n\n<p>For get <strong>device UUID</strong> i should pass <code>context</code>.<br></p>\n\n<p>And i want send this <strong>device UUID</strong> into <strong>ApiClient</strong> class.<br>\n<strong>ApiClient class :</strong> </p>\n\n<pre><code>class ApiClient {\n\n    private val apiServices: ApiServices\n\n    init {\n        //Gson\n        val gson = GsonBuilder()\n            .setLenient()\n            .create()\n\n        //Http log\n        val loggingInterceptor = HttpLoggingInterceptor()\n        loggingInterceptor.level =\n            if (BuildConfig.DEBUG) HttpLoggingInterceptor.Level.BODY else HttpLoggingInterceptor.Level.NONE\n\n        //Http Builder\n        val clientBuilder = OkHttpClient.Builder()\n        clientBuilder.interceptors().add(loggingInterceptor)\n        clientBuilder.addInterceptor { chain -&gt;\n            val request = chain.request()\n            request.newBuilder().addHeader(\"uuid\", ).build()\n            chain.proceed(request)\n        }\n\n        //Http client\n        val client = clientBuilder\n            .readTimeout(NETWORK_CONNECTIONS_TIME, TimeUnit.SECONDS)\n            .writeTimeout(NETWORK_CONNECTIONS_TIME, TimeUnit.SECONDS)\n            .connectTimeout(NETWORK_CONNECTIONS_TIME, TimeUnit.SECONDS)\n            .retryOnConnectionFailure(true)\n            .build()\n\n        //Retrofit\n        val retrofit = Retrofit.Builder()\n            .baseUrl(BASE_URL)\n            .client(client)\n            .addConverterFactory(GsonConverterFactory.create(gson))\n            .addCallAdapterFactory(RxJava2CallAdapterFactory.createWithScheduler(Schedulers.io()))\n            .build()\n\n        //Init apiServices\n        apiServices = retrofit.create(ApiServices::class.java)\n    }\n\n    companion object {\n        private var apiClient: ApiClient? = null\n\n        val instance: ApiClient\n            get() {\n                if (apiClient == null) {\n                    apiClient = ApiClient()\n                }\n                return apiClient as ApiClient\n            }\n    }\n}\n</code></pre>\n\n<p>I should use <strong>getDeviceUUID</strong> in this code : <code>request.newBuilder().addHeader(\"uuid\", ).build()</code></p>\n\n<p>how can i pass <code>context</code> into <strong>ApiClient</strong> class ?</p>\n"}, {"tags": ["kotlin", "android-studio-3.0"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11219471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ae01688de08b591a89e62b34d9b014?s=128&d=identicon&r=PG&f=1", "display_name": "yoon0506", "link": "https://stackoverflow.com/users/11219471/yoon0506"}, "edited": false, "score": 0, "creation_date": 1554807863, "post_id": 55590464, "comment_id": 97879191, "body": "thank you v very much! i haven&#39;t think about that way!"}], "tags": [], "owner": {"reputation": 769, "user_id": 4874835, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429075117398697/picture?type=large", "display_name": "Shashank Kapsime", "link": "https://stackoverflow.com/users/4874835/shashank-kapsime"}, "is_accepted": true, "score": 1, "last_activity_date": 1554805105, "creation_date": 1554805105, "answer_id": 55590464, "question_id": 55590061, "link": "https://stackoverflow.com/questions/55590061/android-studio-request-permissions-error-kotlin/55590464#55590464", "title": "android studio request permissions error (kotlin)", "body": "<p>All the above mentioned permissions do not require runtime permission check and approval. These permissions are only to be mentioned in the Manifest file.</p>\n\n<p>That's why function <code>checkAndRequestPermissions()</code> is always returning true.</p>\n\n<p>See this link</p>\n\n<p><a href=\"https://developer.android.com/guide/topics/permissions/overview.html#normal-dangerous\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/permissions/overview.html#normal-dangerous</a></p>\n\n<p>Hope this helps. Happy Coding :)</p>\n"}, {"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1554805501, "last_edit_date": 1554805501, "creation_date": 1554805166, "answer_id": 55590484, "question_id": 55590061, "link": "https://stackoverflow.com/questions/55590061/android-studio-request-permissions-error-kotlin/55590484#55590484", "title": "android studio request permissions error (kotlin)", "body": "<p>Its seems all permission are already given.Its not problem in the code.</p>\n\n<p>Because these are \n<a href=\"https://developer.android.com/guide/topics/permissions/overview.html#normal-dangerous\" rel=\"nofollow noreferrer\">Normal permissions</a>  so no need to handle run time checker. </p>\n\n<p><a href=\"https://developer.android.com/guide/topics/permissions/overview.html#normal-dangerous\" rel=\"nofollow noreferrer\">dangerous permissions and permission groups</a> only required runtime permissions handlers.</p>\n"}], "owner": {"reputation": 33, "user_id": 11219471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ae01688de08b591a89e62b34d9b014?s=128&d=identicon&r=PG&f=1", "display_name": "yoon0506", "link": "https://stackoverflow.com/users/11219471/yoon0506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2232, "favorite_count": 0, "accepted_answer_id": 55590464, "answer_count": 2, "score": 0, "last_activity_date": 1554811456, "creation_date": 1554803901, "last_edit_date": 1554811456, "question_id": 55590061, "link": "https://stackoverflow.com/questions/55590061/android-studio-request-permissions-error-kotlin", "title": "android studio request permissions error (kotlin)", "body": "<p>i tried to set request 5 permissions check in my code</p>\n\n<p>Of course I added all five to the manifest.\nand i also tried to deleted the app and reinstalled it.</p>\n\n<p>but it doesnt ask permissions at all</p>\n\n<p>this is my root class</p>\n\n<pre><code> override fun onCreate(savedInstanceState: Bundle?) {\n\n    (...)\n\n       if (checkAndRequestPermissions()) {\n\n            Handler().postDelayed({\n\n                val intent = Intent(this, ActivityMain::class.java)\n                startActivity(intent)\n\n            }, SPLASH_TIME_OUT.toLong())\n        }\n</code></pre>\n\n<p>and checkAndRequestPermissions() method</p>\n\n<pre><code> fun checkAndRequestPermissions(): Boolean {\n\n        val internetP = ContextCompat.checkSelfPermission(this, Manifest.permission.INTERNET)\n        val networkP = ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_NETWORK_STATE)\n        val wifiP = ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_WIFI_STATE)\n        val changeWifiP = ContextCompat.checkSelfPermission(this, Manifest.permission.CHANGE_WIFI_STATE)\n        val notifiacationP = ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_NOTIFICATION_POLICY)\n\n\n        val listPermissionsNeeded = ArrayList&lt;String&gt;()\n\n        if (internetP != PackageManager.PERMISSION_GRANTED) {\n            listPermissionsNeeded.add(Manifest.permission.INTERNET)\n        }\n        if (networkP != PackageManager.PERMISSION_GRANTED) {\n            listPermissionsNeeded.add(Manifest.permission.ACCESS_NETWORK_STATE)\n        }\n        if (wifiP != PackageManager.PERMISSION_GRANTED) {\n            listPermissionsNeeded.add(Manifest.permission.ACCESS_WIFI_STATE)\n        }\n        if (changeWifiP != PackageManager.PERMISSION_GRANTED) {\n            listPermissionsNeeded.add(Manifest.permission.CHANGE_WIFI_STATE)\n        }\n        if (notifiacationP != PackageManager.PERMISSION_GRANTED) {\n            listPermissionsNeeded.add(Manifest.permission.ACCESS_NOTIFICATION_POLICY)\n        }\n        if (!listPermissionsNeeded.isEmpty()) {\n            ActivityCompat.requestPermissions(this, listPermissionsNeeded.toTypedArray(), REQUEST_ID_MULTIPLE_PERMISSIONS)\n            return false\n        }\n        return true\n    }\n\n</code></pre>\n\n<pre><code> if (checkAndRequestPermissions()) {\n</code></pre>\n\n<p>'checkAndRequstPermissions() ' value is always true</p>\n\n<p>I think there's a problem here.</p>\n\n<pre><code> if (!listPermissionsNeeded.isEmpty()) { \n</code></pre>\n\n<p>even if listPersmissionsNeeded value is '0' it keep returning true, never going inside</p>\n\n<p>I referred to this site -></p>\n\n<p><a href=\"https://demonuts.com/kotlin-runtime-permissions/\" rel=\"nofollow noreferrer\">https://demonuts.com/kotlin-runtime-permissions/</a></p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7005926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb02f9c0b6652561e0bde186ff1f8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7005926/charles"}, "edited": false, "score": 0, "creation_date": 1554801589, "post_id": 55589015, "comment_id": 97875426, "body": "Then to have a more specific question: why &quot;+3&quot; is considered a correct expression?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 67, "user_id": 7005926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb02f9c0b6652561e0bde186ff1f8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7005926/charles"}, "edited": false, "score": 6, "creation_date": 1554802671, "post_id": 55589015, "comment_id": 97876111, "body": "@Charles, there is an <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#unary-prefix-operators\" rel=\"nofollow noreferrer\">unary plus operator</a> in Kotlin, and <code>+3</code> is parsed as an unary plus and  <code>3</code>."}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 67, "user_id": 7005926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb02f9c0b6652561e0bde186ff1f8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7005926/charles"}, "edited": false, "score": 0, "creation_date": 1554802830, "post_id": 55589015, "comment_id": 97876228, "body": "@Charles This expression return <code>Int</code> value. Not necessary to use it. It is like function that return value. For example, you can write <code>object.hashCode()</code> and <code>val hashCode = object.hashCode()</code>, both expressions are correct."}, {"owner": {"reputation": 67, "user_id": 7005926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb02f9c0b6652561e0bde186ff1f8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7005926/charles"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1554806938, "post_id": 55589015, "comment_id": 97878658, "body": "Thank you both for your answers. In my opinion the best explanation is the one of @hotkey because I was not aware that Kotlin has a unaryPlus() operator. This explains why &quot;+3&quot; is a correct expression."}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 4, "last_activity_date": 1554810893, "last_edit_date": 1554810893, "creation_date": 1554800814, "answer_id": 55589015, "question_id": 55588781, "link": "https://stackoverflow.com/questions/55588781/use-of-mathematical-operator-at-start-of-line/55589015#55589015", "title": "Use of mathematical operator at start of line", "body": "<p><code>val x = 2</code> is correct expression, so compiler uses it as complete expression.</p>\n\n<p><code>+ 3</code> is correct expression although it doing nothing.</p>\n\n<p><code>val x = 2 +</code> is uncompleted expression - the compiler is trying to complete it using the next line.</p>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 1, "last_activity_date": 1554811756, "creation_date": 1554811756, "answer_id": 55592531, "question_id": 55588781, "link": "https://stackoverflow.com/questions/55588781/use-of-mathematical-operator-at-start-of-line/55592531#55592531", "title": "Use of mathematical operator at start of line", "body": "<p>This is an unfortunate result of the way Kotlin assumes a semicolon at the end of lines.</p>\n\n<p>In languages like Java, every statement must end with a semicolon, so there's no ambiguity.</p>\n\n<p>Kotlin <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#formatting\" rel=\"nofollow noreferrer\">allows</a> you to omit semicolons, which can be handy.\u00a0 But it's a bit over-eager: it infers one at the end of every line that would make sense on its own, ignoring the following lines.\u00a0 This is rather annoying to those of us who like to put operators at the start of a line, not the end\u2026</p>\n\n<p>Most of the time, the following line won't make sense on its own, so you get a compiler error to warn you of the issue.\u00a0 Unfortunately, you've found one of the rare cases where the following line <em>is</em> valid, and so there's no error!\u00a0 (Kotlin has a <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#unary-prefix-operators\" rel=\"nofollow noreferrer\">unary plus</a> to match its unary minus, so <code>+3</code> is a number just like <code>-4</code>.\u00a0 And a number on its own is a valid expression.\u00a0 Kotlin calculates the value, and then discards it.)</p>\n\n<p>The solutions are:</p>\n\n<ul>\n<li>Put the whole expression on the one line.\u00a0 (Which is unwieldy if it's long!)</li>\n<li>Put the operator at the end of the previous line.\u00a0 (Which is clearly what the language designers expect, but some of us find less logical and less clear.)</li>\n<li>Prevent the first line from making sense on its own.</li>\n</ul>\n\n<p>The best way I've found to do that last one is with parens:</p>\n\n<pre><code>val x = (2\n         + 3)\n</code></pre>\n\n<p>It looks awkward in a very short expression, but it works reasonably well on longer ones \u2014 not ideal, but necessary unless/until Kotlin gets smarter about where to assume semicolons\u2026</p>\n"}], "owner": {"reputation": 67, "user_id": 7005926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb02f9c0b6652561e0bde186ff1f8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/7005926/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 55589015, "answer_count": 2, "score": 1, "last_activity_date": 1554811756, "creation_date": 1554800095, "last_edit_date": 1554810506, "question_id": 55588781, "link": "https://stackoverflow.com/questions/55588781/use-of-mathematical-operator-at-start-of-line", "title": "Use of mathematical operator at start of line", "body": "<p>I have a basic question for my general knowledge of Kotlin concerning the mathematical operators: </p>\n\n<p>I was writing an equation and I mistakenly put the plus sign on the second line which caused my equation not to work as on the examples below:</p>\n\n<pre><code>val x = 2 + 3 //x = 5 CORRECT\n\nval x = 2 +\n    3 //x = 5 CORRECT\n\nval x = 2\n    + 3 //x = 2 WRONG\n</code></pre>\n\n<p>My question is: why Kotlin is not showing any error message on the last example? How is Kotlin interpreting the line \"+3\"?</p>\n"}, {"tags": ["kotlin", "android-tabbed-activity"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11333143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HXOrQbnh6CY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIJm1L7CcPTaIwftExbxX4jGmbsg/mo/photo.jpg?sz=128", "display_name": "Conor Sproule", "link": "https://stackoverflow.com/users/11333143/conor-sproule"}, "edited": false, "score": 0, "creation_date": 1554800911, "post_id": 55588858, "comment_id": 97875047, "body": "thank you, that makes sense now. how would i access the edittext field within the tab from my main activity to retrieve any text i&#39;ve entered?"}, {"owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "reply_to_user": {"reputation": 33, "user_id": 11333143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HXOrQbnh6CY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIJm1L7CcPTaIwftExbxX4jGmbsg/mo/photo.jpg?sz=128", "display_name": "Conor Sproule", "link": "https://stackoverflow.com/users/11333143/conor-sproule"}, "edited": false, "score": 0, "creation_date": 1554801245, "post_id": 55588858, "comment_id": 97875220, "body": "@ConorSproule It depends on your implementation. You need get access to instances of fragments you previously created."}, {"owner": {"reputation": 33, "user_id": 11333143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HXOrQbnh6CY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIJm1L7CcPTaIwftExbxX4jGmbsg/mo/photo.jpg?sz=128", "display_name": "Conor Sproule", "link": "https://stackoverflow.com/users/11333143/conor-sproule"}, "edited": false, "score": 0, "creation_date": 1554805742, "post_id": 55588858, "comment_id": 97877986, "body": "ok Andrew, this may now be beyond me, i&#39;m only new to programming and struggling with the terms. i don&#39;t suppose you have a link to an answer that could direct me to dealing with this issue/accessing instances of fragments that have been created?"}, {"owner": {"reputation": 33, "user_id": 11333143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HXOrQbnh6CY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIJm1L7CcPTaIwftExbxX4jGmbsg/mo/photo.jpg?sz=128", "display_name": "Conor Sproule", "link": "https://stackoverflow.com/users/11333143/conor-sproule"}, "edited": false, "score": 1, "creation_date": 1554806313, "post_id": 55588858, "comment_id": 97878302, "body": "i have sorted this now, i couldn&#39;t get findViewById to work because i was creating a new fragment each time. i now use it with the container the fragment was inflated in. works fine."}], "tags": [], "owner": {"reputation": 1934, "user_id": 2932967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7491e8ed5ab6a28cc6967c3fb59e9f?s=128&d=identicon&r=PG", "display_name": "Andrew Churilo", "link": "https://stackoverflow.com/users/2932967/andrew-churilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1554800280, "creation_date": 1554800280, "answer_id": 55588858, "question_id": 55588646, "link": "https://stackoverflow.com/questions/55588646/retrieve-text-from-edittext-within-tab-to-main-activity/55588858#55588858", "title": "Retrieve text from edittext within tab to main activity", "body": "<p><code>val test = frag1().saveFrag1Data()</code>\nHere you create a new fragment. <code>OnCreate</code> method of this fragment isn't called yet. So quite predictably you get <code>lateinit property frag1_tenNo has not been initialized</code> error.</p>\n"}], "owner": {"reputation": 33, "user_id": 11333143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HXOrQbnh6CY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIJm1L7CcPTaIwftExbxX4jGmbsg/mo/photo.jpg?sz=128", "display_name": "Conor Sproule", "link": "https://stackoverflow.com/users/11333143/conor-sproule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55588858, "answer_count": 1, "score": 2, "last_activity_date": 1554800280, "creation_date": 1554799710, "question_id": 55588646, "link": "https://stackoverflow.com/questions/55588646/retrieve-text-from-edittext-within-tab-to-main-activity", "title": "Retrieve text from edittext within tab to main activity", "body": "<p>I have an activity with a tabbed layout containing multiple different tabs. Each tab contains a number of 'edittext' fields. I have a button on the main activity and on clicking it i want to save the the contents of each edittext field from each tab. Currently i can return an ordinary value from the tab but i can not get the contents of the edittext field.</p>\n\n<p>I have tried creating a 'lateinit var frag1_tenNo : EditText' within the fragment class for a tab. I have initialized it in the onCreateView but the program crashes saying 'lateinit property frag1_tenNo has not been initialized'</p>\n\n<p>fragment code</p>\n\n<pre><code>\nclass frag1: Fragment() {\n\n   lateinit var frag1_tenNo : EditText\n\n    override public fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val viewFrag1 = inflater.inflate(R.layout.frag1, container, false)\n        frag1_tenNo = viewFrag1.findViewById(R.id.survey_tenantNo)\n        return viewFrag1\n    }\n\n    fun saveFrag1Data(): String {\n        var data1 = frag1_tenNo.text.toString()\n        return data1\n    }\n</code></pre>\n\n<p>activity code - to retrieve data</p>\n\n<pre><code>save_btn.setOnClickListener {\n            Log.d(\"Survey\",\"Change Button Clicked\")\n            val test = frag1().saveFrag1Data()\n            Log.d(\"Survey\",\"Returned value : $test\")\n        }\n</code></pre>\n"}, {"tags": ["kotlin", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 2595, "user_id": 6334037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czgV2.jpg?s=128&g=1", "display_name": "Jitesh Prajapati", "link": "https://stackoverflow.com/users/6334037/jitesh-prajapati"}, "reply_to_user": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554805354, "post_id": 55589039, "comment_id": 97877763, "body": "because <code>salesGST</code> is null if value is not assign to the variable. <b>FIRST</b> Kotlin gives you power to run <b>safe</b> and avoid NullPointerException. <b>SECOND</b> You can also wrap the code where you getting <code>salesGST</code> inside not null condition like <code>if(salesGST !=null){}</code>. <b>THIRD</b> you can use <code>var salesGST : ArrayList&lt;SalesGST&gt;  = ArrayList()</code> instead of <code>var salesGST : ArrayList&lt;SalesGST&gt;? = null</code>."}, {"owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554805866, "post_id": 55589039, "comment_id": 97878066, "body": "but i have create other model class declare Arraylist : lateinit var year : ArrayList&lt;Year&gt;. its successfully data get."}, {"owner": {"reputation": 2595, "user_id": 6334037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czgV2.jpg?s=128&g=1", "display_name": "Jitesh Prajapati", "link": "https://stackoverflow.com/users/6334037/jitesh-prajapati"}, "reply_to_user": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554806350, "post_id": 55589039, "comment_id": 97878322, "body": "whenever you use <code>lateinit</code> property, you have to assign value to the variable otherwise it will throw error <code>kotlin.UninitializedPropertyAccessException: lateinit property has not been initialized</code>. SO better option is use <code>var salesGST : ArrayList&lt;SalesGST&gt; = ArrayList()</code> it will returns blank arraylist and never throw any error."}, {"owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "edited": false, "score": 0, "creation_date": 1554868514, "post_id": 55589039, "comment_id": 97904197, "body": "var salesGST : ArrayList&lt;SalesGST&gt; = ArrayList() its give null ArrayList"}], "tags": [], "owner": {"reputation": 2595, "user_id": 6334037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czgV2.jpg?s=128&g=1", "display_name": "Jitesh Prajapati", "link": "https://stackoverflow.com/users/6334037/jitesh-prajapati"}, "is_accepted": false, "score": 3, "last_activity_date": 1554800889, "creation_date": 1554800889, "answer_id": 55589039, "question_id": 55588478, "link": "https://stackoverflow.com/questions/55588478/kotlin-uninitializedpropertyaccessexception-lateinit-property-salesgst-has-not/55589039#55589039", "title": "kotlin.UninitializedPropertyAccessException: lateinit property salesGST has not been initialized", "body": "<p>Just remove <code>lateinit</code> from line <code>lateinit var salesGST : ArrayList&lt;SalesGST&gt;</code> in <code>SalesGSTList</code>. </p>\n\n<pre><code>class SalesGSTList {\n\n    val success : String = \"\"\n\n    var salesGST : ArrayList&lt;SalesGST&gt;? = null\n    // you can also use\n    // var salesGST : ArrayList&lt;SalesGST&gt;  = ArrayList()\n}\n</code></pre>\n\n<p>for more info visit <a href=\"https://www.bignerdranch.com/blog/kotlin-when-to-use-lazy-or-lateinit/\" rel=\"nofollow noreferrer\">kotlin-when-to-use-lazy-or-lateinit</a></p>\n"}], "owner": {"reputation": 157, "user_id": 11248404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d46d1dd4aaa17d6a11970b59c2a2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Kanan", "link": "https://stackoverflow.com/users/11248404/kanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8050, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554800889, "creation_date": 1554799172, "question_id": 55588478, "link": "https://stackoverflow.com/questions/55588478/kotlin-uninitializedpropertyaccessexception-lateinit-property-salesgst-has-not", "title": "kotlin.UninitializedPropertyAccessException: lateinit property salesGST has not been initialized", "body": "<p>Json Server data show in android using retrofit2 and rxjava2 when parameter passing to inteface then give error.</p>\n\n<pre><code>class Sales : AppCompatActivity() {\n\n    internal lateinit var api : APIInterface\n\n    private var compositeDisposable : CompositeDisposable? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_sales)\n\n\n        compositeDisposable = CompositeDisposable()\n\n       fetchYearData()\n    }\n\n  private fun fetchYearData(){\n\n        val retrofit = APIClient.apIClient\n        if (retrofit != null) {\n            api = retrofit.create(APIInterface::class.java)\n        }\n\n\n   compositeDisposable!!.add(api.getSalesGSTData(1,1,\"04/01/2018\",\"31/03/2019\")\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe( { displaySalesGSTData(it.salesGST) },\n                {\n\n                    Toast.makeText(this,it.message,Toast.LENGTH_LONG).show()\n\n\n        }))\n\n\n\n    }\n</code></pre>\n\n<p>Model Class SalesGSTList JsonObject after its success and after JSONArray and JSONObject.</p>\n\n<p>SalesGSTList.kt</p>\n\n<pre><code>class SalesGSTList {\n\n    val success : String = \"\"\n\n    lateinit var salesGST : ArrayList&lt;SalesGST&gt;\n}\n</code></pre>\n\n<p>SalesGST.kt</p>\n\n<pre><code>class SalesGST {\n\n    var FYearID : Int = 0\n\n    var Cmp_Name : String? = \"\"\n\n    var GSTIN : String? = \"\"\n}\n</code></pre>\n\n<p>Interface</p>\n\n<pre><code>@GET(\"SalesGST.php\")\n    fun getSalesGSTData(@Query(\"cid\") cid : Int,@Query(\"fid\") fid : Int,@Query(\"fd\") fd : String,@Query(\"td\") td : String) : Observable&lt;SalesGSTList&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 717, "user_id": 4188684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb97b9c7751295149f50cd1cb422a25c?s=128&d=identicon&r=PG&f=1", "display_name": "Joachim Haglund", "link": "https://stackoverflow.com/users/4188684/joachim-haglund"}, "edited": false, "score": 0, "creation_date": 1554799097, "post_id": 55588405, "comment_id": 97873891, "body": "perahps it should be str==null || str.length==0 ? can you give a specific example where it does not work and in what way it fails?"}, {"owner": {"reputation": 3230, "user_id": 6071729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpjDR.jpg?s=128&g=1", "display_name": "A Farmanbar", "link": "https://stackoverflow.com/users/6071729/a-farmanbar"}, "edited": false, "score": 0, "creation_date": 1554799184, "post_id": 55588405, "comment_id": 97873943, "body": "what&#39;s the result? always true or always false?"}, {"owner": {"reputation": 10737, "user_id": 9656320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64csz.jpg?s=128&g=1", "display_name": "Son Truong", "link": "https://stackoverflow.com/users/9656320/son-truong"}, "edited": false, "score": 0, "creation_date": 1554799203, "post_id": 55588405, "comment_id": 97873961, "body": "Please specify your input and expected output."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": true, "score": 2, "last_activity_date": 1554799701, "creation_date": 1554799701, "answer_id": 55588642, "question_id": 55588405, "link": "https://stackoverflow.com/questions/55588405/isnullorempty-doesnt-return-the-expected-value/55588642#55588642", "title": "isNullOrEmpty doesn&#39;t return the expected value", "body": "<p>Regarding the official documentation, isNullOrEmpty() is described as:</p>\n\n<blockquote>\n  <p>isNullOrEmpty\n  fun CharSequence?.isNullOrEmpty(): Boolean Returns true if this\n  nullable char sequence is either null or empty.</p>\n</blockquote>\n\n<p>So this should returns true as your function isNullOrBlank.</p>\n\n<p>Btw the function isNullOrBlank already exists, see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-null-or-blank.html\" rel=\"nofollow noreferrer\">the documentation here</a>, in addition to check if a String is null or empty, it also checks if the string is not filled with whitespaces. It may helps you to handle more cases.</p>\n"}], "owner": {"reputation": 129, "user_id": 10168482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OvJ5Z8Ih90k/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKAjotpuE9kPizy0X8JOntve0bfQ/mo/photo.jpg?sz=128", "display_name": "Nancy", "link": "https://stackoverflow.com/users/10168482/nancy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 55588642, "answer_count": 1, "score": 0, "last_activity_date": 1554799965, "creation_date": 1554798905, "question_id": 55588405, "link": "https://stackoverflow.com/questions/55588405/isnullorempty-doesnt-return-the-expected-value", "title": "isNullOrEmpty doesn&#39;t return the expected value", "body": "<p>I have been using the following code to check if the value of a variable is not null or \"\". But since I used the value.isNullOrEmpty() method. The condition doesn't function as expected. Is the result of isNullOrEmpty() not same as the following code? I would love to here from you!</p>\n\n<pre><code>fun isNullOrBlank(str: String?): Boolean {\n            return str == null || str == \"\"\n        }\n</code></pre>\n"}, {"tags": ["java", "spring", "kotlin", "spring-security", "graphql-java"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 4675415, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H9cXQ8kMIUE/AAAAAAAAAAI/AAAAAAAAAKQ/oyC5f_wcfIw/photo.jpg?sz=128", "display_name": "\u0415\u0432\u0433\u0435\u043d\u0438\u0439 \u0420\u044f\u0431\u043e\u0432", "link": "https://stackoverflow.com/users/4675415/%d0%95%d0%b2%d0%b3%d0%b5%d0%bd%d0%b8%d0%b9-%d0%a0%d1%8f%d0%b1%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1609154273, "creation_date": 1609154273, "answer_id": 65476781, "question_id": 55588266, "link": "https://stackoverflow.com/questions/55588266/graphql-java-nested-resolvers-are-executed-in-different-thread-have-different-sp/65476781#65476781", "title": "graphql-java nested resolvers are executed in different thread have different Spring security contexts", "body": "<p>I faced the same issue using a retrofit client.\nAll I need is just to set spring delegating executor to the okhttp dispatcher like this:</p>\n<pre><code>@Bean\nDelegatingSecurityContextExecutorService dispatcherExecutor() {\n    return new DelegatingSecurityContextExecutorService(\n            new ThreadPoolExecutor(\n                    0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS,\n                    new SynchronousQueue&lt;&gt;(), Util.threadFactory(&quot;OkHttp Dispatcher&quot;, false)\n            )\n    );\n}\n\n@Bean\nOkHttpClient okHttpClient() {\n    var interceptor = new HttpLoggingInterceptor();\n    interceptor.setLevel(HttpLoggingInterceptor.Level.HEADERS);\n\n    return new OkHttpClient.Builder()\n            .connectTimeout(retrofitConnectionTimeout, TimeUnit.SECONDS)\n            .readTimeout(retrofitConnectionTimeout, TimeUnit.SECONDS)\n            .addInterceptor(interceptor)\n            .dispatcher(new Dispatcher(dispatcherExecutor()))\n            .build();\n}\n</code></pre>\n<p>What about graphql, please look at <code>graphql.execution.ExecutorServiceExecutionStrategy</code>. It allows to setup graphql async calls executor service, so you can pass spring delegating executor service here.</p>\n"}], "owner": {"reputation": 105, "user_id": 1621276, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/acda8d44c3b017ea7598bb0e5430cca2?s=128&d=identicon&r=PG", "display_name": "F&#225;bio Carneiro", "link": "https://stackoverflow.com/users/1621276/f%c3%a1bio-carneiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1609154273, "creation_date": 1554798466, "question_id": 55588266, "link": "https://stackoverflow.com/questions/55588266/graphql-java-nested-resolvers-are-executed-in-different-thread-have-different-sp", "title": "graphql-java nested resolvers are executed in different thread have different Spring security contexts", "body": "<p>I am using graphql-java, and it executes the different nested resolvers in separate threads.</p>\n\n<p>I have a custom filter on spring security that parses the Bearer token from the Authorization Header and adds that to the current spring security context.</p>\n\n<p>I was temporarily able to solve the issue by listening to the ContextRefreshedEvent and forcing the strategy to Global, as you can see here:</p>\n\n<pre><code>    @EventListener\n    fun setupSecurityContext(event: ContextRefreshedEvent) {\n        SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_GLOBAL)\n    }\n</code></pre>\n\n<p>I am not happy with this solution because I have to access the tokens on the resolvers with a global static call when I would like to receive it passed as a parameter on the resolver.</p>\n\n<pre><code>SecurityContextHolder.getContext().authentication.principal\n</code></pre>\n\n<p>I believe this is not a good practice. I guess the data from one request can be exposed to another user by a different thread.</p>\n"}, {"tags": ["android", "kotlin", "android-ndk", "crypto++"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1554796435, "post_id": 55587649, "comment_id": 97872514, "body": "Have you tried using this: <a href=\"https://github.com/noloader/cryptopp-android\" rel=\"nofollow noreferrer\">github.com/noloader/cryptopp-android</a> ?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 3, "creation_date": 1554796513, "post_id": 55587649, "comment_id": 97872561, "body": "<i>&quot;I tried but can not get any success&quot;</i> You haven&#39;t shown us what you tried, so we can&#39;t possibly know what you did wrong."}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "edited": false, "score": 0, "creation_date": 1554796548, "post_id": 55587649, "comment_id": 97872579, "body": "I already follow this document and tried to build it but not getting success"}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1554796599, "post_id": 55587649, "comment_id": 97872614, "body": "let me share you. @Michael"}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1554796808, "post_id": 55587649, "comment_id": 97872722, "body": "@Michael : just update my question please look in to this."}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1554799911, "post_id": 55587649, "comment_id": 97874424, "body": "@Michael : have you getting chance to look into this?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1554800459, "post_id": 55587649, "comment_id": 97874772, "body": "You haven&#39;t said what the problem is with the makefiles you&#39;ve posted."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1554815681, "post_id": 55587649, "comment_id": 97884018, "body": "@Mehul - You need to state the problem or the error. I think one of the problems is, the filelist in <code>CRYPTOPP_SRC_FILES</code> is old/stale. Regenerate the list using a Linux host. Do so by typing <code>make sources</code>. It will list the source files for the library. The bigger problem is, AOSP changed their toolchain again and we have not had time to fix the breaks. The changes completely broke <code>setenv-android.sh</code>. We added <code>Android.mk</code> in hopes that it would be more resilient to toolchain changes."}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1554871264, "post_id": 55587649, "comment_id": 97904824, "body": "@jww : Thanks for update. Its because of i am totally beginner in cryptopp. Even i don&#39;t know how to compile this. I follow steps from  github.com/noloader/cryptopp-android and try to build it. If possible then suggest good document or example that use above library."}, {"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1554900647, "post_id": 55587649, "comment_id": 97919958, "body": "@jww Thanks for update. Can i know can we integrate Crypto++ in android? Means Android support Crypto++ compiler vice versa?"}], "answers": [{"comments": [{"owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "edited": false, "score": 0, "creation_date": 1554957871, "post_id": 55621620, "comment_id": 97941917, "body": "Thanks, i&#39;ll try and update you. Thanks once again for your time."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 0, "last_activity_date": 1554987193, "last_edit_date": 1554987193, "creation_date": 1554932090, "answer_id": 55621620, "question_id": 55587649, "link": "https://stackoverflow.com/questions/55587649/integrate-crypto-in-android-using-android-mk/55621620#55621620", "title": "Integrate Crypto++ in Android using Android.mk?", "body": "<blockquote>\n  <p>I want to integrate cryptopp module in my Android application. I tried but can not get any success and also not find any straight forward document or example for android.</p>\n</blockquote>\n\n<p>The documents you are looking for are on the <a href=\"https://www.cryptopp.com/wiki\" rel=\"nofollow noreferrer\">Crypto++ wiki</a> at <a href=\"https://www.cryptopp.com/wiki/Android_Setup_(Command_Line)#Env_Variables\" rel=\"nofollow noreferrer\">Android Setup (Command Line)</a> and <a href=\"https://www.cryptopp.com/wiki/Android.mk_(Command_Line)\" rel=\"nofollow noreferrer\">Android.mk (Command Line)</a>. The first wiki article tells you how to setup an Android build machine. Or maybe more correctly, how Crypto++ sets up an Android build machine for testing. The second wiki article tells you how to build with <code>Android.mk</code> and <code>Application.mk</code> given you have an Android build machine.</p>\n\n<p>When I perform the build using the wiki articles I see:</p>\n\n<pre><code>cryptopp$ ndk-build NDK_PROJECT_PATH=\"$PWD\" NDK_APPLICATION_MK=\"$PWD/Application.mk\"\n[arm64-v8a] Compile++      : cryptest.exe &lt;= test.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= bench1.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= bench2.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= bench3.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= datatest.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= dlltest.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= fipsalgt.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat0.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat1.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat2.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat3.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat4.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat5.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat6.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat7.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat8.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat9.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= validat10.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= regtest1.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= regtest2.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= regtest3.cpp\n[arm64-v8a] Compile++      : cryptest.exe &lt;= regtest4.cpp\n[arm64-v8a] Prebuilt       : libc++_shared.so &lt;= &lt;NDK&gt;/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/\n[arm64-v8a] Compile++      : cryptopp_static &lt;= cryptlib.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= cpu.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= integer.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= 3way.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= adler32.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= algebra.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= algparam.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= arc4.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= aria_simd.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= aria.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= ariatab.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= asn.cpp\n[arm64-v8a] Compile++      : cryptopp_static &lt;= authenc.cpp\n...\n</code></pre>\n\n<p>Given enough time and disk space, <code>ndk-build</code> will build all the Android architectures.</p>\n\n<p>I don't know how to use Kotlin or other build systems like Maven. I don't use them, so I can't help you if your problem lies there.</p>\n\n<p>I think you need to state the errors you are encountering so folks know how to help you.</p>\n\n<hr>\n\n<p><strong><em>Note</em></strong>: <code>cryptopp-android</code> previously lacked tags that followed Crypto++ releases. We fixed that tonight, but only going back to Crypto++ 7.0. You should ensure you download the <a href=\"https://github.com/noloader/cryptopp-android/releases\" rel=\"nofollow noreferrer\"><code>cryptopp-android</code> release</a> that corresponds to the Crypto++ release you are using. They use the same tags, like <code>CRYPTOPP_7_0_0</code>, <code>CRYPTOPP_8_0_0</code> and <code>CRYPTOPP_8_1_0</code>. Master should roughly follow master on both projects.</p>\n"}], "owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1554987193, "creation_date": 1554796260, "last_edit_date": 1554816030, "question_id": 55587649, "link": "https://stackoverflow.com/questions/55587649/integrate-crypto-in-android-using-android-mk", "title": "Integrate Crypto++ in Android using Android.mk?", "body": "<p>I want to integrate cryptopp module in my Android application. I tried but can not get any success and also not find any straight forward document or example for android.</p>\n\n<p>Project structure : <a href=\"http://prntscr.com/n9g0k9\" rel=\"nofollow noreferrer\">http://prntscr.com/n9g0k9</a></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"\"\n        minSdkVersion 15\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        ndk {\n            moduleName \"cryptopp\"\n        }\n    }\n\n    sourceSets.main {\n        jni.srcDirs = [] // This prevents the auto generation of Android.mk\n        jniLibs.srcDir 'src/main/libs' // This is not necessary unless you have precompiled libraries in your project.\n    }\n\n\n    task buildNative(type: Exec, description: 'Compile JNI source via NDK') {\n        def ndkDir = android.ndkDirectory\n        commandLine \"$ndkDir/ndk-build\",\n                '-C', file('src/main/jni').absolutePath, // Change src/main/jni the relative path to your jni source\n                '-j', Runtime.runtime.availableProcessors(),\n                'all',\n                'NDK_DEBUG=1'\n    }\n\n    task cleanNative(type: Exec, description: 'Clean JNI object files') {\n        def ndkDir = android.ndkDirectory\n        commandLine \"$ndkDir/ndk-build\",\n                '-C', file('src/main/jni').absolutePath, // Change src/main/jni the relative path to your jni source\n                'clean'\n    }\n\n    clean.dependsOn 'cleanNative'\n\n    tasks.withType(JavaCompile) {\n        compileTask -&gt; compileTask.dependsOn buildNative\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    /*externalNativeBuild {\n        cmake {\n            path \"src/main/cpp/CMakeLists.txt\"\n        }\n    }*/\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n\n<p>Android.mk</p>\n\n<pre><code>## Android.mk - Android build file for Crypto++. Written and placed in\n##              public domain by Jeffrey Walton. Based on Android.mk\n##              by Alex Afanasyev (GitHub @cawka),\n##              https://github.com/weidai11/cryptopp/pull/3\n##\n##              The Android make uses GNU Make and is documented at\n##              https://developer.android.com/ndk/guides/android_mk\n##              The CPU Features library is documented at\n##              https://developer.android.com/ndk/guides/cpu-features\n##\n##              You can create the list of files below with:\n##\n##                  $ make sources | fold -w74 -s\n##\n\n## TODO - We use this line below in the .mk file:\n##            LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/..\n## The open question is, should we be exporting the path as:\n##            LOCAL_EXPORT_C_INCLUDES := $(CRYPTOPP_PATH)\n\nifeq ($(NDK_LOG),1)\n    $(info Crypto++: TARGET_ARCH: $(TARGET_ARCH))\n    $(info Crypto++: TARGET_PLATFORM: $(TARGET_PLATFORM))\nendif\n\nLOCAL_PATH := $(call my-dir)\n\n#####################################################################\n# Adjust CRYPTOPP_PATH to suit your taste, like ../cryptopp-7.1/.\n# If CRYPTOPP_PATH is empty then it means the library files and the\n# Android files are side-by-side in the same directory. If\n# CRYPTOPP_PATH is not empty then must include the trailing slash.\n# The trailing slash is needed because CRYPTOPP_PATH is prepended\n# to each source file listed in CRYPTOPP_SRC_FILES.\n\n# CRYPTOPP_PATH ?= ../cryptopp/\nCRYPTOPP_PATH ?=\n\nifeq ($(NDK_LOG),1)\n  ifeq ($CRYPTOPP_PATH),)\n    $(info Crypto++: CRYPTOPP_PATH is empty)\n  else\n    $(info Crypto++: CRYPTOPP_PATH is $(CRYPTOPP_PATH))\n  endif\nendif\n\n#####################################################################\n# Library source files\n\nCRYPTOPP_SRC_FILES := \\\n    cryptlib.cpp cpu.cpp integer.cpp 3way.cpp adler32.cpp algebra.cpp login_connection.cpp \\\n    algparam.cpp arc4.cpp aria_simd.cpp aria.cpp ariatab.cpp asn.cpp \\\n    authenc.cpp base32.cpp base64.cpp basecode.cpp bfinit.cpp \\\n    blake2.cpp blowfish.cpp blumshub.cpp camellia.cpp cast.cpp casts.cpp \\\n    cbcmac.cpp ccm.cpp chacha_simd.cpp chacha.cpp cham_simd.cpp cham.cpp \\\n    channels.cpp cmac.cpp crc_simd.cpp crc.cpp default.cpp des.cpp dessp.cpp \\\n    dh.cpp dh2.cpp dll.cpp dsa.cpp eax.cpp ec2n.cpp eccrypto.cpp ecp.cpp \\\n    elgamal.cpp emsa2.cpp eprecomp.cpp esign.cpp files.cpp filters.cpp \\\n    fips140.cpp fipstest.cpp gcm_simd.cpp gcm.cpp gf256.cpp gf2_32.cpp \\\n    gf2n.cpp gfpcrypt.cpp gost.cpp gzip.cpp hc128.cpp hc256.cpp hex.cpp \\\n    hight.cpp hmac.cpp hrtimer.cpp ida.cpp idea.cpp iterhash.cpp kalyna.cpp \\\n    kalynatab.cpp keccak.cpp lea_simd.cpp lea.cpp luc.cpp mars.cpp \\\n    marss.cpp md2.cpp md4.cpp md5.cpp misc.cpp modes.cpp mqueue.cpp mqv.cpp \\\n    nbtheory.cpp neon_simd.cpp oaep.cpp osrng.cpp padlkrng.cpp panama.cpp \\\n    pkcspad.cpp poly1305.cpp polynomi.cpp ppc_simd.cpp pssr.cpp pubkey.cpp \\\n    queue.cpp rabbit.cpp rabin.cpp randpool.cpp rc2.cpp rc5.cpp rc6.cpp \\\n    rdrand.cpp rdtables.cpp rijndael_simd.cpp rijndael.cpp ripemd.cpp rng.cpp \\\n    rsa.cpp rw.cpp safer.cpp salsa.cpp scrypt.cpp seal.cpp seed.cpp \\\n    serpent.cpp sha_simd.cpp sha.cpp sha3.cpp shacal2_simd.cpp shacal2.cpp \\\n    shark.cpp sharkbox.cpp simeck_simd.cpp simeck.cpp simon.cpp \\\n    simon128_simd.cpp simon64_simd.cpp skipjack.cpp sm3.cpp sm4_simd.cpp \\\n    sm4.cpp sosemanuk.cpp speck.cpp speck128_simd.cpp speck64_simd.cpp \\\n    square.cpp squaretb.cpp sse_simd.cpp strciphr.cpp tea.cpp tftables.cpp \\\n    threefish.cpp tiger.cpp tigertab.cpp ttmac.cpp tweetnacl.cpp twofish.cpp \\\n    vmac.cpp wake.cpp whrlpool.cpp xtr.cpp xtrcrypt.cpp zdeflate.cpp \\\n    zinflate.cpp zlib.cpp\n\n#####################################################################\n# Test source files\n\n# Remove adhoc.cpp from this list\n\nCRYPTOPP_TEST_FILES := \\\n    test.cpp bench1.cpp bench2.cpp bench3.cpp datatest.cpp \\\n    dlltest.cpp fipsalgt.cpp validat0.cpp validat1.cpp validat2.cpp \\\n    validat3.cpp validat4.cpp validat5.cpp validat6.cpp validat7.cpp \\\n    validat8.cpp validat9.cpp validat10.cpp regtest1.cpp regtest2.cpp \\\n    regtest3.cpp regtest4.cpp\n\n#####################################################################\n# ARM A-32 source file\n\nifeq ($(TARGET_ARCH),arm)\n    CRYPTOPP_SRC_FILES += aes_armv4.S\n    LOCAL_ARM_MODE := arm\n    LOCAL_FILTER_ASM :=\nendif\n\n#####################################################################\n# Shared object\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := cryptopp_shared\nLOCAL_SRC_FILES := $(addprefix $(CRYPTOPP_PATH),$(CRYPTOPP_SRC_FILES))\nLOCAL_CPPFLAGS := -Wall\nLOCAL_CPP_FEATURES := rtti exceptions\nLOCAL_LDFLAGS := -Wl,--exclude-libs,ALL -Wl,--as-needed\n\nLOCAL_EXPORT_CFLAGS := $(LOCAL_CFLAGS)\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/..\n\nLOCAL_STATIC_LIBRARIES := cpufeatures\n\ninclude $(BUILD_SHARED_LIBRARY)\n\n#####################################################################\n# Static library\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := cryptopp_static\nLOCAL_SRC_FILES := $(addprefix $(CRYPTOPP_PATH),$(CRYPTOPP_SRC_FILES))\nLOCAL_CPPFLAGS := -Wall\nLOCAL_CPP_FEATURES := rtti exceptions\n\nLOCAL_EXPORT_CFLAGS := $(LOCAL_CFLAGS)\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/..\n\nLOCAL_STATIC_LIBRARIES := cpufeatures\n\ninclude $(BUILD_STATIC_LIBRARY)\n\n#####################################################################\n# Test program\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := cryptest.exe\nLOCAL_SRC_FILES := $(addprefix $(CRYPTOPP_PATH),$(CRYPTOPP_TEST_FILES))\nLOCAL_CPPFLAGS := -Wall\nLOCAL_CPP_FEATURES := rtti exceptions\nLOCAL_LDFLAGS := -Wl,--as-needed\n\nLOCAL_STATIC_LIBRARIES := cryptopp_static\ninclude $(BUILD_EXECUTABLE)\n\n#####################################################################\n# Android cpuFeatures library\n\n$(call import-module,android/cpufeatures)\n</code></pre>\n\n<p>Application.mk</p>\n\n<pre><code>## Application.mk - Android build file for Crypto++. Written and placed\n##            in public domain by Jeffrey Walton. Based on\n##            Application.mk by Alex Afanasyev (GitHub @cawka),\n##            https://github.com/weidai11/cryptopp/pull/3\n##\n##            The Android make uses GNU Make and is documented at\n##            https://developer.android.com/ndk/guides/android_mk\n##\n##            For a list of Android Platforms and API levels see\n##            https://developer.android.com/ndk/guides/stable_apis\n##            Android 4.3 is android-18, and Android 5 is android-21.\n##\n##            Android recommends c++_shared for NDK version 16.0 and\n##            above. Android will be removing other runtime libraries\n##            as early as NDK version 18. Also see\n##            https://developer.android.com/ndk/guides/cpp-support.\n\nAPP_ABI := all\nAPP_PLATFORM := android-21\n\n# APP_STL := gnustl_shared\nAPP_STL := c++_shared\n\nCRYPTOPP_ROOT := $(call my-dir)\nNDK_PROJECT_PATH := $(CRYPTOPP_ROOT)\nAPP_BUILD_SCRIPT := $(CRYPTOPP_ROOT)/Android.mk\n\nGREP ?= grep\nNDK_r16_OR_LATER := $(shell $(GREP) -i -c -E \"Pkg.Revision = (1[6-9]|[2-9][0-9]\\.)\" \"$$ANDROID_NDK_ROOT/source.properties\")\nifneq ($(NDK_r16_OR_LATER),0)\n  ifneq ($(APP_STL),c++_shared)\n    $(info Crypto++: NDK r16 or later. Use c++_shared instead of $(APP_STL))\n  endif\nendif\n\nifeq ($(NDK_LOG),1)\n    $(info Crypto++: ANDROID_NDK_ROOT is $(ANDROID_NDK_ROOT))\n    $(info Crypto++: NDK_PROJECT_PATH is $(NDK_PROJECT_PATH))\n    $(info Crypto++: APP_BUILD_SCRIPT is $(APP_BUILD_SCRIPT))\nendif\n\nifeq ($(MAKECMDGOALS),debug) # template for conditional rules\n   C_SOURCE_FILES += uart.c\nendif\n</code></pre>\n\n<p>And below is command i execute in terminal </p>\n\n<pre><code>:cryptopp user$ ndk-build V=1 NDK_PROJECT_PATH=\"$PWD\" NDK_APPLICATION_MK=\"$PWD/Application.mk\"\n</code></pre>\n"}, {"tags": ["android", "json", "kotlin", "gson", "retrofit"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 1, "creation_date": 1554796128, "post_id": 55587536, "comment_id": 97872369, "body": "No, better way is to surround your code with <b>try/catch block</b> and do stuff inside catch block when exception occurs."}, {"owner": {"reputation": 1093, "user_id": 6565719, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CrcFr.png?s=128&g=1", "display_name": "Master Po", "link": "https://stackoverflow.com/users/6565719/master-po"}, "edited": false, "score": 0, "creation_date": 1554803866, "post_id": 55587536, "comment_id": 97876872, "body": "Is it possible to resolve it by using <code>okHttp Interceptor</code> for common response/response error handlers?"}], "owner": {"reputation": 3, "user_id": 11255341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce4ceeb4ac7879fce9d29900a158344?s=128&d=identicon&r=PG&f=1", "display_name": "ProgaProga", "link": "https://stackoverflow.com/users/11255341/progaproga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554795887, "creation_date": 1554795887, "question_id": 55587536, "link": "https://stackoverflow.com/questions/55587536/how-to-return-an-empty-model-if-gson-error-occures", "title": "How to return an empty model if Gson error occures", "body": "<p>I use Retrofit+Gson in my Android app.\nSometimes I get such exception: </p>\n\n<blockquote>\n  <p>Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n  retrofit2.converter.gson.GsonResponseBodyConverter.convert</p>\n</blockquote>\n\n<p>I don't want my app to be crashed when server responds bad requests.</p>\n\n<p>Is there a way to return an empty ResponseBody (Model) if such error occures?</p>\n\n<pre><code>        val okHttpClient = OkHttpClient()\n            .newBuilder()\n            .readTimeout(5, TimeUnit.MINUTES)\n            .writeTimeout(5, TimeUnit.MINUTES)\n            .addInterceptor(TokenInterceptor(preferencesHelper))\n            .addInterceptor(ClientInterceptor())\n            .addInterceptor(mHttpLoggingInterceptor)\n            .build()\n\n val gson = GsonBuilder()\n            .setLenient()\n            .create()\n\n        return Retrofit.Builder()\n            .baseUrl(...)\n            .addConverterFactory(GsonConverterFactory.create(gson))\n            .addCallAdapterFactory(CoroutineCallAdapterFactory())\n            .client(okHttpClient)\n            .build()\n            .create(...)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "coroutine"], "comments": [{"owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "edited": false, "score": 0, "creation_date": 1554808126, "post_id": 55587120, "comment_id": 97879376, "body": "can you please add your PortalApiClient class code? want to see whats your return object."}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "reply_to_user": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "edited": false, "score": 0, "creation_date": 1554808356, "post_id": 55587120, "comment_id": 97879510, "body": "In test() I call apiClient - get data and add returned data from api to local variable. Test() returns nothing."}, {"owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "edited": false, "score": 0, "creation_date": 1554810050, "post_id": 55587120, "comment_id": 97880510, "body": "Yes. I understood that but what&#39;s the return object of the apiclient. is it Call&lt;&gt;?"}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "reply_to_user": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "edited": false, "score": 0, "creation_date": 1554810189, "post_id": 55587120, "comment_id": 97880604, "body": "It&#39;s a callback. Type is Response&lt;List&lt;Data&gt;&gt;, where Response has &quot;isSuccessful&quot;, &quot;error&quot; and result is generic type."}], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": true, "score": 1, "last_activity_date": 1554817722, "creation_date": 1554817722, "answer_id": 55594448, "question_id": 55587120, "link": "https://stackoverflow.com/questions/55587120/calling-await-on-suspend-functions-do-not-work-correctly/55594448#55594448", "title": "Calling await() on suspend functions do not work correctly", "body": "<p>Here is the thing. What you are expecting when you call test() method through async and await is to wait it till completes.</p>\n\n<p>But As you have a callback flow(apiclient call) inside the test method, it returns immediately before getting response from server and exits the test method. Later Callback lambda is called when the response is ready. By this time run blocking is already done.</p>\n\n<p>So You should do is to convert your callback into Coroutine.\n<a href=\"https://codelabs.developers.google.com/codelabs/kotlin-coroutines/index.html?index=..%2F..index#6\" rel=\"nofollow noreferrer\">Codelabs-example</a></p>\n\n<p>And you can create a list of Deferred objects out of the api call and await on each one.</p>\n"}], "owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 55594448, "answer_count": 1, "score": 2, "last_activity_date": 1554817722, "creation_date": 1554794318, "last_edit_date": 1554810053, "question_id": 55587120, "link": "https://stackoverflow.com/questions/55587120/calling-await-on-suspend-functions-do-not-work-correctly", "title": "Calling await() on suspend functions do not work correctly", "body": "<pre><code>private val coroutineSupervisor = SupervisorJob()\nprotected val dispatcherProvider = CoroutineDispatcherProvider()\nprotected val viewModelScope = CoroutineScope(dispatcherProvider.main + coroutineSupervisor)\n\nclass CoroutineDispatcherProvider {\n\n    val main: CoroutineDispatcher\n        get() = Dispatchers.Main\n\n    val background: CoroutineDispatcher\n        get() = Dispatchers.IO\n}\n\nviewModelScope.launch {\n    ...\n    runBlocking {\n        async { firstNumber() }.await()\n        async { secondNumber() }.await()\n        async { test() }.await()\n        async { thirdNumber() }.await()\n    }\n}\n\nsuspend fun firstNumber(): Int {\n    delay(3_000) // 3 seconds delay\n    return 5\n}\nsuspend fun secondNumber(): Int {\n    delay(5_000) // 5 seconds delay\n    return 8\n}\nsuspend fun thirdNumber(): Int {\n    delay(7_000) // 7 seconds delay\n    return 10\n}\n\nsuspend fun test() {\n    withContext(dispatcherProvider.background) {\n        ...\n    }\n}\n</code></pre>\n\n<p>Started learning coroutines few days ago and I saw something weird. firstNumber, secondNumber and thirdNumber function run as they should - delay is done and then the next function executes - in the right sequence, but test() does not. It returns value a lot later and runBlocking is already done when that happens. I would like to make sure, that it gets result and then somehow use it in other request. Is it because I'm using some kind of wrong dispatcher there or what?</p>\n"}]