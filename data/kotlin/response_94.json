[{"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 0, "creation_date": 1477525345, "post_id": 40273133, "comment_id": 67807313, "body": "Option 2 is exactly what I am looking for because I need to repeat this everywhere. I am going to give this a spin."}, {"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 0, "creation_date": 1477608823, "post_id": 40273133, "comment_id": 67849308, "body": "An interesting question I have where I should define this extension function. I mean, it definitely doesn&#39;t belong in a data class."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 0, "creation_date": 1477610885, "post_id": 40273133, "comment_id": 67849874, "body": "@ChristianBongiorno, many Kotlin projects contain <code>Utils.kt</code> or <code>utils</code> package, and extensions are often placed there if they are used across the project. But if an extension is used locally in a single file, it looks okay to put it there and make it <code>private</code>."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1477525044, "last_edit_date": 1477525044, "creation_date": 1477520901, "answer_id": 40273133, "question_id": 40272783, "link": "https://stackoverflow.com/questions/40272783/kotlin-delegating-to-a-future/40273133#40273133", "title": "Kotlin delegating to a future", "body": "<p>You can translate your Java code to Kotlin in a straightforward way using <a href=\"https://kotlinlang.org/docs/reference/properties.html#getters-and-setters\">custom property getters</a>:</p>\n\n<pre><code>class Example(fooId: Int) {\n    private val fooFuture = supplyAsync { httpClient.get(fooId) }\n\n    val foo: Foo\n        get() = fooFuture.get()\n}\n</code></pre>\n\n<hr>\n\n<p>But Kotlin has a more powerful concept for generalizing property behavior -- <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#delegated-properties\">the property delegates</a>:</p>\n\n<pre><code>class Example {\n    val foo: Foo by someDelegate\n}\n</code></pre>\n\n<p><sup>In this example, <code>someDelegate</code> is an object that defines the behavior of property <code>foo</code>.</sup></p>\n\n<p>Though <code>Future&lt;V&gt;</code> cannot be used as a delegate out of the box in Kotlin, you can create your own property delegates by implementing <code>getValue(thisRef, property)</code> and (for mutable properties) <code>setValue(thisRef, property, value)</code> functions, thus explicitly providing the code to be executed when a property is read (and written, if mutable). </p>\n\n<p>These functions can be either member functions for your project classes or <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\">extension functions</a>, which fits the case with <code>Future&lt;V&gt;</code>. Basically, to use <code>Future&lt;V&gt;</code> as a property delegate, you have to define the  <code>getValue(thisRef, value)</code> extension function for it, for example:</p>\n\n<pre><code>operator fun &lt;V&gt; Future&lt;V&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;) = get()\n</code></pre>\n\n<p><sup>Here, the value the delegate will provide for a property will be simply taken from the <code>Future::get</code> call, but a proper implementation should probably take care of cancellation and exceptions handling. For this purpose, you can wrap a <code>Future&lt;V&gt;</code> into a class that will also define the fallback values/strategies, and then use this class' objects in <code>by</code>.</sup></p>\n\n<p>Then you can use <code>Future&lt;V&gt;</code> objects as delegates for your properties:</p>\n\n<pre><code>class Example(fooId: Int) {\n    val foo: Foo by supplyAsync { Thread.sleep(2000); fooId }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val e = Example(123)\n    println(e.foo)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 994, "user_id": 2230478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa42e11f91148b4bf8cd7a3396b6526d?s=128&d=identicon&r=PG&f=1", "display_name": "VinyJones", "link": "https://stackoverflow.com/users/2230478/vinyjones"}, "is_accepted": false, "score": 0, "last_activity_date": 1614107007, "last_edit_date": 1614107007, "creation_date": 1614102485, "answer_id": 66338406, "question_id": 40272783, "link": "https://stackoverflow.com/questions/40272783/kotlin-delegating-to-a-future/66338406#66338406", "title": "Kotlin delegating to a future", "body": "<p>To complete the answer from hotkey I propose this solution for a ReadWrite property</p>\n<pre><code>fun &lt;V&gt; Future&lt;out V&gt;.asDelegate(mayInterruptIfRunning: Boolean = false) =\nobject : ReadWriteProperty&lt;Any?, V&gt; {\n    private val lock = Object()\n    private var completedOrCanceled: Boolean = false\n    private var mValue: V? = null\n    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): V {\n        synchronized(lock) {\n            if (!completedOrCanceled) {\n                mValue = get()\n                completedOrCanceled = true\n            }\n        }\n        @Suppress(&quot;UNCHECKED_CAST&quot;)\n        return mValue as V\n\n    }\n\n    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: V) {\n        synchronized(lock) {\n            if (!completedOrCanceled) {\n                cancel(mayInterruptIfRunning)\n                completedOrCanceled = true\n            }\n            mValue = value\n        }\n    }\n}\n</code></pre>\n<p>Usage could be :</p>\n<pre><code>class Example(fooId: Int) {\n    var foo: Foo by supplyAsync { Thread.sleep(2000); print(&quot;job done &quot;); fooId }.asDelegate()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val e = Example(123)\n    println(e.foo)  //&quot;job done 123&quot; printed after 2 sec\n\n    val f = Example(123)\n    f.foo = 456    //without waiting\n    println(e.foo) //&quot;456&quot; printed immediately \n                   //&quot;job done &quot; printed after 2 sec\n\n    val g = Example(123) //&quot;job done &quot; printed after 2 sec\n    Thread.sleep(3000)  //wait 3 sec then\n    println(e.foo) //&quot;123&quot; printed immediately \n    g.foo = 456\n    println(e.foo) //&quot;456&quot; printed immediately \n\n}\n</code></pre>\n<p>note that if <code>mayInterruptIfRunning</code> is set to <code>true</code> then <code>&quot;job done &quot;</code> won't be printed if <code>f.foo = 456</code> is called before the 2 sec</p>\n"}], "owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 40273133, "answer_count": 2, "score": 5, "last_activity_date": 1614107007, "creation_date": 1477519023, "question_id": 40272783, "link": "https://stackoverflow.com/questions/40272783/kotlin-delegating-to-a-future", "title": "Kotlin delegating to a future", "body": "<p>I am trying to learn Kotlin and delegates are both interesting and confusing. I have a situation where, in a java class I would take a constructor arg, create a Future (the ID represents a resource in another system) and stash the Future as an instange variable. Then the \"getXXX\" would call <code>Future.get()</code></p>\n\n<p>Here is a sample java class</p>\n\n<pre><code>public class Example {\n\n\n     private Future&lt;Foo&gt; foo;\n\n     public Example(String fooId) {\n\n        this.foo = supplyAsync(() -&gt; httpClient.get(fooId));\n     }\n\n     public Foo getFoo() {\n      return foo.get();\n     }\n}\n</code></pre>\n\n<p>I am not supplying the Kotlin example because I am simply not sure how to construct it.</p>\n"}, {"tags": ["android", "kotlin", "moshi"], "answers": [{"tags": [], "owner": {"reputation": 827, "user_id": 1774074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55b53253a466e56d290e548e945adc97?s=128&d=identicon&r=PG", "display_name": "l0v3", "link": "https://stackoverflow.com/users/1774074/l0v3"}, "is_accepted": true, "score": 1, "last_activity_date": 1491337670, "creation_date": 1491337670, "answer_id": 43217090, "question_id": 40269159, "link": "https://stackoverflow.com/questions/40269159/android-kotlin-moshi-custom-json-adapter/43217090#43217090", "title": "Android Kotlin Moshi Custom Json Adapter", "body": "<p>I think, recursion is proper way of handling <code>list(add(fromJson(it))</code>, the main problem is inside the structure. The structure itself is recursive. Proper way is to flatten structure &amp; referencing to another object type.</p>\n\n<p>About second, this is also problem which comes with bad structure. You can solve this by common parent via inheritance. Then check target type itself.</p>\n\n<pre><code>interface X { }\ndata class A : X { }\ndata class B : X { }\n@FromJson fun fromJson(json: C): X {  }\n</code></pre>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 43217090, "answer_count": 1, "score": 0, "last_activity_date": 1491337670, "creation_date": 1477504825, "question_id": 40269159, "link": "https://stackoverflow.com/questions/40269159/android-kotlin-moshi-custom-json-adapter", "title": "Android Kotlin Moshi Custom Json Adapter", "body": "<p>Ok so i have the following Json Pojo:</p>\n\n<pre><code>data class JCategory(\n        val id: Int,\n        val name: String,\n        val image: String?,\n        val color: String?,\n        val categories: List&lt;JCategory&gt;?,\n        val products: List&lt;JProduct&gt;?\n)\n</code></pre>\n\n<p>And i want to write a customs deserialiser, so the final object will look like this:</p>\n\n<pre><code>data class Category(\n        val id: Int,\n        val name: String,\n        val image: String?,\n        val color: String?,\n        val list: List&lt;Any&gt;\n)\n</code></pre>\n\n<p>Basically, the mappings are:</p>\n\n<ul>\n<li><p><code>JCategory -&gt; Category</code></p></li>\n<li><p><code>JProduct -&gt; Prod1 / Prod2</code> based on some value inside JProduct</p></li>\n</ul>\n\n<p>The JCategory two lists will be joint into 1, in which will contain more JCategory plus Prod1/Prod2.</p>\n\n<p>Is this a valid and efficient way of mapping the data in this adapter according to Moshi?</p>\n\n<pre><code>@FromJson fun fromJson(category: JCategory): CategoryProduct {    \n\n        val prods = category.products\n        val cats = category.categories\n\n        val list = mutableListOf&lt;Any&gt;()\n\n        if (prods != null &amp;&amp; prods.size &gt; 0) {\n            prods.forEach {\n                list.add(if (it.isMain == 1) {\n                    P1(\n                            ...\n                    )\n                } else {\n                    P2(\n                            ...\n                    )\n                })\n            }\n        }\n\n        if (cats != null &amp;&amp; cats.size &gt; 0){\n            cats.forEach {\n                list.add(fromJson(it))\n            }\n        }\n\n        return CategoryProduct(\n                category.id,\n                category.name,\n                category.image.emptyToNull(),\n                parsedColor,\n                category.parentId,\n                list\n        )\n    }\n</code></pre>\n\n<p>Notice that i have a JCategory and inside a list of the same object,\nso i thought the Adapter would parse this automatically but it doesn't. So i tried <code>list.add(fromJson(it))</code> and it worked. </p>\n\n<p>So my questions are:</p>\n\n<ul>\n<li>is <code>list.add(fromJson(it))</code> the proper way of handling cases like this?</li>\n<li>how can i map an object to another one/other based on some property inside it? The fromJson can only return 1 type of transformed object.</li>\n</ul>\n"}, {"tags": ["java", "android", "unit-testing", "rx-java", "kotlin"], "comments": [{"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1477483705, "post_id": 40261829, "comment_id": 67784134, "body": "I assume that you have some time-dependent operations in your <code>getRecipes</code> (like <code>delay</code>, <code>timer</code>, <code>interval</code> etc.) or use <code>observeOn</code> or <code>subscribeOn</code> with different Scheduler. In such case Scheduler in your test will not be applied. Could you show us your <code>RecipeDao</code>?"}, {"owner": {"reputation": 4603, "user_id": 1478296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d318c9fca27b7fa405fa8488e225901?s=128&d=identicon&r=PG", "display_name": "Billda", "link": "https://stackoverflow.com/users/1478296/billda"}, "reply_to_user": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1477483974, "post_id": 40261829, "comment_id": 67784304, "body": "Hi, I edited question and added my getRecipes method. I am not modyfing the subscription or observation scheduler and i am not doing any time sensitive operations."}, {"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1477484984, "post_id": 40261829, "comment_id": 67785010, "body": "Method <code>run()</code> looks suspicious to me - does it return <code>Observable</code>? Or does <code>mapToList</code> return <code>Observable</code>? If so, maybe one of those methods declare their own Scheduler?"}, {"owner": {"reputation": 4603, "user_id": 1478296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d318c9fca27b7fa405fa8488e225901?s=128&d=identicon&r=PG", "display_name": "Billda", "link": "https://stackoverflow.com/users/1478296/billda"}, "reply_to_user": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1477486141, "post_id": 40261829, "comment_id": 67785807, "body": "Well I solved that :) I was using library SqlBrite and it was observing query on specific scheduler. And if no scheduler was selected it used Schedulers.io(). When i switched that to Schedulers.immediate(), tests are succeeding. Thanks!"}, {"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1477486560, "post_id": 40261829, "comment_id": 67786119, "body": "Oh, I see. Good to know!"}], "answers": [{"tags": [], "owner": {"reputation": 4603, "user_id": 1478296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d318c9fca27b7fa405fa8488e225901?s=128&d=identicon&r=PG", "display_name": "Billda", "link": "https://stackoverflow.com/users/1478296/billda"}, "is_accepted": true, "score": 3, "last_activity_date": 1604437952, "last_edit_date": 1604437952, "creation_date": 1477486319, "answer_id": 40262815, "question_id": 40261829, "link": "https://stackoverflow.com/questions/40261829/rxjava-schedulers-immediate-behavior-while-unit-testing/40262815#40262815", "title": "RxJava Schedulers.immediate() behavior while Unit Testing", "body": "<p>The problem was that I was using library SqlBrite with additional framework SqlBrite-Dao. SqlBrite is observing a query on specific <code>Scheduler</code> and when none was provided to <code>DaoManager</code> of SqlBrite-Dao, <code>Schedulers.io()</code> was used. The solution is to provide scheduler to <code>DaoManager.Builder</code> or apply RxJavaPlugins and return <code>Schedulers.immediate()</code> as all <code>Schedulers</code>.</p>\n"}], "owner": {"reputation": 4603, "user_id": 1478296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d318c9fca27b7fa405fa8488e225901?s=128&d=identicon&r=PG", "display_name": "Billda", "link": "https://stackoverflow.com/users/1478296/billda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 40262815, "answer_count": 1, "score": 3, "last_activity_date": 1604437952, "creation_date": 1477483571, "last_edit_date": 1477483886, "question_id": 40261829, "link": "https://stackoverflow.com/questions/40261829/rxjava-schedulers-immediate-behavior-while-unit-testing", "title": "RxJava Schedulers.immediate() behavior while Unit Testing", "body": "<p>I am trying to write test for my DAO object that uses reactive interface. I have a table with recipes and I want to test that when I insert data to this table, the subscriber receives list with recipes. </p>\n\n<p>I am using TestSubscriber class and performing asserts on that class. My simple test look like this:</p>\n\n<pre><code>@Test\nfun testSubscriber() {\n    insertItem()\n    val testSubscriber = TestSubscriber.create&lt;List&lt;Recipe&gt;&gt;()\n\n    recipeDao\n            .getRecipes()\n            .subscribeOn(Schedulers.immediate())\n            .subscribe(testSubscriber)\n\n    testSubscriber.assertNoErrors()\n    testSubscriber.assertNoTerminalEvent()\n    testSubscriber.assertNotCompleted()\n    testSubscriber.assertValueCount(1)\n    assertEquals(1, testSubscriber.onNextEvents[0].size)\n}\n</code></pre>\n\n<p>The problem is that assertion <code>testSubscriber.assertValueCount(1)</code> fails because no item was emitted. But when I insert this line above\n<code>testSubscriber.awaitTerminalEvent(500, TimeUnit.MILLISECONDS)</code>, the test is successful. My observable does not emit terminal event and therefore the timeout is performed, but in the meantime of waiting, the onNext was called with list of recipes. </p>\n\n<p>My getRecipes method:</p>\n\n<pre><code>fun getRecipes(): Observable&lt;List&lt;Recipe&gt;&gt; {\n    return query(SELECT(\"*\")\n            .FROM(Recipe.TABLE_NAME)\n            .ORDER_BY(Recipe.COL_NAME))\n            .run()\n            .mapToList(RecipeMapper.MAPPER)\n}\n</code></pre>\n\n<p>How is that possible? I thought that when I use Schedulers.immediate(), the operation will be performed on the same thread and my TestSubscriber receives the events.  If not, how should I write this test so it succeeds? I want to test that onNext is called and I don't want to insert artificial sleep commands between. </p>\n"}, {"tags": ["postgresql", "jdbc", "kotlin", "hikaricp"], "answers": [{"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477480505, "post_id": 40258996, "comment_id": 67782171, "body": "thanks, didn&#39;t work at first but had a different issue regarding another api calling my database :)"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 1, "last_activity_date": 1477475395, "creation_date": 1477475395, "answer_id": 40258996, "question_id": 40257977, "link": "https://stackoverflow.com/questions/40257977/kotliquery-doesnt-close-postgresql-connections/40258996#40258996", "title": "Kotliquery doesn&#39;t close postgresql connections", "body": "<p>It seems that each call to <code>BaseDAO.getSession()</code> creates new <code>HikariDataSource</code>. This means that every <code>Session</code> has effectively it's <strong>own database connection pool</strong>. To resolve that you need to maintain instance of <code>HikariDataSource</code> differently i.e.:</p>\n\n<pre><code>class BaseDAO {\n    companion object {\n        ...\n        private val dataSource by lazy {\n            var hikariConfig: HikariConfig =  HikariConfig();\n            ...\n            var dataSource: HikariDataSource  = HikariDataSource(hikariConfig);\n\n            dataSource;\n        }\n\n        @JvmStatic fun getSession(): Session {\n            return sessionOf(dataSource)\n        }\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 1, "accepted_answer_id": 40258996, "answer_count": 1, "score": 1, "last_activity_date": 1477475395, "creation_date": 1477472486, "question_id": 40257977, "link": "https://stackoverflow.com/questions/40257977/kotliquery-doesnt-close-postgresql-connections", "title": "Kotliquery doesn&#39;t close postgresql connections", "body": "<p>I'm using Kotlin with the <a href=\"https://github.com/seratch/kotliquery\" rel=\"nofollow\">kotliquery</a> jdbc framework</p>\n\n<p>Just ran into a problem. I'm using a remote PostgreSQL database. After a bit of calling the database I get the following error <code>Failure: too many clients already</code>. Which is caused by 100 connections being <code>idle</code>.</p>\n\n<p>I'm trying to create 1 point where I have to do the config. This is what I call my BaseDAO. The relevant code for that class looks like this:</p>\n\n<pre><code>import com.zaxxer.hikari.HikariConfig\nimport com.zaxxer.hikari.HikariDataSource\nimport kotliquery.Session\nimport kotliquery.sessionOf\nimport javax.sql.DataSource\n\nclass BaseDAO {\n    companion object {\n        var url: String = \"jdbc:postgresql://server.local:5432/myDatabase\"\n        var user: String = \"postgres\"\n        var pass: String = \"postgres\"\n\n        val config: HikariConfig = HikariConfig()\n\n        private fun dataSource(): DataSource\n        {\n            var hikariConfig: HikariConfig =  HikariConfig();\n            hikariConfig.setDriverClassName(\"org.postgresql.Driver\");\n            hikariConfig.setJdbcUrl(url);\n            hikariConfig.setUsername(user);\n            hikariConfig.setPassword(pass);\n\n            hikariConfig.setMaximumPoolSize(5);\n            hikariConfig.setConnectionTestQuery(\"SELECT 1\");\n            hikariConfig.setPoolName(\"springHikariCP\");\n\n            hikariConfig.addDataSourceProperty(\"dataSource.cachePrepStmts\", \"true\");\n            hikariConfig.addDataSourceProperty(\"dataSource.prepStmtCacheSize\", \"250\");\n            hikariConfig.addDataSourceProperty(\"dataSource.prepStmtCacheSqlLimit\", \"2048\");\n            hikariConfig.addDataSourceProperty(\"dataSource.useServerPrepStmts\", \"true\");\n\n            var dataSource: HikariDataSource  = HikariDataSource(hikariConfig);\n\n            return dataSource;\n        }\n\n        @JvmStatic fun getSession(): Session {\n            return sessionOf(dataSource())\n        }\n    }\n\n}\n</code></pre>\n\n<p>And one of my DAO's:</p>\n\n<pre><code>class UserDAO {\n\n    val toUser: (Row) -&gt; User = { row -&gt;\n        User(\n                row.int(\"id\"),\n                row.string(\"username\"),\n                row.string(\"usertype\")\n        )\n    }\n\n    fun getAllUsers(): List&lt;User&gt; {\n        var returnedList: List&lt;User&gt; = arrayOf&lt;User&gt;().toList()\n        using(BaseDAO.getSession()) { session -&gt;\n\n            val allUsersQuery = queryOf(\"select * from quintor_user\").map(toUser).asList\n            returnedList = session.run(allUsersQuery)\n            session.connection.close() \n            session.close()\n        }\n\n        return returnedList\n    }\n}\n</code></pre>\n\n<p>After looking into Kotliquery's source code I realized the <code>session.connection.close()</code> and <code>session.close</code> wouldn't even be neccessary when using <code>using</code> (since it closes a <code>closable</code> which the retrieved <code>session</code> is.) but without them I got the same error. (had to restart postgresql database -- 100 idle connections).</p>\n\n<p>I was wondering if there is an error in my code or if this is an error in Kotliquery?</p>\n\n<p><em>(also submitted github issue #6 but figured the community might be bigger than 24 people</em></p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 1, "creation_date": 1477469328, "post_id": 40256893, "comment_id": 67775143, "body": "Please add the part of the code that instantiates <code>FileListAdapter</code> and attaches it to the <code>RecyclerView</code>."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 1, "creation_date": 1479110749, "post_id": 40256893, "comment_id": 68403645, "body": "Since you solve problem, please select your answer as solution."}], "answers": [{"tags": [], "owner": {"reputation": 1795, "user_id": 6920495, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8f72219f7e1ef8ce0d33edbecbd299d?s=128&d=identicon&r=PG&f=1", "display_name": "Natan Rubinstein", "link": "https://stackoverflow.com/users/6920495/natan-rubinstein"}, "is_accepted": true, "score": 3, "last_activity_date": 1477471314, "creation_date": 1477471314, "answer_id": 40257563, "question_id": 40256893, "link": "https://stackoverflow.com/questions/40256893/kotlin-recyclerview-doesnt-call-any-adapter-method/40257563#40257563", "title": "Kotlin recyclerView doesn&#39;t call any Adapter method", "body": "<p>The problem is solved. I missed setting of LayoutManager to recyclerView</p>\n"}], "owner": {"reputation": 1795, "user_id": 6920495, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8f72219f7e1ef8ce0d33edbecbd299d?s=128&d=identicon&r=PG&f=1", "display_name": "Natan Rubinstein", "link": "https://stackoverflow.com/users/6920495/natan-rubinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 40257563, "answer_count": 1, "score": -3, "last_activity_date": 1477471314, "creation_date": 1477469203, "last_edit_date": 1477469753, "question_id": 40256893, "link": "https://stackoverflow.com/questions/40256893/kotlin-recyclerview-doesnt-call-any-adapter-method", "title": "Kotlin recyclerView doesn&#39;t call any Adapter method", "body": "<p>RecyclerView adapter make me sick - there is no any call of adapter's methods during app run. Data was initialized in FileListPresenterImpl class, but no any call. Please, help.</p>\n\n<pre><code>class FileListAdapter(val fileList: List&lt;File&gt;):\n        RecyclerView.Adapter&lt;FileListAdapter.ViewHolder&gt;() {\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int)  {\n        holder.bindData(fileList[position])\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): ViewHolder {\n        var v = LayoutInflater.from(parent?.context).inflate(R.layout.row_item_file, parent, false)\n        return ViewHolder(v)\n    }\n\n    override fun getItemCount(): Int = fileList.size\n\n    class ViewHolder(itemView: View): RecyclerView.ViewHolder(itemView) {\n        fun bindData(file: File) {\n            itemView.tvFileName.text = file.getFileName()\n            itemView.tvPath.text = file.savePath\n        }\n    }\n}\n\n\nclass FileListFragment: ListFragment(), FileListView, ListFragment.RecyclerItemClickListener.OnItemClickListener {\n\n    lateinit private var addFileDialog: AddFileDialogFragment\n    lateinit private var listAdapter: FileListAdapter\n    lateinit private var listData: ArrayList&lt;File&gt;\n\n    val presenter = FileListPresenterImpl(this)\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {\n        return context.inflateLayout(R.layout.fragment_list)\n    }\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        addFileDialog = AddFileDialogFragment()\n\n        rvDataList.addOnItemTouchListener(object : RecyclerItemClickListener(activity, listener = this) {})\n        presenter.loadFileList()\n\n        fab.setOnClickListener { showNewFileAddDialog() }\n\n    }\n\n    ...\n\n    override fun onFileListLoad(fileList: ArrayList&lt;File&gt;) {\n        listData = fileList\n        initAdapter()\n    }\n\n    private fun initAdapter() {\n        listAdapter = FileListAdapter(listData)\n        rvDataList.adapter = listAdapter\n    }\n\n\n}\n\n\nclass FileListPresenterImpl(private val view: FileListView): FileListPresenter {\n\n    override fun loadFileList() {\n        //TODO load fileList from DB\n        view.onFileListLoad(loadTestFileList())\n    }\n\n    ...\n\n    private fun loadTestFileList(): ArrayList&lt;File&gt; {\n        var testData = ArrayList&lt;File&gt;()\n\n        var downloadFolder : String = Environment.DIRECTORY_DOWNLOADS\n\n        val f: File = File(downloadFolder, \"http://cdndl.zaycev.net/154044/4082702/vremya_i_steklo_-_navernopotomuchto_(zaycev.net).mp3\")\n\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/154044/4082702/vremya_i_steklo_-_navernopotomuchto_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/871888/4212215/craig_david_and_sigala_-_ain_t_giving_up_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/111639/4135024/albina_-_ne_nado_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/126287/4087650/pika_-_patimeyker_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/861221/4125726/lil_wayne_and_wiz_khalifa_and_imagine_dragons_and_logic_and_ty_dolla_sign_and_x_ambassadors_-_sucker_for_pain_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/12757/4212221/the_black_eyed_peas_-_where_is_the_love_2016_remake_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/118309/4214105/yolka_-_na_bolshom_vozdushnom_share_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/126708/3989697/potap_i_nastya_-_umamy_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/871784/4211700/philip_rossa_-_pam_pam_pam..._radio_edit_(zaycev.net).mp3\"))\n        testData.add(File(downloadFolder, \"http://cdndl.zaycev.net/123704/4087949/mot_-_na_dne_(zaycev.net).mp3\"))\n\n        return testData\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://github.com/AntonKostyukewicz/Downloader\" rel=\"nofollow\">https://github.com/AntonKostyukewicz/Downloader</a> - sources</p>\n"}, {"tags": ["arrays", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477401410, "post_id": 40241010, "comment_id": 67743956, "body": "Ok, but how would you resolve this is the values were an Object containing 2 values - <code>number</code> and <code>name</code> f.e.? (if you want to sort on <code>number</code>)"}, {"owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 1, "creation_date": 1477401571, "post_id": 40241010, "comment_id": 67744101, "body": "You can use <code>sortedByDescending</code> for that like <code>(array1 + array2).sortedByDescending { it.number }.take(5)</code>"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477401886, "post_id": 40241010, "comment_id": 67744365, "body": "3rd use case would be with different attribute names (not sure if <code>it</code> is still applicable then) but this will work for me."}, {"owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477402053, "post_id": 40241010, "comment_id": 67744482, "body": "I don&#39;t understand what you say by &quot;different attribute names&quot;. You can return what you like in <code>sortedByDescending{}</code>. <code>it</code> is the current object."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477403184, "post_id": 40241010, "comment_id": 67745379, "body": "I mean if you have 2 dataclasses. <code>array1</code> with <code>Demo(number, name)</code> and <code>array2</code> with <code>Demo2(id, name)</code>"}, {"owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477422337, "post_id": 40241010, "comment_id": 67757808, "body": "Already, write something like <code>when(it) {is Demo -&gt; {it.number} is Demo2 -&gt; {it.id} else null} </code> in sortedByDescending."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1477558853, "post_id": 40241010, "comment_id": 67819332, "body": "I want to add that (at least with the given examples) <code>array1.zip(array2) { l,r -&gt; Math.max(l,r)}.sortedByDescending()</code> is also an option"}, {"owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 1, "creation_date": 1477569755, "post_id": 40241010, "comment_id": 67826437, "body": "@Lovis no it&#39;s wrong, you will get max of pair and not max of all. Let&#39;s try it here: <a href=\"http://try.kotlinlang.org/#/UserProjects/b81jsbes4qb6bd100pjipaoreg/59rotklqv5o7vds95lvrqs034n\" rel=\"nofollow noreferrer\">try.kotlinlang.org/#/UserProjects/b81jsbes4qb6bd100pjipaoreg&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1477571753, "post_id": 40241010, "comment_id": 67827798, "body": "@Kevinrob, whoops my bad. I should&#39;ve read the expected <code>array3</code> better"}], "tags": [], "owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "is_accepted": true, "score": 9, "last_activity_date": 1477401980, "last_edit_date": 1477401980, "creation_date": 1477401287, "answer_id": 40241010, "question_id": 40240667, "link": "https://stackoverflow.com/questions/40240667/kotlin-way-of-filtering-max-values-from-2-arrays/40241010#40241010", "title": "Kotlin way of filtering max values from 2 arrays?", "body": "<p>You would like to have the 5 bigger int of the two arrays?</p>\n\n<pre><code>(array1 + array2).sortedArrayDescending().take(5)\n// [22, 17, 16, 15, 12]\n</code></pre>\n\n<p><strong><em>With edited answer:</em></strong></p>\n\n<pre><code>(array1 + array2).sortedByDescending { it.number }.take(5)\n// [Demo(number=22, name=j), Demo(number=17, name=e), Demo(number=16, name=i), Demo(number=15, name=h), Demo(number=12, name=a)]\n</code></pre>\n\n<p><a href=\"http://try.kotlinlang.org/#/UserProjects/6eu172fogobv6na0mtafc9k9ol/klp8i0ttl32ip1q8ph3lk0s9bn\" rel=\"noreferrer\">http://try.kotlinlang.org/#/UserProjects/6eu172fogobv6na0mtafc9k9ol/klp8i0ttl32ip1q8ph3lk0s9bn</a></p>\n"}, {"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1477401408, "post_id": 40241015, "comment_id": 67743954, "body": "Ok, but how would you resolve this is the values were an Object containing 2 values - <code>number</code> and <code>name</code> f.e.? (if you want to sort on <code>number</code>)"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1477402376, "last_edit_date": 1477402376, "creation_date": 1477401322, "answer_id": 40241015, "question_id": 40240667, "link": "https://stackoverflow.com/questions/40240667/kotlin-way-of-filtering-max-values-from-2-arrays/40241015#40241015", "title": "Kotlin way of filtering max values from 2 arrays?", "body": "<p>Probably this will fit your use case:</p>\n\n<pre><code>val c = (a + b).sortedDescending().take(5).toTypedArray()\n</code></pre>\n\n<p>Here, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"nofollow\"><code>(a + b)</code></a> creates an array with the content of <code>a</code> and <code>b</code>, then <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-descending.html\" rel=\"nofollow\"><code>.sortedDescending()</code></a> sorts the array from maximum to minimum and puts the result into list. Then you <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take.html\" rel=\"nofollow\"><code>.take(5)</code></a> top items, and then <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-typed-array.html\" rel=\"nofollow\"><code>.toTypedArray()</code></a> converts it back to array.</p>\n\n<hr>\n\n<p>If your class <code>Demo</code> is not <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-comparable/\" rel=\"nofollow\"><code>Comparable&lt;Demo&gt;</code></a>, you can: </p>\n\n<ul>\n<li><p>Implement <code>Comparable&lt;T&gt;</code> interface on that class to make <code>.sortedDescending()</code> applicable for it </p>\n\n<pre><code>class Demo(...) : Comparable&lt;Demo&gt;{\n    override fun compareTo(other: Demo): Int = number.compareTo(other.number)\n\n    ...\n}\n</code></pre>\n\n<p>Then just use the solution above.</p></li>\n<li><p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by-descending.html\" rel=\"nofollow\"><code>.sortedByDescending { }</code></a> to specify how the data should be compared: </p>\n\n<pre><code> val c = (a + b).sortedByDescending { it.number }.take(5).toTypedArray()\n</code></pre></li>\n<li><p>Use comparators chain if you need comparison by multiple values:</p>\n\n<pre><code> val c = (a + b)\n         .sortedWith(compareBy&lt;YourData&gt; { it.number }.thenBy { it.name })\n         .takeLast(5).reversed()\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3658, "favorite_count": 1, "accepted_answer_id": 40241010, "answer_count": 2, "score": 5, "last_activity_date": 1477402376, "creation_date": 1477400370, "last_edit_date": 1477401502, "question_id": 40240667, "link": "https://stackoverflow.com/questions/40240667/kotlin-way-of-filtering-max-values-from-2-arrays", "title": "Kotlin way of filtering max values from 2 arrays?", "body": "<p>I currently have 2 arrays, both containing 5 objects. All objects contain <code>Int</code> variables. </p>\n\n<p>Sample data:</p>\n\n<pre><code>data class Demo(val number: Int, val name: String)\n\nval a = Demo(12, \"a\")\nval b = Demo(1, \"b\")\nval c = Demo(3, \"c\")\nval d = Demo(5, \"d\")\nval e = Demo(17, \"e\")\n\nval array1 = arrayOf(a,b,c,d,e)\n\nval f = Demo(3, \"f\")\nval g = Demo(8, \"g\")\nval h = Demo(15, \"h\")\nval i = Demo(16, \"i\")\nval j = Demo(22, \"j\")\n\nval array2 = arrayOf(f,g,h,i,j)\n\n//val array3 = ??\n</code></pre>\n\n<p>What I'm trying to do is create a function which will filter these arrays on the maximum values. Now I know Kotlin has a method on their array called <code>max()</code> which will return the maximum value of the array it is used on.</p>\n\n<p>This made me wonder (currently I'm using nested for-loop just like someone would in Java.), is there a <s>visually beautiful</s> faster/better way of doing so in Kotlin?</p>\n\n<p>Expected output using sample data:</p>\n\n<pre><code>array3[22,17,16,15,12]\n</code></pre>\n"}, {"tags": ["enums", "kotlin"], "comments": [{"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1477376300, "post_id": 40232582, "comment_id": 67727770, "body": "Sorry for maybe stupid question, but what is a problem with using <code>if (enumval.toString() == str)</code>?"}, {"owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "reply_to_user": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1477426603, "post_id": 40232582, "comment_id": 67760247, "body": "This is true - as long as I decide to override toString like this, I do not need to use any <code>JsonStringConvertible</code> or anything like that."}, {"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1477463203, "post_id": 40232582, "comment_id": 67771850, "body": "hi, saw your update. Nice that could help you somehow. According to your updated question you can check here to find out how to return generic type from <code>class</code> parameter: <a href=\"http://stackoverflow.com/questions/34122450/how-to-get-type-info-for-a-generic-parameter\" title=\"how to get type info for a generic parameter\">stackoverflow.com/questions/34122450/&hellip;</a>"}, {"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1477463633, "post_id": 40232582, "comment_id": 67772046, "body": "Also you can check this part of documentation: <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1477463873, "post_id": 40232582, "comment_id": 67772162, "body": "Last thing is answer to question about best way: there is no best way and all things depends on needs and circumstances. In your case for me best way is using toString because 1) I don&#39;t see more context so this solution is fine; 2) in case of interface we can make another implementations (not enums); 3) it will claim to write additional code to provide casting to your concrete enum type; 4) toString in your case is logic string representation of type (and you should implement toString, check out Effective java from Joshua Bloch)"}], "answers": [{"comments": [{"owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "edited": false, "score": 0, "creation_date": 1477422359, "post_id": 40232686, "comment_id": 67757822, "body": "Thanks. I got most of the way here. I had <code>val jsonStr: String</code> in the Religousness constructor. Got the error &quot;&#39;jsonStr&#39; hides member of supertype ...&quot;. Not sure why it needs <code>override</code> modifier. I guess I just spaced out that &#39;override&#39; was required. By the way, do you have any thought about how to get rid of the floating function and write it is class extension or something like that?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "edited": false, "score": 0, "creation_date": 1477456856, "post_id": 40232686, "comment_id": 67769624, "body": "@user3175580 what do you mean by &quot;floating function&quot;?"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1477376427, "creation_date": 1477376427, "answer_id": 40232686, "question_id": 40232582, "link": "https://stackoverflow.com/questions/40232582/how-to-write-a-reusable-transform-for-string-to-enum-value-across-a-group-of-enu/40232686#40232686", "title": "How to write a reusable transform for String to Enum value across a group of Enum classes? (Kotlin)", "body": "<p>Enums as other classes can implement interfaces like so:</p>\n\n<pre><code>interface IJsonStringConvertible {\n    val jsonStr:String\n}\n\nenum class Religiousness(override val jsonStr: String, val resID: Int) : IJsonStringConvertible {\n    NotAtAll(\"none\", R.string.not_religious),\n    Somewhat(\"somewhat\", R.string.somewhat_religious),\n    Very(\"very\", R.string.very_religious),\n    ;\n\n    override fun toString() = jsonStr\n    fun displayString(res: Resources) = res.getString(resID)\n}\n</code></pre>\n\n<p>Which would then be used as:</p>\n\n<pre><code>for (enumval in enumClass.enumConstants) {\n    if ((enumval as IJsonStringConvertible).jsonStr == str)\n        return enumval\n}\n</code></pre>\n\n<p>However the above lookup can be expensive (if used millions of times). Take a look <a href=\"https://stackoverflow.com/questions/37794850/effective-enums-in-kotlin-with-reverse-lookup\">at the reverse lookup question</a> to find out how to do it more efficiently. </p>\n"}, {"tags": [], "owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1589828730, "last_edit_date": 1589828730, "creation_date": 1480911416, "answer_id": 40967012, "question_id": 40232582, "link": "https://stackoverflow.com/questions/40232582/how-to-write-a-reusable-transform-for-string-to-enum-value-across-a-group-of-enu/40967012#40967012", "title": "How to write a reusable transform for String to Enum value across a group of Enum classes? (Kotlin)", "body": "<p>If it helps anyone, here's the final version in my production app.</p>\n\n<pre><code>fun &lt;EnumT : Enum&lt;EnumT&gt;&gt; ConvertStrToEnum(enumClass: Class&lt;EnumT&gt;, str: String?): EnumT? {\n    if (str == null)\n        return null\n    for (enumval in enumClass.enumConstants) {\n        if (enumval.toString() == str)\n            return enumval\n    }\n    throw IllegalArgumentException(\"Gave an invalid enum value for class ${enumClass.canonicalName}\")\n}\n\nfun &lt;EnumT : Enum&lt;EnumT&gt; &gt; ConvertStrArrayToEnumSet(enumClass: Class&lt;EnumT&gt;, array: List&lt;String&gt;?) : EnumSet&lt;EnumT&gt; {\n    val set = EnumSet.noneOf(enumClass)\n    array?.forEach { value -&gt; set.add(ConvertStrToEnum(enumClass, value)) }\n    return set\n}\n</code></pre>\n"}], "owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "accepted_answer_id": 40232686, "answer_count": 2, "score": 3, "last_activity_date": 1589828730, "creation_date": 1477376007, "last_edit_date": 1477426885, "question_id": 40232582, "link": "https://stackoverflow.com/questions/40232582/how-to-write-a-reusable-transform-for-string-to-enum-value-across-a-group-of-enu", "title": "How to write a reusable transform for String to Enum value across a group of Enum classes? (Kotlin)", "body": "<p>I have a group >5 of Enum classes that take String parameter in its values, and I want to have simple code for all these Enum classes to convert from a String field in JSON object.</p>\n\n<pre><code>enum class Religiousness(val jsonStr: String, val resID: Int) {\n    NotAtAll(\"none\", R.string.not_religious),\n    Somewhat(\"somewhat\", R.string.somewhat_religious),\n    Very(\"very\", R.string.very_religious),\n    ;\n    override fun toString() = jsonStr\n    fun displayString(res: Resources) = res.getString(resID)\n}\n</code></pre>\n\n<p>I want to be able to write code like this</p>\n\n<pre><code>fun JsonConvertStrToEnum(enumClass: Class&lt;Enum&lt;*&gt;&gt;, str: String): Enum&lt;*&gt; {\n    for (enumval in enumClass.enumConstants) {\n        if ((enumval as IJsonStringConvertible).jsonStr() == str)\n            return enumval\n    }\n    throw IllegalArgumentException(\"Gave an invalid enum value for class ${enumClass.canonicalName}\")\n}\n</code></pre>\n\n<p>I am having a hard time figuring out if IJsonStringConvertible can work, and what its definition would be, and how to implement it in the Enum value instances. Any advice?</p>\n\n<p>Update: I have now written the converter as this. Is this the best way? Can I also express that the return value is a subtype of the parameter so don't need to cast return value?</p>\n\n<pre><code>fun JsonConvertStrToEnum(enumClass: Class&lt;out Enum&lt;*&gt;&gt;, str: String): Enum&lt;*&gt; {\n    for (enumval in enumClass.enumConstants) {\n        if (enumval.toString() == str)\n            return enumval\n    }\n    throw IllegalArgumentException(\"Gave an invalid enum value for class ${enumClass.canonicalName}\")\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "gradle", "android-gradle-plugin", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 2, "last_activity_date": 1477346708, "creation_date": 1477346708, "answer_id": 40228285, "question_id": 40228049, "link": "https://stackoverflow.com/questions/40228049/android-studio-build-failed-with-kotlin/40228285#40228285", "title": "Android Studio build failed with Kotlin", "body": "<p>You should remove <code>compile \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"</code> from your <code>dependencies</code> section and move it to <code>buildscript { dependencies { ... } }</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 2, "last_activity_date": 1477415083, "creation_date": 1477415083, "answer_id": 40245730, "question_id": 40228049, "link": "https://stackoverflow.com/questions/40228049/android-studio-build-failed-with-kotlin/40245730#40245730", "title": "Android Studio build failed with Kotlin", "body": "<p>You did put <code>compile \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"</code> in the wrong <code>build.gradle</code> file</p>\n\n<p>You may use <code>kotlin</code> plugin's build-in converters to deal with this. According to <code>Kotlin Docs</code>:</p>\n\n<blockquote>\n  <h2>Configuring Kotlin in the project</h2>\n  \n  <p>When adding a new Kotlin file, IntelliJ IDEA (and Android Studio)\n  automatically prompts us as to whether we'd like to configure the\n  Kotlin runtime for the project. However, currently, converting\n  existing Java file does not prompt this action. Therefore we have to\n  invoke it manually (via <a href=\"https://www.jetbrains.com/idea/help/navigating-to-action.html\" rel=\"nofollow\">Find Action</a>):</p>\n  \n  <p><a href=\"https://i.stack.imgur.com/PM8Z8.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/PM8Z8.png\" alt=\"Config-Kotlin\"></a></p>\n  \n  <p>We are then prompted for the version of Kotlin. Choose the latest\n  available from the list of installed versions.</p>\n  \n  <p><a href=\"https://i.stack.imgur.com/utYhx.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/utYhx.png\" alt=\"Config-Kotlin-Details\"></a></p>\n  \n  <p>After we configure Kotlin, build.gradle file for the application\n  should be updated. Now we can see that apply plugin: 'kotlin-android'\n  and the dependencies were added.</p>\n  \n  <p>(For more details how to set up gradle for your project, please check\n  <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow\">Using Gradle</a>)</p>\n  \n  <p>The last thing to do is to sync the project. We can press <code>Sync Now</code>\n  in a prompt or invoke an action <strong>Sync Project with Gradle Files</strong>.</p>\n  \n  <p><a href=\"https://i.stack.imgur.com/Lezj9.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/Lezj9.png\" alt=\"https://kotlinlang.org/assets/images/tutorials/kotlin-android/sync-project-with-gradle.png\"></a></p>\n  \n  <p>From: <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"nofollow\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a></p>\n</blockquote>\n\n<p>Check link above for more information.</p>\n\n<p>Hope it will help.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 4088079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7412e8cdc9204e715cd15272872b6ba8?s=128&d=identicon&r=PG&f=1", "display_name": "sky alligator", "link": "https://stackoverflow.com/users/4088079/sky-alligator"}, "is_accepted": false, "score": 0, "last_activity_date": 1485463780, "creation_date": 1485463780, "answer_id": 41882756, "question_id": 40228049, "link": "https://stackoverflow.com/questions/40228049/android-studio-build-failed-with-kotlin/41882756#41882756", "title": "Android Studio build failed with Kotlin", "body": "<p>you need to apply only one plugin, in your case <code>apply plugin: 'kotlin-android-extensions'</code> and only <code>compile \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"</code> this dependency. it worked for me</p>\n"}], "owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2377, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1485463780, "creation_date": 1477345560, "last_edit_date": 1477415210, "question_id": 40228049, "link": "https://stackoverflow.com/questions/40228049/android-studio-build-failed-with-kotlin", "title": "Android Studio build failed with Kotlin", "body": "<pre><code>    :app:mergeDebugAssets\n            :app:processDebugJavaRes UP-TO-DATE\n            :app:transformResourcesWithMergeJavaResForDebug FAILED\n\n            FAILURE: Build failed with an exception.\n\n            * What went wrong:\n            Execution failed for task ':app:transformResourcesWithMergeJavaResForDebug'.\n            &gt; com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK kotlin/internal/internal.kotlin_builtins\n            File1: /Users/KD/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-compiler-embeddable/1.0.4/172b43fbc03b521fed141484b212d6725fa671a9/kotlin-compiler-embeddable-1.0.4.jar\n            File2: /Users/KD/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-runtime/1.0.4/8e25da5e31669f5acf514bdd99b94ff5c7003b3b/kotlin-runtime-1.0.4.jar\n</code></pre>\n\n<p>My build.gradle:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n\n    defaultConfig {\n        applicationId \"com.app2par.ctime\"\n        minSdkVersion 16\n//        minSdkVersion 21\n//        targetSdkVersion 23\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        multiDexEnabled false\n//        multiDexEnabled true\n    }\n    dexOptions {\n        preDexLibraries true\n        javaMaxHeapSize \"2g\" // Use gig increments depending on needs\n        incremental true\n    }\n    buildTypes {\n        debug {\n            minifyEnabled false\n//            testCoverageEnabled true\n//            ext.betaDistributionReleaseNotes = getCrashlyticsBetaMessage()\n//            ext.betaDistributionGroupAliases = 'team'\n        }\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n//    dataBinding {\n//        enabled = true\n// https://code.google.com/p/android/issues/detail?id=187443&amp;q=attachments%3D0&amp;colspec=ID%20Type%20Status%20Owner%20Summary%20Stars\n//    }\n    lintOptions {\n        abortOnError false\n    }\n\n    packagingOptions {\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/LICENSE-FIREBASE.txt'\n        exclude 'META-INF/NOTICE'\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_7\n        targetCompatibility JavaVersion.VERSION_1_7\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile project(':firebasesync')\n    compile project(':liboid')\n    compile project(':cloudtimemodel')\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.1') {\n        exclude group: 'com.android.support'\n    }\n    androidTestCompile('com.android.support.test.espresso:espresso-contrib:2.2.1') {\n        exclude group: 'com.android.support'\n    }\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    //    compile('com.crashlytics.sdk.android:crashlytics:2.5.5@aar') {\n    //        transitive = true;\n    //    }\n    //    compile 'com.google.android.gms:play-services:5.0.89'\n    //    compile 'com.google.android.gms:play-services:7.0.0'\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.1.1'\n    compile 'com.android.support:design:23.1.1'\n    compile \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n    // compile   'com.firebase:firebase-client-android:2.0.3.+'\n//    compile 'com.google.android.gms:play-services-safetynet:8.3.0'\n//    compile 'com.google.android.gms:play-services-auth:8.3.0'\n\n    compile 'com.google.android.gms:play-services-plus:7.0.0' // play-services-plus:7.0.0 : office-mover\n//    compile 'com.google.android.gms:play-services-auth:8.3.0' // play-services-auth:8.3.0 : ShoppingList++\n\n    //    compile 'com.google.android.gms:play-services-identity:7.0.0'\n}\nbuildscript {\n//    ext.kotlin_version = '1.0.0-rc-1036'\n    ext.kotlin_version = '1.0.4'\n    repositories {\n        mavenCentral()\n        maven { url 'https://maven.fabric.io/public' }\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n//        classpath 'org.ajoberstar:grgit:1.1.0'\n//        classpath 'io.fabric.tools:gradle:1.+'\n//        classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.5.0-x'\n    }\n}\nrepositories {\n    mavenCentral()\n    maven { url 'https://maven.fabric.io/public' }\n}\n</code></pre>\n\n<p><strong>How to fix or diagnose this?</strong></p>\n"}, {"tags": ["java", "reflection", "kotlin", "spring-data-neo4j", "spring-annotations"], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 6313877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84210826cfb25aede7774f974aab97ba?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph M&#246;bius", "link": "https://stackoverflow.com/users/6313877/christoph-m%c3%b6bius"}, "edited": false, "score": 0, "creation_date": 1477319825, "post_id": 40220626, "comment_id": 67705652, "body": "dammit :) so embarrasing."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 4, "last_activity_date": 1477318203, "creation_date": 1477318203, "answer_id": 40220626, "question_id": 40220141, "link": "https://stackoverflow.com/questions/40220141/getannotation-for-java-annotation-used-on-kotlin-method-returns-null/40220626#40220626", "title": "getAnnotation for Java annotation used on Kotlin method returns null", "body": "<p>You're loading annotations on <code>findAll</code> from the implementing class (i.e. the class of the <code>appRepository</code> instance), not on <code>findAll</code> from the interface. To load annotations from <code>AppRepository</code> instead:</p>\n\n<pre><code>val productionMethod = AppRepository::class.java.getDeclaredMethod(\"findAll\")\nval productionQuery = productionMethod!!.getAnnotation(Query::class.java)\n</code></pre>\n"}], "owner": {"reputation": 972, "user_id": 6313877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84210826cfb25aede7774f974aab97ba?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph M&#246;bius", "link": "https://stackoverflow.com/users/6313877/christoph-m%c3%b6bius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 40220626, "answer_count": 1, "score": 1, "last_activity_date": 1477318203, "creation_date": 1477316890, "question_id": 40220141, "link": "https://stackoverflow.com/questions/40220141/getannotation-for-java-annotation-used-on-kotlin-method-returns-null", "title": "getAnnotation for Java annotation used on Kotlin method returns null", "body": "<p>Say, I have the following interface:</p>\n\n<pre><code>interface AppRepository : GraphRepository&lt;App&gt; {\n\n    @Query(\"\"\"MATCH (a:App) RETURN a\"\"\")\n    fun findAll(): List&lt;App&gt;\n}\n</code></pre>\n\n<p>In a test I want to check specifics of the query string and therefore I do</p>\n\n<pre><code>open class AppRepositoryTest {\n\n    lateinit @Autowired var appRepository: AppRepository\n\n    @Test\n    open fun checkQuery() {\n        val productionMethod = appRepository.javaClass.getDeclaredMethod(\"findAll\")\n        val productionQuery = productionMethod!!.getAnnotation(Query::class.java)\n\n        //demo test\n        assertThat(productionQuery!!.value).isNotEmpty() //KotlinNPE\n    }\n}\n</code></pre>\n\n<p>For a reason I don't comprehend, <code>productionQuery</code> is n<code>null</code>. I have double checked that the types of the imported <code>Query</code> in the test class and the <code>Query</code> in the repository are the same.</p>\n\n<p>Thus, why is the <code>productionQuery</code> <code>null</code> in this case?</p>\n"}, {"tags": ["kotlin", "observer-pattern", "android-databinding"], "comments": [{"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477376051, "post_id": 40216901, "comment_id": 67727654, "body": "How does your text field look like?"}, {"owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "reply_to_user": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477378594, "post_id": 40216901, "comment_id": 67728997, "body": "The txtProvider in the layout file is the text field."}, {"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477382666, "post_id": 40216901, "comment_id": 67731411, "body": "So you don&#39;t have a variable or property for the text in your viewmodel...?"}, {"owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "reply_to_user": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477391370, "post_id": 40216901, "comment_id": 67737045, "body": "I thought about it and made some changes to the code. I created a variable for the model in the layout file and bound the property to the text field. Then, I change the property value in onClickModel and call notifyPropertyChanged. Yet the changes to the property value are not propogated to the UI. Any pointers please"}, {"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477391559, "post_id": 40216901, "comment_id": 67737170, "body": "Please, post your code. We are no wizards and only can guess what is going wrong."}, {"owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "reply_to_user": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477398519, "post_id": 40216901, "comment_id": 67741767, "body": "I have bound the value of &quot;provider&quot; property to the TextView in the layout file android:text=&quot;@{myModel.provider}&quot; . On initial load, I see the value in the textfield.So, the binding works. When I click on the card view, i change the value of the property on line -&gt; myModel!!.provider = &quot;name changed&quot; and call notifyPropertyChanged(BR.myModel). I am expecting the &quot;name changed&quot; to show up in the textview now. I have posted the relevant code block. Could you specify which code you want to see."}, {"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477400753, "post_id": 40216901, "comment_id": 67743449, "body": "Normally, you don&#39;t need to call <code>notifyPropertyChanged</code>in your code (except in the model where you declare the setter). It is important to know how the <code>provider</code> is declared - is it a string, a observablefield, how do the setters and getters look like."}, {"owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "reply_to_user": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1477415153, "post_id": 40216901, "comment_id": 67753783, "body": "My model is a data class that has Provider as string. Added it to the question above. Only my viewmodel extends BaseObservable so notifyPropertyChanged is not available in the data class"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "edited": false, "score": 0, "creation_date": 1477561830, "post_id": 40261399, "comment_id": 67821262, "body": "I got it working in Kotlin using the @Bindable in the viewmodel like"}], "tags": [], "owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "is_accepted": false, "score": 1, "last_activity_date": 1477482168, "creation_date": 1477482168, "answer_id": 40261399, "question_id": 40216901, "link": "https://stackoverflow.com/questions/40216901/databinding-and-baseobserver-android-mvvm/40261399#40261399", "title": "Databinding and BaseObserver - Android MVVM", "body": "<p>I'll use a java syntax, because I'm not that fluent with kotlin:</p>\n\n<p>You need to declare your <code>MyModel</code> or the <code>provider</code> with <code>DataBinding</code> to enable the binding. Use a <code>@Bindable</code> on getter, and call <code>notifyPropertyChanged</code>in the setter:</p>\n\n<pre><code>@Bindable\npublic String getProvider() {\n    return this.provider;\n}\n\npublic void setProvider(String provider) {\n    this.lastName = lastName;\n    notifyPropertyChanged(BR.provider);\n}\n</code></pre>\n\n<p>or make your <code>MyModel</code> extend <code>BaseObservable</code>, or since you have a viewmodel, create a <code>ObservableField&lt;String&gt;</code> or even a <code>ObservableField&lt;MyModel&gt;</code>:</p>\n\n<pre><code>//in your viewmodel:\nprivate ObservableField&lt;MyModel&gt; modelField = new ObservableField&lt;MyModel&gt;();\n</code></pre>\n\n<p>Set the value in the constructor of your viewmodel, create a getter and reference this in your <code>xml</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "is_accepted": false, "score": 0, "last_activity_date": 1477555294, "creation_date": 1477555294, "answer_id": 40279275, "question_id": 40216901, "link": "https://stackoverflow.com/questions/40216901/databinding-and-baseobserver-android-mvvm/40279275#40279275", "title": "Databinding and BaseObserver - Android MVVM", "body": "<p>It might be more of a kotlin issue. When I initialise the provider String as ObservableField as </p>\n\n<pre><code>var provider = ObservableField&lt;String&gt;()\ninit{\n    provider = route.provider as ObservableField&lt;String&gt;\n}\n</code></pre>\n\n<p>I get an error at runtime\njava.lang.String cannot be cast to android.databinding.ObservableField</p>\n\n<p>I will try posting it on the kotlin discussion site and seek some answers.</p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "is_accepted": false, "score": 2, "last_activity_date": 1477562006, "creation_date": 1477562006, "answer_id": 40281524, "question_id": 40216901, "link": "https://stackoverflow.com/questions/40216901/databinding-and-baseobserver-android-mvvm/40281524#40281524", "title": "Databinding and BaseObserver - Android MVVM", "body": "<p>I got it working in Kotlin using the @Bindable in the viewmodel like below.Took me a while to understand how to use @Bindable in Kotlin syntax. The property BR.provider was not getting generated till i got the @Bindable syntax right.</p>\n\n<pre><code>fun onClickModel(): View.OnClickListener {\n    val viewOnClick = View.OnClickListener {\n        route!!.provider = \"name changed\"\n        notifyPropertyChanged(BR.provider)\n    }\n    return viewOnClick\n}\n\nval provider: String\n    @Bindable\n    get() {\n        Log.d(\"Utils\", \"get property\")\n        return route!!.provider!!\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 1884811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277f69262897b461047fa89fc5249d42?s=128&d=identicon&r=PG", "display_name": "user1884811", "link": "https://stackoverflow.com/users/1884811/user1884811"}, "is_accepted": false, "score": 1, "last_activity_date": 1495778711, "creation_date": 1495778711, "answer_id": 44194684, "question_id": 40216901, "link": "https://stackoverflow.com/questions/40216901/databinding-and-baseobserver-android-mvvm/44194684#44194684", "title": "Databinding and BaseObserver - Android MVVM", "body": "<p>In your MyModel.kt file</p>\n\n<pre><code>class MyModel(\n        @get:Bindable\n        var provider: String = \"\"\n) : BaseObservable() {\n    fun updateText(str:String){\n        provider = str\n        notifyPropertyChanged(BR.counter)\n    }\n}\n</code></pre>\n\n<p>and then in your layout.xml</p>\n\n<pre><code>android:onClick=\"@{() -&gt; myModel.updateText(`YOUR TEXT`)}\"\n</code></pre>\n\n<p><code>Rebuild</code> your project if you cannot get <code>BR.counter</code> autocomplete working</p>\n"}], "owner": {"reputation": 855, "user_id": 6519926, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/47fedcee42094cbbc9bfeefc19ce56d8?s=128&d=identicon&r=PG&f=1", "display_name": "Akshata", "link": "https://stackoverflow.com/users/6519926/akshata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2659, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1495778711, "creation_date": 1477307305, "last_edit_date": 1477415229, "question_id": 40216901, "link": "https://stackoverflow.com/questions/40216901/databinding-and-baseobserver-android-mvvm", "title": "Databinding and BaseObserver - Android MVVM", "body": "<p>I have a textfield which is databound to a view model like the xml here and I want the UI to update the txtProvider field on click of the cardView.\nHow should I notify the change to the view from my viewmodel? </p>\n\n<pre><code>&lt;layout xmlns:bind=\"http://schemas.android.com/tools\"&gt;\n&lt;data&gt;\n    &lt;variable name=\"viewmodel\"        \n              type=\"io.leapingwolf.myapp.viewmodel.MyViewModel\"/&gt;\n   &lt;variable\n    name=\"myModel\"\n    type=\"io.leapingwolf.myapp.models.MyModel\"/&gt;\n&lt;/data&gt;\n    &lt;android.support.v7.widget.CardView \n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"   \n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:id=\"@+id/cardView\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardUseCompatPadding=\"true\"\n        android:onClick=\"@{viewmodel.onClickModel}\"&gt;\n        &lt;TextView\n            android:id=\"@+id/txtProvider\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentLeft=\"true\"\n            android:layout_alignParentStart=\"true\"\n            android:text=\"@{myModel.provider}\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"15sp\" /&gt;\n    &lt;/android.support.v7.widget.CardView&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>In MyViewModel(which extends BaseObserver class), I have</p>\n\n<pre><code>fun onClickModel() : View.OnClickListener {\n        val viewOnClick = View.OnClickListener { v -&gt;\n                                myModel!!.provider = \"name changed\"\n                                notifyPropertyChanged(BR.myModel)\n                                Toast.makeText(context,\"clicked:\" + myModel!!.provider , Toast.LENGTH_SHORT).show()}\n                                return viewOnClick\n        }\n</code></pre>\n\n<p>My data class :</p>\n\n<pre><code>data class MyModel(\n        val type: String?,\n        var  provider: String? \n) : AutoParcelable\n</code></pre>\n"}, {"tags": ["android", "realm", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 3, "creation_date": 1477255557, "post_id": 40207614, "comment_id": 67679763, "body": "Link sorts are not yet supported, have a reverse relation to the parent and query the class you want to sort on"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1477415914, "post_id": 40207614, "comment_id": 67754177, "body": "@EpicPandaForce add this as answer ;-)"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1477416759, "post_id": 40207614, "comment_id": 67754632, "body": "@piotrek1543 it went to &quot;in progress&quot; just Today, so I&#39;m waiting for the opportunity to say it works since whatever version :p"}, {"owner": {"reputation": 2258, "user_id": 1414775, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/958d61fc7ed9e1843fadd0fd1cbabe94?s=128&d=identicon&r=PG", "display_name": "berkayk", "link": "https://stackoverflow.com/users/1414775/berkayk"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1483638792, "post_id": 40207614, "comment_id": 70188840, "body": "@EpicPandaForce how do you relate child to parent? Can you give an example :) Thanks"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 2258, "user_id": 1414775, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/958d61fc7ed9e1843fadd0fd1cbabe94?s=128&d=identicon&r=PG", "display_name": "berkayk", "link": "https://stackoverflow.com/users/1414775/berkayk"}, "edited": false, "score": 0, "creation_date": 1483641513, "post_id": 40207614, "comment_id": 70190408, "body": "@berkayk Read more here about manual backlinks <a href=\"https://medium.com/@Zhuinden/designing-the-schema-of-realm-effectively-and-other-realm-tips-feb76c5b6072#.fxmu0jq9u\" rel=\"nofollow noreferrer\">medium.com/@Zhuinden/&hellip;</a>"}], "owner": {"reputation": 1148, "user_id": 4252851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-o_BdzLvqO9U/AAAAAAAAAAI/AAAAAAAAA5o/DuLiv5H7hdY/photo.jpg?sz=128", "display_name": "Sergey Zabelnikov", "link": "https://stackoverflow.com/users/4252851/sergey-zabelnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1477255459, "creation_date": 1477255459, "question_id": 40207614, "link": "https://stackoverflow.com/questions/40207614/realm-nested-object-sort", "title": "Realm Nested Object sort", "body": "<p>I have json: </p>\n\n<pre><code>{\n \"title\": \"Title 2\",\n \"body\": \"Body 2\",\n \"status_info\": {\n            \"is_favorite\": false,\n            \"is_like\": false,\n            \"like_count\": 0\n        },\n \"id\": \"47e7704e-89f1-4d0d-8da1-52a080d56f46\"\n}\n</code></pre>\n\n<p>And two Realm Objects: </p>\n\n<pre><code>open class Actuality : RealmObject() {\n\n    @PrimaryKey lateinit var id: String\n    @SerializedName(\"status_info\")\n    lateinit var statusInfo: StatusInfo\n   ...\n}\n\nopen class StatusInfo : RealmObject() {\n\n    @SerializedName(\"is_like\")\n    var isLiked: Boolean = false\n\n    @SerializedName(\"is_favorite\")\n    var isFavorite: Boolean = false\n\n    @SerializedName(\"like_count\")\n    var likeCount: Int = -1\n}\n</code></pre>\n\n<p>And i using RealmAdapter RealmResults for realtime updates,\nbut i have problem, when trying to sort Actualities by likeCount.</p>\n\n<p>I tryed </p>\n\n<pre><code>data?.sort(\"likeCount\", Sort.DESCENDING)\ndata?.sort(\"statusInfo.likeCount\", Sort.DESCENDING)\n</code></pre>\n\n<p>But realm throws me exception, that \"Field name 'likeCount' does not exist.\"\nHow i can handle realm nested object in RealmResults?</p>\n"}, {"tags": ["android", "android-studio", "gradle", "android-gradle-plugin", "kotlin"], "comments": [{"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 4, "creation_date": 1477252289, "post_id": 40207066, "comment_id": 67678769, "body": "Did you try using Kotlin <code>1.0.4</code> instead of <code>1.0.0</code> ? Also, what&#39;s your gradle plugin version?"}, {"owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1477319580, "post_id": 40207066, "comment_id": 67705480, "body": "With <code>ext.kotlin_version = &#39;1.0.4&#39;</code> the error that happens is: <code>Error:Execution failed for task &#39;:cloudtimemodel:compileKotlin&#39;. &gt; Could not initialize class com.intellij.ide.highlighter.JavaFileType</code>"}, {"owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1477319649, "post_id": 40207066, "comment_id": 67705528, "body": "@Logain: which Gradle plugin do you mean? The one for Kotlin? If so, it is <code>classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</code>"}, {"owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1477335975, "post_id": 40207066, "comment_id": 67714792, "body": "With <code>ext.kotlin_version = &#39;1.0.0&#39;</code> and tried <code>1.0.4</code>"}, {"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 1, "creation_date": 1477336082, "post_id": 40207066, "comment_id": 67714845, "body": "I was asking about the build tools too, i.e.: <code>classpath &#39;com.android.tools.build:gradle:2.2.2&#39;</code>"}, {"owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "reply_to_user": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1477336351, "post_id": 40207066, "comment_id": 67714986, "body": "I have <code>classpath &#39;com.android.tools.build:gradle:2.2.0&#39;</code>"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 1, "creation_date": 1477415287, "post_id": 40207066, "comment_id": 67753858, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40228049/android-studio-build-failed-with-kotlin\">Android Studio build failed with Kotlin</a>"}, {"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1491550501, "post_id": 40207066, "comment_id": 73612672, "body": "I hit this too - then I did a <code>gradlew --stacktrace build</code> in the Terminal to try to debug it - and the problem went away and the build completed.   Still don&#39;t know what the problem was.   The &quot;configure Kotlin&quot; step below indicated that Kotlin was configured.   The package was <code>kotlin-examples&#47;gradle&#47;android-dagger</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "edited": false, "score": 0, "creation_date": 1477345313, "post_id": 40226088, "comment_id": 67719281, "body": "Thanks! I will check one-by-one, where we might differ."}], "tags": [], "owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "is_accepted": false, "score": 1, "last_activity_date": 1477337438, "creation_date": 1477337438, "answer_id": 40226088, "question_id": 40207066, "link": "https://stackoverflow.com/questions/40207066/kotlin-build-failed-in-android-studio/40226088#40226088", "title": "Kotlin build failed in Android Studio", "body": "<p>This is a working configuration. You can adapt it to your multi-project setup:</p>\n\n<h3>/build.gradle</h3>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.0.4'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n\n    ext {\n        androidBuildToolsVersion = \"23.0.3\"\n        androidMinSdkVersion = 16\n        androidTargetSdkVersion = 23\n        androidCompileSdkVersion = 23\n        androidApplicationId = \"com.some.example\"\n        androidVersionCode = 1\n        androidVersionName = \"1.0\"\n        supportVersion = \"24.0.0\"\n    }\n}\n</code></pre>\n\n<h3>/app/build.gradle</h3>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion parent.ext.androidCompileSdkVersion\n    buildToolsVersion parent.ext.androidBuildToolsVersion\n\n    defaultConfig {\n        minSdkVersion parent.ext.androidMinSdkVersion\n        targetSdkVersion parent.ext.androidTargetSdkVersion\n        versionCode parent.ext.androidVersionCode\n        versionName parent.ext.androidVersionName\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    packagingOptions {\n        exclude 'LICENSE.txt'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/NOTICE'\n    }\n\n    dexOptions {\n        preDexLibraries = false\n        jumboMode = false\n        javaMaxHeapSize \"4g\"\n    }\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 1, "last_activity_date": 1477420024, "last_edit_date": 1477420024, "creation_date": 1477415704, "answer_id": 40245892, "question_id": 40207066, "link": "https://stackoverflow.com/questions/40207066/kotlin-build-failed-in-android-studio/40245892#40245892", "title": "Kotlin build failed in Android Studio", "body": "<p>Follow these instructions or check: <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"nofollow\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a></p>\n\n<ol>\n<li>Choose <strong>Help | Find Action</strong> on the main menu or press <kbd>CTRL</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd>.</li>\n<li>Search for this item:<a href=\"https://i.stack.imgur.com/SBRYP.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/SBRYP.png\" alt=\"enter image description here\"></a></li>\n<li>You would be prompted for <code>kotlin</code> version. </li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/9AXA8.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/9AXA8.png\" alt=\"*emphasized text*\"></a>\n  Choose the latest available from the list of installed versions.</p>\n\n<ol start=\"4\">\n<li><p>Now <code>build.gradle</code> file for the application should be updated.</p></li>\n<li><p>The last thing to do is to <code>sync the project</code>. You can press '<code>Sync Now</code>' in a prompt or invoke an action <strong>Sync Project with Gradle Files</strong>.</p></li>\n</ol>\n\n<p>Hope it will help</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5283792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OJC8UaUml8E/AAAAAAAAAAI/AAAAAAAAAGc/b_hpUvanUNo/photo.jpg?sz=128", "display_name": "cn00", "link": "https://stackoverflow.com/users/5283792/cn00"}, "is_accepted": false, "score": 0, "last_activity_date": 1495611944, "last_edit_date": 1495611944, "creation_date": 1495610599, "answer_id": 44151641, "question_id": 40207066, "link": "https://stackoverflow.com/questions/40207066/kotlin-build-failed-in-android-studio/44151641#44151641", "title": "Kotlin build failed in Android Studio", "body": "<p>ensure all your apps and libs <code>build.gradle</code>'s <code>ext.kotlin_version</code> equal to your installed Kotlin version</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = PROP_KOTLIN_VERSION // 1.1.2-3 // this should equal to your installed Kotlin version\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 7118, "user_id": 170451, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EOfLl.png?s=128&g=1", "display_name": "KarolDepka", "link": "https://stackoverflow.com/users/170451/karoldepka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2244, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1495611944, "creation_date": 1477251651, "last_edit_date": 1477415739, "question_id": 40207066, "link": "https://stackoverflow.com/questions/40207066/kotlin-build-failed-in-android-studio", "title": "Kotlin build failed in Android Studio", "body": "<p>The error:</p>\n\n<pre><code>Error:Execution failed for task ':synclib:compileKotlin'.\n&gt; com.intellij.openapi.fileTypes.LanguageFileType.&lt;init&gt;(Lcom/intellij/lang/Language;)V\n</code></pre>\n\n<p>The <code>build.gradle</code> file of the <code>synclib</code> module:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'kotlin'\n\n\ncompileJava {\n    sourceCompatibility = 1.7\n    targetCompatibility = 1.7\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n//    compile 'com.android.support:appcompat-v7:23.1.1'\n    compile 'com.firebase:firebase-client-jvm:2.2.3'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n    compile project(':jamodel')\n\n}\nbuildscript {\n    ext.kotlin_version = '1.0.0'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<hr>\n\n<p><strong>How to fix or diagnose this?</strong></p>\n"}, {"tags": ["kotlin", "vert.x"], "answers": [{"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1477375985, "post_id": 40205310, "comment_id": 67727629, "body": "Maven was indeed to blame for it, firstly maven shade wasn&#39;t copying all the font files over for some reason (only half of it), resource filtering was corrupting it as well and even after I got it copying, VertX still wasn&#39;t serving from the font directory, so copying the fonts to resources fixed it. See my updated solution in my question."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1477258648, "last_edit_date": 1495541321, "creation_date": 1477241207, "answer_id": 40205310, "question_id": 40197393, "link": "https://stackoverflow.com/questions/40197393/serve-favicon-ico-and-other-static-files-with-vertx/40205310#40205310", "title": "Serve favicon.ico and other static files with VertX", "body": "<p><strong>Favicon.ico:</strong></p>\n\n<p>Simply move your <code>favicon.ico</code> file up a level into the <code>resources</code> folder directly: </p>\n\n<pre><code>/src/main/resources/favicon.ico\n</code></pre>\n\n<p>Alternatively change your <code>FaviconHandler</code> to pass in the path and filename:</p>\n\n<pre><code>router.route().handler(FaviconHandler.create(FaviconHandler.create(\"webroot/favicon.ico\")))\n</code></pre>\n\n<p>Your code assumes that <code>FaviconHandler</code> also respects the <code>webroot</code> set in <code>StaticHandler</code> but it does not.  That is purely a property of <code>StaticHandler</code> and therefore <code>FaviconHandler</code> looks for the resource in <code>resources/</code> unless you specify a relative path.  When that resource isn't found, <a href=\"https://github.com/vert-x3/vertx-web/blob/09a2463262b46b1826c088624f549b3cbb6f4f01/vertx-web/src/main/java/io/vertx/ext/web/impl/Utils.java#L137\" rel=\"nofollow noreferrer\">it uses the result of <code>getResourceAsStream(\"favicon.ico\")</code></a> which is <code>null</code> and crashes. </p>\n\n<p>If you look at the unit test for the <code>FaviconHandlerImpl</code> you will see that <a href=\"https://github.com/vert-x3/vertx-web/tree/09a2463262b46b1826c088624f549b3cbb6f4f01/vertx-web/src/test/resources\" rel=\"nofollow noreferrer\">they place the favicon.ico file in the root of resources</a> instead of <code>webroot</code>.</p>\n\n<hr>\n\n<p><strong>WOFF Files:</strong></p>\n\n<p>As for your font files you are looking in the wrong place for the problem.  It has nothing to do with MIME types.</p>\n\n<p>More likely is that you corrupted the WOFF files on accident.  This could have happened when you committed them with GIT and it thought they were text files and it broke the line endings thereby corrupting them.  Or you used Maven Filter plugin and it did the same, corrupting them.  Or you uploaded/downloaded them via FTP as text files, same problem.</p>\n\n<p>See other posts about this:  <a href=\"https://stackoverflow.com/a/33792610/3679676\">https://stackoverflow.com/a/33792610/3679676</a> </p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1477241981, "post_id": 40205352, "comment_id": 67675301, "body": "You posted an identical answer to mine 5 minutes after me."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1477242240, "post_id": 40205352, "comment_id": 67675397, "body": "Sorry Jayson, took me time to post it. Still, I don&#39;t think there&#39;s a reason to get angry, since I also provided a way to serve favicon without moving it anywhere."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1477337653, "last_edit_date": 1477337653, "creation_date": 1477241503, "answer_id": 40205352, "question_id": 40197393, "link": "https://stackoverflow.com/questions/40197393/serve-favicon-ico-and-other-static-files-with-vertx/40205352#40205352", "title": "Serve favicon.ico and other static files with VertX", "body": "<p>You don't specify your favicon path, so Vertx tries to locate the default one:</p>\n\n\n\n<pre><code> if (path == null) {\n    icon = new Icon(Utils.readResourceToBuffer(\"favicon.ico\"));\n }\n</code></pre>\n\n<p>Your favicon is located at <code>resources/webroot/favicon.ico</code>, but Vertx looks for it at <code>resources/favicon.ico</code></p>\n\n<p>So you can either specify <code>FaviconHandler.create(\"webroot/favicon.ico\")</code> or move it one directory up.</p>\n\n<p>Regarding WOFF files, I was unable to reproduce the problem, as WOFF returns with <code>application/x-font-woff</code>, which seems correct.</p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 1, "accepted_answer_id": 40205310, "answer_count": 2, "score": 1, "last_activity_date": 1477376238, "creation_date": 1477172810, "last_edit_date": 1477376238, "question_id": 40197393, "link": "https://stackoverflow.com/questions/40197393/serve-favicon-ico-and-other-static-files-with-vertx", "title": "Serve favicon.ico and other static files with VertX", "body": "<p>I'm trying to serve a favicon and some fonts.</p>\n\n<pre><code>object Lion : AbstractVerticle() {\n\n    @JvmStatic\n    @Throws(IOException::class)\n    fun main(args: Array&lt;String&gt;) {\n\n    val vertx = Vertx.vertx()\n    val router = Router.router(vertx)\n\n    router.route().handler(CorsHandler.create(\"*\")\n        .allowedMethod(HttpMethod.GET)\n        .allowedMethod(HttpMethod.POST)\n        .allowedMethod(HttpMethod.OPTIONS)\n        .allowedHeader(\"X-PINGARUNER\")\n        .allowedHeader(\"Content-Type\"))\n\n    // some json GET / POST routes here\n\n    router.route().handler(FaviconHandler.create());\n    router.route().handler(StaticHandler.create())\n\n    vertx.createHttpServer().requestHandler { router.accept(it) }.listen(9090)\n}\n</code></pre>\n\n<p>The <code>FaviconHandler</code> throws an exception causing an \"Internal Server Error\" when I go to <code>http://localhost:9090/favicon.ico</code>\nMy favicon is located in <code>src/main/resources/webroot/favicon.ico</code></p>\n\n<pre><code>Oct 22, 2016 11:16:42 PM io.vertx.ext.web.impl.RoutingContextImplBase\nSEVERE: Unexpected exception in route\njava.lang.RuntimeException: java.lang.NullPointerException\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl.init(FaviconHandlerImpl.java:148)\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl.handle(FaviconHandlerImpl.java:155)\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl.handle(FaviconHandlerImpl.java:33)\n    at io.vertx.ext.web.impl.RouteImpl.handleContext(RouteImpl.java:215)\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:78)\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:94)\n    at io.vertx.ext.web.handler.impl.CorsHandlerImpl.handle(CorsHandlerImpl.java:121)\n    at io.vertx.ext.web.handler.impl.CorsHandlerImpl.handle(CorsHandlerImpl.java:38)\n    at io.vertx.ext.web.impl.RouteImpl.handleContext(RouteImpl.java:215)\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:78)\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:94)\n    at io.vertx.ext.web.impl.RouterImpl.accept(RouterImpl.java:79)\n    at Lion$main$8.handle(Lion.kt:90)\n    at Lion$main$8.handle(Lion.kt:43)\n    at io.vertx.core.http.impl.ServerConnection.handleRequest(ServerConnection.java:286)\n    at io.vertx.core.http.impl.ServerConnection.processMessage(ServerConnection.java:412)\n    at io.vertx.core.http.impl.ServerConnection.handleMessage(ServerConnection.java:139)\n    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.lambda$createConnAndHandle$1(HttpServerImpl.java:712)\n    at io.vertx.core.impl.ContextImpl.lambda$wrapTask$2(ContextImpl.java:314)\n    at io.vertx.core.impl.ContextImpl.executeFromIO(ContextImpl.java:190)\n    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.createConnAndHandle(HttpServerImpl.java:706)\n    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:570)\n    at io.vertx.core.http.impl.HttpServerImpl$ServerHandler.doMessageReceived(HttpServerImpl.java:522)\n    at io.vertx.core.http.impl.VertxHttpHandler.channelRead(VertxHttpHandler.java:76)\n    at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:122)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:350)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:350)\n    at io.vertx.core.http.impl.HttpServerImpl$Http1xOrHttp2Handler.http1(HttpServerImpl.java:1019)\n    at io.vertx.core.http.impl.HttpServerImpl$Http1xOrHttp2Handler.channelRead(HttpServerImpl.java:990)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:350)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:372)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:358)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:129)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:610)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:551)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:465)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:437)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.NullPointerException\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl$Icon.&lt;init&gt;(FaviconHandlerImpl.java:61)\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl$Icon.&lt;init&gt;(FaviconHandlerImpl.java:40)\n    at io.vertx.ext.web.handler.impl.FaviconHandlerImpl.init(FaviconHandlerImpl.java:143)\n    ... 48 more\n</code></pre>\n\n<p>Removing the <code>FaviconHandler</code> and normal <code>html</code>, <code>js</code> and <code>css</code> files are serving fine, but fonts are failing to serve.</p>\n\n<pre><code>Failed to decode downloaded font: http://localhost:9090/fonts/glyphicons-halflings-regular.woff\n/#/tcr:1 OTS parsing error: incorrect file size in WOFF header\n</code></pre>\n\n<p>When I go directly to that font-url, the browser is trying to download the font as a regular file.</p>\n\n<p>This seems like a potential solution, but I'm seeing something that is not my favicon, just a 16x16 square with distorted lines in it, the fonts are still trying to download and still giving the error in the browser console.</p>\n\n<pre><code>    router.route(\"/favicon.ico\").handler {\n        it.response().putHeader(\"Content-Type\", \"image/x-icon\").sendFile(\"webroot/favicon.ico\")\n    }\n\n    router.route(\"/fonts/glyphicons-halflings-regular.woff\").handler { \n         it.response().putHeader(\"Content-Type\", \"application/font-woff\").sendFile(\"webroot/fonts/glyphicons-halflings-regular.woff\")\n    }\n</code></pre>\n\n<p>So to sum up, how do I make the <code>StaticHandler</code> serve <code>.woff</code> and <code>.ico</code> files correctly with the correct MimeTypes and not have it download those files?</p>\n\n<p><strong>Solution</strong>:</p>\n\n<p>First problem I had was that maven shade wasn't copying all the font files into jar for some reason.</p>\n\n<p>Explicitly copying the font files on build and disabling resource filtering for fonts seems to have fixed the font issue.</p>\n\n<pre><code>&lt;build&gt;\n    &lt;sourceDirectory&gt;${basedir}/src/main/java&lt;/sourceDirectory&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${basedir}/src/main/resources/fonts&lt;/directory&gt;\n            &lt;filtering&gt;false&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<p>Then serving the fonts from the resource directory instead of the font directory fixed it (VertX just wouldn't serve from the font directory for some reason even though the files are there)</p>\n\n<p><a href=\"https://i.stack.imgur.com/hdAcl.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/hdAcl.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>   router.route(\"/fonts/glyphicons-halflings-regular.woff2\").handler {\n            it.response().sendFile(\"glyphicons-halflings-regular.woff2\")\n        }\n        router.route(\"/fonts/glyphicons-halflings-regular.woff\").handler {\n            it.response().sendFile(\"glyphicons-halflings-regular.woff\")\n        }\n        router.route(\"/fonts/glyphicons-halflings-regular.ttf\").handler {\n            it.response().sendFile(\"glyphicons-halflings-regular.ttf\")\n        }\n        router.route().handler(StaticHandler.create().setCachingEnabled(true));\n</code></pre>\n\n<p>Favicon is probably being cached, still investigating, favicon is not that critical to fix at the moment.</p>\n\n<pre><code>router.route(\"/favicon.ico\").handler(FaviconHandler.create(\"favicon.ico\"))\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "robolectric"], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 381031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc52b504839afbbd913e8d4285c4b6d?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/381031/anton"}, "is_accepted": false, "score": 1, "last_activity_date": 1487681936, "creation_date": 1487681936, "answer_id": 42368006, "question_id": 40192294, "link": "https://stackoverflow.com/questions/40192294/robolectric-keystorekeygenerator/42368006#42368006", "title": "Robolectric KeyStoreKeyGenerator", "body": "<p>I manage to solve it by writing a custom shadow <a href=\"http://robolectric.org/custom-shadows/\" rel=\"nofollow noreferrer\">http://robolectric.org/custom-shadows/</a> </p>\n\n<pre><code>@Implements(android.security.KeyChain.class)\npublic class KeyChainShadow {\n   @RealObject\n   private KeyChain keyChain;\n\n\n    @Implementation\n    public static boolean isBoundKeyAlgorithm(String algorithm) {\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>don't forget to annotate your test with</p>\n\n<pre><code>@Config(shadows = KeyChainShadow.class)\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 3329708, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rH4LC.png?s=128&g=1", "display_name": "Master Disaster", "link": "https://stackoverflow.com/users/3329708/master-disaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1487681936, "creation_date": 1477140074, "question_id": 40192294, "link": "https://stackoverflow.com/questions/40192294/robolectric-keystorekeygenerator", "title": "Robolectric KeyStoreKeyGenerator", "body": "<p>I'm using in my project Dagger2, KeyStoreKeyGenerator (from in.co.ophio.secure) and I want to use Robolectric to test my Fragment. </p>\n\n<p>I inject presenter to my Fragment. Presenter has userPrefs injected. UserPrefs have KeyStoreKeyGenerator implemented</p>\n\n<pre><code>class UserPreferences(val application: App) : UserPreferencesAPI {\n// another methods and fields\n    private val keyGenerator = KeyStoreKeyGenerator.get(application, application.packageName)\n}\n</code></pre>\n\n<p>this is my presenter</p>\n\n<pre><code> class MainPresenter(...,\n                        val sharedPreference: UserPreferencesAPI)\n</code></pre>\n\n<p>and this is my test</p>\n\n<pre><code>private MainFragment fragment;\nprivate MainActivity activity;\n\n@Before\npublic void setUp() {\n    activity = Robolectric.buildActivity(MainActivity.class).create().start().resume().get();\n    fragment = MainFragment.Companion.newInstance();\n}\n\n@Test\npublic void shouldBeNotNull() {\n    Assertions.assertThat(activity).isNotNull();\n}\n</code></pre>\n\n<p>After running test I see: </p>\n\n<pre><code>java.lang.NullPointerException\n    at android.security.KeyStore.isHardwareBacked(KeyStore.java:318)\n    at android.security.KeyChain.isBoundKeyAlgorithm(KeyChain.java:397)\n    at in.co.ophio.secure.core.KeyStoreKeyGenerator.&lt;init&gt;(KeyStoreKeyGenerator.java:41)\n    at in.co.ophio.secure.core.KeyStoreKeyGenerator.get(KeyStoreKeyGenerator.java:56)\n    at unofficial.coderoid.wykop.newapp.utils.UserPreferences.&lt;init&gt;(UserPreferences.kt:24)\n</code></pre>\n\n<p>Should I create shadow KeyStoreKeyGenerator? Should I wrap KeyStore class using interface? </p>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1477225475, "creation_date": 1477225475, "answer_id": 40202855, "question_id": 40190661, "link": "https://stackoverflow.com/questions/40190661/spring-cant-handle-method-returning-generic-inner-kotlin-class/40202855#40202855", "title": "Spring can&#39;t handle method returning generic inner Kotlin class", "body": "<p>I am sorry to say this, but it is a known bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-10397\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-10397</a></p>\n\n<p>I think that for the time being it will be best to create a concrete class basing on the generic one and use it as a return type.</p>\n"}], "owner": {"reputation": 2701, "user_id": 1712934, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dd9d51b0b7d8ec7b57f177ffe66d17ad?s=128&d=identicon&r=PG", "display_name": "jakub.petr", "link": "https://stackoverflow.com/users/1712934/jakub-petr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 40202855, "answer_count": 1, "score": 2, "last_activity_date": 1477225475, "creation_date": 1477129697, "question_id": 40190661, "link": "https://stackoverflow.com/questions/40190661/spring-cant-handle-method-returning-generic-inner-kotlin-class", "title": "Spring can&#39;t handle method returning generic inner Kotlin class", "body": "<p>I am new to Kotlin so maybe I misunderstood something but this class:</p>\n\n<pre><code>    @Component\n    open class SimpleStoreBuilder {\n           open fun &lt;T : Entity&gt; build(tableName: String): Store&lt;T&gt;? {\n            return Store()\n        }\n\n        inner class Store&lt;T:Entity&gt;\n    }\n</code></pre>\n\n<p>throws this runtime exception</p>\n\n<pre><code>    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'storeBuilder' defined in file [xxx\\StoreBuilder.class]: Initialization of bean failed; nested exception is java.lang.reflect.GenericSignatureFormatError: Signature Parse error: expected '&lt;' or ';' but got .\n        Remaining input: .Store&lt;TT;&gt;;\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:751) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861) ~[spring-context-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541) ~[spring-context-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.1.RELEASE.jar:1.4.1.RELEASE]\n        at cz.webexo.ApplicationKt.main(Application.kt:28) [main/:na]\n    Caused by: java.lang.reflect.GenericSignatureFormatError: Signature Parse error: expected '&lt;' or ';' but got .\n        Remaining input: .Store&lt;TT;&gt;;\n        at sun.reflect.generics.parser.SignatureParser.error(SignatureParser.java:124) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parsePackageNameAndSimpleClassTypeSignature(SignatureParser.java:348) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseClassTypeSignature(SignatureParser.java:310) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseFieldTypeSignature(SignatureParser.java:289) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseFieldTypeSignature(SignatureParser.java:283) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseTypeSignature(SignatureParser.java:485) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseReturnType(SignatureParser.java:627) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseMethodTypeSignature(SignatureParser.java:577) ~[na:1.8.0_101]\n        at sun.reflect.generics.parser.SignatureParser.parseMethodSig(SignatureParser.java:171) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.ConstructorRepository.parse(ConstructorRepository.java:55) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.ConstructorRepository.parse(ConstructorRepository.java:43) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.AbstractRepository.&lt;init&gt;(AbstractRepository.java:74) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.GenericDeclRepository.&lt;init&gt;(GenericDeclRepository.java:49) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.ConstructorRepository.&lt;init&gt;(ConstructorRepository.java:51) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.MethodRepository.&lt;init&gt;(MethodRepository.java:46) ~[na:1.8.0_101]\n        at sun.reflect.generics.repository.MethodRepository.make(MethodRepository.java:59) ~[na:1.8.0_101]\n        at java.lang.reflect.Method.getGenericInfo(Method.java:102) ~[na:1.8.0_101]\n        at java.lang.reflect.Method.getGenericInfo(Method.java:61) ~[na:1.8.0_101]\n        at java.lang.reflect.Executable.getGenericParameterTypes(Executable.java:283) ~[na:1.8.0_101]\n        at java.lang.reflect.Method.getGenericParameterTypes(Method.java:283) ~[na:1.8.0_101]\n        at java.beans.FeatureDescriptor.getParameterTypes(FeatureDescriptor.java:387) ~[na:1.8.0_101]\n        at java.beans.MethodDescriptor.setMethod(MethodDescriptor.java:116) ~[na:1.8.0_101]\n        at java.beans.MethodDescriptor.&lt;init&gt;(MethodDescriptor.java:72) ~[na:1.8.0_101]\n        at java.beans.MethodDescriptor.&lt;init&gt;(MethodDescriptor.java:56) ~[na:1.8.0_101]\n        at java.beans.Introspector.getTargetMethodInfo(Introspector.java:1205) ~[na:1.8.0_101]\n        at java.beans.Introspector.getBeanInfo(Introspector.java:426) ~[na:1.8.0_101]\n        at java.beans.Introspector.getBeanInfo(Introspector.java:262) ~[na:1.8.0_101]\n        at java.beans.Introspector.getBeanInfo(Introspector.java:204) ~[na:1.8.0_101]\n        at org.springframework.beans.CachedIntrospectionResults.&lt;init&gt;(CachedIntrospectionResults.java:278) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:189) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:173) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.BeanWrapperImpl.getPropertyDescriptors(BeanWrapperImpl.java:248) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.filterPropertyDescriptorsForDependencyCheck(AbstractAutowireCapableBeanFactory.java:1373) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.filterPropertyDescriptorsForDependencyCheck(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543) ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n        ... 15 common frames omitted\n</code></pre>\n\n<p>Is this a bug or am I doing something wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin", "purely-functional"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1479072979, "post_id": 40184983, "comment_id": 68393906, "body": "Have you found answer?"}], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 3, "creation_date": 1477084369, "post_id": 40185197, "comment_id": 67638651, "body": "&quot;In Kotlin, a list is always Mutable&quot; That&#39;s simply not true. You can get exceptions if you call mutating methods because the underlying list may be anything e.g. an <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Collections.kt#L35\" rel=\"nofollow noreferrer\">EmptyList</a>."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1477084574, "post_id": 40185197, "comment_id": 67638726, "body": "@KirillRakhman you&#39;re right, I was actually only referring to lists created with <code>mutableListOf</code> or the standard constructors - updated the answer"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1477084960, "post_id": 40185197, "comment_id": 67638886, "body": "and nice to know: <code>listOf</code> (currently) calls to java&#39;s <code>Arrays.asList</code>, which actually creates this weird ArrayList that is not really ArrayList, since it&#39;s using the array as backing array for performance reasons."}, {"owner": {"reputation": 1321, "user_id": 2516450, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca5efa3a8024f0cd6f19edf4887c10e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2516450/eric"}, "edited": false, "score": 2, "creation_date": 1477097968, "post_id": 40185197, "comment_id": 67642086, "body": "Sorry, but by &quot;update an element in an immutable list&quot; I meant create a second immutable list with one element updated without modifying the original. I&#39;ve clarified the question."}], "tags": [], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "is_accepted": false, "score": 0, "last_activity_date": 1477114066, "last_edit_date": 1477114066, "creation_date": 1477082831, "answer_id": 40185197, "question_id": 40184983, "link": "https://stackoverflow.com/questions/40184983/kotlin-update-immutable-list-element/40185197#40185197", "title": "Kotlin: Update Immutable List Element", "body": "<p><strong>Edit:</strong>\nWith your updated question, I'd say that using <code>map</code>-like operations is the most performant way to do this, since it copies the list only once.</p>\n\n<hr>\n\n<p>If you're using <code>mutableListOf</code> or normal constructors like <code>ArrayList()</code> to create the instance you can simply cast the <code>List</code> to <code>MutableList</code>:</p>\n\n<pre><code>val mp = players as MutableList&lt;Player&gt;\nmp[2] = mp[2].copy(score = 100)\n</code></pre>\n\n<p><code>toList</code>/<code>toMutableList</code> will duplicate the list items, so you're right with the performance impact.</p>\n\n<p>However, the idea is actually that if you <em>need</em> mutability, you declare the property as MutableList. \nYou can use a construct like this - using two properties - if you need to expose the list to another object:</p>\n\n<pre><code>private val _players = mutableListOf&lt;Player&gt;()\nval players: List&lt;Player&gt; \n       get() = _players.toList()\n</code></pre>\n\n<p>For the <code>score</code> variable it's similar - if you need to change it, it's OK to declare it as <code>var</code>:</p>\n\n<pre><code>data class Player(val name: String, var score: Int = 0)\n</code></pre>\n\n<p>In this case, you can also just keep the immutable List and just update the value:</p>\n\n<pre><code>players[2].score = 100\n</code></pre>\n\n<p>You can find more details on collections in the docs: <a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/collections.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1477318357, "post_id": 40208700, "comment_id": 67704567, "body": "Nice benchmarks but it looks like some work is done in <code>setup</code> for some benchmarks that should be done in the benchmark itself to compare apples with apples. <a href=\"https://github.com/KotlinBy/kotlin-benchmarks/commit/6811c5afb0e3dee6288fff9f40ce3559a1d094ac#commitcomment-19541238\" rel=\"nofollow noreferrer\">github.com/KotlinBy/kotlin-benchmarks/commit/&hellip;</a>"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1477318958, "post_id": 40208700, "comment_id": 67705007, "body": "No, because we don&#39;t measure cost of creating collections, but modifying. Having right collection is requirements in this case.   Depending of what @Eric do, he can create <code>PVector</code> instead of <code>List</code>, so wrapping then not required. Same for mutable case. Cost of <code>TreePVector.from</code> can be another benchmark."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1477319472, "post_id": 40208700, "comment_id": 67705403, "body": "I see. Thanks @IRus. From what I understood from Eric&#39;s question he has a list and wants to create a copy of it with an updated element so that is why I was thinking that the cost of creating the copy should be included in each benchmark."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1477319565, "post_id": 40208700, "comment_id": 67705470, "body": "Note that the call in the <code>toMutable</code> benchmark to <code>toList</code> is unnecessary. A <code>MutableList</code> is already a <code>List</code>. Copying the list is not necessary in order to return a <code>List</code>."}, {"owner": {"reputation": 1321, "user_id": 2516450, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca5efa3a8024f0cd6f19edf4887c10e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2516450/eric"}, "edited": false, "score": 0, "creation_date": 1523974863, "post_id": 40208700, "comment_id": 86776919, "body": "So it looks like your answer is, &quot;For large collections, using <code>PVector</code> to begin with (don&#39;t convert from a list) is the only way to get decent immutable performance. For small collections, use <code>PVector</code>, <code>toMutable</code>, or <code>toArrayList</code>.&quot; Is that your advice?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 1321, "user_id": 2516450, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca5efa3a8024f0cd6f19edf4887c10e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2516450/eric"}, "edited": false, "score": 0, "creation_date": 1524064546, "post_id": 40208700, "comment_id": 86822215, "body": "@Eric Sure, for large immutable data structures use <i>persistent data structures</i> like <code>pcollections</code>. For small data structures you can also use <code>pcollections</code> or approaches like <code>toMutable</code> or <code>toArrayList</code>."}, {"owner": {"reputation": 1321, "user_id": 2516450, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca5efa3a8024f0cd6f19edf4887c10e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2516450/eric"}, "edited": false, "score": 0, "creation_date": 1524159666, "post_id": 40208700, "comment_id": 86870182, "body": "Would you mind adding something like a summary at the beginning or end of your answer saying that? Your answer is quite good and thorough so I think it would benefit from such a summary."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 14, "last_activity_date": 1569946642, "last_edit_date": 1569946642, "creation_date": 1477263963, "answer_id": 40208700, "question_id": 40184983, "link": "https://stackoverflow.com/questions/40184983/kotlin-update-immutable-list-element/40208700#40208700", "title": "Kotlin: Update Immutable List Element", "body": "<p>For me obvious that second way should be faster, but how much?</p>\n\n<p>So I wrote some benchmarks <a href=\"https://github.com/KotlinBy/kotlin-benchmarks/blob/master/src/main/kotlin/by/bkug/benchmarks/ModifyingImmutableList.kt#L9\" rel=\"noreferrer\">here</a></p>\n\n<pre><code>@State(Scope.Thread)\nopen class ModifyingImmutableList {\n\n    @Param(\"10\", \"100\", \"10000\", \"1000000\")\n    var size: Int = 0\n\n    lateinit var players: List&lt;Player&gt;\n\n    @Setup\n    fun setup() {\n        players = generatePlayers(size)\n    }\n\n    @Benchmark fun iterative(): List&lt;Player&gt; {\n        return players.mapIndexed { i, player -&gt;\n            if (i == 2) player.copy(score = 100)\n            else player\n        }\n    }\n\n    @Benchmark fun toMutable(): List&lt;Player&gt; {\n        val updatedPlayer = players[2].copy(score = 100)\n        val mutable = players.toMutableList()\n        mutable.set(2, updatedPlayer)\n        return mutable.toList()\n    }\n\n    @Benchmark fun toArrayList(): List&lt;Player&gt; {\n        val updatedPlayer = players[2].copy(score = 100)\n        return players.set(2, updatedPlayer)\n    }\n}\n</code></pre>\n\n<p>And got following <a href=\"https://github.com/KotlinBy/kotlin-benchmarks/blob/master/src/main/kotlin/by/bkug/benchmarks/ModifyingImmutableList.results\" rel=\"noreferrer\">results</a>:</p>\n\n<pre><code>$ java -jar target/benchmarks.jar -f 5 -wi 5 ModifyingImmutableList\nBenchmark                            (size)   Mode  Cnt         Score        Error  Units\nModifyingImmutableList.iterative         10  thrpt  100   6885018.769 \u00b1 189148.764  ops/s\nModifyingImmutableList.iterative        100  thrpt  100    877403.066 \u00b1  20792.117  ops/s\nModifyingImmutableList.iterative      10000  thrpt  100     10456.272 \u00b1    382.177  ops/s\nModifyingImmutableList.iterative    1000000  thrpt  100       108.167 \u00b1      3.506  ops/s\nModifyingImmutableList.toArrayList       10  thrpt  100  33278431.127 \u00b1 560577.516  ops/s\nModifyingImmutableList.toArrayList      100  thrpt  100  11009646.095 \u00b1 180549.177  ops/s\nModifyingImmutableList.toArrayList    10000  thrpt  100    129167.033 \u00b1   2532.945  ops/s\nModifyingImmutableList.toArrayList  1000000  thrpt  100       528.502 \u00b1     16.451  ops/s\nModifyingImmutableList.toMutable         10  thrpt  100  19679357.039 \u00b1 338925.701  ops/s\nModifyingImmutableList.toMutable        100  thrpt  100   5504388.388 \u00b1 102757.671  ops/s\nModifyingImmutableList.toMutable      10000  thrpt  100     62809.131 \u00b1   1070.111  ops/s\nModifyingImmutableList.toMutable    1000000  thrpt  100       258.013 \u00b1      8.076  ops/s\n</code></pre>\n\n<p>So this tests shows that iterating over collection about 3~6 times slower, that copying. Also I provide my implementation: <a href=\"https://github.com/KotlinBy/kotlin-benchmarks/blob/master/src/main/kotlin/by/bkug/benchmarks/ModifyingImmutableListHelpers.kt#L7\" rel=\"noreferrer\">toArray</a>, which looks like more performant.</p>\n\n<p>On 10 element, <code>toArray</code> method has throughput <code>33278431.127 \u00b1 560577.516</code> operations per second. Is it slow? Or it's extremely fast? I write \"baseline\" test, which shows cost of copying <code>Players</code> and mutating array. Results interesting:</p>\n\n<pre><code>@Benchmark fun baseline(): List&lt;Player&gt; {\n    val updatedPlayer = players[2].copy(score = 100)\n    mutable[2] = updatedPlayer;\n    return mutable\n}\n</code></pre>\n\n<p>Where mutable - just <code>MutableList</code>, which is <code>ArrayList</code>.</p>\n\n<pre><code>$ java -jar target/benchmarks.jar -f 5 -wi 5 ModifyingImmutableList\nBenchmark                            (size)   Mode  Cnt         Score         Error  Units\nModifyingImmutableList.baseline          10  thrpt  100  81026110.043 \u00b1 1076989.958  ops/s\nModifyingImmutableList.baseline         100  thrpt  100  81299168.496 \u00b1  910200.124  ops/s\nModifyingImmutableList.baseline       10000  thrpt  100  81854190.779 \u00b1 1010264.620  ops/s\nModifyingImmutableList.baseline     1000000  thrpt  100  83906022.547 \u00b1  615205.008  ops/s\nModifyingImmutableList.toArrayList       10  thrpt  100  33090236.757 \u00b1  518459.863  ops/s\nModifyingImmutableList.toArrayList      100  thrpt  100  11074338.763 \u00b1  138272.711  ops/s\nModifyingImmutableList.toArrayList    10000  thrpt  100    131486.634 \u00b1    1188.045  ops/s\nModifyingImmutableList.toArrayList  1000000  thrpt  100       531.425 \u00b1      18.513  ops/s\n</code></pre>\n\n<p>On 10 elements we have 2x regression, and on 1 million about 150000x!</p>\n\n<p>So looks like <code>ArrayList</code> not the best choice for immutable data structures. But there are a lot other collections, one of them is <a href=\"https://github.com/hrldcpr/pcollections\" rel=\"noreferrer\">pcollections</a>. Let's see what they got in our scenario:</p>\n\n<pre><code>@Benchmark fun pcollections(): List&lt;Player&gt; {\n    val updatedPlayer = players[2].copy(score = 100)\n    return pvector.with(2, updatedPlayer)\n}\n</code></pre>\n\n<p>Where pvector is <code>pvector:PVector&lt;Player&gt; = TreePVector.from(players)</code>.</p>\n\n<pre><code>$ java -jar target/benchmarks.jar -f 5 -wi 5 ModifyingImmutableList\nBenchmark                             (size)   Mode  Cnt         Score         Error  Units\nModifyingImmutableList.baseline           10  thrpt  100  79462416.691 \u00b1 1391446.159  ops/s\nModifyingImmutableList.baseline          100  thrpt  100  79991447.499 \u00b1 1328008.619  ops/s\nModifyingImmutableList.baseline        10000  thrpt  100  80017095.482 \u00b1 1385143.058  ops/s\nModifyingImmutableList.baseline      1000000  thrpt  100  81358696.411 \u00b1 1308714.098  ops/s\nModifyingImmutableList.pcollections       10  thrpt  100  15665979.142 \u00b1  371910.991  ops/s\nModifyingImmutableList.pcollections      100  thrpt  100   9419433.113 \u00b1  161562.675  ops/s\nModifyingImmutableList.pcollections    10000  thrpt  100   4747628.815 \u00b1   81192.752  ops/s\nModifyingImmutableList.pcollections  1000000  thrpt  100   3011819.457 \u00b1   45548.403  ops/s\n</code></pre>\n\n<p>Nice results! On 1 million case we have only 27x slower execution, which is pretty cool, but on small collections <code>pcollections</code> little bit slower that <code>ArrayList</code> implementation.</p>\n\n<p><strong>Update</strong>: as @mfulton26 mentioned, in <code>toMutable</code> benchmark <code>toList</code> is unnecessary, so I deleted it and reran tests. Also I added benchmark on cost of creation <code>TreePVector</code> from existing array:</p>\n\n<pre><code>$ java -jar target/benchmarks.jar  ModifyingImmutableList\nBenchmark                                 (size)   Mode  Cnt         Score         Error  Units\nModifyingImmutableList.baseline               10  thrpt  200  77639718.988 \u00b1 1384171.128  ops/s\nModifyingImmutableList.baseline              100  thrpt  200  75978576.147 \u00b1 1528533.332  ops/s\nModifyingImmutableList.baseline            10000  thrpt  200  79041238.378 \u00b1 1137107.301  ops/s\nModifyingImmutableList.baseline          1000000  thrpt  200  84739641.265 \u00b1  557334.317  ops/s\n\nModifyingImmutableList.iterative              10  thrpt  200   7389762.016 \u00b1   72981.918  ops/s\nModifyingImmutableList.iterative             100  thrpt  200    956362.269 \u00b1   11642.808  ops/s\nModifyingImmutableList.iterative           10000  thrpt  200     10953.451 \u00b1     121.175  ops/s\nModifyingImmutableList.iterative         1000000  thrpt  200       115.379 \u00b1       1.301  ops/s\n\nModifyingImmutableList.pcollections           10  thrpt  200  15984856.119 \u00b1  162075.427  ops/s\nModifyingImmutableList.pcollections          100  thrpt  200   9322011.769 \u00b1  176301.745  ops/s\nModifyingImmutableList.pcollections        10000  thrpt  200   4854742.140 \u00b1   69066.751  ops/s\nModifyingImmutableList.pcollections      1000000  thrpt  200   3064251.812 \u00b1   35972.244  ops/s\n\nModifyingImmutableList.pcollectionsFrom       10  thrpt  200   1585762.689 \u00b1   20972.881  ops/s\nModifyingImmutableList.pcollectionsFrom      100  thrpt  200     67107.504 \u00b1     808.308  ops/s\nModifyingImmutableList.pcollectionsFrom    10000  thrpt  200       268.268 \u00b1       2.901  ops/s\nModifyingImmutableList.pcollectionsFrom  1000000  thrpt  200         1.406 \u00b1       0.015  ops/s\n\nModifyingImmutableList.toArrayList            10  thrpt  200  34567833.775 \u00b1  423910.463  ops/s\nModifyingImmutableList.toArrayList           100  thrpt  200  11395084.257 \u00b1   76689.517  ops/s\nModifyingImmutableList.toArrayList         10000  thrpt  200    134299.055 \u00b1     602.848  ops/s\nModifyingImmutableList.toArrayList       1000000  thrpt  200       549.064 \u00b1      15.317  ops/s\n\nModifyingImmutableList.toMutable              10  thrpt  200  32441627.735 \u00b1  391890.514  ops/s\nModifyingImmutableList.toMutable             100  thrpt  200  11505955.564 \u00b1   71394.457  ops/s\nModifyingImmutableList.toMutable           10000  thrpt  200    134819.741 \u00b1     526.830  ops/s\nModifyingImmutableList.toMutable         1000000  thrpt  200       561.031 \u00b1       8.117  ops/s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 7, "last_activity_date": 1477316230, "creation_date": 1477316230, "answer_id": 40219906, "question_id": 40184983, "link": "https://stackoverflow.com/questions/40184983/kotlin-update-immutable-list-element/40219906#40219906", "title": "Kotlin: Update Immutable List Element", "body": "<p>Kotlin's <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/\" rel=\"noreferrer\"><code>List</code></a> interface is for \"read-only access\" to lists which are not necessarily immutable lists. Immutability cannot be enforced via interfaces. Kotlin's stdlib's <a href=\"https://github.com/JetBrains/kotlin/blob/3f5d3e5dbc7f974b773c30c3c4f330602076ad4e/libraries/stdlib/src/generated/_Collections.kt#L1056-L1068\" rel=\"noreferrer\">current implementation</a> for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to-list.html\" rel=\"noreferrer\"><code>toList</code></a> calls, in some cases, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-mutable-list.html\" rel=\"noreferrer\"><code>toMutableList</code></a> and returns its result as a \"read-only access\" <code>List</code>.</p>\n\n<p>If you have a <code>List</code> of players and want to efficiently get another <code>List</code> of players with an updated element then one straightforward solution is to copy the list to a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/\" rel=\"noreferrer\"><code>MutableList</code></a>, update the desired element, and then only store a reference to the resulting list using Kotlin's \"read-only access\" <code>List</code> interface:</p>\n\n<pre><code>val updatedPlayers: List&lt;Player&gt; = players.toMutableList().apply {\n    this[2] = updatedPlayer\n}\n</code></pre>\n\n<p>If this is something you intend to do often you might consider creating an extension function to encapsulate the implementation details:</p>\n\n<pre><code>inline fun &lt;T&gt; List&lt;T&gt;.copy(mutatorBlock: MutableList&lt;T&gt;.() -&gt; Unit): List&lt;T&gt; {\n    return toMutableList().apply(mutatorBlock)\n}\n</code></pre>\n\n<p>Then you can copy lists with updates more fluently (similar to data class copying) without needing to specify the result type explicitly:</p>\n\n<pre><code>val updatedPlayers = players.copy { this[2] = updatedPlayer }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "is_accepted": false, "score": 1, "last_activity_date": 1577455354, "creation_date": 1577455354, "answer_id": 59501867, "question_id": 40184983, "link": "https://stackoverflow.com/questions/40184983/kotlin-update-immutable-list-element/59501867#59501867", "title": "Kotlin: Update Immutable List Element", "body": "<p>I don't understand why those 2 approaches are compared in terms of their corresponding performance. In the first one you are traversing over all elements of the collection, in the second one you go straight to the needed one by its index.\nTraversal doesn't come for free.</p>\n"}], "owner": {"reputation": 1321, "user_id": 2516450, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ca5efa3a8024f0cd6f19edf4887c10e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2516450/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22749, "favorite_count": 4, "accepted_answer_id": 40208700, "answer_count": 4, "score": 21, "last_activity_date": 1577455354, "creation_date": 1477081844, "last_edit_date": 1477097877, "question_id": 40184983, "link": "https://stackoverflow.com/questions/40184983/kotlin-update-immutable-list-element", "title": "Kotlin: Update Immutable List Element", "body": "<p>Kotlin beginner here. How do I take a list and without mutating it, create a second (immutable) list with one updated element at a specific index?</p>\n\n<p>I'm thinking of two ways, both of which seem like they may incur performance hits, mutate the underlying object, or both.</p>\n\n<pre><code>data class Player(val name: String, val score: Int = 0)\n\nval players: List&lt;Player&gt; = ...\n\n// Do I do this?\nval updatedPlayers1 = players.mapIndexed { i, player -&gt;\n    if (i == 2) player.copy(score = 100)\n    else player\n}\n\n// Or this?\nval updatedPlayer = players[2].copy(score = 100)\nval mutable = players.toMutableList()\nmutable.set(2, updatedPlayer)\nval updatedPlayers2 = mutable.toList()\n</code></pre>\n\n<p>If there is no performant way to do this, is there a more appropriate data structure in the Kotlin stdlib or other library? Kotlin doesn't seem to have vectors.</p>\n"}, {"tags": ["android", "caching", "rx-java", "kotlin", "race-condition"], "comments": [{"owner": {"reputation": 2223, "user_id": 420594, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3fba8e622e5e4266e5d90b0eebe41bb?s=128&d=identicon&r=PG", "display_name": "drhr", "link": "https://stackoverflow.com/users/420594/drhr"}, "edited": false, "score": 0, "creation_date": 1477097334, "post_id": 40183292, "comment_id": 67641975, "body": "From the two fragments&#39; perspectives, is <code>ReactiveCache</code>, or the <code>ApiFilmsStore</code> that uses it, used as a singleton (perhaps via a DI framework)? In other words, is it the same object? In other words, have you ruled out yet that you might have two separate caches?"}, {"owner": {"reputation": 2223, "user_id": 420594, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3fba8e622e5e4266e5d90b0eebe41bb?s=128&d=identicon&r=PG", "display_name": "drhr", "link": "https://stackoverflow.com/users/420594/drhr"}, "edited": false, "score": 0, "creation_date": 1477097502, "post_id": 40183292, "comment_id": 67642008, "body": "(also, side note:   when you have this: <code>.flatMap { apiFilm -&gt; Observable.just(converter.convert(apiFilm)) }</code> consider using <code>.map { apiFilm -&gt; converter.convert(apiFilm) }</code>, or w/ lambda methods <code>.map(converter::convert)</code>)"}, {"owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "reply_to_user": {"reputation": 2223, "user_id": 420594, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3fba8e622e5e4266e5d90b0eebe41bb?s=128&d=identicon&r=PG", "display_name": "drhr", "link": "https://stackoverflow.com/users/420594/drhr"}, "edited": false, "score": 0, "creation_date": 1477125641, "post_id": 40183292, "comment_id": 67646717, "body": "Thanks for answering. Yes, both fragments are using the same instance. I&#39;m using a singleton CacheableFilmsStore with Dagger2. I have changed flatMap with map, nice point ;)"}], "answers": [{"tags": [], "owner": {"reputation": 2223, "user_id": 420594, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3fba8e622e5e4266e5d90b0eebe41bb?s=128&d=identicon&r=PG", "display_name": "drhr", "link": "https://stackoverflow.com/users/420594/drhr"}, "is_accepted": false, "score": 0, "last_activity_date": 1477190522, "last_edit_date": 1477190522, "creation_date": 1477178964, "answer_id": 40198049, "question_id": 40183292, "link": "https://stackoverflow.com/questions/40183292/cache-data-from-http-request-in-rxjava/40198049#40198049", "title": "Cache data from HTTP request in RxJava", "body": "<p>One possibility would be for the cache to multicast.</p>\n\n<p>There might be a better to do it, but here's a rough idea (please forgive the Java):</p>\n\n<p><strong>CacheableFilmsStore:</strong></p>\n\n<pre><code>// A map since you'll likely want to separate this by key.\nMap&lt;String, Observable&lt;T&gt;&gt; observableMap = new HashMap&lt;&gt;();\n\n...get(...) {\n    if (observableMap.containsKey(key)) { \n        return observableMap.get(key); \n    } else {\n        Observable&lt;T&gt; observable = Observable.create(...)\n            .publish()     // distributes results to all active subscribers\n            .refCount();   // cleans up resources established by `publish()`\n        observableMap.put(key, observable);\n        return observable;\n    }\n}\n</code></pre>\n\n<p>Scenarios:</p>\n\n<ol>\n<li><p>If the result for this key is not yet in your LruCache, then both fragments should end up listening to just one API call, not two.</p></li>\n<li><p>If a subsequent fetch is made, then it will hit your cache straight away and be done.</p></li>\n</ol>\n\n<p>When the source observable completes (and all subscribers receive their OnComplete), then <code>refCount</code> will cause the <code>ConnectableObservable</code> created by <code>publish()</code> to be <em>disconnected</em> and cleaned up - but note that it is still usable. The next time that Observable object (created by <code>refCount()</code>) is subscribed to, it will simply re-connect.</p>\n"}], "owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477190522, "creation_date": 1477074644, "question_id": 40183292, "link": "https://stackoverflow.com/questions/40183292/cache-data-from-http-request-in-rxjava", "title": "Cache data from HTTP request in RxJava", "body": "<p>I have this FilmStore that fetch a film from a REST API.</p>\n\n<pre><code>class ApiFilmsStore(private val tmdApi: TmdApi, private val converter: ApiFilmToFilmConverter) : FilmsStore {\n\n    override fun get(filmId: String): Observable&lt;Film&gt; {\n        return tmdApi.filmById(filmId).flatMap { apiFilm -&gt; Observable.just(converter.convert(apiFilm)) }\n                .subscribeOn(Schedulers.newThread()).observeOn(AndroidSchedulers.mainThread())\n    }\n\n}\n</code></pre>\n\n<p>I have this another one that is a decorator to return data from cache if exists:</p>\n\n<pre><code>class CacheableFilmsStore(private val origin: FilmsStore) : FilmsStore {\n\n    private val cache = ReactiveCache&lt;Film&gt;()\n\n    override fun get(filmId: String): Observable&lt;Film&gt; {\n        return cache[filmId].onErrorResumeNext({\n            origin[filmId].doOnNext { film -&gt;\n                cache.put(filmId, film)\n            }\n        })\n    }\n\n}\n</code></pre>\n\n<p>And I have this class ReactiveCache that manages the in-memory data:</p>\n\n<pre><code>class ReactiveCache&lt;T&gt; {\n\n    private val cache = LruCache&lt;String, T&gt;(4 * 1024 * 1024) //4MiB\n\n    operator fun get(key: String): Observable&lt;T&gt; {\n        return Observable.create { subscriber -&gt;\n            //synchronized (this) { It doesn't work\n                val value = cache[key]\n                if (value == null) {\n                    subscriber.onError(KeyNotExistsException())\n                } else {\n                    subscriber.onNext(value)\n                    subscriber.onCompleted()\n                }\n             //}\n        }\n    }\n\n    fun put(key: String, value: T) {\n        cache.put(key, value)\n    }\n\n}\n</code></pre>\n\n<p>Problem is that there is a race condition. Two fragments retrieve the same film when app starts, and both are fetching the film from the API, because when the second is gonna get the film, it hasn't been put in cache, yet. </p>\n\n<p>How could I synchronize that? I have tried to putting <code>synchronized</code>, but it doesn't work.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1477071122, "post_id": 40182310, "comment_id": 67632146, "body": "AFAIR, you can use <code>val obj = Obj().apply { ... }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 30, "last_activity_date": 1477133071, "last_edit_date": 1477133071, "creation_date": 1477071525, "answer_id": 40182493, "question_id": 40182310, "link": "https://stackoverflow.com/questions/40182310/kotlin-with-statement-as-an-expression/40182493#40182493", "title": "Kotlin with-statement as an expression", "body": "<p>Sure, you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"noreferrer\"><code>.apply { }</code></a> stdlib function, which</p>\n\n<blockquote>\n  <p>Calls the specified function <em>block</em> with <code>this</code> value as its receiver and returns <code>this</code> value.</p>\n</blockquote>\n\n<pre><code>public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T { block(); return this }\n</code></pre>\n\n<p>Usage example:</p>\n\n<p><sup></sup></p>\n\n<pre><code>val obj = Obj().apply {\n    objMethod1()\n    objMethod2()\n}\n</code></pre>\n\n<p>You can find it among many other Kotlin idioms <a href=\"https://kotlinlang.org/docs/reference/idioms.html#builder-style-usage-of-methods-that-return-unit\" rel=\"noreferrer\">here in the reference</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 107933, "user_id": 105224, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1dc604233d8a0c48f0884769acb1fb93?s=128&d=identicon&r=PG", "display_name": "Andreas Dolk", "link": "https://stackoverflow.com/users/105224/andreas-dolk"}, "is_accepted": false, "score": 7, "last_activity_date": 1483625671, "creation_date": 1483625671, "answer_id": 41487266, "question_id": 40182310, "link": "https://stackoverflow.com/questions/40182310/kotlin-with-statement-as-an-expression/41487266#41487266", "title": "Kotlin with-statement as an expression", "body": "<p>Your second example works too - just make sure that the lambda returns the correct value (the result of the last expression is the returned value of the <code>with</code> expression):</p>\n\n<pre><code>val obj = with(Obj()) {\n   objMethod1()\n   objMethod2()\n   this   // return 'this' because we want to assign the new instance to obj\n}\n</code></pre>\n"}], "owner": {"reputation": 15580, "user_id": 318558, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8f961340d115c2b75968f226f1d2dc24?s=128&d=identicon&r=PG", "display_name": "Yuri Geinish", "link": "https://stackoverflow.com/users/318558/yuri-geinish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10055, "favorite_count": 0, "accepted_answer_id": 40182493, "answer_count": 2, "score": 18, "last_activity_date": 1483625671, "creation_date": 1477070678, "question_id": 40182310, "link": "https://stackoverflow.com/questions/40182310/kotlin-with-statement-as-an-expression", "title": "Kotlin with-statement as an expression", "body": "<p>We can do</p>\n\n<pre><code>val obj = Obj()\nwith (obj) {\n    objMethod1()\n    objMethod2()\n}\n</code></pre>\n\n<p>But is there a way to do this?</p>\n\n<pre><code>val obj = with(Obj()) {\n    objMethod1()\n    objMethod2()\n}\n</code></pre>\n\n<p>To solve a common case where you create an object and call a few methods on it to initialise its state.</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1503176057, "creation_date": 1503176057, "answer_id": 45776202, "question_id": 40176787, "link": "https://stackoverflow.com/questions/40176787/recyclerview-item-animation-onanimationfinished-called-but-not-onanimationstar/45776202#45776202", "title": "RecyclerView item animation, onAnimationFinished called, but not onAnimationStarted. Why?", "body": "<p><code>ItemAnimator#onAnimationStarted</code> and <code>ItemAnimator#onAnimationFinished</code> are called by <code>ItemAnimator#dispatchAnimationStarted</code> and <code>ItemAnimator#dispatchAnimationFinished</code> respectively. </p>\n\n<p>From the doc of <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ItemAnimator.html#dispatchAnimationStarted(android.support.v7.widget.RecyclerView.ViewHolder)\" rel=\"nofollow noreferrer\"><code>ItemAnimator#dispatchAnimationStarted</code></a>:</p>\n\n<blockquote>\n  <p>Method to be called by subclasses when an animation is started.</p>\n</blockquote>\n\n<p>After looking at the source code of <code>ItemAnimator</code>'s subclass <code>SimpleItemAnimator</code> and its subclass <code>DefaultItemAnimator</code>, I found that the <code>ItemAnimator#dispatchAnimationStarted</code> has not been called anywhere in any of the subclasses. However, <code>ItemAnimator#dispatchAnimationFinished</code> has been invoked from the subclasses. </p>\n\n<p>And that is why you did not get any callback for your <code>onAnimationStarted</code> implementation. </p>\n\n<p>However, I'm not sure whether this is intentionally left or a bug in the framework and I couldn't find any resources about that. </p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1503176337, "creation_date": 1477053175, "last_edit_date": 1503176337, "question_id": 40176787, "link": "https://stackoverflow.com/questions/40176787/recyclerview-item-animation-onanimationfinished-called-but-not-onanimationstar", "title": "RecyclerView item animation, onAnimationFinished called, but not onAnimationStarted. Why?", "body": "<p>I assign <code>myRecyclerView</code> with <code>itemAnimator</code> as below (in Kotlin), so that I could listen to the animation start and end events. </p>\n\n<pre><code>    myRecyclerView.itemAnimator = object : DefaultItemAnimator() {\n        override fun onAnimationFinished(viewHolder: RecyclerView.ViewHolder?) {\n            Log.d(\"Testing\", \"I am finished\")\n        }\n        override fun onAnimationStarted(viewHolder: RecyclerView.ViewHolder?) {\n            Log.d(\"Testing\", \"I am started\")\n        }\n    }\n</code></pre>\n\n<p>I use <code>DiffUtil</code> to dispatch changes. The animation works fine. But only the <code>onAnimationFinished</code> callback is getting called, not <code>onAnimationStarted</code>. Did I miss anything?</p>\n"}, {"tags": ["android", "kotlin", "butterknife"], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 7091659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEgyy.jpg?s=128&g=1", "display_name": "Cuong Vo", "link": "https://stackoverflow.com/users/7091659/cuong-vo"}, "edited": false, "score": 1, "creation_date": 1540809143, "post_id": 40176759, "comment_id": 92986343, "body": "why dont use anko instead :P"}, {"owner": {"reputation": 7816, "user_id": 944593, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/12ad4669bb7abadfcd47243e206bd170?s=128&d=identicon&r=PG", "display_name": "shareef", "link": "https://stackoverflow.com/users/944593/shareef"}, "edited": false, "score": 0, "creation_date": 1546597144, "post_id": 40176759, "comment_id": 94909144, "body": "is KotterKnife a replacment for butter ? is it better i mean"}, {"owner": {"reputation": 6660, "user_id": 1474421, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/282013f9b6759b7c4383e88900ede52d?s=128&d=identicon&r=PG", "display_name": "anotherdave", "link": "https://stackoverflow.com/users/1474421/anotherdave"}, "edited": false, "score": 0, "creation_date": 1587659312, "post_id": 40176759, "comment_id": 108604733, "body": "Library now deprecated with a warning \u2014 <code>This was a terrible idea because it allocates an object for every view reference. Do not use, and do not use anything like it. Use view binding instead.</code>"}], "tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1477053027, "creation_date": 1477053027, "answer_id": 40176759, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/40176759#40176759", "title": "lateinit property has not been initialized", "body": "<p>Use <a href=\"https://github.com/JakeWharton/kotterknife\" rel=\"nofollow\">Kotterknife</a> for Butter Knife-esque View Binding for Kotlin.</p>\n\n<p>Then you can bind your View with</p>\n\n<pre><code>val menuTitleTextView: CTextBasic by bindView(R.id.menu_title_text_view_id)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1477056395, "post_id": 40177656, "comment_id": 67622881, "body": "when I use this(ctx) it says  Expression &#39;this&#39; of type &#39;MenuItemView&#39; cannot be invoked as a function. The function &#39;invoke()&#39; is not found"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1477058424, "post_id": 40177656, "comment_id": 67624340, "body": "same problem, perhaps it is a bug, there is also opened issue on Jetbrains simple project <a href=\"https://github.com/JetBrains/kotlin-examples/issues\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin-examples/issues</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1495507745, "post_id": 40177656, "comment_id": 75268876, "body": "secondary constructors call the primary constructor and init blocks execute.  Some methods of instantiating a class may not call any constructor (they exist)."}], "tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": -2, "last_activity_date": 1477057689, "last_edit_date": 1477057689, "creation_date": 1477055682, "answer_id": 40177656, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/40177656#40177656", "title": "lateinit property has not been initialized", "body": "<p>Your initializer block is not called. It only gets called when your primary constructor gets called. In your case, the secondary constructor gets used when view objects get created from xml layouts. </p>\n\n<p>Change your <code>init{...}</code> block to <code>fun init(){...}</code> and call it as first statement in every constructor</p>\n\n<p>You forgot to add the constructor </p>\n\n<p><code>constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr)</code></p>\n\n<p>=> add it and call <code>init()</code> in it</p>\n"}, {"tags": [], "owner": {"reputation": 1314, "user_id": 553905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbf00d7759007694bdd21eddf7eedf5c?s=128&d=identicon&r=PG", "display_name": "Billy", "link": "https://stackoverflow.com/users/553905/billy"}, "is_accepted": false, "score": 7, "last_activity_date": 1504577341, "last_edit_date": 1504577341, "creation_date": 1495506182, "answer_id": 44124782, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/44124782#44124782", "title": "lateinit property has not been initialized", "body": "<p>If you don't want to use any thirdparty libraries, you can add these extension functions (I tend to have a <code>ContextExtensions.kt</code> or <code>ViewExtensions.kt</code> for Context or View related extension functions), then put in it</p>\n\n<pre><code>inline fun &lt;reified T : View&gt; View.find(id: Int): T = findViewById(id) as T\ninline fun &lt;reified T : View&gt; Activity.find(id: Int): T = findViewById(id) as T\ninline fun &lt;reified T : View&gt; Fragment.find(id: Int): T = view?.findViewById(id) as T\n</code></pre>\n\n<p>these let you call <code>find</code> from within <code>Activity</code>, <code>Fragment</code>, and <code>View</code>s.\nSo inside your class instead of</p>\n\n<pre><code>@BindView(R.id.menu_title_text_view_id) lateinit var menuTitleTextView : CTextBasic\n</code></pre>\n\n<p>you can have</p>\n\n<pre><code>val menuTitleTextView by lazy { find&lt;CTextBasic&gt;(R.id.menu_title_text_view_id) }\n</code></pre>\n\n<p>For things like UIs, it's better to <code>val</code> instead of <code>var</code> when they don't need to change. As a general rule in programming, try to keep things as immutable as possible, you would get far less bugs.</p>\n"}, {"comments": [{"owner": {"reputation": 1195, "user_id": 5179140, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3de792367cf04d798ff8cff47a4ff99c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Elsayed", "link": "https://stackoverflow.com/users/5179140/mohammad-elsayed"}, "edited": false, "score": 0, "creation_date": 1556026347, "post_id": 48201714, "comment_id": 98291660, "body": "this is the only correct solution, you probably will find ur self of with the  compile &quot;com.jakewharton:butterknife:8.8.1&quot; but u will find ur gradle missing  kapt &quot;com.jakewharton:butterknife-compiler:8.8.1&quot;"}], "tags": [], "owner": {"reputation": 1541, "user_id": 3663980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d55a424272f2cb2c68b201207d60ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/3663980/johnny"}, "is_accepted": false, "score": 3, "last_activity_date": 1515655247, "creation_date": 1515655247, "answer_id": 48201714, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/48201714#48201714", "title": "lateinit property has not been initialized", "body": "<p>I found <a href=\"https://kotlinlang.org/docs/tutorials/android-frameworks.html\" rel=\"nofollow noreferrer\">this</a> works for me.</p>\n\n<p>Change your <code>build.gradle</code> in your project <code>app</code> module.</p>\n\n<pre><code>dependencies {\n    compile \"com.jakewharton:butterknife:8.8.1\"\n    kapt \"com.jakewharton:butterknife-compiler:8.8.1\"\n}\n</code></pre>\n\n<p>use <code>kapt</code> instead of <code>annotationProcessor</code>.</p>\n\n<p>and then you can do your familiar ButterKnife annotation like this:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    @BindView(R.id.myButton)\n    lateinit var myButton: Button\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        ButterKnife.bind(this)\n        //...\n    }\n}\n</code></pre>\n\n<p>Enjoy.</p>\n"}, {"tags": [], "owner": {"reputation": 4741, "user_id": 1145905, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/af7748a9885fe3e6ecd05a8bd85706f5?s=128&d=identicon&r=PG", "display_name": "kip2", "link": "https://stackoverflow.com/users/1145905/kip2"}, "is_accepted": false, "score": 2, "last_activity_date": 1529790487, "last_edit_date": 1529790487, "creation_date": 1521367132, "answer_id": 49346589, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/49346589#49346589", "title": "lateinit property has not been initialized", "body": "<p>In my case, I wasn't building ButterKnife correctly. Make sure you're importing its compiler in your module's build.gradle: </p>\n\n<pre><code>...\n// Butter Knife\nimplementation \"com.jakewharton:butterknife:$butterKnifeVersion\"\nkapt \"com.jakewharton:butterknife-compiler:$butterKnifeVersion\"\n...\n</code></pre>\n\n<p>The <a href=\"https://github.com/JetBrains/kotlin-examples/issues/38\" rel=\"nofollow noreferrer\">discussion</a> at Jetbrain's samples thread shed more light on this issue for me. </p>\n\n<p>Another issue is that you might be accessing the views <em>before</em> the container has been created. Here is a <a href=\"https://stackoverflow.com/questions/34541650/kotlin-android-extensions-and-fragments\">related question</a>, the discussion there is specific to kotlinx synthetic properties but same logic should apply to Butterknife view binding</p>\n"}, {"comments": [{"owner": {"reputation": 797, "user_id": 4300670, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002857130020/picture?type=large", "display_name": "Aliton Oliveira", "link": "https://stackoverflow.com/users/4300670/aliton-oliveira"}, "edited": false, "score": 0, "creation_date": 1580055493, "post_id": 52679032, "comment_id": 105963885, "body": "I&#39;ve found the following error at this point: <code>:app:kaptGenerateStubsDebugKotlin</code> -&gt; The given artifact contains a string literal with a package reference &#39;android.support.v4.content&#39; that cannot be safely rewritten. Libraries using reflection such as annotation processors need to be updated manually to add support for androidx."}, {"owner": {"reputation": 797, "user_id": 4300670, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002857130020/picture?type=large", "display_name": "Aliton Oliveira", "link": "https://stackoverflow.com/users/4300670/aliton-oliveira"}, "edited": false, "score": 0, "creation_date": 1580057925, "post_id": 52679032, "comment_id": 105964579, "body": "I&#39;ve solved it by following these instructions: <a href=\"https://github.com/JakeWharton/butterknife\" rel=\"nofollow noreferrer\">github.com/JakeWharton/butterknife</a>"}], "tags": [], "owner": {"reputation": 477, "user_id": 1771375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLDWW.jpg?s=128&g=1", "display_name": "Lakshan Dissanayake", "link": "https://stackoverflow.com/users/1771375/lakshan-dissanayake"}, "is_accepted": false, "score": 3, "last_activity_date": 1555506547, "last_edit_date": 1555506547, "creation_date": 1538828576, "answer_id": 52679032, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/52679032#52679032", "title": "lateinit property has not been initialized", "body": "<p>add <code>apply plugin: 'kotlin-kapt'</code> to the app level build.gradle file</p>\n\n<p>example</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>and in dependencies section</p>\n\n<pre><code>implementation \"com.jakewharton:butterknife:8.8.1\"\nkapt \"com.jakewharton:butterknife-compiler:8.8.1\"\n</code></pre>\n\n<p>Hope this Helps!</p>\n"}, {"tags": [], "owner": {"reputation": 3356, "user_id": 1901574, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/KUNyg.jpg?s=128&g=1", "display_name": "Adel", "link": "https://stackoverflow.com/users/1901574/adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1598197338, "creation_date": 1598197338, "answer_id": 63548917, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/63548917#63548917", "title": "lateinit property has not been initialized", "body": "<p>There's a small trick you can try it by using  <code>Platform.runLater</code></p>\n<pre><code> init {\n        Platform.runLater {\n        ....\n        }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1603272056, "creation_date": 1603272056, "answer_id": 64460503, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized/64460503#64460503", "title": "lateinit property has not been initialized", "body": "<p>for me this error happens when <code>include</code> same layout several time</p>\n<p>for example</p>\n<pre><code> &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n\n        &lt;include layout=&quot;@layout/chart_bar_layout&quot; /&gt;\n\n &lt;/LinearLayout&gt;\n ...\n &lt;include layout=&quot;@layout/chart_bar_layout&quot; /&gt; \n</code></pre>\n<p>So find and remove that line make app work fine</p>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64135, "favorite_count": 3, "answer_count": 8, "score": 26, "last_activity_date": 1603272056, "creation_date": 1477050895, "last_edit_date": 1502273888, "question_id": 40176083, "link": "https://stackoverflow.com/questions/40176083/lateinit-property-has-not-been-initialized", "title": "lateinit property has not been initialized", "body": "<p>I have a custom linearlayout class and when I want to create instance of this class, I got an error <strong>lateinit property has not been initialized</strong>\nI'm using the latest version of butterknife library</p>\n\n<p>this is my kotlin class </p>\n\n<pre><code>class MenuItemView : LinearLayout {\n\n@BindView(R.id.menu_title_text_view_id)\nlateinit var menuTitleTextView : CTextBasic\n\nconstructor(ctx: Context) : super(ctx) {\n}\n\ninit {\n    val view = LayoutInflater.from(context).inflate(R.layout.menu_item,this)\n    ButterKnife.bind(this,view)\n}\n\nconstructor(ctx: Context, attrs: AttributeSet) : super(ctx, attrs) {\n    val menuAttrs = context.theme.obtainStyledAttributes(attrs, R.styleable.MenuItemView, 0, 0)\n    try {\n        val title: String = menuAttrs.getString(R.styleable.MenuItemView_menu_title)\n        menuTitleTextView.text = title\n    }catch (e : Exception){\n        e.printStackTrace()\n    }finally {\n        menuAttrs.recycle()\n    }\n}\nfun setTitle( title : String){\n    menuTitleTextView.text = title\n}\n}\n</code></pre>\n\n<p><strong>this is error log</strong></p>\n\n<pre><code>    kotlin.UninitializedPropertyAccessException: lateinit property menuTitleTextView has not been initialized\nat com.leavigstone.liberali.ui.custom.menu.MenuItemView.setTitle(MenuItemView.kt:48)\nat com.leavigstone.liberali.ui.activities.MainActivity.onAddButtonClick(MainActivity.java:142)\nat com.leavigstone.liberali.ui.activities.MainActivity_ViewBinding$3.doClick(MainActivity_ViewBinding.java:54)\nat butterknife.internal.DebouncingOnClickListener.onClick(DebouncingOnClickListener.java:22)\nat android.view.View.performClick(View.java:4780)\nat android.view.View$PerformClick.run(View.java:19866)\nat android.os.Handler.handleCallback(Handler.java:739)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:135)\nat android.app.ActivityThread.main(ActivityThread.java:5254)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 45, "last_activity_date": 1507466649, "last_edit_date": 1507466649, "creation_date": 1476990675, "answer_id": 40162674, "question_id": 40161956, "link": "https://stackoverflow.com/questions/40161956/kotlin-sequence-concatenation/40162674#40162674", "title": "Kotlin sequence concatenation", "body": "<p>Your code doesn't copy the sequence elements, and <code>sequenceOf(seq1, seq2).flatten()</code> actually does what you want: it generates a sequence that takes items first from <code>seq1</code> and then, when <code>seq1</code> finishes, from <code>seq2</code>.</p>\n\n<p>Also, operator <code>+</code> is implemented in exactly this way, so you can just use it:</p>\n\n<pre><code>(seq1 + seq2).forEach { ... }\n</code></pre>\n\n<p>The source of the operator is as expected:</p>\n\n<pre><code>public operator fun &lt;T&gt; Sequence&lt;T&gt;.plus(elements: Sequence&lt;T&gt;): Sequence&lt;T&gt; {\n    return sequenceOf(this, elements).flatten()\n}\n</code></pre>\n\n<p>You can take a look at the <a href=\"https://github.com/JetBrains/kotlin/blob/1.0.3/libraries/stdlib/src/kotlin/collections/Sequences.kt#L49\" rel=\"noreferrer\">implementation of <code>.flatten()</code> in stdlib</a> that uses <a href=\"https://github.com/JetBrains/kotlin/blob/1.0.3/libraries/stdlib/src/kotlin/collections/Sequences.kt#L212\" rel=\"noreferrer\"><code>FlatteningSequence</code></a>, which actually switches over the original sequences' iterators. The implementation can change over time, but <code>Sequence</code> is intended to be as lazy as possible, so you can expect it to behave in a similar way.</p>\n\n<p>Example: </p>\n\n<pre><code>val a = generateSequence(0) { it + 1 }\nval b = sequenceOf(1, 2, 3)\n\n(a + b).take(3).forEach { println(it) }\n</code></pre>\n\n<p>Here, copying the first sequence can never succeed since it's infinite, and iterating over <code>(a + b)</code> takes items one by one from <code>a</code>.</p>\n\n<hr>\n\n<p>Note, however, that <code>.flatten()</code> is implemented in a different way for <code>Iterable</code>, and it <a href=\"https://github.com/JetBrains/kotlin/blob/1.0.3/libraries/stdlib/src/kotlin/collections/Iterables.kt#L79\" rel=\"noreferrer\"><strong>does</strong></a> copy the elements. Find more about the differences between <code>Iterable</code> and <code>Sequence</code> <a href=\"https://stackoverflow.com/a/35630670/2196460\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7544, "user_id": 73046, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/pWrkh.jpg?s=128&g=1", "display_name": "James Moore", "link": "https://stackoverflow.com/users/73046/james-moore"}, "is_accepted": false, "score": 0, "last_activity_date": 1604956535, "creation_date": 1604956535, "answer_id": 64759361, "question_id": 40161956, "link": "https://stackoverflow.com/questions/40161956/kotlin-sequence-concatenation/64759361#64759361", "title": "Kotlin sequence concatenation", "body": "<p>Something else you might need to do is create a sequence of sequences:</p>\n<pre><code>    val xs = sequence {\n        yield(1)\n        yield(2)\n    }\n\n    val twoXs = sequence {\n        yieldAll(xs)\n        // ... interesting things here ... \n        yieldAll(xs)\n    }\n</code></pre>\n<p>This doesn't do anything that xs + xs doesn't do, but it gives you a place to do more complex things.</p>\n"}], "owner": {"reputation": 15580, "user_id": 318558, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8f961340d115c2b75968f226f1d2dc24?s=128&d=identicon&r=PG", "display_name": "Yuri Geinish", "link": "https://stackoverflow.com/users/318558/yuri-geinish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10225, "favorite_count": 3, "accepted_answer_id": 40162674, "answer_count": 2, "score": 34, "last_activity_date": 1604956535, "creation_date": 1476988296, "question_id": 40161956, "link": "https://stackoverflow.com/questions/40161956/kotlin-sequence-concatenation", "title": "Kotlin sequence concatenation", "body": "<pre><code>val seq1 = sequenceOf(1, 2, 3)\nval seq2 = sequenceOf(5, 6, 7)\nsequenceOf(seq1, seq2).flatten().forEach { ... }\n</code></pre>\n\n<p>That's how I'm doing sequence concatenation but I'm worrying that it's actually copying elements, whereas all I need is an iterator that uses elements from the iterables (seq1, seq2) I gave it.</p>\n\n<p>Is there such a function?</p>\n"}, {"tags": ["android", "rx-java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1477042891, "post_id": 40160872, "comment_id": 67614011, "body": "If the code is written inside a function body, <code>@Func1</code> cannot be omitted."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1477044558, "post_id": 40160872, "comment_id": 67615041, "body": "Could you elaborate more about under which conditions <code>@Func1</code> can be omitted? I tried to use the expression <code>something.flatMap(...)</code> in a top level declaration, but I got the &quot;<code>return</code> is not allowed here&quot; error."}, {"owner": {"reputation": 1463, "user_id": 2084450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZviY3.jpg?s=128&g=1", "display_name": "Glenn Sonna", "link": "https://stackoverflow.com/users/2084450/glenn-sonna"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1477051846, "post_id": 40160872, "comment_id": 67619689, "body": "Thank you! Both @hotkey and mklimek answers are right, hotkey&#39;s answer is just a bit more elaborate I upvote both and check hotkey&#39;s :)"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1563213908, "post_id": 40160872, "comment_id": 100617761, "body": "Is it possible to use it for <code>when</code> (the switch-case equivalent on Kotlin)  ? Many times I want to break it when the indentation is too much..."}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": false, "score": 11, "last_activity_date": 1477047863, "last_edit_date": 1477047863, "creation_date": 1476984697, "answer_id": 40160872, "question_id": 40160489, "link": "https://stackoverflow.com/questions/40160489/kotlin-whats-does-return-mean/40160872#40160872", "title": "Kotlin: Whats does &quot;return@&quot; mean?", "body": "<p><code>return@name</code> determinates for which closure <code>return</code> statement should be applied.</p>\n\n<p>In Kotlin, you can call return from nested closure to finish outer closure. In Java it is not possible.</p>\n\n<p>Usually, you can omit <code>@name</code>. </p>\n\n<p>In your example, you can't omit it because <code>Func1</code> is used inside another function.</p>\n"}, {"comments": [{"owner": {"reputation": 8926, "user_id": 211614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fiQ2h.jpg?s=128&g=1", "display_name": "Michael Peterson", "link": "https://stackoverflow.com/users/211614/michael-peterson"}, "edited": false, "score": 1, "creation_date": 1497378750, "post_id": 40166597, "comment_id": 76049800, "body": "Thanks! It would have been nice if the official Kotlin docs covered this in a little more detail with examples as you did here."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 115, "last_activity_date": 1514389127, "last_edit_date": 1514389127, "creation_date": 1477010046, "answer_id": 40166597, "question_id": 40160489, "link": "https://stackoverflow.com/questions/40160489/kotlin-whats-does-return-mean/40166597#40166597", "title": "Kotlin: Whats does &quot;return@&quot; mean?", "body": "<p>In Kotlin, the <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"noreferrer\"><code>return@label</code> syntax</a> is used for specifying which function among several nested ones this statement returns from.</p>\n\n<p>It works with function literals (lambdas) and local functions. Non-labeled <code>return</code> statements return from the nearest (i.e. innermost) enclosing <code>fun</code> (ignoring lambdas). Consider this function:</p>\n\n<pre><code>fun foo(ints: List&lt;Int&gt;) {\n    ints.forEach {\n        if (it == 0) return\n        print(it)\n    }\n}\n</code></pre>\n\n<p><sup>Here, <code>return</code> will finish the execution of <code>foo</code>, not just the lambda.</sup></p>\n\n<p>But if you want to return from any other function (a lambda or an outer <code>fun</code>) you have to specify it as a label at <code>return</code> statement:</p>\n\n<pre><code>fun foo(ints: List&lt;Int&gt;) {\n    ints.forEach {\n        if (it == 0) return@forEach // implicit label for lambda passed to forEach\n        print(it)\n    }\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>fun foo(ints: List&lt;Int&gt;): List&lt;String&gt; {\n    val result = ints.map f@{\n        if (it == 0) return@f \"zero\" // return at named label\n        if (it == -1) return emptyList() // return at foo\n        \"number $it\" // expression returned from lambda\n    }\n    return result\n}\n\nfoo(listOf(1, -1, 1)) // []\nfoo(listOf(1, 0, 1)) // [\"number 1\", \"zero\", \"number 1\"]\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#non-local-returns\" rel=\"noreferrer\">Non-local return</a> (i.e. return from outer functions) from a lambda is only supported for <a href=\"https://kotlinlang.org/docs/reference/functions.html#local-functions\" rel=\"noreferrer\">local</a> and <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"noreferrer\">inline</a> functions, because if a lambda is not inlined (or a function is placed inside an object), it is not guaranteed to be called only inside the enclosing function (e.g. it can be stored in a variable and called later), and the non-local return would make no sense in this case.</p>\n\n<hr>\n\n<p>There is also a similar syntax for <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html\" rel=\"noreferrer\">qualified <code>this</code></a>, which is used to reference receivers of outer scopes: <code>this@outer</code>.</p>\n"}], "owner": {"reputation": 1463, "user_id": 2084450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZviY3.jpg?s=128&g=1", "display_name": "Glenn Sonna", "link": "https://stackoverflow.com/users/2084450/glenn-sonna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25047, "favorite_count": 16, "accepted_answer_id": 40166597, "answer_count": 2, "score": 79, "last_activity_date": 1514389127, "creation_date": 1476983373, "last_edit_date": 1477035564, "question_id": 40160489, "link": "https://stackoverflow.com/questions/40160489/kotlin-whats-does-return-mean", "title": "Kotlin: Whats does &quot;return@&quot; mean?", "body": "<p>I'm using RxJava in one of my projects, I converted one of my classes to Kotlin using the Android Studio plugin and in one of map <code>flatMap</code> lambda (Func1 in java), intermediates returns looks like the following <code>@Func1</code>.</p>\n\n<p>I have no idea what this means. </p>\n\n<pre><code>something.flatMap(Func1&lt;ArticleCriteria, Observable&lt;Pair&lt;String, String&gt;&gt;&gt; {\n    val isTemporaryClone = it.isATemporaryClone\n    val isTheOriginalToken = it.tokenIsOriginalHere\n\n    if (isTemporaryClone) {\n        if (!isTheOriginalToken) {\n            return@Func1 paramsError(\"Token is always original for temp articles\")\n        }\n\n        return@Func1 mJobRunner.doNotRun(DeleteArticleJob.TAG)\n                            .doOnNext(deletePersonalActionById(articleId))\n    }\n\n    runArticleJobAsync(DeleteArticleJob.TAG, it)\n})\n</code></pre>\n"}, {"tags": ["java", "kotlin", "jna", "openvr"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1477303484, "post_id": 40183356, "comment_id": 67695109, "body": "Thanks Timothy, I solved <a href=\"https://github.com/elect86/openvr/blob/master/src/vr.kt#L2093-L2105\" rel=\"nofollow noreferrer\">as following</a>, but now I get another two field with <code>0xfa0</code> and another couple of fields with another same pointer... There is no way for this to be an error on jna side, isn&#39;t? Anyway, I opened an <a href=\"https://github.com/ValveSoftware/openvr/issues/299\" rel=\"nofollow noreferrer\">issue</a> on valve openvr github, let&#39;s see what&#39;s up.."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1477317321, "post_id": 40183356, "comment_id": 67703796, "body": "It&#39;s entirely possible that <code>openvr</code> simply reuses a callback, or it may be another magic value (0xfa0 doesn&#39;t look like a valid function pointer).  If you don&#39;t actually need to set or invoke a given callback, just define it as a <code>Pointer</code>."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1477390585, "post_id": 40183356, "comment_id": 67736564, "body": "I solved! Somehow you were right, I was instantiating <code>IVRSystem</code> using <code>&quot;IVRSystem_012&quot;</code> instead <code>&quot;FnTable:IVRSystem_012&quot;</code>, so the lib was returning callback pointers that were useless for me.. thanks!"}], "tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": true, "score": 1, "last_activity_date": 1477074888, "creation_date": 1477074888, "answer_id": 40183356, "question_id": 40157199, "link": "https://stackoverflow.com/questions/40157199/jna-pointer-already-mapped-to-proxy-interface/40183356#40183356", "title": "Jna, Pointer already mapped to Proxy interface", "body": "<p>The native code is using a \"magic\" value of <code>-1</code> for more than one callback signature.  When this callback code for JNA was written, it was assumed that having the same function pointer be mapped to two different signatures should be an error.</p>\n\n<p>I'm guessing that <code>-1</code> value means something like \"use the default callback\" (when arguably simply a NULL pointer might have sufficed, unless the library is using NULL to indicate not to call the callback).</p>\n\n<p>You might get around this by overriding <code>Structure.read()</code> or <code>Structure.readField()</code> to return a magic value or constant callback object when you see the <code>-1</code> value, e.g.</p>\n\n<pre><code>public void read() {\n    Memory old = getPointer();\n    Memory m = autoAllocate(size());\n    // horribly inefficient, but it'll do\n    m.write(0, old.getByteArray(0, size()), 0, size());\n    useMemory(m);\n    // Zero out the problematic callbacks\n    for (field : problematic_fields) {\n        m.setPointer(field_offset, null);\n    }\n    super.read();\n    useMemory(old);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6032798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b75a48f9bafe01474a6cf20c3b9d6934?s=128&d=identicon&r=PG", "display_name": "mr.b", "link": "https://stackoverflow.com/users/6032798/mr-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1572264392, "creation_date": 1572264392, "answer_id": 58590674, "question_id": 40157199, "link": "https://stackoverflow.com/questions/40157199/jna-pointer-already-mapped-to-proxy-interface/58590674#58590674", "title": "Jna, Pointer already mapped to Proxy interface", "body": "<p>Despite this is an old question i like to share my experience. In my case i have an native object which is passed to Java as a Structure with Proxy Methods mapped. The object is some kind of session which implements a close method that should delete the native object itself. As soon as close is called and the native object is deleted a similar exception is thrown. The problem is that after function call JNA resyncs the deleted native object. This can be solved by setting auto read to false.</p>\n\n<pre><code>public void close(Handler handler) {\n    setAutoRead(false);\n    close.invoke(this, handler);\n    setAutoWrite(false);\n}\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 40183356, "answer_count": 2, "score": 2, "last_activity_date": 1572264392, "creation_date": 1476973467, "last_edit_date": 1477316361, "question_id": 40157199, "link": "https://stackoverflow.com/questions/40157199/jna-pointer-already-mapped-to-proxy-interface", "title": "Jna, Pointer already mapped to Proxy interface", "body": "<p>I am trying to do a <a href=\"https://github.com/elect86/openvr/blob/master/src/vr.kt\" rel=\"nofollow\">kotlin port</a> of the <a href=\"https://github.com/java-graphics/openvr\" rel=\"nofollow\">openvr java binding</a> and also updating it to 1.0.3</p>\n\n<p>I got at the point of writing the <a href=\"https://github.com/elect86/openvr/blob/master/src/vr.kt#L1651\" rel=\"nofollow\"><code>IVRSystem</code> struct/class</a></p>\n\n<p>I wrote all the methods manually to be sure that won't be any error from the automatic translator in Intellij</p>\n\n<p>I got rid of all the errors coming from a different number of fields from <code>getFieldOrder()</code> but now I still get an error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalStateException: Pointer native@0xffffffff already mapped to Proxy interface to native function@0xffffffff (IVRSystem$GetEyeToHeadTransform_callback).\nNative code may be re-using a default function pointer, in which case you may need to use a common Callback class wherever the function pointer is reused.\n    at com.sun.jna.CallbackReference.getCallback(CallbackReference.java:124)\n    at com.sun.jna.CallbackReference.getCallback(CallbackReference.java:107)\n    at com.sun.jna.Pointer.getValue(Pointer.java:430)\n    at com.sun.jna.Structure.readField(Structure.java:705)\n    at com.sun.jna.Structure.read(Structure.java:565)\n    at IVRSystem.&lt;init&gt;(vr.kt:2091)\n    at VrKt.VR_Init(vr.kt:2116)\n    at VrKt.main(vr.kt:2133)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\n</code></pre>\n\n<p>According to <a href=\"https://github.com/java-native-access/jna/issues/326#issuecomment-42937076\" rel=\"nofollow\">this comment</a>, it looks like there are multiple calls to a specific callback (<code>GetEyeToHeadTransform_callback</code>?), but it is not, I checked and double checked the code, there is one and only one reference to that callback..</p>\n\n<p>What else might it be?</p>\n\n<p>Edit: </p>\n\n<p>first, this happens when I <code>read()</code> on <code>IVRSysten</code> class, but I can't avoid that...</p>\n\n<p>second, I see that <a href=\"https://github.com/java-native-access/jna/blob/master/src/com/sun/jna/Pointer.java#L413\" rel=\"nofollow\">here</a> all the previous methods get real addresses, such as <code>native@0x7fee4bebfd0</code>, only <code>GetEyeToHeadTransform</code> gets always <code>native@0xffffffff</code>...</p>\n\n<p>Edit2:</p>\n\n<p>investigating the original code</p>\n\n<pre><code>dprintf(\"GetRecommendedRenderTargetSize %p\\n\", &amp;vr::IVRSystem::GetRecommendedRenderTargetSize);\ndprintf(\"GetProjectionMatrix %p\\n\", &amp;vr::IVRSystem::GetProjectionMatrix);\ndprintf(\"GetProjectionRaw %p\\n\", &amp;vr::IVRSystem::GetProjectionRaw);\ndprintf(\"ComputeDistortion %p\\n\", &amp;vr::IVRSystem::ComputeDistortion);\ndprintf(\"GetEyeToHeadTransform %p\\n\", &amp;vr::IVRSystem::GetEyeToHeadTransform);\ndprintf(\"GetTimeSinceLastVsync %p\\n\", &amp;vr::IVRSystem::GetTimeSinceLastVsync);\ndprintf(\"GetD3D9AdapterIndex %p\\n\", &amp;vr::IVRSystem::GetD3D9AdapterIndex);\ndprintf(\"GetDXGIOutputInfo %p\\n\", &amp;vr::IVRSystem::GetDXGIOutputInfo);\ndprintf(\"IsDisplayOnDesktop %p\\n\", &amp;vr::IVRSystem::IsDisplayOnDesktop);\ndprintf(\"SetDisplayVisibility %p\\n\", &amp;vr::IVRSystem::SetDisplayVisibility);\ndprintf(\"GetDeviceToAbsoluteTrackingPose %p\\n\", &amp;vr::IVRSystem::GetDeviceToAbsoluteTrackingPose);\ndprintf(\"ResetSeatedZeroPose %p\\n\", &amp;vr::IVRSystem::ResetSeatedZeroPose);\ndprintf(\"GetSeatedZeroPoseToStandingAbsoluteTrackingPose %p\\n\", &amp;vr::IVRSystem::GetSeatedZeroPoseToStandingAbsoluteTrackingPose);\n</code></pre>\n\n<p>prints out</p>\n\n<pre><code>GetRecommendedRenderTargetSize 0109871D\nGetProjectionMatrix 0109AACC\nGetProjectionRaw 0109AAD1\nComputeDistortion 0109AAF9\nGetEyeToHeadTransform 0109AAC2\nGetTimeSinceLastVsync 0109AAE5\nGetD3D9AdapterIndex 0109AAF4\nGetDXGIOutputInfo 0109AADB\nIsDisplayOnDesktop 0109AAEA\nSetDisplayVisibility 0109AAE0\nGetDeviceToAbsoluteTrackingPose 0109AAEF\nResetSeatedZeroPose 0109AAD6\nGetSeatedZeroPoseToStandingAbsoluteTrackingPose 0109AAC7\n</code></pre>\n\n<p><code>GetEyeToHeadTransform</code> and <code>GetSeatedZeroPoseToStandingAbsoluteTrackingPose</code> have different pointers..</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476963996, "post_id": 40153527, "comment_id": 67575922, "body": "But I want to be warned by IDE. Like when you aren&#39;t calling super.onDestroy() in android Activity"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476964061, "post_id": 40153527, "comment_id": 67575965, "body": "I wanna know, how it&#39;s working. Actually code is written only by me, so it&#39;s not necessary, I don&#39;t need a workaround"}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476964249, "post_id": 40153527, "comment_id": 67576112, "body": "I think that might be a feature of the IDE, but not the code, so I&#39;m not sure if that&#39;s actually possible when writing pure Kotlin code."}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476964360, "post_id": 40153527, "comment_id": 67576198, "body": "maybe it&#39;s a Java annotation? Gonna look at source code"}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476964419, "post_id": 40153527, "comment_id": 67576245, "body": "You could of course throw an Exception when it&#39;s not called."}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1476964707, "post_id": 40153527, "comment_id": 67576438, "body": "I don&#39;t think it&#39;s an Annotation, I believe it&#39;s just a simple boolean flag that will throw an Exception when it&#39;s not set and the IDE does the rest."}], "tags": [], "owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "is_accepted": false, "score": 2, "last_activity_date": 1476963917, "creation_date": 1476963917, "answer_id": 40153527, "question_id": 40152959, "link": "https://stackoverflow.com/questions/40152959/annotate-interface-function-that-must-call-super/40153527#40153527", "title": "Annotate interface function that must call super", "body": "<p>You could just make <code>startWatching</code> abstract and call it in another function. E.g.:</p>\n\n<pre><code>interface Watcher {\n    fun funWithoutBody()\n\n    fun userDefinedStartWatching()\n\n    fun startWatching() {\n        //insert code you'd normally want to be called when using super()\n        userDefinedStartWatching()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1477829473, "post_id": 40155261, "comment_id": 67912806, "body": "Thanks! Exactly what I was looking for"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1476968595, "creation_date": 1476968595, "answer_id": 40155261, "question_id": 40152959, "link": "https://stackoverflow.com/questions/40152959/annotate-interface-function-that-must-call-super/40155261#40155261", "title": "Annotate interface function that must call super", "body": "<p>Android Studio / IntelliJ IDEA does this sort of thing in some cases but it isn't done through annotations but through <a href=\"https://www.jetbrains.com/help/idea/2016.2/code-inspection.html\" rel=\"nofollow\">code inspection</a>.</p>\n\n<p>e.g. <code>MissingSuperCall</code> is an <a href=\"http://tools.android.com/tips/lint-checks\" rel=\"nofollow\">Android Lint Check</a> for which IntelliJ IDEA supports (<a href=\"https://blog.jetbrains.com/idea/2012/02/integration-with-android-lint-tool-in-intellij-idea-111/\" rel=\"nofollow\">Integration with Android Lint tool in IntelliJ IDEA 11.1 | IntelliJ IDEA Blog</a>).</p>\n\n<p>You can create your own custom inspection if you are using Android Studio or IntelliJ IDEA: <a href=\"https://www.jetbrains.com/help/idea/2016.2/creating-custom-inspections.html\" rel=\"nofollow\">IntelliJ IDEA 2016.2 Help :: Creating Custom Inspections</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": true, "score": 24, "last_activity_date": 1487594170, "creation_date": 1487594170, "answer_id": 42344790, "question_id": 40152959, "link": "https://stackoverflow.com/questions/40152959/annotate-interface-function-that-must-call-super/42344790#42344790", "title": "Annotate interface function that must call super", "body": "<p>I've accidentally found, what I was looking for. It's a <code>@CallSuper</code> annotation available in <code>android.support.annotation</code> package. <a href=\"https://developer.android.com/studio/write/annotations.html#call-super\" rel=\"noreferrer\">Docs</a></p>\n\n<blockquote>\n  <p>Use the @CallSuper annotation to validate that an overriding method\n  calls the super implementation of the method. The following example\n  annotates the onCreate() method to ensure that any overriding method\n  implementations call super.onCreate():</p>\n</blockquote>\n\n<pre><code>@CallSuper\nprotected fun onCreate(savedInstanceState: Bundle?) {\n}\n</code></pre>\n"}], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3856, "favorite_count": 0, "accepted_answer_id": 42344790, "answer_count": 3, "score": 13, "last_activity_date": 1487594170, "creation_date": 1476962328, "question_id": 40152959, "link": "https://stackoverflow.com/questions/40152959/annotate-interface-function-that-must-call-super", "title": "Annotate interface function that must call super", "body": "<p>I'm creating interface and some function in it has a body.\nIt's required, that class that implements this interface must call super in overriding function before executing other code.\nHow can I do this?</p>\n\n<pre><code>interface Watcher {\n    fun funWithoutBody()\n\n    fun startWatching() {\n        //do some important stuff which must be called\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "intellij-idea", "interface", "kotlin", "jna"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1476973041, "post_id": 40154845, "comment_id": 67582638, "body": "You mean <code>ivrSystem.GetRecommendedRenderTargetSize.apply(...)</code>? Because it&#39;s supposed to be like this"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 0, "last_activity_date": 1476967428, "creation_date": 1476967428, "answer_id": 40154845, "question_id": 40150252, "link": "https://stackoverflow.com/questions/40150252/how-to-translate-a-java-jna-interface-to-kotlin/40154845#40154845", "title": "How to translate a java jna interface to kotlin", "body": "<p><code>GetRecommendedRenderTargetSize_callback</code> is an interface.</p>\n\n<p>The interface itself does not have an <code>apply(IntBuffer, IntBuffer)</code> function but defines such a function for implementing instances of the interface.</p>\n\n<p>You'll need an instance of an object which implements your interface in order to be able to call its \"apply\" function but such would not be a \"port\" of the Java code you provided.</p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476967428, "creation_date": 1476955015, "last_edit_date": 1476958319, "question_id": 40150252, "link": "https://stackoverflow.com/questions/40150252/how-to-translate-a-java-jna-interface-to-kotlin", "title": "How to translate a java jna interface to kotlin", "body": "<p>I am trying to port to kotlin the <a href=\"https://github.com/java-graphics/openvr\" rel=\"nofollow\">openvr binding</a></p>\n\n<p>I have the following in java:</p>\n\n<pre><code>public class IVRSystem extends Structure {\n\n    /**\n     * C type : GetRecommendedRenderTargetSize_callback*\n     */\n    public IVRSystem.GetRecommendedRenderTargetSize_callback GetRecommendedRenderTargetSize;\n\n    public interface GetRecommendedRenderTargetSize_callback extends Callback {\n\n        void apply(IntBuffer pnWidth, IntBuffer pnHeight);\n    };\n}\n</code></pre>\n\n<p>Intellij translates it automatically to</p>\n\n<pre><code>var GetRecommendedRenderTargetSize: IVRSystem.GetRecommendedRenderTargetSize_callback? = null\n\ninterface GetRecommendedRenderTargetSize_callback : Callback {\n\n    fun apply(pnWidth: IntBuffer, pnHeight: IntBuffer)\n}\n</code></pre>\n\n<p>I changed it then to:</p>\n\n<pre><code>fun getRecommendedRenderTargetSize(pnWidth: IntBuffer, pnHeight: IntBuffer) = GetRecommendedRenderTargetSize_callback.apply(pnWidth, pnHeight)\n\ninterface GetRecommendedRenderTargetSize_callback : Callback {\n\n    fun apply(pnWidth: IntBuffer, pnHeight: IntBuffer)\n}\n</code></pre>\n\n<p>but it complains </p>\n\n<blockquote>\n  <p>unresolved reference: apply</p>\n</blockquote>\n\n<p>Why? How can I fix that?</p>\n\n<p>For reference, C++ code</p>\n\n<pre><code>class IVRSystem\n{\n    public:\n         virtual void GetRecommendedRenderTargetSize( uint32_t *pnWidth, uint32_t *pnHeight ) = 0;\n}\n</code></pre>\n"}, {"tags": ["kotlin", "type-inference"], "comments": [{"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1476953765, "post_id": 40149675, "comment_id": 67568692, "body": "<code>It cannot infer the type of T0 which is actually Action0</code> - <code>Action0</code> is not generic, so <code>T0</code> is used for <code>Action1</code>, <code>Action2</code>, etc. Not that it answers your question though."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1476976699, "post_id": 40149675, "comment_id": 67585664, "body": "You need to make the sample small and self contained, not referencing an outside code link."}], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 965226, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5a8d9e59644142bf7857bb27c3123b4a?s=128&d=identicon&r=PG", "display_name": "dmitriyzaitsev", "link": "https://stackoverflow.com/users/965226/dmitriyzaitsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1478196413, "last_edit_date": 1478196413, "creation_date": 1477469846, "answer_id": 40257074, "question_id": 40149675, "link": "https://stackoverflow.com/questions/40149675/kotlin-type-inference-failed/40257074#40257074", "title": "Kotlin type inference failed", "body": "<p>The problem is a bug in Kotlin.\nHere's the link to the issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-14499\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-14499</a>. Please vote.</p>\n\n<p><strong>UPD</strong>\nTo fix the issue there's a workaround:</p>\n\n<pre><code>@JvmStatic\nfun main(args: Array&lt;String&gt;) {\n    @Suppress(\"INACCESSIBLE_TYPE\")\n    callVoidFunc0(Functions.noOp())      // (1)\n\n    @Suppress(\"INACCESSIBLE_TYPE\")\n    callVoidFunc1(Functions.noOp&lt;Any&gt;()) // (2)\n}\n</code></pre>\n\n<p>To fix (1) one must suppress the compilation warning, to fix (2) - additionally specify the type explicitly.</p>\n"}], "owner": {"reputation": 646, "user_id": 965226, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5a8d9e59644142bf7857bb27c3123b4a?s=128&d=identicon&r=PG", "display_name": "dmitriyzaitsev", "link": "https://stackoverflow.com/users/965226/dmitriyzaitsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7803, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1478196413, "creation_date": 1476953383, "last_edit_date": 1477469712, "question_id": 40149675, "link": "https://stackoverflow.com/questions/40149675/kotlin-type-inference-failed", "title": "Kotlin type inference failed", "body": "<p>Let's say we have a 3rd-party Java library with such class:</p>\n\n<pre><code>//----------------------------------------------------------------------------------------\n\npackage foo;\n\npublic final class Functions {\n  public interface VoidFunc0 {\n    void call();\n  }\n\n  public interface VoidFunc1&lt;T&gt; {\n    void call(T t);\n  }\n\n  @SuppressWarnings(\"unchecked\")\n  public static &lt;T&gt; NoOpFunc&lt;T&gt; noOp() {\n    return new NoOpFunc();\n  }\n\n  /*public*/ static final class NoOpFunc&lt;T&gt; implements VoidFunc0, VoidFunc1&lt;T&gt; {\n    @Override public void call() { /* deliberately no op */}\n    @Override public void call(T t) { /* deliberately no op */ }\n  }\n}\n//---------------------------------------------------------------------------------------- \n</code></pre>\n\n<p>We successfully used its <code>Functions.noOp()</code>  method in our Java application, but when we began to rewrite it in Kotlin, we faced the issue that the code below doesn't compile and gives us two errors:</p>\n\n<pre><code>//----------------------------------------------------------------------------------------\npackage bar\n\nimport foo.Functions\n\nobject KotlinApp {\n    @JvmStatic\n    fun main(args: Array&lt;String&gt;) {\n        /*\n         * Error:(XX, XX) Kotlin: Type inference failed: Not enough information\n         * to infer parameter T in fun &lt;T : Any!&gt; noOp(): Functions.NoOpFunc&lt;T!&gt;!\n         * Please specify it explicitly.\n         */\n        callVoidFunc0(Functions.noOp()) // ERROR 1\n        /*\n         * Error:(XX, XX) Kotlin: Type Functions.NoOpFunc&lt;Any!&gt;! is inaccessible\n         * in this context due to: Functions.NoOpFunc&lt;Any!&gt;!\n         */\n        callVoidFunc1(Functions.noOp()) // ERROR 2\n    }\n\n    fun callVoidFunc0(func0: Functions.VoidFunc0) {\n        func0.call()\n    }\n\n    fun callVoidFunc1(func1: Functions.VoidFunc1&lt;Any&gt;) {\n        func1.call(\"A\")\n    }\n}\n//---------------------------------------------------------------------------------------- \n</code></pre>\n\n<p>but the same code previously written in Java compiles and works well:</p>\n\n<pre><code>//----------------------------------------------------------------------------------------\npackage bar;\n\nimport foo.Functions;\n\npublic class JavaApp {\n  public static void main(String[] args) {\n    callVoidFunc0(Functions.noOp()); // OK\n    callVoidFunc1(Functions.noOp()); // OK\n  }\n\n  public static void callVoidFunc0(Functions.VoidFunc0 func0) {\n    func0.call();\n  }\n\n  public static void callVoidFunc1(Functions.VoidFunc1&lt;Object&gt; func1) {\n    func1.call(\"A\");\n  }\n}\n//---------------------------------------------------------------------------------------- \n</code></pre>\n\n<p>Type inference fails even if we specify <code>T</code>  explicitly. Error 2 goes away when <code>NoOpFunc</code> declared as <code>public</code>, but Error 1 still remains.</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 3, "creation_date": 1476947207, "post_id": 40147360, "comment_id": 67564549, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40076956/is-it-possible-to-reuse-a-layout-in-kotlin-anko\">Is it possible to reuse a layout in Kotlin Anko</a>"}, {"owner": {"reputation": 628, "user_id": 4568679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a3061a5209488e3c6a7078ff5398ca?s=128&d=identicon&r=PG", "display_name": "Slav", "link": "https://stackoverflow.com/users/4568679/slav"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1476949231, "post_id": 40147360, "comment_id": 67565803, "body": "I agree with @miensol. Please refer to this answer: <a href=\"http://stackoverflow.com/a/40078650/4568679\">stackoverflow.com/a/40078650/4568679</a>"}, {"owner": {"reputation": 373, "user_id": 2848972, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584072058/picture?type=large", "display_name": "Suhair Zain", "link": "https://stackoverflow.com/users/2848972/suhair-zain"}, "edited": false, "score": 1, "creation_date": 1476951368, "post_id": 40147360, "comment_id": 67567113, "body": "I&#39;m sorry. This should have been okay. But what if I do not want my custom view to be a root layout? Like in the example I have shown, it&#39;s included into another layout. When I try to do that, I get a <code>java.lang.IllegalStateException: View is already set: org.jetbrains.anko._LinearLayout{8bdb786 V.E...... ......I. 0,0-0,0}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 1320648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6MFF.png?s=128&g=1", "display_name": "Mathieu Post", "link": "https://stackoverflow.com/users/1320648/mathieu-post"}, "is_accepted": false, "score": 3, "last_activity_date": 1480933270, "creation_date": 1480933270, "answer_id": 40971926, "question_id": 40147360, "link": "https://stackoverflow.com/questions/40147360/create-a-custom-view-viewgroup-class-in-anko-dsl/40971926#40971926", "title": "Create a custom View/ViewGroup class in Anko DSL", "body": "<p>I was looking for something like this too, but the most optimal solution i found for custom views is something like this:</p>\n\n<pre><code>public inline fun ViewManager.customLayout(theme: Int = 0) = customLayout(theme) {}\npublic inline fun ViewManager.customLayout(theme: Int = 0, init: CustomLayout.() -&gt; Unit) = ankoView({ CustomLayout(it) }, theme, init)\n\nclass CustomLayout(c: Context) : LinearLayout(c) {\n    init {\n        addView(textView(\"Some text\"))\n        addView(textView(\"Other text\"))\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5819666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36462253099221ced8a3b8a404aa947?s=128&d=identicon&r=PG&f=1", "display_name": "sunghyun.lee", "link": "https://stackoverflow.com/users/5819666/sunghyun-lee"}, "is_accepted": false, "score": 6, "last_activity_date": 1481683100, "creation_date": 1481683100, "answer_id": 41133932, "question_id": 40147360, "link": "https://stackoverflow.com/questions/40147360/create-a-custom-view-viewgroup-class-in-anko-dsl/41133932#41133932", "title": "Create a custom View/ViewGroup class in Anko DSL", "body": "<p>you can use ViewManager.</p>\n\n<pre><code>fun ViewManager.swipeLayout() = linearLayout {\n  textView {\n    text = \"Some text\"\n  }\n  textView {\n    text = \"Another text\"\n  }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>class MainActivity\n  verticalLayout {\n    textView {\n      text = \"Something that comes above the swipe\"\n    }\n    swipeLayout {}\n}\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 2848972, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584072058/picture?type=large", "display_name": "Suhair Zain", "link": "https://stackoverflow.com/users/2848972/suhair-zain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4004, "favorite_count": 5, "answer_count": 2, "score": 12, "last_activity_date": 1481683100, "creation_date": 1476946272, "last_edit_date": 1495542316, "question_id": 40147360, "link": "https://stackoverflow.com/questions/40147360/create-a-custom-view-viewgroup-class-in-anko-dsl", "title": "Create a custom View/ViewGroup class in Anko DSL", "body": "<p>I want to create a custom View which is just a wrapper of some Android Views. I looked into creating a custom ViewGroup which manages the layout of it's child views, but I don't need such complexity. What I basically want to do is something like:</p>\n\n<pre><code>class MainActivity\nverticalLayout {\n  textView {\n    text = \"Something that comes above the swipe\"\n  }\n  swipeLayout {\n  }\n}\n\nclass SwipeLayout\nlinearLayout {\n  textView {\n    text = \"Some text\"\n  }\n  textView {\n    text = \"Another text\"\n  }\n}\n</code></pre>\n\n<p>The reason is that I'd like to move the SwipeLayout code into a separate file but don't want to do any complex layout stuff myself. Is this possible using Anko?</p>\n\n<p>Edit: As suggested, <a href=\"https://stackoverflow.com/questions/40076956/is-it-possible-to-reuse-a-layout-in-kotlin-anko/40078650#40078650\">Is it possible to reuse a layout in Kotlin Anko</a> solves this problem if the view is a root layout. But as shown in the example, I'd like to include this within another layout. Is that possible?</p>\n"}, {"tags": ["java", "intellij-idea", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1476938264, "post_id": 40143679, "comment_id": 67560625, "body": "How is <code>runOnStop</code> defined?"}, {"owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "edited": false, "score": 0, "creation_date": 1476949131, "post_id": 40143679, "comment_id": 67565737, "body": "We need more information on the <code>messageBroker</code> object."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1476950759, "post_id": 40143679, "comment_id": 67566746, "body": "also check whether your stdlib version and kotlin-gradle versions are the same... gave me weird errors once"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1476976830, "post_id": 40143679, "comment_id": 67585755, "body": "This looks like a compile error not a runtime error.  Is the title incorrect or did you not post the runtime exception?"}, {"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 0, "creation_date": 1476981838, "post_id": 40143679, "comment_id": 67588936, "body": "It&#39;s hard to answer you question because this peace of the code relates external &#39;references&#39; It would be much easier to help you it you would prepare sample that any body can copy&amp;paste&amp;run inside own IDE."}], "owner": {"reputation": 345, "user_id": 5900360, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/119ff10a995406c96dabfcc058c4894e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5900360/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1476923845, "creation_date": 1476923845, "question_id": 40143679, "link": "https://stackoverflow.com/questions/40143679/kotlin-runtime-errors-on-basic-operators", "title": "Kotlin Runtime errors on basic operators", "body": "<p>I am running a project on IntelliJ that has a mix of kotlin and Java; when I build the project I get a heap of errors which shouldnt occur. for example, the following code throws the error:</p>\n\n<p><strong>Error:(129, 23) Kotlin: Unresolved reference: +=</strong></p>\n\n<pre><code>override fun startMessagingService(RPCOps: RPCOps?) {\n    // Start up the embedded MQ server\n    messageBroker?.apply {\n        runOnStop += Runnable { messageBroker?.stop() }\n        start()\n        bridgeToNetworkMapService(networkMapService)\n    }\n}\n</code></pre>\n\n<p>Obviously these are just basic operations and shouldn't fail. When I click on the error message it doesn't show an error in the actual code file. Perhaps my configuration is wrong? If so; how to go about fixing it?</p>\n\n<p>There are many other errors that throw on basic operations like the one above. </p>\n"}]