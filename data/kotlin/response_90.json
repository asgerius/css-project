[{"tags": ["spring", "unit-testing", "testing", "mocking", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475060383, "post_id": 39744420, "comment_id": 66787456, "body": "Note that the <code>jdbcTrial</code> class needs to marked <code>open</code> to be able to mock it. Since you didn&#39;t include this class, we can&#39;t be sure of the problem."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475060554, "post_id": 39744420, "comment_id": 66787597, "body": "I added a bit of the class, it&#39;s quite a huge class atm, but you can conclude that every other function is set up the same"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475060948, "post_id": 39744420, "comment_id": 66787858, "body": "If I copy the <code>jdbcTrial</code> class and remove the methods that do not compile I am perfectly able to mock it using <code>Mockito.mock(jdbcTrial::class.java)</code>."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475061307, "post_id": 39744420, "comment_id": 66788128, "body": "And I get <code>Cannot mock&#47;spy class bye.persistence.jdbcTrial Mockito cannot mock&#47;spy following:   - final classes   - anonymous classes   - primitive types \tat byeTest.persistenceTest.RestAPITest$RootConfig.jdbcTrial(Res&zwnj;&#8203;tAPITest.kt:60)</code>"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475061576, "post_id": 39744420, "comment_id": 66788310, "body": "Try copying the <code>jdbcTrial</code> class you posted here, remove the <code>getUserById</code>, <code>searchEvents</code>, <code>getAll</code> and <code>getFoo()</code> methods, and try again? If that works, you may have removed too much."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1475064110, "post_id": 39744420, "comment_id": 66790015, "body": "That doesn&#39;t work either"}, {"owner": {"reputation": 15221, "user_id": 2326914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5be766827c5f7d3c077e92f75b7f9104?s=128&d=identicon&r=PG", "display_name": "Rog&#233;rio", "link": "https://stackoverflow.com/users/2326914/rog%c3%a9rio"}, "edited": false, "score": 1, "creation_date": 1475088569, "post_id": 39744420, "comment_id": 66806947, "body": "I think you should reconsider your testing strategy. Rather than mocking the <code>jdbcTrial</code> class (and doing the awful thing of marking it <code>open</code>), let your tests use it normally. Write an integration test, populating the db with the needed <code>User</code> data. I&#39;ve written hundreds of tests like this; it&#39;s a much better approach than isolated unit tests, and I say this as someone who develops a Java mocking library which <i>does</i> mock <code>final</code> classes."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475130764, "post_id": 39744420, "comment_id": 66821003, "body": "I already have a mocked database, this makes me able to test all the database functions. But I can&#39;t test the output of the REST API. You say that this doesn&#39;t matter and that testing only the database functions with a mocked DB is better?"}], "answers": [{"tags": [], "owner": {"reputation": 537, "user_id": 5478887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e8d8fba40f49258d4b90ec24cb0cf1f?s=128&d=identicon&r=PG&f=1", "display_name": "Piotrowy", "link": "https://stackoverflow.com/users/5478887/piotrowy"}, "is_accepted": false, "score": 0, "last_activity_date": 1529619893, "creation_date": 1529619893, "answer_id": 50978236, "question_id": 39744420, "link": "https://stackoverflow.com/questions/39744420/kotlin-mockito-cannot-mock-spy-spring-rest-api/50978236#50978236", "title": "Kotlin - Mockito cannot mock/spy (Spring REST API)", "body": "<p>About mock final classes in kotlin \u2013 You can use mockito kotlin library. It is available on github. And in this link <a href=\"https://hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito/\" rel=\"nofollow noreferrer\">https://hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito/</a> you can find out how to do it. I use it every day and I also use mockmvc from spring and it works fine.</p>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1374, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529619893, "creation_date": 1475057395, "last_edit_date": 1475060605, "question_id": 39744420, "link": "https://stackoverflow.com/questions/39744420/kotlin-mockito-cannot-mock-spy-spring-rest-api", "title": "Kotlin - Mockito cannot mock/spy (Spring REST API)", "body": "<p>Since all classes in Kotlin are <code>final</code> by default, and Mockito can't spy on final classes:</p>\n\n<pre><code>Cannot mock/spy class bye.persistence.jdbcTrial\nMockito cannot mock/spy following:\n  - final classes\n  - anonymous classes\n  - primitive types\n</code></pre>\n\n<p>And <a href=\"https://medium.com/@dpreussler/never-say-final-mocking-kotlin-classes-in-unit-tests-314d275b82b1#.tcjetb1tz\" rel=\"nofollow\">this guide</a>\n(6 July, Danny Preussler) is saying that a framework is neccessary to resolve this issue. </p>\n\n<p>Now was I wondering, is it possible to test a REST API (using Spring MockMvc). Below is my tester code:</p>\n\n<pre><code>package byeTest.persistenceTest\nimport bye.domain.User\nimport bye.persistence.jdbcTrial\nimport bye.spring.GreetingController\nimport byeTest.persistenceTest.RestAPITest.RootConfig\nimport org.junit.Before\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.mockito.BDDMockito.given\nimport org.mockito.Mockito\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.http.MediaType\nimport org.springframework.test.context.ContextConfiguration\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner\nimport org.springframework.test.context.web.WebAppConfiguration\nimport org.springframework.test.web.servlet.MockMvc\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers.content\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders\nimport org.springframework.web.context.WebApplicationContext\n\n@RunWith(SpringJUnit4ClassRunner::class)\n@ContextConfiguration(classes = arrayOf(RootConfig::class))\n@WebAppConfiguration\nopen class RestAPITest {\n    var mockMvc: MockMvc? = null;\n\n    @Autowired\n    var wac : WebApplicationContext? = null;\n\n    @Autowired\n    var jdbcTrial : jdbcTrial? = null\n\n    @Autowired\n    var todoServiceMock : GreetingController? = null;\n\n    @Before\n    open fun setup(){\n        mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build()\n        given(this.jdbcTrial?.getUserById(2)).willReturn(User(2,\"uname\",\"typ\"));\n\n    }\n\n\n\n    @Test\n    open public fun find_2(){\n        mockMvc!!.perform(get(\"/user/2\").accept(MediaType.APPLICATION_JSON))\n\n            .andExpect(content().string(\"{\\\"id\\\":2,\\\"username\\\":\\\"uname\\\",\\\"usertype\\\":\\\"typ\\\"}\"))\n\n\n    }\n\n    @Configuration\n    open class RootConfig{\n        @Bean\n        open fun jdbcTrial():jdbcTrial{\n            return Mockito.mock(jdbcTrial::class.java)\n        }\n    }\n}\n</code></pre>\n\n<p>I set all the functions and classes used to <code>open</code> since according to the <a href=\"https://kotlinlang.org/docs/reference/classes.html#inheritance\" rel=\"nofollow\">kotlin docs</a> this is the exact opposite of <code>final</code>. But using this (everywhere) still throws the exception mentioned above.</p>\n\n<pre><code>import bye.domain.Comment\nimport bye.domain.Event\nimport bye.domain.Participant\nimport bye.domain.User\nimport java.sql.Connection\nimport java.sql.DriverManager\nimport java.sql.ResultSet\nimport java.sql.Statement\nimport java.util.ArrayList\nimport javax.sql.DataSource\n\nopen class jdbcTrial() {\n    open var url: String = \"jdbc:postgresql://rosdel.quintor.local:5432/quintorevents\"\n    //val props: Properties = Properties();\n\n    open var DB_DRIVER = \"org.postgresql.Driver\";\n    open var dataSource:String? = \"b\";\n\n    constructor(s : String):this(){\n        this.dataSource = s\n    }\n\n    open fun getFoo():String{\n        var query : String = \"select val_col from foo_tbl where key_col = 'foo';\"\n        var rs:ResultSet = this.getConnection().createStatement().executeQuery(query)\n        var result:String = \"wrong\";\n        while(rs.next()){\n            result= rs.getString(\"val_col\")\n        }\n        return result;\n    }\n\n    open fun getBaz():String{\n        return \"qux\"\n    }\n\n    // /events\n    open fun getAll(): List&lt;Event&gt; {\n        return getMultipleEvents(\"select * from quintor_event;\")\n    }\n\n    // /events/search\n    open fun searchEvents(search: String): List&lt;Event&gt; {\n        var query = \"select * from quintor_event where title LIKE '%\" + search + \"%';\"\n        return getMultipleEvents(query)\n    }\n\n    // used for getting the comments\n    open fun getUserById(id: Int): User {\n        var query = \"select * from quintor_user where id = ${id};\";\n        return getSingleUser(query)\n    }\n    ........\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3501, "user_id": 1010964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a573f6a3ba81ebb6c39ea55e6062716?s=128&d=identicon&r=PG", "display_name": "Geralt_Encore", "link": "https://stackoverflow.com/users/1010964/geralt-encore"}, "edited": false, "score": 0, "creation_date": 1475051995, "post_id": 39741862, "comment_id": 66781398, "body": "Just fix this compilation errors. API has changed and it shouldn&#39;t be hard to find substitutions for these functions."}, {"owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "edited": false, "score": 0, "creation_date": 1475052803, "post_id": 39741862, "comment_id": 66781958, "body": "Also paste the source code, so we could see what might be wrong."}, {"owner": {"reputation": 162, "user_id": 3272215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAXzI.jpg?s=128&g=1", "display_name": "kdogruer", "link": "https://stackoverflow.com/users/3272215/kdogruer"}, "reply_to_user": {"reputation": 3501, "user_id": 1010964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a573f6a3ba81ebb6c39ea55e6062716?s=128&d=identicon&r=PG", "display_name": "Geralt_Encore", "link": "https://stackoverflow.com/users/1010964/geralt-encore"}, "edited": false, "score": 0, "creation_date": 1475052824, "post_id": 39741862, "comment_id": 66781979, "body": "@Geralt_Encore i&#39;m new to kotlin. I read something about deprecated api. Than i used Code Cleanup tool and change some lines manually. But i didnt find anything for these errors :("}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1475053095, "post_id": 39741862, "comment_id": 66782153, "body": "Please show the code causing the errors."}, {"owner": {"reputation": 162, "user_id": 3272215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAXzI.jpg?s=128&g=1", "display_name": "kdogruer", "link": "https://stackoverflow.com/users/3272215/kdogruer"}, "reply_to_user": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "edited": false, "score": 0, "creation_date": 1475053809, "post_id": 39741862, "comment_id": 66782628, "body": "@rafal question updated."}], "answers": [{"comments": [{"owner": {"reputation": 2059, "user_id": 595649, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8makD.jpg?s=128&g=1", "display_name": "Yog Guru", "link": "https://stackoverflow.com/users/595649/yog-guru"}, "edited": false, "score": 0, "creation_date": 1523449657, "post_id": 39743011, "comment_id": 86565061, "body": "Thanks man.. It is small but very important thing. &#39;()&#39; became headache for me. Just removed &#39;()&#39;"}, {"owner": {"reputation": 1869, "user_id": 1033591, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c28sO.jpg?s=128&g=1", "display_name": "Alston", "link": "https://stackoverflow.com/users/1033591/alston"}, "edited": false, "score": 0, "creation_date": 1572754926, "post_id": 39743011, "comment_id": 103655556, "body": "So in Kotlin, if you need to access a member variable with type <code>Int</code>, You don&#39;t use <code>getter</code>."}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": true, "score": 32, "last_activity_date": 1475054194, "creation_date": 1475054194, "answer_id": 39743011, "question_id": 39741862, "link": "https://stackoverflow.com/questions/39741862/kotlin-expression-length-of-type-int-cannot-be-invoked-as-a-function-the-f/39743011#39743011", "title": "Kotlin: Expression &#39;length&#39; of type &#39;Int&#39; cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>All of those int-returning methods (<code>String#length()</code>,...) have some time ago became properties. Just remove parenthesis <code>()</code> and use it in properties manner.</p>\n\n<pre><code>    var start = 0\n    var end = s.length  //without ()\n</code></pre>\n\n<p>btw. <code>String</code> already has a method <code>trim()</code></p>\n\n<p><code>charAt</code> should be replaced with <code>[]</code> operator. So replace <code>s.charAt(end-1)</code> with <code>s[end-1]</code></p>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 12, "last_activity_date": 1574124127, "last_edit_date": 1574124127, "creation_date": 1564425656, "answer_id": 57259721, "question_id": 39741862, "link": "https://stackoverflow.com/questions/39741862/kotlin-expression-length-of-type-int-cannot-be-invoked-as-a-function-the-f/57259721#57259721", "title": "Kotlin: Expression &#39;length&#39; of type &#39;Int&#39; cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>In Kotlin the expressions getter and setter differ from Java in the absence of parentheses. </p>\n\n<p><strong>getter:</strong> <code>#Class.method</code>\n<strong>setter:</strong> <code>#Class.method = value</code></p>\n\n<p>e.g.</p>\n\n<p>From: <code>competitions.value(body?.competitionsList)</code>.</p>\n\n<p>To: <code>competitions.value = body?.competitionsList</code></p>\n\n<p>e.g. 2:</p>\n\n<pre><code>// Gets linearlayout\n  val layout: LinearLayout = findViewById(R.id.myLayout)\n// Gets the layout params that will allow you to resize the layout\n  val params: ViewGroup.LayoutParams = layout.layoutParams\n  params.width = 100\n  params.height = 100\n  layout.layoutParams = params\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/6798938/5279996\">Source</a></p>\n"}], "owner": {"reputation": 162, "user_id": 3272215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAXzI.jpg?s=128&g=1", "display_name": "kdogruer", "link": "https://stackoverflow.com/users/3272215/kdogruer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19873, "favorite_count": 1, "accepted_answer_id": 39743011, "answer_count": 2, "score": 15, "last_activity_date": 1583850400, "creation_date": 1475050949, "last_edit_date": 1583850400, "question_id": 39741862, "link": "https://stackoverflow.com/questions/39741862/kotlin-expression-length-of-type-int-cannot-be-invoked-as-a-function-the-f", "title": "Kotlin: Expression &#39;length&#39; of type &#39;Int&#39; cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>I'm trying to fix an issue in an old kotlin project. But the problem is that I can't compile the code. I tried compile and run in Android Studio and IntelliJ. I got same errors.</p>\n\n<p>Here are the errors:</p>\n\n<pre><code>Error:(174, 25) Expression 'length' of type 'Int' cannot be invoked as a function. The function 'invoke()' is not found\n\nError:(176, 60) Unresolved reference: charAt\n\nError:(148, 67) Expression 'size' of type 'Int' cannot be invoked as a function. The function 'invoke()' is not found\n\nError:(107, 76) Expression 'ordinal' of type 'Int' cannot be invoked as a function. The function 'invoke()' is not found\n</code></pre>\n\n<p>My gradle script:</p>\n\n<pre><code>buildscript {\next.kotlin_version = '1.0.4'\n\nrepositories {\n    jcenter()\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:1.5.0'\n    classpath 'com.google.gms:google-services:1.5.0'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath 'com.neenbedankt.gradle.plugins:android-apt:1.4'\n}\n} \n.\n.\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n.\n.\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n}\n\ndependencies {\n  compile fileTree(dir: 'libs', include: ['*.jar'])\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n\n<p>For ordinal error:</p>\n\n<pre><code>//enum class\nenum class Category(val n:Int, val color:Int, val id : String){\n   HEADLINE(R.string.category_headline, Color.parseColor(\"#EC4A42\"), \"101\"),\n   .\n   .\n  }\n//where call ordinal func\nintent.putExtra(MainActivity.EXTRA_CATEGORY, Category.HEADLINE.ordinal())\n</code></pre>\n\n<p>For charAt error:</p>\n\n<pre><code>companion object{\n    fun trim(s : CharSequence) : CharSequence{\n        var start = 0\n        var end = s.length()\n\n        while (start &lt; end &amp;&amp; Character.isWhitespace(s.charAt(start))) {\n            start++\n        }\n\n        while (end &gt; start &amp;&amp; Character.isWhitespace(s.charAt(end - 1))) {\n            end--\n        }\n\n        return s.subSequence(start, end)\n    }\n}\n</code></pre>\n\n<p>For length():</p>\n\n<pre><code> companion object{\n    fun trim(s : CharSequence) : CharSequence{\n        var start = 0\n        var end = s.length()\n\n        while (start &lt; end &amp;&amp; Character.isWhitespace(s.charAt(start))) {\n            start++\n        }\n\n        while (end &gt; start &amp;&amp; Character.isWhitespace(s.charAt(end - 1))) {\n            end--\n        }\n\n        return s.subSequence(start, end)\n    }\n}\n</code></pre>\n\n<p>size() usage:</p>\n\n<pre><code>class PhotoGalleryAdapter(val ac : Activity, val result : ResponseNewsDetail) : PagerAdapter(){\n   override fun getCount(): Int = result.gallery!!.size()\n   .\n   .\n }\n</code></pre>\n\n<p>Any ideas/suggestions would be appreciated. Cheers!</p>\n"}, {"tags": ["overloading", "kotlin", "optional-parameters"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1475008552, "post_id": 39733830, "comment_id": 66765515, "body": "Note: While there are similar questions related to other languages like <a href=\"http://stackoverflow.com/questions/16789341/function-overloading-vs-optional-parameters\">C#</a> or <a href=\"http://stackoverflow.com/questions/304389/function-overloading-vs-default-parameters-in-vb-net\">VB.NET</a>, this question is specific to Kotlin."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1475009335, "post_id": 39733830, "comment_id": 66765944, "body": "Never use overloads for that, that&#39;s it. <code>@JVMOverloads</code> may be useful to consume them from Java"}], "answers": [{"comments": [{"owner": {"reputation": 1274, "user_id": 1001450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e98d17359212f2fdc2c56fac5f7f73?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Brinks", "link": "https://stackoverflow.com/users/1001450/bob-brinks"}, "edited": false, "score": 0, "creation_date": 1519056577, "post_id": 39735412, "comment_id": 84743669, "body": "I don&#39;t know Kotlin but is is possible to pass a non default Y value while leaving X default when callin foo()? If not that seems like a problem as you need to copy the default value for X in multiple places in your code."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 1274, "user_id": 1001450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e98d17359212f2fdc2c56fac5f7f73?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Brinks", "link": "https://stackoverflow.com/users/1001450/bob-brinks"}, "edited": false, "score": 1, "creation_date": 1519057501, "post_id": 39735412, "comment_id": 84744222, "body": "@BobBrinks this is clearly covered in Kotlin documentation, you can pass some values and not others.  You can do so using ordered parameters or named parameters depending on how the parameter list is defined."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 10, "last_activity_date": 1475318529, "last_edit_date": 1495542790, "creation_date": 1475015914, "answer_id": 39735412, "question_id": 39733830, "link": "https://stackoverflow.com/questions/39733830/default-arguments-vs-overloads-when-to-use-which/39735412#39735412", "title": "Default arguments vs overloads, when to use which", "body": "<p>In Kotlin code calling other Kotlin code optional parameters tend to be the norm over using overloads.  Using optional parameters should be you default behavior.</p>\n\n\n\n<p><strong>Special cases FOR using defaulted values:</strong></p>\n\n<ul>\n<li><p>As a general practice or if unsure -- use default arguments over overrides.</p></li>\n<li><p>if you want the default value to be seen by the caller, use default values.  They will show up in IDE tooltips (<em>i.e. Intellij IDEA</em>) and let the caller know they are being applied as part of the contract.  You can see in the following screenshot that calling <code>foo()</code> will default some values if values are omitted for <code>x</code> and <code>y</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dQ8kh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dQ8kh.png\" alt=\"enter image description here\"></a></p>\n\n<p>Whereas doing the same thing with function overloads hides this useful information and just presents a much more messy:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n5aqn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n5aqn.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>using default values causes bytecode generation of two functions, one with all parameters specified and another that is a bridge function that can check and apply missing parameters with their defaulted values.  No matter how many defaulted parameters you have, it is always <strong>only</strong> two functions.  So in a total-function-count constrained environment (<em>i.e. Android</em>), it can be better to have just these two functions instead of a larger number of overloads that it would take to accomplish the same job.</p></li>\n</ul>\n\n<p><strong>Cases where you might not want to use default argument values:</strong></p>\n\n<ul>\n<li><p>When you want another JVM language to be able to use the defaulted values you either need to use explicit overloads or use the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#overloads-generation\" rel=\"noreferrer\"><code>@JvmOverloads</code> annotation</a> which:</p>\n\n<blockquote>\n  <p>For every parameter with a default value, this will generate one additional overload, which has this parameter and all parameters to the right of it in the parameter list removed. </p>\n</blockquote></li>\n<li><p>You have a previous version of your library and for binary API compatibility adding a default parameter might break compatibility for existing compiled code whereas adding an overload would not.  </p></li>\n<li><p>You have a previous existing function:</p>\n\n<pre><code>fun foo() = ...\n</code></pre>\n\n<p>and you need to retain that function signature, but you also want to add another with the same signature but additional optional parameter:</p>\n\n<pre><code>fun foo() = ...\nfun foo(x: Int = 5) = ...   // never can be called using default value\n</code></pre>\n\n<p>You will not be able to use the default value in the 2nd version (other than via reflection <code>callBy</code>).  Instead all <code>foo()</code> calls without parameters still call the first version of the function.  So you need to instead use distinct overloads without the default or you will confuse users of the function:</p>\n\n<pre><code>fun foo() = ...  \nfun foo(x: Int) = ...\n</code></pre></li>\n<li><p>You have arguments that may not make sense together, and therefore overloads allow you to group parameters into meaningful coordinated sets.  </p></li>\n<li><p>Calling methods with default values has to do another step to check which values are missing and apply the defaults and then forward the call to the real method.  So in a performance constrained environment (<em>i.e. Android, embedded, real-time, billion loop iterations on a method call</em>) this extra check may not be desired.  Although if you do not see an issue in profiling, this might be an imaginary issue, might be inlined by the JVM, and may not have any impact at all.  Measure first before worrying.</p></li>\n</ul>\n\n<p><strong>Cases that don't really support either case:</strong></p>\n\n<p>In case you are reading general arguments about this from other languages...</p>\n\n<ul>\n<li><p>in a <a href=\"https://stackoverflow.com/a/251904/3679676\">C# answer for this similar question</a> the esteemed Jon Skeet mentions that you should be careful using defaults if they could change between builds and that would be a problem.  In C# the defaulting is at the call site, whereas in Kotlin for non-inlined functions it is inside of the (bridge) function being called.  Therefore for Kotlin it is the same impact for changing hidden and explicit defaulting of values and this argument should not impact the decision.  </p></li>\n<li><p>also in the C# answer saying that if team members have opposing views about use of defaulted arguments then maybe don't use them.  This should not be applied to Kotlin as they are a core language feature and used in the standard library since before 1.0 and there is no support for restricting their use.  The opposing team members should default to using defaulted arguments unless they have a definitive case that makes them unusable.   Whereas in C# it was introduced much later in the life cycle of that language and therefore had a sense of more \"optional adoption\"</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 4, "last_activity_date": 1475163986, "last_edit_date": 1475163986, "creation_date": 1475069199, "answer_id": 39748921, "question_id": 39733830, "link": "https://stackoverflow.com/questions/39733830/default-arguments-vs-overloads-when-to-use-which/39748921#39748921", "title": "Default arguments vs overloads, when to use which", "body": "<p>Let's examine how functions with default argument values are compiled in Kotlin to see if there's a difference in method count. It may differ depending on the target platform, so we'll look into Kotlin for JVM first. </p>\n\n<p>For the function <code>fun foo(parameter: Any, option: Boolean = false)</code> the following two methods are generated:</p>\n\n<ul>\n<li>First is <code>foo(Ljava/lang/Object;Z)V</code> which is being called when all arguments are specified at a call site.</li>\n<li>Second is <code>synthetic bridge foo$default(Ljava/lang/Object;ZILjava/lang/Object;)V</code>. It has 2 additional parameters: <code>Int</code> mask that specifies which parameters were actually passed and an <code>Object</code> parameter which currently is not used, but reserved for allowing super-calls with default arguments in the future.</li>\n</ul>\n\n<p>That bridge is called when some arguments are omitted at a call-site. The bridge analyzes the mask, provides default values for omitted arguments and then calls the first method now specifying all arguments.</p>\n\n<p>When you place <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#overloads-generation\" rel=\"nofollow\"><code>@JvmOverloads</code></a> annotation on a function, additional overloads are generated, one per each argument with default value. All these overloads delegate to <code>foo$default</code> bridge. For the <code>foo</code> function the following additional overload will be generated: <code>foo(Ljava/lang/Object;)V</code>.</p>\n\n<p>Thus, from the method count point of view, in a situation when a function has only one parameter with default value, it's no matter whether you use overloads or default values, you'll get two methods. But if there's more than one optional parameter, using default values instead of overloads will result in less methods generated.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1475070583, "creation_date": 1475070583, "answer_id": 39749487, "question_id": 39733830, "link": "https://stackoverflow.com/questions/39733830/default-arguments-vs-overloads-when-to-use-which/39749487#39749487", "title": "Default arguments vs overloads, when to use which", "body": "<p>Overloads could be preferred when the implementation of a function gets simpler when parameter is omitted.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>fun compare(v1: T, v2: T, ignoreCase: Boolean = false) =\n    if (ignoreCase) \n        internalCompareWithIgnoreCase(v1, v2) \n    else\n        internalCompare(v1, v2)\n</code></pre>\n\n<p>When it is called like <code>compare(a, b)</code> and <code>ignoreCase</code> is omitted, you actually pay twice for not using <code>ignoreCase</code>: first is when arguments are checked and default values are substituted instead of omitted ones and second is when you check the <code>ignoreCase</code> in the body of <code>compare</code> and branch to <code>internalCompare</code> based on its value.</p>\n\n<p>Adding an overload will get rid of these two checks. Also a method with such simple body is more likely to be inlined by JIT compiler.</p>\n\n<pre><code>fun compare(v1: T, v2: T) = internalCompare(v1, v2)\n</code></pre>\n"}], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 0, "accepted_answer_id": 39735412, "answer_count": 3, "score": 7, "last_activity_date": 1475318529, "creation_date": 1475008507, "question_id": 39733830, "link": "https://stackoverflow.com/questions/39733830/default-arguments-vs-overloads-when-to-use-which", "title": "Default arguments vs overloads, when to use which", "body": "<p>In Kotlin there are two ways to express an optional parameter, either by specifying default argument value:</p>\n\n<pre><code>fun foo(parameter: Any, option: Boolean = false) { ... }\n</code></pre>\n\n<p>or by introducing an overload:</p>\n\n<pre><code>fun foo(parameter: Any) = foo(parameter, false)\nfun foo(parameter: Any, option: Boolean) { ... }\n</code></pre>\n\n<p>Which way is preferred in which situations?</p>\n\n<p>What is the difference for consumers of such function?</p>\n"}, {"tags": ["maven", "unit-testing", "kotlin", "maven-surefire-plugin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1475019605, "post_id": 39723763, "comment_id": 66769651, "body": "Maven documentation is often not very clear about settings, their use and what they mean.  You hit a typical example of where Maven docs fall short.  My answer shows the problem..."}], "answers": [{"comments": [{"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475048126, "post_id": 39735811, "comment_id": 66778988, "body": "Turns out this wasn&#39;t the problem, the problem was that the test weren&#39;t compiled (maven plugin compiler <code>sourceDir</code>). Your (very detailed and explanatory) answer helped me resolve the problem so I&#39;ll accept it!"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475149619, "post_id": 39735811, "comment_id": 66833091, "body": "@Ivaro18 if compiled does the includes of  with <code>*.kt</code> actually work?  I think that still fails yes?"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475149870, "post_id": 39735811, "comment_id": 66833298, "body": "Not sure, I changed it to the class name version before adding the sourceDir"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475149958, "post_id": 39735811, "comment_id": 66833365, "body": "Updated the answer including the src/main/java vs. src/main/test issue"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1475150143, "post_id": 39735811, "comment_id": 66833517, "body": "I&#39;m pretty sure both issues were a problem.  glad you found the fix"}, {"owner": {"reputation": 2213, "user_id": 1490636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMa7z.jpg?s=128&g=1", "display_name": "Maksim Kostromin", "link": "https://stackoverflow.com/users/1490636/maksim-kostromin"}, "edited": false, "score": 0, "creation_date": 1535669133, "post_id": 39735811, "comment_id": 91163543, "body": "Was facing with similar issues, a that solution doesn&#39;t helped unless update surface plugin up to 2.20.1.. I&#39;m using java + kotlin (in both main and test dirs and Gradle compiles that with no problem and additional configurations at all"}, {"owner": {"reputation": 1944, "user_id": 204023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/11b667169ac3077e7b7dd6ada8753649?s=128&d=identicon&r=PG", "display_name": "Winder", "link": "https://stackoverflow.com/users/204023/winder"}, "edited": false, "score": 1, "creation_date": 1562593754, "post_id": 39735811, "comment_id": 100412981, "body": "After going through these troubleshooting steps my java tests were discovered but kotlin tests were still not found. I verified that the class files were being generated. In my case I was using JUnit5 and was missing the <code>junit-jupiter-engine</code> dependency. With that set make sure your versions of <code>maven-surefire-plugin</code> and <code>junit-jupiter-*</code> dependencies are compatible. We&#39;ve reached a point that the latest versions will probably be good to go. Today I&#39;m using <code>3.0.0-M3</code> and <code>5.5.0</code>."}, {"owner": {"reputation": 326, "user_id": 125145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a422d6e26eaa1937ea5b0268b8cf052?s=128&d=identicon&r=PG", "display_name": "Bruno Laturner", "link": "https://stackoverflow.com/users/125145/bruno-laturner"}, "reply_to_user": {"reputation": 1944, "user_id": 204023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/11b667169ac3077e7b7dd6ada8753649?s=128&d=identicon&r=PG", "display_name": "Winder", "link": "https://stackoverflow.com/users/204023/winder"}, "edited": false, "score": 0, "creation_date": 1603419822, "post_id": 39735811, "comment_id": 114038664, "body": "Thanks @Winder, I&#39;m also using JUnit 5. Upgrading the <code>maven-surefire-plugin</code> from <code>2.22.2</code> to <code>3.0.0-M5</code> solved my problem. No extra <code>&lt;configuration&gt;</code> tags needed anywhere."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 28, "last_activity_date": 1475150292, "last_edit_date": 1475150292, "creation_date": 1475018833, "answer_id": 39735811, "question_id": 39723763, "link": "https://stackoverflow.com/questions/39723763/kotlin-maven-not-executing-tests/39735811#39735811", "title": "Kotlin - Maven not executing tests", "body": "<p>Two problems, <strong>the first issue</strong> you found yourself but I'll document here.  In the Kotlin-Maven plugin you have the settings for <code>test-compile</code> goal as:</p>\n\n<pre><code>&lt;execution&gt;\n      &lt;id&gt;test-compile&lt;/id&gt;\n      &lt;goals&gt;\n          &lt;goal&gt;test-compile&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n          &lt;sourceDirs&gt;\n               &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n          &lt;/sourceDirs&gt;\n      &lt;/configuration&gt;\n&lt;/execution&gt;\n</code></pre>\n\n<p>Which is compiling the <code>src/main/java</code> directory instead of <code>src/test/java</code> so your tests are not being compiled at all.  Should be:</p>\n\n<pre><code>          &lt;sourceDirs&gt;\n               &lt;sourceDir&gt;${project.basedir}/src/test/java&lt;/sourceDir&gt;\n          &lt;/sourceDirs&gt;\n</code></pre>\n\n<p>Or if your files are both in the <code>java</code> and <code>kotlin</code> directories:</p>\n\n<pre><code>          &lt;sourceDirs&gt;\n               &lt;sourceDir&gt;${project.basedir}/src/test/java&lt;/sourceDir&gt;\n               &lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\n          &lt;/sourceDirs&gt;\n</code></pre>\n\n<p><strong>The second issue</strong> is likely you trying to work around the first one.  And it looks fine on the surface but is incorrect configuration of the Surefire plugin.  The documentation for the Maven Surefire plugin isn't quite accurate (or it isn't complete about how it works).  If you remove your Surefire plugin configuration completely it will work because the defaults already do what you want.  Or you can change from listing the <code>include</code> file patterns from having the <code>.kt</code> suffix instead to <code>.class</code> or <code>.java</code> suffixes and those will work fine even for Kotlin, Clojure, Scala, ...</p>\n\n<p><strong>Why?  here is the story...</strong></p>\n\n<p>This configuration:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.19.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/Test*.java&lt;/include&gt;\n                    &lt;include&gt;**/*Test.java&lt;/include&gt;\n                    &lt;include&gt;**/*TestCase.java&lt;/include&gt;\n                    &lt;include&gt;**/RandomName.java&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Doesn't do what you think it does.  This is actually converted in Surefire by doing a search and replace on <code>.java</code> to <code>.class</code>, and internally becomes:</p>\n\n<pre><code>            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/Test*.class&lt;/include&gt;\n                    &lt;include&gt;**/*Test.class&lt;/include&gt;\n                    &lt;include&gt;**/*TestCase.class&lt;/include&gt;\n                    &lt;include&gt;**/RandomName.class&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/configuration&gt;\n</code></pre>\n\n<p>But if you use the <code>.kt</code> extension you break this hard coded magic.  You can see it in the <a href=\"https://github.com/apache/maven-surefire/blob/076d68f6e7866b9077f5eb401643d67ec26f69ce/surefire-api/src/main/java/org/apache/maven/surefire/testset/ResolvedTest.java#L329-L334\" rel=\"noreferrer\">source code of Surefire plugin</a> where it replaces files that end with <code>.java</code> with <code>.class</code>.  <em>Ooops, it has nothing to do with source files at all and is looking for compiled classes.</em></p>\n\n<p>In Surefire plugin <code>2.19</code> they added the ability to have <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\" rel=\"noreferrer\">regex and also fully qualified classname patterns</a>.  So the way the plugin decides which you are using seems to be by the filename extension <code>.java</code>.  If it sees <code>.java</code> it knows that each <code>.java</code> file becomes a class of the same name, so instead it looks for the classes that match the pattern, not the source code.  The source is already compiled by the compiler plugins, not the test runner.  It has no business looking for source code.  </p>\n\n<p>So this setting is misleading and is really using \"magic\" to figure out a classname instead of just asking for classnames.  Of course the samples and everything completely make you believe it is related to source files.  It isn't.</p>\n\n<p>It is better to use no configuration and follow the default naming convention.  Or if you must specify something, use the more modern regex or class name version of the <code>include</code> configuration:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.19.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;Test*&lt;/include&gt;\n                    &lt;include&gt;*Test&lt;/include&gt;\n                    &lt;include&gt;*TestCase&lt;/include&gt;\n                    &lt;include&gt;RandomName&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Which is now comparing to any class with those names in any package.  </p>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6790, "favorite_count": 2, "accepted_answer_id": 39735811, "answer_count": 1, "score": 9, "last_activity_date": 1534410122, "creation_date": 1474976498, "last_edit_date": 1534410122, "question_id": 39723763, "link": "https://stackoverflow.com/questions/39723763/kotlin-maven-not-executing-tests", "title": "Kotlin - Maven not executing tests", "body": "<p>I have a Kotlin application which I want to test. My tests (<code>.kt</code>) files execute with success in Eclipse. (The test itself is a <code>h2 mock</code> jdbc test). </p>\n\n<p>Now when running <code>mvn test -X</code> it says: </p>\n\n<pre><code> releases: [enabled =&gt; true, update =&gt; never]\n]\n[DEBUG]   (s) reportFormat = brief\n[DEBUG]   (s) reportsDirectory = C:\\Users\\Ivar\\workspace\\anotherworkspace\\newrestservice\\complete\\target\\surefire-reports\n[DEBUG]   (f) rerunFailingTestsCount = 0\n[DEBUG]   (f) reuseForks = true\n[DEBUG]   (s) runOrder = filesystem\n[DEBUG]   (f) shutdown = testset\n[DEBUG]   (s) skip = false\n[DEBUG]   (f) skipAfterFailureCount = 0\n[DEBUG]   (s) skipTests = false\n[DEBUG]   (s) suiteXmlFiles = []\n[DEBUG]   (s) testClassesDirectory = C:\\Users\\Ivar\\workspace\\anotherworkspace\\newrestservice\\complete\\target\\test-classes\n[DEBUG]   (s) testFailureIgnore = false\n[DEBUG]   (s) testNGArtifactName = org.testng:testng\n[DEBUG]   (s) testSourceDirectory = C:\\Users\\Ivar\\workspace\\anotherworkspace\\newrestservice\\complete\\src\\test\\java\n[DEBUG]   (s) threadCountClasses = 0\n[DEBUG]   (s) threadCountMethods = 0\n[DEBUG]   (s) threadCountSuites = 0\n[DEBUG]   (s) trimStackTrace = true\n[DEBUG]   (s) useFile = true\n[DEBUG]   (s) useManifestOnlyJar = true\n[DEBUG]   (s) useSystemClassLoader = true\n[DEBUG]   (s) useUnlimitedThreads = false\n[DEBUG]   (s) workingDirectory = C:\\Users\\Ivar\\workspace\\anotherworkspace\\newrestservice\\complete\n[DEBUG]   (s) project = MavenProject: org.springframework:gs-rest-service:0.1.0 @ C:\\Users\\Ivar\\workspace\\anotherworkspace\\newrestservice\\complete\\pom.xml\n</code></pre>\n\n<p>And it doesn't execute any test (It can't find em)</p>\n\n<p>Here's my <code>pom.xml</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.4.0.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--  &lt;dependency&gt;\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n            &lt;version&gt;1.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;9.4.1211&lt;/version&gt;&lt;!--$NO-MVN-MAN-VER$ --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-dbutils&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;1.4.191&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-reflect --&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;version&gt;1.0.3&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirs&gt;\n                                &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                            &lt;/sourceDirs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;&lt;!--$NO-MVN-MAN-VER$ --&gt;\n                &lt;executions&gt;\n                    &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-compile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;java-test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.19.1&lt;/version&gt;&lt;!--$NO-MVN-MAN-VER$--&gt;\n                    &lt;configuration&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;**/Test*.kt&lt;/include&gt;\n                            &lt;include&gt;**/*Test.kt&lt;/include&gt;\n                            &lt;include&gt;**/*TestCase.kt&lt;/include&gt;\n                        &lt;/includes&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n&lt;/project&gt;\n</code></pre>\n"}, {"tags": ["java", "spring", "gradle", "spring-boot", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 6885932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44e34cda66fe1567531573f1d74395de?s=128&d=identicon&r=PG&f=1", "display_name": "runitfirst", "link": "https://stackoverflow.com/users/6885932/runitfirst"}, "edited": false, "score": 0, "creation_date": 1474968202, "post_id": 39718041, "comment_id": 66739251, "body": "Got the idea. Thanks . specially for mentioning <code>field injection to constructor injection</code> in sb 1.4."}], "tags": [], "owner": {"reputation": 84621, "user_id": 1384297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQ01b.jpg?s=128&g=1", "display_name": "Andy Wilkinson", "link": "https://stackoverflow.com/users/1384297/andy-wilkinson"}, "is_accepted": true, "score": 2, "last_activity_date": 1474959589, "creation_date": 1474959589, "answer_id": 39718041, "question_id": 39717450, "link": "https://stackoverflow.com/questions/39717450/explanation-of-configuration-autoconfigureafter-with-kotlin/39718041#39718041", "title": "Explanation of @Configuration @AutoConfigureAfter with Kotlin", "body": "<p><code>WebMvcAutoConfigurationAdapter</code> isn't intended to be used directly by application code. You should be extending <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html\" rel=\"nofollow\">WebMvcConfigurerAdapter</a> instead.</p>\n\n<p>I suspect you've upgraded to Spring Boot 1.4. In that release, <code>WebMvcAutoConfigurationAdapter</code> changed from using field injection to constructor injection. This means that subclasses now need to call the super-constructor passing in the required arguments.</p>\n\n<p><code>@AutoConfigureAfter</code> only controls the ordering of auto-configuration classes and has no effect on dependency injection. It also only affects auto-configuration classes so may we'll be doing nothing on your <code>Assembly</code> class.</p>\n\n<p><code>@Configuration</code> doesn't really affect dependency injection either. Configuration classes can have dependencies injected, either into fields annotated with <code>@Autowired</code> or into their constructor. Previously, that constructor also had to be annotated with <code>@Autowired</code> but, <a href=\"https://spring.io/blog/2016/03/04/core-container-refinements-in-spring-framework-4-3\" rel=\"nofollow\">as of Spring Framework 4.3 (Spring Boot 1.4)</a>, the annotation is unnecessary if the class has a single constructor.</p>\n"}], "owner": {"reputation": 193, "user_id": 6885932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44e34cda66fe1567531573f1d74395de?s=128&d=identicon&r=PG&f=1", "display_name": "runitfirst", "link": "https://stackoverflow.com/users/6885932/runitfirst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 1, "accepted_answer_id": 39718041, "answer_count": 1, "score": 4, "last_activity_date": 1474959589, "creation_date": 1474957585, "question_id": 39717450, "link": "https://stackoverflow.com/questions/39717450/explanation-of-configuration-autoconfigureafter-with-kotlin", "title": "Explanation of @Configuration @AutoConfigureAfter with Kotlin", "body": "<p>I am a python dev and totally new to Spring boot and gradle. However i am fine with java and Trying my best with Kotlin. I was trying to run Spring Boot application(Kotlin) on localhost. Gradle build is working fine except these line</p>\n\n<pre><code>@Configuration\n@AutoConfigureAfter(DispatcherServletAutoConfiguration::class)\nopen class Assembly : WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter()\n{\n   .\n   .\n</code></pre>\n\n<blockquote>\n  <p>No value passed for parameter resourceProperties, mvcProperties, beanFactory....</p>\n</blockquote>\n\n<p>I understand that <code>WebMvcAutoConfigurationAdapter</code> constructor expects these params but should they not be passed automatically through annotation <code>@Configuration</code> and <code>@AutoConfigureAfter</code> .</p>\n\n<p>As i am totally new to spring boot i have no idea what is going wrong and where. As this code is already running in production so i am really confused about whether i am missing some local configuration or gradle conf or something else.</p>\n"}, {"tags": ["android", "kotlin", "lint", "butterknife", "kapt2"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1475019733, "post_id": 39714487, "comment_id": 66769683, "body": "You might want to explore the Kotlin discussion forums for the EAP, or the Kotlin Slack channel #eap for issues of experimental features, which I think includes KAPT2."}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1476535003, "post_id": 39714487, "comment_id": 67392540, "body": "There&#39;s a <code>butterknife</code> for <code>kotlin</code> called <code>kotterknife</code> - check if changing this library would help."}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474937474, "creation_date": 1474937474, "question_id": 39714487, "link": "https://stackoverflow.com/questions/39714487/kapt2-and-butterknife-produce-lint-error-expected-resource-of-type-id", "title": "kapt2 and butterknife produce lint error: Expected resource of type id", "body": "<p>When updating to kotlin 1.0.4 and kapt2 I am getting the following lint-errors:</p>\n\n<pre><code>../generated/source/kapt2/withMapsWithAnalyticsForPlayRelease/org/ligi/passandroid/ui/pass_view_holder/EditViewHolder_ViewBinding.java:20: Expected resource of type id\n  17     super(target, source);\n  18 \n  19     View view;\n  20     view = Utils.findRequiredView(source, 2131624091, \"method 'onNavigateClick'\");\n  21     view2131624091 = view;\n  22     view.setOnClickListener(new DebouncingOnClickListener() {\n../generated/source/kapt2/withMapsWithAnalyticsForPlayRelease/org/ligi/passandroid/ui/pass_view_holder/EditViewHolder_ViewBinding.java:28: Expected resource of type id\n  25         target.onNavigateClick();\n  26       }\n  27     });\n  28     view = Utils.findRequiredView(source, 2131624092, \"method 'onCalendarClick'\");\n  29     view2131624092 = view;\n  30     view.setOnClickListener(new DebouncingOnClickListener() {\n</code></pre>\n\n<p>Is there a way to switch off this check for these files? I do not want to disable this check globally</p>\n"}, {"tags": ["scala", "jvm", "kotlin", "scalac"], "comments": [{"owner": {"reputation": 11826, "user_id": 480674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad9d486ce723011505e86c2136937ca?s=128&d=identicon&r=PG", "display_name": "pedrofurla", "link": "https://stackoverflow.com/users/480674/pedrofurla"}, "edited": false, "score": 1, "creation_date": 1474935903, "post_id": 39714242, "comment_id": 66726498, "body": "I will guess that you need <code>val recordSchema:Schema = schemas.getSchema(id)</code>, does that work?"}, {"owner": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "reply_to_user": {"reputation": 11826, "user_id": 480674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad9d486ce723011505e86c2136937ca?s=128&d=identicon&r=PG", "display_name": "pedrofurla", "link": "https://stackoverflow.com/users/480674/pedrofurla"}, "edited": false, "score": 0, "creation_date": 1474936824, "post_id": 39714242, "comment_id": 66726729, "body": "No, that moves the compiler error to that statement, which a similar error message to the second error."}, {"owner": {"reputation": 11826, "user_id": 480674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad9d486ce723011505e86c2136937ca?s=128&d=identicon&r=PG", "display_name": "pedrofurla", "link": "https://stackoverflow.com/users/480674/pedrofurla"}, "edited": false, "score": 1, "creation_date": 1474937434, "post_id": 39714242, "comment_id": 66726854, "body": "can you the declaration of <code>schemas</code> and the implementation (or at least method signature) of <code>schemas.getSchema(id)</code> ?"}, {"owner": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "reply_to_user": {"reputation": 11826, "user_id": 480674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fad9d486ce723011505e86c2136937ca?s=128&d=identicon&r=PG", "display_name": "pedrofurla", "link": "https://stackoverflow.com/users/480674/pedrofurla"}, "edited": false, "score": 0, "creation_date": 1474950199, "post_id": 39714242, "comment_id": 66729647, "body": "Yeah, sure, I am just wrapping a schema registry library.  Trying to reduce the amount of noise in the original post - the signature is simply <code>fun getSchema(id: Int): Schema.RecordSchema</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "edited": false, "score": 0, "creation_date": 1474995836, "post_id": 39718093, "comment_id": 66758347, "body": "Yeah not sure if it&#39;s a bug in Kotlin or Scala or both, but ultimately this looks like a bug.  Submitted to both Scala and Kotlin teams - we&#39;ll see if a fix pans out."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "edited": false, "score": 1, "creation_date": 1475047664, "post_id": 39718093, "comment_id": 66778701, "body": "Since Kotlin classes works in Java i think this is bug in scalac."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1474959746, "creation_date": 1474959746, "answer_id": 39718093, "question_id": 39714242, "link": "https://stackoverflow.com/questions/39714242/why-is-the-scala-compiler-giving-me-an-error-when-passing-a-kotlin-sealed-class/39718093#39718093", "title": "Why is the Scala compiler giving me an error when passing a Kotlin sealed class into a constructor?", "body": "<p>Looks like Kotlin generates different number of classes for this case. I compiled Java and Kotlin sources and found that Java has additional file <code>ParentSealedJava$1.class</code>. Bytecode of <code>Parent</code> and <code>Sealed</code> classes in Java and Kotlin pretty the same (i inspect bytecode using javap -c), so i think Scala compiler relies somehow on this missing file in Kotlin.</p>\n"}], "owner": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474959746, "creation_date": 1474935468, "last_edit_date": 1474953377, "question_id": 39714242, "link": "https://stackoverflow.com/questions/39714242/why-is-the-scala-compiler-giving-me-an-error-when-passing-a-kotlin-sealed-class", "title": "Why is the Scala compiler giving me an error when passing a Kotlin sealed class into a constructor?", "body": "<p>I have a sealed class, written in Kotlin:</p>\n\n<pre><code>sealed class Schema {\n    class RecordSchema(val fields: List&lt;Field&gt;): Schema()\n    class ArraySchema(val elementSchema: Schema): Schema()\n    ...\n}\n</code></pre>\n\n<p>And another class that takes <code>RecordSchema</code> as a parameter:</p>\n\n<p><code>class Enrichment(config: Config, val schema: RecordSchema) { ... }</code></p>\n\n<p>In Scala I have a class that, among other things, get an instance of the <code>RecordSchema</code> and then create an instance of the <code>Enrichment</code>.</p>\n\n<pre><code>object Job {\n    def main(args: Array[String]): Unit = {\n        /// some initializing of resources... and then...\n        val recordSchema = schemas.getSchema(id) // type is Schema.RecordSchema\n        val enrichment = Enrichment(config, recordSchema) // this is where scalac errors out\n    }\n}\n</code></pre>\n\n<p>The scala compiler ends up printing this error message:</p>\n\n<pre><code>Error:(52, 62) type mismatch;\n found   : com.companyname.enricher.schemas.com.companyname.enricher.schemas.com.companyname.enricher.schemas.\n required: com.companyname.enricher.schemas.(some other)com.companyname.enricher.schemas.com.companyname.enricher.schemas.\n    val enrichment = new Enrichment(config, recordSchema)\n</code></pre>\n\n<p>If I cast <code>recordSchema</code> using <code>asInstanceOf</code> I get another, not so useful, error:</p>\n\n<pre><code>Error:(52, 62) type mismatch;\n found   : com.companyname.enricher.schemas.Schema.RecordSchema\n required: com.companyname.enricher.schemas.com.companyname.enricher.schemas.\n    val enrichment = new Enrichment(config, recordSchema.asInstanceOf[RecordSchema])\n</code></pre>\n\n<p>Overall, I have no idea why this is happening.  If I make the constructor take the parent class as a parameter rather than nested class, it compiles just fine (which is my workaround for now).  If I do the same type of thing, except having written the sourcecode in Java rather than Kotlin, this error does not happen.  I am using Java 1.8, Kotlin 1.0.4, Scala 2.11.8.</p>\n\n<p>UPDATE:</p>\n\n<p>demonstrated bug here:\n<a href=\"https://github.com/mjburghoffer/scala-kotlin-innerclass-bug/tree/master\" rel=\"nofollow\">https://github.com/mjburghoffer/scala-kotlin-innerclass-bug/tree/master</a></p>\n"}, {"tags": ["android", "realm", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1474910450, "post_id": 39708623, "comment_id": 66715412, "body": "Did you confirm that each <code>timeStamp</code> actually has a unique value? If they are the same then sorting might not change anything. Just a thought."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1474910648, "post_id": 39708623, "comment_id": 66715527, "body": "The documentation does say &quot;If the result is sorted, the first object will be returned in case of multiple occurrences&quot;, so it seems it should indeed return the <code>c</code> object instead of the <code>a</code>."}, {"owner": {"reputation": 3499, "user_id": 2535024, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d3tTo.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/2535024/andrew"}, "edited": false, "score": 0, "creation_date": 1474910742, "post_id": 39708623, "comment_id": 66715576, "body": "I&#39;m running this code in a unit test, I&#39;m literally using 1 2 3 4 as timestamps"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1474917809, "post_id": 39708623, "comment_id": 66719429, "body": "Is this Realm version 1.2.0? Can you by chance try with 1.1.1?"}, {"owner": {"reputation": 3499, "user_id": 2535024, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d3tTo.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/2535024/andrew"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1474918839, "post_id": 39708623, "comment_id": 66720033, "body": "@EpicPandaForce it doesn&#39;t work even on 1.1.1"}, {"owner": {"reputation": 3499, "user_id": 2535024, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d3tTo.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/2535024/andrew"}, "edited": false, "score": 0, "creation_date": 1475084095, "post_id": 39708623, "comment_id": 66804277, "body": "You can find the issue about this problem here <a href=\"https://github.com/realm/realm-java/issues/3503\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/3503</a>"}], "owner": {"reputation": 3499, "user_id": 2535024, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d3tTo.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/2535024/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1474910360, "creation_date": 1474910007, "last_edit_date": 1474910360, "question_id": 39708623, "link": "https://stackoverflow.com/questions/39708623/realm-findallsorted-and-distinct", "title": "Realm, findAllSorted and distinct", "body": "<p>I have a method like this:</p>\n\n<pre><code>override fun getStuff(): MutableList&lt;Stuff&gt; = realm.where(Stuff::class.java)\n        .findAllSorted(\"timeStamp\", Sort.DESCENDING)\n        .distinct(\"otherId\")\n</code></pre>\n\n<p>where <code>Stuff</code> is something has a <code>timeStamp</code> filed.<br>\nIf I do:</p>\n\n<pre><code>storage.saveStuff(Stuff(\"a\", otherId=1, timeStamp=1))\nstorage.saveStuff(Stuff(\"b\", otherId=1, timeStamp=2))\nstorage.saveStuff(Stuff(\"c\", otherId=1, timeStamp=3))\n// Other stuff with different otherId\n</code></pre>\n\n<p>I expect:</p>\n\n<pre><code>storage.getStuff()[0].name == \"c\"\n</code></pre>\n\n<p>But it's not. It's <code>a</code>.<br>\nIf I set <code>Sort.ASCENDING</code>, I still get <code>a</code>.\nWhat am I doing wrong?</p>\n"}, {"tags": ["android-studio", "kotlin", "android-testing"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1474906469, "post_id": 39707241, "comment_id": 66713200, "body": "could you add your test class, seeing only bit of code is not enough to say what problem is"}, {"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "reply_to_user": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1474906759, "post_id": 39707241, "comment_id": 66713360, "body": "@piotrek1543 it&#39;s not relevant. A completely empty test will pass. If add an exception to the test method <code>throw RuntimeException()</code> - and recompile then rerun the test, it passes because IntelliJ somehow uses the wrong cache. I have to restart the IDE for the new line of code to be recognized"}, {"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1476076772, "post_id": 39707241, "comment_id": 67183335, "body": "Are you running your test in Android Studio on a Windows box?   I have seen the &quot;No Tests Found&quot; error a LOT when running JUnit tests.   Very few google developers use the Windows platform - so there are some unresolved issues due partly to lack of exposure.    Here is a discussion:  <a href=\"http://github.com/googlecodelabs/android-testing/issues/27\" rel=\"nofollow noreferrer\">github.com/googlecodelabs/android-testing/issues/27</a>"}, {"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "reply_to_user": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1476077684, "post_id": 39707241, "comment_id": 67183540, "body": "@JimAndreas on a Mac actually"}, {"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1476105334, "post_id": 39707241, "comment_id": 67197868, "body": "Found a bug report on the JetBrains tracker - see below."}], "answers": [{"comments": [{"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1474907182, "post_id": 39707783, "comment_id": 66713589, "body": "note - this is actualy a JVM test (non-android) in an android library project."}], "tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 2, "last_activity_date": 1474907840, "last_edit_date": 1474907840, "creation_date": 1474906993, "answer_id": 39707783, "question_id": 39707241, "link": "https://stackoverflow.com/questions/39707241/i-have-to-restart-ide-to-run-tests/39707783#39707783", "title": "I have to restart IDE to run tests", "body": "<p>Check if you're have all these dependencies:</p>\n\n<pre><code>dependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n  testCompile 'junit:junit:4.11'\n  testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n}\n</code></pre>\n\n<p>Also as you're using <code>Kotlin</code> please disable entirely <code>Instant Run</code> in <code>File -&gt; Preferences</code>.</p>\n\n<p>EDIT: You're talking about tests in library - do <code>modules</code> and <code>project</code> has these dependencies and proper configuration. </p>\n\n<p>It looks like after Gradle rebuilding, test works fine.</p>\n"}, {"comments": [{"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1475933201, "post_id": 39932270, "comment_id": 67147804, "body": "Yes. Presumably though there&#39;s something wrong in our build files that is causing this"}], "tags": [], "owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "is_accepted": false, "score": 1, "last_activity_date": 1475929155, "creation_date": 1475929155, "answer_id": 39932270, "question_id": 39707241, "link": "https://stackoverflow.com/questions/39707241/i-have-to-restart-ide-to-run-tests/39932270#39932270", "title": "I have to restart IDE to run tests", "body": "<p>I guess you use gradle in your project? I had the exact same problem and the solution was to use gradle to execute tests (inside the gradle task list) instead of using the menu (right click on the test file and run tests).</p>\n"}, {"comments": [{"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "reply_to_user": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1476128744, "post_id": 39959187, "comment_id": 67211049, "body": "I added kotlin and duplicated your lib test pretty much exactly.  It works fine on my system - and if I add the exception, it is properly thrown without needing a restart.   You might try what I normally do when I am stuck, and that is File / Invalidate Caches/Restart (but you probably already tried that!).   So, in summary, your tests work fine on my system, and this suggests something is funny in your test system.   You might just try a fresh install of AS2.2 in a new folder."}, {"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 0, "creation_date": 1476128809, "post_id": 39959187, "comment_id": 67211082, "body": "thanks! But I finally figured it out - see my answer <a href=\"http://stackoverflow.com/a/39965565/891242\">stackoverflow.com/a/39965565/891242</a>"}], "tags": [], "owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "is_accepted": false, "score": 2, "last_activity_date": 1476105303, "creation_date": 1476105303, "answer_id": 39959187, "question_id": 39707241, "link": "https://stackoverflow.com/questions/39707241/i-have-to-restart-ide-to-run-tests/39959187#39959187", "title": "I have to restart IDE to run tests", "body": "<p>I found this bug description in the JetBrains IntelliJ bug tracking system.   Here is the URL:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-149275\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-149275</a></p>\n\n<p>It discusses a change that was made to classloading that may impact Junit test execution.   A workaround is suggested by adding a line to the options.xml config file.  Here is an example workaround for Windows boxes - change as necessary for your platform.   The version of Android below is the current 2.2 release:</p>\n\n<p>1) exit Android studio</p>\n\n<p>2) navigate to the config/options directory for your Android version:</p>\n\n<p>e.g. <code>C:\\Users\\YourNameHere\\.AndroidStudio2.2\\config\\options</code></p>\n\n<p>3) then add the \"<code>&lt;property name=\"idea.dynamic.classpath.jar\" value=\"false\" /&gt;</code>\" line inside the component block of the options.xml file:</p>\n\n<pre><code>&lt;component name=\"PropertiesComponent\"&gt;\n  &lt;property name=\"idea.dynamic.classpath.jar\" value=\"false\" /&gt;\n</code></pre>\n\n<p>Start Android Studio and try running local Junit tests.</p>\n"}, {"tags": [], "owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "is_accepted": true, "score": 4, "last_activity_date": 1476128828, "last_edit_date": 1476128828, "creation_date": 1476128385, "answer_id": 39965565, "question_id": 39707241, "link": "https://stackoverflow.com/questions/39707241/i-have-to-restart-ide-to-run-tests/39965565#39965565", "title": "I have to restart IDE to run tests", "body": "<p>Found the fix...the issue only occurs when there's a variant selection conflict. Removing the conflict fixed the issue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kC8tJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kC8tJ.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4049, "favorite_count": 2, "accepted_answer_id": 39965565, "answer_count": 4, "score": 9, "last_activity_date": 1476128828, "creation_date": 1474905186, "last_edit_date": 1476121555, "question_id": 39707241, "link": "https://stackoverflow.com/questions/39707241/i-have-to-restart-ide-to-run-tests", "title": "I have to restart IDE to run tests", "body": "<p>Weird bug with Android Studio 2.2 when running a single test directly in IDE - I'll either have \"No tests found\" or run my previously compiled test.</p>\n\n<p>Example:</p>\n\n<pre><code>@Test\nfun testyTest() {\n}\n</code></pre>\n\n<p>I'll create this test, and get the \"No tests found\". So I restart, and test is found! Obviously, the above test passes because it's empty. Next, I want my test to fail. So I manually throw an exception and add one line of code, below.</p>\n\n<pre><code>@Test\nfun testyTest() {\n    throw RuntimeException()\n}\n</code></pre>\n\n<p>Now I recompile, and this test passes too, because IntelliJ is for some reason has cached the previous test and reruns that. To get this test to properly fail - I must restart the IDE.</p>\n\n<p>Anyone know what's going on? Note - I'm using Kotlin pretty heavily in this project.</p>\n\n<p>EDIT 2: This is a JVM test (non-android, <code>src/test/java</code>) in an android <em>library</em> project.</p>\n\n<p>EDIT: here's a full test class</p>\n\n<pre><code>package com.example.zak\n\nimport org.junit.Before\nimport org.junit.Test\n\n\nclass ExampleTest {\n\n    @Before\n    fun setUp() {\n\n    }\n\n    @Test\n    fun testyTest() {\n        //throw RuntimeException()\n    }\n}\n</code></pre>\n"}, {"tags": ["function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1474817143, "post_id": 39686891, "comment_id": 66676315, "body": "maybe make it clearer that you are &quot;wrapping&quot; the function with a lamda to capture the instance, until bound callable references are available.  The first verison of your syntax would be hard to beginners to grok."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 3, "creation_date": 1474844132, "post_id": 39686891, "comment_id": 66684402, "body": "It&#39;s worth noting that <code>regex.containsMatchIn(s)</code> can also be expressed as <code>regex in s</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1474821970, "last_edit_date": 1474821970, "creation_date": 1474807009, "answer_id": 39686891, "question_id": 39686529, "link": "https://stackoverflow.com/questions/39686529/kotlin-get-a-reference-to-a-function-of-a-class-instance/39686891#39686891", "title": "Kotlin: get a Reference to a Function of a Class&#39; instance", "body": "<p>In Kotlin 1.0.4, <a href=\"https://github.com/Kotlin/KEEP/issues/5\" rel=\"nofollow\">bound callable references</a> (those with expressions on left-hand side) are not available yet, you can only <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow\">use class name to the left of <code>::</code></a>. </p>\n\n<p>This feature is <a href=\"https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/\" rel=\"nofollow\">planned for Kotlin 1.1</a> and will have the following syntax:</p>\n\n<pre><code>val f = Regex.fromLiteral(\"some regex\")::containsMatchIn\n</code></pre>\n\n<p>Until then, you can express the same using lambda syntax. To do it, you should capture a <code>Regex</code> into a single-argument lambda function:</p>\n\n<pre><code>val regex = Regex.fromLiteral(\"some regex\")\nval f = { s: CharSequence -&gt; regex.containsMatchIn(s) } // (CharSequence) -&gt; Boolean\n</code></pre>\n\n<p>One-line equivalent using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"nofollow\"><code>with(...) { ... }</code></a>:</p>\n\n<pre><code>val f = with(Regex.fromLiteral(\"some regex\")) { { s: CharSequence -&gt; containsMatchIn(s) } }\n</code></pre>\n\n<p><sup>Here, <code>with</code> binds the <code>Regex</code> to <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow\">receiver</a> for the outer braces and returns the last and the only expression in the outer braces -- that is, the lambda function defined by the inner braces. See also: <a href=\"https://kotlinlang.org/docs/reference/idioms.html#calling-multiple-methods-on-an-object-instance-with\" rel=\"nofollow\">the idiomatic usage of <code>with</code></a>.</sup></p>\n"}], "owner": {"reputation": 903, "user_id": 4759312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-a5WVXQSOHCA/AAAAAAAAAAI/AAAAAAAAABM/ZQN9cG0YL1c/photo.jpg?sz=128", "display_name": "Abdelrhman Talat", "link": "https://stackoverflow.com/users/4759312/abdelrhman-talat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 39686891, "answer_count": 1, "score": 3, "last_activity_date": 1474876475, "creation_date": 1474804638, "last_edit_date": 1474876475, "question_id": 39686529, "link": "https://stackoverflow.com/questions/39686529/kotlin-get-a-reference-to-a-function-of-a-class-instance", "title": "Kotlin: get a Reference to a Function of a Class&#39; instance", "body": "<p>I am trying to pass a function to a function in Kotlin here is my code. </p>\n\n<pre><code>fun validateValueWithFunc(value: String, parsefun: (CharSequence) -&gt; Boolean, type: String){\n    if(parsefun(value))\n        print(\"Valid ${type}\")\n    else\n        print(\"Invalid ${type}\")\n}\n</code></pre>\n\n<p>The function I'm passing is from Regex class \"containsMatchIn\"</p>\n\n<pre><code>val f = Regex.fromLiteral(\"some regex\").containsMatchIn\n</code></pre>\n\n<p>I know about the :: function reference operator but I don't know how to use it in this situation </p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1474741425, "post_id": 39679180, "comment_id": 66659463, "body": "I think that <code>val ret = List&lt;User&gt;</code> is enough. You don&#39;t nned to &#39;cast&#39; it. Check: <a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/collections.html</a>"}, {"owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "reply_to_user": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1474741652, "post_id": 39679180, "comment_id": 66659523, "body": "@piotrek1543  no It has &quot;unresolved reference List&quot; error."}], "answers": [{"comments": [{"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "reply_to_user": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "edited": false, "score": 3, "creation_date": 1474744175, "post_id": 39679682, "comment_id": 66660299, "body": "The <code>RestTemplate.getForObject</code> expects a <code>Class&lt;T&gt;</code> as parameter to identify the type of your response, but a class is not enough to explain what you want. For example, you expect to get <code>List.class</code> as response, but it does not tell of which type argument that list is (e.g. <code>List&lt;User&gt;</code>). So, you need a different method signature that uses <code>ParameterizedTypeReference</code> to tell both things, the type of the resulting class and its type arguments."}], "tags": [], "owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "is_accepted": false, "score": 13, "last_activity_date": 1474742342, "last_edit_date": 1474742342, "creation_date": 1474742009, "answer_id": 39679682, "question_id": 39679180, "link": "https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument/39679682#39679682", "title": "Kotlin call java method with Class&lt;T&gt; argument", "body": "<p>I think you need to actually use the <code>RestTemplate.exechange</code> method that has a signature that accepts a <code>ParameterizedTypeReference&lt;T&gt;</code> where <code>T</code> can be the generic type of your response (in your case a <code>List&lt;User&gt;</code>)</p>\n\n<p>Suppose I have an endpoint that returns a list of Jedi names in JSON format, as follows</p>\n\n<pre><code>[\"Obi-wan\",\"Luke\",\"Anakin\"]\n</code></pre>\n\n<p>And I would like to invoke this endpoint and get a <code>List&lt;String&gt;</code> as the result, with the list containing the Jedi names from the JSON.</p>\n\n<p>Then I can do this:</p>\n\n<pre><code>val endpoint = URI.create(\"http://127.0.0.1:8888/jedi.json\")\nval request = RequestEntity&lt;Any&gt;(HttpMethod.GET, endpoint)\nval respType = object: ParameterizedTypeReference&lt;List&lt;String&gt;&gt;(){}\nval response = restTemplate.exchange(request, respType)\nval items: List&lt;String&gt; = response.body;\nprintln(items) //prints [Obi-wan, Luke, Anakin]\n</code></pre>\n\n<p>Notice that my <code>ParameterizedTypeReference</code> has a type argument of <code>List&lt;String&gt;</code>. That's what does the trick.</p>\n\n<p>And that worked for me when I tried it.</p>\n"}, {"comments": [{"owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "edited": false, "score": 1, "creation_date": 1474823369, "post_id": 39688441, "comment_id": 66678341, "body": "Excellent! Thank you."}, {"owner": {"reputation": 165, "user_id": 5167056, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/65e611b7121bfa563fc7a0f54db245a0?s=128&d=identicon&r=PG", "display_name": "opiop65", "link": "https://stackoverflow.com/users/5167056/opiop65"}, "edited": false, "score": 0, "creation_date": 1491066559, "post_id": 39688441, "comment_id": 73394396, "body": "Awesome explanation! Thank you for this!"}, {"owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "edited": false, "score": 3, "creation_date": 1500907873, "post_id": 39688441, "comment_id": 77529714, "body": "In short. Create a class <code>open class ParameterizedTypeReference&lt;T&gt;</code>.  And call the function like this:  <code>myFunc((object: ParameterizedTypeReference&lt;List&lt;Long&gt;&gt;(){}.javaClass.generic&zwnj;&#8203;Superclass as ParameterizedType).actualTypeArguments[0])</code>"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 47, "last_activity_date": 1474816983, "last_edit_date": 1474816983, "creation_date": 1474816385, "answer_id": 39688441, "question_id": 39679180, "link": "https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument/39688441#39688441", "title": "Kotlin call java method with Class&lt;T&gt; argument", "body": "<p>@edwin's answer is correct, you had an <a href=\"http://xyproblem.info/\" rel=\"noreferrer\">XY Problem</a> where you were actually asking for the wrong thing.  Thankfully you had an error in doing so which led you here and @edwin was able to explain the alternative which does the correct behavior.  </p>\n\n<p>Every binding library for Java has some pattern like this that is the same (<code>Class</code> vs. type reference). So this is good thing to learn and look for in your library such as RestTemplate, Jackson, GSON and others.  The utility class maybe is <code>ParameterizedTypeReference</code> in one, and <code>TypeReference</code> in another, <code>TypeRef</code> in yet another and so on; but all doing the same thing.</p>\n\n<p><strong>Now, for anyone wondering what was wrong with the original code</strong>, to create an generics erased class reference such as <code>Class&lt;T&gt;</code> the syntax would be:</p>\n\n\n\n<pre><code>val ref = List::class.java\n</code></pre>\n\n<p>You will notice there is no way to express the generic type of the items in the list.  And even if you could, they would be erased anyway due to type erasure.  Passing this to the binding library would be like saying \"<em>a list of maybe nullable java.lang.Object please</em>\" but worse.   Imagine <code>Map&lt;String, List&lt;Int&gt;&gt;</code> where you now lost all information that would make deserializing this possible.</p>\n\n<p>The following <strong>does not</strong> compile:</p>\n\n<pre><code>val ref = List&lt;String&gt;::class.java  // &lt;--- error only classes are allowed on left side\n</code></pre>\n\n<p>The error message could be clearer to say \"<em>only classes without generic parameters are allowed on the left side of ::</em>\"</p>\n\n<p>And your use of <code>javaClass</code> can only be used on an instance, so if you happen to have had a list handy...</p>\n\n<pre><code>val ref = listOf(\"one\", \"two\", \"three\").javaClass  \n</code></pre>\n\n<p>Then you would end up with a type erased <code>Class&lt;T&gt;</code> which again is the wrong thing to use here, but valid syntax.</p>\n\n<p><strong>So what does the code @edwin is showing actually do?</strong></p>\n\n<p>By creating an object with a super type <code>ParameterizedTypeReference</code> the code works around this problem because any class, even if type erased, can see the generics in its superclass and interfaces via the lense of <code>Type</code>.  For example:</p>\n\n<pre><code>val xyz = object : MySuperClass&lt;SomeGenerics&gt;() {}\n</code></pre>\n\n<p>This instance of an anonymous class has the superclass <code>MySuperClass</code> with generic parameters of <code>SomeGenerics</code>.  So if <code>MySuperClass</code> contained this code:</p>\n\n<pre><code>abstract class MySuperClass&lt;T&gt; protected constructor() {\n    val type: Type = (javaClass.genericSuperclass as ParameterizedType)\n                                 .actualTypeArguments[0]\n}\n</code></pre>\n\n<p>You could then add  <code>.type</code> to the end of our declaration to access this functionality:</p>\n\n<pre><code>val typeOfSomeGenerics = object : MySuperClass&lt;SomeGenerics&gt;() {}.type\n</code></pre>\n\n<p>And now you would have some implementation of <code>Type</code> describing our <code>SomeGenerics</code> class.  It would be one of:  <code>Class</code>, <code>ParameterizedType</code>, <code>GenericArrayType</code>, <code>TypeVariable</code>, and <code>WildcardType</code></p>\n\n<p>And by understanding and working with these, a library that does data binding knows enough to do its job.  </p>\n\n<p><strong>Life is easier in Kotlin:</strong></p>\n\n<p>In Kotlin, it is easy to write extension functions so that you never have to do this type of code more than once.  Just create a helper inline function that uses reified generics to pass through the type and create the <code>ParameterizedTypeReference</code>:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; typeRef(): ParameterizedTypeReference&lt;T&gt; = object: ParameterizedTypeReference&lt;T&gt;(){}\n</code></pre>\n\n<p>And now you can change @edwin's example to:</p>\n\n<pre><code>val response = restTemplate.exchange(request, typeRef&lt;List&lt;String&gt;&gt;())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 1343364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5de3ad84f7d8da924179221e3e28b7b0?s=128&d=identicon&r=PG", "display_name": "Ildar Galikov", "link": "https://stackoverflow.com/users/1343364/ildar-galikov"}, "edited": false, "score": 5, "creation_date": 1524746306, "post_id": 49481313, "comment_id": 87102333, "body": "This is the most elegant and fluent solution for this problem."}], "tags": [], "owner": {"reputation": 2710, "user_id": 997977, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/11f4273f8fdfee80802942d444b4571c?s=128&d=identicon&r=PG", "display_name": "Juan Rada", "link": "https://stackoverflow.com/users/997977/juan-rada"}, "is_accepted": false, "score": 17, "last_activity_date": 1547831677, "last_edit_date": 1547831677, "creation_date": 1522014631, "answer_id": 49481313, "question_id": 39679180, "link": "https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument/49481313#49481313", "title": "Kotlin call java method with Class&lt;T&gt; argument", "body": "<p>You may try</p>\n\n<pre><code>return restTemplate.getForObject(URI(hostAddress), Array&lt;User&gt;::class.java).toList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 3956585, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001740430244/picture?type=large", "display_name": "Leno Tavares Cabral", "link": "https://stackoverflow.com/users/3956585/leno-tavares-cabral"}, "is_accepted": false, "score": -1, "last_activity_date": 1564579037, "last_edit_date": 1564579037, "creation_date": 1564577445, "answer_id": 57291158, "question_id": 39679180, "link": "https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument/57291158#57291158", "title": "Kotlin call java method with Class&lt;T&gt; argument", "body": "<p>First, you will make a new class - UserList.kt (the name is our owner)</p>\n\n<p>Inside:</p>\n\n<pre><code>class UserList : MutableList&lt;User&gt; by ArrayList()\n</code></pre>\n\n<p>After that, you can call your method that has a <code>RestTemplate</code></p>\n\n<pre><code>val response: List &lt; Item &gt; ? = restTemplate.getObject(\"yourEndpoint\", UserList::class.java)\n</code></pre>\n\n<p>It may be returns <code>null</code>, so you need to take care of that.</p>\n"}], "owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16923, "favorite_count": 6, "accepted_answer_id": 39688441, "answer_count": 4, "score": 21, "last_activity_date": 1564579037, "creation_date": 1474738829, "last_edit_date": 1474744678, "question_id": 39679180, "link": "https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument", "title": "Kotlin call java method with Class&lt;T&gt; argument", "body": "<p>I want to use Spring <code>RestTemplate</code> in Kotlin like this:</p>\n\n<pre><code>//import org.springframework.web.client.RestTemplate\nfun findAllUsers(): List&lt;User&gt; {\n        val restTemplate = RestTemplate()\n\n        //has error\n        val ret = List&lt;User&gt;.javaClass\n        return restTemplate.getForObject(URI(hostAddress), ret)\n}\n</code></pre>\n\n<p>The <code>RestTemplate.getForObject(URI url, Class&lt;T&gt; responseType)</code> has this signature and I get this error \"unresolved reference List\" from <code>List</code> in <code>val ret = List&lt;User&gt;.javaClass</code>.</p>\n\n<p>If I use like this <code>val ret = List&lt;User&gt;::class.java</code> I get this error \"Only classes are allowed on the left hand side of a class literal\"</p>\n\n<p>what's the problem? and what's the proper way for doing this? Is it a bug?</p>\n"}, {"tags": ["java", "gradle", "kotlin", "quasar"], "comments": [{"owner": {"reputation": 2928, "user_id": 7747942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128", "display_name": "Sylhare", "link": "https://stackoverflow.com/users/7747942/sylhare"}, "edited": false, "score": 0, "creation_date": 1587582491, "post_id": 39671294, "comment_id": 108571748, "body": "Example <code>build.gradle.kts</code> to build your <code>.jar</code> with gradle: <a href=\"https://stackoverflow.com/a/61373175/7747942\">stackoverflow.com/a/61373175/7747942</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": true, "score": 2, "last_activity_date": 1474704120, "last_edit_date": 1495542812, "creation_date": 1474704120, "answer_id": 39674005, "question_id": 39671294, "link": "https://stackoverflow.com/questions/39671294/kotlin-capsule-gradle-error/39674005#39674005", "title": "Kotlin Capsule Gradle Error", "body": "<p>It seems that MANIFEST.md in <code>capsule</code> is broken and it misses a <code>Premain-Class</code> attribute like below:</p>\n\n<pre><code>Premain-Class: org.eclipse.package.ObjectSizeFetcher\n</code></pre>\n\n<p>Your's <code>capsule</code> manifest file should look like:</p>\n\n<pre><code>Manifest-Version: 1.0\nCreated-By: 1.5.0_18 (Sun Microsystems Inc.)\nPremain-Class: org.eclipse.package.ObjectSizeFetcher\n</code></pre>\n\n<p>Check similar issue to find more: <a href=\"https://stackoverflow.com/questions/2266525/failed-to-load-premain-class-manifest-attribute-while-trying-to-get-the-size-o\">&quot;Failed to load Premain-Class manifest attribute&quot; while trying to get the size of an object using java agent</a></p>\n"}], "owner": {"reputation": 2108, "user_id": 1377037, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b5941b2951d33748024848f82e7bf784?s=128&d=identicon&r=PG", "display_name": "Jonathan Beaudoin", "link": "https://stackoverflow.com/users/1377037/jonathan-beaudoin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 39674005, "answer_count": 1, "score": 0, "last_activity_date": 1474704120, "creation_date": 1474676758, "question_id": 39671294, "link": "https://stackoverflow.com/questions/39671294/kotlin-capsule-gradle-error", "title": "Kotlin Capsule Gradle Error", "body": "<p>I'm getting an error when trying to create a capsule using Gradle.</p>\n\n<pre><code>Failed to find Premain-Class manifest attribute in \n\nE:\\Dropbox\\Projects\\Kotlin\\Games\\CSGO\\Charlatano\\build\\libs\\capsule.jar\nError occurred during initialization of VM\nagent library failed to init: instrument\nCAPSULE: Client connection failed.\nCAPSULE EXCEPTION: Accept timed out while processing null null: null (for stack trace, run with -Dcapsule.log=verbose)\nPress any key to continue . . .\n</code></pre>\n\n<p>Here is my build.script</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1-M01'\n    ext.jna_version = '4.3.0-SNAPSHOT'\n    ext.quasar_version = '0.7.6'\n    ext.gdxVersion = '1.9.4'\n\n    repositories {\n        mavenCentral()\n        maven { url 'https://dl.bintray.com/kotlin/kotlin-eap-1.1' }\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'java'\napply plugin: 'kotlin'\napply plugin: 'application'\n\ngroup 'com.charlatano'\nversion '0.4.3'\n\nmainClassName = 'com.charlatano.Charlatano'\n\nsourceCompatibility = JavaVersion.VERSION_1_8\n\nrepositories {\n    mavenCentral()\n    maven { url \"https://oss.sonatype.org/content/repositories/snapshots/\" }\n    maven { url 'https://dl.bintray.com/kotlin/kotlin-eap-1.1' }\n}\n\nconfigurations {\n    quasar\n    capsule\n}\n\ndependencies {\n    compile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib', version: kotlin_version\n\n    compile group: 'net.java.dev.jna', name: 'jna', version: jna_version\n    compile group: 'net.java.dev.jna', name: 'jna-platform', version: jna_version\n\n    compile group: 'org.jire.arrowhead', name: 'arrowhead', version: '1.2.1'\n\n    capsule group: 'co.paralleluniverse', name: 'capsule', version: '1.0.3'\n    quasar group: 'co.paralleluniverse', name: 'quasar-core', version: quasar_version\n\n    compile group: 'co.paralleluniverse', name: 'quasar-core', version: quasar_version\n    compile group: 'co.paralleluniverse', name: 'quasar-actors', version: quasar_version\n    compile group: 'co.paralleluniverse', name: 'quasar-kotlin', version: quasar_version\n\n    compile \"com.badlogicgames.gdx:gdx:$gdxVersion\"\n    compile \"com.badlogicgames.gdx:gdx-box2d:$gdxVersion\"\n\n    compile \"com.badlogicgames.gdx:gdx-backend-lwjgl:$gdxVersion\"\n    compile \"com.badlogicgames.gdx:gdx-platform:$gdxVersion:natives-desktop\"\n    compile \"com.badlogicgames.gdx:gdx-box2d-platform:$gdxVersion:natives-desktop\"\n}\n\ntask capsule(type: Jar, dependsOn: jar) {\n    archiveName = \"capsule.jar\"\n    from jar // embed our application jar\n    from { configurations.runtime } // embed dependencies\n\n    from(configurations.capsule.collect { zipTree(it) }) { include 'Capsule.class' } // we just need the single Capsule class\n\n    manifest {\n        attributes(\n                'Main-Class'  :    'Capsule',\n                'Application-Class'   : mainClassName,\n                'Extract-Capsule' : 'false', // no need to extract the capsule\n                'Min-Java-Version' : '1.8.0',\n                'JVM-Args' : run.jvmArgs.join(' '),\n                'System-Properties' : run.systemProperties.collect { k,v -&gt; \"$k=$v\" }.join(' '),\n                'Java-Agents' : configurations.quasar.iterator().next().getName()\n        )\n    }\n}\n\nrun {\n    jvmArgs \"-javaagent:${configurations.quasar.iterator().next()}\"\n}\n</code></pre>\n\n<p>Here are the jar files it generates.\n<a href=\"https://dl.dropboxusercontent.com/u/91292881/ShareX/2016/09/libs.zip\" rel=\"nofollow\">https://dl.dropboxusercontent.com/u/91292881/ShareX/2016/09/libs.zip</a></p>\n\n<p>Please tell me what is wrong, thanks!</p>\n"}, {"tags": ["android", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1474648711, "post_id": 39665388, "comment_id": 66632876, "body": "you might want to report this to <a href=\"http://kotl.in/issue\" rel=\"nofollow noreferrer\">the Kotlin issue tracker</a> because it seems more like something that needs triage and potentially reporting as a bug."}, {"owner": {"reputation": 229, "user_id": 4759349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461fb1bfd0a7bc76f6029d5ee7bd6d7a?s=128&d=identicon&r=PG", "display_name": "lllyct", "link": "https://stackoverflow.com/users/4759349/lllyct"}, "edited": false, "score": 0, "creation_date": 1502744516, "post_id": 39665388, "comment_id": 78323946, "body": "Do you use any generated classes in your new .kt file? Probably in time of kotlin compilation this class isn&#39;t exists."}], "answers": [{"comments": [{"owner": {"reputation": 10286, "user_id": 710802, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7bdd31a948096ab5e3f26f62bb44fed7?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/710802/bond"}, "edited": false, "score": 0, "creation_date": 1474655867, "post_id": 39666385, "comment_id": 66636500, "body": "Yeah I have instant run disabled completely and am runing AS 2.2 with build tool version 2.2.0 with gradle 2.14.1."}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 10286, "user_id": 710802, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7bdd31a948096ab5e3f26f62bb44fed7?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/710802/bond"}, "edited": false, "score": 0, "creation_date": 1474657446, "post_id": 39666385, "comment_id": 66637336, "body": "change build-tools to 24.0.3"}, {"owner": {"reputation": 10286, "user_id": 710802, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7bdd31a948096ab5e3f26f62bb44fed7?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/710802/bond"}, "edited": false, "score": 0, "creation_date": 1503000665, "post_id": 39666385, "comment_id": 78445672, "body": "this issue has since been resolved after using the updated plugin. Also when this happens I just had to clean the workspace."}], "tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 4, "last_activity_date": 1474653879, "last_edit_date": 1474653879, "creation_date": 1474651496, "answer_id": 39666385, "question_id": 39665388, "link": "https://stackoverflow.com/questions/39665388/kotlin-class-noclassdeffounderror-crash/39666385#39666385", "title": "Kotlin class NoClassDefFoundError crash", "body": "<p>Go to <code>Files &gt; Settings</code> and turn off completely <code>Instant Run</code>, I mean all checkboxes should be unchecked. </p>\n\n<p>Clean and rebuild project. </p>\n\n<p>Then it should work</p>\n\n<p><strong>Edit:</strong> As you said that Instant is disabled - using <strong><code>protip</code></strong> check your configuration and update Gradle and Android Studio if you're not using the latest.</p>\n\n<p>According to this <a href=\"https://discuss.kotlinlang.org/t/very-annoying-crash-java-lang-noclassdeffounderror-failed-resolution-of-kotlinobject/1893/2\" rel=\"nofollow\">issue</a>, changing Gradle plugin version from 2.10 to 2.14.1 may help.</p>\n\n<p><strong>Protip:</strong>\nUse combination Ctrl+Shift+A to find commands like </p>\n\n<ul>\n<li><p><code>Configure Kotlin in Project</code></p></li>\n<li><p><code>Configure Kotlin Updates</code></p></li>\n<li><p><code>Convert Java File to Kotlin</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2277, "user_id": 3306437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GR4Wx.jpg?s=128&g=1", "display_name": "Lovekush Vishwakarma", "link": "https://stackoverflow.com/users/3306437/lovekush-vishwakarma"}, "is_accepted": false, "score": 0, "last_activity_date": 1499970297, "creation_date": 1499970297, "answer_id": 45088384, "question_id": 39665388, "link": "https://stackoverflow.com/questions/39665388/kotlin-class-noclassdeffounderror-crash/45088384#45088384", "title": "Kotlin class NoClassDefFoundError crash", "body": "<p>first you need to configure you android studio with kotlin , for this need to add kotlin plugin in android studio, and then need to add dependencies and then convert java classes to kotlin please have look this video.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=DN2EDdycZ3c\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=DN2EDdycZ3c</a></p>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 6200125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dGoQ5.png?s=128&g=1", "display_name": "AyoGitNg", "link": "https://stackoverflow.com/users/6200125/ayogitng"}, "is_accepted": false, "score": 0, "last_activity_date": 1504019804, "last_edit_date": 1504019804, "creation_date": 1504013105, "answer_id": 45940405, "question_id": 39665388, "link": "https://stackoverflow.com/questions/39665388/kotlin-class-noclassdeffounderror-crash/45940405#45940405", "title": "Kotlin class NoClassDefFoundError crash", "body": "<p>Suffix the Kotlin classes with <code>kt</code> when calling them from Java. </p>\n\n<p>Otherwise add <code>@file:JvmName(\"Utils\")</code> before the package in the Kotlin class if you must call it in java with whatever custom name you wish like <code>Utils</code> in this case.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">more details can be found here</a></p>\n"}], "owner": {"reputation": 10286, "user_id": 710802, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7bdd31a948096ab5e3f26f62bb44fed7?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/710802/bond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 3, "score": 8, "last_activity_date": 1504019804, "creation_date": 1474647672, "question_id": 39665388, "link": "https://stackoverflow.com/questions/39665388/kotlin-class-noclassdeffounderror-crash", "title": "Kotlin class NoClassDefFoundError crash", "body": "<p>I have an existing Android Project that uses the following libs:</p>\n\n<ol>\n<li>AutoValue</li>\n<li>Dagger2</li>\n<li>RxJava</li>\n<li>Retrolambda</li>\n</ol>\n\n<p>I am trying to add Kotlin Support so that I can slowly migrate the project over to Kotlin. \nHere is what I have done.</p>\n\n<ol>\n<li>Added Kotlin dependency. </li>\n<li><p>Converted one of the classes over to Kt class and moved over to <code>src/main/kotlin/..package..</code></p></li>\n<li><p>Added kotlin in source set.\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}</p></li>\n<li><p>When I do a clean build and deploy the app, I get NoClassDefFoundError exception. However, If I deploy again it works just fine. \nAny suggestions? I do not have any annotation in the class I converted so I did not apply <code>kapt</code> plugin.</p></li>\n</ol>\n\n<p>Note: I am using latest kotlin 1.0.4. Also I have instant run disabled.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2625, "user_id": 892914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0usjV.png?s=128&g=1", "display_name": "jnovacho", "link": "https://stackoverflow.com/users/892914/jnovacho"}, "edited": false, "score": 1, "creation_date": 1474746754, "post_id": 39665200, "comment_id": 66661032, "body": "Thanks, the separate implementation of root is actually what I needed. It will allow me to simplify my code more."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 3, "last_activity_date": 1474652076, "last_edit_date": 1474652076, "creation_date": 1474646934, "answer_id": 39665200, "question_id": 39663976, "link": "https://stackoverflow.com/questions/39663976/how-to-set-kotlin-default-property-value-to-this/39665200#39665200", "title": "How to set Kotlin default property value to `this`", "body": "<p>You can use an <code>init</code> block. e.g.:</p>\n\n<pre><code>class Directory(parent: Directory? = null) : Item, ItemWithChildren {\n    override val children: MutableList&lt;Item&gt; = mutableListOf()\n    override val parent: Directory\n\n    init {\n        this.parent = parent ?: this\n    }\n}\n</code></pre>\n\n<p>Alternatively you could create a separate \"parent\" implementation for \"root\". e.g.:</p>\n\n<pre><code>interface ChildItem /* renamed from `Item` for clarity */ {\n    val parent: ParentItem\n}\n\ninterface ParentItem /* renamed from `ItemWithChildren` for clarity */ {\n    val children: MutableList&lt;ChildItem&gt;\n}\n\nclass Root() : ParentItem {\n    override val children: MutableList&lt;ChildItem&gt; = mutableListOf()\n}\n\nclass Directory(override val parent: ParentItem) : ChildItem, ParentItem {\n    override val children: MutableList&lt;ChildItem&gt; = mutableListOf()\n}\n\nclass File(override val parent: ParentItem) : ChildItem\n</code></pre>\n\n<p>This way your \"root\" item doesn't have a <code>parent</code> property similar to how your \"leaf\" (\"file\") items don't have a <code>children</code> property. You would likely also want to make your <code>ChildItem</code> and <code>ParentItem</code> interfaces extend a common interface (e.g. named <code>Item</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 2625, "user_id": 892914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0usjV.png?s=128&g=1", "display_name": "jnovacho", "link": "https://stackoverflow.com/users/892914/jnovacho"}, "edited": false, "score": 0, "creation_date": 1474747110, "post_id": 39666044, "comment_id": 66661126, "body": "Thanks for the insight! To adamantly reject the null is not the right mindset. I was &quot;lured&quot; by the idea of Optional datatype which is not present in Kotlin stdlib. But in my case, that would not actually acomplish anything more useful than the null itself."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 1, "last_activity_date": 1474650126, "last_edit_date": 1495540852, "creation_date": 1474650126, "answer_id": 39666044, "question_id": 39663976, "link": "https://stackoverflow.com/questions/39663976/how-to-set-kotlin-default-property-value-to-this/39666044#39666044", "title": "How to set Kotlin default property value to `this`", "body": "<p>@mfulton26 answered how to do this in the way you strictly requested.  But for others that may wonder about this choice, they should still also consider <code>null</code> values being OK for this type of work in Kotlin.</p>\n\n<p>You can have a <code>null</code> property and a few derived properties that allows access asserted as not <code>null</code>.  Because either way (your plan to avoid <code>null</code> or accepting and using <code>null</code>) you are going to have to ask \"<em>do I have a parent?</em>\" which is almost the same as asking \"<em>is parent null?</em>\"  So why do a uncommon \"possibly endless loop causing\" work-around for this case?</p>\n\n<p>If my tree class were something like:</p>\n\n\n\n<pre><code>data class Something(val text: String, val parentOrNull: Something? = null) {\n    val parent: Something get() = parentOrNull!!\n    val hasParent = parentOrNull != null\n}\n</code></pre>\n\n<p>Then I have options of how to access the parent with and without worrying about the <code>null</code>:</p>\n\n<pre><code>val root = Something(\"rooty\")\nval child = Something(\"youngun\", root)\nval leaf = Something(\"baby\", child)\n\nfun printPathToNode(node: Something) {\n    // use derived properties to check and not worry about the null\n    if (node.hasParent) printPathToNode(node.parent)\n    println(node)\n}\n\nfun findRoot(node: Something): Something {\n    // use null operators to not worry about the null\n    return node.parentOrNull?.let { findRoot(it) } ?: node\n}\n</code></pre>\n\n<p>Then you can see it runs fine with good output, and no problems with <code>null</code>:</p>\n\n<pre><code>printPathToNode(leaf)    // rooty, youngun, baby\nprintPathToNode(child)   // rooty, youngun\nprintPathToNode(root)    // rooty\n\nprintln(findRoot(leaf))  // rooty\nprintln(findRoot(child)) // rooty\nprintln(findRoot(root))  // rooty\n</code></pre>\n\n<p>Nulls should be avoided in cases where they do not make sense.  But sometimes they are actually a reasonable option.  Kotlin helps to protect you when you have nullable values as well by knowing about them and not just pretending all is OK.  And then it gives you nice <a href=\"https://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\">nullability operators</a> to help you in working with them.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1474660989, "creation_date": 1474660989, "answer_id": 39668706, "question_id": 39663976, "link": "https://stackoverflow.com/questions/39663976/how-to-set-kotlin-default-property-value-to-this/39668706#39668706", "title": "How to set Kotlin default property value to `this`", "body": "<p>That's how I would use the @mfulton's answer: </p>\n\n<pre><code>class Directory(parent: Directory? = null) : Item, ItemWithChildren {\n    override val children = mutableListOf&lt;Item&gt;()\n    override val parent = parent ?: this\n}\n</code></pre>\n"}], "owner": {"reputation": 2625, "user_id": 892914, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0usjV.png?s=128&g=1", "display_name": "jnovacho", "link": "https://stackoverflow.com/users/892914/jnovacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 39665200, "answer_count": 3, "score": 1, "last_activity_date": 1474660989, "creation_date": 1474643022, "question_id": 39663976, "link": "https://stackoverflow.com/questions/39663976/how-to-set-kotlin-default-property-value-to-this", "title": "How to set Kotlin default property value to `this`", "body": "<p>I have following class structure which represents simple tree. Each item can have multiple children and parent.</p>\n\n<p>The tree root is causing me a headache though. I'm trying to do this without using <code>null</code> so I can traverse the tree upwards by calling <code>item.parent</code>. To simplify it I want the root to has itself as a parent, but I cannot figure out how to do it.</p>\n\n<pre><code>interface Item {\n    val parent: Directory\n}\n\ninterface ItemWithChildren{\n    val children: MutableList&lt;Item&gt;\n}\n\nclass Directory() : Item, ItemWithChildren {\n    override val children: MutableList&lt;Item&gt; = mutableListOf()\n    override val parent: Directory by lazy { this }\n\n    constructor(par: Directory) : this() {\n        parent = par //Error: val cannot be reassigned \n    }\n}\n\nclass File(override val parent: Directory) : Item\n</code></pre>\n\n<p>That code doesn't compile, because it's not possible to reassign the <code>val parent</code>. But using <code>this</code> as a default parameter value is also not possible. Is there any way out?</p>\n\n<p>If I allow the parent to be nullable, then the solution is easy. But I don't wanna use the nulls, if possible. Also <code>null</code> would defeat the <code>item.parent</code> chain.</p>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 7197, "user_id": 587467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7787bdb4718fdc9b42fb46d671bd7eca?s=128&d=identicon&r=PG", "display_name": "Tar", "link": "https://stackoverflow.com/users/587467/tar"}, "edited": false, "score": 0, "creation_date": 1474635706, "post_id": 39660615, "comment_id": 66624532, "body": "Thanks, that worked! But I seem to have difficulties understanding Gradle tweaking: If you could you please explain what the second solution does in plain words, it&#39;ll be highly appreciated!"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 7197, "user_id": 587467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7787bdb4718fdc9b42fb46d671bd7eca?s=128&d=identicon&r=PG", "display_name": "Tar", "link": "https://stackoverflow.com/users/587467/tar"}, "edited": false, "score": 0, "creation_date": 1474636433, "post_id": 39660615, "comment_id": 66625080, "body": "The second solution is taken from link below. It execute<code>Gradle</code> task to see if <code>Nullable.class</code> or <code>NotNull.class</code> or is doubled. If yes, it takes it only from cleanedAnnotations dependency."}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "reply_to_user": {"reputation": 7197, "user_id": 587467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7787bdb4718fdc9b42fb46d671bd7eca?s=128&d=identicon&r=PG", "display_name": "Tar", "link": "https://stackoverflow.com/users/587467/tar"}, "edited": false, "score": 0, "creation_date": 1474636465, "post_id": 39660615, "comment_id": 66625102, "body": "If it works, please mark it as answer for others with similar problem. Glad I could help"}], "tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": true, "score": 5, "last_activity_date": 1474633427, "last_edit_date": 1474633427, "creation_date": 1474633124, "answer_id": 39660615, "question_id": 39660420, "link": "https://stackoverflow.com/questions/39660420/kotlin-java-multidex-dagger-2-butterknife-and-realm-transformclasseswithjarmerg/39660615#39660615", "title": "Kotlin,Java,multidex,Dagger 2,Butterknife and Realm: transformClassesWithJarMergingForDebug: duplicate entry: org/jetbrains/annotations/NotNull.class", "body": "<p>Try to delete:  <code>compile 'org.jetbrains:annotations-java5:15.0'</code>. If it won't work, follow these steps:</p>\n\n<p>Go to your <code>app/build.gradle</code> file and add:</p>\n\n<pre><code>configurations {\n    cleanedAnnotations\n\n    compile.exclude group: 'org.jetbrains' , module:'annotations'\n}\n</code></pre>\n\n<p>Change </p>\n\n<pre><code>compile 'org.jetbrains:annotations-java5:15.0'\n</code></pre>\n\n<p>with</p>\n\n<pre><code> compile files(\"${buildDir}/libs/annotations-cleaned.jar\") { builtBy 'cleanAnnotationsJar' }\n    cleanedAnnotations 'org.jetbrains:nnotations-java5:15.0'\n</code></pre>\n\n<p>Finally add:</p>\n\n<pre><code>task cleanAnnotationsJar(type:Jar) {\n    configurations.cleanedAnnotations.each { f -&gt;\n        from zipTree(f)\n    }\n    archiveName = \"annotations-cleaned.jar\"\n    exclude 'org/jetbrains/annotations/NotNull.class'\n    exclude 'org/jetbrains/annotations/Nullable.class'\n}\n</code></pre>\n\n<p>Check: <a href=\"https://discuss.kotlinlang.org/t/duplicate-classes-in-kotlin-runtime-and-com-intellij-annotations/154/3\" rel=\"noreferrer\">https://discuss.kotlinlang.org/t/duplicate-classes-in-kotlin-runtime-and-com-intellij-annotations/154/3</a></p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 7720357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPFC3.jpg?s=128&g=1", "display_name": "yanghong shen", "link": "https://stackoverflow.com/users/7720357/yanghong-shen"}, "is_accepted": false, "score": 4, "last_activity_date": 1493891964, "creation_date": 1493891964, "answer_id": 43779693, "question_id": 39660420, "link": "https://stackoverflow.com/questions/39660420/kotlin-java-multidex-dagger-2-butterknife-and-realm-transformclasseswithjarmerg/43779693#43779693", "title": "Kotlin,Java,multidex,Dagger 2,Butterknife and Realm: transformClassesWithJarMergingForDebug: duplicate entry: org/jetbrains/annotations/NotNull.class", "body": "<p>I change <code>compile (\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\")</code> to <code>compile (\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\") {\n        exclude group: 'org.jetbrains', module: 'annotations'\n    }</code>\n\uff0cIt works\u3002 have a try!</p>\n"}], "owner": {"reputation": 7197, "user_id": 587467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7787bdb4718fdc9b42fb46d671bd7eca?s=128&d=identicon&r=PG", "display_name": "Tar", "link": "https://stackoverflow.com/users/587467/tar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 1, "accepted_answer_id": 39660615, "answer_count": 2, "score": 5, "last_activity_date": 1493891964, "creation_date": 1474632487, "last_edit_date": 1592644375, "question_id": 39660420, "link": "https://stackoverflow.com/questions/39660420/kotlin-java-multidex-dagger-2-butterknife-and-realm-transformclasseswithjarmerg", "title": "Kotlin,Java,multidex,Dagger 2,Butterknife and Realm: transformClassesWithJarMergingForDebug: duplicate entry: org/jetbrains/annotations/NotNull.class", "body": "<p>We have existing Java Android code. We want to painlessly slowly start moving to Kotlin. We use Dagger 2, Butterknife and Realm. We use Java 8 compiler (but our <code>targetCompatibility</code> and <code>sourceCompatibility</code> are 1.7).</p>\n<h3>I've been roaming the web for hours, seen SO, GitHub conversations and so on, and managed to solve all problems except one:</h3>\n<p>The build is successful, but when trying to debug, we get:</p>\n<pre><code>Error:Execution failed for task ':app:transformClassesWithJarMergingForDebug'.\n&gt; com.android.build.api.transform.TransformException: java.util.zip.ZipException: duplicate entry: org/jetbrains/annotations/NotNull.class\n</code></pre>\n<p>Is there a way to resolve duplicate entries in Gradle (maybe using <code>packagingOptions</code> or <code>resolutionStrategy</code>? as it's a duplication that comes from the plugins...?) ?</p>\n<h3>Again - <code>build project</code> goes without any error, only <code>transformClassesWithJarMergingForDebug</code> fails!</h3>\n<p>Here's the app's gradle:</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n//apply plugin: 'com.neenbedankt.android-apt'\napply plugin: 'realm-android'\n\nkapt { generateStubs = true }\n\nandroid {\n    signingConfigs {\n        config {\n            keyAlias 'MyAndroidKey'\n            keyPassword 'password'\n            storeFile file('android.jks')\n            storePassword 'password'\n        }\n    }\n    compileSdkVersion 23\n    buildToolsVersion '23.0.3'\n    defaultConfig {\n        vectorDrawables.useSupportLibrary = true\n        applicationId &quot;com.acme.app&quot;\n        minSdkVersion 15\n        targetSdkVersion 23\n        versionCode 1\n        versionName &quot;1.0&quot;\n        //testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n        testInstrumentationRunner &quot;com.acme.app.utils.CustomAndroidJUnitRunner&quot;\n\n        // http://stackoverflow.com/a/26515860/587467:\n        multiDexEnabled true\n    }\n    //dexOptions { incremental false }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.config\n        }\n    }\n    packagingOptions {\n        exclude 'META-INF/services/javax.annotation.processing.Processor'\n        exclude 'META-INF/DEPENDENCIES.txt'\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/dependencies.txt'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/license.txt'\n        exclude 'META-INF/LGPL2.1'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/notice.txt'\n    }\n\n    configurations.all {\n        resolutionStrategy.force 'com.android.support:support-annotations:23.3.0', 'junit:junit:4.12'\n    }\n\n    targetCompatibility = 1.7\n    sourceCompatibility = 1.7\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_7\n        targetCompatibility JavaVersion.VERSION_1_7\n    }\n    sourceSets { main.java.srcDirs += 'src/main/kotlin' }\n}\n\ndependencies {\n    // http://stackoverflow.com/a/26515860/587467:\n    compile 'com.android.support:multidex:1.0.1'\n\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n\n    /// &lt;Firebase&gt; Cloud Messaging (FCM) - the Google Cloud Messaging (GCM) new version:\n    compile 'com.google.firebase:firebase-messaging:9.0.2'\n    /// &lt;/Firebase&gt;\n\n    /// &lt;Dagger&gt;\n    //provided 'javax.annotation:jsr250-api:1.0'\n    //apt 'com.google.dagger:dagger-compiler:2.5'\n    //compile 'com.google.dagger:dagger:2.5'\n    //compile 'com.google.dagger:dagger-compiler:2.4'\n    /// &lt;/Dagger&gt;\n\n    /// &lt;KotlinDagger&gt;\n    compile 'com.google.dagger:dagger:2.5'\n    kapt 'com.google.dagger:dagger-compiler:2.5'\n    kaptTest 'com.google.dagger:dagger-compiler:2.5'\n    kaptAndroidTest 'com.google.dagger:dagger-compiler:2.5'\n    //provided 'org.glassfish:javax.annotation:10.0-b28'\n    /// &lt;/KotlinDagger&gt;\n\n    /// &lt;JSON&gt;\n    //testCompile 'javax.json:javax.json-api:1.0'\n    testCompile 'org.glassfish:javax.json:1.0.4'\n    // https://github.com/FasterXML/jackson-docs/wiki/Using-Jackson2-with-Maven\n    // http://www.mkyong.com/java/jackson-2-convert-java-object-to-from-json/\n    //testCompile 'com.fasterxml.jackson.core:jackson-core:2.6.3'\n    testCompile 'com.fasterxml.jackson.core:jackson-databind:2.7.4'\n    /// &lt;/JSON&gt;\n\n    //apt 'com.jakewharton:butterknife-compiler:8.0.1'\n    kapt 'com.jakewharton:butterknife-compiler:8.0.1'\n\n    testCompile 'junit:junit:4.12'\n    testCompile 'org.mockito:mockito-core:1.10.19'\n    testCompile 'net.java.dev.jna:jna-platform:4.2.2'\n\n    // &lt;InstrumentedTests&gt;\n    // &lt;MutualExclusive&gt;\n    // &lt;Or&gt;\n          //androidTestCompile 'com.android.support.test:testing-support-lib:0.1'\n    // &lt;/Or&gt;\n    // &lt;Or&gt;\n    //    androidTestCompile 'com.android.support:support-annotations:23.0.0'\n        androidTestCompile 'com.android.support.test:runner:0.4'\n        //androidTestCompile 'com.android.support.test:rules:0.4'\n        // &lt;Espresso&gt;\n        androidTestCompile 'com.android.support.test.espresso:espresso-core:2.2.2'\n        // &lt;/Espresso&gt;\n        //androidTestCompile &quot;org.robolectric:robolectric:3.0&quot;\n    // &lt;/Or&gt;\n    // &lt;/MutualExclusive&gt;\n    // &lt;/InstrumentedTests&gt;\n\n    compile 'com.android.support:appcompat-v7:23.4.0'\n    compile 'com.android.support:support-v13:23.4.0'\n    compile 'com.android.support:design:23.4.0'\n    compile 'com.jakewharton:butterknife:8.0.1'\n    compile 'com.google.code.ksoap2-android:ksoap2-android:3.6.1'\n    compile 'org.springframework.android:spring-android-rest-template:2.0.0.M3'\n\n    compile 'com.squareup.retrofit2:retrofit:2.1.0'\n    compile 'com.squareup.retrofit2:converter-gson:2.1.0'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.1.0'\n\n    compile 'com.android.support:support-v4:23.3.0'\n    compile 'com.android.support:recyclerview-v7:23.3.0'\n    compile 'com.android.support:cardview-v7:23.3.0'\n    compile 'io.reactivex:rxandroid:1.2.1'\n    compile 'joda-time:joda-time:2.9.4'\n    //compile 'io.reactivex:rxjava:1.1.6'\n    compile 'io.reactivex:rxjava-async-util:0.21.0'\n    //&lt;Floating Buttons&gt;\n    compile 'com.github.clans:fab:1.6.4'\n    //&lt;/Floating Buttons&gt;\n\n    compile 'com.facebook.fresco:fresco:0.11.0'\n    compile 'org.jetbrains:annotations-java5:15.0'\n    compile 'com.fasterxml.jackson.core:jackson-databind:2.7.4'\n    compile 'com.google.code.gson:gson:2.4'\n    compile 'javax.annotation:javax.annotation-api:1.2'\n    compile &quot;org.jetbrains.kotlin:kotlin-stdlib:1.0.3&quot;\n}\n\n// https://firebase.google.com/docs/android/setup#add_the_sdk\n// Firebase Cloud Messaging (FCM) - the Google Cloud Messaging (GCM) new version:\napply plugin: 'com.google.gms.google-services'\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n"}, {"tags": ["java", "unit-testing", "jdbc", "mocking", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1474625357, "post_id": 39658016, "comment_id": 66618204, "body": "Can you explain what <b>behavior</b> you want to test? What is what you call &quot;Mock Database&quot;? Why not use a <i>real</i> database?"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1474625463, "post_id": 39658016, "comment_id": 66618266, "body": "The real database will contain real data, I want to implement continuous integration, so when my API is in production it should still be able to build and thus test the methods. (and then the data can change or even be deleted, also got some insert methods I want to test f.e.)"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1474625627, "post_id": 39658016, "comment_id": 66618373, "body": "You can have <i>real</i> database instance with no data or empty data just for tests - cleaned before each tests is executed and filled with data that is required for the test itself."}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1474625812, "post_id": 39658016, "comment_id": 66618481, "body": "And what would be the way to make my method use that database?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1474626766, "post_id": 39658016, "comment_id": 66619018, "body": "You can i.e specify a separate jdbc url through a constructor of <code>jdbcTrial</code> so that the class will connect to the test database.  Consider looking how others talk to db i.e <a href=\"https://github.com/JetBrains/Exposed\" rel=\"nofollow noreferrer\">Exposed</a>. Consider using connection pool i.e. <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">Hikari</a>. Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\" rel=\"nofollow noreferrer\"><code>.use</code></a> to close the <code>Connection</code> when you&#39;re done with it."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1474638138, "post_id": 39658016, "comment_id": 66626316, "body": "Have you looked at local in-memory databases, their compatibility with your real database and if you can use them to create in memory database to use for testing?  or do you want true mocking and never actually call anything? (i.e. mockito, powermock, or ...)"}, {"owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "edited": false, "score": 0, "creation_date": 1474641642, "post_id": 39658016, "comment_id": 66628753, "body": "I&#39;d prefer mocking and refrain from using any data in the actual database"}, {"owner": {"reputation": 140, "user_id": 1769831, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d0ada3d00724f06f7e0d699119389e2?s=128&d=identicon&r=PG", "display_name": "SekthDroid", "link": "https://stackoverflow.com/users/1769831/sekthdroid"}, "edited": false, "score": 0, "creation_date": 1474649125, "post_id": 39658016, "comment_id": 66633086, "body": "If you want to mock your &#180;connection&#180;, you can pass it as parameter in the main constructor, or extend the class in your test environment, override the <code>getConnection</code> method, and make all the mocking stuff with the behavior you expect against that method (and of course, without calling <code>super</code> within <code>getConnection</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11971, "user_id": 1100135, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e7b273722f4261cd61c3256374da73cc?s=128&d=identicon&r=PG", "display_name": "piotrek", "link": "https://stackoverflow.com/users/1100135/piotrek"}, "is_accepted": true, "score": 1, "last_activity_date": 1474766443, "creation_date": 1474766443, "answer_id": 39682541, "question_id": 39658016, "link": "https://stackoverflow.com/questions/39658016/kotlin-java-testing-database-data-provided-rest-api/39682541#39682541", "title": "Kotlin/Java - Testing Database-data provided REST API", "body": "<p>in the real world you can see at least the following ways:</p>\n\n<ol>\n<li>you don't test it. code is simple, db tests may be expensive, slow etc</li>\n<li>manual tests on 1 common remotely installed instance. pretty useless as it doesn't allow you (or makes it really difficult) to experiment with changing schema, deleteting tables, data etc</li>\n<li>for tests use in-memory db (h2, hsql etc). it lets you start pretty easy because it starts and stops db on demand. the problems are: you will still have to clear db between transaction (if you do transactional tests. you can use frameworks like dbUnit or have full control and do it manually) and in fact you don't test your db. you test some other db</li>\n<li>use the same db provider as production db. this are best tests but require a bit of thinking on setting upthe infrastructure: you have to start your db for tests (automated docker? manual startup? permanently installed local/remote db?), you have to prepare db before each test (schema, tables, initial data, clearing existing data, resetting sequences etc) and close it after tests.</li>\n</ol>\n\n<p>i recommend the last one using: </p>\n\n<ol>\n<li>before all tests setup that tries to connect to existing db and if there is no db listening then it starts docker with that db</li>\n<li>flyway that creates schema and db structure</li>\n<li>tests setup that clears all data, reset sequences etc before each test</li>\n<li>each test inserts data that will be needed during that test</li>\n<li>jvm shutdown hook that stops docker if it was started at the beginning</li>\n</ol>\n"}], "owner": {"reputation": 7128, "user_id": 4189582, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rJzuadzQg0o/AAAAAAAAAAI/AAAAAAAAABQ/lRX62PozZNA/photo.jpg?sz=128", "display_name": "Ivar Reukers", "link": "https://stackoverflow.com/users/4189582/ivar-reukers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "accepted_answer_id": 39682541, "answer_count": 1, "score": 0, "last_activity_date": 1474766443, "creation_date": 1474624991, "question_id": 39658016, "link": "https://stackoverflow.com/questions/39658016/kotlin-java-testing-database-data-provided-rest-api", "title": "Kotlin/Java - Testing Database-data provided REST API", "body": "<p>I'm trying to test a connection to my Database and trying to configure a Mock Database. I only have no clue how to. How is it possible with any test framework to mock a database and test my method (shown below) <code>getUserById</code>? </p>\n\n<p>Since this is using raw jdbc, how can I overwrite this <code>getConnection()</code> method to be using the mock database instead of the real one? Or isn't this the way to go?</p>\n\n<p>I haven't tested a database connection/output of API ever, so I don't know where to start.</p>\n\n<p>This is my jdbc class:</p>\n\n<pre><code>import java.sql.Connection\nimport java.sql.DriverManager\nimport java.sql.ResultSet\nimport java.sql.Statement\nimport java.util.ArrayList\nimport java.util.Properties\nimport bye.domain.*\n\nclass jdbcTrial {\n    val url: String = \"jdbc:postgresql://196.21.2.12:5432/events\"\n    //val props: Properties = Properties();\n\n    val DB_DRIVER = \"org.postgresql.Driver\";\n\n\n    // used for getting the comments\n    fun getUserById(id: Int): User {\n        val query = \"select * from user where id = ${id};\";\n        return getSingleUser(query)\n    }\n\n    /*\n\n        Singles\n\n    */\n\n    fun getSingleUser(query: String): User {\n        val conn = this.getConnection()\n        var user = User()\n        val statement: Statement = conn.createStatement()\n        val rs: ResultSet = statement.executeQuery(query)\n        while (rs.next()) {\n            user = convertToUser(rs)\n        }\n        return user\n    }\n\n    /*\n\n        Converting\n\n    */\n    fun convertToUser(rs: ResultSet): User {\n        val id = rs.getInt(\"id\")\n        val uname = rs.getString(\"username\")\n        val type = rs.getString(\"usertype\")\n        return User(id, uname, type)\n    }\n\n\n    fun getConnection(): Connection {\n\n        Class.forName(DB_DRIVER).newInstance()\n        val conn: Connection = DriverManager.getConnection(url, \"username\", \"password\")\n\n        return conn\n    }\n} \n</code></pre>\n"}, {"tags": ["android", "generics", "kotlin", "mvp"], "comments": [{"owner": {"reputation": 830, "user_id": 2462686, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/506dc00a97eebdf7c66b716857ce45ca?s=128&d=identicon&r=PG", "display_name": "Raman Branavitski", "link": "https://stackoverflow.com/users/2462686/raman-branavitski"}, "edited": false, "score": 0, "creation_date": 1495866383, "post_id": 39655933, "comment_id": 75439103, "body": "Did you solved this problem? In presenter I have method attachView(view:V) and I have conflicts with this method if I try variants below. Let me know please if you tackle this problem. Thank you."}, {"owner": {"reputation": 572, "user_id": 4574796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42bdb3331508ebcc306062d8b25efefd?s=128&d=identicon&r=PG&f=1", "display_name": "panbacuh", "link": "https://stackoverflow.com/users/4574796/panbacuh"}, "reply_to_user": {"reputation": 830, "user_id": 2462686, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/506dc00a97eebdf7c66b716857ce45ca?s=128&d=identicon&r=PG", "display_name": "Raman Branavitski", "link": "https://stackoverflow.com/users/2462686/raman-branavitski"}, "edited": false, "score": 1, "creation_date": 1495914956, "post_id": 39655933, "comment_id": 75452581, "body": "@RamanBranavitski please check my repo,  (<a href=\"https://github.com/GDGWroclaw/Toast/blob/master/app/src/main/java/com/droidsonroids/toast/common/mvp/MvpActivity.kt\" rel=\"nofollow noreferrer\">github.com/GDGWroclaw/Toast/blob/master/app/src/main/java/c&zwnj;&#8203;om/&hellip;</a> , if something is still unclear just let me know."}, {"owner": {"reputation": 1127, "user_id": 1516954, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f0943dc5050ad26e49df093cb8b8ddf3?s=128&d=identicon&r=PG", "display_name": "paxcow", "link": "https://stackoverflow.com/users/1516954/paxcow"}, "edited": false, "score": 0, "creation_date": 1557579866, "post_id": 39655933, "comment_id": 98817709, "body": "This repo does not exist anymore."}], "answers": [{"comments": [{"owner": {"reputation": 830, "user_id": 2462686, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/506dc00a97eebdf7c66b716857ce45ca?s=128&d=identicon&r=PG", "display_name": "Raman Branavitski", "link": "https://stackoverflow.com/users/2462686/raman-branavitski"}, "edited": false, "score": 0, "creation_date": 1495866434, "post_id": 39656717, "comment_id": 75439117, "body": "In presenter I have method attachView(view:V) and I have conflicts with this method if I try your variants.  Type mismatch: inferred type is BaseMvpActivity&lt;P, T&gt; but T was expected"}, {"owner": {"reputation": 830, "user_id": 2462686, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/506dc00a97eebdf7c66b716857ce45ca?s=128&d=identicon&r=PG", "display_name": "Raman Branavitski", "link": "https://stackoverflow.com/users/2462686/raman-branavitski"}, "edited": false, "score": 0, "creation_date": 1495867530, "post_id": 39656717, "comment_id": 75439350, "body": "Look at post below please"}, {"owner": {"reputation": 2506, "user_id": 3079130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e1f9a7c19b1487fb867184e4366748d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa", "link": "https://stackoverflow.com/users/3079130/rafa"}, "edited": false, "score": 0, "creation_date": 1509592264, "post_id": 39656717, "comment_id": 81082005, "body": "I&#39;m having same issue. Was this fixed anywhere?"}, {"owner": {"reputation": 120, "user_id": 3591220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KNJCI.jpg?s=128&g=1", "display_name": "andrey2ag", "link": "https://stackoverflow.com/users/3591220/andrey2ag"}, "edited": false, "score": 0, "creation_date": 1597028256, "post_id": 39656717, "comment_id": 111990901, "body": "Excelente, gracias. Thanks, arigato :)  The secret is using the &lt;*&gt; in BaseActivity class on BasePresenter..."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 10, "last_activity_date": 1474621056, "creation_date": 1474621056, "answer_id": 39656717, "question_id": 39655933, "link": "https://stackoverflow.com/questions/39655933/kotlin-generic-bounds/39656717#39656717", "title": "Kotlin generic bounds", "body": "<p>The <strong>Java</strong> <code>class BaseActivity</code> states that <code>P</code> extends <code>BasePresenter&lt;?&gt;</code> whereas the <strong>Kotlin</strong> version states <code>BasePresenter&lt;BaseView&gt;</code> which obviously are not compatible. </p>\n\n<p>To resolve that you can either relax the <code>BaseActivity</code> type parameter <code>P</code> like so:</p>\n\n<pre><code>abstract class BaseActivity&lt;P : BasePresenter&lt;*&gt;&gt;\n</code></pre>\n\n<p>or if you wish to have more type checking done by compiler you can specify type parameter for <code>view</code> like so:</p>\n\n<pre><code>abstract class BaseActivity&lt;TPresenter : BasePresenter&lt;TView&gt;, TView : BaseView&gt; : AppCompatActivity(), BaseView\n</code></pre>\n\n<p>And then use it as:</p>\n\n<pre><code>class MainPresenter : BasePresenter&lt;MainView&gt;()\nclass MainActivity() : MainView, BaseActivity&lt;MainPresenter, MainView&gt;()\n</code></pre>\n"}], "owner": {"reputation": 572, "user_id": 4574796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42bdb3331508ebcc306062d8b25efefd?s=128&d=identicon&r=PG&f=1", "display_name": "panbacuh", "link": "https://stackoverflow.com/users/4574796/panbacuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1623, "favorite_count": 0, "accepted_answer_id": 39656717, "answer_count": 1, "score": 3, "last_activity_date": 1495867501, "creation_date": 1474618542, "question_id": 39655933, "link": "https://stackoverflow.com/questions/39655933/kotlin-generic-bounds", "title": "Kotlin generic bounds", "body": "<p>I'm trying to port my MVP solution from JAVA to Kotlin and I have a big problem with generics. This is how my JAVA classes look like:</p>\n\n<pre><code>public abstract class BaseActivity&lt;P extends BasePresenter&gt; extends AppCompatActivity implements BaseView \n\npublic abstract class BasePresenter&lt;V extends BaseView&gt;\n\npublic interface BaseView \n</code></pre>\n\n<p>And ported to Kotlin:</p>\n\n<pre><code>abstract class BaseActivity&lt;P : BasePresenter&lt;BaseView&gt;&gt; : AppCompatActivity(), BaseView \n\nabstract class BasePresenter&lt;V : BaseView&gt; \n\ninterface BaseView\n</code></pre>\n\n<p>And when I'm trying to use </p>\n\n<pre><code>class MainActivity() : MainView, BaseActivity&lt;MainPresenter&gt;() \n</code></pre>\n\n<p>I'm getting \"Type argument is not within its bounds. Expected: <strong>BasePresenter</strong>, <strong>Found MainPresenter</strong>\"</p>\n"}, {"tags": ["kotlin", "language-design"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1474622163, "post_id": 39650646, "comment_id": 66616260, "body": "The rules of inheritance for data classes in 1.1 will be changed in another way: you still won&#39;t be able to inherit from data classes, but your data classes will be able to inherit from other (non-data) classes."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1474638858, "post_id": 39650646, "comment_id": 66626832, "body": "I think you will always have 3 sets of class types, and need all three.  Data work well for things that are immutable, need to compare all fields for equality and/or need copy constructor.  Sealed for things where you need finite class hierarchy.  And normal classes for all else.  Data classes do add weight which affects Android maybe more than say server development."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1474638922, "post_id": 39650646, "comment_id": 66626884, "body": "answers are going to be &quot;it depends...&quot; which means maybe the question is too broad."}], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1474632003, "post_id": 39653358, "comment_id": 66622159, "body": "Additionally, the generated <code>copy</code> and and <code>componentX</code> methods increase code size and method count."}, {"owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "edited": false, "score": 0, "creation_date": 1474654101, "post_id": 39653358, "comment_id": 66635600, "body": "So would you say a class shouldn&#39;t be made data unless you&#39;re sure it will use at least one of the methods generated by a data class even if it is solely intended to be a carrier of data and has no class body? It can easily be made a data class later after all. Or should you use the data modifier anyway to make the code more readable and communicate your intention for the class?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1474660751, "post_id": 39653358, "comment_id": 66638903, "body": "Usually that depends on the intended behaviour of <code>equals</code>, whether I want to compare references or the data inside."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 6, "last_activity_date": 1474609317, "creation_date": 1474609317, "answer_id": 39653358, "question_id": 39650646, "link": "https://stackoverflow.com/questions/39650646/why-wouldnt-i-make-every-eligable-kotlin-class-a-data-class/39653358#39653358", "title": "Why wouldn&#39;t I make every eligable Kotlin class a data class?", "body": "<p><code>data</code> modifier makes Kotlin generate common methods like <code>toString</code>, <code>hashCode</code>, <code>equals</code> for the most commons (%80) scenarios based on the primary constructor.</p>\n\n<p>This shows 3 reasons why only few classes should be <code>data</code>:</p>\n\n<ol>\n<li><p>Most non-data classes have a mix of properties defined in the primary constructor and in the body of the class. Also the primary constructor often has parameter that are not fields (but help initialise more complex fields in the body). In other words, <code>data</code> has very restrictive requirements which are rarely met by regular classes. </p></li>\n<li><p>In addition to point 1, making a class <code>data</code> may hurt its extensibility. Even if the layout of the class in question conforms to the rules of <code>data</code> classes, later someone may want to add another property in the body of the class. In that case he will have to manually override <code>hashCode</code> because it may be used somewhere. </p></li>\n<li><p>Marking a class <code>data</code> sends a message to the one who reads the code that you intend to use this class as a data career. Marking other classes will be misleading. </p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11971, "user_id": 1100135, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e7b273722f4261cd61c3256374da73cc?s=128&d=identicon&r=PG", "display_name": "piotrek", "link": "https://stackoverflow.com/users/1100135/piotrek"}, "is_accepted": false, "score": -3, "last_activity_date": 1477184323, "creation_date": 1477184323, "answer_id": 40198540, "question_id": 39650646, "link": "https://stackoverflow.com/questions/39650646/why-wouldnt-i-make-every-eligable-kotlin-class-a-data-class/40198540#40198540", "title": "Why wouldn&#39;t I make every eligable Kotlin class a data class?", "body": "<p>because of one the fundament pinciple of OO programming: encapsulation.\nby design we deliberately limit ways in which other code can interact with out modules. this gives us maintainability (more powerful refactoring) and readablity</p>\n"}], "owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1477184323, "creation_date": 1474589159, "question_id": 39650646, "link": "https://stackoverflow.com/questions/39650646/why-wouldnt-i-make-every-eligable-kotlin-class-a-data-class", "title": "Why wouldn&#39;t I make every eligable Kotlin class a data class?", "body": "<p>I'm of course excluding any reasons that involve violating the rules for what can be a data class. So if you know you won't need to inherit from it for example (although it's my understanding that rule is going away in Kotlin 1.1).</p>\n\n<ol>\n<li>Are there any disadvantages to making a class a data class?</li>\n<li>Why don't all eligible classes provide the functionality of a data class as long as they remain eligible? This should all be detectable by the compiler without needing a special keyword. Of course the answer to this might be obvious depending on the answer to question 1.</li>\n<li>Is there any reason for me not to mark all of my eligible classes as data classes?</li>\n</ol>\n"}, {"tags": ["android", "maven", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 2, "creation_date": 1474534564, "post_id": 39634242, "comment_id": 66573381, "body": "There is the Kotlin standard library, which has a method count of about <a href=\"http://www.methodscount.com/?lib=org.jetbrains.kotlin%3Akotlin-stdlib%3A%2B\" rel=\"nofollow noreferrer\">5747</a>, though that may not matter if the client is using the stdlib anyway."}, {"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1474536353, "post_id": 39634242, "comment_id": 66574521, "body": "You are right there is a trade off, kotlin with stdlib could be an overkill for small libraries, but for big ones could make sence, since kotlin stdlib has many usefull api&#39;s. You could write your library in java and provide handy Kotlin api&#39;s/extensions via separate lib like RxJava and RxKotlin for example."}, {"owner": {"reputation": 3506, "user_id": 249879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dea032f0944ebc3e30ea4e79362bdc95?s=128&d=identicon&r=PG", "display_name": "Marc O&#39;Morain", "link": "https://stackoverflow.com/users/249879/marc-omorain"}, "edited": false, "score": 0, "creation_date": 1474536442, "post_id": 39634242, "comment_id": 66574582, "body": "Thanks for the suggestion, but the point is that I want to write the library in Kotlin - I want immutable data classes and null-safety."}, {"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1474536736, "post_id": 39634242, "comment_id": 66574779, "body": "@MarcO&#39;Morain java supports immutable classes too, you could provide null-safety in java via Nullable/NonNull annotations. If you want to use kotlin why are you worried about stdlib size?"}, {"owner": {"reputation": 3506, "user_id": 249879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dea032f0944ebc3e30ea4e79362bdc95?s=128&d=identicon&r=PG", "display_name": "Marc O&#39;Morain", "link": "https://stackoverflow.com/users/249879/marc-omorain"}, "reply_to_user": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 1, "creation_date": 1474537375, "post_id": 39634242, "comment_id": 66575232, "body": "&gt; If you want to use kotlin why are you worried about stdlib size?  @Stepango I don&#39;t see the dichotomy here.  I want to use Kotlin for the improved syntax and compile-time safety. It&#39;s an improvement over Java in every way.  I don&#39;t want to increase the APK size of apps that use my library any more than necessary. I don&#39;t want to add any transitive dependencies to client apps."}], "answers": [{"comments": [{"owner": {"reputation": 3506, "user_id": 249879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dea032f0944ebc3e30ea4e79362bdc95?s=128&d=identicon&r=PG", "display_name": "Marc O&#39;Morain", "link": "https://stackoverflow.com/users/249879/marc-omorain"}, "edited": false, "score": 0, "creation_date": 1474538283, "post_id": 39635849, "comment_id": 66575860, "body": "Great answer. Thanks. When I say resource constrained I mean an Android device in general - the the smaller APK size the better (faster download, less storage space, smaller memory footprint). I want to reduce memory usage of my library as much as possible to be a good citizen."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 3506, "user_id": 249879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dea032f0944ebc3e30ea4e79362bdc95?s=128&d=identicon&r=PG", "display_name": "Marc O&#39;Morain", "link": "https://stackoverflow.com/users/249879/marc-omorain"}, "edited": false, "score": 1, "creation_date": 1474538727, "post_id": 39635849, "comment_id": 66576132, "body": "The only hit you take is total class/method from stdlib, and Kotlin continues to work on ways to reduce them.  But you make up for those points by having less of your own code, using less other libraries, and with some of them being inline they may not even count.  So the NET change will depend on your useage.  There are a lot of published notes about Kotlin and Android, and the impact, and slack channel on Kotlin slack has an #android channel where people can answer subjective things about it."}, {"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 3, "creation_date": 1547656175, "post_id": 39635849, "comment_id": 95268534, "body": "i wouldn&#39;t say that standard library is very small. Kotlin 1.3 stdlib adds 0.7Mb and it can be a problem for some apps"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 1, "creation_date": 1574413103, "post_id": 39635849, "comment_id": 104232358, "body": "@4ntoine 1.30 Mb to be precise, for JVM. For example without it a JAR of mine is only 20 Kb. Huge difference."}, {"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "reply_to_user": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 0, "creation_date": 1574534591, "post_id": 39635849, "comment_id": 104269853, "body": "@LppEdd <code>1.3.0</code> adds 1.1Mb to be even more precise: <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib/1.3.0\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdli&zwnj;&#8203;b/&hellip;</a>"}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1574535368, "post_id": 39635849, "comment_id": 104270082, "body": "@4ntoine yeah I was referring to 1.3.6."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 10, "last_activity_date": 1474538039, "creation_date": 1474538039, "answer_id": 39635849, "question_id": 39634242, "link": "https://stackoverflow.com/questions/39634242/is-there-an-overhead-for-writing-a-library-in-kotlin-for-android/39635849#39635849", "title": "Is there an overhead for writing a library in Kotlin for Android?", "body": "<p>Kotlin has many optimizations specifically that help Android.  If you read through blog posts you can see how it has constantly reduced stdlib size, and amount of classes at every release.  </p>\n\n<blockquote>\n  <p>Will the resulting Android app be any larger or slower because of Kotlin?</p>\n</blockquote>\n\n<p>No</p>\n\n<blockquote>\n  <p>Does a Kotlin library (distributed as .class files) introduce any runtime or extra overhead versus a Java library?</p>\n</blockquote>\n\n<p>Standard library is very small and many of its functions are inline-only which mean they don't exist past compilation and just become inline code.  Proguard can take care of a lot as well.  </p>\n\n<blockquote>\n  <p>Since the library is targeting a resource constrained environment I'm worried that by porting the library to Kotlin there will be extra overhead.</p>\n</blockquote>\n\n<p>You didn't define which resources are constrained.  Kotlin isn't going to use more memory, not going to use more disk, and stdlib is tiny.</p>\n\n<blockquote>\n  <p>I really like Kotlin and the benefits over Java should reduce the number of bugs in the library.</p>\n</blockquote>\n\n<p>Kotlin is popular on Android for a reason, and you should take that as a sign that there are many more benefits than negatives. Really you can see this for yourself by having a small example in Java and small in Kotlin and compare the difference.  Proguard both, have the same type of build pipeline.</p>\n"}], "owner": {"reputation": 3506, "user_id": 249879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dea032f0944ebc3e30ea4e79362bdc95?s=128&d=identicon&r=PG", "display_name": "Marc O&#39;Morain", "link": "https://stackoverflow.com/users/249879/marc-omorain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 2, "accepted_answer_id": 39635849, "answer_count": 1, "score": 11, "last_activity_date": 1474538039, "creation_date": 1474533828, "question_id": 39634242, "link": "https://stackoverflow.com/questions/39634242/is-there-an-overhead-for-writing-a-library-in-kotlin-for-android", "title": "Is there an overhead for writing a library in Kotlin for Android?", "body": "<p>I'm considering porting a Java (Android) library to Kotlin. I really like Kotlin and the benefits over Java should reduce the number of bugs in the library. </p>\n\n<p>Since the library is targeting a resource constrained environment I'm worried that by porting the library to Kotlin there will be extra overhead. </p>\n\n<p>Does a Kotlin library (distributed as .class files) introduce any runtime or extra overhead versus a Java library? </p>\n\n<p>Will the resulting Android app be any larger or slower because of Kotlin?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1474536455, "post_id": 39632971, "comment_id": 66574596, "body": "Which version of Kotlin are you using?"}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1474536501, "post_id": 39632971, "comment_id": 66574621, "body": "The latest stable: <code>1.0.3</code>."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1474536611, "post_id": 39632971, "comment_id": 66574683, "body": "This looks similar to <a href=\"https://youtrack.jetbrains.com/issue/KT-13625\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-13625</a> which appears to be fixed in 1.0.4 EAP. Could you try 1.0.4 and check if you still see the problem?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1474538933, "post_id": 39632971, "comment_id": 66576278, "body": "We&#39;ve looked into this some more and apparently it&#39;s a new problem. Could you please file a YouTrack issue with some details? Thanks!"}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1474540339, "post_id": 39632971, "comment_id": 66577176, "body": "I&#39;ll check if EAP fixes the issue later, I&#39;m currently at work. However, I managed to create an issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-13993\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-13993</a>"}, {"owner": {"reputation": 641, "user_id": 5479247, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AC0-V9DmUv4/AAAAAAAAAAI/AAAAAAAAFc0/7D0Qqwhjgbg/photo.jpg?sz=128", "display_name": "Eugene Krivenja", "link": "https://stackoverflow.com/users/5479247/eugene-krivenja"}, "edited": false, "score": 0, "creation_date": 1474547225, "post_id": 39632971, "comment_id": 66581690, "body": "Did you try to build with Kotlin 1.0.2, as mentioned in comments there <a href=\"https://youtrack.jetbrains.com/issue/KT-13052\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-13052</a> ?"}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "edited": false, "score": 0, "creation_date": 1474557860, "post_id": 39632971, "comment_id": 66589387, "body": "I cleaned the project, switched to 1.0.2 and then back to 1.0.3. It compiles just fine and now I actually cannot reproduce the issue."}], "answers": [{"tags": [], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "is_accepted": false, "score": 0, "last_activity_date": 1474979612, "creation_date": 1474979612, "answer_id": 39724810, "question_id": 39632971, "link": "https://stackoverflow.com/questions/39632971/invalid-meta-data-produced-in-meta-inf-when-compiling-kotlin-jar-with-gradle/39724810#39724810", "title": "Invalid meta-data produced in META-INF when compiling Kotlin jar with Gradle", "body": "<p>It might have something to do with concurrent archives building through both IntelliJ and Gradle - it seems that both use different IDs for <code>kotlin_module</code>. Clearing the project (not only through <code>gradle clean</code>, but also removing <code>.gradle</code> and <code>.idea</code>) and temporary changes of project Kotlin dependency seem to help.</p>\n"}], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1474979612, "creation_date": 1474529718, "question_id": 39632971, "link": "https://stackoverflow.com/questions/39632971/invalid-meta-data-produced-in-meta-inf-when-compiling-kotlin-jar-with-gradle", "title": "Invalid meta-data produced in META-INF when compiling Kotlin jar with Gradle", "body": "<p>I recently faced an internal compiler exception when trying to include a jar (which contains compiled classes from another Kotlin project):</p>\n\n<pre><code>java.io.FileNotFoundException: /home/[myUsername]/.m2/repository/com/my/library/1.0.0-SNAPSHOT/library-1.0.0-SNAPSHOT.jar!/META-INF/moduleName_main.kotlin_module\n        at org.jetbrains.kotlin.com.intellij.openapi.vfs.impl.ZipHandler.contentsToByteArray(ZipHandler.java:233)\n        at org.jetbrains.kotlin.com.intellij.openapi.vfs.impl.jar.CoreJarVirtualFile.contentsToByteArray(CoreJarVirtualFile.java:125)\n        at org.jetbrains.kotlin.cli.jvm.compiler.JvmPackagePartProvider.processNotLoadedRelevantRoots(JvmPackagePartProvider.kt:67)\n        at org.jetbrains.kotlin.cli.jvm.compiler.JvmPackagePartProvider.findPackageParts(JvmPackagePartProvider.kt:40)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.LazyJavaPackageFragment$binaryClasses$2.invoke(LazyJavaPackageFragment.kt:37)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.LazyJavaPackageFragment$binaryClasses$2.invoke(LazyJavaPackageFragment.kt:32)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedLazyValue.invoke(LockBasedStorageManager.java:321)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedNotNullLazyValue.invoke(LockBasedStorageManager.java:362)\n        at org.jetbrains.kotlin.storage.StorageKt.getValue(storage.kt:39)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.LazyJavaPackageFragment.getBinaryClasses$kotlin_compiler(LazyJavaPackageFragment.kt)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.JvmPackageScope$kotlinScopes$2.invoke(JvmPackageScope.kt:44)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.JvmPackageScope$kotlinScopes$2.invoke(JvmPackageScope.kt:36)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedLazyValue.invoke(LockBasedStorageManager.java:321)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$LockBasedNotNullLazyValue.invoke(LockBasedStorageManager.java:362)\n        at org.jetbrains.kotlin.storage.StorageKt.getValue(storage.kt:39)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.JvmPackageScope.getKotlinScopes(JvmPackageScope.kt)\n        at org.jetbrains.kotlin.load.java.lazy.descriptors.JvmPackageScope.getContributedClassifier(JvmPackageScope.kt:55)\n        at org.jetbrains.kotlin.resolve.scopes.ChainedMemberScope.getContributedClassifier(ChainedMemberScope.kt:33)\n        at org.jetbrains.kotlin.resolve.scopes.AbstractScopeAdapter.getContributedClassifier(AbstractScopeAdapter.kt:41)\n        at org.jetbrains.kotlin.resolve.lazy.FileScopeFactory$currentPackageScope$1.getContributedClassifier(FileScopeFactory.kt:153)\n        at org.jetbrains.kotlin.resolve.scopes.utils.ScopeUtilsKt.findClassifier(ScopeUtils.kt:74)\n        at org.jetbrains.kotlin.resolve.QualifiedExpressionResolver.resolveDescriptorForType(QualifiedExpressionResolver.kt:74)\n        at org.jetbrains.kotlin.resolve.TypeResolver.resolveDescriptorForType(TypeResolver.kt:577)\n        at org.jetbrains.kotlin.resolve.TypeResolver$resolveTypeElement$1.visitUserType(TypeResolver.kt:159)\n        at org.jetbrains.kotlin.psi.KtVisitorVoid.visitUserType(KtVisitorVoid.java:905)\n        at org.jetbrains.kotlin.psi.KtVisitorVoid.visitUserType(KtVisitorVoid.java:21)\n        at org.jetbrains.kotlin.psi.KtUserType.accept(KtUserType.java:42)\n        at org.jetbrains.kotlin.psi.KtElementImplStub.accept(KtElementImplStub.java:58)\n        at org.jetbrains.kotlin.resolve.TypeResolver.resolveTypeElement(TypeResolver.kt:157)\n        at org.jetbrains.kotlin.resolve.TypeResolver.doResolvePossiblyBareType(TypeResolver.kt:114)\n        at org.jetbrains.kotlin.resolve.TypeResolver.resolvePossiblyBareType(TypeResolver.kt:102)\n        at org.jetbrains.kotlin.resolve.TypeResolver.resolveType(TypeResolver.kt:72)\n        at org.jetbrains.kotlin.resolve.TypeResolver.resolveType(TypeResolver.kt:67)\n        at org.jetbrains.kotlin.resolve.FunctionDescriptorResolver.resolveValueParameters(FunctionDescriptorResolver.kt:320)\n        at org.jetbrains.kotlin.resolve.FunctionDescriptorResolver.createValueParameterDescriptors(FunctionDescriptorResolver.kt:214)\n        at org.jetbrains.kotlin.resolve.FunctionDescriptorResolver.initializeFunctionDescriptorAndExplicitReturnType(FunctionDescriptorResolver.kt:159)\n        at org.jetbrains.kotlin.resolve.FunctionDescriptorResolver.resolveFunctionDescriptor(FunctionDescriptorResolver.kt:106)\n        at org.jetbrains.kotlin.resolve.FunctionDescriptorResolver.resolveFunctionDescriptor(FunctionDescriptorResolver.kt:75)\n        at org.jetbrains.kotlin.resolve.lazy.descriptors.AbstractLazyMemberScope.doGetFunctions(AbstractLazyMemberScope.kt:79)\n        at org.jetbrains.kotlin.resolve.lazy.descriptors.AbstractLazyMemberScope.access$doGetFunctions(AbstractLazyMemberScope.kt:41)\n        at org.jetbrains.kotlin.resolve.lazy.descriptors.AbstractLazyMemberScope$functionDescriptors$1.invoke(AbstractLazyMemberScope.kt:51)\n        at org.jetbrains.kotlin.resolve.lazy.descriptors.AbstractLazyMemberScope$functionDescriptors$1.invoke(AbstractLazyMemberScope.kt:41)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$MapBasedMemoizedFunction.invoke(LockBasedStorageManager.java:394)\n        at org.jetbrains.kotlin.storage.LockBasedStorageManager$MapBasedMemoizedFunctionToNotNull.invoke(LockBasedStorageManager.java:458)\n        at org.jetbrains.kotlin.resolve.lazy.descriptors.AbstractLazyMemberScope.getContributedFunctions(AbstractLazyMemberScope.kt:70)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$1.visitNamedFunction(LazyDeclarationResolver.java:167)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$1.visitNamedFunction(LazyDeclarationResolver.java:118)\n        at org.jetbrains.kotlin.psi.KtNamedFunction.accept(KtNamedFunction.java:48)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.resolveToDescriptor(LazyDeclarationResolver.java:118)\n        at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.resolveToDescriptor(LazyDeclarationResolver.java:113)\n        at org.jetbrains.kotlin.resolve.LazyTopDownAnalyzer.createFunctionDescriptors(LazyTopDownAnalyzer.kt:214)\n        at org.jetbrains.kotlin.resolve.LazyTopDownAnalyzer.analyzeDeclarations(LazyTopDownAnalyzer.kt:174)\n        at org.jetbrains.kotlin.resolve.LazyTopDownAnalyzerForTopLevel.analyzeDeclarations(LazyTopDownAnalyzerForTopLevel.java:74)\n        at org.jetbrains.kotlin.resolve.LazyTopDownAnalyzerForTopLevel.analyzeFiles(LazyTopDownAnalyzerForTopLevel.java:66)\n        at org.jetbrains.kotlin.resolve.jvm.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.java:151)\n        at org.jetbrains.kotlin.resolve.jvm.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegrationWithCustomContext(TopDownAnalyzerFacadeForJVM.java:79)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.analyze(KotlinToJVMBytecodeCompiler.kt:332)\n        at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:126)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:325)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:130)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:178)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:51)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.exec(CLICompiler.java:199)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.compileNotIncremental(Tasks.kt:491)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler(Tasks.kt:364)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler(Tasks.kt:148)\n        at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:110)\n        at sun.reflect.GeneratedMethodAccessor137.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:75)\n        at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$IncrementalTaskAction.doExecute(DefaultTaskClassInfoStore.java:155)\n        at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:126)\n        at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:115)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:74)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:55)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:32)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\n        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n        at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n        at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:153)\n        at org.gradle.internal.Factories$1.create(Factories.java:22)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:53)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:150)\n        at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\n        at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:98)\n        at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:92)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:63)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:92)\n        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:83)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:94)\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:43)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:28)\n        at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:82)\n        at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:49)\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:59)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:49)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n        at org.gradle.util.Swapper.swap(Swapper.java:38)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.HintGCAfterBuild.execute(HintGCAfterBuild.java:44)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:240)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n        at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>What's really curious: this error is thrown only when I'm loading the jar from Maven Local (<code>gradle build install</code>) - when I download the same jar from Nexus snapshots, the compiler error does not occur.</p>\n\n<p>However, I investigated the jar and I found out that <code>moduleName_main.kotlin_module</code> is indeed absent in <code>META-INF</code> - instead, there's a <code>moduleName_compileKotlin.kotlin_module</code> file. It seems that Gradle plugin forced the <code>compileKotlin</code> suffix instead of expected <code>main</code> - and since <code>compileKotlin</code> is the name of the compilation task, I'm guessing that the suffix defaults to the Gradle task name.</p>\n\n<ol>\n<li>Is that an error in Gradle setup on my part or a compiler/plugin bug?</li>\n<li>Is there a way to modify <code>kotlin_module</code> suffix through Gradle plugin settings?</li>\n</ol>\n"}, {"tags": ["scala", "kotlin", "dsl", "type-safety"], "answers": [{"comments": [{"owner": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "edited": false, "score": 0, "creation_date": 1486143920, "post_id": 42009676, "comment_id": 71234535, "body": "scalatags doesn&#39;t fulfill the type-safety requirement."}, {"owner": {"reputation": 524, "user_id": 7221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3757b5f6ae7d3fb325066fcf8e2df3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Melnyk", "link": "https://stackoverflow.com/users/7221823/yevhenii-melnyk"}, "reply_to_user": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "edited": false, "score": 0, "creation_date": 1486151036, "post_id": 42009676, "comment_id": 71238174, "body": "@Yaroslav Well, you&#39;re right. And it doesn&#39;t seem to be a way to make so neat api, at least for now. Some day there will be Dotty with implicit function types <a href=\"http://dotty.epfl.ch/blog/2016/12/05/implicit-function-types.html#how-to-remove-boilerplate\" rel=\"nofollow noreferrer\">dotty.epfl.ch/blog/2016/12/05/&hellip;</a>. They will do exactly what you need."}, {"owner": {"reputation": 524, "user_id": 7221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3757b5f6ae7d3fb325066fcf8e2df3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Melnyk", "link": "https://stackoverflow.com/users/7221823/yevhenii-melnyk"}, "reply_to_user": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "edited": false, "score": 0, "creation_date": 1486152268, "post_id": 42009676, "comment_id": 71238785, "body": "@Yaroslav there is one more lib called rapture <a href=\"https://github.com/propensive/rapture\" rel=\"nofollow noreferrer\">github.com/propensive/rapture</a>. And you can implement type safe templates. The documentation is pure but it works. Here is the example of website <a href=\"https://github.com/propensive/contextual-web/blob/master/src/main/scala/main.scala\" rel=\"nofollow noreferrer\">github.com/propensive/contextual-web/blob/master/src/main/sc&zwnj;&#8203;ala/&hellip;</a>"}], "tags": [], "owner": {"reputation": 524, "user_id": 7221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3757b5f6ae7d3fb325066fcf8e2df3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Melnyk", "link": "https://stackoverflow.com/users/7221823/yevhenii-melnyk"}, "is_accepted": false, "score": 3, "last_activity_date": 1486060073, "creation_date": 1486060073, "answer_id": 42009676, "question_id": 39631606, "link": "https://stackoverflow.com/questions/39631606/how-to-get-kotlins-type-safe-builders-to-work-in-scala/42009676#42009676", "title": "How to get Kotlin&#39;s type safe builders to work in Scala?", "body": "<p>If you are interested in building html, then there is a library <a href=\"https://github.com/lihaoyi/scalatags\" rel=\"nofollow noreferrer\">scalatags</a> that uses similar concept.\nAchieving this kind of builders does not need any specific language constructs. Here is an example:</p>\n\n<pre><code>object HtmlBuilder extends App {\n    import html._\n    val result = html {\n        div {\n            div{\n                a(href = \"http://stackoverflow.com\")\n            }\n        }\n    }\n}\n\nsealed trait Node\ncase class Element(name: String, attrs: Map[String, String], body: Node) extends Node\ncase class Text(content: String) extends Node\ncase object Empty extends Node\n\nobject html {\n    implicit val node: Node = Empty\n    def apply(body: Node) = body\n    def a(href: String)(implicit body: Node) =\n        Element(\"a\", Map(\"href\" -&gt; href), body)\n    def div(body: Node) =\n        Element(\"div\", Map.empty, body)\n}\n\nobject Node {\n    implicit def strToText(str: String): Text = Text(str)\n}\n</code></pre>\n"}], "owner": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1486060073, "creation_date": 1474525136, "last_edit_date": 1475476702, "question_id": 39631606, "link": "https://stackoverflow.com/questions/39631606/how-to-get-kotlins-type-safe-builders-to-work-in-scala", "title": "How to get Kotlin&#39;s type safe builders to work in Scala?", "body": "<p>Kotlin has awesome <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"nofollow\">type safe builders</a> that make possible to create dsl's like this</p>\n\n<pre><code>html {\n  head {\n    title(\"The title\")\n    body {} // compile error\n  }\n  body {} // fine\n}\n</code></pre>\n\n<p>Awesomeness is that you cannot put tags in invalid places, like body inside head, auto-completion also works properly. </p>\n\n<p>I'm interested if this can be achieved in Scala. How to get it?</p>\n"}, {"tags": ["gradle", "kotlin", "spring-boot-gradle-plugin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474540894, "post_id": 39630897, "comment_id": 66577564, "body": "Show your main class. Possible your class is <code>ApplicationKt</code>."}, {"owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474546309, "post_id": 39630897, "comment_id": 66581094, "body": "I have multiple main classes, which is part of the reason I need to configure it, if you have only one main class it gets discovered anyway. No the problem isn&#39;t the class name, the above wont even compile let alone be evaluated."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474549668, "post_id": 39630897, "comment_id": 66583552, "body": "so which error you get?"}, {"owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474585935, "post_id": 39630897, "comment_id": 66603889, "body": "I have tried about 6 different ways of configuring the plugin all yielding various errors, I didnt include them in the question because I wanted to keep it concise and targeted to question at hand. Im not trying to solve an error, im trying to discover the proper way of doing it."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474624939, "post_id": 39630897, "comment_id": 66617951, "body": "Okay, then please checkout this project: <a href=\"https://github.com/IRus/kotlin-meetup\" rel=\"nofollow noreferrer\">github.com/IRus/kotlin-meetup</a>"}, {"owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474634240, "post_id": 39630897, "comment_id": 66623498, "body": "@IRus That project uses regular gradle, gradle-script-kotlin is a new project that allows gradle build files to be written in kotlin rather than groovy."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1474634987, "post_id": 39630897, "comment_id": 66623994, "body": "Oh, sorry, i miss this point."}], "answers": [{"tags": [], "owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "is_accepted": false, "score": 2, "last_activity_date": 1504921969, "last_edit_date": 1504921969, "creation_date": 1481386301, "answer_id": 41077515, "question_id": 39630897, "link": "https://stackoverflow.com/questions/39630897/how-to-configure-spring-boot-repackage-with-gradle-script-kotlin/41077515#41077515", "title": "How to configure spring-boot repackage with gradle-script-kotlin", "body": "<p><strong>Update - September 8th, 2017</strong></p>\n\n<p>In newer versions of the Kotlin support, you have a couple other more idiomatic ways to accomplish this:</p>\n\n\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks {\n  \"bootRepackage\"(Repackage::class) {\n    mainClass = \"demo.Application\"\n  }\n}\n</code></pre>\n\n<p>And also:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val bootRepackage by tasks.getting(Repackage::class) {\n  mainClass = \"demo.Application\"\n}\n</code></pre>\n\n<p>I'm sure the task will change in a new version of Spring Boot.</p>\n\n<hr>\n\n<p><code>bootRepackage</code> is a task of type <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-tools/spring-boot-gradle-plugin/src/main/java/org/springframework/boot/gradle/repackage/RepackageTask.java\" rel=\"nofollow noreferrer\"><code>org.springframework.boot.gradle.repackage.RepackageTask</code></a>. With <code>0.4.1</code>, there are no extension methods available to make this configuration obvious. You will have to do something like the following:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.boot.gradle.repackage.RepackageTask\n\n(tasks.getByName(\"bootRepackage\") as RepackageTask).apply {\n  mainClass = \"demo.Application\"\n}\n</code></pre>\n\n<p>Relevant open issues for <code>Task</code> configuration:</p>\n\n<ul>\n<li><a href=\"https://github.com/gradle/gradle-script-kotlin/issues/34\" rel=\"nofollow noreferrer\">#34 - Support task selection and configuration</a></li>\n</ul>\n"}], "owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1504921969, "creation_date": 1474522029, "last_edit_date": 1504920873, "question_id": 39630897, "link": "https://stackoverflow.com/questions/39630897/how-to-configure-spring-boot-repackage-with-gradle-script-kotlin", "title": "How to configure spring-boot repackage with gradle-script-kotlin", "body": "<p>With regular gradle I would configure a main class like so:</p>\n\n<pre><code>bootRepackage {\n    mainClass = 'demo.Application'\n}\n</code></pre>\n\n<p>With gradle-script-kotlin, this does not work.<br>\nI think I need to somehow use the <code>Project.configure</code> inline function, but I have tried a few different things and I haven\u2019t been able to make it work.</p>\n"}]