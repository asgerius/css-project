[{"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "edited": false, "score": 0, "creation_date": 1438632047, "post_id": 31794529, "comment_id": 51519266, "body": "thanks for the comprehensive answer!! Actually the last solution is exactly the one I was looking for. Since in the previous solutions I&#39;m forced to call the properties at least once in order to have the &quot;injection&quot; registered in val injected. I will take potential changes into account :)"}, {"owner": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "edited": false, "score": 0, "creation_date": 1445635270, "post_id": 31794529, "comment_id": 54422158, "body": "since the recent prerelease propertyDelegated seems not to get called anymore. Did a renaming or removal happen?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "edited": false, "score": 0, "creation_date": 1445636563, "post_id": 31794529, "comment_id": 54422630, "body": "Indeed, it has been temporarily disabled until 1.0. It is planned to be redesigned in the future version of Kotlin though. As for your question, I guess my first solution should work for you."}, {"owner": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "edited": false, "score": 0, "creation_date": 1445856536, "post_id": 31794529, "comment_id": 54483212, "body": "Is there a way to imitate the propertyDelegate method call manually? Unfortunately the first two solutions are not a real match for my use case. I somehow need to catch the point, when the delegation is initialized, at least handle all the properties from a class which uses delegation (by reflection?)."}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "edited": false, "score": 0, "creation_date": 1445858397, "post_id": 31794529, "comment_id": 54484465, "body": "Can you please elaborate on why the first solution does not work for you? You can declare <code>fun inject(p: KProperty&lt;*&gt;): Inject</code> in the <code>Inject</code> object which would do the initialization stuff and return the object itself, and use it like in the sample I provided above."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 2, "last_activity_date": 1445801802, "last_edit_date": 1445801802, "creation_date": 1438627433, "answer_id": 31794529, "question_id": 31789953, "link": "https://stackoverflow.com/questions/31789953/can-we-access-the-propertymetadata-of-any-property-in-kotlin/31794529#31794529", "title": "Can we access the PropertyMetaData of any property in kotlin?", "body": "<p>Apparently you need to invoke some initialization code on a delegate object for a property. There are several solutions:</p>\n\n<p>1) Use the property reference expression, as noted by bashor, to obtain the name of the property and pass it to <code>inject</code>:</p>\n\n<pre><code>val prop1: Obj by Inject.inject(Bar::prop1.name)\nval prop2: Obj by Inject.inject(Bar::prop2.name)\n</code></pre>\n\n<p>This is sort of verbose and error-prone, although explicit.</p>\n\n<p>2) Do the initialization logic on the first access to the property. So <code>Inject</code> itself becomes a property delegate, maintaining the map of registered properties. However, there's a slight change in semantics that may not be applicable to your use case: at least one <code>get</code> is required for the property to be registered in <code>Inject</code>.</p>\n\n<pre><code>class Bar {\n    val prop1: Obj by Inject\n    val prop2: Obj by Inject\n}\n\nobject Inject {\n    val injected = hashMapOf&lt;String, ReadOnlyProperty&lt;Any, Obj&gt;&gt;()\n\n    fun get(obj: Any, metadata: PropertyMetadata): Obj {\n        // getOrPut computes and stores the value for the key if it's not present in the map\n        val property = injected.getOrPut(metadata.name) {\n            Delegates.lazy {\n                Obj(metadata.name)\n            }\n        }\n\n        return property[obj, metadata]\n    }\n}\n</code></pre>\n\n<p>3) (UPD: this is no longer supported.) Use the <code>propertyDelegated</code> method which is the <em>hidden and experimental</em> feature that allows your property delegate to be initialized with the metadata of the property which will use this delegate on access. Beware though that this method is likely to be renamed, redesigned or even removed in the future versions of Kotlin.</p>\n\n<pre><code>class Bar {\n    val prop1: Obj by Inject\n    val prop2: Obj by Inject\n}\n\nobject Inject {\n    val injected = hashMapOf&lt;String, ReadOnlyProperty&lt;Any, Obj&gt;&gt;()\n\n    // Experimental method recognized and called by Kotlin on delegated property initialization\n    fun propertyDelegated(metadata: PropertyMetadata) {\n        injected[metadata.name] = Delegates.lazy {\n            Obj(metadata.name)\n        }\n    }\n\n    fun get(obj: Any, metadata: PropertyMetadata): Obj {\n        return injected[metadata.name]!!.get(obj, metadata)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4839696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d5e58781eb6212c73c9b25171239a8?s=128&d=identicon&r=PG&f=1", "display_name": "kutoman", "link": "https://stackoverflow.com/users/4839696/kutoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 31794529, "answer_count": 1, "score": 1, "last_activity_date": 1445868848, "creation_date": 1438612163, "last_edit_date": 1445868848, "question_id": 31789953, "link": "https://stackoverflow.com/questions/31789953/can-we-access-the-propertymetadata-of-any-property-in-kotlin", "title": "Can we access the PropertyMetaData of any property in kotlin?", "body": "<p>Is there a way in kotlin to access the <code>PropertyMetaData</code> from outside of a property? To be more specific, from the delegation? \nLooking for something like this:</p>\n\n<p>EDIT (a more suitable example now)</p>\n\n<pre><code>class Obj(var name : String = \"\")\n\nclass Bar {\n val prop1 : Obj by Inject.inject() // &lt;- can inject() access prop1 without passing it explicitly?\n val prop2 : Obj by Inject.inject()\n}\n\nobject Inject {\n\n val injected = arrayListOf&lt;ReadOnlyProperty&lt;Any, Obj&gt;&gt;()\n\n fun inject() : ReadOnlyProperty&lt;Any, Obj&gt; {\n\n    val delegate = Delegates.lazy {\n        Obj(\"NEED THE DELEGATED PROPERTY'S NAME HERE\") // &lt;- like \"prop1\" \"prop2\" ...\n    }\n    injected.add(delegate)\n    return delegate\n }\n}\n</code></pre>\n\n<p>EDIT (after 1.0.0-beta-1038)</p>\n\n<p>This code snippet worked like a charm before (note: the String \"scrollPlace\" was not passed explicitly when using the previous version of kotlin since the property name was passed \"implicitly\" before):</p>\n\n<pre><code>val scrollPlace by injectBy&lt;Image&gt;(\"scrollPlace\").replaceBy {\n\n    val scrollPane = ScrollPane(VerticalGroup().space(12f).center())\n    scrollPane.setPosition(it.x, it.y)\n    scrollPane.setSize(it.width, it.height)\n    scrollPane\n}\n</code></pre>\n\n<p>In this example I'm using some chaining. The extension function injectBy (which is based on the pattern suggested under 1) of the accepted answer, except for passing a custom string ) creates a O2dInjectionClosure (ReadOnlyProperty) instance. The solution 1) would work of course, even though it's not as convenient as with the use of propertyDelgated, but the chaining causes some trouble. At least a proper solution haven't come to my mind yet. The extension function replaceBy creates another new O2dInjectionClosure instance:</p>\n\n<pre><code> public final fun &lt;T : Actor, R : Actor&gt; O2dInjectionClosure&lt;T&gt;.replaceBy(replacer : (replaced : T) -&gt; R) : O2dInjectionClosure&lt;R&gt; {\n    val originalInitializer = this.initializer\n    return O2dInjectionClosure { propName -&gt;\n\n        ... some transferring of the previous O2dInjectionClosure to this one\n        new\n    }\n}\n</code></pre>\n\n<p>Thus, I somehow would like to do the necessary stuff on the last call of the chaining, but in a convenient way :).\nI hope it's somehow reasonable</p>\n"}, {"tags": ["java", "jar", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 14221, "user_id": 1212960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3f39c683b5fbe30dfed80b8782d0195?s=128&d=identicon&r=PG", "display_name": "Greg Kopff", "link": "https://stackoverflow.com/users/1212960/greg-kopff"}, "edited": false, "score": 0, "creation_date": 1438582804, "post_id": 31767629, "comment_id": 51490653, "body": "Take a look <a href=\"http://stackoverflow.com/a/30565407/1212960\">here</a> - although this talks about including the <i>whole</i> Kotlin runtime."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1438595006, "post_id": 31767629, "comment_id": 51497237, "body": "After including the runtime you could try running ProGuard to reduce its size. You will probably need to tune the config file, though."}], "answers": [{"comments": [{"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 1, "creation_date": 1438838077, "post_id": 31794192, "comment_id": 51615493, "body": "I&#39;ll mark this as the correct answer once I confirm that it works. I&#39;m having a difficult time passing the <code>-include-runtime</code> argument to the kotlin compiler via gradle. I&#39;ve created a separate question on how to pass the kotlin compiler arguments through gradle. <a href=\"http://stackoverflow.com/questions/31847292/how-to-pass-compiler-arguments-to-kotlin-compiler-with-gradle\" title=\"how to pass compiler arguments to kotlin compiler with gradle\">stackoverflow.com/questions/31847292/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 5, "last_activity_date": 1438626270, "creation_date": 1438626270, "answer_id": 31794192, "question_id": 31767629, "link": "https://stackoverflow.com/questions/31767629/kotlin-code-compiled-to-jar-to-be-used-for-java-project/31794192#31794192", "title": "Kotlin Code compiled to Jar to be used for Java Project?", "body": "<p>Kotlin binaries do use some classes from the runtime, but the exact set of those classes is unspecified and may change even between minor versions, so you shouldn't rely on the list you've provided. Your best option is to include the full Kotlin runtime with the <code>-include-runtime</code> option and then run ProGuard (as noted in the comments) to exclude unused classes.</p>\n\n<p>You can use this minimal ProGuard config file:</p>\n\n<pre><code>-injars input.jar\n-outjars output.jar\n-libraryjars &lt;java.home&gt;/lib/rt.jar\n\n-keep class org.jetbrains.annotations.** {\n    public protected *;\n}\n\n-keep class kotlin.jvm.internal.** {\n    public protected *;\n}\n\n-keepattributes Signature,InnerClasses,EnclosingMethod\n\n-dontoptimize\n-dontobfuscate\n</code></pre>\n\n<p>If you use reflection (<code>kotlin-reflect.jar</code>), you should also keep everything under <code>kotlin.reflect.**</code></p>\n"}], "owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3055, "favorite_count": 2, "answer_count": 1, "score": 11, "last_activity_date": 1527017849, "creation_date": 1438476598, "question_id": 31767629, "link": "https://stackoverflow.com/questions/31767629/kotlin-code-compiled-to-jar-to-be-used-for-java-project", "title": "Kotlin Code compiled to Jar to be used for Java Project?", "body": "<p>I've written a Java library in Kotlin, and I'd like to compile it to a jar that is usable by Java and Kotlin applications.</p>\n\n<p>The idea is that the jar should be able to work on Java projects, and Kotlin projects. Doing a simple <code>./gradlew clean assemble</code> generates a jar, and when I inspect the jar I can see several imports that aren't included in the jar that normal Java applications won't have access too:</p>\n\n<pre><code>import jet.runtime.typeinfo.JetValueParameter;\nimport kotlin.jvm.internal.Intrinsics;\nimport kotlin.jvm.internal.KotlinClass;\nimport kotlin.jvm.internal.KotlinClass.Kind;\nimport kotlin.jvm.internal.KotlinSyntheticClass;\nimport kotlin.jvm.internal.KotlinSyntheticClass.Kind;\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n</code></pre>\n\n<p>How could I include the above dependencies in the jar? Right now the jar is only 30kb. I'd prefer to not have to include the entire Kotlin runtime either, but only compile in the used components.</p>\n"}, {"tags": ["kotlin", "qt-jambi"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438477288, "post_id": 31765526, "comment_id": 51467014, "body": "Thanks a lot, that worked. Is this specialization topic documented somewhere?"}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438618796, "post_id": 31765526, "comment_id": 51512320, "body": "More information You can find at <a href=\"http://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reference</a> and <a href=\"https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md\" rel=\"nofollow noreferrer\">spec</a>"}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438618942, "post_id": 31765526, "comment_id": 51512401, "body": "I looked to generated code and understood that about class specialization I was wrong. Compiler slightly specialize classes too but e.g. it doesn&#39;t generate bridges. I create <a href=\"https://youtrack.jetbrains.com/issue/KT-8709\" rel=\"nofollow noreferrer\">issue</a> about it. Feel free to vote or star to get updates."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438619628, "post_id": 31765526, "comment_id": 51512826, "body": "I added another solution, please try it too"}, {"owner": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438871375, "post_id": 31765526, "comment_id": 51636326, "body": "The second solution doesn&#39;t work unfortunately, it gives the same error as above. The first solution though works perfectly."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438879188, "post_id": 31765526, "comment_id": 51642041, "body": "it&#39;s strange. Could you please share text from &quot;Kotlin Bytecode&quot; tool window for some usages."}, {"owner": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438908131, "post_id": 31765526, "comment_id": 51654957, "body": "OK. I added the byte code for an example in the main post. This example doesn&#39;t work, it gives the same error."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438944367, "post_id": 31765526, "comment_id": 51669270, "body": "Thanks! Bytecode looks good I don&#39;t understand why it doesn&#39;t work. COuld you attach new stack trace too?"}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "reply_to_user": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "edited": false, "score": 0, "creation_date": 1438944450, "post_id": 31765526, "comment_id": 51669318, "body": "And maybe you can share simple project to reproduce? (with necessary dependencies or instruction to run if need)"}], "tags": [], "owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "is_accepted": true, "score": 1, "last_activity_date": 1438619602, "last_edit_date": 1438619602, "creation_date": 1438458284, "answer_id": 31765526, "question_id": 31763401, "link": "https://stackoverflow.com/questions/31763401/kotlin-inline-function-not-working-properly/31765526#31765526", "title": "Kotlin inline function not working properly", "body": "<p><strike>Classes inside inline function not specialize so</strike> <code>execute</code> of your object in bytecode has next signature <code>execute(java.lang.Object)</code>. But <code>javaClass&lt;A&gt;()</code> specialize and in <code>connect</code> you provide another signature: <code>execute(java.lang.Boolean)</code>.</p>\n\n<p>Try to write:</p>\n\n<pre><code>fun &lt;A&gt; QSignalEmitter.Signal1&lt;A&gt;.connect(action: (A) -&gt; Unit) {\n    connect(action, \"invoke(java.lang.Object)\")\n}\n</code></pre>\n\n<p>solution 2:</p>\n\n<pre><code>inline fun &lt;reified A&gt; S&lt;A&gt;.connect(noinline action: (A) -&gt; Unit) {\n    connect(action, \"invoke(${javaClass&lt;A&gt;()})\")\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4473239, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005419904637/picture?type=large", "display_name": "ClinPath", "link": "https://stackoverflow.com/users/4473239/clinpath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 31765526, "answer_count": 1, "score": 0, "last_activity_date": 1438908038, "creation_date": 1438443984, "last_edit_date": 1438908038, "question_id": 31763401, "link": "https://stackoverflow.com/questions/31763401/kotlin-inline-function-not-working-properly", "title": "Kotlin inline function not working properly", "body": "<p>While working on a project with QtJambi as the GUI toolkit, I was trying to code a library to make connecting signals and slots easier. I found the following problem.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>inline fun QSignalEmitter.Signal0.connect(\n        inlineOptions(InlineOption.ONLY_LOCAL_RETURN) action: () -&gt; Unit) {\n    connect(object {\n        fun execute() {\n            action()\n        }\n    }, \"execute()\")\n}\n\ninline fun &lt;reified A&gt; QSignalEmitter.Signal1&lt;A&gt;.connect(\n        inlineOptions(InlineOption.ONLY_LOCAL_RETURN) action: (A) -&gt; Unit) {\n    connect(object {\n        fun execute(a: A) {\n            action(a)\n        }\n    }, \"execute(\" + javaClass&lt;A&gt;().getCanonicalName() + \")\")\n}\n</code></pre>\n\n<p>This works for the first connect function when there are no generic parameters expected. But for the second connect function when i do something like:</p>\n\n<pre><code>QCheckBox().toggled.connect({ print(it) })\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Exception in thread \"main\" com.trolltech.qt.QNoSuchSlotException: \n\nCould not find slot with signature: execute(java.lang.Boolean)\nPossible matching methods:\n   com.TestPackage$Test$f1214d02$main$$inlined$connect$1.execute(java.lang.Object)\n\n    at com.trolltech.qt.QSignalEmitter$AbstractSignal.connect(QSignalEmitter.java:72)\n    at com.trolltech.qt.QSignalEmitter$AbstractSignal.connect(QSignalEmitter.java:132)\n    at com.TestPackage$Test$f1214d02.main(Test.kt:9)\n    at com.TestPackage.main(Test.kt:1)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\n</code></pre>\n\n<p>What is the possible cause and how can I get around it?</p>\n\n<p>Edit: Usage example</p>\n\n<pre><code>inline fun &lt;reified A&gt; QSignalEmitter.Signal1&lt;A&gt;.connect(noinline action: (A) -&gt; Unit) {\n    connect(action, \"invoke(${javaClass&lt;A&gt;()})\")\n}\n\nfun main(args: Array&lt;String&gt;) {\n    QApplication.initialize(args)\n\n    val widget = QWidget()\n    val button = QPushButton(\"Say Hello\")\n    button.clicked.connect {\n        println(\"Hello World\")\n    }\n    val layout = QFormLayout(widget)\n    layout.addWidget(button)\n\n    widget.show()\n    QApplication.execStatic()\n}\n</code></pre>\n\n<p>Kotlin Bytecode</p>\n\n<pre><code>// ================_DefaultPackage$QtExtensions$7d5c0ac6.class =================\n// class version 50.0 (50)\n// access flags 0x11\npublic final class _DefaultPackage$QtExtensions$7d5c0ac6 {\n\n\n    // access flags 0x19\n    // signature &lt;A:Ljava/lang/Object;&gt;(Lcom/trolltech/qt/QSignalEmitter$Signal1&lt;TA;&gt;;Lkotlin/jvm/functions/Function1&lt;-TA;+Lkotlin/Unit;&gt;;)V\n    // declaration: void connect&lt;A&gt;(com.trolltech.qt.QSignalEmitter$Signal1&lt;A&gt;, kotlin.jvm.functions.Function1&lt;? super A, ? extends kotlin.Unit&gt;)\n    public final static connect(Lcom/trolltech/qt/QSignalEmitter$Signal1;Lkotlin/jvm/functions/Function1;)V\n    @Lkotlin/inline;() // invisible\n    @Ljet/runtime/typeinfo/JetValueParameter;(name=\"$receiver\") // parameter 0\n    @Ljet/runtime/typeinfo/JetValueParameter;(name=\"action\") // parameter 1\n    @Lkotlin/noinline;() // invisible, parameter 1\n    @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 1\n    L0\n    L1\n    ALOAD 0\n    LDC \"$receiver\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n    ALOAD 1\n    LDC \"action\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n    L2\n    LINENUMBER 9 L2\n    ALOAD 0\n    ALOAD 1\n    NEW java/lang/StringBuilder\n        DUP\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\n        LDC \"invoke(\"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    LDC \"A\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.reifyJavaClass (Ljava/lang/String;)V\n    LDC Ljava/lang/Object;.class\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/Object;)Ljava/lang/StringBuilder;\n    LDC \")\"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKEVIRTUAL com/trolltech/qt/QSignalEmitter$Signal1.connect (Ljava/lang/Object;Ljava/lang/String;)V\n    L3\n    LINENUMBER 10 L3\n    RETURN\n    L4\n    LOCALVARIABLE $receiver Lcom/trolltech/qt/QSignalEmitter$Signal1; L0 L4 0\n    LOCALVARIABLE action Lkotlin/jvm/functions/Function1; L0 L4 1\n    MAXSTACK = 4\n    MAXLOCALS = 2\n\n    // access flags 0x19\n    public final static main([Ljava/lang/String;)V\n    @Ljet/runtime/typeinfo/JetValueParameter;(name=\"args\") // parameter 0\n    @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 0\n    L0\n    L1\n    ALOAD 0\n    LDC \"args\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull (Ljava/lang/Object;Ljava/lang/String;)V\n    L2\n    LINENUMBER 13 L2\n    ALOAD 0\n    INVOKESTATIC com/trolltech/qt/gui/QApplication.initialize ([Ljava/lang/String;)V\n    L3\n    LINENUMBER 15 L3\n    NEW com/trolltech/qt/gui/QWidget\n        DUP\n    INVOKESPECIAL com/trolltech/qt/gui/QWidget.&lt;init&gt; ()V\n        ASTORE 1\n    L4\n    L5\n    LINENUMBER 16 L5\n    NEW com/trolltech/qt/gui/QPushButton\n        DUP\n    LDC \"Say Hello\"\n    INVOKESPECIAL com/trolltech/qt/gui/QPushButton.&lt;init&gt; (Ljava/lang/String;)V\n    ASTORE 2\n    L6\n    L7\n    LINENUMBER 17 L7\n    ALOAD 2\n    CHECKCAST com/trolltech/qt/gui/QAbstractButton\n        GETFIELD com/trolltech/qt/gui/QAbstractButton.clicked : Lcom/trolltech/qt/QSignalEmitter$Signal1;\n    ASTORE 3\n    GETSTATIC _DefaultPackage$QtExtensions$7d5c0ac6$main$1.INSTANCE$ : L_DefaultPackage$QtExtensions$7d5c0ac6$main$1;\n    CHECKCAST kotlin/jvm/functions/Function1\n        ASTORE 4\n    NOP\n    L8\n    L9\n    L10\n    LINENUMBER 9 L10\n    ALOAD 3\n    ALOAD 4\n    NEW java/lang/StringBuilder\n        DUP\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\n        LDC \"invoke(\"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    LDC Ljava/lang/Boolean;.class\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/Object;)Ljava/lang/StringBuilder;\n    LDC \")\"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    INVOKEVIRTUAL com/trolltech/qt/QSignalEmitter$Signal1.connect (Ljava/lang/Object;Ljava/lang/String;)V\n    L11\n    LINENUMBER 10 L11\n    L12\n    L13\n    L14\n    LINENUMBER 20 L14\n    NEW com/trolltech/qt/gui/QFormLayout\n        DUP\n    ALOAD 1\n    INVOKESPECIAL com/trolltech/qt/gui/QFormLayout.&lt;init&gt; (Lcom/trolltech/qt/gui/QWidget;)V\n    ASTORE 3\n    L15\n    L16\n    LINENUMBER 21 L16\n    ALOAD 3\n    ALOAD 2\n    CHECKCAST com/trolltech/qt/gui/QWidget\n        INVOKEVIRTUAL com/trolltech/qt/gui/QFormLayout.addWidget (Lcom/trolltech/qt/gui/QWidget;)V\n    L17\n    LINENUMBER 23 L17\n    ALOAD 1\n    INVOKEVIRTUAL com/trolltech/qt/gui/QWidget.show ()V\n        L18\n    LINENUMBER 24 L18\n    INVOKESTATIC com/trolltech/qt/gui/QApplication.execStatic ()I\n        POP\n    L19\n    LINENUMBER 25 L19\n    RETURN\n    L20\n    LOCALVARIABLE $receiver Lcom/trolltech/qt/QSignalEmitter$Signal1; L8 L12 3\n    LOCALVARIABLE action Lkotlin/jvm/functions/Function1; L8 L12 4\n    LOCALVARIABLE layout Lcom/trolltech/qt/gui/QFormLayout; L15 L20 3\n    LOCALVARIABLE button Lcom/trolltech/qt/gui/QPushButton; L6 L20 2\n    LOCALVARIABLE widget Lcom/trolltech/qt/gui/QWidget; L4 L20 1\n    LOCALVARIABLE args [Ljava/lang/String; L0 L20 0\n    MAXSTACK = 4\n    MAXLOCALS = 5\n\n    @Lkotlin/jvm/internal/KotlinSyntheticClass;(abiVersion=23, kind=Lkotlin/jvm/internal/KotlinSyntheticClass$Kind;.PACKAGE_PART)\n    // access flags 0x19\n    public final static INNERCLASS _DefaultPackage$QtExtensions$7d5c0ac6$main$1 null null\n    // compiled from: QtExtensions.kt\n    // debug info: SMAP\n    QtExtensions.kt\n    Kotlin\n    *S Kotlin\n    *F\n        + 1 QtExtensions.kt\n    _DefaultPackage\n    *L\n        1#1,25:1\n    *E\n\n}\n\n\n// ================_DefaultPackage$QtExtensions$7d5c0ac6$main$1.class =================\n// class version 50.0 (50)\n// access flags 0x30\n// signature Lkotlin/jvm/internal/Lambda;Lkotlin/jvm/functions/Function1&lt;Ljava/lang/Boolean;Lkotlin/Unit;&gt;;\n// declaration: _DefaultPackage$QtExtensions$7d5c0ac6$main$1 extends kotlin.jvm.internal.Lambda implements kotlin.jvm.functions.Function1&lt;java.lang.Boolean, kotlin.Unit&gt;\nfinal class _DefaultPackage$QtExtensions$7d5c0ac6$main$1 extends kotlin/jvm/internal/Lambda  implements kotlin/jvm/functions/Function1  {\n\n\n    // access flags 0x41\n    public bridge invoke(Ljava/lang/Object;)Ljava/lang/Object;\n    ALOAD 0\n    ALOAD 1\n    CHECKCAST java/lang/Boolean\n        INVOKEVIRTUAL _DefaultPackage$QtExtensions$7d5c0ac6$main$1.invoke (Ljava/lang/Boolean;)V\n    GETSTATIC kotlin/Unit.INSTANCE$ : Lkotlin/Unit;\n    ARETURN\n    MAXSTACK = 2\n    MAXLOCALS = 2\n\n    // access flags 0x11\n    public final invoke(Ljava/lang/Boolean;)V\n    @Ljet/runtime/typeinfo/JetValueParameter;(name=\"it\") // parameter 0\n    L0\n    L1\n    L2\n    LINENUMBER 18 L2\n        LDC \"Hello World\"\n    INVOKESTATIC kotlin/io/IoPackage.println (Ljava/lang/Object;)V\n    L3\n    RETURN\n    L4\n    LOCALVARIABLE this L_DefaultPackage$QtExtensions$7d5c0ac6$main$1; L0 L4 0\n    LOCALVARIABLE it Ljava/lang/Boolean; L0 L4 1\n    MAXSTACK = 1\n    MAXLOCALS = 2\n\n    // access flags 0x0\n    &lt;init&gt;()V\n        ALOAD 0\n        ICONST_1\n        INVOKESPECIAL kotlin/jvm/internal/Lambda.&lt;init&gt; (I)V\n        RETURN\n        MAXSTACK = 2\n        MAXLOCALS = 1\n\n        // access flags 0x1008\n        static synthetic &lt;clinit&gt;()V\n            NEW _DefaultPackage$QtExtensions$7d5c0ac6$main$1\n            DUP\n            INVOKESPECIAL _DefaultPackage$QtExtensions$7d5c0ac6$main$1.&lt;init&gt; ()V\n                PUTSTATIC _DefaultPackage$QtExtensions$7d5c0ac6$main$1.INSTANCE$ : L_DefaultPackage$QtExtensions$7d5c0ac6$main$1;\n                RETURN\n                MAXSTACK = 2\n                MAXLOCALS = 0\n\n                // access flags 0x19\n                public final static L_DefaultPackage$QtExtensions$7d5c0ac6$main$1; INSTANCE$\n\n                @Lkotlin/jvm/internal/KotlinSyntheticClass;(abiVersion=23, kind=Lkotlin/jvm/internal/KotlinSyntheticClass$Kind;.ANONYMOUS_FUNCTION)\n                OUTERCLASS _DefaultPackage$QtExtensions$7d5c0ac6 main ([Ljava/lang/String;)V\n                // access flags 0x19\n                public final static INNERCLASS _DefaultPackage$QtExtensions$7d5c0ac6$main$1 null null\n                // compiled from: QtExtensions.kt\n                }\n\n\n                // ================_DefaultPackage.class =================\n                // class version 50.0 (50)\n                // access flags 0x11\n                public final class _DefaultPackage {\n\n\n                // access flags 0x8\n                static &lt;clinit&gt;()V\n                    LDC L_DefaultPackage;.class\n                    INVOKESTATIC kotlin/jvm/internal/Reflection.createKotlinPackage (Ljava/lang/Class;)Lkotlin/reflect/KPackage;\n                    PUTSTATIC _DefaultPackage.$kotlinPackage : Lkotlin/reflect/KPackage;\n                    RETURN\n                    MAXSTACK = 1\n                    MAXLOCALS = 0\n\n                    // access flags 0x1019\n                    public final static synthetic Lkotlin/reflect/KPackage; $kotlinPackage\n\n                    // access flags 0x19\n                    public final static main([Ljava/lang/String;)V\n                    @Ljet/runtime/typeinfo/JetValueParameter;(name=\"args\") // parameter 0\n                    @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 0\n                    L0\n                    L1\n                    LINENUMBER 1 L1\n                    ALOAD 0\n                    INVOKESTATIC _DefaultPackage$QtExtensions$7d5c0ac6.main ([Ljava/lang/String;)V\n                    RETURN\n                    L2\n                    LOCALVARIABLE args [Ljava/lang/String; L0 L2 0\n                    MAXSTACK = 1\n                    MAXLOCALS = 1\n\n                    // access flags 0x19\n                    // signature &lt;A:Ljava/lang/Object;&gt;(Lcom/trolltech/qt/QSignalEmitter$Signal1&lt;TA;&gt;;Lkotlin/jvm/functions/Function1&lt;-TA;+Lkotlin/Unit;&gt;;)V\n                        // declaration: void connect&lt;A&gt;(com.trolltech.qt.QSignalEmitter$Signal1&lt;A&gt;, kotlin.jvm.functions.Function1&lt;? super A, ? extends kotlin.Unit&gt;)\n                            public final static connect(Lcom/trolltech/qt/QSignalEmitter$Signal1;Lkotlin/jvm/functions/Function1;)V\n                            @Lkotlin/inline;() // invisible\n                            @Ljet/runtime/typeinfo/JetValueParameter;(name=\"$receiver\") // parameter 0\n                            @Ljet/runtime/typeinfo/JetValueParameter;(name=\"action\") // parameter 1\n                            @Lkotlin/noinline;() // invisible, parameter 1\n                            @Lorg/jetbrains/annotations/NotNull;() // invisible, parameter 1\n                            L0\n                            L1\n                            LINENUMBER 1 L1\n                            ALOAD 0\n                            ALOAD 1\n                            INVOKESTATIC _DefaultPackage$QtExtensions$7d5c0ac6.connect (Lcom/trolltech/qt/QSignalEmitter$Signal1;Lkotlin/jvm/functions/Function1;)V\n                            RETURN\n                            L2\n                            LOCALVARIABLE $receiver Lcom/trolltech/qt/QSignalEmitter$Signal1; L0 L2 0\n                            LOCALVARIABLE action Lkotlin/jvm/functions/Function1; L0 L2 1\n                            MAXSTACK = 2\n                            MAXLOCALS = 2\n\n                            @Lkotlin/jvm/internal/KotlinPackage;(abiVersion=23, data={\"V\\u0004)!Q.Y5o\\u0015\\u0011\\u0009'oZ:\\u000b\\u000b\\u0005\\u0013(/Y=\\u000b\\r-|G\\u000f\\\\5o\\u0015\\u0019\\u0019FO]5oO*!QK\\\\5u\\u0015\\u0011Q\\u0017M^1\\u000b\\u00091\\u000cgn\\u001a\\u0006&amp;?\\u0012+g-Y;miB\\u000b7m[1hK\\u0012\\nF/\\u0012=uK:\\u001c\\u0018n\\u001c8tI]\\\"Wg\\u0019\\u0019bGZR\\u0011!\\u0011\\u0006\\u0004\\u0003:L(bB*jO:\\u000cG.\\r\\u0006\\u000f#NKwM\\\\1m\\u000b6LG\\u000f^3s\\u0015\\r\\u0019w.\\u001c\\u0006\\niJ|G\\u000e\\u001c;fG\\\"T!!\\u001d;\\u000b\\u000f\\r|gN\\\\3di*1\\u0011m\\u0019;j_:T\\u0011BR;oGRLwN\\\\\\u0019\\u000b-E\\u001b\\u0016n\\u001a8bY\\u0016k\\u0017\\u000e\\u001e;fe\\u0012\\u001a\\u0016n\\u001a8bYFR1A\\u001b&lt;n\\u0015%1WO\\\\2uS&gt;t7\\u000f\\u001e\\u0006\\u0003!\\rQa\\u0001\\u0003\\u0001\\u0011\\u0005a\\u0001!B\\u0002\\u0005\\u0001!\\u0011A\\u0002A\\u0003\\u0004\\u0009\\u0001A)\\u0001\\u0004\\u0001\\u0006\\u0003!\\u0019QA\\u0001\\u0003\\u0003\\u0011\\u000f)!\\u0001\\\"\\u0002\\u0009\\u0005\\u0015\\u0019A\\u0001\\u0001\\u0005\\u0006\\u0019\\u0001)\\u0011\\u0001#\\u0004\\u0006\\u0005\\u0011!\\u0001bB\\u0003\\u0003\\u0009\\u0013Ay!B\\u0002\\u0005\\u000b!1A\\u0002A\\u0003\\u0004\\u0009\\u0017AY\\u0001\\u0004\\u0001\\u0006\\u0007\\u0011\\u0001\\u0001\\\"\\u0003\\u0007\\u0001\\u000b\\u0009!Q\\u0001c\\u0005\\u0006\\u0005\\u0011\\u0001\\u0001BC\\u0003\\u0003\\u0009\\u001fA)\\\"\\u0002\\u0002\\u0005\\u0011!IQ1\\u0007\\u0003\\u00011\\u0001i*\\u0002\\u0002\\u0001\\u0009\\u000251Q!\\u0001E\\u0001\\u0013\\rI!!B\\u0001\\u0009\\u0003A\\u001b\\u0001!\\u0009\\u0002\\u0006\\u0003!\\r\\u0011k\\u0001\\u0004\\u0005\\u0001%\\u0009A\\u0001A\\u0007\\u0003\\u0011\\ra\\u0009\\u0001W\\u0002\\u0005\\u000b?\\\"\\u0009!E\\u0004\\u0005\\u0001!%A\\u0012A\\u000b\\u0004\\u000b\\u0005A9\\u0001$\\u0001\\u0016\\u000f\\u0015\\u0009\\u0001BB\\u0005\\u0005\\u0013\\r)!\\u0001\\\"\\u0001\\u0009\\u0001aAQt\\u0004C\\u0001\\u0011#i1\\\"B\\u0001\\u0009\\u000e%!\\u0011bA\\u0003\\u0003\\u0009\\u0003A\\u0001!C\\u0002\\n\\u0005\\u0015\\u0009\\u00012\\u0001)\\u0004\\u0002\\u0005\\u0012Q!\\u0001E\\u0002#\\u000e9A\\u0001C\\u0005\\u0002\\u0009\\u0001i\\u0011\\u0001C\\u0004\\u000e\\u0003!E\\u0001l\\u0001\\u0003\"})\n                            // compiled from: QtExtensions.kt\n                            }\n</code></pre>\n"}, {"tags": ["android", "classnotfoundexception", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 3238938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SEynD.jpg?s=128&g=1", "display_name": "Damien Diehl", "link": "https://stackoverflow.com/users/3238938/damien-diehl"}, "edited": false, "score": 0, "creation_date": 1443852247, "post_id": 32903773, "comment_id": 53666172, "body": "Thanks for the response, and this may very well have been the cause. Based on my build script at the time I posted this question it looks like I was attempting to use ButterKnife (and its Kotlin equivalent, Kotterknife) at the same time unintentionally. Unfortunately since I abandoned attempting to convert this project to Kotlin, I won&#39;t be able to verify if this was the real cause :("}, {"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "reply_to_user": {"reputation": 364, "user_id": 3238938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SEynD.jpg?s=128&g=1", "display_name": "Damien Diehl", "link": "https://stackoverflow.com/users/3238938/damien-diehl"}, "edited": false, "score": 0, "creation_date": 1443943773, "post_id": 32903773, "comment_id": 53687943, "body": "Never give up on converting a Java project to Kotlin! It will pay off later. :)"}, {"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 1, "creation_date": 1491382115, "post_id": 32903773, "comment_id": 73522465, "body": "I am able to launch into MainActivityKotlin.kt if I add the line: <code>apply plugin: &quot;kotlin-android&quot;</code> to the app <code>build.gradle</code> file.   Without this line, I get the same error.   Note that the &quot;configure Kotlin for project&quot; action in Android Studio adds a kotlin plugin to the top level <code>build.gradle</code> file with the line: <code>apply plugin: &#39;kotlin&#39;</code>.   Kotlin version level as of this writing is 1.1.1."}], "tags": [], "owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "is_accepted": false, "score": 1, "last_activity_date": 1443776359, "creation_date": 1443776359, "answer_id": 32903773, "question_id": 31756071, "link": "https://stackoverflow.com/questions/31756071/classnotfoundexception-on-subsequent-builds-after-converting-mainactivity-to-kot/32903773#32903773", "title": "ClassNotFoundException on subsequent builds after converting MainActivity to Kotlin", "body": "<p>One possible cause could be an annotation processing library.</p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 1554422, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/129c62978bf672f84aad1443750dadc1?s=128&d=identicon&r=PG", "display_name": "Haggai", "link": "https://stackoverflow.com/users/1554422/haggai"}, "is_accepted": false, "score": 0, "last_activity_date": 1619084781, "creation_date": 1619084781, "answer_id": 67210826, "question_id": 31756071, "link": "https://stackoverflow.com/questions/31756071/classnotfoundexception-on-subsequent-builds-after-converting-mainactivity-to-kot/67210826#67210826", "title": "ClassNotFoundException on subsequent builds after converting MainActivity to Kotlin", "body": "<p>When converting an existing Android app from Java to Konlin there are many configuration changes to make. If you only convert the actual Java files to Kotlin the compile would work, but you will get those runtime loading errors.\nThe easiest way is to add a Kotlin class to the project:</p>\n<p>new-&gt;kotlin class/file</p>\n<p>The Android studio will then do all the necessary setting up for the support of kotlin. After you can remove the new class</p>\n"}], "owner": {"reputation": 364, "user_id": 3238938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SEynD.jpg?s=128&g=1", "display_name": "Damien Diehl", "link": "https://stackoverflow.com/users/3238938/damien-diehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1619084781, "creation_date": 1438381519, "last_edit_date": 1495541851, "question_id": 31756071, "link": "https://stackoverflow.com/questions/31756071/classnotfoundexception-on-subsequent-builds-after-converting-mainactivity-to-kot", "title": "ClassNotFoundException on subsequent builds after converting MainActivity to Kotlin", "body": "<p>I want to give Kotlin a try, so I decided to try to convert a single class of my project to Kotlin and see how it integrates with my workflow before trying to convert my entire project. I am able to build and my app works properly, but on every subsequent build after the first, I get the below exception from ClassLoader. The app only works properly after cleaning, and worked fine before I converted anything. I'm able to run a HelloWorld project on the same machine multiple times without error. The responses in this question did not help: <a href=\"https://stackoverflow.com/questions/26732491/classnotfoundexception-in-custom-flavor-using-kotlin\">ClassNotFoundException in custom flavor using kotlin</a></p>\n\n<pre><code>07-31 14:35:41.563    1878-1878/com.ddiehl.android.htn.debug\nE/AndroidRuntime\ufe55 FATAL EXCEPTION: main\nProcess: com.ddiehl.android.htn.debug, PID: 1878\n    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.ddiehl.android.htn.debug/com.ddiehl.android.htn.view.activities.MainActivity}: java.lang.ClassNotFoundException: Didn't find class \"com.ddiehl.android.htn.view.activities.MainActivity\" on path: DexPathList[[zip file \"/data/app/com.ddiehl.android.htn.debug-1/base.apk\"],nativeLibraryDirectories=[/data/app/com.ddiehl.android.htn.debug-1/lib/arm, /vendor/lib, /system/lib]]\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2209)\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\n            at android.app.ActivityThread.access$800(ActivityThread.java:144)\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n            at android.os.Handler.dispatchMessage(Handler.java:102)\n            at android.os.Looper.loop(Looper.java:135)\n            at android.app.ActivityThread.main(ActivityThread.java:5221)\n            at java.lang.reflect.Method.invoke(Native Method)\n            at java.lang.reflect.Method.invoke(Method.java:372)\n            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"com.ddiehl.android.htn.view.activities.MainActivity\" on path: DexPathList[[zip file \"/data/app/com.ddiehl.android.htn.debug-1/base.apk\"],nativeLibraryDirectories=[/data/app/com.ddiehl.android.htn.debug-1/lib/arm, /vendor/lib, /system/lib]]\n            at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:469)\n            at android.app.Instrumentation.newActivity(Instrumentation.java:1065)\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2199)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.app.ActivityThread.access$800(ActivityThread.java:144)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.os.Handler.dispatchMessage(Handler.java:102)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.os.Looper.loop(Looper.java:135)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at android.app.ActivityThread.main(ActivityThread.java:5221)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at java.lang.reflect.Method.invoke(Native Method)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at java.lang.reflect.Method.invoke(Method.java:372)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n    Suppressed: java.lang.ClassNotFoundException: com.ddiehl.android.htn.view.activities.MainActivity\n            at java.lang.Class.classForName(Native Method)\n            at java.lang.BootClassLoader.findClass(ClassLoader.java:781)\n            at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:504)\n            ... 13 more\n     Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available\n</code></pre>\n\n<p>Anyone have an idea why my app might work on first build, but not on subsequent builds? Here is my build.gradle, manifest, and activity, for reference.</p>\n\n<p>build.gradle (app module)</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'com.jakewharton.hugo'\napply plugin: 'com.getkeepsafe.dexcount'\napply plugin: 'me.tatarka.retrolambda'\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion \"23 rc3\"\n    defaultConfig {\n        applicationId \"com.ddiehl.android.htn\"\n        minSdkVersion 15\n        targetSdkVersion 22\n        versionCode 4\n        versionName \"0.3.0-dev\"\n        ndk {\n            moduleName \"app\"\n        }\n    }\n    signingConfigs {\n        release {\n            storeFile file(ANDROID_KEYSTORE_PATH)\n            storePassword ANDROID_KEYSTORE_PWD\n            keyAlias HTN_KEYSTORE_ALIAS\n            keyPassword HTN_KEYSTORE_PWD\n        }\n    }\n    buildTypes {\n        debug {\n            applicationIdSuffix \".debug\"\n            minifyEnabled false\n        }\n\n        release {\n            debuggable false\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.release\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n        debug.java.srcDirs += 'src/debug/kotlin'\n    }\n}\n\ndef getLocalProperty(s) {\n    Properties properties = new Properties()\n    properties.load(project.rootProject.file('local.properties').newDataInputStream())\n    return properties.getProperty(s)\n}\n\nretrolambda {\n    jdk getLocalProperty(\"jdk8.dir\")\n}\n\ndependencies {\n    compile project(':reddit')\n    compile project(':mopub')\n    compile project(':flurry')\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile 'com.android.support:appcompat-v7:22.2.1'\n    compile 'com.android.support:support-v4:22.2.1'\n    compile 'com.android.support:design:22.2.0'\n    compile 'com.android.support:recyclerview-v7:22.2.1'\n    compile 'com.android.support:cardview-v7:22.2.1'\n    compile 'com.google.android.gms:play-services-ads:7.5.0'\n    compile 'com.squareup.okhttp:okhttp:2.4.0'\n    compile 'com.squareup.okhttp:okhttp-urlconnection:2.4.0'\n    compile 'com.squareup.retrofit:retrofit:1.9.0'\n    compile 'com.squareup:otto:1.3.5'\n    compile 'com.squareup.picasso:picasso:2.5.2'\n    compile 'com.jakewharton:butterknife:7.0.0'\n    compile 'com.jakewharton:kotterknife:0.1.0-SNAPSHOT'\n    compile 'io.reactivex:rxandroid:0.25.0'\n    compile 'com.facebook.stetho:stetho:1.1.1'\n    compile 'com.facebook.stetho:stetho-okhttp:1.1.1'\n    debugCompile 'com.squareup.leakcanary:leakcanary-android:1.3.1'\n    releaseCompile 'com.squareup.leakcanary:leakcanary-android-no-op:1.3.1'\n}\n\nbuildscript {\n    ext.kotlin_version = '0.12.1230'\n    repositories {\n        mavenCentral()\n        maven {\n            url 'http://oss.sonatype.org/content/repositories/snapshots'\n        }\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url 'http://oss.sonatype.org/content/repositories/snapshots'\n    }\n}\n</code></pre>\n\n<p>AndroidManifest.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.ddiehl.android.htn\" &gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;\n\n    &lt;application\n        android:name=\"com.ddiehl.android.htn.HoldTheNarwhal\"\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\"\n        android:supportsRtl=\"true\"&gt;\n\n        &lt;meta-data android:name=\"com.google.android.gms.version\"\n            android:value=\"@integer/google_play_services_version\" /&gt;\n\n        &lt;activity\n            android:name=\"com.ddiehl.android.htn.view.activities.MainActivity\"\n            android:label=\"@string/app_name\"\n            android:configChanges=\"keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n                &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n                &lt;data\n                    android:host=\"www.damiendiehl.net\"\n                    android:scheme=\"http\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>MainActivity.kt (I redacted most of the View-related logic, it was 400 lines and this is a closed-source project at the moment. I can pastebin the full file, though, if necessary).</p>\n\n<pre><code>package com.ddiehl.android.htn.view.activities\n\nimport android.app.Dialog\nimport android.app.ProgressDialog\nimport android.os.AsyncTask\nimport android.os.Build\nimport android.os.Bundle\nimport android.support.design.widget.NavigationView\nimport android.support.design.widget.Snackbar\nimport android.support.v4.content.ContextCompat\nimport android.support.v4.view.GravityCompat\nimport android.support.v4.widget.DrawerLayout\nimport android.support.v7.app.AppCompatActivity\nimport android.support.v7.widget.Toolbar\nimport android.view.MenuItem\nimport android.view.View\nimport android.view.Window\nimport android.widget.EditText\nimport android.widget.ImageView\nimport android.widget.TextView\nimport butterknife.Bind\nimport butterknife.ButterKnife\nimport butterknife.OnClick\nimport butterknife.bindView\nimport com.flurry.android.FlurryAgent\nimport com.flurry.android.FlurryAgentListener\nimport com.mopub.common.MoPub\nimport com.mopub.mobileads.MoPubConversionTracker\nimport hugo.weaving.DebugLog\nimport java.util.HashMap\nimport kotlin.properties.Delegates\n\npublic class MainActivity : AppCompatActivity(), MainView, ConfirmSignOutDialog.Callbacks, NavigationView.OnNavigationItemSelectedListener {\n\n    private val mBus = BusProvider.getInstance()\n    private var mMainPresenter: MainPresenter? = null\n    private var mLastAuthCode: String? = null\n\n    private var mProgressBar: ProgressDialog? = null\n    private var mSubredditNavigationDialog: Dialog? = null\n\n    val mDrawerLayout: DrawerLayout by bindView(R.id.drawer_layout)\n\n    private var mAccessTokenManager: AccessTokenManager? = null\n\n    DebugLog\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super&lt;AppCompatActivity&gt;.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        ButterKnife.bind(this@MainActivity)\n\n        Init().execute()\n    }\n\n    private inner class Init : AsyncTask&lt;Void, Void, Void&gt;() {\n        override fun onPreExecute() {\n            super.onPreExecute()\n\n            mNavigationView.setNavigationItemSelectedListener(this@MainActivity)\n\n            val toolbar = ButterKnife.findById&lt;Toolbar&gt;(this@MainActivity, R.id.toolbar)\n            setSupportActionBar(toolbar)\n            val actionBar = getSupportActionBar()\n            if (actionBar != null) {\n                actionBar.setHomeAsUpIndicator(R.drawable.ic_navigation_menu)\n                actionBar.setDisplayHomeAsUpEnabled(true)\n            }\n        }\n\n        override fun doInBackground(vararg params: Void): Void? {\n            mAccessTokenManager = AccessTokenManager.getInstance(this@MainActivity)\n            return null\n        }\n\n        override fun onPostExecute(aVoid: Void?) {\n            super.onPostExecute(aVoid)\n            onAppInitialized()\n        }\n    }\n\n    override fun onStart() {\n        super&lt;AppCompatActivity&gt;.onStart()\n\n        if (mAccessTokenManager == null) {\n            showSpinner(R.string.application_loading)\n        } else {\n            onAppInitialized()\n        }\n    }\n\n    private fun onAppInitialized() {\n        mBus.register(mAccessTokenManager)\n\n        FlurryAgent.onStartSession(this)\n        dismissSpinner()\n        updateUserIdentity()\n        showSubredditIfEmpty(null)\n    }\n\n    override fun onStop() {\n        super&lt;AppCompatActivity&gt;.onStop()\n        FlurryAgent.onEndSession(this)\n        mBus.unregister(mAccessTokenManager)\n    }\n\n    companion object {\n        public val TAG: String = javaClass&lt;MainActivity&gt;().getSimpleName()\n\n        private val DIALOG_CONFIRM_SIGN_OUT = \"dialog_confirm_sign_out\"\n        private val FLURRY_SESSION_TIMEOUT_SECONDS = 30\n    }\n\n}\n</code></pre>\n"}, {"tags": ["performance", "simulation", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 21, "last_activity_date": 1438260810, "last_edit_date": 1438260810, "creation_date": 1438257708, "answer_id": 31723265, "question_id": 31723143, "link": "https://stackoverflow.com/questions/31723143/kotlin-uses-runtime-assertions-for-null-checking-performance-overhead/31723265#31723265", "title": "Kotlin uses runtime assertions for null checking - Performance overhead?", "body": "<p>First of all, the call stack is not accessed and dumped every time the method is run. During normal execution, only a single null check is performed, which does not have any noticeable overhead. The call stack is accessed only when the parameter is null and an exception needs to be thrown.</p>\n\n<p>The assertions are not generated for private methods (because they cannot be called from Java code, and the Kotlin compiler ensures that the Kotlin code calling the method does not pass any null values). Therefore, the best way to avoid the overhead entirely is to write the inner loop of your simulation code using private methods.</p>\n\n<p>You can disable assertion generation using the <code>-Xno-param-assertions</code> and <code>-Xno-call-assertions</code> options for the command line compiler. Note that those options are unsupported and could be removed in the future.</p>\n"}], "owner": {"reputation": 481, "user_id": 1192594, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed178b9b8cc09acf45bdd8351149a5b4?s=128&d=identicon&r=PG", "display_name": "Jack Shade", "link": "https://stackoverflow.com/users/1192594/jack-shade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 2, "accepted_answer_id": 31723265, "answer_count": 1, "score": 12, "last_activity_date": 1438260810, "creation_date": 1438257366, "question_id": 31723143, "link": "https://stackoverflow.com/questions/31723143/kotlin-uses-runtime-assertions-for-null-checking-performance-overhead", "title": "Kotlin uses runtime assertions for null checking - Performance overhead?", "body": "<p>I'm considering Kotlin for a simulation framework and noticed that the compiler interweaves static checkParameterIsNotNull calls after for each method which can be accessed from java. This checks wether the method parameter is not null by accessing (and dumping?) the call stack every time this method is run. Now that in a typical simulation framework the count of runs might be in the millions, I'm wondering about the performance impact of such a feature.</p>\n\n<p>If there an option to turn it off?</p>\n"}, {"tags": ["android", "gradle", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "edited": false, "score": 0, "creation_date": 1438241670, "post_id": 31717518, "comment_id": 51372591, "body": "Try build your app from command-line something like: &quot;./gradlew assembleDebug --stacktrace --debug&quot;. It should give us more info about the error. Remember to change the task name with that one which you&#39;re using to build the project."}], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 2340964, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/921b8a437352236ee4f86879c6ce5029?s=128&d=identicon&r=PG", "display_name": "manish", "link": "https://stackoverflow.com/users/2340964/manish"}, "is_accepted": true, "score": 7, "last_activity_date": 1438256733, "creation_date": 1438256733, "answer_id": 31722906, "question_id": 31717518, "link": "https://stackoverflow.com/questions/31717518/kotlin-gradle-issue/31722906#31722906", "title": "Kotlin Gradle issue", "body": "<p>My Jar was containing Kotlin runtime and I configured Kotlin in my android project also. These two Kotlin configuration were causing problem. After removing Kotlin from my Jar it started working.</p>\n"}], "owner": {"reputation": 914, "user_id": 2340964, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/921b8a437352236ee4f86879c6ce5029?s=128&d=identicon&r=PG", "display_name": "manish", "link": "https://stackoverflow.com/users/2340964/manish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 1, "accepted_answer_id": 31722906, "answer_count": 1, "score": 9, "last_activity_date": 1438291182, "creation_date": 1438240894, "last_edit_date": 1438291182, "question_id": 31717518, "link": "https://stackoverflow.com/questions/31717518/kotlin-gradle-issue", "title": "Kotlin Gradle issue", "body": "<p>I have created a Jar of a project written in Kotlin language. Jar contains following folders :</p>\n\n<pre><code>com\njet\nkotlin\nmeta-inf\nokio\norg\n</code></pre>\n\n<p>Then I created an android project and added Kotlin and the Jar as dependency. </p>\n\n<p>When I try to execute the hello world app it throws following exception.</p>\n\n<p><code>com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command '/usr/lib/jvm/java-7-openjdk-amd64/bin/java'' finished with non-zero exit value 1</code></p>\n\n<p>My app build gradle file is </p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion \"22.0.1\"\n\n    defaultConfig {\n        applicationId \"abc.xyz.kotlin\"\n        minSdkVersion 15\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile 'com.android.support:appcompat-v7:22.2.1'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile files('libs/xyz.jar')\n}\nbuildscript {\n    ext.kotlin_version = '0.12.1218'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>Can you please help me to resolve this issue?</p>\n"}]