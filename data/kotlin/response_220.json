[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 954, "user_id": 1654233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2tT0.jpg?s=128&g=1", "display_name": "yegodm", "link": "https://stackoverflow.com/users/1654233/yegodm"}, "edited": false, "score": 1, "creation_date": 1553802698, "post_id": 55388219, "comment_id": 97532231, "body": "Wouldn&#39;t <a href=\"https://kotlinlang.org/docs/reference/platform-specific-declarations.html\" rel=\"nofollow noreferrer\"><code>expect&#47;actual</code> keywords</a> help in your case?"}, {"owner": {"reputation": 3012, "user_id": 432426, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7678cd40147880958079e76859784665?s=128&d=identicon&r=PG", "display_name": "Tegiri Nenashi", "link": "https://stackoverflow.com/users/432426/tegiri-nenashi"}, "reply_to_user": {"reputation": 954, "user_id": 1654233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2tT0.jpg?s=128&g=1", "display_name": "yegodm", "link": "https://stackoverflow.com/users/1654233/yegodm"}, "edited": false, "score": 0, "creation_date": 1553820587, "post_id": 55388219, "comment_id": 97538222, "body": "There are two parts of my question, and while Paul answered the first one, the second part is open. I assume your expect/actual hint relates to the first part; that is rolling out DIY implementation of reflection which is standard kotlin reflection in JVM env, and reflection proxy in JS via some sort of dynamic calls. Anyway, I have decided to follow the second venue outlined in my post and create a map of functions, as in the second code snippet. My minor gripe about this solution is that the &quot;names&quot; of the methods are string literals, which is probably not big deal at all."}], "answers": [{"tags": [], "owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "is_accepted": true, "score": 2, "last_activity_date": 1553732384, "creation_date": 1553732384, "answer_id": 55388393, "question_id": 55388219, "link": "https://stackoverflow.com/questions/55388219/kotlin-reflection-dynamic-function-call-in-multi-platform-environment/55388393#55388393", "title": "Kotlin reflection/dynamic function call in multi-platform environment", "body": "<p>According to <a href=\"https://kotlinlang.org/docs/reference/js-reflection.html\" rel=\"nofollow noreferrer\">the docs</a>, no you can't access methods via reflection in the JS target. You would need to maintain your own collection of <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">function references</a> to achieve what you describe across both JVM and JS targets.</p>\n"}], "owner": {"reputation": 3012, "user_id": 432426, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7678cd40147880958079e76859784665?s=128&d=identicon&r=PG", "display_name": "Tegiri Nenashi", "link": "https://stackoverflow.com/users/432426/tegiri-nenashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 55388393, "answer_count": 1, "score": 2, "last_activity_date": 1553800977, "creation_date": 1553730956, "last_edit_date": 1553800977, "question_id": 55388219, "link": "https://stackoverflow.com/questions/55388219/kotlin-reflection-dynamic-function-call-in-multi-platform-environment", "title": "Kotlin reflection/dynamic function call in multi-platform environment", "body": "<p>Given</p>\n\n<pre><code>class X {\n    fun f() {...}\n    fun g() {...}\n    ...\n}\n</code></pre>\n\n<p>I would like to call f, g, or other class function by name, which is known dynamically at runtime. This is possible with kotlin-reflection, e.g.</p>\n\n<pre><code>val callback : KCallable&lt;*&gt;? = X::class.members.firstOrNull { it.name == predVar }\nif (callback != null) {\n    callback.call(obj, ...)\n</code></pre>\n\n<p>The only snag here is that my multiplatform application has targets other than JVM. For instance, is kotlin reflection doable in javascript? Certainly, JS is dynamically typed language, thus my question is if it is already implemented there.</p>\n\n<p>Alternatively, I can have a collection, or map of those functions. What would be the most elegant syntax of defining a list of functions, and having them callable dynamically? For example, given several enum type attributes, I can make a bunch of Boolean methods like this </p>\n\n<pre><code>var booleanDerivatives = hashMapOf&lt;String, () -&gt; Boolean&gt;(\n    \"breaksAfterComma\" to fun (): Boolean {\n        return options[breaksComma] === Breaks.After\n    }\n    ,\"breaksBeforeComma\" to fun (): Boolean {\n        return options[breaksComma] === Breaks.Before\n    }\n    ,\"breaksAfterLogicalConjunction\" to fun (): Boolean {\n        return options[breaksAroundLogicalConjunctions] === Breaks.After \n            || options[breaksAroundLogicalConjunctions] === Breaks.BeforeAndAfter\n    }\n)\n</code></pre>\n\n<p>However, unlike reflection, I seem to have to use string literals, because without reflection there is no mechanism translating a name into a string. Or there is?  </p>\n"}, {"tags": ["class", "kotlin", "reflection", "instanceof"], "answers": [{"comments": [{"owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "edited": false, "score": 0, "creation_date": 1553747909, "post_id": 55387709, "comment_id": 97501676, "body": "<code>432::class == Int::class</code> it work but <code>Int::class.isInstance(42)</code> not. Thanks!"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1553727304, "creation_date": 1553727304, "answer_id": 55387709, "question_id": 55386660, "link": "https://stackoverflow.com/questions/55386660/kotlin-reflect-kclass-isinstancevalue-any-not-working/55387709#55387709", "title": "kotlin.reflect.KClass.isInstance(value: Any?) not working", "body": "<p>You use the API incorrectly, the <code>isInstance</code> function does the opposite check as shown in the documentation:</p>\n\n<blockquote>\n  <p>Returns <code>true</code> if [value] is an instance of this class on a given platform.</p>\n</blockquote>\n\n<p>The <code>kotlin.Int</code> line does not refer to a type, you miss the <code>::class</code>. </p>\n\n<p>A possible solution is to flip the declaration:</p>\n\n<pre><code>String::class.isInstance(\"a string\")  /// true\nInt::class.isInstance(42) /// true\n</code></pre>\n\n<p>You may also compare KClass objects, e.g. <code>432::class == Int::class</code> or use KClass functions <code>isSubclassOf</code> and <code>isSuperclassOf</code></p>\n"}, {"comments": [{"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1553762728, "post_id": 55390185, "comment_id": 97507121, "body": "I was looking for a Java&#39;s <code>Class#isAssignableFrom(obj)</code> function analog. It is interesting to spot that <code>kotlin.Int</code> means companion object, but <code>kotlin.Int::class</code> means the KClass of not (and not a KClass of the companion)"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 1, "creation_date": 1553792912, "post_id": 55390185, "comment_id": 97527077, "body": "@EugenePetrenko Do you mean <code>Class#isAssignableFrom(Class&lt;?&gt;)</code>? That would be  <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/is-superclass-of.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/&hellip;</a> (and nicely, there&#39;s a symmetric <code>isSubclassOf</code>)."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1553747322, "creation_date": 1553747322, "answer_id": 55390185, "question_id": 55386660, "link": "https://stackoverflow.com/questions/55386660/kotlin-reflect-kclass-isinstancevalue-any-not-working/55390185#55390185", "title": "kotlin.reflect.KClass.isInstance(value: Any?) not working", "body": "<p><code>kotlin.String</code>, <code>kotlin.Int</code>, and <code>Boolean</code> are used as values, so they refer to <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"nofollow noreferrer\">companion objects</a> of the corresponding classes. So the first line checks whether the <code>String</code> companion object is a <code>String</code> and correctly tells you it isn't.</p>\n"}], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 0, "accepted_answer_id": 55387709, "answer_count": 2, "score": 1, "last_activity_date": 1553747322, "creation_date": 1553721782, "question_id": 55386660, "link": "https://stackoverflow.com/questions/55386660/kotlin-reflect-kclass-isinstancevalue-any-not-working", "title": "kotlin.reflect.KClass.isInstance(value: Any?) not working", "body": "<p>I'm trying the follow</p>\n\n<pre><code>\"simple string\"::class.isInstance(kotlin.String)\n</code></pre>\n\n<p>But it return <strong>false</strong>!</p>\n\n<blockquote>\n  <p>I'm using</p>\n  \n  <p>\"org.jetbrains.kotlin:kotlin-reflect:1.3.21\"</p>\n</blockquote>\n\n<p>The another examples also fail</p>\n\n<pre><code>1::class.isInstance(kotlin.Int)\ntrue::class.isInstance(Boolean)\n</code></pre>\n\n<p>Please, help me to understand it!</p>\n"}, {"tags": ["java", "string", "intellij-idea", "kotlin", "int"], "comments": [{"owner": {"reputation": 4293, "user_id": 11147851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b04faf05f8abb0f94a18fabc1b11ba73?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Smirnov", "link": "https://stackoverflow.com/users/11147851/pavel-smirnov"}, "edited": false, "score": 1, "creation_date": 1553721661, "post_id": 55386611, "comment_id": 97495176, "body": "You&#39;re going to need some kind of a parser here. Btw, it&#39;s 7, not 9."}], "answers": [{"tags": [], "owner": {"reputation": 1287, "user_id": 2245234, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/b06efac0f46a8918137c715ab72c92ee?s=128&d=identicon&r=PG", "display_name": "Jeeppp", "link": "https://stackoverflow.com/users/2245234/jeeppp"}, "is_accepted": true, "score": 1, "last_activity_date": 1553723449, "creation_date": 1553723449, "answer_id": 55387027, "question_id": 55386611, "link": "https://stackoverflow.com/questions/55386611/how-to-can-make-operator-numbers-in-string-as-int-in-kotlin/55387027#55387027", "title": "How to can make operator numbers in string as int in kotlin", "body": "<p>You need to have some kind of parsers to achieve that.</p>\n\n<p>Few examples </p>\n\n<p><a href=\"http://mathparser.org/\" rel=\"nofollow noreferrer\">http://mathparser.org/</a></p>\n\n<p>The advantage with the above is that you can perform any kind of calculation like below.</p>\n\n<pre><code>Expression e = new Expression(\"( 2 + 3/4 + sin(pi) )/2\");\ndouble v = e.calculate()\n</code></pre>\n\n<p>Or by using the Java inbuilt Scriptengine.</p>\n\n<pre><code>ScriptEngineManager mgr = new ScriptEngineManager();\nScriptEngine engine = mgr.getEngineByName(\"JavaScript\");\nString foo = \"1+2*3\";\nSystem.out.println(engine.eval(foo)); //prints 7\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 9234930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5CRCBS8AsKw/AAAAAAAAAAI/AAAAAAAAAA8/QHKCiF5_-ic/photo.jpg?sz=128", "display_name": "Youn Tivoli", "link": "https://stackoverflow.com/users/9234930/youn-tivoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 55387027, "answer_count": 1, "score": 0, "last_activity_date": 1554462270, "creation_date": 1553721532, "last_edit_date": 1554462270, "question_id": 55386611, "link": "https://stackoverflow.com/questions/55386611/how-to-can-make-operator-numbers-in-string-as-int-in-kotlin", "title": "How to can make operator numbers in string as int in kotlin", "body": "<p>I want to create operator in string and show the value as int.</p>\n\n<p>// ex:</p>\n\n<p><code>val str= \"1+2*3\"</code>   , print out -> <code>\"1+2*3\"</code></p>\n\n<p>// i want: </p>\n\n<p>print out -> <code>7</code></p>\n\n<p>however i tried to create kotlin code like:</p>\n\n<p><code>val str= \"${1+2*3}\"</code> or <code>val str= \"1+2*3\".toInt</code></p>\n\n<p>but all this don't work.</p>\n\n<p>any help???</p>\n"}, {"tags": ["android", "ios", "kotlin", "sprite-kit"], "comments": [{"owner": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 3, "creation_date": 1553718485, "post_id": 55385863, "comment_id": 97493680, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42680356/convert-spritekit-game-to-android\">Convert Spritekit Game to Android?</a>"}, {"owner": {"reputation": 15919, "user_id": 2709645, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/aGBo5.png?s=128&g=1", "display_name": "Knight0fDragon", "link": "https://stackoverflow.com/users/2709645/knight0fdragon"}, "edited": false, "score": 0, "creation_date": 1553792956, "post_id": 55385863, "comment_id": 97527106, "body": "The answer is still the same"}], "owner": {"reputation": 11, "user_id": 11268196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81a60c5ea43c10150c82e10ea75ad370?s=128&d=identicon&r=PG&f=1", "display_name": "Unknowz", "link": "https://stackoverflow.com/users/11268196/unknowz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553771515, "creation_date": 1553718315, "last_edit_date": 1553771515, "question_id": 55385863, "link": "https://stackoverflow.com/questions/55385863/android-equivalent-framework-to-apple-spritekit", "title": "Android equivalent framework to Apple SpriteKit", "body": "<p>I'm actually building an IOS app with a Tab Navigation.\nThese Tabs mainly contains lists and tables (like a business app), except one which host a SpriteKit view controller with a \"mini 2D game\" (Single Scene, One background image and multiple small animated images who respond to gesture).</p>\n\n<p>In the future I want to be able to port my app to Android with a native solution :</p>\n\n<ul>\n<li>Rewriting the business part of the app in Kotlin, is Ok</li>\n<li>Creating UI views with lists and tables, is Ok</li>\n<li>Creating a 2D scene and displaying a 2D scene in a controller, fail ...</li>\n</ul>\n\n<p>Does Android have an engine like that ?\nDoes somebody have an idea or one alternative to the SpriteKit/SceneKit view controller in Android ?</p>\n\n<p>[EDIT]</p>\n\n<p>My idea is not to convert the SpriteKit scene to display it in android, but to find a way to build the same app from scratch in android.\nWhat would be the best way to go if I had to create a simple 2D scene (with simple animations and gesture control) and to display it in the rest of my android \"business app\" ?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["android", "firebase", "authentication", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553714308, "post_id": 55384845, "comment_id": 97491740, "body": "<code>signInWithEmailAndPassword</code> is asynchronous and returns immediately before the callback is called.  Are you sure you aren&#39;t just trying to check <code>isValid</code> before the callback happens?"}, {"owner": {"reputation": 197, "user_id": 9333933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fa8d7d9956f05a12915322a8dbf7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user9333933", "link": "https://stackoverflow.com/users/9333933/user9333933"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553714558, "post_id": 55384845, "comment_id": 97491848, "body": "Lol, I just realized that, I added more logs and I realized the variable gets set after I&#39;m done with the method. And can you explain what you mean? Because I am trying to figure out if the user has a valid email/password, so I need that variable to be set before I return the method"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553714660, "post_id": 55384845, "comment_id": 97491896, "body": "That won&#39;t be possible without blocking the method, which probably also means blocking the main thread, which also means possibly causing an ANR.  Don&#39;t do that.  Firebase APIs are all asynchronous by design, and you should be dealing with them as such.  Just don&#39;t try to block a method on async work.    <a href=\"https://medium.com/google-developers/why-are-firebase-apis-asynchronous-callbacks-promises-tasks-e037a6654a93\" rel=\"nofollow noreferrer\">medium.com/google-developers/&hellip;</a>"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553715677, "post_id": 55384845, "comment_id": 97492383, "body": "The easiest thing is to just call another function from within your callback, to continue where you left off."}, {"owner": {"reputation": 197, "user_id": 9333933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fa8d7d9956f05a12915322a8dbf7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user9333933", "link": "https://stackoverflow.com/users/9333933/user9333933"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553716025, "post_id": 55384845, "comment_id": 97492551, "body": "That seems WAY easier, however I don&#39;t understand, because the callback is happening after my method is finished right? So even though I&#39;m calling a function to set my value, doesn&#39;t that happen after everything&#39;s done?"}, {"owner": {"reputation": 197, "user_id": 9333933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fa8d7d9956f05a12915322a8dbf7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user9333933", "link": "https://stackoverflow.com/users/9333933/user9333933"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553716190, "post_id": 55384845, "comment_id": 97492632, "body": "That worked, but I don&#39;t understand how it worked. Please explain it to me, if you have time + interest"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553716251, "post_id": 55384845, "comment_id": 97492661, "body": "I would suggest doing some web searches to look for resources about asynchronous programming."}, {"owner": {"reputation": 197, "user_id": 9333933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fa8d7d9956f05a12915322a8dbf7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user9333933", "link": "https://stackoverflow.com/users/9333933/user9333933"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1553716349, "post_id": 55384845, "comment_id": 97492718, "body": "Gotcha thanks for the help. Wish I could mark your answer as correct!"}], "owner": {"reputation": 197, "user_id": 9333933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6fa8d7d9956f05a12915322a8dbf7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user9333933", "link": "https://stackoverflow.com/users/9333933/user9333933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553713809, "creation_date": 1553713809, "question_id": 55384845, "link": "https://stackoverflow.com/questions/55384845/variable-not-set-inside-listener", "title": "Variable not set inside listener?", "body": "<p>I'm trying to set my variable inside the sign in function provided by firebase.</p>\n\n<p>I tried moving my variable to become a global variable, but that didn't seem to do it.\n<strong>isValid</strong> is my problem variable. It seems to authenticate successfully and logs the case is true, however, the value doesn't stay true outside of that.</p>\n\n<pre><code>auth.signInWithEmailAndPassword(email, password)\n            .addOnCompleteListener(this) {task -&gt;\n                // why doesn't this set isvalid to true\n                this.isValid = if(task.isSuccessful) {\n                    Log.d(TAG, \"hey auth actually worked!\")\n                    true\n                } else {\n                    Log.d(TAG, \"let's try that again\")\n                    false\n                }\n            }\n</code></pre>\n\n<p>I'm initializing isValid to be false and even though I'm setting it to be true as seen above, the value is still false.</p>\n"}, {"tags": ["android", "kotlin", "android-room", "dao"], "comments": [{"owner": {"reputation": 2725, "user_id": 4164585, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh5.googleusercontent.com/-6sZLpOeM0i0/AAAAAAAAAAI/AAAAAAAAAAA/O4I5MRvNRjw/photo.jpg?sz=128", "display_name": "Siamak Ferdos", "link": "https://stackoverflow.com/users/4164585/siamak-ferdos"}, "edited": false, "score": 0, "creation_date": 1553722490, "post_id": 55384842, "comment_id": 97495571, "body": "Put your repository class too"}, {"owner": {"reputation": 101, "user_id": 11251645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qgz2-ShkGdk/AAAAAAAAAAI/AAAAAAAAAHs/ZwyNFUubWU4/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11251645/michael"}, "reply_to_user": {"reputation": 2725, "user_id": 4164585, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh5.googleusercontent.com/-6sZLpOeM0i0/AAAAAAAAAAI/AAAAAAAAAAA/O4I5MRvNRjw/photo.jpg?sz=128", "display_name": "Siamak Ferdos", "link": "https://stackoverflow.com/users/4164585/siamak-ferdos"}, "edited": false, "score": 0, "creation_date": 1553723196, "post_id": 55384842, "comment_id": 97495822, "body": "added repo class code"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 11251645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qgz2-ShkGdk/AAAAAAAAAAI/AAAAAAAAAHs/ZwyNFUubWU4/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11251645/michael"}, "edited": false, "score": 0, "creation_date": 1553727389, "post_id": 55387179, "comment_id": 97497227, "body": "You&#39;re right. I just removed <code>LiveData</code> and get error <code>Cannot access database on the main thread since it may potentially lock the UI for a long period of time.</code> Than i changed my <code>getAlarm(id)</code> method to work via <code>Executors.newSingleThreadExecutor()</code> and all works! Thanks! P.S. I&#39;d give you +1 if I could (need 8 more reputation to do that)."}], "tags": [], "owner": {"reputation": 2725, "user_id": 4164585, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh5.googleusercontent.com/-6sZLpOeM0i0/AAAAAAAAAAI/AAAAAAAAAAA/O4I5MRvNRjw/photo.jpg?sz=128", "display_name": "Siamak Ferdos", "link": "https://stackoverflow.com/users/4164585/siamak-ferdos"}, "is_accepted": true, "score": 1, "last_activity_date": 1553724293, "creation_date": 1553724293, "answer_id": 55387179, "question_id": 55384842, "link": "https://stackoverflow.com/questions/55384842/select-query-returns-null-though-the-object-exist-kotlin-room/55387179#55387179", "title": "SELECT query returns null though the object exist Kotlin\\Room", "body": "<p>Your code seems ok. My suggestion is 2 things to check. </p>\n\n<p>First. Add <code>LIMITED 1</code>  to your query and check it</p>\n\n<p>Second. If not works still, be sure that your <code>LiveData</code> works well. Remember that live data just work when an object is changed! May be there is a problem with this issue and you may append observer to your <code>viewmodel</code> manually. To test tis problem just simply remove <code>LiveData</code> from your return type and check it again.</p>\n"}], "owner": {"reputation": 101, "user_id": 11251645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qgz2-ShkGdk/AAAAAAAAAAI/AAAAAAAAAHs/ZwyNFUubWU4/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11251645/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 55387179, "answer_count": 1, "score": 1, "last_activity_date": 1553724293, "creation_date": 1553713806, "last_edit_date": 1592644375, "question_id": 55384842, "link": "https://stackoverflow.com/questions/55384842/select-query-returns-null-though-the-object-exist-kotlin-room", "title": "SELECT query returns null though the object exist Kotlin\\Room", "body": "<p>I trying to build alarm clock app using Rooms. My method <code>repository.getAlarmById(1)</code> returns <strong>null</strong>. But <code>repository.getAlarms()</code>outputs</p>\n<blockquote>\n<p>Alarm(id=1, min=12, hour=12, enabled=true, isRepeating=true)</p>\n<p>Alarm(id=2, min=13, hour=13, enabled=true, isRepeating=true)</p>\n</blockquote>\n<p>Here is <strong>AlarmDao</strong></p>\n<pre><code>@Dao\ninterface AlarmDao {\n\n    @Query(&quot;SELECT * FROM alarm_table&quot;)\n    fun getAll(): LiveData&lt;List&lt;Alarm&gt;&gt;\n\n    @Query(&quot;SELECT * FROM alarm_table WHERE id = :id&quot;)\n    fun getById(id: Int): LiveData&lt;Alarm&gt;\n\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    fun insert(alarm: Alarm)\n\n    @Delete\n    fun delete(alarm: Alarm)\n}\n</code></pre>\n<p><strong>AlarmRepository</strong></p>\n<pre><code>class AlarmRepository (private val alarmDao: AlarmDao): AlarmDataSource {\n\n    override fun getAlarms(): LiveData&lt;List&lt;Alarm&gt;&gt; {\n        return alarmDao.getAll()\n    }\n\n    override fun getAlarm(id: Int): LiveData&lt;Alarm&gt; {\n        return alarmDao.getById(id)\n    }\n\n    override fun saveAlarm(alarm: Alarm) {\n        doAsync { alarmDao.insert(alarm) }\n    }\n\n    override fun deleteAlarm(alarm: Alarm) {\n        doAsync { alarmDao.delete(alarm) }\n    }\n}\n</code></pre>\n<p>And <strong>Alarm</strong> class</p>\n<pre><code>@Entity(tableName = &quot;alarm_table&quot;)\ndata class Alarm(\n        @PrimaryKey\n        var id: Int = 0,\n\n        @ColumnInfo(name = &quot;min&quot;)\n        var min: Int = -1,\n\n        @ColumnInfo(name = &quot;hour&quot;)\n        var hour: Int = -1,\n\n        @ColumnInfo(name = &quot;enabled&quot;)\n        var enabled: Boolean = true,\n\n        @ColumnInfo(name = &quot;isRepeating&quot;)\n        var isRepeating: Boolean = false )\n</code></pre>\n<p>Why do I always get null?</p>\n"}, {"tags": ["kotlin", "parcelable"], "answers": [{"comments": [{"owner": {"reputation": 1502, "user_id": 1342086, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vriLv.png?s=128&g=1", "display_name": "rj2700", "link": "https://stackoverflow.com/users/1342086/rj2700"}, "edited": false, "score": 0, "creation_date": 1553797137, "post_id": 55390399, "comment_id": 97529300, "body": "Thank you! I knew it was something simple like that. Man!"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1553749764, "last_edit_date": 1553749764, "creation_date": 1553748772, "answer_id": 55390399, "question_id": 55384812, "link": "https://stackoverflow.com/questions/55384812/parcelable-overload-resolution-ambiguity/55390399#55390399", "title": "Parcelable overload resolution ambiguity", "body": "<blockquote>\n  <p>however, the only usage of this constructor is within this class - just doesn't tell me where exactly</p>\n</blockquote>\n\n<p>The problem is with the definition itself, not with any usage. It could never be used, and the error would still be there.</p>\n\n<p>You should be able to fix this by specifying <em>which</em> <code>Parcelable</code> you want to read:</p>\n\n<pre><code>this(parcel.readParcelable&lt;ResponseRes&gt;(ResponseRes::class.java.classLoader))\n</code></pre>\n\n<p>The compiler can't decide if you mean that or </p>\n\n<pre><code>this(parcel.readParcelable&lt;Parcel&gt;(ResponseRes::class.java.classLoader))\n</code></pre>\n\n<p>Even though the second wouldn't be legal because <code>Parcel</code> doesn't implement <code>Parcelable</code>, if you look at the signature</p>\n\n<pre><code>&lt;T extends Parcelable&gt; T readParcelable(ClassLoader loader) \n</code></pre>\n\n<p>you can see only the return type can be used to infer <code>T</code>, not the argument. So the compiler need to pick the constructor overload <em>before</em> trying to infer <code>T</code>.</p>\n"}], "owner": {"reputation": 1502, "user_id": 1342086, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vriLv.png?s=128&g=1", "display_name": "rj2700", "link": "https://stackoverflow.com/users/1342086/rj2700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 55390399, "answer_count": 1, "score": 0, "last_activity_date": 1553749764, "creation_date": 1553713707, "question_id": 55384812, "link": "https://stackoverflow.com/questions/55384812/parcelable-overload-resolution-ambiguity", "title": "Parcelable overload resolution ambiguity", "body": "<p>I am trying to create a POJO (aka data classes in Kotlin) structure of a JSON response in Kotlin. I've implemented the Parcelable interface for each data class in the structure. In all of the data classes, I've auto generated the Parcelable implementation. The issue is the generated second constructor where the IDE is complaining about: </p>\n\n<blockquote>\n  <p>Overload resolution ambiguity</p>\n</blockquote>\n\n<p>It states that it's being confused between these two constructors:</p>\n\n<pre><code>public constructor GeocodeRes(parcel: Parcel)\npublic constructor GeocodeRes(responset: ResponseRes)\n</code></pre>\n\n<p>Which I believe makes sense because ResponseRes is also of type Parcelable (ResponseRes implements Parcelable). So calling the GeocodeRes(parcel) method (within the createFromParcel companion method), it is getting confused. </p>\n\n<p>That was until I removed ResponseRes from implementing the Parcelable class and it's still showing the same error. </p>\n\n<p>Is there any reason to this? Am I setting this up properly? In all of the children data classes, they all implement the Parcelable interface (with dependence with eachother) but aren't running into any issues. </p>\n\n<p>Here's my GeocodeRes class:</p>\n\n<pre><code>import android.os.Parcel\nimport android.os.Parcelable\nimport com.google.gson.annotations.Expose\nimport com.google.gson.annotations.SerializedName\n\ndata class GeocodeRes(\n@SerializedName(\"Response\") @Expose val responset: ResponseRes\n) : Parcelable {\n\n\n\n// this is the problem. the IDE is complaining that the usage is too ambiguous (). however, the only usage of this constructor is within this class - just doesn't tell me where exactly. \nconstructor(parcel: Parcel) : this(parcel.readParcelable(ResponseRes::class.java.classLoader)) {\n}\n\n\n\noverride fun writeToParcel(parcel: Parcel, flags: Int) {\n    parcel.writeParcelable(responset, flags)\n}\n\noverride fun describeContents(): Int {\n    return 0\n}\n\ncompanion object CREATOR : Parcelable.Creator&lt;GeocodeRes&gt; {\n    override fun createFromParcel(parcel: Parcel): GeocodeRes {\n        return GeocodeRes(parcel)\n    }\n\n    override fun newArray(size: Int): Array&lt;GeocodeRes?&gt; {\n        return arrayOfNulls(size)\n    }\n}\n\n\n}\n</code></pre>\n\n<p>Here's my ResponseRes class:</p>\n\n<pre><code>data class ResponseRes(\n    @SerializedName(\"MetaInfo\") @Expose val metaInfo: MetaInfo,\n    @SerializedName(\"View\") @Expose val views: List&lt;View&gt;\n    ): Parcelable \n{\n[...]//parcel methods\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 1648, "user_id": 965799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/be072fc6f2facdf97cf087cbf7b8b867?s=128&d=identicon&r=PG", "display_name": "Ian Medeiros", "link": "https://stackoverflow.com/users/965799/ian-medeiros"}, "edited": false, "score": 0, "creation_date": 1553715511, "post_id": 55384738, "comment_id": 97492309, "body": "Where&#39;s the call to notifyDataSetChanged? <a href=\"https://stackoverflow.com/questions/26635841/recyclerview-change-data-set\" title=\"recyclerview change data set\">stackoverflow.com/questions/26635841/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 10332258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a6f2813882f1a01074c99643150f9d?s=128&d=identicon&r=PG&f=1", "display_name": "Falcon", "link": "https://stackoverflow.com/users/10332258/falcon"}, "is_accepted": false, "score": 0, "last_activity_date": 1553727181, "creation_date": 1553727181, "answer_id": 55387682, "question_id": 55384738, "link": "https://stackoverflow.com/questions/55384738/kotlin-recyclerview-no-adapter-attached-skipping-layout/55387682#55387682", "title": "Kotlin RecyclerView no adapter attached skipping layout", "body": "<p>I solved by changing RecyclerView to BaseAdapter and the parameter to ArrayList. I guess RecyclerView can work same with the Basedapter by changing the parameter <code>private val firebaseVisionlabel: ArrayList&lt;FirebaseVisionLabel&gt; to  private val labeltext : ArrayList&lt;String&gt;</code> I think it is a bug between FirebaseVisionLabel and Kotlin\nModified part for MainActivity :</p>\n\n<pre><code> for (label in labels) {\n                        for(i in 1..1){\n                            val text = label.label\n                            val entityId = label.entityId\n                            val confidence = label.confidence\n                            new_list.add(text)\n\n                        }\n                        list_view.adapter =MainAdapter(this,new_list)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10332258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a6f2813882f1a01074c99643150f9d?s=128&d=identicon&r=PG&f=1", "display_name": "Falcon", "link": "https://stackoverflow.com/users/10332258/falcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553727181, "creation_date": 1553713448, "question_id": 55384738, "link": "https://stackoverflow.com/questions/55384738/kotlin-recyclerview-no-adapter-attached-skipping-layout", "title": "Kotlin RecyclerView no adapter attached skipping layout", "body": "<p>I don't know what the problem is but same code works fine in java\nHere is my adapter class:</p>\n\n<pre><code>class MainAdapter(private val context: Context, private val firebaseVisionlabel: ArrayList&lt;FirebaseVisionLabel&gt;)  : RecyclerView.Adapter&lt;CustomViewHolder&gt;()  {\n\noverride fun getItemCount(): Int {\n    return firebaseVisionlabel.size\n}\n\noverride fun onCreateViewHolder(p0: ViewGroup, p1: Int): CustomViewHolder {\n    val v = LayoutInflater.from(context).inflate(R.layout.list_items,p0,false)\n    return  CustomViewHolder(v)\n}\noverride fun onBindViewHolder(p0: CustomViewHolder, p1: Int) {\n    val firebaseVisionLabel = firebaseVisionlabel?.get(p1)\n    val label = firebaseVisionLabel?.label\n    val confidence =firebaseVisionLabel?.confidence.toString()\n    p0.itemView.textView.text = label\n    p0.itemView.confidence.text = confidence\n}\n</code></pre>\n\n<p>}\nclass CustomViewHolder(v:View) : RecyclerView.ViewHolder(v)</p>\n\n<p>MainActivity: (Global declaration)</p>\n\n<pre><code>var fileUri: Uri? = null\nvar TAG = \"MainActivity\"\nvar firebaseVisionLabels : ArrayList&lt;FirebaseVisionLabel&gt;? = null\n</code></pre>\n\n<p>In onCreate :</p>\n\n<pre><code>rec_view.layoutManager = LinearLayoutManager(this)\nrec_view.setHasFixedSize(true)\n</code></pre>\n\n<p>Button :</p>\n\n<pre><code>detect_button.setOnClickListener{\n            imageRecognition()\n\n        }\n</code></pre>\n\n<p>Function :</p>\n\n<pre><code> private fun imageRecognition() {\n\n        var bitmap = MediaStore.Images.Media.getBitmap(this.contentResolver, fileUri)\n        var  image = FirebaseVisionImage.fromBitmap(bitmap)\n        val labeler = FirebaseVision.getInstance().visionLabelDetector\n        labeler.detectInImage(image)\n                .addOnSuccessListener { labels -&gt;\n                    for (label in labels) {\n                        val text = label.label\n                        val entityId = label.entityId\n                        val confidence = label.confidence\n\n                        Log.d(\"TAG\", \"$text $confidence\") //logcat works\n\n                        firebaseVisionLabels?.add(label)\n                        //Main problem??\n                        rec_view.adapter = firebaseVisionLabels?.let { MainAdapter(this, it) }\n                    }\n                }.addOnFailureListener { e -&gt;\n                    // Task failed with an exception\n                    // ...\n                    detect_button.isEnabled = true\n                    Log.d(TAG,e.toString())\n                }\n\n}\n</code></pre>\n\n<p>Logcat prints the expected outputs but I don't know what the problem is in recyclerview. I don't want to put bunch of camera and gallery intents codes, they works fine. Thanks for helping.</p>\n"}, {"tags": ["android", "kotlin", "splash-screen"], "comments": [{"owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1553710636, "post_id": 55383784, "comment_id": 97489951, "body": "tried &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;?"}, {"owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1553710719, "post_id": 55383784, "comment_id": 97490009, "body": "Why don&#39;t you set drawable in the splash activity layout? Maybe changing styles causes delay."}, {"owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "reply_to_user": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1553710849, "post_id": 55383784, "comment_id": 97490078, "body": "@ShwetaChauhan yes, but this skip the splash"}, {"owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1553711112, "post_id": 55383784, "comment_id": 97490217, "body": "@underoid I was following this tutorial <a href=\"https://android.jlelse.eu/the-complete-android-splash-screen-guide-c7db82bce565\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>   If I set the drawable in the layout, there is a white screen before the splash and no black screen."}, {"owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1553711520, "post_id": 55383784, "comment_id": 97490417, "body": "Try setting the same style for Main and Login activities and make sure their layout covers whole screen. I guess this way while second activity creates you will continue to see splash drawable instead of black screen."}, {"owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1553711714, "post_id": 55383784, "comment_id": 97490522, "body": "@underoid I tried that. But the transition is still black"}, {"owner": {"reputation": 16285, "user_id": 4860513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNzBp.jpg?s=128&g=1", "display_name": "W0rmH0le", "link": "https://stackoverflow.com/users/4860513/w0rmh0le"}, "edited": false, "score": 0, "creation_date": 1553713023, "post_id": 55383784, "comment_id": 97491152, "body": "Did you tried after removing .clearTask().newTask()? Also, if screen is black for a long time, it means your MainActivity is taking too much time to be created.. Try to perform some tests with a very basic layout on MainActivity then add all the code again etc."}], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "is_accepted": true, "score": 0, "last_activity_date": 1553713422, "creation_date": 1553713422, "answer_id": 55384731, "question_id": 55383784, "link": "https://stackoverflow.com/questions/55383784/black-screen-after-splash/55384731#55384731", "title": "Black screen after splash", "body": "<p>I found  a solution after a while: </p>\n\n<pre><code>class SplashActivity : AppCompatActivity() {\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    Timer().schedule(1000) {\n       if (sharedPrefs.isUserLogged) {\n           startActivity(intentFor&lt;MainActivity&gt;().clearTask().newTask())\n       }else{\n           startActivity(intentFor&lt;LoginActivity&gt;().clearTask().newTask())\n       }\n    }\n  }\n}\n</code></pre>\n\n<p>and I set the theme like this:</p>\n\n<pre><code>&lt;style name=\"AppTheme.Launch\"&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@drawable/my_splash&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 55384731, "answer_count": 1, "score": 0, "last_activity_date": 1553713422, "creation_date": 1553709670, "last_edit_date": 1553710037, "question_id": 55383784, "link": "https://stackoverflow.com/questions/55383784/black-screen-after-splash", "title": "Black screen after splash", "body": "<p>When I open the app, the splash is shown and then there is a black screen (for just 1 second), and then goes to the activity.  How can I avoid this black screen?</p>\n\n<p>I set the splash as a theme. </p>\n\n<pre><code>class SplashActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        if (sharedPrefs.isUserLogged) {\n            startActivity(intentFor&lt;MainActivity&gt;().clearTask().newTask())\n        }else{\n            startActivity(intentFor&lt;LoginActivity&gt;().clearTask().newTask())\n        }\n        finish()\n    }\n}\n</code></pre>\n\n<p>I set the splash style on my AndroidManifest.xml </p>\n\n<pre><code>&lt;activity android:name=\".view.splash.SplashActivity\"\n                  android:theme=\"@style/AppTheme.Launch\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n            &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n\n<p>and in my style, I set a drawable for the background.</p>\n\n<pre><code>&lt;style name=\"AppTheme.Launch\"&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@drawable/my_splash&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "android-jetpack", "android-workmanager"], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 246598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tbtkm.png?s=128&g=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/246598/ned"}, "edited": false, "score": 0, "creation_date": 1553863495, "post_id": 55405745, "comment_id": 97554340, "body": "Thanks, this limitation is new for me. So in my case, to handle correct <code>cancel</code> status I should change my <code>while</code> loop to something like this: <code>while (line != null || !isStopped)</code>? My goal is very simple, after I downloaded a <code>zip</code> file I need to <code>unzip</code> it and parse <code>csv</code> files in it. The problem in my case that one file has 4 <b>million</b> rows, and storing them in <code>room</code> take a while."}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "reply_to_user": {"reputation": 1208, "user_id": 246598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tbtkm.png?s=128&g=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/246598/ned"}, "edited": false, "score": 0, "creation_date": 1553863928, "post_id": 55405745, "comment_id": 97554584, "body": "evaluating <code>isStopped</code> is one part. Keep in mind that WorkManager, in this situation, will ignore the return value from your Worker and reschedule it. This means that you need to keep track of where you arrived processing the data, before exiting from your Worker or, next time it is executed, you can end up processing the same data twice and be catch by the same 10 minute limit."}, {"owner": {"reputation": 1208, "user_id": 246598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tbtkm.png?s=128&g=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/246598/ned"}, "edited": false, "score": 0, "creation_date": 1553864651, "post_id": 55405745, "comment_id": 97555027, "body": "Can you please suggest me the best option for storing my <code>progress</code> value (static variable, shared preferences, etc)? <code>Android</code> world is new for me, so I&#39;m not sure how to do it best."}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "reply_to_user": {"reputation": 1208, "user_id": 246598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tbtkm.png?s=128&g=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/246598/ned"}, "edited": false, "score": 0, "creation_date": 1553873166, "post_id": 55405745, "comment_id": 97560561, "body": "Shared Prefs seems a good option in this case: <a href=\"https://developer.android.com/training/data-storage/shared-preferences\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/shared-preferenc&zwnj;&#8203;es</a>  but I don&#39;t know the whole application/use case so... read the docs and check if this solution works for your particular problem."}], "tags": [], "owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "is_accepted": true, "score": 2, "last_activity_date": 1553802347, "creation_date": 1553802347, "answer_id": 55405745, "question_id": 55383105, "link": "https://stackoverflow.com/questions/55383105/workmanager-start-worker-twice/55405745#55405745", "title": "WorkManager start Worker twice", "body": "<p>Worker classes, in WorkManager, have an execution limit of 10 minutes.<br>\nFrom <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/cancel-stop-work.html?hl=es#stopping\" rel=\"nofollow noreferrer\">WorkManager guide on how to handle cancellation</a>:</p>\n\n<blockquote>\n  <p>The system instructed your app to stop your work for some reason. This can happen if you exceed the execution deadline of 10 minutes. The work is scheduled for retry at a later time.</p>\n</blockquote>\n\n<p>In your case, you're not handling the stopping of the work but WorkManager will ignore any result because it marked the job an \"cancelled\" and it will execute it again when possible.</p>\n\n<p>This can result in the double execution that you're experiencing.</p>\n\n<p>It's difficult to suggest an alternative approach without knowing more about the goal you want achieve however, as a general rule, WorkManager is intended for deferrable tasks that need a guaranteed execution.</p>\n\n<p><a href=\"https://developer.android.com/topic/libraries/architecture/workmanager\" rel=\"nofollow noreferrer\">WorkManager documentation</a> has been expanded after the 1.0 release and you can find more information there.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8356038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd834893693d7c52a12be28bd4488b7?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Gupta", "link": "https://stackoverflow.com/users/8356038/amit-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1598616916, "creation_date": 1598616916, "answer_id": 63633618, "question_id": 55383105, "link": "https://stackoverflow.com/questions/55383105/workmanager-start-worker-twice/63633618#63633618", "title": "WorkManager start Worker twice", "body": "<p>You need to first check the downloaded file is present on the path where file is downloaded and then store the bytes in SharedPreferences inside loop which are read previously from the downloaded path and once your Job started again , then first check the downloaded bytes and Next time start from that offset.</p>\n<p>Example Code:</p>\n<pre><code>RandomAccessFile seeker = new RandomAccessFile(fname, &quot;r&quot;);\nseeker.seek(readOffset()); // move to the offset\nseeker.readLine(); // and read the String\n</code></pre>\n<p>If you need to check the same for Database entries , then mark status as &quot;Success&quot; for the rows which are done to skip that for the next time.</p>\n"}], "owner": {"reputation": 1208, "user_id": 246598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tbtkm.png?s=128&g=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/246598/ned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 0, "accepted_answer_id": 55405745, "answer_count": 2, "score": 1, "last_activity_date": 1598616916, "creation_date": 1553707202, "question_id": 55383105, "link": "https://stackoverflow.com/questions/55383105/workmanager-start-worker-twice", "title": "WorkManager start Worker twice", "body": "<p>I have a set of big tasks which I want to execute in background:</p>\n\n<ol>\n<li>Loding data</li>\n<li>Parsing bunch of files and storing them in <code>Room</code></li>\n</ol>\n\n<p>For this reason I created unique chain of <code>Worker</code>'s with the same <code>tag</code>.</p>\n\n<pre><code>class GtfsStaticManager() {\n    private val workerManager = WorkManager.getInstance()\n\n    override fun load() {\n        val constraints = Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build()\n\n        val inputData = GtfsStaticLoadDataWorker.inputData(staticUrl, cacheDir)\n        // 1. Loading data\n        val downloadWorkRequest = OneTimeWorkRequest.Builder(GtfsStaticLoadDataWorker::class.java)\n            .addTag(\"GTFS\")\n            .setConstraints(constraints)\n            .setInputData(inputData)\n            .build()\n\n        // 2. List of Workers to parse and store data to the Room\n        val parseWorkers = GtfsFile.values().map {\n            OneTimeWorkRequest.Builder(GtfsStaticParseFileWorker::class.java)\n                .setInputData(GtfsStaticParseFileWorker.inputData(it.file, cacheDir + File.separator + \"feed\"))\n                .addTag(\"GTFS\")\n                .build()\n        }\n\n        workerManager\n            .beginUniqueWork(\"GTFS\", ExistingWorkPolicy.KEEP, downloadWorkRequest)\n            .then(parseWorkers)\n            .enqueue()\n    }\n}\n</code></pre>\n\n<p>Everything works fine except one thing: one of the files has 4 million records and it takes around 10-15 minutes to finish it. After some time I noticed that it was enqueued again <strong>BUT</strong> the first job was still running, so as result I have 2 huge jobs running in background and of course my data was duplicated.</p>\n\n<p>I followed <a href=\"https://codelabs.developers.google.com/codelabs/android-workmanager-kt/#0\" rel=\"nofollow noreferrer\">codelabs</a> tutorial, did I miss something?</p>\n\n<p>Below is my <code>Worker</code> with parsing logic:</p>\n\n<pre><code>class GtfsStaticParseFileWorker(\n    context: Context,\n    workerParameters: WorkerParameters\n) : Worker(context, workerParameters) {\n    private val fileName: String get() = inputData.getString(FILE_NAME) ?: \"\"\n    private val cacheDir: String get() = inputData.getString(UNZIP_FOLDER) ?: \"\"\n\n    companion object {\n        private const val FILE_NAME = \"FILE_NAME\"\n        private const val UNZIP_FOLDER = \"UNZIP_FOLDER\"\n        fun inputData(fileName: String, cacheDir: String) = Data\n            .Builder()\n            .putString(FILE_NAME, fileName)\n            .putString(UNZIP_FOLDER, cacheDir)\n            .build()\n    }\n\n    override fun doWork(): Result {\n        val db = LvivTransportTrackerDataBase.getUpdateInstance(applicationContext)\n        val agencyRepository = AgencyRepository(db.agencyDao())\n        val calendarRepository = CalendarRepository(db.calendarDao())\n        val calendarDateRepository = CalendarDateRepository(db.calendarDateDao())\n        val routeRepository = RouteRepository(db.routeDao())\n        val stopTimeRepository = StopTimeRepository(db.stopTimeDao())\n        val stopRepository = StopRepository(db.stopDao())\n        val tripRepository = TripRepository(db.tripDao())\n\n        val file = File(cacheDir + File.separator + fileName)\n        val fileType = GtfsFile.from(fileName) ?: return Result.failure()\n\n        when (fileType) {\n            GtfsFile.Agency -&gt; agencyRepository.deleteAll()\n            GtfsFile.CalendarDates -&gt; calendarDateRepository.deleteAll()\n            GtfsFile.Calendar -&gt; calendarRepository.deleteAll()\n            GtfsFile.Routes -&gt; routeRepository.deleteAll()\n            GtfsFile.StopTimes -&gt; stopTimeRepository.deleteAll()\n            GtfsFile.Stops -&gt; stopRepository.deleteAll()\n            GtfsFile.Trips -&gt; tripRepository.deleteAll()\n        }\n\n        FileInputStream(file).use { fileInputStream -&gt;\n            InputStreamReader(fileInputStream).use inputStreamReader@{ inputStreamReader -&gt;\n                val bufferedReader = BufferedReader(inputStreamReader)\n                val headers = bufferedReader.readLine()?.split(',') ?: return@inputStreamReader\n                var line: String? = bufferedReader.readLine()\n\n                while (line != null) {\n                    val mapLine = headers.zip(line.split(',')).toMap()\n\n                    Log.d(\"GtfsStaticParse\", \"$fileType: $line\")\n                    when (fileType) {\n                        GtfsFile.Agency -&gt; agencyRepository.create(AgencyEntity(mapLine))\n                        GtfsFile.CalendarDates -&gt; calendarDateRepository.create(CalendarDateEntity(mapLine))\n                        GtfsFile.Calendar -&gt; calendarRepository.create(CalendarEntity(mapLine))\n                        GtfsFile.Routes -&gt; routeRepository.create(RouteEntity(mapLine))\n                        GtfsFile.StopTimes -&gt; stopTimeRepository.create(StopTimeEntity(mapLine))\n                        GtfsFile.Stops -&gt; stopRepository.create(StopEntity(mapLine))\n                        GtfsFile.Trips -&gt; tripRepository.create(TripEntity(mapLine))\n                    }\n\n                    line = bufferedReader.readLine()\n                }\n            }\n        }\n\n        return Result.success()\n    }\n}\n</code></pre>\n\n<p>P.S. my dependency is <code>implementation \"android.arch.work:work-runtime:1.0.0\"</code></p>\n"}, {"tags": ["android", "kotlin", "realm"], "answers": [{"comments": [{"owner": {"reputation": 8424, "user_id": 2511882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/14b27314457e78023d62224bc508a5c0?s=128&d=identicon&r=PG", "display_name": "user2511882", "link": "https://stackoverflow.com/users/2511882/user2511882"}, "edited": false, "score": 0, "creation_date": 1553705888, "post_id": 55382646, "comment_id": 97487405, "body": "<i>facepalm</i>. That did work. Will accept the answer. Thank you."}], "tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": true, "score": 1, "last_activity_date": 1553705713, "creation_date": 1553705713, "answer_id": 55382646, "question_id": 55382576, "link": "https://stackoverflow.com/questions/55382576/realm-kotlin-save-data/55382646#55382646", "title": "Realm Kotlin save data", "body": "<p>You have to use <code>insert</code> to actually save the new object. Something like:</p>\n\n<pre><code>val userImage = UserImages()\nuserImage.image = byteArray\nrealm.beginTransaction()\nrealm.insert(userImage)\nrealm.commitTransaction()\n</code></pre>\n\n<p>PS: you can use <code>executeTransaction</code> instead of the begin + end pair.\nLike this:</p>\n\n<pre><code>realm.executeTransaction {\n  realm.insert(userImage)\n}\n</code></pre>\n"}], "owner": {"reputation": 8424, "user_id": 2511882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/14b27314457e78023d62224bc508a5c0?s=128&d=identicon&r=PG", "display_name": "user2511882", "link": "https://stackoverflow.com/users/2511882/user2511882"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 55382646, "answer_count": 1, "score": 0, "last_activity_date": 1553705713, "creation_date": 1553705505, "question_id": 55382576, "link": "https://stackoverflow.com/questions/55382576/realm-kotlin-save-data", "title": "Realm Kotlin save data", "body": "<p>I am using <code>Realm</code> with <code>Kotlin</code> for a sample application. However, for whatever reason, the data is not being persisted after calling <code>commitTranscation()</code>. The <code>findAll()</code> method returns <code>size()</code> as 0 all the time.</p>\n\n<p>WRITE</p>\n\n<pre><code>realm.beginTransaction()\n  val userImage = UserImages()\n  userImage.image = byteArray\n  realm.commitTransaction()\n</code></pre>\n\n<p>READ</p>\n\n<pre><code>val userImage = realm.where(UserImages::class.java).findAll().last()\n</code></pre>\n\n<p>The above line always returns <code>size()</code> as 0 and crashes the app.</p>\n\n<p>If it helps, the image property is a <code>byte array</code>.</p>\n\n<p>What is the issue here?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 763, "user_id": 4778343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kDMZU.jpg?s=128&g=1", "display_name": "Stefan Golubovi\u0107", "link": "https://stackoverflow.com/users/4778343/stefan-golubovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1553704905, "post_id": 55382300, "comment_id": 97486855, "body": "What is <code>HEX</code>? Is it some kind of constant? I&#39;m not sure what are you trying to do, but for me &quot;kotlin way&quot; to do this is to create extension function on <code>StringBuffer</code>. Something like <code>fun StringBuffer.appendHexByte(b: Byte)</code>."}, {"owner": {"reputation": 1012, "user_id": 3934789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75fd741413808af5f876df9ba2582bd?s=128&d=identicon&r=PG", "display_name": "Cliabhach", "link": "https://stackoverflow.com/users/3934789/cliabhach"}, "edited": false, "score": 1, "creation_date": 1553708343, "post_id": 55382300, "comment_id": 97488705, "body": "Possibly related to <a href=\"https://stackoverflow.com/q/47925781/3934789\">stackoverflow.com/q/47925781/3934789</a>"}, {"owner": {"reputation": 340, "user_id": 7771545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TmMPXnIpzBc/AAAAAAAAAAI/AAAAAAAAABc/5fjz56hpjBs/photo.jpg?sz=128", "display_name": "Rafael Guimar&#227;es", "link": "https://stackoverflow.com/users/7771545/rafael-guimar%c3%a3es"}, "edited": false, "score": 1, "creation_date": 1553714831, "post_id": 55382300, "comment_id": 97491972, "body": "yes, it is a constant, class is under <a href=\"https://gist.github.com/ozzpy/baaa73697c9170137788dd8951dc0fd3\" rel=\"nofollow noreferrer\">gist.github.com/ozzpy/baaa73697c9170137788dd8951dc0fd3</a>"}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 5, "last_activity_date": 1553705786, "creation_date": 1553705786, "answer_id": 55382671, "question_id": 55382300, "link": "https://stackoverflow.com/questions/55382300/implement-code-after-convert-java-to-kotlin-error/55382671#55382671", "title": "Implement code after convert Java to Kotlin error", "body": "<p>You can use the operators (infix functions) <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/shr.html\" rel=\"noreferrer\"><code>shr</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/and.html\" rel=\"noreferrer\"><code>and</code></a> for the type <code>Int</code> (and <code>Long</code>) in Kotlin. <br/>\nJust change <code>b</code> with <code>b.toInt()</code>:</p>\n\n<pre><code>private fun appendHex(sb: StringBuffer, b: Byte) {\n    sb.append(HEX[b.toInt() shr 4 and 0x0f]).append(HEX[b.toInt() and 0x0f])\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 7771545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TmMPXnIpzBc/AAAAAAAAAAI/AAAAAAAAABc/5fjz56hpjBs/photo.jpg?sz=128", "display_name": "Rafael Guimar&#227;es", "link": "https://stackoverflow.com/users/7771545/rafael-guimar%c3%a3es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 1, "accepted_answer_id": 55382671, "answer_count": 1, "score": 3, "last_activity_date": 1553714560, "creation_date": 1553704586, "last_edit_date": 1553714560, "question_id": 55382300, "link": "https://stackoverflow.com/questions/55382300/implement-code-after-convert-java-to-kotlin-error", "title": "Implement code after convert Java to Kotlin error", "body": "<p>I already try to found if this problem was here on <em>StackoverFlow</em>, before I came here.\nI am try to convert a <em>Java</em> class to <em>Kotlin</em> but <em>Android Studio</em> does not do it very well. </p>\n\n<p>I try to do it manually but not success.</p>\n\n<p>This is the original code in <em>Java</em></p>\n\n<pre><code>    private static void appendHex(StringBuffer sb, byte b) {\n        sb.append(HEX.charAt((b &gt;&gt; 4) &amp; 0x0f)).append(HEX.charAt(b &amp; 0x0f));\n    }\n</code></pre>\n\n<p>here is the code converted by <em>Android Studio</em></p>\n\n<pre><code>    private fun appendHex(sb: StringBuffer, b: Byte) {\n        sb.append(HEX[b shr 4 and 0x0f]).append(HEX[b and 0x0f])\n    }\n\n</code></pre>\n\n<p>the error is after convert, <em>Android Studio</em> does not recognize <code>shr</code> &amp; <code>and</code>, when I press <em>ALT+ENTER</em> it shows a popup to <code>Create extension function Byte.shr</code> and after press enter, it create a this private fun:</p>\n\n<pre><code>private infix fun Byte.shr(i: Int): Any {\n    TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n}\n</code></pre>\n\n<p>the same to <code>and</code> but now on popup it has an <code>Import</code> option that point to <code>import kotlin.experimental.and</code> or create private fun:</p>\n\n<pre><code>private infix fun Any.and(i: Int): Int {\n    TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n}\n</code></pre>\n\n<p>after do this and run my app the class is not working with message <code>An operation is not implemented: not implemented</code></p>\n\n<p>How to implement this to work?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "objectbox"], "comments": [{"owner": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1554122000, "post_id": 55382134, "comment_id": 97623715, "body": "Behind the scenes ObjectBox subscribes to changes for an entity type, not for a specific property. I&#39;m not sure there is a way around this behavior right now. <a href=\"https://docs.objectbox.io/data-observers-and-rx\" rel=\"nofollow noreferrer\">docs.objectbox.io/data-observers-and-rx</a>"}, {"owner": {"reputation": 1215, "user_id": 633940, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cdfa35422d7fc7758106b300b4d7f9b3?s=128&d=identicon&r=PG", "display_name": "Squeazer", "link": "https://stackoverflow.com/users/633940/squeazer"}, "reply_to_user": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1554130347, "post_id": 55382134, "comment_id": 97628751, "body": "Ah bummer. Thanks for the info. You might want to change the docs, it&#39;s a bit ambiguous imo: <code>Combining queries and observers results in a convenient and powerful tool: query observers will automatically deliver fresh results whenever relevant data has changed.</code>. This is what made me think it would be possible, the &quot;relevant data&quot; part."}, {"owner": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1554182843, "post_id": 55382134, "comment_id": 97646123, "body": "Thanks, will update the web docs. The subscribe method documentation is more explicit about it: <a href=\"http://objectbox.io/files/objectbox-java/current/io/objectbox/query/Query.html#subscribe--\" rel=\"nofollow noreferrer\">objectbox.io/files/objectbox-java/current/io/objectbox/query&zwnj;&#8203;/&hellip;</a> But if using RxQuery you never saw that..."}], "owner": {"reputation": 1215, "user_id": 633940, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cdfa35422d7fc7758106b300b4d7f9b3?s=128&d=identicon&r=PG", "display_name": "Squeazer", "link": "https://stackoverflow.com/users/633940/squeazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553783672, "creation_date": 1553704067, "last_edit_date": 1553783672, "question_id": 55382134, "link": "https://stackoverflow.com/questions/55382134/objectbox-get-notified-only-when-query-with-condition-has-changed-items", "title": "ObjectBox: Get notified only when query with condition has changed items", "body": "<p>Let's say I have a box of items, with some properties on them. I then want to receive only certain items, that match some condition, so I create an <code>RxQuery</code> like this:</p>\n\n<pre><code>val query = filesBox.query()\n    .equal(File_.completed, true)\n    .build()\n\nRxQuery.observable(query).subscribe(...)\n</code></pre>\n\n<p>Now this query does indeed return all of the items that match that condition. However, when that table is updated, I always get a \"notification\" / onNext signal, even if the changed items do not match my query.</p>\n\n<p>So if I have some files with <code>completed = true</code> and I add a new file with <code>completed = false</code>, the query will trigger, but return the same items as it did previously.</p>\n\n<p>Is there a way around this? I know I could do <code>distinctUntillChanged()</code> as part of the Rx flow, but I want to hopefully find some way to do it with ObjectBox that's more efficient.</p>\n"}, {"tags": ["android", "multithreading", "kotlin", "android-asynctask"], "answers": [{"comments": [{"owner": {"reputation": 2581, "user_id": 4457676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92b0d9b8a6f5110092bd2e0866341f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/4457676/dmitry"}, "edited": false, "score": 0, "creation_date": 1553701591, "post_id": 55381044, "comment_id": 97484736, "body": "Thanks for the answer. I was looking for the solution without adding dependencies to the project."}, {"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "reply_to_user": {"reputation": 2581, "user_id": 4457676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92b0d9b8a6f5110092bd2e0866341f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/4457676/dmitry"}, "edited": false, "score": 0, "creation_date": 1553701859, "post_id": 55381044, "comment_id": 97484929, "body": "@Dmitry - I think you need to get over that mental model. Writing a much worse version of something that already exists 100x better and better tested is never a sustainable approach."}, {"owner": {"reputation": 2581, "user_id": 4457676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92b0d9b8a6f5110092bd2e0866341f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/4457676/dmitry"}, "edited": false, "score": 0, "creation_date": 1553702436, "post_id": 55381044, "comment_id": 97485318, "body": "Thank you. I&#39;ll think about this."}, {"owner": {"reputation": 193, "user_id": 3146806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2498e0da6ef85879de730f8f9651360d?s=128&d=identicon&r=PG&f=1", "display_name": "Reyhane Farshbaf", "link": "https://stackoverflow.com/users/3146806/reyhane-farshbaf"}, "edited": false, "score": 0, "creation_date": 1609659900, "post_id": 55381044, "comment_id": 115887711, "body": "As same as mentioned in answer, Kotlin coroutines can be defined by the scope which helps to manage when coroutines should run.. One of the most useful scope is ViewModelScope that is defined for each ViewModel in your app. for more info <a href=\"https://developer.android.com/topic/libraries/architecture/coroutines#lifecycle-aware\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/&hellip;</a>"}], "tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": false, "score": 6, "last_activity_date": 1553700867, "creation_date": 1553700867, "answer_id": 55381044, "question_id": 55380856, "link": "https://stackoverflow.com/questions/55380856/execute-hard-task-in-background-thread-return-result-in-main-thread/55381044#55381044", "title": "Execute hard task in Background Thread, return result in Main Thread", "body": "<p>If you're using Kotlin, the correct way to do this is via <a href=\"https://kotlinlang.org/docs/reference/coroutines-overview.html\" rel=\"noreferrer\">Coroutines</a>, which would allow you to write code such as:</p>\n\n<pre><code>// Launch a coroutine that by default goes to the main thread\nGlobalScope.launch(Dispatchers.Main) {\n    // Switch to a background (IO) thread\n    val retval = withContext(Dispatchers.IO) {\n        Log.e(\"TASK\", \"Started background task\")\n        val retval = \"The value from background\"\n        Thread.sleep(5000)\n        Log.e(\"TASK\", \"Finished background task with result: \" + retval)\n        retval\n    }\n    // Now you're back the main thread\n    Log.e(\"TASK\", \"Started task in Main thread with result from Background: \" + retval)\n}\n</code></pre>\n\n<p>Note that Kotlin coroutines operate under <a href=\"https://medium.com/@elizarov/structured-concurrency-722d765aa952\" rel=\"noreferrer\">structured concurrency</a>, so you'd generally want to avoid using <code>GlobalScope</code> and instead scope your coroutine to be tied to your Activity / Fragment lifecycle. This generally needs to be done yourself right now.</p>\n"}, {"tags": [], "owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "is_accepted": false, "score": 4, "last_activity_date": 1580929411, "creation_date": 1580929411, "answer_id": 60082501, "question_id": 55380856, "link": "https://stackoverflow.com/questions/55380856/execute-hard-task-in-background-thread-return-result-in-main-thread/60082501#60082501", "title": "Execute hard task in Background Thread, return result in Main Thread", "body": "<p><a href=\"https://stackoverflow.com/a/55381044/2550406\">ianhanniballake's answer</a> is correct, but is perhaps a bit incomplete, so I figured I'd provide a full generic example.  </p>\n\n<p><em>build.gradle(:app)</em>:</p>\n\n<pre><code>dependencies { // this line is probably already present\n    implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.3\"\n    implementation \"org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.3\"\n}\n</code></pre>\n\n<blockquote>\n  <p>A global CoroutineScope is not bound to any job.<br>\n  GlobalScope is used\n  to launch top-level coroutines which are operating on the whole\n  application lifetime and are not cancelled prematurely. Application\n  code usually should use an application-defined CoroutineScope.<br>\n  Using\n  async or launch on the instance of GlobalScope is <strong>highly discouraged</strong>.\n  <sub>taken from <a href=\"https://heartbeat.fritz.ai/handling-background-tasks-with-kotlin-coroutines-in-android-a674bab7a951\" rel=\"nofollow noreferrer\">here</a></sub></p>\n</blockquote>\n\n<p>So you want to use any class with a lifecycle as <code>CoroutineScope</code>, so that when it dies, it takes the running background tasks with it to the grave. Often, people recommend to use an activity for this. However, there is a <a href=\"https://proandroiddev.com/why-your-class-probably-shouldnt-implement-coroutinescope-eb34f722e510\" rel=\"nofollow noreferrer\">case to be made</a> that you don't want any external class to use your activity as their <code>CoroutineScope</code>, so you can use a protected field instead:</p>\n\n<pre><code>protected val scope = CoroutineScope(Job() + Dispatchers.Main)\n</code></pre>\n\n<p>At the time of writing, I do not know why we have to create a <code>Job()</code> here. What I do know is that the <code>+</code> operator is overloaded to merge these two context into one. For the Dispatcher part, you can choose a reasonable one. The options include  </p>\n\n<ul>\n<li><code>Dispatchers.Main</code> for the UI thread</li>\n<li><code>Dispatchers.Default</code> for a pool of background threads</li>\n<li><code>Dispatchers.IO</code> for blocking operations that are I/O intensive</li>\n<li><code>Dispatchers.Unconfined</code> for when you really know what you are doing. <a href=\"https://heartbeat.fritz.ai/handling-background-tasks-with-kotlin-coroutines-in-android-a674bab7a951\" rel=\"nofollow noreferrer\">This article</a> discourages its use \"normally\".  </li>\n</ul>\n\n<p>Now with all this out of the way, the code becomes surprisingly simple:</p>\n\n<pre><code>import kotlin.coroutines.*\n// ...\nmyButton.setOnClickListener() { v: View? -&gt;\n                myButton.setColorToYellow() // some UI thread work\n                scope.launch(Dispatchers.Default) {\n                    val result = longComputation() // some background work\n\n                    withContext(Dispatchers.Main) {\n                        // some UI thread work for when the background work is done\n                        root.findViewById&lt;TextView&gt;(R.id.text_home).text = \"Result: $result\"\n                    }\n                }\n                myButton.setColorToRed() // more UI thread work. this is done instantly\n       }\n</code></pre>\n\n<p>Of course, this can be done anywhere - I'm just using a button and an <code>onClickListener</code> to give an example with a possible use case.</p>\n"}], "owner": {"reputation": 2581, "user_id": 4457676, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92b0d9b8a6f5110092bd2e0866341f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/4457676/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1580929411, "creation_date": 1553700318, "last_edit_date": 1553701692, "question_id": 55380856, "link": "https://stackoverflow.com/questions/55380856/execute-hard-task-in-background-thread-return-result-in-main-thread", "title": "Execute hard task in Background Thread, return result in Main Thread", "body": "<p>I spent some time to find a developer friendly solution (without adding dependencies to the project) of how to perform some hard task in background thread and after the task is completed return result to main thread. I found \"AsyncTask\" which allows to do that. But to use it you need to write boilerplate code for each task you need to run in Background. I am iOS developer who decided to try Android-related developing. So in Swift you can simply use the next code to make this task:</p>\n\n<pre><code>DispatchQueue.global().async(execute: {\n      //Do some hard task in background\n   DispatchQueue.main.async(execute: {\n      //Return to main\n   })\n})\n</code></pre>\n\n<p>This looks pretty simple. But in Kotlin I didn't find such simple solution and decided to create it.</p>\n\n<p>Here is what I made:</p>\n\n<p>I created Generic class</p>\n\n<pre><code>import android.os.AsyncTask\n\nclass BaseAsyncTask&lt;M&gt;: AsyncTask&lt;()-&gt;M, Int, M&gt;() {\n\n    var completion: ((M)-&gt;Unit)? = null\n\n    override fun doInBackground(vararg params: (() -&gt; M)?): M? {\n        for (p in params) {\n            return p?.invoke()\n        }\n        return  null\n    }\n\n    override fun onPostExecute(result: M) {\n        super.onPostExecute(result)\n\n        completion?.invoke(result)\n    }\n}\n</code></pre>\n\n<p>And Manager</p>\n\n<pre><code>class AsyncManager {\n\n    companion object {\n\n        fun &lt;M&gt;execute(inBackground: ()-&gt;M, inMain: (M)-&gt;Unit): BaseAsyncTask&lt;M&gt; {\n            val task = BaseAsyncTask&lt;M&gt;()\n            task.completion = inMain\n            task.execute(inBackground)\n\n            return task\n        }\n\n        fun &lt;M&gt;execute(inBackground: ()-&gt;M): BaseAsyncTask&lt;M&gt; {\n            val task = BaseAsyncTask&lt;M&gt;()\n            task.execute(inBackground)\n\n            return task\n        }\n    }\n\n}\n</code></pre>\n\n<p>Now I use it like this:</p>\n\n<pre><code>AsyncManager.execute({\n   //Do some hard task in background\n}, {\n  //Return to main\n})\n</code></pre>\n\n<p>Looks developer friendly.</p>\n\n<pre><code>Log.e(\"MAIN\", \"MAIN THREAD SHOULD NOT BE BLOCKED\")\n\nAsyncManager.execute({\n    Log.e(\"TASK\", \"Started background task\")\n    val retval = \"The value from background\"\n    Thread.sleep(5000)\n    Log.e(\"TASK\", \"Finished background task with result: \" + retval)\n    retval\n}, {\n    Log.e(\"TASK\", \"Started task in Main thread with result from Background: \" + it)\n})\n\nLog.e(\"MAIN\", \"MAIN THREAD SHOULD NOT BE BLOCKED - 1\")\n</code></pre>\n\n<p>And the log:</p>\n\n<blockquote>\n  <p>2019-03-27 17:11:00.719 17082-17082/com.test.testapp E/MAIN: MAIN\n  THREAD SHOULD NOT BE BLOCKED</p>\n  \n  <p>2019-03-27 17:11:00.722 17082-17082/com.test.testapp E/MAIN: MAIN\n  THREAD SHOULD NOT BE BLOCKED - 1</p>\n  \n  <p>2019-03-27 17:11:00.722 17082-17124/com.test.testapp E/TASK: Started\n  background task</p>\n  \n  <p>2019-03-27 17:11:05.737 17082-17124/com.test.testapp E/TASK: Finished\n  background task with result: The value from background</p>\n  \n  <p>2019-03-27 17:11:05.738 17082-17082/com.test.testapp E/TASK: Started\n  task in Main thread with result from Background: The value from\n  background</p>\n</blockquote>\n\n<p>So the question is what professional Android developers think about this solution. What problem can I get in case I'll use it. And maybe there is some reason not to use this solution.</p>\n"}, {"tags": ["android", "variables", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "is_accepted": true, "score": 1, "last_activity_date": 1553700296, "last_edit_date": 1553700296, "creation_date": 1553699833, "answer_id": 55380702, "question_id": 55380565, "link": "https://stackoverflow.com/questions/55380565/which-is-more-recommendable-in-kotlin/55380702#55380702", "title": "Which is more recommendable in kotlin?", "body": "<p>When it comes to performance in <code>Kotlin</code> , this is more advisable</p>\n\n<pre><code>    button.setOnClickListener{\n     //my code\n    }\n</code></pre>\n\n<p>Because calling views by their ID directly will generate a local view <strong>cache</strong>.</p>\n\n<p>So the when the view is called the first time kotlin plugin will execute <code>findViewById</code> just a single time, and the next time the view gets called, it will get recovered from the cache . So accesing that view will be faster.</p>\n\n<p>You can refer to this link for more informations <a href=\"https://antonioleiva.com/kotlin-android-extensions/\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p>I hope this will help you, don't forget to accept the answer if it helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 423, "user_id": 10791488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712bc0c3260f1635d40affa7b5bf9f75?s=128&d=identicon&r=PG&f=1", "display_name": "bensadiku", "link": "https://stackoverflow.com/users/10791488/bensadiku"}, "is_accepted": false, "score": 1, "last_activity_date": 1553699897, "creation_date": 1553699897, "answer_id": 55380719, "question_id": 55380565, "link": "https://stackoverflow.com/questions/55380565/which-is-more-recommendable-in-kotlin/55380719#55380719", "title": "Which is more recommendable in kotlin?", "body": "<p>First one is recommended now. The reason is because if you do it the second way, you would be using  kotlinx synthetic which is no longer a recommended practice. <a href=\"https://android-review.googlesource.com/c/platform/frameworks/support/+/882241\" rel=\"nofollow noreferrer\">Source</a></p>\n"}], "owner": {"reputation": 164, "user_id": 6910529, "user_type": "registered", "profile_image": "https://graph.facebook.com/1755762627970379/picture?type=large", "display_name": "Felix A Marrero Pent&#243;n", "link": "https://stackoverflow.com/users/6910529/felix-a-marrero-pent%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55380702, "answer_count": 2, "score": 0, "last_activity_date": 1553701531, "creation_date": 1553699442, "last_edit_date": 1553701531, "question_id": 55380565, "link": "https://stackoverflow.com/questions/55380565/which-is-more-recommendable-in-kotlin", "title": "Which is more recommendable in kotlin?", "body": "<p>if i have this button:  </p>\n\n<pre><code>&lt;Button\n            android:id=\"@+id/button\"      \n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"       \n            android:text=\"@string/button\" /&gt;\n</code></pre>\n\n<p>which is more advisable in kotlin when it comes to calling views?</p>\n\n<p>this:</p>\n\n<pre><code>  val buttonVar: Button = findById(R.id.buuton)\n  buttonVar.setOnClickListener{\n   //my code\n  }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>  button.setOnClickListener{\n   //my code\n  }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2", "android-espresso", "android-viewmodel"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1553718524, "post_id": 55380056, "comment_id": 97493701, "body": "it&#39;s difficult to tell for certain, because that &quot;compile error&quot; had been omitted."}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1553753880, "post_id": 55380056, "comment_id": 97503380, "body": "@MartinZeitler I will add stacktrace, but there is nothing interested there. Just generated funcrtion <code>public Function1&lt;Bundle, ViewModelProvider$Factory&gt; getFactoryProvider()</code> does not compile because of &#39;$&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1553753297, "post_id": 55385705, "comment_id": 97503190, "body": "about <code>generateStubs = true</code> <a href=\"https://stackoverflow.com/questions/47044955/kapt-generatestubs-is-not-used-by-the-kotlin-kapt-plugin\" title=\"kapt generatestubs is not used by the kotlin kapt plugin\">stackoverflow.com/questions/47044955/&hellip;</a>"}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1553718240, "last_edit_date": 1553718240, "creation_date": 1553717593, "answer_id": 55385705, "question_id": 55380056, "link": "https://stackoverflow.com/questions/55380056/inject-provider-of-viewmodelprovider-factory-into-esspresso-test/55385705#55385705", "title": "Inject provider of ViewModelProvider.Factory into esspresso test", "body": "<p>think you need this plugin:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>with these <code>dependencies</code>:</p>\n\n<pre><code>kapt \"com.google.dagger:dagger-compiler:2.21\"\nimplementation \"com.google.dagger:dagger:2.21\"\n</code></pre>\n\n<p>and enable option <code>generateStubs</code>:</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>there are lots of <a href=\"https://stackoverflow.com/questions/tagged/dagger-2+kotlin\">similar questions</a> ...also see the <a href=\"https://google.github.io/dagger/users-guide\" rel=\"nofollow noreferrer\">user's guide</a>.</p>\n\n<p><code>kaptAndroidTest</code> might be useless.</p>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1555871757, "creation_date": 1555871757, "answer_id": 55785609, "question_id": 55380056, "link": "https://stackoverflow.com/questions/55380056/inject-provider-of-viewmodelprovider-factory-into-esspresso-test/55785609#55785609", "title": "Inject provider of ViewModelProvider.Factory into esspresso test", "body": "<p>According to <a href=\"https://github.com/google/dagger/issues/1454\" rel=\"nofollow noreferrer\">https://github.com/google/dagger/issues/1454</a> and <a href=\"https://youtrack.jetbrains.net/issue/KT-27936\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.net/issue/KT-27936</a> there is only a temporary solution under first link</p>\n"}], "owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 55785609, "answer_count": 2, "score": 2, "last_activity_date": 1555871757, "creation_date": 1553697956, "last_edit_date": 1553715376, "question_id": 55380056, "link": "https://stackoverflow.com/questions/55380056/inject-provider-of-viewmodelprovider-factory-into-esspresso-test", "title": "Inject provider of ViewModelProvider.Factory into esspresso test", "body": "<p>I have custom implementation of <code>ViewModel.Factory</code> which is provided by lambda injected by <code>Dagger2</code></p>\n\n<pre><code>interface ViewModelFactoryComponent {\n    val factoryProvider: (Bundle?) -&gt; ViewModelProvider.Factory\n}\n</code></pre>\n\n<p>Dagger implementation looks like below:</p>\n\n<pre><code>@Module\nclass ViewModelModule {\n    @Provides\n    @Singleton\n    fun bindViewModelFactory(creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;(Bundle?) -&gt; ViewModel&gt;&gt;): (Bundle?) -&gt; ViewModelProvider.Factory {\n        return { ViewModelFactory(creators, it) }\n    }\n}\n\n@Singleton\n@Component(modules = [ ApplicationModule::class, ViewModelModule::class])\ninterface ApplicationComponent : ViewModelFactoryComponent\n</code></pre>\n\n<p>In application everything works like a charm but problem appeared when I've tried to configure <code>Espresso</code> test. Here's dagger test component configuration:</p>\n\n<pre><code>@Singleton\n@Component(modules = [ApplicationModule::class, ViewModelModule::class])\ninterface TestComponent : ApplicationComponent\n</code></pre>\n\n<p>Now what is the problem - test component implementation generated by dagger generate function like this</p>\n\n<pre><code> @Override\n  public Function1&lt;Bundle, ViewModelProvider$Factory&gt; getFactoryProvider() {\n    return bindViewModelFactoryProvider.get();\n  }\n</code></pre>\n\n<p>which generate compilation error, instead like in real app:</p>\n\n<pre><code>  @Override\n  public Function1&lt;Bundle, ViewModelProvider.Factory&gt; getFactoryProvider() {\n    return bindViewModelFactoryProvider.get();\n  }\n</code></pre>\n\n<p>First I thought it's a case of <code>ViewModelProvider.Factory</code> visibility, but all <code>build.gradle</code> modification didn't help. I've met with total lack of idea so I will be greatfull for at least some suggestions.</p>\n\n<p><strong>UPDATE</strong>\nI have created empty project to reproduce this error and it suppose to be completly repeatable.</p>\n\n<p>File in <code>main</code> directory:</p>\n\n<pre><code>\n@Singleton\n@Component(modules = [ViewModelModule::class])\ninterface ApplicationComponent : ViewModelFactoryComponent\n\n@Module\nclass ViewModelModule {\n\n    @Provides\n    @Singleton\n    fun bindViewModelFactory(): () -&gt; ViewModelProvider.Factory {\n        return { ViewModelFactory() }\n    }\n}\n\ninterface ViewModelFactoryComponent {\n    val factoryProvider: () -&gt; ViewModelProvider.Factory\n}\n\nclass ViewModelFactory @Inject constructor() : ViewModelProvider.Factory {\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        return modelClass.newInstance()\n    }\n}\n\nclass MainActivity : AppCompatActivity()\n</code></pre>\n\n<p>File in <code>androidTest</code> directory:</p>\n\n<pre><code>@Singleton\n@Component(modules = [ViewModelModule::class])\ninterface TestComponent : ApplicationComponent\n\n@RunWith(AndroidJUnit4::class)\nclass TestCase {\n    @get:Rule\n    val activityTestRule = ActivityTestRule(MainActivity::class.java, false, false)\n\n    @Test\n    fun appLaunchesSuccessfully() {\n        ActivityScenario.launch(MainActivity::class.java)\n    }\n}\n</code></pre>\n\n<p>And this are all dependencies:</p>\n\n<pre><code>    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'com.google.dagger:dagger:2.21'\n    kapt 'com.google.dagger:dagger-compiler:2.21'\n    kaptAndroidTest 'com.google.dagger:dagger-compiler:2.21'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\n    androidTestImplementation 'androidx.test:rules:1.1.1'\n</code></pre>\n\n<p>Application is build without any problem but when I try to launch <code>appLaunchesSuccessfully()</code> test, compile error from reason above, appear.</p>\n\n<p><strong>Edit</strong>\nSo, I figured out that without <code>kaptAndroidTest 'com.google.dagger:dagger-compiler:2.21'</code> test project can be build successfully.<br>\nThe bad new is that without it dagger component class won't generate.</p>\n"}, {"tags": ["firebase", "firebase-realtime-database", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1553700477, "post_id": 55379712, "comment_id": 97484022, "body": "Is <code>FirebaseApp.initializeApp(this)</code> normally commented out in your code?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38646a8ae3922932c9bdaadd0901483?s=128&d=identicon&r=PG&f=1", "display_name": "Panjab Web", "link": "https://stackoverflow.com/users/5281988/panjab-web"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1553841839, "post_id": 55381063, "comment_id": 97543159, "body": "Thanks @Bhargav Rao for help but this does not resolve the issue. There seems to some issue with button itself. When I click on login button even without entering any data in form the app crashes and does not prompt to fill entries first. In java we need to instantiate buttons with findViewByID but in Kotlin it is not required so I have tried even direct code btnLogin.setOnClickListener but the app keeps on crashing."}, {"owner": {"reputation": 35, "user_id": 5281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38646a8ae3922932c9bdaadd0901483?s=128&d=identicon&r=PG&f=1", "display_name": "Panjab Web", "link": "https://stackoverflow.com/users/5281988/panjab-web"}, "edited": false, "score": 0, "creation_date": 1554114976, "post_id": 55381063, "comment_id": 97619846, "body": "considering the amount of days going waste in resolving tiny issues in Kotlin, I am now switching back to java based android development. For me Kotlin hasn&#39;t worked well. I think google should first set a standard code for kotlin programming."}, {"owner": {"reputation": 423, "user_id": 10791488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712bc0c3260f1635d40affa7b5bf9f75?s=128&d=identicon&r=PG&f=1", "display_name": "bensadiku", "link": "https://stackoverflow.com/users/10791488/bensadiku"}, "reply_to_user": {"reputation": 35, "user_id": 5281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38646a8ae3922932c9bdaadd0901483?s=128&d=identicon&r=PG&f=1", "display_name": "Panjab Web", "link": "https://stackoverflow.com/users/5281988/panjab-web"}, "edited": false, "score": 0, "creation_date": 1554139262, "post_id": 55381063, "comment_id": 97633576, "body": "I just want to say this for the record if anyone else browses this post. This issue has NOTHING to do with Kotlin or Java. It&#39;s likely a issue with the OP&#39;s implementation of the Firebase."}], "tags": [], "owner": {"reputation": 423, "user_id": 10791488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712bc0c3260f1635d40affa7b5bf9f75?s=128&d=identicon&r=PG&f=1", "display_name": "bensadiku", "link": "https://stackoverflow.com/users/10791488/bensadiku"}, "is_accepted": false, "score": 0, "last_activity_date": 1553704818, "last_edit_date": 1553704818, "creation_date": 1553700903, "answer_id": 55381063, "question_id": 55379712, "link": "https://stackoverflow.com/questions/55379712/why-my-kotlin-code-for-firebase-authentication-not-working/55381063#55381063", "title": "Why my kotlin code for Firebase authentication not working?", "body": "<p>You need to enable the firebase email authentication in the console. Seems like your code is ok in the first look.\nThis could potentially be cause because you don't have the google-services plugin at the end of app gradle:</p>\n\n<pre><code>dependencies {\n    ....\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5281988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38646a8ae3922932c9bdaadd0901483?s=128&d=identicon&r=PG&f=1", "display_name": "Panjab Web", "link": "https://stackoverflow.com/users/5281988/panjab-web"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 811, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553704818, "creation_date": 1553696982, "last_edit_date": 1553699020, "question_id": 55379712, "link": "https://stackoverflow.com/questions/55379712/why-my-kotlin-code-for-firebase-authentication-not-working", "title": "Why my kotlin code for Firebase authentication not working?", "body": "<p>I am enrolled in online CBT and learning Kotlin for android programming. The video tutes were made in 2017 and I got codes of the apps that were made in the to the tutorial series. I have followed every step till I connect my app with Firebase and even entered sample user data in  Authentication and set Usage Rules to public, but to my surprise same Kotlin code which was shown to be working flawlessly in video tutorials does not work for me.\nThen I tried sample LoginActivity.kt and RegisterActivity.kt codes from github, even those codes does not work. Please look at my codes and help me sort out this issue.\nWhen I click on loginBtn the app crashes and not data is sent to Firebase. Logcat shows following error:</p>\n\n<pre><code>java.lang.IllegalStateException: Default FirebaseApp is not initialized in this process com.paramlowe.mypg2. Make sure to call \nFirebaseApp.initializeApp(Context) first.\n    at com.google.firebase.FirebaseApp.getInstance(SourceFile:218)\n    at com.google.firebase.auth.FirebaseAuth.getInstance(Unknown Source:1)\n    at com.punjabweb.myapp.LoginActivity.loginUser(LoginActivity.kt:50)\n    at \ncom.punjabweb.myapp.LoginActivity.access$loginUser(LoginActivity.kt:25)\n    at \n</code></pre>\n\n<p>com.punjabweb.myapp.LoginActivity$onCreate$2.onClick(LoginActivity.kt:43)</p>\n\n<p>and my kotlin code for LoginActivity.kt is here below:</p>\n\n<pre><code>package com.punjabweb.myapp2\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.text.TextUtils\nimport android.view.View\nimport android.widget.Button\nimport android.widget.Toast\nimport com.google.firebase.auth.FirebaseAuth\nimport kotlinx.android.synthetic.main.activity_login.*\n\nclass LoginActivity : AppCompatActivity() {\n    //Firebase references\n    private var mAuth: FirebaseAuth? = null\n//    FirebaseApp.initializeApp(this)\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_login)\n\n        val loginBtn = findViewById&lt;View&gt;(R.id.btnLogin) as Button\n\n\n\n        loginBtn.setOnClickListener {\n            loginUser()\n        }\n\n    } \n\n\n    private fun loginUser() {\n        mAuth = FirebaseAuth.getInstance()\n        val email = etEmail?.text.toString()\n        val password = etPassword?.text.toString()\n        if (TextUtils.isEmpty(email) &amp;&amp; TextUtils.isEmpty(password)) {\n             Toast.makeText(this, \"Enter all details\", Toast.LENGTH_SHORT).show()\n\n        } else {\n             mAuth!!.signInWithEmailAndPassword(email, password)\n                 .addOnCompleteListener(this) { task -&gt;\n     if (task.isSuccessful) {  \n // Sign in success, update UI with signed-in user's information\n     var firebasUser = FirebaseAuth.getInstance().currentUser!!\n\n                        //      updateUI()\n                    } else {\n                        // If sign in fails, display a message to the user. \n                           Toast.makeText(\n                            this@LoginActivity, \"Authentication failed.\",\n                            Toast.LENGTH_SHORT\n                        ).show()\n                    }\n                }\n        }\n\n        fun updateUI() {\n            val intent = Intent(this@LoginActivity, MainActivity::class.java)\n//            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)\n        startActivity(intent)\n        }\n}\n }\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1553770452, "post_id": 55379361, "comment_id": 97511819, "body": "The only thing you can possibly do is signal the calling coroutine to suspend itself once it gets the control back. For example you can throw a specialized exception. There is no way you&#39;ll get your non-suspending function to resume after <code>yield()</code> (or whatever equivalent you try to substitute for it)."}, {"owner": {"reputation": 1135, "user_id": 6167844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ngLbDdXE968/AAAAAAAAAAI/AAAAAAAAAC8/u-537tKvkvY/photo.jpg?sz=128", "display_name": "Dominic Fischer", "link": "https://stackoverflow.com/users/6167844/dominic-fischer"}, "edited": false, "score": 0, "creation_date": 1554551482, "post_id": 55379361, "comment_id": 97799253, "body": "Do you really need the <code>CharSequence</code> interface? It kinda looks like you want a <code>Flow&lt;Char&gt;</code> or <code>Channel&lt;Char&gt;</code>, unless you need random access."}, {"owner": {"reputation": 1132, "user_id": 483777, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a00ef265aa1b7372fc2f128a196a2378?s=128&d=identicon&r=PG", "display_name": "Sherms", "link": "https://stackoverflow.com/users/483777/sherms"}, "edited": false, "score": 0, "creation_date": 1554647144, "post_id": 55379361, "comment_id": 97820143, "body": "Yes, I&#39;m trying to make interruptible Regexes and Regex takes a CharSequence."}], "owner": {"reputation": 1132, "user_id": 483777, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a00ef265aa1b7372fc2f128a196a2378?s=128&d=identicon&r=PG", "display_name": "Sherms", "link": "https://stackoverflow.com/users/483777/sherms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553696664, "creation_date": 1553695957, "last_edit_date": 1553696664, "question_id": 55379361, "link": "https://stackoverflow.com/questions/55379361/adding-a-yield-to-a-non-suspending-function", "title": "Adding a yield to a non-suspending function", "body": "<p>I'm trying to build an interruptible version of CharSequence. Something along these lines:</p>\n\n<pre><code>  class InterruptableCharSequence(private val delegate: CharSequence) : CharSequence {\n\n  override fun get(index: Int): Char = runBlocking {\n\n      yield() // Suspend here, in case we have cancelled\n      delegate[index]\n  }\n\n  override fun subSequence(start: Int, end: Int): CharSequence {\n      return delegate.subSequence(start, end)\n  }\n\n  override fun toString(): String {\n      return delegate.toString()\n  }\n}\n</code></pre>\n\n<p>Since this is implementing an existing interface I can't make <code>get</code> a suspending function, but I'd like to call it from a co-routine (several layers up) and be able to interrupt/cancel it. How would I go about making this possible? Is there any way to do so without blocking like this or creating a new coroutine for each Char?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 3, "creation_date": 1553695085, "post_id": 55378982, "comment_id": 97480177, "body": "The activity doesn&#39;t implement TaskRowListener"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11266376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iHGN1dgclic/AAAAAAAAAAI/AAAAAAAALPQ/c9rhvcjllUA/photo.jpg?sz=128", "display_name": "Sebi", "link": "https://stackoverflow.com/users/11266376/sebi"}, "edited": false, "score": 0, "creation_date": 1553768209, "post_id": 55379257, "comment_id": 97510449, "body": "Thank you so much! Modifying the Class was the solution. Now it works. I will try to handle the Adapter with the Fragment only, but at the moment I&#180;m just happy that it doesn&#180;t crash anymore."}, {"owner": {"reputation": 22254, "user_id": 4758255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBvf3.jpg?s=128&g=1", "display_name": "\u05d9\u05e9\u05d5 \u05d0\u05d5\u05d4\u05d1 \u05d0\u05d5\u05ea\u05da", "link": "https://stackoverflow.com/users/4758255/%d7%99%d7%a9%d7%95-%d7%90%d7%95%d7%94%d7%91-%d7%90%d7%95%d7%aa%d7%9a"}, "reply_to_user": {"reputation": 13, "user_id": 11266376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iHGN1dgclic/AAAAAAAAAAI/AAAAAAAALPQ/c9rhvcjllUA/photo.jpg?sz=128", "display_name": "Sebi", "link": "https://stackoverflow.com/users/11266376/sebi"}, "edited": false, "score": 0, "creation_date": 1553770207, "post_id": 55379257, "comment_id": 97511644, "body": "@Sebi: Great that you solve the problem! You can close this question by marking this answer as an accepted answer. ;)"}], "tags": [], "owner": {"reputation": 22254, "user_id": 4758255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBvf3.jpg?s=128&g=1", "display_name": "\u05d9\u05e9\u05d5 \u05d0\u05d5\u05d4\u05d1 \u05d0\u05d5\u05ea\u05da", "link": "https://stackoverflow.com/users/4758255/%d7%99%d7%a9%d7%95-%d7%90%d7%95%d7%94%d7%91-%d7%90%d7%95%d7%aa%d7%9a"}, "is_accepted": true, "score": 0, "last_activity_date": 1553695854, "last_edit_date": 1553695854, "creation_date": 1553695662, "answer_id": 55379257, "question_id": 55378982, "link": "https://stackoverflow.com/questions/55378982/android-activity-to-fragment-replacing-this-with-getactivity-throws-error/55379257#55379257", "title": "Android Activity to Fragment: Replacing &quot;this&quot; with getActivity() throws error: ClassCastException", "body": "<p>It's because you're expecting <code>TaskRowListener</code> inside your <code>TaskAdapter</code> class:</p>\n\n<pre><code>class TaskAdapter(context: Context, taskList: MutableList&lt;Task&gt;) : BaseAdapter() {\n\n    ..\n     // here you're expecting a TaskRowListener\n     var _rowListener: TaskRowListener = context as TaskRowListener\n\n.........\n}\n</code></pre>\n\n<p>but you're activity isn't a <code>TaskRowListener</code>. So, you need to modify your activity to implement <code>TaskRowListener</code> with something like this:</p>\n\n<pre><code>class ToDoActivity : FragmentActivity(), TaskRowListener {\n  ...\n}\n</code></pre>\n\n<p>Although I think that you should not use activity at all to keep the Adapter handled only by the <code>TodoFragment</code> and keep using:</p>\n\n<pre><code>_adapter = TaskAdapter(this, _taskList!!)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11266376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iHGN1dgclic/AAAAAAAAAAI/AAAAAAAALPQ/c9rhvcjllUA/photo.jpg?sz=128", "display_name": "Sebi", "link": "https://stackoverflow.com/users/11266376/sebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 55379257, "answer_count": 1, "score": -1, "last_activity_date": 1553721689, "creation_date": 1553694948, "last_edit_date": 1553721689, "question_id": 55378982, "link": "https://stackoverflow.com/questions/55378982/android-activity-to-fragment-replacing-this-with-getactivity-throws-error", "title": "Android Activity to Fragment: Replacing &quot;this&quot; with getActivity() throws error: ClassCastException", "body": "<p>I tried to make a Todo-App following a tutorial. The app worked. But now I want to expand the tutorial and convert the MainActivity to a fragment, that is called in the MainActivity(ToDoActivity). I read that a fragment has no context and so the context of the MainActivity should be used. So I changed <code>this</code> to <code>getActivity()</code> in the Fragment. </p>\n\n<p>The context is handed over to the TaskAdapter class which is a custom BaseAdapter(). The TaskAdapter creates a TaskRowListener interface out of the context. This worked with activity, but converted to a fragment it throws an error \"ToDoActivity\" cannot be cast to \"TaskAdapter$TaskRowListener\"</p>\n\n<p>The error occurs in the fragment here:<br>\n<code>_adapter = TaskAdapter(getActivity(), _taskList!!)</code></p>\n\n<p>and here in the adapter:\n<code>var _rowListener: TaskRowListener = context as TaskRowListener</code></p>\n\n<p>If I print <code>this</code> in the original code the result is:\n<code>com.Info_DH.sgru_rchr.UniversityGoesAgile.ToDoActivity@cbaaca4</code></p>\n\n<p>If I print <code>getActivity()</code> in the converted fragment the result is:                         <code>com.Info_DH.sgru_rchr.UniversityGoesAgile.ToDoActivity@8aa307d</code></p>\n\n<p>So I am even more confused why it does not work.\nI would really appreciate it if someone knew what the problem could be.</p>\n\n<p>Main (ToDoActivity):</p>\n\n<pre><code>class ToDoActivity : FragmentActivity() {\n\n\n\n     override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main_test)\n\n\n\n        if (savedInstanceState == null) {\n            supportFragmentManager\n                .beginTransaction()\n                .add(R.id.canvas, Todofragment.newInstance(), \"Test\")\n                .commit()\n        }\n\n\n</code></pre>\n\n<p>Fragment: </p>\n\n<pre><code>class Todofragment : Fragment(), TaskRowListener {\n\n    var _taskList: MutableList&lt;Task&gt;? = null\n\n    lateinit var _adapter: TaskAdapter\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n        super.onCreate(savedInstanceState)\n\n        _taskList = mutableListOf&lt;Task&gt;()\n\n        _adapter = TaskAdapter(getActivity(), _taskList!!)\n\n..............\n\n}\n\n</code></pre>\n\n<p>TaskAdapter:</p>\n\n<pre><code>class TaskAdapter(context: Context, taskList: MutableList&lt;Task&gt;) : BaseAdapter() {\n\n    private val _inflater: LayoutInflater = LayoutInflater.from(context)\n    private var _taskList = taskList\n     var _rowListener: TaskRowListener = context as TaskRowListener\n\n.........\n}\n\n</code></pre>\n\n<p>TaskRowListener:</p>\n\n<pre><code>interface TaskRowListener {\n\n    fun onTaskChange(objectId: String, isDone: Boolean)\n    fun onTaskDelete(objectId: String)\n    fun onTaskEdit(objectId: String, taskDesc:String)\n\n}\n\n</code></pre>\n\n<p>Log:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.Info_DH.sgru_rchr.UniversityGoesAgile, PID: 14117\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Info_DH.sgru_rchr.UniversityGoesAgile/com.Info_DH.sgru_rchr.UniversityGoesAgile.ToDoActivity}: java.lang.ClassCastException: com.Info_DH.sgru_rchr.UniversityGoesAgile.ToDoActivity cannot be cast to com.Info_DH.sgru_rchr.UniversityGoesAgile.TaskAdapter$TaskRowListener\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707)\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460)\n        at android.os.Handler.dispatchMessage(Handler.java:102)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n     Caused by: java.lang.ClassCastException: com.Info_DH.sgru_rchr.UniversityGoesAgile.ToDoActivity cannot be cast to com.Info_DH.sgru_rchr.UniversityGoesAgile.TaskAdapter$TaskRowListener\n        at com.Info_DH.sgru_rchr.UniversityGoesAgile.TaskAdapter.&lt;init&gt;(TaskAdapter.kt:19)\n        at com.Info_DH.sgru_rchr.UniversityGoesAgile.Todofragment.onCreate(Todofragment.kt:89)\n        at android.support.v4.app.Fragment.performCreate(Fragment.java:2339)\n        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1377)\n        at android.support.v4.app.FragmentTransition.addToFirstInLastOut(FragmentTransition.java:1109)\n        at android.support.v4.app.FragmentTransition.calculateFragments(FragmentTransition.java:996)\n        at android.support.v4.app.FragmentTransition.startTransitions(FragmentTransition.java:99)\n        at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2364)\n        at android.support.v4.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2322)\n        at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2229)\n        at android.support.v4.app.FragmentManagerImpl.dispatchStateChange(FragmentManager.java:3221)\n        at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:3171)\n        at android.support.v4.app.FragmentController.dispatchActivityCreated(FragmentController.java:192)\n        at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:560)\n        at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1248)\n        at android.app.Activity.performStart(Activity.java:6679)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2609)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707)\u00a0\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n        at android.os.Looper.loop(Looper.java:154)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6077)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\u00a0\n\n</code></pre>\n"}, {"tags": ["gradle", "groovy", "kotlin", "gradle-plugin"], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 7418420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urkNW.jpg?s=128&g=1", "display_name": "ilovemilk", "link": "https://stackoverflow.com/users/7418420/ilovemilk"}, "edited": false, "score": 0, "creation_date": 1553698092, "post_id": 55379211, "comment_id": 97482279, "body": "Thanks that&#39;s valid solution if I develop both plugins! But what if the second plugin is a third-party plugin which gets the configuration via the extension? Isn&#39;t there a way to order plugin execution?"}], "tags": [], "owner": {"reputation": 14501, "user_id": 2003986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/823f5a30f7e956de05cc4a5b5b30ec0e?s=128&d=identicon&r=PG", "display_name": "ToYonos", "link": "https://stackoverflow.com/users/2003986/toyonos"}, "is_accepted": false, "score": 0, "last_activity_date": 1553695549, "creation_date": 1553695549, "answer_id": 55379211, "question_id": 55378779, "link": "https://stackoverflow.com/questions/55378779/use-gradle-plugin-to-configure-another-gradle-plugin/55379211#55379211", "title": "Use gradle plugin to configure another gradle plugin", "body": "<p>Move the definition of <code>version</code> from the <code>containerPlugin</code> block to the plugin definition :</p>\n\n<pre><code>class ContainerPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        def extension = project.extensions.create('containerPlugin', ContainerPluginExtension)\n        project.afterEvaluate {\n            extension.version = project.version\n        }\n        project.task('build') {\n            doLast {\n                println \"${extension.version}\"\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Result :</p>\n\n<pre><code>$ gradle build\n\n&gt; Task :build\n1.1.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 7418420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urkNW.jpg?s=128&g=1", "display_name": "ilovemilk", "link": "https://stackoverflow.com/users/7418420/ilovemilk"}, "is_accepted": true, "score": 0, "last_activity_date": 1553869765, "creation_date": 1553869765, "answer_id": 55419619, "question_id": 55378779, "link": "https://stackoverflow.com/questions/55378779/use-gradle-plugin-to-configure-another-gradle-plugin/55419619#55419619", "title": "Use gradle plugin to configure another gradle plugin", "body": "<p>The solution to the problem above looks like this:</p>\n\n<pre><code>class VersionPluginExtension {\n    String major\n    String minor\n    String patch\n    private String version\n\n    String getVersion() {\n        if (!version)\n            return \"${major}.${minor}.${patch}\"\n        return version\n    }\n}\n\nclass VersionPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        def extension = project.extensions.create('versionPlugin', VersionPluginExtension)\n\n        project.task('showVersion') {\n            doLast {\n                println \"${extension.version}\"\n            }\n        }\n    }\n}\n\nclass ContainerPluginExtension {\n    String version\n}\n\nclass ContainerPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        def extension = project.extensions.create('containerPlugin', ContainerPluginExtension)\n\n        project.task('build') {\n            doLast {\n                println \"${extension.version}\"\n            }\n        }\n    }\n}\n\napply plugin: VersionPlugin\napply plugin: ContainerPlugin\n\nversionPlugin {\n    major = '1'\n    minor = '1'\n    patch = '1'\n}\n\nproject.version = versionPlugin.version\n\ncontainerPlugin {\n    version = project.version\n}\n\n</code></pre>\n\n<p>Result:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; Configure project :\n1.1.1\n\n&gt; Task :showVersion\n1.1.1\n\n&gt; Task :build\n1.1.1\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 7418420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urkNW.jpg?s=128&g=1", "display_name": "ilovemilk", "link": "https://stackoverflow.com/users/7418420/ilovemilk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 55419619, "answer_count": 2, "score": 0, "last_activity_date": 1553869765, "creation_date": 1553694399, "question_id": 55378779, "link": "https://stackoverflow.com/questions/55378779/use-gradle-plugin-to-configure-another-gradle-plugin", "title": "Use gradle plugin to configure another gradle plugin", "body": "<p>I want to implement a gradle plugin which changes the <code>project.version</code> according to the configuration of the plugin and then use the changed <code>project.version</code> to configure another gradle plugin e.g. for building containers. The problem is now that both configurations are evaluated at the same time and therefore the changes to <code>project.version</code> are not applied at the time the second plugin is configured.</p>\n\n<p>I search the Gradle documentation but found nothing regarding my problem.</p>\n\n<p>build.gradle</p>\n\n<pre><code>class VersionPluginExtension {\n    String major\n    String minor\n    String patch\n}\n\nclass VersionPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        def extension = project.extensions.create('versionPlugin', VersionPluginExtension)\n        project.afterEvaluate {\n            project.version = \"${extension.major}.${extension.minor}.${extension.patch}\"\n        }\n        project.task('showVersion') {\n            doLast {\n                println \"${project.version}\"\n            }\n        }\n    }\n}\n\nclass ContainerPluginExtension {\n    String version\n}\n\nclass ContainerPlugin implements Plugin&lt;Project&gt; {\n    void apply(Project project) {\n        def extension = project.extensions.create('containerPlugin', ContainerPluginExtension)\n        project.task('build') {\n            doLast {\n                println \"${extension.version}\"\n            }\n        }\n    }\n}\n\napply plugin: VersionPlugin\napply plugin: ContainerPlugin\n\nversionPlugin {\n    major = '1'\n    minor = '1'\n    patch = '1'\n}\n\ncontainerPlugin {\n    version = project.version\n}\n\n</code></pre>\n\n<p>I expect that the task build returns <code>1.1.1</code> and not <code>unspecified</code> but I think it's not possible in this way. I hope someone can point me in the right direction.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "date", "kotlin", "calendar"], "comments": [{"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 2, "creation_date": 1553694446, "post_id": 55378580, "comment_id": 97479701, "body": "The code you provided works fine on my side. Maybe error appears somewhere else in your code? Please check logs and look for the line number of the error"}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "edited": false, "score": 1, "creation_date": 1553694477, "post_id": 55378580, "comment_id": 97479732, "body": "cal.time = date has not need here, otherwise what line gives you this error ?"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695175, "post_id": 55378580, "comment_id": 97480240, "body": "The error happens on val datePlusOneMonth: Date = cal.time"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695282, "post_id": 55378580, "comment_id": 97480330, "body": "Sergey, are you sure that it runs ok ? Because the exception does not trigger any bug in the application. It is only when I put a breakpoint and then go to Evaluate Expression window that I see the error when calling cal.time"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695354, "post_id": 55378580, "comment_id": 97480368, "body": "Amine, you say right, cal.time = Date is not needed. Thanks. (Error still happening anyway)"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1553695459, "post_id": 55378580, "comment_id": 97480441, "body": "Yes, the code runs fine on my side"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695552, "post_id": 55378580, "comment_id": 97480512, "body": "So you have a value in datePlusOneMonth ?"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695556, "post_id": 55378580, "comment_id": 97480515, "body": "<a href=\"https://imgur.com/a/v9cgM2O\" rel=\"nofollow noreferrer\">imgur.com/a/v9cgM2O</a>"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1553695830, "post_id": 55378580, "comment_id": 97480707, "body": "Yes I have. You can set log after line <code>val datePlusOneMonth: Date = cal.time</code> and check it"}, {"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553695836, "post_id": 55378580, "comment_id": 97480712, "body": "One thing I find bizarre is that when adding a try/catch block, then the code does not go in the catch block..."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1553695870, "post_id": 55378580, "comment_id": 97480739, "body": "Because it is not throwing the exception)"}], "answers": [{"tags": [], "owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "is_accepted": true, "score": 5, "last_activity_date": 1553764551, "last_edit_date": 1553764551, "creation_date": 1553696334, "answer_id": 55379481, "question_id": 55378580, "link": "https://stackoverflow.com/questions/55378580/how-to-convert-calendar-to-date-in-kotlin/55379481#55379481", "title": "How to convert Calendar to Date in Kotlin?", "body": "<p>Thank you Sergey... The code runs ok. But I have been disappointed because I added a useless line of code in order to debug and I had put a breakpoint on it :</p>\n\n<pre><code>val datePlusOneMonth: Date = cal.time\nval ok = false\n</code></pre>\n\n<p>And I had put the breakpoint on the \"val ok = false\" and the debugger never stopped on \"val ok = false\" because \"ok\" was never used.</p>\n\n<p>Then to have the debugger stop on \"val ok = false\" I had to do the following :</p>\n\n<pre><code>val datePlusOneMonth: Date = cal.time\nval ok = false\nval ok2 = ok\n</code></pre>\n\n<p>And then I could add the breakpoing on \"val ok = false\" and yes the code runs well.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1553761968, "post_id": 55390872, "comment_id": 97506747, "body": "Ok thanks for the answer, but we figured out that my code runs correctly. Anyway I&#39;ll consider this next time."}], "tags": [], "owner": {"reputation": 41, "user_id": 8779924, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yO7lu_5jh_Y/AAAAAAAAAAI/AAAAAAAAACE/a1XxjoWCrhk/photo.jpg?sz=128", "display_name": "ib_ganz", "link": "https://stackoverflow.com/users/8779924/ib-ganz"}, "is_accepted": false, "score": 1, "last_activity_date": 1553751799, "creation_date": 1553751799, "answer_id": 55390872, "question_id": 55378580, "link": "https://stackoverflow.com/questions/55378580/how-to-convert-calendar-to-date-in-kotlin/55390872#55390872", "title": "How to convert Calendar to Date in Kotlin?", "body": "<p>try this code</p>\n\n<pre><code>val datePlusOneMonth = Calendar.getInstance().run {\n    add(Calendar.MONTH, 1)\n    time\n}\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9425, "favorite_count": 1, "accepted_answer_id": 55379481, "answer_count": 2, "score": 1, "last_activity_date": 1553764551, "creation_date": 1553693820, "question_id": 55378580, "link": "https://stackoverflow.com/questions/55378580/how-to-convert-calendar-to-date-in-kotlin", "title": "How to convert Calendar to Date in Kotlin?", "body": "<p>I am trying to add one month to a date with Calendar.getInstance() but I can't figure out why there is error \"java.lang.ClassCastException : java.util.Date cannot be cast to java.lang.Number\" when trying to get the Calendar to a Date object.</p>\n\n<p>Here's the source code that I am using :</p>\n\n<pre><code>    val date = Date()\n    val cal = Calendar.getInstance()\n    cal.time = date\n    cal.add(Calendar.MONTH, 1)\n    val datePlusOneMonth: Date = cal.time\n</code></pre>\n"}, {"tags": ["android", "kotlin", "applocker"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9276871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VL5i.jpg?s=128&g=1", "display_name": "Faizan Ali", "link": "https://stackoverflow.com/users/9276871/faizan-ali"}, "edited": false, "score": 0, "creation_date": 1553750978, "post_id": 55378889, "comment_id": 97502504, "body": "Can you explain this piece of code, SortedMap&lt;Long, UsageStats&gt; mySortedMap = new TreeMap&lt;&gt;(); .  An error pops up when i convert this to kotlin."}, {"owner": {"reputation": 1077, "user_id": 1797127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/903ecfd7b72303878f61945dbb4b3ec1?s=128&d=identicon&r=PG", "display_name": "Hugo Allexis Cardona", "link": "https://stackoverflow.com/users/1797127/hugo-allexis-cardona"}, "reply_to_user": {"reputation": 1, "user_id": 9276871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VL5i.jpg?s=128&g=1", "display_name": "Faizan Ali", "link": "https://stackoverflow.com/users/9276871/faizan-ali"}, "edited": false, "score": 0, "creation_date": 1553817850, "post_id": 55378889, "comment_id": 97537576, "body": "The TreeMap is for easier keeping entries order and accessing the latest one. What exact error is popping up? I just added the Kotlin version for your reference... You can also make that function a static one inside a PackageUtil class, for example."}], "tags": [], "owner": {"reputation": 1077, "user_id": 1797127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/903ecfd7b72303878f61945dbb4b3ec1?s=128&d=identicon&r=PG", "display_name": "Hugo Allexis Cardona", "link": "https://stackoverflow.com/users/1797127/hugo-allexis-cardona"}, "is_accepted": false, "score": 0, "last_activity_date": 1553817804, "last_edit_date": 1553817804, "creation_date": 1553694685, "answer_id": 55378889, "question_id": 55378514, "link": "https://stackoverflow.com/questions/55378514/how-to-use-service-to-get-the-information-of-which-app-is-opened/55378889#55378889", "title": "How to use service to get the information of which app is opened?", "body": "<p>Like this:</p>\n\n<p><strong>Java version</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private String retriveAppInForeground() {\n        String currentApp = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1) {\n            UsageStatsManager usm = (UsageStatsManager) this.getSystemService(Context.USAGE_STATS_SERVICE);\n            long time = System.currentTimeMillis();\n            List&lt;UsageStats&gt; appList = null;\n            if (usm != null) {\n                appList = usm.queryUsageStats(UsageStatsManager.INTERVAL_DAILY, time - 1000 * 1000, time);\n            }\n            if (appList != null &amp;&amp; !appList.isEmpty()) {\n                SortedMap&lt;Long, UsageStats&gt; sortedMap = new TreeMap&lt;&gt;();\n                for (UsageStats usageStats : appList) {\n                    sortedMap.put(usageStats.getLastTimeUsed(), usageStats);\n                }\n                if (!sortedMap.isEmpty()) {\n                    currentApp = sortedMap.get(sortedMap.lastKey()).getPackageName();\n                }\n            }\n        } else {\n            ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\n            if (am != null) {\n                currentApp =(am.getRunningTasks(1).get(0)).topActivity.getPackageName();\n            }\n        }\n        Log.e(\"ActivityTAG\", \"Application in foreground: \" + currentApp);\n        return currentApp;\n    }\n\n</code></pre>\n\n<p><strong>Kotlin version</strong></p>\n\n<pre><code>    private fun retriveAppInForeground(): String? {\n        var currentApp: String? = null\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1) {\n            val usm = this.getSystemService(Context.USAGE_STATS_SERVICE) as UsageStatsManager\n            val time = System.currentTimeMillis()\n            val appList: List&lt;UsageStats&gt;?\n            appList = usm.queryUsageStats(UsageStatsManager.INTERVAL_DAILY, time - 1000 * 1000, time)\n            if (appList != null &amp;&amp; appList.isNotEmpty()) {\n                val sortedMap = TreeMap&lt;Long, UsageStats&gt;()\n                for (usageStats in appList) {\n                    sortedMap.put(usageStats.lastTimeUsed, usageStats)\n                }\n                currentApp = sortedMap.takeIf { it.isNotEmpty() }?.lastEntry()?.value?.packageName\n            }\n        } else {\n            val am = getSystemService(Context.ACTIVITY_SERVICE) as ActivityManager\n            @Suppress(\"DEPRECATION\") //The deprecated method is used for devices running an API lower than LOLLIPOP\n            currentApp = am.getRunningTasks(1)[0].topActivity.packageName\n        }\n        Log.e(\"ActivityTAG\", \"Application in foreground: \" + currentApp)\n        return currentApp\n    }\n\n</code></pre>\n\n<p>Make sure your app has the proper permissions for accessing the usage stats:</p>\n\n<p><code>&lt;uses-permission android:name=\"android.permission.PACKAGE_USAGE_STATS\"/&gt;</code></p>\n\n<p>And that the user grants the proper permission, you can take the user to the proper settings screen to enable the permission (when setting up your app):</p>\n\n<p><code>startActivity(new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS));</code></p>\n\n<p>And one more thing, always make sure you search for any <a href=\"https://stackoverflow.com/questions/28066231/how-to-gettopactivity-name-or-get-currently-running-application-package-name-i/38829083\">similar question</a> before posting a new one.</p>\n"}], "owner": {"reputation": 1, "user_id": 9276871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VL5i.jpg?s=128&g=1", "display_name": "Faizan Ali", "link": "https://stackoverflow.com/users/9276871/faizan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553817804, "creation_date": 1553693646, "question_id": 55378514, "link": "https://stackoverflow.com/questions/55378514/how-to-use-service-to-get-the-information-of-which-app-is-opened", "title": "How to use service to get the information of which app is opened?", "body": "<p>I am a newbie to android. I am developing an app locker that uses face id instead of normal pin/pattern using kotlin.\nI have got the list of installed apps in the system. But, how to get the information about  which app is opened using service Please help.</p>\n"}, {"tags": ["android", "kotlin", "sharedpreferences"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 1, "creation_date": 1553748550, "post_id": 55376534, "comment_id": 97501838, "body": "Ok,I&#39;ll try that and I&#39;ve used the following lines of code for logout functionality but it is not working <code>val next = Intent(this@LogoutActivity, LoginActivity::class.java)                 startActivity(next)                 next.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);                 this.finish()</code>"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553750557, "post_id": 55376534, "comment_id": 97502392, "body": "use this code snip <code>next.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)</code> before calling <code>startActivity(next) </code>"}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553753842, "post_id": 55376534, "comment_id": 97503366, "body": "I&#39;ve used that and I&#39;m able to get the value which is stored in sharedpreferences as suggested by you but even after that the toolbar color is not changing"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553753957, "post_id": 55376534, "comment_id": 97503410, "body": "check that whether change background code snip is running or not"}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553754242, "post_id": 55376534, "comment_id": 97503514, "body": "the way that I&#39;m using is correct or not for logout as well as for condition??"}, {"owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553754551, "post_id": 55376534, "comment_id": 97503628, "body": "just use log or debugger to check whether your condition code snip is invoke or not or add your login activity full code here so i can check where actual problem is"}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553766524, "post_id": 55376534, "comment_id": 97509368, "body": "Following is code that I&#39;ve used to change the color. I&#39;ve used log as well and both are not working.I&#39;ll add <code>onCreate</code> method here <code>override fun onCreate(savedInstanceState: Bundle?){ super.onCreate(savedInstanceState) setContentView(R.layout.activity_launcher) setSupportActionBar(toolbar) val envSwitchInfo=getSharedPreferences() Log.d(&quot;Selected environment&quot;,&quot;&quot;+envSwitchInfo)         if(envSwitchInfo===&quot;Production&quot;) {  toolbar.setBackgroundDrawable( ColorDrawable(Color.parseColor(&quot;#FF0000&quot;)))             Log.d(&quot;Value is&quot;,&quot;&quot;+envSwitchInfo)         } </code>"}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1553768489, "post_id": 55376534, "comment_id": 97510613, "body": "It is working fine .Now I&#39;m able to change the toolbar color :) <code>if(envSwitchInfo===&quot;Production&quot;)</code> instead of this, I&#39;ve used <code>if(envSwitchInfo.equals(&quot;Production&quot;))</code>"}], "tags": [], "owner": {"reputation": 537, "user_id": 7255999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a8be2d26e0985bc2a5102e6a404f50?s=128&d=identicon&r=PG", "display_name": "Muhammad Muzammil Sharif", "link": "https://stackoverflow.com/users/7255999/muhammad-muzammil-sharif"}, "is_accepted": true, "score": 1, "last_activity_date": 1553838675, "last_edit_date": 1553838675, "creation_date": 1553687538, "answer_id": 55376534, "question_id": 55375426, "link": "https://stackoverflow.com/questions/55375426/how-to-change-toolbar-color-according-to-the-radio-button-selected-after-the-sec/55376534#55376534", "title": "How to change toolbar color according to the radio button selected after the second login using android kotlin", "body": "<p>first of all in your <code>getSharedPreferences</code> method you try to receive different key value than you set on the first login (you are saving first login state in <code>Selected Value</code> key and try to receive from different key which is <code>text</code>) </p>\n\n<p>second for your answer try below code</p>\n\n<pre><code>val restoredText=getSharedPreferences()\n if(restoredText.equals(\"selectedRadioButtonValue\"))\n {\n   toolbar.setBackgroundDrawable(ColorDrawable(Color.parseColor(\"#YOUR_COLOR_CODE\")))\n }\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 55376534, "answer_count": 1, "score": 4, "last_activity_date": 1564642229, "creation_date": 1553683894, "last_edit_date": 1564642229, "question_id": 55375426, "link": "https://stackoverflow.com/questions/55375426/how-to-change-toolbar-color-according-to-the-radio-button-selected-after-the-sec", "title": "How to change toolbar color according to the radio button selected after the second login using android kotlin", "body": "<p>I need to change the <code>toolbar</code> color in the second login time according to the <code>RadioButton</code> <code>selected</code> in the first login time in android kotlin. I've used <code>sharedPreferences</code> to get the value of the <code>radioButton</code> selected in the first login.</p>\n\n<p>To set the radio button value in <code>sharedPreferences</code> at the first login time, I've used the following code</p>\n\n<pre><code>fun setSharedPreferences() {\n        val sharedPreferences = getSharedPreferences(myPreferences, Context.MODE_PRIVATE)\n        val editor = sharedPreferences.edit()\n        editor.putString(\"Selected Value\",radioButtonValue)\n        editor.apply()\n    }\n</code></pre>\n\n<p>In the Second login time, I've used the below method to get the value from shared preferences that was already set at the first login time.</p>\n\n<pre><code>fun getSharedPreferences(): String {\n         val prefs = getSharedPreferences(myPreferences, Context.MODE_PRIVATE)\n         restoredValue= prefs.getString(\"text\", devMode)\n         return restoredValue\n}\n</code></pre>\n\n<p>This the code that I've used to change the color of toolbar in the second login time</p>\n\n<pre><code> val restoredText=getSharedPreferences()\n if(restoredText===\"selectedRadioButtonValue\")\n {\n   toolbar.setBackgroundColor(Color.parseColor(\"#FF0000\"));\n }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "rx-kotlin2"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1553686550, "post_id": 55374888, "comment_id": 97474478, "body": "what is your expected out put?"}, {"owner": {"reputation": 171, "user_id": 3879384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHQOhP7ous0/AAAAAAAAAAI/AAAAAAAAACU/v8Yw-eyX3ws/photo.jpg?sz=128", "display_name": "Daniferrito", "link": "https://stackoverflow.com/users/3879384/daniferrito"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 1, "creation_date": 1553686974, "post_id": 55374888, "comment_id": 97474730, "body": "Just updated the question. Is it clear enough?"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1553687030, "post_id": 55374888, "comment_id": 97474779, "body": "ok..i will check and update you"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1553688015, "post_id": 55374888, "comment_id": 97475379, "body": "check my answers"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 3879384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHQOhP7ous0/AAAAAAAAAAI/AAAAAAAAACU/v8Yw-eyX3ws/photo.jpg?sz=128", "display_name": "Daniferrito", "link": "https://stackoverflow.com/users/3879384/daniferrito"}, "edited": false, "score": 0, "creation_date": 1553693129, "post_id": 55376675, "comment_id": 97478819, "body": "I know i can get the expected output by reordering the lines, but this is just an example of the issue. As stated in the question, i need new subscription to keep receiving elements even if the underlying observable has not changed"}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1553687934, "creation_date": 1553687934, "answer_id": 55376675, "question_id": 55374888, "link": "https://stackoverflow.com/questions/55374888/switchonnext-operator-does-not-emit-for-subscriptions-after-last-inserted-observ/55376675#55376675", "title": "switchOnNext operator does not emit for subscriptions after last inserted observable", "body": "<p>You should use switchOnNext like this way.In the document they mentions</p>\n\n<blockquote>\n  <p>{@code switchOnNext} subscribes to an ObservableSource that emits\n  ObservableSources.  Each time it observes one of these emitted\n  ObservableSources, the ObservableSource returned by {@code\n  switchOnNext} begins emitting the items  emitted by that\n  ObservableSource.    When a new ObservableSource is emitted, {@code\n  switchOnNext} stops emitting items  from the earlier-emitted\n  ObservableSource and begins emitting items from the new one.</p>\n</blockquote>\n\n<p>following code will gives your expected output.Based on logic you will change it like this order..</p>\n\n<pre><code>fun main()\n{\nval publishSubject: PublishSubject&lt;Observable&lt;Int&gt;&gt; = PublishSubject.create()\nval observable: Observable&lt;Int&gt; = Observable.switchOnNext(publishSubject)\nobservable.subscribe { println(\"1: $it\") }\n\nval obsAux1 = PublishSubject.create&lt;Int&gt;()\nobservable.subscribe { println(\"2: $it\") }\nobservable.subscribe { println(\"3: $it\") }\npublishSubject.onNext(obsAux1)\nobsAux1.onNext(1)\n\nval obsAux2 = PublishSubject.create&lt;Int&gt;()\npublishSubject.onNext(obsAux2)\nobservable.subscribe { println(\"4: $it\") }\nobsAux1.onNext(2)\n\npublishSubject.onNext(obsAux2)\nobsAux2.onNext(3) \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 3879384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHQOhP7ous0/AAAAAAAAAAI/AAAAAAAAACU/v8Yw-eyX3ws/photo.jpg?sz=128", "display_name": "Daniferrito", "link": "https://stackoverflow.com/users/3879384/daniferrito"}, "is_accepted": true, "score": 0, "last_activity_date": 1554042126, "creation_date": 1554042126, "answer_id": 55441869, "question_id": 55374888, "link": "https://stackoverflow.com/questions/55374888/switchonnext-operator-does-not-emit-for-subscriptions-after-last-inserted-observ/55441869#55441869", "title": "switchOnNext operator does not emit for subscriptions after last inserted observable", "body": "<p>The solution is just to use a BehaviourSubject instead of a PublishSubject, at least for the observable of observables.</p>\n\n<p>The diference between the two is that on a new subscription, a PublishSubject will only emit further elements, while a BehaviourSubject inmediatly emit the last element and continue normally.</p>\n\n<p>I still dont agree that this is how it should work, but it solves our problem anyway.</p>\n\n<p>Code, just in case somebody needs it (just a change in the first line of main and an extra import):</p>\n\n<pre><code>import io.reactivex.subjects.BehaviorSubject\nimport io.reactivex.subjects.PublishSubject\n\nfun main() {\n    //Observable of observables\n    val publishSubject: BehaviorSubject&lt;Observable&lt;Int&gt;&gt; = BehaviorSubject.create()\n    //Observable to subscribe to get the most recent values\n    val observable: Observable&lt;Int&gt; = Observable.switchOnNext(publishSubject)\n\n    observable.subscribe { println(\"1: $it\") }\n    //Now 1 is subscribed\n\n    val obsAux1 = PublishSubject.create&lt;Int&gt;()\n\n    observable.subscribe { println(\"2: $it\") }\n    //Now 1 and 2 are subscribed\n\n    publishSubject.onNext(obsAux1)\n\n    observable.subscribe { println(\"3: $it\") }\n    //Now 1, 2 and 3 are subscribed\n\n    //Should print out from subscriptions 1, 2 and 3, but only 1 and 2 printed\n    obsAux1.onNext(1)\n\n    val obsAux2 = PublishSubject.create&lt;Int&gt;()\n\n    publishSubject.onNext(obsAux2)\n\n    observable.subscribe { println(\"4: $it\") }\n    //Now 1, 2, 3 and 4 are subscribed\n\n    //Should not print anything\n    obsAux1.onNext(2)\n    //Should print out from subscriptions 1, 2, 3 and 4, but only 1, 2 and 3 printed\n    obsAux2.onNext(3)\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3879384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHQOhP7ous0/AAAAAAAAAAI/AAAAAAAAACU/v8Yw-eyX3ws/photo.jpg?sz=128", "display_name": "Daniferrito", "link": "https://stackoverflow.com/users/3879384/daniferrito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 55441869, "answer_count": 2, "score": 0, "last_activity_date": 1554042126, "creation_date": 1553682232, "last_edit_date": 1553686940, "question_id": 55374888, "link": "https://stackoverflow.com/questions/55374888/switchonnext-operator-does-not-emit-for-subscriptions-after-last-inserted-observ", "title": "switchOnNext operator does not emit for subscriptions after last inserted observable", "body": "<h2>First, some background (maybe there is a better way of doing this):</h2>\n\n<p>We have a module that emits incoming Bluetooth messages on a specific Observable. We then process this messages, and finally subscribe at the end to send messages forward. This processing could change at some time, which for most of the processing means recreating the intermediate Observables, and all observables that depend on it (as they would be processing invalid data now). </p>\n\n<p>We would like to change it so recreating some part of the processing does not necessitate recreating everything that depends on it, mostly so we don't have to remember at all times what depended on what, and also so that operators with internal state (like buffer, scan or debounce) don't lose this internal state.</p>\n\n<h2>The promising solution:</h2>\n\n<p>By using a switchOnNext operator, we would solve this problem. Whenever an intermediate observable is recreated, we just add that to the origin of the switchOnNext and whoever subscribed to the output of the switchOnNext would instantly get the new results.</p>\n\n<h2>The problem:</h2>\n\n<p>If the processing after the switchOnNext has to change, it will stop getting results until the previous observable changes. This means that we have the oposite problem now. whenever some part changes, we have to recreate everything that it depends on, recursively. This is slightly better (much easier to keep track on what something depends on than everything that depends on it), but observables still lose the internal state as they have to be recreated.</p>\n\n<p>This behavior seems to be against what the documentation says should happen, but it does not explicitly says one way or another.</p>\n\n<h2>Example code:</h2>\n\n<p>This code demonstrates the problem. </p>\n\n<pre><code>import io.reactivex.Observable\nimport io.reactivex.subjects.PublishSubject\n\nfun main() {\n    //Observable of observables\n    val publishSubject: PublishSubject&lt;Observable&lt;Int&gt;&gt; = PublishSubject.create()\n    //Observable to subscribe to get the most recent values\n    val observable: Observable&lt;Int&gt; = Observable.switchOnNext(publishSubject)\n\n    observable.subscribe { println(\"1: $it\") }\n    //Now 1 is subscribed\n\n    val obsAux1 = PublishSubject.create&lt;Int&gt;()\n\n    observable.subscribe { println(\"2: $it\") }\n    //Now 1 and 2 are subscribed\n\n    publishSubject.onNext(obsAux1)\n\n    observable.subscribe { println(\"3: $it\") }\n    //Now 1, 2 and 3 are subscribed\n\n    //Should print out from subscriptions 1, 2 and 3, but only 1 and 2 printed\n    obsAux1.onNext(1)\n\n    val obsAux2 = PublishSubject.create&lt;Int&gt;()\n\n    publishSubject.onNext(obsAux2)\n\n    observable.subscribe { println(\"4: $it\") }\n    //Now 1, 2, 3 and 4 are subscribed\n\n    //Should not print anything\n    obsAux1.onNext(2)\n    //Should print out from subscriptions 1, 2, 3 and 4, but only 1, 2 and 3 printed\n    obsAux2.onNext(3)\n} \n</code></pre>\n\n<p>Output of this code:</p>\n\n<pre><code>1: 1\n2: 1\n1: 3\n2: 3\n3: 3\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>1: 1\n2: 1\n3: 1 &lt;--- This is missing\n1: 3\n2: 3\n3: 3\n4: 3 &lt;--- This is missing\n</code></pre>\n\n<p>The first time obsAux1 emits, all three subscriptions should print, but only the ones before it was added to publishSubject print out. </p>\n\n<p>The second time obsAux1 emits, nothing should print as obsAux2 has been inserted already. This works as expected</p>\n\n<p>The first time obsAux2 emits, all four subscriptions should print. The third subscription prints as expected, which should that the subscription worked fine. But the fourth subscription is not printing anything, as it was added after obsAux2 was inserted to publishSubject.</p>\n"}, {"tags": ["generics", "kotlin", "delegates"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1553684738, "post_id": 55374083, "comment_id": 97473338, "body": "Are <code>A</code> and <code>B</code> actual class names here, or parameters?  If they&#39;re actual class names, then you don&#39;t need to parameterise your subclasses with them: <code>DelegateForObjectA : Delegate&lt;A&gt;</code>, not <code>DelegateForObjectA&lt;A&gt; : Delegate&lt;A&gt;</code>.  (Not sure if this affects the main issue.)"}, {"owner": {"reputation": 95, "user_id": 1216018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1aa74167d71f8825a393a74ccdfa945?s=128&d=identicon&r=PG", "display_name": "Guigui", "link": "https://stackoverflow.com/users/1216018/guigui"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1553686485, "post_id": 55374083, "comment_id": 97474433, "body": "hm you&#39;re right it&#39;s a type! the code is DelegateForObjectA : Delegate&lt;A&gt;"}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1553693855, "post_id": 55374083, "comment_id": 97479278, "body": "What error does it show?"}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 7666746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc37ba66d1fddfccb3fa39fa58f7809d?s=128&d=identicon&r=PG&f=1", "display_name": "user7666746", "link": "https://stackoverflow.com/users/7666746/user7666746"}, "is_accepted": false, "score": 0, "last_activity_date": 1553693987, "creation_date": 1553693987, "answer_id": 55378649, "question_id": 55374083, "link": "https://stackoverflow.com/questions/55374083/kotlin-generic-delegates-how-to-switch-between-subclasses/55378649#55378649", "title": "Kotlin &amp; Generic delegates, how to switch between subclasses", "body": "<p>I found a way to make it work, although i'm not sure exactly why it works and if it really suits your needs ^^'</p>\n\n<pre><code>/**\n * You can edit, run, and share this code. \n * play.kotlinlang.org \n */\n\nfun main() {\n    val a = A()\n    val b = B()\n    val test = Test()\n\n    test.switchDelegate(a)\n    test.switchDelegate(b)\n    test.switchDelegate(a)\n}\n\nclass Test {\n    var delegate: Delegate&lt;*&gt;\n    private val delegateA by lazy { DelegateForObjectA() }\n    private val delegateB by lazy { DelegateForObjectB() }\n\n    init {\n        delegate = delegateA\n    }\n\n    fun switchDelegate(item: Any) {\n        if (item is B) {\n            delegate = delegateB\n        } else {\n            delegate = delegateA\n        }\n        delegate.bindData( item )\n    }\n}\n\nabstract class Delegate&lt;T&gt; {\n    abstract fun &lt;T:Any&gt; bindData(item : T)\n}\n\nclass A {}\n\nclass B {}\n\nclass DelegateForObjectA: Delegate&lt;A&gt;() {\n    override fun &lt;A:Any&gt; bindData(item: A){\n        println( \"Binding A\" )\n    }\n}\n\nclass DelegateForObjectB: Delegate&lt;B&gt;() {\n    override fun &lt;B:Any&gt; bindData(item: B) {\n        println( \"Binding B\" )\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1216018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1aa74167d71f8825a393a74ccdfa945?s=128&d=identicon&r=PG", "display_name": "Guigui", "link": "https://stackoverflow.com/users/1216018/guigui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553697975, "creation_date": 1553679887, "last_edit_date": 1553697975, "question_id": 55374083, "link": "https://stackoverflow.com/questions/55374083/kotlin-generic-delegates-how-to-switch-between-subclasses", "title": "Kotlin &amp; Generic delegates, how to switch between subclasses", "body": "<p>I am facing a problem and I'd like your feedbacks on this one, especially on how to properly handle the following case:</p>\n\n<p>I have an abstract class that defines a delegate:</p>\n\n<pre><code>abstract class Delegate&lt;T: Any&gt; {\n    abstract fun bindData(item: T?)\n}\n</code></pre>\n\n<p>And then I have 2 implementations of this delegate:</p>\n\n<pre><code>class DelegateForObjectA: Delegate&lt;A&gt;() {\n    var data: A? = null\n\n    override fun bindData(item: A?){\n        data = item\n    }\n}\n\nclass DelegateForObjectB: Delegate&lt;B&gt;() {\n    var data: B? = null\n\n    override fun bindData(item: B?) {\n        data = item\n    }\n}\n</code></pre>\n\n<p>I want to be able to switch between these 2 delegates on the fly, meaning that in my activity I have:</p>\n\n<pre><code>lateinit var delegate: ActionButtonsViewDelegate&lt;*&gt;\nprivate var delegateA by lazy { DelegateForObjectA() }\nprivate var delegateB by lazy { DelegateForObjectB() }\n\ninit {\n    delegate = delegateA\n}\n</code></pre>\n\n<p>And then later:</p>\n\n<pre><code>fun SwitchDelegateAndBindData(item: Any?) {\n    if (item is B) {\n        delegate = delegateB\n    } else {\n        delegate = delegateA\n    }\n\n    delegate.bindData(item)\n}\n</code></pre>\n\n<p>I've tried achieving this with in/out but no success! How can i declare my delegate property to accept both delegates without having conflict on the type?</p>\n"}, {"tags": ["android", "kotlin", "login", "realm", "realm-mobile-platform"], "comments": [{"owner": {"reputation": 3673, "user_id": 5827565, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XcSLL.jpg?s=128&g=1", "display_name": "Pavel Poley", "link": "https://stackoverflow.com/users/5827565/pavel-poley"}, "edited": false, "score": 0, "creation_date": 1553760325, "post_id": 55373765, "comment_id": 97506000, "body": "probably you logged in with different user of different realm name, you track it in realm studio?"}], "owner": {"reputation": 253, "user_id": 5643951, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-E1N3ruq9CsU/AAAAAAAAAAI/AAAAAAAABxM/-fG4xrC7GNw/photo.jpg?sz=128", "display_name": "Taulant Loshi", "link": "https://stackoverflow.com/users/5643951/taulant-loshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553678918, "creation_date": 1553678918, "question_id": 55373765, "link": "https://stackoverflow.com/questions/55373765/every-time-user-logs-in-the-realm-object-server-creates-a-new-realm", "title": "Every time user logs in the realm object server creates a new realm", "body": "<p>I'm using synced realm and I'm supporting user login with name and password. </p>\n\n<p>Now the user is able to login and do the stuff but if the same user logs in to another device It will create a new realm and will not get the data from the previous realm. The problem here is every time the user logs in it creates a new realm on the realm object server and it doesn't get the data stored in previous realm. Tried a many ways like changing configurations and other related work around but still no result. </p>\n\n<p>Any idea or suggestion on why there are being created new realms for each user's login where as I'm just logging the user to get the same data from server.</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines", "ktor"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1553679177, "post_id": 55373266, "comment_id": 97469927, "body": "It may be worth mentioning that coroutines do have a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html\" rel=\"nofollow noreferrer\"><code>CoroutineContext</code></a> which is basically just a map."}, {"owner": {"reputation": 4640, "user_id": 3094906, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c03fdc3ba1136b45c89672ea2a71bd13?s=128&d=identicon&r=PG&f=1", "display_name": "Alan47", "link": "https://stackoverflow.com/users/3094906/alan47"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1558600346, "post_id": 55373266, "comment_id": 99157093, "body": "The problem with <code>CoroutineContext</code> is that it is easy to lose it along the way (e.g. when calling <code>async</code>). In all those places, the coroutine context must be passed along <i>explicitly</i>, which is easy to forget (the compiler won&#39;t complain). But I do agree, with some discipline, this is a solution."}, {"owner": {"reputation": 1105, "user_id": 3025845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1343721211/picture?type=large", "display_name": "MyrionSC2", "link": "https://stackoverflow.com/users/3025845/myrionsc2"}, "edited": false, "score": 0, "creation_date": 1598943706, "post_id": 55373266, "comment_id": 112612024, "body": "For anyone seeing this in the future, I have asked / answered a question about how to implement the coroutine context here: <a href=\"https://stackoverflow.com/questions/63674112/access-coroutinecontext-element-via-key-class\" title=\"access coroutinecontext element via key class\">stackoverflow.com/questions/63674112/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11853737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b52a2e9479fc0ed145d7cc40295ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Caelis", "link": "https://stackoverflow.com/users/11853737/caelis"}, "is_accepted": false, "score": 0, "last_activity_date": 1608236479, "last_edit_date": 1608236479, "creation_date": 1608228658, "answer_id": 65346134, "question_id": 55373266, "link": "https://stackoverflow.com/questions/55373266/how-to-make-request-bound-data-globally-available-in-ktor/65346134#65346134", "title": "How to make request-bound data globally available in Ktor?", "body": "<p>I think there is no build-in official opportunity at the moment.</p>\n<p>I have written a Ktor-Feature, that implements that behaviour.\nThe answer is to complicated to describe it in a few words.</p>\n<p>Check out the code + samples, if you are interested. Also an install guide is provided.</p>\n<p>=&gt; <a href=\"https://github.com/MaaxGr/ktor-globalcalldata\" rel=\"nofollow noreferrer\">https://github.com/MaaxGr/ktor-globalcalldata</a></p>\n<hr />\n<h2>Here a short snippet, what my dsl looks like:</h2>\n<p>Call suspending function test() directly or indirectly from a route:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>routing {\n    get(&quot;/test&quot;) {\n        test()\n        call.respond(&quot;OK&quot;)\n    }\n}\n</code></pre>\n<p>Access call object via <code>callData().call</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>suspend fun test() {\n    val url = callData().call.request.uri\n    println(url) // prints &quot;/test&quot;\n}\n</code></pre>\n<p>The library also allows to add custom properties that can be bound to the current coroutine/call.</p>\n"}], "owner": {"reputation": 4640, "user_id": 3094906, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c03fdc3ba1136b45c89672ea2a71bd13?s=128&d=identicon&r=PG&f=1", "display_name": "Alan47", "link": "https://stackoverflow.com/users/3094906/alan47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1608236479, "creation_date": 1553677286, "question_id": 55373266, "link": "https://stackoverflow.com/questions/55373266/how-to-make-request-bound-data-globally-available-in-ktor", "title": "How to make request-bound data globally available in Ktor?", "body": "<p>I'm building a microservice in Ktor. While we are working within the application module, Ktor provides access to the <code>call</code> object which contains authorization data.</p>\n\n<p>My problem is that I need to access the <code>call</code> object from a service-level class. In Spring, you would do this by accessing the <code>SecurityContext</code> which is globally available via a <code>ThreadLocal</code>. Ktor, being coroutine-driven, does not have that option.</p>\n\n<p>Do I really need to pass down the <code>call</code> object through my service layer methods, or is there a way in Ktor to have some sort of \"call context\" object that you can access from anywhere?</p>\n"}, {"tags": ["kotlin", "view", "visibility"], "comments": [{"owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "edited": false, "score": 1, "creation_date": 1553676491, "post_id": 55372372, "comment_id": 97468258, "body": "What would you like to achieve? I wrote about <code>Groupview</code> but there is no such view in (this part of) code. Where is the problem?"}, {"owner": {"reputation": 1, "user_id": 11264634, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nwTWVRP0uak/AAAAAAAAAAI/AAAAAAAAAAc/w8w2frCtTBk/photo.jpg?sz=128", "display_name": "Ivon Khalif", "link": "https://stackoverflow.com/users/11264634/ivon-khalif"}, "reply_to_user": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "edited": false, "score": 0, "creation_date": 1553767129, "post_id": 55372372, "comment_id": 97509750, "body": "The problem is ViewGroup 2 (table2) does not appear even though inputPosTableArea has a value. This is my fragment.xml - <a href=\"https://pastebin.com/5D2v0791\" rel=\"nofollow noreferrer\">pastebin.com/5D2v0791</a> - <a href=\"https://pastebin.com/5D2v0791\" rel=\"nofollow noreferrer\">link</a> . And this is my ViewModel <a href=\"https://pastebin.com/BUa5C3v7\" rel=\"nofollow noreferrer\">pastebin.com/BUa5C3v7</a> - <a href=\"https://pastebin.com/BUa5C3v7\" rel=\"nofollow noreferrer\">link</a>. @Boken"}], "owner": {"reputation": 1, "user_id": 11264634, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nwTWVRP0uak/AAAAAAAAAAI/AAAAAAAAAAc/w8w2frCtTBk/photo.jpg?sz=128", "display_name": "Ivon Khalif", "link": "https://stackoverflow.com/users/11264634/ivon-khalif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553676310, "creation_date": 1553673945, "last_edit_date": 1553676310, "question_id": 55372372, "link": "https://stackoverflow.com/questions/55372372/how-to-change-my-visibility-on-viewgroup-if-any-value-in-my-viewgroup-kotlin-lan", "title": "How to Change my Visibility on ViewGroup if any value in my ViewGroup Kotlin Language?", "body": "<p>I want to change <code>Groupview.visibility = View.VISIBLE</code> to be <code>GroupView.visibility = View.GONE</code>. How should the code be?</p>\n\n<p>this is my Activity.kt</p>\n\n<pre><code>if (viewModel.inputPosTableArea1.value !=  \"\") {\n    btn_addtable1?.visibility = View.GONE\n    table2?.visibility = View.VISIBLE\n    btn_addtable2?.visibility = View.VISIBLE\n}\n</code></pre>\n\n<p>I hope when the add button is \"clicked\" it will change to something like this:</p>\n\n<pre><code>btn_addtable1.visibility = View.GONE\ntable2.visibility = View.VISIBLE\nbtn_addtable2.visibility = View.VISIBLE\n</code></pre>\n"}, {"tags": ["oop", "design-patterns", "kotlin", "singleton", "repository-pattern"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1553688433, "post_id": 55371861, "comment_id": 97475640, "body": "The fact that <code>MyRepositoryImpl</code> can&#39;t be constructed independently, but needs to be given some other info, suggests to me that it&#39;s not really a singleton.  (Which is why it \u2018looks weird\u2019, or in other words the code smells!)  I&#39;d suggest either renaming <code>getInstance()</code> to something indicating this, e.g. along the lines of <code>instanceFor()</code> which could potentially cache multiple instances, one for each context; or if there could only ever be one context, give the class a way to discover the context for itself, and make it a proper singleton."}], "answers": [{"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1553685095, "post_id": 55375026, "comment_id": 97473555, "body": "But how would such an object known which Context to use to get the LocalDataSource it needs to create the MyRepository instance?"}, {"owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1553687567, "post_id": 55375026, "comment_id": 97475107, "body": "I&#39;ve updated my response, you can use operator overloading on invoke function"}, {"owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "edited": false, "score": 1, "creation_date": 1553731623, "post_id": 55375026, "comment_id": 97498381, "body": "Thank you, I need to see the &#39;operator&#39; keyword more! :)"}], "tags": [], "owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "is_accepted": true, "score": 4, "last_activity_date": 1553687539, "last_edit_date": 1553687539, "creation_date": 1553682649, "answer_id": 55375026, "question_id": 55371861, "link": "https://stackoverflow.com/questions/55371861/android-repository-pattern-what-is-the-best-solution-to-create-an-object/55375026#55375026", "title": "Android: repository pattern what is the best solution to create an object?", "body": "<p>In Kotlin you can use <strong>object</strong> keyword to implement singleton pattern in a thread-safe way. There's no need to define getInstance method in your companion object. Simply define your <code>MyRepository</code> class as object like below. By overloading invoke operator you'll be able to pass the context useful to initialize your localDataSource and remoteDataSource instances. </p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>object MyRepository  {\n    private lateinit var localDataSource: LocalDataSource\n    private lateinit var remoteDataSource: RemoteDataSource\n\n    operator fun invoke(context: Context): MyRepository {\n        //...\n        localDataSource = LocalDataSourceImpl.getInstance(context)\n        remoteDataSource = RemoteDataSourceImpl.getInstance(context)\n        return this\n    }\n}\n</code></pre>\n\n<p>This code will be compiled to the following java code (static initialization block) :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public final class MyRepository {\n   public static final MyRepository INSTANCE;\n\n   private SomeSingleton() {\n      INSTANCE = (MyRepository) this;\n   }\n\n   static {\n      new MyRepository();\n   }\n}\n</code></pre>\n\n<p>This way you'll be able to get an instance of your MyRepository class like a normal, non-object class, simply by doing:</p>\n\n<pre><code>val repo = MyRepository(this) // this is your context\n</code></pre>\n\n<p>Each method you define within the <code>MyRepository</code> class will be accessible like it was a java static method, so you'll be able to call it like:</p>\n\n<pre><code>MyRepository.myMethod()\n</code></pre>\n\n<p>More details <a href=\"https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2542, "favorite_count": 2, "accepted_answer_id": 55375026, "answer_count": 1, "score": 4, "last_activity_date": 1553687539, "creation_date": 1553671704, "question_id": 55371861, "link": "https://stackoverflow.com/questions/55371861/android-repository-pattern-what-is-the-best-solution-to-create-an-object", "title": "Android: repository pattern what is the best solution to create an object?", "body": "<p>This question is about the OOP(class/interface) design.</p>\n\n<p>I am developing an android library, not an app.\nThe app will use this library. \nThis library is developed by Repository pattern.</p>\n\n<p>One repository and 2 data sources (local, remote).</p>\n\n<p>Because the local data source uses \"SharedPreference\", it needs Context.</p>\n\n<p>Below is my repository interface and implements.</p>\n\n<pre><code>interface MyRepository {\n\n    fun create(String data)\n\n    fun get(key: String): String\n}\n\nclass MyRepositoryImpl(\n        private val localDataSource: LocalDataSource,\n        private val remoteDataSource: RemoteDataSource\n): MyRepository {\n\n    fun create(String data) {\n        localDataSource.create(data);\n        remoteDataSource.create(data);\n    }\n\n    fun get(key: String): String {\n        // temp code\n        return localDataSource.get(key)\n    }\n\n    companion object {\n\n        private var instance: MyRepository? = null\n\n        fun getInstance(context: Context): MyRepository {\n            if (instance == null) {\n                val localDataSource: LocalDataSource = LocalDataSourceImpl.getInstance(context)\n                val remoteDataSource: RemoteDataSource = RemoteDataSourceImpl.getInstance()\n                instance = MyRepositoryImpl(localDataSource, remoteDataSource)\n            }\n\n            return instance!!\n        }\n\n    }\n}\n</code></pre>\n\n<p>The MyRepositoryImpl is implemented by the Singleton pattern.\nBecause it should be used anywhere in the app.\nSo the app developers should be able to get the instance of MyRepository like:</p>\n\n<pre><code>val myRepository = MyRepositoryImpl.getInstance(context)\nval data = myRepository.get(\"key\")\n</code></pre>\n\n<p>But It looks weird... \"getInstance(context)\".\nI think this is not a good approach.\nIs there any more smart design, please?</p>\n"}, {"tags": ["android", "kotlin", "data-binding"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4809601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_KYhCqdz7E/AAAAAAAAAAI/AAAAAAAAAFM/koXjKu-aTEU/photo.jpg?sz=128", "display_name": "Robert LaFondue", "link": "https://stackoverflow.com/users/4809601/robert-lafondue"}, "is_accepted": false, "score": 2, "last_activity_date": 1553789564, "creation_date": 1553789564, "answer_id": 55402298, "question_id": 55371155, "link": "https://stackoverflow.com/questions/55371155/android-kotlin-data-binding-with-fragments-errorcannot-find-symbol-import-com-e/55402298#55402298", "title": "Android kotlin data-binding with fragments error:cannot find symbol import com.example.***.databinding.FragmentUserBindingImpl;", "body": "<p>The first error is pretty explicit: binding.viewModel expects a nullable UserListViewModel? and get a non-nullable UserListViewModel(see <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">kotlin null safety doc</a>).\nYou can try something like this to get rid of it:</p>\n\n<p>Declare your viewModel as</p>\n\n<pre><code>private var viewModel: UserListViewModel? = null\n</code></pre>\n\n<p>and set your binding this way:</p>\n\n<pre><code>viewModel?.let{binding.viewModel = it}\n</code></pre>\n\n<p>Concerning the second error, your declarations seems fine, but sometimes the Android Studio's cache get corrupted, try Invalidate Caches/Restart, it may help.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 3968719, "user_type": "registered", "profile_image": "https://graph.facebook.com/577305386/picture?type=large", "display_name": "Juan Hurtado", "link": "https://stackoverflow.com/users/3968719/juan-hurtado"}, "is_accepted": false, "score": 0, "last_activity_date": 1553791439, "last_edit_date": 1553791439, "creation_date": 1553790589, "answer_id": 55402629, "question_id": 55371155, "link": "https://stackoverflow.com/questions/55371155/android-kotlin-data-binding-with-fragments-errorcannot-find-symbol-import-com-e/55402629#55402629", "title": "Android kotlin data-binding with fragments error:cannot find symbol import com.example.***.databinding.FragmentUserBindingImpl;", "body": "<p>Type mismatch.\nRequired:MyUser.UserListViewModel?\nFound:com.example.***.ui.MyUser.UserListViewModel</p>\n\n<p>Basically the error is telling that your</p>\n\n<pre><code>binding.viewModel //is a nullable type and there for it expects a nullable \n//type to be assigned as well\n</code></pre>\n\n<p>So just turn your view model into a nullable type by addind the <strong>?</strong> simbol after its delacarion (note late init types do not allow nullable types). try it like this</p>\n\n<pre><code>private var viewModel: UserListViewModel? =  null\n</code></pre>\n\n<p>About the second error data binding library need to compile in order to autogenerate the binding class, just rebuild the project and this error will be gone.</p>\n\n<p>Please feel free to use this template as a base to avoid all that boilerplate code</p>\n\n<pre><code>@Retention(AnnotationRetention.RUNTIME)\n@Target(AnnotationTarget.CLASS)\nannotation class ContentView(@LayoutRes val id: Int)\n\nfun ViewGroup.inflate(@LayoutRes layoutId: Int,\naddContainer: Boolean = false): View {                                                     \n    return LayoutInflater.from(context).inflate(layoutId,this,addContainer)      \n}\n\n@Suppress(\"UNCHECKED_CAST\")\nabstract class BaseFragment&lt;Model : ViewModel, Binding : ViewDataBinding&gt; : Fragment() {\n/**\n * Data binding class variable all view elements declared on the\n * Xml file will be available within this instance if a view model\n * Is required for the xml to work we will need to bind it on @onBindViewModel\n */\nprotected lateinit var binding: WeakReference&lt;Binding?&gt;\n\n/**\n * Fragments view model according to MVVM android architecture\n * Each fragment class should have one , in order to facilitate\n * Live Data and Binding library features, tho we can skip it\n */\nprotected lateinit var viewModel: WeakReference&lt;Model?&gt;\n\n/**\n * Here is where most likely you will get not null data , both binding and\n * view model references can be destroyed by garbage collector\n * If this application reaches low memory levels\n *\n * This optional method is used to bind the required view model inside the\n * Xml file, this is optional to use tho is recommended\n * Bind them by calling the view model binding.customViewModel = viewModel\n */\nprotected open fun onBindViewModel(viewModel: Model?, binding: Binding?) {}\n\n/**\n * There will be the occasion where custom params will be needed on view model's\n * Constructor in this case will want to override the default creation @see ViewModelFactory\n */\nprotected open fun onCreateViewModel(modelType: Class&lt;Model&gt;): Model? = if (modelType != ViewModel::class.java)\n    ViewModelProviders.of(requireActivity()).get(modelType) else null\n\n/**\n * Here we will inherit view model and binding values based on the class\n * Parameters and store them in global variables so any class extending\n * From Base activity has access to binding and view model instances by default\n */\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val layout = this.javaClass.annotations.find { it.annotationClass == ContentView::class } as ContentView?\n        ?: throw RuntimeException(\"You annotate this class with @ContentView and provide a layout resource\")\n\n    container?.let { binding = WeakReference(DataBindingUtil.bind(it.inflate(layout.id))!!) }\n        ?: run { binding = WeakReference(DataBindingUtil.bind(inflater.inflate(layout.id, null))) }\n\n    viewModel = WeakReference(\n        onCreateViewModel(\n            (this.javaClass.genericSuperclass\n                    as ParameterizedType).actualTypeArguments[0] as Class&lt;Model&gt;\n        )\n    )\n\n    setHasOptionsMenu(true)\n    onBindViewModel(viewModel.get(), binding.get())\n    return binding.get()?.root\n}\n}\n</code></pre>\n\n<p>And just use it like this (see how much boiler plate code is gone)</p>\n\n<pre><code>@ContentView(R.layout.fragment_user)\nclass UserFragment: BaseFragment&lt;UserListViewModel, FragmentUserBinding&gt; {\n\noverride fun onBindViewModel(viewModel: UserListViewModel?, binding: FragmentUserBinding?) {\n    binding.viewModel = viewModel\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3770803, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001664994520/picture?type=large", "display_name": "user3770803", "link": "https://stackoverflow.com/users/3770803/user3770803"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4032, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1553791439, "creation_date": 1553668457, "question_id": 55371155, "link": "https://stackoverflow.com/questions/55371155/android-kotlin-data-binding-with-fragments-errorcannot-find-symbol-import-com-e", "title": "Android kotlin data-binding with fragments error:cannot find symbol import com.example.***.databinding.FragmentUserBindingImpl;", "body": "<p>I am relatively new to kotlin and trying to build a project with data binding in some fragments.I have a fragment named UserFragment with a Recyclerview in it like this:</p>\n\n<pre><code>class UserFragment : Fragment() {\n  private lateinit var binding: FragmentUserBinding\n  private lateinit var viewModel: UserListViewModel\n  override fun onCreateView(\n      inflater: LayoutInflater, container: ViewGroup?,\n      savedInstanceState: Bundle?\n  ): View? {\n      // Inflate the layout for this fragment\n      binding=DataBindingUtil.inflate(inflater,R.layout.fragment_user, container, false)\n      binding.userRecycler.layoutManager = LinearLayoutManager(context, RecyclerView.VERTICAL, false)\n\n      viewModel = ViewModelProviders.of(this).get(UserListViewModel::class.java)\n      viewModel.errorMessage.observe(this, Observer {\n              errorMessage -&gt; if(errorMessage != null) showError(errorMessage) else hideError()\n      })\n      binding.mViewModel=viewModel\n      return binding.root\n      }\n\n  override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n      super.onViewCreated(view, savedInstanceState)\n      //start add activity\n      val i= Intent(activity,AddUserActivity::class.java)\n      userFab.setOnClickListener(View.OnClickListener {\n          startActivity(i)\n      })\n  }\n  private fun showError(@StringRes errorMessage:Int){\n      errorSnackbar = Snackbar.make(binding.root, errorMessage, Snackbar.LENGTH_INDEFINITE)\n      errorSnackbar?.setAction(R.string.retry, viewModel.errorClickListener)\n      errorSnackbar?.show()\n  }\n\n  private fun hideError(){\n      errorSnackbar?.dismiss()\n  }\n  }\n</code></pre>\n\n<p>and the xml layout file <strong>fragment_user.xml</strong> looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n    &lt;data&gt;\n        &lt;variable\n                name=\"mViewModel\"\n                type=\"com.example.***.ui.User.UserListViewModel\" /&gt;\n    &lt;/data&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n        &lt;EditText\n                android:id=\"@+id/userDateEditText\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:hint=\"@string/pick_date\"\n                android:background=\"@drawable/roundededittext\"\n                android:layout_marginEnd=\"8dp\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginStart=\"8dp\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                android:layout_marginTop=\"8dp\"\n                app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n                android:id=\"@+id/userRecycler\"\n                android:layout_width=\"293dp\"\n                android:layout_height=\"475dp\" android:layout_marginTop=\"8dp\"\n                app:layout_constraintTop_toBottomOf=\"@+id/userDateEditText\"\n                app:adapter=\"@{viewModel.getUserListAdapter()}\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"8dp\" app:layout_constraintStart_toStartOf=\"parent\"\n                android:layout_marginStart=\"8dp\" android:layout_marginBottom=\"8dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"/&gt;\n\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n                android:id=\"@+id/userFab\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\" android:layout_marginBottom=\"48dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"8dp\"/&gt;\n        &lt;ProgressBar\n                style=\"?android:attr/progressBarStyle\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                app:mutableVisibility=\"@{viewModel.getLoadingVisibility()}\"\n                android:id=\"@+id/userProgressBar\" app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"140dp\" app:layout_constraintStart_toStartOf=\"parent\"\n                android:layout_marginStart=\"8dp\" android:layout_marginTop=\"8dp\"\n                app:layout_constraintTop_toTopOf=\"parent\" android:layout_marginBottom=\"8dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintHorizontal_bias=\"0.804\"\n                app:layout_constraintVertical_bias=\"0.499\"/&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/layout&gt;\n\n</code></pre>\n\n<p>there is also a similar adapter class and item_user.xml:</p>\n\n<pre><code>class UserListAdapter : RecyclerView.Adapter&lt;UserListAdapter.ViewHolder&gt;() {\n    private lateinit var userModelList:List&lt;UserModel&gt;\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): UserListAdapter.ViewHolder {\n        val binding: ItemUserBinding = DataBindingUtil.inflate(LayoutInflater.from(parent.context), R.layout.item_user, parent, false)\n        return ViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: UserListAdapter.ViewHolder, position: Int) {\n        holder.bind(userModelList[position])\n    }\n\n    override fun getItemCount(): Int {\n        return if(::userModelList.isInitialized) userModelList.size else 0\n    }\n\n    fun updateUserList(userModelList:List&lt;UserModel&gt;){\n        this.userModelList = userModelList\n        notifyDataSetChanged()\n    }\n\n    class ViewHolder(private val binding: ItemUserBinding):RecyclerView.ViewHolder(binding.root){\n        private val viewModel = UserViewModel()\n\n        fun bind(userModel: UserModel){\n            viewModel.bind(userModel)\n            binding.viewModel =viewModel\n        }\n    }\n}\n</code></pre>\n\n<p>the <strong>item-user.xml</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n                name=\"viewModel\"\n                type=\"com.example.***.ui.MyUser.UserViewModel\" /&gt;\n    &lt;/data&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:paddingLeft=\"16dp\"\n            android:paddingRight=\"16dp\"&gt;\n\n        &lt;TextView\n                android:id=\"@+id/user_title\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:textStyle=\"bold\"\n                app:mutableText=\"@{viewModel.getUserTitle()}\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;TextView\n                android:id=\"@+id/user_description\"\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"8dp\"\n                app:mutableText=\"@{viewModel.getUserDesc()}\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/user_title\" /&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>note that databinding has been enabled in the gradle \nand the very important issue here is that in both my fragment and the adapter\nthis line:</p>\n\n<pre><code>binding.viewModel =viewModel\n</code></pre>\n\n<p>reports a type mismatch like this:</p>\n\n<pre><code>Type mismatch.\nRequired:MyUser.UserListViewModel?\nFound:com.example.***.ui.MyUser.UserListViewModel\n</code></pre>\n\n<p>and when i build my project the error is as follows:</p>\n\n<pre><code>error: cannot find symbol\nimport com.example.***.databinding.FragmentUserBindingImpl;\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-glide"], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 7328896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67a30eba32cf7b2f6d8d65cc9a3d1de?s=128&d=identicon&r=PG&f=1", "display_name": "Pai-Hsiang Huang", "link": "https://stackoverflow.com/users/7328896/pai-hsiang-huang"}, "edited": false, "score": 0, "creation_date": 1553755614, "post_id": 55371690, "comment_id": 97504028, "body": "It works! The v4.9.0 release arrives just in time. Thanks."}], "tags": [], "owner": {"reputation": 845, "user_id": 4696538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bJk6ag3a_DE/AAAAAAAAAAI/AAAAAAAAABQ/QdbBb3CbAcw/photo.jpg?sz=128", "display_name": "fancyjyl", "link": "https://stackoverflow.com/users/4696538/fancyjyl"}, "is_accepted": true, "score": 4, "last_activity_date": 1553670886, "creation_date": 1553670886, "answer_id": 55371690, "question_id": 55370769, "link": "https://stackoverflow.com/questions/55370769/how-to-log-each-request-url-from-glide/55371690#55371690", "title": "How to log each request url from Glide?", "body": "<p>Glide 4.9.0 can set default requestListener.</p>\n\n<p>link <a href=\"https://github.com/bumptech/glide/releases/tag/v4.9.0\" rel=\"nofollow noreferrer\">https://github.com/bumptech/glide/releases/tag/v4.9.0</a>\n <a href=\"https://github.com/bumptech/glide/commit/37127f0f817d4a11dfdcc447946397b5288de593\" rel=\"nofollow noreferrer\">https://github.com/bumptech/glide/commit/37127f0f817d4a11dfdcc447946397b5288de593</a></p>\n\n<p>In Custom AppGlideModule</p>\n\n<pre><code>@GlideModule\npublic class MyAppGlideModule extends AppGlideModule {\n\n    @Override\n    public void applyOptions(@NonNull Context context, @NonNull GlideBuilder builder) {\n        builder.addGlobalRequestListener(new RequestListener&lt;Object&gt;() {\n            @Override\n            public boolean onLoadFailed(@Nullable GlideException e, Object model, Target&lt;Object&gt; target, boolean isFirstResource) {\n                return false;\n            }\n\n            @Override\n            public boolean onResourceReady(Object resource, Object model, Target&lt;Object&gt; target, DataSource dataSource, boolean isFirstResource) {\n                return false;\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>In Custom Activity Fragment</p>\n\n<p><code>GlideApp.with(object).addDefaultRequestListener()</code></p>\n\n<p><code>Glide.with(object).addDefaultRequestListener()</code></p>\n"}], "owner": {"reputation": 102, "user_id": 7328896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67a30eba32cf7b2f6d8d65cc9a3d1de?s=128&d=identicon&r=PG&f=1", "display_name": "Pai-Hsiang Huang", "link": "https://stackoverflow.com/users/7328896/pai-hsiang-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 55371690, "answer_count": 1, "score": 0, "last_activity_date": 1553670886, "creation_date": 1553666713, "last_edit_date": 1553666951, "question_id": 55370769, "link": "https://stackoverflow.com/questions/55370769/how-to-log-each-request-url-from-glide", "title": "How to log each request url from Glide?", "body": "<p>I have using Glide to download images for quite a long time, so the code like this are every where:</p>\n\n<pre><code>      GlideApp.with(getContext())\n            .load(imgUrl)\n            .into(imgView);\n</code></pre>\n\n<p>And suddenly I need to log every image's url for further analysis. Instead of searching every usage of Glade and changing the code like this:</p>\n\n<pre><code>      GlideApp.with(getContext())\n            .load(imgUrl)\n            .listener(requestListener) // log urls through listener\n            .into(imgAd);\n</code></pre>\n\n<p>is there any way that I could add the requestListener globally like in the default options of Glide so that I don't need to search and change every Glide usage throughout the application?</p>\n\n<p>I use Glide v4 and I have checked the <a href=\"https://stackoverflow.com/questions/44602131/glide-log-each-request\">post</a> which log the urls directly to logcat but not to my local storage for further analysis.</p>\n"}, {"tags": ["android", "mvvm", "kotlin", "viewmodel"], "answers": [{"comments": [{"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1553665751, "post_id": 55370522, "comment_id": 97463706, "body": "I have already handle that with BindingAdapter. You can check the method at the end of my question."}], "tags": [], "owner": {"reputation": 96, "user_id": 7697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d698c87d312114cd758a294d9b6f2?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/7697633/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1553665424, "creation_date": 1553665424, "answer_id": 55370522, "question_id": 55370418, "link": "https://stackoverflow.com/questions/55370418/hide-progressbar-when-fragment-resumed/55370522#55370522", "title": "Hide progressBar when Fragment resumed", "body": "<p>Not sure if this is what you were looking for..?</p>\n\n<pre><code>android:visibility=\"@{vm.isFeedsLoading} ? View.VISIBLE : View.GONE\"\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/47746579/7697633\">https://stackoverflow.com/a/47746579/7697633</a></p>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553709999, "creation_date": 1553664896, "last_edit_date": 1553709999, "question_id": 55370418, "link": "https://stackoverflow.com/questions/55370418/hide-progressbar-when-fragment-resumed", "title": "Hide progressBar when Fragment resumed", "body": "<p>I have this code in ViewModel class to display a progressBar when data is loading :</p>\n\n<pre><code>class DetailViewModel(\n    context: Application,\n    private val schedulerProvider: BaseSchedulerProvider,\n    private val dataSource: RemoteDataSource\n) : AndroidViewModel(context) {\n\n    val isFeedsLoading = ObservableBoolean(false)\n\n    fun showFeeds(goal: SavingsGoal): Disposable? {\n        EspressoIdlingResource.increment() // App is busy until further notice\n        isFeedsLoading.set(true)\n        return dataSource.getFeeds(goal.id)\n            .subscribeOn(schedulerProvider.io())\n            .observeOn(schedulerProvider.ui())\n            .doFinally {\n                if (!EspressoIdlingResource.getIdlingResource().isIdleNow) {\n                    EspressoIdlingResource.decrement() \n                }\n                isFeedsLoading.set(false)\n            }\n            ?.subscribe({ feeds -&gt;\n\n\n            }\n            ) {\n                Timber.e(it)\n            }\n    }\n</code></pre>\n\n<p>And the layout :</p>\n\n<pre><code>&lt;FrameLayout android:layout_width=\"match_parent\"\n                             android:layout_height=\"match_parent\"&gt;\n\n                    &lt;androidx.recyclerview.widget.RecyclerView\n                            android:id=\"@+id/list\"\n                            android:layout_width=\"match_parent\"\n                            android:layout_height=\"match_parent\"\n                            app:layoutManager=\"LinearLayoutManager\"\n                            app:items=\"@{vm.feeds}\"/&gt;\n\n                    &lt;ProgressBar\n                            android:layout_width=\"wrap_content\"\n                            android:layout_height=\"wrap_content\"\n                            android:layout_gravity=\"center\"\n                            app:visibleGone=\"@{vm.isFeedsLoading}\"/&gt;\n\n                &lt;/FrameLayout&gt;\n</code></pre>\n\n<p>Problem : When we RESUME the Fragment. It shows ProgressBar and the visibility is not Gone as expected. What could be the reason?</p>\n\n<p>And my Fragment :</p>\n\n<pre><code>@ActivityScoped\nclass DetailFragment @Inject\nconstructor() // Required empty public constructor\n    : DaggerFragment() {\n\n    @Inject\n    lateinit var viewModelFactory: DetailViewModel.DetailViewModelFactory\n\n    @Inject\n    lateinit var goal: SavingsGoal\n\n    private val compositeDisposable = CompositeDisposable()\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n        val viewModel = ViewModelProviders.of(this, viewModelFactory)[DetailViewModel::class.java]\n\n        val root = inflater.inflate(R.layout.fragment_detail, container, false)\n        val binding = FragmentDetailBinding.bind(root).apply {\n            setVariable(BR.vm, viewModel)\n            goal = this@DetailFragment.goal\n            lifecycleOwner = this@DetailFragment\n        }\n\n        with(root) {\n\n            with(activity as AppCompatActivity) {\n                setupActionBar(binding.toolbar) {\n                    setDisplayShowTitleEnabled(false)\n                    setDisplayHomeAsUpEnabled(true)\n                    setDisplayShowHomeEnabled(true)\n                }\n            }\n        }\n        binding.vm?.showFeeds(goal)?.let { compositeDisposable.add(it) }\n\n        return root\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        compositeDisposable.clear()\n    }\n}\n</code></pre>\n\n<p>BindingAdapter :</p>\n\n<pre><code>@BindingAdapter(\"visibleGone\")\nfun View.visibleGone(visible: Boolean) {\n    visibility = if (visible) View.VISIBLE else View.GONE\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553684700, "post_id": 55369468, "comment_id": 97473318, "body": "It&#39;s possible to do in Kotlin, so it can be invoked from Java."}, {"owner": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553735773, "post_id": 55369468, "comment_id": 97499293, "body": "You&#39;re right. I&#39;ve updated the answer to use the appropriate method from <code>kotlin-stdlib</code>"}], "tags": [], "owner": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "is_accepted": false, "score": 7, "last_activity_date": 1554063608, "last_edit_date": 1554063608, "creation_date": 1553658308, "answer_id": 55369468, "question_id": 55369415, "link": "https://stackoverflow.com/questions/55369415/convert-java-class-to-kotlins-kclass/55369468#55369468", "title": "Convert java Class&lt;&gt; to kotlin&#39;s KClass&lt;&gt;", "body": "<p>You can do it this way using the standard library:</p>\n\n<pre><code>KClass kotlinClass = Reflection.createKotlinClass(MyClass.class);\nKotlinFunc.create(kotlinClass)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "edited": false, "score": 0, "creation_date": 1587461847, "post_id": 55375678, "comment_id": 108513965, "body": "I am not sure this will map java classes to kotlin classes. the trick is to  use kotlin-reflection <code>JavaToKotlinClassMap</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "edited": false, "score": 0, "creation_date": 1587502653, "post_id": 55375678, "comment_id": 108536749, "body": "If you are talking about not converting e.g. <code>java.lang.String</code> to <code>kotlin.String</code>, the question doesn&#39;t ask for that."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 3, "last_activity_date": 1553684672, "creation_date": 1553684672, "answer_id": 55375678, "question_id": 55369415, "link": "https://stackoverflow.com/questions/55369415/convert-java-class-to-kotlins-kclass/55375678#55375678", "title": "Convert java Class&lt;&gt; to kotlin&#39;s KClass&lt;&gt;", "body": "<p>In Kotlin <code>Class</code> has an extension property <code>.kotlin</code>. Unfortunately, I can't find where it's declared, but in Java it should look as a static method <code>&lt;T&gt; KClass&lt;T&gt; getKotlin(Class&lt;T&gt;)</code>. </p>\n\n<p>Failing to find this method, you can make a helper method in Kotlin:</p>\n\n<pre><code>// in ReflectHelper.kt\nfun &lt;T&gt; toKClass(cls: Class&lt;T&gt;) = cls.kotlin\n\n// from Java\npublic void javaFunc() {\n    KotlinFunc.create(ReflectHelperKt.toKClass(someMyClass.class));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 3, "creation_date": 1553721689, "post_id": 55383393, "comment_id": 97495192, "body": "<code>kotlin-reflect</code> should not be required to convert java <code>Class&lt;&gt;</code> to kotlin <code>KClass&lt;&gt;</code>. <code>JvmClassMappingKt</code> is declared in <code>kotlin-stdlib</code>."}, {"owner": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1587411693, "post_id": 55383393, "comment_id": 108497102, "body": "@Ilya I can&#39;t find <code>JvmClassMappingKt</code> in <code>kotlin-stdlib</code> I am sure you still need <code>kotlin-reflect</code>"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "edited": false, "score": 0, "creation_date": 1587427334, "post_id": 55383393, "comment_id": 108502954, "body": "@MohamedAouledIssa The fully qualified name of that class is <code>kotlin.jvm.JvmClassMappingKt</code> and it is located in <code>kotlin-stdlib</code> artifact. Note that this is how that class looks from Java code, not from Kotlin code."}, {"owner": {"reputation": 311, "user_id": 5120919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9vaGrjN_pBo/AAAAAAAAAAI/AAAAAAAAAS8/9ZF4HLNFP5Q/photo.jpg?sz=128", "display_name": "Sara Race", "link": "https://stackoverflow.com/users/5120919/sara-race"}, "edited": false, "score": 0, "creation_date": 1610501567, "post_id": 55383393, "comment_id": 116152289, "body": "The code compiles without kotlin-reflect but there is a runtime exception when it&#39;s not included, so it is required after all."}], "tags": [], "owner": {"reputation": 343, "user_id": 9401943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oVPqk.png?s=128&g=1", "display_name": "birneee", "link": "https://stackoverflow.com/users/9401943/birneee"}, "is_accepted": false, "score": 13, "last_activity_date": 1553708166, "creation_date": 1553708166, "answer_id": 55383393, "question_id": 55369415, "link": "https://stackoverflow.com/questions/55369415/convert-java-class-to-kotlins-kclass/55383393#55383393", "title": "Convert java Class&lt;&gt; to kotlin&#39;s KClass&lt;&gt;", "body": "<p>It is possible by using something like this in Java:</p>\n\n<pre><code>public static &lt;T&gt; KClass&lt;T&gt; getKClass(Class&lt;T&gt; cls){\n    return JvmClassMappingKt.getKotlinClass(cls);\n}\n</code></pre>\n\n<p>and you also have to make sure that kotlin-reflect is in your classpath, e.g.:</p>\n\n<pre><code>implementation group: 'org.jetbrains.kotlin', name: 'kotlin-reflect', version: '1.3.21'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 1374221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5C7FP.jpg?s=128&g=1", "display_name": "vonWippersnap", "link": "https://stackoverflow.com/users/1374221/vonwippersnap"}, "is_accepted": false, "score": 0, "last_activity_date": 1603778205, "creation_date": 1603778205, "answer_id": 64548981, "question_id": 55369415, "link": "https://stackoverflow.com/questions/55369415/convert-java-class-to-kotlins-kclass/64548981#64548981", "title": "Convert java Class&lt;&gt; to kotlin&#39;s KClass&lt;&gt;", "body": "<p>Use <code>KClass&lt;Object&gt; k = new ClassReference(myJavaClass)</code>.\nFrom this commit in 2015: <a href=\"https://github.com/JetBrains/kotlin/commit/628bb774fd404a307499575fd30c7325e6660d18\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/commit/628bb774fd404a307499575fd30c7325e6660d18</a></p>\n"}], "owner": {"reputation": 998, "user_id": 843828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc268d5f80cb2d33477e289c915ec25b?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/843828/ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4412, "favorite_count": 0, "answer_count": 4, "score": 12, "last_activity_date": 1603778205, "creation_date": 1553657829, "question_id": 55369415, "link": "https://stackoverflow.com/questions/55369415/convert-java-class-to-kotlins-kclass", "title": "Convert java Class&lt;&gt; to kotlin&#39;s KClass&lt;&gt;", "body": "<p>like I hava a kotlin function:</p>\n\n<pre><code>object KotlinFunc {\n    @JvmStatic\n    fun create(mycls: KClass&lt;*&gt;) {...}\n}\n</code></pre>\n\n<p>I want to invoke this function in java code, but this not working:</p>\n\n<pre><code>public void javaFunc() {\n   KotlinFunc.create(MyClass.class)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "conventions", "coding-style"], "answers": [{"tags": [], "owner": {"reputation": 1002, "user_id": 5576117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qexrw.jpg?s=128&g=1", "display_name": "Mamykin Andrey", "link": "https://stackoverflow.com/users/5576117/mamykin-andrey"}, "is_accepted": false, "score": 3, "last_activity_date": 1553665249, "creation_date": 1553665249, "answer_id": 55370491, "question_id": 55368621, "link": "https://stackoverflow.com/questions/55368621/is-there-any-property-ordering-convention-in-kotlin/55370491#55370491", "title": "Is there any property ordering convention in Kotlin?", "body": "<p>From Kotlin docs (<a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coding-conventions.html</a>):</p>\n\n<p><code>Do not sort the method declarations alphabetically or by visibility, and do not separate regular methods from extension methods. Instead, put related stuff together, so that someone reading the class from top to bottom would be able to follow the logic of what's happening. Choose an order (either higher-level stuff first, or vice versa) and stick to it.</code></p>\n\n<p>I think this rule can be also applied to the properties.</p>\n"}], "owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553665249, "creation_date": 1553651376, "question_id": 55368621, "link": "https://stackoverflow.com/questions/55368621/is-there-any-property-ordering-convention-in-kotlin", "title": "Is there any property ordering convention in Kotlin?", "body": "<p>For any class in Kotlin I generally have bunch of different properties. I wanted to know if there is any conversion in ordering of those properties according to their type. Basic types that I use are</p>\n\n<ul>\n<li><code>var fields</code></li>\n<li><code>private var fields</code></li>\n<li><code>lateinit var fields</code></li>\n<li><code>private lateinit var fields</code></li>\n<li>everything above with <code>val fields</code></li>\n<li><code>lazy fields</code></li>\n<li><code>private lazy fields</code></li>\n<li>etc.</li>\n</ul>\n\n<p>Well common classification would be having same kind of properties to be declared in a same group. Then what I do is try to declare public fields first then private ones. I was wondering how how about, what about what comes first for say <code>lazy</code> and <code>lateinit</code>. Or what will come after <code>var</code>? <code>private var</code> or <code>lateinit var</code> or <code>lazy val</code>?</p>\n\n<p>Well I know that one can write however they please, but I was wondering if there is any convention, that lists properties according to their certain unspecified level?</p>\n"}, {"tags": ["java", "android", "arraylist", "kotlin", "collections"], "comments": [{"owner": {"reputation": 68467, "user_id": 1081110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1", "display_name": "Dawood ibn Kareem", "link": "https://stackoverflow.com/users/1081110/dawood-ibn-kareem"}, "edited": false, "score": 0, "creation_date": 1553652724, "post_id": 55368316, "comment_id": 97460834, "body": "What do you mean &quot;I can not do iteration&quot;?  I think you&#39;ll have to &quot;do iteration&quot; to solve this."}, {"owner": {"reputation": 362, "user_id": 6613447, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/492940937497445/picture?type=large", "display_name": "\u8881\u6587\u6d9b", "link": "https://stackoverflow.com/users/6613447/%e8%a2%81%e6%96%87%e6%b6%9b"}, "edited": false, "score": 0, "creation_date": 1553664543, "post_id": 55368316, "comment_id": 97463370, "body": "<code>val</code>? what java version?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3056183, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100003592144351/picture?type=large", "display_name": "Matheus Saviczki", "link": "https://stackoverflow.com/users/3056183/matheus-saviczki"}, "edited": false, "score": 0, "creation_date": 1553649521, "post_id": 55368395, "comment_id": 97460243, "body": "its give me the error <code>ExerciseModel cannot be cast to java.util.Collection</code>"}], "tags": [], "owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "is_accepted": false, "score": 0, "last_activity_date": 1553649346, "creation_date": 1553649346, "answer_id": 55368395, "question_id": 55368316, "link": "https://stackoverflow.com/questions/55368316/how-to-convert-collection-of-objects-into-arraylist/55368395#55368395", "title": "How to convert collection of objects into arraylist", "body": "<p>Just can convert a Collection to an ArrayList like this </p>\n\n<pre><code>  arrayList = new ArrayList&lt;Object&gt;(firstIterator);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3073958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDLdr.jpg?s=128&g=1", "display_name": "juliusgutierrez", "link": "https://stackoverflow.com/users/3073958/juliusgutierrez"}, "is_accepted": false, "score": 0, "last_activity_date": 1553659742, "last_edit_date": 1553659742, "creation_date": 1553649442, "answer_id": 55368409, "question_id": 55368316, "link": "https://stackoverflow.com/questions/55368316/how-to-convert-collection-of-objects-into-arraylist/55368409#55368409", "title": "How to convert collection of objects into arraylist", "body": "<p>you can use java-8 feature streams</p>\n\n<p><code>ArrayList&lt;Foo&gt; newList = firstIterator.stream().collect(toCollection(ArrayList::new));</code></p>\n\n<p>you can check the sample stream here : <a href=\"https://www.baeldung.com/java-convert-collection-arraylist\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-convert-collection-arraylist</a></p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 3056183, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100003592144351/picture?type=large", "display_name": "Matheus Saviczki", "link": "https://stackoverflow.com/users/3056183/matheus-saviczki"}, "edited": false, "score": 0, "creation_date": 1553649892, "post_id": 55368445, "comment_id": 97460323, "body": "i need convert this <code>Collection&lt;Collection&lt;ExerciseModel&gt;&gt;</code> to this <code>ArrayList&lt;ArrayList&lt;ExerciseModel&gt;&gt;</code>"}, {"owner": {"reputation": 63, "user_id": 3056183, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100003592144351/picture?type=large", "display_name": "Matheus Saviczki", "link": "https://stackoverflow.com/users/3056183/matheus-saviczki"}, "edited": false, "score": 0, "creation_date": 1553649961, "post_id": 55368445, "comment_id": 97460329, "body": "with this code line its give me the error : <code>ExerciseModel cannot be cast to java.util.Collection</code>"}, {"owner": {"reputation": 96, "user_id": 7697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d698c87d312114cd758a294d9b6f2?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/7697633/chris"}, "reply_to_user": {"reputation": 63, "user_id": 3056183, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100003592144351/picture?type=large", "display_name": "Matheus Saviczki", "link": "https://stackoverflow.com/users/3056183/matheus-saviczki"}, "edited": false, "score": 1, "creation_date": 1553650785, "post_id": 55368445, "comment_id": 97460485, "body": "@MatheusSaviczki Well the code I posted should give you <code>List&lt;List&lt;?&gt;&gt;</code>. It seems the problem lies with <code>firstIterator</code>? Not sure how you&#39;re populating that"}], "tags": [], "owner": {"reputation": 96, "user_id": 7697633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d698c87d312114cd758a294d9b6f2?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/7697633/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1553649751, "creation_date": 1553649751, "answer_id": 55368445, "question_id": 55368316, "link": "https://stackoverflow.com/questions/55368316/how-to-convert-collection-of-objects-into-arraylist/55368445#55368445", "title": "How to convert collection of objects into arraylist", "body": "<p>Not exactly sure I'm understanding your question but maybe this will work</p>\n\n<pre><code>val arrayList = firstIterator.map { it.toList() }\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3056183, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100003592144351/picture?type=large", "display_name": "Matheus Saviczki", "link": "https://stackoverflow.com/users/3056183/matheus-saviczki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1553659742, "creation_date": 1553648584, "last_edit_date": 1553649903, "question_id": 55368316, "link": "https://stackoverflow.com/questions/55368316/how-to-convert-collection-of-objects-into-arraylist", "title": "How to convert collection of objects into arraylist", "body": "<p>I can not do iteration, says that I can not convert my object to Collection, the conversion of that <code>Collection&lt;Collection&lt;Object&gt;&gt;</code>  to <code>ArrayList&lt;ArrayList&lt;Object&gt;&gt;</code>, in my case the object is <code>ExerciseModel()</code> </p>\n\n<p><code>val firstIterator : Collection&lt;Collection&lt;ExerciseModel&gt;&gt;</code> to my</p>\n\n<p><code>val arrayList : ArrayList&lt;ArrayList&lt;ExerciseModel&gt;&gt;</code></p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-livedata"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 1, "creation_date": 1553649606, "post_id": 55368133, "comment_id": 97460261, "body": "The <code>&#47;&#47; update _data</code> is kind of the critical piece of code. What exactly are you doing there?"}, {"owner": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "edited": false, "score": 0, "creation_date": 1560183108, "post_id": 55368133, "comment_id": 99643196, "body": "Please see this <a href=\"https://stackoverflow.com/questions/56521969/how-to-share-an-instance-of-livedata-in-android-app/56521970#56521970\" title=\"how to share an instance of livedata in android app\">stackoverflow.com/questions/56521969/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6035143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa5c3409095ac2bbc37ef64038f3622d?s=128&d=identicon&r=PG&f=1", "display_name": "Jerum ", "link": "https://stackoverflow.com/users/6035143/jerum"}, "edited": false, "score": 0, "creation_date": 1553650476, "post_id": 55368438, "comment_id": 97460439, "body": "I have a floating action button on multiple(but not all) fragments. It would be ideal to simply dispatch a single click listener with the current location to all relevant fragments instead of setting a click listener for each."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 71, "user_id": 6035143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa5c3409095ac2bbc37ef64038f3622d?s=128&d=identicon&r=PG&f=1", "display_name": "Jerum ", "link": "https://stackoverflow.com/users/6035143/jerum"}, "edited": false, "score": 1, "creation_date": 1553651803, "post_id": 55368438, "comment_id": 97460676, "body": "I don&#39;t understand can you explain that further?"}, {"owner": {"reputation": 71, "user_id": 6035143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa5c3409095ac2bbc37ef64038f3622d?s=128&d=identicon&r=PG&f=1", "display_name": "Jerum ", "link": "https://stackoverflow.com/users/6035143/jerum"}, "edited": false, "score": 0, "creation_date": 1553656485, "post_id": 55368438, "comment_id": 97461600, "body": "My activity has multiple fragments and some have a FAB. When the FAB is clicked I want some contextual action to occur (will largely be screen dependant but there are other factors too). I feel that doing activity.fab.onclick() in each of those fragments would break encapsulation."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 71, "user_id": 6035143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa5c3409095ac2bbc37ef64038f3622d?s=128&d=identicon&r=PG&f=1", "display_name": "Jerum ", "link": "https://stackoverflow.com/users/6035143/jerum"}, "edited": false, "score": 1, "creation_date": 1553659125, "post_id": 55368438, "comment_id": 97462098, "body": "then delegate the onClick to the Fragments. I dont understand why you can&#39;t place the onClick logic inside the fragment."}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1584479792, "post_id": 55368438, "comment_id": 107448615, "body": "So we cannot have abstracted LiveData&#39;s?"}], "tags": [], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "is_accepted": true, "score": 2, "last_activity_date": 1553649717, "creation_date": 1553649717, "answer_id": 55368438, "question_id": 55368133, "link": "https://stackoverflow.com/questions/55368133/how-can-i-share-livedata-between-multiple-viewmodels/55368438#55368438", "title": "How can I share LiveData between multiple ViewModels?", "body": "<pre><code>class Derived : Base()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Derived1 : Base()\n</code></pre>\n\n<p>have their own instance of:</p>\n\n<pre><code>private val _ data = MutableLiveData()\nval data: LiveData = _data\n</code></pre>\n\n<p>that means you need to</p>\n\n<pre><code>derived.data.observe { // do something }\nderived1.data.observer { // do something }\nderived.someEvent(someFoo)\nderived1.someEvent(someFoo)\n</code></pre>\n\n<p>You are trying to achieve something in a wrong way.</p>\n"}], "owner": {"reputation": 71, "user_id": 6035143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa5c3409095ac2bbc37ef64038f3622d?s=128&d=identicon&r=PG&f=1", "display_name": "Jerum ", "link": "https://stackoverflow.com/users/6035143/jerum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 55368438, "answer_count": 1, "score": 2, "last_activity_date": 1553649717, "creation_date": 1553646871, "question_id": 55368133, "link": "https://stackoverflow.com/questions/55368133/how-can-i-share-livedata-between-multiple-viewmodels", "title": "How can I share LiveData between multiple ViewModels?", "body": "<p>I've tried extracting the value into a base class and having the ViewModels extend it. When I do that, however, the Observer isn't sticking to the LiveData. For instance, when I have a parent class with LiveData:</p>\n\n<pre><code>class Base : ViewModel() { \n    private val _ data = MutableLiveData()\n    val data: LiveData = _data\n\n    fun someEvent(foo: Foo) { // update _data }\n}\n\nclass Derived : Base()\n\nclass Derived1 : Base()\n</code></pre>\n\n<p>Then get one of those ViewModels and observe <code>data</code>:</p>\n\n<pre><code>class Frag : Fragment {\n    onViewCreated() {\n        // get Derived, ViewModelProviders.of ...etc\n       derived.data.observe { // Doesn't observe changes }\n    }\n}\n</code></pre>\n\n<p>Calling <code>Base.someEvent(foo)</code> doesn't notify the LiveData in the Fragment.</p>\n\n<p>I want to avoid getting a reference to both subclasses and invoking <code>someEvent</code> on each. One thing to note is that I'm using a single Activity approach and all ViewModels are Activity scoped.</p>\n"}, {"tags": ["android", "kotlin", "oauth-2.0", "jwt"], "comments": [{"owner": {"reputation": 6658, "user_id": 731178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/du44q.jpg?s=128&g=1", "display_name": "J&#225;n Hala\u0161a", "link": "https://stackoverflow.com/users/731178/j%c3%a1n-hala%c5%a1a"}, "edited": false, "score": 0, "creation_date": 1553672993, "post_id": 55367864, "comment_id": 97466568, "body": "Do you have an HTTP log of the Volley request? I mean HTTP reqest headers and body sent to the token endpoint - <code>POST &#47;oauth&#47;token HTTP&#47;1.1 ...</code>?"}, {"owner": {"reputation": 376, "user_id": 8405084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MRpc.png?s=128&g=1", "display_name": "Mukul Bhardwaj", "link": "https://stackoverflow.com/users/8405084/mukul-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1553838258, "post_id": 55367864, "comment_id": 97542019, "body": "which version of volley in gradle are you using?"}, {"owner": {"reputation": 343, "user_id": 10176058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yQGelvTb78k/AAAAAAAAAAI/AAAAAAAAFQE/FSmSYYOpWdI/photo.jpg?sz=128", "display_name": "Axel Ros", "link": "https://stackoverflow.com/users/10176058/axel-ros"}, "edited": false, "score": 0, "creation_date": 1553902723, "post_id": 55367864, "comment_id": 97572551, "body": "Thanks you guys, i did it in a simplest way. It was not necessary to create the custom object. It was enough adding method getHeaders and getParams. The problem was that my body haven&#39;t got this method:  override fun getBodyContentType(): String {                     return &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;                 }"}], "owner": {"reputation": 343, "user_id": 10176058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yQGelvTb78k/AAAAAAAAAAI/AAAAAAAAFQE/FSmSYYOpWdI/photo.jpg?sz=128", "display_name": "Axel Ros", "link": "https://stackoverflow.com/users/10176058/axel-ros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553644593, "creation_date": 1553644593, "question_id": 55367864, "link": "https://stackoverflow.com/questions/55367864/invalid-request-missing-grant-type", "title": "Invalid request missing grant type", "body": "<p>I'm doing a post call to my OAUTH2 authentication with Android, trying to recibe my Bearer Token.</p>\n\n<p>I'm using Kotlin language and i'm doing the post request with Volley.</p>\n\n<p>The problem is that when i do my post request with Postman, it work's perfect, but when i do it in the same way using Volley post, my API REST yells: Invalid Request Exception, missing grant type.</p>\n\n<p>And my android yells: Unexpected response code 400 for <a href=\"http://192.168.1.254:8081/oauth/token\" rel=\"nofollow noreferrer\">http://192.168.1.254:8081/oauth/token</a></p>\n\n<p>Android call:</p>\n\n<pre><code>private fun loginUser() {\n\n        var grant_type = \"password\"\n        var username = etUsername.text.toString()\n        var password = etPassword.text.toString()\n\n        val credentials = \"angularapp\"+\":\"+\"12345\"\n\n        // Post parameters\n        // Form fields and values\n        val params = HashMap&lt;String,String&gt;()\n        params[\"grant_type\"] = grant_type\n        params[\"username\"] = username\n        params[\"password\"] = password\n\n        val jsonObject = JSONObject(params)\n\n\n        val request = CustomJsonObjectRequestBasicAuth(Request.Method.POST, Network.API_URL_LOGIN,jsonObject,\n            Response.Listener{ response-&gt;\n                Log.d(\"RESPONSEEEE\", response.toString())\n                try {\n                    // Parse the json object here\n                   Log.d(\"Response\" ,response.toString())\n                    val intent = Intent(this, PatientsActivity::class.java)\n                    intent.putExtra(Tags.FLOOR.toString(), ((spiFloor?.selectedItemId!!+1)))\n                    startActivity(intent)\n                }catch (e:Exception){\n                    e.printStackTrace()\n\n                }\n            }, Response.ErrorListener{\n                Log.d(\"ERROR\", \"VOLLEY ERROR\")\n            },credentials\n        )\n\n        // Add the volley request to request queue\n        VolleySingleton.getInstance(this).addToRequestQueue(request)\n\n    }\n\n    // Class to make a volley json object request with basic authentication\n    class CustomJsonObjectRequestBasicAuth(\n        method:Int, url: String,\n        jsonObject: JSONObject?,\n        listener: Response.Listener&lt;JSONObject&gt;,\n        errorListener: Response.ErrorListener,\n        credentials:String\n    )\n        : JsonObjectRequest(method,url, jsonObject, listener, errorListener) {\n\n        private var mCredentials:String = credentials\n\n        @Throws(AuthFailureError::class)\n        override fun getHeaders(): Map&lt;String, String&gt; {\n            val headers = HashMap&lt;String, String&gt;()\n            headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\"\n            val auth = \"Basic \" + Base64.encodeToString(mCredentials.toByteArray(), Base64.NO_WRAP)\n            headers[\"Authorization\"] = auth\n            System.out.println(headers.toString())\n            return headers\n        }\n    }\n\n</code></pre>\n"}, {"tags": ["android", "kotlin", "bluetooth-lowenergy", "rx-java2", "reactive"], "answers": [{"comments": [{"owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1553720058, "post_id": 55384190, "comment_id": 97494424, "body": "Thanks. This worked for me. Unfortunately I am unable to retrieve the value because of a BleCharacteristicNotFoundException. I think the way I am creating UUIDs is a problem, though I am not certain. I posted my question here for anyone who is interested: <a href=\"https://stackoverflow.com/questions/55386104/com-polidea-rxandroidble2-exceptions-blecharacteristicnotfoundexception-charact\" title=\"com polidea rxandroidble2 exceptions blecharacteristicnotfoundexception charact\">stackoverflow.com/questions/55386104/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "is_accepted": true, "score": 1, "last_activity_date": 1553721452, "last_edit_date": 1553721452, "creation_date": 1553711154, "answer_id": 55384190, "question_id": 55367644, "link": "https://stackoverflow.com/questions/55367644/how-can-i-retrieve-an-integer-from-a-singleflatmap-in-rxjava/55384190#55384190", "title": "How can I retrieve an integer from a SingleFlatMap in RxJava?", "body": "<p>You are supposed to subscribe to <code>Single</code>. Following the examples provided by <a href=\"https://github.com/Polidea/RxAndroidBle\" rel=\"nofollow noreferrer\">RxAndroidBle</a>, something like this might work in your case:</p>\n\n<pre><code>if (rxBleDevice.connectionState != RxBleConnection.RxBleConnectionState.CONNECTED) {\n\n // Have your charUUID ready. Might need extra null checks for rxBleDevice\n val charUUID = rxBleDevice.bluetoothDevice.uuids[0].uuid\n\n rxBleDevice!!.establishConnection(false) ?\n  .doOnNext {\n   _ -&gt; Log.d(\"Device: \", \"Connection Established\")\n  } ?\n  .flatMapSingle {\n   rxBleConnection -&gt; rxBleConnection.readCharacteristic(charUUID)\n  } ? .subscribe({\n   count -&gt;\n   // count should be in bytes\n   println(\"OUTPUT: $count\")\n\n  }, {\n   throwable -&gt;\n   Log.d(\"ERROR: \", \"$throwable\")\n  })\n\n}\n</code></pre>\n"}], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55384190, "answer_count": 1, "score": 0, "last_activity_date": 1553721452, "creation_date": 1553642977, "last_edit_date": 1553645521, "question_id": 55367644, "link": "https://stackoverflow.com/questions/55367644/how-can-i-retrieve-an-integer-from-a-singleflatmap-in-rxjava", "title": "How can I retrieve an integer from a SingleFlatMap in RxJava?", "body": "<p>I'm trying to retrieve a value from a Bluetooth Device.</p>\n\n<pre><code>if (rxBleDevice.connectionState != RxBleConnection.RxBleConnectionState.CONNECTED) {\n rxBleDevice!!.establishConnection(false) ? .subscribe({\n  rxBleConnection -&gt;\n\n  Log.d(\"Device: \", \"Connection Established\")\n\n  val stringDeviceUUID = rxBleDevice.bluetoothDevice.uuids[0].toString()\n  val charUUID = UUID.nameUUIDFromBytes(stringDeviceUUID.toByteArray())\n\n  val count = rxBleConnection.readCharacteristic(charUUID)\n\n  println(\"OUTPUT: ${count}\")\n\n }, {\n  throwable -&gt; Log.d(\"Device: \", \"$throwable\")\n })\n}\n</code></pre>\n\n<p>I'm using the following dependencies, mainly RxJava and a reactive Bluetooth library called RxAndroidBLE:</p>\n\n<pre><code>implementation 'io.reactivex.rxjava2:rxkotlin:2.1.0'\nimplementation \"com.polidea.rxandroidble2:rxandroidble:1.8.1\"\nimplementation \"io.reactivex.rxjava2:rxjava:2.2.7\"\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>I/System.out: OUTPUT: io.reactivex.internal.operators.single.SingleFlatMap@bf9162d\n</code></pre>\n\n<p>I have no how to process this object. I believe I should be receiving a simple ByteArray from the Bluetooth device.</p>\n\n<p>An example for the value I should see is <code>datc00099</code>, indicating a count of 99.</p>\n"}, {"tags": ["kotlin", "android-viewmodel"], "answers": [{"comments": [{"owner": {"reputation": 1086, "user_id": 5223744, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5l8mZ.jpg?s=128&g=1", "display_name": "Igor Fridman", "link": "https://stackoverflow.com/users/5223744/igor-fridman"}, "edited": false, "score": 0, "creation_date": 1578384917, "post_id": 55412053, "comment_id": 105411361, "body": "If you are using android X the import should be from: androidx.lifecycle.ViewModelProvider  val viewModel = ViewModelProvider(this).get(MainViewModel::class.java)"}], "tags": [], "owner": {"reputation": 1, "user_id": 1315601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5427ff0cf45c6edd4e6391718f2fc4e?s=128&d=identicon&r=PG", "display_name": "Simon Frost", "link": "https://stackoverflow.com/users/1315601/simon-frost"}, "is_accepted": true, "score": 0, "last_activity_date": 1553842862, "creation_date": 1553842862, "answer_id": 55412053, "question_id": 55366631, "link": "https://stackoverflow.com/questions/55366631/not-a-subtype-error-when-instantiating-androidviewmodel-subclass/55412053#55412053", "title": "&quot;Not a subtype&quot; error when instantiating AndroidViewModel subclass", "body": "<p>For future reference for anyone who finds this: My problem was importing the <code>AndroidViewModel</code> class from two different packages in the two source files - one from the androidx namespace and one not.</p>\n\n<p>Migrating all my gradle packages to androidx versions (where possible) and updating all the <code>import</code> statements resolved the problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 1315601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5427ff0cf45c6edd4e6391718f2fc4e?s=128&d=identicon&r=PG", "display_name": "Simon Frost", "link": "https://stackoverflow.com/users/1315601/simon-frost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 55412053, "answer_count": 1, "score": 0, "last_activity_date": 1553842862, "creation_date": 1553636470, "question_id": 55366631, "link": "https://stackoverflow.com/questions/55366631/not-a-subtype-error-when-instantiating-androidviewmodel-subclass", "title": "&quot;Not a subtype&quot; error when instantiating AndroidViewModel subclass", "body": "<p>As a seasoned iOS developer making my first Android application, I'm attempting to use an <code>AndroidViewModel</code> to allow cross-fragment/cross-configuration-change persistence of my runtime state. I'm using <code>AndroidViewModel</code> rather than <code>ViewModel</code> because I need access to the application context to load some static resources.</p>\n\n<p>This is my AndroidViewModel subclass:</p>\n\n<pre><code>class QuestsViewModel(application: Application) : AndroidViewModel(application) {\n  // Some member state variables\n}\n</code></pre>\n\n<p>And I'm trying to access it from my main activity's <code>onCreate</code> like so:</p>\n\n<pre><code>val viewModel = ViewModelProviders.of(this,\n  ViewModelProvider.AndroidViewModelFactory(this.application))\n    .get(QuestsViewModel::class.java)\n</code></pre>\n\n<p>But I get the compiler error:</p>\n\n<blockquote>\n  <p>Type parameter bound for T in operator fun  get(p0: Class): T\n   is not satisfied: inferred type QuestsViewModel! is not a subtype of ViewModel!</p>\n</blockquote>\n\n<p>I'm confused as to why it thinks my custom ViewModel class is not a subclass, when ApplicationViewModel (which I inherit from) directly inherits from ViewModel?</p>\n\n<p>For clarity I'm attempting to write this project entirely in Kotlin (if possible). Just in case it's relevant, my gradle dependencies are:</p>\n\n<pre><code>    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.google.android.gms:play-services-maps:16.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.support:support-v4:28.0.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n\n    implementation 'com.android.support:recyclerview-v7:28.0.0'\n    implementation 'com.android.volley:volley:1.1.1'\n\n    def lifecycle_version = \"2.0.0\"\n    implementation \"android.arch.lifecycle:extensions:1.1.1\"\n    implementation \"androidx.lifecycle:lifecycle-viewmodel:$lifecycle_version\"\n    kapt \"androidx.lifecycle:lifecycle-compiler:$lifecycle_version\"\n</code></pre>\n"}, {"tags": ["arrays", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 4, "creation_date": 1553640537, "post_id": 55366396, "comment_id": 97458164, "body": "Well, yes, since mutableListOf() creates and returns a List, and you&#39;re thus creatng a list containing a list. Just don&#39;t: <code>var matrix: MutableList&lt;MutableList&lt;Cell&gt;&gt; = mutableListOf()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 30, "user_id": 11260505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc5eebe3bf73a5152fae0d79e45ef72?s=128&d=identicon&r=PG&f=1", "display_name": "SuperSaiyanJSTN", "link": "https://stackoverflow.com/users/11260505/supersaiyanjstn"}, "is_accepted": true, "score": 1, "last_activity_date": 1553682309, "creation_date": 1553682309, "answer_id": 55374919, "question_id": 55366396, "link": "https://stackoverflow.com/questions/55366396/mutablelistofmutablelistof-return-an-array-of-array-with-a-size-equal-to-1-w/55374919#55374919", "title": "mutableListOf(mutableListOf()) return an array of array with a size equal to 1 when it&#39;s first declared", "body": "<p>You have an [0][0] cell, what looks like[[]] this, from the beginning so it means when you are adding one you have a second line of cells.\nOr try\nvar matrix: MutableList> = mutableListOf()</p>\n"}], "owner": {"reputation": 9938, "user_id": 3672184, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dzbA6.jpg?s=128&g=1", "display_name": "Cool", "link": "https://stackoverflow.com/users/3672184/cool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 55374919, "answer_count": 1, "score": 0, "last_activity_date": 1553682309, "creation_date": 1553635388, "question_id": 55366396, "link": "https://stackoverflow.com/questions/55366396/mutablelistofmutablelistof-return-an-array-of-array-with-a-size-equal-to-1-w", "title": "mutableListOf(mutableListOf()) return an array of array with a size equal to 1 when it&#39;s first declared", "body": "<p>When I create a matrix (Array of Array) with the following declaration the returned size is 1 instead of 0 :</p>\n\n<pre><code>var matrix: MutableList&lt;MutableList&lt;Cell&gt;&gt; = mutableListOf(mutableListOf())\n</code></pre>\n\n<p>which lead to having a size equal to 2 when I add the first array to the matrix : </p>\n\n<pre><code>matrix.add(lineOfCells)\n</code></pre>\n\n<p>matrix now contain a first empty array at index 0 and <code>lineOfCells</code> array at index 1, but what I'm looking for is just to have <code>lineOfCells</code> at index 0.</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "koin"], "comments": [{"owner": {"reputation": 494, "user_id": 10138929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419ff84b6b4c28df9f29a2531c981e69?s=128&d=identicon&r=PG&f=1", "display_name": "samaromku", "link": "https://stackoverflow.com/users/10138929/samaromku"}, "edited": false, "score": 0, "creation_date": 1553630505, "post_id": 55364838, "comment_id": 97454340, "body": "<a href=\"https://stackoverflow.com/questions/32559333/retrofit-2-dynamic-url\" title=\"retrofit 2 dynamic url\">stackoverflow.com/questions/32559333/retrofit-2-dynamic-url</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": false, "score": 0, "last_activity_date": 1553628630, "creation_date": 1553628630, "answer_id": 55364939, "question_id": 55364838, "link": "https://stackoverflow.com/questions/55364838/how-i-change-the-retrofit-url-at-runtime/55364939#55364939", "title": "How i change the retrofit URL at runtime", "body": "<blockquote>\n  <p>I already tried change the baseUrl(\"<a href=\"http://192.168.192.168/\" rel=\"nofollow noreferrer\">http://192.168.192.168/</a>\") to baseUrl(\"http://\")and change the url on retrofit call but my app crashs and return illegal URL error.</p>\n</blockquote>\n\n<p>You can leave it as a <code>baseUrl</code> if you use <code>@URL</code> it will overwrite the one on yout <code>Retrofit.Builder()</code></p>\n\n<p>You can use <code>@URL</code> parameter to change the endpoint dynamically.</p>\n\n<pre><code>@GET\nfun getUsers(@Url String url) : Observable&lt;UserResponse&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7750, "user_id": 846089, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ea931c9bfa020309c65b7f80c948bdb?s=128&d=identicon&r=PG", "display_name": "Horrorgoogle", "link": "https://stackoverflow.com/users/846089/horrorgoogle"}, "is_accepted": true, "score": 1, "last_activity_date": 1553634937, "last_edit_date": 1553634937, "creation_date": 1553634577, "answer_id": 55366222, "question_id": 55364838, "link": "https://stackoverflow.com/questions/55364838/how-i-change-the-retrofit-url-at-runtime/55366222#55366222", "title": "How i change the retrofit URL at runtime", "body": "<p>you must have to add these lines in your code:</p>\n\n<p><strong>First Step:</strong>\nAdd the new CallAdapter <strong>RxJavaCallAdapterFactory.create()</strong> when building a Retrofit instance.</p>\n\n<pre><code>public static final String BASE_URL = \"http://google.com/\";\npublic static Retrofit getClient(String baseUrl) {\n    if (retrofit==null) {\n        retrofit = new Retrofit.Builder()\n                .baseUrl(baseUrl)\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n    }\n    return retrofit;\n}\n</code></pre>\n\n<p><strong>Next step:</strong>\nUpdate the <strong>APIService</strong> for example:-> <em>savePost(String title, String body, String userId)</em> method to become an Observable. </p>\n\n<pre><code>public interface APIService {\n    @GET\n    Call&lt;ResponseBody&gt; list(@Url String url);\n//or\n\n@POST(\"/posts\")\n@FormUrlEncoded\nObservable&lt;Post&gt; savePost(@Field(\"title\") String title,\n                          @Field(\"body\") String body,\n                          @Field(\"userId\") long userId);\n}\n</code></pre>\n\n<p><strong>Final step:</strong>\nWhen making the requests, our anonymous subscriber responds to the observable's stream which emits event.</p>\n\n<pre><code>public void sendPost(String title, String body) {\n\n    // RxJava\n    mAPIService.savePost(title, body, 1).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread())\n            .subscribe(new Subscriber&lt;Post&gt;() {\n                @Override\n                public void onCompleted() {\n\n                }\n\n                @Override\n                public void onError(Throwable e) {\n\n                }\n\n                @Override\n                public void onNext(Post post) {\n                    showResponse(post.toString());\n                }\n            });\n}\n</code></pre>\n\n<p>this is way you build your dynamic urls: want to learn more details full description link: <strong><a href=\"https://code.tutsplus.com/tutorials/sending-data-with-retrofit-2-http-client-for-android--cms-27845\" rel=\"nofollow noreferrer\">Sending Data With Retrofit 2 HTTP Client for Android</a></strong></p>\n\n<p>and See <a href=\"https://square.github.io/retrofit/2.x/retrofit/retrofit2/Retrofit.Builder.html#baseUrl-okhttp3.HttpUrl-\" rel=\"nofollow noreferrer\">base URL</a> for details of how the value will be resolved against a base URL to create the full endpoint URL.</p>\n\n<p>if you are doing using kotlin: follow this link. <a href=\"https://medium.com/@serapbercin001/how-to-use-dynamic-urls-at-runtime-with-retrofit-2-4ebb71c7e34d\" rel=\"nofollow noreferrer\">dynamic urls at Runtime with Retrofit 2</a></p>\n"}], "owner": {"reputation": 51, "user_id": 10255076, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212345381260986/picture?type=large", "display_name": "Marcello Sousa", "link": "https://stackoverflow.com/users/10255076/marcello-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1785, "favorite_count": 0, "accepted_answer_id": 55366222, "answer_count": 2, "score": 4, "last_activity_date": 1553634937, "creation_date": 1553628245, "last_edit_date": 1553628820, "question_id": 55364838, "link": "https://stackoverflow.com/questions/55364838/how-i-change-the-retrofit-url-at-runtime", "title": "How i change the retrofit URL at runtime", "body": "<p>I need change the URL base in retrofit, i'm using koin to create a retrofit module on app startup and i want change this url in runtime.</p>\n\n<p>I already tried change the baseUrl(\"<a href=\"http://192.168.192.168/\" rel=\"nofollow noreferrer\">http://192.168.192.168/</a>\") to baseUrl(\"http://\")and change the url on retrofit call but my app crashs and return illegal URL error.</p>\n\n<p>This is my fun to create the builder</p>\n\n<pre><code>fun createRetrofit(okHttpClient: OkHttpClient): Retrofit {\n    return  Retrofit.Builder()\n    .baseUrl(\"http://192.168.192.168/\")//i need change this at runtime\n    .client(okHttpClient)\n    .addConverterFactory(GsonConverterFactory.create())            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n.build()\n}\n</code></pre>\n\n<p>create a bean to my module</p>\n\n<pre><code>val retrofitModule: Module = applicationContext {\n    bean { createRetrofit(get()) }\n}\n</code></pre>\n\n<p>and start the koin:</p>\n\n<pre><code>startKoin(application = this,\n  modules = listOf(retrofitModule, ...)\n)\n</code></pre>\n\n<p>someone  can i help me with this?</p>\n"}, {"tags": ["android", "kotlin", "alarmmanager", "repeat"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1553623757, "post_id": 55363660, "comment_id": 97451263, "body": "A question of this type should also include attempts to resolve the problem by oneself and why that attempt did not work. See <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1553624147, "post_id": 55363660, "comment_id": 97451454, "body": "i tied many codes and no of them has work, why i will put a wrong code i want just a new way a new idea"}, {"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1553626737, "post_id": 55363660, "comment_id": 97452703, "body": "what you are saying is &quot;I do not understand what the code I try to use do&quot;. So maybe you should go back step or two and step up your basics?"}, {"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553715482, "post_id": 55363660, "comment_id": 97492287, "body": "Yes, i should do that but i&#39;m not talking about loops brother !!"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553624639, "post_id": 55363855, "comment_id": 97451687, "body": "there is a problem in this line : val mIntent = Intent(context, broadCastReceiver) i use  val mIntent = Intent(this, broadCastReceiver) but still the same problem"}, {"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "reply_to_user": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553626514, "post_id": 55363855, "comment_id": 97452597, "body": "Please, check my repository, you have to add the receiver to manifest.xml"}, {"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "reply_to_user": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553627783, "post_id": 55363855, "comment_id": 97453159, "body": "That&#39;s another quesiton @WIKOSO, and no, it does not, you have to code a little bit to produce this issue, if you want create a different quesiton explainin what you&#39;ve tried and what you want to achieve and I can take a look"}, {"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553684023, "post_id": 55363855, "comment_id": 97472882, "body": "this method works fine in the Emulator but it is not working in real devices, what&#39;s wrong?"}, {"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553686882, "post_id": 55363855, "comment_id": 97474675, "body": "there is not an error just the Toast it does not run when i use a real device"}], "tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": true, "score": 1, "last_activity_date": 1553626475, "last_edit_date": 1553626475, "creation_date": 1553624326, "answer_id": 55363855, "question_id": 55363660, "link": "https://stackoverflow.com/questions/55363660/how-to-repeat-a-function-every-hour-in-android-studio-using-kotlin/55363855#55363855", "title": "How to Repeat a function every Hour in Android Studio using Kotlin?", "body": "<p>I've created a demo project so you can take a look at it : </p>\n\n<p><a href=\"https://github.com/joancolmenerodev/BroadcastReceiverAndAlarmManagerInKotlin\" rel=\"nofollow noreferrer\">https://github.com/joancolmenerodev/BroadcastReceiverAndAlarmManagerInKotlin</a></p>\n\n<hr>\n\n<p>You first have to create a <a href=\"https://developer.android.com/reference/android/content/BroadcastReceiver\" rel=\"nofollow noreferrer\"><code>BroadcastReceiver</code></a>, and then using <a href=\"https://developer.android.com/reference/android/app/AlarmManager\" rel=\"nofollow noreferrer\"><code>AlarmManager</code></a> you can decide the interval of time you want to be called.</p>\n\n<p>Create a <code>BroadcastReceiver</code> you can do it as follows : </p>\n\n<pre><code>val broadCastReceiver = object : BroadcastReceiver() {\n     override fun onReceive(contxt: Context?, intent: Intent?) {\n         toast(\"This toast will be shown every X minutes\")\n     }\n}\n</code></pre>\n\n<p>And then you have this method to start the job : </p>\n\n<pre><code>val mIntent = Intent(context, broadCastReceiver)\n\nval mPendingIntent = PendingIntent.getBroadcast(context, REQUEST_CODE, mIntent, 0)\nval mAlarmManager = context\n    .getSystemService(Context.ALARM_SERVICE) as AlarmManager\nmAlarmManager.setRepeating(\n    AlarmManager.ELAPSED_REALTIME_WAKEUP, System.currentTimeMillis(),\n    CHANGETOYOURDESIREDSECONDS, mPendingIntent\n)\n</code></pre>\n\n<p>And then you'll be able to see the Toast even if the app is closed.</p>\n\n<h2>Edit</h2>\n\n<p>You can register your <code>BroadcastReceiver</code> using <code>context.registerReceiver(receiver, IntentFilter(\"something\"))</code>\nand then adding to the <code>mIntent</code> and action for \"something\".</p>\n\n<p>If you don't like this way, you can create a new class named <code>MyReceiver</code> that extends <code>BradcastReceiver</code> as follows : </p>\n\n<pre><code>class MyReceiver : BroadcastReceiver() {\n\n    override fun onReceive(context: Context, intent: Intent) {\n        Toast.makeText(context,\"This toast will be shown every X minutes\", Toast.LENGTH_SHORT).show()\n    }\n}\n</code></pre>\n\n<p>And then start the alarm doing this : </p>\n\n<p>val mIntent = Intent(this, MyReceiver::class.java)</p>\n\n<pre><code>val mPendingIntent = PendingIntent.getBroadcast(this, 0, mIntent, PendingIntent.FLAG_UPDATE_CURRENT)\n        val mAlarmManager = this\n            .getSystemService(Context.ALARM_SERVICE) as AlarmManager\n        mAlarmManager.setRepeating(\n            AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),\n            WHATEVERYOUWANT, mPendingIntent\n        )\n</code></pre>\n\n<p><strong>Note: By default is set to 60000</strong></p>\n\n<blockquote>\n  <p>Value will be forced up to 60000 as of Android 5.1; don't rely on this to be exact  </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553626980, "post_id": 55364491, "comment_id": 97452834, "body": "This is not Kotlin."}, {"owner": {"reputation": 3818, "user_id": 9381524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wON6AAvKqTo/AAAAAAAAAAI/AAAAAAAABgI/ZdUXvY6sePs/photo.jpg?sz=128", "display_name": "Jurij Pitulja", "link": "https://stackoverflow.com/users/9381524/jurij-pitulja"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553627069, "post_id": 55364491, "comment_id": 97452870, "body": "implementation &quot;androidx.work:work-runtime-ktx:$work_version&quot;  - for Kotlin"}, {"owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "edited": false, "score": 0, "creation_date": 1553772050, "post_id": 55364491, "comment_id": 97512851, "body": "<a href=\"https://stackoverflow.com/questions/55396123/how-to-repeat-an-action-everyday-in-android-studio\" title=\"how to repeat an action everyday in android studio\">stackoverflow.com/questions/55396123/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3818, "user_id": 9381524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wON6AAvKqTo/AAAAAAAAAAI/AAAAAAAABgI/ZdUXvY6sePs/photo.jpg?sz=128", "display_name": "Jurij Pitulja", "link": "https://stackoverflow.com/users/9381524/jurij-pitulja"}, "is_accepted": false, "score": 0, "last_activity_date": 1553626752, "creation_date": 1553626752, "answer_id": 55364491, "question_id": 55363660, "link": "https://stackoverflow.com/questions/55363660/how-to-repeat-a-function-every-hour-in-android-studio-using-kotlin/55364491#55364491", "title": "How to Repeat a function every Hour in Android Studio using Kotlin?", "body": "<p>If you are using AndroidX(JetPack) library then concider to use <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager\" rel=\"nofollow noreferrer\">Workmanager</a></p>\n\n<p>Simple example:</p>\n\n<pre><code>public class MyWorker extends Worker {\n\n    static final String TAG = \"workmng\";\n\n    @NonNull\n    @Override\n    public WorkerResult doWork() {\n        Log.d(TAG, \"doWork: start\");\n\n       //Do your job here\n\n        Log.d(TAG, \"doWork: end\");\n\n       return WorkerResult.SUCCESS;\n    }\n}\n</code></pre>\n\n<p>And start like this, to do your job each hour : </p>\n\n<pre><code>PeriodicWorkRequest myWorkRequest = new PeriodicWorkRequest.Builder(MyWorker.class, 60, TimeUnit.MINUTES)\n   .build();\n</code></pre>\n\n<p>Add in app gradle file:</p>\n\n<pre><code>dependencies {\ndef work_version = 2.0.0\n\n// (Java only)\nimplementation \"androidx.work:work-runtime:$work_version\"\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10980547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a22c040c280eb1801973d356edd3977?s=128&d=identicon&r=PG&f=1", "display_name": "WIKOSO", "link": "https://stackoverflow.com/users/10980547/wikoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1280, "favorite_count": 0, "accepted_answer_id": 55363855, "answer_count": 2, "score": 0, "last_activity_date": 1553626752, "creation_date": 1553623552, "question_id": 55363660, "link": "https://stackoverflow.com/questions/55363660/how-to-repeat-a-function-every-hour-in-android-studio-using-kotlin", "title": "How to Repeat a function every Hour in Android Studio using Kotlin?", "body": "<p>I want to repeat a function( or any action ) every one Hour ( for example ) even if the app is not running.</p>\n"}, {"tags": ["kotlin", "actions-on-google"], "answers": [{"comments": [{"owner": {"reputation": 1271, "user_id": 1446856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2YD2.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1446856/chris"}, "edited": false, "score": 0, "creation_date": 1553683955, "post_id": 55365173, "comment_id": 97472843, "body": "Correct me if I m wrong, isn&#39;t this demonstrating how to retrieve a value from the UserStorage instead of saving it ?"}], "tags": [], "owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "is_accepted": false, "score": 1, "last_activity_date": 1553629602, "creation_date": 1553629602, "answer_id": 55365173, "question_id": 55362300, "link": "https://stackoverflow.com/questions/55362300/how-to-i-save-some-data-into-userstorage-in-the-java-kotlin-client-library-for-a/55365173#55365173", "title": "How to I save some data into userStorage in the Java/Kotlin Client Library for Actions on Google", "body": "<p>From <a href=\"https://github.com/actions-on-google/dialogflow-name-psychic-java/blob/master/src/main/java/com/example/MyActionsApp.java\" rel=\"nofollow noreferrer\">Name Psychic</a>:</p>\n\n<pre><code>@ForIntent(\"request_name_permission\")\npublic ActionResponse requestNamePermission(ActionRequest request) {\n  ResponseBuilder response = getResponseBuilder(request);\n\n  String requestedPermission = ConstantsKt.PERMISSION_NAME;\n\n  response.getConversationData().put(DATA_KEY_REQUESTED_PERMISSION, requestedPermission);\n\n  String storageKey = STORAGE_KEY_NAME;\n\n  if (!request.getUserStorage().containsKey(storageKey)) {\n    Permission permission =\n        new Permission()\n          .setContext(formatResponse(\"permission_reason\"))\n          .setPermissions(new String[] {requestedPermission});\n    response.add(\"PLACEHOLDER_FOR_PERMISSION\");\n    response.add(permission);\n  } else {\n    String name = (String) request.getUserStorage().get(storageKey);\n    response.add(formatResponse(\"say_name\", name));\n    response.endConversation();\n  }\n\n  return response.build();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1271, "user_id": 1446856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2YD2.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1446856/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1553699933, "last_edit_date": 1553699933, "creation_date": 1553684191, "answer_id": 55375511, "question_id": 55362300, "link": "https://stackoverflow.com/questions/55362300/how-to-i-save-some-data-into-userstorage-in-the-java-kotlin-client-library-for-a/55375511#55375511", "title": "How to I save some data into userStorage in the Java/Kotlin Client Library for Actions on Google", "body": "<p>I guess the snippet I was looking for is</p>\n\n<pre><code> Map&lt;String, Object&gt; storage = response.getUserStorage();\n\nString requestedPermission =\n    (String) request.getConversationData().get(DATA_KEY_REQUESTED_PERMISSION);\nif (requestedPermission.equals(ConstantsKt.PERMISSION_NAME)) {\n  String name = request.getUser().getProfile().getDisplayName();\n  storage.put(STORAGE_KEY_NAME, name);\n  response.add(formatResponse(\"say_name\", name));\n  response.endConversation();\n  return response.build();\n} \nif (requestedPermission.equals(ConstantsKt.PERMISSION_DEVICE_COARSE_LOCATION)) {\n  String location = request.getDevice().getLocation().getCity();\n  storage.put(STORAGE_KEY_LOCATION, location);\n  showLocationOnScreen(request, response);\n  return response.build();\n} \n</code></pre>\n\n<p>The equivalent of my javascript code into Kotlin would be </p>\n\n<pre><code>fun saveFloor(request: ActionRequest, floor: String) {\n    val response = getResponseBuilder(request)\n    val storage = response.userStorage as MutableMap\n\n    storage[\"floor\"] = floor\n}\n</code></pre>\n\n<p>Cheers to <a href=\"https://stackoverflow.com/users/1491707/nick-felker\">Nick</a> for pointing me in the right direction</p>\n"}], "owner": {"reputation": 1271, "user_id": 1446856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2YD2.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1446856/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553704221, "creation_date": 1553618768, "last_edit_date": 1553704221, "question_id": 55362300, "link": "https://stackoverflow.com/questions/55362300/how-to-i-save-some-data-into-userstorage-in-the-java-kotlin-client-library-for-a", "title": "How to I save some data into userStorage in the Java/Kotlin Client Library for Actions on Google", "body": "<p>I am trying to save some info in the userStorage in Kotlin</p>\n\n<p>In javascript, I did the following </p>\n\n<pre><code>exports.saveFloor = (conv, floor) =&gt; {\nconv.user.storage.floor = floor;\n</code></pre>\n\n<p>}</p>\n\n<p>here is the client <a href=\"https://github.com/actions-on-google/actions-on-google-java\" rel=\"nofollow noreferrer\">library</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553617294, "post_id": 55361725, "comment_id": 97447587, "body": "The toString() doesn&#39;t work because the last expression you have inside the let block is the for loop, and its type is Unit. So you&#39;re calling toString() on a Unit. See <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#returning-a-value-from-a-lambda-expression\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 2, "last_activity_date": 1553618523, "creation_date": 1553618523, "answer_id": 55362225, "question_id": 55361725, "link": "https://stackoverflow.com/questions/55361725/using-let-standard-function-to-return-a-string/55362225#55362225", "title": "Using let() standard function to return a string", "body": "<p>The reason for this behaviour is that <code>for</code> is not an expression. </p>\n\n<p>But the whole logic of this question is quite convoluted.</p>\n\n<p>This whole function could be replace with:</p>\n\n<pre><code>fun replaceSpace(quote: String, ch: Char) = quote.replace(\" \", ch.toString())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 3, "last_activity_date": 1553619452, "creation_date": 1553619452, "answer_id": 55362492, "question_id": 55361725, "link": "https://stackoverflow.com/questions/55361725/using-let-standard-function-to-return-a-string/55362492#55362492", "title": "Using let() standard function to return a string", "body": "<p>If you just want to replace all of the instances of one Char in a String with another Char, you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html#replace\" rel=\"nofollow noreferrer\"><code>String.replace()</code></a> extension, which is part of the Kotlin standard library:</p>\n\n<pre><code>quote.replace(' ', ch)\n</code></pre>\n\n<p>There shouldn't be a need to do any conversions to Strings, CharArrays, or anything else. I wouldn't even define a function to encapsulate this, you can probably drop <code>replaceSpace</code> entirely.</p>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 1148405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2250f4343b6b84bae8ecabb2f48012c9?s=128&d=identicon&r=PG", "display_name": "Cesar", "link": "https://stackoverflow.com/users/1148405/cesar"}, "is_accepted": true, "score": 3, "last_activity_date": 1553634760, "creation_date": 1553634760, "answer_id": 55366266, "question_id": 55361725, "link": "https://stackoverflow.com/questions/55361725/using-let-standard-function-to-return-a-string/55366266#55366266", "title": "Using let() standard function to return a string", "body": "<p>If you look at <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\">Kotlin's let documentation</a> you will see that the <code>let</code> function returns whatever the function you are passing to it returns. In your case, since the for doesn't return and there is no return statement, you are not returning anything inside the let function, therefore, the let will return a Unit. Since you are applying <code>toString</code> on the return of the <code>let</code> function, you will be applying <code>toString</code> on <code>Unit</code>, which is obviously not what you want.</p>\n\n<p>At the same time, what you're trying to achieve (replace all spaces with a given character) can be achieved by using only Kotlin standard functions. If you take a look at the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html\" rel=\"nofollow noreferrer\">String Kotlin's documentation</a> you will see there is a replace function you can use that will basically help you achieve what you want.</p>\n\n<pre><code>quote.replace(' ', ch)\n</code></pre>\n\n<p>I also recommend you to read about <code>let</code>, <code>also</code>, <code>apply</code>, <code>run</code> and <code>with</code> in this <a href=\"https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84\" rel=\"nofollow noreferrer\">fantastic</a> article.</p>\n"}], "owner": {"reputation": 29871, "user_id": 70942, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9f7667844c54af07fbb1a85592137cd4?s=128&d=identicon&r=PG", "display_name": "ant2009", "link": "https://stackoverflow.com/users/70942/ant2009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55366266, "answer_count": 3, "score": 0, "last_activity_date": 1555432215, "creation_date": 1553616919, "last_edit_date": 1555432215, "question_id": 55361725, "link": "https://stackoverflow.com/questions/55361725/using-let-standard-function-to-return-a-string", "title": "Using let() standard function to return a string", "body": "<pre><code>kotlin 1.2.31\n</code></pre>\n\n<p>I have the following function where I an trying to return a string from a <code>let</code> function.</p>\n\n<p>However, the following returns <code>kotlin.unit</code> as the text</p>\n\n<pre><code>fun replaceSpace(quote: String, ch: Char): String {\n    return quote.toCharArray().let {\n        for (i in it.indices) {\n            if(it[i] == ' ') {\n                it[i] = ch\n            }\n        }\n    }.toString()\n}\n</code></pre>\n\n<p>I would have thought having the <code>toString()</code> would return a string but I get <code>kotlin.unit</code></p>\n\n<p>However, when I do the following it works ok. As the <code>String(it)</code> coverts the charArray to a string. As its the last statement in the <code>let</code> block that is what will be return. However, I am wondering why the <code>toString()</code> method doesn't work</p>\n\n<pre><code>fun replaceSpace(quote: String, ch: Char): String {\n    return quote.toCharArray().let {\n        for (i in it.indices) {\n            if(it[i] == ' ') {\n                it[i] = ch\n            }\n        }\n        String(it)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "arraylist", "kotlin"], "comments": [{"owner": {"reputation": 2146, "user_id": 3780625, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dKJKS.jpg?s=128&g=1", "display_name": "Maxouille", "link": "https://stackoverflow.com/users/3780625/maxouille"}, "edited": false, "score": 0, "creation_date": 1553610914, "post_id": 55359522, "comment_id": 97443245, "body": "Can&#39;t you use <code>size()</code> from ArrayList ?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1553611068, "post_id": 55359522, "comment_id": 97443358, "body": "I&#39;m not sure what <code>get</code> returns, but you get one of two: Either a JSON object for whatever library/framework/class you&#39;re using, or an array. That lands you with a 1-size <code>Array&lt;WhateverJSONObjet&gt;</code> or <code>Array&lt;Array&lt;String&gt;&gt;</code> (unless auto-unpacking is a thing, but you didn&#39;t specify<code>*</code>)"}, {"owner": {"reputation": 99, "user_id": 9641261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bec0afbe1686fda1f9c55985d21dd0?s=128&d=identicon&r=PG&f=1", "display_name": "humble_pie", "link": "https://stackoverflow.com/users/9641261/humble-pie"}, "reply_to_user": {"reputation": 2146, "user_id": 3780625, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/dKJKS.jpg?s=128&g=1", "display_name": "Maxouille", "link": "https://stackoverflow.com/users/3780625/maxouille"}, "edited": false, "score": 0, "creation_date": 1553611261, "post_id": 55359522, "comment_id": 97443512, "body": "@Maxouille no size() does&#39;t work oddly"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9641261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bec0afbe1686fda1f9c55985d21dd0?s=128&d=identicon&r=PG&f=1", "display_name": "humble_pie", "link": "https://stackoverflow.com/users/9641261/humble-pie"}, "edited": false, "score": 0, "creation_date": 1553615146, "post_id": 55359769, "comment_id": 97446216, "body": "So you suggesting change the model class from val schedule: Map&lt;String, ArrayList&lt;String&gt;&gt; to val schedule: Map&lt;String, List&lt;String&gt;&gt; ?"}, {"owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "reply_to_user": {"reputation": 99, "user_id": 9641261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bec0afbe1686fda1f9c55985d21dd0?s=128&d=identicon&r=PG&f=1", "display_name": "humble_pie", "link": "https://stackoverflow.com/users/9641261/humble-pie"}, "edited": false, "score": 0, "creation_date": 1553615243, "post_id": 55359769, "comment_id": 97446277, "body": "Both of them gives you the same result"}], "tags": [], "owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "is_accepted": false, "score": 1, "last_activity_date": 1553610940, "creation_date": 1553610940, "answer_id": 55359769, "question_id": 55359522, "link": "https://stackoverflow.com/questions/55359522/why-does-kotlin-array-is-not-returning-the-count/55359769#55359769", "title": "Why does Kotlin array is not returning the count", "body": "<p>Wrapping map with <code>arrayOf(...)</code> you are creting new structure - array containing lists.</p>\n\n<h2>You have to change it from:</h2>\n\n<pre><code>arrayOf(responseModel.schedule.get(\"0\")).count()\n</code></pre>\n\n<h2>to:</h2>\n\n<pre><code>responseModel.schedule[\"0\"]?.size\n// or\nresponseModel.schedule[\"0\"]?.count()\n</code></pre>\n\n<h2>Full example:</h2>\n\n<pre><code>fun main() {\n    val schedule = mapOf(\n        \"0\" to listOf(\"0\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"1\" to listOf(\"1\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"2\" to listOf(\"2\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"3\" to listOf(\"3\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"4\" to listOf(\"4\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"5\" to listOf(\"5\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n        \"6\" to listOf(\"6\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\")\n    )\n\n    println(schedule[\"0\"])\n    // output:  [0, 3.00, 7.59, 9.00, 12.59, 14.00, 22.59]\n\n    println(schedule[\"0\"].count())\n    // output:  7\n    // because you have list with 7 elements\n\n    println(arrayOf(schedule[\"0\"]).count())\n    // output:  1\n    // because you have array with 1 element - you have array of lists\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1553612577, "creation_date": 1553612577, "answer_id": 55360343, "question_id": 55359522, "link": "https://stackoverflow.com/questions/55359522/why-does-kotlin-array-is-not-returning-the-count/55360343#55360343", "title": "Why does Kotlin array is not returning the count", "body": "<p>Based on your code, I'm going to assume you've completely parsed it into a <code>Map&lt;K, V&gt;</code>. If you have, the reason is extremely easy to find: You've added an Array(/List) to an Array. Which means your attempt gives you an <code>Array&lt;Array&lt;String&gt;&gt;</code> or <code>Array&lt;List&lt;String&gt;&gt;</code>. </p>\n\n<p>If you again take a look at your code, you only add one item, or one array to the array. If you parse it back to JSON, it looks like this:</p>\n\n<pre><code>[\n    [\n        \"0\", \"3.00\", ...\n    ]\n]\n</code></pre>\n\n<p>Basing off the JSON example, here's a pseudocode-ish example of your current code:</p>\n\n<pre><code>[\n    [\n        \"0\", \"3.00\", ...\n    ]\n].size()\n</code></pre>\n\n<p>Which naturally returns 1: you only have one item in the parent. </p>\n\n<p>If you wanted it to work exactly the way you currently have it, you'd have to use the spread operator (<code>*</code>). <code>arrayOf</code> takes a <code>vararg</code>, and you have to spread the original array to the vararg to not pass an array. That lands you with an <code>Array&lt;String&gt;</code> (or possibly <code>Array&lt;Any&gt;</code> depending on the map):</p>\n\n<pre><code>arrayOf(*responseModel.schedule.get(\"0\")).count()\n</code></pre>\n\n<p><strong><em>I do not recommend this approach</em></strong> - it's overkill in your case, and will reduce performance. I'm mentioning it because it's <em>a</em> solution.</p>\n\n<p>As Boken has already mentioned, you don't need to wrap it in an Array at all. If you store it as a Map, you already have a List or Array and you can access it incredibly simply with <code>responseModel.schedule.get(\"0\").size</code>.</p>\n\n<p>If you store it as <code>Any</code> (which I assume you do), you'll have to add an additional step:</p>\n\n<pre><code>val cache = responseModel.schedule.get(\"0\"); // Any, in reality Array&lt;String&gt;/Array&lt;Any&gt;/List&lt;Any&gt;/List&lt;String&gt;\nif (cache is Array) println(cache.size)\nelse if(cache is List) println(cache.size)\n</code></pre>\n\n<p>The casting here is to get automatic type inference - if you have an <code>Any</code>, the compiler doesn't know if it has a <code>size</code> field, and it will therefore throw an exception. </p>\n\n<p>You can, of course, cast it directly, but that isn't a good idea if you ever end up with different input (intentionally or accidentally)</p>\n\n<hr>\n\n<p>If, however, you don't actually store it in the form of a map, that complicates matters. To keep up with the first part, you'd have an <code>Array&lt;JSONObject&gt;</code>, and you only have one JSONObject in the array. </p>\n\n<p>Unlike the last part, you can't use the spread operator and get it straight into an <code>Array</code> (which, again, I don't recommend you use unless you have to)</p>\n\n<p>If you store a JSONObject for whatever system you use, it <em>might</em> have a size/length field/function that you can use, and it's not as complicated. Otherwise, you'll need to get an array/list from the JSON object, and run the length on that. I'd show you code for this part, but without knowing what you use (built-in, Jackson, Gson, etc), I don't have enough details to show any code. Nevertheless, the idea is still getting the size directly from the JSONObject, or getting an Array which you can run the size on instead.</p>\n\n<hr>\n\n<h1>Further reading</h1>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/array-of.html\" rel=\"nofollow noreferrer\"><code>arrayOf</code></a></li>\n<li><a href=\"https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin\">The spread operator</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 0, "last_activity_date": 1553631356, "creation_date": 1553631356, "answer_id": 55365578, "question_id": 55359522, "link": "https://stackoverflow.com/questions/55359522/why-does-kotlin-array-is-not-returning-the-count/55365578#55365578", "title": "Why does Kotlin array is not returning the count", "body": "<p><strong>Problem:</strong></p>\n\n<pre><code>arrayOf(responseModel.schedule.get(\"0\")).count()\n</code></pre>\n\n<p>will create a list with a list as only element. That's why <code>count</code> will return <code>1</code>.</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Given your data looks like this after parsing:</p>\n\n<pre><code>val responseModel = ResponseModel(\n        schedule = mapOf(\n                \"0\" to arrayListOf(\"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"),\n                \"1\" to arrayListOf(\"1\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\")\n                // ...\n        ),\n        target_temp = \"32.18\"\n)\n</code></pre>\n\n<p>each element of schedule will be an <code>ArrayList</code> for which you can determine the size like this:</p>\n\n<pre><code>val numElements = responseModel.schedule[\"0\"]?.size\n</code></pre>\n\n<p>Note:</p>\n\n<ul>\n<li><p>You can use the get operator notation <code>[]</code> instead of calling it as a function:</p>\n\n<pre><code>val firstLinesValues = responseModel.schedule[\"0\"]\n</code></pre></li>\n<li><p>Please use camel case for your variable names (<code>target_temp</code> -> <code>targetTemp</code>) since it is a convention.</p></li>\n</ul>\n"}], "owner": {"reputation": 99, "user_id": 9641261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bec0afbe1686fda1f9c55985d21dd0?s=128&d=identicon&r=PG&f=1", "display_name": "humble_pie", "link": "https://stackoverflow.com/users/9641261/humble-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 0, "accepted_answer_id": 55365578, "answer_count": 3, "score": 0, "last_activity_date": 1553631356, "creation_date": 1553610298, "last_edit_date": 1553610762, "question_id": 55359522, "link": "https://stackoverflow.com/questions/55359522/why-does-kotlin-array-is-not-returning-the-count", "title": "Why does Kotlin array is not returning the count", "body": "<p>I have model object which has an Map of array lists. </p>\n\n<pre><code>data class ResponseModel(\n    val schedule: Map&lt;String, ArrayList&lt;String&gt;&gt;,\n    val target_temp: String\n\n)\n</code></pre>\n\n<p>This is successfully parsing the data coming from the api sample data looks like below.</p>\n\n<pre><code>{\n    \"limit\": \"10\",\n    \"schedule\": {\n        \"0\": [\"0\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"1\": [\"1\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"2\": [\"2\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"3\": [\"3\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"4\": [\"4\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"5\": [\"5\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"],\n        \"6\": [\"6\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"]\n    },\n    \"target_temp\": \"32.18\"\n}\n</code></pre>\n\n<p>I can access the individual array values as per key in my schedule, with the following code.</p>\n\n<pre><code>holder?.view?.start?.text = responseModel.schedule.get(\"0\").toString()\n</code></pre>\n\n<p>This gives me desired results </p>\n\n<pre><code>[\"0\", \"3.00\", \"7.59\", \"9.00\", \"12.59\", \"14.00\", \"22.59\"]\n</code></pre>\n\n<p>Now I want to count how many elements are in the above extracted array. To achieve that I tried creating another array of elements from above and then performed both count and size functions. However, this did not work.</p>\n\n<pre><code>arrayOf(responseModel.schedule.get(\"0\")).count()\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin", "android-glide", "android-bitmap"], "comments": [{"owner": {"reputation": 527, "user_id": 4735418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TnSL20EP98E/AAAAAAAAAAI/AAAAAAAAAKc/F9y-IxIE0OI/photo.jpg?sz=128", "display_name": "Max Cruz", "link": "https://stackoverflow.com/users/4735418/max-cruz"}, "edited": false, "score": 0, "creation_date": 1559130191, "post_id": 55359248, "comment_id": 99322951, "body": "Apparently, the problem is <code>BitmapDescriptorFactory.fromBitmap</code> don&#39;t take the layer added by Glide.into, everything should work ok if you download the bitmap using Glide.asBitmap"}], "answers": [{"tags": [], "owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "is_accepted": false, "score": 1, "last_activity_date": 1553610973, "creation_date": 1553610973, "answer_id": 55359783, "question_id": 55359248, "link": "https://stackoverflow.com/questions/55359248/android-kotlin-implement-custom-map-marker-using-bitmap-with-glide/55359783#55359783", "title": "Android Kotlin - Implement custom map marker using Bitmap with Glide", "body": "<p>You can create a custom <code>ImageView</code> and get the <code>BitmapDescriptor</code> from it.</p>\n\n<pre><code>class CustomImageView @JvmOverloads constructor(context: Context,\n                                                attrs: AttributeSet? = null,\n                                                defStyle: Int = 0,\n                                                defStyleRes: Int = 0): ImageView(context, attrs, defStyle, defStyleRes) {\n\n    init {\n        setImageBitmap(createCustomMarker(\"my_image_url_from_cloud\"))\n    }\n\n    private fun loadBitmapFromView(view: View): Bitmap {\n        view.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)\n        val bitmap = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(),\n                Bitmap.Config.ARGB_8888)\n        val canvas = Canvas(bitmap)\n        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight())\n        view.draw(canvas)\n        return bitmap\n    }\n\n    fun getBitmapDescriptor(): BitmapDescriptor {\n        val bitmap = CommonUtil.loadBitmapFromView(this)\n        return BitmapDescriptorFactory.fromBitmap(bitmap)\n    }\n}\n</code></pre>\n\n<p>Just get sure you loaded the image into the view before getting the <code>BitmapDescriptor</code>.</p>\n\n<p>I got the functions from <a href=\"https://stackoverflow.com/a/3036736/2145504\">this</a> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 4735418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TnSL20EP98E/AAAAAAAAAAI/AAAAAAAAAKc/F9y-IxIE0OI/photo.jpg?sz=128", "display_name": "Max Cruz", "link": "https://stackoverflow.com/users/4735418/max-cruz"}, "is_accepted": false, "score": 2, "last_activity_date": 1559129977, "creation_date": 1559129977, "answer_id": 56359762, "question_id": 55359248, "link": "https://stackoverflow.com/questions/55359248/android-kotlin-implement-custom-map-marker-using-bitmap-with-glide/56359762#56359762", "title": "Android Kotlin - Implement custom map marker using Bitmap with Glide", "body": "<p>I had the same issue. My solution was just to download the bitmap using Glide and with a listener create the marker when the download is complete. </p>\n\n<pre><code>private fun getMarkerIcon(context: Context, url: String, listener: (BitmapDescriptor) -&gt; Unit) {\n    val markerView = View.inflate(context, R.layout.view_marker, null)\n    Glide.with(context)\n        .asBitmap()\n        .load(url)\n        .into(object : SimpleTarget&lt;Bitmap&gt;() {\n\n            override fun onResourceReady(resource: Bitmap, transition: Transition&lt;in Bitmap&gt;?) {\n                markerView.avatarImageView.setImageBitmap(resource)\n                listener.invoke(BitmapDescriptorFactory.fromBitmap(getBitmapFromView(markerView)))\n            }\n        })\n}\n\nprivate fun getBitmapFromView(view: View): Bitmap {\n    view.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED)\n    val bitmap = Bitmap.createBitmap(view.measuredWidth, view.measuredHeight, Bitmap.Config.ARGB_8888)\n    val canvas = Canvas(bitmap)\n    view.layout(0, 0, view.measuredWidth, view.measuredHeight)\n    view.draw(canvas)\n    return bitmap\n}\n</code></pre>\n\n<p>And the call</p>\n\n<pre><code>getMarkerIcon(context, \"http://....\") {\n    val options = MarkerOptions()\n        .position(LatLng(latitude, longitude))\n        .icon(it)\n    googleMap.addMarker(options)\n}\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 7671846, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ar92J.jpg?s=128&g=1", "display_name": "Dale", "link": "https://stackoverflow.com/users/7671846/dale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1559129977, "creation_date": 1553609467, "question_id": 55359248, "link": "https://stackoverflow.com/questions/55359248/android-kotlin-implement-custom-map-marker-using-bitmap-with-glide", "title": "Android Kotlin - Implement custom map marker using Bitmap with Glide", "body": "<p>I'm trying to implement a custom map marker using my XML layout into  Google Maps.</p>\n\n<p>However; when i use the <code>createCustomMarker</code> method to print out my custom marker into Google Maps, it does not load/show the image coming from the cloud/server. </p>\n\n<p>I think it's because Glide(or the app in this matter) didn't get the change to finish downloading and rendering the image before the layout got converted into Bitmap, or maybe my implementation is just wrong. Can anyone help me with this? </p>\n\n<pre><code>@SuppressLint(\"InflateParams\")\n    private fun createCustomMarker(urlImageFromCloud: String): Bitmap{\n\n        val marker: LayoutInflater = getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        val view: View = marker.inflate(R.layout.map_marker, null)\n\n        val messageIcon: Int = resources.getIdentifier(\"local_image_from_drawable\", \"drawable\", this.packageName)\n        val markerPhoto: CircleImageView = view.findViewById(R.id.map_photo)\n        val markerContainer: CircleImageView = view.findViewById(R.id.map_photo)\n        val options: RequestOptions = RequestOptions()\n            .centerCrop()\n            .placeholder(R.color.colorGrayWhite)\n            .error(R.color.colorGrayWhite)\n            .diskCacheStrategy(DiskCacheStrategy.ALL)\n        Glide.with(this)\n            .load(urlImageFromCloud) // String image URL from my server/cloud - this is the part that does not show up.\n            .apply(options).into(markerPhoto)\n        Glide.with(this)\n            .load(messageIcon)\n            .apply(options).into(markerContainer)\n\n\n        val displayMetrics = DisplayMetrics()\n        windowManager.defaultDisplay.getMetrics(displayMetrics)\n\n        view.layoutParams = ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)\n        view.measure(displayMetrics.widthPixels, displayMetrics.heightPixels)\n        view.layout(0, 0, displayMetrics.widthPixels, displayMetrics.heightPixels)\n        view.buildDrawingCache()\n        val bitmap = Bitmap.createBitmap(view.measuredWidth, view.measuredHeight, Bitmap.Config.ARGB_8888)\n        val canvas = Canvas(bitmap)\n        view.draw(canvas)\n\n        return bitmap\n    }\n</code></pre>\n\n<p>My map_marker XML :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/custom_marker_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"&gt;\n\n    &lt;ImageView\n            android:id=\"@+id/map_container\"\n            android:layout_width=\"75dp\"\n            android:layout_height=\"75dp\"/&gt;\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView\n            android:id=\"@+id/map_photo\"\n            android:src=\"@color/colorGray\"\n            android:layout_marginTop=\"5dp\"\n            android:layout_centerHorizontal=\"true\"\n            style=\"@style/MapMarkerCircleImage\"/&gt;\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>This is how i called my <code>createCustomMarker</code> method.</p>\n\n<pre><code>val defaultLocation = LatLng(locationLatitude, locationLongitude)\ngoogleMap.addMarker(MarkerOptions().position(defaultLocation).icon(BitmapDescriptorFactory.fromBitmap(createCustomMarker(\"my_image_url_from_cloud\"))))\n</code></pre>\n"}, {"tags": ["android", "kotlin", "decompiling"], "answers": [{"tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": true, "score": 1, "last_activity_date": 1553610434, "last_edit_date": 1553610434, "creation_date": 1553610089, "answer_id": 55359442, "question_id": 55359026, "link": "https://stackoverflow.com/questions/55359026/what-most-likely-is-this-intrinsics-method/55359442#55359442", "title": "what most likely is this Intrinsics method", "body": "<p><code>f14615e</code> might be <code>SharedPreferences</code> ...as <code>.edit()</code> and <code>.apply()</code> hint for.</p>\n\n<p>while the signature of <code>Intrinsics.m27292b</code> matches various methods of <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/Intrinsics.java\" rel=\"nofollow noreferrer\">Intrinsics</a>. it could be any method, which would accept two <code>String</code> as parameters; it might be asserting <code>str</code> not being <code>null</code>.</p>\n\n<pre><code>public static void checkParameterIsNotNull(Object value, String paramName) {\n    if (value == null) {\n        throwParameterIsNullException(paramName);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2156, "user_id": 6820170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2af840ea3d5ac271ed2ee2552be340f?s=128&d=identicon&r=PG&f=1", "display_name": "Tord Larsen", "link": "https://stackoverflow.com/users/6820170/tord-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 55359442, "answer_count": 1, "score": 0, "last_activity_date": 1553610434, "creation_date": 1553608847, "question_id": 55359026, "link": "https://stackoverflow.com/questions/55359026/what-most-likely-is-this-intrinsics-method", "title": "what most likely is this Intrinsics method", "body": "<p>I was decompiling some apk and came across this</p>\n\n<pre><code>protected ButtonAction(String str) {\n    Intrinsics.m27292b(str, \"action\");\n    this.action = str;\n}\n\npublic final void m23619h(String str) {\n    Intrinsics.m27292b(str, \"donationGroup\");\n    this.f14615e.edit().putString(\"donation_group\", str).apply();\n}\n</code></pre>\n\n<p>I understand the <code>Intrinsics</code> come from:</p>\n\n<pre><code>import kotlin.jvm.internal.Intrinsics;\n</code></pre>\n\n<p>My question is what most likely is the <code>m27292b</code>?\nI know this is kind of abstract but I try to learn</p>\n"}, {"tags": ["android", "kotlin", "viewmodel", "dagger-2"], "comments": [{"owner": {"reputation": 1776, "user_id": 6341943, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wqhTp.png?s=128&g=1", "display_name": "hushed_voice", "link": "https://stackoverflow.com/users/6341943/hushed-voice"}, "edited": false, "score": 0, "creation_date": 1579272546, "post_id": 55358762, "comment_id": 105721780, "body": "Did you figure out the issue?? I am also stuck here.."}, {"owner": {"reputation": 1750, "user_id": 1606824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d4892c82b05978465b0808cfda6babd4?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Kale", "link": "https://stackoverflow.com/users/1606824/swapnil-kale"}, "edited": false, "score": 0, "creation_date": 1594160978, "post_id": 55358762, "comment_id": 111028474, "body": "I am also getting this issue. Did you get any solution?"}], "owner": {"reputation": 269, "user_id": 7304116, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-n7TCtnRd0gg/AAAAAAAAAAI/AAAAAAAAAAA/-RMarMdA9Dk/photo.jpg?sz=128", "display_name": "Vasco", "link": "https://stackoverflow.com/users/7304116/vasco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1483, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1553680399, "creation_date": 1553608129, "last_edit_date": 1553674723, "question_id": 55358762, "link": "https://stackoverflow.com/questions/55358762/dagger-missingbinding-androidx-lifecycle-viewmodelprovider-factory-cannot-be-pro", "title": "Dagger/MissingBinding androidx.lifecycle.ViewModelProvider.Factory cannot be provided without an @Provides-annotated method", "body": "<p>I am trying to implement ViewModel Factory within my Project but I am facing some issues implementing it with Dagger 2. I am providing the necessary code so you can have a look let me know for suggestions. </p>\n\n<p>I have all the methods that need to be provided. Also I want to mention that I am trying to pass argument(repository) to my ViewModel class through ViewModelFactory and here is where I am getting the error.</p>\n\n<p>Here are all my classes where I am using:</p>\n\n<p>HomeViewModel.kt</p>\n\n<pre><code>class HomeViewModel @Inject constructor(\n        private val  categoriesRepository: CategoriesRepository) : ViewModel() {\n\n    val categories by lazyDefferd {\n        categoriesRepository.getCategories()\n        Log.d(\"All_Categories\", \"\")\n    }\n}\n</code></pre>\n\n<p>HomeViewModelFactory.kt</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\n@Singleton\nclass HomeViewModelFactory @Inject constructor\n    (private val viewModelsMAp: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;)\n        : ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        val creator = viewModelsMAp[modelClass] ?: viewModelsMAp.entries.firstOrNull {\n            modelClass.isAssignableFrom(it.key)\n        }?.value ?: throw ViewModelNotFound()\n        try {\n            return creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n\n<p>HomeFragment.kt</p>\n\n<pre><code>class HomeFragment : Fragment() {\n\n    @Inject\n    lateinit var factory: ViewModelProvider.Factory\n\n    private lateinit var viewModel: HomeViewModel\n\n    companion object {\n        fun newInstance() = HomeFragment()\n    }\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n\n        val view = inflater.inflate(R.layout.home_fragment, container, false)\n\n        return view\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        Injector.appComponent.inject(this)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        viewModel = ViewModelProviders.of(this, factory).get(HomeViewModel::class.java)\n\n        GlobalScope.launch {\n            val categories = viewModel.categories.await()\n            Log.d(\"Responses\", \"$categories\")\n        }\n\n    }\n\n</code></pre>\n\n<p>Dagger:\nAppComponent.kt</p>\n\n<pre><code>@Singleton\n@Component(\n        modules = [AppModule::class, NetworkModule::class]\n)\ninterface AppComponent {\n    fun inject(homeFragment: HomeFragment)\n}\n</code></pre>\n\n<p>AppModule.kt</p>\n\n<pre><code>@Module\nclass AppModule(\n        val application : Context) {\n\n    @Provides\n    fun providesApplication(): Context = application\n\n    @Provides\n    @Singleton\n    fun provideDb(app: Application): AppDatabase {\n        return Room.databaseBuilder(app, AppDatabase::class.java, \"my.db\")\n                .build()\n    }\n\n    @Provides\n    @Singleton\n    fun providesCategoryDao(db: AppDatabase) : CategoryDao {\n        return db.categoryDao()\n    }\n\n    @Provides\n    @Singleton\n    fun providesSubCategoryDao(db: AppDatabase): SubCategoryDao {\n        return db.subcategoryDao()\n    }\n\n    @Provides\n    fun provideCategoryRepository(db: AppDatabase, apiService: ApiService) : CategoriesRepository {\n        return CategoriesRepository(db.categoryDao(), apiService)\n    }\n}\n</code></pre>\n\n<p>NetworkMOdule.kt</p>\n\n<pre><code>@Module\nclass NetworkModule {\n\n\n    /**\n     * Provide the Api Service implementation\n     * @param retrofit the Retrofit object used to instantiate the service\n     * @return the api service implementation\n     */\n    @Provides\n    @Singleton\n    fun providesApiService(retrofit: Retrofit): ApiService {\n        return retrofit.create(ApiService::class.java)\n    }\n\n\n    /**\n     * Provides Retrofit object\n     * @return the Retrofit object\n     */\n    @Provides\n    @Singleton\n    fun providesRetrofit(): Retrofit {\n        return Retrofit.Builder()\n                .baseUrl(BASE_URL)\n                .addCallAdapterFactory(CoroutineCallAdapterFactory())\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n    }\n}\n</code></pre>\n\n<p>ViewModelKey.kt</p>\n\n<pre><code>@MustBeDocumented\n@Target(\n        AnnotationTarget.FUNCTION,\n        AnnotationTarget.PROPERTY_GETTER,\n        AnnotationTarget.PROPERTY_SETTER\n)\n@Retention(AnnotationRetention.RUNTIME)\n@MapKey\nannotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n</code></pre>\n\n<p>ViewModelModule.kt</p>\n\n<pre><code>@Suppress(\"unused\")\n@Module\nabstract class ViewModelModule {\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(HomeViewModel::class)\n    abstract fun bindHomeViewModel(homeViewModel: HomeViewModel): ViewModel\n\n    @Binds\n    abstract fun bindHomeViewModelFactory(homeViewModelFactory: HomeViewModelFactory): ViewModelProvider.Factory\n}\n</code></pre>\n\n<p>Injector.kt</p>\n\n<pre><code>class Injector {\n\n    companion object {\n\n        lateinit var appComponent: AppComponent\n\n        fun  initAppComponent(appModule: AppModule, networkModule: NetworkModule) {\n            appComponent = DaggerAppComponent.builder()\n                    .appModule(appModule)\n                    .networkModule(networkModule)\n                    .build()\n        }\n    }\n}\n</code></pre>\n\n<p>After Compiling I am getting: </p>\n\n<pre><code>C:\\Users\\vvasilev\\Documents\\Projects\\myproject-android\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\myproject\\vascovasilev\\myproject\\dagger\\components\\AppComponent.java:10: error: [Dagger/MissingBinding] androidx.lifecycle.ViewModelProvider.Factory cannot be provided without an @Provides-annotated method.\n    public abstract void inject(@org.jetbrains.annotations.NotNull()\n                         ^\n      androidx.lifecycle.ViewModelProvider.Factory is injected at\n          com.myproject.vascovasilev.myproject.ui.fragments.home.HomeFragment.factory\n      com.myproject.vascovasilev.myproject.ui.fragments.home.HomeFragment is injected at\n          com.myproject.vascovasilev.myproject.dagger.components.AppComponent.inject(com.myproject.vascovasilev.myproject.ui.fragments.home.HomeFragment)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7137325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-weWASkwyIg8/AAAAAAAAAAI/AAAAAAAABps/Qg0WLcQC2w0/photo.jpg?sz=128", "display_name": "Simone Cascino", "link": "https://stackoverflow.com/users/7137325/simone-cascino"}, "edited": false, "score": 1, "creation_date": 1553612220, "post_id": 55359555, "comment_id": 97444181, "body": "Thanks, it works! About the fact to have 2 sets of classes I understand your point, but I&#39;d like to have the cleanest code possible. Anyway, thanks for the advice."}], "tags": [], "owner": {"reputation": 85180, "user_id": 493939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa881f5e177eb698ff51740270bf6f52?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/493939/user"}, "is_accepted": true, "score": 2, "last_activity_date": 1553610417, "creation_date": 1553610417, "answer_id": 55359555, "question_id": 55358675, "link": "https://stackoverflow.com/questions/55358675/problem-with-ignore-and-immutable-fields/55359555#55359555", "title": "Problem with @Ignore and immutable fields", "body": "<p>In your second example Service will be translated to a Java class which has a single constructor with four parameters. Room sees the @Ignore annotations and knows that it needs to bind 3 fields and so it needs a constructor with 3 parameters matching those fields types. As it doesn't find such a constructor(or the default one) it fails.</p>\n\n<p>Try to make the last property optional and use the @JvmOverloads annotation on the constructor:</p>\n\n<pre><code>@Entity(tableName = \"services\")\ndata class Service @JvmOverloads constructor(\n    @PrimaryKey val id: String,\n    val name: String,\n    val description: String,\n    val parentId: String?,\n    @Ignore val test: String? = null\n)\n</code></pre>\n\n<p>This will make the Kotlin compiler to generate a 3 parameter constructor and make Room happy again.</p>\n\n<blockquote>\n  <p>I'm using retrofit with Gson converter for the rest api, and I'd like\n  to share the pojos with room.</p>\n</blockquote>\n\n<p>You should probably avoid doing this and use two sets of classes to model the API response and the database data. Even in this initial moment you need to make some \"hacks\" to make everything work, if in the future the API or the database changes you'll need to make more complex changes in more places.</p>\n"}, {"comments": [{"owner": {"reputation": 387, "user_id": 1678780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d0b319ac4c77ea14492cb0b3d3012d?s=128&d=identicon&r=PG", "display_name": "GenError", "link": "https://stackoverflow.com/users/1678780/generror"}, "edited": false, "score": 0, "creation_date": 1609763332, "post_id": 58016715, "comment_id": 115915431, "body": "Thanks, this is the perfect solution! Why isn&#39;t this part of the official documentation?!? (rhetorical question)"}], "tags": [], "owner": {"reputation": 611, "user_id": 3698170, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7bb9870ae150c48d6d20f9203675031?s=128&d=identicon&r=PG&f=1", "display_name": "FutureShocked", "link": "https://stackoverflow.com/users/3698170/futureshocked"}, "is_accepted": false, "score": 1, "last_activity_date": 1568916273, "creation_date": 1568916273, "answer_id": 58016715, "question_id": 55358675, "link": "https://stackoverflow.com/questions/55358675/problem-with-ignore-and-immutable-fields/58016715#58016715", "title": "Problem with @Ignore and immutable fields", "body": "<p>In fact, you can retain immutability with a single class and without the <code>@JvmOverloads</code> trick. You simply need the only visible (to Room) constructor to match the fields of the table. For your example, it would be:</p>\n\n<pre><code>@Entity(tableName = \"services\")\ndata class Service @Ignore constructor(\n    @PrimaryKey val id: String,\n    val name: String,\n    val description: String,\n    val parentId: String?,\n    @Ignore val test: String\n) {\n    constructor(id: String, name: String, description: String, parentId: String?) : \n        this(id, name, description, parentId, /* some default value for test */)\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7137325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-weWASkwyIg8/AAAAAAAAAAI/AAAAAAAABps/Qg0WLcQC2w0/photo.jpg?sz=128", "display_name": "Simone Cascino", "link": "https://stackoverflow.com/users/7137325/simone-cascino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 55359555, "answer_count": 2, "score": 1, "last_activity_date": 1568916273, "creation_date": 1553607888, "last_edit_date": 1553610457, "question_id": 55358675, "link": "https://stackoverflow.com/questions/55358675/problem-with-ignore-and-immutable-fields", "title": "Problem with @Ignore and immutable fields", "body": "<p>I have a problem with room. </p>\n\n<p>I'm using retrofit with Gson converter for the rest api, and I'd like to share the pojos with room. In general it works, but in some cases I need to ignore some fields, because I have list of objects. I tried to use the @Ignore annotation, but using it the build process fails with the following errors:</p>\n\n<blockquote>\n  <p>error: Entities and Pojos must have a usable public constructor. You\n  can have an empty constructor or a constructor whose parameters match\n  the fields (by name and type). public final class Service {</p>\n  \n  <p>^    error: Cannot find setter for field.\n      private final java.lang.String id = null;</p>\n  \n  <p>^    error: Cannot find setter for field.\n      private final java.lang.String name = null;</p>\n  \n  <p>^    error: Cannot find setter for field.\n      private final java.lang.String description = null;</p>\n</blockquote>\n\n<p>So, using this class, everything works:</p>\n\n<pre><code>@Entity(tableName = \"services\")\ndata class Service(\n\n    @PrimaryKey val id: String,\n    val name: String,\n    val description: String,\n    val parentId: String?\n)\n</code></pre>\n\n<p>With this, fails:</p>\n\n<pre><code>@Entity(tableName = \"services\")\ndata class Service(\n\n    @PrimaryKey val id: String,\n    val name: String,\n    val description: String,\n    val parentId: String?,\n    @Ignore val test: String\n)\n</code></pre>\n\n<p>I'm using this version of room:</p>\n\n<pre><code>implementation 'androidx.room:room-runtime:2.1.0-alpha06'\nkapt 'androidx.room:room-compiler:2.1.0-alpha06'\n</code></pre>\n\n<p>I know that the problem could be fixed using var instead of val and adding a secondary constructor, but I don't want to do that, I prefer to preserve the immutable state of my fields. </p>\n\n<p>Is it a bug of the ignore annotation? Why without it everything works?\nAny help is appreciated :)</p>\n"}, {"tags": ["android", "kotlin", "delegation"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1553608171, "post_id": 55358582, "comment_id": 97441304, "body": "Whether or not this is possible, I find it unreasonable. It would work only on <code>void</code> methods anyway."}, {"owner": {"reputation": 797, "user_id": 3695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9a774368758472af716b807db6eb45?s=128&d=identicon&r=PG&f=1", "display_name": "majk", "link": "https://stackoverflow.com/users/3695740/majk"}, "edited": false, "score": 1, "creation_date": 1553620501, "post_id": 55358582, "comment_id": 97449508, "body": "Operator <code>?.</code> works on non-void methods by making the return type nullable. This cannot possibly work here, because it would violate the contract of <code>Base</code>. In theory there is nothing preventing it from working on interfaces where all methods already return nullable type."}, {"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1553623446, "post_id": 55358582, "comment_id": 97451083, "body": "@Marko i find it reasonable. Methods that return value can be required for overriding. Anyway it saves lot&#39;s of time to write boilerplate code."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553846834, "post_id": 55358582, "comment_id": 97545169, "body": "You couldn&#39;t delegate <code>WebChromeClient</code> anyway because it&#39;s a class, not an interface."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553856113, "post_id": 55358582, "comment_id": 97550166, "body": "Actually, since <code>WebChromeClient</code> is not abstract and its callbacks do nothing by default, why not just make <code>extWebChromeClient</code> non-nullable in the first place and initialize/set it to <code>WebChromeClient()</code> instead of <code>null</code>? No need to generate any code."}, {"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1553941789, "post_id": 55358582, "comment_id": 97578897, "body": "If &quot;null-checked delegation&quot; is supported by Kotlin compiler i&#39;d prefer to use it. Otherwise it can work as a [not perfect] workaround as you suggested."}], "answers": [{"comments": [{"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1553757489, "post_id": 55374443, "comment_id": 97504809, "body": "this will make it too slow imho"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1553792646, "post_id": 55374443, "comment_id": 97526929, "body": "@4ntoine Slower? Yes, as mentioned in the answer. Whether it&#39;s too slow depends on a specific situation. The alternative is code generation. Just in case: when you say it saves a lot of time to write boilerplate code, you do realize how to write code only once per <code>Base</code> interface, not once per <code>Derived</code> class?"}, {"owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "edited": false, "score": 0, "creation_date": 1553834332, "post_id": 55374443, "comment_id": 97541075, "body": "i&#39;ve meant reflection call is significantly slower than direct one (code generated by kotlin compiler) so the main performance drop is because of this and not because of &quot;specific situation&quot;. I&#39;ve used dynamic proxies in JSON-RPC lib and i&#39;ve measure performance drop. Also your code can throw <code>InvocationTargetException</code> instead of original exception and it makes sense: one should rethrow original exception cause instead."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1553681288, "last_edit_date": 1553681288, "creation_date": 1553680861, "answer_id": 55374443, "question_id": 55358582, "link": "https://stackoverflow.com/questions/55358582/does-kotlin-by-keyword-work-for-nullable-delegate/55374443#55374443", "title": "Does Kotlin `by` keyword work for nullable delegate?", "body": "<p>You can make this yourself using <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/reflect/Proxy.html\" rel=\"nofollow noreferrer\">dynamic proxies</a>, though I wouldn't really recommend it. Note that for non-<code>void</code> methods there's no way to require overriding them. The below implementation just throws exceptions for them unconditionally, but you could still call them for non-null <code>x</code>.</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; nullableProxy(x: T?): T {\n    val handler = InvocationHandler { _, method, args -&gt;\n        if (method.returnType == Void.TYPE) {\n            if (x != null) {\n                method.invoke(x, *(args ?: arrayOf()))\n            }\n        } else \n            throw UnsupportedOperationException(\"Non-void method\")\n    }\n\n    return Proxy.newProxyInstance(\n        T::class.java.classLoader,\n        arrayOf(T::class.java),\n        handler) as T\n}\n\nclass Derived(b: Base?) : Base by nullableProxy(b)\n</code></pre>\n\n<p>This also won't perform as well as implementing methods directly would.</p>\n"}], "owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553681288, "creation_date": 1553607565, "question_id": 55358582, "link": "https://stackoverflow.com/questions/55358582/does-kotlin-by-keyword-work-for-nullable-delegate", "title": "Does Kotlin `by` keyword work for nullable delegate?", "body": "<p>I've pretty excited by Kotlin compiler features and by <code>by</code> in particular - it saves time generating gelegating code:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/delegation.html</a></p>\n\n<p>But i want delegate to be <strong>nullable</strong> and delegating code to check if it's null first and return if it is:</p>\n\n<pre><code>interface Base {\n    val message: String\n    fun print()\n}\n\nclass BaseImpl(val x: Int?) : Base {\n    override val message = \"BaseImpl: x = $x\"\n    override fun print() { println(message) }\n}\n\nclass Derived(b: Base?) : Base by b {\n    // This property is not accessed from b's implementation of `print`\n    override val message = \"Message of Derived\"\n}\n\nfun main() {\n    val b = BaseImpl(10)\n    val derived = Derived(b)\n    derived.print()\n    println(derived.message)\n}\n</code></pre>\n\n<p>When compiling ^ i'm getting <code>Type mismatch: inferred type is Base? but Base was expected</code>.</p>\n\n<p>Is it still possible with Kotlin?</p>\n\n<p>To be more detailed i'd like Kotlin compiler to generate forwarding calls to wrapped impl (<code>extWebChromeClient</code>) in <a href=\"https://developer.android.com/reference/android/webkit/WebChromeClient\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/webkit/WebChromeClient</a> like follows:</p>\n\n<pre><code>private WebChromeClient intWebChromeClient = new WebChromeClient()\n  {\n    @Override\n    public void onReceivedTitle(WebView view, String title)\n    {\n      if (extWebChromeClient != null)\n      {\n        extWebChromeClient.onReceivedTitle(view, title);\n      }\n    }\n ...\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-camera2"], "owner": {"reputation": 10289, "user_id": 15394, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9757acb5b356cbf87576c2005f2cf33c?s=128&d=identicon&r=PG", "display_name": "glenatron", "link": "https://stackoverflow.com/users/15394/glenatron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2017, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1553620603, "creation_date": 1553606074, "last_edit_date": 1553620603, "question_id": 55358092, "link": "https://stackoverflow.com/questions/55358092/android-camera2-cameraavailabilityhandler-calls-cameraavailable-then-cameraunava", "title": "Android Camera2 CameraAvailabilityHandler calls cameraAvailable then cameraUnavailable", "body": "<p>I'm trying to adjust the <a href=\"https://camerakit.io/\" rel=\"nofollow noreferrer\">CameraKit</a> api so that it works with <code>Camera2</code> ( it's <em>so close</em> but not there ) and I have been having trouble with the camera getting disconnected, especially if the activity is closed then subsequently opened again.</p>\n\n<p>To try and pre-empt this I have added a <code>CameraAvailableListener</code> so I can try and ensure we don't get caught out by the camera having disconnected. It looks a little like this:</p>\n\n<pre><code>    cameraManager.registerAvailabilityCallback(object: CameraManager.AvailabilityCallback() {\n        override fun onCameraAvailable(cameraDeviceId: String) {\n            Log.i(TAG, \"Camera available ( \"+cameraDeviceId+\" ) seeking \"+cameraId)\n            if ((cameraDeviceId == cameraId ) &amp;&amp; errorState ) {\n                errorState = false\n            }\n            super.onCameraAvailable(cameraDeviceId)\n        }\n\n        override fun onCameraUnavailable(cameraDeviceId: String) {\n            Log.i(TAG, \"Camera unavailable ( \"+cameraDeviceId+\" )  seeking \"+cameraId+\" already in error state? \"+errorState)\n            if ( cameraDeviceId == cameraId &amp;&amp; !errorState ) {\n                cameraOpen = false\n                errorState = true\n            }\n            super.onCameraUnavailable(cameraDeviceId)\n        }\n    }, cameraHandler)\n</code></pre>\n\n<p>In my logs I see the following:</p>\n\n<pre><code>2019-03-26 12:53:46.140 17945-18066/com.myphotoapp I/Camera2.kt: Camera available ( 0 ) seeking 0\n2019-03-26 12:53:46.140 17945-18066/com.myphotoapp I/Camera2.kt: Camera available ( 1 ) seeking 0\n2019-03-26 12:53:46.144 17945-18066/com.myphotoapp E/libc: Access denied finding property \"persist.vendor.camera.privapp.list\"\n2019-03-26 12:53:46.150 17945-17959/com.myphotoapp E/libc: Access denied finding property \"vendor.camera.aux.packagelist\"\n2019-03-26 12:53:46.151 17945-17959/com.myphotoapp E/libc: Access denied finding property \"vendor.camera.aux.packagelist\"\n2019-03-26 12:53:46.166 17945-18066/com.myphotoapp I/Camera2.kt: Camera unavailable ( 0 )  seeking 0 already in error state? false\n2019-03-26 12:53:46.167 17945-18066/com.myphotoapp I/Camera2.kt: Camera unavailable ( 0 )  seeking 0 already in error state? true\n</code></pre>\n\n<p>Now if I ignore the <code>onCameraUnavailable</code> calls it seems to work fine when the camera is available, but if they are uninformative why are they being raised at all, or is it because of those messages coming out of libc? </p>\n\n<p>Is there any way to know whether the camera is actually available in this situation or do I just need to call <code>open</code> and hope for the best?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1553606574, "post_id": 55358026, "comment_id": 97440189, "body": "exactly like in java, interfaces in kotlin can&#39;t be directly instantiated."}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1553606655, "post_id": 55358026, "comment_id": 97440239, "body": "Make your <code>var onPackClickListener</code> <b>internal</b>. <i>(I.e. <code>internal var onPackClickListener: OnPackClickListener? = null</code>)</i>"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7355072, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HofFmxAt3ag/AAAAAAAAAAI/AAAAAAAACzg/agSFthFaSLU/photo.jpg?sz=128", "display_name": "kissbudai", "link": "https://stackoverflow.com/users/7355072/kissbudai"}, "is_accepted": true, "score": 0, "last_activity_date": 1553607137, "creation_date": 1553607137, "answer_id": 55358453, "question_id": 55358026, "link": "https://stackoverflow.com/questions/55358026/interface-in-adapter/55358453#55358453", "title": "Interface in Adapter", "body": "<p>You will see your <code>onPackClickListener</code> only if you declare the nested class as <code>inner</code> class (see: <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/nested-classes.html</a>).</p>\n\n<p>However, I suggest to pass the listener to the <code>ViewHolder</code> class as an argument and call that parameter, something like this: </p>\n\n<pre><code>inner class ViewHolder(view: View, itemClickListener: OnPackClickListener?) : RecyclerView.ViewHolder(view), View.OnClickListener {\n\n    fun bind(pack: AnimalPackFull, context: Context) { ... }\n\n    override fun onClick(v: View?) {\n        onPackClickListener?.onPackClicked(...)\n    }\n}\n</code></pre>\n\n<p>Another problem is that you have to create that interface by implementing it becuase you can't just create an instance of it:</p>\n\n<pre><code>val listener = object : OnPackClickListener {\n        override fun onPackClicked(packId: Int) {\n            TODO(\"not implemented\")\n        }\n    }\n</code></pre>\n\n<p>A suggestion here. A nice thing about Kotlin is that you can switch single method interfaces to lambdas (see: <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/lambdas.html</a>).\nThe code can be refactored to something like this:</p>\n\n<pre><code>class PacksAdapter : RecyclerView.Adapter&lt;PacksAdapter.ViewHolder&gt;() {\n\nvar onPackClickListener: ((Int) -&gt;Unit)? = null\n    set(value) {\n        field = value\n    }\n\nvar packList: ArrayList&lt;Animal&gt; = ArrayList()\n    set(value) {\n        field = value\n        notifyDataSetChanged()\n    }\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n\n    return ViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.cell_animalpack_4, parent, false), onPackClickListener)\n}\n\noverride fun onBindViewHolder(holder: ViewHolder, position: Int) {\n    holder.bind(packList[0], context)\n}\n\n\nclass ViewHolder(view: View, private val itemClickListener: ((Int) -&gt;Unit)?) : RecyclerView.ViewHolder(view), View.OnClickListener {\n\n    fun bind(pack: AnimalPackFull, context: Context) { ... }\n\n    override fun onClick(v: View?) {\n        itemClickListener?.invoke(...)\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 6721828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqZn9.jpg?s=128&g=1", "display_name": "Edgar Khimich", "link": "https://stackoverflow.com/users/6721828/edgar-khimich"}, "is_accepted": false, "score": 0, "last_activity_date": 1553608049, "creation_date": 1553608049, "answer_id": 55358731, "question_id": 55358026, "link": "https://stackoverflow.com/questions/55358026/interface-in-adapter/55358731#55358731", "title": "Interface in Adapter", "body": "<p>Its more easy to use kotlin callback: </p>\n\n<p>In your adapter: </p>\n\n<pre><code>    class LEventsAdapter(\n    private val items: MutableList&lt;EventDetailItem&gt; = ArrayList(),\n    private val callback: (id: String, distance: String) -&gt; Unit\n) : RecyclerView.Adapter&lt;LEventsAdapter.LEventsViewHolder&gt;() {\n\n    override fun getItemCount(): Int = items.size\n\n ...\n</code></pre>\n\n<p>In your viewholder in onclick call : <code>callback.invoke(id, distance)</code></p>\n\n<p>And in your activity implement your callback: </p>\n\n<pre><code>recView.adapter = LEventsAdapter(items, callback = { id, distance -&gt; \n  //your code here\n})\n</code></pre>\n"}], "owner": {"reputation": 707, "user_id": 10742340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t545m.jpg?s=128&g=1", "display_name": "KirstenLy", "link": "https://stackoverflow.com/users/10742340/kirstenly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55358453, "answer_count": 2, "score": 0, "last_activity_date": 1553608049, "creation_date": 1553605851, "question_id": 55358026, "link": "https://stackoverflow.com/questions/55358026/interface-in-adapter", "title": "Interface in Adapter", "body": "<p>Learning Kotlin, i want to realize interface on adapter, which will be notify activity when item was clicked. Nothing works, i need your help.</p>\n\n<p>If i write Java, i make it this way:(interface: <code>OnAnimalClickListener</code>):</p>\n\n<p>Adapter:</p>\n\n<pre><code>public class PackContentAdapter extends RecyclerView.Adapter&lt;PackContentAdapter.ViewHolder&gt; {\n    private Context context;\n    private OnAnimalClickListener onAnimalClickListener;\n    ...\n    void setOnAnimalClickListener(OnAnimalClickListener onAnimalClickListener) {\n        this.onAnimalClickListener = onAnimalClickListener;\n    }\n    ...\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, final int position) {\n        holder.bind(item);\n    }\n    ...\n    class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n        ...\n        ViewHolder(View view) {\n            super(view);\n            ...\n        }\n\n        void bind(Item item) {\n            ...             \n        }\n\n        @Override\n        public void onClick(View v) {\n            onAnimalClickListener.onAnimalClicked();\n        }\n    }\n\n    public interface OnAnimalClickListener {\n        void onAnimalClicked();\n    }\n}\n</code></pre>\n\n<p>Activity:</p>\n\n<pre><code>contentAdapter.setOnAnimalClickListener(() -&gt; //doSomething);\n</code></pre>\n\n<p>This i write on Kotlin(names changed):</p>\n\n<p>Adapter:</p>\n\n<pre><code>class PacksAdapter : RecyclerView.Adapter&lt;PacksAdapter.ViewHolder&gt;() {\n\n    var onPackClickListener: OnPackClickListener? = null\n        set(value) {\n            field = value\n        }\n\n    var packList: ArrayList&lt;Animal&gt; = ArrayList()\n        set(value) {\n            field = value\n            notifyDataSetChanged()\n        }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        return ViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.cell_animalpack_4, parent, false))\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.bind(packList[0], context)\n    }\n\n\n class ViewHolder(view: View) : RecyclerView.ViewHolder(view),View.OnClickListener {\n        ...\n        fun bind(pack: AnimalPackFull, context: Context) {\n            ...\n        }\n\n        override fun onClick(v: View?) {\n            onPackClickListener.\n        }\n    }\n\n    interface OnPackClickListener {\n        fun onPackClicked(packId: Int)\n    }\n}\n</code></pre>\n\n<p>Activity:</p>\n\n<pre><code>(recycler_packs.adapter as PacksAdapter).onPackClickListener = PacksAdapter.OnPackClickListener()\n</code></pre>\n\n<p>My questions:</p>\n\n<p>1) I specifically don't complete my code here:</p>\n\n<pre><code> override fun onClick(v: View?) {\n                onPackClickListener.\n            }\n</code></pre>\n\n<p>Because of i don't see my <code>onPackClickListener</code> from onClick, IDE write that it <code>Unresolved</code>. Why?</p>\n\n<p>2) I got en Error on Activity:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vKOEz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKOEz.png\" alt=\"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\"></a></p>\n\n<p>I can understand, what i do wrong?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1553605804, "post_id": 55357993, "comment_id": 97439658, "body": "A crash log would have helped.."}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1553605992, "post_id": 55357993, "comment_id": 97439801, "body": "try using <code>View.postDelayed</code> on your button instead of a timer."}], "answers": [{"comments": [{"owner": {"reputation": 30, "user_id": 11260505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc5eebe3bf73a5152fae0d79e45ef72?s=128&d=identicon&r=PG&f=1", "display_name": "SuperSaiyanJSTN", "link": "https://stackoverflow.com/users/11260505/supersaiyanjstn"}, "edited": false, "score": 0, "creation_date": 1553608048, "post_id": 55358141, "comment_id": 97441212, "body": "This doesn&#39;t work sadly but thanks for your submission!"}], "tags": [], "owner": {"reputation": 714, "user_id": 2039924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLl25.jpg?s=128&g=1", "display_name": "ashazar", "link": "https://stackoverflow.com/users/2039924/ashazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1553606241, "creation_date": 1553606241, "answer_id": 55358141, "question_id": 55357993, "link": "https://stackoverflow.com/questions/55357993/how-can-i-fix-button-isenabled-error-on-my-app/55358141#55358141", "title": "How can i fix&quot; Button().isEnabled&quot; error on my app?", "body": "<p>Try below code.</p>\n\n<pre><code>textView_Number.animate().setDuration(500).rotationBy(360f)\n    .withStartAction {\n        button_randomize.isEnabled = false\n    }.withEndAction {\n        button_randomize.isEnabled = true     \n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "edited": false, "score": 0, "creation_date": 1553609819, "post_id": 55358235, "comment_id": 97442522, "body": "This is a way to sync the animation with the handler hardcoded, this is by far a not good approach."}], "tags": [], "owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "is_accepted": true, "score": 0, "last_activity_date": 1553606483, "creation_date": 1553606483, "answer_id": 55358235, "question_id": 55357993, "link": "https://stackoverflow.com/questions/55357993/how-can-i-fix-button-isenabled-error-on-my-app/55358235#55358235", "title": "How can i fix&quot; Button().isEnabled&quot; error on my app?", "body": "<p>It's likely because Timer creates a new thread, and your TimerTask is ran on that new thread.<br>\nHowever, the Android UI framework does not support multi-threading. View properties may only be altered on the main thread.  </p>\n\n<p>To fix this, use a different way to delay. This executes the delayed code on the main thread:  </p>\n\n<pre><code>button_randomize.isEnabled = true\nbutton_randomize.postDelayed({\n    button_randomize.isEnabled = false\n}, 500)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 966, "user_id": 5314844, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yKmYOowCBCk/AAAAAAAAAAI/AAAAAAAARPo/sbJIwujRZk4/photo.jpg?sz=128", "display_name": "Bruno Diego Martins", "link": "https://stackoverflow.com/users/5314844/bruno-diego-martins"}, "is_accepted": false, "score": 0, "last_activity_date": 1553609579, "creation_date": 1553609579, "answer_id": 55359274, "question_id": 55357993, "link": "https://stackoverflow.com/questions/55357993/how-can-i-fix-button-isenabled-error-on-my-app/55359274#55359274", "title": "How can i fix&quot; Button().isEnabled&quot; error on my app?", "body": "<p>You can add an animator listener to know when it ends, like this</p>\n\n<pre><code>textview_Number.animate().setDuration(500).rotationBy(360f).setListener(object : Animator.AnimatorListener {\n                override fun onAnimationRepeat(animation: Animator?) {}\n\n                override fun onAnimationCancel(animation: Animator?) {}\n\n                override fun onAnimationStart(animation: Animator?) {}\n\n                override fun onAnimationEnd(animation: Animator?) {\n                     button_randomize.isEnabled = true\n                }\n            })\n        }\n</code></pre>\n"}], "owner": {"reputation": 30, "user_id": 11260505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc5eebe3bf73a5152fae0d79e45ef72?s=128&d=identicon&r=PG&f=1", "display_name": "SuperSaiyanJSTN", "link": "https://stackoverflow.com/users/11260505/supersaiyanjstn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 55358235, "answer_count": 3, "score": 0, "last_activity_date": 1553609579, "creation_date": 1553605731, "last_edit_date": 1553608941, "question_id": 55357993, "link": "https://stackoverflow.com/questions/55357993/how-can-i-fix-button-isenabled-error-on-my-app", "title": "How can i fix&quot; Button().isEnabled&quot; error on my app?", "body": "<p><strong>I'm trying to make an RNG App and want to disable my Button as long as my animation is running. It shouldn't be too complicated, because I'm a Beginner in Kotlin-App development.</strong>\nit crashes after the delay.</p>\n\n<p>I have already tried other ways with my Animation and is tried setEnable().</p>\n\n<pre><code>button_randomize.setOnClickListener {\n    textView_Number.text = (minRangeRandom..maxRangeRandom).shuffled().first().toString()\n\n    textView_Number.animate().setDuration(500).rotationBy(360f)\n    Timer().schedule(object: TimerTask(){\n         override fun run() {\n             button_randomize.isEnabled = false\n          }\n          },500)\n    button_randomize.isEnabled = true\n}\n</code></pre>\n\n<p>I expect that the randomize Button is disabled until the animation is finished. Currently, it crashes when the delay is finished.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1293, "user_id": 3666539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA7IS.jpg?s=128&g=1", "display_name": "noiaverbale", "link": "https://stackoverflow.com/users/3666539/noiaverbale"}, "edited": false, "score": 0, "creation_date": 1553608008, "post_id": 55357612, "comment_id": 97441184, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties\">Kotlin &amp; Spring Boot @ConfigurationProperties</a>"}, {"owner": {"reputation": 145, "user_id": 4400452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f4bf5dc03a65f38194b60774568b65?s=128&d=identicon&r=PG&f=1", "display_name": "Srinivas", "link": "https://stackoverflow.com/users/4400452/srinivas"}, "reply_to_user": {"reputation": 1293, "user_id": 3666539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA7IS.jpg?s=128&g=1", "display_name": "noiaverbale", "link": "https://stackoverflow.com/users/3666539/noiaverbale"}, "edited": false, "score": 0, "creation_date": 1553610361, "post_id": 55357612, "comment_id": 97442904, "body": "Thanks @noiaverbale"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4400452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f4bf5dc03a65f38194b60774568b65?s=128&d=identicon&r=PG&f=1", "display_name": "Srinivas", "link": "https://stackoverflow.com/users/4400452/srinivas"}, "edited": false, "score": 0, "creation_date": 1553610403, "post_id": 55358702, "comment_id": 97442928, "body": "Thanks @Madhu Bhat"}], "tags": [], "owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "is_accepted": true, "score": 5, "last_activity_date": 1553608301, "last_edit_date": 1553608301, "creation_date": 1553607973, "answer_id": 55358702, "question_id": 55357612, "link": "https://stackoverflow.com/questions/55357612/kotlin-data-class/55358702#55358702", "title": "Kotlin Data class", "body": "<p>The <code>RestProperties</code> class can be converted into Kotlin as below:</p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"rest\")\nclass RestProperties {\n    val client: Client = Client()\n\n    class Client {\n        var defaultMaxTotalConnections: Int = 0\n        var defaultMaxConnectionsPerRoute: Int = 0\n        var defaultReadTimeout: Int = 0\n    }\n}\n</code></pre>\n\n<p>Do note that the properties need to be added as below in the <code>application.yml</code> to be injected correctly.</p>\n\n<pre><code>rest:\n  client:\n    defaultMaxTotalConnections: 1\n    defaultMaxConnectionsPerRoute: 2\n    defaultReadTimeout: 3\n</code></pre>\n\n<p>Also, a class like this which provides configuration should usually be annotated with <code>@Configuration</code> instead of <code>@Component</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 4400452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f4bf5dc03a65f38194b60774568b65?s=128&d=identicon&r=PG&f=1", "display_name": "Srinivas", "link": "https://stackoverflow.com/users/4400452/srinivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 55358702, "answer_count": 1, "score": 0, "last_activity_date": 1553608301, "creation_date": 1553604509, "last_edit_date": 1553604904, "question_id": 55357612, "link": "https://stackoverflow.com/questions/55357612/kotlin-data-class", "title": "Kotlin Data class", "body": "<p>I have below POJO in java which is used in Spring boot app to inject properties from YML during the app startup. Trying to convert the app into <code>Kotlin</code> but I have struggle implementing the values injected when I converted the POJO to data class. </p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"rest\")\n@Data\npublic class RestProperties {\n    private final Client client = new Client();\n\n    @Data\n    public static class Client {\n        private int defaultMaxTotalConnections;\n        private int defaultMaxConnectionsPerRoute;\n        private int defaultReadTimeout;\n    }\n}\n</code></pre>\n\n<p>I have tried below solution but didn't work.</p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"rest\")\nclass RestProperties {\n    val client = Client()\n\n    class Client() {\n        constructor(\n            defaultMaxTotalConnections: Int, \n            defaultMaxConnectionsPerRoute: Int, \n            defaultReadTimeout: Int\n        ) : this()\n    }\n}\n\n@Component\n@ConfigurationProperties(\"rest\")\nclass RestProperties {\n    val client = Client()\n\n    class Client {\n        var defaultMaxTotalConnections: Int = 50\n            set(defaultMaxTotalConnections) {\n                field = this.defaultMaxTotalConnections\n            }\n\n        var defaultMaxConnectionsPerRoute: Int = 10\n            set(defaultMaxConnectionsPerRoute) {\n                field = this.defaultMaxConnectionsPerRoute\n            }\n\n        var defaultReadTimeout: Int = 15000\n            set(defaultReadTimeout) {\n                field = this.defaultReadTimeout\n            }\n    }\n}\n</code></pre>\n\n<p>second code works but the values are not injected from YML. Appreciate your help.</p>\n"}, {"tags": ["kotlin", "constructor", "initialization-block"], "comments": [{"owner": {"reputation": 657, "user_id": 7049297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UQFSd.png?s=128&g=1", "display_name": "Naimish Vinchhi", "link": "https://stackoverflow.com/users/7049297/naimish-vinchhi"}, "edited": false, "score": 3, "creation_date": 1553602856, "post_id": 55356837, "comment_id": 97437551, "body": "Do check this : <a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/classes.html</a>"}, {"owner": {"reputation": 541, "user_id": 6938847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZ2nXwws6-I/AAAAAAAAAAI/AAAAAAAAACw/Vq3u7RPYx-E/photo.jpg?sz=128", "display_name": "Chetan Gupta", "link": "https://stackoverflow.com/users/6938847/chetan-gupta"}, "edited": false, "score": 0, "creation_date": 1611642032, "post_id": 55356837, "comment_id": 116509792, "body": "checkout this \ud83d\udc49 <a href=\"https://chetangupta.net/init-blocks/\" rel=\"nofollow noreferrer\">init-blocks kotlin vs Java</a> I explained what is init block and how its invoked order plus how it&#39;s different from Java&#39;s init block"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 3364266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04d1edaaf3fafd9a515da1b800d4e95e?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Bhatt", "link": "https://stackoverflow.com/users/3364266/samir-bhatt"}, "edited": false, "score": 0, "creation_date": 1553602848, "post_id": 55356959, "comment_id": 97437546, "body": "So, if we have a secondary constructor, init block will call the first or secondary constructor? We can not initialize values in primary constructor. right?"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "reply_to_user": {"reputation": 2210, "user_id": 3364266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04d1edaaf3fafd9a515da1b800d4e95e?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Bhatt", "link": "https://stackoverflow.com/users/3364266/samir-bhatt"}, "edited": false, "score": 0, "creation_date": 1553603396, "post_id": 55356959, "comment_id": 97437933, "body": "Thanks, I&#39;ve added an example in the answer"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1553673011, "post_id": 55356959, "comment_id": 97466580, "body": "&quot;where you can put more code that will run <i>after</i> properties are initialized&quot; That&#39;s not correct. Actually &quot;initializer blocks are executed in the same order as they appear in the class body, <i>interleaved</i> with the property initializers&quot;. To see the difference, move <code>val a</code> after the <code>init</code> block."}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 13, "last_activity_date": 1553674546, "last_edit_date": 1553674546, "creation_date": 1553602608, "answer_id": 55356959, "question_id": 55356837, "link": "https://stackoverflow.com/questions/55356837/what-is-the-difference-between-init-block-and-constructor-in-kotlin/55356959#55356959", "title": "What is the difference between init block and constructor in kotlin?", "body": "<p>A class in Kotlin class a primary constructor (the one after a class name) which does not contain code, it is only able to initialize properties (e.g. <code>class X(var prop: String)</code>). </p>\n\n<p>The <code>init{..}</code> block in the place, <strike>where you can put more code that will run <em>after</em> properties are initialized</strike>:</p>\n\n<blockquote>\n  <p>initializer blocks are executed in the same order as they appear in the class body, interleaved with the property initializers</p>\n</blockquote>\n\n<p>More about that is in  <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/classes.html#constructors</a></p>\n\n<p>Here is an example:</p>\n\n<pre><code>\n\nclass X(var b: String) {\n  val a = print(\"a\")\n\n  init {\n    print(\"b\")\n  }\n\n  constructor() : this(\"aaa\") {\n    print(\"c\")\n  }\n}\n\n\nX()\n</code></pre>\n\n<p>When called it prints <code>abc</code>. Thus the <code>init{..}</code> in invoked <em>after</em> primary constructor but before a secondary one.</p>\n"}, {"tags": [], "owner": {"reputation": 1378, "user_id": 10449332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6caa5ef02a216456f07508649ab1562?s=128&d=identicon&r=PG&f=1", "display_name": "deepak raj", "link": "https://stackoverflow.com/users/10449332/deepak-raj"}, "is_accepted": true, "score": 85, "last_activity_date": 1588284657, "last_edit_date": 1588284657, "creation_date": 1553680945, "answer_id": 55374474, "question_id": 55356837, "link": "https://stackoverflow.com/questions/55356837/what-is-the-difference-between-init-block-and-constructor-in-kotlin/55374474#55374474", "title": "What is the difference between init block and constructor in kotlin?", "body": "<p>The <strong>init</strong> block will execute immediately after the primary constructor. Initializer blocks effectively become part of the primary constructor. The <strong>constructor</strong> is the secondary constructor. Delegation to the primary constructor happens as the first statement of a secondary constructor, so the code in all initializer blocks is executed before the secondary constructor body.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>class Sample(private var s : String) {\n    constructor(t: String, u: String) : this(t) {\n        this.s += u\n    }\n    init {\n        s += \"B\"\n    }\n}\n</code></pre>\n\n<p>Think you initialized the Sample class with</p>\n\n<pre><code>Sample(\"T\",\"U\")\n</code></pre>\n\n<p>You will get a string response at variable <strong>s</strong> as <code>\"TBU\"</code>.\nValue <code>\"T\"</code> is assigned to <strong>s</strong> from the primary constructor of <strong>Sample</strong> class, and then immediately init block starts to execute it will add <code>\"B\"</code> to the variable. After init block secondary constructor block starts to execute and <strong>s</strong> will become <code>\"TBU\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 6310687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04c847dd83e2e2af1e11ecce7d1276c?s=128&d=identicon&r=PG", "display_name": "witless", "link": "https://stackoverflow.com/users/6310687/witless"}, "is_accepted": false, "score": 9, "last_activity_date": 1593269848, "creation_date": 1593269848, "answer_id": 62611603, "question_id": 55356837, "link": "https://stackoverflow.com/questions/55356837/what-is-the-difference-between-init-block-and-constructor-in-kotlin/62611603#62611603", "title": "What is the difference between init block and constructor in kotlin?", "body": "<p>Since,</p>\n<blockquote>\n<p>The primary constructor cannot contain any code.</p>\n</blockquote>\n<p><a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/classes.html</a></p>\n<p>init blocks allow adding code to the primary constructor.</p>\n"}], "owner": {"reputation": 2210, "user_id": 3364266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04d1edaaf3fafd9a515da1b800d4e95e?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Bhatt", "link": "https://stackoverflow.com/users/3364266/samir-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16201, "favorite_count": 10, "accepted_answer_id": 55374474, "answer_count": 3, "score": 53, "last_activity_date": 1594892292, "creation_date": 1553602235, "last_edit_date": 1594892292, "question_id": 55356837, "link": "https://stackoverflow.com/questions/55356837/what-is-the-difference-between-init-block-and-constructor-in-kotlin", "title": "What is the difference between init block and constructor in kotlin?", "body": "<p>I have started learning Kotlin. I would like to know the difference between <code>init</code> block and <code>constructor</code>.\nWhat is the difference between this and how we can use this to improve?</p>\n\n<pre><code>class Person constructor(var name: String, var age: Int) {\n    var profession: String = \"test\"\n\n    init {\n        println(\"Test\")\n     }    \n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 96, "user_id": 7215907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fiiu.jpg?s=128&g=1", "display_name": "Murdok", "link": "https://stackoverflow.com/users/7215907/murdok"}, "edited": false, "score": 0, "creation_date": 1553601560, "post_id": 55356311, "comment_id": 97436750, "body": "You have to add a one layer on top of targets with the user-id key. Doing this every user have their own list of targets"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 96, "user_id": 7215907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fiiu.jpg?s=128&g=1", "display_name": "Murdok", "link": "https://stackoverflow.com/users/7215907/murdok"}, "edited": false, "score": 0, "creation_date": 1553602126, "post_id": 55356311, "comment_id": 97437095, "body": "@Murdok thx, I have updated the question, if not difficult, please see"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553602951, "post_id": 55356311, "comment_id": 97437615, "body": "Why are you using as the unique identifier a pushed id rather than the <code>uid</code> that is coming from the authentication process?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553603141, "post_id": 55356311, "comment_id": 97437739, "body": "@AlexMamo But how can I use the one that comes from the authentication process?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553603264, "post_id": 55356311, "comment_id": 97437828, "body": "@AlexMamo I so understand I can use it in <code>onActivityResult()</code> when I successfully pass authorization?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553603391, "post_id": 55356311, "comment_id": 97437928, "body": "As explained <b><a href=\"https://stackoverflow.com/questions/49253026/firebase-auth-and-database/49256810\">here</a></b> and in Kotlin <code>val uid = FirebaseAuth.getInstance().currentUser!!.uid</code> once you are authenticated."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553604897, "post_id": 55356311, "comment_id": 97438966, "body": "@AlexMamo Updated question, but I miss something"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553605345, "post_id": 55356311, "comment_id": 97439337, "body": "Shouln&#39;t be <code>.getReference(&quot;users&quot;)</code>? The uid is used under <code>Users</code> node right? Not under <code>targets</code>."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553605523, "post_id": 55356311, "comment_id": 97439476, "body": "@AlexMamo yep, i made smth like this: <code>if (resultCode == Activity.RESULT_OK) {                 val uid = FirebaseAuth.getInstance().currentUser?.uid ?: &quot;&quot;                 val userName = FirebaseAuth.getInstance().currentUser?.displayName                 val userEmail = FirebaseAuth.getInstance().currentUser?.email                 val userModel = User(userName, userEmail)                 val rootRef = FirebaseDatabase.getInstance().reference                 val usersRef = rootRef.child(&quot;users&quot;)                 usersRef.child(uid).setValue(userModel)</code>"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553605618, "post_id": 55356311, "comment_id": 97439541, "body": "That&#39;s good. The result in the database is as expected."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553605717, "post_id": 55356311, "comment_id": 97439602, "body": "@AlexMamo no problem with this. The problem is to create targets for each user"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553605933, "post_id": 55356311, "comment_id": 97439761, "body": "In that case, why aren&#39;t you changing that pushed id with the <code>uid</code>? Will solve the problem."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553606088, "post_id": 55356311, "comment_id": 97439854, "body": "@AlexMamo but i use here: <code>val uid = FirebaseAuth.getInstance().currentUser?.uid ?: &quot;&quot;         databaseReference = FirebaseDatabase.getInstance().getReference(&quot;targets&quot;).child&zwnj;&#8203;(uid)</code>"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553606220, "post_id": 55356311, "comment_id": 97439938, "body": "I the screenshot that you provided, you aren&#39;t. I see those pushed ids."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1553606621, "post_id": 55356311, "comment_id": 97440214, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/190699/discussion-between-morozov-and-alex-mamo\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553610092, "post_id": 55358639, "comment_id": 97442697, "body": "in the second case you get the Query for <code>targetsRef</code>. In the first case, alas, still another structure is obtained. When authenticating, do I need to create a user in the database?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 1, "creation_date": 1553610473, "post_id": 55358639, "comment_id": 97442969, "body": "Sure you need to create a user in the database. I didn&#39;t add the <code>users</code> node because of space but you definetely should add it."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553679911, "post_id": 55358639, "comment_id": 97470364, "body": "Hi Morozov! Is there everything alright, can I help you with other informations?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553702493, "post_id": 55358639, "comment_id": 97485366, "body": "Updated question. Can u check please? Maybe I should share my test project. in git as an example?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553703468, "post_id": 55358639, "comment_id": 97485997, "body": "As you probably know, the rule in this community is to ask a question and if you get an answer, to solve your problem you should make your own attempt given the information in the answer and ask another question if something else comes up. So I rolled back to the previous version."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553767207, "post_id": 55358639, "comment_id": 97509814, "body": "as you can see from the question that I updated, your decision did not help me, apparently I&#39;m missing something, but alas, to determine the error has not yet happened"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553767665, "post_id": 55358639, "comment_id": 97510130, "body": "Editing your question over and over again with every problem that you encounter is not a solution. That&#39;s why I recommended you to ask another question, in the moment you encounter a new problem. We stick to one question at a time."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553769446, "post_id": 55358639, "comment_id": 97511192, "body": "I&#39;ve updated the question to reflect your notes. The problem remained the same"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553770157, "post_id": 55358639, "comment_id": 97511616, "body": "Between the time you get a solution to a problem and when you actually solve it, you can face many other coding challenges and in the same time, the main problem can remain the same. So neither me nor the other users can help you with all the problems that you face during your development, that&#39;s why you should take the time and ask a separate question for every problem separately."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1553770337, "post_id": 55358639, "comment_id": 97511738, "body": "I rolled back your question because the database structure has been modified due the changes that you made in your code. So those changes become a new problem that must be treated separately. Hope you undestand this point of view. So if  you want to get help from me or other Firebase developers, please post a separate question using a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> for every issue separately."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1554285204, "post_id": 55358639, "comment_id": 97691603, "body": "Is there everything alright, have you solved the case?"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 0, "last_activity_date": 1553607768, "creation_date": 1553607768, "answer_id": 55358639, "question_id": 55356311, "link": "https://stackoverflow.com/questions/55356311/create-unique-notes-for-users/55358639#55358639", "title": "Create unique notes for users", "body": "<p>Accodring to your comments and messages, you want to create targets for each user separately. Using your actual structure you have the users and targets separately. To solve this, I recommend you another database structure that looks like this:</p>\n\n<pre><code>Firebase-root\n  |\n  --- targets\n       |\n       --- uid\n            |\n            --- pushedId\n            |    |\n            |    --- description: \"some description\"\n            |    |\n            |    --- name: \"Vadim\"\n            |\n            --- pushedId\n                 |\n                 --- description: \"another description\"\n                 |\n                 --- name: \"Morozov\"\n</code></pre>\n\n<p>To get all the targets that corresponde to a particular user, simply use the following query:</p>\n\n<pre><code>val uid = FirebaseAuth.getInstance().currentUser!!.uid\nval rootRef = FirebaseDatabase.getInstance().getReference()\nval uidRef = rootRef.child(\"targets\").child(uid)\nuidRef.addListenerForSingleValueEvent(/* ... */);\n</code></pre>\n\n<p>An alternative database structure might be:</p>\n\n<pre><code>Firebase-root\n  |\n  --- targets\n        |\n        --- pushedId\n        |    |\n        |    --- description: \"some description\"\n        |    |\n        |    --- name: \"Vadim\"\n        |    |\n        |    --- uid: \"VDMQ ... 0nw1\"\n        |\n        --- pushedId\n             |\n             --- description: \"another description\"\n             |\n             --- name: \"Svetlana\"\n             |\n             --- uid: \"eluk ... PJu1\"\n</code></pre>\n\n<p>As you can see, it has a level less than the previous structure. Now, to get all the targets that corresponde to a particular user, please use the following query:</p>\n\n<pre><code>val uid = FirebaseAuth.getInstance().currentUser!!.uid\nval rootRef = FirebaseDatabase.getInstance().getReference()\nval targetsRef = rootRef.child(\"targets\").orderByChild(\"uid\").equalTo(uid)\ntargetsRef.addListenerForSingleValueEvent(/* ... */);\n</code></pre>\n\n<p>So it's up to you to decide which one is better for you.</p>\n"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553703485, "creation_date": 1553600533, "last_edit_date": 1553703485, "question_id": 55356311, "link": "https://stackoverflow.com/questions/55356311/create-unique-notes-for-users", "title": "Create unique notes for users", "body": "<p>Implemented in the application firebase authentication. As well as the ability to add and delete records. But when I go with another account, the records are the same everywhere. </p>\n\n<p>Q: how can I create my own records for each authorized user?</p>\n\n<p>Now have smth like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DM8az.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DM8az.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I understood from the comment I need to add another field to my structure: \"users\". And ultimately get type <code>target-list - &gt; users - &gt; targets</code></p>\n\n<p>But for example in my main activity I select as follows:\n<code>databaseReference = FirebaseDatabase.getInstance().getReference(\"targets\")</code></p>\n\n<p>How do I understand here I have to change the structure?</p>\n\n<p><strong>UPD</strong>:\nI tried to to next:</p>\n\n<pre><code>private fun updateListData() {\n    val uid = FirebaseAuth.getInstance().currentUser?.uid ?: \"\"\n    databaseReference = FirebaseDatabase.getInstance().getReference(\"targets\").child(uid)\n    getTargetsFromDb()\n}\n</code></pre>\n\n<p>and in getTargetsFromDb():</p>\n\n<pre><code>private fun getTargetsFromDb() {\n    databaseReference?.addValueEventListener(object : ValueEventListener {\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            for (targetSnapshot in dataSnapshot.children) {\n                val target = targetSnapshot.getValue(Target::class.java)\n                target?.let { targetList.add(it) }\n            }\n            recyclerView?.adapter = adapter\n        }\n\n        override fun onCancelled(databaseError: DatabaseError) {\n            Log.d(\"some\", \"Error trying to get targets for ${databaseError.message}\")\n        }\n    })\n}\n</code></pre>\n\n<p>And get next structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yurrc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yurrc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "android-intent", "kotlin"], "comments": [{"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553600579, "post_id": 55356209, "comment_id": 97436136, "body": "Try to add <code>shareIntent.type=(&quot;text&#47;plain&quot;)</code> instead, also make sure the path is correct."}, {"owner": {"reputation": 55, "user_id": 11045855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu-KsvowCTo/AAAAAAAAAAI/AAAAAAAAAAo/xTQ9rs4gfX0/photo.jpg?sz=128", "display_name": "Dmytro Melnyk", "link": "https://stackoverflow.com/users/11045855/dmytro-melnyk"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553601088, "post_id": 55356209, "comment_id": 97436458, "body": "@Skizo-oz\u1d09\u029eS path example - /storage/emulated/0/FinBall/backup/FinBallFrom 26.03.2019-13:48:20.json still doesn&#39;t work"}, {"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553602005, "post_id": 55356209, "comment_id": 97437024, "body": "What api are you using?"}, {"owner": {"reputation": 55, "user_id": 11045855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu-KsvowCTo/AAAAAAAAAAI/AAAAAAAAAAo/xTQ9rs4gfX0/photo.jpg?sz=128", "display_name": "Dmytro Melnyk", "link": "https://stackoverflow.com/users/11045855/dmytro-melnyk"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553602226, "post_id": 55356209, "comment_id": 97437152, "body": "@Skizo-oz\u1d09\u029eS for what?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1553602566, "post_id": 55356209, "comment_id": 97437376, "body": "&quot;path example&quot; -- that is not a valid <code>Uri</code>. That is a filesystem path. A <code>Uri</code> has a scheme, like <code>file</code> or <code>content</code> or <code>http</code> or <code>https</code>. If you wish to make a file available to other apps, use <code>FileProvider</code> <a href=\"https://stackoverflow.com/a/55356905/115145\">as Skizo describes</a>."}, {"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1553610588, "post_id": 55356209, "comment_id": 97443035, "body": "@DmytroMelnyk if it worked mark my answer as a correct and upvote it, and also feel free to post your answer"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 11045855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu-KsvowCTo/AAAAAAAAAAI/AAAAAAAAAAo/xTQ9rs4gfX0/photo.jpg?sz=128", "display_name": "Dmytro Melnyk", "link": "https://stackoverflow.com/users/11045855/dmytro-melnyk"}, "edited": false, "score": 0, "creation_date": 1553601204, "post_id": 55356391, "comment_id": 97436523, "body": "I try this earlier, no result"}], "tags": [], "owner": {"reputation": 81, "user_id": 4684509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qOpvM_iGM4Y/AAAAAAAAAAI/AAAAAAAAAII/rugH2MhYUT8/photo.jpg?sz=128", "display_name": "abdullah yousry", "link": "https://stackoverflow.com/users/4684509/abdullah-yousry"}, "is_accepted": false, "score": 0, "last_activity_date": 1553600808, "creation_date": 1553600808, "answer_id": 55356391, "question_id": 55356209, "link": "https://stackoverflow.com/questions/55356209/is-there-way-to-share-json-file-via-intent-or-something-else/55356391#55356391", "title": "Is there way to share *.json file via Intent or something else?", "body": "<p>i think you can use the file as ExtrtaStream the following code is sharing image file you can change it to your json file</p>\n\n<pre><code>final Intent shareIntent = new Intent(Intent.ACTION_SEND);\nshareIntent.setType(\"image/jpg\");\nfinal File photoFile = new File(getFilesDir(), \"foo.jpg\");//change it with your file\nshareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(photoFile));\nstartActivity(Intent.createChooser(shareIntent, \"Share image using\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": true, "score": 0, "last_activity_date": 1553602458, "creation_date": 1553602458, "answer_id": 55356905, "question_id": 55356209, "link": "https://stackoverflow.com/questions/55356209/is-there-way-to-share-json-file-via-intent-or-something-else/55356905#55356905", "title": "Is there way to share *.json file via Intent or something else?", "body": "<p>I had similar problems with this and I found this <a href=\"https://inthecheesefactory.com/blog/how-to-share-access-to-file-with-fileprovider-on-android-nougat/en\" rel=\"nofollow noreferrer\">article</a> where it recommends us to use <a href=\"https://developer.android.com/reference/android/support/v4/content/FileProvider\" rel=\"nofollow noreferrer\"><code>FileProvider</code></a>.</p>\n\n<p>What it does is :</p>\n\n<blockquote>\n  <p>FileProvider is a special subclass of ContentProvider that facilitates secure sharing of files associated with an app by creating a content:// Uri for a file instead of a file:/// Uri.</p>\n</blockquote>\n\n<p>I recommend you to take a look to the article and also if you want code, take a look at this <a href=\"https://stackoverflow.com/questions/38200282/android-os-fileuriexposedexception-file-storage-emulated-0-test-txt-exposed\">Stackoverflow post</a></p>\n"}], "owner": {"reputation": 55, "user_id": 11045855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu-KsvowCTo/AAAAAAAAAAI/AAAAAAAAAAo/xTQ9rs4gfX0/photo.jpg?sz=128", "display_name": "Dmytro Melnyk", "link": "https://stackoverflow.com/users/11045855/dmytro-melnyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 55356905, "answer_count": 2, "score": 1, "last_activity_date": 1553602458, "creation_date": 1553600227, "question_id": 55356209, "link": "https://stackoverflow.com/questions/55356209/is-there-way-to-share-json-file-via-intent-or-something-else", "title": "Is there way to share *.json file via Intent or something else?", "body": "<p>In my app I need to share *.json file to other app (messenger, google disk, etc). How can I do this via Intent or something else?</p>\n\n<p>But when I trying to do this via Intent, I have some problems.</p>\n\n<pre><code>override fun shareBackupData(path: String) {\n        val uri = Uri.parse(path)\n        val shareIntent = Intent()\n        shareIntent.action = Intent.ACTION_SEND\n        shareIntent.putExtra(Intent.EXTRA_STREAM, uri)\n        shareIntent.type = \"*/*\"\n        startActivity(Intent.createChooser(shareIntent, \"Choose\"))\n    }\n</code></pre>\n\n<p>When I run this code, I choose app to share and then I see toast \"unsupported attachment\"</p>\n"}, {"tags": ["android", "kotlin", "service"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1553597787, "post_id": 55355351, "comment_id": 97434526, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45922178/how-to-cancel-a-jobintentservice\">How to cancel a JobIntentService</a>"}, {"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1553597820, "post_id": 55355351, "comment_id": 97434553, "body": "JobIntentService is not intended for such use unless you do some hacky workarounds with static variables. Better just use service with binding."}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553597793, "creation_date": 1553597541, "last_edit_date": 1553597793, "question_id": 55355351, "link": "https://stackoverflow.com/questions/55355351/android-cancel-jobintent-service-when-activity-closes", "title": "Android - Cancel JobIntent service when activity closes", "body": "<p>I will be starting my service to download data from server. I did this using <code>JobIntentService</code> but my problem is when i closed my activity i need to stop the service on Destroy, using that UNIQUE ID. is there is any other option to cancel the running <code>JobIntentService</code> ?</p>\n"}, {"tags": ["android", "kotlin", "face-detection", "firebase-mlkit", "face"], "owner": {"reputation": 231, "user_id": 6396162, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gqDWj.jpg?s=128&g=1", "display_name": "Priyanka", "link": "https://stackoverflow.com/users/6396162/priyanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1553609452, "creation_date": 1553596772, "last_edit_date": 1553609452, "question_id": 55355098, "link": "https://stackoverflow.com/questions/55355098/how-to-detect-entire-facenot-side-face-even-not-any-portion-of-face-hide-in-an", "title": "How to detect Entire Face(Not side face,even not any portion of face hide) in android just like CI face Detector in ios", "body": "<p>Currently , i am using ML-kit for face detection, here i am getting all the points when face is detected..but I want when user shows the entire face, then only some action perform.Example,Suppose \"click photo\" button only shows ,when entire face detect.now its working.. But My problem is that,  if i shows my side face(left side face or right side face ) it shows the \"click photo\" button , which i don't need..If face's some part covered, or  side face is showing, then i don't want to show button.. How to avoid the obstacles while face detection  in android. Sorry for poor grammar .</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-paging"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 10330688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xaRPTrka0-M/AAAAAAAAAAI/AAAAAAAAMDE/_BGRUYBOinU/photo.jpg?sz=128", "display_name": "LIFED", "link": "https://stackoverflow.com/users/10330688/lifed"}, "is_accepted": true, "score": 1, "last_activity_date": 1553836979, "creation_date": 1553836979, "answer_id": 55410972, "question_id": 55354927, "link": "https://stackoverflow.com/questions/55354927/android-paging-library-how-to-show-related-item-if-its-not-in-local-database-y/55410972#55410972", "title": "Android Paging Library: how to show related item if it&#39;s not in local database yet and don&#39;t break paging?", "body": "<p>I found a solution. In my case I have created additional table RepliedMessage (which is an absolute copy of Message) and I store replied messages in that table. Pagination works perfectly. We only need to keep RepliedMessages up to date.</p>\n"}], "owner": {"reputation": 387, "user_id": 10330688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xaRPTrka0-M/AAAAAAAAAAI/AAAAAAAAMDE/_BGRUYBOinU/photo.jpg?sz=128", "display_name": "LIFED", "link": "https://stackoverflow.com/users/10330688/lifed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 55410972, "answer_count": 1, "score": 0, "last_activity_date": 1553836979, "creation_date": 1553596235, "last_edit_date": 1553658699, "question_id": 55354927, "link": "https://stackoverflow.com/questions/55354927/android-paging-library-how-to-show-related-item-if-its-not-in-local-database-y", "title": "Android Paging Library: how to show related item if it&#39;s not in local database yet and don&#39;t break paging?", "body": "<p>I'm writing chat app. Messages are load by pages (item keyed - message_id) using Android Paging Library. Also there is \"reply\" feature, which mean users can reply to any message in chat. In RecyclerView it should looks like that:</p>\n\n<pre><code>Part of message which was replied...\n------------------------------------\nMain message text\n</code></pre>\n\n<p>It is simple, when related message is already in local database. I can fetch all data from database and show it in app. But there can be situations when replied message is NOT in local database (for example, this is old message and we just installed app - database is empty). And message looks bad, until replied message won't be stored in local database:</p>\n\n<pre><code>\n------------------------------------\nMain message text\n</code></pre>\n\n<p><strong>What I've tried:</strong> if message's property reply_to is not null I load replied message from remote server by this id and store it in local database. Room react to changes and display all content fine. But this replied message become last in my messages array and BoundaryCallback load messages after that replied message skipping messages between REAL last message and that replied message.</p>\n\n<p>For example, I have messages with ids 1..100.</p>\n\n<pre><code>(boundary callback makes initialLoad, say 20 items)\n1 message\n2 message\n..\n10 message with reply to 50 message (load message 50 and store it in db)\n11 message\n..\n(early loaded messages)\n..\n20 message\n(this should be end, but this is not because of 50 message which is stored in local database now)\n50 message\n(bounary callback makes loadAfter new items by key - message id)\n51 message\n..\n</code></pre>\n\n<p>So, we lost part of messages from 21 to 49.</p>\n\n<p>Message room entity has following properties:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\nclass Message {\n    var id: Int\n    var text: String\n    var reply_to: Int?\n}\n</code></pre>\n\n<p>MessageModel is returned by Room by relation and used in PagedAdapter</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class MessageModel {\n    var message: Message\n    var repliedMessage: Message\n}\n</code></pre>\n\n<p>How can I show replied message and don't break paging?\nHow it should be done in right way?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "infinite-scroll"], "answers": [{"comments": [{"owner": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553660660, "post_id": 55356760, "comment_id": 97462408, "body": "This is the question I asked. I am not able to disable the footer view button when I clicked on this view."}, {"owner": {"reputation": 583, "user_id": 2648035, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4CiTi.png?s=128&g=1", "display_name": "Alok Omkar", "link": "https://stackoverflow.com/users/2648035/alok-omkar"}, "reply_to_user": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553668253, "post_id": 55356760, "comment_id": 97464584, "body": "itemView.btnShowMore.isEnabled = enable, did you add this line and check? Is it still not getting disabled?"}, {"owner": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553673350, "post_id": 55356760, "comment_id": 97466726, "body": "main thing is the enableShowMore() function is never called"}, {"owner": {"reputation": 583, "user_id": 2648035, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4CiTi.png?s=128&g=1", "display_name": "Alok Omkar", "link": "https://stackoverflow.com/users/2648035/alok-omkar"}, "reply_to_user": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553673923, "post_id": 55356760, "comment_id": 97466998, "body": "Check if the viewholder is null at the point, if it is returning null, you&#39;ll need an alternate way to resolve this. I&#39;ll post a different solution if it&#39;s null."}, {"owner": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553675151, "post_id": 55356760, "comment_id": 97467598, "body": "ViewHolder is not null. The viewholder called is instance of ListViewHolder but I required the instanceo f FooterViewHolder. By the mean time I have done with alternate ways. but in this case I have added null at last to the list while data is fetched successfully and checked the item in the adapter as ` val da = transactionList[position]         return if (da == null) {             viewTypeFooter         } else {             viewTypeList          }`"}, {"owner": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "edited": false, "score": 0, "creation_date": 1553678458, "post_id": 55356760, "comment_id": 97469501, "body": "sure I will give a try."}], "tags": [], "owner": {"reputation": 583, "user_id": 2648035, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4CiTi.png?s=128&g=1", "display_name": "Alok Omkar", "link": "https://stackoverflow.com/users/2648035/alok-omkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1553678125, "last_edit_date": 1553678125, "creation_date": 1553601983, "answer_id": 55356760, "question_id": 55354898, "link": "https://stackoverflow.com/questions/55354898/change-the-view-text-of-footer-itemview-of-recyclerview/55356760#55356760", "title": "Change the view text of footer itemView of recyclerview", "body": "<p>Can you try disabling the footer view button once the user clicks on it?</p>\n\n<pre><code>fun enableShowMore(enable: Boolean) {\n        if( enable ) {\n            itemView.btnShowMore.text = \"show more\"\n        } else {\n            itemView.btnShowMore.text = \"loading...\"\n        }\n        itemView.btnShowMore.isEnabled = enable\n    }\n</code></pre>\n\n<p>Update : </p>\n\n<pre><code>//In the adapter\nmIsFooterEnabled = false\n\n//In the View holder \nfun enableShowMore() {\n  if( mIsFooterEnabled ) {\n      itemView.btnShowMore.text = \"show more\"    \n  } else {\n      itemView.btnShowMore.text = \"loading...\"  \n  }\n  itemView.btnShowMore.isEnabled = mIsFooterEnabled\n}\n\n//In your activity / fragment\nprivate fun enableShowMore(enable: Boolean) {\n    adapter.mIsFooterEnabled = enable\n    adapter.notifyDataSetChanged()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 130, "user_id": 9601207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sahil Kothari", "link": "https://stackoverflow.com/users/9601207/sahil-kothari"}, "reply_to_user": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1553692060, "post_id": 55374713, "comment_id": 97478035, "body": "@Vagish I just provided suggestion to fix it. If it does not work then i can provide more information along with code. <b>Ram Mandal</b> let me know if it does not work."}], "tags": [], "owner": {"reputation": 130, "user_id": 9601207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sahil Kothari", "link": "https://stackoverflow.com/users/9601207/sahil-kothari"}, "is_accepted": false, "score": 0, "last_activity_date": 1553681680, "creation_date": 1553681680, "answer_id": 55374713, "question_id": 55354898, "link": "https://stackoverflow.com/questions/55354898/change-the-view-text-of-footer-itemview-of-recyclerview/55374713#55374713", "title": "Change the view text of footer itemView of recyclerview", "body": "<p>Could you please try to put your function code inside <strong>enableShowMore()</strong> in <strong>onBindViewHolder()</strong> or set <strong>holder.bind</strong> for <strong>FooterViewHolder</strong> and put code inside binder function.</p>\n\n<p>Let me know if it is useful or not.</p>\n"}], "owner": {"reputation": 1750, "user_id": 2145383, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AAI5J.png?s=128&g=1", "display_name": "Ram Mandal", "link": "https://stackoverflow.com/users/2145383/ram-mandal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553681680, "creation_date": 1553596177, "last_edit_date": 1553679404, "question_id": 55354898, "link": "https://stackoverflow.com/questions/55354898/change-the-view-text-of-footer-itemview-of-recyclerview", "title": "Change the view text of footer itemView of recyclerview", "body": "<p>Hi I have a condition where I have to add different viewType with text </p>\n\n<p><code>show more</code> or <code>loading...</code></p>\n\n<p>at the bottom of the recyclerview</p>\n\n<p>I have successfully added the footer view with show more and also I have added the listener on this footer item view for loading more data, here everything works fine. Since I have swipe refresh layout as a parent for recyclerview I show enable swiperefresh progress on loading and disable swiperefresh progress while loading is complete. Now what I need is whenever I click on the <code>show more</code> view type which is a footer attached to the recycler view I want the text to be changed with <code>loading...</code> and when the loading is completed the text should be changed to <code>show more</code> again.</p>\n\n<p>Here is my adapter class</p>\n\n<pre><code>class MyTransactionAdapter(private val context: Context?,\n                       private val transactionList: List&lt;TransactionHistoryResponse&gt;,\n                       private val transactionListener: MyTransactionListener) : Filterable,\n    RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\nprivate var viewTypeList: Int = 0\nprivate var viewTypeFooter: Int = 1\n\n\nprivate var transactionListFiltered = transactionList\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n    return if (viewType == viewTypeList) {\n        val view: View = LayoutInflater.from(context).inflate(R.layout.row_my_transaction, parent, false)\n        ListViewHolder(view)\n    } else {\n        val view: View = LayoutInflater.from(context).inflate(R.layout.row_footer_so_more, parent, false)\n        FooterViewHolder(view)\n    }\n}\n\noverride fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n    val myTransaction = transactionListFiltered[position]\n    if (holder is ListViewHolder) {\n        holder.bind(myTransaction, transactionListener)\n    }\n}\n\noverride fun getItemCount(): Int {\n    return transactionListFiltered.size\n}\n\noverride fun getItemViewType(position: Int): Int {\n    return if (position == transactionList.lastIndex) {\n        viewTypeFooter\n    } else {\n        viewTypeList\n    }\n}\n\ninner class FooterViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    init {\n        itemView.apply {\n            btnShowMore.setOnClickListener {\n                transactionListener.onLoadMoreClicked()\n            }\n        }\n    }\n\n    fun enableShowMore(enable: Boolean) {\n        if(enable){\n            itemView.btnShowMore.text = \"show more\"\n\n        }else{\n            itemView.btnShowMore.text = \"loading...\"\n\n        }\n    }\n}\ninner class ListViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    private lateinit var mTransactionStatus: TransactionStatus\n    fun bind(myTransaction: TransactionHistoryResponse, transactionListener: MyTransactionListener){\n        //logic to populate data on views\n       }\n    }\n }\n</code></pre>\n\n<p><strong>And here is the fragment's function where I do the loading stuff</strong></p>\n\n<p><code>This function is being called for fetching data from remote</code></p>\n\n<pre><code>private fun getTransactionHistory() {\n    swipeContainer.enableDisableSwipeRefresh(true)\n    enableShowMore(false)\n  //logic to load web data and hide show swiperefresh\n  //when load is success call this function enableShowMore(true)\n  //when load is failed call this function enableShowMore(false)\n}\n\n@Synchronized\nprivate fun enableShowMore(enable: Boolean) {\n    val viewHolder = recyclerView.findViewHolderForAdapterPosition(transactionList.size)\n    if (viewHolder is MyTransactionAdapter.FooterViewHolder) {\n        viewHolder.enableShowMore(enable)\n    }\n}\n</code></pre>\n\n<p>//this is the implemented method when footer view is clicked\n    override fun onLoadMoreClicked() {\n        fetchTransactionListFromServer()\n    }\nIs there anything I need to do with this approach because users are able to click the footer multiple at a time without letting the app to load the remote data.\nHope you have understood the situation if not let me know. Thanks in advance</p>\n\n<p>Here is the screenshot what I have achieved\n<a href=\"https://i.stack.imgur.com/gXNwc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXNwc.png\" alt=\"screenshot\"></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 977, "user_id": 8101634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2071bbc2522f51e59d4a184bedea0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "primo", "link": "https://stackoverflow.com/users/8101634/primo"}, "edited": false, "score": 0, "creation_date": 1553594542, "post_id": 55354266, "comment_id": 97432416, "body": "have you done this editor.apply() after putString()?"}, {"owner": {"reputation": 35, "user_id": 10390792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OKMgAMM6zRw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUdM8zn_dkLrmqZaL2tyqTxzuvrw/mo/photo.jpg?sz=128", "display_name": "RT16", "link": "https://stackoverflow.com/users/10390792/rt16"}, "edited": false, "score": 0, "creation_date": 1553594552, "post_id": 55354266, "comment_id": 97432422, "body": "yes .. Have done editor.apply()"}, {"owner": {"reputation": 977, "user_id": 8101634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2071bbc2522f51e59d4a184bedea0ba1?s=128&d=identicon&r=PG&f=1", "display_name": "primo", "link": "https://stackoverflow.com/users/8101634/primo"}, "edited": false, "score": 0, "creation_date": 1553594965, "post_id": 55354266, "comment_id": 97432677, "body": "Try doing this way <a href=\"https://stackoverflow.com/a/23024962/8101634\">stackoverflow.com/a/23024962/8101634</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2714, "user_id": 850347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QZUgz.gif?s=128&g=1", "display_name": "Stanley Ko", "link": "https://stackoverflow.com/users/850347/stanley-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1553594510, "creation_date": 1553594510, "answer_id": 55354331, "question_id": 55354266, "link": "https://stackoverflow.com/questions/55354266/access-shared-preference-from-activity-to-fragment/55354331#55354331", "title": "Access Shared Preference from Activity to Fragment", "body": "<p>Did you call <code>commit()</code> method of editor?</p>\n\n<p>See details:\n<a href=\"https://stackoverflow.com/questions/5960678/whats-the-difference-between-commit-and-apply-in-shared-preference\">What&#39;s the difference between commit() and apply() in Shared Preference</a></p>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 6762459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tvnktQ1RSo/AAAAAAAAAAI/AAAAAAAAAGE/cNyIjjRYXac/photo.jpg?sz=128", "display_name": "Talha Bilal", "link": "https://stackoverflow.com/users/6762459/talha-bilal"}, "is_accepted": false, "score": 1, "last_activity_date": 1553594624, "creation_date": 1553594624, "answer_id": 55354366, "question_id": 55354266, "link": "https://stackoverflow.com/questions/55354266/access-shared-preference-from-activity-to-fragment/55354366#55354366", "title": "Access Shared Preference from Activity to Fragment", "body": "<p>Use <strong>getActivity()</strong> instaed of <strong>context</strong> in Fragment    </p>\n\n<p><code>val sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getActivity());</code></p>\n"}, {"tags": [], "owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "is_accepted": true, "score": 1, "last_activity_date": 1553595233, "creation_date": 1553595233, "answer_id": 55354567, "question_id": 55354266, "link": "https://stackoverflow.com/questions/55354266/access-shared-preference-from-activity-to-fragment/55354567#55354567", "title": "Access Shared Preference from Activity to Fragment", "body": "<p>If you want to use the <code>context</code> in your <code>Fragment</code> what I did is this : </p>\n\n<pre><code>private val mContext by lazy {\n        this@YourFragment.context\n}\n</code></pre>\n\n<p>And then you can use <code>mContext</code> as a <code>Context</code>.</p>\n\n<p>And instead of passing <code>applicationcontext</code>in your <code>Activity</code> send <code>this</code> instead.</p>\n\n<pre><code>val editor =PreferenceManager.getDefaultSharedPreferences(this).edit()\n...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10390792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OKMgAMM6zRw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNUdM8zn_dkLrmqZaL2tyqTxzuvrw/mo/photo.jpg?sz=128", "display_name": "RT16", "link": "https://stackoverflow.com/users/10390792/rt16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 55354567, "answer_count": 3, "score": 0, "last_activity_date": 1553595233, "creation_date": 1553594327, "last_edit_date": 1553594591, "question_id": 55354266, "link": "https://stackoverflow.com/questions/55354266/access-shared-preference-from-activity-to-fragment", "title": "Access Shared Preference from Activity to Fragment", "body": "<p>Get SharedPreference values from activity to a fragment</p>\n\n<p>Shared Pref code in activty</p>\n\n<pre><code>val editor =PreferenceManager.getDefaultSharedPreferences(applicationContext).edit()\n                        editor.putString(\"Token\", addToken)\n                        editor.putString(\"isNew\", \n  response.body()!!.isNew)\n                        editor.putString(\"ccid\", \n  response.body()!!.ccId)\n                        editor.putString(\"email\", email)\n editor.apply()\n</code></pre>\n\n<p>SharedPref Code in Fragment</p>\n\n<pre><code>   val sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context)\n    token = sharedPreferences.getString(\"Token\", \"\")\n    ccID = sharedPreferences.getString(\"ccid\", \"\")\n</code></pre>\n\n<p>How to retrieve the values of shared Preference in a fragment from an Activity.Currently i'm not able to access the token from activity to fragment</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-paging"], "comments": [{"owner": {"reputation": 1852, "user_id": 2395334, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/9Vdot.jpg?s=128&g=1", "display_name": "DennisVA", "link": "https://stackoverflow.com/users/2395334/dennisva"}, "edited": false, "score": 0, "creation_date": 1610403406, "post_id": 55353126, "comment_id": 116117479, "body": "I thought about the same thing and searched hours online to find an answer to this...  I would recommend just implementing your own system and ditch the pagination api."}], "owner": {"reputation": 387, "user_id": 10330688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xaRPTrka0-M/AAAAAAAAAAI/AAAAAAAAMDE/_BGRUYBOinU/photo.jpg?sz=128", "display_name": "LIFED", "link": "https://stackoverflow.com/users/10330688/lifed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1553590587, "creation_date": 1553590587, "question_id": 55353126, "link": "https://stackoverflow.com/questions/55353126/how-to-sync-local-database-with-remote-server-using-android-paging-library", "title": "How to sync local database with remote server using Android Paging Library?", "body": "<p>DataSource takes all data from local database (Room). BoundaryCallback loads new data from server only when reachs end. But what to do with items stored in room if they already changed/deleted from remote server? App will display it as they are still in our local database.</p>\n\n<p>I read this article <a href=\"https://proandroiddev.com/paging-library-database-network-c8c3185cfe3f\" rel=\"nofollow noreferrer\">Paging Library: Database + Network</a> but I'm not sure if this is only best solution.</p>\n\n<p>Maybe I should create custom DataSource and DataSourceFactory which will get page from local database and async load the same page from remote server. Then remove local page from database and insert this new page. But it sounds even worse than in that article.</p>\n\n<p>Is there a correct way to sync local database with remote database?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 3, "last_activity_date": 1553587514, "creation_date": 1553587514, "answer_id": 55352371, "question_id": 55352296, "link": "https://stackoverflow.com/questions/55352296/kotlin-how-to-pass-collection-into-generic-type-of-a-function/55352371#55352371", "title": "Kotlin: how to pass collection into generic type of a function", "body": "<p>It seems like you'd actually want to use a generic parameter on the class instead:</p>\n\n<pre><code>abstract class Parent&lt;T&gt; {\n    abstract fun updateValue(value: T)\n}\n</code></pre>\n\n<p>And then extend it to:</p>\n\n<pre><code>class Child : Parent&lt;List&lt;Int&gt;&gt; {\n    override fun updateValue(value: List&lt;Int&gt;)\n}\n</code></pre>\n\n<p>The only reason that the override with <code>String</code> works</p>\n\n<pre><code>override fun &lt;String&gt; updateValue(value: String)\n</code></pre>\n\n<p>is that <code>String</code> is not a type in this context but the name of the generic parameter you used to name <code>T</code> before. <code>List&lt;Int&gt;</code> however is not a valid name.</p>\n"}, {"tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1553587535, "creation_date": 1553587535, "answer_id": 55352378, "question_id": 55352296, "link": "https://stackoverflow.com/questions/55352296/kotlin-how-to-pass-collection-into-generic-type-of-a-function/55352378#55352378", "title": "Kotlin: how to pass collection into generic type of a function", "body": "<p>You cannot override a generic function with a fixed parameter, instead, you may have the type parameter on a class or interface to make it. E.g.</p>\n\n<pre><code>abstract class BaseClass&lt;T&gt; {\n  abstract fun updateValue(value: T) : Unit\n}\n\n///class to accept _only_ List&lt;Int&gt;\nclass ListClass&lt;List&lt;Int&gt;&gt; {\n  override fun updateValue(value: List&lt;Int&gt;) { /*...*/ }\n}\n\n/// class to accept _only_ String\nclass StringClass&lt;String&gt; {\n  override fun updateValue(value: String) { /*...*/ }\n}\n\n</code></pre>\n\n<p>The rationale is as follows when you declare a generic function, e.g. <code>fun &lt;T&gt; updateValue(value: T)</code> is mean it is supposed to work for every possible <code>T</code>. It will not do a pattern matching to find the best suitable match. </p>\n\n<p>You may try checking types in the implementation of the generic function to support a specific case, but in general, it could be hard for collection classes because of <a href=\"https://en.wikipedia.org/wiki/Type_erasure\" rel=\"noreferrer\">type erasure</a>.</p>\n\n<pre><code>fun &lt;T&gt; updateValue(value: T) {\n  when (value) {\n    is String -&gt; handleStringValue(value)\n    is List&lt;*&gt; -&gt; handleListValue(value)\n    else -&gt; handleDefault(value)\n  }\n}\n</code></pre>\n\n<p>You cannot tell <code>List&lt;Int&gt;</code> from <code>List&lt;String&gt;</code> here. An <code>inline fun</code> with <code>reified</code> generics may <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">help</a>.</p>\n"}], "owner": {"reputation": 1271, "user_id": 1459573, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e002b1396d79487a73d22ea9239768bc?s=128&d=identicon&r=PG", "display_name": "Mihaela Romanca", "link": "https://stackoverflow.com/users/1459573/mihaela-romanca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 1, "accepted_answer_id": 55352378, "answer_count": 2, "score": 2, "last_activity_date": 1553587535, "creation_date": 1553587184, "question_id": 55352296, "link": "https://stackoverflow.com/questions/55352296/kotlin-how-to-pass-collection-into-generic-type-of-a-function", "title": "Kotlin: how to pass collection into generic type of a function", "body": "<p>I have this abstract function:</p>\n\n<pre><code>    abstract fun &lt;T&gt; updateValue(value: T)\n</code></pre>\n\n<p>Now i want a subclass to override it with a collection into the generic type:</p>\n\n<pre><code>override fun &lt;List&lt;Int&gt;&gt; updateValue(value: List&lt;Int&gt;)\n</code></pre>\n\n<p>and this does not work. Basic types work just fine (String, Int etc) but when I want to use a collection I do not know the right syntax. This is ok:</p>\n\n<pre><code>override fun &lt;String&gt; updateValue(value: String)\n</code></pre>\n"}, {"tags": ["android", "android-layout", "kotlin", "android-canvas"], "comments": [{"owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "edited": false, "score": 0, "creation_date": 1553583992, "post_id": 55351442, "comment_id": 97426799, "body": "anyone can answer?"}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 5312102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c33244de4755fc2a9e471956f774be2?s=128&d=identicon&r=PG&f=1", "display_name": "atarasenko", "link": "https://stackoverflow.com/users/5312102/atarasenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1553587957, "creation_date": 1553587957, "answer_id": 55352492, "question_id": 55351442, "link": "https://stackoverflow.com/questions/55351442/canvas-based-custom-progress-view-doesnt-get-round/55352492#55352492", "title": "Canvas based custom progress view doesn&#39;t get round", "body": "<p>If <code>percentage = 0</code> then <code>leftIndicatorX</code> must be equal to <code>rightCircleX - radius</code> (so that left and right circles coincide). Try to replace</p>\n\n<p><code>val leftIndicatorX = width - (width * percentage) / 100\n</code></p>\n\n<p>with </p>\n\n<p><code>val leftIndicatorX = rightCircleX - radius - (rightCircleX - leftCircleX) * percentage / 100\n</code></p>\n"}], "owner": {"reputation": 699, "user_id": 2806948, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GI8kp.png?s=128&g=1", "display_name": "Chinthaka Devinda", "link": "https://stackoverflow.com/users/2806948/chinthaka-devinda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55352492, "answer_count": 1, "score": 0, "last_activity_date": 1553587957, "creation_date": 1553583700, "last_edit_date": 1553584096, "question_id": 55351442, "link": "https://stackoverflow.com/questions/55351442/canvas-based-custom-progress-view-doesnt-get-round", "title": "Canvas based custom progress view doesn&#39;t get round", "body": "<p>I have developed a custom progress view using android canvas. Currently I am facing a issue where if the progress value below 3 it does not round the edge as in the image.5% to 100% all good. Following is my code. I have attached the image too hope can someone can help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/uPhwa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uPhwa.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import android.content.Context\nimport android.graphics.Canvas\nimport android.graphics.Color\nimport android.graphics.Paint\nimport android.support.v4.content.ContextCompat\nimport android.util.AttributeSet\nimport android.view.View\n\nclass DevProgressIndicator @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0) :\n  View(context, attrs, defStyleAttr) {\n  private var color: Paint = Paint(Paint.ANTI_ALIAS_FLAG)\n  private var bgColor: Paint = Paint(Paint.ANTI_ALIAS_FLAG)\n\n  var percentage = 0f\n    set(value) {\n      if (value in 0f..100f) field = value\n      else throw IllegalArgumentException(\"Value should be more than 0 and less or equal 100\")\n    }\n\n  init {\n    color.apply {\n      color = Color.RED\n      style = Paint.Style.FILL\n    }\n    bgColor.apply {\n      color = ContextCompat.getColor(context, R.color.material_grey_100)\n      style = Paint.Style.FILL\n    }\n  }\n\n  override fun onDraw(canvas: Canvas?) {\n    super.onDraw(canvas)\n    if (canvas == null) {\n      return\n    }\n    val centerY = (height / 2).toFloat()\n    val radius = centerY\n    val leftCircleX = radius\n    val rightCircleX = width - radius\n    canvas.drawCircle(leftCircleX, centerY, radius, bgColor)\n    canvas.drawCircle(rightCircleX, centerY, radius, bgColor)\n    canvas.drawRect(leftCircleX, 0f, rightCircleX, height.toFloat(), bgColor)\n    if (percentage == 0f) {\n      return\n    }\n    val leftIndicatorX = width - (width * percentage) / 100\n    canvas.drawCircle(rightCircleX, centerY, radius, color)\n    canvas.drawCircle(leftIndicatorX + radius, centerY, radius, color)\n    canvas.drawRect(leftIndicatorX + radius, 0f, rightCircleX, height.toFloat(), color)\n  }\n\n  fun setColor(colorId: Int) {\n    color.color = ContextCompat.getColor(context, colorId)\n    invalidate()\n    requestLayout()\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1553583909, "post_id": 55351432, "comment_id": 97426755, "body": "try to set text from string resource and check it again."}, {"owner": {"reputation": 205, "user_id": 6657175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MuJU7.jpg?s=128&g=1", "display_name": "Mind_Control", "link": "https://stackoverflow.com/users/6657175/mind-control"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1553584175, "post_id": 55351432, "comment_id": 97426891, "body": "@HemantParmar I tried but its not working"}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1553584433, "post_id": 55351432, "comment_id": 97427026, "body": "<code>Snackbar snackbar =null;         TextView textView = (TextView) snackbar.getView();         textView.setTransformationMethod(null);         snackbar.setAction(textView.getText(), new View.OnClickListener() {             @Override             public void onClick(View v) {                              }         });</code>  try this"}, {"owner": {"reputation": 2317, "user_id": 5503940, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3QR3jFocsw/AAAAAAAAAAI/AAAAAAAAACE/jBeWHb1Cpqk/photo.jpg?sz=128", "display_name": "Antonis Radz", "link": "https://stackoverflow.com/users/5503940/antonis-radz"}, "edited": false, "score": 0, "creation_date": 1553584528, "post_id": 55351432, "comment_id": 97427070, "body": "Have your check your styles.xml that parent theme is not set somewhere textAllCaps=true?"}, {"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "reply_to_user": {"reputation": 2317, "user_id": 5503940, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e3QR3jFocsw/AAAAAAAAAAI/AAAAAAAAACE/jBeWHb1Cpqk/photo.jpg?sz=128", "display_name": "Antonis Radz", "link": "https://stackoverflow.com/users/5503940/antonis-radz"}, "edited": false, "score": 0, "creation_date": 1553584670, "post_id": 55351432, "comment_id": 97427136, "body": "@AntonisRadz have look of Manohar ans."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 6657175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MuJU7.jpg?s=128&g=1", "display_name": "Mind_Control", "link": "https://stackoverflow.com/users/6657175/mind-control"}, "edited": false, "score": 0, "creation_date": 1553587275, "post_id": 55351614, "comment_id": 97428423, "body": "How to reduce the snack bar height?"}], "tags": [], "owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "is_accepted": true, "score": 7, "last_activity_date": 1553584511, "creation_date": 1553584511, "answer_id": 55351614, "question_id": 55351432, "link": "https://stackoverflow.com/questions/55351432/snack-bar-set-action-text-always-return-cap-letters/55351614#55351614", "title": "snack bar set action Text always return cap letters", "body": "<p>Try this way</p>\n\n<pre><code>TextView snackbarActionTextView = (TextView) snackbar.getView().findViewById( android.support.design.R.id.snackbar_action );\nsnackbarActionTextView.setAllCaps(false)\n</code></pre>\n\n<p>some credit goes to  <a href=\"https://stackoverflow.com/a/36800101/6478047\">Joshua Pinter</a> </p>\n"}], "owner": {"reputation": 205, "user_id": 6657175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MuJU7.jpg?s=128&g=1", "display_name": "Mind_Control", "link": "https://stackoverflow.com/users/6657175/mind-control"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 55351614, "answer_count": 1, "score": 7, "last_activity_date": 1553584511, "creation_date": 1553583664, "question_id": 55351432, "link": "https://stackoverflow.com/questions/55351432/snack-bar-set-action-text-always-return-cap-letters", "title": "snack bar set action Text always return cap letters", "body": "<p>Snack bar set action text \"Retry\" always shows in \"RETRY\"</p>\n\n<pre><code> snackbar = Snackbar\n                .make(view, \"No internet connection.\", Snackbar.LENGTH_INDEFINITE)\n                .setAction(\"Retry\", new View.OnClickListener() {@Override\n                    public void onClick(View view) {\n                    GlobalBus.getBus().post(new EventbusEvents(\"\"));\n                        if(isOnline(context)){\n                            snackbar.dismiss();\n                        }else {\n                            showSnackBar(view,context);\n                        }\n                    }\n                });(context.getResources().getColor(R.color.place_buy));\n            snackbar.show();\n</code></pre>\n"}, {"tags": ["android", "soap", "kotlin", "retrofit2", "simple-framework"], "comments": [{"owner": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "reply_to_user": {"reputation": 193, "user_id": 10655928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y5ZUzElATRM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB7Wf0gcVPAUaJam8GJkSS5mdDrdA/mo/photo.jpg?sz=128", "display_name": "Sohel S9", "link": "https://stackoverflow.com/users/10655928/sohel-s9"}, "edited": false, "score": 0, "creation_date": 1553585124, "post_id": 55351232, "comment_id": 97427359, "body": "I tried that but it didnt solve the problem. @SohelS9"}], "answers": [{"comments": [{"owner": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "edited": false, "score": 0, "creation_date": 1553585313, "post_id": 55351777, "comment_id": 97427479, "body": "I tried but didnt work. @Sayan"}, {"owner": {"reputation": 188, "user_id": 7379152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-b5nteCh3AjU/AAAAAAAAAAI/AAAAAAAAAQo/h2bBYlJodrE/photo.jpg?sz=128", "display_name": "Sayan Mukherjee", "link": "https://stackoverflow.com/users/7379152/sayan-mukherjee"}, "reply_to_user": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "edited": false, "score": 0, "creation_date": 1553585555, "post_id": 55351777, "comment_id": 97427605, "body": "could you tell me what error is showing?"}, {"owner": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "edited": false, "score": 0, "creation_date": 1553586018, "post_id": 55351777, "comment_id": 97427805, "body": "Got it fixed by making <code>@Element</code> to <code>@field:Element</code>"}, {"owner": {"reputation": 188, "user_id": 7379152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-b5nteCh3AjU/AAAAAAAAAAI/AAAAAAAAAQo/h2bBYlJodrE/photo.jpg?sz=128", "display_name": "Sayan Mukherjee", "link": "https://stackoverflow.com/users/7379152/sayan-mukherjee"}, "reply_to_user": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "edited": false, "score": 0, "creation_date": 1553586179, "post_id": 55351777, "comment_id": 97427885, "body": "could you please add an answer to your question so that other beginners find it helpful?"}], "tags": [], "owner": {"reputation": 188, "user_id": 7379152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-b5nteCh3AjU/AAAAAAAAAAI/AAAAAAAAAQo/h2bBYlJodrE/photo.jpg?sz=128", "display_name": "Sayan Mukherjee", "link": "https://stackoverflow.com/users/7379152/sayan-mukherjee"}, "is_accepted": false, "score": 0, "last_activity_date": 1553585237, "creation_date": 1553585237, "answer_id": 55351777, "question_id": 55351232, "link": "https://stackoverflow.com/questions/55351232/error-in-parsing-soap-request-to-kotlin-data-class/55351777#55351777", "title": "Error in parsing soap request to Kotlin data class", "body": "<p>Try using \"Body\" instead of \"soap:Body\" in your code, let me know if it works</p>\n\n<pre><code>@Root(name = \"soap:Envelope\")\ndata class GetAvailablePassesRequest(\n    @Element(name = \"Body\")\n    val body: MyRequest\n)\n\n@Element(name = \"soap:Body\")\ndata class MyRequest(\n    @Element(name = \"web:GetAvailablePasses\")\n    val getAvailablePasses: GetAvailablePasses\n)\n\n@Element(name = \"web:GetAvailablePasses\")\ndata class GetAvailablePasses(\n    @Element(name = \"web:securityToken\")\n    var securityToken: String,\n    @Element(name = \"web:userName\")\n    var userName: String,\n    @Element(name = \"web:password\")\n    var password: String\n)\n</code></pre>\n\n<p>Just copy and paste the above code in your data class.</p>\n"}], "owner": {"reputation": 3262, "user_id": 4161284, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f09d33de1ddbfce1524fc06700cb213?s=128&d=identicon&r=PG&f=1", "display_name": "sagar suri", "link": "https://stackoverflow.com/users/4161284/sagar-suri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "closed_date": 1553586027, "answer_count": 1, "score": 0, "last_activity_date": 1553593146, "creation_date": 1553582750, "last_edit_date": 1553593146, "question_id": 55351232, "link": "https://stackoverflow.com/questions/55351232/error-in-parsing-soap-request-to-kotlin-data-class", "closed_reason": "Duplicate", "title": "Error in parsing soap request to Kotlin data class", "body": "<p>Hi I am trying to make a soap request. I am using <code>Retrofit</code> and <code>SimpleXmlFactory</code> as the adapter. I have written the below data class for the soap request. But when making a request I am getting error like this:</p>\n\n<pre><code>org.simpleframework.xml.core.ConstructorException: Parameter 'soap:Body' does not have a match in class\n</code></pre>\n\n<p>Soap request:</p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:web=\"http://myserver.com/webservices/\"&gt;\n    &lt;soap:Header/&gt;\n    &lt;soap:Body&gt;\n        &lt;web:GetAvailablePasses&gt;\n            &lt;web:securityToken&gt;*****&lt;/web:securityToken&gt;\n            &lt;web:userName&gt;*****&lt;/web:userName&gt;\n            &lt;web:password&gt;*****&lt;/web:password&gt;\n        &lt;/web:GetAvailablePasses&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>This is my data class:</p>\n\n<pre><code>@Root(name = \"soap:Envelope\")\ndata class GetAvailablePassesRequest(\n    @Element(name = \"soap:Body\", required = false)\n    val body: MyRequest\n)\n\n@Root(name = \"soap:Body\", strict = false)\ndata class MyRequest(\n    @Element(name = \"web:GetAvailablePasses\")\n    val getAvailablePasses: GetAvailablePasses\n)\n\n@Root(name = \"web:GetAvailablePasses\")\ndata class GetAvailablePasses(\n    @Element(name = \"web:securityToken\")\n    var securityToken: String,\n    @Element(name = \"web:userName\")\n    var userName: String,\n    @Element(name = \"web:password\")\n    var password: String\n)\n</code></pre>\n\n<p>This is my ApiService interface:</p>\n\n<pre><code>@POST(\"FlashPassAPI.asmx\")\n    fun getAvailablePasses(@Body request: GetAvailablePassesRequest): Single&lt;GetAvailablePassesResponse&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ios", "kotlin"], "comments": [{"owner": {"reputation": 949, "user_id": 1665723, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/d31229849b5c73a9ca45fdcc09394739?s=128&d=identicon&r=PG", "display_name": "Sundeep Saluja", "link": "https://stackoverflow.com/users/1665723/sundeep-saluja"}, "edited": false, "score": 0, "creation_date": 1560150220, "post_id": 55349254, "comment_id": 99628069, "body": "Any success on this?"}, {"owner": {"reputation": 2260, "user_id": 3996257, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/peRSC.jpg?s=128&g=1", "display_name": "Merl&#237; Escarpenter P&#233;rez", "link": "https://stackoverflow.com/users/3996257/merl%c3%ad-escarpenter-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1573124685, "post_id": 55349254, "comment_id": 103783253, "body": "Any news on this?"}], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 139412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fHwOZ.png?s=128&g=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/139412/pavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1587542709, "creation_date": 1587542709, "answer_id": 61360123, "question_id": 55349254, "link": "https://stackoverflow.com/questions/55349254/how-can-i-connect-through-http-in-kotlin-native-ios-development/61360123#61360123", "title": "How can I connect through HTTP in Kotlin/Native iOS development?", "body": "<p>Kotlin native expects the callback to be called on the main thread.\nThis is how the native HTTP request is implemented in Kotlin conf spinner app.</p>\n\n<p><a href=\"https://github.com/Kotlin/kotlinconf-spinner/blob/master/clients/ios/src/iosMain/kotlin/platformUtils.kt\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinconf-spinner/blob/master/clients/ios/src/iosMain/kotlin/platformUtils.kt</a></p>\n"}], "owner": {"reputation": 41, "user_id": 7835018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77639e7583f637c4fec3273eaae4dad?s=128&d=identicon&r=PG&f=1", "display_name": "Kenji Otsuka", "link": "https://stackoverflow.com/users/7835018/kenji-otsuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1587542709, "creation_date": 1553569418, "question_id": 55349254, "link": "https://stackoverflow.com/questions/55349254/how-can-i-connect-through-http-in-kotlin-native-ios-development", "title": "How can I connect through HTTP in Kotlin/Native iOS development?", "body": "<p>I tried to get a web page in Kotlin/Native with iOS platform, but it didn't work.\nPlease tell me where is the problem.</p>\n\n<p>I created the project with Gradle and <code>build.gradle</code> contains:</p>\n\n<pre><code>plugins {\n    id 'kotlin-multiplatform' version '1.3.21'\n}\n</code></pre>\n\n<p>Here are the codes.</p>\n\n<pre><code>package sample\n\nfun main(args: Array&lt;String&gt;) {\n    println(WebGateway.get(\"https://www.google.com/\"))\n}\n</code></pre>\n\n<pre><code>package sample\n\nimport platform.Foundation.*\nimport platform.darwin.*\n\nactual object WebGateway {\n    actual fun get(urlString: String): String {\n        val semaphore = dispatch_semaphore_create(0)\n\n        var components = NSURLComponents(urlString)\n        val url = components.URL\n        var result: String = \"\"\n        val config = NSURLSessionConfiguration.defaultSessionConfiguration()\n        config.waitsForConnectivity = true\n        config.timeoutIntervalForResource = 300.0\n        val session = NSURLSession.sessionWithConfiguration(\n            config, null, NSOperationQueue.mainQueue()\n        )\n\n        val task = session\n            .dataTaskWithURL(url!!) { nsData: NSData?, nsurlResponse: NSURLResponse?, nsError: NSError? -&gt;\n                nsData?.run { result = toString() }\n                println(nsData)\n                dispatch_semaphore_signal(semaphore);\n            }\n\n        task.resume()\n        session.finishTasksAndInvalidate()\n        NSOperationQueue.mainQueue().waitUntilAllOperationsAreFinished()\n        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER)\n        return result\n    }\n}\n</code></pre>\n\n<p>After building the application, <code>main.kexe</code> was created.</p>\n\n<p>I expected the Google web page HTML is printed in standard output by executing the application.\nBut the actual is:</p>\n\n<pre><code> % ./main.kexe\n\n</code></pre>\n\n<p>It doesn't show anything.\nThe program stops at <code>dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER)</code>.</p>\n\n<p>After executing the application, <code>task.state</code> became <code>NSURLSessionTaskStateCompleted</code>, but the program doesn't show anything or finish.</p>\n\n<p>When I changed the <code>session</code> to <code>NSURLSession.sessionWithConfiguration(config)</code>, I got the following output.</p>\n\n<pre><code> % ./main.kexe\nUncaught Kotlin exception: kotlin.native.IncorrectDereferenceException: illegal attempt to access non-shared sample.WebGateway.$&lt;anonymous&gt;$FUNCTION_REFERENCE$0@f6f058e8 from other thread\n        at 0   main.kexe                           0x000000010039c3c3 ThrowIllegalObjectSharingException + 595\n        at 1   main.kexe                           0x00000001003b9d6d -[KotlinObjectHolder ref] + 141\n        at 2   main.kexe                           0x00000001003c9524 platform_Foundation_kniBridge11046 + 148\n        at 3   main.kexe                           0x00000001003ca18c __platform_Foundation_kniBridge11045_block_invoke + 108\n        at 4   CFNetwork                           0x00007fff4cd80763 __75-[__NSURLSessionLocal taskForClass:request:uploadFile:bodyData:completion:]_block_invoke + 19\n        at 5   CFNetwork                           0x00007fff4cd8016c __49-[__NSCFLocalSessionTask _task_onqueue_didFinish]_block_invoke + 172\n        at 6   Foundation                          0x00007fff50243a47 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK__ + 7\n        at 7   Foundation                          0x00007fff5024394e -[NSBlockOperation main] + 68\n        at 8   Foundation                          0x00007fff50218f7a -[__NSOperationInternal _start:] + 686\n        at 9   Foundation                          0x00007fff5024367f __NSOQSchedule_f + 227\n        at 10  libdispatch.dylib                   0x00007fff7aef3d4f _dispatch_call_block_and_release + 12\n        at 11  libdispatch.dylib                   0x00007fff7aef4dcb _dispatch_client_callout + 8\n        at 12  libdispatch.dylib                   0x00007fff7aef75d8 _dispatch_continuation_pop + 427\n        at 13  libdispatch.dylib                   0x00007fff7aef6c7a _dispatch_async_redirect_invoke + 718\n        at 14  libdispatch.dylib                   0x00007fff7af02d1a _dispatch_root_queue_drain + 325\n        at 15  libdispatch.dylib                   0x00007fff7af034b1 _dispatch_worker_thread2 + 90\n        at 16  libsystem_pthread.dylib             0x00007fff7b1346ee _pthread_wqthread + 619\n        at 17  libsystem_pthread.dylib             0x00007fff7b134415 start_wqthread + 13\nzsh: abort      ./main.kexe\n</code></pre>\n\n<p>When I changed <code>session</code> to <code>NSURLSession.sharedSession()</code>, the same error appeared.</p>\n"}, {"tags": ["android", "kotlin", "enums", "android-application-class"], "comments": [{"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1553567455, "post_id": 55349009, "comment_id": 97422617, "body": "As far as I can tell, the only thing you need to worry about is whether those values can be retrieved at the time the <code>enum</code> class is first loaded."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4256652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERrx3.jpg?s=128&g=1", "display_name": "liumingyi", "link": "https://stackoverflow.com/users/4256652/liumingyi"}, "edited": false, "score": 0, "creation_date": 1553662967, "post_id": 55350974, "comment_id": 97462940, "body": "Thanks a lot for your response,I&#39;m going to revise my code. And , someone told me, enum is a static field, so i should not put context in"}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1553581555, "creation_date": 1553581555, "answer_id": 55350974, "question_id": 55349009, "link": "https://stackoverflow.com/questions/55349009/application-in-kotlin-enum/55350974#55350974", "title": "Application in kotlin enum", "body": "<p>I wouldn't use <code>App</code> class in the <code>enum</code>. Instead I would pass only resource id, because we can't rely that <code>App</code> class is instantiated at the moment of enum class is first loaded:</p>\n\n<pre><code>enum class Labels(val titleResId: Int, val type: Int) {\n   PERFORM(R.string.perform, 0),\n   DUTY(R.string.duty, 1),\n   ... ...\n}\n</code></pre>\n\n<p>And later we can use it, for example in <code>Activity</code>, like this:</p>\n\n<pre><code>textView.setText(Labels.PERFORM.titleResId)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4256652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERrx3.jpg?s=128&g=1", "display_name": "liumingyi", "link": "https://stackoverflow.com/users/4256652/liumingyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553581682, "creation_date": 1553567296, "last_edit_date": 1553581682, "question_id": 55349009, "link": "https://stackoverflow.com/questions/55349009/application-in-kotlin-enum", "title": "Application in kotlin enum", "body": "<p>Is it safe if I use application in a kotlin <code>enum</code>? Like this:</p>\n\n<pre><code>enum class Labels(title: String, type: Int) {\n     PERFORM(App.application.getString(R.string.perform), 0),\n     DUTY(App.application.getString(R.string.duty), 1),\n     ... ...\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "maps", "markers"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 11118318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8b555b3cfefe328a99b1f4f049f3b8?s=128&d=identicon&r=PG&f=1", "display_name": "jjjj-unit", "link": "https://stackoverflow.com/users/11118318/jjjj-unit"}, "is_accepted": false, "score": 1, "last_activity_date": 1553559453, "creation_date": 1553559453, "answer_id": 55348160, "question_id": 55347444, "link": "https://stackoverflow.com/questions/55347444/how-would-i-go-about-launching-a-custom-uri-intent-for-each-marker-within-my-clu/55348160#55348160", "title": "How would I go about launching a custom URI intent for each marker within my ClusterManager?", "body": "<p>After a lot of research and trial and error, I found a solution to my own problem.</p>\n\n<p>I created HashMap of <strong>LatLng, String</strong></p>\n\n<p>I store the LatLng locations from my Firebase into the HashMap as well as the Company names which is of type String, and then on my setOnInfoWindowClickListener, I create a lat and long variable that holds marker.position.latitude, and longitude. I then create another variable called addPositions of type LatLng, and I add the lat and long marker positions into it. Then I just go companyMap.get(addPositions) and Voila!! I get the company String name for the corresponding markers!</p>\n\n<pre><code>    private lateinit var companyName: String\n    private lateinit var companyLocation: LatLng\n    private val companyMap = hashMapOf&lt;LatLng, String&gt;()\n</code></pre>\n\n<pre><code>        mMap.setOnInfoWindowClickListener(object : GoogleMap.OnInfoWindowClickListener {\n            override fun onInfoWindowClick(marker: Marker) {\n                var lat = marker.position.latitude\n                var long = marker.position.longitude\n                var addPositions: LatLng\n                addPositions = LatLng(lat, long)\n\n                var companyGet = companyMap.get(addPositions)\n\n                val url = \"http://www.google.com/#q=\" + companyGet.toString()\n                val i = Intent(Intent.ACTION_VIEW)\n                i.setData(Uri.parse(url))\n                startActivity(i)\n            }\n        })\n</code></pre>\n\n<pre><code>  private fun loadMarkersFromDB() {\n        mCompanies.child(\"data/results\").addListenerForSingleValueEvent(object : ValueEventListener {\n            override fun onDataChange(dataSnapshot: DataSnapshot) {\n                if (dataSnapshot.exists()) {\n                    for (s in dataSnapshot.children) {\n                        var company = s.getValue(Company::class.java)\n                        val infoWindow =\n                            MyItem(company!!.latitude, company.longitude, company.name)\n                        mClusterManager.setAnimation(false)\n\n                        if ((company.latitude &lt; (circle.center.latitude + circle.radius) &amp;&amp; company.latitude &gt; (circle.center.latitude - circle.radius))\n                            &amp;&amp; ((company.longitude &lt; (circle.center.longitude + circle.radius) &amp;&amp; company.longitude &gt; (circle.center.longitude - circle.radius)))\n                        ) {\n                            mClusterManager.addItem(infoWindow)\n                        }\n\n                        companyName = company.name\n                        companyLocation = LatLng(company.latitude, company.longitude)\n                        companyMap.put(companyLocation, companyName)\n                        Log.d(\"onDataChange\", company.toString())\n                    }\n                }\n            }\n\n            override fun onCancelled(databaseError: DatabaseError) {\n                Log.w(\"MapsActivity\", databaseError.toException())\n            }\n        })\n    }\n</code></pre>\n\n<p>WhooHoo!! :D</p>\n"}], "owner": {"reputation": 25, "user_id": 11118318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8b555b3cfefe328a99b1f4f049f3b8?s=128&d=identicon&r=PG&f=1", "display_name": "jjjj-unit", "link": "https://stackoverflow.com/users/11118318/jjjj-unit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553559453, "creation_date": 1553553837, "question_id": 55347444, "link": "https://stackoverflow.com/questions/55347444/how-would-i-go-about-launching-a-custom-uri-intent-for-each-marker-within-my-clu", "title": "How would I go about launching a custom URI intent for each marker within my ClusterManager?", "body": "<p>I am currently trying to launch a Uri intent so that when the user clicks the Info Window of a marker, it will launch a google query + the name of that corresponding marker which I have obtained from Firebase and parsed into ClusterManager.</p>\n\n<p>I have tried creating a String holder to store the company name inside it, and then adding it with a google query string and passing it as a Uri Intent all inside my setOnInfoWindowClickListener.</p>\n\n<p>(<strong>NOTE:</strong> 'TheNameOfThisMarker' is not actually defined here, I just wanted to give an idea of what I am trying to accomplish')</p>\n\n<p>My Info Window Click Listener:</p>\n\n<pre><code>        mMap.setOnInfoWindowClickListener(object : GoogleMap.OnInfoWindowClickListener {\n            override fun onInfoWindowClick(marker: Marker) {\n                val url = \"http://www.google.com/#q=\" + \" \" + (TheNameOfThisMarker)\n                val i = Intent(Intent.ACTION_VIEW)\n                i.setData(Uri.parse(url))\n                startActivity(i)\n            }\n        })\n</code></pre>\n\n<p>Loading Data from Firebase:</p>\n\n<pre><code>    private fun loadMarkersFromDB() {\n        mCompanies.child(\"data/results\").addListenerForSingleValueEvent(object : ValueEventListener {\n            override fun onDataChange(dataSnapshot: DataSnapshot) {\n                if (dataSnapshot.exists()) {\n                    for (s in dataSnapshot.children) {\n                        var company = s.getValue(Company::class.java)\n                        val infoWindow =\n                            MyItem(company!!.latitude, company.longitude, company.name)\n                        mClusterManager.setAnimation(false)\n\n                        if ((company.latitude &lt; (circle.center.latitude + circle.radius) &amp;&amp; company.latitude &gt; (circle.center.latitude - circle.radius))\n                            &amp;&amp; ((company.longitude &lt; (circle.center.longitude + circle.radius) &amp;&amp; company.longitude &gt; (circle.center.longitude - circle.radius)))\n                        ) {\n                            mClusterManager.addItem(infoWindow)\n                        }\n\n                        TheNameOfThisMarker = company!!.name\n                        Log.d(\"onDataChange\", company.toString())\n                    }\n                }\n            }\n\n            override fun onCancelled(databaseError: DatabaseError) {\n                Log.w(\"MapsActivity\", databaseError.toException())\n            }\n        })\n    }\n\n</code></pre>\n\n<p>My Cluster setup:</p>\n\n<pre><code>    private fun setUpCluster() {\n        // Initialize the manager with the context and the map.\n        // (Activity extends context, so we can pass 'this' in the constructor.)\n        mClusterManager = ClusterManager(this, mMap)\n        // Point the map's listeners at the listeners implemented by the cluster\n        // manager.\n        mMap.setOnCameraIdleListener(mClusterManager)\n        mMap.setOnMarkerClickListener(mClusterManager)\n\n        // Add cluster items (markers) to the cluster manager.\n        loadMarkersFromDB()\n    }\n</code></pre>\n\n<p>Although I am able to do something inside my Info Window Click Listener, I have no idea how to pinpoint each individual marker's name and add it into my query Uri intent.</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 678, "user_id": 1443721, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8c525e5dbd3185b4bb9d656d06a3d764?s=128&d=identicon&r=PG", "display_name": "user1443721", "link": "https://stackoverflow.com/users/1443721/user1443721"}, "edited": false, "score": 0, "creation_date": 1553578875, "post_id": 55347302, "comment_id": 97425005, "body": "Found it. In the 2 examples, GlobalScope.launch runs in a different thread."}], "answers": [{"comments": [{"owner": {"reputation": 678, "user_id": 1443721, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8c525e5dbd3185b4bb9d656d06a3d764?s=128&d=identicon&r=PG", "display_name": "user1443721", "link": "https://stackoverflow.com/users/1443721/user1443721"}, "edited": false, "score": 0, "creation_date": 1553571757, "post_id": 55347385, "comment_id": 97423428, "body": "&quot;but it will use one from a shared pool&quot;. Do you imply GlobalScope.launch { } runs in another thread, if the CPU has at least 2 cores?"}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "reply_to_user": {"reputation": 678, "user_id": 1443721, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8c525e5dbd3185b4bb9d656d06a3d764?s=128&d=identicon&r=PG", "display_name": "user1443721", "link": "https://stackoverflow.com/users/1443721/user1443721"}, "edited": false, "score": 0, "creation_date": 1553585938, "post_id": 55347385, "comment_id": 97427771, "body": "Not really. In fact, the pool contains at least 2 threads, even for single code processors. That what the doc states if I understood correctly."}], "tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1553554578, "last_edit_date": 1553554578, "creation_date": 1553553445, "answer_id": 55347385, "question_id": 55347302, "link": "https://stackoverflow.com/questions/55347302/does-globalscope-launch-create-a-new-thread-or-run-in-the-same-thread/55347385#55347385", "title": "Does GlobalScope.launch create a new thread or run in the same thread?", "body": "<p><code>GlobalScope.launch { }</code> will not necessarily <em>create</em> a new thread, but it will use one from a shared pool because it uses the <code>Default</code> dispatcher. So, as far as your question is concerned, in your snippet, the block passed to launch runs in a different thread indeed.</p>\n\n<p>In the documentation about <a href=\"https://kotlinlang.org/docs/reference/coroutines/coroutine-context-and-dispatchers.html#dispatchers-and-threads\" rel=\"nofollow noreferrer\">dispatchers and threads</a>, you will find the following:</p>\n\n<blockquote>\n  <p>The default dispatcher, that is used when coroutines are launched in GlobalScope, is represented by Dispatchers.Default and uses shared background pool of threads</p>\n</blockquote>\n\n<p>And in the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-default.html\" rel=\"nofollow noreferrer\">Dispatchers.Default doc</a>, you can find:</p>\n\n<blockquote>\n  <p>By default, the maximal level of parallelism used by this dispatcher is equal to the number of CPU cores, but is at least two. Level of parallelism X guarantees that no more than X tasks can be executed in this dispatcher in parallel.</p>\n</blockquote>\n\n<p>Note that you could change the dispatcher by providing one as a parameter of <code>launch</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1553553614, "creation_date": 1553553614, "answer_id": 55347412, "question_id": 55347302, "link": "https://stackoverflow.com/questions/55347302/does-globalscope-launch-create-a-new-thread-or-run-in-the-same-thread/55347412#55347412", "title": "Does GlobalScope.launch create a new thread or run in the same thread?", "body": "<p>The <code>GlobalScope.launch{..}</code> function will not block. It returns an <code>Job</code> object, which you may use to wait for a result. </p>\n\n<p>Behind the scenes, the <code>GlobalScope</code> uses the default dispatcher <code>Dispatchers.Default</code>. You may see it, for example, by printing a thread name inside a <code>launch{..}</code> function. </p>\n\n<p>You will need to run more coroutines to see them blocking each other because of <code>Thread.sleep</code> calls.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/coroutines/coroutine-context-and-dispatchers.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/coroutine-context-and-dispatchers.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1553585844, "creation_date": 1553585844, "answer_id": 55351925, "question_id": 55347302, "link": "https://stackoverflow.com/questions/55347302/does-globalscope-launch-create-a-new-thread-or-run-in-the-same-thread/55351925#55351925", "title": "Does GlobalScope.launch create a new thread or run in the same thread?", "body": "<p>The <code>GlobalScope</code> lets you start coroutines which more-or-less have the same behavior as <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/basics.md#global-coroutines-are-like-daemon-threads\" rel=\"nofollow noreferrer\">daemon threads</a> since they are detached from any Coroutine-<code>Job</code> and basically run as long as the application. Their lifecycle is only limited by the application itself. This is something you want to avoid by using \"<a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/basics.md#structured-concurrency\" rel=\"nofollow noreferrer\">structured concurrency</a>\" which basically means that your coroutines should be nested in a way that you can control them without manually keeping track of their references and joining them for example in order to await their computations. So in your real-life code you should avoid <code>GlobalScope</code> as much as possible, since there's most certainly a better solution. </p>\n\n<p>As to your question, and as already mentioned, the <code>GlobalScope</code> runs on the <code>Dispatchers.Default</code> pool, which means that you will block <em>some worker thread</em> but not the one you spawned the coroutine from.</p>\n\n<p>On the other hand, if you were to write this block:</p>\n\n<pre><code>fun main() {\n    runBlocking { \n        Thread.sleep(1000L) \n        println(\"World!\") \n    }\n    println(\"Hello,\") \n    Thread.sleep(2000L) \n}\n</code></pre>\n\n<p>you'll see that the coroutine blocks the <code>main</code> thread and the output will show a different result. That is because <code>runBlocking</code> runs on the caller thread <code>main</code> rather than one of the worker pool threads.</p>\n"}], "owner": {"reputation": 678, "user_id": 1443721, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8c525e5dbd3185b4bb9d656d06a3d764?s=128&d=identicon&r=PG", "display_name": "user1443721", "link": "https://stackoverflow.com/users/1443721/user1443721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1858, "favorite_count": 0, "accepted_answer_id": 55351925, "answer_count": 3, "score": 3, "last_activity_date": 1553585844, "creation_date": 1553552842, "question_id": 55347302, "link": "https://stackoverflow.com/questions/55347302/does-globalscope-launch-create-a-new-thread-or-run-in-the-same-thread", "title": "Does GlobalScope.launch create a new thread or run in the same thread?", "body": "<p>I have the question from this code.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/basics.html</a></p>\n\n<pre><code>fun main() {\n    GlobalScope.launch { // launch new coroutine in background and continue\n        delay(1000L) // non-blocking delay for 1 second (default time unit is ms)\n        println(\"World!\") // print after delay\n    }\n    println(\"Hello,\") // main thread continues while coroutine is delayed\n    Thread.sleep(2000L) // block main thread for 2 seconds to keep JVM alive\n}\n</code></pre>\n\n<p>I replace delay(1000L) with Thread.sleep(1000L). If GlobalScope.launch block will run in the same thread, the Thread.sleep(1000L) will block the thread. However it seems not.</p>\n\n<pre><code>fun main() {\n    GlobalScope.launch { // launch new coroutine in background and continue\n        Thread.sleep(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\") // \n    Thread.sleep(2000L) // block main thread for 2 seconds to keep JVM alive\n} \n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "edited": false, "score": 0, "creation_date": 1553553872, "post_id": 55347268, "comment_id": 97419647, "body": "After subscribe block it\u2019s no longer observable, so you can\u2019t do that. It\u2019s applicable only before subscribe call"}, {"owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "reply_to_user": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "edited": false, "score": 1, "creation_date": 1553554017, "post_id": 55347268, "comment_id": 97419680, "body": "Oh my bad, what if you switch the order of <code>subscribeOn</code> and <code>observeOn</code>? I used to have a similar problem and changing these orders is what solved it."}, {"owner": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "edited": false, "score": 1, "creation_date": 1553587633, "post_id": 55347268, "comment_id": 97428628, "body": "Oh damn, you pointed me in right direction. Please modify your answer to use <code>observeOn(Schedulers.io())</code> before <code>.flatMap{}</code>"}, {"owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "reply_to_user": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "edited": false, "score": 1, "creation_date": 1553595739, "post_id": 55347268, "comment_id": 97433233, "body": "Glad I did, I have edited the answer, make sure that&#39;s what you meant."}], "tags": [], "owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "is_accepted": true, "score": 1, "last_activity_date": 1553595534, "last_edit_date": 1553595534, "creation_date": 1553552637, "answer_id": 55347268, "question_id": 55346851, "link": "https://stackoverflow.com/questions/55346851/rxjava-wait-for-async-task-and-then-call-api/55347268#55347268", "title": "RxJava - wait for async task and then call Api", "body": "<p>The order of <code>subscribeOn</code>, <code>observeOn</code>, <code>subscribe</code>, and transformations matters. Apparently, it's needed to do the transformations, in this case, the <code>flatMap</code> <em>after</em> specifying the observer thread with <code>observeOn</code> to make sure the code is executed in the right thread.</p>\n"}], "owner": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 55347268, "answer_count": 1, "score": 1, "last_activity_date": 1553595534, "creation_date": 1553550117, "question_id": 55346851, "link": "https://stackoverflow.com/questions/55346851/rxjava-wait-for-async-task-and-then-call-api", "title": "RxJava - wait for async task and then call Api", "body": "<p>Trying to get <code>lastLocation</code> and once it's done call api. But somehow once location is obtained my api calls always running in <code>mainThread</code>, so i'm getting exception:</p>\n\n<pre><code>android.io.NetworkOnMainThreadException\n</code></pre>\n\n<p><strong><em>Here is my location observer:</em></strong></p>\n\n<pre><code>fun getLocation(): Single&lt;Location&gt; {\n        return Single.create&lt;Location&gt; { subscriber -&gt;\n            fusedLocationClient.lastLocation.addOnSuccessListener {\n                if (it != null) {\n                    subscriber.onSuccess(it)\n                } else {\n                    subscriber.onError(Exception(\"No location\"))\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p><strong><em>Code that does some transformations</em></strong></p>\n\n<pre><code>val locationObserver = getLocation()\nobservables.add(locationObserver.flatMap { _ -&gt; sendDataToServer(data)})\n</code></pre>\n\n<p><strong><em>Observer</em></strong></p>\n\n<pre><code>Single.zip(observables) { args1 -&gt; args1 }.subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe({\n            Timber.i(\"Success\")\n\n        }, {\n            Timber.i(\"Error %s\", observables.size, it.localizedMessage)\n            it.printStackTrace()\n        })\n</code></pre>\n\n<p>I've set <code>subscribeOn</code> so it shouldn't be on <code>mainThread</code>, but looks like something missed. </p>\n\n<p>Found that if i will use something like <code>Single.just(\"One\").flatMap{ ... }</code> that will work fine and will be executed on non-main thread. </p>\n\n<p>Is there something to do with <code>getLocation</code> function?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 0, "creation_date": 1553550666, "post_id": 55345482, "comment_id": 97418600, "body": "Is <code>obj</code> a <code>Boolean?</code>? Or is <code>obj</code> an <code>Object?</code> with a <code>Boolean</code> property called <code>bool</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "is_accepted": true, "score": 4, "last_activity_date": 1553552013, "last_edit_date": 1553552013, "creation_date": 1553550969, "answer_id": 55346997, "question_id": 55345482, "link": "https://stackoverflow.com/questions/55345482/kotlin-arrow-for-nullable-booleans/55346997#55346997", "title": "Kotlin Arrow for nullable booleans", "body": "<p>Assuming that you're asking about a <code>Boolean?</code> (a nullable Boolean value), then you don't need Arrow, this plain Kotlin code works:</p>\n\n<pre><code>if (bool?:false) {\n  // This code is run only if bool is not null and true\n} else {\n  // This code is run if bool is null or false\n}\n</code></pre>\n\n<p>If you're asking about an <code>Object?</code> (a nullable object) with a Boolean val property, then the equivalent code would be:</p>\n\n<pre><code>if (obj?.bool?:false) {\n  // This code is run only if obj is not null and obj.bool is true\n} else {\n  // This code is run if obj is null or obj.bool is false\n}\n</code></pre>\n"}], "owner": {"reputation": 1063, "user_id": 9188790, "user_type": "registered", "profile_image": "https://graph.facebook.com/1960869044240152/picture?type=large", "display_name": "Angelina", "link": "https://stackoverflow.com/users/9188790/angelina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 55346997, "answer_count": 1, "score": 1, "last_activity_date": 1553552013, "creation_date": 1553543823, "question_id": 55345482, "link": "https://stackoverflow.com/questions/55345482/kotlin-arrow-for-nullable-booleans", "title": "Kotlin Arrow for nullable booleans", "body": "<p>I have a lot of checks of type <code>if (obj?.bool == true)</code> because the boolean is nullable. What's the more elegant way to replace it for example with Arrow? </p>\n"}, {"tags": ["kotlin", "distinct-values"], "answers": [{"comments": [{"owner": {"reputation": 1948, "user_id": 8098236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7003b88799ae3c4d2faf4dbf20250521?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Rehwinkel", "link": "https://stackoverflow.com/users/8098236/ian-rehwinkel"}, "edited": false, "score": 0, "creation_date": 1553544100, "post_id": 55345479, "comment_id": 97415955, "body": "Thank you, great answer! I&#39;m wondering: Is there a more computationally efficient way to doing this? (as using <code>indexOf</code> in a loop can get very slow for large lists)"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "reply_to_user": {"reputation": 1948, "user_id": 8098236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7003b88799ae3c4d2faf4dbf20250521?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Rehwinkel", "link": "https://stackoverflow.com/users/8098236/ian-rehwinkel"}, "edited": false, "score": 0, "creation_date": 1553544312, "post_id": 55345479, "comment_id": 97416056, "body": "You are right. We may update <code>set</code> variable to map from string to index - it will be faster. I&#39;ll update the answer"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1553634571, "post_id": 55345479, "comment_id": 97456023, "body": "@EugenePetrenko using set[v] (get operator) instead of getValue would make it even more beautiful :)"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1553672849, "post_id": 55345479, "comment_id": 97466486, "body": "You are right, but the type of the map would be <code>Map&lt;String, Int?&gt;</code>, because it <code>[]</code> operator returns nullable value. To make sure we do have <code>Int</code> type we need to check the returned value is not null. The getValue is more elegant (and it does the check) <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-value.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556285081, "post_id": 55345479, "comment_id": 98397163, "body": "I don&#39;t know... this doesn&#39;t really look readable to me... you may also want to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"nofollow noreferrer\"><code>asSequence</code></a> instead of directly using <code>distinct().mapIndexed</code>, etc."}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1553544329, "last_edit_date": 1553544329, "creation_date": 1553543812, "answer_id": 55345479, "question_id": 55345257, "link": "https://stackoverflow.com/questions/55345257/turn-a-list-into-a-distinct-list-and-map-indices/55345479#55345479", "title": "Turn a list into a distinct list and map indices", "body": "<p>The following expression will do that:</p>\n\n<pre><code>val p = listOf(\"a\", \"b\", \"a\", \"d\").let {\n  val set = it.distinct().mapIndexed { i, v -&gt; v to i }.toMap()\n  it.mapIndexed { i, v -&gt; i to set.getValue(v) }\n}.toMap()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556286674, "post_id": 55346467, "comment_id": 98398154, "body": "I think this answer makes way more sense... I would only extract <code>orig.distinct()</code> in its own <code>val distinctValues = orig.distinct()</code> which makes the code even more readable and I assume that the <code>distinctValues</code> are actually required at some point again ... (or I just don&#39;t understand the value of such a map ;-))"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1553548305, "creation_date": 1553548305, "answer_id": 55346467, "question_id": 55345257, "link": "https://stackoverflow.com/questions/55345257/turn-a-list-into-a-distinct-list-and-map-indices/55346467#55346467", "title": "Turn a list into a distinct list and map indices", "body": "<p>I think this would solve the problem pretty neatly:</p>\n\n<pre><code>val orig = listOf(\"a\", \"b\", \"a\", \"c\")\n\nval positions = orig.distinct().let { uniques -&gt;\n    orig.withIndex().associate { (idx, e) -&gt; idx to uniques.indexOf(e) }\n}\n</code></pre>\n"}], "owner": {"reputation": 1948, "user_id": 8098236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7003b88799ae3c4d2faf4dbf20250521?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Rehwinkel", "link": "https://stackoverflow.com/users/8098236/ian-rehwinkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 1, "accepted_answer_id": 55345479, "answer_count": 2, "score": 2, "last_activity_date": 1553548305, "creation_date": 1553542729, "question_id": 55345257, "link": "https://stackoverflow.com/questions/55345257/turn-a-list-into-a-distinct-list-and-map-indices", "title": "Turn a list into a distinct list and map indices", "body": "<p>I have a List of Objects, and I want to turn it into a distinct list while mapping all indices to the new indices.</p>\n\n<p>Example:</p>\n\n<p>List: <code>[\"a\", \"b\", \"a\", \"d\"]</code> -> <code>[\"a\", \"b\", \"d\"]</code></p>\n\n<p>Map: </p>\n\n<pre><code>{\n  0: 0, //0th index of original list is now 0th index of distinct list\n  1: 1,\n  2: 0, //2nd index of original list is now 0th index of distinct list\n  3: 2  //3rd index of original list is now 2th index of distinct list\n} \n</code></pre>\n\n<p>Is there a simple way to do this with a one-liner or with a fairly simple solution in kotlin?</p>\n"}, {"tags": ["java", "android", "string", "kotlin", "textview"], "comments": [{"owner": {"reputation": 896, "user_id": 8809599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j32n6m6gBk/AAAAAAAAAAI/AAAAAAAAA2w/ZBjODiiNN2c/photo.jpg?sz=128", "display_name": "Na-In Hae", "link": "https://stackoverflow.com/users/8809599/na-in-hae"}, "edited": false, "score": 0, "creation_date": 1553551212, "post_id": 55345007, "comment_id": 97418804, "body": "have you tried <code>SpannableString</code>? and then setting <code>BackgroundColorSpan</code>"}], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 4948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJddy.jpg?s=128&g=1", "display_name": "Ryan Godlonton-Shaw", "link": "https://stackoverflow.com/users/4948827/ryan-godlonton-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1553591052, "creation_date": 1553591052, "answer_id": 55353265, "question_id": 55345007, "link": "https://stackoverflow.com/questions/55345007/how-to-create-highlight-textview-like-adobe-reader-or-medium/55353265#55353265", "title": "How to create highlight textview like Adobe Reader or Medium?", "body": "<p>You can use <a href=\"https://developer.android.com/reference/android/text/SpannableString.html\" rel=\"nofollow noreferrer\">SpannableString</a></p>\n\n<p>To highlight specific text use this method.</p>\n\n<pre><code>private void highlightString(String input) {\n//Get the text from text view and create a spannable string\nSpannableString spannableString = new SpannableString(mTextView.getText());\n//Get the previous spans and remove them\nBackgroundColorSpan[] backgroundSpans = spannableString.getSpans(0, spannableString.length(), BackgroundColorSpan.class);\n\nfor (BackgroundColorSpan span: backgroundSpans) {\n    spannableString.removeSpan(span);\n}\n\n//Search for all occurrences of the keyword in the string\nint indexOfKeyword = spannableString.toString().indexOf(input);\n\nwhile (indexOfKeyword &gt; 0) {\n    //Create a background color span on the keyword\n    spannableString.setSpan(new BackgroundColorSpan(Color.YELLOW), indexOfKeyword, indexOfKeyword + input.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n    //Get the next index of the keyword\n    indexOfKeyword = spannableString.toString().indexOf(input, indexOfKeyword + input.length());\n}\n\n//Set the final text on TextView\nmTextView.setText(spannableString);}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7118085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kb635.png?s=128&g=1", "display_name": "Arief Purnama Muharram", "link": "https://stackoverflow.com/users/7118085/arief-purnama-muharram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553591052, "creation_date": 1553541562, "question_id": 55345007, "link": "https://stackoverflow.com/questions/55345007/how-to-create-highlight-textview-like-adobe-reader-or-medium", "title": "How to create highlight textview like Adobe Reader or Medium?", "body": "<p>guys.\nI need a little bit inspiration right here. I want to create an application that have a highlight feature, just like screenshot below. But, I don't have an idea how to do this. I think Spannable TextView only can't just help me. Do you have some idea?\nThank you.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AB9b6.png\" rel=\"nofollow noreferrer\">Example of highlight menu in Medium App</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3084, "user_id": 1941654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0e446b8cae7132038fefdb922b7d233?s=128&d=identicon&r=PG", "display_name": "Mike Hill", "link": "https://stackoverflow.com/users/1941654/mike-hill"}, "edited": false, "score": 0, "creation_date": 1553544507, "post_id": 55344906, "comment_id": 97416158, "body": "This question and answer has closely related info: <a href=\"https://stackoverflow.com/questions/48284994/lambda-implementation-of-interface-in-kotlin\" title=\"lambda implementation of interface in kotlin\">stackoverflow.com/questions/48284994/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": true, "score": 4, "last_activity_date": 1553705599, "last_edit_date": 1553705599, "creation_date": 1553543067, "answer_id": 55345334, "question_id": 55344906, "link": "https://stackoverflow.com/questions/55344906/how-to-define-functional-interface-with-generics-in-kotlin/55345334#55345334", "title": "How to define functional interface with generics in Kotlin?", "body": "<p>Most of the time (always?) it is sufficient to define the type of the lambda in the parameter of the function that receives it.</p>\n\n<p>For example: </p>\n\n<pre><code>open class Bar\nclass Person: Bar()\n\nvar f = { p: Person -&gt; p.toString() }\n\nfun &lt;T : Bar&gt; withFoo(block: (T) -&gt; String) { }\nfun &lt;T : Bar&gt; otherFoo(block: (T) -&gt; String) { }   \n\nfun main() {\n    withFoo(f)\n    otherFoo(f)\n}\n</code></pre>\n\n<p>The same way the Kotlin documentation states: \n\"since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.\" </p>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions</a></p>\n"}], "owner": {"reputation": 1726, "user_id": 804451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c59f1b0044505c96934b5d56c8c51480?s=128&d=identicon&r=PG", "display_name": "Manuel Mauky", "link": "https://stackoverflow.com/users/804451/manuel-mauky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 55345334, "answer_count": 1, "score": 5, "last_activity_date": 1553705599, "creation_date": 1553541053, "question_id": 55344906, "link": "https://stackoverflow.com/questions/55344906/how-to-define-functional-interface-with-generics-in-kotlin", "title": "How to define functional interface with generics in Kotlin?", "body": "<p>I'm learning Kotlin and I have some trouble with functions. \nI'm trying to create something like a functional interface with a generic parameter.\nIn Java I would create something like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@FunctionalInterface\npublic interface Foo&lt;T extends Bar&gt; {\n    String something(T arg);\n}\n</code></pre>\n\n<p>Then I can use this somewhere else like this (given that <code>Person</code> extends <code>Bar</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\nFoo&lt;Person&gt; f = p -&gt; p.toString();\n\n</code></pre>\n\n<p>How do you write this with Kotlin? </p>\n\n<p>The first thing I tried was to use type-aliases like this:</p>\n\n<pre><code>typealias Foo&lt;T&gt; = (T) -&gt; String\n</code></pre>\n\n<p>However, it stopped working when I added the bound to the type parameter:</p>\n\n<pre><code>typealias Foo&lt;T: Bar&gt; = (T) -&gt; String  // Error: Bounds are not allowed on type alias parameters\n</code></pre>\n\n<p>The second approach was to write an interface that extends the function type:</p>\n\n<pre><code>interface Foo&lt;T: Bar&gt; : (T) -&gt; String\n</code></pre>\n\n<p>However, now I don't know how to instantiate a lambda function from with this. It works when I create class from it like this:</p>\n\n<pre><code>class Something: Foo&lt;Person&gt; {\n    override fun invoke(p: Person): String {\n        return p.toString()\n    }\n}\n\nval f = Something()\n</code></pre>\n\n<p>But this is a big overhead and I'm sure there has to be a better solution.</p>\n\n<p>So how can I define a function signature that can be reused by many functions that supports generic parameters with bounds in kotlin?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1462, "user_id": 10470378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b042d284ca2d8c83a6ee597b976841?s=128&d=identicon&r=PG&f=1", "display_name": "ronginat", "link": "https://stackoverflow.com/users/10470378/ronginat"}, "edited": false, "score": 2, "creation_date": 1553538384, "post_id": 55343742, "comment_id": 97413298, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52081383/kotlin-backend-internal-error-exception-during-code-generation\">(Kotlin) Backend Internal error: Exception during code generation</a>"}, {"owner": {"reputation": 47, "user_id": 8604142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1513909915396619/picture?type=large", "display_name": "Modeste KOUASSI", "link": "https://stackoverflow.com/users/8604142/modeste-kouassi"}, "reply_to_user": {"reputation": 1462, "user_id": 10470378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b042d284ca2d8c83a6ee597b976841?s=128&d=identicon&r=PG&f=1", "display_name": "ronginat", "link": "https://stackoverflow.com/users/10470378/ronginat"}, "edited": false, "score": 0, "creation_date": 1553599292, "post_id": 55343742, "comment_id": 97435386, "body": "what is &quot;Anko&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 8604142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1513909915396619/picture?type=large", "display_name": "Modeste KOUASSI", "link": "https://stackoverflow.com/users/8604142/modeste-kouassi"}, "is_accepted": false, "score": 0, "last_activity_date": 1553602621, "creation_date": 1553602621, "answer_id": 55356964, "question_id": 55343742, "link": "https://stackoverflow.com/questions/55343742/e-java-lang-illegalstateexception-backend-internal-error-exception-during-cod/55356964#55356964", "title": "e: java.lang.IllegalStateException: Backend Internal error: Exception during code generation", "body": "<p>The cause of the error was i taking my TabLayout's id from xml and just pasted the id in my code without apply any kind of property or calling any function on it.</p>\n"}], "owner": {"reputation": 47, "user_id": 8604142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1513909915396619/picture?type=large", "display_name": "Modeste KOUASSI", "link": "https://stackoverflow.com/users/8604142/modeste-kouassi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1740, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553629688, "creation_date": 1553536006, "last_edit_date": 1553629688, "question_id": 55343742, "link": "https://stackoverflow.com/questions/55343742/e-java-lang-illegalstateexception-backend-internal-error-exception-during-cod", "title": "e: java.lang.IllegalStateException: Backend Internal error: Exception during code generation", "body": "<p>At the execution of my android kotlin project on my emulator, I receive this error during the compilation of the project</p>\n"}, {"tags": ["kotlin", "android-jetpack-navigation"], "comments": [{"owner": {"reputation": 928, "user_id": 1876980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/59fa849ac5f2e6bc141aacc5920f4cf9?s=128&d=identicon&r=PG", "display_name": "Stephen M -on strike-", "link": "https://stackoverflow.com/users/1876980/stephen-m-on-strike"}, "edited": false, "score": 0, "creation_date": 1553537827, "post_id": 55343479, "comment_id": 97413043, "body": "Welcome to Stackoverflow.  Please do not use screen shots for code, as they are hard to read and impossible to search.  For more information on how to write a good question, please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> ."}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 2282051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae3f5460df24ff08d4a4e0cd3c7ab38?s=128&d=identicon&r=PG", "display_name": "Alireza Sobhani", "link": "https://stackoverflow.com/users/2282051/alireza-sobhani"}, "is_accepted": false, "score": 1, "last_activity_date": 1571196937, "creation_date": 1571196937, "answer_id": 58405385, "question_id": 55343479, "link": "https://stackoverflow.com/questions/55343479/how-to-add-navdestination-to-navigatorprovider/58405385#58405385", "title": "How to add NavDestination to NavigatorProvider?", "body": "<p>add below import</p>\n\n<pre><code>import androidx.navigation.plusAssign\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8155939, "user_type": "registered", "profile_image": "https://graph.facebook.com/1346349848734965/picture?type=large", "display_name": "\u0411\u0430\u0445\u043e\u0434\u0443\u0440 \u0411\u041a", "link": "https://stackoverflow.com/users/8155939/%d0%91%d0%b0%d1%85%d0%be%d0%b4%d1%83%d1%80-%d0%91%d0%9a"}, "is_accepted": false, "score": 0, "last_activity_date": 1588551904, "last_edit_date": 1588551904, "creation_date": 1588536302, "answer_id": 61580905, "question_id": 55343479, "link": "https://stackoverflow.com/questions/55343479/how-to-add-navdestination-to-navigatorprovider/61580905#61580905", "title": "How to add NavDestination to NavigatorProvider?", "body": "<p><strong>Dynamic Feature Module Support</strong></p>\n\n<pre><code>implementation \"androidx.navigation:navigation-dynamic-features-fragment:2.3.0-alpha06\"\n</code></pre>\n\n<p><a href=\"https://developer.android.com/jetpack/androidx/releases/navigation\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/navigation</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5361588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b79054b1306944bb4fe4f083b59cd609?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/5361588/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588551904, "creation_date": 1553535059, "last_edit_date": 1553547041, "question_id": 55343479, "link": "https://stackoverflow.com/questions/55343479/how-to-add-navdestination-to-navigatorprovider", "title": "How to add NavDestination to NavigatorProvider?", "body": "<p>The extension function of package androidx.navigation have plusAssign, therefore it is equivalent of <code>+=</code> but in my code it doesn't find the plusAssign.</p>\n\n<pre><code>class MyNavHostFragment: NavHostFragment() {\n    override fun createFragmentNavigator(): Navigator&lt;out FragmentNavigator.Destination&gt; {\n        navController.navigatorProvider += DialogFragmentNavigator(childFragmentManager)\n        return super.createFragmentNavigator()\n    }\n}\n</code></pre>\n\n<p>\u00a9\ufe0f matpag</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1553548705, "creation_date": 1553548705, "answer_id": 55346544, "question_id": 55343141, "link": "https://stackoverflow.com/questions/55343141/how-to-reuse-kotlin-coroutine-after-error-handling/55346544#55346544", "title": "How to reuse Kotlin coroutine after error handling?", "body": "<p>Re-creating a Job does not look like the best choice. You may launch new coroutine with <code>launch{..}</code> or <code>async{..}</code> functions and handle exceptions with ordinary <code>try/catch</code> blocks. If that is not enough - a <code>supervisorScope{..}</code> can help to make sure a parent Job is not terminated. </p>\n\n<p>You may take a look at the docs for more details<br>\n<a href=\"https://kotlinlang.org/docs/reference/coroutines/exception-handling.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/exception-handling.html</a></p>\n"}], "owner": {"reputation": 104, "user_id": 3571610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002744670128/picture?type=large", "display_name": "felipe.rce", "link": "https://stackoverflow.com/users/3571610/felipe-rce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553548705, "creation_date": 1553533899, "question_id": 55343141, "link": "https://stackoverflow.com/questions/55343141/how-to-reuse-kotlin-coroutine-after-error-handling", "title": "How to reuse Kotlin coroutine after error handling?", "body": "<p>How reuse the coroutine after error handling?\nIn my code I recreate a new job and scope instance when any error on coroutine (using CoroutineExceptionHandler), It work's, buy I think that it is not a good chooise, maybe have another alternative</p>\n\n<pre><code>    fun getDashBoardData() {\n            loadingStateLiveData.value = true\n            scope.launch(scope.coroutineContext + CoroutineExceptionHandler { _, e -&gt;\n                assetsBalanceLiveData.postValue(Resource.error(app.getString(R.string.no_connection), null))\n                Log.e(TAG, \"CoroutineExceptionHandler - ${e.message}\")\n                job = Job()\n                scope = CoroutineScope(Dispatchers.Default + job)\n                loadingStateLiveData.postValue(false)\n            }) {\n              // SUSPENDED FUN   \n              assetsBalanceLiveData.postValue(DashboardRepository.getUserAssetsBalance())\n\n              // SUSPENDED FUN    \n              incomeGraphDataLiveData.postValue(DashboardRepository.getIncomeGraphData())\n              loadingStateLiveData.postValue(false)\n            }\n        }\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 3185280, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/jmYGw.png?s=128&g=1", "display_name": "L0laapk3", "link": "https://stackoverflow.com/users/3185280/l0laapk3"}, "edited": false, "score": 0, "creation_date": 1553534456, "post_id": 55343193, "comment_id": 97411446, "body": "Using a spread operator with an empty array is a good way to explicitely define the parameter type, thank you!"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1553534079, "creation_date": 1553534079, "answer_id": 55343193, "question_id": 55342975, "link": "https://stackoverflow.com/questions/55342975/kotlin-resolve-function-call-vararg-ambiguity/55343193#55343193", "title": "Kotlin resolve function call vararg ambiguity", "body": "<p>You may pass an empty array explicitly, e.g.</p>\n\n<pre><code>XposedHelpers.findMethodBestMatch(WebView::class.java, \"getWebViewClient\", *emptyArray&lt;Any&gt;())\n</code></pre>\n\n<p>or</p>\n\n<pre><code>XposedHelpers.findMethodBestMatch(WebView::class.java, \"getWebViewClient\", *emptyArray&lt;Class&lt;*&gt;&gt;())\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 3185280, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/jmYGw.png?s=128&g=1", "display_name": "L0laapk3", "link": "https://stackoverflow.com/users/3185280/l0laapk3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 55343193, "answer_count": 1, "score": 0, "last_activity_date": 1553534079, "creation_date": 1553533329, "question_id": 55342975, "link": "https://stackoverflow.com/questions/55342975/kotlin-resolve-function-call-vararg-ambiguity", "title": "Kotlin resolve function call vararg ambiguity", "body": "<p>In java, you can do:</p>\n\n<pre><code>Method m = XposedHelpers.findMethodBestMatch(WebView.class, \"getWebViewClient\");\n</code></pre>\n\n<p>However, if you convert this method to kotlin, you get:</p>\n\n<pre><code>val m = XposedHelpers.findMethodBestMatch(WebView::class.java, \"getWebViewClient\")\n</code></pre>\n\n<p>This will give an error: <a href=\"https://i.stack.imgur.com/it10N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/it10N.png\" alt=\"enter image description here\"></a></p>\n\n<p>To my understanding, java will simply use one of the two functions and its not immediately clear which one it will call.</p>\n\n<p>How do I choose to use either one of these functions in kotlin?</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin", "lint"], "comments": [{"owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "edited": false, "score": 2, "creation_date": 1553562806, "post_id": 55342894, "comment_id": 97421713, "body": "delete the fi after the for"}], "owner": {"reputation": 37, "user_id": 11154489, "user_type": "registered", "profile_image": "https://graph.facebook.com/2325965014306451/picture?type=large", "display_name": "Bhavna Haritsa", "link": "https://stackoverflow.com/users/11154489/bhavna-haritsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553546133, "creation_date": 1553533050, "last_edit_date": 1553546133, "question_id": 55342894, "link": "https://stackoverflow.com/questions/55342894/gradlew-errors-while-executing-while-inspecting-on-lint-in-android-studio", "title": "Gradlew errors while executing while inspecting on lint in android studio", "body": "<p>I'm using lint to debug my code and I'm getting an error at this part of code</p>\n\n<pre><code>for fi arg in \"$@\"; do\n    CHECK=`echo \"$arg\"|egrep -c \"$OURCYGPATTERN\" -`\n    CHECK2=`echo \"$arg\"|egrep -c \"^-\"` \n</code></pre>\n\n<p>the pointer shows error at \" $@ ;\" after ; and says expected a command.\nAny solution to debug this ?\nPlease help</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 2, "creation_date": 1553529953, "post_id": 55341874, "comment_id": 97408813, "body": "Your question is broad. You could use RxJava to zip, or coroutines to async/await or other methods."}, {"owner": {"reputation": 51, "user_id": 5451645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d182bb6cc5abc683424081debe6bcffb?s=128&d=identicon&r=PG&f=1", "display_name": "Agustin Pazos", "link": "https://stackoverflow.com/users/5451645/agustin-pazos"}, "edited": false, "score": 0, "creation_date": 1553535582, "post_id": 55341874, "comment_id": 97412011, "body": "I think this can help you <a href=\"https://medium.com/@szholdiyarov/concurrent-jobs-on-android-using-promises-3fda27b3e776\" rel=\"nofollow noreferrer\">medium.com/@szholdiyarov/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 11254711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NDYSj7-EEbk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4Oo5ZTQ0Omvh3p-by1H3X_MPIRQ/mo/photo.jpg?sz=128", "display_name": "S&#233;rgio Eduardo", "link": "https://stackoverflow.com/users/11254711/s%c3%a9rgio-eduardo"}, "edited": false, "score": 0, "creation_date": 1553548437, "post_id": 55341874, "comment_id": 97417754, "body": "If you are using Kotlin check this answer <a href=\"https://stackoverflow.com/questions/54719864/kotlin-coroutines-how-to-block-to-await-join-all-jobs\" title=\"kotlin coroutines how to block to await join all jobs\">stackoverflow.com/questions/54719864/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1553600459, "creation_date": 1553600459, "answer_id": 55356298, "question_id": 55341874, "link": "https://stackoverflow.com/questions/55341874/android-call-rest-api-in-a-loop/55356298#55356298", "title": "Android call Rest API in a loop", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/603270/shkschneider\">@shkschneider</a></p>\n\n<blockquote>\n  <p>Your question is broad. You could use RxJava to zip, or coroutines to async/await or other methods. </p>\n</blockquote>\n\n<p>Ended up with usage of <code>.zip</code></p>\n\n<pre><code>Single.zip(observables) { args -&gt; args }\n      .subscribeOn(Schedulers.io())\n      .observeOn(AndroidSchedulers.mainThread())\n      .subscribe({ ...Success }, { ...Failure })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10138492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4cilJUHLTT8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7psBAxlMsWCVuVOHCCZsIU5Dg--mQ/mo/photo.jpg?sz=128", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/10138492/harpreet-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1553604072, "creation_date": 1553604072, "answer_id": 55357449, "question_id": 55341874, "link": "https://stackoverflow.com/questions/55341874/android-call-rest-api-in-a-loop/55357449#55357449", "title": "Android call Rest API in a loop", "body": "<p>in your response success you need to call again get/post method.\nafter success you know your api call is done or else it throw error. </p>\n"}], "owner": {"reputation": 1805, "user_id": 7134112, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4f1a7a8de736c47ddb84983b8ebe4d10?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0443\u0437\u044e\u043a", "link": "https://stackoverflow.com/users/7134112/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d1%83%d0%b7%d1%8e%d0%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1553604072, "creation_date": 1553529729, "question_id": 55341874, "link": "https://stackoverflow.com/questions/55341874/android-call-rest-api-in-a-loop", "title": "Android call Rest API in a loop", "body": "<p>I'm new to android, so have some questions regarding <code>api</code> calls. </p>\n\n<p>Currently i use Retrofit to accomplish my api calls.</p>\n\n<p><strong><em>Here is example of my api call with retrofit</em></strong> </p>\n\n<pre><code>@POST(\"posts/new\")\nfun createPost(@Body post: Post, @Header(\"Authorization\") token: String): Single&lt;PostResult&gt;\n</code></pre>\n\n<p>So, assume i have 10 posts and i need to call <code>createPost</code> 10 times (Yes, i know i can have <code>list</code> input on BE side, but ... ). Best way is to iterate over posts (<code>for/map</code>) and send them to the server. </p>\n\n<p>But here is problem:<br>\n - How do i can track that all calls are done? </p>\n\n<p>In JS i can have something like <code>Promise.all</code> - could i do something\n   similar in android?</p>\n\n<p>I thought about counting the finished vs started requests, but i think it's bit ugly isn't? </p>\n"}, {"tags": ["spring", "kotlin", "spring-webflux"], "comments": [{"owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "edited": false, "score": 1, "creation_date": 1553541520, "post_id": 55341804, "comment_id": 97414723, "body": "Use <code>Mono.fromSupplier()</code> instead of <code>fromRunnable</code>. <code>fromRunnable</code> returns an empty Mono, see <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#fromRunnable-java.lang.Runnable-\" rel=\"nofollow noreferrer\">projectreactor.io/docs/core/release/api/reactor/core/publish&zwnj;&#8203;er/&hellip;</a>"}, {"owner": {"reputation": 183, "user_id": 1289242, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a3e253ff25f847ec67511d7d17cc7f7a?s=128&d=identicon&r=PG", "display_name": "CodeMonkeyCharlie", "link": "https://stackoverflow.com/users/1289242/codemonkeycharlie"}, "reply_to_user": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "edited": false, "score": 0, "creation_date": 1553627073, "post_id": 55341804, "comment_id": 97452873, "body": "Thanks, that did the trick!"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 1289242, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a3e253ff25f847ec67511d7d17cc7f7a?s=128&d=identicon&r=PG", "display_name": "CodeMonkeyCharlie", "link": "https://stackoverflow.com/users/1289242/codemonkeycharlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1553627124, "creation_date": 1553627124, "answer_id": 55364581, "question_id": 55341804, "link": "https://stackoverflow.com/questions/55341804/understanding-spring-webflux-reactive-endpoints/55364581#55364581", "title": "Understanding Spring Webflux/Reactive endpoints", "body": "<p>As Rene mentioned in the comment, my mistake was using Mono.fromRunnable {} instead of Mono.fromSupplier {}</p>\n"}], "owner": {"reputation": 183, "user_id": 1289242, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a3e253ff25f847ec67511d7d17cc7f7a?s=128&d=identicon&r=PG", "display_name": "CodeMonkeyCharlie", "link": "https://stackoverflow.com/users/1289242/codemonkeycharlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1553627124, "creation_date": 1553529559, "question_id": 55341804, "link": "https://stackoverflow.com/questions/55341804/understanding-spring-webflux-reactive-endpoints", "title": "Understanding Spring Webflux/Reactive endpoints", "body": "<p>I'm trying to make sense of reactive endpoints in Spring, and this is confusing me.</p>\n\n<pre><code>// in a @RestController\n@GetMapping(\"/someendpoint\")\nfun someEndpoint(): ResponseEntity&lt;Mono&lt;Map&lt;String, Any&gt;&gt;&gt; {\n    return ResponseEntity(Mono.zip(\n        Mono.fromRunnable&lt;List&lt;SomeItem&gt;&gt; { someApiCall() },\n        Mono.fromRunnable&lt;List&lt;SomeOtherItem&gt;&gt; { someOtherApiCall() },\n    ).map { tuple -&gt;\n        val someItems = tuple.t1\n        val someOtherItems = tuple.t2\n        mapOf(\n            \"someItems\" to someItems,\n            \"someOtherItems\" to someOtherItems\n        )\n    }, HttpStatus.OK)\n}\n</code></pre>\n\n<p>I have an endpoint that returns a Mono of a Map, the idea being just to render some arbitrary JSON.</p>\n\n<p>As part of the request, I do a Mono.zip(Mono.fromRunnable { ... }) where I call API's for data.</p>\n\n<p>After the zip, I do a .map over the results and ultimately return the Map that I expect to see rendered.</p>\n\n<p>When I hit the endpoint, no JSON is rendered, but the runnables in the zip are called and the response time takes those API calls into account. The .map after the .zip is never called. I'm probably just not understanding something simple here--like the .map is not subscribed to?</p>\n\n<p>What is going on here and what is the usual way to handle a situation like this using Webflux/Reactor?</p>\n"}, {"tags": ["android", "kotlin", "lockscreen"], "owner": {"reputation": 41, "user_id": 11255729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kxp77qO-wEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNX2AOkXlDX_PYcOKckfdAUDdk2g/mo/photo.jpg?sz=128", "display_name": "Martin Gro\u0161elj", "link": "https://stackoverflow.com/users/11255729/martin-gro%c5%a1elj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553536809, "creation_date": 1553527268, "last_edit_date": 1553536809, "question_id": 55341106, "link": "https://stackoverflow.com/questions/55341106/kotlin-how-to-display-a-locationsettingsrequest-dialog-while-device-locked", "title": "Kotlin - How to display a LocationSettingsRequest dialog, while device locked", "body": "<p>I have an activity, that is trigered by an event and I use this code, to be able to display it while my device is locked. </p>\n\n<pre><code>  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {\n            setShowWhenLocked(true)\n            setTurnScreenOn(true)\n            val pm=getSystemService(Context.POWER_SERVICE)as PowerManager\n            pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,\"FireApp:test2\").acquire(1000000)\n            val keyguardManager = getSystemService(Context.KEYGUARD_SERVICE) as KeyguardManager\n            keyguardManager.requestDismissKeyguard(this, null)\n        }else{\n\n            this.window.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD or\n                    WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON or\n                    WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED)\n        }\n</code></pre>\n\n<p>It is working fine with my device being locked, until i want to display the LocationSettingsRequest dialog using this code:</p>\n\n<pre><code>fun displayLocationSettingsRequest(context: Context) {\n        val googleApiClient = GoogleApiClient.Builder(context)\n                .addApi(LocationServices.API).build()\n        googleApiClient.connect()\n\n        val locationRequest = LocationRequest.create()\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)\n        locationRequest.setInterval(5000)\n        locationRequest.setFastestInterval(2000)\n\n        val builder = LocationSettingsRequest.Builder().addLocationRequest(locationRequest)\n        builder.setAlwaysShow(true)\n\n\n        val result = LocationServices.SettingsApi.checkLocationSettings(googleApiClient, builder.build())\n        result.setResultCallback (object: ResultCallback&lt;LocationSettingsResult&gt; {\n            override fun onResult(result: LocationSettingsResult) {\n                val status = result.status\n                if (status.statusCode == LocationSettingsStatusCodes.SUCCESS) {\n                    Log.d(\"Martin\", \"Lokacija je vklju\u010dena!\")\n                }\n                if (status.statusCode == LocationSettingsStatusCodes.RESOLUTION_REQUIRED) {\n                    try {\n                        status.startResolutionForResult(this@medAlarmom2, 0x1)\n                    } catch (e: IntentSender.SendIntentException) {\n                        Log.d(\"Martin\", \"PendingIntent unable to execute request.\")\n                    }\n\n                }\n                if (status.statusCode == LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE) Log.d(\"Martin\", \"Location settings are inadequate, and cannot be fixed here. Dialog \"+\"not created.\")\n            }\n        })\n    }\n</code></pre>\n\n<p>I can't find a good solution, to be able to display this dialog without unlocking the device. Anyone has a solution for this one?</p>\n\n<p>Thanks a milion!\nMartin</p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components"], "comments": [{"owner": {"reputation": 55, "user_id": 10810963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f208794e71f0824a15c0d8216d5de4f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Grbo", "link": "https://stackoverflow.com/users/10810963/j-grbo"}, "edited": false, "score": 0, "creation_date": 1601311050, "post_id": 55341088, "comment_id": 113361563, "body": "You can refer to the second answer on this topic here: <a href=\"https://stackoverflow.com/questions/59147647/prevent-views-from-being-clicked-until-animation-added-to-action-via-navigation/64106156#64106156\" title=\"prevent views from being clicked until animation added to action via navigation\">stackoverflow.com/questions/59147647/&hellip;</a>"}], "owner": {"reputation": 595, "user_id": 7501880, "user_type": "registered", "profile_image": "https://graph.facebook.com/1054241858036185/picture?type=large", "display_name": "MoTahir", "link": "https://stackoverflow.com/users/7501880/motahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553527425, "creation_date": 1553527215, "last_edit_date": 1553527425, "question_id": 55341088, "link": "https://stackoverflow.com/questions/55341088/how-to-add-listener-to-android-navigation-architecture-component-action-animatio", "title": "How to add listener to android Navigation Architecture Component action animation", "body": "<p>I want to execute some code by the end of an animation that I've set to an action, is there some way to add a listener to navigation controller action animation?</p>\n"}, {"tags": ["android", "android-intent", "kotlin", "photo"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "edited": false, "score": 0, "creation_date": 1553623123, "post_id": 55352017, "comment_id": 97450921, "body": "Thank you, but I don&#39;t need a photo picker. I need to take photos with the default camera intent but I need to take more than one photo."}, {"owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "edited": false, "score": 0, "creation_date": 1553623181, "post_id": 55352017, "comment_id": 97450952, "body": "Maybe there is a library that does just what I need, but I seem to be much too silly to find it"}], "tags": [], "owner": {"reputation": 2595, "user_id": 6334037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czgV2.jpg?s=128&g=1", "display_name": "Jitesh Prajapati", "link": "https://stackoverflow.com/users/6334037/jitesh-prajapati"}, "is_accepted": false, "score": 1, "last_activity_date": 1553586174, "creation_date": 1553586174, "answer_id": 55352017, "question_id": 55340669, "link": "https://stackoverflow.com/questions/55340669/intent-for-taking-more-than-one-photo/55352017#55352017", "title": "Intent for taking more than one photo", "body": "<p>There are so many libraries for that.</p>\n\n<p>Just try this <a href=\"https://github.com/Jitesh1720/PixImagePicker\" rel=\"nofollow noreferrer\">Whatsapp like photo picker</a></p>\n\n<p>Checkout the sample and library</p>\n\n<pre><code>Pix.start(Context,                    //Activity or Fragment Instance\n                    RequestCode,                //Request code for activity results\n                    NumberOfImagesToSelect);    //Number of images to restict selection count\n</code></pre>\n\n<p>You will get the result in onActivityResult</p>\n\n<pre><code>@Override\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n                if (resultCode == Activity.RESULT_OK &amp;&amp; requestCode == RequestCode) {\n                    ArrayList&lt;String&gt; returnValue = data.getStringArrayListExtra(Pix.IMAGE_RESULTS);\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553586174, "creation_date": 1553525898, "last_edit_date": 1553584069, "question_id": 55340669, "link": "https://stackoverflow.com/questions/55340669/intent-for-taking-more-than-one-photo", "title": "Intent for taking more than one photo", "body": "<p>A intent for taking photos is quite easy:</p>\n\n<pre><code>Intent(MediaStore.ACTION_IMAGE_CAPTURE).also { takePictureIntent -&gt;\n    takePictureIntent.resolveActivity(packageManager)?.also {\n        startActivityForResult(takePictureIntent, 1)\n    }\n}\n</code></pre>\n\n<p>Instead of this I would like to create an intent for taking multiple photos just like when you open the photo-app - you can take e.g. 5 photos which are saved in a folder and when all photos are taken you can exit the photo app.</p>\n\n<p>But with the ACTION_IMAGE_CAPTURE you have to klick on a button to open the intent, take the image klick OK, klick again on the button to open the intent...</p>\n\n<p>Is it possible, to open an IMAGE_CAPTURE intent take as many photos as you like and return to the activity and work with these images?</p>\n"}, {"tags": ["kotlin", "spring-jdbc", "spring-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553534777, "post_id": 55341087, "comment_id": 97411602, "body": "&quot;So the Kotlin-written extension functions need to adhere to this and allow nulls to be returned&quot; Except they don&#39;t: <code>function: (ResultSet, Int) -&gt; T</code> can&#39;t return <code>null</code>, so the <code>RowMapper</code> using it can&#39;t return <code>null</code>."}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553542899, "post_id": 55341087, "comment_id": 97415375, "body": "Ha! Well spotted @AlexeyRomanov: I missed that. I wonder if this is a small bug in that extension method then: maybe the lambda passed into <code>queryForObject</code> should be declared as having a return type of <code>T?</code>. Because the JavaDocs seem to suggest that the <code>RowMapper</code> should be allowed to return null."}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553596021, "post_id": 55341087, "comment_id": 97433394, "body": "Agreed.  Issue logged <a href=\"https://github.com/spring-projects/spring-framework/issues/22682\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553607749, "post_id": 55341087, "comment_id": 97441015, "body": "@AlexeyRomanov Could you elaborate on why these extensions should be <code>inline</code>? Performance?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1553608789, "post_id": 55341087, "comment_id": 97441782, "body": "Yes. The win is not that large, especially when comparing to database access, but in my opinion you need a reason <i>not</i> to declare such methods inline (e.g. <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#public-inline-restrictions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>). Maybe there is such a reason for this case, I just don&#39;t see it."}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 0, "creation_date": 1553611248, "post_id": 55341087, "comment_id": 97443497, "body": "If we do that I guess that should apply to any Kotlin extension that invoke it&#39;s java counterpart, could you please create an issue for that on <a href=\"https://github.com/spring-projects/spring-framework/issues\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues</a> ?"}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 2, "last_activity_date": 1553543467, "last_edit_date": 1553543467, "creation_date": 1553527211, "answer_id": 55341087, "question_id": 55340598, "link": "https://stackoverflow.com/questions/55340598/why-queryforobject-kotlin-extension-func-returns-nullable-t-if-it-actually-will/55341087#55341087", "title": "Why queryForObject Kotlin extension func returns nullable T? if it actually will throw EmptyResultDataAccessException?", "body": "<p><code>JdbcOperationsExtensions.kt</code> adds some extension functions to the <code>org.springframework.jdbc.core.JdbcOperations</code> interface (written in Java). If you look at the JavaDocs for <code>queryForObject</code> in that, it says:</p>\n\n<pre><code>@return the single mapped object (may be {@code null} if the given\n{@link RowMapper} returned {@code} null)\n</code></pre>\n\n<p>See <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-jdbc/src/main/java/org/springframework/jdbc/core/JdbcOperations.java\" rel=\"nofollow noreferrer\">here</a> for full source code of the <code>JdbcOperations</code> Java class.</p>\n\n<p>So the Kotlin-written extension functions need to adhere to this and allow nulls to be returned, hence the nullable type.</p>\n\n<p>Except... as pointed out by @AlexeyRomanov, this particular overload of <code>queryForObject</code> takes in a lambda which returns <code>T</code>, so can't ever return null, so arguably this overload could return <code>T</code>, not <code>T?</code>. Maybe it's a bit inconsistent that this lambda in Kotlin can't return null, but the JavaDocs on the very similar overload in the Java class explicitly state that it (<code>RowMapper</code>) should be allowed to return null.</p>\n\n<p>Regardless of that point, some other overloads of <code>queryForObject</code> simply call to down to the Java-written overload, and because it's written in Java, it's possible that it could return a null. So for them it does seem to make sense for it to be a nullable return value. In which case arguably it's a nice bit of consistency that all the overloads do in fact return the nullable <code>T</code>.</p>\n"}], "owner": {"reputation": 3744, "user_id": 3581539, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6ee9defd5259d9b86dc385aff3d28d7f?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill", "link": "https://stackoverflow.com/users/3581539/kirill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "accepted_answer_id": 55341087, "answer_count": 1, "score": 1, "last_activity_date": 1553543467, "creation_date": 1553525650, "question_id": 55340598, "link": "https://stackoverflow.com/questions/55340598/why-queryforobject-kotlin-extension-func-returns-nullable-t-if-it-actually-will", "title": "Why queryForObject Kotlin extension func returns nullable T? if it actually will throw EmptyResultDataAccessException?", "body": "<p>Using Kotlin and Spring 5 for some simple project.\nI would like to get single record from database by id using <code>queryForObject</code>. \nMy query is a 'simple select by id':</p>\n\n<pre><code>jdbc.queryForObject(\"select id, name from example where id = ?\", id)\n{ rs: ResultSet, _: Int -&gt; NamedEnt(rs.getLong(\"id\"), rs.getString(\"name\") }\n</code></pre>\n\n<p>In <code>JdbcOperationsExtensions.kt</code> it is declared to return nullable type <code>T?</code>:</p>\n\n<pre><code>fun &lt;T : Any&gt; JdbcOperations.queryForObject(sql: String, vararg args: Any, function: (ResultSet, Int) -&gt; T): T? =\n    queryForObject(sql, RowMapper { resultSet, i -&gt; function(resultSet, i) }, *args)\n</code></pre>\n\n<p>In practice when I pass not existing identifier, I face with:</p>\n\n<blockquote>\n  <p>org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0</p>\n</blockquote>\n\n<p>Then I do not understand what is the point of returning nullable type? You either receive a single record or exception. Or I miss something?</p>\n"}, {"tags": ["android", "unit-testing", "testing", "kotlin", "robolectric"], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1553534030, "post_id": 55343062, "comment_id": 97411180, "body": "As I am very new to unit testing and all of this.  I implemented this but not exactly sure what it does?"}, {"owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "reply_to_user": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1553534211, "post_id": 55343062, "comment_id": 97411290, "body": "Added some explanation."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1553534305, "post_id": 55343062, "comment_id": 97411352, "body": "Awesome, very helpful.  thank you now on to the next issue/error that popped up lol"}], "tags": [], "owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "is_accepted": true, "score": 18, "last_activity_date": 1553534205, "last_edit_date": 1553534205, "creation_date": 1553533643, "answer_id": 55343062, "question_id": 55340569, "link": "https://stackoverflow.com/questions/55340569/androidthreeten-not-working-in-unit-test-without-robolectric/55343062#55343062", "title": "AndroidThreeTen not working in unit test without robolectric?", "body": "<p>JVM unit tests don't run on Android runtime. Instead of ThreeTenABP, you can just use ThreeTenBP directly to get the same API initialised for a regular JVM.</p>\n\n<p>In my project build.gradle I use a setup like:</p>\n\n<pre><code>implementation \"com.jakewharton.threetenabp:threetenabp:${threetenabpVersion}\"\ntestImplementation(\"org.threeten:threetenbp:${threetenbpVersion}\") {\n    exclude module: \"com.jakewharton.threetenabp:threetenabp:${threetenabpVersion}\"\n}\n</code></pre>\n\n<p>where</p>\n\n<pre><code>threetenabpVersion = '1.2.0'\nthreetenbpVersion = '1.3.8'\n</code></pre>\n\n<p>This uses ThreeTenBP via ThreeTenABP normally, but in unit test configuration it adds TreeTenBP directly as a dependency, with its init code. Cannot remember exactly why I put in the <code>exclude</code> rule; it's been like that for a few years already.</p>\n"}], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1297, "favorite_count": 1, "accepted_answer_id": 55343062, "answer_count": 1, "score": 6, "last_activity_date": 1553534205, "creation_date": 1553525553, "question_id": 55340569, "link": "https://stackoverflow.com/questions/55340569/androidthreeten-not-working-in-unit-test-without-robolectric", "title": "AndroidThreeTen not working in unit test without robolectric?", "body": "<p>I'm having trouble creating a unit test without needing robolectric.  I am using AndroidThreeTen.init(this) in my code and when I run my test if I disable robolectric I get an error:\n<code>org.threeten.bp.zone.ZoneRulesException: No time-zone data files registered</code></p>\n\n<p>and if I leave it enabled I get this:\n<code>[Robolectric] com.mycomp.,yapp.utilities.log.LogTest.on Calling function w it returns an Int: sdk=28; resources=BINARY</code></p>\n\n<p>I have tried using testImplementation \u2018com.jakewharton.threetenabp:threetenabp:1.1.0\u2019\nmade no difference.  I have AndroidThreeTen.init(this) called in my application and testApplication. any ideas?\nthis is my test</p>\n\n<pre><code>@Test\n    fun `on Calling function i it returns an Int`() {\n        assertThat(\"Returned class is not an Int\", Log.i(\"Test\", \"Test\"), isA(Int::class.java))\n        assertThat(\"Returned Int is not 0\", Log.i(\"Test\", \"Test\"), `is`(0))\n    }\n</code></pre>\n\n<p>Or do I have to use robolectric because of this?\n(Side note: Log is not the util.log from android but my own class) (edited)</p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-livedata", "android-viewmodel"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1553624875, "post_id": 55340449, "comment_id": 97451795, "body": "You shouldn&#39;t start observing something inside a click listener."}], "answers": [{"tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": true, "score": 1, "last_activity_date": 1553624440, "creation_date": 1553624440, "answer_id": 55363885, "question_id": 55340449, "link": "https://stackoverflow.com/questions/55340449/livedata-is-observed-multiple-times-inside-onclicklistener-in-android/55363885#55363885", "title": "LiveData is observed multiple times inside onClickListener in Android", "body": "<p>Issue is that every time your <strong>ClickListener</strong> gets fired, you observe <code>LiveData</code> again and again. So, you can solve that problem by following solution :</p>\n\n<ol>\n<li><p>Take a <code>MutableLiveData</code> object inside your <code>ViewModel</code> privately &amp; Observe it as <code>LiveData</code>.</p>\n\n<pre><code>class ServerTimeViewModel @Inject constructor(private val serverTimeRepo: ServerTimeRepo):ViewModel() {\n\n    private val serverTimeData = MutableLiveData&lt;TimeResponse&gt;() // We make private variable so that UI/View can't modify directly\n\n    fun getServerTime() {\n        serverTimeData.value = serverTimeRepo.getServerTime().value // Rather than returning LiveData, we set value to our local MutableLiveData\n    }\n\n    fun observeServerTime(): LiveData&lt;TimeResponse&gt; {\n        return serverTimeData //Here we expose our MutableLiveData as LiveData to avoid modification from UI/View\n    }\n}\n</code></pre></li>\n<li><p>Now, we observe this <code>LiveData</code> directly outside of <code>ClickListener</code> and we just call API method from button click like below :</p>\n\n<pre><code>//Assuming that this code is inside onCreate() of your Activity/Fragment\n//first we observe our LiveData\nserverTimeViewModel.observeServerTime().observe(this@HomeScreenActivity, Observer {\n        //In such case, we won't observe multiple LiveData but one\n})\n//Then during our ClickListener, we just do API method call without any callback.\ntvPWStart.setOnClickListener {\n    serverTimeViewModel.getServerTime()\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 0, "accepted_answer_id": 55363885, "answer_count": 1, "score": 3, "last_activity_date": 1553624440, "creation_date": 1553525209, "question_id": 55340449, "link": "https://stackoverflow.com/questions/55340449/livedata-is-observed-multiple-times-inside-onclicklistener-in-android", "title": "LiveData is observed multiple times inside onClickListener in Android", "body": "<p>I have a repository setup like this</p>\n\n<pre><code>class ServerTimeRepo @Inject constructor(private val retrofit: Retrofit){\n    var liveDataTime = MutableLiveData&lt;TimeResponse&gt;()\n    fun getServerTime(): LiveData&lt;TimeResponse&gt; {\n        val serverTimeService:ServerTimeService = retrofit.create(ServerTimeService::class.java)\n        val obs = serverTimeService.getServerTime()\n        obs.subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).unsubscribeOn(Schedulers.io())\n                .subscribe(object : Observer&lt;Response&lt;TimeResponse&gt;&gt; {\n                    override fun onComplete() {\n\n                    }\n\n                    override fun onSubscribe(d: Disposable) {\n\n                    }\n\n                    override fun onNext(t: Response&lt;TimeResponse&gt;) {\n                        val gson = Gson()\n                        val json: String?\n                        val code = t.code()\n                        val cs = code.toString()\n                        if (!cs.equals(\"200\")) {\n                            json = t.errorBody()!!.string()\n                            val userError = gson.fromJson(json, Error::class.java)\n                        } else {\n\n                            liveDataTime.value = t.body()\n                        }\n\n                    }\n\n                    override fun onError(e: Throwable) {\n\n                    }\n\n                })\n        return liveDataTime\n    }\n}\n</code></pre>\n\n<p>Then I have a viewmodel calling this repo like this</p>\n\n<pre><code>class ServerTimeViewModel @Inject constructor(private val serverTimeRepo: ServerTimeRepo):ViewModel() {\n\n    fun getServerTime(): LiveData&lt;TimeResponse&gt; {\n        return serverTimeRepo.getServerTime()\n    }\n}\n</code></pre>\n\n<p>Then I have an activity where I have an onClickListener where I am observing the livedata, like this</p>\n\n<pre><code>tvPWStart.setOnClickListener {\n         val stlv=  serverTimeViewModel.getServerTime()\n\n            stlv.observe(this@HomeScreenActivity, Observer {\n                //this is getting called multiple times??\n\n            })\n        }\n</code></pre>\n\n<p>I don't know what's wrong in this. Can anyone point me in the right direction? Thanks.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "dependency-injection", "koin"], "answers": [{"tags": [], "owner": {"reputation": 2879, "user_id": 1856562, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73aac0cf3773eb9f6627265c407e0ecc?s=128&d=identicon&r=PG", "display_name": "FarshidABZ", "link": "https://stackoverflow.com/users/1856562/farshidabz"}, "is_accepted": false, "score": 4, "last_activity_date": 1553530111, "creation_date": 1553530111, "answer_id": 55341987, "question_id": 55338558, "link": "https://stackoverflow.com/questions/55338558/how-to-inject-a-repo-into-firebasemessagingservice-class/55341987#55341987", "title": "How to inject a repo into FirebaseMessagingService class", "body": "<p>I found my answer:</p>\n\n<pre><code>class FCMService: FirebaseMessagingService(), KoinComponent {\n  private val userRepository: UserRepository by inject()\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2879, "user_id": 1856562, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73aac0cf3773eb9f6627265c407e0ecc?s=128&d=identicon&r=PG", "display_name": "FarshidABZ", "link": "https://stackoverflow.com/users/1856562/farshidabz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1553530111, "creation_date": 1553519409, "question_id": 55338558, "link": "https://stackoverflow.com/questions/55338558/how-to-inject-a-repo-into-firebasemessagingservice-class", "title": "How to inject a repo into FirebaseMessagingService class", "body": "<p>I want to send client FCM token to my server when the token is ready, so I need my user repository in MyFirebaseMessagingService.</p>\n\n<p>The problem is FirebaseMessagingService needs default empty constructor.\nSo How can inject my userRepo in the MyFirebaseMessagingService class?\nI'm using Koin as dependency injection</p>\n"}, {"tags": ["kotlin", "jackson", "javalin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1553518633, "post_id": 55338023, "comment_id": 97401781, "body": "This is a terrible idea. Use a standard ISO format, and format the date the way you want to in the presentation layer."}, {"owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553520013, "post_id": 55338023, "comment_id": 97402607, "body": "I try to mark my fields with &quot;@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)&quot; but not work, what I need to do?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 4, "creation_date": 1553520190, "post_id": 55338023, "comment_id": 97402733, "body": "Again, don&#39;t do anything like that. Keep using the standard, ISO format. Format dates in the presentation layer, not in the JSON."}, {"owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553520760, "post_id": 55338023, "comment_id": 97403119, "body": "Ok, I will create a DTO with String field to set my LocalDateTime formated, thank you :), because the project is a test and I need to format output date to send"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1553520924, "post_id": 55338023, "comment_id": 97403214, "body": "So, you&#39;ll do exactly what I advised not to do. And in an even worse way: now not only your JSON will be awful, but you will also corrupt your model."}, {"owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553521133, "post_id": 55338023, "comment_id": 97403340, "body": "I understand you about advice, but the project is a test to job and I need to format date to return, because this I&#39;m asking, to try do the less worst way"}, {"owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553521561, "post_id": 55338023, "comment_id": 97403618, "body": "I not setted this in my model, I did a DTO to return in my endpoint, is that a bad idea anyway?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553521670, "post_id": 55338023, "comment_id": 97403686, "body": "Creating a DTO is not a bad idea. Using a field of type String when it should be of type LocalDateTime, and formatting in a non-standard, ambiguous format is."}, {"owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1553521937, "post_id": 55338023, "comment_id": 97403840, "body": "What could I do in this DTO to solve my formatting problem?"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 5324912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbdfd9db746945135c9abdd23759ebc6?s=128&d=identicon&r=PG&f=1", "display_name": "Boris EKUE-HETTAH", "link": "https://stackoverflow.com/users/5324912/boris-ekue-hettah"}, "is_accepted": false, "score": 1, "last_activity_date": 1553521567, "creation_date": 1553521567, "answer_id": 55339257, "question_id": 55338023, "link": "https://stackoverflow.com/questions/55338023/format-localdatetime-response-json/55339257#55339257", "title": "Format LocalDateTime Response json", "body": "<p>You can format your LocalDateTime like this: </p>\n\n<pre><code>LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"dd-MM-yyyy hh:mm:ss\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "is_accepted": true, "score": 2, "last_activity_date": 1558458825, "last_edit_date": 1558458825, "creation_date": 1553533827, "answer_id": 55343118, "question_id": 55338023, "link": "https://stackoverflow.com/questions/55338023/format-localdatetime-response-json/55343118#55343118", "title": "Format LocalDateTime Response json", "body": "<p>In Javalin, Jackson is configurable via <code>JavalinJackson#configure ()</code>.</p>\n\n<p>In my specific case, I would do</p>\n\n<pre><code>JavalinJackson.configure(jacksonObjectMapper().findAndRegisterModules())\n</code></pre>\n\n<p>and then add the appropriate dependency:</p>\n\n<pre><code>compile \"com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.8\"\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 9435479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1651384454951286/picture?type=large", "display_name": "Jose Luiz Junior", "link": "https://stackoverflow.com/users/9435479/jose-luiz-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 55343118, "answer_count": 2, "score": 0, "last_activity_date": 1558458825, "creation_date": 1553517605, "last_edit_date": 1553536878, "question_id": 55338023, "link": "https://stackoverflow.com/questions/55338023/format-localdatetime-response-json", "title": "Format LocalDateTime Response json", "body": "<p>I would like to format my LocalDateTime on Javalin.</p>\n\n<p>I know the library uses Jackson to generate JSON and I also know how to configure it but where can I set the Jackson configuration? </p>\n\n<p>I would like to format my dates in this format, \"dd-MM-yyyy hh:mm:ss\".</p>\n\n<p>Thank you</p>\n"}, {"tags": ["function", "methods", "kotlin"], "comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1553518089, "post_id": 55337961, "comment_id": 97401423, "body": "the return type of <code>main</code> is <code>Unit</code>. <code>println</code>&#39;s return type is also <code>Unit</code>. that&#39;s why it works"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11254715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e976d23527600c0d6b580b936877d9?s=128&d=identicon&r=PG&f=1", "display_name": "Yaso K. Bilya", "link": "https://stackoverflow.com/users/11254715/yaso-k-bilya"}, "edited": false, "score": 0, "creation_date": 1553519638, "post_id": 55338136, "comment_id": 97402352, "body": "How could you not understand anything and yet you answered me! anyway It is clear now, and excuse my limited English."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 3, "user_id": 11254715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e976d23527600c0d6b580b936877d9?s=128&d=identicon&r=PG&f=1", "display_name": "Yaso K. Bilya", "link": "https://stackoverflow.com/users/11254715/yaso-k-bilya"}, "edited": false, "score": 0, "creation_date": 1553519687, "post_id": 55338136, "comment_id": 97402386, "body": "I did understand something. But not <i>every</i> thing."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 4, "last_activity_date": 1553517925, "creation_date": 1553517925, "answer_id": 55338136, "question_id": 55337961, "link": "https://stackoverflow.com/questions/55337961/why-the-main-routine-in-kotlin-is-accepted-as-a-single-expression/55338136#55338136", "title": "Why the main routine in Kotlin is accepted as a single-expression?", "body": "<p>I'm not understanding everything you ask. <code>=</code> here is not an assignment operator. It's just a shorter way of writing the method: </p>\n\n<pre><code> fun main() = print(\"Do I return something?\")\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>fun main(): Unit {\n    return print(\"Do I return something?\")\n}\n</code></pre>\n\n<p>And since <code>print()</code>'s return type is <code>Unit</code>, it's equivalent to</p>\n\n<pre><code>fun main() {\n    print(\"Do I return something?\")\n}\n</code></pre>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"nofollow noreferrer\">the documentation</a> for details.</p>\n\n<p>In the following snippet, however, <code>=</code> <strong>is</strong> the assignment operator:</p>\n\n<pre><code>fun main() {\n    val x = println()\n    print(x)\n}\n</code></pre>\n\n<p>So this code calls <code>println()</code>, and assigns what it returns (<code>Unit</code>) to the variable <code>x</code>. Printing <code>x</code> thus produces the output <code>kotlin.Unit</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 11254715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e976d23527600c0d6b580b936877d9?s=128&d=identicon&r=PG&f=1", "display_name": "Yaso K. Bilya", "link": "https://stackoverflow.com/users/11254715/yaso-k-bilya"}, "edited": false, "score": 2, "creation_date": 1553519536, "post_id": 55338175, "comment_id": 97402292, "body": "Got it from the last sentence"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1553518053, "creation_date": 1553518053, "answer_id": 55338175, "question_id": 55337961, "link": "https://stackoverflow.com/questions/55337961/why-the-main-routine-in-kotlin-is-accepted-as-a-single-expression/55338175#55338175", "title": "Why the main routine in Kotlin is accepted as a single-expression?", "body": "<p>I hope that helps:</p>\n\n<ul>\n<li>The entry point to a Kotlin program is <code>fun main(): Unit</code> or <code>fun main(args: Array&lt;String&gt;): Unit</code>, which are functions that return <code>Unit</code></li>\n<li><code>Unit</code> is something that is returned by default from Kotlin functions when there is nothing interesting to return</li>\n<li><code>println()</code> returns <code>Unit</code></li>\n<li>A <code>Unit</code> return type is often omitted in the code, but it is implied</li>\n<li><code>fun foo(): T = boo()</code> is a short syntax for <code>fun foo(): T { return boo() }</code></li>\n<li>Since <code>fun main(): Unit</code> and <code>fun println(...): Unit</code> have the same return type <code>Unit</code>, it is valid to write <code>fun main() = println()</code> </li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 11254715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e976d23527600c0d6b580b936877d9?s=128&d=identicon&r=PG&f=1", "display_name": "Yaso K. Bilya", "link": "https://stackoverflow.com/users/11254715/yaso-k-bilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 55338136, "answer_count": 2, "score": 0, "last_activity_date": 1553518053, "creation_date": 1553517445, "question_id": 55337961, "link": "https://stackoverflow.com/questions/55337961/why-the-main-routine-in-kotlin-is-accepted-as-a-single-expression", "title": "Why the main routine in Kotlin is accepted as a single-expression?", "body": "<p>The entry point of the c-like languages is almost identical, so Kotlin's <code>fun main() {}</code></p>\n\n<p>This is quite understandable for me, however; when using this routine as a single-expression function and (assign?) it any output method it will be compiled and print the parameter's value of the print method not its return type (which is <code>Unit</code>).  I guess this snippet will make it clear..</p>\n\n<pre><code>fun main() = print(\"Do I return something?\")\n</code></pre>\n\n<p>This will be compiled as a basic hello world program!</p>\n\n<ul>\n<li>Why is this acceptably compiled? does the main method returns something else than the 0?</li>\n<li>Is the equal operator acts as assignment operator? and if so; what does the <code>print()</code> method returns? is it something other than <code>Unit</code>?</li>\n<li>If so, why it returns <code>Unit</code> when assign it to a variable?</li>\n</ul>\n\n<pre><code>fun main() {\n    val x= println()\n    print(x)\n}\n</code></pre>\n\n<p>Then also, why it doesn't return <code>Unit</code> in this case:</p>\n\n<pre><code>fun main() = foo()\nfun foo(): Unit {}\n</code></pre>\n"}, {"tags": ["kotlin", "ktor"], "comments": [{"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553581014, "post_id": 55337508, "comment_id": 97425666, "body": "What response are you getting in the image case?"}, {"owner": {"reputation": 61, "user_id": 11254711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NDYSj7-EEbk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4Oo5ZTQ0Omvh3p-by1H3X_MPIRQ/mo/photo.jpg?sz=128", "display_name": "S&#233;rgio Eduardo", "link": "https://stackoverflow.com/users/11254711/s%c3%a9rgio-eduardo"}, "reply_to_user": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553590803, "post_id": 55337508, "comment_id": 97430198, "body": "Alexander Egger - The response I&#39;m getting from the server has the status 401 which is the expected when no File is inserted. However, when I tested it on Postman it also returned an response json that I&#39;m not able to read when using call.response.readText(). If I use the client.post&lt;HttpResponse&gt;(url) method with no parameters I can access that response json.. I don&#39;t know what&#39;s going on."}, {"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553594530, "post_id": 55337508, "comment_id": 97432405, "body": "Maybe you have to set the &quot;Accept&quot; header to &quot;application/json&quot;"}, {"owner": {"reputation": 61, "user_id": 11254711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NDYSj7-EEbk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4Oo5ZTQ0Omvh3p-by1H3X_MPIRQ/mo/photo.jpg?sz=128", "display_name": "S&#233;rgio Eduardo", "link": "https://stackoverflow.com/users/11254711/s%c3%a9rgio-eduardo"}, "reply_to_user": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553597659, "post_id": 55337508, "comment_id": 97434445, "body": "That&#39;s not it unfortunately. Thank you for your help though"}, {"owner": {"reputation": 350, "user_id": 2458904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f23eb86ea85bca87c3f081025becba6?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/2458904/leonid"}, "edited": false, "score": 0, "creation_date": 1593163972, "post_id": 55337508, "comment_id": 110689769, "body": "Could you install the <code>Logging</code> feature and provide some log? Maybe it&#39;s because the type of part with the file should be <code>FileItem</code> instead of just <code>BinaryItem</code>"}, {"owner": {"reputation": 2277, "user_id": 3528461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vlHLT.png?s=128&g=1", "display_name": "Reprator", "link": "https://stackoverflow.com/users/3528461/reprator"}, "edited": false, "score": 0, "creation_date": 1594230807, "post_id": 55337508, "comment_id": 111056672, "body": "@S&#233;rgioEduardo, were u able to sort the issue, if yes please share a sample request of multpart with ktor"}], "owner": {"reputation": 61, "user_id": 11254711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NDYSj7-EEbk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4Oo5ZTQ0Omvh3p-by1H3X_MPIRQ/mo/photo.jpg?sz=128", "display_name": "S&#233;rgio Eduardo", "link": "https://stackoverflow.com/users/11254711/s%c3%a9rgio-eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1725, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1553515843, "creation_date": 1553515843, "question_id": 55337508, "link": "https://stackoverflow.com/questions/55337508/post-request-with-an-image-using-ktor-client", "title": "Post request with an image using Ktor client", "body": "<p>I'm having trouble sending an http request which has a File as one of the parameters in the body. The response returned by the API is not what I'm expecting so I figure something is wrong with the code.</p>\n\n<pre><code>suspend fun post(url: String, bodyParameters: MutableMap&lt;String, Any&gt;, headerParameters:\n    MutableMap&lt;String, String&gt;? = null): HttpResponse?{\n\n        val client = HttpClient()\n\n        try {\n            val call = client.call(url) {\n                method = HttpMethod.Post\n                body = MultiPartFormDataContent(\n                    formData {\n                        bodyParameters.forEach{(key, value) -&gt;\n                            when(value) {\n                                is String -&gt; {\n                                    append(key, value)\n                                }\n\n                                is File -&gt; {\n                                    append(key, value.inputStream().asInput())\n                                }\n                            }\n                        }\n                    }\n                )\n            }\n            if(call.response.status.value == 500) {\n                return null\n            }\n            return call.response\n\n</code></pre>\n\n<p>The response status that is being returned is what is expected when no File is being sent. Any ideas on why this doesn't work?\nAre there any other ways to do this with Ktor?</p>\n"}, {"tags": ["kotlin", "jooq", "hikaricp"], "answers": [{"tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 1, "last_activity_date": 1553513727, "creation_date": 1553513727, "answer_id": 55336904, "question_id": 55336104, "link": "https://stackoverflow.com/questions/55336104/jooq-fetchresultset-not-closing-connection-with-kotlin/55336904#55336904", "title": "jOOQ fetchResultSet not closing connection with Kotlin", "body": "<p>The code that produces a resource is always responsible for closing it. And that's you. And the resource is the <code>ResultSet</code>. Your code should look like this instead:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;Country&gt; {\n        val ctx = DSL.using(datasource, SQLDialect.POSTGRES_10)\n\n        return\n        ctx.select(...)\n           .from(...)\n           .orderBy(...)\n           .fetchResultSet()\n           .use {\n                return Country.mapper.stream(it).toList()\n            }\n    }\n}\n</code></pre>\n\n<h3>About calling <code>DSLContext.use</code></h3>\n\n<p>Notice, just like <a href=\"https://stackoverflow.com/a/55334957/521799\">in your other question</a>, I recommend you do not call <code>use</code> on jOOQ's <code>DSLContext</code> type, as you don't need it. In your case, <code>DSLContext</code> is not resourceful as you pass it a <code>datasource</code></p>\n\n<h3>About calling <code>ResultSet.use</code></h3>\n\n<p>Instead, you should call <code>use</code> on <code>ResultSet</code>, which guarantees that it is closed after consumption. In this example, I'm assuming that your call to <code>toList()</code> will eagerly consume the entire stream that wraps the result set.</p>\n\n<p>The important thing to remember here is that <em>you</em> produce the resource by calling jOOQ's <code>ResultQuery.fetchResultSet()</code>, and even if you pass it to another library, that other library is not required to close it. But <em>you</em> are.</p>\n"}], "owner": {"reputation": 2958, "user_id": 1295364, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b6f9126d40e644f96bb49f62c3753c6?s=128&d=identicon&r=PG", "display_name": "carcaret", "link": "https://stackoverflow.com/users/1295364/carcaret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 55336904, "answer_count": 1, "score": 0, "last_activity_date": 1553513727, "creation_date": 1553510975, "question_id": 55336104, "link": "https://stackoverflow.com/questions/55336104/jooq-fetchresultset-not-closing-connection-with-kotlin", "title": "jOOQ fetchResultSet not closing connection with Kotlin", "body": "<p>I'm using Kotlin with HikariCP and jOOQ to query my database. I've come to realize that this code works as expected, fetching the rows and closing the connection afterwards:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;Country&gt; {\n        DSL.using(datasource, SQLDialect.POSTGRES_10)\n            .use { ctx -&gt;\n                return ctx.select(...)\n                    .from(...)\n                    .orderBy(...)\n                    .fetch(Country.mapper) // val mapper: (CountriesRecord) -&gt; Country = {...}\n            }\n    }\n}\n</code></pre>\n\n<p>This mapper was no longer suitable after adding a many-to-many relationship to <code>Country</code>, so I wanted to get a <code>ResultSet</code> and with SimpleFlatMapper produce objects with this relationship (as explained on <a href=\"https://arnaudroger.github.io/blog/2017/02/27/jooq-one-to-many.html\" rel=\"nofollow noreferrer\">this link</a>), but with <code>fetchResultSet()</code> the connection is never closed and the pool dries out:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;Country&gt; {\n        DSL.using(datasource, SQLDialect.POSTGRES_10)\n            .use { ctx -&gt;\n                val rs = ctx.select(...)\n                    .from(...)\n                    .orderBy(...)\n                    .fetchResultSet()\n                return Country.mapper.stream(rs).toList() // val mapper = JdbcMapperFactory.newInstance()...\n            }\n    }\n}\n</code></pre>\n\n<p>I've seen that <code>AbstractResultQuery#fetchResultSet()</code> is delegating to a <code>fetchLazy()</code> method, so not sure if it has something to do with that.</p>\n\n<p>If I get the connection myself instead of delegating it to the <code>DSLContext</code>, then it works:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;Country&gt; {\n        val conn = datasource.connection\n        conn.use {\n            val rs = DSL.using(it, SQLDialect.POSTGRES_10)\n                .select(...)\n                .from(...)\n                .orderBy(...)\n                .fetchResultSet()\n            return Country.mapper.stream(rs).toList() // val mapper = JdbcMapperFactory.newInstance()...\n        }\n    }\n}\n</code></pre>\n\n<p>Is this last approach the one I should be using?</p>\n"}, {"tags": ["java", "gradle", "kotlin", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 1684, "user_id": 6856361, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-reTr7DecElc/AAAAAAAAAAI/AAAAAAAAAoc/tgkHGpJKIq0/photo.jpg?sz=128", "display_name": "Izbassar Tolegen", "link": "https://stackoverflow.com/users/6856361/izbassar-tolegen"}, "is_accepted": true, "score": 19, "last_activity_date": 1553515831, "last_edit_date": 1553515831, "creation_date": 1553514730, "answer_id": 55337202, "question_id": 55335866, "link": "https://stackoverflow.com/questions/55335866/include-scripts-with-gradle-kotlin-dsl/55337202#55337202", "title": "Include scripts with Gradle Kotlin DSL", "body": "<p>There are limitations in Kotlin DSL currently (5.3) that prevents to have compile-time checks everywhere. In order for Kotlin DSL to work it has to add extensions on top of the Gradle API and it can't do it magically. First of all you need to go through <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"noreferrer\">Kotlin DSL Primer</a> page to understand it.</p>\n\n<blockquote>\n  <p>How can I extract plugin applying to the include scripts (to avoid Gradle module scripts overload)?</p>\n</blockquote>\n\n<p>The one way to do it is to use <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html#kotdsl:precompiled_plugins\" rel=\"noreferrer\">precompiled build scripts</a> with Kotlin DSL Plugin. In order to do it you need to move your script into <code>$rootDir/buildSrc</code> project. Here how it might look like:</p>\n\n<pre><code>// $rootDir/buildSrc/build.gradle.kts\nplugins {\n  `kotlin-dsl`\n}\nrepositories {\n   maven {\n     url = uri(\"http://host:8082/artifactory/...\")\n  }\n}\n</code></pre>\n\n<p>Then put your common script like that:</p>\n\n<pre><code>// $rootDir/buildSrc/src/main/kotlin/common.gradle.kts\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nplugins {\n  kotlin(\"jvm\") version \"1.3.21\"\n}\ntasks.compileKotlin {\n  kotlinOptions.jvmTarget = \"1.8\"\n}\ntasks.compileTestKotlin {\n  kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>Then you can apply this script as to a plugin like that:</p>\n\n<pre><code>// $rootDir/build.gradle.kts\nsubprojects {\n  apply(id = \"common\")\n}\n</code></pre>\n\n<blockquote>\n  <p>How can I use precompiled script plugins without public global repositories access?</p>\n</blockquote>\n\n<p>Configuring custom repositories for pre-compiled scripts plugin is no different that your usual build script. Do it like that:</p>\n\n<pre><code>// $rootDir/buildSrc/settings.gradle.kts\npluginManagement {\n  repositories.maven {\n    url = uri(\"http://host:8082/artifactory/...\")\n  }\n}\n</code></pre>\n\n<p>The other way around that if you don't want to use precompiled plugins is to configure extensions explicitly. You can do it like that:</p>\n\n<pre><code>// $rootDir/gradle/common.gradle.kts\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\ntasks.withType&lt;KotlinCompile&gt; {\n  kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>And in main script:</p>\n\n<pre><code>// $rootDir/build.gradle.kts\nsubprojects {\n  apply {\n    plugin(KotlinPlatformJvmPlugin::class)\n    from(\"common.gradle.kts\")\n  }\n}\n</code></pre>\n\n<blockquote>\n  <p>How can I put all common constants (such as dependency versions) to the separate file to include them just by using something like springBootVersion or Constants.springBootVersion with compile-time checks?</p>\n</blockquote>\n\n<p>There is no good way to do it currently. You can use extra properties, but it won't guarantee compile time checks. Something like that:</p>\n\n<pre><code>// $rootDir/dependencies.gradle.kts\n\n// this will try to take configuration from existing ones\nval compile by configurations\nval api by configurations\ndependencies {\n  compile(\"commons-io:commons-io:1.2.3\")\n  api(\"some.dep\")\n}\n\n// This will put your version into extra extension\nextra[\"springBootVersion\"] = \"1.2.3\"\n</code></pre>\n\n<p>And you can use it like this:</p>\n\n<pre><code>// $rootDir/build.gradle.kts\nsubprojects {\n  apply {\n    plugin&lt;JavaLibraryPlugin&gt;()\n    from(\"$rootDir/dependencies.gradle.kts\")\n  }\n</code></pre>\n\n<p>And in your module:</p>\n\n<pre><code>// $rootDir/module/build.gradle.kts\n// This will take existing dependency from extra\nval springBootVersion: String by extra\ndependencies {\n  compile(\"org.spring:boot:$springBootVersion\")\n}\n</code></pre>\n"}], "owner": {"reputation": 2689, "user_id": 185498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77120c6ac145bba587b662a014dbdd4?s=128&d=identicon&r=PG", "display_name": "Manushin Igor", "link": "https://stackoverflow.com/users/185498/manushin-igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4983, "favorite_count": 7, "accepted_answer_id": 55337202, "answer_count": 1, "score": 11, "last_activity_date": 1553515831, "creation_date": 1553510144, "question_id": 55335866, "link": "https://stackoverflow.com/questions/55335866/include-scripts-with-gradle-kotlin-dsl", "title": "Include scripts with Gradle Kotlin DSL", "body": "<p>I'm trying to start using Kotlin DSL with gradle in the project with the following restrictions:</p>\n\n<ul>\n<li>Project has different modules (moreover: sometimes these modules use different plugins, however if two projects uses the same plugin then version of the plugins are the same).</li>\n<li>Project has internal corporate repositories only (e.g. we don't use jcenter directly, we use proxy for it).</li>\n</ul>\n\n<p>What we have with Groovy:</p>\n\n<ul>\n<li>Some common configurations items are excluded to the separate scripts. Please check the example below.</li>\n<li>Gradle modules include these files.</li>\n</ul>\n\n<p>As a result (just based on my example):</p>\n\n<ul>\n<li>We don't need to add the same code lines into the each module.</li>\n<li>The most of projects have difference just with dependency list.</li>\n</ul>\n\n<p>I tried to reproduce the same with Gralde KTS and received the following difficulties:</p>\n\n<ul>\n<li>I'm unable to apply plugin in the include file and use it in the module. In this case I receive compilation error (because plugin types are not added into the module script).</li>\n<li>I'm unable to extract constants to the something common to use them in the each scripts (root <code>build.gradle.kts</code> inclusive). With Groovy I can just use variable like <code>springBootVersion</code>, however with Kotlin Script I have to create the same property in the each module file.</li>\n<li><a href=\"https://docs.gradle.org/5.3/userguide/kotlin_dsl.html#kotdsl:precompiled_plugins\" rel=\"noreferrer\">Precompiled script plugins</a> does not work without public repositories access (e.g. I'm unable to configure common script file with idea \"just use default embedded Kotlin Script version, download all dependencies from these urls: ...\".</li>\n</ul>\n\n<p>Include file sample:</p>\n\n<pre><code>apply plugin: 'kotlin'\n\ncompileKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n\ncompileTestKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>Gradle module sample:</p>\n\n<pre><code>apply from: \"${rootDir}/gradle/include/kotlin-common-include.gradle\"\n\ndependencies {\n    compile project(':my.project.libraries.common') \n\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: springBootVersion\n}\n</code></pre>\n\n<p><strong>Questions:</strong></p>\n\n<ul>\n<li>How can I put all common constants (such as dependency versions) to the separate file to include them just by using something like <code>springBootVersion</code> or <code>Constants.springBootVersion</code> with compile-time checks?</li>\n<li>How can I extract plugin applying to the include scripts (to avoid Gradle module scripts overload)?</li>\n<li>How can I use <a href=\"https://docs.gradle.org/5.3/userguide/kotlin_dsl.html#kotdsl:precompiled_plugins\" rel=\"noreferrer\">precompiled script plugins</a> without public global repositories access?</li>\n</ul>\n\n<p>Additional links:</p>\n\n<ul>\n<li><a href=\"https://github.com/gradle/kotlin-dsl/issues/1359\" rel=\"noreferrer\">Issue for Gradle KTS for plugin applying</a>.</li>\n<li><a href=\"https://github.com/gradle/kotlin-dsl/issues/1358\" rel=\"noreferrer\">Issue for Gradle KTS for shared constants extracting</a>.</li>\n</ul>\n"}, {"tags": ["java", "android", "xml", "kotlin", "android-textinputedittext"], "comments": [{"owner": {"reputation": 629, "user_id": 7406696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8e99f62483082d6e035c172ac28b094?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo R.", "link": "https://stackoverflow.com/users/7406696/pablo-r"}, "edited": false, "score": 0, "creation_date": 1553511766, "post_id": 55335154, "comment_id": 97397721, "body": "Maybe you can use this lib <a href=\"https://github.com/ViksaaSkool/AutoFitEditText\" rel=\"nofollow noreferrer\">github.com/ViksaaSkool/AutoFitEditText</a>"}, {"owner": {"reputation": 56, "user_id": 5639120, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134656039897579/picture?type=large", "display_name": "Martin Malmgren", "link": "https://stackoverflow.com/users/5639120/martin-malmgren"}, "reply_to_user": {"reputation": 629, "user_id": 7406696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8e99f62483082d6e035c172ac28b094?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo R.", "link": "https://stackoverflow.com/users/7406696/pablo-r"}, "edited": false, "score": 0, "creation_date": 1553589868, "post_id": 55335154, "comment_id": 97429748, "body": "Doesnt sync in gradle..."}, {"owner": {"reputation": 629, "user_id": 7406696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8e99f62483082d6e035c172ac28b094?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo R.", "link": "https://stackoverflow.com/users/7406696/pablo-r"}, "edited": false, "score": 0, "creation_date": 1553593867, "post_id": 55335154, "comment_id": 97431954, "body": "you can add it as a class in your own project <a href=\"https://justpaste.it/edit/27476931/180736336873f230\" rel=\"nofollow noreferrer\">justpaste.it/edit/27476931/180736336873f230</a> and then call it with your package structure in the xml. <a href=\"https://imgur.com/L9wuUNt\" rel=\"nofollow noreferrer\">imgur.com/L9wuUNt</a>"}, {"owner": {"reputation": 56, "user_id": 5639120, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134656039897579/picture?type=large", "display_name": "Martin Malmgren", "link": "https://stackoverflow.com/users/5639120/martin-malmgren"}, "reply_to_user": {"reputation": 629, "user_id": 7406696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8e99f62483082d6e035c172ac28b094?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo R.", "link": "https://stackoverflow.com/users/7406696/pablo-r"}, "edited": false, "score": 1, "creation_date": 1553606842, "post_id": 55335154, "comment_id": 97440381, "body": "I updated the question with a fix that works :) Thx for you help anyway :) @PabloR."}], "owner": {"reputation": 56, "user_id": 5639120, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134656039897579/picture?type=large", "display_name": "Martin Malmgren", "link": "https://stackoverflow.com/users/5639120/martin-malmgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553606794, "creation_date": 1553507710, "last_edit_date": 1553606794, "question_id": 55335154, "link": "https://stackoverflow.com/questions/55335154/change-height-for-textedit-depending-on-amount-of-text", "title": "Change height for textedit depending on amount of text", "body": "<p><strong>So im trying to build chat and the textEdit where you write your message. I want to change height depending on amount of text.</strong></p>\n\n<p>a good thing to know also are that this is in a fragment.</p>\n\n<p>Like in messenger or normal messaging apps.</p>\n\n<p>Kotlin:</p>\n\n<pre><code>fun initTextWatcher(){\n        var tw: TextWatcher = object : TextWatcher {\n            override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n                val textview = viewOfLayout.chat_input_text\n                if (activity != null) {\n                    activity?.runOnUiThread {\n                        textview.height = 100\n                    }\n                }\n            }\n            override fun afterTextChanged(s: Editable) {}\n            override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}\n        }\n\n        viewOfLayout.chat_input_text.addTextChangedListener(tw)\n    }\n</code></pre>\n\n<p>XML:</p>\n\n<pre><code> &lt;android.support.constraint.ConstraintLayout\n            android:layout_width=\"0dp\" android:layout_height=\"wrap_content\"\n            android:background=\"@color/White\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:id=\"@+id/chat_input_text_Send_container\"&gt;\n\n        &lt;Button\n                android:text=\"@string/Send\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"35dp\"\n                android:id=\"@+id/chat_send_button\" app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"10dp\"\n                android:layout_marginBottom=\"10dp\" app:layout_constraintBottom_toBottomOf=\"parent\"\n                android:background=\"@drawable/chat_round_corners\" android:textColor=\"@color/White\"\n                android:textSize=\"15sp\"/&gt;\n        &lt;EditText\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:maxHeight=\"70dp\"\n                android:minHeight=\"35dp\"\n                android:ems=\"10\"\n                android:inputType=\"textCapSentences|textMultiLine\"\n                android:id=\"@+id/chat_input_text\" android:layout_marginTop=\"10dp\"\n                app:layout_constraintTop_toTopOf=\"parent\" android:layout_marginBottom=\"10dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\" android:layout_marginEnd=\"8dp\"\n                app:layout_constraintEnd_toStartOf=\"@+id/chat_send_button\" android:layout_marginStart=\"8dp\"\n                app:layout_constraintStart_toStartOf=\"parent\" android:textColor=\"@color/colorPrimary\"\n                android:gravity=\"top|left\" android:textSize=\"15sp\"\n                android:background=\"@drawable/chat_text_round_corners\" android:padding=\"4dp\"/&gt;\n        &lt;ProgressBar\n                style=\"?android:attr/progressBarStyle\"\n                android:layout_width=\"25dp\"\n                android:layout_height=\"25dp\"\n                android:indeterminateTint=\"@color/White\"\n                android:id=\"@+id/chat_progressbar_send\"\n                app:layout_constraintTop_toTopOf=\"@+id/chat_send_button\"\n                app:layout_constraintEnd_toEndOf=\"@+id/chat_send_button\"\n                app:layout_constraintStart_toStartOf=\"@+id/chat_send_button\"\n                app:layout_constraintBottom_toBottomOf=\"@+id/chat_send_button\" android:visibility=\"invisible\"/&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>Solved:</strong></p>\n\n<p>I fixed it by setting layout params every time the text changed to the params of the editText.</p>\n\n<pre><code>fun initTextWatcher(){\n    var tw: TextWatcher = object : TextWatcher {\n        override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n            val chat_textedit = viewOfLayout.chat_input_text\n            if (activity != null) {\n                activity?.runOnUiThread {\n                    val lparams = chat_textedit.layoutParams as ConstraintLayout.LayoutParams\n                    chat_textedit.layoutParams = lparams\n                }\n            }\n        }\n        override fun afterTextChanged(s: Editable) {}\n        override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}\n    }\n    viewOfLayout.chat_input_text.addTextChangedListener(tw)\n}\n</code></pre>\n"}, {"tags": ["android", "generics", "kotlin", "rx-java"], "answers": [{"comments": [{"owner": {"reputation": 11044, "user_id": 313042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43af957409ca71e6da4f6010c90f566c?s=128&d=identicon&r=PG", "display_name": "rajath", "link": "https://stackoverflow.com/users/313042/rajath"}, "edited": false, "score": 0, "creation_date": 1553510608, "post_id": 55335454, "comment_id": 97397025, "body": "I tried with <code>out List</code>, but it still doesn&#39;t work. The warning I get for the <code>out</code> is <code>projection is redundant the corresponding type parameter of list has the same variance</code>"}, {"owner": {"reputation": 11044, "user_id": 313042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43af957409ca71e6da4f6010c90f566c?s=128&d=identicon&r=PG", "display_name": "rajath", "link": "https://stackoverflow.com/users/313042/rajath"}, "edited": false, "score": 0, "creation_date": 1553510789, "post_id": 55335454, "comment_id": 97397128, "body": "But if I do use <code>List</code> instead of <code>MutableList</code>, and remove <code>Observable</code>, it works. Actually, <code>List</code> is all I need, since I only need to read the values. I&#39;ll update the question to reflect that. Nevertheless, <code>Observable</code> is still needed, and the problem remains."}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 11044, "user_id": 313042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43af957409ca71e6da4f6010c90f566c?s=128&d=identicon&r=PG", "display_name": "rajath", "link": "https://stackoverflow.com/users/313042/rajath"}, "edited": false, "score": 0, "creation_date": 1553511876, "post_id": 55335454, "comment_id": 97397795, "body": "Have changed my answer now to fit with the updated question."}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1553511833, "last_edit_date": 1553511833, "creation_date": 1553508831, "answer_id": 55335454, "question_id": 55334762, "link": "https://stackoverflow.com/questions/55334762/using-subclasses-with-rxjava-observable/55335454#55335454", "title": "Using subclasses with RxJava Observable", "body": "<p>You could genericise your interface as follows:</p>\n\n<pre><code>interface Test&lt;T: A1&gt; {\n    fun f(): Observable&lt;List&lt;T&gt;&gt;\n}\n</code></pre>\n\n<p>Then implement it as follows:</p>\n\n<pre><code>class TestImpl : Test&lt;A2&gt; {\n    override fun f(): Observable&lt;List&lt;A2&gt;&gt; = func()\n}\n</code></pre>\n"}], "owner": {"reputation": 11044, "user_id": 313042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43af957409ca71e6da4f6010c90f566c?s=128&d=identicon&r=PG", "display_name": "rajath", "link": "https://stackoverflow.com/users/313042/rajath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 55335454, "answer_count": 1, "score": 0, "last_activity_date": 1553511833, "creation_date": 1553506253, "last_edit_date": 1553510871, "question_id": 55334762, "link": "https://stackoverflow.com/questions/55334762/using-subclasses-with-rxjava-observable", "title": "Using subclasses with RxJava Observable", "body": "<p>I'm facing an error with the following code:</p>\n\n<pre><code>interface A1 {\n    val string: String\n}\n\ndata class A2(override var string: String = \"\") : A1\n\ninterface Test {\n    fun f(): Observable&lt;List&lt;A1&gt;&gt;\n}\n\nfun func(): Observable&lt;List&lt;A2&gt;&gt; = return ...\n\nclass TestImpl : Test{\n    override fun f(): Observable&lt;List&lt;A1&gt;&gt; = func()\n}\n</code></pre>\n\n<p>There's a type mismatch in the last line of code. How do I change this to have the correct declaration, if at all possible?</p>\n"}, {"tags": ["android", "kotlin", "mqtt", "paho"], "comments": [{"owner": {"reputation": 538, "user_id": 7271231, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lx6nb9mgeyY/AAAAAAAAAAI/AAAAAAAARIs/04G26QacnBo/photo.jpg?sz=128", "display_name": "Urvish rana", "link": "https://stackoverflow.com/users/7271231/urvish-rana"}, "edited": false, "score": 1, "creation_date": 1553505968, "post_id": 55334132, "comment_id": 97394382, "body": "try to connect with the different clientID if you&#39;re able to connect successfully then use random clientID from Paho&#39;s library"}, {"owner": {"reputation": 18185, "user_id": 165071, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/EWdkL.jpg?s=128&g=1", "display_name": "Alexander Farber", "link": "https://stackoverflow.com/users/165071/alexander-farber"}, "edited": false, "score": 0, "creation_date": 1553586098, "post_id": 55334132, "comment_id": 97427843, "body": "This ^ and I would suggest connecting in onResume and disconnecting in onPause"}, {"owner": {"reputation": 1568, "user_id": 5865556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nSrTp.png?s=128&g=1", "display_name": "sungyong", "link": "https://stackoverflow.com/users/5865556/sungyong"}, "edited": false, "score": 0, "creation_date": 1553587266, "post_id": 55334132, "comment_id": 97428413, "body": "Thanks for your answers.  Even though tried another cliendID, result is same.  And removing disconnecting code at <code>onPause</code>  also did not change result."}, {"owner": {"reputation": 418, "user_id": 3897987, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/966f15f728e082fb7a70c150a5f0e326?s=128&d=identicon&r=PG&f=1", "display_name": "phang", "link": "https://stackoverflow.com/users/3897987/phang"}, "edited": false, "score": 0, "creation_date": 1567501926, "post_id": 55334132, "comment_id": 101972207, "body": "Did you manage to resolve this ?"}], "owner": {"reputation": 1568, "user_id": 5865556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nSrTp.png?s=128&g=1", "display_name": "sungyong", "link": "https://stackoverflow.com/users/5865556/sungyong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553503966, "creation_date": 1553503966, "question_id": 55334132, "link": "https://stackoverflow.com/questions/55334132/paho-mqtt-connection-lost", "title": "Paho mqtt connection lost", "body": "<p>I'm testing with paho mqtt client library with mosquitto.org broker service.</p>\n\n<p>My connection code is at below.</p>\n\n<pre><code>buttonConnect.setOnClickListener{ view -&gt;\n    val topic = textViewTopic.text.toString()\n\n    try {\n        val msg = \"now connecting... \" + textViewUrl.text as String?\n        Log.d(TAG, msg)\n        Toast.makeText(this, msg, Toast.LENGTH_LONG).show()\n        client.setCallback(this)\n        client.connect()\n        client.subscribe(topic, 1)\n\n        buttonConnect.visibility = View.GONE\n        buttonDisconnect.visibility = View.VISIBLE\n    } catch (ex: MqttException) {\n        ex.printStackTrace()\n        Toast.makeText(this, \"$ex\", Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p>But whenever connection complete, connection is lost as below logs.</p>\n\n<blockquote>\n  <p>now connecting... tcp://test.mosquitto.org:1883 connectComplete\n  reconnect:false, URI:tcp://test.mosquitto.org:1883 connectionLost\n  connectComplete reconnect:true, URI:tcp://test.mosquitto.org:1883\n  connectionLost connectComplete reconnect:true,\n  URI:tcp://test.mosquitto.org:1883 connectionLost</p>\n</blockquote>\n\n<p>Here is my full <a href=\"https://github.com/badsaarow/EasylinkAndroid_Demo/blob/develop/app/src/main/java/io/fogcloud/demo/MqttActivity.kt\" rel=\"nofollow noreferrer\">activity code</a>.</p>\n\n<p>What do I mistake?</p>\n"}, {"tags": ["kotlin", "jooq", "hikaricp"], "comments": [{"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1553506989, "post_id": 55334107, "comment_id": 97394950, "body": "Why do you want to fetch the JDBC <code>ResultSet</code> in the first place? Your code does not hint at this being useful for you. Also, why return <code>emptyList()</code> each time?"}, {"owner": {"reputation": 2958, "user_id": 1295364, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b6f9126d40e644f96bb49f62c3753c6?s=128&d=identicon&r=PG", "display_name": "carcaret", "link": "https://stackoverflow.com/users/1295364/carcaret"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1553509351, "post_id": 55334107, "comment_id": 97396278, "body": "@LukasEder Well, yeah, maybe it&#39;s not the most explicit example, just wanted something fast to show my problem, sorry for that. I need the <code>ResultSet</code> because then I&#39;m using SimpleFlatMapper to produce a result with a many-to-many relationship as explained in this post <a href=\"https://arnaudroger.github.io/blog/2017/02/27/jooq-one-to-many.html\" rel=\"nofollow noreferrer\">arnaudroger.github.io/blog/2017/02/27/jooq-one-to-many.html</a>, something like <code>MyClass.mapper.stream(rs).toList()</code> (the mapper is in MyClass&#39; companion object). Let me update the question."}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1553509839, "post_id": 55334107, "comment_id": 97396588, "body": "Hmm, maybe, rather than updating the question (because my answer can still be useful as it is right now, to others), can you ask a new one that is more complete? Here are some guidelines: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": true, "score": 0, "last_activity_date": 1553506953, "creation_date": 1553506953, "answer_id": 55334957, "question_id": 55334107, "link": "https://stackoverflow.com/questions/55334107/jooq-fetch-vs-fetchresultset-and-close-connection-in-kotlin/55334957#55334957", "title": "jOOQ fetch vs fetchResultSet and close connection in Kotlin", "body": "<p>It works exactly as specified in the <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/ResultQuery.html#fetchResultSet--\" rel=\"nofollow noreferrer\">Javadoc</a>:</p>\n\n<blockquote>\n  <p>This is the same as calling <code>fetchLazy().resultSet()</code> and will return a <code>ResultSet</code> wrapping the JDBC driver's <code>ResultSet</code>. Closing this ResultSet may close the producing <code>Statement</code> or <code>PreparedStatement</code>, depending on your setting for <code>keepStatement(boolean)</code>.</p>\n</blockquote>\n\n<p>The point of this method is that you want to consume a JDBC result set rather than having jOOQ consume it for you. So, you're responsible for the resource management.</p>\n\n<p>Given your example code, you should definitely not call this method but call <code>fetch()</code> instead. For example:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;String&gt; {\n        return\n        DSL.using(datasource, SQLDialect.POSTGRES_10)\n           .select(countries.CO_NAME)\n           .from(countries)\n           .orderBy(countries.CO_NAME)\n           .fetch(countries.CO_NAME)\n    }\n}\n</code></pre>\n\n<p>Notice, you don't need to call that <code>use()</code> method on your <code>DSLContext</code>. While <code>DSLContext</code> extends <code>AutoCloseable</code>, this is only needed when your <code>DSLContext</code> manages the underlying JDBC connection (i.e. when it creates it). In your case, when you pass a data source to <code>DSL.using()</code>, then you don't have to close the <code>DSLContext</code>.</p>\n"}], "owner": {"reputation": 2958, "user_id": 1295364, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b6f9126d40e644f96bb49f62c3753c6?s=128&d=identicon&r=PG", "display_name": "carcaret", "link": "https://stackoverflow.com/users/1295364/carcaret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 55334957, "answer_count": 1, "score": 1, "last_activity_date": 1553509920, "creation_date": 1553503896, "last_edit_date": 1553509920, "question_id": 55334107, "link": "https://stackoverflow.com/questions/55334107/jooq-fetch-vs-fetchresultset-and-close-connection-in-kotlin", "title": "jOOQ fetch vs fetchResultSet and close connection in Kotlin", "body": "<p>I'm using Kotlin with HikariCP and jOOQ to query my database. I've come to realize that this code works as expected, fetching the rows and closing the connection afterwards:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;String&gt; {\n        DSL.using(datasource, SQLDialect.POSTGRES_10)\n            .use { ctx -&gt;\n                ctx.select(countries.CO_NAME)\n                    .from(countries)\n                    .orderBy(countries.CO_NAME)\n                    .fetch()\n                return emptyList()\n            }\n    }\n}\n</code></pre>\n\n<p>whereas if I use <code>fetchResultSet()</code>, the connection is never closed and the pool dries out:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;String&gt; {\n        DSL.using(datasource, SQLDialect.POSTGRES_10)\n            .use { ctx -&gt;\n                ctx.select(countries.CO_NAME)\n                    .from(countries)\n                    .orderBy(countries.CO_NAME)\n                    .fetchResultSet()\n                return emptyList()\n            }\n    }\n}\n</code></pre>\n\n<p>I've seen that <code>AbstractResultQuery#fetchResultSet()</code> is delegating to a <code>fetchLazy()</code> method, so not sure if it has something to do with that.</p>\n\n<p>If I get the connection myself instead of delegating it to the <code>DSLContext</code>, then it works:</p>\n\n<pre><code>class CountriesService(private val datasource: DataSource) {\n\n    private val countries = Countries()\n\n    fun getCountries(): List&lt;String&gt; {\n        val conn = datasource.connection\n        conn.use {\n            DSL.using(it, SQLDialect.POSTGRES_10)\n                .select(countries.CO_NAME)\n                .from(countries)\n                .orderBy(countries.CO_NAME)\n                .fetchResultSet()\n            return emptyList()\n        }\n    }\n}\n</code></pre>\n\n<p>Is this last approach the one I should be using?</p>\n"}, {"tags": ["android", "text", "kotlin", "android-recyclerview", "divider"], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 4948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJddy.jpg?s=128&g=1", "display_name": "Ryan Godlonton-Shaw", "link": "https://stackoverflow.com/users/4948827/ryan-godlonton-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1553525898, "creation_date": 1553525898, "answer_id": 55340668, "question_id": 55334070, "link": "https://stackoverflow.com/questions/55334070/android-recyclerview-divider-in-custom-text/55340668#55340668", "title": "android recyclerview divider in custom text", "body": "<p>You'll need to create an item_view.xml (give enough bottom padding) for your adapter. Create a TextView for your time entry, bind in your adapter to display. </p>\n"}], "owner": {"reputation": 33, "user_id": 7261662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794fb9e834e153ff0acc85f9a96609cd?s=128&d=identicon&r=PG&f=1", "display_name": "Shin", "link": "https://stackoverflow.com/users/7261662/shin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553574753, "creation_date": 1553503765, "question_id": 55334070, "link": "https://stackoverflow.com/questions/55334070/android-recyclerview-divider-in-custom-text", "title": "android recyclerview divider in custom text", "body": "<p>We are implementing the list through Recyclerview.</p>\n\n<p>I would like to display the time in the Divider by putting text in it.</p>\n\n<p>No matter how I try to find it, I can search for the solution to the problem and leave a question.</p>\n\n<p>Please refer to the screenshot below.</p>\n\n<p>Help!</p>\n\n<p><a href=\"https://i.stack.imgur.com/81fYc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/81fYc.png\" alt=\"enter image description here\"></a></p>\n"}]