[{"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "edited": false, "score": 0, "creation_date": 1478758503, "post_id": 40519859, "comment_id": 68282926, "body": "Do you have any idea of the performance implications of this? The list I&#39;m using is pretty large... I realize it&#39;s will be 2N worst case but I&#39;m wondering if the compiler optimized it somehow."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 4, "creation_date": 1478783506, "post_id": 40519859, "comment_id": 68296999, "body": "You can use <code>mapNotNull</code> instead of <code>map</code> with <code>filterNotNull</code> to reduce the complexity from 2N to N."}, {"owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "edited": false, "score": 0, "creation_date": 1478793306, "post_id": 40519859, "comment_id": 68303480, "body": "I believe mapNotNull would ignore values in list that are null, but they aren&#39;t. They just can&#39;t be parsed."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "edited": false, "score": 0, "creation_date": 1478804160, "post_id": 40519859, "comment_id": 68309701, "body": "@SaadFarooq <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-not-null.html\" rel=\"nofollow noreferrer\"><code>mapNotNull</code></a> &quot;returns a list containing only the non-null <i>results</i> of applying the given transform function to each element in the original collection&quot; (<i>emphasis</i> added). That&#39;s how this answer&#39;s solution works: it transforms strings into either <code>Model</code> instances (when it can be parsed) or <code>null</code> (when it can&#39;t be parsed). This results in a <code>List&lt;Model&gt;</code> that is potentially shorter in length than the input collection."}, {"owner": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1556194640, "post_id": 40519859, "comment_id": 98359947, "body": "@mfulton26 I&#39;ve added an <a href=\"https://stackoverflow.com/a/55849088/238134\">example</a> with <code>mapNotNull</code> to make the solution more discoverable for other users."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 13, "last_activity_date": 1556291692, "last_edit_date": 1556291692, "creation_date": 1478751261, "answer_id": 40519859, "question_id": 40517931, "link": "https://stackoverflow.com/questions/40517931/mapping-unless-exception/40519859#40519859", "title": "Mapping unless exception", "body": "<p>You can treat an exception as <code>null</code> and then filter the nulls.</p>\n\n\n\n<pre><code>val models = modelsInJson.mapNotNull { json -&gt;\n    try {\n        gson.fromJson(json, Model::class.java) \n    } catch (ex: WhateverException) {\n        // TODO: logging here?\n        null\n    }\n}\n</code></pre>\n\n<p>Replace <code>WhateverException</code> with the correct one for the type of errors you want to handle, other errors can still stop the processing.</p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1478783904, "last_edit_date": 1495541326, "creation_date": 1478783904, "answer_id": 40528624, "question_id": 40517931, "link": "https://stackoverflow.com/questions/40517931/mapping-unless-exception/40528624#40528624", "title": "Mapping unless exception", "body": "<p>What you are looking for seems to be a combination of <code>map</code> and <code>takeWhile</code>. You can always roll your own. e.g. The following is adapted from the sources of <code>mapNotNull</code> and <code>takeWhile</code>:</p>\n\n<pre><code>inline fun &lt;T, R : Any&gt; Iterable&lt;T&gt;.mapWhileNotNull(transform: (T) -&gt; R?): List&lt;R&gt; {\n    return mapWhileNotNullTo(ArrayList&lt;R&gt;(), transform)\n}\n\ninline fun &lt;T, R : Any, C : MutableCollection&lt;in R&gt;&gt; Iterable&lt;T&gt;.mapWhileNotNullTo(destination: C, transform: (T) -&gt; R?): C {\n    for (element in this) {\n        val transformed = transform(element)\n        if (transformed == null) {\n            break\n        } else {\n            destination.add(transformed)\n        }\n    }\n    return destination\n}\n</code></pre>\n\n<p>Now you can map an iterable up to a transform invocation that results in <code>null</code> and, like <a href=\"https://stackoverflow.com/users/3679676/jayson-minard\">Jayson Minard</a>'s <a href=\"https://stackoverflow.com/a/40519859/3255152\">example</a>, you can map whatever exception you need to <code>null</code>:</p>\n\n<pre><code>strings.mapWhileNotNull {\n    try {\n        gson.fromJson(it, Model::class.java)\n    } catch (e: JsonSyntaxException) {\n        null\n    }\n}\n// .doOtherStuff\n</code></pre>\n"}], "owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2648, "favorite_count": 1, "accepted_answer_id": 40519859, "answer_count": 2, "score": 3, "last_activity_date": 1556291692, "creation_date": 1478735444, "question_id": 40517931, "link": "https://stackoverflow.com/questions/40517931/mapping-unless-exception", "title": "Mapping unless exception", "body": "<p>I have a list of <code>String</code>s representing serialized data that I want to <code>map</code> to a list of objects. I use the following code:</p>\n\n<pre><code>strings.map { gson.fromJson(it, Model::class.java) }\n// .doOtherStuff\n</code></pre>\n\n<p>However, sometimes there is a parsing error and the stream just stop, I would like to able to recover the list up until the point of failure. For example, if the error occurs at item 7, I would like <code>doOtherStuff</code> to get the 6 items that were successfully processed.</p>\n\n<p>What's the most idiomatic way to do this? I can filter the list to see if the parsing will succeed but that's an expensive operation being doing twice.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 191362, "user_id": 244296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce53ae6a59699c189a1724bef35d8f89?s=128&d=identicon&r=PG", "display_name": "Cristian", "link": "https://stackoverflow.com/users/244296/cristian"}, "is_accepted": true, "score": 5, "last_activity_date": 1478715713, "creation_date": 1478715713, "answer_id": 40513565, "question_id": 40513392, "link": "https://stackoverflow.com/questions/40513392/kotlin-reduce-operator-seems-to-not-work/40513565#40513565", "title": "Kotlin reduce operator seems to not work", "body": "<p>You can't <code>reduce</code> a collection of ints to a collection of strings. These compile:</p>\n\n<pre><code>// reduce to int\ncollection.reduce { x:Int, y:Int -&gt; 0 }\n\n// map to string first, then reduce\ncollection.map { \"\" }.reduce { x:String, y:String -&gt; \"\" }\n</code></pre>\n\n<p>This is clearer if you take a look at the <code>reduce</code> signature:</p>\n\n<p><code>fun &lt;S, T: S&gt; Iterable&lt;T&gt;.reduce(operation: (S, T) -&gt; S): S</code></p>\n\n<p>It basically operates on a collection of type <code>T</code>, and produces an <code>S</code> which is a <code>T</code> or a supertype of <code>T</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 8, "last_activity_date": 1537493241, "last_edit_date": 1537493241, "creation_date": 1478717332, "answer_id": 40513970, "question_id": 40513392, "link": "https://stackoverflow.com/questions/40513392/kotlin-reduce-operator-seems-to-not-work/40513970#40513970", "title": "Kotlin reduce operator seems to not work", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"nofollow noreferrer\">Kotlin Standard Library</a> has two different types of accumulators: <code>fold</code> and <code>reduce</code>. It looks like you want <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\"><code>fold</code></a>:</p>\n\n<pre><code>collection.fold(initial = \"\") { accumulator: String, element: Int -&gt; \"\" }\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 6007165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf17188ff4c441d3e7c27258007f705?s=128&d=identicon&r=PG&f=1", "display_name": "Cata D", "link": "https://stackoverflow.com/users/6007165/cata-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 0, "accepted_answer_id": 40513565, "answer_count": 2, "score": 4, "last_activity_date": 1537493241, "creation_date": 1478715050, "question_id": 40513392, "link": "https://stackoverflow.com/questions/40513392/kotlin-reduce-operator-seems-to-not-work", "title": "Kotlin reduce operator seems to not work", "body": "<p>Tried to run this example on Kotlin's online learning tool:</p>\n\n<pre><code>fun toJSON(collection: Collection&lt;Int&gt;): String {\n    val str = collection.reduce{ a:String, b:Int -&gt; \"\"}\n    return str.toString()\n}\n</code></pre>\n\n<p>However, it doesn't seem to compile, spitting this error:</p>\n\n<p><code>Error:(2, 25) Type parameter bound for T in inline fun &lt;S, T : S&gt; Iterable&lt;T&gt;.reduce(operation: (S, T) -&gt; S): S\nis not satisfied: inferred type Int is not a subtype of String</code></p>\n\n<p>Anyone seen this?...not sure if it's an error with the online tool or if it's actually something wrong.</p>\n"}, {"tags": ["android", "android-fragments", "rx-java", "kotlin"], "comments": [{"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1478706577, "post_id": 40510891, "comment_id": 68263794, "body": "<code>BehaviorSubject.from(mTrashCanList)</code> - it just takes the current value of the list. It does not react on list updates."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "reply_to_user": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1478706661, "post_id": 40510891, "comment_id": 68263849, "body": "Thanks for the really fast response. That&#39;s the key point of my question... I don&#39;t know how to make it react to the updates"}], "answers": [{"comments": [{"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1478707273, "post_id": 40511036, "comment_id": 68264294, "body": "That looks very good! I didn&#39;t know about the share() method. I&#39;ll give it a try  tonight and let you know"}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1478711137, "post_id": 40511036, "comment_id": 68266554, "body": "I just tried the code. This is still not what I was looking for... Every time as switch the fragments in the view pager, they hit the server again. I would like it to hit just once, or when I press a button, and react to the new values.  Right now it just hit the server every time it is subscriped... My goal is to get the last values that Retrofit returned, not use Retrofit again.  I believe I need a Subject for this... but not sure witch one"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1478717365, "post_id": 40511036, "comment_id": 68269640, "body": "ReplaySubject, maybe?"}, {"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1478717702, "post_id": 40511036, "comment_id": 68269787, "body": "@EpicPandaForce I assumed that last data (typically just 1 item, since that is Retrofit) from server needs to be cached"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1478717963, "post_id": 40511036, "comment_id": 68269914, "body": "oh yeah. that makes sense. BehaviorSubject already does that? Because then my comment is irrelevant (sorry I get confused with the subjects or <a href=\"https://github.com/JakeWharton/RxRelay/\" rel=\"nofollow noreferrer\">relays</a> or whatever)"}, {"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1478718896, "post_id": 40511036, "comment_id": 68270385, "body": "BehaviorSubject stores the very last value, yes, but not other values."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1478724237, "post_id": 40511036, "comment_id": 68273003, "body": "It worked! Thanks for the answer. The code quality is so much better now and it works."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1478724334, "post_id": 40511036, "comment_id": 68273052, "body": "Just one thing: return yourSubject.asObservable() should be replaced for:  return yourSubject... A Subject is already a Observable"}, {"owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "edited": false, "score": 0, "creation_date": 1478728862, "post_id": 40511036, "comment_id": 68275142, "body": "I prefer adding <code>asObservable</code> just to make sure that caller of the method won&#39;t be able to cast to Subject again and modify the data. Probably I am just overthinking things :)"}], "tags": [], "owner": {"reputation": 22572, "user_id": 926907, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gZVb2.jpg?s=128&g=1", "display_name": "Dmitry Zaytsev", "link": "https://stackoverflow.com/users/926907/dmitry-zaytsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1478716939, "last_edit_date": 1478716939, "creation_date": 1478706843, "answer_id": 40511036, "question_id": 40510891, "link": "https://stackoverflow.com/questions/40510891/react-to-retrofit-call/40511036#40511036", "title": "React to retrofit call", "body": "<p>Your problem is that this operation just takes current value of the list and does not react on updates (why should it?):</p>\n\n<pre><code>BehaviorSubject.from(mTrashCanList)\n</code></pre>\n\n<p>As one option in your Activity you can subscribe your <code>BehaviorSubject</code> to the <code>Observable</code>:</p>\n\n<pre><code>ServiceGenerator.createService(ApiClient::class.java)\n            .getTrashCans()\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(yourSubject)\n</code></pre>\n\n<p>And then return it instead of your Subject:</p>\n\n<pre><code>override fun getObservable(): Observable&lt;TrashCan&gt; {\n    return yourSubject.asObservable()\n}\n</code></pre>\n"}], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 40511036, "answer_count": 1, "score": 2, "last_activity_date": 1478716939, "creation_date": 1478706415, "last_edit_date": 1478707843, "question_id": 40510891, "link": "https://stackoverflow.com/questions/40510891/react-to-retrofit-call", "title": "React to retrofit call", "body": "<p>I have an app that has a viewpager with 4 fragments. I want to populate all the fragments with data from my server. I load the data in the activity and I want to distribute it to all the fragments.</p>\n\n<p>So I have this signature:</p>\n\n<pre><code>@GET(\"trashCan\")\nfun getTrashCans() : Observable&lt;List&lt;TrashCanDto&gt;&gt;\n</code></pre>\n\n<p>And I call the method and populate a List.</p>\n\n<pre><code>ServiceGenerator.createService(ApiClient::class.java)\n                .getTrashCans()\n                .subscribeOn(Schedulers.newThread())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(object : Subscriber&lt;List&lt;TrashCan&gt;&gt;(){\n                    override fun onCompleted() {\n                        showProgress(false)\n                    }\n\n                    override fun onError(e: Throwable) {\n                        showProgress(false)\n                        Toast.makeText(this@TrashCansInfoActivity, \"Erro ao carregar informa\u00e7\u00f5es\",\n                                Toast.LENGTH_SHORT).show()\n                        e.printStackTrace()\n                    }\n\n                    override fun onNext(trashCanList: List&lt;TrashCan&gt;) {\n                        mTrashCanList = trashCanList\n                    }\n                })\n</code></pre>\n\n<p>And then I have a method to get a Observable from this list:</p>\n\n<pre><code>override fun getObservable(): Observable&lt;TrashCan&gt; {\n    return BehaviorSubject.from(mTrashCanList)\n}\n</code></pre>\n\n<p>And I get then in my fragments:</p>\n\n<pre><code>fun newInstance(sectionNumber: Int, hasObservable: HasObservable&lt;TrashCan&gt;) : TrashCansInfoFragment {\n            val fragment = TrashCansInfoFragment()\n            fragment.setObservable(hasObservable.getObservable())\n            val args = Bundle()\n            args.putInt(ARG_SECTION_NUMBER, sectionNumber)\n            fragment.arguments = args\n            return fragment\n        }\n</code></pre>\n\n<p>Well... this should work, but It doesn't. It happens that the first of my fragments gets empty while the forth have data. (second and third are not supposed to have any data... and they don't) </p>\n\n<p>So I think: When the fragment gets created, the list is still empty, so the Observable in the activity has nothing to provide... But when the view pager get's in the forth fragment, the List is not null anymore, so my screen shows the data. </p>\n\n<p>My problem is: <strong>How do I make the Observable in the activity keep pushing the data into the fragments?</strong> Right now, it only push data when the Observable is subscriped... I want to change this, so it pushes when there is new data.</p>\n\n<p>(I think that the first Observable should comunicate directly with the Subject, bit I'm not sure how to do that...)</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["eclipse", "jvm", "kotlin", "jdk1.7"], "comments": [{"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1478784768, "post_id": 40506227, "comment_id": 68297791, "body": "Hi! I&#39;ve just tried the same steps with jdk8 and I couldn&#39;t reproduce the problem. Could you please try to use jdk8? Also the recommended version of Eclipse is 4.6 (Neon), version that is on the website is outdated and will be updated soon."}, {"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 2, "creation_date": 1478784999, "post_id": 40506227, "comment_id": 68297922, "body": "Note that &quot;HelloKt&quot; is correct, this is how files with top level functions in Kotlin are translated into the class files."}, {"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "reply_to_user": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1478822043, "post_id": 40506227, "comment_id": 68317444, "body": "Thanks for the suggestion. I changed to Eclipse Neon.1 (4.6.1) and jdk1.8.0_92, but got the same error."}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1493899630, "post_id": 40506227, "comment_id": 74605072, "body": "I do think you should file a bug as all you&#39;ve done seems reasonable, by the way mention your OS as the tutorial apparently uses Windows"}, {"owner": {"reputation": 5308, "user_id": 4038191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ec10e81b5315fe2147c38bf3e15e9e?s=128&d=identicon&r=PG", "display_name": "EvilTak", "link": "https://stackoverflow.com/users/4038191/eviltak"}, "edited": false, "score": 0, "creation_date": 1493976216, "post_id": 40506227, "comment_id": 74641890, "body": "Try using a newer version of Kotlin and the plugin, if possible or available. Try verifying whether the program compiles and runs through the command line either with a build tool or directly from the command line Kotlin compiler."}, {"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "reply_to_user": {"reputation": 5308, "user_id": 4038191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ec10e81b5315fe2147c38bf3e15e9e?s=128&d=identicon&r=PG", "display_name": "EvilTak", "link": "https://stackoverflow.com/users/4038191/eviltak"}, "edited": false, "score": 0, "creation_date": 1494026831, "post_id": 40506227, "comment_id": 74669552, "body": "@EvilTak, I followed <a href=\"https://kotlinlang.org/docs/tutorials/command-line.html\" rel=\"nofollow noreferrer\">this tutorial</a> and was able to compile directly from the command line (using Kotlin compiler <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.1.2-2\" rel=\"nofollow noreferrer\">1.1.2-2</a>). This reinforces my suspicion that there might a problem with the Eclipse plugin."}, {"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "reply_to_user": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1494088644, "post_id": 40506227, "comment_id": 74684025, "body": "@niceman, when I posted the question, I tried those steps in Windows 10 Professional. Later, when commenting EvilTak&#39;s suggestion, I was in macOS Sierra 10.12.4."}, {"owner": {"reputation": 21, "user_id": 5030384, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bXbcUKOMQdk/AAAAAAAAAAI/AAAAAAAAAKM/AsZ7B-vJKFU/photo.jpg?sz=128", "display_name": "BirdZhang ", "link": "https://stackoverflow.com/users/5030384/birdzhang"}, "edited": false, "score": 0, "creation_date": 1498817631, "post_id": 40506227, "comment_id": 76671597, "body": "This works for me. <a href=\"https://github.com/JetBrains/kotlin-examples\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin-examples</a> First of all,you should run <code>mvn test</code> like compiler kotlin to java class"}, {"owner": {"reputation": 558, "user_id": 5423827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9wEa.jpg?s=128&g=1", "display_name": "suhao399", "link": "https://stackoverflow.com/users/5423827/suhao399"}, "edited": false, "score": 0, "creation_date": 1506523686, "post_id": 40506227, "comment_id": 79857499, "body": "Hi, got same issue on Eclipse Oxygen. When i use Neon, it was fine. I post the question here. <a href=\"https://stackoverflow.com/questions/46440028/kotlin-eclipse-oxygen-can-not-run-kotlin-app\" title=\"kotlin eclipse oxygen can not run kotlin app\">stackoverflow.com/questions/46440028/&hellip;</a>"}, {"owner": {"reputation": 558, "user_id": 5423827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9wEa.jpg?s=128&g=1", "display_name": "suhao399", "link": "https://stackoverflow.com/users/5423827/suhao399"}, "edited": false, "score": 1, "creation_date": 1507651085, "post_id": 40506227, "comment_id": 80290549, "body": "set up a new workspace and try again. I fixed my issue"}], "answers": [{"comments": [{"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1493946650, "post_id": 43750406, "comment_id": 74630582, "body": "Thanks for the suggestion, but unfortunately it didn&#39;t work. The same error occurred, i.e. <code>Error: Could not find or load main class HelloKt</code>. Tried with Eclipse Neon.3 (eclipse.buildId=4.6.3.M20170301-0400), JDK 1.8.0_111, Kotlin 0.8.2.v20170314-0957 (kotlin-eclipse-policy 0.8.2.v20170314-0957, kotlin-weaving-feature 0.8.2.v20170314-0957, Equinox Weaving SDK 1.2.0.201701131634)."}, {"owner": {"reputation": 3738, "user_id": 1812434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gTQAt.jpg?s=128&g=1", "display_name": "Venkata Raju", "link": "https://stackoverflow.com/users/1812434/venkata-raju"}, "edited": false, "score": 0, "creation_date": 1506249439, "post_id": 43750406, "comment_id": 79735631, "body": "Worked in Eclipse Oxygen"}], "tags": [], "owner": {"reputation": 49, "user_id": 7955150, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cde4d6a022be82c09228d4b0fbde1b68?s=128&d=identicon&r=PG", "display_name": "user7955150", "link": "https://stackoverflow.com/users/7955150/user7955150"}, "is_accepted": false, "score": 4, "last_activity_date": 1493951674, "last_edit_date": 1493951674, "creation_date": 1493780834, "answer_id": 43750406, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/43750406#43750406", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>Try new <code>Kotlin File</code> instead of <code>Kotlin Class</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/i8zyM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i8zyM.png\" alt=\"example\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1493946587, "post_id": 43761753, "comment_id": 74630570, "body": "Thanks for the suggestion, but unfortunately it didn&#39;t work. There was no <code>Run As &gt; Kotlin Application</code> when I right-clicked the <code>Kotlin Class</code>. Tried with Eclipse Neon.3 (eclipse.buildId=4.6.3.M20170301-0400), JDK 1.8.0_111, Kotlin 0.8.2.v20170314-0957 (kotlin-eclipse-policy 0.8.2.v20170314-0957, kotlin-weaving-feature 0.8.2.v20170314-0957, Equinox Weaving SDK 1.2.0.201701131634)."}, {"owner": {"reputation": 546, "user_id": 2203209, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c5c5e609aca3d100ebe2e52f4e958a8d?s=128&d=identicon&r=PG", "display_name": "ImGroot", "link": "https://stackoverflow.com/users/2203209/imgroot"}, "reply_to_user": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1538078134, "post_id": 43761753, "comment_id": 92028274, "body": "@BashfulBeluga You should add Kotlin nature to your eclipse project.  Project context menu (right click) -&gt; Configure Kotlin -&gt; Add Kotlin nature"}], "tags": [], "owner": {"reputation": 545, "user_id": 801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26143bb5228a4ceb3df08e6e5cbaeb4b?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/801522/guilherme"}, "is_accepted": false, "score": 3, "last_activity_date": 1493822959, "last_edit_date": 1493822959, "creation_date": 1493818741, "answer_id": 43761753, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/43761753#43761753", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>For me it happened only once. I think this is some glitch from the Kotlin plugin, when you first create a Kotlin file and try run it. \nTry \"new Kotlin class\" paste the same content and see if it works.\nAfter that you should be able to run both files as it happened to me.</p>\n"}, {"comments": [{"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1496259131, "post_id": 44289768, "comment_id": 75592915, "body": "This is not a solution. At most, it is a workaround, but other applications may be affected by this removal."}, {"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1496262436, "post_id": 44289768, "comment_id": 75594622, "body": "Anyways, I tried both with and without JAVA_HOME environment variable, for both Kotlin File and Kotlin class, but it still didn&#39;t work."}], "tags": [], "owner": {"reputation": 9, "user_id": 8093169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a76320c34753d0caf9e0994e7f2a90c?s=128&d=identicon&r=PG&f=1", "display_name": "sunday robot", "link": "https://stackoverflow.com/users/8093169/sunday-robot"}, "is_accepted": false, "score": 0, "last_activity_date": 1496247111, "creation_date": 1496247111, "answer_id": 44289768, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/44289768#44289768", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>I had the same problem,\nit solved by deleting the JAVA_HOME environment variable.</p>\n\n<p>I have set an old JDK folder that I deleted in the JAVA_HOME environment variable.</p>\n"}, {"tags": [], "owner": {"reputation": 558, "user_id": 5423827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9wEa.jpg?s=128&g=1", "display_name": "suhao399", "link": "https://stackoverflow.com/users/5423827/suhao399"}, "is_accepted": false, "score": 1, "last_activity_date": 1507651050, "creation_date": 1507651050, "answer_id": 46671025, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/46671025#46671025", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>I got same issues as you. I tried a lot of ways but not work (like uninstall plugin, then install plugin again, delete project and create new project...)</p>\n\n<p><strong>How to fix:</strong> \nI created a new workspace and setup the helloworld project again. I see that class file generated and I can run it normally.</p>\n\n<p>Note that, we create new workspace and not project. What I notice is workspace contain .metadata folder that may have lot of information for Eclipse.</p>\n"}, {"tags": [], "owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "is_accepted": true, "score": 0, "last_activity_date": 1512393045, "creation_date": 1512393045, "answer_id": 47634176, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/47634176#47634176", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>Tried with Java 8 (1.8.0_144) and Eclipse Oxygen.1a Release (4.7.1a - build id 20171005-1200) with the following plugin versions:</p>\n\n<pre><code>  Kotlin    0.8.2.v20170314-0957    org.jetbrains.kotlin.feature.feature.group  JetBrains\n    kotlin-eclipse-policy   0.8.2.v20170314-0957    org.jetbrains.kotlin.policy.feature.group   JetBrains\n    kotlin-weaving-feature  0.8.2.v20170314-0957    org.jetbrains.kotlin.weaving.feature.feature.group  JetBrains\n</code></pre>\n\n<p><strong>Everything worked as expected</strong>, without the need to create a separate workspace and/or use <code>Kotlin File</code> instead of <code>Kotlin Class</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KwtLW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KwtLW.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "edited": false, "score": 0, "creation_date": 1518729746, "post_id": 48816418, "comment_id": 84636879, "body": "It works with a regular config. Please refer to the accepted answer."}], "tags": [], "owner": {"reputation": 585, "user_id": 6538939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGfJr.jpg?s=128&g=1", "display_name": "MarkyMarksFunkyBunch", "link": "https://stackoverflow.com/users/6538939/markymarksfunkybunch"}, "is_accepted": false, "score": 0, "last_activity_date": 1518729413, "creation_date": 1518729413, "answer_id": 48816418, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/48816418#48816418", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>This worked for me....\nIf you go to Window -> Show View -> Navigator\nIt shows you more a physical layout of your workspace rather than the logical view by the Package Explorer.\nRight click the kotlin file with the main function defined and click Run As -> Kotlin Application.\nWorked for me, though I'd kill to be able to use a regular run config but such is life.....</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12406830, "user_type": "registered", "profile_image": "https://graph.facebook.com/2815756171767840/picture?type=large", "display_name": "Michael Scarpace", "link": "https://stackoverflow.com/users/12406830/michael-scarpace"}, "is_accepted": false, "score": 0, "last_activity_date": 1574295050, "last_edit_date": 1574295050, "creation_date": 1574287409, "answer_id": 58964073, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse/58964073#58964073", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<ol>\n<li>Go to <strong>Windows->show view->navigator</strong></li>\n<li>Edit the <code>.project</code> file, changing just the following section to compile Kotlin file into same location as the Java files.</li>\n</ol>\n\n<pre><code>&lt;linkedResources&gt;\n        &lt;link&gt;\n            &lt;!--name&gt;kotlin_bin&lt;/name--&gt;\n            &lt;type&gt;2&lt;/type&gt;\n            &lt;locationURI&gt;org.jetbrains.kotlin.core.filesystem:/FindUniqueStrings/bin&lt;/locationURI&gt;\n        &lt;/link&gt;\n&lt;/linkedResources&gt;\n</code></pre>\n\n<p>Keep in mind:</p>\n\n<ol>\n<li>I have commented out the <code>name</code> tag.  Otherwise, Kotlin complier creates src folder <code>kotlin_bin</code> and puts your kotlin file in this folder and the kotlin runtime will not find it. </li>\n<li>The name of my java project is entitled <code>FindUniqueStrings</code>.  Yours will be different.</li>\n<li>Double check that your java class files are complied into your project's bin folder by locating these files in the <code>Navigator</code> view.  </li>\n</ol>\n"}], "owner": {"reputation": 2453, "user_id": 2679529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puE0s.jpg?s=128&g=1", "display_name": "marcelovca90", "link": "https://stackoverflow.com/users/2679529/marcelovca90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8647, "favorite_count": 1, "accepted_answer_id": 47634176, "answer_count": 7, "score": 27, "last_activity_date": 1581592708, "creation_date": 1478691954, "last_edit_date": 1496232796, "question_id": 40506227, "link": "https://stackoverflow.com/questions/40506227/unable-to-run-kotlin-application-in-eclipse", "title": "Unable to Run Kotlin Application in Eclipse", "body": "<p>In order to create my first, simple Kotlin project in Eclipse, I followed the steps in <a href=\"https://kotlinlang.org/docs/tutorials/getting-started-eclipse.html\" rel=\"noreferrer\">Getting Started with Eclipse Luna</a> tutorial from Kotlin official website, i.e.:</p>\n\n<ul>\n<li>Install Kotlin Plugin for Eclipse from Eclipse Marketplace</li>\n<li>Open the Kotlin perspective and created a Kotlin Project</li>\n<li>Created the file \"hello.kt\" inside the \"src\" folder with the <code>main</code> method</li>\n<li>Right-clicked the file > Run As > Kotlin Application</li>\n</ul>\n\n<p>However, I keep get the following error in Eclipse console:</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class HelloKt</p>\n</blockquote>\n\n<p>I have double-checked the Run Configuration for my project, and it does set the \"Main class\" as <code>HelloKt</code> (which I'm 100% sure it does not exist). Also, when I hit the \"Search\" button, the only item that Eclipse finds is <code>HelloKt - (default package)</code> (which, again, does not exist).</p>\n\n<p>For the sake of completeness, find below the code for <code>hello.kt</code> file:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(\"Hello, World\")\n}\n</code></pre>\n\n<p>I noticed the following divergences between the tutorial and what I did:</p>\n\n<ul>\n<li>I'm using a different Eclipse version (the tutorial suggests Luna; I'm using Mars.2).</li>\n<li>I'm using a different JDK version (the tutorial DOES not suggest any specific version, but from the images, we can see they have used <code>jdk1.6.0_45</code>, while I'm using <code>jdk1.7.0_79</code>.</li>\n</ul>\n\n<p>Note that I'm using the latest version of Kotlin Eclipse Plugin, so this is not the same case as in <a href=\"https://stackoverflow.com/a/33997612/2679529\">this post</a>. These are the versions in my current installation:</p>\n\n<ul>\n<li>Kotlin 0.7.2.v20160930-0748\n\n<ul>\n<li>kotlin-eclipse-policy 0.7.2.v20160928-1525</li>\n<li>kotlin-weaving-feature 0.7.2.v20160928-1525</li>\n</ul></li>\n</ul>\n\n<p>Can any of these divergences be the cause of the error while running the application?</p>\n\n<p>Do you see/know any potential cause or known bug regarding this scenario?</p>\n\n<hr>\n\n<p><strong>UPDATE (May 14th, 2017)</strong></p>\n\n<p>Tried with Eclipse Neon.3 (eclipse.buildId=4.6.3.M20170301-0400), JDK 1.8.0_111, Kotlin 0.8.2.v20170314-0957 (kotlin-eclipse-policy 0.8.2.v20170314-0957, kotlin-weaving-feature 0.8.2.v20170314-0957, Equinox Weaving SDK 1.2.0.201701131634). <strong>The problem persists.</strong></p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5012998, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8VuhPOPu4oU/AAAAAAAAAAI/AAAAAAAAC6M/TRdFBDufQHE/photo.jpg?sz=128", "display_name": "Tephra", "link": "https://stackoverflow.com/users/5012998/tephra"}, "edited": false, "score": 0, "creation_date": 1565777945, "post_id": 40504940, "comment_id": 101455225, "body": "From the bottom of my heart, thank you! I was about to give up life as a programmer when I found that you had found the issue. Thank you."}], "tags": [], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "is_accepted": false, "score": 4, "last_activity_date": 1478687900, "creation_date": 1478687900, "answer_id": 40504940, "question_id": 40504858, "link": "https://stackoverflow.com/questions/40504858/cannot-generate-view-binders-java-lang-indexoutofboundsexception/40504940#40504940", "title": "cannot generate view binders java.lang.IndexOutOfBoundsException", "body": "<p>Actually it turns out that <a href=\"https://android.googlesource.com/platform/frameworks/data-binding/+/master/compiler/src/main/kotlin/android/databinding/tool/ext/ext.kt#76\" rel=\"nofollow noreferrer\">this</a> is the offending line:</p>\n\n<pre><code>public fun String.androidId() : String = this.split(\"/\")[1]\n</code></pre>\n\n<p>Basically if your Android ID is missing a <code>/</code> it will crash. Yeay. By checking my source code I found that I had accidentally set the ID of an image to a data binding expression, instead of the source:</p>\n\n<pre><code>        android:id=\"@{data.image}\"\n</code></pre>\n\n<p>It would be nice if the data binding library had actual error messages.</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478687900, "creation_date": 1478687603, "question_id": 40504858, "link": "https://stackoverflow.com/questions/40504858/cannot-generate-view-binders-java-lang-indexoutofboundsexception", "title": "cannot generate view binders java.lang.IndexOutOfBoundsException", "body": "<p>I get the following error when using the data binding library. I've Googled it but it looks like it is a new error. Does anyone know what causes it?</p>\n\n<pre><code> FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugJavaWithJavac'.\n&gt; java.lang.RuntimeException: failure, see logs for details.\ncannot generate view binders java.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n    at java.util.ArrayList.rangeCheck(ArrayList.java:653)\n    at java.util.ArrayList.get(ArrayList.java:429)\n    at android.databinding.tool.ext.ExtKt.androidId(ext.kt:76)\n    at android.databinding.tool.writer.LayoutBinderWriterKt$readableName$2.invoke(LayoutBinderWriter.kt:129)\n    at android.databinding.tool.writer.LayoutBinderWriterKt$readableName$2.invoke(LayoutBinderWriter.kt)\n    at android.databinding.tool.ext.LazyExt.getValue(ext.kt:27)\n    at android.databinding.tool.writer.LayoutBinderWriterKt.getReadableName(LayoutBinderWriter.kt)\n    at android.databinding.tool.LayoutBinder.&lt;init&gt;(LayoutBinder.java:203)\n    at android.databinding.tool.DataBinder.&lt;init&gt;(DataBinder.java:52)\n    at android.databinding.tool.CompilerChef.ensureDataBinder(CompilerChef.java:86)\n    at android.databinding.tool.CompilerChef.sealModels(CompilerChef.java:200)\n    at android.databinding.annotationprocessor.ProcessExpressions.writeResourceBundle(ProcessExpressions.java:149)\n    at android.databinding.annotationprocessor.ProcessExpressions.onHandleStep(ProcessExpressions.java:82)\n    at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.runStep(ProcessDataBinding.java:154)\n    at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.access$000(ProcessDataBinding.java:139)\n    at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:66)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:794)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:705)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1800(JavacProcessingEnvironment.java:91)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1035)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1176)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1170)\n    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)\n    at com.sun.tools.javac.main.Main.compile(Main.java:523)\n    at com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\n    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:46)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:33)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:104)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:53)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:38)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:35)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:163)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:145)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:93)\n    at com.android.build.gradle.tasks.factory.AndroidJavaCompile.compile(AndroidJavaCompile.java:49)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:75)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:245)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:221)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:232)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:210)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:66)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:66)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:50)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:25)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n    at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:153)\n    at org.gradle.internal.Factories$1.create(Factories.java:22)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:53)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:150)\n    at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:98)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:92)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:63)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:92)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:83)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:99)\n    at org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:46)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:48)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:30)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:81)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:46)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:237)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>It looks like this is the code that fails, I guess because <code>$$delegatedProperties.length</code> is 1.</p>\n\n<pre><code>@NotNull\npublic static final String getReadableName(BindingTarget $receiver) {\n    Intrinsics.checkParameterIsNotNull($receiver, \"$receiver\");\n    return (String)readableName$delegate.getValue($receiver, $$delegatedProperties[1]);\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 1454178, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/61e7e41c5b5df8ee4d5c533ef997dc6f?s=128&d=identicon&r=PG", "display_name": "dj_bushido", "link": "https://stackoverflow.com/users/1454178/dj-bushido"}, "edited": false, "score": 3, "creation_date": 1508814717, "post_id": 40501922, "comment_id": 80750014, "body": "One minor note: You can change the path in the first step to <code>&quot;${protobuf.generatedFilesBaseDir}&#47;main&#47;java&quot;</code> to automatically pick up changing folders."}], "tags": [], "owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "is_accepted": true, "score": 15, "last_activity_date": 1478676644, "creation_date": 1478676644, "answer_id": 40501922, "question_id": 40499452, "link": "https://stackoverflow.com/questions/40499452/how-to-build-google-protocol-buffers-and-kotlin-using-gradle/40501922#40501922", "title": "How to build Google protocol buffers and Kotlin using Gradle?", "body": "<p>I was able to get this to work by adding two lines to my build.gradle.</p>\n\n<p>The first line adds the directory in which the proto compiler generates Java code to the directories the <code>:compileKotlin</code> looks for Java source:</p>\n\n<pre><code>sourceSets.main.java.srcDirs += 'build/generated/source/proto/main/java'\n</code></pre>\n\n<p>The second ensures that the Java code is (re)generated before invoking <code>:compileKotlin</code>:</p>\n\n<pre><code>compileKotlin.dependsOn ':generateProto'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3306, "user_id": 759042, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d15066c8d70752866771e90b9204536d?s=128&d=identicon&r=PG", "display_name": "aha", "link": "https://stackoverflow.com/users/759042/aha"}, "is_accepted": false, "score": 5, "last_activity_date": 1487063722, "creation_date": 1487063722, "answer_id": 42222043, "question_id": 40499452, "link": "https://stackoverflow.com/questions/40499452/how-to-build-google-protocol-buffers-and-kotlin-using-gradle/42222043#42222043", "title": "How to build Google protocol buffers and Kotlin using Gradle?", "body": "<p>For Kotlin and Android:</p>\n\n<pre><code>android {\n\n    sourceSets {\n        debug.java.srcDirs += 'build/generated/source/proto/debug/java'\n        release.java.srcDirs += 'build/generated/source/proto/release/java'\n    }\n}\n</code></pre>\n\n<p>An additional source directory has to be added for every build type. In this sample there are two build types: <code>debug</code> and <code>release</code>.</p>\n\n<p>If you're using grpc, another line has to be added per build type:</p>\n\n<pre><code>android {\n\n    sourceSets {\n        debug.java.srcDirs += 'build/generated/source/proto/debug/java'\n        debug.java.srcDirs += 'build/generated/source/proto/debug/grpc'\n        release.java.srcDirs += 'build/generated/source/proto/release/java'\n        release.java.srcDirs += 'build/generated/source/proto/release/grpc'\n    }\n}\n</code></pre>\n\n<p>At least with Kotlin 1.0.6, protobuf-gradle-plugin 0.8.0, protobuf 3.2.x and grpc 1.x it's not required to fiddle with the task order. </p>\n"}, {"comments": [{"owner": {"reputation": 314, "user_id": 4115907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001469627208/picture?type=large", "display_name": "Vladislav Kan", "link": "https://stackoverflow.com/users/4115907/vladislav-kan"}, "edited": false, "score": 0, "creation_date": 1526812022, "post_id": 45596877, "comment_id": 87881884, "body": "Thanks for the case with multiple build types and flavors, everyone seems forgetting about this. But is there a way to make it dynamic? like to get a current build type and flavor and add it to srcDir?"}], "tags": [], "owner": {"reputation": 516, "user_id": 3465960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c9fbf2658898daa1bef9dcddda5e2?s=128&d=identicon&r=PG&f=1", "display_name": "Tej", "link": "https://stackoverflow.com/users/3465960/tej"}, "is_accepted": false, "score": 1, "last_activity_date": 1502298838, "creation_date": 1502298838, "answer_id": 45596877, "question_id": 40499452, "link": "https://stackoverflow.com/questions/40499452/how-to-build-google-protocol-buffers-and-kotlin-using-gradle/45596877#45596877", "title": "How to build Google protocol buffers and Kotlin using Gradle?", "body": "<p>if you are working with multiple build types and flavors in android and with protobuf-lite use below with kotlin.</p>\n\n<p>for example I have <code>debug</code> and <code>release</code> builds with <code>demo</code> and <code>prod</code> flavors it will create <code>demoDebug</code>, <code>demoRelease</code> and <code>prodDebug</code> and <code>prodRelease</code> variants.</p>\n\n<p>then use</p>\n\n<p>`</p>\n\n<pre><code>android{\n    sourceSets {\n        debug.java.srcDirs += 'build/generated/source/proto/demoDebug/javalite'\n        debug.java.srcDirs += 'build/generated/source/proto/prodDebug/javalite'\n        release.java.srcDirs += 'build/generated/source/proto/demoRelease/javalite'\n        release.java.srcDirs += 'build/generated/source/proto/prodRelease/javalite'\n      }\n    }\n</code></pre>\n\n<p>`</p>\n\n<p>tie the different compileKotlin with generateProto</p>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {\n  if (getName() == 'compileDemoDebugKotlin')\n    dependsOn(':app:generateDemoDebugProto')\n  if (getName() == 'compileDemoReleaseKotlin')\n    dependsOn(':app:generateDemoReleaseProto')\n  if (getName() == 'compileProdDebugKotlin')\n    dependsOn(':app:generateProdDebugProto')\n  if (getName() == 'compileProdReleaseKotlin')\n    dependsOn(':app:generateProdReleaseProto')\n}\n</code></pre>\n"}], "owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6247, "favorite_count": 3, "accepted_answer_id": 40501922, "answer_count": 3, "score": 15, "last_activity_date": 1502298838, "creation_date": 1478658399, "question_id": 40499452, "link": "https://stackoverflow.com/questions/40499452/how-to-build-google-protocol-buffers-and-kotlin-using-gradle", "title": "How to build Google protocol buffers and Kotlin using Gradle?", "body": "<p>I'm trying to build a project that uses both Google protocol buffers and Kotlin using Gradle. I want the proto files to compile into Java source, which is then called from my Kotlin code.</p>\n\n<p>My source files are arranged like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>src/main/proto/*.proto\nsrc/main/kotlin/*.kt\nsrc/test/kotlin/*.kt\n</code></pre>\n\n<p>Here's my <code>build.gradle</code> file:</p>\n\n<pre><code>version '1.0-SNAPSHOT'\n\napply plugin: 'kotlin'\napply plugin: 'java'\napply plugin: 'com.google.protobuf'\n\nrepositories {\n    mavenCentral()\n    maven { url \"http://dl.bintray.com/kotlin/kotlin-eap-1.1\" }\n}\n\n\nbuildscript {\n    ext.kotlin_version = '1.1-M02'\n\n    repositories {\n        mavenCentral()\n        maven { url \"http://dl.bintray.com/kotlin/kotlin-eap-1.1\" }\n    }\n\n    dependencies {\n        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nprotobuf {\n    protoc {\n        artifact = 'com.google.protobuf:protoc:3.0.0'\n    }\n}\n\ndependencies {\n    compile 'com.google.protobuf:protobuf-java:3.0.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    testCompile 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>When I run <code>./gradlew assemble</code> I get a bunch of \"Unresolved reference\" errors during <code>:compileKotlin</code>. Afterwards I can see that there are no Java source files generated, so it appears that the proto compiler is not being invoked at all.</p>\n\n<p>If I remove the <code>apply plugin: 'kotlin'</code> line, then <code>./gradlew assemble</code> successfully generates the Java source, but of course my Kotlin source is never compiled. </p>\n\n<p>How do I fix my <code>build.gradle</code> so that I can call my protobuf code from Kotlin?</p>\n"}, {"tags": ["android", "variables", "lambda", "casting", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1478691587, "post_id": 40497726, "comment_id": 68254653, "body": "Please add your code snipped in the text form, so that it can be copy-pasted. I had to retype you code to answer you question, which was not that enjoyable."}], "answers": [{"tags": [], "owner": {"reputation": 2892, "user_id": 1978013, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd980993188a54d04e3cf1f1cbf34110?s=128&d=identicon&r=PG", "display_name": "Seaskyways", "link": "https://stackoverflow.com/users/1978013/seaskyways"}, "is_accepted": false, "score": 1, "last_activity_date": 1478645186, "creation_date": 1478645186, "answer_id": 40497727, "question_id": 40497726, "link": "https://stackoverflow.com/questions/40497726/smart-cast-variable-in-lambda-kotlin-workaround/40497727#40497727", "title": "Smart cast variable in lambda kotlin workaround", "body": "<p>I have found a simple workaround which is defining a val to equal the wanted variable and use that instead like so ...</p>\n\n<p><a href=\"https://i.stack.imgur.com/qyaUL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qyaUL.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2892, "user_id": 1978013, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd980993188a54d04e3cf1f1cbf34110?s=128&d=identicon&r=PG", "display_name": "Seaskyways", "link": "https://stackoverflow.com/users/1978013/seaskyways"}, "edited": false, "score": 0, "creation_date": 1478691920, "post_id": 40506101, "comment_id": 68254829, "body": "It becomes irritating when you have multiple children objects , so i wen with that"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1478691494, "creation_date": 1478691494, "answer_id": 40506101, "question_id": 40497726, "link": "https://stackoverflow.com/questions/40497726/smart-cast-variable-in-lambda-kotlin-workaround/40506101#40506101", "title": "Smart cast variable in lambda kotlin workaround", "body": "<p>Another way of doing it is to make the cast yourself:</p>\n\n<pre><code>.onBind {\n    when(item) {\n        is Product -&gt; view.number_sold_text = (item as Product).price.toString()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 2, "last_activity_date": 1478703061, "creation_date": 1478703061, "answer_id": 40509783, "question_id": 40497726, "link": "https://stackoverflow.com/questions/40497726/smart-cast-variable-in-lambda-kotlin-workaround/40509783#40509783", "title": "Smart cast variable in lambda kotlin workaround", "body": "<p>You can create a more convenient <code>onBind</code> extension function which has <code>item</code>, <code>view</code>, etc. passed to the lambda instead of receiving an <code>ItemViewTypePosition</code>:</p>\n\n<pre><code>inline fun LastAdapter.Builder.onBind(crossinline f: (item: Any, view: View, type: Int, position: Int) -&gt; Unit): LastAdapter.Builder {\n    return onBindListener(object : OnBindListener {\n        override fun onBind(item: Any, view: View, type: Int, position: Int) {\n            f(item, view, type, position)\n        }\n    })\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>builder.onBind { item, view, type, position -&gt;\n    when (item) {\n        is Product -&gt; view.number_sold.text = item.price.toString()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2892, "user_id": 1978013, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd980993188a54d04e3cf1f1cbf34110?s=128&d=identicon&r=PG", "display_name": "Seaskyways", "link": "https://stackoverflow.com/users/1978013/seaskyways"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1478703061, "creation_date": 1478645186, "question_id": 40497726, "link": "https://stackoverflow.com/questions/40497726/smart-cast-variable-in-lambda-kotlin-workaround", "title": "Smart cast variable in lambda kotlin workaround", "body": "<p>I have past a lambda today that has a variable which is of unknown type , and inside the when..is condition , the variable can't smart cast to the type in the is condition ... it gives that it is impossible since the variable is a Public Api , is there a workaround to this ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/J07Mo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J07Mo.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["mocking", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1478639334, "post_id": 40495622, "comment_id": 68237091, "body": "Why don&#39;t you want to use helper functions? What is wrong with <code>val x = f(mock&lt;X&lt;Int&gt;&gt;())</code>?"}, {"owner": {"reputation": 628, "user_id": 1410078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a051af72190e763a8985347f1302c92a?s=128&d=identicon&r=PG", "display_name": "jhunovis", "link": "https://stackoverflow.com/users/1410078/jhunovis"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1478809834, "post_id": 40495622, "comment_id": 68312456, "body": "Because it feels like a workaround for the &quot;unchecked cast&quot; issue. Is there a way to do it without a workaround?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1478813832, "post_id": 40495622, "comment_id": 68314361, "body": "I don&#39;t see <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified type parameters</a> as a workaround to the &quot;unchecked cast&quot; issue. In fact, I see the &quot;unchecked cast&quot; issue as a (Java) workaround to not having reified type parameters (or something similar)."}, {"owner": {"reputation": 628, "user_id": 1410078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a051af72190e763a8985347f1302c92a?s=128&d=identicon&r=PG", "display_name": "jhunovis", "link": "https://stackoverflow.com/users/1410078/jhunovis"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1479151031, "post_id": 40495622, "comment_id": 68427831, "body": "@mfulton26 After thinking this over, I absolutely agree with you!"}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 1410078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a051af72190e763a8985347f1302c92a?s=128&d=identicon&r=PG", "display_name": "jhunovis", "link": "https://stackoverflow.com/users/1410078/jhunovis"}, "edited": false, "score": 0, "creation_date": 1478809719, "post_id": 40496395, "comment_id": 68312383, "body": "I do use that library, but this is not the issue here. I do want to know whether there is a way around the &quot;unchecked cast&quot; warning in a more direct way."}, {"owner": {"reputation": 628, "user_id": 1410078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a051af72190e763a8985347f1302c92a?s=128&d=identicon&r=PG", "display_name": "jhunovis", "link": "https://stackoverflow.com/users/1410078/jhunovis"}, "edited": false, "score": 0, "creation_date": 1479150945, "post_id": 40496395, "comment_id": 68427789, "body": "I think I see the point. It is not the problem of Kotlin but of the Mockito interface written Java which cannot express this. If Mockito would use reified type parameters, all would be fine."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 5, "last_activity_date": 1478815471, "last_edit_date": 1478815471, "creation_date": 1478639119, "answer_id": 40496395, "question_id": 40495622, "link": "https://stackoverflow.com/questions/40495622/mocking-generic-interfaces-with-kotlin-and-mockito/40496395#40496395", "title": "Mocking generic interfaces with Kotlin and Mockito", "body": "<p>Just use <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">mockito-kotlin</a> project. This project contains all must have helpers for mockito. And supports mockito 2.1 as well.</p>\n\n<p>Upd. To deal with \"uncheked cast\" use <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">Reified type parameters</a>.</p>\n\n<p>You say that \"But I do not want to use helper functions.\", but why? This is inline function, so in compile time function will be inlined at all call sites will.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 2096814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQRb5.jpg?s=128&g=1", "display_name": "Maurycy", "link": "https://stackoverflow.com/users/2096814/maurycy"}, "is_accepted": false, "score": 1, "last_activity_date": 1570097277, "creation_date": 1570097277, "answer_id": 58216855, "question_id": 40495622, "link": "https://stackoverflow.com/questions/40495622/mocking-generic-interfaces-with-kotlin-and-mockito/58216855#58216855", "title": "Mocking generic interfaces with Kotlin and Mockito", "body": "<p>Alternatively you can use <a href=\"https://github.com/mockk/mockk\" rel=\"nofollow noreferrer\">Mockk</a> library.</p>\n\n<p>It supports annotations, so to create a mock it's enough to write:</p>\n\n<pre><code>@ExtendWith(MockKExtension::class)\nclass BookSpec {\n\n  @MockK\n  lateinit var author: Author\n}\n</code></pre>\n\n<p>and then to record some behaviour:</p>\n\n<pre><code>every { author.name() } returns \"Milosz Brzezinski\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>every { author.rank() } throws OutOfScaleException()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "is_accepted": false, "score": 1, "last_activity_date": 1601306107, "creation_date": 1601306107, "answer_id": 64104937, "question_id": 40495622, "link": "https://stackoverflow.com/questions/40495622/mocking-generic-interfaces-with-kotlin-and-mockito/64104937#64104937", "title": "Mocking generic interfaces with Kotlin and Mockito", "body": "<p>The <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">mockito-kotlin</a> library prevents indeed the need to suppress warnings if used correclty.</p>\n<p>Here is an example. In the Maven <code>pom.xml</code> you import the library:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.nhaarman.mockitokotlin2&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-kotlin&lt;/artifactId&gt;\n    &lt;version&gt;2.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then in your tests, you import the mock method:</p>\n<pre><code>import com.nhaarman.mockitokotlin2.moc\n</code></pre>\n<p>Then you can comfortably mock whatever you need to mock:</p>\n<pre><code>@Before\nfun setUp() {\n    val sessionFactory: FactoryBean&lt;SessionFactory&gt; = mock()\n    val eventDateReminderService: EventDateReminderService = mock()\n    val eventDateService: EventDateService = mock()\n    val templateService: TemplateService = mock()\n    reminderService = ReminderService(sessionFactory, eventDateReminderService, eventDateService, templateService)\n}\n</code></pre>\n<p>No need for casting or suppressing warnings. If you use the Mockito library directly, you will need to cast and suppress warnings.</p>\n"}], "owner": {"reputation": 628, "user_id": 1410078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a051af72190e763a8985347f1302c92a?s=128&d=identicon&r=PG", "display_name": "jhunovis", "link": "https://stackoverflow.com/users/1410078/jhunovis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6515, "favorite_count": 1, "accepted_answer_id": 40496395, "answer_count": 3, "score": 8, "last_activity_date": 1601306107, "creation_date": 1478636124, "question_id": 40495622, "link": "https://stackoverflow.com/questions/40495622/mocking-generic-interfaces-with-kotlin-and-mockito", "title": "Mocking generic interfaces with Kotlin and Mockito", "body": "<p>I am trying to mock a generic interface in Kotlin using Mockito. But so far I have found no natural solution. Given:</p>\n\n<pre><code>interface X&lt;T&gt; {\n    fun x(): T\n}\n\nfun f(x: X&lt;Int&gt;) = x.x()\n</code></pre>\n\n<p>I could mock <code>X</code> with any of the following:</p>\n\n<ol>\n<li><p><code>val x = f(Mockito.mock(X::class.java) as  X&lt;Int&gt;)</code></p>\n\n<p>But that would generate an \"unchecked cast\" warning.</p></li>\n<li><p><code>@Mock lateinit var x: X&lt;Int&gt;</code></p>\n\n<p>But I do not want to use the <code>@Mock</code> annotation because I like to have my fields final.</p></li>\n<li><p>Introduce a helper function, as the <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"noreferrer\" title=\"mockito-kotlin library\">mockito-kotlin library</a> does:</p>\n\n<p><code>inline fun &lt;reified T : Any&gt; mock(): T = Mockito.mock(T::class.java)!!</code></p>\n\n<p>Then call it like this:</p>\n\n<p><code>val x: X&lt;Int&gt; = mock()</code></p>\n\n<p>But I do not want to use helper functions.</p></li>\n</ol>\n\n<p>Is there an elegant pure Kotlin way to mock a generic interface with Mockito?\n(I would prefer a version of 1. without the warning.)</p>\n"}, {"tags": ["java", "android", "xml", "kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 927, "user_id": 2015751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29d0313be56df012c70064c768046964?s=128&d=identicon&r=PG", "display_name": "daemontus", "link": "https://stackoverflow.com/users/2015751/daemontus"}, "is_accepted": false, "score": 12, "last_activity_date": 1478880337, "creation_date": 1478880337, "answer_id": 40551841, "question_id": 40487944, "link": "https://stackoverflow.com/questions/40487944/parsing-xml-kotlin-android/40551841#40551841", "title": "Parsing xml kotlin android", "body": "<p>Indeed, Simple XML Framework has a few problems with Kotlin attributes and it can be a little tricky to get things to work. </p>\n\n<p>To be honest, I am not quite sure what is the problem in your specific case, but I'd guess that the annotation shouldn't be specified for the getter, but rather for the field.</p>\n\n<p>Anyway, I am combining Simple XML and Kotlin data classes this way, and it seems to be working fine :) </p>\n\n<pre><code>data class Section (\n\n    @field:Element(name = \"id\", required = false)\n    @param:Element(name = \"id\", required = false)\n    val id: Long? = null,\n\n    @field:Attribute(name = \"title\", required = false)\n    @param:Attribute(name = \"title\", required = false)\n    val title: String? = null\n)\n</code></pre>\n\n<p>Edit: If you don't want to use data classes (which I highly recommend, but you might have a reason), this should work without the \"data\" keyword just fine. If you don't wish to create a constructor, just move the attribute declarations directly into the class and get rid of the @param annotation (the @field must stay). </p>\n"}, {"comments": [{"owner": {"reputation": 1022, "user_id": 3922919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cXTij.jpg?s=128&g=1", "display_name": "Rahul Chowdhury", "link": "https://stackoverflow.com/users/3922919/rahul-chowdhury"}, "edited": false, "score": 2, "creation_date": 1516871538, "post_id": 42789917, "comment_id": 83869530, "body": "Works for me without the <code>@JvmOverloads</code> annotation."}, {"owner": {"reputation": 318, "user_id": 5396274, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r2_pknPqPMk/AAAAAAAAAAI/AAAAAAAAAFw/NMrYiMSTzX8/photo.jpg?sz=128", "display_name": "Arun Yogeshwaran", "link": "https://stackoverflow.com/users/5396274/arun-yogeshwaran"}, "reply_to_user": {"reputation": 1022, "user_id": 3922919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cXTij.jpg?s=128&g=1", "display_name": "Rahul Chowdhury", "link": "https://stackoverflow.com/users/3922919/rahul-chowdhury"}, "edited": false, "score": 0, "creation_date": 1584355909, "post_id": 42789917, "comment_id": 107402750, "body": "@RahulChowdhury You might not have had default parameters"}], "tags": [], "owner": {"reputation": 256, "user_id": 7145550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea706d027cccb44d3c24cc79c2465aba?s=128&d=identicon&r=PG&f=1", "display_name": "wirdil", "link": "https://stackoverflow.com/users/7145550/wirdil"}, "is_accepted": true, "score": 18, "last_activity_date": 1489505574, "last_edit_date": 1489505574, "creation_date": 1489504838, "answer_id": 42789917, "question_id": 40487944, "link": "https://stackoverflow.com/questions/40487944/parsing-xml-kotlin-android/42789917#42789917", "title": "Parsing xml kotlin android", "body": "<p>The answer of @daementus is almost perfect. If you want to use constructor injection with default parameters, you have to force Kotlin to generate constructor overloads:</p>\n\n<pre><code>data class Section @JvmOverloads constructor(\n\n    @field:Element(name = \"id\")\n    @param:Element(name = \"id\")\n    val id: Long,\n\n    @field:Attribute(name = \"title\", required = false)\n    @param:Attribute(name = \"title\", required = false)\n    val title: String = \"\"\n)\n</code></pre>\n\n<p>Without it you will get <em>Constructor not matched for class Section</em>. \nBy default Kotlin generates a constructor with all parameters and a special constructor.  </p>\n\n<p><em>Note: I would prefer to answer in the comments but I don't have enough points.</em></p>\n"}], "owner": {"reputation": 621, "user_id": 6708989, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ffc7213d4eb7b705a320008250b51dae?s=128&d=identicon&r=PG&f=1", "display_name": "g71132", "link": "https://stackoverflow.com/users/6708989/g71132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6658, "favorite_count": 1, "accepted_answer_id": 42789917, "answer_count": 2, "score": 4, "last_activity_date": 1489505574, "creation_date": 1478611076, "last_edit_date": 1478639003, "question_id": 40487944, "link": "https://stackoverflow.com/questions/40487944/parsing-xml-kotlin-android", "title": "Parsing xml kotlin android", "body": "<p>I have xml like this:</p>\n\n<pre><code>&lt;horo&gt;\n&lt;aries&gt;\n&lt;today&gt;\n\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432\u0430\u0441 \u043c\u043e\u0433\u0443\u0442 \u0437\u0434\u043e\u0440\u043e\u0432\u043e \u043e\u0433\u043e\u0440\u0447\u0438\u0442\u044c. \u0415\u0441\u043b\u0438 \u043e\u0442 \u0440\u0430\u0441\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0432\u0441\u0435 \u043d\u0430\u0447\u043d\u0435\u0442 \u0432\u0430\u043b\u0438\u0442\u0441\u044f \u0438\u0437 \u0440\u0443\u043a, \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u043f\u043e\u043a\u043e\u0439\u043d\u043e \u0441\u044f\u0434\u044c\u0442\u0435 \u0438 \u0442\u0438\u0445\u043e\u043d\u044c\u043a\u043e \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u0445\u043e\u0440\u043e\u0448\u0435\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u0438.\n&lt;/today&gt;\n&lt;/aries&gt;\n&lt;taurus&gt;\n&lt;today&gt;\n\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0443 \u0432\u0430\u0441 \u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043d\u0430 \u043b\u0438\u0447\u043d\u043e\u043c \u0444\u0440\u043e\u043d\u0442\u0435. \u0421\u043f\u0430\u0441\u0442\u0438 \u0432\u0430\u0441 \u043e\u0442 \u043f\u0435\u0440\u0441\u043f\u0435\u043a\u0442\u0438\u0432\u044b \u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u043d\u0435 \u0443 \u0434\u0435\u043b \u043c\u043e\u0436\u0435\u0442 \u0441\u0443\u0445\u043e\u0439, \u0440\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438 \u0432 \u0432\u044b\u0441\u0448\u0435\u0439 \u0441\u0442\u0435\u043f\u0435\u043d\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435.\n&lt;/today&gt;\n&lt;/taurus&gt;\n&lt;/horo&gt;\n</code></pre>\n\n<p>And now i learning kotlin whith retrofit. I include libraries for parse xml, and not i cant understand how create object for parsing this xml. I have object:</p>\n\n<pre><code>@Root(name = \"horo\", strict = false)\nopen class DailyHoroscope{\n    @get : Element(name = \"aries\") var aries : Aries? = null\n}\n\n@Root(name = \"aries\", strict = false)\nopen class Aries{\n    @get : Element(name = \"today\") var today : String? = null\n}\n</code></pre>\n\n<p>but i have error:</p>\n\n<blockquote>\n  <p>rg.simpleframework.xml.core.ConstructorException: Default constructor\n  can not accept read only @org.simpleframework.xml.Element(data=false,\n  name=aries, required=true, type=void) on method 'aries' in class\n  ac.kotlintest.model.</p>\n</blockquote>\n\n<p><strong>upd</strong></p>\n\n<p>i writed code in java:</p>\n\n<pre><code>@Root(name = \"horo\", strict = false)\npublic class DailyHoroscopeJ {\n    @Element(name = \"aries\")\n    public Aries aries;\n\n    public Aries getAries() {\n        return aries;\n    }\n\n    public void setAries(Aries aries) {\n        this.aries = aries;\n    }\n}\n\n@Root(name = \"aries\", strict = false)\n class Aries{\n    @Element(name = \"today\")\n    public String today;\n\n    public String getToday() {\n        return today;\n    }\n\n    public void setToday(String today) {\n        this.today = today;\n    }\n}\n</code></pre>\n\n<p>and it work fine, then i convert to kotlin</p>\n\n<pre><code>@Root(name = \"horo\", strict = false)\nclass DailyHoroscope {\n    @get:Element(name = \"aries\")\n    var aries:Aries? = null\n}\n@Root(name = \"aries\", strict = false) class Aries {\n    @get:Element(name = \"today\")\n    var today:String? = null\n}\n</code></pre>\n\n<p>but i have same problem((((</p>\n"}, {"tags": ["generics", "constants", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1478609662, "post_id": 40487257, "comment_id": 68218429, "body": "A <code>size</code> property shouldn&#39;t be inside the companion object. You don&#39;t have access to the <code>length()</code>-function there. You can&#39;t measure the size of an object before it&#39;s created."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1478611127, "post_id": 40487257, "comment_id": 68219480, "body": "So where shall <code>size</code> go for you? I find that it might absolutely be static. Sorry about <code>length()</code>, its a wip."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1478612541, "post_id": 40487257, "comment_id": 68220533, "body": "@elect, seems like it should not be static, because you want size to be different for different instances of Vec2t -- means it should behave differently depending on what it is called on, definitely not the behavior one would expect from something static."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1478612751, "post_id": 40487257, "comment_id": 68220690, "body": "The JVM does not allow you to have static fields which have different values for different instantiations of a generic class."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1478617684, "post_id": 40487257, "comment_id": 68224317, "body": "@yole&#39;s comment got me thinking more about this and I don&#39;t see a use case for a <code>Vec2t.SIZE</code>. Even if you could write <code>Vec2t&lt;Byte&gt;.SIZE</code> (which you can&#39;t) different implementations of <code>Vec2t&lt;Byte&gt;</code> could use different sizes (one implementation might use an <code>Int</code> to store both bytes instead of two actual <code>Byte</code> instances). We want the implementations to provide the size and those can be provided statically (types) and dynamically (instances): <a href=\"http://stackoverflow.com/a/40490174/3255152\">stackoverflow.com/a/40490174/3255152</a>"}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1478614217, "post_id": 40488149, "comment_id": 68221744, "body": "I might be overlooking something but I believe adding <code>type</code> to <code>Vec2t</code> can be avoided in lieu of a package-level function: <code>inline fun &lt;reified T : Number&gt; sizeOfVec2t() = 2 * ...</code>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1478614443, "post_id": 40488149, "comment_id": 68221906, "body": "@mfulton26, since <code>sizeOfVec2t()</code> is inline, its <code>reified T</code> is only determined by the static/inferred type at call site. For example, <code>(intVec as Vec2t&lt;Number&gt;).sizeOfVec2t()</code> will fail to discover that <code>intVec</code> has <code>Int</code> for <code>T</code>."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1478614610, "post_id": 40488149, "comment_id": 68222009, "body": "Ah yes, yes, I thought I might be overlooking something. Thank you @hotkey!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1478615826, "last_edit_date": 1495540825, "creation_date": 1478611623, "answer_id": 40488149, "question_id": 40487257, "link": "https://stackoverflow.com/questions/40487257/kotlin-is-it-possible-to-have-a-constant-property-dependent-on-an-implementatio/40488149#40488149", "title": "Kotlin: is it possible to have a constant property dependent on an implementation generic type?", "body": "<p><sup>I like the solution <a href=\"https://stackoverflow.com/users/3255152/mfulton26\">@mfulton26</a> suggested, it fits this use case very well. The below answer is rather intended for the cases when you cannot rely on the types of the values (e.g. <code>T</code> is <code>Any</code>, and you want to know exactly what it is, but all the instances of <code>T</code> passed to your class happened to be <code>String</code>s).</sup></p>\n\n<hr>\n\n<p>First, you cannot have a <code>val</code> in a  <code>companion object</code> that has different values for different instances of your class, because, first of all, the companion object has nothing to do with the instances, it's a separate object and getting its property doesn't (and cannot) involve instances of its enclosing class. Seems like <code>size</code> should be a member property.</p>\n\n<p>But even for member properties and functions, inspecting the type argument <code>T</code> cannot be done directly, because generics in Kotlin are similar to those in Java and have <a href=\"https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens\">type erasure</a> too, so that at runtime you cannot operate with actual type arguments.</p>\n\n<p>To do that, you can store a <code>KClass&lt;T&gt;</code> (or <code>Class&lt;T&gt;</code>) object in your <code>Vec2t&lt;T&gt;</code> and implement your logic based on it:</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt;(open var x: T, \n                                 open var y: T, \n                                 private val type: KClass&lt;T&gt;) {\n    val size: Int by lazy {\n        2 * when (type) {\n            Byte::class -&gt; 1\n            Short::class -&gt; 2\n            Int::class, Float::class -&gt; 4\n            Long::class, Double::class -&gt; 8\n            else -&gt; throw ArithmeticException(\"Type undefined\")\n        }\n    }\n}\n</code></pre>\n\n<p>This would require the subclasses to add the argument to their superclass constructor call:</p>\n\n<pre><code>class Vec2(override var x: Float, override var y: Float) : Vec2t&lt;Float&gt;(x, y, Float::class)\n</code></pre>\n\n<hr>\n\n<p>If you choose this approach, Kotlin can also offer you <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified generics</a> for help, so that you can avoid explicitly specifying <code>SomeType::class</code> at use site. For example, if your <code>Vec2t&lt;T&gt;</code> was not abstract, you could construct it with this factory function:</p>\n\n<pre><code>inline fun &lt;reified T: Number&gt; vec2t(x: T, y: T) = Vec2t(x, y, T::class)\n</code></pre>\n\n<p><sup>With inline functions, you <strong>can</strong> access actual type arguments only because the function is inlined at call sites, thus its type arguments are always known at compile-time. Unfortunately, constructors cannot have any type parameters.</sup></p>\n\n<p>With usage:</p>\n\n<pre><code>val i = vec2t(1, 1) // Vec2t&lt;Int&gt; inferred from arguments type Int\nprintln(i.size) // 8\n\nval d = vec2t(1.0, 1.0) // the same but it's Vec2t&lt;Double&gt; this time\nprintln(d.size) // 16\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1478612960, "post_id": 40488254, "comment_id": 68220840, "body": "I accepted the other one, since it&#39;s not possible to achieve it statically. Anyway, thanks for your suggestion, +1"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 4, "last_activity_date": 1478611928, "creation_date": 1478611928, "answer_id": 40488254, "question_id": 40487257, "link": "https://stackoverflow.com/questions/40487257/kotlin-is-it-possible-to-have-a-constant-property-dependent-on-an-implementatio/40488254#40488254", "title": "Kotlin: is it possible to have a constant property dependent on an implementation generic type?", "body": "<p>You can inspect the type of <code>x</code> and/or <code>y</code> at runtime and lazily initialize a <code>size</code> property:</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt;(open var x: T, open var y: T) {\n    val size by lazy {\n        2 * when (x) {\n            is Byte -&gt; 1\n            is Short -&gt; 2\n            is Int, is Float -&gt; 4\n            is Long, is Double -&gt; 8\n            else -&gt; throw ArithmeticException(\"Type undefined\")\n        }\n    }\n}\n</code></pre>\n\n<p>If <code>x</code> and/or <code>y</code> were <code>final</code> then you could also skip lazy initialization and initialize it directly: </p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt;(var x: T, var y: T) {\n    val size = 2 * when (x) {\n        is Byte -&gt; 1\n        is Short -&gt; 2\n        is Int, is Float -&gt; 4\n        is Long, is Double -&gt; 8\n        else -&gt; throw ArithmeticException(\"Type undefined\")\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1478622067, "post_id": 40490174, "comment_id": 68227564, "body": "This is exactly how I am ending up doing..!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 2, "last_activity_date": 1478617342, "last_edit_date": 1495540440, "creation_date": 1478617342, "answer_id": 40490174, "question_id": 40487257, "link": "https://stackoverflow.com/questions/40487257/kotlin-is-it-possible-to-have-a-constant-property-dependent-on-an-implementatio/40490174#40490174", "title": "Kotlin: is it possible to have a constant property dependent on an implementation generic type?", "body": "<p>Although you cannot \"have static fields which have different values for different instantiations of a generic class\" (as <a href=\"https://stackoverflow.com/users/147024/yole\">@yole</a> <a href=\"https://stackoverflow.com/questions/40487257/kotlin-is-it-possible-to-have-a-constant-property-dependent-on-an-implementatio#comment68220690_40487257\">commented</a>), you can define properties on each implementation and their companion objects. e.g.:</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt; {\n    abstract var x: T\n    abstract var y: T\n    abstract val size: Int\n}\n\nclass Vec2f(override var x: Float, override var y: Float) : Vec2t&lt;Float&gt;() {\n    companion object {\n        const val SIZE = 2 * 4\n    }\n\n    override val size: Int\n        get() = SIZE\n}\n\nclass Vec2d(override var x: Double, override var y: Double) : Vec2t&lt;Double&gt;() {\n    companion object {\n        const val SIZE = 2 * 8\n    }\n\n    override val size: Int\n        get() = SIZE\n}\n</code></pre>\n\n<p>This allows you to reference <code>Vec2f.SIZE</code>, <code>Vec2d.SIZE</code>, etc. when you want to know the size for a specific implementation and reference <code>vec2t.size</code> when you have an instance (possibly of unknown implementation type) and get its size.</p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "accepted_answer_id": 40490174, "answer_count": 3, "score": 2, "last_activity_date": 1478617342, "creation_date": 1478608887, "last_edit_date": 1478612194, "question_id": 40487257, "link": "https://stackoverflow.com/questions/40487257/kotlin-is-it-possible-to-have-a-constant-property-dependent-on-an-implementatio", "title": "Kotlin: is it possible to have a constant property dependent on an implementation generic type?", "body": "<p>I have the following abstrac base class</p>\n\n<pre><code>abstract class Vec2t&lt;T : Number&gt;(open var x: T, open var y: T) {\n\n    companion object {\n        val SIZE = 2 * when (/** T instance type */) {\n            is Byte, is Ubyte -&gt; 1\n            is Short, is Ushort -&gt; 2\n            is Int, is Uint, is Float -&gt; 4\n            is Long, is Ulong, is Double -&gt; 8\n            else -&gt; throw ArithmeticException(\"Type undefined\")\n        }\n    }\n}\n</code></pre>\n\n<p>that is implemented, for example, by <code>Vec2</code></p>\n\n<pre><code>data class Vec2(override var x: Float, override var y: Float) : Vec2t&lt;Float&gt;(x, y)\n</code></pre>\n\n<p>I am wondering if it is possible to define <code>SIZE</code> in <code>Vec2t</code> and call on one of its implementation, for example <code>Vec2.SIZE</code></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "java-annotations", "kapt"], "comments": [{"owner": {"reputation": 3731, "user_id": 2134962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f5fcc613a1bc28e7c4eb00a9d609f6?s=128&d=identicon&r=PG", "display_name": "david.schreiber", "link": "https://stackoverflow.com/users/2134962/david-schreiber"}, "edited": false, "score": 0, "creation_date": 1483995300, "post_id": 40482040, "comment_id": 70318843, "body": "have you found a solution to this? Hitting the same issue."}, {"owner": {"reputation": 2094, "user_id": 3858030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213edfb3b091fb865caa70bde8c43763?s=128&d=identicon&r=PG", "display_name": "Ufkoku", "link": "https://stackoverflow.com/users/3858030/ufkoku"}, "reply_to_user": {"reputation": 3731, "user_id": 2134962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f5fcc613a1bc28e7c4eb00a9d609f6?s=128&d=identicon&r=PG", "display_name": "david.schreiber", "link": "https://stackoverflow.com/users/2134962/david-schreiber"}, "edited": false, "score": 0, "creation_date": 1484036594, "post_id": 40482040, "comment_id": 70332563, "body": "@david.schreiber the problem with folder was &quot;solved&quot; by using processor only in application module. The problem with the file updates remained. Are you using kotlin 1.0.6, maybe they fixed these issues in kapt?"}, {"owner": {"reputation": 3731, "user_id": 2134962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f5fcc613a1bc28e7c4eb00a9d609f6?s=128&d=identicon&r=PG", "display_name": "david.schreiber", "link": "https://stackoverflow.com/users/2134962/david-schreiber"}, "edited": false, "score": 0, "creation_date": 1484055872, "post_id": 40482040, "comment_id": 70344888, "body": "I also had issues with library modules, but after analyzing gradle outputs, I noticed that only release sources were built. The reason for this is, that by default, library modules will only publish release artifacts: <a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Library-Publication\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/new-build-system/&hellip;</a> I added my answer to this question."}], "answers": [{"tags": [], "owner": {"reputation": 3731, "user_id": 2134962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f5fcc613a1bc28e7c4eb00a9d609f6?s=128&d=identicon&r=PG", "display_name": "david.schreiber", "link": "https://stackoverflow.com/users/2134962/david-schreiber"}, "is_accepted": true, "score": 2, "last_activity_date": 1484055762, "creation_date": 1484055762, "answer_id": 41570310, "question_id": 40482040, "link": "https://stackoverflow.com/questions/40482040/annotation-processing-with-kapt-android-studio/41570310#41570310", "title": "Annotation processing with kapt Android Studio", "body": "<p>The <code>kotlin-kapt</code> plugin will automatically select the correct output directory based on the built library/application variant. When building a project with a single <code>com.android.application</code> module, Android Studio will use the application variant selected in the \"Build Variants\" menu.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HdiLx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HdiLx.png\" alt=\"Build variants window\"></a></p>\n\n<p>This is not true for library modules, which, if not configured otherwise, will publish the <code>release</code> build variant \u2013\u00a0even when you select \"debug\" for those modules inside the \"Build Variants\" menu.</p>\n\n<p>To get <code>kapt</code> up and running for library modules, you have three options:</p>\n\n<ol>\n<li><p>In the \"Build Variants\" window, select \"release\" for the library module containing your annotated code. This will tell Android Studio to pick up the <code>kapt</code> output inside <code>generated/sources/kapt/release/</code>.</p></li>\n<li><p>In your library modules <code>build.gradle</code> set the <code>defaultPublishConfig</code> to <code>debug</code> (and keep the selected variant at debug too). This will tell the Android Gradle plugin to compile the <code>debug</code> library variant instead of the default <code>release</code> one.</p>\n\n<pre><code>android {\n    defaultPublishConfig \"debug\"\n}\n</code></pre></li>\n<li><p>You can also choose to publish both the <code>debug</code> and <code>release</code> build variants ant the same time, by setting <code>publishNonDefaults</code> to <code>true</code>. In your main app module, you can then reference the library module twice, for <code>debugCompile</code> and <code>releaseCompile</code> configurations. However, note that this will <em>always</em> build both types, even though you might only require debug sources at the time of building, practically doubling compile times.</p></li>\n</ol>\n"}], "owner": {"reputation": 2094, "user_id": 3858030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213edfb3b091fb865caa70bde8c43763?s=128&d=identicon&r=PG", "display_name": "Ufkoku", "link": "https://stackoverflow.com/users/3858030/ufkoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1752, "favorite_count": 1, "accepted_answer_id": 41570310, "answer_count": 1, "score": 4, "last_activity_date": 1484055762, "creation_date": 1478593111, "question_id": 40482040, "link": "https://stackoverflow.com/questions/40482040/annotation-processing-with-kapt-android-studio", "title": "Annotation processing with kapt Android Studio", "body": "<p>I'm trying to use kapt for using my annotation processor. But I ran into a few problems.</p>\n\n<p>Annotation processor jar is connected this way:</p>\n\n<pre><code>    kapt files('libs/processor.jar')\n    provided files('libs/processor.jar')\n</code></pre>\n\n<p>1) I'm using <a href=\"https://github.com/square/javapoet\" rel=\"nofollow noreferrer\">JavaPoet</a> for code generation. And saving my class this way</p>\n\n<pre><code>    JavaFile javaFile = JavaFile.builder(PACKAGE, typeSpec).build();\n    javaFile.writeTo(processingEnv.getFiler());\n</code></pre>\n\n<p>But it always saves it to build\\generated\\source\\kapt\\release, and never to debug folder regardless of build variant.</p>\n\n<p><a href=\"https://i.stack.imgur.com/11fol.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11fol.png\" alt=\"enter image description here\"></a></p>\n\n<p>2) The second problem is that generated file sometimes doesn't refresh, until I press Build->Rebuild</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3167, "user_id": 502144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a14b0afdcd244efec7579d4e8bc64b01?s=128&d=identicon&r=PG", "display_name": "fdermishin", "link": "https://stackoverflow.com/users/502144/fdermishin"}, "edited": false, "score": 1, "creation_date": 1513780636, "post_id": 40473860, "comment_id": 82784021, "body": "But it truncates int to 16 bits, so <code>128104.toChar()</code> doesn&#39;t give the desired result (\ud83d\udc68)"}, {"owner": {"reputation": 4476, "user_id": 137507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f56d22d91fdc4f77fa3be933310745e?s=128&d=identicon&r=PG", "display_name": "david.barkhuizen", "link": "https://stackoverflow.com/users/137507/david-barkhuizen"}, "reply_to_user": {"reputation": 3167, "user_id": 502144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a14b0afdcd244efec7579d4e8bc64b01?s=128&d=identicon&r=PG", "display_name": "fdermishin", "link": "https://stackoverflow.com/users/502144/fdermishin"}, "edited": false, "score": 0, "creation_date": 1552568211, "post_id": 40473860, "comment_id": 97065069, "body": "@fdermishin then use a Long, instead of an Int"}, {"owner": {"reputation": 3167, "user_id": 502144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a14b0afdcd244efec7579d4e8bc64b01?s=128&d=identicon&r=PG", "display_name": "fdermishin", "link": "https://stackoverflow.com/users/502144/fdermishin"}, "reply_to_user": {"reputation": 4476, "user_id": 137507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f56d22d91fdc4f77fa3be933310745e?s=128&d=identicon&r=PG", "display_name": "david.barkhuizen", "link": "https://stackoverflow.com/users/137507/david-barkhuizen"}, "edited": false, "score": 0, "creation_date": 1552571276, "post_id": 40473860, "comment_id": 97067442, "body": "@david.barkhuizen That&#39;s not going to work. <code>Returns the Char with the numeric value equal to this number, truncated to 16 bits if appropriate.</code> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/to-char.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/to-char.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 4476, "user_id": 137507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f56d22d91fdc4f77fa3be933310745e?s=128&d=identicon&r=PG", "display_name": "david.barkhuizen", "link": "https://stackoverflow.com/users/137507/david-barkhuizen"}, "reply_to_user": {"reputation": 3167, "user_id": 502144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a14b0afdcd244efec7579d4e8bc64b01?s=128&d=identicon&r=PG", "display_name": "fdermishin", "link": "https://stackoverflow.com/users/502144/fdermishin"}, "edited": false, "score": 1, "creation_date": 1552632946, "post_id": 40473860, "comment_id": 97092314, "body": "@fdermishin Agreed.  Please see my full answer for a correct solution."}], "tags": [], "owner": {"reputation": 18912, "user_id": 75701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6486e1b09ac33801abd8dae3b166c344?s=128&d=identicon&r=PG", "display_name": "dommer", "link": "https://stackoverflow.com/users/75701/dommer"}, "is_accepted": true, "score": 33, "last_activity_date": 1478549923, "creation_date": 1478549923, "answer_id": 40473860, "question_id": 40473784, "link": "https://stackoverflow.com/questions/40473784/how-to-cast-int-to-char-in-kotlin/40473860#40473860", "title": "How to cast Int to Char in Kotlin", "body": "<p>Use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/to-char.html\" rel=\"noreferrer\"><code>int.toChar()</code></a> function to do it.</p>\n"}, {"comments": [{"owner": {"reputation": 3093, "user_id": 2859957, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b637cd3bccf9798e67e0e97523f81ec3?s=128&d=identicon&r=PG&f=1", "display_name": "treesAreEverywhere", "link": "https://stackoverflow.com/users/2859957/treesareeverywhere"}, "edited": false, "score": 0, "creation_date": 1574730443, "post_id": 55177126, "comment_id": 104326850, "body": "Technically, this solution is for Java using Kotlin, won&#39;t work in native Kotlin."}], "tags": [], "owner": {"reputation": 4476, "user_id": 137507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f56d22d91fdc4f77fa3be933310745e?s=128&d=identicon&r=PG", "display_name": "david.barkhuizen", "link": "https://stackoverflow.com/users/137507/david-barkhuizen"}, "is_accepted": false, "score": -1, "last_activity_date": 1552632796, "creation_date": 1552632796, "answer_id": 55177126, "question_id": 40473784, "link": "https://stackoverflow.com/questions/40473784/how-to-cast-int-to-char-in-kotlin/55177126#55177126", "title": "How to cast Int to Char in Kotlin", "body": "<p>First convert the Int to ByteArray (with the correct byte order) using a ByteBuffer, then use the appropriate String constructor.</p>\n\n<pre><code>import java.nio.ByteBuffer\nimport java.nio.ByteOrder\nimport java.nio.charset.Charset\n\nfun intToByteArray(n: Int, byteOrder: ByteOrder) =\n    ByteBuffer.allocate(4).order(byteOrder).putInt(n).array()\n\nfun byteArrayToUnicode(ba: ByteArray, charSet: Charset) =\n    String(ba, charSet)\n\nfun intToUniCode(n: Int, byteOrder: ByteOrder, charSet: Charset) =\n    byteArrayToUnicode(intToByteArray(n, byteOrder), charSet)\n\nfun test() {\n    val charSet = Charset.forName(\"UTF-32BE\")\n    val n = 0x000000f7 // division sign (U+00F7)\n    val s = intToUniCode(n, ByteOrder.BIG_ENDIAN, charSet)\n    println(s)\n}\n</code></pre>\n"}], "owner": {"reputation": 2626, "user_id": 4495175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zycJD.jpg?s=128&g=1", "display_name": "Letfar", "link": "https://stackoverflow.com/users/4495175/letfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11424, "favorite_count": 3, "accepted_answer_id": 40473860, "answer_count": 2, "score": 20, "last_activity_date": 1552632796, "creation_date": 1478549564, "question_id": 40473784, "link": "https://stackoverflow.com/questions/40473784/how-to-cast-int-to-char-in-kotlin", "title": "How to cast Int to Char in Kotlin", "body": "<p>With Java primitives it was easy to cast char code to symbol</p>\n\n<pre><code>int i = 65;\nchar c = (char) i; // 'A'\n</code></pre>\n\n<p>How to do the same with Kotlin?</p>\n"}, {"tags": ["rx-java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "edited": false, "score": 1, "creation_date": 1478544928, "post_id": 40470589, "comment_id": 68189436, "body": "Thanks. I ran all three and the map method takes the least amount of time for 100000 item list. I&#39;ll put up the runnable code in a separate answer for people to test out if they choose."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1478602709, "last_edit_date": 1478602709, "creation_date": 1478538174, "answer_id": 40470589, "question_id": 40470280, "link": "https://stackoverflow.com/questions/40470280/kolin-list-of-items-to-item-of-lists/40470589#40470589", "title": "Kolin - List of items to item of lists", "body": "<p>One simple solution is to use separate <code>map</code> calls to get <code>xs</code> and <code>ys</code> from your <code>Value</code>s:</p>\n\n<pre><code>fun collectionOf(values: List&lt;Value&gt;) = \n    Collection(values.map { it.x }, \n               values.map { it.y })\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>val values = listOf(Value(1, 2), Value(3, 4))\nval collection = collectionOf(values) // Collection(xs=[1, 3], ys=[2, 4])\n</code></pre>\n\n<p>If you want to do it in a single iteration over the <code>Value</code>s, you can use simple <code>for</code> loop:</p>\n\n<pre><code>fun collectionOf(values: List&lt;Value&gt;) {\n    val xs = mutableListOf&lt;Int&gt;()\n    val ys = mutableListOf&lt;Int&gt;()\n\n    for ((x, y) in values) {\n        xs.add(x)\n        ys.add(y)\n    }\n\n    return Collection(xs, ys)\n} \n</code></pre>\n\n<p>Since <code>Collection</code> contains read-only lists, I don't see a simpler way to construct it than to make the lists first, of course, not considering expressive yet inefficient functional solutions like this one, which copies <code>xs</code> and <code>ys</code> on each iteration:</p>\n\n<pre><code>fun collectionOf(values: List&lt;Value&gt;) = \n    values.fold(Collection(listOf(), listOf())) { acc, it -&gt; \n        Collection(acc.xs + it.x, acc.ys + it.y) \n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "is_accepted": false, "score": 1, "last_activity_date": 1478539144, "creation_date": 1478539144, "answer_id": 40470871, "question_id": 40470280, "link": "https://stackoverflow.com/questions/40470280/kolin-list-of-items-to-item-of-lists/40470871#40470871", "title": "Kolin - List of items to item of lists", "body": "<p>The equivalent of a collector would be a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\">fold</a></p>\n\n<pre><code>val values = listOf(Value(1,2), Value(3,4), Value(5,6))\n\nval collection = \n    values.fold(Collection(listOf(), listOf()))\n    { acum, value -&gt;  Collection(acum.xs + value.x, acum.ys + value.y)}\n\nprintln(collection) // =&gt; Collection(xs=[1, 3, 5], ys=[2, 4, 6])\n</code></pre>\n\n<p>But for this particular case is simpler to just map each position of the touple.</p>\n\n<pre><code>val collection2 = Collection(values.map(Value::x), values.map(Value::y))\nprintln(collection2) // =&gt; Collection(xs=[1, 3, 5], ys=[2, 4, 6])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "is_accepted": false, "score": 0, "last_activity_date": 1478545054, "creation_date": 1478545054, "answer_id": 40472536, "question_id": 40470280, "link": "https://stackoverflow.com/questions/40470280/kolin-list-of-items-to-item-of-lists/40472536#40472536", "title": "Kolin - List of items to item of lists", "body": "<p>I ran all the methods provided in @hotkey's answer and the map method is the fastest. Following is the code I ran:</p>\n\n<pre><code>data class Value(val x : Int, val y: Int)\ndata class Collection(val xs : List&lt;Int&gt;, val ys: List&lt;Int&gt;)\nfun collectionOf(values: List&lt;Value&gt;): Collection {\n    val xs = mutableListOf&lt;Int&gt;()\n    val ys = mutableListOf&lt;Int&gt;()\n\n    for ((x, y) in values) {\n        xs.add(x)\n        ys.add(y)\n    }\n\n    return Collection(xs, ys)\n}\nvar startTime = System.currentTimeMillis()\n(1..100000).map { Value(it * 1, it * 3) }.fold(Collection(listOf(), listOf()), { acc, value -&gt; Collection(acc.xs + value.x, acc.ys + value.y) })\nprintln(\"Fold takes: \" + (System.currentTimeMillis() - startTime))\n\nstartTime = System.currentTimeMillis()\n(1..100000).map { Value(it * 1, it * 3) }.let { Collection(it.map { it.x }, it.map { it.y }) }\nprintln(\"\\nMap takes: \" + (System.currentTimeMillis() - startTime))\n\nstartTime = System.currentTimeMillis()\ncollectionOf((1..100000).map { Value(it * 1, it * 3) })\nprintln(\"\\nCollection takes: \" + (System.currentTimeMillis() - startTime))\n</code></pre>\n\n<p>Sample output is:</p>\n\n<pre><code>Fold takes: 12776\nMap takes: 12\nCollection takes: 29\n</code></pre>\n"}], "owner": {"reputation": 12592, "user_id": 780694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=128&d=identicon&r=PG", "display_name": "Saad Farooq", "link": "https://stackoverflow.com/users/780694/saad-farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 40470589, "answer_count": 3, "score": 3, "last_activity_date": 1478602709, "creation_date": 1478537215, "question_id": 40470280, "link": "https://stackoverflow.com/questions/40470280/kolin-list-of-items-to-item-of-lists", "title": "Kolin - List of items to item of lists", "body": "<p>I have a list of objects that I want to convert to an object of lists of following type</p>\n\n<pre><code>data class Value(val x : Int, val y: Int)\n</code></pre>\n\n<p>to an object of the following type:</p>\n\n<pre><code>data class Collection(val xs : List&lt;Int&gt;, val ys: List&lt;Int&gt;)\n</code></pre>\n\n<p>What I'm looking for is something similar to the <code>collect</code> operator in RxJava or a better way of doing this if possible. Any one have ideas? </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1478532504, "post_id": 40468343, "comment_id": 68181822, "body": "The indentation got messed up. Please make the code readable."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 0, "last_activity_date": 1478532419, "creation_date": 1478532419, "answer_id": 40468778, "question_id": 40468343, "link": "https://stackoverflow.com/questions/40468343/kotlin-extension-bugs/40468778#40468778", "title": "Kotlin extension bugs", "body": "<p>I think plugin 'kotlin-android-extensions' has been discontinued or something. </p>\n\n<p>Please align your build.gradle with <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/using-gradle.html</a></p>\n"}], "owner": {"reputation": 75, "user_id": 4871180, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5e5823e9b4e343b9d27b97e1df63fad7?s=128&d=identicon&r=PG&f=1", "display_name": "Bbeni", "link": "https://stackoverflow.com/users/4871180/bbeni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 40468778, "answer_count": 1, "score": 0, "last_activity_date": 1478532419, "creation_date": 1478531067, "last_edit_date": 1478531678, "question_id": 40468343, "link": "https://stackoverflow.com/questions/40468343/kotlin-extension-bugs", "title": "Kotlin extension bugs", "body": "<p>i have a problem. I got an old project, what wrote in kotlin.It is 1.0.2 version but i got a compiler extension.</p>\n\n<pre><code>java.lang.ClassNotFoundException: com.intellij.util.containers.EmptyIterator\n</code></pre>\n\n<p>And it is the build.gradle app file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'io.fabric'\n\nandroid {\ncompileSdkVersion 23\nbuildToolsVersion \"23.0.3\"\ndefaultConfig {\n    applicationId \"eu.***.**.**\"\n    minSdkVersion 16\n    targetSdkVersion 23\n    versionCode 7\n    versionName \"1.0.13\"\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n proguardFiles getDefaultProguardFile('proguard-android.txt'),  'proguard-rules.pro'   }\n}\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\nlintOptions {\n    disable 'InvalidPackage'\n}\n}\n\ndependencies {\ncompile fileTree(dir: 'libs', include: ['*.jar'])\ncompile('com.thoughtworks.xstream:xstream:1.4.7') {\n    exclude group: 'xmlpull'\n}\ncompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\ncompile('com.crashlytics.sdk.android:crashlytics:2.5.5@aar') {\n    transitive = true;\n}\ntestCompile 'junit:junit:4.12'\ntestCompile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\ntestCompile 'org.powermock:powermock-module-junit4:1.6.4'\ntestCompile 'org.powermock:powermock-api-mockito:1.6.4'\ncompile 'com.android.support:appcompat-v7:23.4.0'\ncompile 'com.android.support:design:23.4.0'\ncompile 'com.android.support:recyclerview-v7:23.4.0'\ncompile 'com.j256.ormlite:ormlite-android:4.+'\ncompile 'com.github.buchandersenn:android-permission-manager:1.0.0'\ncompile 'com.squareup.retrofit2:retrofit:2.0.0'\ncompile 'com.squareup.okhttp:okhttp:2.5.0'\ncompile 'com.squareup.retrofit2:converter-gson:2.0.0'\ncompile 'com.squareup.picasso:picasso:2.5.2'\ncompile 'com.google.android.gms:play-services-maps:9.0.0'\ncompile 'com.commonsware.cwac:cam2:0.5.6'\ncompile 'com.github.bumptech.glide:glide:3.7.0'\n}\nbuildscript {\next.kotlin_version = '1.0.2'\nrepositories {\n    mavenCentral()\n    maven { url 'https://maven.fabric.io/public' }\n}\ndependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath 'io.fabric.tools:gradle:1.+'\n}\n}\nrepositories {\nmavenCentral()\nmaven { url 'https://maven.fabric.io/public' }\nmaven { url \"https://s3.amazonaws.com/repo.commonsware.com\" }\n}\n</code></pre>\n\n<p>If I add 1.0.4 version of kotlin i got this :\nUnresolved reference: brickred\nimport org.brickred.socialauth.android.SocialAuthAdapter</p>\n\n<p>I have to modify this app, but i can't compile it.I spend 2 days for compile , so I need help. Thank you for help.</p>\n"}, {"tags": ["arrays", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 6, "creation_date": 1478521453, "post_id": 40463707, "comment_id": 68174451, "body": "Another allocation-efficient implementation: <code>fun Array&lt;BooleanArray&gt;.copy() = Array(size) { get(it).clone() }</code>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 12, "last_activity_date": 1478523478, "last_edit_date": 1478523478, "creation_date": 1478516879, "answer_id": 40463707, "question_id": 40463390, "link": "https://stackoverflow.com/questions/40463390/how-to-copy-a-two-dimensional-array-in-kotlin/40463707#40463707", "title": "How to copy a two-dimensional array in Kotlin?", "body": "<p>You can make use of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-cloneable/\" rel=\"noreferrer\"><code>clone</code></a> like so:</p>\n\n<pre><code>fun Array&lt;BooleanArray&gt;.copy() = map { it.clone() }.toTypedArray()\n</code></pre>\n\n<p>or if you'd like to save some allocations:</p>\n\n<pre><code>fun Array&lt;BooleanArray&gt;.copy() = arrayOfNulls&lt;ByteArray&gt;(size).let { copy -&gt;\n    forEachIndexed { i, bytes -&gt; copy[i] = bytes.clone() }\n    copy\n} as Array&lt;BooleanArray&gt;\n</code></pre>\n\n<p>or even more concise as suggested by <a href=\"https://stackoverflow.com/users/2196460/hotkey\">@hotkey</a>:</p>\n\n<pre><code>fun Array&lt;BooleanArray&gt;.copy() = Array(size) { get(it).clone() }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3056, "user_id": 586229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/fWSco.png?s=128&g=1", "display_name": "hoijui", "link": "https://stackoverflow.com/users/586229/hoijui"}, "edited": false, "score": 6, "creation_date": 1533329562, "post_id": 48851423, "comment_id": 90323147, "body": "the sample code in the question indicates that a deep copy is required. this code creates a shallow copy."}], "tags": [], "owner": {"reputation": 9, "user_id": 9376672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qDWMRIVHBN8/AAAAAAAAAAI/AAAAAAAAR9E/otSJ8pt28Yw/photo.jpg?sz=128", "display_name": "mxcoder", "link": "https://stackoverflow.com/users/9376672/mxcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1518955330, "creation_date": 1518955330, "answer_id": 48851423, "question_id": 40463390, "link": "https://stackoverflow.com/questions/40463390/how-to-copy-a-two-dimensional-array-in-kotlin/48851423#48851423", "title": "How to copy a two-dimensional array in Kotlin?", "body": "<p>What about using <code>copyOf()</code>?</p>\n\n<pre><code>val copyOfArray = array.copyOf()\n</code></pre>\n\n<blockquote>\n  <p>Returns new array which is a copy of the original array</p>\n</blockquote>\n\n<p>Reference <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/copy-of.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4145, "favorite_count": 1, "accepted_answer_id": 40463707, "answer_count": 2, "score": 10, "last_activity_date": 1518955330, "creation_date": 1478515951, "question_id": 40463390, "link": "https://stackoverflow.com/questions/40463390/how-to-copy-a-two-dimensional-array-in-kotlin", "title": "How to copy a two-dimensional array in Kotlin?", "body": "<p>This method works fine.  However, I think it is not functional.  </p>\n\n<pre><code>fun getCopy(array: Array&lt;BooleanArray&gt;): Array&lt;BooleanArray&gt; {\n    val copy = Array(array.size) { BooleanArray(array[0].size) { false } }\n    for (i in array.indices) {\n        for (j in array[i].indices) {\n            copy[i][j] = array[i][j]\n        }\n    }\n    return copy\n}\n</code></pre>\n\n<p>Is there a more functional way?</p>\n"}, {"tags": ["android", "retrofit", "kotlin", "threetenbp"], "answers": [{"tags": [], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "is_accepted": false, "score": 1, "last_activity_date": 1478498725, "creation_date": 1478498725, "answer_id": 40458771, "question_id": 40456566, "link": "https://stackoverflow.com/questions/40456566/how-to-deserialize-threeten-localdatetime-in-retrofit/40458771#40458771", "title": "How to deserialize ThreeTen LocalDateTime in Retrofit?", "body": "<p>Add this gradle first </p>\n\n<pre><code> compile 'com.google.code.gson:gson:2.8.0'\n</code></pre>\n\n<p>Then add this class to hold the json response,</p>\n\n<pre><code>public class DemoResponse {\n@com.google.gson.annotations.SerializedName(\"id\")\npublic int id;\n@com.google.gson.annotations.SerializedName(\"value\")\npublic double value;\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic double getValue() {\n    return value;\n}\n\npublic void setValue(double value) {\n    this.value = value;\n}\n\npublic Datetime getDatetime() {\n    return datetime;\n}\n\npublic void setDatetime(Datetime datetime) {\n    this.datetime = datetime;\n}\n\n@com.google.gson.annotations.SerializedName(\"dateTime\")\npublic Datetime datetime;\n\npublic static class Chronology {\n    @com.google.gson.annotations.SerializedName(\"id\")\n    public String id;\n    @com.google.gson.annotations.SerializedName(\"calendarType\")\n    public String calendartype;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getCalendartype() {\n        return calendartype;\n    }\n\n    public void setCalendartype(String calendartype) {\n        this.calendartype = calendartype;\n    }\n}\n\npublic static class Datetime {\n    @com.google.gson.annotations.SerializedName(\"hour\")\n    public int hour;\n    @com.google.gson.annotations.SerializedName(\"minute\")\n    public int minute;\n    @com.google.gson.annotations.SerializedName(\"second\")\n    public int second;\n    @com.google.gson.annotations.SerializedName(\"nano\")\n    public int nano;\n    @com.google.gson.annotations.SerializedName(\"dayOfYear\")\n    public int dayofyear;\n    @com.google.gson.annotations.SerializedName(\"dayOfWeek\")\n    public String dayofweek;\n    @com.google.gson.annotations.SerializedName(\"month\")\n    public String month;\n    @com.google.gson.annotations.SerializedName(\"dayOfMonth\")\n    public int dayofmonth;\n    @com.google.gson.annotations.SerializedName(\"year\")\n    public int year;\n    @com.google.gson.annotations.SerializedName(\"monthValue\")\n    public int monthvalue;\n    @com.google.gson.annotations.SerializedName(\"chronology\")\n    public Chronology chronology;\n\n    public int getHour() {\n        return hour;\n    }\n\n    public void setHour(int hour) {\n        this.hour = hour;\n    }\n\n    public int getMinute() {\n        return minute;\n    }\n\n    public void setMinute(int minute) {\n        this.minute = minute;\n    }\n\n    public int getSecond() {\n        return second;\n    }\n\n    public void setSecond(int second) {\n        this.second = second;\n    }\n\n    public int getNano() {\n        return nano;\n    }\n\n    public void setNano(int nano) {\n        this.nano = nano;\n    }\n\n    public int getDayofyear() {\n        return dayofyear;\n    }\n\n    public void setDayofyear(int dayofyear) {\n        this.dayofyear = dayofyear;\n    }\n\n    public String getDayofweek() {\n        return dayofweek;\n    }\n\n    public void setDayofweek(String dayofweek) {\n        this.dayofweek = dayofweek;\n    }\n\n    public String getMonth() {\n        return month;\n    }\n\n    public void setMonth(String month) {\n        this.month = month;\n    }\n\n    public int getDayofmonth() {\n        return dayofmonth;\n    }\n\n    public void setDayofmonth(int dayofmonth) {\n        this.dayofmonth = dayofmonth;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n\n    public int getMonthvalue() {\n        return monthvalue;\n    }\n\n    public void setMonthvalue(int monthvalue) {\n        this.monthvalue = monthvalue;\n    }\n\n    public Chronology getChronology() {\n        return chronology;\n    }\n\n    public void setChronology(Chronology chronology) {\n        this.chronology = chronology;\n    }\n    }\n    }\n</code></pre>\n\n<p>Then you can assign the response from retrofit to the object of this class, and retrieve the values using the setters.</p>\n"}, {"tags": [], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "is_accepted": true, "score": 1, "last_activity_date": 1478704413, "creation_date": 1478704413, "answer_id": 40510249, "question_id": 40456566, "link": "https://stackoverflow.com/questions/40456566/how-to-deserialize-threeten-localdatetime-in-retrofit/40510249#40510249", "title": "How to deserialize ThreeTen LocalDateTime in Retrofit?", "body": "<p>Bsed on Manoj Frekzz answer, I found my solution...</p>\n\n<p>First I created a DateTimeDto.</p>\n\n<pre><code>data class DateTimeDto(val dayOfYear : Int, val dayOfWeek : String, val month : String, val dayOfMonth : Int,\n                       val year : Int, val monthValue : Int, val hour : Int, val minute : Int, val second : Int,\n                       val nano : Int, val chronology : Chronology)\n\n\n\nfun toDateTime () : LocalDateTime{\n     return LocalDateTime.of(year, monthValue, dayOfMonth, hour, minute)\n}\n</code></pre>\n\n<p>And I changed the signature of the interface from:</p>\n\n<pre><code>@GET(\"trashCan\")\n\nfun getLocalDateTime() : Observable&lt;List&lt;LocalDateTime&gt;&gt;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>@GET(\"trashCan\")\n\nfun getLocalDateTime() : Observable&lt;List&lt;DateTimeDto&gt;&gt;\n</code></pre>\n\n<p>Then, in my Observer I did that:</p>\n\n<pre><code>ServiceGenerator.createService(ApiClient::class.java)\n                .getLocalDateTime\n                .map { it.map { it.toLocalDateTime() } }\n</code></pre>\n\n<p>And it worked just fine... It would be nicer if I Retrofit could deserialize it automatically, but this is a good workaround</p>\n"}], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 1, "accepted_answer_id": 40510249, "answer_count": 2, "score": 3, "last_activity_date": 1478704413, "creation_date": 1478482308, "question_id": 40456566, "link": "https://stackoverflow.com/questions/40456566/how-to-deserialize-threeten-localdatetime-in-retrofit", "title": "How to deserialize ThreeTen LocalDateTime in Retrofit?", "body": "<p>I'm trying to deserialise this class in Retrofit:</p>\n\n<pre><code>data class Measurement(val id: Long, val value: Float, val dateTime: LocalDateTime, val trashCanId: Long) : Parcelable {\n    companion object {\n        @JvmField val CREATOR: Parcelable.Creator&lt;Measurement&gt; = object : Parcelable.Creator&lt;Measurement&gt; {\n            override fun createFromParcel(source: Parcel): Measurement = Measurement(source)\n            override fun newArray(size: Int): Array&lt;Measurement?&gt; = arrayOfNulls(size)\n        }\n    }\n\n    constructor(source: Parcel) : this(source.readLong(), source.readFloat(), source.readSerializable() as LocalDateTime, source.readLong())\n\n    override fun describeContents() = 0\n\n    override fun writeToParcel(dest: Parcel?, flags: Int) {\n        dest?.writeLong(id)\n        dest?.writeFloat(value)\n        dest?.writeSerializable(dateTime)\n        dest?.writeLong(trashCanId)\n    }\n\n}\n</code></pre>\n\n<p>As you can see, I'm using LocalDateTime, it's from ThreeTen. Well, I receive this from my server</p>\n\n<pre><code>    {\n        \"id\": 1,\n        \"value\": 50.6,\n        \"dateTime\": {\n          \"hour\": 2,\n          \"minute\": 6,\n          \"second\": 9,\n          \"nano\": 0,\n          \"dayOfYear\": 308,\n          \"dayOfWeek\": \"THURSDAY\",\n          \"month\": \"NOVEMBER\",\n          \"dayOfMonth\": 3,\n          \"year\": 2016,\n          \"monthValue\": 11,\n          \"chronology\": {\n            \"id\": \"ISO\",\n            \"calendarType\": \"iso8601\"\n          }\n        }\n      }\n</code></pre>\n\n<p>Well, but my dateTime is always <em>Null</em> so I believe that Retrofit doesnt know how parse the Data, or am I missing something?</p>\n\n<p>Is there any good workaround? </p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["java", "scala", "maven", "groovy", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 2015475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ecd0c4a15e45082bf606c41e3ab7b?s=128&d=identicon&r=PG", "display_name": "PermaFrost", "link": "https://stackoverflow.com/users/2015475/permafrost"}, "is_accepted": false, "score": 0, "last_activity_date": 1478370481, "creation_date": 1478370481, "answer_id": 40441735, "question_id": 40441466, "link": "https://stackoverflow.com/questions/40441466/local-java-package-management-system-in-python-pip-style/40441735#40441735", "title": "Local Java package management system in Python PIP style?", "body": "<p>I can't judge the Groovy landscape since I don't have any experience there, but for developing Java or Scala applications this exact workflow is not possible as far as I know.</p>\n\n<p>Regarding \"I only want to have import statements...\" I think the closest you can get is good Maven/Gradle/sbt integration in an IDE, like IntelliJ that automatically adds the desired library to your build system's configuration file when using the correct shortcut. It (at least) works for some Java libraries when you're dealing with a Maven project in IntelliJ.</p>\n\n<p>And regarding your other wish to have packages automatically included when compiling: On the JVM there is the concept of the fat JAR (also called uber JAR), which is basically a JAR (Java archive) that contains all dependencies and is thus self-contained. Usually you can start the application contained in it with a single <code>java</code> command. </p>\n\n<p>To build fat JARs you need to have the approriate plugin for your build system:</p>\n\n<ul>\n<li>For Maven that would be the <em>maven shade plugin</em>, see <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-shade-plugin/</a> </li>\n<li>For sbt you can use the <em>assembly plugin</em>, see <a href=\"https://github.com/sbt/sbt-assembly\" rel=\"nofollow noreferrer\">https://github.com/sbt/sbt-assembly</a></li>\n<li>Gradle probably has something similar</li>\n<li>A lot of Java frameworks also come with their own build plugins that make building such self-contained applications relatively simple (<a href=\"https://projects.spring.io/spring-boot/\" rel=\"nofollow noreferrer\">Spring Boot</a> is one example, but only suitable for applications that on top of an HTTP server)</li>\n</ul>\n\n<p>Hope this helps, althought it's not an accurate answer to your question. :)</p>\n"}, {"tags": [], "owner": {"reputation": 13600, "user_id": 563890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b85591557f0790a67899687c71fc406?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/563890/will"}, "is_accepted": true, "score": 2, "last_activity_date": 1478370918, "creation_date": 1478370918, "answer_id": 40441802, "question_id": 40441466, "link": "https://stackoverflow.com/questions/40441466/local-java-package-management-system-in-python-pip-style/40441802#40441802", "title": "Local Java package management system in Python PIP style?", "body": "<p>The closest I can think is <a href=\"http://docs.groovy-lang.org/latest/html/documentation/grape.html\" rel=\"nofollow noreferrer\">Grape</a>:</p>\n\n<blockquote>\n  <p>Grape is a JAR dependency manager embedded into Groovy. Grape lets you quickly add maven repository dependencies to your classpath, making scripting even easier. The simplest use is as simple as adding an annotation to your script:</p>\n</blockquote>\n\n<pre><code>@Grab(group='org.springframework', module='spring-orm', version='3.2.5.RELEASE')\nimport org.springframework.jdbc.core.JdbcTemplate\n</code></pre>\n\n<p>Like in <a href=\"https://gist.github.com/lyhcode/4387321\" rel=\"nofollow noreferrer\">this example</a>:</p>\n\n<pre><code>@Grab('net.sourceforge.nekohtml:nekohtml:1.9.16')\ndef parser = new org.cyberneko.html.parsers.SAXParser()\ndef page = new XmlParser(parser).parse('https://news.google.com/nwshp?hl=zh-TW&amp;tab=wn')\npage.depthFirst().DIV.grep{ it.'@class'=='title' }.each {\n  println it.A.SPAN.text()\n}\n</code></pre>\n"}], "owner": {"reputation": 910, "user_id": 776847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tA7sK.jpg?s=128&g=1", "display_name": "Gerhard Hagerer", "link": "https://stackoverflow.com/users/776847/gerhard-hagerer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "accepted_answer_id": 40441802, "answer_count": 2, "score": 1, "last_activity_date": 1478370918, "creation_date": 1478368762, "question_id": 40441466, "link": "https://stackoverflow.com/questions/40441466/local-java-package-management-system-in-python-pip-style", "title": "Local Java package management system in Python PIP style?", "body": "<p>I want to program in Java or other JVM languages like Scala, Kotlin, or Groovy. When I am programming on my projects, I only want to have import statements in my Java/Scala/Kotlin source files without the need to state the packages a second time in a Gradle/Maven build script. Instead I want to work as I would do in Python, i.e. have my import statements at the beginning of my source files and I am done. </p>\n\n<p>The packages should then automatically included when I am compiling if all packages are installed in a central local package management system or otherwise get an error message telling me that I have to install a missing package. It should essentially work the same as for Python and PIP respectively.</p>\n\n<p>Is a workflow like this possible preferably with Groovy or Maven?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8345, "user_id": 2032561, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/J7ULL.jpg?s=128&g=1", "display_name": "Bharatesh", "link": "https://stackoverflow.com/users/2032561/bharatesh"}, "edited": false, "score": 0, "creation_date": 1515994931, "post_id": 40438571, "comment_id": 83497573, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin\">Getters and Setters in Kotlin</a>"}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 2015751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29d0313be56df012c70064c768046964?s=128&d=identicon&r=PG", "display_name": "daemontus", "link": "https://stackoverflow.com/users/2015751/daemontus"}, "edited": false, "score": 0, "creation_date": 1478880672, "post_id": 40438572, "comment_id": 68342131, "body": "I know that it&#39;s not exactly beginner friendly, but I would also highly recommend using the Kotlin bytecode inspector in case of some more complex property-related features, like Delegated properties."}, {"owner": {"reputation": 6655, "user_id": 945034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/693380f79095fd9d986297968b573226?s=128&d=identicon&r=PG", "display_name": "Kumar Sambhav", "link": "https://stackoverflow.com/users/945034/kumar-sambhav"}, "edited": false, "score": 0, "creation_date": 1495858705, "post_id": 40438572, "comment_id": 75437808, "body": "for someStr0 prop, getters and setter what is their visibility scope ? in this example all properties are public ( default) . Will this exmple work if I have private properties - something I am used to being a Java dev."}, {"owner": {"reputation": 1561, "user_id": 5675550, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/32d235ef85493874f9a25aaa8d1f58c4?s=128&d=identicon&r=PG&f=1", "display_name": "viper", "link": "https://stackoverflow.com/users/5675550/viper"}, "edited": false, "score": 0, "creation_date": 1504156462, "post_id": 40438572, "comment_id": 78906095, "body": "How can I use <code>getter</code> and <code>setter</code> for private variables"}, {"owner": {"reputation": 1369, "user_id": 6525347, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4NZOi.gif?s=128&g=1", "display_name": "thelearner", "link": "https://stackoverflow.com/users/6525347/thelearner"}, "edited": false, "score": 0, "creation_date": 1505727759, "post_id": 40438572, "comment_id": 79514974, "body": "Thanks, helped me."}], "tags": [], "owner": {"reputation": 835, "user_id": 5539487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f510c791ab135e9e10d8427e2d22a711?s=128&d=identicon&r=PG&f=1", "display_name": "Vince", "link": "https://stackoverflow.com/users/5539487/vince"}, "is_accepted": false, "score": 20, "last_activity_date": 1478444814, "last_edit_date": 1478444814, "creation_date": 1478351070, "answer_id": 40438572, "question_id": 40438571, "link": "https://stackoverflow.com/questions/40438571/kotlin-understanding-getters-and-setters/40438572#40438572", "title": "Kotlin - Understanding Getters and Setters", "body": "<p>This has been answered in a few places, but I thought that I would share a concrete example for people transitioning to Kotlin from Java/C#/C/C++, and who had the same question that I did:</p>\n\n<p>I was having difficulty in understanding how getters and setters worked in Kotlin, especially as they were never explicitly called (as they are in Java). Because of this, I was feeling uncomfortable, as it looked like we were just directly referring to the vars/vals as fields. So I set out a little experiment to demonstrate that this is not the case, and that in fact it is the implicit (auto-generated) or explicit getter/setter that is called in Kotlin when you access a variable/value. The difference is, you don't explicitly ask for the default getter/setter.</p>\n\n<p>From the <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">documentation</a> - the full syntax for declaring a property is:</p>\n\n<pre><code>var &lt;propertyName&gt;: &lt;PropertyType&gt; [= &lt;property_initializer&gt;]\n   [&lt;getter&gt;]\n   [&lt;setter&gt;]\n</code></pre>\n\n<p>And my example is</p>\n\n<pre><code>class modifiersEg {\n\n/** this will not compile unless:\n *      - we assign a default here\n *      - init it in the (or all, if multiple) constructor\n *      - insert the lateinit keyword    */\nvar someNum: Int?\nvar someStr0: String = \"hello\"\nvar someStr1: String = \"hello\"\n    get() = field  // field is actually this.someStr1, and 'this' is your class/obj instance\n    set(value) { field = value }\n\n// kotlin actually creates the same setters and getters for someStr0\n// as we explicitly created for someStr1\n\nvar someStr2: String? = \"inital val\"\n    set(value) { field = \"ignore you\" }\n\nvar someStr3: String = \"inital val\"\n    get() = \"you'll never know what this var actually contains\"\n\ninit {\n    someNum = 0\n\n    println(someStr2) // should print \"inital val\"\n\n    someStr2 = \"blah blah blah\"\n    println(someStr2) // should print \"ignore you\"\n\n    println(someStr3) // should print \"you'll never know what this var actually contains\"\n}\n</code></pre>\n\n<p>I hope that helps to bring it all together for some others?</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 6471998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eq5kh.jpg?s=128&g=1", "display_name": "Ricky Padilla", "link": "https://stackoverflow.com/users/6471998/ricky-padilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1599062050, "creation_date": 1599062050, "answer_id": 63709134, "question_id": 40438571, "link": "https://stackoverflow.com/questions/40438571/kotlin-understanding-getters-and-setters/63709134#63709134", "title": "Kotlin - Understanding Getters and Setters", "body": "<p>Here are some real world examples of custom getters and setters. <a href=\"https://medium.com/@rickycpadilla/kotlin-property-getters-and-setters-17ffb5a71b98\" rel=\"nofollow noreferrer\">You can see more here</a>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Custom getter example\nval friendlyDescription get(): String {\n    val isNeighborhood = district != null\n    var description = if (isNeighborhood) &quot;Neighborhood&quot; else &quot;City&quot;\n    description += &quot; in&quot;\n    if (isNeighborhood) {\n        description += &quot; $city,&quot;\n    }\n    province?.let {\n        if (it.isNotEmpty()) {\n            description += &quot; $it,&quot;\n        }\n    }\n    description += &quot; $country&quot;\n    return description\n}\n\nprint(myLocation.friendlyDescription) // &quot;Neighborhood in Denver, Colorado, United States&quot;\n\n// Custom setter example\nenum class SearchResultType {\n    HISTORY, SAVED, BASIC\n}\n\nprivate lateinit var resultTypeString: String\n\nvar resultType: SearchResultType\n    get() {\n        return enumValueOf(resultTypeString)\n    }\n    set(value) {\n        resultTypeString = value.toString()\n    }\n\nresult.resultType = SearchResultType.HISTORY\nprint(result.resultTypeString) // &quot;HISTORY&quot;\n\n</code></pre>\n"}], "owner": {"reputation": 835, "user_id": 5539487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f510c791ab135e9e10d8427e2d22a711?s=128&d=identicon&r=PG&f=1", "display_name": "Vince", "link": "https://stackoverflow.com/users/5539487/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8018, "favorite_count": 1, "answer_count": 2, "score": 11, "last_activity_date": 1599062050, "creation_date": 1478351070, "question_id": 40438571, "link": "https://stackoverflow.com/questions/40438571/kotlin-understanding-getters-and-setters", "title": "Kotlin - Understanding Getters and Setters", "body": "<p>Kotlin auto-generates it's getters and settings, but I never refer to them? Also, what is the correct way to write a custom getter/setter in Kotlin? When I say <code>myObj.myVar = 99</code> I feel like <code>myVar</code> is a public field of <code>myObj</code> that I'm accessing directly? What is actually happening here?</p>\n"}, {"tags": ["algorithm", "kotlin"], "comments": [{"owner": {"reputation": 3385, "user_id": 5701085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbsOs.jpg?s=128&g=1", "display_name": "Asad Ali Choudhry", "link": "https://stackoverflow.com/users/5701085/asad-ali-choudhry"}, "edited": false, "score": 0, "creation_date": 1587420499, "post_id": 40430297, "comment_id": 108500932, "body": "If someone is looking for consecutive characters to remove then visit <a href=\"https://handyopinion.com/method-to-remove-consecutive-characters-from-a-string-in-kotlin-android/\" rel=\"nofollow noreferrer\">handyopinion.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 5, "creation_date": 1478529649, "post_id": 40430451, "comment_id": 68179745, "body": "You can also use <code>toSet</code> or <code>toMutableSet</code> which have less overhead than <code>distinct</code> and if ordering does not matter you can use <code>toHashSet</code>."}, {"owner": {"reputation": 253, "user_id": 3036659, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CNTQF.jpg?s=128&g=1", "display_name": "Buckstabue", "link": "https://stackoverflow.com/users/3036659/buckstabue"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1546804988, "post_id": 40430451, "comment_id": 94963954, "body": "@mfulton26, certainly it doesn&#39;t always have overhead. E.g. a JPA entity object can have lazy loaded fields, so it&#39;s more efficient to distinct its collection by id than perform full comparison"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 253, "user_id": 3036659, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CNTQF.jpg?s=128&g=1", "display_name": "Buckstabue", "link": "https://stackoverflow.com/users/3036659/buckstabue"}, "edited": false, "score": 0, "creation_date": 1546882626, "post_id": 40430451, "comment_id": 94991725, "body": "@Buckstabue if you only need a Collection back (and it doesn&#39;t matter if it is a List or a Set) then using a Collection optimized for unique elements will be more efficient. The current implementation of distinct uses toMutableSet() in its implementation and then converts it to a List so by using toSet et. al. directly you avoid the extra intermediary Collection instance (<a href=\"https://github.com/JetBrains/kotlin/blob/90c787e1023554bd0bc435071a78b9986f001068/libraries/stdlib/common/src/generated/_Arrays.kt#L9148-L9155\" rel=\"nofollow noreferrer\">kotlin/_Arrays.kt:9145-9155 at master &#183; JetBrains/kotlin</a>)."}, {"owner": {"reputation": 253, "user_id": 3036659, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CNTQF.jpg?s=128&g=1", "display_name": "Buckstabue", "link": "https://stackoverflow.com/users/3036659/buckstabue"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1546986471, "post_id": 40430451, "comment_id": 95034161, "body": "@mfulton26, please re-read my comment. I said &quot;it is NOT ALWAYS efficient&quot; and gave you an example where .distinctBy{  } can be useful. Sometimes calling equals() and hashCode() is a very expensive thing"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 253, "user_id": 3036659, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CNTQF.jpg?s=128&g=1", "display_name": "Buckstabue", "link": "https://stackoverflow.com/users/3036659/buckstabue"}, "edited": false, "score": 3, "creation_date": 1547041756, "post_id": 40430451, "comment_id": 95055330, "body": "@Buckstabue I see, I believe we&#39;re talking about two different issues: 1) <code>to*Set</code> is more efficient (space &amp; time) than <code>distinct[By]</code> because it returns the <code>Set</code> directly instead of using a <code>Set</code> internally and converting it to a <code>List</code> as its return value and 2) <code>distinctBy</code> is can be more efficient than <code>distinct</code> simply because you can avoid full object equality comparison. Both are valid points. I ran with your statement that &quot;certainly it doesn&#39;t always have overhead&quot; and I was replying to that and overlooked that you were comparing <code>distinct</code> with <code>distinctBy</code> (and not with <code>to*Set</code>)."}, {"owner": {"reputation": 253, "user_id": 3036659, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/CNTQF.jpg?s=128&g=1", "display_name": "Buckstabue", "link": "https://stackoverflow.com/users/3036659/buckstabue"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1547109570, "post_id": 40430451, "comment_id": 95080815, "body": "@mfulton26, you are correct. I mostly meant that sometimes it&#39;s better to use List + distinctBy than Set, because Set intensively use equals/hashCode which potentially might be expensive to call"}, {"owner": {"reputation": 1666, "user_id": 6007104, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bc074e0985a2e9388569b5d030bbda19?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6007104/luke"}, "edited": false, "score": 3, "creation_date": 1585578641, "post_id": 40430451, "comment_id": 107802305, "body": "At time of writing, <code>Iterable.distinct</code> actually does <code>toMutableSet().toList()</code> internally. So don&#39;t worry about performance :-)"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1666, "user_id": 6007104, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bc074e0985a2e9388569b5d030bbda19?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6007104/luke"}, "edited": false, "score": 0, "creation_date": 1585580191, "post_id": 40430451, "comment_id": 107803237, "body": "@Luke, using <code>.toHashSet()</code> should be a little faster than <code>.toMutableSet()</code> or <code>.toSet()</code>, as those create a linked hash set, which has additional links between the elements, consuming a little more time to construct than an ordinary hash set. And also, <code>.toHashSet()</code> or <code>.toSet()</code> don&#39;t spend time converting the result back to a list. But except for hot, performance-critical code, the difference should be negligible."}, {"owner": {"reputation": 13314, "user_id": 1760984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IcBXx.jpg?s=128&g=1", "display_name": "aldok", "link": "https://stackoverflow.com/users/1760984/aldok"}, "edited": false, "score": 0, "creation_date": 1603247644, "post_id": 40430451, "comment_id": 113974267, "body": "Please note that <code>distinct</code> or <code>toSet</code> won&#39;t work on a list of arrays. I.e List of ByteArray or List of CharArray"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 251, "last_activity_date": 1478533755, "last_edit_date": 1495540473, "creation_date": 1478287770, "answer_id": 40430451, "question_id": 40430297, "link": "https://stackoverflow.com/questions/40430297/kotlin-idiomatic-way-to-remove-duplicate-strings-from-array/40430451#40430451", "title": "Kotlin - Idiomatic way to remove duplicate strings from array?", "body": "<p>Use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/distinct.html\" rel=\"noreferrer\"><code>distinct</code> extension function</a>:</p>\n\n<pre><code>val a = arrayOf(\"a\", \"a\", \"b\", \"c\", \"c\")\nval b = a.distinct() // [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>There's also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/distinct-by.html\" rel=\"noreferrer\"><code>distinctBy</code> function</a> that allows one to specify how to distinguish the items:</p>\n\n<pre><code>val a = listOf(\"a\", \"b\", \"ab\", \"ba\", \"abc\")\nval b = a.distinctBy { it.length } // [\"a\", \"ab\", \"abc\"]\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/users/3255152/mfulton26\">@mfulton26</a> suggested, you can also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-set.html\" rel=\"noreferrer\"><code>toSet</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-mutable-set.html\" rel=\"noreferrer\"><code>toMutableSet</code></a> and, if you don't need the original ordering to be preserved, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/to-hash-set.html\" rel=\"noreferrer\"><code>toHashSet</code></a>. These functions produce a <code>Set</code> instead of a <code>List</code> and should be a little bit more efficient than <code>distinct</code>.</p>\n\n<hr>\n\n<p>You may find useful:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/idioms.html\" rel=\"noreferrer\">Kotlin idioms</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr\">What Java 8 Stream.collect equivalents are available in the standard Kotlin library?</a></li>\n</ul>\n"}], "owner": {"reputation": 5747, "user_id": 1052504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d24c555de0ab090f0b822155f31affe4?s=128&d=identicon&r=PG", "display_name": "jturolla", "link": "https://stackoverflow.com/users/1052504/jturolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59138, "favorite_count": 11, "accepted_answer_id": 40430451, "answer_count": 1, "score": 134, "last_activity_date": 1478533755, "creation_date": 1478287125, "question_id": 40430297, "link": "https://stackoverflow.com/questions/40430297/kotlin-idiomatic-way-to-remove-duplicate-strings-from-array", "title": "Kotlin - Idiomatic way to remove duplicate strings from array?", "body": "<p>How to remove duplicates from an <code>Array&lt;String?&gt;</code> in kotlin?</p>\n"}, {"tags": ["android", "rx-java", "kotlin", "retrofit2", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "edited": false, "score": 1, "creation_date": 1478282869, "post_id": 40428685, "comment_id": 68106799, "body": "It works, thanks! I have an additional question: Is there any better way to achieve the same goal? (The only thing I need to do is to get the <code>user</code> field from the original JSON.)"}], "tags": [], "owner": {"reputation": 3690, "user_id": 1137789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2218f21b85cbbe41f351bf762db08352?s=128&d=identicon&r=PG", "display_name": "Praveer Gupta", "link": "https://stackoverflow.com/users/1137789/praveer-gupta"}, "is_accepted": true, "score": 5, "last_activity_date": 1478280812, "creation_date": 1478280812, "answer_id": 40428685, "question_id": 40427317, "link": "https://stackoverflow.com/questions/40427317/moshis-custom-adapter-with-rxandroid-retrofit-kotlin/40428685#40428685", "title": "Moshi&#39;s Custom Adapter with RxAndroid &amp; Retrofit &amp; Kotlin", "body": "<p>You can solve the problem by changing your code to do something like below. </p>\n\n<p>Basically in your case when the <code>UserAdapter</code> is registered, it tells moshi that it can create a <code>User</code> only from <code>UserJson</code> object. Hence Moshi does not recognize the JSON object with keyword <code>user</code>.</p>\n\n<p>By adding an indirection in form of <code>User1</code> (please pardon the naming convention), the <code>UserJson</code> is created properly with <code>User1</code> from JSON.</p>\n\n<pre><code>class User(var username: String)\n\nclass User1(var username: String) // I introduced this class\nclass UserJson(var message: String, var user: User1) // changed User to User1\n\nclass UserAdapter {\n    @FromJson fun fromJson(userJson: UserJson): User {\n        println(\"message = ${userJson.message}\")        \n        println(\"user = ${userJson.user}\")              \n        return User(userJson.user.username)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "edited": false, "score": 0, "creation_date": 1478318673, "post_id": 40432796, "comment_id": 68117383, "body": "Just saw some related issues in Moshi&#39;s GitHub page (#182 #176 #113). Thanks so much for your Moshi-Lazy-Adapters!"}, {"owner": {"reputation": 1799, "user_id": 2670074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0796aa15bb9b968d8e0a54e8542301?s=128&d=identicon&r=PG", "display_name": "isanjosgon", "link": "https://stackoverflow.com/users/2670074/isanjosgon"}, "edited": false, "score": 0, "creation_date": 1512495703, "post_id": 40432796, "comment_id": 82277857, "body": "Just to complement the answer, you should define the Adapter like this &quot;.addConverterFactory(MoshiConverterFactory.create(Moshi.Bui&zwnj;&#8203;lder().add(Wrapped.A&zwnj;&#8203;DAPTER_FACTORY).buil&zwnj;&#8203;d()))&quot; in the retrofit builder. And if you need a deeper path &quot;@Wrapped(path = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])&quot;"}], "tags": [], "owner": {"reputation": 4140, "user_id": 1338307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12a9e1bb7bdaaf97f8209a4b380fcf54?s=128&d=identicon&r=PG", "display_name": "Serj Lotutovici", "link": "https://stackoverflow.com/users/1338307/serj-lotutovici"}, "is_accepted": false, "score": 5, "last_activity_date": 1605693829, "last_edit_date": 1605693829, "creation_date": 1478300073, "answer_id": 40432796, "question_id": 40427317, "link": "https://stackoverflow.com/questions/40427317/moshis-custom-adapter-with-rxandroid-retrofit-kotlin/40432796#40432796", "title": "Moshi&#39;s Custom Adapter with RxAndroid &amp; Retrofit &amp; Kotlin", "body": "<p>If you just need the <code>User</code> object. There is a library called <a href=\"https://github.com/serj-lotutovici/moshi-lazy-adapters\" rel=\"nofollow noreferrer\">Moshi-Lazy-Adapters</a> that provides a <code>@Wrapped</code> annotation, that allows specifying the path to the desired object. All you have to do is add the respective adapter to your Moshi instance and change the service code to:</p>\n<pre><code>interface AccountService {\n\n  @GET(&quot;u/17350105/test.json&quot;)\n  @Wrapped(&quot;user&quot;)\n  fun signUpAnonymously() : Observable&lt;User&gt;\n}\n</code></pre>\n<p>No need for any other custom adapter.</p>\n"}], "owner": {"reputation": 5953, "user_id": 928315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/af1172fff8fd14a3152231fc8186c205?s=128&d=identicon&r=PG", "display_name": "iForests", "link": "https://stackoverflow.com/users/928315/iforests"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4574, "favorite_count": 1, "accepted_answer_id": 40428685, "answer_count": 2, "score": 7, "last_activity_date": 1605693829, "creation_date": 1478276189, "last_edit_date": 1478276641, "question_id": 40427317, "link": "https://stackoverflow.com/questions/40427317/moshis-custom-adapter-with-rxandroid-retrofit-kotlin", "title": "Moshi&#39;s Custom Adapter with RxAndroid &amp; Retrofit &amp; Kotlin", "body": "<p>After configuring Kotlin for Android project, I wrote a simple <code>MainActivity.kt</code>. It called Retrofit to get a JSON file which contained the following data:</p>\n\n<pre>\n{\n    \"message\": \"success\",\n    \"user\": {\n        \"username\": \"Eric\"\n    }\n}\n</pre>\n\n<p>Now I want to use Moshi to convert the JSON data to Kotlin's class, so here are the two classes to reflect the above JSON structure:</p>\n\n<pre>\nclass User(var username: String)\n\nclass UserJson(var message: String, var user: User)\n</pre>\n\n<p>And a custom type adapter for Moshi:</p>\n\n<pre>\nclass UserAdapter {\n    @FromJson fun fromJson(userJson: UserJson) : User {\n        Log.d(\"MyLog\", \"message = ${userJson.message}\")  // = success\n        Log.d(\"MyLog\", \"user = ${userJson.user}\")        // = null\n\n        return userJson.user\n    }\n}\n</pre>\n\n<p>When it goes into the function <code>fromJson()</code>, <code>userJson.message = \"success\"</code> as expected. But the strange thing is that <code>userJson.user</code> is <code>null</code>, which should be <code>User(username=\"Eric\")</code>.</p>\n\n<p>I am new to Moshi and Kotlin, and I have already stuck with this problem for about 10 hours. Please help me out. Thanks for any help.</p>\n\n<p>========================================</p>\n\n<p>The following is the entire code of <code>MainActivity.kt</code> (50 lines only):</p>\n\n<pre>\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // Custom Type Adapters for Moshi\n        val userMoshi = Moshi.Builder().add(UserAdapter()).build()\n\n        val retrofit = Retrofit.Builder()\n                .baseUrl(\"https://dl.dropboxusercontent.com/\")\n                .addConverterFactory(MoshiConverterFactory.create(userMoshi))\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .build()\n\n        val accountService = retrofit.create(AccountService::class.java)\n\n        accountService.signUpAnonymously()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe { user ->\n                    Log.d(\"MyLog\", user.toString())\n                }\n    }\n}\n\n\n// ========== For Retrofit ==========\ninterface AccountService {\n\n    @GET(\"u/17350105/test.json\")\n    fun signUpAnonymously() : Observable&lt;User>\n\n}\n\n\n// ========== For Moshi ==========\nclass User(var username: String)\n\nclass UserJson(var message: String, var user: User)\n\nclass UserAdapter {\n\n    @FromJson fun fromJson(userJson: UserJson) : User {\n        Log.d(\"MyLog\", \"message = ${userJson.message}\")        // = success\n        Log.d(\"MyLog\", \"user = ${userJson.user}\")              // = null\n\n        return userJson.user\n    }\n\n}\n</pre>\n\n<p>The <code>build.gradle</code> is:</p>\n\n<pre>\ncompile \"io.reactivex.rxjava2:rxjava:2.0.0\"\ncompile \"io.reactivex.rxjava2:rxandroid:2.0.0\"\n\ncompile \"com.android.support:appcompat-v7:25.0.0\"\n\ncompile \"com.squareup.retrofit2:retrofit:2.1.0\"\ncompile \"com.squareup.retrofit2:converter-moshi:2.1.0\"\ncompile 'com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0'\n</pre>\n\n<p>Thank you again.</p>\n"}, {"tags": ["junit4", "kotlin", "android-studio-2.2"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 1341402, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a548cc448fa7e5edbe480c8ebcf389ec?s=128&d=identicon&r=PG", "display_name": "Marc_Bob", "link": "https://stackoverflow.com/users/1341402/marc-bob"}, "edited": false, "score": 0, "creation_date": 1478275809, "post_id": 40426605, "comment_id": 68102883, "body": "Well at the moment I have the Kotlin files also in the java folder so the sourceSets should not be needed if I&#39;m not mistaken. Other than that I have the same."}, {"owner": {"reputation": 119, "user_id": 1341402, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a548cc448fa7e5edbe480c8ebcf389ec?s=128&d=identicon&r=PG", "display_name": "Marc_Bob", "link": "https://stackoverflow.com/users/1341402/marc-bob"}, "edited": false, "score": 0, "creation_date": 1478275880, "post_id": 40426605, "comment_id": 68102935, "body": "It is very strange, it always worked so far in other projects. I really wonder if the AS update has something to do with it."}, {"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "reply_to_user": {"reputation": 119, "user_id": 1341402, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a548cc448fa7e5edbe480c8ebcf389ec?s=128&d=identicon&r=PG", "display_name": "Marc_Bob", "link": "https://stackoverflow.com/users/1341402/marc-bob"}, "edited": false, "score": 0, "creation_date": 1478276390, "post_id": 40426605, "comment_id": 68103215, "body": "@Marc_Bob I don&#39;t think so. I have the most recent version of AS and everything is fine."}, {"owner": {"reputation": 1254, "user_id": 1090973, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/04c441b04f1a1e9b8c1208164dd337d5?s=128&d=identicon&r=PG", "display_name": "sunghun", "link": "https://stackoverflow.com/users/1090973/sunghun"}, "edited": false, "score": 0, "creation_date": 1509965825, "post_id": 40426605, "comment_id": 81219961, "body": "I&#39;ve got the same issue. Android studio 3.0 + Gradle 3.0 + Kotlin 1.1.51."}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": false, "score": 1, "last_activity_date": 1478273912, "creation_date": 1478273912, "answer_id": 40426605, "question_id": 40426276, "link": "https://stackoverflow.com/questions/40426276/junit-testing-in-android-studio-with-kotlin-stopped-working/40426605#40426605", "title": "JUnit testing in Android Studio with Kotlin stopped working", "body": "<p>Do you have this in your <code>build.gradle</code>?</p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n    test.java.srcDirs += 'src/test/kotlin'\n}\n\ndependencies {\n    testCompile 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>Directory structure like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kCyA7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kCyA7.png\" alt=\"enter image description here\"></a></p>\n\n<p>and a test class:</p>\n\n<pre><code>import org.junit.Assert\nimport org.junit.Test\n\nclass TestCase {\n\n    @Test fun someTest(){\n        Assert.assertFalse(true)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 1341402, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a548cc448fa7e5edbe480c8ebcf389ec?s=128&d=identicon&r=PG", "display_name": "Marc_Bob", "link": "https://stackoverflow.com/users/1341402/marc-bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1478273912, "creation_date": 1478273024, "question_id": 40426276, "link": "https://stackoverflow.com/questions/40426276/junit-testing-in-android-studio-with-kotlin-stopped-working", "title": "JUnit testing in Android Studio with Kotlin stopped working", "body": "<p>I have a project in Android Studio where I created a java library module. In there I have a Kotlin class which I want to test. When I create the test in Kotlin and try to run it, the IDE keeps telling me:</p>\n\n<p>Process finished with exit code 1\nClass not found: \"com.example.CacheTest\" Empty test suite.</p>\n\n<p>When I create the same test in Java everything works fine.</p>\n\n<p>I created tests in other projects in Kotlin as well and there it works.</p>\n\n<p>I recently update AS to 2.2.2 and use Kotlin 1.0.4</p>\n\n<p>Does anyone have any suggestions?</p>\n"}, {"tags": ["null", "kotlin", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 0, "creation_date": 1478229891, "post_id": 40414138, "comment_id": 68079485, "body": "<code>it</code> is already not null because you are using <code>arg?.let {} </code>"}, {"owner": {"reputation": 6636, "user_id": 691639, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e237f683765ca5ad65c9060cf73a0991?s=128&d=identicon&r=PG", "display_name": "Eliezer", "link": "https://stackoverflow.com/users/691639/eliezer"}, "reply_to_user": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 0, "creation_date": 1478229997, "post_id": 40414138, "comment_id": 68079502, "body": "Yes, but the point is that I want to use <code>with</code> with a non null value. I want to use <code>with</code> for its scoping."}], "answers": [{"tags": [], "owner": {"reputation": 6636, "user_id": 691639, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e237f683765ca5ad65c9060cf73a0991?s=128&d=identicon&r=PG", "display_name": "Eliezer", "link": "https://stackoverflow.com/users/691639/eliezer"}, "is_accepted": false, "score": 2, "last_activity_date": 1478230315, "creation_date": 1478230315, "answer_id": 40414851, "question_id": 40414138, "link": "https://stackoverflow.com/questions/40414138/kotlin-with-if-not-null/40414851#40414851", "title": "Kotlin With If Not Null", "body": "<p>Looks like the alternative to that would be to use:</p>\n\n<pre><code>arg?.run {\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6636, "user_id": 691639, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e237f683765ca5ad65c9060cf73a0991?s=128&d=identicon&r=PG", "display_name": "Eliezer", "link": "https://stackoverflow.com/users/691639/eliezer"}, "edited": false, "score": 1, "creation_date": 1478269754, "post_id": 40419877, "comment_id": 68098587, "body": "Awesome! I find myself loving Kotlin more and more every time I see something like this."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 21, "last_activity_date": 1478255782, "last_edit_date": 1478255782, "creation_date": 1478253864, "answer_id": 40419877, "question_id": 40414138, "link": "https://stackoverflow.com/questions/40414138/kotlin-with-if-not-null/40419877#40419877", "title": "Kotlin With If Not Null", "body": "<p>You can use the Kotlin extension functions <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"noreferrer\"><code>apply()</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"noreferrer\"><code>run()</code></a> depending on whether you want it to be <strong>fluent</strong> (<em>returning <code>this</code> at end</em>) or <strong>transforming</strong> (<em>returning a new value at end</em>):</p>\n\n<p>Usage for <code>apply</code>:</p>\n\n\n\n<pre><code>something?.apply {\n    // this is now the non-null arg\n} \n</code></pre>\n\n<p>And fluent example:  </p>\n\n<pre><code>user?.apply {\n   name = \"Fred\"\n   age = 31\n}?.updateUserInfo()\n</code></pre>\n\n<p>Transforming example using <code>run</code>:</p>\n\n<pre><code>val companyName = user?.run {\n   saveUser()\n   fetchUserCompany()\n}?.name ?: \"unknown company\"\n</code></pre>\n\n<hr>\n\n<p>Alternatively if you don't like that naming and really want a function called <code>with()</code> <strong>you can easily create your own reusable function</strong>: </p>\n\n<pre><code>// returning the same value fluently\ninline fun &lt;T: Any&gt; T.with(func: T.() -&gt; Unit): T = this.apply(func)\n// or returning a new value\ninline fun &lt;T: Any, R: Any&gt; T.with(func: T.() -&gt; R): R = this.func()\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>something?.with {\n    // this is now the non-null arg\n}\n</code></pre>\n\n<p>If you want the null check embedded in the function, maybe a <code>withNotNull</code> function?</p>\n\n<pre><code>// version returning `this` or `null` fluently\ninline fun &lt;T: Any&gt; T?.withNotNull(func: T.() -&gt; Unit): T? = \n    this?.apply(func)\n// version returning new value or `null`\ninline fun &lt;T: Any, R: Any&gt; T?.withNotNull(thenDo: T.() -&gt; R?): R? =\n    this?.thenDo()\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>something.withNotNull {\n    // this is now the non-null arg\n}\n</code></pre>\n\n<hr>\n\n<p>See also:</p>\n\n<ul>\n<li>Related <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html\" rel=\"noreferrer\">functions on <code>Any</code></a></li>\n<li>Kotlin <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/index.html#functions\" rel=\"noreferrer\">top-level functions</a></li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"noreferrer\">Kotlin StdLib API Reference</a></li>\n</ul>\n"}], "owner": {"reputation": 6636, "user_id": 691639, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e237f683765ca5ad65c9060cf73a0991?s=128&d=identicon&r=PG", "display_name": "Eliezer", "link": "https://stackoverflow.com/users/691639/eliezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3944, "favorite_count": 1, "accepted_answer_id": 40419877, "answer_count": 2, "score": 9, "last_activity_date": 1502716919, "creation_date": 1478224500, "last_edit_date": 1502716919, "question_id": 40414138, "link": "https://stackoverflow.com/questions/40414138/kotlin-with-if-not-null", "title": "Kotlin With If Not Null", "body": "<p>What would be the most concise way of using <code>with</code> iff a <code>var</code> is not <code>null</code>?</p>\n\n<p>The best I could come up with is:</p>\n\n<pre><code>arg?.let { with(it) {\n\n}}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478203545, "post_id": 40409571, "comment_id": 68070727, "body": "You need to show your compiler errors.  And remove the &quot;return&quot; from inside the lazy, you do not return when in a lambda."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478203634, "post_id": 40409571, "comment_id": 68070771, "body": "also, can you make a sample that has fewer dependencies?"}, {"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478203681, "post_id": 40409571, "comment_id": 68070808, "body": "Will update right now"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478206330, "post_id": 40409571, "comment_id": 68072286, "body": "You still should update your question with the error messages exactly as shown from the compiler.  our question should help other people with the same or similar issues, and you haven&#39;t provided enough detail for that to happen."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1478206200, "last_edit_date": 1478206200, "creation_date": 1478203841, "answer_id": 40410395, "question_id": 40409571, "link": "https://stackoverflow.com/questions/40409571/lazy-initialization-of-kotlin-class-property-wont-compile/40410395#40410395", "title": "Lazy initialization of Kotlin class property won&#39;t compile", "body": "<p>Based on the current code in the question:</p>\n\n\n\n<pre><code>data class Bounds(val ne: Geocode, val sw: Geocode)\n\ndata class Example(val hubs:Collection&lt;HubKt&gt;) {\n    val bounds: Bounds by lazy {\n        Bounds(hubs.map { it.position }.max()!!, \n               hubs.map { it.position }.min()!!)\n    }\n} \n</code></pre>\n\n<p>Otherwise in your answer you won't be able to access <code>ne</code> and <code>sw</code> in your anonymous descendant of <code>Any</code> that you create via the object expression.  You need a typed response such as the <code>Bounds</code> class or a <code>Map</code> (which would be icky). And also in your version they could be null.  If you know you have at least one value in the list you can use <code>!!</code> to assert you know the result of <code>max</code> or <code>min</code> will not be null. </p>\n\n<p>You can do this without the copy created by the map with this change:</p>\n\n<pre><code>data class Example(val hubs:Collection&lt;HubKt&gt;) {\n    val bounds: Bounds by lazy {\n        Bounds(hubs.maxBy { it.position }!!.position, \n               hubs.minBy { it.position }!!.position)\n    }\n}    \n</code></pre>\n\n<p>Or if you want nulls as a possible bounds use the <code>?.</code> safe operator instead of <code>!!.</code> and change the <code>Bounds</code> class to allow <code>null</code>:</p>\n\n<pre><code>data class Bounds(val ne: Geocode?, val sw: Geocode?)\n\ndata class Example(val hubs:Collection&lt;HubKt&gt;) {\n    val bounds by lazy {\n        Bounds(hubs.maxBy { it.position }?.position, \n               hubs.minBy { it.position }?.position)\n    }\n}\n</code></pre>\n\n<p>Notice in the last example I dropped the type from <code>val bounds: Bounds</code> because it is optional and type inference will figure it out just fine.</p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478206436, "post_id": 40410672, "comment_id": 68072351, "body": "This answer solves some of the compiler errors but the solution does not work.  <code>ne</code> and <code>sw</code> are not accessible by anyone because the class is <code>Any</code> created from an anonymous object expression that cannot be accessed by its type."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478206466, "post_id": 40410672, "comment_id": 68072370, "body": "You introduced new information in this answer that should have been added to the question."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478206602, "post_id": 40410672, "comment_id": 68072429, "body": "The Lombok issue would likely be resolved by making sure Kotlin annotation processor (KAPT) is in use, so that Lombok has done its magic before the Kotlin compiler has processed the source code since Kotlin runs first before Java processing.  So your answer works around that, but isn&#39;t the right way to handle integration with Java and annotation processors running there."}, {"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478207334, "post_id": 40410672, "comment_id": 68072779, "body": "Actually, it&#39;s marshalled out as JSON and works as I need it to. But, I get what you&#39;re saying. I am will move it to a real map. Let me also see about turning on the KAPT"}, {"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478207459, "post_id": 40410672, "comment_id": 68072844, "body": "If I modify the Question to define &quot;hub&quot; as Java with the correct annotations, can I have the vote back?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1478209503, "post_id": 40410672, "comment_id": 68073708, "body": "You are missing things in your question that you instead write into your answer including:  what the compiler errors actually were, that you don&#39;t care about accessing the results of the lazy other than via JSON serialization, that it is lombok related (your question no longer has anything related to lombok in it), etc.  So the question and answers don&#39;t line up."}], "tags": [], "owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "is_accepted": false, "score": -1, "last_activity_date": 1478204878, "creation_date": 1478204878, "answer_id": 40410672, "question_id": 40409571, "link": "https://stackoverflow.com/questions/40409571/lazy-initialization-of-kotlin-class-property-wont-compile/40410672#40410672", "title": "Lazy initialization of Kotlin class property won&#39;t compile", "body": "<p>Ok, I solved the problem: 2 fold</p>\n\n<p>Syntax error as \"unknown symbol\"? I needed <code>=</code> and not <code>:</code> (DOH!)</p>\n\n<pre><code>  val bounds:Any by lazy {\n        object {\n            val ne = hubs.map { h -&gt; h.position }.max()\n            val sw = hubs.map { h -&gt; h.position }.min()\n        }\n\n    }\n</code></pre>\n\n<p>Lombok: <code>position</code> in <code>Hub</code> has it's getter generated by Lombok:</p>\n\n<pre><code>@Getter\n@Setter\nprivate Geocode position = new Geocode(50.0,50.0);\n</code></pre>\n\n<p>Change to:</p>\n\n<pre><code>@Setter\nprivate Geocode position = new Geocode(50.0,50.0);\n\npublic Geocode getPosition() {\n    return position;\n}\n</code></pre>\n\n<p>Ultimately this was an integration issue. <em>sigh</em></p>\n"}], "owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478206889, "creation_date": 1478200652, "last_edit_date": 1478206889, "question_id": 40409571, "link": "https://stackoverflow.com/questions/40409571/lazy-initialization-of-kotlin-class-property-wont-compile", "title": "Lazy initialization of Kotlin class property won&#39;t compile", "body": "<p>I am not entirely sure that what I think is the problem actually it. But I am trying to use <code>lazy</code> as a delegate and I am getting compiler errors</p>\n\n<pre><code>data class Geocode(var latitude: Double, var longitude: Double) : Comparable&lt;Geocode&gt; {\n\n\n    override fun compareTo(other: Geocode): Int {\n        var result = this.latitude.compareTo(other.latitude)\n        if (result == 0)\n            result = this.longitude.compareTo(other.longitude)\n        return result\n    }\n}\n\ndata class HubKt(val position:Geocode) {\n}\n\ndata class Example(val hubs:Collection&lt;HubKt&gt;) {\n\n    val bounds:Any by lazy {\n        object {\n            val ne: this.hubs.map { h -&gt; h.position }.max()\n            val sw: this.hubs.map { h -&gt; h.position }.min()\n        }\n\n    }\n}\n</code></pre>\n\n<p>if this were java, I would want the <code>bounds</code> function to return a map:</p>\n\n<pre><code>public Map&lt;String,Geocode&gt; getBounds() {\n        Geocode ne = geos.stream().max(Geocode::compareTo).get();\n        Geocode sw = geos.stream().min(Geocode::compareTo).get();\n        return ImmutableMap.of(\"ne\",ne,\"sw\",sw);\n}\n</code></pre>\n\n<p>I think the problem is not using the correct <code>this</code>. I tried <code>this@Authenticate</code> and it's a no go. Hell, I might even be over complicating it. Thanks for the insight.</p>\n"}, {"tags": ["documentation", "kotlin", "kdoc"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 61, "last_activity_date": 1478173644, "creation_date": 1478173644, "answer_id": 40400695, "question_id": 40400593, "link": "https://stackoverflow.com/questions/40400593/kdoc-insert-code-snippet/40400695#40400695", "title": "KDoc: Insert code snippet", "body": "<p>You can use triple backticks:</p>\n\n<pre><code>/**\n * Example usage:\n *\n * ```\n * @JavaAnnotation\n * public void foo() {\n *     // Code\n * }\n * ```\n */\n</code></pre>\n"}], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4538, "favorite_count": 1, "accepted_answer_id": 40400695, "answer_count": 1, "score": 30, "last_activity_date": 1478173644, "creation_date": 1478173246, "question_id": 40400593, "link": "https://stackoverflow.com/questions/40400593/kdoc-insert-code-snippet", "title": "KDoc: Insert code snippet", "body": "<p>How do I insert a code snippet in KDoc, Kotlin's default documentation tool?</p>\n\n<p>In Java, I can use the following:</p>\n\n<pre><code>/**\n * Example usage:\n *\n * &lt;pre&gt;\n * &lt;code&gt;&amp;#64;JavaAnnotation\n * public void foo() {\n *     // Code\n * }\n * &lt;/code&gt;\n * &lt;/pre&gt;\n */\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface JavaAnnotation {}\n</code></pre>\n\n<p>There seems to be no equivalent in Kotlin. I tried using Markdown, but inserting 2 spaces after line end does not line-break.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1478166420, "post_id": 40398072, "comment_id": 68046622, "body": "It&#39;s a bit awkward that the <code>INSTANCE</code> property exposes public setter"}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1478166492, "post_id": 40398072, "comment_id": 68046663, "body": "@miensol any other option to pass the parameter (Context) to the companion object?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1478167162, "post_id": 40398072, "comment_id": 68047096, "body": "Storing a Context instance in a global singleton object (no matter whether Java or Kotlin) creates a memory leak: <a href=\"http://stackoverflow.com/a/11908685/147024\">stackoverflow.com/a/11908685/147024</a>"}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 6, "creation_date": 1478167248, "post_id": 40398072, "comment_id": 68047148, "body": "@yole it is NOT a memory leak if it is the application context which is a singleton."}, {"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 1, "creation_date": 1478231528, "post_id": 40398072, "comment_id": 68079822, "body": "@LordRaydenMK I think there are 4 improvements in your code if you use Kotlin in Android. I have made a gist with some explaination. Check it out : <a href=\"https://gist.github.com/gaplo917/f186d5c541fbc0d6f77f9b720ec4694c\" rel=\"nofollow noreferrer\">gist.github.com/gaplo917/f186d5c541fbc0d6f77f9b720ec4694c</a>"}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "reply_to_user": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 0, "creation_date": 1478247174, "post_id": 40398072, "comment_id": 68084928, "body": "@GaryLO the first 2 points are very good. Having a init method like in this answer <a href=\"http://stackoverflow.com/a/33129510/1011435\">stackoverflow.com/a/33129510/1011435</a> is what I was trying to avoid. Thanks"}, {"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 0, "creation_date": 1478253618, "post_id": 40398072, "comment_id": 68088286, "body": "@LordRaydenMK Why you don&#39;t like to use <code>Singleton.init()</code>? Most of the Android libraries would be initialized once in the <code>Application.onCreate()</code> and then you can use it everywhere. Also, if you are working in Android, you can try dagger 2. Most of the time you no longer need to define your own singleton."}], "answers": [{"comments": [{"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1478355762, "post_id": 40437274, "comment_id": 68125618, "body": "Exactly what I was looking for...   About the usage of this code... I am trying to convert <a href=\"https://github.com/googlesamples/android-architecture\" rel=\"nofollow noreferrer\">github.com/googlesamples/android-architecture</a> to Kotlin to get my feet wet with Kotlin and to compare the code.   That is why I don&#39;t want to include Dagger or <a href=\"https://github.com/SalomonBrys/Kodein\" rel=\"nofollow noreferrer\">github.com/SalomonBrys/Kodein</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1478356034, "post_id": 40437274, "comment_id": 68125703, "body": "Out of curiosity, what file was you trying to convert?"}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1478356133, "post_id": 40437274, "comment_id": 68125733, "body": "<a href=\"https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/local/TasksLocalDataSource.java\" rel=\"nofollow noreferrer\">github.com/googlesamples/android-architecture/blob/todo-mvp/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "reply_to_user": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 1, "creation_date": 1478369540, "post_id": 40437274, "comment_id": 68129845, "body": "@LordRaydenMK IMHO, don&#39;t start learning Kotlin by doing a Java conversion. Read the official documentation once, try to do a complete equivalent Kotlin implementation starting from scratch but not doing a Java conversion.  Concept of &quot;Don&#39;t code Kotlin in Java way&quot; is very important because most of the time you don&#39;t need Java (in)famous coding pattern (as it was designed for Java)."}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "reply_to_user": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "edited": false, "score": 1, "creation_date": 1478370083, "post_id": 40437274, "comment_id": 68130009, "body": "@GaryLO I did the koans on try.kotlinglang.org. As Hadi Hariri (<a href=\"https://twitter.com/hhariri\" rel=\"nofollow noreferrer\">twitter.com/hhariri</a>) said in a talk on some conference (can&#39;t find the link now)... some Kotlin is better than no Kotlin for start. And the reason I wrote here is to try and do it the Kotlin way. Thanks."}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 2, "creation_date": 1500833667, "post_id": 40437274, "comment_id": 77499519, "body": "Beware that this solution is <b>not thread-safe</b>. Two singleton instances may exist and get initialized if multiple threads try to access it simultaneously."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1500848104, "post_id": 40437274, "comment_id": 77503599, "body": "The first snippet is not thread safe (obviously), why the second one is"}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1542679937, "post_id": 40437274, "comment_id": 93646435, "body": "Would be it good practice to use <code>!!</code>? There might be some errors while creating <code>TasksLocalDataSource(context)</code> and hence <code>instance</code> can be null at a time of return."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 1, "creation_date": 1542710107, "post_id": 40437274, "comment_id": 93657593, "body": "@musooff <code>TasksLocalDataSource(context)</code> is a constructor, so it ether returns an object or throws an exception."}, {"owner": {"reputation": 133, "user_id": 7657675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097f4068d60b09d605fcc91af7787cd8?s=128&d=identicon&r=PG&f=1", "display_name": "sjjhsjjh", "link": "https://stackoverflow.com/users/7657675/sjjhsjjh"}, "edited": false, "score": 0, "creation_date": 1583836315, "post_id": 40437274, "comment_id": 107239689, "body": "In the by-lazy example, it looks like the <code>context</code> instance would be retained, which might be undesirable. Maybe that should be fixed by adding <code>context = null</code> after <code>TasksLocalDataSource(context)</code>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 21, "last_activity_date": 1500848124, "last_edit_date": 1592644375, "creation_date": 1478342557, "answer_id": 40437274, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/40437274#40437274", "title": "Singleton with parameter in Kotlin", "body": "<p>I am not entirely sure why would you need such code, but here is my best shot at it:</p>\n<pre><code>class TasksLocalDataSource private constructor(context: Context) : TasksDataSource {\n    private val mDbHelper = TasksDbHelper(context)\n\n    companion object {\n        private var instance : TasksLocalDataSource? = null\n\n        fun  getInstance(context: Context): TasksLocalDataSource {\n            if (instance == null)  // NOT thread safe!\n                instance = TasksLocalDataSource(context)\n\n            return instance!!\n        }\n    }\n}\n</code></pre>\n<p>This is similar to what you wrote, and has the same API.</p>\n<p>A few notes:</p>\n<ul>\n<li><p>Do not use <code>lateinit</code> here. It has a different purpose, and a nullable variable is ideal here.</p>\n</li>\n<li><p>What does <code>checkNotNull(context)</code> do? <code>context</code> is never null here, this is guarantied by Kotlin. All checks and asserts are already implemented by the compiler.</p>\n</li>\n</ul>\n<h3>UPDATE:</h3>\n<p>If all you need is a lazily initialised instance of class <code>TasksLocalDataSource</code>, then just use a bunch of lazy properties (inside an object or on the package level):</p>\n<pre><code>val context = ....\n\nval dataSource by lazy {\n    TasksLocalDataSource(context)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 3, "creation_date": 1507221767, "post_id": 44385000, "comment_id": 80134618, "body": "Does NOT answer the question. The question is how to create a singleton when you have to pass an argument in the constructor."}], "tags": [], "owner": {"reputation": 3623, "user_id": 1068985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJc6e.jpg?s=128&g=1", "display_name": "Emran Hamza", "link": "https://stackoverflow.com/users/1068985/emran-hamza"}, "is_accepted": false, "score": -11, "last_activity_date": 1496737681, "creation_date": 1496737681, "answer_id": 44385000, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/44385000#44385000", "title": "Singleton with parameter in Kotlin", "body": "<pre><code>Singletons\n</code></pre>\n\n<p>Singletons are used often enough for a simpler way of creating them to exist. Instead of the usual static instance, getInstance() method and a private constructor, Kotlin uses the object notation.\nFor consistency, object notation is also used to define static methods.</p>\n\n<pre><code> object CommonApiConfig {\nprivate var commonApiConfig: CommonApiConfig? = null\nfun getInstance(): CommonApiConfig {\n    if (null == commonApiConfig) {\n        commonApiConfig = CommonApiConfig\n       }\n    return CommonApiConfig.commonApiConfig!!\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3080, "user_id": 1852343, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GbRlL.jpg?s=128&g=1", "display_name": "Sandip Fichadiya", "link": "https://stackoverflow.com/users/1852343/sandip-fichadiya"}, "edited": false, "score": 2, "creation_date": 1529304677, "post_id": 45943282, "comment_id": 88807718, "body": "I am not sure why there is INSTANCE ?: inside synchronized block? Because that block will be called only when INSTANCE was null so why to check INSTANCE was null or not again there? Can someone explain?"}, {"owner": {"reputation": 5499, "user_id": 2553215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okVWo.jpg?s=128&g=1", "display_name": "kuhnroyal", "link": "https://stackoverflow.com/users/2553215/kuhnroyal"}, "reply_to_user": {"reputation": 3080, "user_id": 1852343, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GbRlL.jpg?s=128&g=1", "display_name": "Sandip Fichadiya", "link": "https://stackoverflow.com/users/1852343/sandip-fichadiya"}, "edited": false, "score": 8, "creation_date": 1529754811, "post_id": 45943282, "comment_id": 88995555, "body": "@SandipSoni Read about double-check locking: <a href=\"https://stackoverflow.com/questions/18093735/double-checked-locking-in-singleton\" title=\"double checked locking in singleton\">stackoverflow.com/questions/18093735/&hellip;</a>"}, {"owner": {"reputation": 1780, "user_id": 764897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tVNws.jpg?s=128&g=1", "display_name": "Odaym", "link": "https://stackoverflow.com/users/764897/odaym"}, "edited": false, "score": 0, "creation_date": 1542496921, "post_id": 45943282, "comment_id": 93590617, "body": "Correct, the key here is not to allow the class to instantiate itself through the constructor so as not to go ahead and set everything up inside without an initialized reference of the appropriate objects, ending up in lateinit property XYZ not initialized"}, {"owner": {"reputation": 1499, "user_id": 1469472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vD3Ty.jpg?s=128&g=1", "display_name": "A1m", "link": "https://stackoverflow.com/users/1469472/a1m"}, "edited": false, "score": 2, "creation_date": 1581737400, "post_id": 45943282, "comment_id": 106546531, "body": "I see two problems with this code.  1. You always have to pass context (or any other var that is defined) which may be not available at the time where you want to retrieve the Singleton 2. Assuming you pass a different context on second use. What is the meaning of that? You will simply get the old singleton. Seems like an anti-pattern to me."}, {"owner": {"reputation": 813, "user_id": 2186249, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/577158b28eca34865d36d24234d06a11?s=128&d=identicon&r=PG&f=1", "display_name": "mfb", "link": "https://stackoverflow.com/users/2186249/mfb"}, "reply_to_user": {"reputation": 1499, "user_id": 1469472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vD3Ty.jpg?s=128&g=1", "display_name": "A1m", "link": "https://stackoverflow.com/users/1469472/a1m"}, "edited": false, "score": 2, "creation_date": 1585409465, "post_id": 45943282, "comment_id": 107750187, "body": "@A1m With regards to 2): passing a different context the second time would not matter, since the application context is used to construct the database. The <code>Context</code> object you pass is only used to retrieve the application context."}, {"owner": {"reputation": 1499, "user_id": 1469472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vD3Ty.jpg?s=128&g=1", "display_name": "A1m", "link": "https://stackoverflow.com/users/1469472/a1m"}, "reply_to_user": {"reputation": 813, "user_id": 2186249, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/577158b28eca34865d36d24234d06a11?s=128&d=identicon&r=PG&f=1", "display_name": "mfb", "link": "https://stackoverflow.com/users/2186249/mfb"}, "edited": false, "score": 1, "creation_date": 1585559821, "post_id": 45943282, "comment_id": 107792395, "body": "@MathiasBrandt that may be true in this case speaking about <code>Context</code> that should itself be a singleton. But the question in general asks about a pattern to create this singleton. I feel that behavior is undefined and missleading."}], "tags": [], "owner": {"reputation": 2472, "user_id": 775282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161c3b25645471c05560402910ef118?s=128&d=identicon&r=PG", "display_name": "fal", "link": "https://stackoverflow.com/users/775282/fal"}, "is_accepted": true, "score": 130, "last_activity_date": 1504034104, "last_edit_date": 1504034104, "creation_date": 1504021346, "answer_id": 45943282, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/45943282#45943282", "title": "Singleton with parameter in Kotlin", "body": "<p>Here's a neat alternative from Google's architecture components <a href=\"https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSampleKotlin/app/src/main/java/com/example/android/observability/persistence/UsersDatabase.kt\" rel=\"noreferrer\">sample code</a>, which uses the <code>also</code> function:</p>\n\n<pre><code>class UsersDatabase : RoomDatabase() {\n\n    companion object {\n\n        @Volatile private var INSTANCE: UsersDatabase? = null\n\n        fun getInstance(context: Context): UsersDatabase =\n            INSTANCE ?: synchronized(this) {\n                INSTANCE ?: buildDatabase(context).also { INSTANCE = it }\n            }\n\n        private fun buildDatabase(context: Context) =\n            Room.databaseBuilder(context.applicationContext,\n                    UsersDatabase::class.java, \"Sample.db\")\n                    .build()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1558473644, "post_id": 49578022, "comment_id": 99111490, "body": "This method is the most straightforward and is a good use case for the <code>invoke</code> function as a method to turn a <i>Class</i> into a function. I used this pattern for my <i>Repository</i> in the <a href=\"https://play.google.com/store/apps/details?id=app.coinverse\" rel=\"nofollow noreferrer\"><i><b>Coinverse</b></i></a> app."}, {"owner": {"reputation": 1437, "user_id": 1103974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6296ebe22f7a322daf808f06dade79?s=128&d=identicon&r=PG&f=1", "display_name": "leRobot", "link": "https://stackoverflow.com/users/1103974/lerobot"}, "edited": false, "score": 0, "creation_date": 1562899875, "post_id": 49578022, "comment_id": 100532558, "body": "But is it thread-safe? I see a lot of people praising <a href=\"https://stackoverflow.com/a/53580852/1103974\">this</a>, which is actually borrowed from <a href=\"https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e\" rel=\"nofollow noreferrer\">this 2yo popular medium post</a>, which again, borrowed from Kotlin &quot;by lazy&quot; source itself, as stated by the author. This answer looks cleaner (I hate adding boilerplate util files, let alone classes), but I digress about using this singleton in multi-threaded scenarios."}], "tags": [], "owner": {"reputation": 106, "user_id": 7699676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lQW6j.jpg?s=128&g=1", "display_name": "Yisus Threepwood", "link": "https://stackoverflow.com/users/7699676/yisus-threepwood"}, "is_accepted": false, "score": 5, "last_activity_date": 1522432160, "last_edit_date": 1522432160, "creation_date": 1522427790, "answer_id": 49578022, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/49578022#49578022", "title": "Singleton with parameter in Kotlin", "body": "<p>You can declare a Kotlin object, <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#invoke\" rel=\"nofollow noreferrer\">overloading \"invoke\" operator</a>.</p>\n\n<pre><code>object TasksLocalDataSource: TasksDataSource {\n    private lateinit var mDbHelper: TasksDbHelper\n\n    operator fun invoke(context: Context): TasksLocalDataSource {\n        this.mDbHelper = TasksDbHelper(context)\n        return this\n    }\n}\n</code></pre>\n\n<p>Anyway I think that you should inject TasksDbHelper to TasksLocalDataSource instead of inject Context</p>\n"}, {"comments": [{"owner": {"reputation": 2259, "user_id": 4254527, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w1DSa.png?s=128&g=1", "display_name": "Saman Sattari", "link": "https://stackoverflow.com/users/4254527/saman-sattari"}, "edited": false, "score": 0, "creation_date": 1588263127, "post_id": 51016257, "comment_id": 108837984, "body": "Your method is filling the retrofit object yet its returning nullable value. This is confusing and wrong"}], "tags": [], "owner": {"reputation": 99, "user_id": 8768273, "user_type": "registered", "profile_image": "https://graph.facebook.com/1938869099463398/picture?type=large", "display_name": "Leandro Castillo Borja", "link": "https://stackoverflow.com/users/8768273/leandro-castillo-borja"}, "is_accepted": false, "score": 4, "last_activity_date": 1529902451, "last_edit_date": 1529902451, "creation_date": 1529900555, "answer_id": 51016257, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/51016257#51016257", "title": "Singleton with parameter in Kotlin", "body": "<p>if you want to pass a parameter to the singleton in an easier way I think this is better and shorter</p>\n\n<pre><code>object SingletonConfig {\n\nprivate var retrofit: Retrofit? = null\nprivate const val URL_BASE = \"https://jsonplaceholder.typicode.com/\"\n\nfun Service(context: Context): Retrofit? {\n    if (retrofit == null) {\n        retrofit = Retrofit.Builder().baseUrl(URL_BASE)\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n    }\n    return retrofit\n}\n</code></pre>\n\n<p>}</p>\n\n<p>and you call it in this easy way</p>\n\n<pre><code>val api = SingletonConfig.Service(this)?.create(Api::class.java)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "is_accepted": false, "score": 2, "last_activity_date": 1618230633, "last_edit_date": 1618230633, "creation_date": 1536767385, "answer_id": 52299119, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/52299119#52299119", "title": "Singleton with parameter in Kotlin", "body": "<p>If the only parameter you need is the application <code>Context</code>, then you can initialize it to a top level <code>val</code>, early in a <code>ContentProvider</code>, like the Firebase SDK does.</p>\n<p>Since declaring a <code>ContentProvider</code> is a bit cumbersome, <a href=\"https://github.com/LouisCAD/Splitties/tree/main/modules/appctx\" rel=\"nofollow noreferrer\">I made a library that provides a <strong>top level property named <code>appCtx</code></strong></a> for all places where you don't need an Activity or other special lifecycle bound context.</p>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 5591292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cfd0300eb3479d25963b5740c045b26?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi Muktheeswarar", "link": "https://stackoverflow.com/users/5591292/abhi-muktheeswarar"}, "edited": false, "score": 3, "creation_date": 1568095777, "post_id": 53580852, "comment_id": 102155142, "body": "Assume that MyManger requires more than one constructor parameters, How to handle it with SingletonHolder"}, {"owner": {"reputation": 17925, "user_id": 1631967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2szT.jpg?s=128&g=1", "display_name": "aminography", "link": "https://stackoverflow.com/users/1631967/aminography"}, "reply_to_user": {"reputation": 325, "user_id": 5591292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cfd0300eb3479d25963b5740c045b26?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi Muktheeswarar", "link": "https://stackoverflow.com/users/5591292/abhi-muktheeswarar"}, "edited": false, "score": 0, "creation_date": 1568098018, "post_id": 53580852, "comment_id": 102156009, "body": "@AbhiMuktheeswarar: As <code>SingletonHolder</code> is a generic class and unfortunately its generic types can&#39;t be defined dynamically at runtime, possibly for each count of input parameters we should define a class like this: <a href=\"https://hastebin.com/avunuwiviv.m\" rel=\"nofollow noreferrer\">hastebin.com/avunuwiviv.m</a>"}, {"owner": {"reputation": 3975, "user_id": 842607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a69067470e1edd172c448819e85b3055?s=128&d=identicon&r=PG", "display_name": "Jimit Patel", "link": "https://stackoverflow.com/users/842607/jimit-patel"}, "edited": false, "score": 0, "creation_date": 1580130684, "post_id": 53580852, "comment_id": 105985651, "body": "How to create test cases for such classes?"}, {"owner": {"reputation": 2237, "user_id": 1898380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1989effaeda18c57e8658eeff62cef?s=128&d=identicon&r=PG", "display_name": "Dan Brough", "link": "https://stackoverflow.com/users/1898380/dan-brough"}, "reply_to_user": {"reputation": 325, "user_id": 5591292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cfd0300eb3479d25963b5740c045b26?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi Muktheeswarar", "link": "https://stackoverflow.com/users/5591292/abhi-muktheeswarar"}, "edited": false, "score": 0, "creation_date": 1603754961, "post_id": 53580852, "comment_id": 114131765, "body": "@AbhiMuktheeswarar use a Pair for A. Then: companion object: SingletonHolder&lt;MyManager,Pair&lt;A,B&gt;&gt; {  MyManager(it.first,it.second) }"}, {"owner": {"reputation": 4769, "user_id": 2722870, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d32c53a4179206fb284e383dd67af4a3?s=128&d=identicon&r=PG&f=1", "display_name": "ThanosFisherman", "link": "https://stackoverflow.com/users/2722870/thanosfisherman"}, "edited": false, "score": 0, "creation_date": 1610357427, "post_id": 53580852, "comment_id": 116097310, "body": "This is neat but sadly it crashes my compiler with <code>CompilationException: Back-end (JVM) Internal error: Failed to generate expression: KtCallExpression</code>"}, {"owner": {"reputation": 17925, "user_id": 1631967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2szT.jpg?s=128&g=1", "display_name": "aminography", "link": "https://stackoverflow.com/users/1631967/aminography"}, "reply_to_user": {"reputation": 4769, "user_id": 2722870, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d32c53a4179206fb284e383dd67af4a3?s=128&d=identicon&r=PG&f=1", "display_name": "ThanosFisherman", "link": "https://stackoverflow.com/users/2722870/thanosfisherman"}, "edited": false, "score": 0, "creation_date": 1610358592, "post_id": 53580852, "comment_id": 116097760, "body": "@ThanosFisherman: Thank you for reporting this. Would you use <code>kotlinx.serialization</code> in the singleton class? and what is your platform? android?"}, {"owner": {"reputation": 4769, "user_id": 2722870, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d32c53a4179206fb284e383dd67af4a3?s=128&d=identicon&r=PG&f=1", "display_name": "ThanosFisherman", "link": "https://stackoverflow.com/users/2722870/thanosfisherman"}, "edited": false, "score": 0, "creation_date": 1610367053, "post_id": 53580852, "comment_id": 116101523, "body": "@aminography I tried to use <code>SingletonHolder</code> to create a singleton of my room database but it wouldn&#39;t compile. Probably Room is using  <code>kotlinx.serialization</code> under the hood. so yeah Android API 30. I noticed there is an open issue about this somewhere on github."}, {"owner": {"reputation": 305, "user_id": 5437033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae8934ac0d0201fb7a2464c8756e521?s=128&d=identicon&r=PG&f=1", "display_name": "Chrispher", "link": "https://stackoverflow.com/users/5437033/chrispher"}, "edited": false, "score": 0, "creation_date": 1611857139, "post_id": 53580852, "comment_id": 116592098, "body": "I really like this solution, but: (1) I was nervous about extending the companion object (what if something else wanted to extend it too?), (2) I was nervous about all the <code>!!</code>s and (3) I think it should be made more explicit when you might be creating the singleton, vs when you just want to access it. So I made my own version heavily inspired by this answer: <a href=\"https://gist.github.com/chriscoomber/80a9e66dd4fba92e7480d29c925440e9\" rel=\"nofollow noreferrer\">gist.github.com/chriscoomber/80a9e66dd4fba92e7480d29c925440e&zwnj;&#8203;9</a>"}], "tags": [], "owner": {"reputation": 17925, "user_id": 1631967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2szT.jpg?s=128&g=1", "display_name": "aminography", "link": "https://stackoverflow.com/users/1631967/aminography"}, "is_accepted": false, "score": 39, "last_activity_date": 1589907631, "last_edit_date": 1589907631, "creation_date": 1543758342, "answer_id": 53580852, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/53580852#53580852", "title": "Singleton with parameter in Kotlin", "body": "<h2>\u2022 <code>Thread-Safe Solution</code> # <code>Write Once; Use Many;</code></h2>\n\n<p>It's a good solution to create a class implementing the logic of singleton which also holds the singleton instance, like the following. </p>\n\n<p>It instantiates the instance using <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"noreferrer\"><strong>Double-Check Locking</strong></a> in a <strong>synchronized</strong> block to eliminate possibility of race condition in <strong>multi-threaded</strong> environments.</p>\n\n<p><strong>SingletonHolder.kt</strong></p>\n\n<pre><code>open class SingletonHolder&lt;out T, in A&gt;(private val constructor: (A) -&gt; T) {\n\n    @Volatile\n    private var instance: T? = null\n\n    fun getInstance(arg: A): T {\n        return when {\n            instance != null -&gt; instance!!\n            else -&gt; synchronized(this) {\n                if (instance == null) instance = constructor(arg)\n                instance!!\n            }\n        }\n    }\n}\n</code></pre>\n\n<hr/>\n\n<h2>\u2022 <code>Usage</code></h2>\n\n<p>Now in each class that you want to be singleton, write a <code>companion object</code> extending the above class. <code>SingletonHolder</code> is a generic class that accepts type of target class and its requiring parameter as generic params. It also needs a reference to the constructor of target class which is used for instantiating an instance:</p>\n\n<pre><code>class MyManager private constructor(context: Context) {\n\n    fun doSomething() {\n        ...\n    }\n\n    companion object : SingletonHolder&lt;MyManager, Context&gt;(::MyManager)\n}\n</code></pre>\n\n<p><strong>Finally:</strong></p>\n\n<pre><code>MyManager.getInstance(context).doSomething()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1349, "user_id": 2465785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7192d5231450c0ccca6ad473ce1d75?s=128&d=identicon&r=PG", "display_name": "William Leung", "link": "https://stackoverflow.com/users/2465785/william-leung"}, "is_accepted": false, "score": 1, "last_activity_date": 1545670421, "last_edit_date": 1545670421, "creation_date": 1545626920, "answer_id": 53909266, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/53909266#53909266", "title": "Singleton with parameter in Kotlin", "body": "<p>solution with lazy</p>\n\n<pre><code>class LateInitLazy&lt;T&gt;(private var initializer: (() -&gt; T)? = null) {\n\n    val lazy = lazy { checkNotNull(initializer) { \"lazy not initialized\" }() }\n\n    fun initOnce(factory: () -&gt; T) {\n        initializer = factory\n        lazy.value\n        initializer = null\n    }\n}\n\nval myProxy = LateInitLazy&lt;String&gt;()\nval myValue by myProxy.lazy\n\nprintln(myValue) // error: java.lang.IllegalStateException: lazy not inited\n\nmyProxy.initOnce { \"Hello World\" }\nprintln(myValue) // OK: output Hello World\n\nmyProxy.initOnce { \"Never changed\" } // no effect\nprintln(myValue) // OK: output Hello World\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 1, "last_activity_date": 1561745436, "creation_date": 1561745436, "answer_id": 56811508, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/56811508#56811508", "title": "Singleton with parameter in Kotlin", "body": "<pre><code>class CarsRepository(private val iDummyCarsDataSource: IDummyCarsDataSource) {\n\n    companion object {\n        private var INSTANCE: CarsRepository? = null\n        fun getInstance(iDummyCarsDataSource: IDummyCarsDataSource): CarsRepository {\n            if (INSTANCE == null) {\n                INSTANCE = CarsRepository(\n                    iDummyCarsDataSource = iDummyCarsDataSource)\n            }\n            return INSTANCE as CarsRepository\n        }\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 855, "user_id": 599743, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fff621ebecc8d67b4690b4cfe7e8c69f?s=128&d=identicon&r=PG", "display_name": "tonisives", "link": "https://stackoverflow.com/users/599743/tonisives"}, "edited": false, "score": 0, "creation_date": 1604663140, "post_id": 58567173, "comment_id": 114422198, "body": "The import for this is kotlin.jvm.Synchronized. So I guess it doesnt work with multiplatform?"}], "tags": [], "owner": {"reputation": 3166, "user_id": 1680301, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/uHx6n.png?s=128&g=1", "display_name": "Georgios", "link": "https://stackoverflow.com/users/1680301/georgios"}, "is_accepted": false, "score": 3, "last_activity_date": 1572050534, "creation_date": 1572050534, "answer_id": 58567173, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/58567173#58567173", "title": "Singleton with parameter in Kotlin", "body": "<p>The method <code>synchronized()</code> is marked as deprecated in the common standard library so an alternative would be this:</p>\n\n<pre><code>class MySingleton private constructor(private val param: String) {\n\n    companion object {\n        @Volatile\n        private var INSTANCE: MySingleton? = null\n\n        @Synchronized\n        fun getInstance(param: String): MySingleton = INSTANCE ?: MySingleton(param).also { INSTANCE = it }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3092, "user_id": 4528126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d048311e7a8628599bf58f40938a57fe?s=128&d=identicon&r=PG&f=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4528126/prasad"}, "is_accepted": false, "score": 0, "last_activity_date": 1575744049, "creation_date": 1575744049, "answer_id": 59229135, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/59229135#59229135", "title": "Singleton with parameter in Kotlin", "body": "<p>I saw all the answers. I know this is a repeated answer but if we use the synchronized keyword on the method declaration, it will synchronize the whole method to the object or class. And <em>synchronized</em> block is not deprecated yet.</p>\n\n<p>You can use the following utility class to get the singleton behavior.</p>\n\n<pre><code>open class SingletonWithContextCreator&lt;out T : Any&gt;(val creator: (Context) -&gt; T) {\n    @Volatile\n    private var instance: T? = null\n\n    fun with(context: Context): T = instance ?: synchronized(this) {\n        instance ?: creator(context).apply { instance = this }\n    }\n}\n</code></pre>\n\n<p>You can extend the above-mentioned class whichever class you wanted to make singleton.</p>\n\n<p>In your case the following is the code to make <strong>TasksLocalDataSource</strong> class singleton.</p>\n\n<pre><code>companion object : SingletonWithContextCreator&lt;TasksDataSource&gt;(::TasksLocalDataSource)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 786, "user_id": 6737970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lybfo.jpg?s=128&g=1", "display_name": "Duc Thang", "link": "https://stackoverflow.com/users/6737970/duc-thang"}, "is_accepted": false, "score": 1, "last_activity_date": 1609581584, "last_edit_date": 1609581584, "creation_date": 1609581236, "answer_id": 65537832, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin/65537832#65537832", "title": "Singleton with parameter in Kotlin", "body": "<p>If you looking for a base SingletonHolder class with more than one argument. I had created the SingletonHolder generic class, which supports to create only one instance of the singleton class with one argument, two arguments, and three arguments.</p>\n<p><a href=\"https://github.com/tranducthang1505/KotlinUtils/blob/main/SingletonHolder.kts\" rel=\"nofollow noreferrer\">link Github of the base class here</a></p>\n<p><strong>Non-argument (default of Kotlin):</strong></p>\n<pre><code>object AppRepository \n</code></pre>\n<p><strong>One argument (from an example code in the above link):</strong></p>\n<pre><code>class AppRepository private constructor(private val db: Database) {\n    companion object : SingleArgSingletonHolder&lt;AppRepository, Database&gt;(::AppRepository)\n}\n// Use\nval appRepository =  AppRepository.getInstance(db)\n</code></pre>\n<p><strong>Two arguments:</strong></p>\n<pre><code>class AppRepository private constructor(private val db: Database, private val apiService: ApiService) {\n    companion object : PairArgsSingletonHolder&lt;AppRepository, Database, ApiService&gt;(::AppRepository)\n}\n// Use\nval appRepository =  AppRepository.getInstance(db, apiService)\n</code></pre>\n<p><strong>Three arguments:</strong></p>\n<pre><code>class AppRepository private constructor(\n   private val db: Database,\n   private val apiService: ApiService,\n   private val storage : Storage\n) {\n   companion object : TripleArgsSingletonHolder&lt;AppRepository, Database, ApiService, Storage&gt;(::AppRepository)\n}\n// Use\nval appRepository =  AppRepository.getInstance(db, apiService, storage)\n</code></pre>\n<p><strong>More than 3 arguments:</strong></p>\n<p>To implement this case, I suggest creating a config object to pass to the singleton constructor.</p>\n"}], "owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50309, "favorite_count": 27, "accepted_answer_id": 45943282, "answer_count": 12, "score": 82, "last_activity_date": 1618230633, "creation_date": 1478165780, "question_id": 40398072, "link": "https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin", "title": "Singleton with parameter in Kotlin", "body": "<p>I am trying to convert an Android app from Java to Kotlin. There are a few singletons in the app. I used a companion object for the singletons without constructor parameters. There is another singleton that takes a constructor parameter.</p>\n\n<p>Java code:</p>\n\n<pre><code>public class TasksLocalDataSource implements TasksDataSource {\n\n    private static TasksLocalDataSource INSTANCE;\n\n    private TasksDbHelper mDbHelper;\n\n    // Prevent direct instantiation.\n    private TasksLocalDataSource(@NonNull Context context) {\n        checkNotNull(context);\n        mDbHelper = new TasksDbHelper(context);\n    }\n\n    public static TasksLocalDataSource getInstance(@NonNull Context context) {\n        if (INSTANCE == null) {\n            INSTANCE = new TasksLocalDataSource(context);\n        }\n        return INSTANCE;\n    }\n}\n</code></pre>\n\n<p>My solution in kotlin:</p>\n\n<pre><code>class TasksLocalDataSource private constructor(context: Context) : TasksDataSource {\n\n    private val mDbHelper: TasksDbHelper\n\n    init {\n        checkNotNull(context)\n        mDbHelper = TasksDbHelper(context)\n    }\n\n    companion object {\n        lateinit var INSTANCE: TasksLocalDataSource\n        private val initialized = AtomicBoolean()\n\n        fun getInstance(context: Context) : TasksLocalDataSource {\n            if(initialized.getAndSet(true)) {\n                INSTANCE = TasksLocalDataSource(context)\n            }\n            return INSTANCE\n        }\n    }\n}\n</code></pre>\n\n<p>Am I missing anything? Thread safety? Laziness ? </p>\n\n<p>There were a few similar questions but I don't like the answers :)</p>\n"}, {"tags": ["intellij-idea", "gradle", "junit", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1478151848, "post_id": 40394082, "comment_id": 68039994, "body": "For future reference: the &quot;Gradle projects&quot; panel can be made visible by selecting View \u2192 Tool Windows \u2192 Gradle from the menus."}, {"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 3, "creation_date": 1478153218, "post_id": 40394082, "comment_id": 68040415, "body": "Thanks! The one other missing piece of the puzzle was that I didn&#39;t have my sources in the right places. By default Gradle wants them under <code>src&#47;main&#47;kotlin</code> and <code>src&#47;test&#47;kotlin</code>, apparently."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1478157010, "post_id": 40394082, "comment_id": 68041844, "body": "FYI, IntelliJ IDEA has a short cut <code>Ctrl+Shift+A</code> <a href=\"https://www.jetbrains.com/help/idea/2016.2/navigating-to-action.html\" rel=\"nofollow noreferrer\">&quot;Navigating to Action&quot;</a>. That&#39;s what @hotkey meant to use when he mentioned <code>Refresh all Gradle projects</code> action"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1592795527, "post_id": 40394082, "comment_id": 110542224, "body": "The link for Junit5 is broken. Also, how do we <code>Refresh all Gradle projects</code> in the more recent versions of IntelliJ IDEA?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1478172983, "last_edit_date": 1592644375, "creation_date": 1478148810, "answer_id": 40394082, "question_id": 40392242, "link": "https://stackoverflow.com/questions/40392242/how-can-i-get-my-junit-tests-to-compile-and-run-in-my-kotlingradle-project/40394082#40394082", "title": "How can I get my JUnit tests to compile and run in my Kotlin+Gradle project?", "body": "<p>You need to add JUnit as a dependency to your <code>build.gradle</code> (root scope):</p>\n<pre><code>dependencies {\n    //... \n    testCompile &quot;junit:junit:4.12&quot;\n}\n</code></pre>\n<p><sup>It's a bit more complicated for Junit 5, it requires <a href=\"https://github.com/junit-team/junit5-samples/tree/master/junit5-gradle-consumer\" rel=\"nofollow noreferrer\">configuring the JUnit Gradle plugin</a> in <code>build.gradle</code></sup></p>\n<ol>\n<li><p>Since IntelliJ IDEA interprets your Gradle project and synchronizes its internal project representation with the Gradle project, after a refresh it will see JUnit in the tests classpath.</p>\n</li>\n<li><p>Gradle will run the tests if you run the <code>test</code> task, either by running <code>gradlew test</code> in terminal or in IntelliJ IDEA: <em>Gradle projects (panel on the right)</em> \u2192 <em>Tasks</em> \u2192 <em>verification</em> \u2192 <em>test</em>.</p>\n</li>\n<li><p>As said in #1, IntelliJ IDEA has its own project representation, and it may actually differ from what it imports from Gradle project (e.g. if you manually mark as sources directories different from those which Gradle project layout defines).</p>\n<p>You can make IntelliJ IDEA synchronize its project structure with your <code>build.gradle</code> by running <em>Refresh all Gradle projects</em> action (can be found in the <em>Gradle projects</em> panel), or enable <em>Use auto-import</em> for your Gradle project in Settings.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5258, "favorite_count": 1, "accepted_answer_id": 40394082, "answer_count": 1, "score": 7, "last_activity_date": 1478172983, "creation_date": 1478135156, "last_edit_date": 1592644375, "question_id": 40392242, "link": "https://stackoverflow.com/questions/40392242/how-can-i-get-my-junit-tests-to-compile-and-run-in-my-kotlingradle-project", "title": "How can I get my JUnit tests to compile and run in my Kotlin+Gradle project?", "body": "<p>I have created a Kotlin+Gradle project as per <a href=\"https://stackoverflow.com/q/40391398/90848\">this previous question</a>. I added two source files to it:</p>\n<h3>src/HelloWorld.kt</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>package com.example.hello\n\nfun main(args : Array&lt;String&gt;) { \n  println(&quot;Hello, world!&quot;) \n}\n</code></pre>\n<h3>tests/HelloWorldTest.kt</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>package com.example.hello\n\nimport org.junit.Assert\nimport org.junit.Test\n\nclass HelloWorldTest {\n    @Test\n    fun testPasses() {\n        Assert.assertTrue(true)\n    }\n\n    @Test\n    fun testFails() {\n        Assert.assertTrue(false)\n    }\n}\n</code></pre>\n<p>I have also marked the directory <code>src/</code> as a sources root and <code>test/</code> as a test sources root.</p>\n<p>If I create the exact same directory structure with these source files elsewhere and create a non-Gradle IntelliJ project around it I am able to compile and run this code, including the tests.</p>\n<p>In my Gradle version of the project, however, I can't build the tests from IntelliJ IDEA. I get the following errors:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error:(3, 12) Kotlin: Unresolved reference: junit\nError:(4, 12) Kotlin: Unresolved reference: junit\nError:(7, 6) Kotlin: Unresolved reference: Test\nError:(9, 9) Kotlin: Unresolved reference: Assert\nError:(12, 6) Kotlin: Unresolved reference: Test\nError:(14, 9) Kotlin: Unresolved reference: Assert\n</code></pre>\n<p>Strangely, if I run <code>gradle test</code> (or <code>./gradlew test</code> after building the wrapper) the build succeeds without error, but the tests are not run.</p>\n<ol>\n<li>How do I add JUnit in such a way that IntelliJ IDEA can see it?</li>\n<li>How to I get Gradle to actually run the tests?</li>\n<li>Why are IntelliJ IDEA and Gradle behaving differently, and how can I ensure that they have the same behavior when I build or run tests in the future?</li>\n</ol>\n"}]