[{"tags": ["android", "kotlin", "illegalargumentexception"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1481730379, "post_id": 41146221, "comment_id": 69495581, "body": "Well check inside <code>PrefsFragment</code> if all <code>savedInstanceState</code>s are of type <code>Bundle?</code>."}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1481731341, "post_id": 41146221, "comment_id": 69496281, "body": "Yes, they are, and whenever I access them, I guard this against it being <code>null</code>, with the exception of when I pass it to super."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1481737734, "post_id": 41146221, "comment_id": 69500307, "body": "Show us the error stacktrace, please."}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1481747569, "post_id": 41146221, "comment_id": 69505465, "body": "@miensol Sorry, I also added the source code."}], "answers": [{"comments": [{"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1481798657, "post_id": 41151684, "comment_id": 69525126, "body": "OK, so, apart from me completely missing it, how would I be normally able to tell? The stack trace links to line 34, which is nearly one hundred lines above <code>onCreatePreferences</code>\u2026"}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1481799232, "post_id": 41151684, "comment_id": 69525507, "body": "Besides, I made that change and I get exactly the same stack trace."}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 1, "creation_date": 1481799375, "post_id": 41151684, "comment_id": 69525581, "body": "Hah, my bad, this time it was <code>rootKey</code> (which is weird in its own right, but I guess OK, I fixed it)."}, {"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1481801142, "post_id": 41151684, "comment_id": 69526578, "body": "Sorry, I&#39;m confused. In the interface, the signature <code>public abstract void onCreatePreferences(Bundle savedInstanceState, String rootKey);</code> does not say either of those are <code>@Nullable</code>, so really, how am I supposed to know this stuff in advance?"}, {"owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "reply_to_user": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 1, "creation_date": 1481813356, "post_id": 41151684, "comment_id": 69534369, "body": "You can&#39;t.   It is pitfall of interfacing with Java code (and writing in Java in the first place) -- you can&#39;t tell if a particular reference is nullable or not.  Unless it is annotated as <code>@NonNull</code>,  it is best to assume it is nullable."}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": true, "score": 16, "last_activity_date": 1481747692, "creation_date": 1481747692, "answer_id": 41151684, "question_id": 41146221, "link": "https://stackoverflow.com/questions/41146221/fragmentmanager-throws-illegalargumentexception-in-kotlin/41151684#41151684", "title": "FragmentManager throws IllegalArgumentException in Kotlin", "body": "<p>The exception isn't actually coming from that code.  It is coming from your <code>CalculatorScreen.PrefsFragment.onCreatePreferences()</code> method.  If you look there, it looks like -- </p>\n\n<p><code>override fun onCreatePreferences(savedInstanceState: Bundle, rootKey : String)</code> </p>\n\n<p>and it should be the following to allow <code>savedInstanceState</code> to be <code>null</code> --</p>\n\n<p><code>override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey : String)</code></p>\n"}], "owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1918, "favorite_count": 0, "accepted_answer_id": 41151684, "answer_count": 1, "score": 4, "last_activity_date": 1481747692, "creation_date": 1481729095, "last_edit_date": 1481745914, "question_id": 41146221, "link": "https://stackoverflow.com/questions/41146221/fragmentmanager-throws-illegalargumentexception-in-kotlin", "title": "FragmentManager throws IllegalArgumentException in Kotlin", "body": "<p>I have the following method in my <code>Fragment</code></p>\n\n<pre><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    super.onActivityCreated(savedInstanceState)\n\n    val fm = childFragmentManager\n    var prefsFragment: PrefsFragment? = fm.findFragmentByTag(tableName) as PrefsFragment?\n    if (prefsFragment == null) {\n        prefsFragment = PrefsFragment()\n        val ft = fm.beginTransaction()\n        ft.add(R.id.parameters_fragment_container, prefsFragment, tableName)\n        ft.commit()\n        fm.executePendingTransactions()\n    }\n}\n</code></pre>\n\n<p>I have to say this is what the Java->Kotlin automagic translator did with my previous Java code (save for the <code>?</code> at the end of the line where I find the <code>PrefsFragment</code> by tag), so it may not be entirely kosher. I'm learning Kotlin by doing.</p>\n\n<p>Now, when I call <code>executePendingTransactions()</code>, my app crashes throwing <code>java.lang.IllegalArgumentException</code> with error message \"Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter savedInstanceState\". Now, yes, savedInstanceState is in fact null, but what does it have to do with the call that apparently throws the exception? I made sure that no other values/variables are null, so I'd trust the error message... but why?</p>\n\n<p><strong>EDIT</strong> Here is the stack trace, and the source code that's giving me nightmares</p>\n\n<p><a href=\"https://gist.github.com/Morpheu5/8ec7e2064f53679405769b43c64f2cb7\" rel=\"nofollow noreferrer\">https://gist.github.com/Morpheu5/8ec7e2064f53679405769b43c64f2cb7</a></p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n                  Process: net.morpheu5.bleedingscorecalculator, PID: 2685\n                  java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter savedInstanceState\n                      at net.morpheu5.bleedingscorecalculator.CalculatorScreen$PrefsFragment.onCreatePreferences(CalculatorScreen.kt:0)\n                      at android.support.v7.preference.PreferenceFragmentCompat.onCreate(PreferenceFragmentCompat.java:223)\n                      at android.support.v4.app.Fragment.performCreate(Fragment.java:2075)\n                      at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1060)\n                      at android.support.v4.app.BackStackRecord.setLastIn(BackStackRecord.java:838)\n                      at android.support.v4.app.BackStackRecord.calculateFragments(BackStackRecord.java:861)\n                      at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:719)\n                      at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1682)\n                      at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:594)\n                      at net.morpheu5.bleedingscorecalculator.CalculatorScreen.onActivityCreated(CalculatorScreen.kt:34)\n                      at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:2096)\n                      at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1138)\n                      at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1295)\n                      at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:801)\n                      at android.support.v4.app.FragmentManagerImpl.execSingleAction(FragmentManager.java:1643)\n                      at android.support.v4.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:679)\n                      at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:143)\n                      at android.support.v4.view.ViewPager.populate(ViewPager.java:1272)\n                      at android.support.v4.view.ViewPager.populate(ViewPager.java:1120)\n                      at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1646)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.support.design.widget.CoordinatorLayout.onMeasureChild(CoordinatorLayout.java:703)\n                      at android.support.design.widget.HeaderScrollingViewBehavior.onMeasureChild(HeaderScrollingViewBehavior.java:90)\n                      at android.support.design.widget.AppBarLayout$ScrollingViewBehavior.onMeasureChild(AppBarLayout.java:1367)\n                      at android.support.design.widget.CoordinatorLayout.onMeasure(CoordinatorLayout.java:768)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.support.v7.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:139)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1464)\n                      at android.widget.LinearLayout.measureVertical(LinearLayout.java:758)\n                      at android.widget.LinearLayout.onMeasure(LinearLayout.java:640)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1464)\n                      at android.widget.LinearLayout.measureVertical(LinearLayout.java:758)\n                      at android.widget.LinearLayout.onMeasure(LinearLayout.java:640)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n                      at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n                      at com.android.internal.policy.DecorView.onMeasure(DecorView.java:689)\n                      at android.view.View.measure(View.java:19857)\n                      at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:2275)\nE/AndroidRuntime:     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1366)\n                      at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1619)\n                      at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1254)\n                      at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6337)\n                      at android.view.Choreographer$CallbackRecord.run(Choreographer.java:874)\n                      at android.view.Choreographer.doCallbacks(Choreographer.java:686)\n                      at android.view.Choreographer.doFrame(Choreographer.java:621)\n                      at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:860)\n                      at android.os.Handler.handleCallback(Handler.java:751)\n                      at android.os.Handler.dispatchMessage(Handler.java:95)\n                      at android.os.Looper.loop(Looper.java:154)\n                      at android.app.ActivityThread.main(ActivityThread.java:6119)\n                      at java.lang.reflect.Method.invoke(Native Method)\n                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n</code></pre>\n"}, {"tags": ["java", "generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 4, "last_activity_date": 1481737627, "last_edit_date": 1481737627, "creation_date": 1481710186, "answer_id": 41139882, "question_id": 41139538, "link": "https://stackoverflow.com/questions/41139538/java-to-kotlin-generics-translation/41139882#41139882", "title": "Java to Kotlin generics translation", "body": "<p>One way would be to employ <a href=\"https://en.wikipedia.org/wiki/Recursive_data_type\" rel=\"nofollow noreferrer\">recursive type definition</a> like so:</p>\n\n<pre><code>interface BaseJView&lt;TSelf : BaseJView&lt;TSelf, P&gt;, P : BaseJPresenter&lt;P, TSelf&gt;&gt; {\n    fun createPresenter(): P\n}\n\ninterface BaseJPresenter&lt;TSelf : BaseJPresenter&lt;TSelf, V&gt;, V : BaseJView&lt;V, TSelf&gt;&gt; {\n    fun bindView(view: V)\n}\n</code></pre>\n\n<p>You can then have:</p>\n\n<pre><code>class Presenter : BaseJPresenter&lt;Presenter, View&gt; {\n    override fun bindView(view: View) { ... }\n}\nclass View : BaseJView&lt;View, Presenter&gt; {\n    override fun createPresenter(): Presenter { ... }\n}\n</code></pre>\n"}], "owner": {"reputation": 1653, "user_id": 4755017, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JXnt4.jpg?s=128&g=1", "display_name": "Dennis Zinkovski", "link": "https://stackoverflow.com/users/4755017/dennis-zinkovski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 41139882, "answer_count": 1, "score": 4, "last_activity_date": 1481737627, "creation_date": 1481709219, "last_edit_date": 1481710342, "question_id": 41139538, "link": "https://stackoverflow.com/questions/41139538/java-to-kotlin-generics-translation", "title": "Java to Kotlin generics translation", "body": "<p>I want move to Kotlin old Java project, and found interesting, can't translate this to Kotlin without pain</p>\n\n<pre><code>public interface BaseJView&lt;P extends BaseJPresenter&gt; {\n    P createPresenter();\n}\npublic interface BaseJPresenter&lt;V extends BaseJView&gt; {\n    void bindView(V view);\n}\n</code></pre>\n\n<p>Can you give advice, how I can achive this?</p>\n"}, {"tags": ["javascript", "node.js", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1481632359, "post_id": 41119550, "comment_id": 69445910, "body": "Do you have the standard library included?"}, {"owner": {"reputation": 1937, "user_id": 599944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736672918990d157fcad2513571f9505?s=128&d=identicon&r=PG", "display_name": "Leandroid", "link": "https://stackoverflow.com/users/599944/leandroid"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1481633842, "post_id": 41119550, "comment_id": 69446892, "body": "I included only the files generated by Kotlin. The kotlin.js file is at node_modules folder, so it&#39;s included. I referenced the generated output.js javascript file (that requires kotlin.js to work) and called the function testSubtraction."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1481650659, "post_id": 41119550, "comment_id": 69458455, "body": "Did you install kotlin.js manually? I don&#39;t see it in package.json?"}, {"owner": {"reputation": 1937, "user_id": 599944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736672918990d157fcad2513571f9505?s=128&d=identicon&r=PG", "display_name": "Leandroid", "link": "https://stackoverflow.com/users/599944/leandroid"}, "edited": false, "score": 0, "creation_date": 1481651265, "post_id": 41119550, "comment_id": 69458809, "body": "Yes. It&#39;s a file generated by Gradle, that will be created under node_modules. I first build with gradle to convert the kotlin to JavaScript, and then I run the NodeJS application."}], "answers": [{"tags": [], "owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "is_accepted": true, "score": 3, "last_activity_date": 1481704490, "last_edit_date": 1481704490, "creation_date": 1481652963, "answer_id": 41127911, "question_id": 41119550, "link": "https://stackoverflow.com/questions/41119550/kotlin-conversion-to-javascript-error-subtract-is-not-a-function/41127911#41127911", "title": "Kotlin conversion to Javascript error: &quot;subtract is not a function&quot;", "body": "<p>Kotlin <code>Long</code> is not JS <code>number</code> and the problem is that you call <code>testSubtraction</code> with JS numbers.</p>\n\n<p>If you want to work with JS <code>number</code> use <code>Int</code> in Kotlin code.</p>\n\n<p>If you want to pass JS <code>number</code> where Kotlin expected <code>Long</code> use <code>Kotlin.Long.fromNumber</code> or <code>Kotlin.Long.fromInt</code> to create <code>Long</code></p>\n"}], "owner": {"reputation": 1937, "user_id": 599944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736672918990d157fcad2513571f9505?s=128&d=identicon&r=PG", "display_name": "Leandroid", "link": "https://stackoverflow.com/users/599944/leandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 41127911, "answer_count": 1, "score": 3, "last_activity_date": 1499333252, "creation_date": 1481627168, "last_edit_date": 1499333252, "question_id": 41119550, "link": "https://stackoverflow.com/questions/41119550/kotlin-conversion-to-javascript-error-subtract-is-not-a-function", "title": "Kotlin conversion to Javascript error: &quot;subtract is not a function&quot;", "body": "<p>I'm having an issue when converting a Kotlin code to JavaScript. Whenever I use subtraction or addition, it converts to an invalid JavaScript code.</p>\n\n<p>I have a Kotlin JavaScript project, configured with Gradle. The compiler is configured to generate output to commonjs, and I created a simple NodeJS application to execute the generated code.</p>\n\n<p>Original Kotlin file:</p>\n\n<pre><code>import kotlin.js.JsName\n\n@JsName(\"testSubtraction\")\nfun testSubtraction(a: Long, b: Long) : Long {\n    return a - b\n}\n</code></pre>\n\n<p>Generated output file:</p>\n\n<pre><code>module.exports = function (Kotlin) {\n  'use strict';\n  var _ = Kotlin.defineRootPackage(null, /** @lends _ */ {\n    testSubtraction: function (a, b) {\n      return a.subtract(b);\n    }\n  });\n  Kotlin.defineModule('output', _);\n  return _;\n}(require('kotlin'));\n\n//@ sourceMappingURL=output.js.map\n</code></pre>\n\n<p>The error that I get when executing the code is:\n<strong>TypeError: a.subtract is not a function</strong></p>\n\n<p>I have tested using Kotlin 1.0.5-2 and 1.1-M03, but they both convert with this same problem.</p>\n\n<h2>How do I solve this problem?</h2>\n\n<p>The workaround solution that I have found so far is defining this method manually in my application, but I didn't like it:</p>\n\n<pre><code>Number.prototype.subtract = function(a) {\n    return this.valueOf() - a;\n}\n</code></pre>\n\n<p>I have created a sample project to demonstrate this issue at GitHub: <a href=\"https://github.com/leandro-dev/test_kotlin_js\" rel=\"nofollow noreferrer\">https://github.com/leandro-dev/test_kotlin_js</a></p>\n"}, {"tags": ["android", "xamarin.android", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1481608557, "post_id": 41114423, "comment_id": 69433186, "body": "It&#39;s Kotlin a JVM language? How would Xamarin operate with that?"}, {"owner": {"reputation": 10428, "user_id": 5610850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SpulC.jpg?s=128&g=1", "display_name": "Elvis Xia - MSFT", "link": "https://stackoverflow.com/users/5610850/elvis-xia-msft"}, "edited": false, "score": 0, "creation_date": 1481694730, "post_id": 41114423, "comment_id": 69474922, "body": "This error means Kotlin runtime library is not referneced, please see <a href=\"https://discuss.kotlinlang.org/t/java-lang-noclassdeffounderror-kotlin-jvm-internal-reflection/287\" rel=\"nofollow noreferrer\">this link</a>. As far as I know, currently there is no official way to support kotlin in Xamarin.Android."}, {"owner": {"reputation": 2133, "user_id": 1928691, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/trtts.png?s=128&g=1", "display_name": "Federico Navarrete", "link": "https://stackoverflow.com/users/1928691/federico-navarrete"}, "edited": false, "score": 1, "creation_date": 1561155639, "post_id": 41114423, "comment_id": 99985111, "body": "I believe that RWIL should be the accepted answer."}], "answers": [{"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 0, "last_activity_date": 1482445310, "creation_date": 1482445310, "answer_id": 41292501, "question_id": 41114423, "link": "https://stackoverflow.com/questions/41114423/xamarin-android-and-kotlin-library/41292501#41292501", "title": "Xamarin Android and Kotlin Library", "body": "<p>Nowadays, there's no official way to use Kotlin - which is Java Virtual Machine(JVM) language - with C# programming language, I mean Xamarin projects. If you're looking similar solution try to use F# programming language which may be a pretty similar to Kotlin</p>\n"}, {"tags": [], "owner": {"reputation": 6549, "user_id": 3708094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlmSU.jpg?s=128&g=1", "display_name": "RWIL", "link": "https://stackoverflow.com/users/3708094/rwil"}, "is_accepted": true, "score": 9, "last_activity_date": 1545649192, "creation_date": 1545649192, "answer_id": 53912535, "question_id": 41114423, "link": "https://stackoverflow.com/questions/41114423/xamarin-android-and-kotlin-library/53912535#53912535", "title": "Xamarin Android and Kotlin Library", "body": "<p>This error could indicate that your Xamarin code uses a native Android library or code that is written in <strong>Kotlin</strong></p>\n\n<p>Because the <code>Kotlin StdLib</code> is not packaged with the library, you should add <code>Xamarin.Kotlin.StdLib</code> in your <code>NuGet</code> packages of your Xamarin project so the Xamarin App can correctly interpret the library or code written in Kotlin</p>\n"}], "owner": {"reputation": 633, "user_id": 3733294, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/RBRzU.jpg?s=128&g=1", "display_name": "EddyLee", "link": "https://stackoverflow.com/users/3733294/eddylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 0, "accepted_answer_id": 53912535, "answer_count": 2, "score": 4, "last_activity_date": 1546007606, "creation_date": 1481607929, "question_id": 41114423, "link": "https://stackoverflow.com/questions/41114423/xamarin-android-and-kotlin-library", "title": "Xamarin Android and Kotlin Library", "body": "<p>I've working with Xamarin.Android , when i run project have exception Java.Lang.NoClassDefFoundError : Failed resolution of : Lkotlin/jvm/internal/Intrinsics;</p>\n\n<p>Here is picture : \n<a href=\"https://i.stack.imgur.com/nhCgJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nhCgJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>How i can fix it ?</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": false, "score": 7, "last_activity_date": 1481615632, "creation_date": 1481615632, "answer_id": 41116018, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/41116018#41116018", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>Kotlin 1.0 always produces Java 6 class files. Kotlin 1.1 will support generating Java 8 class files by passing <code>-jvm-target 1.8</code> to the compiler. See</p>\n\n<p><a href=\"https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/</a></p>\n\n<p>for a discussion of Java 7/8 support.</p>\n"}, {"comments": [{"owner": {"reputation": 1439, "user_id": 108034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8500c09e0cb583959da82df41ccb6a56?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/108034/mark"}, "edited": false, "score": 5, "creation_date": 1491584061, "post_id": 42276271, "comment_id": 73634997, "body": "Looks like you may need to duplicate this in a compileTestKotlin block to also apply this config to test code.  If I&#39;m wrong about this, though, I&#39;d like to know about it and why."}], "tags": [], "owner": {"reputation": 895, "user_id": 485704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51dba7596fa10776cd51109f148b7da3?s=128&d=identicon&r=PG", "display_name": "Debop", "link": "https://stackoverflow.com/users/485704/debop"}, "is_accepted": false, "score": 35, "last_activity_date": 1487254128, "creation_date": 1487254128, "answer_id": 42276271, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/42276271#42276271", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>Kotlin 1.1 in Gradle. in console you have error about <code>inline</code> (your installed compiler is 1.0.x)\nIf run gradle task in IntelliJ IDEA, your code compiled by kotlin 1.1 compiler</p>\n\n<pre><code>compileKotlin {\n    sourceCompatibility = JavaVersion.VERSION_1_8\n    targetCompatibility = JavaVersion.VERSION_1_8\n\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n        apiVersion = \"1.1\"\n        languageVersion = \"1.1\"\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1363, "user_id": 1640235, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Zmgq9.jpg?s=128&g=1", "display_name": "Aleksandar Stefanovi\u0107", "link": "https://stackoverflow.com/users/1640235/aleksandar-stefanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1496921170, "post_id": 43623674, "comment_id": 75865873, "body": "In which file should this be set?"}, {"owner": {"reputation": 81, "user_id": 1201188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff27ab15b5910bc75fdcddcfd1aca2cc?s=128&d=identicon&r=PG", "display_name": "happy15", "link": "https://stackoverflow.com/users/1201188/happy15"}, "reply_to_user": {"reputation": 1363, "user_id": 1640235, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Zmgq9.jpg?s=128&g=1", "display_name": "Aleksandar Stefanovi\u0107", "link": "https://stackoverflow.com/users/1640235/aleksandar-stefanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1497021741, "post_id": 43623674, "comment_id": 75919417, "body": "In you Pom.xml, under the properties tag."}], "tags": [], "owner": {"reputation": 81, "user_id": 1201188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff27ab15b5910bc75fdcddcfd1aca2cc?s=128&d=identicon&r=PG", "display_name": "happy15", "link": "https://stackoverflow.com/users/1201188/happy15"}, "is_accepted": false, "score": 2, "last_activity_date": 1493171285, "creation_date": 1493171285, "answer_id": 43623674, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/43623674#43623674", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>For anyone like me who use maven to build mixed code of kotlin and java in intellij , you need to set </p>\n\n<pre><code>&lt;kotlin.compiler.jvmTarget&gt;1.8&lt;/kotlin.compiler.jvmTarget&gt;\n</code></pre>\n\n<p>because maven build doesn't respect jvmTarget set in project setting.</p>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "edited": false, "score": 3, "creation_date": 1533840242, "post_id": 44297713, "comment_id": 90506492, "body": "Any idea how can I configure different jvmTargets for <code>compileKotlin</code> and <code>compileTestKotlin</code> using Kotlin DSL?"}, {"owner": {"reputation": 868, "user_id": 1295333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13a79d6225a02815f7fd219fa2c03e3e?s=128&d=identicon&r=PG", "display_name": "programaths", "link": "https://stackoverflow.com/users/1295333/programaths"}, "edited": false, "score": 4, "creation_date": 1546777553, "post_id": 44297713, "comment_id": 94956245, "body": "I would do this:  <code>org.jetbrains.kotlin.gradle.tasks.KotlinCompile::class.java</code>"}, {"owner": {"reputation": 1187, "user_id": 2057782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/a1WaU.jpg?s=128&g=1", "display_name": "AouledIssa", "link": "https://stackoverflow.com/users/2057782/aouledissa"}, "edited": false, "score": 0, "creation_date": 1591041112, "post_id": 44297713, "comment_id": 109901243, "body": "@seanf Do you know of a way to extend <code>kotlinCompile</code> task in gradle? i want to write my own <code>kotlinCompile</code> task"}], "tags": [], "owner": {"reputation": 5826, "user_id": 14379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77ca2a8cac1b10c9ef94c42e1263ac6?s=128&d=identicon&r=PG", "display_name": "seanf", "link": "https://stackoverflow.com/users/14379/seanf"}, "is_accepted": true, "score": 78, "last_activity_date": 1496597568, "last_edit_date": 1496597568, "creation_date": 1496285404, "answer_id": 44297713, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/44297713#44297713", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>As Mark pointed out on Debop's answer, you have to configure both <code>compileKotlin</code> and <code>compileTestKotlin</code>. You can do it without duplication this way:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {\n  kotlinOptions {\n    jvmTarget = \"1.8\"\n  }\n}\n</code></pre>\n\n<p>For a pure Kotlin project, I don't think the options <code>sourceCompatibility</code> and <code>targetCompatibility</code> do anything, so you may be able to remove them.</p>\n\n<p>Ref: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#compiler-options\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/using-gradle.html#compiler-options</a></p>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "edited": false, "score": 6, "creation_date": 1533840387, "post_id": 45994990, "comment_id": 90506549, "body": "How can I achieve the same for <code>compileTestKotlin</code>?"}, {"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "reply_to_user": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "edited": false, "score": 1, "creation_date": 1550523752, "post_id": 45994990, "comment_id": 96292196, "body": "@jivimberg <code>compileTestKotlin</code> is also of the type <code>KotlinCompile</code>, so the <code>tasks.withType</code> block will configure all <code>KotlinCompile</code> tasks in the project."}, {"owner": {"reputation": 176, "user_id": 5067435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f798da0a725772797e973dd01e1301?s=128&d=identicon&r=PG&f=1", "display_name": "11m0", "link": "https://stackoverflow.com/users/5067435/11m0"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1552722414, "post_id": 45994990, "comment_id": 97126879, "body": "I think this does it for both @mkobit"}, {"owner": {"reputation": 397, "user_id": 4000934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f3c70dfa2ad2f0d499909b1bdf3a24?s=128&d=identicon&r=PG", "display_name": "sylwano", "link": "https://stackoverflow.com/users/4000934/sylwano"}, "edited": false, "score": 1, "creation_date": 1612456611, "post_id": 45994990, "comment_id": 116778599, "body": "The same solution in one line: <code>tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompi&zwnj;&#8203;le&gt; { kotlinOptions.jvmTarget = &quot;1.8&quot; }</code>"}], "tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 54, "last_activity_date": 1504249793, "creation_date": 1504249793, "answer_id": 45994990, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/45994990#45994990", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>In case someone uses gradle with <strong>kotlin-dsl</strong> instead of groovy:</p>\n\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\n// compile bytecode to java 8 (default is java 6)\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1550523712, "post_id": 53114457, "comment_id": 96292182, "body": "<code>kotlin-dsl</code> was already answered with better syntax at <a href=\"https://stackoverflow.com/a/45994990/627727\">stackoverflow.com/a/45994990/627727</a>"}], "tags": [], "owner": {"reputation": 736, "user_id": 5751213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaaf1f43517cd774bb1463f922a122b0?s=128&d=identicon&r=PG&f=1", "display_name": "leo.tan", "link": "https://stackoverflow.com/users/5751213/leo-tan"}, "is_accepted": false, "score": 1, "last_activity_date": 1541144357, "creation_date": 1541144357, "answer_id": 53114457, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/53114457#53114457", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>thx for seanf's anwser ,but if your DSL kotlin is 1.3.0: </p>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile::class.java).all {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2750, "user_id": 661598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BVAlk.png?s=128&g=1", "display_name": "wst", "link": "https://stackoverflow.com/users/661598/wst"}, "edited": false, "score": 0, "creation_date": 1559145703, "post_id": 56359267, "comment_id": 99332239, "body": "Thanks for posting but how your answer improves others? Does it have anything that&#39;s missing from the answers already provided?"}, {"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "reply_to_user": {"reputation": 2750, "user_id": 661598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BVAlk.png?s=128&g=1", "display_name": "wst", "link": "https://stackoverflow.com/users/661598/wst"}, "edited": false, "score": 0, "creation_date": 1559233041, "post_id": 56359267, "comment_id": 99364297, "body": "This is mix of few answers that uses consts and provides most idiomatic solution - ideal way of doing it"}], "tags": [], "owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "is_accepted": false, "score": 9, "last_activity_date": 1564925256, "last_edit_date": 1564925256, "creation_date": 1559128401, "answer_id": 56359267, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/56359267#56359267", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\n// JVM target applied to all Kotlin tasks across all subprojects\n\n// Kotlin DSL\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions.jvmTarget = JavaVersion.VERSION_1_8.toString()\n}\n\n//Groovy\ntasks.withType(KotlinCompile) {\n    kotlinOptions.jvmTarget = JavaVersion.VERSION_1_8\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13925, "user_id": 178433, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f0a7931509fe208105cdeec791c7ed04?s=128&d=identicon&r=PG", "display_name": "gMale", "link": "https://stackoverflow.com/users/178433/gmale"}, "edited": false, "score": 0, "creation_date": 1591072710, "post_id": 59125860, "comment_id": 109909501, "body": "For tests to work, I had to add a <code>compileTestKotlin</code> block, as well, with the same values."}], "tags": [], "owner": {"reputation": 1149, "user_id": 9834603, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aqJmC30usX4/AAAAAAAAAAI/AAAAAAAACdE/ih05zPS4W5o/photo.jpg?sz=128", "display_name": "Dmitry Kaltovich", "link": "https://stackoverflow.com/users/9834603/dmitry-kaltovich"}, "is_accepted": false, "score": 5, "last_activity_date": 1575206135, "creation_date": 1575206135, "answer_id": 59125860, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/59125860#59125860", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>In your <code>build.gradle.kts</code>:</p>\n\n<pre><code>    tasks {\n        val java = \"11\"\n\n        compileKotlin { \n           kotlinOptions { jvmTarget = java }\n           sourceCompatibility = java\n        }\n    }\n</code></pre>\n\n<p>Or like this:</p>\n\n<pre><code>tasks {\n    withType&lt;KotlinCompile&gt; { kotlinOptions { jvmTarget = \"11\" } }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 372, "user_id": 2085356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBrof.png?s=128&g=1", "display_name": "nazmul idris", "link": "https://stackoverflow.com/users/2085356/nazmul-idris"}, "is_accepted": false, "score": 0, "last_activity_date": 1603231724, "creation_date": 1603231724, "answer_id": 64454026, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8/64454026#64454026", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>If you're getting an error like this:\n<code>Cannot inline bytecode built with JVM target 1.8 into bytecode that is being built with JVM target 1.6. Please specify proper '-jvm-target' option</code>.</p>\n<p>Then, you can simply add the following in <code>build.gradle</code> (in Groovy) in order to tell kotlin to build using 1.8.</p>\n<pre><code>compileKotlin {\n    kotlinOptions {\n        jvmTarget = &quot;1.8&quot;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2750, "user_id": 661598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BVAlk.png?s=128&g=1", "display_name": "wst", "link": "https://stackoverflow.com/users/661598/wst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35494, "favorite_count": 8, "accepted_answer_id": 44297713, "answer_count": 9, "score": 57, "last_activity_date": 1603231724, "creation_date": 1481599638, "question_id": 41113268, "link": "https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8", "title": "How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?", "body": "<p>In Kotlin project, what is a proper Gradle script to make sure my classes will be compiled to byte code ver 52 (Java 8)?</p>\n\n<p>For some reason my classes are compiled as ver 50 (Java 6) even though I set up source and target compatibility. At least this is what Idea shows me when I open file from directory <code>build/classes/...</code> after building the project.</p>\n\n<p>My current set up looks like this.</p>\n\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = '1.0.5-2'\n        springBootVersion = '1.4.2.RELEASE'\n    }\n    repositories { mavenCentral() }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\")\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'org.springframework.boot'\n\ntasks.withType(JavaCompile) {\n    sourceCompatibility = JavaVersion.VERSION_1_8\n    targetCompatibility = JavaVersion.VERSION_1_8\n}\n\n## I also tried this and it hasn't helped\n#sourceCompatibility = 1.8\n#targetCompatibility = 1.8\n\nrepositories { mavenCentral() }\n\ndependencies {\n    compile(\"org.jetbrains.kotlin:kotlin-stdlib:${kotlinVersion}\")\n    compile('org.springframework.cloud:spring-cloud-starter-stream-rabbit')\n}\n\ndependencyManagement { imports { mavenBom \"org.springframework.cloud:spring-cloud-dependencies:Camden.SR2\" } }\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "is_accepted": true, "score": 10, "last_activity_date": 1481561206, "last_edit_date": 1481561206, "creation_date": 1481553868, "answer_id": 41103379, "question_id": 41102225, "link": "https://stackoverflow.com/questions/41102225/kotlins-generics-type-mismatch-in-generic-map-parameter/41103379#41103379", "title": "Kotlin&#39;s Generics: Type mismatch in generic map parameter", "body": "<p>The error is on this line:</p>\n\n<p><code>private val converters = HashMap&lt;String, ValueConverter&lt;Event&gt;&gt;()</code></p>\n\n<p>The values of this map are limited to <code>ValueConverter&lt;Event&gt;</code>. So if you have a class</p>\n\n<p><code>class FooEvent : Event</code></p>\n\n<p>and a value converter:</p>\n\n<p><code>ValueConverter&lt;FooEvent&gt;</code>, </p>\n\n<p>you couldn't store that value converter in your map. What you would actually want is a <code>*</code> star projection type.</p>\n\n<p><code>private val converters = HashMap&lt;String, ValueConverter&lt;*&gt;&gt;()</code></p>\n\n<p>Now you can put whatever value converter in the map.</p>\n\n<hr>\n\n<p>However, this uncovers another problem: How does</p>\n\n<p><code>fun &lt;E : Event&gt; convert(event: E): Float</code></p>\n\n<p>know what the generic type of the returned converter in the map is? After all, the map might contain multiple converters for different event types!</p>\n\n<p>IntelliJ promptly complains: </p>\n\n<p><img src=\"https://i.imgur.com/6Mf3dNZ.png\" alt=\"Out-projected type &#39;ValueConverter&lt;*&gt;?&#39; prohibits the use of &#39;public abstract fun convert(event: E): Float defined in ValueConverter&#39;.\"></p>\n\n<p>But you already know the generic type because your map key is the name of the generic type parameter!</p>\n\n<p>So simply cast the returned value by the map with force:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nfun &lt;E : Event&gt; convert(event: E): Float {\n    val converter = converters[event.javaClass.name] ?: return 0.0f\n    return (converter as ValueConverter&lt;E&gt;).convert(event)\n}\n</code></pre>\n\n<hr>\n\n<p>If you are curious why the compiler did not complain about your converter function earlier: Remember how your map could only hold <code>ValueConverter&lt;Event&gt;</code> and only that class? This means that the compiler knew you could pass any subclass of <code>Event</code> into this converter. Once you changed to a star projection type, the compiler doesn't know if this might be a <code>ValueConverter&lt;FooEvent&gt;</code>, or a <code>ValueConverter&lt;BazEvent&gt;</code>, etc. - making the effective function signature of a given converter in your map <code>convert(event: Nothing)</code>:<br>\n<img src=\"https://i.imgur.com/j6zvzeL.png\" alt=\"\"><br>\nbecause nothing is a valid input.</p>\n"}], "owner": {"reputation": 366, "user_id": 4522359, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-Ptg8KfuJ6sc/AAAAAAAAAAI/AAAAAAAAAHk/76172G2eRnw/photo.jpg?sz=128", "display_name": "Pablo Espantoso", "link": "https://stackoverflow.com/users/4522359/pablo-espantoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3759, "favorite_count": 1, "accepted_answer_id": 41103379, "answer_count": 1, "score": 5, "last_activity_date": 1481561206, "creation_date": 1481550059, "last_edit_date": 1481557141, "question_id": 41102225, "link": "https://stackoverflow.com/questions/41102225/kotlins-generics-type-mismatch-in-generic-map-parameter", "title": "Kotlin&#39;s Generics: Type mismatch in generic map parameter", "body": "<p>I have the following code that uses generics:</p>\n\n<pre><code>abstract class Event(val name: String)\n\ninterface ValueConverter&lt;E : Event&gt; {\n\n    fun convert(event: E): Float\n\n    fun getEventClass(): Class&lt;E&gt;\n\n}\n\nclass ValueConverters {\n\n    private val converters = HashMap&lt;String, ValueConverter&lt;Event&gt;&gt;()\n\n    fun &lt;E : Event&gt; register(converter: ValueConverter&lt;E&gt;) {\n        converters.put(converter.getEventClass().name, converter)\n    }\n\n    fun unregister(eventClass: Class&lt;Event&gt;) {\n        converters.remove(eventClass.name)\n    }\n\n    fun &lt;E : Event&gt; convert(event: E): Float {\n        return converters[event.javaClass.name]?.convert(event) ?: 0.0f\n    }\n\n    fun clear() {\n        converters.clear()\n    }\n\n}\n</code></pre>\n\n<p>But on this line: </p>\n\n<pre><code>converters.put(converter.getEventClass().name, converter)\n</code></pre>\n\n<p>it gives an error: </p>\n\n<blockquote>\n  <p>Type mismatch. Expected ValueConverter&lt;Event&gt;. Found ValueConverter&lt;E&gt;.</p>\n</blockquote>\n\n<p>I also tried something like this:</p>\n\n<pre><code>class ValueConverters {\n\n    private val converters = HashMap&lt;String, ValueConverter&lt;Event&gt;&gt;()\n\n    fun register(converter: ValueConverter&lt;Event&gt;) {\n        converters.put(converter.getEventClass().name, converter)\n    }\n\n    fun unregister(eventClass: Class&lt;Event&gt;) {\n        converters.remove(eventClass.name)\n    }\n\n    fun convert(event: Event): Float {\n        return converters[event.javaClass.name]?.convert(event) ?: 0.0f\n    }\n\n    fun clear() {\n        converters.clear()\n    }\n\n}\n</code></pre>\n\n<p>But the problem is when calling <code>ValueConverters.register()</code> with something like: </p>\n\n<pre><code>class SampleEvent1 : Event(name = SampleEvent1::class.java.name)\n\nclass SampleValueConverter1 : ValueConverter&lt;SampleEvent1&gt; {\n\n    override fun convert(event: SampleEvent1): Float = 0.2f\n\n    override fun getEventClass(): Class&lt;SampleEvent1&gt; = SampleEvent1::class.java\n\n}\n\nconverters.register(converter = SampleValueConverter1())\n</code></pre>\n\n<p>It also gives the similar Type mismatch error.</p>\n\n<p>How should I declare the generics so that I could use any class that implements ValueConverter and accepts any class that extends Event?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1481534660, "post_id": 41097546, "comment_id": 69399526, "body": "Do you want to programmatically or just visually?"}, {"owner": {"reputation": 20852, "user_id": 544406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/dPN4O.jpg?s=128&g=1", "display_name": "Dmitry Ryadnenko", "link": "https://stackoverflow.com/users/544406/dmitry-ryadnenko"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1481534714, "post_id": 41097546, "comment_id": 69399554, "body": "@nhaarman programmatically"}, {"owner": {"reputation": 26227, "user_id": 1429387, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/LVOVA.jpg?s=128&g=1", "display_name": "naXa", "link": "https://stackoverflow.com/users/1429387/naxa"}, "edited": false, "score": 0, "creation_date": 1481534853, "post_id": 41097546, "comment_id": 69399630, "body": "You probably can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html\" rel=\"nofollow noreferrer\"><code>KType.isMarkedNullable</code></a>. But I don&#39;t know how can you get a type of variable in Kotlin."}, {"owner": {"reputation": 20852, "user_id": 544406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/dPN4O.jpg?s=128&g=1", "display_name": "Dmitry Ryadnenko", "link": "https://stackoverflow.com/users/544406/dmitry-ryadnenko"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1481534986, "post_id": 41097546, "comment_id": 69399698, "body": "@nhaarman omg I know you, you are the mockito-kotlin guy! Great job working on that library btw!"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 3, "creation_date": 1481535469, "post_id": 41097546, "comment_id": 69399941, "body": "Re data class: <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/builtins/src/kotlin/reflect/KClass.kt#L117\" rel=\"nofollow noreferrer\">since Kotlin 1.1</a>, you can just do <code>MyClass::class.isData</code>"}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 20, "last_activity_date": 1481535346, "creation_date": 1481535346, "answer_id": 41097811, "question_id": 41097546, "link": "https://stackoverflow.com/questions/41097546/kotlin-from-java-is-a-field-nullable-or-not/41097811#41097811", "title": "Kotlin from Java: is a field nullable or not?", "body": "<p>If you have a <code>java.lang.reflect.Field</code> instance for a property, you can first obtain the original Kotlin representation of the property by converting it to the <code>kotlin.reflect.KProperty</code> instance with <code>kotlin.reflect.jvm.ReflectJvmMapping</code>, and then get the type and check its nullability or anything else:</p>\n\n<pre><code>public static boolean isNullable(Field field) {\n    KProperty&lt;?&gt; property = ReflectJvmMapping.getKotlinProperty(field);\n    return property.getType().isMarkedNullable();\n}\n</code></pre>\n"}], "owner": {"reputation": 20852, "user_id": 544406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/dPN4O.jpg?s=128&g=1", "display_name": "Dmitry Ryadnenko", "link": "https://stackoverflow.com/users/544406/dmitry-ryadnenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 3, "accepted_answer_id": 41097811, "answer_count": 1, "score": 14, "last_activity_date": 1522832798, "creation_date": 1481534384, "last_edit_date": 1522832798, "question_id": 41097546, "link": "https://stackoverflow.com/questions/41097546/kotlin-from-java-is-a-field-nullable-or-not", "title": "Kotlin from Java: is a field nullable or not?", "body": "<p>When accessing Kotlin classes from Java, is it possible during runtime to tell if a particular field is nullable or not? Also, is it possible to tell if a class is a data class?</p>\n\n<p>Even a guess would be sufficient for my purposes. Using reflection is also fine.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 4, "last_activity_date": 1481534762, "creation_date": 1481534762, "answer_id": 41097653, "question_id": 41097346, "link": "https://stackoverflow.com/questions/41097346/how-to-specify-kotlin-version/41097653#41097653", "title": "How to specify Kotlin version?", "body": "<p>The command line argument for this purpose is <code>-language-version</code> and its value should be a major.minor Kotlin release version, of which there are only two at the moment: 1.0 and 1.1.</p>\n\n<pre><code>kotlinc -language-version 1.0 source.kt\n</code></pre>\n\n<p>To make analysis in IntelliJ IDEA be aware of the version the source will be compiled against, you can create a facet (Project Settings -> Facets -> \"+\") and select the language version in the dropdown there.</p>\n"}], "owner": {"reputation": 839, "user_id": 6480695, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/yc6Qg.jpg?s=128&g=1", "display_name": "Aleksandr Tukallo", "link": "https://stackoverflow.com/users/6480695/aleksandr-tukallo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 41097653, "answer_count": 1, "score": 3, "last_activity_date": 1481534762, "creation_date": 1481533575, "question_id": 41097346, "link": "https://stackoverflow.com/questions/41097346/how-to-specify-kotlin-version", "title": "How to specify Kotlin version?", "body": "<p>I want to compile my Kotlin program using Kotlin <code>1.0.4</code>. What are the correct command line options for this purpose? I heard about <code>-version</code> option, but don't understand how to use it. <code>-version 1.0.4</code> doesn't work.</p>\n"}, {"tags": ["java", "android", "types", "casting", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 44, "last_activity_date": 1481542522, "last_edit_date": 1481542522, "creation_date": 1481461649, "answer_id": 41086509, "question_id": 41086296, "link": "https://stackoverflow.com/questions/41086296/smartcast-is-impossible-because-property-has-open-or-custom-getter/41086509#41086509", "title": "Smartcast is impossible because property has open or custom getter", "body": "<p>The key point here is that an <code>open</code> property or a property with a custom getter is not guaranteed to return the same value on successive calls to it. </p>\n\n<p>Therefore the compiler cannot be sure that, once the value received from the property has been checked, it is safe to assume that it will return the same object or even an object of the same type if called again.</p>\n\n<p>Example (quite simplified and synthetic, though):</p>\n\n<pre><code>open class Base {\n    open val value: List&lt;Int&gt; = ArrayList()\n}\n\nval b : Base = foo()\n\nfun printArrayList(list: ArrayList&lt;Int&gt;) { /* ... */ }\n\nif (b.value is ArrayList) { // first call\n    printArrayList(b.value) // second call, smart cast is impossible\n}\n</code></pre>\n\n<p>This code won't compile, because <code>printArrayList()</code> expects an <code>ArrayList</code> and  <code>b.value</code> is <code>open</code> -- that's what you get in your code. Now, let's make up a derived class that demonstrates what could go wrong:</p>\n\n<pre><code>class Derived : Base() {\n    private var counter = 0\n\n    override val value: List&lt;Int&gt;\n        get() {\n            ++counter\n            return if (counter % 2 == 0)\n                ArrayList() else\n                LinkedList()\n        }\n}\n\nval b = Derived()\nprintln(b.value.javaClass) // class java.util.LinkedList\nprintln(b.value.javaClass) // class java.util.ArrayList\n</code></pre>\n\n<p>Here it is quite clear that if a property is <code>open</code>, it can be overridden in a way that successive calls to it return different values. In the example with <code>printArrayList()</code> there are two such calls. That's why the smart cast would not be safe. The same is true for properties with custom getters.</p>\n\n<p>Your example which performed an <code>as</code>-cast inside the <code>if</code> block worked because the cast would fail and throw a <code>ClassCastException</code> if the property returned a different value of a non-compatible type on the second call, and this would preserve type safety.</p>\n\n<p>And, on contrary, if a <code>val</code> property is not <code>open</code> and has a default getter that simply returns the value of the <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"noreferrer\">backing field</a> (which is <code>final</code> in this case), the compiler can safely perform a smart cast: if you get the value of the property several times it is certain to be the same.</p>\n\n<hr>\n\n<p>An alternative is to get the value once, store it in a local variable and use it several times instead of using the property again:</p>\n\n<pre><code>val list = b.value\n\nif (list is ArrayList) {\n    printArrayList(list) // smart cast to ArrayList\n}\n</code></pre>\n\n<p>Now, no matter if a property is <code>open</code>, there is only one call to its getter, and the code then operates with the value the call returned. Since it cannot change, the smart cast is possible here.</p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 5194344, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-COFVuAxX0l0/AAAAAAAAAAI/AAAAAAAAJzI/ASEwnb9KXLM/photo.jpg?sz=128", "display_name": "Shyam Sunder", "link": "https://stackoverflow.com/users/5194344/shyam-sunder"}, "is_accepted": false, "score": 6, "last_activity_date": 1551476688, "creation_date": 1551476688, "answer_id": 54952714, "question_id": 41086296, "link": "https://stackoverflow.com/questions/41086296/smartcast-is-impossible-because-property-has-open-or-custom-getter/54952714#54952714", "title": "Smartcast is impossible because property has open or custom getter", "body": "<p>instead of using activity directly which is a nullable object I did this which worked</p>\n\n<pre><code>activity?.let{\n   if(it is ScreenRouter) {\n      decoupler.attachRouter(it)\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10539, "favorite_count": 0, "accepted_answer_id": 41086509, "answer_count": 2, "score": 38, "last_activity_date": 1580555279, "creation_date": 1481460258, "last_edit_date": 1580555279, "question_id": 41086296, "link": "https://stackoverflow.com/questions/41086296/smartcast-is-impossible-because-property-has-open-or-custom-getter", "title": "Smartcast is impossible because property has open or custom getter", "body": "<p>I am learning Kotlin. My code is as follows:</p>\n\n<pre><code>override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    decoupler.attachNotifier(this)\n    if(activity is ScreenRouter) {\n        decoupler.attachRouter(activity)\n    }\n}\n</code></pre>\n\n<p><code>attachRouter()</code> method: </p>\n\n<pre><code> fun attachRouter(router: ScreenRouter?) {\n    this.router = router\n}\n</code></pre>\n\n<p>As written in <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"noreferrer\">documentation</a>, kotlin automatically casts to type after checking with is operator. So, I expected that it would work. But instead it bothers me with compilation error saying : </p>\n\n<p><strong>Smartcast to <code>ScreenRouter</code> is impossible because <code>activity</code> is a property that has open or custom getter.</strong></p>\n\n<p>I thought maybe error is because activity can be nullable so I tried:</p>\n\n<pre><code>if(activity!=null &amp;&amp; activity is ScreenRouter) {\n     decoupler.attachRouter(activity)\n}\n</code></pre>\n\n<p>But it didn't work and compilation failed with same error.</p>\n\n<p>However, following code works fine:</p>\n\n<pre><code>if(activity is ScreenRouter) {\n    decoupler.attachRouter(activity as ScreenRouter)\n}\n</code></pre>\n\n<p>Its okay but above error doesn't seem to explain anything about why smartcast fails. I am not a Kotlin expert, I'm just a beginner learning Kotlin. I found no documentation anywhere. These kind of error descriptions makes Kotlin horrible to learn. Can anyone explain in simple terms?</p>\n"}, {"tags": ["android", "properties", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 0, "creation_date": 1481452422, "post_id": 41085212, "comment_id": 69375861, "body": "I ended up using abstract class. But frustrating thing is that I found no documentation anywhere. Thanks for your answer."}, {"owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 1, "creation_date": 1481452961, "post_id": 41085212, "comment_id": 69376001, "body": "If you report it on JetBrains issue tracker, please do not forget to send me link here. Thanks!"}, {"owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "edited": false, "score": 0, "creation_date": 1481457696, "post_id": 41085212, "comment_id": 69377063, "body": "Great! Thank you very much."}, {"owner": {"reputation": 3660, "user_id": 1652657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5daf28a26edd0df221900ce57671e33?s=128&d=identicon&r=PG", "display_name": "nsL", "link": "https://stackoverflow.com/users/1652657/nsl"}, "edited": false, "score": 0, "creation_date": 1504801915, "post_id": 41085212, "comment_id": 79164998, "body": "You could use val instead of var (if it suits for your purpose) and just define get() without a set() (Case A3)"}, {"owner": {"reputation": 559, "user_id": 1916413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b96269945e9426825bdbba067eb3eaed?s=128&d=identicon&r=PG", "display_name": "Danilo Pianini", "link": "https://stackoverflow.com/users/1916413/danilo-pianini"}, "edited": false, "score": 0, "creation_date": 1552571388, "post_id": 41085212, "comment_id": 97067532, "body": "Voted the issue. More than two years later, it still haunts Kotlin."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 15, "last_activity_date": 1481455745, "last_edit_date": 1481455745, "creation_date": 1481452299, "answer_id": 41085212, "question_id": 41084691, "link": "https://stackoverflow.com/questions/41084691/property-in-interface-cannot-have-a-backing-field/41085212#41085212", "title": "Property in interface cannot have a backing field", "body": "<p>This is an unexpected corner case, kudos to you for finding it.</p>\n\n<p>Let me briefly explain it what goes on. I will use a stripped interface <code>A</code> and class <code>B</code> for the sake of simplicity:</p>\n\n<pre><code>interface A {\n    var notifier: Int\n}\n</code></pre>\n\n<p>Normally a <code>var</code> property in a class includes 3 components: a private <code>backing field</code> to store its value, a <code>setter</code> method to write to it and a <code>getter</code> method to read it. But an interface cannot have a field (because live is pain and some math does not add up if it does), so a <code>var</code> property in an interface includes only 2 components: a <code>setter</code> and a <code>getter</code>.</p>\n\n<p>As I outlined above, our interface <code>A</code> has declared 2 methods: a <code>setter</code> and a <code>getter</code>, both without implementations. Let's add some implementations to it:</p>\n\n<pre><code>interface A2 {\n    var notifier: Int\n        get() {return 1}\n        set(v) {}\n}\n</code></pre>\n\n<p>So far, so good. Two <code>open</code> methods with implementations, non of them uses any fields. But what if only one of the implementations is declared?</p>\n\n<pre><code>interface A3 {\n    var notifier: Int    //ERROR: Property in an interface cannot have a backing field\n        get() {return 1}\n        //set(v) {}\n}\n</code></pre>\n\n<p>It turns out that if you specify only a <code>getter</code>, Kotlin also generates a (default) <code>setter</code> for the property. In other words, <code>A3</code> is similar to <code>A4</code> here:</p>\n\n<pre><code>interface A4 {\n    var notifier: Int\n        get() {return 1}\n        set(v) {field = v}  //Obviously an error\n}\n</code></pre>\n\n<p>This may be a bug or an intended behaviour. Here is the issue ticket: <a href=\"https://youtrack.jetbrains.com/issue/KT-15193\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-15193</a></p>\n\n<p><strong>Possible workarounds:</strong> </p>\n\n<ul>\n<li>declare an adequate setter as in <code>A2</code> </li>\n<li>use an <code>abstract class</code> instead of an interface</li>\n</ul>\n"}], "owner": {"reputation": 8011, "user_id": 3830694, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6TotP.jpg?s=128&g=1", "display_name": "Krupal Shah", "link": "https://stackoverflow.com/users/3830694/krupal-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2203, "favorite_count": 1, "accepted_answer_id": 41085212, "answer_count": 1, "score": 11, "last_activity_date": 1481455745, "creation_date": 1481448246, "question_id": 41084691, "link": "https://stackoverflow.com/questions/41084691/property-in-interface-cannot-have-a-backing-field", "title": "Property in interface cannot have a backing field", "body": "<p>I am learning <a href=\"https://kotlinlang.org\" rel=\"noreferrer\">Kotlin</a>. My code is as follows:</p>\n\n<pre><code>   interface BaseLogicDecoupler&lt;A : BaseViewNotifier, B : BaseScreenRouter&gt; {\n\n        var notifier: A?\n        var router: B?\n\n        fun attachNotifier(notifier: A?) {\n            this.notifier = notifier\n        }\n\n        fun detachNotifier() {\n            notifier = null;\n        }\n\n        fun attachRouter(router: B?) {\n            this.router = router\n        }\n\n        fun detachRouter() {\n            router = null;\n        }\n    }\n</code></pre>\n\n<p>But when I change it and try to provide an accessor for property like following : </p>\n\n<pre><code>var notifier: A?\n    get() = notifier \n</code></pre>\n\n<p>It doesn't compile with error saying : <strong>Property in interface cannot have a backing field</strong>. </p>\n\n<p>From the doc <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"noreferrer\">here</a>, kotlin interfaces can provide implementation and can have properties with accessors. Why does the compilation fail?</p>\n\n<p>I am unable to understand the error. What does it say? Can anyone explain in simple terms?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481434510, "post_id": 41078914, "comment_id": 69372455, "body": "In which line does the error appear?"}, {"owner": {"reputation": 63, "user_id": 4547483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b009bfbb23df0d9f292e79b331eb03f6?s=128&d=identicon&r=PG", "display_name": "thechucklingatom", "link": "https://stackoverflow.com/users/4547483/thechucklingatom"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1481435405, "post_id": 41078914, "comment_id": 69372565, "body": "@voddan I don&#39;t get the error until <code>tempView.adapter = cardAdapter</code> which is when I assume it actually tries to build the arrayAdapter and inflate the layout, but I could be wrong. If I run it with that line and the one below it commented out I get just a blank activity."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4547483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b009bfbb23df0d9f292e79b331eb03f6?s=128&d=identicon&r=PG", "display_name": "thechucklingatom", "link": "https://stackoverflow.com/users/4547483/thechucklingatom"}, "edited": false, "score": 0, "creation_date": 1481562196, "post_id": 41098442, "comment_id": 69415828, "body": "And then there is no way to link that to the custom layout generated by Anko. That is what I was starting to assume the more I looked into it. It looks like for the application I am going for I will have to extend the ArrayAdapter. Thank you for confirming this."}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "reply_to_user": {"reputation": 63, "user_id": 4547483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b009bfbb23df0d9f292e79b331eb03f6?s=128&d=identicon&r=PG", "display_name": "thechucklingatom", "link": "https://stackoverflow.com/users/4547483/thechucklingatom"}, "edited": false, "score": 0, "creation_date": 1481618392, "post_id": 41098442, "comment_id": 69437464, "body": "@thechucklingatom you are welcome, ping me in chat if you will need help  <a href=\"http://chat.stackoverflow.com/rooms/26424/iosandroidchaosoverflow\">chat.stackoverflow.com/rooms/26424/iosandroidchaosoverflow</a>"}], "tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": true, "score": 4, "last_activity_date": 1481537855, "last_edit_date": 1481537855, "creation_date": 1481537527, "answer_id": 41098442, "question_id": 41078914, "link": "https://stackoverflow.com/questions/41078914/anko-dsl-with-arrayadapter/41098442#41098442", "title": "Anko DSL with ArrayAdapter", "body": "<p>Remove this line <code>&lt;item name=\"test_text_layout\" type=\"id\"/&gt;</code></p>\n\n<p>Create file in <code>res/layout</code> dir, call it <code>test_text_layout.xml</code> and add following content </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"/&gt;\n</code></pre>\n\n<p>In code of activity </p>\n\n<pre><code>val cardAdapter = ArrayAdapter(ctx, R.layout.test_text_layout, arr)\n</code></pre>\n\n<p>Cause of problem - you passed wrong parameter. From <a href=\"https://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.Context,%20int,%20T[])\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<blockquote>\n  <p>resource  int: The resource ID for a <strong>layout file</strong> containing a TextView to use when instantiating views.</p>\n</blockquote>\n\n<p>If you want to get rid of xml completely, then you need to extend <code>ArrayAdapter</code></p>\n"}], "owner": {"reputation": 63, "user_id": 4547483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b009bfbb23df0d9f292e79b331eb03f6?s=128&d=identicon&r=PG", "display_name": "thechucklingatom", "link": "https://stackoverflow.com/users/4547483/thechucklingatom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 41098442, "answer_count": 1, "score": 2, "last_activity_date": 1481537855, "creation_date": 1481394841, "question_id": 41078914, "link": "https://stackoverflow.com/questions/41078914/anko-dsl-with-arrayadapter", "title": "Anko DSL with ArrayAdapter", "body": "<p>today I have been working on translating one of my apps to a pure kotlin build as a test. I am struggling with array adapters currently, and getting this error. </p>\n\n<pre><code>File  from xml type layout resource ID #0x7f0c000a\n</code></pre>\n\n<p>This is my activity that has the error.</p>\n\n<pre><code>class KotlinTest : Activity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        val arr = Array(5, Int::toString)\n\n        verticalLayout {\n\n\n            id = R.id.test_text_layout\n\n            textView {\n                width = matchParent\n                height = matchParent\n                id = R.id.test_text_item\n            }\n\n\n            listView {\n                id = R.id.test_text_view\n            }\n        }\n\n        val cardAdapter: ArrayAdapter&lt;String&gt;? = ArrayAdapter(ctx, R.id.test_text_layout, arr)\n\n        val tempView: ListView = findViewById(R.id.test_text_view) as ListView\n\n        tempView.adapter = cardAdapter\n\n        cardAdapter?.notifyDataSetChanged()\n\n    }\n\n}\n</code></pre>\n\n<p>And this is the ids.xml file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n\n    &lt;item name=\"test_text_item\" type=\"id\"/&gt;\n    &lt;item name=\"test_text_view\" type=\"id\"/&gt;\n    &lt;item name=\"test_text_layout\" type=\"id\"/&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p>I have tried a few things but no luck, so any guidance would be appreciated. I assume I am just missing something dumb.</p>\n"}, {"tags": ["android", "service", "kotlin", "gesture"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1481309890, "post_id": 41067113, "comment_id": 69341244, "body": "Outside of a rooted device or custom ROM, this is not possible, for blindingly obvious privacy and security reasons."}, {"owner": {"reputation": 806, "user_id": 4842585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-oygxcJWDVYk/AAAAAAAAAAI/AAAAAAAAADU/S75I8NGFQCg/photo.jpg?sz=128", "display_name": "Sylvain GIROD", "link": "https://stackoverflow.com/users/4842585/sylvain-girod"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1481310333, "post_id": 41067113, "comment_id": 69341488, "body": "As I&#39;m not limited by hardware stuff, how could it be done on a rooted device ?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1481310419, "post_id": 41067113, "comment_id": 69341530, "body": "Personally, I have no idea, other than I would expect it to be possible."}, {"owner": {"reputation": 806, "user_id": 4842585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-oygxcJWDVYk/AAAAAAAAAAI/AAAAAAAAADU/S75I8NGFQCg/photo.jpg?sz=128", "display_name": "Sylvain GIROD", "link": "https://stackoverflow.com/users/4842585/sylvain-girod"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1481310705, "post_id": 41067113, "comment_id": 69341682, "body": "Ok, I will wait for other paths so ;) Oh, and I don&#39;t understand the problem with security. I can record the screen, and get coordinates of ACTION_OUTSIDE... So there is a lack of security here"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1481310789, "post_id": 41067113, "comment_id": 69341711, "body": "The primary security problem comes when your app can see the input events <i>and</i> they get passed to the underlying app. That&#39;s the specific thing that you have discovered is not possible."}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1481387483, "post_id": 41067113, "comment_id": 69361677, "body": "@girod_s It is a security problem for the same reason keyloggers are a security problem."}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1481538764, "post_id": 41067113, "comment_id": 69401853, "body": "Try to extend View with and override <code>onTouchEvent</code> method, this will allow passing touch event to other views"}, {"owner": {"reputation": 806, "user_id": 4842585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-oygxcJWDVYk/AAAAAAAAAAI/AAAAAAAAADU/S75I8NGFQCg/photo.jpg?sz=128", "display_name": "Sylvain GIROD", "link": "https://stackoverflow.com/users/4842585/sylvain-girod"}, "edited": false, "score": 0, "creation_date": 1481757101, "post_id": 41067113, "comment_id": 69509601, "body": "@dimaRostipira, I can&#39;t do it, because I already extends Service"}], "owner": {"reputation": 806, "user_id": 4842585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-oygxcJWDVYk/AAAAAAAAAAI/AAAAAAAAADU/S75I8NGFQCg/photo.jpg?sz=128", "display_name": "Sylvain GIROD", "link": "https://stackoverflow.com/users/4842585/sylvain-girod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481538512, "creation_date": 1481309812, "question_id": 41067113, "link": "https://stackoverflow.com/questions/41067113/track-gestures-from-service-android", "title": "Track gestures from service android", "body": "<p>I'm working on a UX testing app, which should track gestures silently (from a service, without intercepting events).</p>\n\n<p>Here is my current code :</p>\n\n<pre><code>class TrackService : Service(), View.OnTouchListener {\n\nprivate val DEBUG_TAG = \"Gestures\"\nvar mWindowManager: WindowManager? = null\nvar mDummyView: LinearLayout? = null\n\noverride fun onBind(p0: Intent?): IBinder? {\n    return null\n}\n\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n\n    return super.onStartCommand(intent, flags, startId)\n}\n\noverride fun onCreate() {\n    mWindowManager = getSystemService(Context.WINDOW_SERVICE) as WindowManager\n    mDummyView = LinearLayout(this)\n    val layoutParams = WindowManager.LayoutParams(1, WindowManager.LayoutParams.MATCH_PARENT)\n    mDummyView!!.setLayoutParams(layoutParams)\n    mDummyView!!.setOnTouchListener(this)\n    val params = WindowManager.LayoutParams(\n            1, /* width */\n            1, /* height */\n            WindowManager.LayoutParams.TYPE_PHONE,\n            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE or\n                    WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL or\n                    WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,\n            PixelFormat.TRANSPARENT\n    )\n    params.gravity = Gravity.START or Gravity.TOP\n    mWindowManager!!.addView(mDummyView, params)\n    super.onCreate()\n}\n\noverride fun onTouch(p0: View?, p1: MotionEvent?): Boolean {\n    Log.e(DEBUG_TAG, p1.toString())\n    return false\n}\n</code></pre>\n\n<p>My problem is that this code just catches <code>ACTION_OUTSIDE</code>, and so does not let me identify <code>MotionEvent</code>.\nI tried to modify my code in order to make <code>mDummyView</code> take all screen, but if I do it, the events are consumed by this View and are not transferred to the other Views (and apps).</p>\n\n<p>Do someone know how I could track gestures without trapping them in my service?</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "is_accepted": false, "score": 2, "last_activity_date": 1481297479, "creation_date": 1481297479, "answer_id": 41063804, "question_id": 41062493, "link": "https://stackoverflow.com/questions/41062493/how-can-i-share-build-config-between-two-build-gradle-kts-files/41063804#41063804", "title": "How can I share build config between two build.gradle.kts files?", "body": "<p>No idea if it works with kotlin however you can try equivalent from plain gradle:</p>\n\n<p><strong>lol.gradle</strong></p>\n\n<pre><code>apply plugin: 'java'\n\nrepositories {\n   mavenCentral()\n}\n</code></pre>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>apply from: 'lol.gradle'\n</code></pre>\n\n<p>Above works fine. Mind that <em>lol.gradle</em> has <code>java</code> plugin applied - it adds context where <code>repositories</code> is present hence can be applied.</p>\n"}, {"tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": false, "score": 1, "last_activity_date": 1481313864, "creation_date": 1481313864, "answer_id": 41068022, "question_id": 41062493, "link": "https://stackoverflow.com/questions/41062493/how-can-i-share-build-config-between-two-build-gradle-kts-files/41068022#41068022", "title": "How can I share build config between two build.gradle.kts files?", "body": "<p>We use an <a href=\"https://docs.gradle.org/current/userguide/init_scripts.html#sec:init_script_plugins\" rel=\"nofollow noreferrer\">init script</a> bundled in a custom gradle distribution to apply our corporate Nexus repository to every gradle project. It's worth considering if you have a lot of projects.</p>\n"}, {"tags": [], "owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "is_accepted": true, "score": 6, "last_activity_date": 1505761185, "last_edit_date": 1505761185, "creation_date": 1481344754, "answer_id": 41072228, "question_id": 41062493, "link": "https://stackoverflow.com/questions/41062493/how-can-i-share-build-config-between-two-build-gradle-kts-files/41072228#41072228", "title": "How can I share build config between two build.gradle.kts files?", "body": "<p><strong>Update</strong> In the <a href=\"https://github.com/gradle/kotlin-dsl/releases/tag/v0.11.1\" rel=\"nofollow noreferrer\"><code>0.11.0</code></a> release, <code>applyFrom(uri)</code> was removed.</p>\n\n<p>You should now instead use:</p>\n\n<pre><code>apply {\n    from(\"dir/myfile.gradle\")\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Old answer</strong></p>\n\n<p>With Groovy build scripts you can do something like <code>apply from: 'dir/myfile.gradle'</code> where <code>dir/myfile.gradle</code> is a file containing your shared <code>repositories</code> block.</p>\n\n<p>In a similar fashion with <a href=\"https://github.com/gradle/gradle-script-kotlin/blob/master/src/main/kotlin/org/gradle/script/lang/kotlin/ProjectExtensions.kt#L61\" rel=\"nofollow noreferrer\">Gradle Script Kotlin</a> (at least with <code>0.4.1</code>), you can use the <code>applyFrom(script: Any)</code> method.</p>\n\n<p><strong>build.gradle.kts</strong></p>\n\n<pre><code>applyFrom(\"dir/myfile.gradle\")\n</code></pre>\n\n<p>If you need to apply it from a subproject you could do something like:</p>\n\n<pre><code>applyFrom(\"${rootProject.rootDir}/dir/myfile.gradle\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3606, "user_id": 178274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8bcbf9deef69f1d6a2f658eefe4487c4?s=128&d=identicon&r=PG", "display_name": "denis.zhdanov", "link": "https://stackoverflow.com/users/178274/denis-zhdanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539992517, "creation_date": 1539992517, "answer_id": 52901128, "question_id": 41062493, "link": "https://stackoverflow.com/questions/41062493/how-can-i-share-build-config-between-two-build-gradle-kts-files/52901128#52901128", "title": "How can I share build config between two build.gradle.kts files?", "body": "<p>I encountered a similar problem when common config is replicated in each and every project. Solved it by a custom gradle distribution with the common settings defined in init script.  </p>\n\n<p>Created a gradle plugin for preparing such custom distributions - <a href=\"http://gradle-dist.oss.harmonysoft.tech/\" rel=\"nofollow noreferrer\">custom-gradle-dist</a>. It works perfectly for my projects, e.g. a <em>build.gradle</em> for a library project looks like this (this is a complete file, all <em>repository</em>, <em>plugin</em>, common <em>dependencies</em> etc are defined in the custom init script):  </p>\n\n<pre class=\"lang-groove prettyprint-override\"><code>dependencies {\n    compile 'org.springframework.kafka:spring-kafka'\n}\n</code></pre>\n"}], "owner": {"reputation": 16928, "user_id": 1047788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xA1rW.png?s=128&g=1", "display_name": "user7610", "link": "https://stackoverflow.com/users/1047788/user7610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 2, "accepted_answer_id": 41072228, "answer_count": 4, "score": 3, "last_activity_date": 1539992517, "creation_date": 1481293243, "last_edit_date": 1504920771, "question_id": 41062493, "link": "https://stackoverflow.com/questions/41062493/how-can-i-share-build-config-between-two-build-gradle-kts-files", "title": "How can I share build config between two build.gradle.kts files?", "body": "<p>I have two projects (in a single git repository) that should have the same</p>\n\n<pre><code>repository {\n\n}\n</code></pre>\n\n<p>section in their <code>build.gradle.kts</code>, but otherwise are completely unrelated. </p>\n\n<p>Can I factor this common part out and include it in each respective  <code>build.gradle.kts</code>? How?</p>\n"}, {"tags": ["gradle", "jar", "proguard", "kotlin", "shadowjar"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 13, "last_activity_date": 1602767928, "last_edit_date": 1602767928, "creation_date": 1481360018, "answer_id": 41073782, "question_id": 41052868, "link": "https://stackoverflow.com/questions/41052868/what-are-kotlin-builtins-files-and-can-i-omit-them-from-my-uberjars/41073782#41073782", "title": "What are .kotlin_builtins files and can I omit them from my uberjars?", "body": "<p>These files contain data for declarations of standard (&quot;built-in&quot;) Kotlin classes which are not compiled to <code>.class</code> files, but rather are mapped to the existing types on the platform (in this case, JVM). For example, <code>kotlin/kotlin.kotlin_builtins</code> contains the information for non-physical classes in package <code>kotlin</code>: <code>Int</code>, <code>String</code>, <code>Enum</code>, <code>Annotation</code>, <code>Collection</code>, etc.</p>\n<p>There are two main scenarios when these files are used:</p>\n<ol>\n<li><p>The compiler looks them up from <code>kotlin-stdlib</code> on the classpath to determine which built-in declarations are available.</p>\n</li>\n<li><p>The reflection library (<code>kotlin-reflect</code>) loads these files as resources to provide reflection capabilities for built-in declarations. For example, <code>String::class.members</code> returns all members of the class <code>kotlin.String</code> exactly in the same way as the Kotlin compiler sees those members (despite the fact that there's no <code>kotlin/String.class</code> file and it's erased to <code>java.lang.String</code> in bytecode).</p>\n</li>\n</ol>\n<p>The first point is clearly not applicable in your case. And if you don't use reflection on built-in classes, I think it's safe to exclude <code>.kotlin_builtins</code> files completely from the resulting jar.</p>\n"}, {"tags": [], "owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "is_accepted": false, "score": 3, "last_activity_date": 1561173299, "last_edit_date": 1561173299, "creation_date": 1499186027, "answer_id": 44910715, "question_id": 41052868, "link": "https://stackoverflow.com/questions/41052868/what-are-kotlin-builtins-files-and-can-i-omit-them-from-my-uberjars/44910715#44910715", "title": "What are .kotlin_builtins files and can I omit them from my uberjars?", "body": "<p>You can optimize/omit these from yours JARs/APKs:</p>\n\n<pre><code>packagingOptions {\n  exclude \"/META-INF/*.kotlin_module\"\n  exclude \"**/kotlin/**\"\n}\n</code></pre>\n\n<p>Even better:</p>\n\n<pre><code>packagingOptions {\n  exclude \"/META-INF/*.kotlin_module\"\n  exclude \"**/kotlin/**\"\n  exclude \"**/*.txt\"\n  exclude \"**/*.xml\"\n  exclude \"**/*.properties\"\n}\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/jaredsburrows/android-gif-example/blob/master/build.gradle.kts#L127\" rel=\"nofollow noreferrer\">https://github.com/jaredsburrows/android-gif-example/blob/master/build.gradle.kts#L127</a></p>\n"}], "owner": {"reputation": 2003, "user_id": 457586, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8fced1b618d6b8a714c598d3f8f7d9fe?s=128&d=identicon&r=PG", "display_name": "dynamitereed", "link": "https://stackoverflow.com/users/457586/dynamitereed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4169, "favorite_count": 4, "accepted_answer_id": 41073782, "answer_count": 2, "score": 11, "last_activity_date": 1602767928, "creation_date": 1481256042, "last_edit_date": 1481410538, "question_id": 41052868, "link": "https://stackoverflow.com/questions/41052868/what-are-kotlin-builtins-files-and-can-i-omit-them-from-my-uberjars", "title": "What are .kotlin_builtins files and can I omit them from my uberjars?", "body": "<p>I'm working on integrating proguard to my gradle build for an application written in Kotlin.  I'm finding that proguard is stripping out the Kotlin standard library (as it should in my simple Hello World program) but it's leaving a bunch of files in my jar that have the file extension <code>.kotlin_builtins</code>.  When I configure my gradle task to exclude those files, the program still appears to work fine.  What are those files and must they ship with my executable uberjar?</p>\n\n<p>Here's my <code>build.gradle</code> file's contents for reference:</p>\n\n<pre><code>buildscript {\n   ext.kotlin_version = '1.0.5'\n   ext.shadow_version = '1.2.4'\n\n   repositories {\n    mavenCentral()\n    maven {\n        url \"https://plugins.gradle.org/m2/\"\n    }\n    flatDir dirs: \"gradle/proguard\"\n   }\n\n   dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath \"com.github.jengelman.gradle.plugins:shadow:$shadow_version\"\n    classpath \":proguard:\"\n   }\n}\n\napply plugin: 'kotlin'\napply plugin: 'application'\napply plugin: 'com.github.johnrengelman.shadow'\n\nmainClassName = 'namespace.MainKt'\n\ndefaultTasks 'run'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    testCompile \"junit:junit:4.12\"\n    testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n}\n\nshadowJar {\n    exclude 'kotlin/**/*.kotlin_builtins'\n    exclude '.keep'\n}\n\ntask minify(type: proguard.gradle.ProGuardTask, dependsOn: 'shadowJar') {\n    libraryjars \"${System.getProperty('java.home')}/lib/rt.jar\"\n\n    injars  'build/libs/artful-all.jar'\n    outjars 'build/libs/artful-all.out.jar'\n\n    printmapping 'build/libs/out.map'\n\n    keepclasseswithmembers 'public class * { \\\n        public static void main(java.lang.String[]); \\\n    }'\n\n    assumenosideeffects 'class kotlin.jvm.internal.Intrinsics { \\\n        static void checkParameterIsNotNull(java.lang.Object, java.lang.String); \\\n    }'\n}\n</code></pre>\n"}, {"tags": ["kotlin", "easymock"], "comments": [{"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 0, "creation_date": 1481220618, "post_id": 41045666, "comment_id": 69299748, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30305217/is-it-possible-to-use-mockito-in-kotlin\">Is it possible to use Mockito in Kotlin?</a>"}, {"owner": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 0, "creation_date": 1481395556, "post_id": 41045666, "comment_id": 69364247, "body": "<code>createClassLoader</code> should be a method from a mock. It doesn&#39;t seem to be the case here"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 0, "creation_date": 1481396625, "post_id": 41045666, "comment_id": 69364569, "body": "Sorry, it actually is. I&#39;ll change it to <code>foo.createClassLoader</code> to make it slightly clearer."}, {"owner": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 0, "creation_date": 1481511445, "post_id": 41045666, "comment_id": 69391920, "body": "Ok. In Java, this would occur if the method was final or static. Or not a mock, or a partial mock with this method unmocked. How do you create the mock?"}, {"owner": {"reputation": 36734, "user_id": 693752, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1f9cd9b9bad9aa6115a1ed72433c180d?s=128&d=identicon&r=PG", "display_name": "Snicolas", "link": "https://stackoverflow.com/users/693752/snicolas"}, "reply_to_user": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 0, "creation_date": 1561659179, "post_id": 41045666, "comment_id": 100147753, "body": "Yes @Henri, opening the mocked method in kotlin just worked great. Thanks (though error messages could be a little more clear ;)"}, {"owner": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 0, "creation_date": 1561867520, "post_id": 41045666, "comment_id": 100197378, "body": "What was the full stacktrace? Is it coming from EasyMock?"}], "owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481396656, "creation_date": 1481219152, "last_edit_date": 1481396656, "question_id": 41045666, "link": "https://stackoverflow.com/questions/41045666/kotlin-and-easymock-null-problems", "title": "Kotlin and EasyMock null problems", "body": "<p>I'm having some trouble making Kotlin and EasyMock play nice with each other.</p>\n\n<p>I have a test containing something like this:</p>\n\n<pre><code>expect(foo.createClassLoader(aryEq(arrayOf(\"foo.jar\")))).andReturn(classLoader)\n</code></pre>\n\n<p>(where <code>foo</code> is a mock object)</p>\n\n<p>However, this throws <code>java.lang.IllegalStateException: aryEq(arrayOf(\"foo.jar\")) must not be null</code> because my <code>createClassLoader</code> method doesn't accept a nullable array, and for some reason <code>EasyMock.aryEq</code> returns null:</p>\n\n<pre><code>public static &lt;T&gt; T[] aryEq(final T[] value) {\n    reportMatcher(new ArrayEquals(value));\n    return null;\n}\n</code></pre>\n\n<p>Is there any way out of this?</p>\n"}, {"tags": ["field", "kotlin", "member", "public"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 5, "creation_date": 1481201839, "post_id": 41039875, "comment_id": 69287291, "body": "Could the annotation <code>@JvmField</code> work for you?"}, {"owner": {"reputation": 692, "user_id": 1841940, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/87bfa2c15daec9c35d82925b0d1adf97?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1841940/john-smith"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1481202892, "post_id": 41039875, "comment_id": 69288029, "body": "That&#39;s it! Sweet! So easy. Thanks a bunch!"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1481204202, "post_id": 41039875, "comment_id": 69288845, "body": "According to <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/classvars.html</a>, &quot;member&quot; refers to both, methods and fields. What you probably mean are &quot;fields&quot;. I&#39;ve edited the question."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 3, "creation_date": 1481204223, "post_id": 41039875, "comment_id": 69288863, "body": "@marstran Consider making your comment an answer so that the question can be marked as resolved."}], "answers": [{"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 20, "last_activity_date": 1481206495, "creation_date": 1481206495, "answer_id": 41041568, "question_id": 41039875, "link": "https://stackoverflow.com/questions/41039875/public-fields-for-java-compatibility/41041568#41041568", "title": "Public fields for Java compatibility", "body": "<p>The annotation <code>@JvmField</code> should help you. It makes the Kotlin-compiler expose the property as a field on the JVM. See here: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-field/\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-field/</a></p>\n"}], "owner": {"reputation": 692, "user_id": 1841940, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/87bfa2c15daec9c35d82925b0d1adf97?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1841940/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1440, "favorite_count": 1, "accepted_answer_id": 41041568, "answer_count": 1, "score": 15, "last_activity_date": 1481208665, "creation_date": 1481201163, "last_edit_date": 1481208665, "question_id": 41039875, "link": "https://stackoverflow.com/questions/41039875/public-fields-for-java-compatibility", "title": "Public fields for Java compatibility", "body": "<p>I found recent interest in Kotlin as a language, because the platform we develop for is Java 6 based and hence lacks any syntactic sugar the recent years brought to Java.</p>\n\n<p>There's but one thing that makes it impossible to use Kotlin over Java in development, that is, the platform we develop for uses some reflection internally and requires members to be public. It won't work otherwise. </p>\n\n<p>So, the bytecode generated from the Kotlin file in fact produces public getters and setters, the fields themselves yet remain private.</p>\n\n<p><strong>Is there a way to overcome this, so I get real public fields?</strong></p>\n\n<p>I am aware of the design failure that requires public fields, but the system is kind of a black box to us, we cannot change the fact that it has to be this way.</p>\n"}]