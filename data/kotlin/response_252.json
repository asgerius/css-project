[{"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 188, "user_id": 6859744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f6a5ee64c18b15738ab39ec2d2580f?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket Bhat", "link": "https://stackoverflow.com/users/6859744/sanket-bhat"}, "edited": false, "score": 0, "creation_date": 1573099061, "post_id": 58739619, "comment_id": 103773023, "body": "Did you call <code>adapter.notifyDataSetChanged()</code> after you refresh the data??"}, {"owner": {"reputation": 846, "user_id": 6582127, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ijqtr.png?s=128&g=1", "display_name": "Luis Cardoza Bird", "link": "https://stackoverflow.com/users/6582127/luis-cardoza-bird"}, "reply_to_user": {"reputation": 188, "user_id": 6859744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f6a5ee64c18b15738ab39ec2d2580f?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket Bhat", "link": "https://stackoverflow.com/users/6859744/sanket-bhat"}, "edited": false, "score": 1, "creation_date": 1573139450, "post_id": 58739619, "comment_id": 103791423, "body": "there&#39;s no need to call it, im using the ListAdapter that comes with DiffUtils. everytime i call submitList the changes apply without any problem. But the view only goes out with the StaggeredGridLayoutManager, if i do it with any other LayoutManager the redraw goes well."}], "owner": {"reputation": 846, "user_id": 6582127, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ijqtr.png?s=128&g=1", "display_name": "Luis Cardoza Bird", "link": "https://stackoverflow.com/users/6582127/luis-cardoza-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573080840, "creation_date": 1573080840, "question_id": 58739619, "link": "https://stackoverflow.com/questions/58739619/staggeredgridlayout-wont-reapply-on-recyclerview-after-the-data-is-refreshed", "title": "StaggeredGridLayout won&#39;t reapply on RecyclerView after the data is refreshed", "body": "<p>I have a RecyclerView that receive values from a API.\nand the current configuration that apply is this:</p>\n\n<pre><code>recyclerView.apply {\n            layoutManager = StaggeredGridLayoutManager(2, StaggeredGridLayoutManager.VERTICAL)\n            addItemDecoration(GridItemDecoration(4, 2))\n            setHasFixedSize(true)\n            adapter = this@BusinessActivity.adapter\n}\n</code></pre>\n\n<p>however when i refresh the data</p>\n\n<pre><code>refreshBusiness.setOnRefreshListener {\n            refreshBusiness.isRefreshing = true\n            skeleton.showSkeleton()\n            businessViewModel.retrieveBusiness()\n}\n</code></pre>\n\n<p>the whole view goes blank.</p>\n\n<p>If i apply another LayoutManager such as (LinearLayoutManager or GridLayoutManager) instead of the StaggeredGrid, everything goes well.</p>\n\n<p>and im assuming that the problem is related with the param that the Staggered won't receive and that is the context.</p>\n\n<p>Anyone know how to solve this issue.</p>\n"}, {"tags": ["android", "firebase", "kotlin"], "comments": [{"owner": {"reputation": 1481, "user_id": 175554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d970c46dfabc05a2334a790de9355677?s=128&d=identicon&r=PG", "display_name": "&#246;zkan pakdil", "link": "https://stackoverflow.com/users/175554/%c3%b6zkan-pakdil"}, "edited": false, "score": 0, "creation_date": 1579953691, "post_id": 58738743, "comment_id": 105943516, "body": "did you manage to use glide ? I am also having problem :("}], "answers": [{"tags": [], "owner": {"reputation": 1481, "user_id": 175554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d970c46dfabc05a2334a790de9355677?s=128&d=identicon&r=PG", "display_name": "&#246;zkan pakdil", "link": "https://stackoverflow.com/users/175554/%c3%b6zkan-pakdil"}, "is_accepted": false, "score": 0, "last_activity_date": 1579956285, "creation_date": 1579956285, "answer_id": 59909342, "question_id": 58738743, "link": "https://stackoverflow.com/questions/58738743/why-my-glideapp-doesnt-work-with-a-gsreference-firebase-kotlin/59909342#59909342", "title": "Why my GlideApp doesnt work with a gsReference (Firebase + Kotlin)", "body": "<p>Took me a while to figure out this one. In documentation of glide they dont say to implement registerComponents <a href=\"https://bumptech.github.io/glide/doc/generatedapi.html\" rel=\"nofollow noreferrer\">https://bumptech.github.io/glide/doc/generatedapi.html</a> </p>\n\n<blockquote>\n  <p>You\u2019re not required to implement any of the methods in AppGlideModule for the API to be generated. You can leave the class blank as long as it extends AppGlideModule and is annotated with @GlideModule.</p>\n</blockquote>\n\n<p>Anyway after I prepared my gradle.build file with proper plugin and dependencies</p>\n\n<pre><code>apply plugin: 'kotlin-kapt' // put this next to plugin lines\n\nimplementation 'com.github.bumptech.glide:glide:4.11.0'\nannotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\nkapt \"android.arch.lifecycle:compiler:1.1.1\"\nkapt 'com.github.bumptech.glide:compiler:4.11.0'\nimplementation 'com.firebaseui:firebase-ui-database:6.2.0'\nimplementation 'com.firebaseui:firebase-ui-firestore:6.2.0'\nimplementation 'com.firebaseui:firebase-ui-auth:6.2.0'\nimplementation 'com.firebaseui:firebase-ui-storage:6.2.0'\n</code></pre>\n\n<p>in order to use FirebaseImageLoader you need to have \"firebase-ui-storage\" and you have to implement registerComponents in your AppGlideModule as example here <a href=\"https://github.com/laurenskz/pocket-quest/blob/e12253ad867a6c1e3a8d65ff8747979943e87ba7/android/app/src/main/java/nl/pocketquest/pocketquest/game/entities/GlideModule.kt\" rel=\"nofollow noreferrer\">https://github.com/laurenskz/pocket-quest/blob/e12253ad867a6c1e3a8d65ff8747979943e87ba7/android/app/src/main/java/nl/pocketquest/pocketquest/game/entities/GlideModule.kt</a> putting down the kotlin code just in case link dies :)</p>\n\n<pre><code>import android.content.Context\nimport com.bumptech.glide.Glide\nimport com.bumptech.glide.Registry\nimport com.bumptech.glide.annotation.GlideModule\nimport com.bumptech.glide.module.AppGlideModule\nimport com.firebase.ui.storage.images.FirebaseImageLoader\nimport com.google.firebase.storage.StorageReference\nimport java.io.InputStream\n\n@GlideModule\nclass AppGlideModule : AppGlideModule(){\n    override fun registerComponents(context: Context, glide: Glide, registry: Registry) {\n        super.registerComponents(context, glide, registry)\n        registry.append(StorageReference::class.java, InputStream::class.java, FirebaseImageLoader.Factory())\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12334328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gl2yQ.png?s=128&g=1", "display_name": "Dakotapod", "link": "https://stackoverflow.com/users/12334328/dakotapod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1579956285, "creation_date": 1573075682, "question_id": 58738743, "link": "https://stackoverflow.com/questions/58738743/why-my-glideapp-doesnt-work-with-a-gsreference-firebase-kotlin", "title": "Why my GlideApp doesnt work with a gsReference (Firebase + Kotlin)", "body": "<p>I want to get an image from Firebase Storage and Im using Glide, and my code look like this:</p>\n\n<pre><code>//------- File location\n    val gsReference = storage.getReferenceFromUrl(\"gs://filelocation\")\n\n    // Create a reference to a file from a Google Cloud Storage URI\n    GlideApp.with(this)\n        .load(gsReference)\n        .into(imgEvidenceLastReport)\n</code></pre>\n\n<p>The problem I have is when I use the 'gs' reference my image doesnt show, but when I use the https:</p>\n\n<pre><code>//------- File location\n    val httpsReference  = storage.getReferenceFromUrl(\"https://filelocation\")\n\n    // Create a reference to a file from a Google Cloud Storage URI\n    GlideApp.with(this)\n        .load(httpsReference)\n        .into(imgEvidenceLastReport)\n</code></pre>\n\n<p>I suppose its because I dont have the token on the gs reference but I dont know how to get it, I already have the implementation and the kapt, I create the Module here: </p>\n\n<p><a href=\"https://i.stack.imgur.com/VYHC4.jpg\" rel=\"nofollow noreferrer\">location of MyAppGlideModule</a></p>\n\n<p>And my MyAppGlideModule look like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/5SUbe.jpg\" rel=\"nofollow noreferrer\">The code of MyAppGlideModule</a></p>\n\n<p>Honestly I just copied and pasted this module</p>\n\n<p>Help :( and thank u :)</p>\n"}, {"tags": ["android-studio", "kotlin"], "comments": [{"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "edited": false, "score": 0, "creation_date": 1573088110, "post_id": 58738136, "comment_id": 103770831, "body": "you make an intent and put your string in extra then capture the intent in your Activity2"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12334140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4293c044c14c0ca2920bce549b48fa?s=128&d=identicon&r=PG&f=1", "display_name": "Costi", "link": "https://stackoverflow.com/users/12334140/costi"}, "edited": false, "score": 0, "creation_date": 1573331613, "post_id": 58740545, "comment_id": 103850068, "body": "I have another problem now, in Activity1 I use a button like this:  button7.setOnClickListener { _: View? -&gt;             val Intent = Intent(baseContext, Activity2::class.java)             startActivity(Intent); I change the Intent name  in Intent2 but in Activity2 I can&#39;t link this when I type Intent2 &quot;Unresolved reference: Intent2&quot;."}, {"owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "reply_to_user": {"reputation": 3, "user_id": 12334140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4293c044c14c0ca2920bce549b48fa?s=128&d=identicon&r=PG&f=1", "display_name": "Costi", "link": "https://stackoverflow.com/users/12334140/costi"}, "edited": false, "score": 0, "creation_date": 1573352235, "post_id": 58740545, "comment_id": 103853561, "body": "the <code>intent</code> in <code>val openIntent = intent</code> is standard and cannot be changed."}], "tags": [], "owner": {"reputation": 464, "user_id": 11598177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nl2uJ.jpg?s=128&g=1", "display_name": "L2_Paver", "link": "https://stackoverflow.com/users/11598177/l2-paver"}, "is_accepted": true, "score": 0, "last_activity_date": 1573088701, "creation_date": 1573088701, "answer_id": 58740545, "question_id": 58738136, "link": "https://stackoverflow.com/questions/58738136/how-to-handle-an-entered-number-in-another-activity/58740545#58740545", "title": "How to handle an entered number in another activity", "body": "<p>you make an intent and put your string in extra then capture the intent in your Activity2</p>\n\n<p>In your make Activity1 create intent with extra.</p>\n\n<pre><code>val your_number = your_edittext.text.toString()\nval intent = Intent(applicationContext, Activity2::class.java)\nintent.putExtra(\"number\", your_number)\nstartActivity(intent)\n</code></pre>\n\n<p>In your Activity2 capture the extra intent</p>\n\n<pre><code>val openIntent = intent\nval number = openIntent.getStringExtra(\"number\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12334140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4293c044c14c0ca2920bce549b48fa?s=128&d=identicon&r=PG&f=1", "display_name": "Costi", "link": "https://stackoverflow.com/users/12334140/costi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 58740545, "answer_count": 1, "score": -1, "last_activity_date": 1573088701, "creation_date": 1573072679, "question_id": 58738136, "link": "https://stackoverflow.com/questions/58738136/how-to-handle-an-entered-number-in-another-activity", "title": "How to handle an entered number in another activity", "body": "<p>In Activity1 I use an editText (Number-Decimal) and a button. After the decimal number was set in editText, I use the button to switch Activity1 with Activity2. In Activity2 I need to use this decimal number, how can I do that?</p>\n\n<p>I use this in Activity2 but is not working.</p>\n\n<pre><code>var selectedNumber = findViewById&lt;TextView&gt;(R.id.textView)\nselectedNumber.setText(\"Your number is\" + editText);\n</code></pre>\n\n<p>The result is \"Your number is null\".</p>\n"}, {"tags": ["kotlin", "android-activity", "android-dialog"], "comments": [{"owner": {"reputation": 599, "user_id": 8678995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DM84x3g0VH8/AAAAAAAAAAI/AAAAAAAAANQ/Vmuig_iTFj0/photo.jpg?sz=128", "display_name": "Haider Saleem", "link": "https://stackoverflow.com/users/8678995/haider-saleem"}, "edited": false, "score": 0, "creation_date": 1573071850, "post_id": 58737724, "comment_id": 103765897, "body": "have you checked your Dialog xml, and add your xml and dialog code too."}], "answers": [{"tags": [], "owner": {"reputation": 188, "user_id": 6859744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f6a5ee64c18b15738ab39ec2d2580f?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket Bhat", "link": "https://stackoverflow.com/users/6859744/sanket-bhat"}, "is_accepted": true, "score": 0, "last_activity_date": 1573099663, "creation_date": 1573099663, "answer_id": 58741856, "question_id": 58737724, "link": "https://stackoverflow.com/questions/58737724/disable-app-name-in-activity-working-as-dialog/58741856#58741856", "title": "Disable &quot;App name&quot; in activity working as dialog", "body": "<p>I observe that you are using <code>Theme.AppCompat.Light.Dialog</code>, so please remove <code>android:</code> namespace from your theme. </p>\n\n<pre><code>&lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n&lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n</code></pre>\n\n<p><strong>Reason:</strong> <code>android:</code> namespace is used for attribute coming from Android SDK and since AppCompat is a support library you can use <code>app:</code> namespace or declare it with no namespace</p>\n"}], "owner": {"reputation": 17, "user_id": 12333485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4013d95451dad214495f8ac03c117d?s=128&d=identicon&r=PG&f=1", "display_name": "Nexicoll", "link": "https://stackoverflow.com/users/12333485/nexicoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58741856, "answer_count": 1, "score": 0, "last_activity_date": 1573144945, "creation_date": 1573070735, "last_edit_date": 1573144945, "question_id": 58737724, "link": "https://stackoverflow.com/questions/58737724/disable-app-name-in-activity-working-as-dialog", "title": "Disable &quot;App name&quot; in activity working as dialog", "body": "<p>I made activity as dialog. His mission is to show biometric authentication prompt. Problem is that every time is showing \"AppName\" (WSZIBMobile).\nHe's screen\n<a href=\"https://i.stack.imgur.com/BB2hC.png\" rel=\"nofollow noreferrer\">screen_with_showed_dialog</a></p>\n\n<p>I made own style in styles.xml and try to hide that name in \nonCreate function by </p>\n\n<pre><code>    requestWindowFeature(Window.FEATURE_NO_TITLE)\n    actionBar?.hide()\n</code></pre>\n\n<p>styles.xml</p>\n\n<pre><code>&lt;style name=\"mytheme\" parent=\"Theme.AppCompat.Light.Dialog\"&gt;\n    &lt;item name=\"android:windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name = \"android:windowContentOverlay\" &gt;@null&lt;/item &gt;\n    &lt;item name = \"android:colorBackgroundCacheHint\" &gt;@null&lt;/item &gt;\n    &lt;item name = \"android:gravity\" &gt;bottom&lt;/item &gt;\n    &lt;item name = \"android:backgroundDimEnabled\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowFrame\"&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>SmallBiometric.xml</p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_gravity=\"bottom\"\nandroid:excludeFromRecents=\"true\"\nandroid:foregroundGravity=\"bottom\"\ntools:context=\".Fragments.SmallBiometricAuth\"&gt;\n\n\n&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"bottom\"\n        android:background=\"@drawable/rounded_corners\"\n        android:foregroundGravity=\"bottom\"\n        android:gravity=\"bottom\"\n        android:orientation=\"vertical\"\n        android:paddingTop=\"15dp\"&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/finger_print_icon\"\n            android:layout_width=\"60dp\"\n            android:layout_height=\"60dp\"\n            android:layout_gravity=\"center\"\n            android:background=\"#ffffff\"\n            android:src=\"@drawable/ic_fingerprint_black\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"15dp\"\n            android:text=\"Zidentyfikuj si\u0119\"\n            android:textAlignment=\"center\"\n            android:textColor=\"#111111\"\n            android:textSize=\"15sp\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/cancel_auth\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"20dp\"\n            android:layout_marginBottom=\"20dp\"\n            android:text=\"Anuluj\"\n            android:textAlignment=\"center\"\n            android:textColor=\"#0055A5\"\n            android:textSize=\"22sp\"\n            android:textStyle=\"bold\" /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>androidManifest.xml</p>\n\n<pre><code>&lt;activity android:name=\".Fragments.SmallBiometricAuth\" android:theme=\"@style/mytheme\" /&gt;\n</code></pre>\n\n<p>Both doesn't work.Please help ;)</p>\n\n<p>@EDIT</p>\n\n<p>Thank you very much @Sanket Bhat\nDelete \"android\" namespace help</p>\n"}, {"tags": ["android", "kotlin", "android-activity"], "answers": [{"comments": [{"owner": {"reputation": 3485, "user_id": 455466, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fc2a4aa192c88f4dd9ba870175f9e093?s=128&d=identicon&r=PG", "display_name": "u84six", "link": "https://stackoverflow.com/users/455466/u84six"}, "edited": false, "score": 0, "creation_date": 1573071149, "post_id": 58737700, "comment_id": 103765591, "body": "This seems like a good solution. I&#39;ll give it a try (I&#39;m fairly new to Android dev)."}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1573070645, "creation_date": 1573070645, "answer_id": 58737700, "question_id": 58737515, "link": "https://stackoverflow.com/questions/58737515/how-to-make-a-layout-fill-the-screen-vertically-but-start-to-grow-when-content-d/58737700#58737700", "title": "How to make a layout fill the screen vertically but start to grow when content doesn&#39;t fit", "body": "<p>You can achieve this by combining a <code>ScrollView</code> using <code>android:fillViewport=\"true\"</code> and a vertical <code>LinearLayout</code> that has a <code>Space</code> with <code>android:layout_weight=\"1\"</code> between your content and your navigation bar.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;ScrollView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fillViewport=\"true\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;View\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"200dp\"\n            android:background=\"#ccc\"/&gt;\n\n        &lt;Space\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"1\"/&gt;\n\n        &lt;View\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"48dp\"\n            android:background=\"#eee\"/&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/ScrollView&gt;\n</code></pre>\n\n<p>That first view is a placeholder for whatever content you want to display, and the second is a placeholder for your navigation bar. You can see that when the first view is short (200dp tall), you get the \"content\" at the top and the navigation bar at the bottom:</p>\n\n<p><img src=\"https://i.stack.imgur.com/7iBk2.png\" height=\"300\"/></p>\n\n<p>This works because the <code>fillViewport</code> attribute will \"stretch\" the child <code>LinearLayout</code> to fill the screen, at which point there is \"extra\" space and the <code>layout_weight</code> attribute on the <code>Space</code> element will consume all that space. (Note that, despite being a <code>ScrollView</code>, you can't actually scroll anything in this state, since the view is stretched to be the exact size of the screen.)</p>\n\n<p>However, when the \"content\" is tall enough to fill the screen, the <code>fillViewport</code> attribute will have no effect, the LinearLayout won't be stretched, and there won't be any extra space to consume. So, once you scroll to the bottom, your content will fill right up to the edge of the navigation bar:</p>\n\n<p><img src=\"https://i.stack.imgur.com/9LZIx.png\" height=\"300\"/> &nbsp; <img src=\"https://i.stack.imgur.com/gflLx.png\" height=\"300\"/></p>\n\n<p><em>(Scrolled to the top on the left, and scrolled to the bottom on the right.)</em></p>\n"}], "owner": {"reputation": 3485, "user_id": 455466, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fc2a4aa192c88f4dd9ba870175f9e093?s=128&d=identicon&r=PG", "display_name": "u84six", "link": "https://stackoverflow.com/users/455466/u84six"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58737700, "answer_count": 1, "score": 1, "last_activity_date": 1573070645, "creation_date": 1573069759, "question_id": 58737515, "link": "https://stackoverflow.com/questions/58737515/how-to-make-a-layout-fill-the-screen-vertically-but-start-to-grow-when-content-d", "title": "How to make a layout fill the screen vertically but start to grow when content doesn&#39;t fit", "body": "<p>I wish I had an example to show if it seems confusing, but basically what I want to do is show a bottom toolbar with a Right navigator button (e.g. go to next page) always anchored to bottom of the screen, but if the content on the page (middle section) grows, the toolbar will push down so that you have to scroll to get to it. I know it seems strange, but this is the requirements. What would be the best approach for this?</p>\n"}, {"tags": ["android", "gradle", "kotlin", "java-8"], "comments": [{"owner": {"reputation": 501, "user_id": 6160689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd07633d89d73629a21246090042d30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sartorius", "link": "https://stackoverflow.com/users/6160689/sartorius"}, "edited": false, "score": 0, "creation_date": 1573144157, "post_id": 58737497, "comment_id": 103794165, "body": "Unfortunately, from your description, I didn&#39;t really understand what you are doing here."}, {"owner": {"reputation": 501, "user_id": 6160689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd07633d89d73629a21246090042d30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sartorius", "link": "https://stackoverflow.com/users/6160689/sartorius"}, "edited": false, "score": 0, "creation_date": 1573145304, "post_id": 58737497, "comment_id": 103794755, "body": "Did you set <code>compileKotlin.kotlinOptions.jvmTarget = &quot;1.8&quot;</code>?"}, {"owner": {"reputation": 374, "user_id": 6774555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01eb4d5ab5282abbc27154456feed79c?s=128&d=identicon&r=PG&f=1", "display_name": "apophis", "link": "https://stackoverflow.com/users/6774555/apophis"}, "edited": false, "score": 1, "creation_date": 1573146535, "post_id": 58737497, "comment_id": 103795457, "body": "The <code>getLastNotNullValue</code> bytecode you show has obviously not gone through Android R8 desugaring. Any chance you are using Instant Run or an outdated AS version?"}, {"owner": {"reputation": 31, "user_id": 12333643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg0mA.jpg?s=128&g=1", "display_name": "ShadowMaster", "link": "https://stackoverflow.com/users/12333643/shadowmaster"}, "edited": false, "score": 0, "creation_date": 1573156253, "post_id": 58737497, "comment_id": 103799675, "body": "@Satorius, Yes,  I have checked that use it.                                                 <code>compileOptions {         setSourceCompatibility(JavaVersion.VERSION_1_8)         setTargetCompatibility(JavaVersion.VERSION_1_8)     }     kotlinOptions {         val options = this as? KotlinJvmOptions         options?.jvmTarget = JavaVersion.VERSION_1_8.toString()     }</code>"}, {"owner": {"reputation": 31, "user_id": 12333643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg0mA.jpg?s=128&g=1", "display_name": "ShadowMaster", "link": "https://stackoverflow.com/users/12333643/shadowmaster"}, "reply_to_user": {"reputation": 374, "user_id": 6774555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01eb4d5ab5282abbc27154456feed79c?s=128&d=identicon&r=PG&f=1", "display_name": "apophis", "link": "https://stackoverflow.com/users/6774555/apophis"}, "edited": false, "score": 0, "creation_date": 1573156458, "post_id": 58737497, "comment_id": 103799761, "body": "@apophis, I have tryed from command line and used d8 and r8. The same result <code>android.enableR8=true android.enableR8.libraries=true</code>"}, {"owner": {"reputation": 374, "user_id": 6774555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01eb4d5ab5282abbc27154456feed79c?s=128&d=identicon&r=PG&f=1", "display_name": "apophis", "link": "https://stackoverflow.com/users/6774555/apophis"}, "edited": false, "score": 0, "creation_date": 1573159690, "post_id": 58737497, "comment_id": 103801078, "body": "Don&#39;t know what&#39;s going wrong, but <code>&#47;Stream;-&gt;of(</code> instead of <code>&#47;Stream$-CC;-&gt;of(</code> seems to suggest that the class file hasn&#39;t been desugared."}, {"owner": {"reputation": 31, "user_id": 12333643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg0mA.jpg?s=128&g=1", "display_name": "ShadowMaster", "link": "https://stackoverflow.com/users/12333643/shadowmaster"}, "edited": false, "score": 1, "creation_date": 1573192140, "post_id": 58737497, "comment_id": 103808974, "body": "I assume that the key moment is that i implement dependency <b>by repo</b>. <b>Stream.of</b> is called inside the <b>JAVA</b>-dependency. If I call it from code - all will be ok, and if I download dependency and implement locally all will be ok. Why desugaring is maked in first case and isn&#39;t maked in second?"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 6160689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd07633d89d73629a21246090042d30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sartorius", "link": "https://stackoverflow.com/users/6160689/sartorius"}, "edited": false, "score": 2, "creation_date": 1573143624, "post_id": 58738161, "comment_id": 103793832, "body": "Nonsense. He&#39;s using a <a href=\"https://github.com/retrostreams/android-retrostreams\" rel=\"nofollow noreferrer\">backport</a> of the Stream API that is targeted to API Level &lt; 24. Does work fine, at least when used from Java."}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1573073097, "last_edit_date": 1573073097, "creation_date": 1573072776, "answer_id": 58738161, "question_id": 58737497, "link": "https://stackoverflow.com/questions/58737497/java-lang-nosuchmethoderror-in-external-java-dependency-inside-the-java-dependen/58738161#58738161", "title": "java.lang.NoSuchMethodError in external java dependency inside the java dependency from Kotlin on Android 5", "body": "<p>You are trying to use <strong>Java Stream</strong> Api in Android API level &lt; 24 which is not possible.</p>\n\n<p>Check what you can and can't use based on Android API level <a href=\"https://developer.android.com/studio/preview/features/java8-support.html#supported_features\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 31, "user_id": 12333643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg0mA.jpg?s=128&g=1", "display_name": "ShadowMaster", "link": "https://stackoverflow.com/users/12333643/shadowmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1573073097, "creation_date": 1573069681, "question_id": 58737497, "link": "https://stackoverflow.com/questions/58737497/java-lang-nosuchmethoderror-in-external-java-dependency-inside-the-java-dependen", "title": "java.lang.NoSuchMethodError in external java dependency inside the java dependency from Kotlin on Android 5", "body": "<p>I implement the external <strong>JAVA</strong>-dependency from the repository that contains another external dependency (<strong>retro stream</strong>) from the android application on Kotlin, as a result I get a crash on <strong>android 5</strong> by <strong>java.lang.NoSuchMethodError: No static method</strong> according to the trace inside the <strong>JAVA</strong>-library (the trace is attached below). The problem occurs in the <strong>Stream</strong> class at the <strong>retro stream</strong> library (method \"<strong><em>of</em></strong>\"). I have checked that this library exist in external dependencies and all classes and methods are visible from the code, and, most interestingly, it does not crash on <strong>android> = 7</strong> devices.</p>\n\n<p>I have tried to call method explicitly from the <strong>kotlin</strong> code - all ok.</p>\n\n<pre><code>Versions: \nKotlin                   1.3.50 \nGradle plugin            3.4.2\nGradle                   5.4.1\nAndroid studio           3.5\n</code></pre>\n\n<p>The problem code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    EmptyUtils.getLastNotNullGotValue(Supplier { \"\" })\n</code></pre>\n\n<blockquote>\n  <p>E/AndroidRuntime( 5699): FATAL EXCEPTION: main E/AndroidRuntime(\n  5699): Process: com.jetruby.kotlindslgradleexample, PID: 5699\n  E/AndroidRuntime( 5699): java.lang.NoSuchMethodError: No static method\n  of([Ljava/lang/Object;)Ljava9/util/stream/Stream; in class\n  Ljava9/util/stream/Stream; or its super classes (declaration of\n  'java9.util.stream.Stream' appears in\n  /data/app/com.jetruby.kotlindslgradleexample-2/base.apk)\n  E/AndroidRuntime( 5699): at\n  ru.m4bank.mpos.service.network.utils.EmptyUtils.getLastNotNullGotValueOrDefault(EmptyUtils.java:40)\n  E/AndroidRuntime( 5699): at\n  ru.m4bank.mpos.service.network.utils.EmptyUtils.getLastNotNullGotValue(EmptyUtils.java:51)\n  E/AndroidRuntime( 5699): at\n  com.jetruby.kotlindslgradleexample.MainActivity.onCreate(MainActivity.kt:33)\n  E/AndroidRuntime( 5699): at\n  android.app.Activity.performCreate(Activity.java:5990)\n  E/AndroidRuntime( 5699): at\n  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1106)\n  E/AndroidRuntime( 5699): at\n  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2278)\n  E/AndroidRuntime( 5699): at\n  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\n  E/AndroidRuntime( 5699): at\n  android.app.ActivityThread.access$800(ActivityThread.java:151)\n  E/AndroidRuntime( 5699): at\n  android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\n  E/AndroidRuntime( 5699): at\n  android.os.Handler.dispatchMessage(Handler.java:102) E/AndroidRuntime(\n  5699): at android.os.Looper.loop(Looper.java:135) E/AndroidRuntime(\n  5699): at android.app.ActivityThread.main(ActivityThread.java:5254)\n  E/AndroidRuntime( 5699): at java.lang.reflect.Method.invoke(Native\n  Method) E/AndroidRuntime( 5699): at\n  java.lang.reflect.Method.invoke(Method.java:372) E/AndroidRuntime(\n  5699): at\n  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n  E/AndroidRuntime( 5699): at\n  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)</p>\n</blockquote>\n\n<p>Having experimented with various assembly options, I found that if you implement the <strong>JAVA</strong>-dependency locally (by file), there will be no crash on the <strong>5-th android !!</strong>. Also, the fall does not occur if compile from <strong>JAVA</strong>, and not from <strong>kotlin</strong>. And it falls only on <strong>static methods in interfaces</strong>.</p>\n\n<p>In the picture below the are 2 dependency variants (the first I copied from the <strong>gradle</strong> cache when I pulled up the 2nd one and implement it locally as <strong>file</strong>, the second one just <strong>pulled from the repository</strong>).</p>\n\n<p><a href=\"https://i.stack.imgur.com/1ORhU.png\" rel=\"nofollow noreferrer\">Implementation variants</a></p>\n\n<p>Results:</p>\n\n<pre><code>On android &lt;7:  1-st variant - all ok, 2-nd variant - crashes.\nOn android &gt;=7 - 1,2 variants - ok\n</code></pre>\n\n<p>I have decompiled the application and noticed that <em>from kotlin</em> <strong>static methods from interfaces</strong> are collected in a separate class (the auxiliary inner class <strong>ClassName.CC</strong> is created and static methods are placed in it). So, when implement dependencies <strong>from the repository</strong>, the decompiled external class refers to the <strong>original class</strong> and the original method, and when implement from the <strong>local source</strong> (copied from the pulled up repository to the libs folder), it refers to auxiliary <strong>XX.CC</strong>. There is a suspicion that is the reason of <strong>java.lang.NoSuchMethodError crashes: No static method</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TbNeI.png\" rel=\"nofollow noreferrer\">Decompiled classes of the problem class</a></p>\n\n<p>The code below is decompiled code of the \"helper\" class with the \"missing\" of method. It is the same for both successful and unsuccessful builds:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    .class public final synthetic Ljava9/util/stream/Stream$-CC;\n        .super Ljava/lang/Object;\n        .source \"Stream.java\"\n\n\n        # direct methods\n        .method public static $default$dropWhile(Ljava9/util/stream/Stream;Ljava9/util/function/Predicate;)Ljava9/util/stream/Stream;\n            .locals 3\n            .param p0, \"_this\"    # Ljava9/util/stream/Stream;\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"(\",\n                    \"Ljava9/util/function/Predicate&lt;\",\n                    \"-TT;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 630\n            .local p0, \"this\":Ljava9/util/stream/Stream;, \"Ljava9/util/stream/Stream&lt;TT;&gt;;\"\n            .local p1, \"predicate\":Ljava9/util/function/Predicate;, \"Ljava9/util/function/Predicate&lt;-TT;&gt;;\"\n            invoke-static {p1}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 633\n            new-instance v0, Ljava9/util/stream/WhileOps$UnorderedWhileSpliterator$OfRef$Dropping;\n\n            .line 634\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;spliterator()Ljava9/util/Spliterator;\n\n            move-result-object v1\n\n            const/4 v2, 0x1\n\n            invoke-direct {v0, v1, v2, p1}, Ljava9/util/stream/WhileOps$UnorderedWhileSpliterator$OfRef$Dropping;-&gt;&lt;init&gt;(Ljava9/util/Spliterator;ZLjava9/util/function/Predicate;)V\n\n            .line 635\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;isParallel()Z\n\n            move-result v1\n\n            .line 633\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            .line 635\n            invoke-static {p0}, Ljava9/util/stream/StreamSupport;-&gt;closeHandler(Ljava9/util/stream/BaseStream;)Ljava/lang/Runnable;\n\n            move-result-object v1\n\n            invoke-interface {v0, v1}, Ljava9/util/stream/Stream;-&gt;onClose(Ljava/lang/Runnable;)Ljava9/util/stream/BaseStream;\n\n            move-result-object v0\n\n            check-cast v0, Ljava9/util/stream/Stream;\n\n            return-object v0\n        .end method\n\n        .method public static $default$takeWhile(Ljava9/util/stream/Stream;Ljava9/util/function/Predicate;)Ljava9/util/stream/Stream;\n            .locals 3\n            .param p0, \"_this\"    # Ljava9/util/stream/Stream;\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"(\",\n                    \"Ljava9/util/function/Predicate&lt;\",\n                    \"-TT;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 564\n            .local p0, \"this\":Ljava9/util/stream/Stream;, \"Ljava9/util/stream/Stream&lt;TT;&gt;;\"\n            .local p1, \"predicate\":Ljava9/util/function/Predicate;, \"Ljava9/util/function/Predicate&lt;-TT;&gt;;\"\n            invoke-static {p1}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 567\n            new-instance v0, Ljava9/util/stream/WhileOps$UnorderedWhileSpliterator$OfRef$Taking;\n\n            .line 568\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;spliterator()Ljava9/util/Spliterator;\n\n            move-result-object v1\n\n            const/4 v2, 0x1\n\n            invoke-direct {v0, v1, v2, p1}, Ljava9/util/stream/WhileOps$UnorderedWhileSpliterator$OfRef$Taking;-&gt;&lt;init&gt;(Ljava9/util/Spliterator;ZLjava9/util/function/Predicate;)V\n\n            .line 569\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;isParallel()Z\n\n            move-result v1\n\n            .line 567\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            .line 569\n            invoke-static {p0}, Ljava9/util/stream/StreamSupport;-&gt;closeHandler(Ljava9/util/stream/BaseStream;)Ljava/lang/Runnable;\n\n            move-result-object v1\n\n            invoke-interface {v0, v1}, Ljava9/util/stream/Stream;-&gt;onClose(Ljava/lang/Runnable;)Ljava9/util/stream/BaseStream;\n\n            move-result-object v0\n\n            check-cast v0, Ljava9/util/stream/Stream;\n\n            return-object v0\n        .end method\n\n        .method public static builder()Ljava9/util/stream/Stream$Builder;\n            .locals 1\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;()\",\n                    \"Ljava9/util/stream/Stream$Builder&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1148\n            new-instance v0, Ljava9/util/stream/Streams$StreamBuilderImpl;\n\n            invoke-direct {v0}, Ljava9/util/stream/Streams$StreamBuilderImpl;-&gt;&lt;init&gt;()V\n\n            return-object v0\n        .end method\n\n        .method public static concat(Ljava9/util/stream/Stream;Ljava9/util/stream/Stream;)Ljava9/util/stream/Stream;\n            .locals 3\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;(\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"+TT;&gt;;\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"+TT;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1387\n            .local p0, \"a\":Ljava9/util/stream/Stream;, \"Ljava9/util/stream/Stream&lt;+TT;&gt;;\"\n            .local p1, \"b\":Ljava9/util/stream/Stream;, \"Ljava9/util/stream/Stream&lt;+TT;&gt;;\"\n            invoke-static {p0}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1388\n            invoke-static {p1}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1391\n            new-instance v0, Ljava9/util/stream/Streams$ConcatSpliterator$OfRef;\n\n            .line 1392\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;spliterator()Ljava9/util/Spliterator;\n\n            move-result-object v1\n\n            invoke-interface {p1}, Ljava9/util/stream/Stream;-&gt;spliterator()Ljava9/util/Spliterator;\n\n            move-result-object v2\n\n            invoke-direct {v0, v1, v2}, Ljava9/util/stream/Streams$ConcatSpliterator$OfRef;-&gt;&lt;init&gt;(Ljava9/util/Spliterator;Ljava9/util/Spliterator;)V\n\n            .line 1393\n            .local v0, \"split\":Ljava9/util/Spliterator;, \"Ljava9/util/Spliterator&lt;TT;&gt;;\"\n            invoke-interface {p0}, Ljava9/util/stream/Stream;-&gt;isParallel()Z\n\n            move-result v1\n\n            if-nez v1, :cond_1\n\n            invoke-interface {p1}, Ljava9/util/stream/Stream;-&gt;isParallel()Z\n\n            move-result v1\n\n            if-eqz v1, :cond_0\n\n            goto :goto_0\n\n            :cond_0\n            const/4 v1, 0x0\n\n            goto :goto_1\n\n            :cond_1\n            :goto_0\n            const/4 v1, 0x1\n\n            :goto_1\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v1\n\n            .line 1394\n            .local v1, \"stream\":Ljava9/util/stream/Stream;, \"Ljava9/util/stream/Stream&lt;TT;&gt;;\"\n            invoke-static {p0, p1}, Ljava9/util/stream/Streams;-&gt;composedClose(Ljava9/util/stream/BaseStream;Ljava9/util/stream/BaseStream;)Ljava/lang/Runnable;\n\n            move-result-object v2\n\n            invoke-interface {v1, v2}, Ljava9/util/stream/Stream;-&gt;onClose(Ljava/lang/Runnable;)Ljava9/util/stream/BaseStream;\n\n            move-result-object v2\n\n            check-cast v2, Ljava9/util/stream/Stream;\n\n            return-object v2\n        .end method\n\n        .method public static empty()Ljava9/util/stream/Stream;\n            .locals 2\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;()\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1158\n            invoke-static {}, Ljava9/util/Spliterators;-&gt;emptySpliterator()Ljava9/util/Spliterator;\n\n            move-result-object v0\n\n            const/4 v1, 0x0\n\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            return-object v0\n        .end method\n\n        .method public static generate(Ljava9/util/function/Supplier;)Ljava9/util/stream/Stream;\n            .locals 3\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;(\",\n                    \"Ljava9/util/function/Supplier&lt;\",\n                    \"+TT;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1345\n            .local p0, \"s\":Ljava9/util/function/Supplier;, \"Ljava9/util/function/Supplier&lt;+TT;&gt;;\"\n            invoke-static {p0}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1346\n            new-instance v0, Ljava9/util/stream/StreamSpliterators$InfiniteSupplyingSpliterator$OfRef;\n\n            const-wide v1, 0x7fffffffffffffffL\n\n            invoke-direct {v0, v1, v2, p0}, Ljava9/util/stream/StreamSpliterators$InfiniteSupplyingSpliterator$OfRef;-&gt;&lt;init&gt;(JLjava9/util/function/Supplier;)V\n\n            const/4 v1, 0x0\n\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            return-object v0\n        .end method\n\n        .method public static iterate(Ljava/lang/Object;Ljava9/util/function/Predicate;Ljava9/util/function/UnaryOperator;)Ljava9/util/stream/Stream;\n            .locals 8\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"S:TT;&gt;(TS;\",\n                    \"Ljava9/util/function/Predicate&lt;\",\n                    \"TS;&gt;;\",\n                    \"Ljava9/util/function/UnaryOperator&lt;\",\n                    \"TS;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1287\n            .local p0, \"seed\":Ljava/lang/Object;, \"TS;\"\n            .local p1, \"hasNext\":Ljava9/util/function/Predicate;, \"Ljava9/util/function/Predicate&lt;TS;&gt;;\"\n            .local p2, \"next\":Ljava9/util/function/UnaryOperator;, \"Ljava9/util/function/UnaryOperator&lt;TS;&gt;;\"\n            invoke-static {p2}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1288\n            invoke-static {p1}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1289\n            new-instance v7, Ljava9/util/stream/Stream$2;\n\n            const-wide v1, 0x7fffffffffffffffL\n\n            const/16 v3, 0x410\n\n            move-object v0, v7\n\n            move-object v4, p2\n\n            move-object v5, p0\n\n            move-object v6, p1\n\n            invoke-direct/range {v0 .. v6}, Ljava9/util/stream/Stream$2;-&gt;&lt;init&gt;(JILjava9/util/function/UnaryOperator;Ljava/lang/Object;Ljava9/util/function/Predicate;)V\n\n            .line 1331\n            .local v0, \"spliterator\":Ljava9/util/Spliterator;, \"Ljava9/util/Spliterator&lt;TT;&gt;;\"\n            const/4 v1, 0x0\n\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v1\n\n            return-object v1\n        .end method\n\n        .method public static iterate(Ljava/lang/Object;Ljava9/util/function/UnaryOperator;)Ljava9/util/stream/Stream;\n            .locals 7\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"S:TT;&gt;(TS;\",\n                    \"Ljava9/util/function/UnaryOperator&lt;\",\n                    \"TS;&gt;;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1224\n            .local p0, \"seed\":Ljava/lang/Object;, \"TS;\"\n            .local p1, \"f\":Ljava9/util/function/UnaryOperator;, \"Ljava9/util/function/UnaryOperator&lt;TS;&gt;;\"\n            invoke-static {p1}, Ljava9/util/Objects;-&gt;requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;\n\n            .line 1225\n            new-instance v6, Ljava9/util/stream/Stream$1;\n\n            const-wide v1, 0x7fffffffffffffffL\n\n            const/16 v3, 0x410\n\n            move-object v0, v6\n\n            move-object v4, p1\n\n            move-object v5, p0\n\n            invoke-direct/range {v0 .. v5}, Ljava9/util/stream/Stream$1;-&gt;&lt;init&gt;(JILjava9/util/function/UnaryOperator;Ljava/lang/Object;)V\n\n            .line 1244\n            .local v0, \"spliterator\":Ljava9/util/Spliterator;, \"Ljava9/util/Spliterator&lt;TT;&gt;;\"\n            const/4 v1, 0x0\n\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v1\n\n            return-object v1\n        .end method\n\n        .method public static of(Ljava/lang/Object;)Ljava9/util/stream/Stream;\n            .locals 2\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;(TT;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1169\n            .local p0, \"t\":Ljava/lang/Object;, \"TT;\"\n            new-instance v0, Ljava9/util/stream/Streams$StreamBuilderImpl;\n\n            invoke-direct {v0, p0}, Ljava9/util/stream/Streams$StreamBuilderImpl;-&gt;&lt;init&gt;(Ljava/lang/Object;)V\n\n            const/4 v1, 0x0\n\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            return-object v0\n        .end method\n\n        .method public static varargs of([Ljava/lang/Object;)Ljava9/util/stream/Stream;\n            .locals 1\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;([TT;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1196\n            .local p0, \"values\":[Ljava/lang/Object;, \"[TT;\"\n            invoke-static {p0}, Ljava9/util/J8Arrays;-&gt;stream([Ljava/lang/Object;)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            return-object v0\n        .end method\n\n        .method public static ofNullable(Ljava/lang/Object;)Ljava9/util/stream/Stream;\n            .locals 2\n            .annotation system Ldalvik/annotation/Signature;\n                value = {\n                    \"&lt;T:\",\n                    \"Ljava/lang/Object;\",\n                    \"&gt;(TT;)\",\n                    \"Ljava9/util/stream/Stream&lt;\",\n                    \"TT;&gt;;\"\n                }\n            .end annotation\n\n            .line 1183\n            .local p0, \"t\":Ljava/lang/Object;, \"TT;\"\n            if-nez p0, :cond_0\n\n            invoke-static {}, Ljava9/util/stream/Stream$-CC;-&gt;empty()Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            goto :goto_0\n\n            :cond_0\n            new-instance v0, Ljava9/util/stream/Streams$StreamBuilderImpl;\n\n            invoke-direct {v0, p0}, Ljava9/util/stream/Streams$StreamBuilderImpl;-&gt;&lt;init&gt;(Ljava/lang/Object;)V\n\n            const/4 v1, 0x0\n\n            .line 1184\n            invoke-static {v0, v1}, Ljava9/util/stream/StreamSupport;-&gt;stream(Ljava9/util/Spliterator;Z)Ljava9/util/stream/Stream;\n\n            move-result-object v0\n\n            :goto_0\n            return-object v0\n        .end method\n</code></pre>\n\n<p>The decompiled method of the <strong>JAVA</strong>-library in that the absent method is called (<strong>Build with crash</strong>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    .method public static varargs getLastNotNullValue([Ljava/lang/Object;)Ljava/lang/Object;\n        .locals 2\n        .annotation system Ldalvik/annotation/Signature;\n            value = {\n                \"&lt;T:\",\n                \"Ljava/lang/Object;\",\n                \"&gt;([TT;)TT;\"\n            }\n        .end annotation\n\n        .annotation runtime Ljava/lang/SafeVarargs;\n        .end annotation\n\n        .line 56\n        .local p0, \"values\":[Ljava/lang/Object;, \"[TT;\"\n        invoke-static {p0}, Ljava9/util/stream/Stream;-&gt;of([Ljava/lang/Object;)Ljava9/util/stream/Stream;\n\n        move-result-object v0\n\n        sget-object v1, Lru/m4bank/mpos/service/network/utils/-$$Lambda$h24iVvNNOyPAWTyqI3I8dzCunHY;-&gt;INSTANCE:Lru/m4bank/mpos/service/network/utils/-$$Lambda$h24iVvNNOyPAWTyqI3I8dzCunHY;\n\n        invoke-interface {v0, v1}, Ljava9/util/stream/Stream;-&gt;filter(Ljava9/util/function/Predicate;)Ljava9/util/stream/Stream;\n\n        move-result-object v0\n\n        invoke-interface {v0}, Ljava9/util/stream/Stream;-&gt;findFirst()Ljava9/util/Optional;\n\n        move-result-object v0\n\n        sget-object v1, Lru/m4bank/mpos/service/network/utils/-$$Lambda$EmptyUtils$2lJJnncNhWO5-cW1nB8g96aMo4M;-&gt;INSTANCE:Lru/m4bank/mpos/service/network/utils/-$$Lambda$EmptyUtils$2lJJnncNhWO5-cW1nB8g96aMo4M;\n\n        invoke-virtual {v0, v1}, Ljava9/util/Optional;-&gt;orElseGet(Ljava9/util/function/Supplier;)Ljava/lang/Object;\n\n        move-result-object v0\n\n        return-object v0\n    .end method\n</code></pre>\n\n<p>The same decompiled method (<strong>Build without crash</strong>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    .method public static varargs getLastNotNullValue([Ljava/lang/Object;)Ljava/lang/Object;\n        .locals 2\n        .annotation system Ldalvik/annotation/Signature;\n            value = {\n                \"&lt;T:\",\n                \"Ljava/lang/Object;\",\n                \"&gt;([TT;)TT;\"\n            }\n        .end annotation\n\n        .annotation runtime Ljava/lang/SafeVarargs;\n        .end annotation\n\n        .line 56\n        .local p0, \"values\":[Ljava/lang/Object;, \"[TT;\"\n        invoke-static {p0}, Ljava9/util/stream/Stream$-CC;-&gt;of([Ljava/lang/Object;)Ljava9/util/stream/Stream;\n\n        move-result-object v0\n\n        sget-object v1, Lru/m4bank/mpos/service/network/utils/-$$Lambda$h24iVvNNOyPAWTyqI3I8dzCunHY;-&gt;INSTANCE:Lru/m4bank/mpos/service/network/utils/-$$Lambda$h24iVvNNOyPAWTyqI3I8dzCunHY;\n\n        invoke-interface {v0, v1}, Ljava9/util/stream/Stream;-&gt;filter(Ljava9/util/function/Predicate;)Ljava9/util/stream/Stream;\n\n        move-result-object v0\n\n        invoke-interface {v0}, Ljava9/util/stream/Stream;-&gt;findFirst()Ljava9/util/Optional;\n\n        move-result-object v0\n\n        sget-object v1, Lru/m4bank/mpos/service/network/utils/-$$Lambda$EmptyUtils$2lJJnncNhWO5-cW1nB8g96aMo4M;-&gt;INSTANCE:Lru/m4bank/mpos/service/network/utils/-$$Lambda$EmptyUtils$2lJJnncNhWO5-cW1nB8g96aMo4M;\n\n        invoke-virtual {v0, v1}, Ljava9/util/Optional;-&gt;orElseGet(Ljava9/util/function/Supplier;)Ljava/lang/Object;\n\n        move-result-object v0\n\n        return-object v0\n    .end method\n</code></pre>\n\n<p>Question: is it a <strong>kotlin</strong> bug or am I doing something wrong, and how then can I use the <strong>JAVA</strong>-libraries <strong>from the repository</strong> (which contain <strong>interfaces with static methods</strong> inside) on <strong>android &lt;7</strong> and don't crash?</p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-webflux", "project-reactor"], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 11368263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eec56795fa4980313e1671e74587719?s=128&d=identicon&r=PG&f=1", "display_name": "yash sugandh", "link": "https://stackoverflow.com/users/11368263/yash-sugandh"}, "is_accepted": true, "score": 2, "last_activity_date": 1573123852, "last_edit_date": 1573123852, "creation_date": 1573122313, "answer_id": 58746668, "question_id": 58737428, "link": "https://stackoverflow.com/questions/58737428/how-to-concat-a-nested-flux/58746668#58746668", "title": "How to concat a nested flux", "body": "<p>You need to use <code>()</code> intead of <code>{}</code> in <code>concatWith()</code></p>\n\n<pre><code>// RIGHT!\n\n    Flux.just(\"a\", \"v\")\n                    .flatMap { it.toUpperCase().toMono() }\n                    .concatWith ( names.joinToString(\" \").toMono() )\n\n// WRONG!\n\n    Flux.just(\"a\", \"v\")\n                    .flatMap { it.toUpperCase().toMono() }\n                    .concatWith { names.joinToString(\" \").toMono() }\n</code></pre>\n\n<p>Most of Rx2 methods do accept actual lambdas, some of methods take <code>Callable&lt;ObservableSource&lt;T&gt;&gt;</code> instead of <code>ObservableSource</code>, others take <code>Function&lt;T, ObservableSource&lt;R&gt;&gt;</code>.</p>\n\n<p><code>Observable.defer { Observable.just(1) }</code> \u2014 this will work fine.</p>\n\n<p>Or \n<code>observable.flatMap { Observable.just(1) }</code> \u2014 will work as expected too (if you\u2019re ignoring incoming param purposely).</p>\n\n<p>And the third one is the fact that we got used to Rx1 which always took <code>Observable</code> in its <code>andThen()</code> method, which couldn\u2019t be represented as lambda , which is why we need to use <code>()</code> instead of <code>{}</code></p>\n"}], "owner": {"reputation": 145, "user_id": 7200236, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-l-8BwGpRqso/AAAAAAAAAAI/AAAAAAAAAgY/xWb4wGHPluE/photo.jpg?sz=128", "display_name": "Israel Rodrigues", "link": "https://stackoverflow.com/users/7200236/israel-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 58746668, "answer_count": 1, "score": 1, "last_activity_date": 1573124862, "creation_date": 1573069366, "last_edit_date": 1573124862, "question_id": 58737428, "link": "https://stackoverflow.com/questions/58737428/how-to-concat-a-nested-flux", "title": "How to concat a nested flux", "body": "<p>How to concatenate two flux with a nested one? Why this code execution never ends?</p>\n\n<pre><code>@Test\nfun `concatenating two flux`() {\n\n    val names = listOf(\"israel\", \"israel\")\n\n    val a = Flux.just(\"a\", \"v\")\n            .flatMap { it.toUpperCase().toMono() }\n            .concatWith { names.joinToString(\" \").toMono() }\n\n    StepVerifier.create(a).expectNext(\"A\", \"V\", \"israel israel\").verifyComplete()\n}\n</code></pre>\n\n<p>when I have the flux with separated variable, the execution runs as expected</p>\n\n<pre><code>@Test\nfun `concatenating two flux`() {\n\n    val names = listOf(\"israel\", \"israel\")\n\n    val b = names.joinToString(\" \").toMono()\n\n    val a = Flux.just(\"a\", \"v\")\n            .flatMap { it.toUpperCase().toMono() }\n\n    val c = a.concatWith(b)\n\n    StepVerifier.create(c.log()).expectNext(\"A\", \"V\", \"israel israel\").verifyComplete()\n}\n</code></pre>\n"}, {"tags": ["java", "android", "image", "pdf", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1573081200, "post_id": 58737364, "comment_id": 103769221, "body": "You are getting a <code>content</code> <code>Uri</code>, so <code>uri.path.toString()</code> is meaningless. Hold a list of <code>Uri</code> values, not a list of &quot;paths&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573071796, "post_id": 58737704, "comment_id": 103765867, "body": "But the way to take the image of the internal storage of the phone is right?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573071870, "post_id": 58737704, "comment_id": 103765909, "body": "Did you take the path using Image Picker or hard coded?"}, {"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573071998, "post_id": 58737704, "comment_id": 103765977, "body": "I used:  <code>val image = File(diretorio.path + &quot;&#47;&quot; + System.currentTimeMillis().toString() + &quot;.jpg&quot;)</code> I not used Picker"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573072160, "post_id": 58737704, "comment_id": 103766054, "body": "This is not valid. Who create image in this path? You should use Image picker or something like that <code>File path = Environment.getExternalStoragePublicDirectory(         Environment.DIRECTORY_PICTURES); File file = new File(path, &quot;DemoPicture.jpg&quot;);</code>"}, {"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573072355, "post_id": 58737704, "comment_id": 103766129, "body": "Understand. I will edit the question. In the other class I get images (gallery / camera). Alas how do I send to the generate pdf class and use these selected images in the document."}, {"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573072702, "post_id": 58737704, "comment_id": 103766282, "body": "please help me, I&#39;m trying to do this for a long time and I can&#39;t attach the images to the pdf document"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573073023, "post_id": 58737704, "comment_id": 103766409, "body": "Then take image path from <code>pathImage</code> and write to pdf"}, {"owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573073243, "post_id": 58737704, "comment_id": 103766504, "body": "can you help me with this?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "edited": false, "score": 0, "creation_date": 1573073352, "post_id": 58737704, "comment_id": 103766539, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201972/discussion-between-md-asaduzzaman-and-tecnologia-da-net\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 1, "last_activity_date": 1573071618, "last_edit_date": 1573071618, "creation_date": 1573070679, "answer_id": 58737704, "question_id": 58737364, "link": "https://stackoverflow.com/questions/58737364/error-open-failed-enoent-no-such-file-or-directory-add-gallery-image-in-docu/58737704#58737704", "title": "Error: open failed: ENOENT (No such file or directory) add gallery image in document pdf", "body": "<p>Before using the file make sure it is exists</p>\n\n<pre><code>// Make sure the directory exists.\nFile(mFilePath).mkdirs()\n</code></pre>\n\n<p>Also check whether image file exist or not before access it.</p>\n\n<pre><code>File imageFile = new File(\"/storage/emulated/0/Pictures/1573066971461.jpg\");\nif(imageFile.exists())\n</code></pre>\n\n<p>Besides this don't forgot to take permissions from user</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 10473503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LddCLLTy4DI/AAAAAAAAAAI/AAAAAAAAABI/j5F4ZdD_yY0/photo.jpg?sz=128", "display_name": "Tecnologia da Net", "link": "https://stackoverflow.com/users/10473503/tecnologia-da-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "closed_date": 1573081131, "answer_count": 1, "score": 1, "last_activity_date": 1573072655, "creation_date": 1573068947, "last_edit_date": 1573072655, "question_id": 58737364, "link": "https://stackoverflow.com/questions/58737364/error-open-failed-enoent-no-such-file-or-directory-add-gallery-image-in-docu", "closed_reason": "Duplicate", "title": "Error: open failed: ENOENT (No such file or directory) add gallery image in document pdf", "body": "<p>I have difficulty adding images from the mobile gallery in the pdf document I am creating. Passing the image path returns the following error: Error: Failed to open: ENOENT (this file or directory does not exist).\nI created a class that the user can choose photos from gallery or capture a new image by camera. I am storing the path of these images in an arraylist. So I need to pass these paths to the function that creates the pdf document.</p>\n\n<pre><code>private val pathImage: ArrayList&lt;String&gt; = arrayListOf()\n\nprivate fun openCam() {\n    imageCapture.setOnClickListener(object : View.OnClickListener {\n        override fun onClick(v: View?) {\n            if (checkPermission()) {\n                val diretorio: File =\n                    Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)\n                val imagem =\n                    File(diretorio.path + \"/\" + System.currentTimeMillis().toString() + \".jpg\")\n                uri = Uri.fromFile(imagem)\n                val intent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n                startActivityForResult(intent, CAM)\n            } else {\n                requestPermission()\n            }\n        }\n    })\n\n   private fun openGatelry() {\n    imageGallery.setOnClickListener(object : View.OnClickListener {\n        override fun onClick(v: View?) {\n            val intent = Intent()\n            intent.type = \"image/*\"\n            intent.action = Intent.ACTION_GET_CONTENT\n            intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true)\n            startActivityForResult(Intent.createChooser(intent, R.string.select_picture.toString()), GALLERY)\n        }\n    })\n}\n\n override fun onActivityResult(\n    requestCode: Int,\n    resultCode: Int,\n    data: Intent?\n) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if (requestCode == CAM &amp;&amp; resultCode == Activity.RESULT_OK &amp;&amp; data != null) {\n        val novaIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, uri)\n        sendBroadcast(novaIntent)\n        val imageCam = uri.getPath()\n        if (imageCam != null) {\n            Log.i(\"TAG\", \"Camera: \"+imageCam)\n            pathImage.add(imageCam)\n        }\n    } else if (requestCode == GALLERY &amp;&amp; resultCode == Activity.RESULT_OK &amp;&amp; data != null) {\n        val clipData = data.clipData\n        if (clipData != null) {\n            for (i in 0 until clipData.itemCount) {\n                val uri: Uri = clipData.getItemAt(i).uri\n                pathImage.add(uri.path.toString())\n                showImages()\n            }\n        } else {\n            val uri = data.data\n            if (uri != null) {\n                pathImage.add(uri.path.toString())\n                showImages()\n            }\n        }\n    }\n}\n\n\n// Do something when user press the positive button\n                val mDoc = Document()\n                //pdf file name\n                val mFileName = SimpleDateFormat(\n                    \"ddMMyyyy_HHmmss\",\n                    Locale.getDefault()\n                ).format(System.currentTimeMillis())\n                //pdf file path\n                val mFilePath =\n                    Environment.getExternalStorageDirectory().toString() + \"/\" + mFileName + \".pdf\"\n                try {\n                    //create instance of PdfWriter class\n                    PdfWriter.getInstance(mDoc, FileOutputStream(mFilePath))\n                    //open the document for writing\n                    mDoc.open()\n                    val image = Image.getInstance(\"/storage/emulated/0/Pictures/1573066971461.jpg\")\n                    mDoc.add(image)\n                    //close document\n                    mDoc.close()\n</code></pre>\n"}, {"tags": ["multithreading", "kotlin", "reactive-programming", "project-reactor", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573107958, "post_id": 58736419, "comment_id": 103775141, "body": "You specifically created a fetching method that is non-cancellable for its entire duration. Is that what a real method would do? If so, then you must leak them and not enforce the structured concurrency discipline. Let them take their time in the background. But i really don&#39;t know if that&#39;s a smart design."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573112329, "post_id": 58736419, "comment_id": 103776915, "body": "So , in your opinion , <code>interface UrlShorter {   fun getShortUrl(longUrl: String): String? }</code> is problematic ?  My initial thought is that , it is just a blocking method , each implementation doesn&#39;t need to know it will be invoked by blocking or running inside a suspend function. If error occurs inside (timeout or API invoking ...)  , it just catch Exception and return null (code emitted for brevity) . If the design is not good , how to re-design it ? Thanks."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573114935, "post_id": 58736419, "comment_id": 103778122, "body": "If you&#39;re working with blocking calls then coroutines don&#39;t provide much value anyway. You can solve the same thing with old-school Java executors. But, you still <i>can</i> do it with coroutines, if you ensure you don&#39;t wait for the coroutine scope to complete."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573115885, "post_id": 58736419, "comment_id": 103778583, "body": "So , if <code>UrlShorter</code> defines <code>suspend fun getShortUrl(longUrl : String) : String?</code> , how does such architecture be re-designed , without leaky ? i&#39;ll be very appreciated if you provide a simple code."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 1, "creation_date": 1573116364, "post_id": 58736419, "comment_id": 103778830, "body": "Just making it <code>suspend fun</code> doesn&#39;t help, you have to make suspending calls inside it. If that is available to you (if you&#39;re just making network requests), then this can be solved properly. In that case one of your solutions may start working as well. I started sketching out a solution as well, I&#39;ll write an answer if I get anything good out of it."}], "answers": [{"comments": [{"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 0, "creation_date": 1573088416, "post_id": 58736859, "comment_id": 103770887, "body": "It seems your code doesn&#39;t compile... <code>impl.getShortUrl(longUrl)</code> returns <code>String?</code> , and the <code>select</code> type becomes <code>select&lt;String?&gt;</code> , but method should return <code>String</code>. and <code>coroutineContext[Job].cancelChildren()</code> makes the block return <code>Unit</code>  ... Mmm .... can you provide a full method ? Thanks."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1573144410, "post_id": 58736859, "comment_id": 103794291, "body": "I played with this approach, but it isn&#39;t worth it, the complexity ends up worse than communicating over a single channel. Treatment of failures is ugly, the filtering select loop is complex and so on."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 0, "last_activity_date": 1573066727, "creation_date": 1573066727, "answer_id": 58736859, "question_id": 58736419, "link": "https://stackoverflow.com/questions/58736419/kotlin-to-achieve-multithread-request-hedging/58736859#58736859", "title": "Kotlin to achieve multithread request hedging?", "body": "<p>This is essentially what the <code>select</code> APi was designed to do:</p>\n\n<pre><code>coroutineScope {\n    select {\n        impls.forEach { impl -&gt;\n            async {\n               impl.getShortUrl(longUrl)\n            }.onAwait { it }\n        }\n    }\n    coroutineContext[Job].cancelChildren() // Cancel any requests that are still going.\n}\n</code></pre>\n\n<p>Note that this will not handle exceptions thrown by the service implementations, you will need to use a <code>supervisorScope</code> with a custom exception handler and a filtering select loop if you want to actually handle those.</p>\n"}, {"comments": [{"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 0, "creation_date": 1573481659, "post_id": 58748645, "comment_id": 103885972, "body": "Hi , your <code>flatMapMerge</code> with <code>.onCompletion { emit(null) }</code> seems not working . Because it seems it is the first returned value...  BTW , I found <code>ktor</code> natively supports coroutine. sample code here , FYI : <a href=\"https://github.com/smallufo/kotlinPlay/blob/master/hedging/src/test/java/hedging/HedgeTest.kt\" rel=\"nofollow noreferrer\">github.com/smallufo/kotlinPlay/blob/master/hedging/src/test/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 0, "creation_date": 1573482396, "post_id": 58748645, "comment_id": 103886358, "body": "That could be a bug in the implementation, the documentation of <code>onCompletion</code> recommends just such usage to append items to the end of the upstream flow."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 0, "creation_date": 1573486618, "post_id": 58748645, "comment_id": 103888557, "body": "Well , if <code>.onCompletion { emit(null) }</code> works as documented  , that would be the best solution IMO. (waiting Jetbrains to fix the bug)."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 1, "creation_date": 1573635377, "post_id": 58748645, "comment_id": 103942020, "body": "They already <a href=\"https://github.com/Kotlin/kotlinx.coroutines/commit/abced7920cdab2405dd7ab7c29b348c03bcd84e3#diff-8050a7c3e6c7ee7821d8ef696ff907efR217\" rel=\"nofollow noreferrer\">wrote a fix</a>, we can expect it in the next patch release."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 1, "creation_date": 1575465665, "post_id": 58748645, "comment_id": 104575302, "body": "Good news, the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/pull/1658\" rel=\"nofollow noreferrer\">fixing PR</a> is now merged."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1573368320, "last_edit_date": 1573368320, "creation_date": 1573129117, "answer_id": 58748645, "question_id": 58736419, "link": "https://stackoverflow.com/questions/58736419/kotlin-to-achieve-multithread-request-hedging/58748645#58748645", "title": "Kotlin to achieve multithread request hedging?", "body": "<p>If the actual work you want to do in parallel consists of network fetches, you should choose an async networking library so you can properly use non-blocking coroutines with it. For example, as of version 11 the JDK provides an async HTTP client which you can use as follows:</p>\n\n<pre><code>val httpClient: HttpClient = HttpClient.newHttpClient()\n\nsuspend fun httpGet(url: String): String = httpClient\n        .sendAsync(\n                HttpRequest.newBuilder().uri(URI.create(url)).build(),\n                BodyHandlers.ofString())\n        .await()\n        .body()\n</code></pre>\n\n<p>Here's a function that accomplishes request hedging given a suspendable implementation like above:</p>\n\n<pre><code>class UrlShortenerService(\n        private val impls: List&lt;UrlShortener&gt;\n) {\n    suspend fun getShortUrl(longUrl: String): String? = impls\n            .asFlow()\n            .flatMapMerge(impls.size) { impl -&gt;\n                flow&lt;String?&gt; {\n                    try {\n                        impl.getShortUrl(longUrl)?.also { emit(it) }\n                    }\n                    catch (e: Exception) { \n                        // maybe log it, but don't let it propagate\n                    }\n                }\n            }\n            .onCompletion { emit(null) }\n            .first()\n}\n</code></pre>\n\n<p>Note the absence of any custom dispatchers, you don't need them for suspendable work. Any dispatcher will do, and all the work can run in a single thread.</p>\n\n<p>The <code>onCompletion</code> parts steps into action when your all URL shorteners fail. In that case the <code>flatMapMerge</code> stage doesn't emit anything and <code>first()</code> would deadlock without the extra <code>null</code> injected into the flow.</p>\n\n<p>To test it I used the following code:</p>\n\n<pre><code>class Shortener(\n        private val delay: Long\n) : UrlShortener {\n    override suspend fun getShortUrl(longUrl: String): String? {\n        delay(delay * 1000)\n        println(\"Shortener $delay completing\")\n        if (delay == 1L) {\n            throw Exception(\"failed service\")\n        }\n        if (delay == 2L) {\n            return null\n        }\n        return \"shortened after $delay seconds\"\n    }\n}\n\nsuspend fun main() {\n    val shorteners = listOf(\n            Shortener(4),\n            Shortener(3),\n            Shortener(2),\n            Shortener(1)\n    )\n    measureTimeMillis {\n        UrlShortenerService(shorteners).getShortUrl(\"bla\").also {\n            println(it)\n        }\n    }.also {\n        println(\"Took $it ms\")\n    }\n}\n</code></pre>\n\n<p>This exercises the various failure cases like returning null or failing with an exception. For this code I get the following output:</p>\n\n<pre><code>Shortener 1 completing\nShortener 2 completing\nShortener 3 completing\nshortened after 3 seconds\nTook 3080 ms\n</code></pre>\n\n<p>We can see that the shorteners 1 and 2 completed but with a failure, shortener 3 returned a valid response, and shortener 4 was cancelled before completing. I think this matches the requirements.</p>\n\n<hr>\n\n<p>If you can't move away from blocking requests, your implementation will have to start <code>num_impls * num_concurrent_requests</code> threads, which is not great. However, if that's the best you can have, here's an implementation that hedges blocking requests but awaits on them suspendably and cancellably. It will send an interrupt signal to the worker threads running the requests, but if your library's IO code is non-interruptible, these threads will hang waiting for their requests to complete or time out.</p>\n\n<pre><code>val es = Executors.newCachedThreadPool()\n\ninterface UrlShortener {\n    fun getShortUrl(longUrl: String): String? // not suspendable!\n}\n\nclass UrlShortenerService(\n        private val impls: List&lt;UrlShortener&gt;\n) {\n    suspend fun getShortUrl(longUrl: String): String {\n        val chan = Channel&lt;String?&gt;()\n        val futures = impls.map { impl -&gt; es.submit {\n            try {\n                impl.getShortUrl(longUrl)\n            } catch (e: Exception) {\n                null\n            }.also { runBlocking { chan.send(it) } }\n        } }\n        try {\n            (1..impls.size).forEach { _ -&gt;\n                chan.receive()?.also { return it }\n            }\n            throw Exception(\"All services failed\")\n        } finally {\n            chan.close()\n            futures.forEach { it.cancel(true) }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 58748645, "answer_count": 2, "score": 2, "last_activity_date": 1573368320, "creation_date": 1573064810, "question_id": 58736419, "link": "https://stackoverflow.com/questions/58736419/kotlin-to-achieve-multithread-request-hedging", "title": "Kotlin to achieve multithread request hedging?", "body": "<p>Spring's reactor has an interesting feature : <strong>Hedging</strong> . It means spawning many requests and get the first returned result , and automatically clean other contexts. <a href=\"https://twitter.com/starbuxman\" rel=\"nofollow noreferrer\">Josh Long</a> recently has been actively promoting this feature. Googling <a href=\"https://www.google.com.tw/search?sxsrf=ACYBGNTRWX4HADGcXYfexzdspac-Gltgiw:1573061757300&amp;source=hp&amp;ei=fQTDXZyPD6iUmAWH-K3ICw&amp;q=spring+reactor+hedging&amp;oq=spring+reactor+hedging&amp;gs_l=psy-ab.3..35i39.647.647..851...0.0..0.110.110.0j1......0....2j1..gws-wiz.LRXcjjWroT8&amp;ved=0ahUKEwjcwYDaj9blAhUoCqYKHQd8C7kQ4dUDCAY&amp;uact=5\" rel=\"nofollow noreferrer\">Spring reactor hedging</a> shows relative results. If anybody is curious , <a href=\"https://github.com/spring-tips/hedging/blob/master/client/src/main/java/com/example/client/ClientApplication.java#L77\" rel=\"nofollow noreferrer\">here</a> is the sample code . In short , <code>Flux.first()</code> simplifies all the underlaying hassles , which is very impressive.</p>\n\n<p>I wonder how this can be achieved with Kotlin's coroutine and multithread , (and maybe with <code>Flow</code> or <code>Channel</code> ) . I thought of a simple scenario : One service accepts longUrl and spawns the longUrl to many URL shorten service ( such as IsGd , TinyUrl ...) , and returns the first returned URL ... (and terminates / cleans other thread / coroutine resources)</p>\n\n<p>There is an interface <code>UrlShorter</code> that defines this work :</p>\n\n<pre><code>interface UrlShorter {\n  fun getShortUrl(longUrl: String): String?\n}\n</code></pre>\n\n<p>And there are three implementations , one for <a href=\"https://is.gd\" rel=\"nofollow noreferrer\">is.gd</a> ,  another for <a href=\"https://tinyurl.com\" rel=\"nofollow noreferrer\">tinyUrl</a> , and the third is a Dumb implementation that blocks 10 seconds and return null :</p>\n\n<pre><code>class IsgdImpl : UrlShorter {\n  override fun getShortUrl(longUrl: String): String? {\n    logger.info(\"running : {}\", Thread.currentThread().name)\n    // isGd api url blocked by SO , it sucks . see the underlaying gist for full code\n    val url = \"https://is.gd/_create.php?format=simple&amp;url=%s\".format(URLEncoder.encode(longUrl, \"UTF-8\"))\n    return Request.Get(url).execute().returnContent().asString().also {\n      logger.info(\"returning {}\", it)\n    }\n  }\n}\n\nclass TinyImpl : UrlShorter {\n  override fun getShortUrl(longUrl: String): String? {\n    logger.info(\"running : {}\", Thread.currentThread().name)\n    val url = \"http://tinyurl.com/_api-create.php?url=$longUrl\" // sorry the URL is blocked by stackoverflow , see the underlaying gist for full code\n    return Request.Get(url).execute().returnContent().asString().also {\n      logger.info(\"returning {}\", it)\n    }\n  }\n}\n\nclass DumbImpl : UrlShorter {\n  override fun getShortUrl(longUrl: String): String? {\n    logger.info(\"running : {}\", Thread.currentThread().name)\n    TimeUnit.SECONDS.sleep(10)\n    return null\n  }\n}\n</code></pre>\n\n<p>And there is a <code>UrlShorterService</code> that takes all the <code>UrlShorter</code> implementations , and try to spawn coroutines and get the first result . </p>\n\n<p>Here is what I've thought of :</p>\n\n<pre><code>@ExperimentalCoroutinesApi\n@FlowPreview\nclass UrlShorterService(private val impls: List&lt;UrlShorter&gt;) {\n\n\n  private val es: ExecutorService = Executors.newFixedThreadPool(impls.size)\n  private val esDispatcher = es.asCoroutineDispatcher()\n\n  suspend fun getShortUrl(longUrl: String): String {\n    return method1(longUrl) // there are other methods , with different ways...\n  }\n\n  private inline fun &lt;T, R : Any&gt; Iterable&lt;T&gt;.firstNotNullResult(transform: (T) -&gt; R?): R? {\n    for (element in this) {\n      val result = transform(element)\n      if (result != null) return result\n    }\n    return null\n  }\n\n</code></pre>\n\n<p>The client side is simple too :</p>\n\n<pre><code>@ExperimentalCoroutinesApi\n@FlowPreview\nclass UrlShorterServiceTest {\n\n  @Test\n  fun testHedging() {\n    val impls = listOf(DumbImpl(), IsgdImpl(), TinyImpl()) // Dumb first\n    val service = UrlShorterService(impls)\n    runBlocking {\n      service.getShortUrl(\"https://www.google.com\").also {\n        logger.info(\"result = {}\", it)\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Notice I put the <code>DumbImpl</code> first , because I hope it may spawn first and blocking in its thread. And other two implementations can get result.</p>\n\n<p>OK , here is the problem , how to achieve hedging in kotlin ? I try the following methods :</p>\n\n<pre><code>  private suspend fun method1(longUrl: String): String {\n    return impls.asSequence().asFlow().flatMapMerge(impls.size) { impl -&gt;\n      flow {\n        impl.getShortUrl(longUrl)?.also {\n          emit(it)\n        }\n      }.flowOn(esDispatcher)\n    }.first()\n      .also { esDispatcher.cancelChildren() } // doesn't impact the result\n  }\n</code></pre>\n\n<p>I hope <code>method1</code> should work , but it totally executes 10 seconds :</p>\n\n<pre><code>00:56:09,253 INFO  TinyImpl - running : pool-1-thread-3\n00:56:09,254 INFO  DumbImpl - running : pool-1-thread-1\n00:56:09,253 INFO  IsgdImpl - running : pool-1-thread-2\n00:56:11,150 INFO  TinyImpl - returning // tiny url blocked by SO , it sucks\n00:56:13,604 INFO  IsgdImpl - returning // idGd url blocked by SO , it sucks\n00:56:19,261 INFO  UrlShorterServiceTest$testHedging$1 - result = // tiny url blocked by SO , it sucks\n</code></pre>\n\n<p>Then , I thought other method2 , method3 , method4 , method5 ... but all not work :</p>\n\n<pre><code>  /**\n   * 00:54:29,035 INFO  IsgdImpl - running : pool-1-thread-3\n   * 00:54:29,036 INFO  DumbImpl - running : pool-1-thread-2\n   * 00:54:29,035 INFO  TinyImpl - running : pool-1-thread-1\n   * 00:54:30,228 INFO  TinyImpl - returning // tiny url blocked by SO , it sucks\n   * 00:54:30,797 INFO  IsgdImpl - returning // idGd url blocked by SO , it sucks\n   * 00:54:39,046 INFO  UrlShorterServiceTest$testHedging$1 - result = // idGd url blocked by SO , it sucks\n   */\n  private suspend fun method2(longUrl: String): String {\n    return withContext(esDispatcher) {\n      impls.map { impl -&gt;\n        async(esDispatcher) {\n          impl.getShortUrl(longUrl)\n        }\n      }.firstNotNullResult { it.await() } ?: longUrl\n    }\n  }\n</code></pre>\n\n<pre><code>  /**\n   * 00:52:30,681 INFO  IsgdImpl - running : pool-1-thread-2\n   * 00:52:30,682 INFO  DumbImpl - running : pool-1-thread-1\n   * 00:52:30,681 INFO  TinyImpl - running : pool-1-thread-3\n   * 00:52:31,838 INFO  TinyImpl - returning // tiny url blocked by SO , it sucks\n   * 00:52:33,721 INFO  IsgdImpl - returning // idGd url blocked by SO , it sucks\n   * 00:52:40,691 INFO  UrlShorterServiceTest$testHedging$1 - result = // idGd url blocked by SO , it sucks\n   */\n  private suspend fun method3(longUrl: String): String {\n    return coroutineScope {\n      impls.map { impl -&gt;\n        async(esDispatcher) {\n          impl.getShortUrl(longUrl)\n        }\n      }.firstNotNullResult { it.await() } ?: longUrl\n    }\n  }\n</code></pre>\n\n<pre><code>  /**\n   * 01:58:56,930 INFO  TinyImpl - running : pool-1-thread-1\n   * 01:58:56,933 INFO  DumbImpl - running : pool-1-thread-2\n   * 01:58:56,930 INFO  IsgdImpl - running : pool-1-thread-3\n   * 01:58:58,411 INFO  TinyImpl - returning // tiny url blocked by SO , it sucks\n   * 01:58:59,026 INFO  IsgdImpl - returning // idGd url blocked by SO , it sucks\n   * 01:59:06,942 INFO  UrlShorterServiceTest$testHedging$1 - result =  // idGd url blocked by SO , it sucks\n   */\n  private suspend fun method4(longUrl: String): String {\n    return withContext(esDispatcher) {\n      impls.map { impl -&gt;\n        async {\n          impl.getShortUrl(longUrl)\n        }\n      }.firstNotNullResult { it.await() } ?: longUrl\n    }\n  }\n</code></pre>\n\n<p>I am not familiar with <code>Channel</code> , sorry for the exception \u2193 </p>\n\n<pre><code>  /**\n   * 01:29:44,460 INFO  UrlShorterService$method5$2 - channel closed\n   * 01:29:44,461 INFO  DumbImpl - running : pool-1-thread-2\n   * 01:29:44,460 INFO  IsgdImpl - running : pool-1-thread-3\n   * 01:29:44,466 INFO  TinyImpl - running : pool-1-thread-1\n   * 01:29:45,765 INFO  TinyImpl - returning // tiny url blocked by SO , it sucks\n   * 01:29:46,339 INFO  IsgdImpl - returning // idGd url blocked by SO , it sucks\n   *\n   * kotlinx.coroutines.channels.ClosedSendChannelException: Channel was closed\n   *\n   */\n  private suspend fun method5(longUrl: String): String {\n    val channel = Channel&lt;String&gt;()\n\n    withContext(esDispatcher) {\n      impls.forEach { impl -&gt;\n        launch {\n          impl.getShortUrl(longUrl)?.also {\n            channel.send(it)\n          }\n        }\n      }\n      channel.close()\n      logger.info(\"channel closed\")\n    }\n\n    return channel.consumeAsFlow().first()\n  }\n</code></pre>\n\n<p>OK , I don't know if there are any other ways ... but all above are not working... All blocks at least 10 seconds ( blocked by <code>DumbImpl</code>) .</p>\n\n<p>The whole source code can be found on <a href=\"https://gist.github.com/smallufo/8bcaa1082f0b4b88e045237f494e975e\" rel=\"nofollow noreferrer\">github gist</a> . </p>\n\n<p>How can hedging be achieved in kotlin ? By <code>Deferred</code> or <code>Flow</code> or <code>Channel</code> or any other better ideas ? Thank you.</p>\n\n<p>After submitting the question , I found all tinyurl , isGd url are blocked by SO . It really sucks !</p>\n"}, {"tags": ["android", "kotlin", "chromecast", "google-cast"], "comments": [{"owner": {"reputation": 549, "user_id": 11318899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73d5de9e8d9dc2294428273b9095f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Anjaneesh Rayapati", "link": "https://stackoverflow.com/users/11318899/anjaneesh-rayapati"}, "edited": false, "score": 1, "creation_date": 1573504739, "post_id": 58735965, "comment_id": 103896079, "body": "We don&#39;t allow to create new Remote Display receiver app and support casting Android/IOS native view to Chromecast anymore, so those classes should be deprecated. I will follow up with android SDK team about the deprecation."}, {"owner": {"reputation": 1582, "user_id": 1367154, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e38a0aa352049cc18f76066e042750b5?s=128&d=identicon&r=PG", "display_name": "Nishanth", "link": "https://stackoverflow.com/users/1367154/nishanth"}, "reply_to_user": {"reputation": 549, "user_id": 11318899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73d5de9e8d9dc2294428273b9095f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Anjaneesh Rayapati", "link": "https://stackoverflow.com/users/11318899/anjaneesh-rayapati"}, "edited": false, "score": 1, "creation_date": 1575153983, "post_id": 58735965, "comment_id": 104471425, "body": "Hey @AnjaneeshRayapati , do we know why are these deprecated? There are some valid use-cases where I want to play multiple video, audio, and subtitles in parallel on the screen based on user input. It would be perfect if my Android app can control all this and just have Chromecast as a remote display. If remote display features are deprecated, is there a google recommended way to achieve this?"}, {"owner": {"reputation": 1006, "user_id": 2352046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f27692dcadb25a2b8a0ce8df4267f64?s=128&d=identicon&r=PG", "display_name": "Kent Mewhort", "link": "https://stackoverflow.com/users/2352046/kent-mewhort"}, "edited": false, "score": 0, "creation_date": 1589898912, "post_id": 58735965, "comment_id": 109472302, "body": "@cepiolot, did you make any headway with this?  Is it possible to use the Remote Display API connected to a Custom Receiver?"}, {"owner": {"reputation": 71, "user_id": 4310168, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/115d8672e572d88c138b81bd9d2ee4b7?s=128&d=identicon&r=PG&f=1", "display_name": "cepiolot", "link": "https://stackoverflow.com/users/4310168/cepiolot"}, "reply_to_user": {"reputation": 1006, "user_id": 2352046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f27692dcadb25a2b8a0ce8df4267f64?s=128&d=identicon&r=PG", "display_name": "Kent Mewhort", "link": "https://stackoverflow.com/users/2352046/kent-mewhort"}, "edited": false, "score": 0, "creation_date": 1589935568, "post_id": 58735965, "comment_id": 109489080, "body": "@KentMewhort after combing through Google bug reports, things seemed to indicate it was impossible, and that there were classes not marked deprecated that were in fact deprecated. Upon Anjaneesh&#39;s comment, it was confirmed. Take that comment as the answer; if he puts it as an answer I would mark it as accepted."}], "owner": {"reputation": 71, "user_id": 4310168, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/115d8672e572d88c138b81bd9d2ee4b7?s=128&d=identicon&r=PG&f=1", "display_name": "cepiolot", "link": "https://stackoverflow.com/users/4310168/cepiolot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1573063992, "creation_date": 1573062871, "last_edit_date": 1573063992, "question_id": 58735965, "link": "https://stackoverflow.com/questions/58735965/is-castremotedisplaylocalservice-usable-in-a-custom-receiver", "title": "Is CastRemoteDisplayLocalService usable in a Custom Receiver?", "body": "<p>I'm trying to create an app that can broadcast Android views on the Chromecast, and I thought I found something promising in <a href=\"https://developers.google.com/android/reference/com/google/android/gms/cast/CastRemoteDisplayLocalService.html\" rel=\"nofollow noreferrer\">CastRemoteDisplayLocalService</a>. I created a simple test app but found the callback <a href=\"https://developers.google.com/android/reference/com/google/android/gms/cast/CastRemoteDisplayLocalService.html#onCreatePresentation(android.view.Display)\" rel=\"nofollow noreferrer\">onCreatePresentation</a> was never called when I casted my device. After some searching I discovered it was because my application was not published as a Remote Display Application but a Custom Application Receiver from the Google Cast Developer Console.</p>\n\n<p>Unfortunately when I try to create a new application from the console, Remote Display Application is not an option. After some searching, I came across <a href=\"https://stackoverflow.com/questions/54052135/styled-receiver-and-remote-display-from-the-same-sender-app-chromecast-android\">this Stack Overflow question</a> that said Remote Display API is now deprecated. There is an interface called <a href=\"https://developers.google.com/android/reference/com/google/android/gms/cast/CastRemoteDisplayApi\" rel=\"nofollow noreferrer\">CastRemoteDisplayApi</a> which is marked as deprecated, but the classes I have been trying to use are not marked as such.</p>\n\n<p>This leads me to wondering if CastRemoteDisplayLocalService and all other Remote Display classes not marked as deprecated are in fact deprecated and unusable, or if perhaps the functionality was shifted to work in a Custom Receiver by configuring it to accept remote displays.</p>\n\n<p>This is what the relevant code looks like right now:</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>private fun startCastService() {\n    val intent = Intent(this, MainActivity::class.java)\n    val pendingIntent = PendingIntent.getActivity(this, 0, intent, 0)\n    val notificationSettings = CastRemoteDisplayLocalService.NotificationSettings.Builder().setNotificationPendingIntent(pendingIntent).build()\n\n    CastRemoteDisplayLocalService.startService(this, CastRemoteDisplayLocalServiceImpl::class.java, \"2839EC8D\", castDevice, notificationSettings, object : CastRemoteDisplayLocalService.Callbacks {\n        override fun onRemoteDisplaySessionEnded(p0: CastRemoteDisplayLocalService?) {\n            Log.d(TAG, \"onRemoteDisplaySessionEnded\")\n        }\n\n        override fun onRemoteDisplaySessionError(p0: Status?) {\n            Log.d(TAG, \"onRemoteDisplaySessionError\")\n        }\n\n        override fun onRemoteDisplaySessionStarted(p0: CastRemoteDisplayLocalService?) {\n            Log.d(TAG, \"onRemoteDisplaySessionStarted\")\n        }\n\n        override fun onServiceCreated(p0: CastRemoteDisplayLocalService?) {\n            Log.d(TAG, \"onServiceCreated\")\n        }\n    })\n}\n</code></pre>\n\n<p>CastRemoteDisplayLocalServiceImpl.kt</p>\n\n<pre><code>class CastRemoteDisplayLocalServiceImpl : CastRemoteDisplayLocalService() {\n\n    val TAG = \"CastRemoteDisplayLoc...\"\n\n    // This function gets called\n    override fun onCreate() {\n        super.onCreate()\n        Log.d(TAG, \"onCreate\")\n    }\n\n    // This function does not get called\n    override fun onCreatePresentation(p0: Display?) {\n        Log.d(TAG, \"onCreatePresentation\")\n    }\n\n    override fun onDismissPresentation() {\n        Log.d(TAG, \"onDismissPresentation\")\n    }\n}\n</code></pre>\n\n<p>If there's a way with the Custom Application Receiver to get the onCreatePresentation callback that would solve this, I'm having difficulty finding it. If CastRemoteDisplayLocalService is in fact deprecated, is there another way to easily cast Android views to a Chromecast? Thanks!</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-activity"], "comments": [{"owner": {"reputation": 2751, "user_id": 691626, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8d2a2d3c0af7616f6dc8878ff060ac39?s=128&d=identicon&r=PG", "display_name": "Dino Tw", "link": "https://stackoverflow.com/users/691626/dino-tw"}, "edited": false, "score": 0, "creation_date": 1573061799, "post_id": 58735645, "comment_id": 103761567, "body": "you want to make the fragment touchable while activity is not touchable?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573061829, "post_id": 58735645, "comment_id": 103761581, "body": "Add your layout xml"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1573063816, "post_id": 58735645, "comment_id": 103762468, "body": "@Nexicoll, I need the FrameLayout with id <code>main_first_config </code>. Where it is?"}, {"owner": {"reputation": 295, "user_id": 7363739, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5025dca1b137ec6327dcf8e0ebcdf31d?s=128&d=identicon&r=PG&f=1", "display_name": "\u0420\u0421\u0418\u0422 _", "link": "https://stackoverflow.com/users/7363739/%d0%a0%d0%a1%d0%98%d0%a2"}, "edited": false, "score": 0, "creation_date": 1573064391, "post_id": 58735645, "comment_id": 103762734, "body": "@Nexicoll look at my way with Activity like dialog. It&#39;s easy and stable,"}, {"owner": {"reputation": 295, "user_id": 7363739, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5025dca1b137ec6327dcf8e0ebcdf31d?s=128&d=identicon&r=PG&f=1", "display_name": "\u0420\u0421\u0418\u0422 _", "link": "https://stackoverflow.com/users/7363739/%d0%a0%d0%a1%d0%98%d0%a2"}, "edited": false, "score": 0, "creation_date": 1573064769, "post_id": 58735645, "comment_id": 103762933, "body": "@Nexicoll , good. It&#39;s easy way. Make my answer accepted - mark it, if not difficult. Happy to help! :)"}], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 7363739, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5025dca1b137ec6327dcf8e0ebcdf31d?s=128&d=identicon&r=PG&f=1", "display_name": "\u0420\u0421\u0418\u0422 _", "link": "https://stackoverflow.com/users/7363739/%d0%a0%d0%a1%d0%98%d0%a2"}, "edited": false, "score": 0, "creation_date": 1573064557, "post_id": 58736220, "comment_id": 103762825, "body": "Update answer: make activity like BioActivity"}], "tags": [], "owner": {"reputation": 295, "user_id": 7363739, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5025dca1b137ec6327dcf8e0ebcdf31d?s=128&d=identicon&r=PG&f=1", "display_name": "\u0420\u0421\u0418\u0422 _", "link": "https://stackoverflow.com/users/7363739/%d0%a0%d0%a1%d0%98%d0%a2"}, "is_accepted": true, "score": 1, "last_activity_date": 1573064900, "last_edit_date": 1573064900, "creation_date": 1573064001, "answer_id": 58736220, "question_id": 58735645, "link": "https://stackoverflow.com/questions/58735645/disable-activity-without-fragment/58736220#58736220", "title": "Disable activity without fragment", "body": "<p>Just use Activity as dialog.</p>\n\n<p>Step-by-step:</p>\n\n<ol>\n<li><p>Create Activity with bio-detect and in manifest:</p>\n\n<pre><code>&lt;activity android:name=\".BioActivity\" android:theme=\"@android:style/Theme.Dialog\"/&gt;\n</code></pre></li>\n<li><p>In created activity xml (BioActivity.xml), add tag <code>android:excludeFromRecents=\"true\"</code> to root (LinearLayout or another):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".BioActivity\"\n    android:excludeFromRecents=\"true\"\n    &gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre></li>\n<li><p>In java class file of your dialog activity put this code to <code>onCreate()</code> method after <code>setContentView();</code></p>\n\n<pre><code>public class BioActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.bio_activity);\n\n        this.setFinishOnTouchOutside(false);\n    }\n}\n</code></pre></li>\n<li><p>start created dialog activity, using intent and startActivity() from main activity;</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1573064216, "creation_date": 1573064216, "answer_id": 58736274, "question_id": 58735645, "link": "https://stackoverflow.com/questions/58735645/disable-activity-without-fragment/58736274#58736274", "title": "Disable activity without fragment", "body": "<p>Try making your <code>FrameLayout</code> clickable using <code>android:clickable=\"true\"</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:clickable=\"true\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/rounded_corners_small_biometric\"\n        android:layout_gravity=\"bottom\"\n        android:paddingTop=\"15dp\"\n        android:orientation=\"vertical\"&gt;\n        &lt;ImageView\n            android:layout_width=\"60dp\"\n            android:layout_height=\"60dp\"\n            android:src=\"@drawable/ic_fingerprint_black_\"\n            android:layout_gravity=\"center\"\n            android:id=\"@+id/finger_print_icon\"\n            android:background=\"#ffffff\"/&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textAlignment=\"center\"\n            android:layout_marginTop=\"15dp\"\n            android:textSize=\"15dp\"\n            android:text=\"Zidentyfikuj si\u0119\"/&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/cancel_auth\"\n            android:text=\"Anuluj\"\n            android:textAlignment=\"center\"\n            android:textColor=\"#0055A5\"\n            android:textStyle=\"bold\"\n            android:textSize=\"22dp\"\n            android:layout_marginTop=\"20dp\"\n            android:layout_marginBottom=\"20dp\"/&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2751, "user_id": 691626, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8d2a2d3c0af7616f6dc8878ff060ac39?s=128&d=identicon&r=PG", "display_name": "Dino Tw", "link": "https://stackoverflow.com/users/691626/dino-tw"}, "is_accepted": false, "score": 0, "last_activity_date": 1573064528, "creation_date": 1573064528, "answer_id": 58736347, "question_id": 58735645, "link": "https://stackoverflow.com/questions/58735645/disable-activity-without-fragment/58736347#58736347", "title": "Disable activity without fragment", "body": "<p><code>Yes. I want too make the fragment touchable while activity is not touchable</code></p>\n\n<p>For this purpose, you can consume the touch event in in fragment by returning <code>true</code> in <code>onTouch</code>. For example</p>\n\n<pre><code>SmallBiometricAuthenticate : View.OnTouchListener {\n    override fun onTouch(v: View, event:  MotionEvent) {\n        return true\n    }\n}\n</code></pre>\n\n<p>And add the <code>OnTouchListener</code> to your fragment root <code>view</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 12333485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4013d95451dad214495f8ac03c117d?s=128&d=identicon&r=PG&f=1", "display_name": "Nexicoll", "link": "https://stackoverflow.com/users/12333485/nexicoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58736220, "answer_count": 3, "score": 1, "last_activity_date": 1573064900, "creation_date": 1573061545, "last_edit_date": 1573064637, "question_id": 58735645, "link": "https://stackoverflow.com/questions/58735645/disable-activity-without-fragment", "title": "Disable activity without fragment", "body": "<p>That's my first question so forgive me if I do this wrong.</p>\n\n<p>The question is:\nI've got activity \"FirstConfig.kt\". When user click on specific button I'm showing fragment with biometric authenticate. Fragment is \"on top\", so parrent activity is \"behind\" him and is doing as background. How I can disable user interraction with activity but without fragment to allow click on \"cancel\" in biometric prompt</p>\n\n<p><em>function from FirstConfig.kt</em></p>\n\n<pre><code>private fun ShowBiometricPrompt() {\n    supportFragmentManager.beginTransaction()\n        .setCustomAnimations(R.anim.slide_up, R.anim.slide_down)\n        .add(\n            R.id.main_first_config,\n            SmallBiometricAuthenticate::class.java.newInstance()\n        ).commit()\n}\n</code></pre>\n\n<p>I try this\n<code>\nwindow.setFlags(\n    WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\n    WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE)</code></p>\n\n<p>But that block whole activity with fragment and user can't click on \"cancel\".\nCan someone help me please?</p>\n\n<p>@EDIT</p>\n\n<p>Yes. I want too make the fragment touchable while activity is not touchable</p>\n\n<p>ActivityLayout (parrent of this layout is ConstraintLayout, but stackoverflow cutting me this part of code out)</p>\n\n<pre><code>&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center\"\n    android:id=\"@+id/first_config_layout\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:paddingLeft=\"10dp\"\n        android:paddingRight=\"10dp\"\n        android:text=\"Przeprowadzimy teraz kr\u00f3tk\u0105 konfiguracj\u0119, aby dostowa\u0107 aplikacj\u0119 do Twoich oczekiwa\u0144\"\n        android:textAlignment=\"center\" /&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:layout_marginBottom=\"5dp\"\n        android:text=\"Powiadomienia\"\n        android:textAlignment=\"center\"\n        android:textColor=\"#111111\"\n        android:textSize=\"18dp\"\n        android:textStyle=\"bold\" /&gt;\n\n    &lt;View\n        android:id=\"@+id/bottom_belk\"\n        android:layout_width=\"80dp\"\n        android:layout_height=\"2dp\"\n        android:background=\"#111111\"\n        android:paddingLeft=\"10dp\"\n        android:paddingRight=\"10dp\"&gt;&lt;/View&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"20dp\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;LinearLayout\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"\n            android:paddingStart=\"20dp\"\n            android:paddingLeft=\"10dp\"\n            android:paddingRight=\"10dp\"&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"40dp\"\n                android:gravity=\"center\"\n                android:text=\"Zmiany w grafiku\" /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"40dp\"\n                android:gravity=\"center\"\n                android:text=\"Nowa ocena\" /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"40dp\"\n                android:gravity=\"center\"\n                android:text=\"Zbli\u017caj\u0105ca si\u0119 p\u0142atno\u015b\u0107\" /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"40dp\"\n                android:gravity=\"center\"\n                android:text=\"Nowa wiadomo\u015b\u0107\" /&gt;\n\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginLeft=\"10dp\"\n            android:orientation=\"vertical\"&gt;\n\n            &lt;Switch\n                android:id=\"@+id/graphic_nottification\"\n                android:layout_width=\"50dp\"\n                android:layout_height=\"40dp\"\n                android:onClick=\"RegisterChangeOfPushSwitch\" /&gt;\n\n            &lt;Switch\n                android:id=\"@+id/mark_nottification\"\n                android:layout_width=\"50dp\"\n                android:layout_height=\"40dp\"\n                android:onClick=\"RegisterChangeOfPushSwitch\" /&gt;\n\n            &lt;Switch\n                android:id=\"@+id/payment_nottification\"\n                android:layout_width=\"50dp\"\n                android:layout_height=\"40dp\"\n                android:onClick=\"RegisterChangeOfPushSwitch\" /&gt;\n\n            &lt;Switch\n                android:id=\"@+id/message_nottification\"\n                android:layout_width=\"50dp\"\n                android:layout_height=\"40dp\"\n                android:onClick=\"RegisterChangeOfPushSwitch\" /&gt;\n        &lt;/LinearLayout&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:layout_marginBottom=\"5dp\"\n        android:text=\"Zabezpieczenie\"\n        android:textAlignment=\"center\"\n        android:textColor=\"#111111\"\n        android:textSize=\"18dp\"\n        android:textStyle=\"bold\" /&gt;\n\n    &lt;View\n        android:layout_width=\"80dp\"\n        android:layout_height=\"2dp\"\n        android:background=\"#111111\"\n        android:paddingLeft=\"10dp\"\n        android:paddingRight=\"10dp\"&gt;&lt;/View&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"30dp\"\n        android:orientation=\"horizontal\"\n        android:paddingLeft=\"30dp\"\n        android:paddingRight=\"30dp\"\n        android:weightSum=\"5\"&gt;\n\n\n        &lt;ImageView\n            android:id=\"@+id/security_biometric\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"70dp\"\n            android:layout_weight=\"1\"\n            android:background=\"@drawable/black_border\"\n            android:padding=\"10dp\"\n            android:src=\"@drawable/ic_fingerprint_black_\"/&gt;\n        &lt;ImageView\n            android:layout_width=\"50dp\"\n            android:layout_height=\"50dp\"\n            android:layout_weight=\"1\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/security_disable\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"70dp\"\n            android:layout_weight=\"1\"\n            android:background=\"@drawable/black_border\"\n            android:padding=\"10dp\"\n            android:src=\"@drawable/ic_no_screen_security\"/&gt;\n\n        &lt;ImageView\n            android:layout_width=\"50dp\"\n            android:layout_height=\"50dp\"\n            android:layout_weight=\"1\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/security_pin\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"70dp\"\n            android:layout_weight=\"1\"\n            android:background=\"@drawable/black_border\"\n            android:padding=\"10dp\"\n            android:src=\"@drawable/ic_fiber_pin_black\" /&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And he's the fragment XML (same situation as higher. Parrent of this is FrameLayout)</p>\n\n<pre><code>&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@drawable/rounded_corners_small_biometric\"\n    android:layout_gravity=\"bottom\"\n    android:paddingTop=\"15dp\"\n\n    android:orientation=\"vertical\"&gt;\n&lt;ImageView\n    android:layout_width=\"60dp\"\n    android:layout_height=\"60dp\"\n    android:src=\"@drawable/ic_fingerprint_black_\"\n    android:layout_gravity=\"center\"\n    android:id=\"@+id/finger_print_icon\"\n    android:background=\"#ffffff\"/&gt;\n\n&lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:textAlignment=\"center\"\n    android:layout_marginTop=\"15dp\"\n    android:textSize=\"15dp\"\n    android:text=\"Zidentyfikuj si\u0119\"/&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/cancel_auth\"\n        android:text=\"Anuluj\"\n        android:textAlignment=\"center\"\n        android:textColor=\"#0055A5\"\n        android:textStyle=\"bold\"\n        android:textSize=\"22dp\"\n        android:layout_marginTop=\"20dp\"\n        android:layout_marginBottom=\"20dp\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>That's how it look. When I set flag NOT_TOUCHABLE user can't cancel authroization ( click on \"Anuluj\")\n<a href=\"https://i.stack.imgur.com/vFhWv.png\" rel=\"nofollow noreferrer\">screen_with_autohrization</a></p>\n\n<p>@EDIT2</p>\n\n<p>Thanks you @\u0420\u0421\u0418\u0422 _</p>\n\n<p>I made biometric prompt as activity dialog. And to get callbak from FingerPrintAPI, I created interface 'FingerPrintCallback'. Implemented him into FirstConfigActivity, and returned in BiometricDialog with parrent activity context.</p>\n\n<p>Tahnk you very much guys for help :) </p>\n"}, {"tags": ["kotlin", "android-architecture-components", "android-paging"], "answers": [{"comments": [{"owner": {"reputation": 4991, "user_id": 1498586, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wcmTY.jpg?s=128&g=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/1498586/mahdi"}, "edited": false, "score": 0, "creation_date": 1585895674, "post_id": 58769289, "comment_id": 107929895, "body": "When i have one item also loadAfter call and repeats, Why?"}], "tags": [], "owner": {"reputation": 184, "user_id": 4352013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e54c0d21888a79bc81c335af2d917a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Craik", "link": "https://stackoverflow.com/users/4352013/chris-craik"}, "is_accepted": true, "score": 1, "last_activity_date": 1573226281, "creation_date": 1573226281, "answer_id": 58769289, "question_id": 58735434, "link": "https://stackoverflow.com/questions/58735434/pagekeyeddatasource-loadafter-called-continuously/58769289#58769289", "title": "PageKeyedDataSource loadAfter called continuously", "body": "<p>The code looks mostly fine, but it seems strange that you're turning the next token part of the response into a string via toString, and using that as your key.</p>\n\n<p>Instead of <code>PageKeyedDataSource&lt;String, Reservation?&gt;</code>, try <code>PageKeyedDataSource&lt;KeyType, Reservation&gt;</code> (Not sure what the type of that key is from the code above).</p>\n\n<p>Then you can take the next token directly from the API, and pass it into the <code>last</code> parameter of your API without modifying it.</p>\n\n<p>You should also use non-nullable <code>Reservation</code> - the Paging library expects that the items loaded are non-null, since nulls are reserved for representing placeholders: <a href=\"https://developer.android.com/reference/androidx/paging/DataSource#implementing-a-datasource\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/androidx/paging/DataSource#implementing-a-datasource</a></p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 3150602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab3ac12c4c86d0cc08fa6eea237b245?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.xu", "link": "https://stackoverflow.com/users/3150602/nathan-xu"}, "is_accepted": false, "score": 0, "last_activity_date": 1597677029, "creation_date": 1597677029, "answer_id": 63453661, "question_id": 58735434, "link": "https://stackoverflow.com/questions/58735434/pagekeyeddatasource-loadafter-called-continuously/63453661#63453661", "title": "PageKeyedDataSource loadAfter called continuously", "body": "<p>Another propable reason is if you use Recycleview in a internal of ScrollView, the loadAfter will be called infinitely untill the data is done.\nRecycleview will handle the scroll automaticlly, so do not use it in scrollView.</p>\n"}], "owner": {"reputation": 599, "user_id": 4809922, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MzPAPTL5unc/AAAAAAAAAAI/AAAAAAAAI1M/Mb1F9-SlVe8/photo.jpg?sz=128", "display_name": "Eliza Camber", "link": "https://stackoverflow.com/users/4809922/eliza-camber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 1, "accepted_answer_id": 58769289, "answer_count": 2, "score": 8, "last_activity_date": 1597677029, "creation_date": 1573060756, "last_edit_date": 1573126311, "question_id": 58735434, "link": "https://stackoverflow.com/questions/58735434/pagekeyeddatasource-loadafter-called-continuously", "title": "PageKeyedDataSource loadAfter called continuously", "body": "<p>I have a PageKeyedDataSource that continuously calls the loadAfter, and all the items are added in the Recyclerview multiple times. From the API side a null <code>lastEvaluatedKey</code> means give me the first page which kinda makes sense on why it keeps calling to get the first page but A. Shouldn't it stop if there are no more data to get (aka <code>params.key == null</code>? and B. Shouldn't the <code>COMPARATOR</code> in the Adapter disallow the same items being added multiple times? What am I missing?</p>\n\n<p>PageKeyedDataSource.kt</p>\n\n<pre><code>class ReservationsPageKeyedDataSource(private val retryExecutor: Executor) : PageKeyedDataSource&lt;String, Reservation?&gt;() {\n\n    private var retry: (() -&gt; Any)? = null\n\n    val initialLoad = MutableLiveData&lt;PagingNetworkState&gt;()\n\n    fun retryAllFailed() {\n        val prevRetry = retry\n        retry = null\n        prevRetry?.let {\n            retryExecutor.execute {\n                it.invoke()\n            }\n        }\n    }\n\n    override fun loadInitial(\n        params: LoadInitialParams&lt;String&gt;,\n        callback: LoadInitialCallback&lt;String, Reservation?&gt;\n    ) {\n        val request = Api.reservationsService.getReservations(dateType = RERVATIONS_DATE_TYPE.future, last = null)\n\n        initialLoad.postValue(PagingNetworkState.LOADING)\n\n        // triggered by a refresh, execute in sync\n        try {\n            val response = request.execute()\n            val originalData = response.body()?.result?.reservations\n            val data = mutableListOf&lt;Reservation&gt;()\n            // some data munipulation\n            retry = null\n            initialLoad.postValue(PagingNetworkState.LOADED)\n\n            callback.onResult(\n                data.toList(),\n                null,\n                response.body()?.result?.lastEvaluatedKey.toString()\n            )\n        } catch (ioException: IOException) {\n            retry = {\n                loadInitial(params, callback)\n            }\n            val error = PagingNetworkState.error(ioException.message ?: \"unknown error\")\n            initialLoad.postValue(error)\n        }\n    }\n\n    override fun loadBefore(\n        params: LoadParams&lt;String&gt;,\n        callback: LoadCallback&lt;String, Reservation?&gt;\n    ) {\n        // no-op\n    }\n\n    override fun loadAfter(\n        params: LoadParams&lt;String&gt;,\n        callback: LoadCallback&lt;String, Reservation?&gt;\n    ) {\n\n        // I tried adding an if statement here to check if the params.key is null or not but that didn't help\n\n        Api.reservationsService.getReservations(dateType = RERVATIONS_DATE_TYPE.future, last = params.key)\n            .enqueue(object : Callback&lt;ReservationListResponse&gt; {\n                override fun onFailure(call: Call&lt;ReservationListResponse&gt;, t: Throwable) {\n                    retry = { loadAfter(params, callback) }\n                }\n\n                override fun onResponse(\n                    call: Call&lt;ReservationListResponse&gt;,\n                    response: Response&lt;ReservationListResponse&gt;\n                ) {\n                    if (response.isSuccessful) {\n                        val data = response.body()?.result?.reservations\n                        retry = null\n                        callback.onResult(\n                            data.orEmpty(),\n                            response.body()?.result?.lastEvaluatedKey.toString()\n                        )\n                    } else {\n                        retry = { loadAfter(params, callback) }\n                    }\n                }\n            })\n    }\n}\n</code></pre>\n\n<p>The comparator in the PagedListAdapter :</p>\n\n<pre><code>companion object {\n        val COMPARATOR = object : DiffUtil.ItemCallback&lt;Reservation&gt;() {\n            override fun areContentsTheSame(oldItem: Reservation, newItem: Reservation): Boolean =\n                oldItem == newItem\n\n            override fun areItemsTheSame(oldItem: Reservation, newItem: Reservation): Boolean =\n                oldItem.id == newItem.id\n        }\n    }\n</code></pre>\n"}, {"tags": ["java", "kotlin", "apache-camel", "spring-camel"], "comments": [{"owner": {"reputation": 1617, "user_id": 3759505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f238c59fb11459edf83aa27b6adefbe?s=128&d=identicon&r=PG&f=1", "display_name": "hk6279", "link": "https://stackoverflow.com/users/3759505/hk6279"}, "edited": false, "score": 0, "creation_date": 1573095416, "post_id": 58734744, "comment_id": 103772327, "body": "Maybe the <code>bean</code> component does not call the &quot;save&quot; method as your expectation. Try add a log in the &quot;save&quot; method and check it."}, {"owner": {"reputation": 5610, "user_id": 575596, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7ca992eaf8173604c82a9ab37f8273ee?s=128&d=identicon&r=PG&f=1", "display_name": "MeanwhileInHell", "link": "https://stackoverflow.com/users/575596/meanwhileinhell"}, "reply_to_user": {"reputation": 1617, "user_id": 3759505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f238c59fb11459edf83aa27b6adefbe?s=128&d=identicon&r=PG&f=1", "display_name": "hk6279", "link": "https://stackoverflow.com/users/3759505/hk6279"}, "edited": false, "score": 0, "creation_date": 1573121783, "post_id": 58734744, "comment_id": 103781719, "body": "Thanks @hk6279.  Yeah it is getting called.  The issue appears to be the <code>exchange.getIn().setBody(pduEvent, CustomPduEvent::class.java)</code> calls.  On the <code>.bean</code> call, the body doesnt appear to have changed at all.  The exchange is still the same <code>SnmpMessage</code> as the start."}], "answers": [{"comments": [{"owner": {"reputation": 1517, "user_id": 553385, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cb87051f588f2e01a8f259cf4a4795b3?s=128&d=identicon&r=PG", "display_name": "ShellDragon", "link": "https://stackoverflow.com/users/553385/shelldragon"}, "edited": false, "score": 0, "creation_date": 1573194616, "post_id": 58749554, "comment_id": 103809695, "body": "Glad to know it worked for you. However, remember that calling &#39;getOut()&#39; creates a completely new message. <a href=\"https://camel.apache.org/manual/latest/faq/using-getin-or-getout-methods-on-exchange.html\" rel=\"nofollow noreferrer\">Docs here</a>. Perhaps that&#39;s what helped you with the right bean binding!"}, {"owner": {"reputation": 5610, "user_id": 575596, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7ca992eaf8173604c82a9ab37f8273ee?s=128&d=identicon&r=PG&f=1", "display_name": "MeanwhileInHell", "link": "https://stackoverflow.com/users/575596/meanwhileinhell"}, "reply_to_user": {"reputation": 1517, "user_id": 553385, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cb87051f588f2e01a8f259cf4a4795b3?s=128&d=identicon&r=PG", "display_name": "ShellDragon", "link": "https://stackoverflow.com/users/553385/shelldragon"}, "edited": false, "score": 0, "creation_date": 1573218101, "post_id": 58749554, "comment_id": 103819846, "body": "Thanks @ShellDragon.  I increased my Camel version and IntelliJ then suggested I change <code>exchange.out</code> to <code>exchange.message</code>, so hopefully that just changes the message rather than creates a completely new one."}, {"owner": {"reputation": 1517, "user_id": 553385, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cb87051f588f2e01a8f259cf4a4795b3?s=128&d=identicon&r=PG", "display_name": "ShellDragon", "link": "https://stackoverflow.com/users/553385/shelldragon"}, "edited": false, "score": 0, "creation_date": 1573662585, "post_id": 58749554, "comment_id": 103957124, "body": "I had a look at <code>DefaultExchange.java</code>:339 Camel v3.0.0-M4, <code>getMessage()</code> internally invokes<code>getOut()</code>, if it is present.  `    public Message getMessage() {         return hasOut() ? getOut() : getIn();     } `"}], "tags": [], "owner": {"reputation": 5610, "user_id": 575596, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7ca992eaf8173604c82a9ab37f8273ee?s=128&d=identicon&r=PG&f=1", "display_name": "MeanwhileInHell", "link": "https://stackoverflow.com/users/575596/meanwhileinhell"}, "is_accepted": true, "score": 1, "last_activity_date": 1573132460, "creation_date": 1573132460, "answer_id": 58749554, "question_id": 58734744, "link": "https://stackoverflow.com/questions/58734744/apache-camel-call-to-bean-not-saving-object-in-db/58749554#58749554", "title": "Apache Camel : Call to .bean not saving object in DB", "body": "<p>It turned out I had two main problems.  Firstly, I needed to set the body of the out message, not the in, and secondly, the final <code>.log</code> call didn't work when calling a bean method.  So the call to the bean method was working, but the log call was making it look like it didn't.  So instead I called my logger from within a <code>process</code> call.</p>\n\n<pre><code>    from(\"snmp:0.0.0.0:1611?protocol=udp&amp;type=TRAP\")\n            .process { exchange -&gt;\n                val message = exchange.getIn() as SnmpMessage\n                exchange.out.body = CustomPduEvent(message.snmpMessage.requestID.toLong(), message.snmpMessage.type)\n            }\n            .bean(repository, \"save\")\n            .process {\n                logger.debug(\"MIH :: DB Entries [\" + repository.findAll() + \"]\")\n            }\n</code></pre>\n"}], "owner": {"reputation": 5610, "user_id": 575596, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7ca992eaf8173604c82a9ab37f8273ee?s=128&d=identicon&r=PG&f=1", "display_name": "MeanwhileInHell", "link": "https://stackoverflow.com/users/575596/meanwhileinhell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58749554, "answer_count": 1, "score": 0, "last_activity_date": 1573132460, "creation_date": 1573058115, "last_edit_date": 1573059974, "question_id": 58734744, "link": "https://stackoverflow.com/questions/58734744/apache-camel-call-to-bean-not-saving-object-in-db", "title": "Apache Camel : Call to .bean not saving object in DB", "body": "<p>I am writing a simple POC using Apache Camel to receive SMNP traps.  I am trying to take the incoming exchange message, convert it to <code>SnmpMessage</code> and then create a custom type that holds two fields from the <code>SnmpMessage</code>.  I then want to save this custom object to an H2 DB.  My SNMP route looks like this:</p>\n\n<pre><code>open class SnmpTrapRoute(private val repository: IPduEventRepository) : RouteBuilder() {\n\n    @Throws(Exception::class)\n    override fun configure() {\n\n        from(\"snmp:0.0.0.0:1611?protocol=udp&amp;type=TRAP\")\n                .process { exchange -&gt;\n                    val message = exchange.getIn() as SnmpMessage\n                    val pduEvent = CustomPduEvent(message.snmpMessage.requestID.toLong(), message.snmpMessage.type)\n                    exchange.getIn().setBody(pduEvent, CustomPduEvent::class.java)\n                }\n                .bean(repository, \"save\")\n                .log(\"MIH :: DB Entries [\" + repository.findAll() + \"]\")\n    }\n}\n</code></pre>\n\n<p>However, the <code>.bean</code> call doesn't seem to add the object to the DB.  If I include <code>repository.save(pduEvent)</code> in the processor and remove the call to <code>.bean</code>, it adds it fine.  </p>\n\n<p>Have also tried setting the out message body <code>exchange.out.setBody(pduEvent, PduEvent::class.java)</code> but same result.</p>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["java", "android", "kotlin", "kapt"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1573060393, "post_id": 58734732, "comment_id": 103760824, "body": "Try moving your project directory to somewhere less nested / deep."}, {"owner": {"reputation": 159, "user_id": 5302847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-R6GIEc3jOXg/AAAAAAAAAAI/AAAAAAAAATI/q8Ooy84XJyw/photo.jpg?sz=128", "display_name": "Om Bala", "link": "https://stackoverflow.com/users/5302847/om-bala"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1573655505, "post_id": 58734732, "comment_id": 103952962, "body": "Tried for 2 days, got no solution - so reinstalled windows by using backup &amp; restore. After reinstall its working fine"}], "owner": {"reputation": 159, "user_id": 5302847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-R6GIEc3jOXg/AAAAAAAAAAI/AAAAAAAAATI/q8Ooy84XJyw/photo.jpg?sz=128", "display_name": "Om Bala", "link": "https://stackoverflow.com/users/5302847/om-bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1573113295, "creation_date": 1573058085, "question_id": 58734732, "link": "https://stackoverflow.com/questions/58734732/org-gradle-api-uncheckedioexception-java-io-ioexception-cannot-run-program-c", "title": "org.gradle.api.UncheckedIOException: java.io.IOException: Cannot run program : CreateProcess error=206, The filename or extension is too long", "body": "<p>I am new to kotlin and was running a new project in android, it was working fine before but suddenly I am getting errors while running the application into the device</p>\n\n<p>I have tried searching all around the net - reinstalled android and wasted full day - nothing works, don't know what to do exactly, the below error code is what I am getting exactly every time when I run the application</p>\n\n<pre><code>:app:kaptGenerateStubsDevelopmentDebugKotlin    \n\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptGenerateStubsDevelopmentDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.accept(ExecuteActionsTaskExecuter.java:148)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.accept(ExecuteActionsTaskExecuter.java:145)\n    at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:191)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:138)\n    at org.gradle.api.internal.tasks.execution.ResolveBeforeExecutionStateTaskExecuter.execute(ResolveBeforeExecutionStateTaskExecuter.java:75)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:108)\n    at org.gradle.api.internal.tasks.execution.ResolveBeforeExecutionOutputsTaskExecuter.execute(ResolveBeforeExecutionOutputsTaskExecuter.java:67)\n    at org.gradle.api.internal.tasks.execution.ResolveAfterPreviousExecutionStateTaskExecuter.execute(ResolveAfterPreviousExecutionStateTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:94)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:95)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:73)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:49)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:416)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:406)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:102)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:49)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:43)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:355)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:343)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:336)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:322)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:134)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:129)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:202)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:193)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:129)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: org.gradle.api.UncheckedIOException: java.io.IOException: Cannot run program \"C:\\Android\\jre\\jre\\bin\\java\": CreateProcess error=206, The filename or extension is too long\n    at org.gradle.internal.UncheckedException.throwAsUncheckedException(UncheckedException.java:61)\n    at org.gradle.internal.UncheckedException.throwAsUncheckedException(UncheckedException.java:41)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:106)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskInputsTaskAction.doExecute(IncrementalTaskInputsTaskAction.java:46)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:41)\n    at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$5.run(ExecuteActionsTaskExecuter.java:401)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:402)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:394)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:92)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:390)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:373)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$200(ExecuteActionsTaskExecuter.java:79)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:210)\n    at org.gradle.internal.execution.steps.ExecuteStep.lambda$execute$0(ExecuteStep.java:32)\n    at java.util.Optional.map(Optional.java:215)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:32)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:26)\n    at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:58)\n    at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:35)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:33)\n    at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:39)\n    at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:73)\n    at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:54)\n    at org.gradle.internal.execution.steps.CatchExceptionStep.execute(CatchExceptionStep.java:35)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n    at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:45)\n    at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:31)\n    at org.gradle.internal.execution.steps.CacheStep.executeWithoutCache(CacheStep.java:201)\n    at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:70)\n    at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:45)\n    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:49)\n    at org.gradle.internal.execution.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:43)\n    at org.gradle.internal.execution.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:32)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:38)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:24)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:96)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:89)\n    at java.util.Optional.map(Optional.java:215)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:54)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:77)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:37)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:36)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:26)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:90)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:48)\n    at org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:33)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:117)\n    ... 38 more\nCaused by: java.io.IOException: Cannot run program \"C:\\Android\\jre\\jre\\bin\\java\": CreateProcess error=206, The filename or extension is too long\n    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\n    at org.jetbrains.kotlin.daemon.client.NativePlatformUtilKt.launchProcessWithFallback(NativePlatformUtil.kt:58)\n    at org.jetbrains.kotlin.daemon.client.NativePlatformUtilKt.launchProcessWithFallback$default(NativePlatformUtil.kt:37)\n    at org.jetbrains.kotlin.compilerRunner.ReportUtilsKt.runToolInSeparateProcess(reportUtils.kt:81)\n    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.compileOutOfProcess(GradleKotlinCompilerWork.kt:300)\n    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.compileWithDaemonOrFallbackImpl(GradleKotlinCompilerWork.kt:147)\n    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:117)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:146)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:141)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompilerAsync(GradleKotlinCompilerRunner.kt:81)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompilerAsync$kotlin_gradle_plugin(Tasks.kt:449)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompilerAsync$kotlin_gradle_plugin(Tasks.kt:359)\n    at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.executeImpl(Tasks.kt:316)\n    at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:288)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:103)\n    ... 90 more\nCaused by: java.io.IOException: CreateProcess error=206, The filename or extension is too long\n    at java.lang.ProcessImpl.create(Native Method)\n    at java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:386)\n    at java.lang.ProcessImpl.start(ProcessImpl.java:137)\n    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)\n</code></pre>\n\n<p>Please provide me with the correct solutions friends, Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "scrollview"], "answers": [{"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1573059810, "last_edit_date": 1573059810, "creation_date": 1573059083, "answer_id": 58734988, "question_id": 58734413, "link": "https://stackoverflow.com/questions/58734413/how-to-programmatically-scroll-to-bottom-android-kotlin/58734988#58734988", "title": "How to programmatically scroll to bottom (Android, kotlin)?", "body": "<p>Try using <code>scroll.fullScroll</code></p>\n\n<pre><code>scroll.post { \n    scroll.fullScroll(View.FOCUS_DOWN) \n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11656272, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKIRA94w5Tc/AAAAAAAAAAI/AAAAAAAABYw/XEs1R1YOf9c/photo.jpg?sz=128", "display_name": "mtisset", "link": "https://stackoverflow.com/users/11656272/mtisset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 58734988, "answer_count": 1, "score": 0, "last_activity_date": 1573059810, "creation_date": 1573056935, "last_edit_date": 1573058173, "question_id": 58734413, "link": "https://stackoverflow.com/questions/58734413/how-to-programmatically-scroll-to-bottom-android-kotlin", "title": "How to programmatically scroll to bottom (Android, kotlin)?", "body": "<p>I have a ScrollView with a lot of layouts inside that appears step by step (button 1 shows layout 1, ...).\nAnd, as a final step, my last button shows a footer.</p>\n\n<p>At each appearance of a layout, I want the scrollview to scroll to the bottom.\nSame when my footer appear.</p>\n\n<p>I tried solutions posted on Stack but they do not work for me... :\n<a href=\"https://stackoverflow.com/a/34866634/11656272\">https://stackoverflow.com/a/34866634/11656272</a>\nor <code>binding.scroll.scrollTo(0, Int.MAX_VALUE)</code></p>\n\n<p>I also try with \"findViewById\" instead of binding...</p>\n\n<p>Any idea?</p>\n\n<p><strong>layout file</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n   xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n   xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n   &lt;RelativeLayout\n   android:layout_width=\"match_parent\"\n   android:layout_height=\"match_parent\"\n   android:layout_gravity=\"center_horizontal\"\n   android:layout_margin=\"10dp\"&gt;\n\n   &lt;!-- scrollView --&gt;\n   &lt;ScrollView\n      android:id=\"@+id/scroll\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      android:layout_above=\"@id/footerLayout\"&gt;\n\n      &lt;LinearLayout\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      android:orientation=\"vertical\"&gt;\n\n      &lt;Button\n         android:id=\"@+id/btn1\"\n         android:layout_width=\"wrap_content\"\n         android:layout_height=\"wrap_content\"\n         android:text=\"Button 1\" /&gt;\n\n      &lt;LinearLayout\n         android:id=\"@+id/layout1\"\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"match_parent\"\n         android:orientation=\"vertical\"\n         android:visibility=\"gone\"&gt;\n         &lt;!-- ... --&gt;\n      &lt;/LinearLayout&gt;\n\n      &lt;!-- same for btn2, layout2, ... --&gt;\n\n      &lt;LinearLayout\n         android:id=\"@+id/layoutLast\"\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"match_parent\"\n         android:orientation=\"vertical\"\n         android:visibility=\"gone\"&gt;\n\n         &lt;Button\n         android:id=\"@+id/btnLast\"\n         android:layout_width=\"wrap_content\"\n         android:layout_height=\"wrap_content\"\n         android:text=\"Last button\" /&gt;\n      &lt;/LinearLayout&gt;\n      &lt;/LinearLayout&gt;\n   &lt;/ScrollView&gt;\n\n   &lt;!-- footer layout --&gt;\n   &lt;LinearLayout\n      android:id=\"@+id/footerLayout\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"wrap_content\"\n      android:layout_alignParentBottom=\"true\"\n      android:orientation=\"vertical\"\n      android:visibility=\"gone\"&gt;\n\n      &lt;!--- ... ---&gt;\n   &lt;/LinearLayout&gt;\n   &lt;!-- footer layout - END --&gt;\n   &lt;/RelativeLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p><strong><em>kt file</em></strong></p>\n\n<pre><code>package com.example.myapp.controller\n\n\nimport ...\n\nclass MainActivity : AppCompatActivity() {\n\n   fun ScrollView.scrollToBottom() {\n      val lastChild = getChildAt(childCount - 1)\n      val bottom = lastChild.bottom + paddingBottom\n      val delta = bottom - (scrollY + height)\n      smoothScrollBy(0, delta)\n   }\n\n   private lateinit var binding: com.example.myapp.databinding.ActivityMainBinding\n\n   override fun onCreate(savedInstanceState: Bundle?) {\n      super.onCreate(savedInstanceState)\n      binding = DataBindingUtil.setContentView(this, R.layout.activity_main)\n\n      // *** buttons 1, 2, 3, ... show layout1, layout2, ...\n      binding.btn1.setOnClickListener {_ -&gt;\n         binding.layout1.visibility = VISIBLE\n\n         binding.scroll.scrollToBottom()\n      }\n\n      // ... etc for other layouts\n\n      // *** Main button -&gt; show footer layout and scroll down ***\n      binding.btnLast.setOnClickListener {_ -&gt;\n         binding.footerLayout.visibility = VISIBLE\n\n         binding.scroll.scrollToBottom()\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573203658, "post_id": 58762278, "comment_id": 103812935, "body": "Thank you a lot for your answer ! One thing I do not understand is that Mainscope() already use a Supervisor job internally so why I cannot use this one ?  <code>public fun MainScope(): CoroutineScope = ContextScope(SupervisorJob() + Dispatchers.Main)</code>"}, {"owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573211444, "post_id": 58762278, "comment_id": 103816715, "body": "<a href=\"https://pl.kotl.in/zPnY5MGeO\" rel=\"nofollow noreferrer\">here is the behavior I described and should work as expected</a> but it does not work in my android app"}, {"owner": {"reputation": 46, "user_id": 12310033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8102840cd7912fd4cedc3ee5916bf507?s=128&d=identicon&r=PG&f=1", "display_name": "Circusmagnus", "link": "https://stackoverflow.com/users/12310033/circusmagnus"}, "reply_to_user": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573213337, "post_id": 58762278, "comment_id": 103817546, "body": "- You cannot use MainScope function, because you have no way of passing CEH inside its context (if you need to use CEH of course).  You can pass CEH into whatever launch{} you like, and it will catch the exception, BUT it will not prevent cancellation of the code block in your launch, its children coroutines and its parent (unless parent has a SupervisorJob, like the scope in kotlin playground  See how your playground behaves after adding second child to your launch(handler){}: <a href=\"https://pl.kotl.in/odvcakiqD\" rel=\"nofollow noreferrer\">pl.kotl.in/odvcakiqD</a>"}, {"owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573214741, "post_id": 58762278, "comment_id": 103818296, "body": "I see your point ! I think I am using it differently on my activities like <a href=\"https://pl.kotl.in/RC3iYn492\" rel=\"nofollow noreferrer\">this</a>. That is why I do not understand why it is crashing the app. I understand that ALL coroutines inside a block are cancelled when something goes wrong for one without a SupervisorJob (and that is what I expect) but I do not understand why the behavior I described in the <a href=\"https://pl.kotl.in/RC3iYn492\" rel=\"nofollow noreferrer\">link</a> below is crashing in my ScopedActivity because MainScope do have a SupervisorJob exactly like my example..."}, {"owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573219407, "post_id": 58762278, "comment_id": 103820503, "body": "Thank you, after implementing your solution it crashed again with the same exception ... <code>E&#47;UncaughtException: kotlinx.coroutines.JobCancellationException: Job was cancelled; job=StandaloneCoroutine{Cancelled}@d9b9431</code>"}, {"owner": {"reputation": 46, "user_id": 12310033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8102840cd7912fd4cedc3ee5916bf507?s=128&d=identicon&r=PG&f=1", "display_name": "Circusmagnus", "link": "https://stackoverflow.com/users/12310033/circusmagnus"}, "reply_to_user": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1573231123, "post_id": 58762278, "comment_id": 103827017, "body": "Eh, I `m sorry :(. Will try to find better solution."}, {"owner": {"reputation": 281, "user_id": 2021346, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b5c3d7296ab1f9715abcfb17687b8d76?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/2021346/pierre"}, "reply_to_user": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "edited": false, "score": 0, "creation_date": 1584664402, "post_id": 58762278, "comment_id": 107513551, "body": "Hi @tperraut, did you find a solution of your problem ? I also have a lot of this exception... Thanks"}, {"owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "reply_to_user": {"reputation": 281, "user_id": 2021346, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b5c3d7296ab1f9715abcfb17687b8d76?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/2021346/pierre"}, "edited": false, "score": 0, "creation_date": 1584715163, "post_id": 58762278, "comment_id": 107529143, "body": "@user2021346 I post an answer :)"}], "tags": [], "owner": {"reputation": 46, "user_id": 12310033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8102840cd7912fd4cedc3ee5916bf507?s=128&d=identicon&r=PG&f=1", "display_name": "Circusmagnus", "link": "https://stackoverflow.com/users/12310033/circusmagnus"}, "is_accepted": false, "score": 0, "last_activity_date": 1573217633, "last_edit_date": 1573217633, "creation_date": 1573198375, "answer_id": 58762278, "question_id": 58734114, "link": "https://stackoverflow.com/questions/58734114/how-to-spot-where-job-was-cancelled-exception-comes-from-when-all-your-corouti/58762278#58762278", "title": "How to spot where &quot;Job was cancelled&quot; exception comes from when all your coroutines are already wrapped with a CouroutineExceptionHandler?", "body": "<p>Most likely problems arise from the fact, that you are passing your coroutine exception handler (lets name it CEH) directly to your launch blocks. Those launch blocks are creating new Jobs (important - plain Jobs, not Supervisor ones), which become children of the Job in scope (MainScope in your Scoped Activity).</p>\n\n<p>Ordinary Job will cancel all its children and itself, if any of its children raise an exception. CEH will not prevent this behaviour. It will get those exceptions and do, what it was told to do with them, but it will still not prevent cancellation of Job in scope and all its children. Most importantly IT WILL PROPAGATE EXCEPTION UP THE HIERARCHY TOO. TLDR - crash will not be handled.</p>\n\n<p>In order for your CEH to do its job, you need to install it inside a context with SuperVisorJob (or NonCancellable one). SupervisorJob assumes, that you are supervising exceptions in its scope, so it will not cancel itself or its children, when exception is raised (however, if exception is not handled at all, it will propagate it anyway up the hierarchy).</p>\n\n<p>For example in your ScopedActivity Scope:</p>\n\n<pre><code>abstract class ScopedActivity : BaseActivity(), CoroutineScope {\n\noverride val coroutineContext = Dispatchers.Main + SupervisorJob() + CoroutineExceptionHandler { _, error -&gt; \n...\n    }\n</code></pre>\n\n<p>If you really want, you may install CEH deeper in your coroutines hierarchy. It will look clumsy however and is not recommended practice:</p>\n\n<pre><code>launch {\n    val supervisedJob = SupervisorJob(coroutineContext[Job])\n    launch(supervisedJob + CEH) { \n        throw Exception() \n    }\n    yield()\n    println(\"I am still alive, exception was catched by CEH\")\n}\n</code></pre>\n\n<p>Above practice may however come useful if you want to launch some fire-and-forget non cancellable side effect:</p>\n\n<pre><code>launch(NonCancellable + CEH) {\n        throw Exception()\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1132, "user_id": 4836759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wtBnG.png?s=128&g=1", "display_name": "Ashu", "link": "https://stackoverflow.com/users/4836759/ashu"}, "edited": false, "score": 0, "creation_date": 1608978296, "post_id": 60776251, "comment_id": 115722020, "body": "Yeah, it helps a lot :)"}], "tags": [], "owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "is_accepted": true, "score": 3, "last_activity_date": 1584715099, "creation_date": 1584715099, "answer_id": 60776251, "question_id": 58734114, "link": "https://stackoverflow.com/questions/58734114/how-to-spot-where-job-was-cancelled-exception-comes-from-when-all-your-corouti/60776251#60776251", "title": "How to spot where &quot;Job was cancelled&quot; exception comes from when all your coroutines are already wrapped with a CouroutineExceptionHandler?", "body": "<p>The issue was coming from Kotlin Flow trying to emit after cancellation and here are the extensions I created to remove the crashes from happening in production :</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>/**\n * Check if the channel is not closed and try to emit a value, catching [CancellationException] if the corresponding\n * has been cancelled. This extension is used in call callbackFlow.\n */\n@ExperimentalCoroutinesApi\nfun &lt;E&gt; SendChannel&lt;E&gt;.safeOffer(value: E): Boolean {\n    if (isClosedForSend) return false\n    return try {\n        offer(value)\n    } catch (e: CancellationException) {\n        false\n    }\n}\n\n/**\n * Terminal flow operator that collects the given flow with a provided [action] and catch [CancellationException]\n */\nsuspend inline fun &lt;T&gt; Flow&lt;T&gt;.safeCollect(crossinline action: suspend (value: T) -&gt; Unit): Unit =\n    collect { value -&gt;\n        try {\n            action(value)\n        } catch (e: CancellationException) {\n            // Do nothing\n        }\n    }\n\n/**\n * Terminal flow operator that [launches][launch] the [collection][collect] of the given flow in the [scope] and catch\n * [CancellationException]\n * It is a shorthand for `scope.launch { flow.safeCollect {} }`.\n */\nfun &lt;T&gt; Flow&lt;T&gt;.safeLaunchIn(scope: CoroutineScope) = scope.launch {\n    this@safeLaunchIn.safeCollect { /* Do nothing */ }\n}\n</code></pre>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 81, "user_id": 12201456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MxW_ULr-DsY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftUGex378Fk3ESx_emP2G7w_8opw/photo.jpg?sz=128", "display_name": "tperraut", "link": "https://stackoverflow.com/users/12201456/tperraut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "accepted_answer_id": 60776251, "answer_count": 2, "score": 5, "last_activity_date": 1584715099, "creation_date": 1573055987, "last_edit_date": 1573056323, "question_id": 58734114, "link": "https://stackoverflow.com/questions/58734114/how-to-spot-where-job-was-cancelled-exception-comes-from-when-all-your-corouti", "title": "How to spot where &quot;Job was cancelled&quot; exception comes from when all your coroutines are already wrapped with a CouroutineExceptionHandler?", "body": "<p>I read all the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md\" rel=\"noreferrer\">kotlinx UI docs</a> and implement a ScopedActivity like described there (see the code below).</p>\n\n<p>In my ScopedActivity implementation, I also add a CouroutineExceptionHandler and despite that I pass my exception handler to all my coroutines, my users are experiencing crashes and the only info I get in the stacktrace is \"Job was cancelled\".</p>\n\n<p>I searched for a couple of days now but I did not find a solution and my users are still randomly crashing but I do not understand why...</p>\n\n<p>Here is my ScopedActivity implementation</p>\n\n<pre><code>abstract class ScopedActivity : BaseActivity(), CoroutineScope by MainScope() {\n\n    val errorHandler by lazy { CoroutineExceptionHandler { _, throwable -&gt; onError(throwable) } }\n\n    open fun onError(e: Throwable? = null) {\n        e ?: return\n        Timber.i(e)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        cancel()\n    }\n}\n</code></pre>\n\n<p>Here is an example of an activity implementing it :</p>\n\n<pre><code>class ManageBalanceActivity : ScopedActivity() {\n\n    @Inject\n    lateinit var viewModel: ManageBalanceViewModel\n\n    private var stateJob: Job? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_manage_balance)\n        AndroidInjection.inject(this)\n\n        init()\n    }\n\n    private fun init() {\n        SceneManager.create(\n            SceneCreator.with(this)\n                .add(Scene.MAIN, R.id.activity_manage_balance_topup_view)\n                .add(Scene.MAIN, R.id.activity_manage_balance_topup_bt)\n                .add(Scene.SPINNER, R.id.activity_manage_balance_spinner)\n                .add(Scene.SPINNER, R.id.activity_manage_balance_info_text)\n                .add(Scene.PLACEHOLDER, R.id.activity_manage_balance_error_text)\n                .first(Scene.SPINNER)\n        )\n\n        // Setting some onClickListeners ...\n        bindViewModel()\n    }\n\n    private fun bindViewModel() {\n        showProgress()\n        stateJob = launch(errorHandler) {\n            viewModel.state.collect { manageState(it) }\n        }\n    }\n\n    private fun manageState(state: ManageBalanceState) = when (state) {\n        is ManageBalanceState.NoPaymentMethod -&gt; viewModel.navigateToManagePaymentMethod()\n        is ManageBalanceState.HasPaymentMethod -&gt; onPaymentMethodAvailable(state.balance)\n    }\n\n    private fun onPaymentMethodAvailable(balance: Cash) {\n        toolbarTitle.text = formatCost(balance)\n        activity_manage_balance_topup_view.currency = balance.currency\n        SceneManager.scene(this, Scene.MAIN)\n    }\n\n    override fun onError(e: Throwable?) {\n        super.onError(e)\n        when (e) {\n            is NotLoggedInException -&gt; loadErrorScene(R.string.error_pls_signin)\n            else -&gt; loadErrorScene()\n        }\n    }\n\n    private fun loadErrorScene(@StringRes textRes: Int = R.string.generic_error) {\n\n   activity_manage_balance_error_text.setOnClickListener(this::reload)\n        SceneManager.scene(this, Scene.PLACEHOLDER)\n    }\n\n    private fun reload(v: View) {\n        v.setOnClickListener(null)\n        stateJob.cancelIfPossible()\n        bindViewModel()\n    }\n\n    private fun showProgress(@StringRes textRes: Int = R.string.please_wait_no_dot) {\n        activity_manage_balance_info_text.setText(textRes)\n        SceneManager.scene(this, Scene.SPINNER)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        SceneManager.release(this)\n    }\n}\n</code></pre>\n\n<pre><code>fun Job?.cancelIfPossible() {\n    if (this?.isActive == true) cancel()\n}\n</code></pre>\n\n<p>And here is the ViewModel</p>\n\n<pre><code>class ManageBalanceViewModel @Inject constructor(\n    private val userGateway: UserGateway,\n    private val paymentGateway: PaymentGateway,\n    private val managePaymentMethodNavigator: ManagePaymentMethodNavigator\n) {\n\n    val state: Flow&lt;ManageBalanceState&gt;\n        get() = paymentGateway.collectSelectedPaymentMethod()\n            .combine(userGateway.collectLoggedUser()) { paymentMethod, user -&gt;\n                when (paymentMethod) {\n                    null -&gt; ManageBalanceState.NoPaymentMethod\n                    else -&gt; ManageBalanceState.HasPaymentMethod(Cash(user.creditBalance.toInt(), user.currency!!))\n                }\n            }\n            .flowOn(Dispatchers.Default)\n\n    // The navigator just do a startActivity with a clear task\n    fun navigateToManagePaymentMethod() = managePaymentMethodNavigator.navigate(true)\n}\n</code></pre>\n"}, {"tags": ["hibernate", "spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2107, "user_id": 3523298, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8582b755b86448fe143e0d0f26a4f9df?s=128&d=identicon&r=PG&f=1", "display_name": "Zufar Muhamadeev", "link": "https://stackoverflow.com/users/3523298/zufar-muhamadeev"}, "is_accepted": true, "score": 0, "last_activity_date": 1573063429, "creation_date": 1573063429, "answer_id": 58736083, "question_id": 58733782, "link": "https://stackoverflow.com/questions/58733782/hibernate-entity-property-is-null-if-it-is-not-initialized-with-hibernate-unp/58736083#58736083", "title": "Hibernate entity property is `null` if it is not initialized with `Hibernate.unproxy`", "body": "<p>I found reson - it is because <code>type</code> field was not <code>open</code>. In kotlin all field are <code>final</code> by default so you need to specify them as <code>open</code>. So this way it worked:</p>\n\n<pre><code>open class HealthValueType {\n    @get:Id\n    open var id: UUID? = null\n    @get:Enumerated(EnumType.STRING)\n    @get:Column(nullable = false)\n    open var type: ObservationType? = null\n}\n</code></pre>\n\n<p>But, better solution is using <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">kotlin-allopen</a> plugin.</p>\n"}], "owner": {"reputation": 2107, "user_id": 3523298, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8582b755b86448fe143e0d0f26a4f9df?s=128&d=identicon&r=PG&f=1", "display_name": "Zufar Muhamadeev", "link": "https://stackoverflow.com/users/3523298/zufar-muhamadeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 58736083, "answer_count": 1, "score": 0, "last_activity_date": 1573063429, "creation_date": 1573054865, "last_edit_date": 1573058502, "question_id": 58733782, "link": "https://stackoverflow.com/questions/58733782/hibernate-entity-property-is-null-if-it-is-not-initialized-with-hibernate-unp", "title": "Hibernate entity property is `null` if it is not initialized with `Hibernate.unproxy`", "body": "<p>I have entity object with <code>type</code> propery is <code>null</code>(it is not null in db). When I call <code>Hibernate.unproxy</code> on entity object - and look at uproxied object <code>type</code> propery - it is not null. This entity is inherited from other entity(I mention it because I haven't seen this behaviour with not inherited entities).</p>\n\n<p>Here is entities kotlin code:</p>\n\n<pre><code>open class HealthValue {\n\n    @get:Id\n    open var id: UUID? = null   \n    @get:ManyToOne(fetch = FetchType.LAZY)\n    open var healthValueType: HealthValueType? = null\n\n}\n\nclass ObservedHealthValue : HealthValue() {\n\n}\n\nopen class HealthValueType {\n\n    @get:Id\n    open var id: UUID? = null\n    @get:Enumerated(EnumType.STRING)\n    @get:Column(nullable = false)\n    var type: ObservationType? = null\n\n}\n\nclass SelectionValueType : HealthValueType() {\n\n}\n</code></pre>\n\n<p>Here is snippet with bug demo:</p>\n\n<pre><code>@Transactional\nfun method(id: UUID) {\n  val healthValue= entityManager.find(ObservedHealthValue::class.java, id)\n  val type1 = healthValue.healthValueType!!.type // this value is null\n  val type2 = Hibernate.unproxy(healthValue.healthValueType!!).type // this is not null\n}\n</code></pre>\n\n<p>This behaviour looks strange, not sure using <code>Hibernate.unproxy</code> is correct approach. Do you have any ideas why it happens, how this can be fixed?</p>\n\n<p>My hibernate version is: 5.3.7.Final(It comes from gradle dependecy <code>compile(\"org.springframework.boot:spring-boot-starter-data-jpa\")</code> with enabled <code>'org.springframework.boot' version '2.2.0.RELEASE'</code> plugin)</p>\n"}, {"tags": ["java", "gradle", "kotlin", "build"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4510605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0yadwtn3Gns/AAAAAAAAAAI/AAAAAAAAAEM/BM9FA3v5Xfc/photo.jpg?sz=128", "display_name": "Vadim Emelyanov", "link": "https://stackoverflow.com/users/4510605/vadim-emelyanov"}, "edited": false, "score": 0, "creation_date": 1573112301, "post_id": 58736343, "comment_id": 103776901, "body": "Thank you very much! Your pieces of advice are really helpful both to solving my issue and understanding the work of Gradle at all."}], "tags": [], "owner": {"reputation": 4343, "user_id": 1703730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4so1.jpg?s=128&g=1", "display_name": "Bj&#248;rn Vester", "link": "https://stackoverflow.com/users/1703730/bj%c3%b8rn-vester"}, "is_accepted": true, "score": 0, "last_activity_date": 1573064507, "creation_date": 1573064507, "answer_id": 58736343, "question_id": 58733249, "link": "https://stackoverflow.com/questions/58733249/gradle-multi-project-build-order-using-kotlin-script/58736343#58736343", "title": "Gradle multi-project build order using Kotlin script", "body": "<p>There is nothing wrong. If you don't specify any inter-project dependencies, Gradle will execute them in alphabetical order. This should be fine if the two projects are unrelated, as they are now.</p>\n\n<p>But let's say you like to build the frontend (using node) and then include those resources in the backend (using Spring Boot). Then you will need to make the backend depend on frontend project. Then Gradle will honor the dependency graph and build the frontend first.</p>\n\n<p>There are many ways to do that. One is to use the <code>java</code> plugin in the frontend to build a jar file of your frontend resources. You can then make a normal project dependency to it. You could also make a dependency directly into the frontend project's \"internal\" build tasks, but that is a bit frowned upon. Or you could declare your own artifact, or do a it in a bunch of other different ways.</p>\n\n<p>For the first approach, you can build a jar file of your frontend resources like this:</p>\n\n<pre><code>plugins {\n    // ...\n    id(\"java\")\n}\n\njava {\n    // Required to make the jar artifact compatible with your backend, which is configured for Java 1.8\n    targetCompatibility = JavaVersion.VERSION_1_8\n}\n\ntasks.named(\"jar\", Jar::class) {\n    dependsOn(\"assembleFrontend\")\n    from(\"$buildDir/dist\")\n    into(\"static\")\n}\n</code></pre>\n\n<p>Then in the backend, depend on it like this:</p>\n\n<pre><code>dependencies {\n    // ...\n    runtimeOnly(project(\":frontend\"))\n}\n\n</code></pre>\n\n<p>There are a few other things wrong with your build script as well.</p>\n\n<ul>\n<li>The <code>runtime</code> configuration is deprecated; use <code>runtimeOnly</code> instead (for your spring-boot-devtools dependency).</li>\n<li>A multi-project should only have a single settings.gradle file, but you have one in each project. Delete them except for the one in the root folder.</li>\n<li>You have declared the <code>org.siouan.frontend</code> plugin twice: once using the recommended way and once using the \"old\" way. Remove the latter (everything in the <code>buildscript</code> block and the <code>apply</code> statement.</li>\n</ul>\n\n<p>Also, while I am not familiar with the <code>org.siouan.frontend</code> plugin, it appears it does not declare inputs and outputs for you - probably because it is very generic. So to avoid running <code>npm</code> each time you build your backend (as you now have a dependency to the frontend), you should declare proper inputs and outputs for the frontend tasks like <code>installFrontend</code> and <code>assembleFrontend</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4510605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0yadwtn3Gns/AAAAAAAAAAI/AAAAAAAAAEM/BM9FA3v5Xfc/photo.jpg?sz=128", "display_name": "Vadim Emelyanov", "link": "https://stackoverflow.com/users/4510605/vadim-emelyanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58736343, "answer_count": 1, "score": 0, "last_activity_date": 1573064507, "creation_date": 1573053220, "question_id": 58733249, "link": "https://stackoverflow.com/questions/58733249/gradle-multi-project-build-order-using-kotlin-script", "title": "Gradle multi-project build order using Kotlin script", "body": "<p>I use Kotlin DSL script (<code>.kts</code>) for building. There the structure of my project is:</p>\n\n<pre><code>Root project 'demo'\n+--- Project ':backend'\n\\--- Project ':frontend'\n</code></pre>\n\n<p>I need to build project <code>frontend</code> first, than <code>backend</code>. I tried</p>\n\n<pre><code>include(\":frontend\")\ninclude(\":backend)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>include(\":frontend\", \":backend\")\n</code></pre>\n\n<p>with and without <code>:</code> in <em>settings.gradle.kts</em> of root project, but still the order of build is <strong>alphabetical</strong> - <code>backend</code>, than <code>frontend</code>.</p>\n\n<p><a href=\"https://github.com/DrLeprechaun/kotlin-spring-vue-gradle\" rel=\"nofollow noreferrer\">View source code on GitHub</a></p>\n\n<p>Do you have any ideas what is wrong?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 5169, "user_id": 3494639, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ecb9eb312b5a2fad53dacf42b14988df?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelStoddart", "link": "https://stackoverflow.com/users/3494639/michaelstoddart"}, "edited": false, "score": 0, "creation_date": 1573052736, "post_id": 58733027, "comment_id": 103756315, "body": "The list view has no content, so nothing will show"}, {"owner": {"reputation": 1, "user_id": 12331466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MRvY0Bd1b7o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYdaxerj1N_8K1cBYOs8pXTKTd7w/photo.jpg?sz=128", "display_name": "Poojah", "link": "https://stackoverflow.com/users/12331466/poojah"}, "reply_to_user": {"reputation": 5169, "user_id": 3494639, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ecb9eb312b5a2fad53dacf42b14988df?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelStoddart", "link": "https://stackoverflow.com/users/3494639/michaelstoddart"}, "edited": false, "score": 0, "creation_date": 1573053293, "post_id": 58733027, "comment_id": 103756689, "body": "Thanks ,But Its not giving any hint that the ListView has been successfully dropped on the SwipeRefreshLayout that is  in the design section i.e  XML screen ,Prior running the emulator. Please help..!!"}, {"owner": {"reputation": 5169, "user_id": 3494639, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ecb9eb312b5a2fad53dacf42b14988df?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelStoddart", "link": "https://stackoverflow.com/users/3494639/michaelstoddart"}, "edited": false, "score": 0, "creation_date": 1573054424, "post_id": 58733027, "comment_id": 103757432, "body": "It wont, until you provide the listview with an adapter that contains data to display in the listview"}], "answers": [{"tags": [], "owner": {"reputation": 2903, "user_id": 665561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b52f6f0134befbb1db5dad5b0d69db90?s=128&d=identicon&r=PG", "display_name": "Shashank Degloorkar", "link": "https://stackoverflow.com/users/665561/shashank-degloorkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573054139, "creation_date": 1573054139, "answer_id": 58733548, "question_id": 58733027, "link": "https://stackoverflow.com/questions/58733027/listview-is-not-view-on-swiperefreshlayout/58733548#58733548", "title": "ListView is not view on SwipeRefreshLayout", "body": "<p>If you want data to be prepopulated and just show the hard coded data you can use\ne.g. </p>\n\n<blockquote>\n  <p>android:entries=\"@array/countries\"</p>\n</blockquote>\n\n<pre><code>  &lt;string-array name=\"countries\"&gt;\n        &lt;item&gt; India&lt;/item&gt;\n        &lt;item&gt; USA&lt;/item&gt;\n        &lt;item&gt; Germany&lt;/item&gt;\n &lt;/string-array&gt;\n</code></pre>\n\n<p>If not you will have to write java code and once the app is launched then only the data will show up on the emulator screen. Layout Editor just reads through your layout files.</p>\n"}], "owner": {"reputation": 1, "user_id": 12331466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MRvY0Bd1b7o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYdaxerj1N_8K1cBYOs8pXTKTd7w/photo.jpg?sz=128", "display_name": "Poojah", "link": "https://stackoverflow.com/users/12331466/poojah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573054139, "creation_date": 1573052569, "question_id": 58733027, "link": "https://stackoverflow.com/questions/58733027/listview-is-not-view-on-swiperefreshlayout", "title": "ListView is not view on SwipeRefreshLayout", "body": "<p>My ListView in unable to get showed on SwipeRefreshLayout in Android.</p>\n\n<pre><code>&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/swipe_refresh\"&gt;\n    &lt;ListView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;&lt;/ListView&gt;\n&lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n</code></pre>\n\n<p>The XML Screen is BLANK as nothing is showing.I have not written any code for the java file .</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12332716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCmW0BDp0rCUyc8wnDDKJ-Kc-tsCBj6E2L-XmjQcA=k-s128", "display_name": "sxpz23", "link": "https://stackoverflow.com/users/12332716/sxpz23"}, "edited": false, "score": 0, "creation_date": 1573158341, "post_id": 58733115, "comment_id": 103800521, "body": "i know... i did that already but it didn&#39;t work.... that&#39;s i posted my first question here ~"}], "tags": [], "owner": {"reputation": 2903, "user_id": 665561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b52f6f0134befbb1db5dad5b0d69db90?s=128&d=identicon&r=PG", "display_name": "Shashank Degloorkar", "link": "https://stackoverflow.com/users/665561/shashank-degloorkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573052840, "creation_date": 1573052840, "answer_id": 58733115, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat/58733115#58733115", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<p>Just paste your java code in Android Studio .kt file, It will suggest you to convert it into Kotlin. There you get 99% of the kotlin code. Then change some missing elements.</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 5941456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v2T1m_etUzQ/AAAAAAAAAAI/AAAAAAAAE_o/X-9wuf3ZOlQ/photo.jpg?sz=128", "display_name": "Royi", "link": "https://stackoverflow.com/users/5941456/royi"}, "is_accepted": true, "score": 0, "last_activity_date": 1573053556, "creation_date": 1573053556, "answer_id": 58733372, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat/58733372#58733372", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<p>My solution is:</p>\n\n<pre><code>var fis = File(FILE_NAME).inputStream()                             \n\n    try {\n        fis = openFileInput(FILE_NAME)\n        val isr = InputStreamReader(fis)\n        val br = BufferedReader(isr)\n        val sb = StringBuilder()\n        var lines = br.readLines()\n\n        for (line in lines) {                                       \n            sb.append(line).append(\"\\n\")\n        }\n\n        mEditText?.setText(sb.toString())                           \n\n    } catch (e : FileNotFoundException) {\n        e.printStackTrace()\n    } catch (e : IOException) {\n        e.printStackTrace()\n    } finally {\n        try {\n            fis.close()\n        } catch (e : IOException) {\n            e.printStackTrace()\n        }\n\n    }\n</code></pre>\n\n<p>It looks like you have infinite loop there so I change it to for each loop to read all the lines from the InputStream</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 7403507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhBUu.jpg?s=128&g=1", "display_name": "ndelanou", "link": "https://stackoverflow.com/users/7403507/ndelanou"}, "is_accepted": false, "score": 0, "last_activity_date": 1573056082, "creation_date": 1573056082, "answer_id": 58734142, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat/58734142#58734142", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<p>Here is my solution:</p>\n\n<pre><code>fun load(v: View?) {\n    var fis: FileInputStream? = null\n\n    try {\n        fis = openFileInput(FILE_NAME)\n        val isr = InputStreamReader(fis)\n        val br = BufferedReader(isr)\n        val lines = br.readLines()\n        val output = lines.joinToString(\"\\n\")\n\n        mEditText.setText(output)\n    } catch (e: FileNotFoundException) {\n        e.printStackTrace()\n    } catch (e: IOException) {\n        e.printStackTrace()\n    } finally {\n        try {\n            fis?.close()\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1573057732, "creation_date": 1573057732, "answer_id": 58734621, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat/58734621#58734621", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<pre><code>fun void load(v: View) {\n    try {\n        openFileInput(FILE_NAME).use { fis -&gt;\n            val br = BufferedReader(InputStreamReader(fis))\n\n            var text: String? = null\n\n            while(true) {\n                text = br.readLine() ?: break\n                sb.append(text).append(\"\\n\")\n            }\n\n            editText.setText(sb.toString())\n        }\n    } catch(e: Exception) {\n        e.printStackTrace()\n    }\n}\n</code></pre>\n\n<p>This should be reasonably equivalent. Please note that the <code>if((text = br.readLine() != null) {</code> cannot be written like that directly in Kotlin, however you can replace it with a <code>while(true) { break;</code>.</p>\n\n<p>Manual <code>close()</code> is not needed if you are using <code>.use {</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 30326, "user_id": 384306, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZED8P.jpg?s=128&g=1", "display_name": "Nathan Schwermann", "link": "https://stackoverflow.com/users/384306/nathan-schwermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1573058485, "creation_date": 1573058485, "answer_id": 58734836, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat/58734836#58734836", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<pre><code>File(FILE_NAME).readLines().fold(StringBuilder()){ builder, next -&gt;\n   builder.appendln(next)\n}.also {\n   mEditText.setText(it.toString())\n}\n\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12332716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCmW0BDp0rCUyc8wnDDKJ-Kc-tsCBj6E2L-XmjQcA=k-s128", "display_name": "sxpz23", "link": "https://stackoverflow.com/users/12332716/sxpz23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 58733372, "answer_count": 5, "score": 0, "last_activity_date": 1573058485, "creation_date": 1573052324, "last_edit_date": 1573057251, "question_id": 58732940, "link": "https://stackoverflow.com/questions/58732940/how-to-convert-this-code-of-java-to-kotlin-for-android-studio-for-retrieving-dat", "title": "How to convert this code of Java to Kotlin for Android Studio for retrieving data of a file?", "body": "<p>I have searched over how to retrieve a file in Kotlin, and I found this code in Java. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void load(View v) {\n    FileInputStream fis = null;\n\n    try {\n        fis = openFileInput(FILE_NAME);\n        InputStreamReader isr = new InputStreamReader(fis);\n        BufferedReader br = new BufferedReader(isr);\n        StringBuilder sb = new StringBuilder();\n        String text;\n\n        while ((text = br.readLine()) != null) {\n            sb.append(text).append(\"\\n\");\n        }\n\n        mEditText.setText(sb.toString());\n\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        if (fis != null) {\n            try {\n                fis.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>How to write this in Kotlin Language...?\nSo far by myself, I have tried to convert it in Kotlin but there are still some errors on some lines (denoted by ). Please help me in solving these errors. </p>\n\n<pre><code>var fis = File(FILE_NAME).inputStream     //&lt;ror&gt;Unresolved reference File \ntry {\n    fis = openFileInput(FILE_NAME)\n    var isr = InputStreamReader(fis)\n    val br = BufferedReader(isr)\n    val sb = StringBuilder()\n    var text:List&lt;String&gt; = br.readLines()\n\n    while ((text) != null) {                //&lt;ror&gt;\n        sb.append(text).append(\"\\n\")\n    }\n\n    mEditText?.text(sb.toString())          //&lt;ror&gt;\n\n} catch (e : FileNotFoundException) {\n    e.printStackTrace()\n} catch (e : IOException) {\n    e.printStackTrace()\n} finally {\n    if (fis != null) {\n        try {\n            fis.close()\n        } catch (e : IOException) {\n            e.printStackTrace()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "spring-cloud-stream", "spring-cloud-function", "spring-cloud-stream-binder-kafka"], "answers": [{"comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1573054529, "post_id": 58733614, "comment_id": 103757485, "body": "Thanks Soby, that explains it. Have logged an issue here: <a href=\"https://github.com/spring-cloud/spring-cloud-stream-binder-kafka/issues/795\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-stream-binder-kafka/iss&zwnj;&#8203;ues/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3219, "user_id": 2070861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08e6680212d29999e9fe53f1992470e7?s=128&d=identicon&r=PG", "display_name": "sobychacko", "link": "https://stackoverflow.com/users/2070861/sobychacko"}, "is_accepted": true, "score": 2, "last_activity_date": 1573054327, "creation_date": 1573054327, "answer_id": 58733614, "question_id": 58732683, "link": "https://stackoverflow.com/questions/58732683/spring-cloud-stream-function-kotlin-lambdas-without-the-use-of-java-function-bi/58733614#58733614", "title": "Spring Cloud Stream/Function: Kotlin lambdas without the use of Java Function/BiFunction", "body": "<p>Currently (in 3.0), the Kafka Streams binding functional support requires <code>java.util.function</code> types. It does not work with standard functions in Kotlin yet (or we haven't validated anything in that regard). We are planning to look into this as a 3.1 feature. If you don't mind, could you create a new issue <a href=\"https://github.com/spring-cloud/spring-cloud-stream-binder-kafka/issues\" rel=\"nofollow noreferrer\">here</a>? </p>\n"}], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 58733614, "answer_count": 1, "score": 0, "last_activity_date": 1573054327, "creation_date": 1573051610, "question_id": 58732683, "link": "https://stackoverflow.com/questions/58732683/spring-cloud-stream-function-kotlin-lambdas-without-the-use-of-java-function-bi", "title": "Spring Cloud Stream/Function: Kotlin lambdas without the use of Java Function/BiFunction", "body": "<p>I have a Kafka stream processing application written using Spring Boot, using <code>spring-cloud-function</code> and <code>spring-cloud-stream-binder-kafka-streams</code>. The method which processes a couple of streams is annotated with <code>@Bean</code>, so that it should be picked up by <code>spring-cloud-function</code> (rather than using <code>@StreamListener</code>). When this method returns a <code>BiFunction</code> it works. But when I try it as a plain Kotlin lambda it's not picked up by Spring Boot: the app starts then immediately ends as it finds no functions to run.</p>\n\n<p>From what I can see in <a href=\"https://cloud.spring.io/spring-cloud-function/reference/html/spring-cloud-function.html#_kotlin_lambda_support\" rel=\"nofollow noreferrer\">the documentation</a>, this should work.</p>\n\n<p>Here's the declaration that <em>does</em> work:</p>\n\n<pre><code>@Bean\nfun process():\n        BiFunction&lt;KStream&lt;String, Foo&gt;, GlobalKTable&lt;String, Bar&gt;, KStream&lt;String, Baz&gt;&gt; =\n    BiFunction { foo, bar -&gt;\n        ...\n</code></pre>\n\n<p>And here's the declaration that does <em>not</em> work:</p>\n\n<pre><code>@Bean\nfun process():\n        (foo: KStream&lt;String, Foo&gt;, bar: GlobalKTable&lt;String, Bar&gt;) -&gt; KStream&lt;String, Baz&gt; = \n    { foo, bar -&gt;\n            ...\n</code></pre>\n\n<p>(The content of the method is the same in both cases.)</p>\n\n<p>As per the documentation, I have added the <code>spring-cloud-function-kotlin</code> module to the classpath by adding this to <code>build.gradle.kts</code>:</p>\n\n<pre><code>implementation(\"org.springframework.cloud:spring-cloud-function-kotlin\")\n</code></pre>\n\n<p>The version of Spring Cloud Stream is <code>Hoxton.RC1</code>.</p>\n\n<p>Is there anything else I need to do to get the function picked up?  Or do I need to use <code>BiFunction</code> in this case?</p>\n"}, {"tags": ["android-fragments", "kotlin", "android-actionbar"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 8962522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317301fd37ac57315e58cd740a331eb?s=128&d=identicon&r=PG&f=1", "display_name": "iCV", "link": "https://stackoverflow.com/users/8962522/icv"}, "is_accepted": true, "score": 0, "last_activity_date": 1573068704, "creation_date": 1573068704, "answer_id": 58737306, "question_id": 58731850, "link": "https://stackoverflow.com/questions/58731850/kotlin-custom-actionbar-title-sometimes-shows-wrong-title-for-split-second/58737306#58737306", "title": "Kotlin custom actionbar title sometimes shows wrong title for split second", "body": "<p>Turned out I could just edit the label in navigation.xml to save a lot of trouble</p>\n"}], "owner": {"reputation": 387, "user_id": 8962522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317301fd37ac57315e58cd740a331eb?s=128&d=identicon&r=PG&f=1", "display_name": "iCV", "link": "https://stackoverflow.com/users/8962522/icv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58737306, "answer_count": 1, "score": 0, "last_activity_date": 1573068704, "creation_date": 1573048758, "question_id": 58731850, "link": "https://stackoverflow.com/questions/58731850/kotlin-custom-actionbar-title-sometimes-shows-wrong-title-for-split-second", "title": "Kotlin custom actionbar title sometimes shows wrong title for split second", "body": "<p>I've created custom actionbar titles for each fragment in my kotlin app. However sometimes it shows the fragmentname for a split second before showing the custom title.</p>\n\n<p>This is the code I have in each fragment:</p>\n\n<pre><code>    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val binding = inflate&lt;FragmentHomeBinding&gt;(\n            inflater,\n            R.layout.fragment_home, container, false\n        )\n        ////\n        //some binding\n        ////\n\n        return binding.root\n    }\n\n override fun onAttach(context: Context) {\n        super.onAttach(context)\n        (activity as AppCompatActivity).supportActionBar?.title = \"Custom\"\n    }\n\n    override fun onResume() {\n        super.onResume()\n        (activity as AppCompatActivity).supportActionBar?.title = \"Custom\"\n    }\n</code></pre>\n"}, {"tags": ["spring", "kotlin", "spring-el"], "comments": [{"owner": {"reputation": 17779, "user_id": 1303324, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ArFzi.jpg?s=128&g=1", "display_name": "Krzysztof At\u0142asik", "link": "https://stackoverflow.com/users/1303324/krzysztof-at%c5%82asik"}, "edited": false, "score": 0, "creation_date": 1573049594, "post_id": 58731580, "comment_id": 103754477, "body": "Can you try adding <code>@JvmField</code> annotation to <code>CONST</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "is_accepted": false, "score": 1, "last_activity_date": 1573049466, "creation_date": 1573049466, "answer_id": 58732036, "question_id": 58731580, "link": "https://stackoverflow.com/questions/58731580/how-to-use-a-kotlin-constant-in-spring-spel-expression/58732036#58732036", "title": "How to use a kotlin constant in spring spel expression", "body": "<p>You need to use <code>#</code> instead of <code>$</code>. <code>$</code> is a simple property placeholder.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11120652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nT0tr0QS41k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBQd6pE1cF3RjVBCWTen4gvEsuuw/mo/photo.jpg?sz=128", "display_name": "Nussbam", "link": "https://stackoverflow.com/users/11120652/nussbam"}, "is_accepted": false, "score": 0, "last_activity_date": 1573224855, "creation_date": 1573224855, "answer_id": 58768888, "question_id": 58731580, "link": "https://stackoverflow.com/questions/58731580/how-to-use-a-kotlin-constant-in-spring-spel-expression/58768888#58768888", "title": "How to use a kotlin constant in spring spel expression", "body": "<p>I was thinking way too far:</p>\n\n<p>In the end I just used </p>\n\n<pre><code>@KafkaListener(topics = \"${package.name.Class.CONST}\"\n</code></pre>\n\n<p>and it works like a charm</p>\n"}], "owner": {"reputation": 21, "user_id": 11120652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nT0tr0QS41k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBQd6pE1cF3RjVBCWTen4gvEsuuw/mo/photo.jpg?sz=128", "display_name": "Nussbam", "link": "https://stackoverflow.com/users/11120652/nussbam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573224855, "creation_date": 1573047800, "last_edit_date": 1573049449, "question_id": 58731580, "link": "https://stackoverflow.com/questions/58731580/how-to-use-a-kotlin-constant-in-spring-spel-expression", "title": "How to use a kotlin constant in spring spel expression", "body": "<p>I try to create a KafkaListener in Kotlin with</p>\n\n<p><code>@KafkaListener(topics = \"&lt;TOPIC_NAME&gt;\")</code></p>\n\n<p>For  I want to use a kotlin constant</p>\n\n<p>I tried to access it with:</p>\n\n<p><code>@KafkaListener(topics = \"\\${T(package.name.Class).CONST}\")</code></p>\n\n<p>kotlin class:</p>\n\n<pre><code>package package.name\n\nclass Class{\n  companion object{\n    const val CONST = \"desired-topic-name\"\n  }\n}\n</code></pre>\n\n<p>I'm getting a \"Could not resolve placeholder\" error message but would expect to use the constant</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 1559, "user_id": 5285588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/794335677331084/picture?type=large", "display_name": "Arka Prava Basu", "link": "https://stackoverflow.com/users/5285588/arka-prava-basu"}, "edited": false, "score": 0, "creation_date": 1573047573, "post_id": 58731415, "comment_id": 103753423, "body": "Are u using the correct <code>onCreate()</code> callback?"}, {"owner": {"reputation": 1559, "user_id": 5285588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/794335677331084/picture?type=large", "display_name": "Arka Prava Basu", "link": "https://stackoverflow.com/users/5285588/arka-prava-basu"}, "edited": false, "score": 0, "creation_date": 1573047620, "post_id": 58731415, "comment_id": 103753450, "body": "Just use <code>onCreate(Bundle savedInstanceState)</code> and try"}, {"owner": {"reputation": 541, "user_id": 6938847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZ2nXwws6-I/AAAAAAAAAAI/AAAAAAAAACw/Vq3u7RPYx-E/photo.jpg?sz=128", "display_name": "Chetan Gupta", "link": "https://stackoverflow.com/users/6938847/chetan-gupta"}, "edited": false, "score": 0, "creation_date": 1607251083, "post_id": 58731415, "comment_id": 115208608, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/62407823/how-using-viewbinding-with-an-abstract-base-class\">How using ViewBinding with an abstract base class</a>"}, {"owner": {"reputation": 541, "user_id": 6938847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZ2nXwws6-I/AAAAAAAAAAI/AAAAAAAAACw/Vq3u7RPYx-E/photo.jpg?sz=128", "display_name": "Chetan Gupta", "link": "https://stackoverflow.com/users/6938847/chetan-gupta"}, "edited": false, "score": 0, "creation_date": 1607251209, "post_id": 58731415, "comment_id": 115208643, "body": "Hi I have written a blog post completely explaining view binding and have written <code>baseclass for activity and fragment</code> checkout \ud83d\udc49<a href=\"https://chetangupta.net/viewbinding/\" rel=\"nofollow noreferrer\">Androidbites|ViewBinding</a>"}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 2320459, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/pzduZ.jpg?s=128&g=1", "display_name": "Hampel El\u0151d", "link": "https://stackoverflow.com/users/2320459/hampel-el%c5%91d"}, "edited": false, "score": 1, "creation_date": 1589176849, "post_id": 60793411, "comment_id": 109178027, "body": "Pay attention to the question. ViewBinding is not the same as DataBinding!"}], "tags": [], "owner": {"reputation": 39, "user_id": 6492469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJ4Rc.jpg?s=128&g=1", "display_name": "Parth Gupta", "link": "https://stackoverflow.com/users/6492469/parth-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1584825693, "creation_date": 1584825693, "answer_id": 60793411, "question_id": 58731415, "link": "https://stackoverflow.com/questions/58731415/android-view-binding-how-implement-binding-in-basic-activity-fragment/60793411#60793411", "title": "Android view binding. How implement binding in Basic Activity/Fragment?", "body": "<p>You can have Binding Logic in Basic activity </p>\n\n<p>you can use DataBindingUtil.setContentView() and have an abstract function to get layout id.</p>\n\n<pre><code>protected T binding;\n\n@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = DataBindingUtil.setContentView(this, getLayoutId())\n\n}\n\npublic abstract int getLayoutId();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 4300071, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-55TwdCEOKvg/AAAAAAAAAAI/AAAAAAAAAp4/A79tqhBn1hs/photo.jpg?sz=128", "display_name": "Umut ADALI", "link": "https://stackoverflow.com/users/4300071/umut-adali"}, "is_accepted": false, "score": 5, "last_activity_date": 1606051291, "last_edit_date": 1606051291, "creation_date": 1586387353, "answer_id": 61111452, "question_id": 58731415, "link": "https://stackoverflow.com/questions/58731415/android-view-binding-how-implement-binding-in-basic-activity-fragment/61111452#61111452", "title": "Android view binding. How implement binding in Basic Activity/Fragment?", "body": "<p>You can only do it with the abstract method I think. I use a similar thing like the below.</p>\n<pre><code>abstract class BaseActivity&lt;V : ViewBinding&gt; : AppCompatActivity() {\n    protected open var binding: V? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        makeFullScreen()\n        setContentView(getInflatedLayout(layoutInflater))\n        setup()\n        SharePreferenceUtil.setListenerFlutter(this)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        this.binding = null\n        SharePreferenceUtil.removeListenerFlutter(this)\n    }\n\n\n    //internal functions\n    private fun getInflatedLayout(inflater: LayoutInflater): View {\n        this.binding = setBinding(inflater)\n\n\n        return binding?.root\n                ?: error(&quot;Please add your inflated binding class instance&quot;)\n    }\n\n    //abstract functions\n    abstract fun setBinding(layoutInflater: LayoutInflater): V\n\n    abstract fun setup()\n}\n</code></pre>\n<p>and if you want the fragment abstract you can do like the below</p>\n<pre><code>abstract class BaseFragment&lt;T : ViewBinding, A : Any&gt; : Fragment() {\n    protected var handler: A? = null //It's base activity\n\n    protected open var binding: T? = null\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        @Suppress(&quot;UNCHECKED_CAST&quot;)\n        this.handler = this.activity as? A\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        this.binding = this.setBinding(inflater,container)\n        return binding!!.root\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        binding = null\n    }\n    abstract fun setBinding(inflater: LayoutInflater, container: ViewGroup?): T\n}\n</code></pre>\n<p>and then you set the binding in your fragment;</p>\n<pre><code>override fun setBinding(inflater: LayoutInflater, container: ViewGroup?): ActivityMainBinding = ActivityMainBinding.inflate(inflater, container, false)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 12324816, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAkBji7fMKVpQiPR91TMRSetDLt-jnEdHRdHGcO=k-s128", "display_name": "Hayo_Ghuka", "link": "https://stackoverflow.com/users/12324816/hayo-ghuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1606051291, "creation_date": 1573047287, "question_id": 58731415, "link": "https://stackoverflow.com/questions/58731415/android-view-binding-how-implement-binding-in-basic-activity-fragment", "title": "Android view binding. How implement binding in Basic Activity/Fragment?", "body": "<p>I am working on view binding. Kindly guide me is it possible to derive the binding logic in basic activity and how to create that? Thanks. I am trying to do this, but this code does not compile.</p>\n\n<pre><code>public class BasicActivity&lt;\u0422 extends ViewBinding&gt; extends AppCompatActivity {\n\n    private \u0422 binding;\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {\n        super.onCreate(savedInstanceState, persistentState);\n        binding = T.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-viewmodel", "android-navigation-graph"], "comments": [{"owner": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1573045185, "post_id": 58730703, "comment_id": 103751962, "body": "And why do you expect your viewModel&#39;s onCleared() with the onDestroyView() of the fragment?"}, {"owner": {"reputation": 937, "user_id": 2303799, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/70d24b3d910a3b0704cf9ea68200e69d?s=128&d=identicon&r=PG", "display_name": "Sharas", "link": "https://stackoverflow.com/users/2303799/sharas"}, "reply_to_user": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1573045221, "post_id": 58730703, "comment_id": 103751973, "body": "myViewModel lifecycle owner is the fragment."}, {"owner": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1573045331, "post_id": 58730703, "comment_id": 103752038, "body": "okay, but it hasn&#39;t been destroyed yet. Wait for the onDestroy() call of the fragment."}, {"owner": {"reputation": 937, "user_id": 2303799, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/70d24b3d910a3b0704cf9ea68200e69d?s=128&d=identicon&r=PG", "display_name": "Sharas", "link": "https://stackoverflow.com/users/2303799/sharas"}, "reply_to_user": {"reputation": 1150, "user_id": 2220318, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afa04c92f3bc554daf14fca2b0ab780a?s=128&d=identicon&r=PG", "display_name": "Rahul Shukla", "link": "https://stackoverflow.com/users/2220318/rahul-shukla"}, "edited": false, "score": 0, "creation_date": 1573045596, "post_id": 58730703, "comment_id": 103752176, "body": "I&#39;m not sure you are right, but anyway, it doesn&#39;t change the fact that the viewmodel onCleared is not called when I&#39;m navigating to another fragment but when I press the back button it does"}, {"owner": {"reputation": 4634, "user_id": 678448, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HVbqu.jpg?s=128&g=1", "display_name": "Thommy", "link": "https://stackoverflow.com/users/678448/thommy"}, "edited": false, "score": 0, "creation_date": 1573045886, "post_id": 58730703, "comment_id": 103752352, "body": "With backpressed the fragment is removed on the stack. With naviation to another fragment, the first one is still on the view stack and thus won&#39;t be destroyed unitl the device needs memory."}, {"owner": {"reputation": 109, "user_id": 9229521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3060ec8a11cd5054bed11ffae98c26b?s=128&d=identicon&r=PG&f=1", "display_name": "Kalpesh Kulye", "link": "https://stackoverflow.com/users/9229521/kalpesh-kulye"}, "edited": false, "score": 0, "creation_date": 1573046088, "post_id": 58730703, "comment_id": 103752463, "body": "when you navigate from one fragment to another your current fragment goes to backstack that means your view get destroy but instance of fragment remains and in case of back press your current fragment gets destroy. your viewmodel get destroy with <code>onDestroy()</code> method of fragment not with <code>onDestroyView()</code>"}], "owner": {"reputation": 937, "user_id": 2303799, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/70d24b3d910a3b0704cf9ea68200e69d?s=128&d=identicon&r=PG", "display_name": "Sharas", "link": "https://stackoverflow.com/users/2303799/sharas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573044951, "creation_date": 1573044951, "question_id": 58730703, "link": "https://stackoverflow.com/questions/58730703/viewmodel-is-cleared-on-on-back-press", "title": "ViewModel is cleared on on back press", "body": "<p>I'm using navigation graph to navigate between fragments and I noticed that my viewModel is cleared (onCleared) only when I press the back button, but not when I navigating to another fragment using this code:</p>\n\n<pre><code>val action = MyFragmentDirections.actionMyFragmentToParentFragment()\n        val navController =  findNavController()\n        navController.navigate(action)\n</code></pre>\n\n<p>In the logs I see that the fragment onDestroyView() is called but the viewModel's onCleared() is not called.</p>\n\n<p>What am I'm missing?</p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-amqp", "kotlin-coroutines", "spring-rabbit"], "comments": [{"owner": {"reputation": 2805, "user_id": 7037695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-VBSyZ-n09Do/AAAAAAAAAAI/AAAAAAAAADI/zZd-wwa0QWc/photo.jpg?sz=128", "display_name": "Markus Appel", "link": "https://stackoverflow.com/users/7037695/markus-appel"}, "edited": false, "score": 0, "creation_date": 1573041867, "post_id": 58729661, "comment_id": 103750165, "body": "First, maybe try to change <code>e: MyEvent</code> to <code>e: Object</code>."}, {"owner": {"reputation": 28942, "user_id": 398441, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a8950160c2b3d7d0bf948d8c1f937e7f?s=128&d=identicon&r=PG", "display_name": "Johan", "link": "https://stackoverflow.com/users/398441/johan"}, "reply_to_user": {"reputation": 2805, "user_id": 7037695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-VBSyZ-n09Do/AAAAAAAAAAI/AAAAAAAAADI/zZd-wwa0QWc/photo.jpg?sz=128", "display_name": "Markus Appel", "link": "https://stackoverflow.com/users/7037695/markus-appel"}, "edited": false, "score": 0, "creation_date": 1573042296, "post_id": 58729661, "comment_id": 103750416, "body": "If I remove the suspend keyword everything works as expected so I don&#39;t think that&#39;ll help?"}, {"owner": {"reputation": 129248, "user_id": 1240763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMgXO.png?s=128&g=1", "display_name": "Gary Russell", "link": "https://stackoverflow.com/users/1240763/gary-russell"}, "edited": false, "score": 0, "creation_date": 1573049321, "post_id": 58729661, "comment_id": 103754330, "body": "Kotlin coroutines are not supported for rabbit listeners. Exactly what are you trying to achieve with this code?"}, {"owner": {"reputation": 91346, "user_id": 2756547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=128&d=identicon&r=PG", "display_name": "Artem Bilan", "link": "https://stackoverflow.com/users/2756547/artem-bilan"}, "edited": false, "score": 0, "creation_date": 1573050560, "post_id": 58729661, "comment_id": 103755069, "body": "Rabbit listener is an async by its nature already: that method is called from a thread pool in the listener container whenever a new message is pulled from the queue. What goal you would like to achieve with that <code>suspend</code> ?"}, {"owner": {"reputation": 28942, "user_id": 398441, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a8950160c2b3d7d0bf948d8c1f937e7f?s=128&d=identicon&r=PG", "display_name": "Johan", "link": "https://stackoverflow.com/users/398441/johan"}, "edited": false, "score": 0, "creation_date": 1573124121, "post_id": 58729661, "comment_id": 103782947, "body": "I&#39;ve probably misunderstood something so thanks for all comments. In my mind &quot;suspend&quot; is an alternative to the reactor data types such as &quot;Mono&quot;. I.e. to answer &quot;what I want to achieve&quot; is to say that I want to be able to &quot;achieve the same things I can achieve with a Mono&quot;. For example making concurrent requests to a web API or writing to a database in a non-blocking fashion (in this case using coroutines instead of the reactor types) as a side-effect after having received &quot;MyEvent&quot;."}, {"owner": {"reputation": 490, "user_id": 4266826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tq1ql.png?s=128&g=1", "display_name": "Drew Nutter", "link": "https://stackoverflow.com/users/4266826/drew-nutter"}, "edited": false, "score": 1, "creation_date": 1581545785, "post_id": 58729661, "comment_id": 106475558, "body": "The problem is that a thread will be dedicated to this method until it completes. Coroutines are not just a way to be async. They&#39;re a way to be async without the overhead of a dedicated thread. We can use runBlocking here and then at least use coroutines within the method, but there&#39;s still one dedicated thread which should not be necessary. This has already been figured out for rest with webflux which integrates seamlessly with coroutines and won&#39;t unnecessarily block a thread. I would love to see the same with rabbit listeners."}], "owner": {"reputation": 28942, "user_id": 398441, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a8950160c2b3d7d0bf948d8c1f937e7f?s=128&d=identicon&r=PG", "display_name": "Johan", "link": "https://stackoverflow.com/users/398441/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573042273, "creation_date": 1573041484, "last_edit_date": 1573042273, "question_id": 58729661, "link": "https://stackoverflow.com/questions/58729661/how-to-use-kotlin-coroutines-for-consuming-messages-with-spring-amqp", "title": "How to use Kotlin coroutines for consuming messages with Spring AMQP?", "body": "<p>I've <a href=\"https://spring.io/blog/2019/04/12/going-reactive-with-spring-coroutines-and-kotlin-flow\" rel=\"nofollow noreferrer\">read</a> that Spring Boot has support for Kotlin Coroutines since version 2.2.0. But when I try this with <a href=\"https://spring.io/projects/spring-amqp\" rel=\"nofollow noreferrer\">spring amqp</a> (version 2.2.0) like this:</p>\n\n<pre><code>@RabbitListener(...)\n@Component\nclass EventConsumer {\n\n    @RabbitHandler\n    suspend fun consumeEvent(e: MyEvent) {\n        ...\n    }\n}\n</code></pre>\n\n<p>and then publish an event:</p>\n\n<pre><code>rabbitTemplate.convertAndSend(\"my-exchange\", \"my-routing-key\", MyEvent(\"data\"))\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method could not be invoked with the incoming message\nEndpoint handler details:\nMethod [public java.lang.Object com.x.y.EventConsumer(com.x.y.MyEvent,kotlin.coroutines.Continuation&lt;? super kotlin.Unit&gt;)]\nBean [com.x.y.EventConsumer@1fce0403]\n    at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:214) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:143) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:132) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1569) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1488) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1476) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1467) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1411) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.DirectMessageListenerContainer$SimpleConsumer.callExecuteListener(DirectMessageListenerContainer.java:1035) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n    at org.springframework.amqp.rabbit.listener.DirectMessageListenerContainer$SimpleConsumer.handleDelivery(DirectMessageListenerContainer.java:995) ~[spring-rabbit-2.2.0.RELEASE.jar:2.2.0.RELEASE]\n</code></pre>\n\n<p>If I remove the <code>suspend</code> keyword then everything works as expected. </p>\n\n<p>Do I need some special configuration for Spring AMQP to work with Kotlin Coroutines or is there no support for this yet?</p>\n"}, {"tags": ["android", "kotlin", "inferred-type"], "answers": [{"tags": [], "owner": {"reputation": 1004, "user_id": 2912553, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fecfc1d6a86c9be20722e1c6e0d427a?s=128&d=identicon&r=PG&f=1", "display_name": "momt99", "link": "https://stackoverflow.com/users/2912553/momt99"}, "is_accepted": false, "score": 0, "last_activity_date": 1573046306, "last_edit_date": 1573046306, "creation_date": 1573045365, "answer_id": 58730831, "question_id": 58729282, "link": "https://stackoverflow.com/questions/58729282/type-mismatch-inferred-type-is-any-but-listsportnewsresponse-was-expected/58730831#58730831", "title": "Type mismatch: inferred type is Any but List&lt;SportNewsResponse&gt;? was expected", "body": "<p>Take a look at your <code>Success</code> class. You're defining <code>val data</code> with generic type <code>T</code> which is upper bounded by <code>Any</code>. And in the <code>when</code> block, while you want to check whether it is an instance of <code>UseCaseResult.Success</code> or not, you are using a star projection which causes the compiler to infer the result with the upper bound: <code>UseCaseResult.Success&lt;Any&gt;</code>. So the type of <code>result.data</code> will be inferred as <code>Any</code>.</p>\n\n<p>The solution would be:</p>\n\n<ul>\n<li><p>If <code>UseCaseResult.Success</code> only has a list typed data, you should omit the generic type (currently generic type in your definition of <code>Success</code> class makes no sense) :</p>\n\n<pre><code>class Success(val data: List&lt;SportNewsResponse&gt;) : UseCaseResult&lt;List&lt;SportNewsResponse&gt;&gt;()\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>class Success&lt;out T: Any&gt;(val data: List&lt;T&gt;) : UseCaseResult&lt;List&lt;T&gt;&gt;()\n</code></pre></li>\n<li><p>Or you can simply change the when clause to this:</p>\n\n<pre><code>is UseCaseResult.Success&lt;List&lt;SportNewsResponse&gt;&gt; -&gt; {\n                    sportList.value = result.data\n                }\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11955854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBQYMhRfDP1Tx8nRfsaWAeA3Vo2e9vVEW28cZJflg=k-s128", "display_name": "rm93", "link": "https://stackoverflow.com/users/11955854/rm93"}, "is_accepted": false, "score": 3, "last_activity_date": 1610210008, "last_edit_date": 1610210008, "creation_date": 1610209684, "answer_id": 65644949, "question_id": 58729282, "link": "https://stackoverflow.com/questions/58729282/type-mismatch-inferred-type-is-any-but-listsportnewsresponse-was-expected/65644949#65644949", "title": "Type mismatch: inferred type is Any but List&lt;SportNewsResponse&gt;? was expected", "body": "<p>Had the same problem, I cleared the build and then built it one more time and it worked.</p>\n"}], "owner": {"reputation": 355, "user_id": 12183825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa12d59d98a7ab4fa6d9540625389d35?s=128&d=identicon&r=PG&f=1", "display_name": "sashabeliy", "link": "https://stackoverflow.com/users/12183825/sashabeliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2904, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1610210008, "creation_date": 1573040165, "question_id": 58729282, "link": "https://stackoverflow.com/questions/58729282/type-mismatch-inferred-type-is-any-but-listsportnewsresponse-was-expected", "title": "Type mismatch: inferred type is Any but List&lt;SportNewsResponse&gt;? was expected", "body": "<p>I am developing news app and I am getting following error in my MainViewModel.kt class\n Type mismatch: inferred type is Any but List? was expected</p>\n\n<p>below My MainViewModel.kt</p>\n\n<pre><code>class MainViewModel(\n    private val sportNewsInterface: SportNewsInterface\n\n) : ViewModel(), CoroutineScope {\n    // Coroutine's background job\n    private val job = Job()\n    // Define default thread for Coroutine as Main and add job\n    override val coroutineContext: CoroutineContext = Dispatchers.Main + job\n\n    private val showLoading = MutableLiveData&lt;Boolean&gt;()\n    private val sportList = MutableLiveData &lt;List&lt;SportNewsResponse&gt;&gt;()\n    val showError = SingleLiveEvent&lt;String&gt;()\n\n    fun loadNews() {\n        // Show progressBar during the operation on the MAIN (default) thread\n        showLoading.value = true\n        // launch the Coroutine\n        launch {\n            // Switching from MAIN to IO thread for API operation\n            // Update our data list with the new one from API\n            val result = withContext(Dispatchers.IO) { sportNewsInterface.getNews()\n            }\n            // Hide progressBar once the operation is done on the MAIN (default) thread\n            showLoading.value = false\n            when (result) {\n\n\n                is UseCaseResult.Success&lt;*&gt; -&gt; {\n                    sportList.value = result.data\n                }\n                is UseCaseResult.Error -&gt; showError.value = result.exception.message\n                 }\n                }\n            }\n\n\n\n    override fun onCleared() {\n        super.onCleared()\n        // Clear our job when the linked activity is destroyed to avoid memory leaks\n        job.cancel()\n    }\n}\n</code></pre>\n\n<p>below UserCaseResult.kt</p>\n\n<pre><code>sealed class UseCaseResult&lt;out T : Any&gt; {\n    class Success&lt;out T : Any&gt;(val data: T) : UseCaseResult&lt;List&lt;SportNewsResponse&gt;&gt;()\n\n    class Error(val exception: Throwable) : UseCaseResult&lt;Nothing&gt;()\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "java-8", "interface", "default-method"], "comments": [{"owner": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 0, "creation_date": 1573040197, "post_id": 58729265, "comment_id": 103749254, "body": "if you already implement it in the class, why add it as a default method? that makes no sense."}, {"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1573040277, "post_id": 58729265, "comment_id": 103749289, "body": "There is no <code>default</code> keyword in Kotlin, you can just provide a method body which will be the default then."}, {"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 0, "creation_date": 1573040285, "post_id": 58729265, "comment_id": 103749294, "body": "<code>default</code> methods are meant to be <i>implemented</i> within the interface..which further could be overridden though."}, {"owner": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "reply_to_user": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 0, "creation_date": 1573042371, "post_id": 58729265, "comment_id": 103750449, "body": "@Naman yes, but not just like that. They are not really meant to add to new interfaces, they are meant to add new functionalities to old interfaces, without breaking backwards compatibility."}], "answers": [{"tags": [], "owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "is_accepted": false, "score": 1, "last_activity_date": 1573090015, "last_edit_date": 1573090015, "creation_date": 1573040845, "answer_id": 58729465, "question_id": 58729265, "link": "https://stackoverflow.com/questions/58729265/how-to-use-java-8-feature-of-default-method-in-interface-written-in-kotlin/58729465#58729465", "title": "How to use Java 8 feature of default method in interface written in Kotlin", "body": "<p>As long as there are other classes than <code>A</code> implementing <code>B</code>, this may make sense. Otherwise you either don't need a default implementation or you don't have to implement that method in the implementing class.</p>\n\n<p>However, you can do it like this:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface B {\n    fun optional() { print(\"optional\") }\n}\n\nclass A implements B {\n    override fun optional() { print(\"B's optional\") }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 835, "user_id": 3094367, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8ff0a284f501770fbb7241d35db6ffe8?s=128&d=identicon&r=PG&f=1", "display_name": "sharma.mahesh369", "link": "https://stackoverflow.com/users/3094367/sharma-mahesh369"}, "edited": false, "score": 0, "creation_date": 1581057836, "post_id": 58740840, "comment_id": 106309644, "body": "May I know where to add enable this JVM default methods:-Xjvm-default=enable"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 835, "user_id": 3094367, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8ff0a284f501770fbb7241d35db6ffe8?s=128&d=identicon&r=PG&f=1", "display_name": "sharma.mahesh369", "link": "https://stackoverflow.com/users/3094367/sharma-mahesh369"}, "edited": false, "score": 0, "creation_date": 1581149249, "post_id": 58740840, "comment_id": 106340721, "body": "@sharma.mahesh This is a command line option that you should pass to the compiler. In Gradle, this can be done by adding it to <code>kotlinOptions.freeCompilerArgs</code> list. For Android examples of specifying <code>kotlinOptions</code> see this question and its answers <a href=\"https://stackoverflow.com/questions/44141076/compilekotlin-block-in-build-gradle-file-throws-error-could-not-find-method-com\" title=\"compilekotlin block in build gradle file throws error could not find method com\">stackoverflow.com/questions/44141076/&hellip;</a>"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 4, "last_activity_date": 1573091442, "creation_date": 1573091442, "answer_id": 58740840, "question_id": 58729265, "link": "https://stackoverflow.com/questions/58729265/how-to-use-java-8-feature-of-default-method-in-interface-written-in-kotlin/58740840#58740840", "title": "How to use Java 8 feature of default method in interface written in Kotlin", "body": "<p>In Kotlin, interface methods with bodies are by default compiled as following:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// kotlin\ninterface B {\n    fun optional() { println(\"B optional body\") }\n}\n</code></pre>\n\n<p>is compiled roughly to:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public interface B {\n   void optional();\n   public static final class DefaultImpls {\n      public static void optional(B $this) {\n         System.out.println(\"B optional body\");\n      }\n   }\n}\n</code></pre>\n\n<p>Then, in Kotlin classes implementing this interface, the compiler adds an override for <code>optional</code> method automatically and calls <code>B.DefaultImpls.optional(this)</code> there.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public final class KA implements B {\n   public void optional() {\n      B.DefaultImpls.optional(this);\n   }\n}\n</code></pre>\n\n<p>But what if you want to implement this interface in Java and avoid having to override <code>optional</code> method and calling <code>B.DefaultImpls</code> manually? In that case you can use <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#default-methods-in-interfaces\" rel=\"nofollow noreferrer\">the experimental <code>@JvmDefault</code> feature</a>.</p>\n\n<p>First, you need to enable a couple of compiler options:</p>\n\n<ul>\n<li>JVM target bytecode version 1.8 or higher: <code>-jvm-target 1.8</code></li>\n<li>enable JVM default methods: <code>-Xjvm-default=enable</code> (see the other available option values by the link above)</li>\n</ul>\n\n<p>Then, you annotate <code>optional</code> method with <code>@JvmDefault</code> annotation:</p>\n\n<pre><code>// kotlin\ninterface B {\n    @JvmDefault\n    fun optional() { println(\"B optional body\") }\n}\n</code></pre>\n\n<p>and it becomes compiled to</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public interface B {\n   @JvmDefault\n   default void optional() {\n      System.out.println(\"B optional body\");\n   }\n}\n</code></pre>\n\n<p>And now the Java implementation of this interface becomes just:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public final class A implements B {\n}\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 1954725, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/424f39c5f2f228186959a60575f9c5a5?s=128&d=identicon&r=PG", "display_name": "Ajinkya S", "link": "https://stackoverflow.com/users/1954725/ajinkya-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573091578, "creation_date": 1573040133, "last_edit_date": 1573091578, "question_id": 58729265, "link": "https://stackoverflow.com/questions/58729265/how-to-use-java-8-feature-of-default-method-in-interface-written-in-kotlin", "title": "How to use Java 8 feature of default method in interface written in Kotlin", "body": "<p>I have a class A in java and interface B in Kotlin.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// kotlin\ninterface B {\n    fun optional()\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>// java\nclass A implements B {\n}\n</code></pre>\n\n<p>I want to write the default method (Java 8 feature) in Kotlin interface (B) and want to implement it in the class A.\nHow can I achieve it?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 4036390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubSLc.jpg?s=128&g=1", "display_name": "Oz Shabat", "link": "https://stackoverflow.com/users/4036390/oz-shabat"}, "is_accepted": false, "score": 1, "last_activity_date": 1578825812, "creation_date": 1578825812, "answer_id": 59702990, "question_id": 58727930, "link": "https://stackoverflow.com/questions/58727930/decompile-button-kotlin-to-java-in-android-studio-is-disappeared/59702990#59702990", "title": "Decompile button (kotlin to java) in Android Studio is disappeared?", "body": "<p>Go to Extensions and look for \"Java Bytecode Decompiler\".\nInstall it and do a complete restart to the Android Studio. Don't just close and open the project, restart the whole program.</p>\n\n<p>Than, when the Android Studio will pop open again, click on \"Search Everywhere\" (by clicking shift twice), look for \"Java Bytecode Decompiler\", and make sure it's turned into ON.</p>\n\n<p>That's it. Now the button should be visible.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 4656975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8261c993e579dde1c37f9f550bcb51ac?s=128&d=identicon&r=PG&f=1", "display_name": "pjwin", "link": "https://stackoverflow.com/users/4656975/pjwin"}, "is_accepted": false, "score": 2, "last_activity_date": 1578977551, "creation_date": 1578977551, "answer_id": 59727687, "question_id": 58727930, "link": "https://stackoverflow.com/questions/58727930/decompile-button-kotlin-to-java-in-android-studio-is-disappeared/59727687#59727687", "title": "Decompile button (kotlin to java) in Android Studio is disappeared?", "body": "<p>make sure you have this plugin enabled, should work after</p>\n\n<p><a href=\"https://i.stack.imgur.com/NVuD9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVuD9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 743, "user_id": 4341740, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/028470856b9167909282e874e67dbedc?s=128&d=identicon&r=PG&f=1", "display_name": "Stanly T", "link": "https://stackoverflow.com/users/4341740/stanly-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1578977551, "creation_date": 1573035832, "last_edit_date": 1573038713, "question_id": 58727930, "link": "https://stackoverflow.com/questions/58727930/decompile-button-kotlin-to-java-in-android-studio-is-disappeared", "title": "Decompile button (kotlin to java) in Android Studio is disappeared?", "body": "<p>I'm trying to decompile kotlin code to java.\n<a href=\"https://stackoverflow.com/questions/34957430/how-to-convert-a-kotlin-source-file-to-a-java-source-file/54116131#54116131\">This question describes how to do it</a> </p>\n\n<p>I have to see something like this:\n<a href=\"https://i.stack.imgur.com/f27HQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f27HQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>But in fact i see next one. \n<a href=\"https://i.stack.imgur.com/nfoTP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nfoTP.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see I do NOT have a \"Decompile\" button</p>\n\n<p><strong>Android Studio 3.5</strong></p>\n\n<p>Can anybody help me please? </p>\n"}, {"tags": ["android", "google-maps", "kotlin", "googleplacesautocomplete"], "answers": [{"tags": [], "owner": {"reputation": 4385, "user_id": 11742502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krquL.jpg?s=128&g=1", "display_name": "evan", "link": "https://stackoverflow.com/users/11742502/evan"}, "is_accepted": true, "score": 1, "last_activity_date": 1573578074, "creation_date": 1573578074, "answer_id": 58823365, "question_id": 58727858, "link": "https://stackoverflow.com/questions/58727858/no-placeselectionlistener-is-set-no-result-will-be-delivered/58823365#58823365", "title": "No PlaceSelectionListener is set. No result will be delivered", "body": "<p>You're using deprecated code. Try replacing this line:</p>\n\n<pre><code>val autocompleteFragment1 = fragmentManager?.findFragmentById(R.id.autocomplete_fragment1) as? AutocompleteSupportFragment // Make casting of 'as' to nullable cast 'as?'\n</code></pre>\n\n<p>With this one:</p>\n\n<pre><code>val autocompleteFragment1 = supportFragmentManager.findFragmentById(R.id.autocomplete_fragment1) as? AutocompleteSupportFragment // Make casting of 'as' to nullable cast 'as?\n</code></pre>\n\n<p>Your exact code works on my end after the above change, so I hope this helps!</p>\n"}], "owner": {"reputation": 67, "user_id": 6945611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa817d7cf3f131177cff15715fa1465b?s=128&d=identicon&r=PG&f=1", "display_name": "jeiboi", "link": "https://stackoverflow.com/users/6945611/jeiboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 58823365, "answer_count": 1, "score": 1, "last_activity_date": 1573735106, "creation_date": 1573035569, "last_edit_date": 1573735106, "question_id": 58727858, "link": "https://stackoverflow.com/questions/58727858/no-placeselectionlistener-is-set-no-result-will-be-delivered", "title": "No PlaceSelectionListener is set. No result will be delivered", "body": "<p>When I clicked the <code>autocompletefragment</code>. The log shows:</p>\n\n<blockquote>\n  <p>Places: No PlaceSelectionListener is set. No result will be\n  delivered.</p>\n</blockquote>\n\n<pre><code>val realView = inflater.inflate(R.layout.fragment_connect, container, false)\n\nPlaces.initialize(activity!!.applicationContext, getString(R.string.google_maps_key))\nval placesClient = Places.createClient(activity!!)\n\nval autocompleteFragment1 = fragmentManager?.findFragmentById(R.id.autocomplete_fragment1) as? AutocompleteSupportFragment // Make casting of 'as' to nullable cast 'as?'\n\nautocompleteFragment1?.setCountry(\"PH\")\n// Specify the types of place data to return.\nautocompleteFragment1?.setPlaceFields(listOf(Place.Field.ID, Place.Field.NAME))\n\n// Set up a PlaceSelectionListener to handle the response.\nautocompleteFragment1?.setOnPlaceSelectedListener(object : PlaceSelectionListener {\n    override fun onPlaceSelected(place: Place) {\n        Log.d(\"Hey\", place.toString())\n    }\n\n    override fun onError(status: Status) {\n        // TODO: Handle the error.\n        Log.d(\"HOY\", \"An error occurred: ${status.statusCode}\")\n    }\n})\n</code></pre>\n"}, {"tags": ["unit-testing", "kotlin", "junit4"], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 11691380, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NHBb_CHsU2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfhoxCfv5BrYY-4wG6cdgeiUTJAKg/mo/photo.jpg?sz=128", "display_name": "Lecagy", "link": "https://stackoverflow.com/users/11691380/lecagy"}, "is_accepted": false, "score": 0, "last_activity_date": 1573036512, "creation_date": 1573036512, "answer_id": 58728137, "question_id": 58727442, "link": "https://stackoverflow.com/questions/58727442/how-would-i-go-about-unit-testing-this-function-in-kotlin/58728137#58728137", "title": "How would I go about unit testing this function in Kotlin?", "body": "<p>In general, a Testclass in Kotlin looks like:</p>\n\n<pre><code>import org.junit.Assert.assertTrue\nclass NodeTest {\n\n    @Test\n    fun neighbourCountValidation(){\n        //This is a snipped of my test class, apply your tests here.\n        val testNode = Node(Point(2,0))\n        assertTrue(testNode.neighbourCount()==0)\n    }\n}\n</code></pre>\n\n<p>For each class u wish to test, create another Test class. Now, for each usecase, create a method which shall test this behavior. In my case, I wanted to test if a new Node has no neighbours.</p>\n\n<p>Make sure to implement the junit enviroment in your build.gradle</p>\n\n<p>Hope you can apply this construct to your problem</p>\n"}, {"tags": [], "owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "is_accepted": true, "score": 0, "last_activity_date": 1573040771, "creation_date": 1573040771, "answer_id": 58729445, "question_id": 58727442, "link": "https://stackoverflow.com/questions/58727442/how-would-i-go-about-unit-testing-this-function-in-kotlin/58729445#58729445", "title": "How would I go about unit testing this function in Kotlin?", "body": "<p>First of all welcome to stackoverflow!</p>\n\n<p>To get started with unit testing I will recommend you to read about them in general, good starting point, <a href=\"https://stackoverflow.com/a/16894/3330058\">another stackoverflow answer</a></p>\n\n<p>Now back to your test. You should create a test class under your <strong>test directory</strong>, not part of your main package.</p>\n\n<p>The class could look like</p>\n\n<pre><code>import org.junit.After\nimport org.junit.Assert\nimport org.junit.Before\nimport org.junit.Test\n\nclass TestCakeSlice {\n    @Before\n    fun setUp() {\n        // this will run before every test\n        // usually used for common setup between tests\n    }\n\n    @After\n    fun tearDown() {\n        // this will run after every test\n        // usually reset states, and cleanup\n    }\n\n    @Test\n    fun testSlideDev_returnsDevelopment() {\n        val result = fromCakeSliceRegion(RegionData.Key.DEV)\n\n        Assert.assertEquals(result, VZCRegion.Development)\n    }\n\n    @Test\n    fun `fun fact you can write your unit tests like this which is easier to read`() {\n        val result = fromCakeSliceRegion(RegionData.Key.DEV)\n\n        Assert.assertEquals(result, VZCRegion.Development)\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12331224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58729445, "answer_count": 2, "score": 0, "last_activity_date": 1573040771, "creation_date": 1573034290, "question_id": 58727442, "link": "https://stackoverflow.com/questions/58727442/how-would-i-go-about-unit-testing-this-function-in-kotlin", "title": "How would I go about unit testing this function in Kotlin?", "body": "<p>I'm pretty new to unit testing. I've been given the task of testing this code. I understand that I have to use assertEquals to check if for example if \nRegionData.Key.DEV returns VZCRegion.Development. \nAny help would be appreciated.     </p>\n\n<pre><code>fun fromCakeSliceRegion(cakeSliceIndex: RegionData.Key): VZCRegion {\n\n    return when (cakeSliceIndex) {\n        RegionData.Key.DEV -&gt; VZCRegion.Development\n        RegionData.Key.EU_TEST -&gt; VZCRegion.EuropeTest\n        RegionData.Key.US_TEST -&gt; VZCRegion.UnitedStatesTest\n        RegionData.Key.US_STAGING -&gt; VZCRegion.UnitedStatesStage\n        RegionData.Key.EU_STAGING -&gt; VZCRegion.EuropeStage\n        RegionData.Key.LOCAL, RegionData.Key.EU_LIVE -&gt; VZCRegion.Europe\n        RegionData.Key.AP_LIVE, RegionData.Key.US_LIVE -&gt; VZCRegion.UnitedStates\n        RegionData.Key.PERFORMANCE, RegionData.Key.PERFORMANCE -&gt; VZCRegion.Performance\n    }\n</code></pre>\n"}, {"tags": ["android", "validation", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 3632331, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6f4caac41ab9449b4b47a2b5c3c3abd?s=128&d=identicon&r=PG", "display_name": "Morshues", "link": "https://stackoverflow.com/users/3632331/morshues"}, "is_accepted": false, "score": 0, "last_activity_date": 1573717679, "last_edit_date": 1573717679, "creation_date": 1573713141, "answer_id": 58850703, "question_id": 58727212, "link": "https://stackoverflow.com/questions/58727212/how-to-custom-a-logical-validation-for-entity-insertion-on-android-room/58850703#58850703", "title": "How to custom a logical validation for entity insertion on android room", "body": "<p>I think maybe we can just use a <code>fullName</code> property directly and let it not null.</p>\n\n<p>Then make a <strong>Name class</strong> for name processing, and <strong>NameConveter class</strong> for converting.</p>\n\n<p>So the sample code may seems like this:</p>\n\n<pre><code>class Name(\n    var firstName: String = \"\",\n    var midName: String = \"\",\n    var lastName: String = \"\"\n) {\n    public fun fullName(): String {\n        return \"$firstName $midName $lastName\".trim()\n    }\n}\n\n@Entity\ndata class Person(\n    @PrimaryKey(autoGenerate = true) val id: Long = 0,\n    @ColumnInfo(name = \"user_id\", index = true) var userId: Long = 0,\n    @ColumnInfo(name = \"full_name\") var fullName: Name\n)\n\nclass DateConverter {\n    @TypeConverter\n    fun fromTimestamp(value: String): Name {\n        val nameStr = value.split(\" \")\n        return Name(nameStr[0], nameStr[1], nameStr[2])\n    }\n\n    @TypeConverter\n    fun dateToTimestamp(name: Name): String? {\n        val fullName = name.fullName()\n        // Here is the trick \n        // to make a blank full name become an invalid name for a not null property\n        if (name.isNullOrBlank()) {\n            return null\n        } else {\n            return fullName\n        }\n    }\n}\n\n</code></pre>\n\n<p>So that we can access multiple name by <strong>Name Class</strong>, and database will help us to check the fullname now.</p>\n\n<p>I know that my sample code may cause some problem such as an extra blank character in a name string, but let us focus on the fullName validation issue for now.</p>\n\n<p>I figured out this solution today, I'm not sure it's a good answer or not.</p>\n\n<p>I post here and open for everyone to judge it.</p>\n"}], "owner": {"reputation": 95, "user_id": 3632331, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6f4caac41ab9449b4b47a2b5c3c3abd?s=128&d=identicon&r=PG", "display_name": "Morshues", "link": "https://stackoverflow.com/users/3632331/morshues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573717679, "creation_date": 1573033658, "last_edit_date": 1573034792, "question_id": 58727212, "link": "https://stackoverflow.com/questions/58727212/how-to-custom-a-logical-validation-for-entity-insertion-on-android-room", "title": "How to custom a logical validation for entity insertion on android room", "body": "<p>I have an Entity like this:</p>\n\n<pre><code>data class Person(\n    @PrimaryKey(autoGenerate = true) val id: Long = 0,\n    @ColumnInfo(name = \"user_id\", index = true) var userId: Long = 0,\n    @ColumnInfo(name = \"first_name\") var firstName: String = \"\",\n    @ColumnInfo(name = \"mid_name\") var midName: String = \"\",\n    @ColumnInfo(name = \"last_name\") var lastName: String = \"\"\n) {\n    public fun fullName(): String {\n        return \"$firstName $midName $lastName\"\n    }\n}\n</code></pre>\n\n<p>I know that I can set a \"not null\" attribute to each named property. But in my case, it's no need to fill up all the name properties, <strong>I only want to validate the full name is blank or not</strong> before this entity saves to the room database.</p>\n\n<p>I'm practicing to use the MVVM framework, but now I'm not sure where should I put the validation. Activity/Fragment? ViewModel? Repository? or inside the Entity directly?</p>\n\n<p>I think maybe I should do this in a repository so that I can prevent the wrong input before I save it to the database. But what if there is another use case that I need to validate the same thing in a different repository? If so, then the code will be duplicated in two repositories.</p>\n\n<p>I've ever written ruby on rails before, there is validation function in the Model like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># This is ruby on rails code\nvalidate :name_validation\n\ndef name_validation\n    if first_name == \"\" &amp;&amp; mid_name == \"\" &amp;&amp; last_name == \"\"\n        errors.add(:name, \"the name should not be totally blank\")\n    end\nend\n</code></pre>\n\n<p>I wonder if there is a similar way to validate a property in the Entity, or there is any better practice to resolve this?</p>\n\n<p>Please help me figure it out.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 1, "creation_date": 1573033449, "post_id": 58727104, "comment_id": 103745574, "body": "Check if <code>position</code> is valid at all (<code>-1</code> is never a valid index in a <code>Collection</code>)..."}, {"owner": {"reputation": 157, "user_id": 9254960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/POdF4.png?s=128&g=1", "display_name": "Chethan Kumar", "link": "https://stackoverflow.com/users/9254960/chethan-kumar"}, "edited": false, "score": 0, "creation_date": 1573033484, "post_id": 58727104, "comment_id": 103745595, "body": "can you please post removeItem(-) method call"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1573033557, "post_id": 58727104, "comment_id": 103745640, "body": "@deHaar, what means <code>is valid  at all</code>?"}, {"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1573033636, "post_id": 58727104, "comment_id": 103745688, "body": "It means checking if this <code>int</code> is a valid index for a data structure... I have never heard of one having negative indexes, so check if <code>position</code> is negative <b>and</b> check if <code>position</code> is less than the length of the data structure. No idea why it is <code>-1</code> here... Seems like it had that value already when passed to <code>deleteNote(...)</code>."}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1573033810, "post_id": 58727104, "comment_id": 103745812, "body": "@deHaar, why I have to check if position if less then the length of the data sctucture?"}, {"owner": {"reputation": 11114, "user_id": 1712135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cErYR.png?s=128&g=1", "display_name": "deHaar", "link": "https://stackoverflow.com/users/1712135/dehaar"}, "edited": false, "score": 0, "creation_date": 1573034069, "post_id": 58727104, "comment_id": 103745953, "body": "You are well advised to do so because you can have an index that is greater than the greatest one the data structure has, which would lead to an <code>IndexOutOfBoundsException</code>, too, just at the opposite end of the data structure. Examle: Imagine an <code>int[] arr = new int[1];</code> with a single slot for an <code>int</code>, then the only valid index will be <code>0</code>, which is less than the length of the array (<code>1</code>) and not negative. If you try accessing <code>arr[-1]</code> or <code>arr[1]</code> you will get such an <code>Exception</code>."}], "answers": [{"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1573034224, "creation_date": 1573034224, "answer_id": 58727412, "question_id": 58727104, "link": "https://stackoverflow.com/questions/58727104/error-with-removeat-java-arraylist-android/58727412#58727412", "title": "Error with removeAt java arraylist android", "body": "<p>Try checking position inclusive with collections before perform delete operation.</p>\n\n<pre><code>private fun removeItem(position: Int) {\n    if(position &lt; 0 || position &gt;= records.size)\n        return\n\n    records.removeAt(position)\n    notifyItemRemoved(position)\n    notifyItemRangeChanged(position, records.size)\n}\n</code></pre>\n"}], "owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 58727412, "answer_count": 1, "score": 0, "last_activity_date": 1573034224, "creation_date": 1573033303, "last_edit_date": 1573033526, "question_id": 58727104, "link": "https://stackoverflow.com/questions/58727104/error-with-removeat-java-arraylist-android", "title": "Error with removeAt java arraylist android", "body": "<p>I received an error from Google Play console:</p>\n\n<pre><code>FATAL EXCEPTION: ControllerMessenger\nProcess: my_package, PID: 19868\njava.lang.ArrayIndexOutOfBoundsException: length=12; index=-1\n    at java.util.ArrayList.remove(ArrayList.java:405)\n    at my_package.notepad.utils_adapters.NotesAdapter.removeItem(NotesAdapter.kt:251)\n    at my_package.notepad.utils_adapters.NotesAdapter.access$removeItem(NotesAdapter.kt:25)\n    at my_package.notepad.utils_adapters.NotesAdapter$deleteNote$1.onResponse(NotesAdapter.kt:231)\n</code></pre>\n\n<p>I understand that the app tries to work with wrong index and as a result it receives the crash. The problem is placed at this method:</p>\n\n<pre><code>private fun removeItem(position: Int) {\n        records.removeAt(position)\n        notifyItemRemoved(position)\n        notifyItemRangeChanged(position, records.size)\n    }\n</code></pre>\n\n<p>this method can be called when the used tries to remove an item from the certain list. I tried to replace <code>removeAt</code> by <code>remove</code> but I got a strict suggestion to use <code>removeAt</code>. Maybe I can check when position doesn't equal to -1 or this is a bad idea?</p>\n\n<h2>UPDATE</h2>\n\n<p>remove item method call:</p>\n\n<pre><code>private fun deleteNote(id: Int?, context: Context, position: Int) {\n        Singleton.apiService().deleteNote(\"Bearer \" + context.getSharedPreferences(\"app_data\", 0).getString(\"access_token\", \"\"), id).enqueue(object : Callback&lt;NoteAction&gt; {\n            override fun onResponse(call: Call&lt;NoteAction&gt;, response: Response&lt;NoteAction&gt;) {\n                if (response.isSuccessful) {\n                    Toast.makeText(context, \"Successfully deleted\", Toast.LENGTH_SHORT).show()\n                    removeItem(position)\n                } else {\n                    try {\n                        val jObjError = JSONObject(Objects.requireNonNull&lt;ResponseBody&gt;(response.errorBody()).string())\n                        Singleton.error[\"message\"] = jObjError.getString(\"message\")\n                        Singleton.error[\"request_no\"] = \"19\"\n                        Singleton.workingWithErrors(Singleton.error, context)\n                    } catch (e: Exception) {\n\n                    }\n                }\n            }\n\n            override fun onFailure(call: Call&lt;NoteAction&gt;, t: Throwable) {\n            }\n\n        })\n</code></pre>\n"}, {"tags": ["kotlin", "reflection"], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 1, "last_activity_date": 1573041326, "last_edit_date": 1573041326, "creation_date": 1573033521, "answer_id": 58727171, "question_id": 58726838, "link": "https://stackoverflow.com/questions/58726838/pass-data-type-as-parameter-to-function/58727171#58727171", "title": "Pass data type as parameter to function", "body": "<p>I'm afraid you're going to have to use generics here:</p>\n\n<p>Something like:</p>\n\n<pre><code>inline fun &lt;T, reified R&gt;convert( t : T ) : R {\n    return Gson().fromJson(t, R::class.java )\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 4, "last_activity_date": 1573035331, "creation_date": 1573035331, "answer_id": 58727777, "question_id": 58726838, "link": "https://stackoverflow.com/questions/58726838/pass-data-type-as-parameter-to-function/58727777#58727777", "title": "Pass data type as parameter to function", "body": "<p>There are several things going on here.</p>\n\n<p>First, the traditional way to pass a type is to pass its <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"nofollow noreferrer\"><code>KClass</code></a> object (using <code>::type</code>) or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a> object (using <code>::type.class</code>).</p>\n\n<p>So you could declare your function as:</p>\n\n<pre><code>fun convert(t: Class&lt;*&gt;): Any\n</code></pre>\n\n<p>But this creates a new problem: <code>Gson().fromJson()</code> returns an object of the type you specify.\u00a0 In this case, it could be anything (hence the <code>*</code>), and so the compiler doesn't know whether you can call <code>toList()</code> on it.</p>\n\n<p>One solution to this would be to give a type bound, e.g.:</p>\n\n<pre><code>fun &lt;T: Collection&lt;U&gt;, U&gt; convert(t: Class&lt;T&gt;): List&lt;U&gt;\n</code></pre>\n\n<p>This specifies that the type you pass must be some implementation of <code>Collection</code>, and that it returns a <code>List</code> with the same element type.  And because <code>Collection</code> has a <code>toList()</code> method, it all works.</p>\n\n<p>However, that won't work for your case of passing an <code>Array</code> type, as Arrays don't have a <code>toList()</code> method.\u00a0 (<code>Array</code> types are a bit awkward in Kotlin.\u00a0 They're mostly for backward-compatibility with Java; <code>List</code>s are better in many ways.)\u00a0 </p>\n\n<p>You could use the above, and use a List type directly.  However, you wouldn't be able to specify the List element type:</p>\n\n<pre><code>fun &lt;T: Collection&lt;U&gt;, U&gt; convert(t: Class&lt;T&gt;): List&lt;U&gt; {\n    return Gson().fromJson(mockedResponse, t).toList()\n}\n\nval model: List&lt;*&gt; = convert(List::class.java)\n</code></pre>\n\n<p>So it's probably better to drop the <code>toList()</code> within your function, and not restrict the type at all.  That way, the caller can do any conversion needed, which preserves the element type:</p>\n\n<pre><code>fun &lt;T&gt; convert(t: Class&lt;T&gt;): T {\n    return Gson().fromJson(mockedResponse, t)\n}\n\nval model: List&lt;MyDataModel&gt; = convert(Array&lt;MyDataModel&gt;::class.java).toList()\n</code></pre>\n\n<p>And as a final tweak, we can use Kotlin's other, slightly neater, way to pass types: make them reified.\u00a0 This substitution is done at compile-time, not run-time, and only works for <code>inline</code> functions:</p>\n\n<pre><code>inline fun &lt;reified T&gt; convert(): T {\n    return Gson().fromJson(mockedResponse, T::class.java)\n}\n\nval model: List&lt;MyDataModel&gt; = convert&lt;Array&lt;MyDataModel&gt;&gt;().toList()\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 6820089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bc1bf1916323a974a2ce0d25cba8b4f?s=128&d=identicon&r=PG&f=1", "display_name": "0x29a", "link": "https://stackoverflow.com/users/6820089/0x29a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58727777, "answer_count": 2, "score": 1, "last_activity_date": 1573041326, "creation_date": 1573032382, "question_id": 58726838, "link": "https://stackoverflow.com/questions/58726838/pass-data-type-as-parameter-to-function", "title": "Pass data type as parameter to function", "body": "<p>I'm using GSON to parse JSON the following way:</p>\n\n<pre><code>var obj = Gson().fromJson( json, Array&lt;MyDataModel&gt;::class.java ).toList()\n</code></pre>\n\n<p>I would like to be able to pass the data type via method the following way:</p>\n\n<pre><code>fun convert( t : Any ) : Any\n{\n    return Gson().fromJson( mockedResponse, t ).toList()\n}\n\nval model = convert( Array&lt;MyDataModel&gt;::class.java )\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>None of the following functions can be called with the arguments supplied\n</code></pre>\n\n<p>I also tried <em>Type</em> as the argument data type, but the same error persists. How can I pass the DataType to my convert method? Thanks!</p>\n"}, {"tags": ["android", "kotlin", "tikxml"], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "is_accepted": false, "score": 1, "last_activity_date": 1593278541, "creation_date": 1593278541, "answer_id": 62613246, "question_id": 58726783, "link": "https://stackoverflow.com/questions/58726783/kotlin-use-tikxml-to-parse-xml-file/62613246#62613246", "title": "Kotlin use TikXml to parse XML file", "body": "<pre><code> fun parseXML(bufferedSource: BufferedSource){\n        val tikXml = TikXml.Builder().build()\n        try {\n            val tv = tikXml.read&lt;TV&gt;(bufferedSource, TV::class.java)\n            println(tv)\n        }catch(e:java.lang.Exception){\n            println(e)\n        }\n    }\n</code></pre>\n<p>In the example above TV is my  data model that I created as you can see in their docs. You have to give tikXML a BufferedSource. In my case I got it from okhttp like this:</p>\n<pre><code>override fun onResponse(call: Call, response: Response) {\n                val bufferedSource = response.body?.source()\n                try{\n                    bufferedSource?.let { parseXML(it) }\n                }catch(e:Exception){\n                    println(e)\n                }\n            }\n</code></pre>\n<p>The lib can be a headache. Use this versions others have serious bugs:</p>\n<pre><code>   implementation 'com.tickaroo.tikxml:annotation:0.8.13'\n    implementation 'com.tickaroo.tikxml:core:0.8.14-SNAPSHOT'\n    kapt 'com.tickaroo.tikxml:processor:0.8.13'\n</code></pre>\n<p>I see you use Kotlin so make sure to use kapt.</p>\n"}], "owner": {"reputation": 250, "user_id": 9876410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aqua Freshka", "link": "https://stackoverflow.com/users/9876410/aqua-freshka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1593278541, "creation_date": 1573032154, "question_id": 58726783, "link": "https://stackoverflow.com/questions/58726783/kotlin-use-tikxml-to-parse-xml-file", "title": "Kotlin use TikXml to parse XML file", "body": "<p>i would like to parse xml file using TikXml library that seem nice : <a href=\"https://github.com/Tickaroo/tikxml\" rel=\"nofollow noreferrer\">https://github.com/Tickaroo/tikxml</a> .\nHowever in the documentation i can't find how to use it.\nI understand that i have to create a class modele.\nThen i can instantiate the TikXml builder like this : </p>\n\n<pre><code>var tikXml = TikXml.Builder().build()\n</code></pre>\n\n<p>But i don't understand where do i have to add or specify witch class modele it's realated to and witch Xml file it has to read.\nIf anyone has already work with this lib, it would be nice if he can help me.</p>\n"}, {"tags": ["android", "json", "kotlin", "gson"], "comments": [{"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1573033072, "post_id": 58726466, "comment_id": 103745368, "body": "you are getting List of object in response. if you want them in separate list ask your server team to change API response."}, {"owner": {"reputation": 41, "user_id": 9844769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthony Wu", "link": "https://stackoverflow.com/users/9844769/anthony-wu"}, "reply_to_user": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1573034170, "post_id": 58726466, "comment_id": 103746004, "body": "@AtifAbbAsi I have already asked,but them say no."}, {"owner": {"reputation": 878, "user_id": 3303075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2406c1a3c283bf25a1fb356357b7513?s=128&d=identicon&r=PG&f=1", "display_name": "NilayDani", "link": "https://stackoverflow.com/users/3303075/nilaydani"}, "edited": false, "score": 0, "creation_date": 1573034459, "post_id": 58726466, "comment_id": 103746163, "body": "make keys and objects array separately and process JSON objects array to set output as desired."}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1573034698, "post_id": 58726466, "comment_id": 103746301, "body": "then simply get objects from ArrayList"}], "owner": {"reputation": 41, "user_id": 9844769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthony Wu", "link": "https://stackoverflow.com/users/9844769/anthony-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573032800, "creation_date": 1573031130, "last_edit_date": 1573032800, "question_id": 58726466, "link": "https://stackoverflow.com/questions/58726466/how-convert-a-json-string-to-two-list", "title": "How convert a Json string to two list", "body": "<p>How can I convert the JSON string to two lists.</p>\n\n<p><code>listA</code> can get key. </p>\n\n<pre><code>ex. listA[0] //\"W3\" , listA[1] //\"T1G\" \n</code></pre>\n\n<p><code>listB</code> can get value . </p>\n\n<pre><code>ex. listB[0] //[{\"key\":\"W3H\",\"ior\": \"2.150\",\"ratio\": \"+1\",\"sw\": \"Y\"},{\"key\":\"W3C\",\"ior\": \"2.840\",\"ratio\": \"-1\",\"sw\": \"Y\"}]  .\n</code></pre>\n\n<p>My JSON string is like.</p>\n\n<pre><code>{\n  \"RatioData\": [\n    {\n      \"W3\": {\n        \"W3H\": {\n          \"ior\": \"2.150\",\n          \"ratio\": \"+1\"\n        },\n        \"W3C\": {\n          \"ior\": \"2.840\",\n          \"ratio\": \"-1\"\n        },\n        \"W3N\": {\n          \"ior\": \"3.300\",\n          \"ratio\": \"+1\"\n        },\n        \"sw\": \"Y\"\n      },\n      \"T1G\": {\n        \"T1G6\": {\n          \"ior\": \"11.500\"\n        },\n        \"T1G5\": {\n          \"ior\": \"10.500\"\n        },\n        \"T1G4\": {\n          \"ior\": \"7.900\"\n        },\n        \"T1G3\": {\n          \"ior\": \"5.200\"\n        },\n        \"T1G2\": {\n          \"ior\": \"4.350\"\n        },\n        \"T1G1\": {\n          \"ior\": \"3.100\"\n        },\n        \"T1GN\": {\n          \"ior\": \"7.900\"\n        },\n        \"sw\": \"Y\"\n      },\n      \"RC\": {\n        \"RCFN\": {\n          \"ior\": \"0\"\n        },\n        \"RCLH\": {\n          \"ior\": \"0\"\n        },\n        \"RCFH\": {\n          \"ior\": \"0\"\n        },\n        \"sw\": \"N\",\n        \" RCLC\": {\n          \"ior\": \"0\"\n        },\n        \" RCFC\": {\n          \"ior\": \"0\"\n        }\n      },\n      \"HM\": {\n        \"HMH\": {\n          \"ior\": \"5.6\"\n        },\n        \"HMN\": {\n          \"ior\": \"2.01\"\n        },\n        \"HMC\": {\n          \"ior\": \"2.35\"\n        },\n        \"sw\": \"Y\"\n      },\n      \"HR\": {\n        \"HRH\": {\n          \"ior\": \"1.03\",\n          \"ratio\": \"0 / 0.5\"\n        },\n        \"sw\": \"Y\",\n        \"HRC\": {\n          \"ior\": \"0.85\",\n          \"ratio\": \"0 / 0.5\"\n        }\n      },\n      \"HOU\": {\n        \"HOUH\": {\n          \"ior\": \"1.08\",\n          \"ratio\": \"0.5 / 1\"\n        },\n        \"HOUC\": {\n          \"ior\": \"0.8\",\n          \"ratio\": \"0.5 / 1\"\n        },\n        \"sw\": \"Y\"\n      }\n    }\n  ]\n}\n</code></pre>\n\n<p>I already tried this,but the result is not what I want.</p>\n\n<pre><code>  val type = object : TypeToken&lt;MutableMap&lt;String, Any&gt;&gt;(){}.type\n\n                        var mapList:MutableList&lt;MutableMap&lt;String,Any&gt;&gt; = mutableListOf()\n\n                        rationDataList.forEach { rationDataList -&gt;\n                            mapList.add(Gson().fromJson(Gson().toJson(rationDataList),type))\n  }\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 2881646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HRiC0.png?s=128&g=1", "display_name": "mdsimmo", "link": "https://stackoverflow.com/users/2881646/mdsimmo"}, "edited": false, "score": 0, "creation_date": 1573031531, "post_id": 58726023, "comment_id": 103744474, "body": "is <code>companion object CREATOR: ... { ... }</code> identical to <code>companion object { val CREATOR = ... }</code>?"}, {"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "reply_to_user": {"reputation": 379, "user_id": 2881646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HRiC0.png?s=128&g=1", "display_name": "mdsimmo", "link": "https://stackoverflow.com/users/2881646/mdsimmo"}, "edited": false, "score": 1, "creation_date": 1573032740, "post_id": 58726023, "comment_id": 103745163, "body": "No, it&#39;s not. In you first example you are setting name and parent class to companion object. I&#39;m not sure if it even accessible from Java. Second one can be used in Java with <code>MyClass.Companion.CREATOR</code>."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1573052912, "post_id": 58726023, "comment_id": 103756421, "body": "In the first case it&#39;s accessible from Java by <code>MyClass.CREATOR</code>."}], "tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": 8, "last_activity_date": 1573190883, "last_edit_date": 1573190883, "creation_date": 1573029494, "answer_id": 58726023, "question_id": 58725845, "link": "https://stackoverflow.com/questions/58725845/kotlin-multiple-named-companion-objects/58726023#58726023", "title": "Kotlin: Multiple named companion objects", "body": "<p>May be you misunderstood Java examples.</p>\n\n<pre><code>public static Parcelable.Creator&lt;SDFileDir&gt; CREATOR = ...;\npublic static long serialVersionUid = 123;\n</code></pre>\n\n<p>In Java - yes, it is separated static object. You can place any count of static fields in class.</p>\n\n<p>In Kotlin there should be only one static object (it is called <code>Companion</code> here). But it is like one more class here. So all new static fields should be inside of it.</p>\n\n<pre><code>companion object {\n    @JvmField\n    val CREATOR: Parcelable.Creator&lt;SDFileDir&gt; = ...\n    val serialVersionUid: Long = 123\n}\n</code></pre>\n\n<p>There is one more thing: annotation <code>@JvmField</code> to work with Java correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 379, "user_id": 2881646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HRiC0.png?s=128&g=1", "display_name": "mdsimmo", "link": "https://stackoverflow.com/users/2881646/mdsimmo"}, "edited": false, "score": 1, "creation_date": 1573081590, "post_id": 58731089, "comment_id": 103769334, "body": "How would declaring serialVersionUid in a separate object work? The Java Serialization library requires that field to be inside the object."}], "tags": [], "owner": {"reputation": 4656, "user_id": 7138492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8KSN4.png?s=128&g=1", "display_name": "Sergei Emelianov", "link": "https://stackoverflow.com/users/7138492/sergei-emelianov"}, "is_accepted": false, "score": 1, "last_activity_date": 1573123053, "last_edit_date": 1573123053, "creation_date": 1573046209, "answer_id": 58731089, "question_id": 58725845, "link": "https://stackoverflow.com/questions/58725845/kotlin-multiple-named-companion-objects/58731089#58731089", "title": "Kotlin: Multiple named companion objects", "body": "<p>I can suggest two solutions to this problem:</p>\n\n<ol>\n<li>As @Ircover said - You can declare the <code>CREATOR</code> (which is simply a <code>static</code> field in Java) inside your <code>companion object</code> alongside your constants, but you'll need to mark in with <code>@JvmField</code> annotation to work as inteded (as it is called from Java)..</li>\n<li>You do not necessarily need the <code>companion object</code> for the constant value, it (it won't work with <code>serialVersionUid</code> in your case, as it <strong>MUST</strong> be inside the class for Java serialization to work) can be moved to a separate <code>object</code>, to a <code>companion object</code> of another class or even inside any <code>.kt</code> file body (outside the class)..</li>\n</ol>\n"}], "owner": {"reputation": 379, "user_id": 2881646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HRiC0.png?s=128&g=1", "display_name": "mdsimmo", "link": "https://stackoverflow.com/users/2881646/mdsimmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 58726023, "answer_count": 2, "score": 5, "last_activity_date": 1573190883, "creation_date": 1573028773, "last_edit_date": 1573030206, "question_id": 58725845, "link": "https://stackoverflow.com/questions/58725845/kotlin-multiple-named-companion-objects", "title": "Kotlin: Multiple named companion objects", "body": "<p>I'm sure this is asked before, but I can't seem to find the answer:</p>\n\n<p>I have a class which impliments both the <code>java.io.Serializable</code> and <code>android.os.Parcelable</code>.\nThese classes require companion objects of:</p>\n\n<pre><code>companion object CREATOR : Parcelable.Creator&lt;MyClass&gt; {\n    override fun createFromParcel(parcel: Parcel): MyClass\n    ...\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>companion object {\n    private val serialVersionUid: Long = 123\n}\n\n</code></pre>\n\n<p>The trouble is that I can't have both these companion objects because that causes a <code>only one companion object per class</code> exception.</p>\n\n<p>How can I have two companion objects with different names in the same class?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "is_accepted": true, "score": 1, "last_activity_date": 1573028824, "creation_date": 1573028824, "answer_id": 58725857, "question_id": 58725761, "link": "https://stackoverflow.com/questions/58725761/zip-but-keep-the-original-collection-items/58725857#58725857", "title": "zip, but keep the original collection items", "body": "<pre><code>first.mapIndexed{ index, id -&gt; id to second.getOrNull(index) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 1, "creation_date": 1573031251, "post_id": 58725960, "comment_id": 103744317, "body": "Neat.  (Note that if the result were a map, not a list, it probably wouldn&#39;t be a good idea to handle the second list being longer: many map implementations don&#39;t allow null keys; and those that do can&#39;t map them to more than one value.)"}], "tags": [], "owner": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "is_accepted": false, "score": 3, "last_activity_date": 1573029296, "creation_date": 1573029296, "answer_id": 58725960, "question_id": 58725761, "link": "https://stackoverflow.com/questions/58725761/zip-but-keep-the-original-collection-items/58725960#58725960", "title": "zip, but keep the original collection items", "body": "<p>In case you don't know which collection is larger:</p>\n\n<pre><code>(0 until Math.max(first.size, second.size)).map { first.getOrNull(it) to second.getOrNull(it) }\n</code></pre>\n"}], "owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58725857, "answer_count": 2, "score": 0, "last_activity_date": 1573043668, "creation_date": 1573028445, "last_edit_date": 1573043668, "question_id": 58725761, "link": "https://stackoverflow.com/questions/58725761/zip-but-keep-the-original-collection-items", "title": "zip, but keep the original collection items", "body": "<p>I have 2 collections: <code>[11, 22, 33, 44]</code>, <code>[A, B]</code>. I'd like to merge them, like <code>zip</code>, but don't truncate the resulting collection to the shortest one. So the result should be</p>\n\n<pre><code>[11 -&gt; A, 22 -&gt; B, 33 -&gt; null, 44 -&gt; null]\n</code></pre>\n"}, {"tags": ["mongodb", "spring-boot", "kotlin", "querydsl", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 68, "user_id": 3861506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQFc8.jpg?s=128&g=1", "display_name": "algtr", "link": "https://stackoverflow.com/users/3861506/algtr"}, "edited": false, "score": 1, "creation_date": 1582288766, "post_id": 58725636, "comment_id": 106735395, "body": "May I ask if and how you fixed this problem?"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 3905564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa31452e42147d48de7cb517e9ad5607?s=128&d=identicon&r=PG&f=1", "display_name": "kekhuay", "link": "https://stackoverflow.com/users/3905564/kekhuay"}, "is_accepted": false, "score": 0, "last_activity_date": 1587900666, "creation_date": 1587900666, "answer_id": 61439960, "question_id": 58725636, "link": "https://stackoverflow.com/questions/58725636/is-it-possible-to-generate-q-classes-by-gradle-kotlin-dsl-for-kotlin-mongodb-d/61439960#61439960", "title": "Is it possible to generate Q classes by gradle (Kotlin-DSL) for Kotlin MongoDB Documents?", "body": "<p>You should add <code>implementation(\"com.querydsl:querydsl-mongodb\")</code> and <code>kapt(\"com.querydsl:querydsl-apt\")</code> in <code>dependencies</code> section.</p>\n\n<p>Then add the following after <code>dependencies</code> section.</p>\n\n<pre><code>kapt {\n    annotationProcessor(\"org.springframework.data.mongodb.repository.support.MongoAnnotationProcessor\")\n}\n</code></pre>\n\n<p>Also, don't forget to remove those JPA dependencies as well.</p>\n\n<p><a href=\"https://github.com/kekhuay/nextershop-installation-service/tree/475e3e47b6adbe7785b786f82a64acd472f92ff1\" rel=\"nofollow noreferrer\">This is a working example i created.</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5484076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP3ZM.jpg?s=128&g=1", "display_name": "Victor Yevitchenko", "link": "https://stackoverflow.com/users/5484076/victor-yevitchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1587900666, "creation_date": 1573027947, "question_id": 58725636, "link": "https://stackoverflow.com/questions/58725636/is-it-possible-to-generate-q-classes-by-gradle-kotlin-dsl-for-kotlin-mongodb-d", "title": "Is it possible to generate Q classes by gradle (Kotlin-DSL) for Kotlin MongoDB Documents?", "body": "<p>I have a project with Maven, Kotlin, QueryDSL, Spring Boot and MongoDB. It works quite well but I thought that migrating to Gradle could speed up building it. Everything was good before I began moving module with QueryDSL. It turned up that I can not generate Q-classes for Kotlin  classes annotated with @Document.\nSo is there a way to solve it?\nDocument example (placed /src/main/kotlin/com/company, in kotlin directory):</p>\n\n<pre><code>package ...\nimport org.springframework.data.annotation.Id\nimport org.springframework.data.mongodb.core.mapping.Document\n\n@Document(collection = \"myDocument\")\ndata class MyDocument(\n        val smth: String\n) \n</code></pre>\n\n<p>maven (piece that responsible for generating)</p>\n\n<pre><code>&lt;plugin&gt;\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${kotlin.version}&lt;/version&gt;\n\n                    &lt;configuration&gt;\n                        &lt;args&gt;\n                            &lt;arg&gt;-Werror&lt;/arg&gt;\n                        &lt;/args&gt;\n                        &lt;annotationProcessors&gt;\n                            org.springframework.data.mongodb.repository.support.MongoAnnotationProcessor\n                        &lt;/annotationProcessors&gt;\n                        &lt;compilerPlugins&gt;\n                            &lt;plugin&gt;spring&lt;/plugin&gt;\n                        &lt;/compilerPlugins&gt;\n                    &lt;/configuration&gt;\n\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                            &lt;artifactId&gt;kotlin-maven-noarg&lt;/artifactId&gt;\n                            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                            &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;compile&lt;/id&gt;\n                            &lt;phase&gt;compile&lt;/phase&gt;\n                            &lt;configuration&gt;\n                                &lt;sourceDirs&gt;\n                                    &lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\n                                    &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                                &lt;/sourceDirs&gt;\n                            &lt;/configuration&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;compile&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;kapt&lt;/id&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;kapt&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;sourceDirs&gt;\n                                    &lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\n                                    &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                                &lt;/sourceDirs&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;test-compile&lt;/id&gt;\n                            &lt;phase&gt;test-compile&lt;/phase&gt;\n                            &lt;configuration&gt;\n                                &lt;sourceDirs&gt;\n                                    &lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\n                                &lt;/sourceDirs&gt;\n                            &lt;/configuration&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;test-compile&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n</code></pre>\n\n<p>For gradle+kotlin AFAIU we have to use kapt to generate Q-classes in this way</p>\n\n<pre><code>kapt(\"com.querydsl:querydsl-apt:4.2.1:jpa\")\n</code></pre>\n\n<p>but it does not work for me, my new build.gradle.kts:</p>\n\n<pre><code>import org.jetbrains.kotlin.gradle.plugin.KotlinSourceSet\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nplugins {\n    id(\"org.springframework.boot\") version \"2.2.0.RELEASE\"\n    id(\"io.spring.dependency-management\") version \"1.0.8.RELEASE\"\n    kotlin(\"jvm\") version \"1.3.50\"\n    kotlin(\"kapt\") version \"1.3.50\"\n    kotlin(\"plugin.jpa\") version \"1.3.50\"\n    id(\"org.jetbrains.kotlin.plugin.spring\") version \"1.3.21\"\n}\n\napply(plugin = \"kotlin\")\napply(plugin = \"kotlin-kapt\")\napply(plugin = \"kotlin-jpa\")\napply(plugin = \"org.springframework.boot\")\napply(plugin = \"io.spring.dependency-management\")\n\n\ngroup = \"com.example\"\nversion = \"0.0.1-SNAPSHOT\"\njava.sourceCompatibility = JavaVersion.VERSION_1_8\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    implementation(\"org.springframework.boot:spring-boot-starter-data-jpa\")\n    implementation(\"com.querydsl:querydsl-jpa\")\n    implementation(\"com.querydsl:querydsl-apt\")\n\n    kapt(\"com.querydsl:querydsl-apt:4.2.1:jpa\")\n    kapt(\"org.springframework.boot:spring-boot-starter-data-jpa\")\n    kapt(\"org.springframework.boot:spring-boot-configuration-processor\")\n    kapt(\"org.springframework.data:spring-data-mongodb:2.2.0.RELEASE\")\n\n\n    implementation(\"org.springframework.boot:spring-boot-starter-data-mongodb\")\n    implementation(\"org.jetbrains.kotlin:kotlin-reflect\")\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\") {\n        exclude(group = \"org.junit.vintage\", module = \"junit-vintage-engine\")\n    }\n}\n\n//sourceSets { main[\"kotlin\"].srcDirs += [generated] }\n//val querydslSrcDir = \"src/main/generated\"\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions {\n        freeCompilerArgs = listOf(\"-Xjsr305=strict\")\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>In maven I can set precisely annotation processor (org.springframework.data.mongodb.repository.support.MongoAnnotationProcessor) but in gradle I can not figure out how to achieve it.</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1573055324, "post_id": 58725117, "comment_id": 103757955, "body": "&quot;Doesn&#39;t <code>&lt;T : Serializable&gt;</code> establish that a function/lambda that takes <code>Serializable</code> must take <code>T</code>?&quot; It does. But you are trying to go the other way around: pass a <code>Serializable</code> to a function which takes <code>T</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": true, "score": 1, "last_activity_date": 1573025683, "creation_date": 1573025683, "answer_id": 58725161, "question_id": 58725117, "link": "https://stackoverflow.com/questions/58725117/why-does-this-kotlin-parameter-type-with-an-upper-bound-need-a-cast/58725161#58725161", "title": "Why does this Kotlin parameter type with an upper bound need a cast?", "body": "<p>Yet your emitter doesn't take any <code>Serializable</code> - it takes only <code>T</code>. That is the reason why you need casting - elements of the list are of type <code>Serializable</code>. If you changed it to :</p>\n\n<pre><code>val os = BufferOutputStream()\n    fun &lt;T : Serializable&gt; writeList(list: List&lt;T&gt;, emitter: (T, BufferOutputStream) -&gt; Unit) {\n        os.writeInt(list.size)\n        for (v in list) {\n            emitter(v, os)\n        }\n    }\n</code></pre>\n\n<p>It wouldn't need casting.</p>\n"}, {"tags": [], "owner": {"reputation": 6744, "user_id": 393402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e5f3cf2ff41152fc90541e30008b3be?s=128&d=identicon&r=PG", "display_name": "Matt Quigley", "link": "https://stackoverflow.com/users/393402/matt-quigley"}, "is_accepted": false, "score": 0, "last_activity_date": 1573188809, "creation_date": 1573188809, "answer_id": 58760577, "question_id": 58725117, "link": "https://stackoverflow.com/questions/58725117/why-does-this-kotlin-parameter-type-with-an-upper-bound-need-a-cast/58760577#58760577", "title": "Why does this Kotlin parameter type with an upper bound need a cast?", "body": "<p>I wanted to post an example of why it shouldn't compile without a cast. </p>\n\n<p>Imagine there are two classes <code>Class1</code> and <code>Class2</code> which implement or extend <code>Serializable</code>. If you call this function with a list that contains <code>Class1</code> but the emitter takes <code>Class2</code>, then it would be a class cast exception when taking <code>Class1</code> out of the list and passing it into the emitter which only takes <code>Class2</code>.</p>\n\n<p>In the example that @r2rek posted, the function forces the list and the emitter to be the same classes.</p>\n"}], "owner": {"reputation": 6744, "user_id": 393402, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e5f3cf2ff41152fc90541e30008b3be?s=128&d=identicon&r=PG", "display_name": "Matt Quigley", "link": "https://stackoverflow.com/users/393402/matt-quigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58725161, "answer_count": 2, "score": 0, "last_activity_date": 1573188809, "creation_date": 1573025490, "question_id": 58725117, "link": "https://stackoverflow.com/questions/58725117/why-does-this-kotlin-parameter-type-with-an-upper-bound-need-a-cast", "title": "Why does this Kotlin parameter type with an upper bound need a cast?", "body": "<p>The following function takes a list of <code>Serializable</code> and a lambda which serializes the individual elements of the list.</p>\n\n<pre><code>    val os = BufferOutputStream()\n    fun &lt;T : Serializable&gt; writeList(list: List&lt;Serializable&gt;, emitter: (T, BufferOutputStream) -&gt; Unit) {\n        os.writeInt(list.size)\n        for (v in list) {        // v is of type Serializable\n            emitter(v as T, os)  // why do we need to cast V as T? \n        }\n    }\n</code></pre>\n\n<p>Why would I need to cast <code>v</code> which is of type <code>Serializable</code> to <code>T</code> when <code>T</code> already has to implement <code>Serializable</code>? Doesn't <code>&lt;T : Serializable&gt;</code> establish that a function/lambda that takes <code>Serializable</code> must take <code>T</code>?</p>\n"}, {"tags": ["kotlin", "collections", "android-recyclerview", "android-databinding"], "comments": [{"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1573025242, "post_id": 58725004, "comment_id": 103741672, "body": "Could you provide the code where you fetch the data/where you send it to the adapter?"}], "answers": [{"tags": [], "owner": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "is_accepted": true, "score": 0, "last_activity_date": 1573030239, "creation_date": 1573030239, "answer_id": 58726225, "question_id": 58725004, "link": "https://stackoverflow.com/questions/58725004/root-casue-for-nosuchelementexception-collection-is-empty/58726225#58726225", "title": "Root casue for NoSuchElementException: Collection is empty", "body": "<p>Let's take a look at the stacktrace:</p>\n\n<pre><code>Fatal Exception: java.util.NoSuchElementException: Collection is empty.\n       at kotlin.collections.CollectionsKt___CollectionsKt.first(_Collections.kt:184)\n       at com.transferhome.contacts.ContactsAdapter.bind(ContactsAdapter.kt:25)\n</code></pre>\n\n<p>Most probably, the line referred to is this one:</p>\n\n<pre><code>binding.contactNumber.text = contact.numbers.first().phone\n</code></pre>\n\n<p>the call to <code>first()</code> in particular. If <code>contact.numbers</code> is empty, <code>first()</code> will throw a <code>NoSuchElementException</code>. Your code does not handle this case.</p>\n\n<p>The easiest solution would be to set the text to null if there are no numbers:</p>\n\n<pre><code>binding.contactNumber.text = contact.numbers.firstOrNull()?.phone\n</code></pre>\n\n<p>Why would you add a nullcheck if the exception was not a <code>NullPointerException</code>?</p>\n"}], "owner": {"reputation": 30613, "user_id": 3496570, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/fhSKV.jpg?s=128&g=1", "display_name": "AndroidGeek", "link": "https://stackoverflow.com/users/3496570/androidgeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 58726225, "answer_count": 1, "score": -1, "last_activity_date": 1573030239, "creation_date": 1573025048, "last_edit_date": 1573027728, "question_id": 58725004, "link": "https://stackoverflow.com/questions/58725004/root-casue-for-nosuchelementexception-collection-is-empty", "title": "Root casue for NoSuchElementException: Collection is empty", "body": "<p>I am facing Crash in Firebase Crashlytics on bind method but unable to find the root cause. I have added a Null check but still, the issue not fixed.</p>\n\n<p><strong>Firebase Crash Report</strong></p>\n\n<pre><code>Fatal Exception: java.util.NoSuchElementException: Collection is empty.\n       at kotlin.collections.CollectionsKt___CollectionsKt.first(_Collections.kt:184)\n       at com.transferhome.contacts.ContactsAdapter.bind(ContactsAdapter.kt:25)\n       at com.transferhome.contacts.ContactsBaseAdapter.onBindViewHolder(ContactsBaseAdapter.kt:38)\n       at com.transferhome.contacts.ContactsBaseAdapter.onBindViewHolder(ContactsBaseAdapter.kt:19)\n       at androidx.recyclerview.widget.RecyclerView$Adapter.onBindViewHolder(RecyclerView.java:6781)\n       at androidx.recyclerview.widget.RecyclerView$Adapter.bindViewHolder(RecyclerView.java:6823)\n       at androidx.recyclerview.widget.RecyclerView$Recycler.tryBindViewHolderByDeadline(RecyclerView.java:5752)\n       at androidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:6019)\n       at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5858)\n       at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5854)\n       at androidx.recyclerview.widget.LinearLayoutManager$LayoutState.next(LinearLayoutManager.java:2230)\n       at androidx.recyclerview.widget.LinearLayoutManager.layoutChunk(LinearLayoutManager.java:1557)\n       at androidx.recyclerview.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1517)\n       at androidx.recyclerview.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:612)\n       at androidx.recyclerview.widget.RecyclerView.dispatchLayoutStep2(RecyclerView.java:3924)\n       at androidx.recyclerview.widget.RecyclerView.onMeasure(RecyclerView.java:3336)\n       at android.view.View.measure(View.java:22216)\n       at androidx.constraintlayout.widget.ConstraintLayout.internalMeasureChildren(ConstraintLayout.java:1227)\n       at androidx.constraintlayout.widget.ConstraintLayout.onMeasure(ConstraintLayout.java:1572)\n       at android.view.View.measure(View.java:22216)\n       at androidx.viewpager.widget.ViewPager.onMeasure(ViewPager.java:1638)\n       at android.view.View.measure(View.java:22216)\n       at androidx.constraintlayout.widget.ConstraintLayout.onMeasure(ConstraintLayout.java:1676)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at androidx.coordinatorlayout.widget.CoordinatorLayout.onMeasureChild(CoordinatorLayout.java:733)\n       at com.google.android.material.appbar.HeaderScrollingViewBehavior.onMeasureChild(HeaderScrollingViewBehavior.java:95)\n       at com.google.android.material.appbar.AppBarLayout$ScrollingViewBehavior.onMeasureChild(AppBarLayout.java:1556)\n       at androidx.coordinatorlayout.widget.CoordinatorLayout.onMeasure(CoordinatorLayout.java:803)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n       at androidx.appcompat.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:143)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1539)\n       at android.widget.LinearLayout.measureVertical(LinearLayout.java:823)\n       at android.widget.LinearLayout.onMeasure(LinearLayout.java:702)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1539)\n       at android.widget.LinearLayout.measureVertical(LinearLayout.java:823)\n       at android.widget.LinearLayout.onMeasure(LinearLayout.java:702)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6671)\n       at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n       at com.android.internal.policy.DecorView.onMeasure(DecorView.java:831)\n       at android.view.View.measure(View.java:22216)\n       at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:2589)\n       at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1631)\n       at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1885)\n       at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1515)\n       at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:7266)\n       at android.view.Choreographer$CallbackRecord.run(Choreographer.java:981)\n       at android.view.Choreographer.doCallbacks(Choreographer.java:790)\n       at android.view.Choreographer.doFrame(Choreographer.java:721)\n       at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:967)\n       at android.os.Handler.handleCallback(Handler.java:808)\n       at android.os.Handler.dispatchMessage(Handler.java:101)\n       at android.os.Looper.loop(Looper.java:166)\n       at android.app.ActivityThread.main(ActivityThread.java:7529)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)\n</code></pre>\n\n<p><strong>ContactsAdapter.kt</strong></p>\n\n<pre><code>class ContactsAdapter ( private val onItemSelect: (contact: Contact) -&gt; Unit )\n    : ContactsBaseAdapter&lt;ItemContactFavListBinding&gt;()  {\n\n    var contactFavSignal = MutableLiveData&lt;Contact&gt;().apply {  }\n\n\n    override fun bind(contact: Contact, holder: ContactVH&lt;ItemContactFavListBinding&gt;) {\n        val binding = holder.binding\n        binding.contactName.text = contact.name\n        binding.contactNumber.text = contact.numbers.first().phone\n\n        binding.imgContactHeart.setOnClickListener(View.OnClickListener {\n            val backgroundImageName = (binding.imgContactHeart.getTag()).toString()\n            if(backgroundImageName.equals(\"2\")) {\n                binding.imgContactHeart.setImageResource(R.drawable.heart_selected_yellow)\n                EventBus.getDefault().post(CustomEvent(contact,true));\n                binding.imgContactHeart.setTag(\"1\")\n                binding.imgContactHeart.setImageResource(R.drawable.heart_selected_yellow)\n\n            }else  if(backgroundImageName.equals(\"1\")) {\n                binding.imgContactHeart.setImageResource(R.drawable.heart_selected_yellow)\n                EventBus.getDefault().post(CustomEvent(contact,false));\n\n                binding.imgContactHeart.setTag(\"2\")\n                binding.imgContactHeart.setImageResource(R.drawable.heart)\n\n            }\n        })\n\n        var num = contact.numbers.first().phone\n        if(num.contains(\" \"))\n            num = num.replace(\" \",\"\")\n\n        if(num.startsWith(\"0\"))\n            num = num.removePrefix(\"0\")\n\n        if(num.startsWith(\"+\"))\n            num = num.removePrefix(\"+\")\n\n        var isFav:Boolean=false\n\n        for (x in 0..FavoritesFragment.listFavNumbers.size-1)\n        {\n            var num2 = FavoritesFragment.listFavNumbers[x]\n            if(num2.endsWith(num))\n                isFav=true\n        }\n\n        if(isFav)\n        {\n            binding.imgContactHeart.setTag(\"1\")\n            binding.imgContactHeart.setImageResource(R.drawable.heart_selected_yellow)\n        }\n        else\n        {\n            binding.imgContactHeart.setTag(\"2\")\n\n            binding.imgContactHeart.setImageResource(R.drawable.heart)\n        }\n\n        showContactProfileImage(contact, binding.contactImage)\n\n        holder.binding.root.setOnClickListener {\n            onItemSelect.invoke(contact)\n        }\n    }\n\n    override fun provideBinding(inflater: LayoutInflater, parent: ViewGroup): ItemContactFavListBinding {\n        return ItemContactFavListBinding.inflate(inflater, parent, false)\n    }\n}\n</code></pre>\n\n<p><strong>ContactBaseAdater.kt</strong></p>\n\n<pre><code>abstract class ContactsBaseAdapter&lt;T : ViewDataBinding&gt; :\n    PagedListAdapter&lt;Contact, ContactsBaseAdapter.ContactVH&lt;T&gt;&gt;(object : DiffUtil.ItemCallback&lt;Contact&gt;() {\n        override fun areItemsTheSame(oldItem: Contact, newItem: Contact): Boolean {\n            return oldItem.name == newItem.name || oldItem.id == newItem.id\n        }\n\n        override fun areContentsTheSame(oldItem: Contact, newItem: Contact): Boolean {\n            return oldItem.name == newItem.name\n\n        }\n\n    } ) {\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ContactVH&lt;T&gt; {\n        return ContactVH(provideBinding(LayoutInflater.from(parent.context), parent))\n    }\n\n    override fun onBindViewHolder(holder: ContactVH&lt;T&gt;, position: Int) {\n        val contact = getItem(position)\n        if (contact != null) {\n            bind(contact, holder)\n        }\n    }\n\n    abstract fun bind(contact: Contact, holder: ContactVH&lt;T&gt;)\n\n    abstract fun provideBinding(inflater: LayoutInflater, parent: ViewGroup): T\n\n    class ContactVH&lt;T : ViewDataBinding&gt;(val binding: T) : RecyclerView.ViewHolder(binding.root)\n\n    fun showContactProfileImage(contact: Contact, imageHolder: ImageView?) {\n        UiUtils.showContactProfileImage(contact, imageHolder)\n    }\n}\n</code></pre>\n\n<p><strong>item_contact_fav_list.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n\n    &lt;RelativeLayout android:layout_width=\"match_parent\"\n                  android:layout_marginLeft=\"16dp\"\n                  android:layout_marginRight=\"16dp\"\n                  android:layout_marginStart=\"16dp\"\n                  android:layout_marginEnd=\"16dp\"\n                  android:layout_marginTop=\"8dp\"\n                  android:layout_marginBottom=\"8dp\"\n                  android:layout_height=\"wrap_content\"\n                  android:orientation=\"horizontal\"\n                  tools:ignore=\"UseCompoundDrawables\"&gt;\n\n        &lt;ImageView\n                android:id=\"@+id/contact_image\"\n                android:layout_width=\"50dp\"\n                android:layout_height=\"50dp\"\n                android:layout_marginTop=\"8dp\"\n                android:layout_marginBottom=\"8dp\"\n                android:layout_alignParentLeft=\"true\"\n                android:contentDescription=\"@null\"/&gt;\n\n        &lt;LinearLayout android:layout_width=\"match_parent\"\n                      android:layout_height=\"50dp\"\n                      android:orientation=\"vertical\"\n                      android:weightSum=\"2\"\n                      android:layout_toLeftOf=\"@+id/img_contact_heart\"\n                      android:layout_toRightOf=\"@+id/contact_image\"\n                      android:layout_marginLeft=\"5dp\"&gt;\n\n        &lt;TextView\n                android:id=\"@+id/contact_name\"\n                android:textSize=\"16sp\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"0dp\"\n                android:layout_gravity=\"center\"\n                android:layout_weight=\"1\"\n                android:singleLine=\"true\"\n                android:ellipsize=\"middle\"\n                android:focusable=\"false\"\n                android:textColor=\"@color/colorBlack\"\n                android:layout_marginTop=\"3dp\"\n                tools:text=\"Contact Name\"/&gt;\n            &lt;TextView\n                    android:id=\"@+id/contact_number\"\n                    android:textSize=\"15sp\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"0dp\"\n                    android:layout_gravity=\"center\"\n                    android:layout_weight=\"1\"\n                    android:singleLine=\"true\"\n                    android:textColor=\"@android:color/darker_gray\"\n                    tools:text=\"Contact Name\"\n                    android:layout_marginLeft=\"5dp\"\n\n            /&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;ImageView\n                android:layout_alignParentRight=\"true\"\n                android:id=\"@+id/img_contact_heart\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:src=\"@drawable/heart\"\n                android:layout_centerVertical=\"true\"\n        /&gt;\n\n    &lt;/RelativeLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "serialization"], "comments": [{"owner": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 0, "creation_date": 1573034091, "post_id": 58724789, "comment_id": 103745960, "body": "Can you decode both IDs as Strings an then parse them to Int, Long or UUID based on MetaData?"}, {"owner": {"reputation": 21, "user_id": 12276606, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OVMJxKPCIFA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ref6g_xq9X6Vkl2bV53GKB5QO3yew/photo.jpg?sz=128", "display_name": "Sasa Djuric", "link": "https://stackoverflow.com/users/12276606/sasa-djuric"}, "reply_to_user": {"reputation": 2064, "user_id": 5137879, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LY3Pw.jpg?s=128&g=1", "display_name": "SpaceBison", "link": "https://stackoverflow.com/users/5137879/spacebison"}, "edited": false, "score": 0, "creation_date": 1573054690, "post_id": 58724789, "comment_id": 103757579, "body": "@SpaceBison well it is possible, but I have a feeling it makes the whole System brittle. I could go and provide something like a <code>asString</code>/<code>fromString</code> method to PropertyMeta, but that means that if anyone ones to have his class serialised or uses an arbitrary complex key, he has also to provide those methods, instead of marking those classes with <code>@Serilizable</code>."}], "owner": {"reputation": 21, "user_id": 12276606, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OVMJxKPCIFA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ref6g_xq9X6Vkl2bV53GKB5QO3yew/photo.jpg?sz=128", "display_name": "Sasa Djuric", "link": "https://stackoverflow.com/users/12276606/sasa-djuric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1573024259, "creation_date": 1573024117, "last_edit_date": 1573024259, "question_id": 58724789, "link": "https://stackoverflow.com/questions/58724789/how-can-i-serialize-a-self-dependent-structure-with-kotlin-kotlinx-serialization", "title": "How can I serialize a self dependent structure with kotlin kotlinx serialization?", "body": "<p>I have some metadata about db objects which I would like to send over the wire, including the id of some row. Since kotlin offers Json serialization out of the box I am quite willing to use that. \nNow the problem is that the type of the ID may be any type, actually for now just Int, Long or UUID. Now I have metadata which describes the type of the key, so on both sides I can provide a (de-)serializer. \nSo I have:</p>\n\n<pre><code>@file:ContextualSerialization(MetaData::class, Any::class)\npackage com.example\n\nsealed class MetaProperty(val name:String, val type: KClass&lt;*&gt;) {\n    abstract fun serializer() : KSerializer&lt;Any&gt;\n}\nclass IntProperty(name:String) : MetaProperty(name, Int::class) {\n    override fun serializer(): KSerializer&lt;Any&gt; = IntSerializer as KSerializer&lt;Any&gt;\n}\n\nclass MetaData(val type:String, val idType:MetaProperty)\n\n@Serializable\ndata class DBRelation(\n        val from:MetaData,\n        val fromId: Any,\n        val to:MetaData,\n        val toId:Any)\n\n</code></pre>\n\n<p>Now I just want to serialize Relation, actually in my case only the to-side of the relation (the from is not necessary) I just included it to make serialization possible.\nI wrote a naive implementation of a custom serializer:</p>\n\n<pre><code>@Serializer(forClass = DBRelation::class)\nobject RelationToSerializer : KSerializer&lt;DBRelation&gt; {\n    lateinit var meta : (String) -&gt; MetaData\n    override val descriptor: SerialDescriptor = object : SerialClassDescImpl(\"relation\") {\n        init {\n            addElement(\"from\")            \n            addElement(\"to\")\n            addElement(\"fromId\")\n            addElement(\"toId\")\n        }\n    }\n\n    @ImplicitReflectionSerializer\n    override fun serialize(encoder: Encoder, obj: DBRelation) {\n        val comp = encoder.beginStructure(descriptor)\n        comp.encodeStringElement(descriptor, 0, obj.from.type)\n        comp.encodeSerializableElement(descriptor, 2, obj.from.idType.type.serializer() as KSerializer&lt;Any&gt;, obj.fromId)\n\n    }\n\n    override fun deserialize(decoder: Decoder): DBRelation = run {\n        var from : String? = null\n        var to : String? = null\n        var fromId : Any? = null\n        var toId : Any? = null\n        val dec = decoder.beginStructure(descriptor)\n        loop@ while (true) {\n            when(val idx = dec.decodeElementIndex(descriptor)) {\n                CompositeDecoder.READ_DONE -&gt; break@loop\n                0 -&gt;  from = dec.decodeStringElement(descriptor, idx)\n                1 -&gt; to = dec.decodeStringElement(descriptor, idx)\n                2 -&gt; fromId = dec.decodeSerializableElement(descriptor, idx, meta(from?:throw IllegalStateException()).idType.serializer())\n            }\n        }\n        DBRelation(meta(from!!), fromId!!, meta(to!!), toId!!)\n    }\n}\n\n</code></pre>\n\n<p>Now this implementation may or may not work depending on the order in which the fields are deserialized. </p>\n\n<p>So I have two questions:</p>\n\n<p>A. Does somebody know another solution for my problem? One which does not require me to write special Relation classes for each possible combination of Key types? </p>\n\n<p>B. Even better, is there a way to tell the serialiser to hold back the ID value until <code>from</code> was deserialised? Or to give me some serialized version of the ID, which I can later (once I have the <code>from</code> value`) deserialise?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 1584, "user_id": 1127787, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/ACYwj.jpg?s=128&g=1", "display_name": "Lakshay", "link": "https://stackoverflow.com/users/1127787/lakshay"}, "edited": false, "score": 0, "creation_date": 1604902509, "post_id": 58723440, "comment_id": 114477984, "body": "hi @davinder were you able to solve this?"}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 7305947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-d1VSNZaMY-E/AAAAAAAAAAI/AAAAAAAABx4/5ktGc6zGwXg/photo.jpg?sz=128", "display_name": "Davinder Goel", "link": "https://stackoverflow.com/users/7305947/davinder-goel"}, "edited": false, "score": 0, "creation_date": 1573019729, "post_id": 58723705, "comment_id": 103739606, "body": "John Le, thanks for answer. but i have one case also if user turn off their notifications from settings than how can i listen because on whatsapp we can listen while our notifications are off."}, {"owner": {"reputation": 782, "user_id": 2031246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGkY.jpg?s=128&g=1", "display_name": "John Le", "link": "https://stackoverflow.com/users/2031246/john-le"}, "reply_to_user": {"reputation": 623, "user_id": 7305947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-d1VSNZaMY-E/AAAAAAAAAAI/AAAAAAAABx4/5ktGc6zGwXg/photo.jpg?sz=128", "display_name": "Davinder Goel", "link": "https://stackoverflow.com/users/7305947/davinder-goel"}, "edited": false, "score": 0, "creation_date": 1573022514, "post_id": 58723705, "comment_id": 103740531, "body": "@DavinderGoel: AFAK turn off the notification doesn&#39;t effect to the Firebase notification."}, {"owner": {"reputation": 131, "user_id": 1308590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fe1ae909e843d29d646759debbff7545?s=128&d=identicon&r=PG", "display_name": "famfamfam", "link": "https://stackoverflow.com/users/1308590/famfamfam"}, "edited": false, "score": 0, "creation_date": 1600765949, "post_id": 58723705, "comment_id": 113183832, "body": "hi, i got this error when screen off, plz help  ``` Caused by: android.util.AndroidRuntimeException: Activity could not be started for Intent { act=android.intent.action.MAIN flg=0x14008000 cmp=com.civix.link/.Screen.CallingScreen }```"}], "tags": [], "owner": {"reputation": 782, "user_id": 2031246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGkY.jpg?s=128&g=1", "display_name": "John Le", "link": "https://stackoverflow.com/users/2031246/john-le"}, "is_accepted": false, "score": 0, "last_activity_date": 1573019019, "last_edit_date": 1573019019, "creation_date": 1573018715, "answer_id": 58723705, "question_id": 58723440, "link": "https://stackoverflow.com/questions/58723440/how-can-i-listen-a-incoming-video-call-from-my-app-using-opentok/58723705#58723705", "title": "How can i listen a incoming video call from my app using OpenTok?", "body": "<p>Create a video call coming <code>VideoCallComingActivity</code> activity</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        // setContentView(you layout id)\n\n        // Setup your activity which can open when the screen is clocked\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {\n            setShowWhenLocked(true)\n            setTurnScreenOn(true)\n            (getSystemService(Context.KEYGUARD_SERVICE) as KeyguardManager).requestDismissKeyguard(this, null)\n        } else {\n            window?.addFlags(\n                    WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD or\n                            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED or\n                            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON\n            )\n        } \n}\n</code></pre>\n\n<p>Using <code>JobIntentService</code> service for starting the <code>VideoCallComingActivity</code> activity. Using <code>JobIntentService</code> to avoid the background restriction from Android 8 or higher. Create <code>YourJobIntentService</code> extends from <code>JobIntentService</code></p>\n\n<pre><code>class YourJobIntentService : JobIntentService() {\n    override fun onHandleWork(it: Intent) {\n        // Start the VideoCallComingActivity activity\n    }\n\n    // OR static method in Java\n    companion object {\n        fun enqueueWork(context: Context, intent: Intent) {\n            enqueueWork(context, YourJobIntentService::class.java, 1000, intent)\n        }\n    }\n}\n</code></pre>\n\n<p>Using Firebase to receiving notification about a video call coming:</p>\n\n<pre><code>    override fun onMessageReceived(remoteMessage: RemoteMessage?) {\n        super.onMessageReceived(remoteMessage)\n\n        // More code here\n        YourJobIntentService.enqueueWork(applicationContext, intent)\n    }\n</code></pre>\n\n<p><strong>when i reject or skip the call then it will show in my call history as missed call</strong> -> I think it depends on your app logic.</p>\n"}], "owner": {"reputation": 623, "user_id": 7305947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-d1VSNZaMY-E/AAAAAAAAAAI/AAAAAAAABx4/5ktGc6zGwXg/photo.jpg?sz=128", "display_name": "Davinder Goel", "link": "https://stackoverflow.com/users/7305947/davinder-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573019019, "creation_date": 1573016879, "question_id": 58723440, "link": "https://stackoverflow.com/questions/58723440/how-can-i-listen-a-incoming-video-call-from-my-app-using-opentok", "title": "How can i listen a incoming video call from my app using OpenTok?", "body": "<p>i need to show call accept/reject screen while a video call coming in my app using OpenTok SDK. I should also listen incoming call while my app is killed. What can i do for listen video call from app. their is any way to listen and when i reject or skip the call then it will show in my call history as missed call.\nThanks in Advance:)</p>\n"}, {"tags": ["kotlin", "dagger"], "answers": [{"tags": [], "owner": {"reputation": 4717, "user_id": 4133301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yKdIm.jpg?s=128&g=1", "display_name": "GensaGames", "link": "https://stackoverflow.com/users/4133301/gensagames"}, "is_accepted": true, "score": 1, "last_activity_date": 1573019464, "creation_date": 1573019464, "answer_id": 58723834, "question_id": 58723209, "link": "https://stackoverflow.com/questions/58723209/how-to-only-have-one-instance-of-a-dagger-subcomponent/58723834#58723834", "title": "How to only have one instance of a Dagger @subcomponent?", "body": "<p>You are talking about different question. Lifecycle of object instance should nothing to do with <code>subcomponent</code>. Let me explain here your question. </p>\n\n<ol>\n<li><p>By default all dependencies are created with your <code>provide</code> annotation. Which would be called each time we are requesting this item in different Dagger <code>modules</code>. <strong>Unless</strong> this particular dependency is annotated as <code>singleton</code>. </p></li>\n<li><p>You subcomponent should nothing to do with above allocation. \nBasically you would have one (or several) Dagger <code>component</code> which could include <code>subcomponent</code>. Their lifecycle is handled by <a href=\"https://dagger.dev/subcomponents\" rel=\"nofollow noreferrer\">Dagger scope</a>. </p></li>\n</ol>\n"}], "owner": {"reputation": 75, "user_id": 12300161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e4ff2d91de1857a0f648a0bf5af37f?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/12300161/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58723834, "answer_count": 1, "score": 2, "last_activity_date": 1573019464, "creation_date": 1573015198, "question_id": 58723209, "link": "https://stackoverflow.com/questions/58723209/how-to-only-have-one-instance-of-a-dagger-subcomponent", "title": "How to only have one instance of a Dagger @subcomponent?", "body": "<p>For other dependencies I can use a @scope such as @Singleton to make it only have one instance.</p>\n\n<p>For example:</p>\n\n<pre><code>@Component\n@Singleton\ninterface ApplicationComponent {\n\n    fun getMySingleInstanceDependency(): MySingleInstanceDependency\n}\n\n@Singleton\nclass MySingleInstanceDependency @Inject constructor()\n</code></pre>\n\n<p>If I add a @subcomponent to the main component, it returns a new instance every time I require an instance. The only thing I can think of is to use the @Component.Builder to pass an instance of the subcomponent inside so it uses the same instance every time, but that doesn't sound right. Is there a better way to do this?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573014806, "post_id": 58723105, "comment_id": 103738377, "body": "is your recyclerview width set to match_parent or wrap_content?"}, {"owner": {"reputation": 21, "user_id": 12329747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vk74abJrKaw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG-cWVFYPNoWB3Yj6EnV8mYWZIlw/photo.jpg?sz=128", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041a\u0443\u0440\u0430\u0433\u043e\u0432", "link": "https://stackoverflow.com/users/12329747/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%b3%d0%be%d0%b2"}, "reply_to_user": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573014894, "post_id": 58723105, "comment_id": 103738394, "body": "@A.easazadeh match_parent"}, {"owner": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573015245, "post_id": 58723105, "comment_id": 103738461, "body": "try setting it to a fixed value like 360. see if you still have the issue. if you still have then the problem is in the layout that you placed your recyclerview in"}, {"owner": {"reputation": 2628, "user_id": 6295668, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zInPi.jpg?s=128&g=1", "display_name": "Jinesh Francis", "link": "https://stackoverflow.com/users/6295668/jinesh-francis"}, "edited": false, "score": 0, "creation_date": 1573015321, "post_id": 58723105, "comment_id": 103738477, "body": "@\u0412\u0430\u0441\u0438\u043b\u0438\u0439\u041a\u0443\u0440\u0430\u0433\u043e\u0432 Try using wrap_content instead of android:layout_height=&quot;100dp&quot; in FrameLayout"}, {"owner": {"reputation": 21, "user_id": 12329747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vk74abJrKaw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG-cWVFYPNoWB3Yj6EnV8mYWZIlw/photo.jpg?sz=128", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041a\u0443\u0440\u0430\u0433\u043e\u0432", "link": "https://stackoverflow.com/users/12329747/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%b3%d0%be%d0%b2"}, "reply_to_user": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573015872, "post_id": 58723105, "comment_id": 103738605, "body": "@A.easazadeh, I set fixed value and my recycler view began to work fine. But as far as I know fixed value isn t good because my app won&#39;t work well on devices with small screens."}, {"owner": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573016023, "post_id": 58723105, "comment_id": 103738641, "body": "can you share the code of the layout your recyclerview is in"}, {"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1573018408, "post_id": 58723105, "comment_id": 103739189, "body": "add <code>app:layout_constraintTop_toTopOf=&quot;parent&quot;</code> and remove <code>app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</code>, it should move it to top"}, {"owner": {"reputation": 104, "user_id": 9832121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8SC2y.jpg?s=128&g=1", "display_name": "Hardik raiyani", "link": "https://stackoverflow.com/users/9832121/hardik-raiyani"}, "edited": false, "score": 0, "creation_date": 1573023121, "post_id": 58723105, "comment_id": 103740780, "body": "you just change computer_game_activity.xml  &lt;androidx.recyclerview.widget.RecyclerView         android:id=&quot;@+id/turnStory&quot;         android:layout_width=&quot;match_parent&quot;         android:layout_height=&quot;match_parent&quot; /&gt;"}], "owner": {"reputation": 21, "user_id": 12329747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vk74abJrKaw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG-cWVFYPNoWB3Yj6EnV8mYWZIlw/photo.jpg?sz=128", "display_name": "\u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u041a\u0443\u0440\u0430\u0433\u043e\u0432", "link": "https://stackoverflow.com/users/12329747/%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d0%b8%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%b3%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573016299, "creation_date": 1573014468, "last_edit_date": 1573016299, "question_id": 58723105, "link": "https://stackoverflow.com/questions/58723105/why-first-elements-in-recycler-view-displayed-incorrectly", "title": "Why first elements in recycler view displayed incorrectly?", "body": "<p>Now I writing my small game \"Bulls and Cows\". I added to the bottom of my layout recycler view and write sample code to test it:</p>\n\n<pre><code>val adapter = MyAdapter(this, null)\nturnStory.adapter = adapter\nrepeat(100) {\nadapter.updateData(Triple(\"test$it\", \"test$it\", \"test$it\")\n}\n</code></pre>\n\n<p>I started my activity on the phone and <a href=\"https://i.stack.imgur.com/wiiGl.png\" rel=\"nofollow noreferrer\">saw that</a></p>\n\n<p>But when I scrolled down and scrolled back <a href=\"https://i.stack.imgur.com/07Nww.png\" rel=\"nofollow noreferrer\">everything became normal</a></p>\n\n<p>MyAdapter.kt</p>\n\n<pre><code>class MyAdapter(private val ctx: Context, private val data: Triple&lt;String, String, String&gt;?) :\n    RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;() {\n\nprivate val dataset = mutableListOf&lt;Triple&lt;String, String, String&gt;&gt;()\ninit {\n    if (data != null) dataset.add(data)\n}\n\nclass MyViewHolder(val frameLayout: FrameLayout) : RecyclerView.ViewHolder(frameLayout)\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n    val frameLayout = LayoutInflater.from(parent.context)\n        .inflate(R.layout.frame_layout, parent, false) as FrameLayout\n\n    return MyViewHolder(frameLayout)\n}\n\noverride fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n    holder.frameLayout.numberView.text = dataset[position].first\n\n    holder.frameLayout.bullsView.text =\n        ctx.resources.getString(R.string.bulls_counter, dataset[position].second)\n    holder.frameLayout.cowsView.text =\n        ctx.resources.getString(R.string.cows_counter, dataset[position].third)\n}\n\noverride fun getItemCount(): Int = dataset.size\n\nfun updateData(data: Triple&lt;String, String, String&gt;) {\n    dataset.add(data)\n    notifyDataSetChanged()\n}\n</code></pre>\n\n<p><code>}</code></p>\n\n<p>frame_layout.xml</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"100dp\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/numberView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"match_parent\"\n    android:layout_gravity=\"center_vertical\"\n    android:gravity=\"center\"\n    android:maxLines=\"1\"\n    android:singleLine=\"false\"\n    android:textColor=\"#000000\"\n    android:textSize=\"36sp\"\n    android:textStyle=\"bold\"\n    app:autoSizeTextType=\"none\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/bullsView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"50dp\"\n    android:layout_gravity=\"end\"\n    android:gravity=\"center\"\n    android:maxLines=\"1\"\n    android:singleLine=\"false\"\n    android:textColor=\"#000000\"\n    android:textSize=\"24sp\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/cowsView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"50dp\"\n    android:layout_gravity=\"bottom|end\"\n    android:gravity=\"center\"\n    android:maxLines=\"1\"\n    android:singleLine=\"false\"\n    android:textColor=\"#000000\"\n    android:textSize=\"24sp\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>Why first elements in recycler view displayed incorrectly before I scroll down?</p>\n\n<p>computer_game_activity.xml</p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".GameComputerActivity\"&gt;\n\n&lt;androidx.recyclerview.widget.RecyclerView\n    android:id=\"@+id/turnStory\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"500dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["android", "kotlin", "exoplayer"], "comments": [{"owner": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573015741, "post_id": 58722828, "comment_id": 103738566, "body": "how about showing a textview for offline message on top of the ExoPlayerView"}, {"owner": {"reputation": 23, "user_id": 12123479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f143e0289a696bac376d4ec1f6fbb344?s=128&d=identicon&r=PG", "display_name": "Chava Koteswara Rao", "link": "https://stackoverflow.com/users/12123479/chava-koteswara-rao"}, "reply_to_user": {"reputation": 1485, "user_id": 6748763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lG44N.jpg?s=128&g=1", "display_name": "alireza easazade", "link": "https://stackoverflow.com/users/6748763/alireza-easazade"}, "edited": false, "score": 0, "creation_date": 1573018823, "post_id": 58722828, "comment_id": 103739317, "body": "Can you show me how to do with the code above? I think first I need to catch the error and show it using alertdialogue."}], "owner": {"reputation": 23, "user_id": 12123479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f143e0289a696bac376d4ec1f6fbb344?s=128&d=identicon&r=PG", "display_name": "Chava Koteswara Rao", "link": "https://stackoverflow.com/users/12123479/chava-koteswara-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573012244, "creation_date": 1573012244, "question_id": 58722828, "link": "https://stackoverflow.com/questions/58722828/when-source-is-empty-how-to-show-offline-message-in-exoplayer", "title": "When source is empty how to show offline message in exoplayer", "body": "<p>I need to catch errors thrown by exoplayer when there is no input or bad stream. If there is no input activity opening showing player with controls nothing is displaying. when there is no input hls source I need to show the alert dialogue that Streaming is offline. How to achieve this. Please help. </p>\n\n<pre><code>class playlive : AppCompatActivity() {\n\n    private var player: SimpleExoPlayer? = null\n    private var playerView: PlayerView? = null\n    private var playWhenReady = true\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_playlive)\n        playerView = findViewById(R.id.player_view)\n\n\n        play()\n\n    }\n\nprivate fun play(){\n\n        val trackSelector = DefaultTrackSelector()\n        trackSelector.setParameters(trackSelector.buildUponParameters().setMaxVideoSizeSd())\n        player = ExoPlayerFactory.newSimpleInstance(this, trackSelector)\n\n    playerView!!.player = player\n    val dataSourceFactory = DefaultHttpDataSourceFactory(Util.getUserAgent(this, \"app-name\"))\n    val uri = Uri.parse(\"http://localhost:1935/live/mystream/index.m3u8\")\n    val hlsMediaSource = HlsMediaSource.Factory(dataSourceFactory).createMediaSource(uri)\n\n    player!!.playWhenReady = playWhenReady\n    player!!.prepare(hlsMediaSource)\n\n}\n    override fun onStop() {\n        super.onStop()\n        releasePlayer()\n\n    }\n\n    override fun onResume() {\n        super.onResume()\n        releasePlayer()\n        resumePlayer()\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        releasePlayer()\n\n    }\n\n    private fun releasePlayer(){\n        player?.release()\n    }\n\n    private fun resumePlayer(){\n        play()\n    }\n\n    }```\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 2493149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d49d7dd5dd1f8a7d3740ca24f17457?s=128&d=identicon&r=PG", "display_name": "Snowie", "link": "https://stackoverflow.com/users/2493149/snowie"}, "is_accepted": false, "score": 0, "last_activity_date": 1573031880, "creation_date": 1573031880, "answer_id": 58726709, "question_id": 58722685, "link": "https://stackoverflow.com/questions/58722685/kotlin-not-receiving-a-full-packet-from-an-hc-06-bluetooth-module/58726709#58726709", "title": "Kotlin not receiving a full packet from an HC-06 Bluetooth module", "body": "<p>Figgured it out. Read the buffer one byte at a time and build the string character at a time. Check for the &lt; and the > character for a valid transmission</p>\n\n<pre><code>private fun beginListenForData() {\n\nstopThread = false\nval thread = Thread(Runnable {\n    while (!Thread.currentThread().isInterrupted &amp;&amp; !stopThread) {\n        try {\n            val byteCount = inputStream!!.available()\n            if (byteCount &gt; 0) {\n                val rawBytes = ByteArray(1)\n                inputStream!!.read(rawBytes,0,1)\n                val string = String(rawBytes, StandardCharsets.UTF_8)\n                if (string== \"&lt;\") {\n                    m_Headder=true\n                }\n                if (m_Headder==true){\n                    stringBuilder = stringBuilder.plus(string)\n                    if (string ==\"&gt;\") {\n                        m_Received=stringBuilder\n                        Log.i(TAG, \"string:\" + stringBuilder)\n                        stringBuilder = \"\"\n                        m_Headder = false\n                        ProcessMessage(m_Received)\n                   }\n                }\n            }\n        } catch (ex: IOException) {\n            stopThread = true\n        }\n    }\n\n})\nthread.start()\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2493149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d49d7dd5dd1f8a7d3740ca24f17457?s=128&d=identicon&r=PG", "display_name": "Snowie", "link": "https://stackoverflow.com/users/2493149/snowie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573031880, "creation_date": 1573011044, "question_id": 58722685, "link": "https://stackoverflow.com/questions/58722685/kotlin-not-receiving-a-full-packet-from-an-hc-06-bluetooth-module", "title": "Kotlin not receiving a full packet from an HC-06 Bluetooth module", "body": "<p>In Kotlin I am having an issue with data not fully loading into the buffer in Android in one packet. I am sending &lt;7:16> data packet from a HC-06 bluetooth module.\nWhen i receive it's coming in as 2 packets. The micro is sending a CR and LF and the end of the transmission.</p>\n\n<pre><code>I/UI_Msg: &lt;  \nI/UI_Msg: 7:16&gt;  \nI/UI_Msg: &lt;  \nI/UI_Msg: 7:16&gt;  \netc\n</code></pre>\n\n<p>If I add a sleep command for a second, then query the buffer it comes in completed in one packet.  The problem is I want to send more than one packet in a second.. </p>\n\n<p>How can i fix this issue to or can i just build a string until '>' is received from the buffer.</p>\n\n<pre><code>private fun beginListenForData() {\n  val handler = Handler()\n    stopThread = false\n    buffer = ByteArray(10)\n    val thread = Thread(Runnable {\n        while (!Thread.currentThread().isInterrupted &amp;&amp; !stopThread) {\n            try {\n                val byteCount = inputStream!!.available()\n                if (byteCount &gt; 0) {\n                    //Thread.sleep(1000)      // wait for buffer finish filling\n                    val rawBytes = ByteArray(byteCount)\n                    inputStream!!.read(rawBytes)\n                    val string = String(rawBytes, StandardCharsets.UTF_8)\n                    //handler.post {txt_message.text=\"\"}\n                    Log.i(TAG,\"\"+ string)\n                    //handler.post {txt_message.append(string)}\n                   // processInput(string)\n                }\n            } catch (ex: IOException) {\n                stopThread = true\n            }\n        }\n\n    })\n\n    thread.start()\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573010711, "post_id": 58722595, "comment_id": 103737543, "body": "May I know what .kt is this? From what file message.setText(&quot;HERE&quot;)     story.setText(&quot;HERE2&quot;)"}, {"owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "reply_to_user": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573012829, "post_id": 58722595, "comment_id": 103737958, "body": "@Ticherhaz <code>.kt</code> is the extension of a Kotlin file"}, {"owner": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573013986, "post_id": 58722595, "comment_id": 103738211, "body": "it is from MainActivity.kt?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3451736, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ec51eab1e263b396b3f7a8f1c61feedb?s=128&d=identicon&r=PG&f=1", "display_name": "Solstice", "link": "https://stackoverflow.com/users/3451736/solstice"}, "edited": false, "score": 0, "creation_date": 1573077416, "post_id": 58722805, "comment_id": 103768035, "body": "This worked! I appreciate your easy to understand explanation as to why you made the changes you did. Thank you!"}], "tags": [], "owner": {"reputation": 475, "user_id": 11877776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_0LiJG5n8k/AAAAAAAAAAI/AAAAAAAAABM/GHoMFEU_6hk/photo.jpg?sz=128", "display_name": "Duy Khanh Nguyen", "link": "https://stackoverflow.com/users/11877776/duy-khanh-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1573012789, "last_edit_date": 1573012789, "creation_date": 1573012004, "answer_id": 58722805, "question_id": 58722595, "link": "https://stackoverflow.com/questions/58722595/kotlin-android-extensions-accessing-text-views/58722805#58722805", "title": "Kotlin Android Extensions accessing text views", "body": "<p>You can consider each Activity as a screen, because you has attach <code>R.layout.activity_main</code> xml file with <code>MainActivity</code> so you should not attach it to anywhere else (unless you want to create another screen with the same layout). <code>GetRequestUtils</code> is a class used to get data so it should not extend <code>Activity</code>. To return value after getting data from API, you can use an interface callback</p>\n\n<pre><code>    class GetRequestUtils {\n\n        interface Callback {\n            fun onDone(book: Book)\n        }\n\n        val parseResponseUtil = ParseResponseUtil()\n\n        fun makeGetRequest(context: Context, callback: Callback) {\n            val queue = Volley.newRequestQueue(context)\n            val stringRequest = StringRequest(Request.Method.GET, &lt;Get Request URL&gt;, Response.Listener&lt;String&gt; { response -&gt;\n                val book = parseResponseUtil.getBookComponents(response)\n                callback.onDone(book)\n            }, Response.ErrorListener { \n                val book = Book(\"Something went wrong\", \"Something went wrong\", \"Something went wrong\")\n                callback.onDone(book)\n            })\n            queue.add(stringRequest)\n        }\n    }\n</code></pre>\n\n<p>In <code>MainActivity</code>, set value to TextView when get callback from the Request Util</p>\n\n<pre><code>R.id.navigation_home -&gt; {\n    val getRequestUtils = GetRequestUtils()\n    getRequestUtils.makeGetRequest(this, object : GetRequestUtils.Callback {\n        override fun onDone(book: Book) {\n            message?.text = book.title\n            story?.text = book.story\n        })\n    return@OnNavigationItemSelectedListener true\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3451736, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ec51eab1e263b396b3f7a8f1c61feedb?s=128&d=identicon&r=PG&f=1", "display_name": "Solstice", "link": "https://stackoverflow.com/users/3451736/solstice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 58722805, "answer_count": 1, "score": 1, "last_activity_date": 1573012789, "creation_date": 1573010256, "question_id": 58722595, "link": "https://stackoverflow.com/questions/58722595/kotlin-android-extensions-accessing-text-views", "title": "Kotlin Android Extensions accessing text views", "body": "<p>So I am teaching myself android development and I am simply trying to update a text view with the results from a Volley get call. I have looked at other stackoverflow threads and kotlin tutorials but nothing seems to be working.</p>\n\n<p>I have 3 main files I am dealing</p>\n\n<p>activity_main.xml with these views</p>\n\n<pre><code>&lt;TextView\n    android:id=\"@+id/message\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginLeft=\"@dimen/activity_horizontal_margin\"\n    android:layout_marginStart=\"@dimen/activity_horizontal_margin\"\n    android:layout_marginTop=\"@dimen/activity_vertical_margin\"\n    android:text=\"Title\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;android.support.design.widget.BottomNavigationView\n    android:id=\"@+id/navigation\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginEnd=\"0dp\"\n    android:layout_marginStart=\"0dp\"\n    android:background=\"?android:attr/windowBackground\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:menu=\"@menu/navigation\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/story\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"16dp\"\n    android:layout_marginLeft=\"16dp\"\n    android:layout_marginTop=\"32dp\"\n    android:text=\"Story Contents\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/message\" /&gt;\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>    import android.os.Bundle\nimport android.support.design.widget.BottomNavigationView\nimport android.support.v7.app.AppCompatActivity\nimport kotlinx.android.synthetic.main.activity_main.*\nimport &lt;GetRequest&gt;\n\nclass MainActivity : AppCompatActivity() {\n\n    private val mOnNavigationItemSelectedListener = BottomNavigationView.OnNavigationItemSelectedListener { item -&gt;\n        when (item.itemId) {\n            R.id.navigation_home -&gt; {\n\n                val getRequestUtils = GetRequestUtils()\n                getRequestUtils.makeGetRequest(this)\n                return@OnNavigationItemSelectedListener true\n            }\n            R.id.navigation_dashboard -&gt; {\n                message.setText(R.string.title_dashboard)\n                return@OnNavigationItemSelectedListener true\n            }\n        }\n        false\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n    }}\n</code></pre>\n\n<p>GetRequestUtils.kt</p>\n\n<pre><code>import android.app.Activity\nimport android.content.Context\nimport android.os.Bundle\nimport com.android.volley.Request\nimport com.android.volley.Response\nimport com.android.volley.toolbox.StringRequest\nimport com.android.volley.toolbox.Volley\nimport kotlinx.android.synthetic.main.activity_main.*\nimport &lt;Book&gt;\nimport &lt;R&gt;\n\nclass GetRequestUtils : Activity(){\n    val parseResponseUtil = ParseResponseUtil()\n\n    fun makeGetRequest(context: Context) {\n        val queue = Volley.newRequestQueue(context)\n        val stringRequest = StringRequest(Request.Method.GET, &lt;Get Request URL&gt;, Response.Listener&lt;String&gt; { response -&gt;\n            val book = parseResponseUtil.getBookComponents(response)\n            message?.text = book.title\n            story?.text = book.story\n        }, Response.ErrorListener { Book(\"Something went wrong\", \"Something went wrong\", \"Something went wrong\")})\n        queue.add(stringRequest)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n</code></pre>\n\n<p>**Note some of the imports have been replaced with  as the imports have my name in them.</p>\n\n<p>Whenever I make this call I get an error stating the</p>\n\n<blockquote>\n  <p>Attempt to invoke virtual method 'android.view.View android.view.Window.findViewById(int)' on a null object reference</p>\n</blockquote>\n\n<p>From my research this is because the view is not created or accessible by the time the get call has been made, but when I attempt to set the message and story textViews inside the onCreate of GetRequestUtils, </p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    message.setText(\"HERE\")\n    story.setText(\"HERE2\")\n}\n</code></pre>\n\n<p>the textViews are not updated so not I am not sure I am even properly accessing the textViews on the activity_main.xml.</p>\n\n<p>Can someone please help me see what I am doing wrong?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10299831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJBrp.jpg?s=128&g=1", "display_name": "Gandeloft", "link": "https://stackoverflow.com/users/10299831/gandeloft"}, "edited": false, "score": 0, "creation_date": 1573073718, "post_id": 58738189, "comment_id": 103766695, "body": "Hey, it&#39;s interesting how as I was typing out the solution to which I&#39;ve arrived right now, I got a notification about a new answer having been provided.  You&#39;re right with what you&#39;ve said. I&#39;ve cast the &quot;view&quot; variable of that lambda expression into what I know that the parent layout is, and in that way have achieved what I wanted.   The solution that I&#39;ve arrived to is posted below!"}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1573072899, "creation_date": 1573072899, "answer_id": 58738189, "question_id": 58722582, "link": "https://stackoverflow.com/questions/58722582/a-problem-with-manipulating-layout-within-a-function-as-an-argument-view-editte/58738189#58738189", "title": "A problem with manipulating layout within a function as an argument; view.editText must not be null", "body": "<p>Try changing your lambda from this:</p>\n\n<blockquote>\n<pre><code>jiken0.customEditTextBoxMain.setOnFocusChangeListener { view, b -&gt; onEditTextAnimation(view, b) }\n</code></pre>\n</blockquote>\n\n<p>to this:</p>\n\n<pre><code>jiken0.customEditTextBoxMain.setOnFocusChangeListener { _, b -&gt; onEditTextAnimation(jiken0, b) }\n</code></pre>\n\n<hr>\n\n<p>I believe the issue is that the value of the <code>view</code> parameter is not what you expect.</p>\n\n<p>In the versions where you're doing all the work inline, you are consistently referencing views like <code>jiken0</code>, <code>jiken1</code>, etc. But the <code>setOnFocusChangeListener()</code> call is always being invoked on <code>jiken0.customEditTextBoxMain</code> or <code>jiken1.customEditTextBoxMain</code>. That means that the value of the <code>view</code> parameter in the lambda is the <code>customEditTextBoxMain</code> view, and not the <code>jiken0</code> view.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 10299831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJBrp.jpg?s=128&g=1", "display_name": "Gandeloft", "link": "https://stackoverflow.com/users/10299831/gandeloft"}, "is_accepted": false, "score": 0, "last_activity_date": 1573074091, "last_edit_date": 1573074091, "creation_date": 1573073453, "answer_id": 58738287, "question_id": 58722582, "link": "https://stackoverflow.com/questions/58722582/a-problem-with-manipulating-layout-within-a-function-as-an-argument-view-editte/58738287#58738287", "title": "A problem with manipulating layout within a function as an argument; view.editText must not be null", "body": "<p>The answer is that I needed to obtain the parent layout of the editText of which the onEditTextAnimation is called, and then cast the \"view\" from the lamba expression into what that view is (in my case, a custom reusable layout).</p>\n\n<p>adding this line: </p>\n\n<pre><code>val r = view.parent as LinearLayout\n</code></pre>\n\n<p>to the beginning of the reusable function solved the issue.\nOverall, the finished function code looks like this now.</p>\n\n<pre><code>private fun onEditTextAnimation(view: View, b: Boolean) {\n    val r = view.parent as LinearLayout\n    if (b) {\n        r.customEditTextBoxMain.layoutParams.height = pxToDP(35)\n        r.customEditTextBoxHint.layoutParams.height = pxToDP(15)\n        r.customEditTextBoxHint.visibility = View.VISIBLE\n        r.redLine.visibility = View.VISIBLE\n    }\n    if (!b) {\n        r.customEditTextBoxMain.layoutParams.height = pxToDP(50)\n        r.customEditTextBoxHint.visibility = View.GONE\n        r.redLine.visibility = View.GONE\n    }\n}\n</code></pre>\n\n<p>If you have any clear advice on how I can improve my coding, please do tell.\nThank you.</p>\n"}], "owner": {"reputation": 49, "user_id": 10299831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJBrp.jpg?s=128&g=1", "display_name": "Gandeloft", "link": "https://stackoverflow.com/users/10299831/gandeloft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573074091, "creation_date": 1573010156, "last_edit_date": 1573074026, "question_id": 58722582, "link": "https://stackoverflow.com/questions/58722582/a-problem-with-manipulating-layout-within-a-function-as-an-argument-view-editte", "title": "A problem with manipulating layout within a function as an argument; view.editText must not be null", "body": "<p>I have created a method to be reused on 4 occasions so that I reduce on the amount of copy-pasted code I'm using.\nFor some reason, when the code is made into a function, it no longer works.</p>\n\n<p>It works without being a function.</p>\n\n<pre><code>    private fun onEditTextAnimation(view: View, b: Boolean) {\n        if (b) {\n            view.customEditTextBoxMain.layoutParams.height = pxToDP(35)\n            view.customEditTextBoxHint.layoutParams.height = pxToDP(15)\n            view.customEditTextBoxHint.visibility = View.VISIBLE\n            view.redLine.visibility = View.VISIBLE\n        }\n        if (!b) {\n            view.customEditTextBoxMain.layoutParams.height = pxToDP(50)\n            view.customEditTextBoxHint.visibility = View.GONE\n            view.redLine.visibility = View.GONE\n        }\n    }\n\n\n// THIS HERE IS THE FUNCTION BEING USED IN A PLACE WHERE THE FUNCTIONS'S BODY WORKED WITHOUT BEING EXTRACTED INTO A FUNCTION\n// THIS HERE IS THE FUNCTION BEING USED IN A PLACE WHERE THE FUNCTIONS'S BODY WORKED WITHOUT BEING EXTRACTED INTO A FUNCTION\n\n\n        jiken0.customEditTextBoxMain.setOnFocusChangeListener { view, b -&gt; onEditTextAnimation(view, b) }\n\n// THIS HERE IS THE FUNCTION BEING USED IN A PLACE WHERE THE FUNCTIONS'S BODY WORKED WITHOUT BEING EXTRACTED INTO A FUNCTION. BELOW ARE THE OTHER 3 FUNCTIONS FOR WHICH I INTENDED THE EXTRACTED FUNCTION\n// THIS HERE IS THE FUNCTION BEING USED IN A PLACE WHERE THE FUNCTIONS'S BODY WORKED WITHOUT BEING EXTRACTED INTO A FUNCTION. BELOW ARE THE OTHER 3 FUNCTIONS FOR WHICH I INTENDED THE EXTRACTED FUNCTION\n\n        jiken1.customEditTextBoxMain.setOnFocusChangeListener { view, b -&gt;\n            if (b) {\n                jiken1.customEditTextBoxMain.layoutParams.height = pxToDP(35)\n                jiken1.customEditTextBoxHint.layoutParams.height = pxToDP(15)\n                jiken1.customEditTextBoxHint.visibility = View.VISIBLE\n                jiken1.redLine.visibility = View.VISIBLE\n            }\n            if (!b) {\n                jiken1.customEditTextBoxMain.layoutParams.height = pxToDP(50)\n                jiken1.customEditTextBoxHint.visibility = View.GONE\n                jiken1.redLine.visibility = View.GONE\n            }\n        }\n\n        jiken2.customEditTextBoxMain.setOnFocusChangeListener { view, b -&gt;\n            if (b) {\n                jiken2.customEditTextBoxMain.layoutParams.height = pxToDP(35)\n                jiken2.customEditTextBoxHint.layoutParams.height = pxToDP(15)\n                jiken2.customEditTextBoxHint.visibility = View.VISIBLE\n                jiken2.redLine.visibility = View.VISIBLE\n            }\n            if (!b) {\n                jiken2.customEditTextBoxMain.layoutParams.height = pxToDP(50)\n                jiken2.customEditTextBoxHint.visibility = View.GONE\n                jiken2.redLine.visibility = View.GONE\n            }\n        }\n\n        jiken3.customEditTextBoxMain.setOnFocusChangeListener { view, b -&gt;\n            if (b) {\n                jiken3.customEditTextBoxMain.layoutParams.height = pxToDP(35)\n                jiken3.customEditTextBoxHint.layoutParams.height = pxToDP(15)\n                jiken3.customEditTextBoxHint.visibility = View.VISIBLE\n                jiken3.redLine.visibility = View.VISIBLE\n            }\n            if (!b) {\n                jiken3.customEditTextBoxMain.layoutParams.height = pxToDP(50)\n                jiken3.customEditTextBoxHint.visibility = View.GONE\n                jiken3.redLine.visibility = View.GONE\n            }\n        }\n\n    }\n</code></pre>\n\n<p>This is the XML of the layout I'm reusing: </p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;EditText\n        android:paddingLeft=\"20dp\"\n        android:focusable=\"true\"\n        android:id=\"@+id/customEditTextBoxMain\"\n        android:hint=\"PlaceolderMain\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"50dp\"\n        android:background=\"@android:color/white\"\n        android:ems=\"10\"\n        android:inputType=\"textPersonName\"/&gt;\n\n    &lt;View\n        android:visibility=\"gone\"\n        android:id=\"@+id/redLine\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:background=\"@android:color/holo_red_light\"/&gt;\n\n    &lt;TextView\n        android:visibility=\"gone\"\n        android:textSize=\"10dp\"\n        android:id=\"@+id/customEditTextBoxHint\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"15dp\"\n        android:background=\"@android:color/white\"\n        android:hint=\"PlaceolderHint\"\n        android:paddingLeft=\"20dp\"\n        android:gravity=\"left\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Each inclusion of that layout is named \"jiken0\", \"jiken1\", and so on.</p>\n\n<p>I would like to reuse this function in the 4 instances that it needs to be used.</p>\n"}, {"tags": ["android", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 996, "user_id": 6168272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7020a2ed126c086e244188a91ba972?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjan", "link": "https://stackoverflow.com/users/6168272/ranjan"}, "edited": false, "score": 0, "creation_date": 1573008656, "post_id": 58722190, "comment_id": 103737187, "body": "You can use <code>collapsing toolbar layout</code> for this purpose."}, {"owner": {"reputation": 111, "user_id": 8473587, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6MPnBe7wb7s/AAAAAAAAAAI/AAAAAAAAARw/MdoZpe9vh-M/photo.jpg?sz=128", "display_name": "Hardik Vegad", "link": "https://stackoverflow.com/users/8473587/hardik-vegad"}, "edited": false, "score": 1, "creation_date": 1573037180, "post_id": 58722190, "comment_id": 103747627, "body": "<code>Collapsing Toolbar</code> is the best way to implement <a href=\"https://material.io/develop/android/components/collapsing-toolbar-layout/\" rel=\"nofollow noreferrer\">Referance Link</a>"}], "owner": {"reputation": 71, "user_id": 11453748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/784b2a99038dd82fa09659c6d3482916?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/11453748/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573014148, "creation_date": 1573006830, "last_edit_date": 1573014148, "question_id": 58722190, "link": "https://stackoverflow.com/questions/58722190/how-to-determine-user-reached-the-top-of-a-recyclerview", "title": "How to determine user reached the top of a RecyclerView?", "body": "<p>So what I'm trying to do is, whenever the user scrolls down in the recyclerview, the top part should be resized to a height of 0 and whenever the user scrolls to the very top of the recyclerview it should be resized back to normal size.</p>\n\n<p>This is the UI</p>\n\n<p><a href=\"https://i.stack.imgur.com/85Jk4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/85Jk4.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is how I handle it, but it's not working properly.</p>\n\n<pre><code>//sellerItems = the recyclerview\n        sellerItems.addOnScrollListener(object : RecyclerView.OnScrollListener() {\n            override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {\n                val manager = recyclerView.layoutManager as LinearLayoutManager\n                if (recyclerView.scrollState == 2 &amp;&amp; dy &lt; 0) {\n                    val pram = LinearLayout.LayoutParams(\n                            LinearLayout.LayoutParams.MATCH_PARENT,\n                            LinearLayout.LayoutParams.WRAP_CONTENT\n                    )\n                    userStuff.layoutParams = pram\n                }else if (dy &gt; 0) {\n                    val pram = LinearLayout.LayoutParams(\n                            LinearLayout.LayoutParams.MATCH_PARENT,\n                            0\n                    )\n                    userStuff.layoutParams = pram\n                }\n            }\n        })\n</code></pre>\n"}, {"tags": ["arrays", "firebase", "dictionary", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573009415, "post_id": 58721906, "comment_id": 103737316, "body": "It is better to create new node. Separate the <code>stats</code> from the node <code>races</code>"}, {"owner": {"reputation": 123, "user_id": 12329397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtqNjvDQtdA/AAAAAAAAAAI/AAAAAAAALgI/0MDXFMooclU/photo.jpg?sz=128", "display_name": "th3_razzer", "link": "https://stackoverflow.com/users/12329397/th3-razzer"}, "reply_to_user": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573019556, "post_id": 58721906, "comment_id": 103739554, "body": "So races is the collection, and Android is the document. You&#39;re suggesting make stats its own collection, or document? Each document will only possess perhaps 10~20 fields, if that (that&#39;s actually on the larger end)."}, {"owner": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573027005, "post_id": 58721906, "comment_id": 103742409, "body": "I suggest to make stats out from the races nodes."}, {"owner": {"reputation": 123, "user_id": 12329397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtqNjvDQtdA/AAAAAAAAAAI/AAAAAAAALgI/0MDXFMooclU/photo.jpg?sz=128", "display_name": "th3_razzer", "link": "https://stackoverflow.com/users/12329397/th3-razzer"}, "reply_to_user": {"reputation": 1429, "user_id": 9346054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-j6WnVqW4OkY/AAAAAAAAAAI/AAAAAAAACA4/BhLSwJ-JG78/photo.jpg?sz=128", "display_name": "Ticherhaz", "link": "https://stackoverflow.com/users/9346054/ticherhaz"}, "edited": false, "score": 0, "creation_date": 1573028044, "post_id": 58721906, "comment_id": 103742834, "body": "Is there an answer to my second question? Making documents in a collection into an array to use for a spinner?"}], "answers": [{"tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 2, "last_activity_date": 1573033888, "creation_date": 1573033888, "answer_id": 58727286, "question_id": 58721906, "link": "https://stackoverflow.com/questions/58721906/firestore-and-maps-arrays-document-list-to-array-in-kotlin/58727286#58727286", "title": "FireStore and maps/arrays, document-list to array in Kotlin", "body": "<blockquote>\n  <p>What would the best practice be to do this?</p>\n</blockquote>\n\n<p>If you want to get the value of your <code>str</code> property which is nested within your <code>stats</code> map, please change the following line of code:</p>\n\n<pre><code>oneOfTheTextViews.text = document.getString(\"str\")\n</code></pre>\n\n<p>to</p>\n\n<pre><code>oneOfTheTextViews.text = document.getString(\"stats.str\")\n</code></pre>\n\n<p>If your <code>str</code> property is a number and <strong>not</strong> a String, then instead of the above line of code please use this one:</p>\n\n<pre><code>oneOfTheTextViews.text = document.getLong(\"stats.str\")\n</code></pre>\n\n<blockquote>\n  <p>Should I not nest them at all?</p>\n</blockquote>\n\n<p>No, you can nest as many properties as you want within a <code>Map</code>.</p>\n\n<blockquote>\n  <p>Is there a way to get a list of document names?</p>\n</blockquote>\n\n<p>Yes, simply iterate the collection and get the document ids using <code>getId()</code> function.</p>\n"}], "owner": {"reputation": 123, "user_id": 12329397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtqNjvDQtdA/AAAAAAAAAAI/AAAAAAAALgI/0MDXFMooclU/photo.jpg?sz=128", "display_name": "th3_razzer", "link": "https://stackoverflow.com/users/12329397/th3-razzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 58727286, "answer_count": 1, "score": 1, "last_activity_date": 1573033888, "creation_date": 1573004589, "last_edit_date": 1573016399, "question_id": 58721906, "link": "https://stackoverflow.com/questions/58721906/firestore-and-maps-arrays-document-list-to-array-in-kotlin", "title": "FireStore and maps/arrays, document-list to array in Kotlin", "body": "<p>I've finally started to understand a lot of info regarding FireStore, but I'm wondering if I can get some assistance.</p>\n\n<p>If I had a setup similar to or like this:</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0races</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Android</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name:\u00a0Android</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0size:\u00a0medium</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stats\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0&lt;----\u00a0this\u00a0is\u00a0the\u00a0map</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0str:\u00a010</p>\n\n<p>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sex:\u00a012....\u00a0(more\u00a0values)</p>\n\n<p>How would I parse this? I am looking to make specific TextViews apply values found in the database so that I can simply update the database and my app will populate those values so that hard coding and code updating won't be nearly as troublesome in the future.</p>\n\n<p>I currently use something like this:</p>\n\n<pre><code>val androidRef = db.collection(\"races\").document(\"Android\") \nandroidRef.get().addOnSuccessListener { document -&gt;\nif (document != null) {\n     oneOfTheTextViews.text = document.getString(\"str\") \n} else { \n}\n</code></pre>\n\n<p>The issue is currently I can only seem to access from collection (races) / document (android) / then a single field (I have \"str\" set as a single field, not part of a map or array)</p>\n\n<p>What would the best practice be to do this? Should I not nest them at all? And if I can reference said nesting/mapping/array, what functions need to be called? (To be clear, I am not asking only whether or not it is possible - the reference guides and documents allude to such - but what property/class/method/etc needs to be called in order to access only one of those values or point to one of those values?).</p>\n\n<p>Second question: Is there a way to get a list of document names? If I have several races, and simply want to make a spinner or recycler view based on document names as part of a collection, can I read that to the app?</p>\n"}, {"tags": ["kotlin", "warnings"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1573001265, "post_id": 58721497, "comment_id": 103735733, "body": "I don&#39;t know kotlin, but it seems like your <code>42 + 42</code> is invalid, and the second piece of code that raises the error is more correct. It seems that with definitions using <code>{}</code>, you require an explicit <code>return</code>."}, {"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1573002539, "post_id": 58721497, "comment_id": 103735978, "body": "Your first function is not inferred as an <code>Int</code>, Kotlin infers that as <code>Unit</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1573024187, "post_id": 58721609, "comment_id": 103741204, "body": "your returnInt method does not return Int - it just adds two numbers together and does nothing with them. The <code>fun stuff() = ...</code> notation equals <code>fun stuff() { return ... }</code>. In both cases in your first post you&#39;re missing a <code>return</code>"}, {"owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "edited": false, "score": 0, "creation_date": 1573030469, "post_id": 58721609, "comment_id": 103743908, "body": "Call to <code>returnInt</code> shouldn&#39;t throw an exception. Are you sure your are passing <code>returnInt()</code> to <code>String.format</code> and not method reference <code>returnInt</code>?"}], "tags": [], "owner": {"reputation": 41, "user_id": 12329166, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xxwT7Iz1bT8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd3o_KHtKBavy50q6ouo3CrGSugWQ/photo.jpg?sz=128", "display_name": "Alek Sung", "link": "https://stackoverflow.com/users/12329166/alek-sung"}, "is_accepted": false, "score": 1, "last_activity_date": 1573001920, "creation_date": 1573001920, "answer_id": 58721609, "question_id": 58721497, "link": "https://stackoverflow.com/questions/58721497/why-cant-kotlin-infer-return-type-of-a-boolean-expression-using/58721609#58721609", "title": "Why can&#39;t Kotlin infer return type of a Boolean expression using ==?", "body": "<p>Silly me. </p>\n\n<p>Kotlin is able to infer such statements using an equals sign in the function declaration:</p>\n\n<pre><code>fun returnInt() =\n    42 + 24\n\n\nfun returnBoolean() =\n    someBool == otherBool\n\n\n</code></pre>\n\n<p>As a beginner to Kotlin, I find it interesting that <code>returnInt()</code> does not get a warning, but if you try to use it during runtime (in my case I passed it as an argument to <code>java.lang.String.format</code>), it will throw an exception.</p>\n"}], "owner": {"reputation": 41, "user_id": 12329166, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xxwT7Iz1bT8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd3o_KHtKBavy50q6ouo3CrGSugWQ/photo.jpg?sz=128", "display_name": "Alek Sung", "link": "https://stackoverflow.com/users/12329166/alek-sung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573001920, "creation_date": 1573000935, "question_id": 58721497, "link": "https://stackoverflow.com/questions/58721497/why-cant-kotlin-infer-return-type-of-a-boolean-expression-using", "title": "Why can&#39;t Kotlin infer return type of a Boolean expression using ==?", "body": "<p>From what I understand, Kotlin should be able to infer the return type of a function based on the last expression used in the function body.</p>\n\n<pre><code>fun returnInt() {\n    42 + 24\n}\n</code></pre>\n\n<p>However, when I create a function expecting the result of an equality (==) operation such as:</p>\n\n<pre><code>fun returnBoolean() {\n    someBool == otherBool\n}\n</code></pre>\n\n<p>I get the following warning: </p>\n\n<blockquote>\n  <p>Unused equals expression</p>\n</blockquote>\n\n<p>I can resolve this by adding a return type and a return statement:</p>\n\n<pre><code>fun returnBoolean(): Boolean {\n    return someBool == otherBool\n}\n</code></pre>\n\n<p>But I was just wondering why <code>returnBoolean()</code> gets an 'Unused equals expression' and <code>returnInt()</code> does not. </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 4775478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206673959474453/picture?type=large", "display_name": "Margaro Mart&#237;nez", "link": "https://stackoverflow.com/users/4775478/margaro-mart%c3%adnez"}, "edited": false, "score": 0, "creation_date": 1572993878, "post_id": 58720582, "comment_id": 103733894, "body": "You should check out this <a href=\"https://stackoverflow.com/questions/44200075/val-and-var-in-kotlin\" title=\"val and var in kotlin\">stackoverflow.com/questions/44200075/val-and-var-in-kotlin</a>"}, {"owner": {"reputation": 49, "user_id": 10299831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJBrp.jpg?s=128&g=1", "display_name": "Gandeloft", "link": "https://stackoverflow.com/users/10299831/gandeloft"}, "edited": false, "score": 1, "creation_date": 1572993967, "post_id": 58720582, "comment_id": 103733914, "body": "Thank you. Just started practicing Kotlin after Java since 2 days ago."}], "tags": [], "owner": {"reputation": 90, "user_id": 4775478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206673959474453/picture?type=large", "display_name": "Margaro Mart&#237;nez", "link": "https://stackoverflow.com/users/4775478/margaro-mart%c3%adnez"}, "is_accepted": true, "score": 2, "last_activity_date": 1572994150, "last_edit_date": 1572994150, "creation_date": 1572993809, "answer_id": 58720582, "question_id": 58720406, "link": "https://stackoverflow.com/questions/58720406/unable-to-change-value-of-an-initialised-primitive-type-using-kotlin/58720582#58720582", "title": "Unable to change value of an initialised primitive type using Kotlin", "body": "<p>You need to use </p>\n\n<pre><code>var scale = 0f\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>val scale = 0f\n</code></pre>\n\n<p><code>val</code> is immutable and it can not change over the time</p>\n\n<p><code>var</code> can change over the time</p>\n\n<p>If you came from java. </p>\n\n<p><code>val scale = 0f</code> will be the equivalent for </p>\n\n<p><code>final float scale = 0f;</code></p>\n"}], "owner": {"reputation": 49, "user_id": 10299831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJBrp.jpg?s=128&g=1", "display_name": "Gandeloft", "link": "https://stackoverflow.com/users/10299831/gandeloft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 58720582, "answer_count": 1, "score": 0, "last_activity_date": 1573029296, "creation_date": 1572992778, "last_edit_date": 1573029296, "question_id": 58720406, "link": "https://stackoverflow.com/questions/58720406/unable-to-change-value-of-an-initialised-primitive-type-using-kotlin", "title": "Unable to change value of an initialised primitive type using Kotlin", "body": "<p>I can't change the value of an initialised variable.</p>\n\n<p>I tried googling the problem to no avail.\nFloat is a primitive type so it cannot be lateinit.</p>\n\n<pre><code>class RegistrationActivity : AppCompatActivity() {\n\n    val scale = 0f\n\n    public override fun onStart() {\n        super.onStart()\n        scale = this.resources.displayMetrics.density\n    }\n}\n</code></pre>\n\n<p>I expect to be able to initialise the \"scale\" variable outside of a method body so that it can be used by other methods, but in my attempt I'm met with the \"Val cannot be reassigned\" as an error inside of the \"onStart()\" method when I hover over \"scale\" in \"scale = this.resources.displayMetrics.density\".</p>\n"}, {"tags": ["android", "kotlin", "android-livedata", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 3033, "user_id": 2225087, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/123c3602d9e6aaa14cb8ad054dc07bbb?s=128&d=identicon&r=PG", "display_name": "Val Okafor", "link": "https://stackoverflow.com/users/2225087/val-okafor"}, "edited": false, "score": 1, "creation_date": 1572994278, "post_id": 58720384, "comment_id": 103734000, "body": "Thank you, actually, it ended up being an issue with my core-ktx version, I was using a wrong version and upgrading to version &#39;1.2.0-beta01&#39; fixed it implementation &quot;androidx.core:core-ktx:$core_ktx&quot; I appreciate your pointer so I accepted it as an answer"}], "tags": [], "owner": {"reputation": 1370, "user_id": 6470661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081956675223709/picture?type=large", "display_name": "Abed", "link": "https://stackoverflow.com/users/6470661/abed"}, "is_accepted": true, "score": 1, "last_activity_date": 1572992630, "creation_date": 1572992630, "answer_id": 58720384, "question_id": 58720159, "link": "https://stackoverflow.com/questions/58720159/unable-to-get-my-first-kotlin-coroutine-function-to-work/58720384#58720384", "title": "Unable to get my First Kotlin Coroutine Function to Work", "body": "<p>It looks like it's an issue in Kotlin Coroutines library 1.3.2 take a look at this <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/1532#issue-493167262\" rel=\"nofollow noreferrer\">issue</a>, so as a solution, try to downgrade your android coroutine library to version 1.3.0 as @ispbox said in this <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/1532#issuecomment-536299897\" rel=\"nofollow noreferrer\">comment</a>.</p>\n"}], "owner": {"reputation": 3033, "user_id": 2225087, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/123c3602d9e6aaa14cb8ad054dc07bbb?s=128&d=identicon&r=PG", "display_name": "Val Okafor", "link": "https://stackoverflow.com/users/2225087/val-okafor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58720384, "answer_count": 1, "score": 0, "last_activity_date": 1572992630, "creation_date": 1572991404, "question_id": 58720159, "link": "https://stackoverflow.com/questions/58720159/unable-to-get-my-first-kotlin-coroutine-function-to-work", "title": "Unable to get my First Kotlin Coroutine Function to Work", "body": "<p>I am struggling to get my first Coroutine function to work! I have a blocking function called GetContacts, which fetches device contacts. And I want to update a Livedata with the result of this query. This query works fine on its own, but I can't seem to get it to work inside Coroutine.</p>\n\n<p>Here is my code</p>\n\n<pre><code>   val contactsList: MutableLiveData&lt;List&lt;ContactModel&gt;&gt; = MutableLiveData()\n\n    fun getContactList(){\n        viewModelScope.launch() {\n            var contacts: List&lt;ContactModel&gt;? = null\n            withContext(Dispatchers.IO){\n                contacts = getListOfContactsOnDeviceAsync()\n            }\n            contactsList.value = contacts\n        }\n    }\n\n    private fun getListOfContactsOnDeviceAsync(): List&lt;ContactModel&gt; =  GetContactHelper.getContacts()\n</code></pre>\n\n<p>I am getting error \"Module with the Main dispatcher is missing. Add dependency providing the Main dispatcher, e.g. 'kotlinx-coroutines-android'\" when I clearly have Android Coroutine dependency added.</p>\n\n<pre><code>dependencies {\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.2'}\n</code></pre>\n\n<p>What am I missing? Any help appreciated!</p>\n"}, {"tags": ["java", "xml", "parsing", "kotlin", "xml-parsing"], "comments": [{"owner": {"reputation": 1600, "user_id": 5551938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e761917963cc4945f5399110aa6ea87e?s=128&d=identicon&r=PG&f=1", "display_name": "kimbert", "link": "https://stackoverflow.com/users/5551938/kimbert"}, "edited": false, "score": 0, "creation_date": 1573515024, "post_id": 58719890, "comment_id": 103899513, "body": "This style of XML is more common that you might think, unfortunately. You could transform it using XSL into a format that you like, and then write simpler Java."}], "owner": {"reputation": 1278, "user_id": 7822426, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5xCPplMlhFk/AAAAAAAAAAI/AAAAAAAAPkU/PR9rcRkEtvg/photo.jpg?sz=128", "display_name": "tobiasfried", "link": "https://stackoverflow.com/users/7822426/tobiasfried"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572990083, "creation_date": 1572990083, "question_id": 58719890, "link": "https://stackoverflow.com/questions/58719890/parsing-a-flat-xml-document-in-kotlin", "title": "Parsing a flat XML document in Kotlin", "body": "<p>I'm dealing with a poorly structured XML scheme in a little personal project, and am stuck on an elegant way to parse out elements from what should be hierarchical but is instead a flat data structure. My document looks something like this:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;resources&gt;\n  &lt;category type=\"first\" /&gt;\n  &lt;item name=\"foo\" /&gt;\n  &lt;item name=\"bar\" /&gt;\n  &lt;item name=\"baz\" /&gt;\n\n  &lt;category type=\"second\" /&gt;\n  &lt;item name=\"qux\" /&gt;\n  &lt;item name=\"fizz\" /&gt;\n\n  ...\n&lt;/resources&gt;\n</code></pre>\n\n<p>Ideally I'd end up with this as a <code>Map&lt;String, List&lt;String&gt;&gt;</code> where the Keys are the category types and the Values are the lists of item names. The <code>org.w3c.dom</code> APIs are just...terrible to use, from a beginner's perspective.</p>\n\n<p>How can I do this? Are there better XML parsing libraries out there?</p>\n"}, {"tags": ["android", "function", "kotlin", "companion-object", "kotlin-companion"], "answers": [{"tags": [], "owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "is_accepted": true, "score": 3, "last_activity_date": 1572984554, "last_edit_date": 1572984554, "creation_date": 1572984241, "answer_id": 58718645, "question_id": 58718204, "link": "https://stackoverflow.com/questions/58718204/kotlin-what-does-companion-object-fun-do/58718645#58718645", "title": "Kotlin - What does companion object fun do?", "body": "<pre><code>class Test {\n    companion object fun classFoo() {\n        //do something\n    }\n}\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>class Test {\n    companion object // Add \"{ }\" to make it explicit that the object body is empty\n\n    fun classFoo() {\n        //do something\n    }\n}\n</code></pre>\n\n<p>i.e. a class with an empty companion object (which is valid syntax) and a normal member function, callable in the usual way:</p>\n\n<pre><code>Test().classFoo()\n</code></pre>\n"}], "owner": {"reputation": 15235, "user_id": 505152, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c988366574e6e5f4fa0b3e01faa90a86?s=128&d=identicon&r=PG", "display_name": "htafoya", "link": "https://stackoverflow.com/users/505152/htafoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 58718645, "answer_count": 1, "score": 4, "last_activity_date": 1572984554, "creation_date": 1572982251, "question_id": 58718204, "link": "https://stackoverflow.com/questions/58718204/kotlin-what-does-companion-object-fun-do", "title": "Kotlin - What does companion object fun do?", "body": "<p>Declaring a \"<em>static</em>\" function in Kotlin is done using:</p>\n\n<pre><code>companion object {\n    fun classFoo() {\n        //do something\n    }\n}\n</code></pre>\n\n<p>However I was mistakenly coding</p>\n\n<pre><code>companion object fun classFoo() {\n     //do something\n}\n</code></pre>\n\n<p>Expecting the code to do the same, if only one static function was required.</p>\n\n<p>The compiler doesn't argue about that, and it seems to be valid as the compiler expects a <code>fun</code> name and parameters. But I never found how to call that function from other class.</p>\n\n<p>What does that form of <code>companion object fun</code> do? there is no doc available about that.</p>\n"}, {"tags": ["kotlin", "scheduling", "ktor"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12185656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e371a97fd246c63501bbcea99c669a?s=128&d=identicon&r=PG&f=1", "display_name": "Anesh P.", "link": "https://stackoverflow.com/users/12185656/anesh-p"}, "edited": false, "score": 0, "creation_date": 1572989461, "post_id": 58718428, "comment_id": 103732331, "body": "awesome this works.  Currently I am starting the Runnable when an api call is made.  Is there a way to have the runnable running at all times?"}, {"owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "reply_to_user": {"reputation": 85, "user_id": 12185656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e371a97fd246c63501bbcea99c669a?s=128&d=identicon&r=PG&f=1", "display_name": "Anesh P.", "link": "https://stackoverflow.com/users/12185656/anesh-p"}, "edited": false, "score": 0, "creation_date": 1573022922, "post_id": 58718428, "comment_id": 103740698, "body": "Could you please elaborate on what you mean by &quot;runnable running at all times&quot;? You mean as soon as you create <code>Scheduler</code>? You could create <code>init {}</code> block and <code>scheduleExecution</code> in it"}, {"owner": {"reputation": 65, "user_id": 8440284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HQx8b.jpg?s=128&g=1", "display_name": "Eshan I.", "link": "https://stackoverflow.com/users/8440284/eshan-i"}, "edited": false, "score": 0, "creation_date": 1593347669, "post_id": 58718428, "comment_id": 110742634, "body": "Evgeny, please provide how to call it from running thread"}], "tags": [], "owner": {"reputation": 1062, "user_id": 4028009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d9e87ce304217b5b34a44059e5fd77?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny  Bovykin", "link": "https://stackoverflow.com/users/4028009/evgeny-bovykin"}, "is_accepted": true, "score": 2, "last_activity_date": 1573022895, "last_edit_date": 1573022895, "creation_date": 1572983229, "answer_id": 58718428, "question_id": 58717774, "link": "https://stackoverflow.com/questions/58717774/how-to-schedule-tasks-in-ktor-microservice-app/58718428#58718428", "title": "How to schedule tasks in Ktor microservice app", "body": "<p>Ktor doesn't have built-in scheduler, so you'd have to implement your own</p>\n\n<p>I've written small class using Java's Executors for this task for myself, you might find it useful</p>\n\n<pre><code>class Scheduler(private val task: Runnable) {\n    private val executor = Executors.newScheduledThreadPool(1)!!\n\n    fun scheduleExecution(every: Every) {\n\n        val taskWrapper = Runnable {\n            task.run()\n        }\n\n        executor.scheduleWithFixedDelay(taskWrapper, every.n, every.n, every.unit)\n    }\n\n\n    fun stop() {\n        executor.shutdown()\n\n        try {\n            executor.awaitTermination(1, TimeUnit.HOURS)\n        } catch (e: InterruptedException) {\n        }\n\n    }\n}\n\ndata class Every(val n: Long, val unit: TimeUnit)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 12185656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e371a97fd246c63501bbcea99c669a?s=128&d=identicon&r=PG&f=1", "display_name": "Anesh P.", "link": "https://stackoverflow.com/users/12185656/anesh-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 58718428, "answer_count": 1, "score": 6, "last_activity_date": 1573022895, "creation_date": 1572980183, "question_id": 58717774, "link": "https://stackoverflow.com/questions/58717774/how-to-schedule-tasks-in-ktor-microservice-app", "title": "How to schedule tasks in Ktor microservice app", "body": "<p>I am trying to schedule a task in my Ktor application, however I have not been able to find anything online about how to do this.  Does anyone have any recommendations or been able to do this before?</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 2394, "user_id": 5974659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ab982a491d36319cbcde99792f0123?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Mehar", "link": "https://stackoverflow.com/users/5974659/anas-mehar"}, "edited": false, "score": 0, "creation_date": 1572979074, "post_id": 58717467, "comment_id": 103728054, "body": "Share your code snippets to."}], "answers": [{"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1572983392, "creation_date": 1572983392, "answer_id": 58718467, "question_id": 58717467, "link": "https://stackoverflow.com/questions/58717467/how-to-retrieving-key-and-value-from-firebase-and-store-them-in-two-separate-var/58718467#58718467", "title": "How to retrieving key and value from firebase and store them in two separate variables", "body": "<p>First reach to child mode <code>users</code> and then add event listener.</p>\n\n<pre><code>reference.child(\"users\").addValueEventListener(readData)\n</code></pre>\n\n<p>And then try to parse <code>key</code> and <code>value</code> inside <code>onDataChange</code></p>\n\n<pre><code>for(data in p0.children) { \n\n    val key = data.key\n    val value = data.getValue(String::class.java)\n\n    Log.i(\"LIST IN FIREBASE\",data.toString())\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12304301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v-u5R54FY8U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf3-iJUwn7kaT2VBhZFyl-bKZxKPA/photo.jpg?sz=128", "display_name": "Abdalrazag Al-Shrofat", "link": "https://stackoverflow.com/users/12304301/abdalrazag-al-shrofat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572983392, "creation_date": 1572978880, "last_edit_date": 1572982431, "question_id": 58717467, "link": "https://stackoverflow.com/questions/58717467/how-to-retrieving-key-and-value-from-firebase-and-store-them-in-two-separate-var", "title": "How to retrieving key and value from firebase and store them in two separate variables", "body": "<p>I am create login activity it's consist two Edit-text username and password\nAnd I want to check login username and password from firebase database real-time \nI am saved this inside object name 'user' like this </p>\n\n<pre><code>{\n  \"users\" : {\n    \"admin\" : \"a\",\n    \"table1\" : \"t1\",\n    \"table2\" : \"t2\",\n    \"table3\" : \"t3\",\n    \"table4\" : \"t4\",\n    \"table5\" : \"t5\",\n    \"table6\" : \"t6\",\n    \"table7\" : \"t7\",\n    \"table8\" : \"t8\",\n    \"table9\" : \"t9\",\n    \"table10\" : \"t10\",\n    }\n}\n</code></pre>\n\n<p>this code kotlin </p>\n\n<pre><code>    private lateinit var database:FirebaseDatabase\n    private lateinit var reference: DatabaseReference\n\n    // initlize \n    database = FirebaseDatabase.getInstance()\n    reference = database.getReference()\n\n    inner class ReadData : ValueEventListener {\n        override fun onCancelled(p0: DatabaseError) {\n            Toast.makeText(applicationContext , p0.message.toString() ,Toast.LENGTH_LONG).show()\n        }\n\n        override fun onDataChange(p0: DataSnapshot) {\n\n            for(data in p0.children){\n\n               Log.i(\"LIST IN FIREBASE\",data.toString())\n\n            }\n        }\n    }\n}\n\nfun login(view: View) {\n    var readData = ReadData()\n    reference.addValueEventListener(readData)\n}\n</code></pre>\n\n<p>I can access to key('admin','table1',...etc),\nbut I cannot access to value ('a','t1',...etc) \nhow to do check login like this structure  ?</p>\n\n<p>Don't care about syntax kotlin or java\nwrite syntax code as you like</p>\n"}, {"tags": ["android", "kotlin", "nullpointerexception", "garbage-collection", "finalizer"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1573034159, "post_id": 58717395, "comment_id": 103745997, "body": "What&#39;s the code that produces this exception?"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1573040123, "post_id": 58717395, "comment_id": 103749206, "body": "@AlexMamo does not point to specific code as is normally done, also updated question"}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 1, "creation_date": 1573041207, "post_id": 58717395, "comment_id": 103749808, "body": "@AlexMamo i think that my problem with <code>ConscryptFileDescriptorSocket</code>, namely with method <code>finalize()</code>"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1573041871, "post_id": 58717395, "comment_id": 103750171, "body": "It&#39;s a good question but unfortunately, in this case, I cannot be much of a help."}, {"owner": {"reputation": 672, "user_id": 4148323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-G7s1F5hNxOc/AAAAAAAAAAI/AAAAAAAAARw/KVliLqS-m4w/photo.jpg?sz=128", "display_name": "Anukool srivastav", "link": "https://stackoverflow.com/users/4148323/anukool-srivastav"}, "edited": false, "score": 0, "creation_date": 1611117683, "post_id": 58717395, "comment_id": 116344324, "body": "@Morozov, Did you got any solution for this ?"}], "answers": [{"comments": [{"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1573131922, "post_id": 58733642, "comment_id": 103787169, "body": "as I understand it, I need to check in all my dependencies if I am not using this old Conscrypt library?  Also yours answer is copying my link which i found."}, {"owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "reply_to_user": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1573159299, "post_id": 58733642, "comment_id": 103800906, "body": "Yeah... As you surely noticed, the error you are seeing cannot be caused by the code at that link.  I definitely think you need to check your dependencies."}, {"owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "edited": false, "score": 0, "creation_date": 1573227699, "post_id": 58733642, "comment_id": 103825180, "body": "updated question, and i didn&#39;t find this library in my dependencies"}, {"owner": {"reputation": 1844, "user_id": 10376604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yl4id.jpg?s=128&g=1", "display_name": "GrahamD", "link": "https://stackoverflow.com/users/10376604/grahamd"}, "edited": false, "score": 0, "creation_date": 1573988755, "post_id": 58733642, "comment_id": 104063367, "body": "I am getting the same error in my Flutter app, when I disconnect from the internet and then reconnect. The dependencies I have set up are based on the instructions of the various Flutter packages I use, so any guidance on how to check all dependencies would be appreciated."}], "tags": [], "owner": {"reputation": 6313, "user_id": 945226, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ek7RV.png?s=128&g=1", "display_name": "G. Blake Meike", "link": "https://stackoverflow.com/users/945226/g-blake-meike"}, "is_accepted": false, "score": 0, "last_activity_date": 1573577281, "last_edit_date": 1573577281, "creation_date": 1573054390, "answer_id": 58733642, "question_id": 58717395, "link": "https://stackoverflow.com/questions/58717395/null-reference-used-for-synchronization-monitor-enter/58733642#58733642", "title": "Null reference used for synchronization (monitor-enter)", "body": "<p>Perhaps you are using an older version of Conscrypt?  That bug appears to have been fixed, about two years ago, here:</p>\n\n<p><a href=\"https://github.com/google/conscrypt/blob/803bfd2af9f4bffc4fbc89f78844c7c31d12859f/common/src/main/java/org/conscrypt/ConscryptFileDescriptorSocket.java#L1079\" rel=\"nofollow noreferrer\">https://github.com/google/conscrypt/blob/803bfd2af9f4bffc4fbc89f78844c7c31d12859f/common/src/main/java/org/conscrypt/ConscryptFileDescriptorSocket.java#L1079</a></p>\n\n<p><em>Amended to add:</em>\nThe dependency graph is very helpful.  If that is complete (all transitive dependencies) then you do not include the conscrypt library at all.  That would imply that some <em>other</em> library in your dependency chain has included the conscrypt <em>source</em> directly.  That would explain a lot.</p>\n\n<p>A quick grep of the <code>androidx</code> sources suggests that they are not the problem.</p>\n"}], "owner": {"reputation": 3391, "user_id": 6387618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f5af475c8ce7bf4b9d300e40a4f9b6c3?s=128&d=identicon&r=PG", "display_name": "Morozov", "link": "https://stackoverflow.com/users/6387618/morozov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1786, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1573577281, "creation_date": 1572978571, "last_edit_date": 1573576596, "question_id": 58717395, "link": "https://stackoverflow.com/questions/58717395/null-reference-used-for-synchronization-monitor-enter", "title": "Null reference used for synchronization (monitor-enter)", "body": "<p>When I turn off my Internet connection and log out from Firebase app, I can't return my app.</p>\n\n<p>Also get next error:</p>\n\n<pre><code>2019-11-05 20:26:19.364 5593-5611/com.mandarine.target_list E/System:\n    Uncaught exception thrown by finalizer 2019-11-05 20:26:19.3655593-5611/com.mandarine.target_list E/System:\njava.lang.NullPointerException: Null reference used for synchronization (monitor-enter)\n        at com.android.org.conscrypt.ConscryptFileDescriptorSocket.finalize(ConscryptFileDescriptorSocket.java:1053)\n        at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:252)\n        at java.lang.Daemons$FinalizerDaemon.runInternal(Daemons.java:239)\n        at java.lang.Daemons$Daemon.run(Daemons.java:105)\n        at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n\n<p>It only happens when I turn off the Internet.</p>\n\n<p>Also i found this: <a href=\"https://github.com/google/conscrypt/blob/master/common/src/main/java/org/conscrypt/ConscryptFileDescriptorSocket.java#L1079\" rel=\"nofollow noreferrer\">https://github.com/google/conscrypt/blob/master/common/src/main/java/org/conscrypt/ConscryptFileDescriptorSocket.java#L1079</a></p>\n\n<p>But don't really know what to do gotta get</p>\n\n<p>Also i made <code>/gradlew app:androidDependencies</code> and get:</p>\n\n<pre><code>&gt; releaseUnitTestRuntimeClasspath - Dependencies for runtime/packaging\n&gt; +--- org.jetbrains.kotlin:kotlin-android-extensions-runtime:1.3.50@jar\n&gt; +--- org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.50@jar\n&gt; +--- com.firebaseui:firebase-ui-auth:4.3.1@aar\n&gt; +--- androidx.navigation:navigation-ui-ktx:2.0.0@aar\n&gt; +--- androidx.navigation:navigation-ui:2.0.0@aar\n&gt; +--- com.google.android.material:material:1.0.0@aar\n&gt; +--- me.zhanghai.android.materialprogressbar:library:1.4.2@aar\n&gt; +--- androidx.appcompat:appcompat:1.0.2@aar\n&gt; +--- androidx.constraintlayout:constraintlayout:1.1.3@aar\n&gt; +--- androidx.cardview:cardview:1.0.0@aar\n&gt; +--- com.google.firebase:firebase-auth:16.1.0@aar\n&gt; +--- com.google.firebase:firebase-messaging:17.4.0@aar\n&gt; +--- com.google.firebase:firebase-database:16.0.6@aar\n&gt; +--- androidx.recyclerview:recyclerview:1.0.0@aar\n&gt; +--- com.jakewharton.threetenabp:threetenabp:1.2.1@aar\n&gt; +--- androidx.navigation:navigation-fragment-ktx:2.0.0@aar\n&gt; +--- junit:junit:4.12@jar\n&gt; +--- org.mockito:mockito-core:2.16.0@jar\n&gt; +--- androidx.navigation:navigation-runtime-ktx:2.0.0@aar\n&gt; +--- androidx.navigation:navigation-common-ktx:2.0.0@aar\n&gt; +--- org.jetbrains.kotlin:kotlin-stdlib:1.3.50@jar\n&gt; +--- androidx.lifecycle:lifecycle-extensions:2.0.0@aar\n&gt; +--- com.google.android.gms:play-services-flags:16.0.1@aar\n&gt; +--- com.google.firebase:firebase-auth-interop:16.0.1@aar\n&gt; +--- com.google.android.gms:play-services-auth:16.0.1@aar\n&gt; +--- com.google.android.gms:play-services-auth-api-phone:16.0.0@aar\n&gt; +--- com.google.android.gms:play-services-auth-base:16.0.0@aar\n&gt; +--- com.google.firebase:firebase-iid:17.1.0@aar\n&gt; +--- com.google.firebase:firebase-iid-interop:16.0.1@aar\n&gt; +--- com.google.android.gms:play-services-base:16.0.1@aar\n&gt; +--- com.google.firebase:firebase-common:16.0.4@aar\n&gt; +--- com.google.android.gms:play-services-tasks:16.0.1@aar\n&gt; +--- com.google.firebase:firebase-measurement-connector:17.0.1@aar\n&gt; +--- com.google.android.gms:play-services-stats:16.0.1@aar\n&gt; +--- com.google.android.gms:play-services-basement:16.1.0@aar\n&gt; +--- androidx.legacy:legacy-support-v4:1.0.0@aar\n&gt; +--- androidx.navigation:navigation-fragment:2.0.0@aar\n&gt; +--- androidx.fragment:fragment:1.0.0@aar\n&gt; +--- androidx.vectordrawable:vectordrawable-animated:1.0.0@aar\n&gt; +--- androidx.browser:browser:1.0.0@aar\n&gt; +--- androidx.legacy:legacy-support-core-ui:1.0.0@aar\n&gt; +--- androidx.navigation:navigation-runtime:2.0.0@aar\n&gt; +--- androidx.legacy:legacy-support-core-utils:1.0.0@aar\n&gt; +--- androidx.vectordrawable:vectordrawable:1.0.1@aar\n&gt; +--- androidx.transition:transition:1.0.0@aar\n&gt; +--- androidx.loader:loader:1.0.0@aar\n&gt; +--- androidx.viewpager:viewpager:1.0.0@aar\n&gt; +--- androidx.coordinatorlayout:coordinatorlayout:1.0.0@aar\n&gt; +--- androidx.drawerlayout:drawerlayout:1.0.0@aar\n&gt; +--- androidx.slidingpanelayout:slidingpanelayout:1.0.0@aar\n&gt; +--- androidx.customview:customview:1.0.0@aar\n&gt; +--- androidx.swiperefreshlayout:swiperefreshlayout:1.0.0@aar\n&gt; +--- androidx.asynclayoutinflater:asynclayoutinflater:1.0.0@aar\n&gt; +--- androidx.media:media:1.0.0@aar\n&gt; +--- androidx.navigation:navigation-common:2.0.0@aar\n&gt; +--- androidx.core:core:1.0.1@aar\n&gt; +--- androidx.versionedparcelable:versionedparcelable:1.0.0@aar\n&gt; +--- androidx.collection:collection:1.0.0@jar\n&gt; +--- androidx.cursoradapter:cursoradapter:1.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-process:2.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-service:2.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-runtime:2.0.0@aar\n&gt; +--- androidx.documentfile:documentfile:1.0.0@aar\n&gt; +--- androidx.localbroadcastmanager:localbroadcastmanager:1.0.0@aar\n&gt; +--- androidx.print:print:1.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-viewmodel:2.0.0@aar\n&gt; +--- androidx.interpolator:interpolator:1.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-livedata:2.0.0@aar\n&gt; +--- androidx.lifecycle:lifecycle-livedata-core:2.0.0@aar\n&gt; +--- androidx.arch.core:core-runtime:2.0.0@aar\n&gt; +--- androidx.arch.core:core-common:2.0.0@jar\n&gt; +--- androidx.lifecycle:lifecycle-common:2.0.0@jar\n&gt; +--- androidx.annotation:annotation:1.0.0@jar\n&gt; +--- androidx.constraintlayout:constraintlayout-solver:1.1.3@jar\n&gt; +--- com.google.firebase:firebase-database-collection:16.0.1@aar\n&gt; +--- org.threeten:threetenbp:1.4.0:no-tzdb@jar\n&gt; +--- org.hamcrest:hamcrest-core:1.3@jar\n&gt; +--- net.bytebuddy:byte-buddy:1.7.9@jar\n&gt; +--- net.bytebuddy:byte-buddy-agent:1.7.9@jar\n&gt; +--- org.objenesis:objenesis:2.6@jar\n&gt; +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.3.50@jar\n&gt;  \\--- org.jetbrains:annotations:13.0@jar\n</code></pre>\n"}, {"tags": ["android", "kotlin", "charts", "mpandroidchart"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 1659169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wfEm.jpg?s=128&g=1", "display_name": "John S", "link": "https://stackoverflow.com/users/1659169/john-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1574359571, "creation_date": 1574359571, "answer_id": 58981156, "question_id": 58716724, "link": "https://stackoverflow.com/questions/58716724/mpandroidchart-is-it-possible-to-disable-highlight-on-tap-without-disabling-onv/58981156#58981156", "title": "MPAndroidChart, Is it possible to disable highlight on tap without disabling onValueSelected?", "body": "<p>I found the solution, for each dataset you have on your chart:</p>\n\n<pre><code>        setDrawHorizontalHighlightIndicator(false)\n        setDrawVerticalHighlightIndicator(false)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 1659169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wfEm.jpg?s=128&g=1", "display_name": "John S", "link": "https://stackoverflow.com/users/1659169/john-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 2, "accepted_answer_id": 58981156, "answer_count": 1, "score": 0, "last_activity_date": 1574359571, "creation_date": 1572975649, "question_id": 58716724, "link": "https://stackoverflow.com/questions/58716724/mpandroidchart-is-it-possible-to-disable-highlight-on-tap-without-disabling-onv", "title": "MPAndroidChart, Is it possible to disable highlight on tap without disabling onValueSelected?", "body": "<p>Is it possible to hide/disable highlight after tapping on an entry on the chart while keeping tapping functionality on? In order to enable tapping entries on the chart and displaying a custom dialog, I had to set:</p>\n\n<pre><code>isHighlightPerTapEnabled = true\n</code></pre>\n\n<p>This works fine but after tapping, a yellow highlight (cross-hairs) is visible on the chart. I am using linedatasets to draw on the graph and i've tried toggling:</p>\n\n<pre><code>setDrawHighlightIndicators = false\n</code></pre>\n\n<p>but this doesn't work.</p>\n\n<p>I'm currently using: v3.1.0</p>\n"}, {"tags": ["java", "generics", "inheritance", "kotlin", "polymorphism"], "comments": [{"owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "edited": false, "score": 2, "creation_date": 1572976765, "post_id": 58715483, "comment_id": 103727048, "body": "The main benefit of this model is that you only have to create one <code>Generic&lt;Q, R&gt;</code> interface instead of <code>IntCalculator</code>, <code>FloatCalculator</code> and <code>Calculator</code> interfaces. <i>P.S. I assume that you <a href=\"https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface\">program to an interface</a>, and therefore you have to create either  <code>Generic&lt;Q, R&gt;</code> or <code>IntCalculator</code>, <code>FloatCalculator</code> and <code>Calculator</code></i>."}], "answers": [{"tags": [], "owner": {"reputation": 853, "user_id": 5434860, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/821a186146724ec1ffd9e596bc0051ea?s=128&d=identicon&r=PG&f=1", "display_name": "retodaredevil", "link": "https://stackoverflow.com/users/5434860/retodaredevil"}, "is_accepted": true, "score": 1, "last_activity_date": 1573000680, "creation_date": 1573000680, "answer_id": 58721465, "question_id": 58715483, "link": "https://stackoverflow.com/questions/58715483/non-generic-subclasses-inherits-implements-generic-superclass-interface/58721465#58721465", "title": "Non-Generic Subclasses inherits (implements) Generic Superclass (Interface)", "body": "<p>With your current set up, I would argue that having the <code>Generic</code> interface isn't completely necessary. However, as you extend your code, I think that it can be helpful.</p>\n\n<p>One advantage of using that right now is that you now have two similar classes with consistent method names and similar method signatures. By inheriting <code>Generic</code>, it might save a typo from typing <code>caluclate</code> instead of <code>calculate</code>. Some may not consider this a valid reason, but I would argue that using that interface makes your code more consistent in this case.</p>\n\n<p>The advantage of using <code>Generic</code> comes when you actually need to reference it.</p>\n\n<pre><code>interface Calculator&lt;T : Number, K : Generic&lt;T&gt;&gt; {\n    fun calculate(generic: K): T\n}\nclass DefaultCalculator...\n</code></pre>\n\n<p>The above code is just an example and is probably not practical in your use case, but if you think you might need it in the future, using the <code>Generic</code> interface now might save you some refactoring.</p>\n"}], "owner": {"reputation": 3987, "user_id": 2449744, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zky84.jpg?s=128&g=1", "display_name": "Eldar Agalarov", "link": "https://stackoverflow.com/users/2449744/eldar-agalarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58721465, "answer_count": 1, "score": 1, "last_activity_date": 1573000680, "creation_date": 1572970960, "question_id": 58715483, "link": "https://stackoverflow.com/questions/58715483/non-generic-subclasses-inherits-implements-generic-superclass-interface", "title": "Non-Generic Subclasses inherits (implements) Generic Superclass (Interface)", "body": "<p>What are the benefits of the following model, when non-generic sublasses have parent generic superclass/interface?</p>\n\n<pre><code>interface Generic&lt;Q: Number, R: Number&gt; {\n\n    fun calculate(input: Q): R\n}\n\nclass ClassA: Generic&lt;Int, Int&gt; {\n\n    override fun calculate(input: Int): Int {\n        return input\n    }\n}\n\nclass ClassB: Generic&lt;Float, Float&gt; {\n\n    override fun calculate(input: Float): Float {\n        return input\n    }\n}\n</code></pre>\n\n<p>Polymorphism is not available anyway (need explicit casting with pattern matching). Same result is possible to get without inheritance/implementation:</p>\n\n<pre><code>fun main() {\n    val classA: Generic&lt;Int, Int&gt; = ClassA()\n    val classB: Generic&lt;Float, Float&gt; = ClassB()\n    val inputs: List&lt;Number&gt; = listOf(1, 1.1, 2, 2.2)\n\n    for (input in inputs) {\n        when (input) {\n            is Int -&gt; classA.calculate(input)\n            is Float -&gt; classB.calculate(input)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "mockk"], "comments": [{"owner": {"reputation": 424, "user_id": 3705293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4724de37db645d9bcbab5fc1e495838?s=128&d=identicon&r=PG", "display_name": "DJ_Polly", "link": "https://stackoverflow.com/users/3705293/dj-polly"}, "edited": false, "score": 0, "creation_date": 1585195696, "post_id": 58714421, "comment_id": 107679236, "body": "How are you instantiating the mockk? Have you tried a relaxed mockk? i.e. incidentRepository = mockk&lt;IncidentRepository&gt;(relaxed = true)"}], "owner": {"reputation": 202, "user_id": 6039640, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/9ee0a12700fa4e955082248df33a899c?s=128&d=identicon&r=PG&f=1", "display_name": "Dat Nguyen", "link": "https://stackoverflow.com/users/6039640/dat-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1572967251, "creation_date": 1572967251, "question_id": 58714421, "link": "https://stackoverflow.com/questions/58714421/io-mockk-mockkexception-no-answer-found-for-whereas-any-is-used-as-an-argumen", "title": "io.mockk.MockKException: no answer found for whereas any() is used as an argument", "body": "<p>Currently, I'm working on unit tests and I'm using Mockk for that purpose.</p>\n\n<p>Here's how my unit test looks like (I'll put the most important lines) </p>\n\n<pre><code>@Test\nfun `Test computeDowntimesOverPeriod with starting uptime`() {\n   every {incidentRepository.incidentsBySiteKey(any(), any(), or(ofType(String::class), isNull()))} returns buildIncidentsStream(5)\n\n   mockSAT123Mapping()\n\n   val timeIntervals = incidentManager.computeDowntimesOverPeriod(\"SAT.123\", Period.ofWeeks(1))\n\n   //...\n\n   verify(exactly=1) {incidentRepository.incidentsBySiteKey(Period.ofDays(7),15, \"asc\")}\n}\n</code></pre>\n\n<p>Here's the signature of the <em>incidentsBySiteKey</em> function</p>\n\n<pre><code>fun incidentsBySiteKey(period: Period, siteId: Int?, order: String = \"asc\"): Stream&lt;Incident&gt;\n</code></pre>\n\n<p>For the <em>computeDowntimesOverPeriod</em> function</p>\n\n<pre><code>open fun computeDowntimesOverPeriod(siteKey: String, period: Period): List&lt;StatusTimeInterval&gt; {\n   //...\n   val downtimes = incidentsBySiteKeyStream(siteKey, period)\n   //...\n}\n</code></pre>\n\n<p>The <em>incidentsBySiteKeyStream</em> function :</p>\n\n<pre><code>private fun incidentsBySiteKeyStream(siteKey: String, period: Period, order: String = \"asc\"): Optional&lt;Stream&lt;Incident&gt;&gt; {\n   Objects.requireNonNull(period)\n   return if (StringUtils.isEmpty(siteKey)) {\n      Optional.of(Stream.empty())\n   } else siteMapper.fromCMMSKey(siteKey)\n      .flatMap { it.toUtId() }\n      .map { siteId -&gt; incidentRepository.incidentsBySiteKey(period, siteId, order).filter { equipmentRepository.findById(it.equipmentId).get().weight &gt; 0 } }\n\n}\n</code></pre>\n\n<p>As you can see, in the <em>computeDowntimesOverPeriod</em> function, we use the <em>incidentsBySiteKey</em> function. So, in the test it's logical to check whether or not the function is called. But when I run the test, I get the following error :</p>\n\n<pre><code>io.mockk.MockKException: no answer found for: IncidentRepository(incidentRepository#28).incidentsBySiteKey(P7D, 15, asc)\n</code></pre>\n\n<p>So basically, my test failed when I initialized the <em>timeIntervals</em> variable. But why ? I mean, I have the every block that should return something for any argument. </p>\n\n<p>Edit : kotlin version => 1.3.31\n       mockk version => 1.8.13.kotlin13</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines", "clean-architecture"], "comments": [{"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1572969245, "post_id": 58714389, "comment_id": 103723197, "body": "Can you post some code snippets please? Flow has been stable since Aug 2019. Some of transformation and terminal operators are in experimental and preview I am pretty sure you can achieve what you want without using those."}, {"owner": {"reputation": 390, "user_id": 7114714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eBNRv.jpg?s=128&g=1", "display_name": "Yavor Mitev", "link": "https://stackoverflow.com/users/7114714/yavor-mitev"}, "reply_to_user": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1572970600, "post_id": 58714389, "comment_id": 103724030, "body": "@GiorgosNeokleous here you are."}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1572973735, "post_id": 58714389, "comment_id": 103725697, "body": "Indeed <code>callbackFlow</code> is not in stable. But you check the stable API, I am pretty sure you can achieve what you are looking for without the <code>callbackFlow</code> but instead plain old <code>Flow</code>s. Unfortunately I am not on my machine to play around with an example"}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1572975152, "post_id": 58714389, "comment_id": 103726348, "body": "I left a rough implementation hope that helps!"}], "answers": [{"tags": [], "owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "is_accepted": false, "score": 1, "last_activity_date": 1572975121, "creation_date": 1572975121, "answer_id": 58716590, "question_id": 58714389, "link": "https://stackoverflow.com/questions/58714389/clean-architecture-usecase-with-progressno-rxjava/58716590#58716590", "title": "Clean Architecture UseCase with Progress[No RxJava]", "body": "<p>So I am going to show you an implementation based on what you put in your issue description, feel free to ask more questions and even suggest improvements.</p>\n\n<p>The current implementation is based on the stable version for <strong>Kotlin Coroutines 1.3.2</strong>.</p>\n\n<p><strong>Interface for Callback</strong></p>\n\n<pre><code>interface CallbackProgress {\n    suspend fun onProgress(result: Int)\n    suspend fun onSuccess(result: Int)\n    suspend fun onError(exception: Exception)\n}\n</code></pre>\n\n<p><strong>Producer</strong>\nIterates and executes some of the callback's method. Trying to mimic yours.</p>\n\n<pre><code>class Producer(private val callback: CallbackProgress) {\n    suspend fun execute(fail: Boolean) {\n        (0 until 10).forEach {\n            when {\n                it &lt; 9 -&gt; callback.onProgress(it)\n                fail -&gt; callback.onError(InterruptedException(\"blabla\"))\n                else -&gt; callback.onSuccess(it)\n            }\n            delay(500)\n        }\n    }\n}\n</code></pre>\n\n<p><strong>State</strong></p>\n\n<pre><code>sealed class State {\n    class Success(val value: Int) : State()\n    class Loading(val progress: Int) : State()\n    class Error(val exception: Exception) : State()\n}\n</code></pre>\n\n<p><strong>Interactor</strong>\nYou need to be careful here as the emissions <em>should be</em> done within the same coroutine otherwise you will need to use non-stable API such as <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/channel-flow.html\" rel=\"nofollow noreferrer\">channelFlow</a>. </p>\n\n<pre><code>class UseCase {\n    operator fun invoke(fail: Boolean) = flow {\n        val callback = object : CallbackProgress {\n            override suspend fun onSuccess(result: Int) {\n                withContext(coroutineContext) { emit(State.Success(result)) }\n            }\n\n            override suspend fun onError(exception: Exception) {\n                withContext(coroutineContext) { emit(State.Error(exception)) }\n            }\n\n            override suspend fun onProgress(result: Int) {\n                withContext(coroutineContext) { emit(State.Loading(result)) }\n            }\n        }\n\n        Producer(callback).execute(fail)\n    }\n}\n</code></pre>\n\n<p>To test the above I wrote the following which demonstrates both failure and non failure emissions.  </p>\n\n<pre><code>fun main() = runBlocking {\n    val useCase = UseCase()\n    useCase(true).collect {\n        when (it) {\n            is State.Loading -&gt; println(\"State for failure [Loading -&gt; ${it.progress}]\")\n            is State.Success -&gt; println(\"State for failure [Success -&gt; ${it.value}]\")\n            is State.Error -&gt; println(\"State for failure [Error -&gt; ${it.exception.message}]\")\n        }\n    }\n    useCase(false).collect {\n        when (it) {\n            is State.Loading -&gt; println(\"State  without failure [Loading -&gt; ${it.progress}]\")\n            is State.Success -&gt; println(\"State without failure [Success -&gt; ${it.value}]\")\n            is State.Error -&gt; println(\"State without failure [Error -&gt; ${it.exception.message}]\")\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>State for failure [Loading -&gt; 1]\nState for failure [Loading -&gt; 2]\nState for failure [Loading -&gt; 3]\nState for failure [Loading -&gt; 4]\nState for failure [Loading -&gt; 5]\nState for failure [Loading -&gt; 6]\nState for failure [Loading -&gt; 7]\nState for failure [Loading -&gt; 8]\nState for failure [Error -&gt; blabla]\n\n-------------------------------------\n\nState  without failure [Loading -&gt; 0]\nState  without failure [Loading -&gt; 1]\nState  without failure [Loading -&gt; 2]\nState  without failure [Loading -&gt; 3]\nState  without failure [Loading -&gt; 4]\nState  without failure [Loading -&gt; 5]\nState  without failure [Loading -&gt; 6]\nState  without failure [Loading -&gt; 7]\nState  without failure [Loading -&gt; 8]\nState without failure [Success -&gt; 9]\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 7114714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eBNRv.jpg?s=128&g=1", "display_name": "Yavor Mitev", "link": "https://stackoverflow.com/users/7114714/yavor-mitev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1594299238, "creation_date": 1572967140, "last_edit_date": 1594299238, "question_id": 58714389, "link": "https://stackoverflow.com/questions/58714389/clean-architecture-usecase-with-progressno-rxjava", "title": "Clean Architecture UseCase with Progress[No RxJava]", "body": "<p>I have a problem trying to figure out the best way to implement a UseCase with a progress. I have seen the examples like:</p>\n<p>Google I/O Android App\n<a href=\"https://github.com/google/iosched/blob/master/shared/src/main/java/com/google/samples/apps/iosched/shared/domain/UseCase.kt\" rel=\"nofollow noreferrer\">https://github.com/google/iosched/blob/master/shared/src/main/java/com/google/samples/apps/iosched/shared/domain/UseCase.kt</a></p>\n<p>What I don't like there is the following:</p>\n<ul>\n<li>You are receive  to recieve the result in the UI and make a lot of decisions there.</li>\n<li><strong>No progress</strong></li>\n</ul>\n<p>And something that I see as an upgrade to the above is:</p>\n<p>Android Architecture Blueprints</p>\n<p><a href=\"https://github.com/android/architecture-samples/blob/usecases/app/src/main/java/com/example/android/architecture/blueprints/todoapp/domain/ActivateTasksUseCase.kt\" rel=\"nofollow noreferrer\">https://github.com/android/architecture-samples/blob/usecases/app/src/main/java/com/example/android/architecture/blueprints/todoapp/domain/ActivateTasksUseCase.kt</a></p>\n<p>They are using Coroutines and now the result is in the ViewModel and it is much better. But again: <strong>No progress</strong></p>\n<p>My problem here is that everybody is using RxJava, because everyone else is using it. I see that a lot of people think that is something &quot;that executes tasks in the background&quot;. But it is too much for me. I don't need it.</p>\n<p>I've seen some examples with Coroutines channels, but they are really really ugly.</p>\n<p>So recently I have stumbled on this article by Roman Elizarov:</p>\n<p><a href=\"https://medium.com/@elizarov/callbacks-and-kotlin-flows-2b53aa2525cf\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/callbacks-and-kotlin-flows-2b53aa2525cf</a></p>\n<p>I did something like this:</p>\n<pre><code>class ProduceValueWithProgressUseCase @Inject constructor(\n    private val executor: Executor\n) {\n\n    operator fun invoke(): Flow&lt;Result&lt;Int, Int&gt;&gt; {\n        return callbackFlow {\n            val callback = object : CallbackProgress {\n                override fun onProgress(result: Int) {\n                    offer(Result.Loading(result))\n                }\n\n                override fun onSuccess(result: Int) {\n                    offer(Result.Success(result))\n                    close()\n                }\n\n                override fun onError(e: Exception) {\n                    offer(Result.Error(e))\n                    close()\n                }\n\n            }\n\n            val producer = ValueWithProgressProducer(callback)\n            executor.execute(producer)\n            awaitClose {}\n        }\n    }\n\n}\n</code></pre>\n<p>The idea is that this thing &quot;producer&quot; is using a callback to propagate the data like most of the &quot;old&quot; APIs. So I want to propagate the code via a flow to the ViewModel and not to put callbacks there. Like this:</p>\n<pre><code>viewModelScope.launch {\n            produceValueWithProgressUseCase().collect {\n                when (it) {\n                    is Success -&gt; view.showWithProgressResult(it.data)\n                    is Loading -&gt; view.updateProgress(it.progress)\n                    else -&gt; view.showError()\n                }\n            }\n        }\n</code></pre>\n<p>So yes, basically the Flows API will do the work for me. I have created even a small app to test itm where I just generate numbers, and it worked fine. What I did not liked about it was:</p>\n<ul>\n<li><p>Too much ExperimentalCoroutinesApi annotations had to be in place. For example here(Sorry for the formatting):</p>\n<p>@Suppress(&quot;NOTHING_TO_INLINE&quot;)\n@ExperimentalCoroutinesApi\npublic inline fun  callbackFlow(@BuilderInference noinline block: suspend\nProducerScope.() -&gt; Unit): Flow =\nchannelFlow(block)</p>\n</li>\n</ul>\n<p>The above code is part of the file: kotlinx.coroutines.flow.Builders.kt from version: kotlinx-coroutines-core-1.3.2</p>\n<ul>\n<li>At some point I've hit something with a @Preview annotation.(To be honest don't remember where. It was something I've deleted.)</li>\n<li>I tried just a little bit too see how the testing will go, but it is not straightforward. You can see the same in the code from the Blueprinst.</li>\n<li>I also mix the code that executes a task and the task itself. What I mean is the usage of callbackFlow().</li>\n</ul>\n<p>So in the end I see something that looks like screaming for change in the next year. So please give your thoughts  on it.</p>\n"}, {"tags": ["android", "kotlin", "viewmodel"], "comments": [{"owner": {"reputation": 141, "user_id": 4469526, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d226763ea326199c26d192f424fcdfef?s=128&d=identicon&r=PG&f=1", "display_name": "hhelbawi", "link": "https://stackoverflow.com/users/4469526/hhelbawi"}, "edited": false, "score": 1, "creation_date": 1572966894, "post_id": 58714244, "comment_id": 103721770, "body": "add a &quot;val&quot; before application in constructor:  class AlmatyJobViewModel(val application: Application)"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 11687945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HayRo.jpg?s=128&g=1", "display_name": "Rarity7-", "link": "https://stackoverflow.com/users/11687945/rarity7"}, "edited": false, "score": 0, "creation_date": 1572968660, "post_id": 58714590, "comment_id": 103722844, "body": "but why i cannot get arguments from constructor ?? it is possible in Java but why not in Kotlin?"}, {"owner": {"reputation": 608, "user_id": 3542143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sc1DZ.jpg?s=128&g=1", "display_name": "Julio Lemus", "link": "https://stackoverflow.com/users/3542143/julio-lemus"}, "reply_to_user": {"reputation": 177, "user_id": 11687945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HayRo.jpg?s=128&g=1", "display_name": "Rarity7-", "link": "https://stackoverflow.com/users/11687945/rarity7"}, "edited": false, "score": 0, "creation_date": 1572970436, "post_id": 58714590, "comment_id": 103723917, "body": "This case was special because the kotlin compiler tried to create its own getter for the <code>private val application</code> variable for your <code>AlmatyJobViewModel</code> class but it was colliding with the same method name <code>public &lt;T extends Application&gt; T getApplication()</code> declared into the class <code>public class AndroidViewModel ...</code>  To test it, feel free to rename <code>application: Application</code> by <code>private val application2: Application</code> and you will be used directly where you prefer without <code>getApplication()</code> or even you can test it adding parameters to constructor as <code>private val</code> or <code>protected var</code> and so on"}], "tags": [], "owner": {"reputation": 608, "user_id": 3542143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sc1DZ.jpg?s=128&g=1", "display_name": "Julio Lemus", "link": "https://stackoverflow.com/users/3542143/julio-lemus"}, "is_accepted": true, "score": 3, "last_activity_date": 1572967822, "creation_date": 1572967822, "answer_id": 58714590, "question_id": 58714244, "link": "https://stackoverflow.com/questions/58714244/how-to-get-argument-from-constructor/58714590#58714590", "title": "How to get argument from constructor?", "body": "<p>If you add <code>private val application</code> you will have exceptions in compilation time like</p>\n\n<blockquote>\n  <p>Accidental override: The following declarations have the same JVM signature</p>\n</blockquote>\n\n<p>So, to fix it, you only should to call <code>getApplication()</code> where you require.</p>\n\n<pre><code>SearchRecentSuggestions(getApplication(), MySuggestionsProvider.AUTHORITY, MySuggestionsProvider.MODE).clearHistory()\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 11687945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HayRo.jpg?s=128&g=1", "display_name": "Rarity7-", "link": "https://stackoverflow.com/users/11687945/rarity7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 58714590, "answer_count": 1, "score": 2, "last_activity_date": 1572977311, "creation_date": 1572966630, "last_edit_date": 1572977311, "question_id": 58714244, "link": "https://stackoverflow.com/questions/58714244/how-to-get-argument-from-constructor", "title": "How to get argument from constructor?", "body": "<pre><code>class AlmatyJobViewModel(application: Application) : AndroidViewModel(application){   \n\n fun clearSuggestionsHistory(){\n            SearchRecentSuggestions(application, MySuggestionsProvider.AUTHORITY, MySuggestionsProvider.MODE)\n                .clearHistory()\n        }\n}\n</code></pre>\n\n<blockquote>\n  <p>Unresolved Referense: application</p>\n</blockquote>\n\n<p>How to get application from constructor, if i want to use it in this method?</p>\n"}, {"tags": ["android", "kotlin", "replace", "fragment", "hide"], "comments": [{"owner": {"reputation": 366, "user_id": 7560016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76fa139f2741c2e9f27fb8980a79c2be?s=128&d=identicon&r=PG&f=1", "display_name": "B&#228;da", "link": "https://stackoverflow.com/users/7560016/b%c3%a4da"}, "edited": false, "score": 0, "creation_date": 1572965273, "post_id": 58713737, "comment_id": 103720834, "body": "You can use a FrameLayout to replace/show/hide fragments.  <a href=\"https://developer.android.com/reference/android/widget/FrameLayout\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/FrameLayout</a>"}, {"owner": {"reputation": 79, "user_id": 8270681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jIdsiuD_aTU/AAAAAAAAAAI/AAAAAAAAAIU/dC21RcuAJwk/photo.jpg?sz=128", "display_name": "Toni L&#243;pez", "link": "https://stackoverflow.com/users/8270681/toni-l%c3%b3pez"}, "reply_to_user": {"reputation": 366, "user_id": 7560016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76fa139f2741c2e9f27fb8980a79c2be?s=128&d=identicon&r=PG&f=1", "display_name": "B&#228;da", "link": "https://stackoverflow.com/users/7560016/b%c3%a4da"}, "edited": false, "score": 0, "creation_date": 1572965950, "post_id": 58713737, "comment_id": 103721182, "body": "I use ConstraintLayout for that the problem is not how to hide, the problem is hide a replaced fragment, after replace it works fine"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 8270681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jIdsiuD_aTU/AAAAAAAAAAI/AAAAAAAAAIU/dC21RcuAJwk/photo.jpg?sz=128", "display_name": "Toni L&#243;pez", "link": "https://stackoverflow.com/users/8270681/toni-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1573040035, "post_id": 58722041, "comment_id": 103749169, "body": "I know that, but if I only add I don&#39;t remove the old fragment, my problem is that sometimes I want to hide/show and sometimes I want to reset the fragment so I recreate. hide/show works fine till the moment I replace. then reference is lost and I can&#39;t show/hide"}, {"owner": {"reputation": 1, "user_id": 9392134, "user_type": "registered", "profile_image": "https://graph.facebook.com/1385777181446478/picture?type=large", "display_name": "Matheus Lima", "link": "https://stackoverflow.com/users/9392134/matheus-lima"}, "reply_to_user": {"reputation": 79, "user_id": 8270681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jIdsiuD_aTU/AAAAAAAAAAI/AAAAAAAAAIU/dC21RcuAJwk/photo.jpg?sz=128", "display_name": "Toni L&#243;pez", "link": "https://stackoverflow.com/users/8270681/toni-l%c3%b3pez"}, "edited": false, "score": 1, "creation_date": 1573041070, "post_id": 58722041, "comment_id": 103749747, "body": "If you need to show/hide only, call this and add New fragment. If you need reset, call remove separately before add. No?"}, {"owner": {"reputation": 79, "user_id": 8270681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jIdsiuD_aTU/AAAAAAAAAAI/AAAAAAAAAIU/dC21RcuAJwk/photo.jpg?sz=128", "display_name": "Toni L&#243;pez", "link": "https://stackoverflow.com/users/8270681/toni-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1573042430, "post_id": 58722041, "comment_id": 103750486, "body": "I suppose that this will be the fact, my first fragment is not added dynamically with add, it is directly in xml. problably I should remove it from xml and add it dynamically, then reference will be not lost. I will try it later. I was doing that for reuse the constraints of the fragment in the container"}], "tags": [], "owner": {"reputation": 1, "user_id": 9392134, "user_type": "registered", "profile_image": "https://graph.facebook.com/1385777181446478/picture?type=large", "display_name": "Matheus Lima", "link": "https://stackoverflow.com/users/9392134/matheus-lima"}, "is_accepted": false, "score": 0, "last_activity_date": 1573005576, "creation_date": 1573005576, "answer_id": 58722041, "question_id": 58713737, "link": "https://stackoverflow.com/questions/58713737/kotlin-hide-replaced-fragments-dont-work/58722041#58722041", "title": "Kotlin hide replaced fragments don&#39;t work", "body": "<p>When you call <code>replace</code>, he calling <code>remove(fragment)</code> and after call <code>add(int, fragment, string)</code>. I think that you should use <code>add</code> method instead <code>replace</code> and control your UI using <code>hide</code> and <code>show</code></p>\n"}], "owner": {"reputation": 79, "user_id": 8270681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jIdsiuD_aTU/AAAAAAAAAAI/AAAAAAAAAIU/dC21RcuAJwk/photo.jpg?sz=128", "display_name": "Toni L&#243;pez", "link": "https://stackoverflow.com/users/8270681/toni-l%c3%b3pez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573005576, "creation_date": 1572964969, "question_id": 58713737, "link": "https://stackoverflow.com/questions/58713737/kotlin-hide-replaced-fragments-dont-work", "title": "Kotlin hide replaced fragments don&#39;t work", "body": "<p>I have a fragment with constraints that I want to preserve</p>\n\n<pre><code>    &lt;fragment\n    android:id=\"@+id/fr_test\"\n    android:name=\"com.test.FragmentTest\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"/&gt;\n</code></pre>\n\n<p>I use transactions to hide/show it and all . works fine</p>\n\n<pre><code>fm.beginTransaction().hide(mainActivity.fr_test).commit()\nfm.beginTransaction().show(mainActivity.fr_test).commit()\n</code></pre>\n\n<p>I use transactions to recreate fragment keeping the same container to use the same constraints</p>\n\n<pre><code>fm.beginTransaction().replace(R.id.mainActivity.fr_test, FragmentTest).commit()\n</code></pre>\n\n<p>But if now I try to hide/show the fragment with the same references as before it does nothing. I suppose that references are lost but I don't know how to find them. I tried to save the reference like this:</p>\n\n<pre><code>fragRef = FragmentTest()\nviewsManager.fm.beginTransaction().replace(R.id.fr_test, fragRef).commit()\n</code></pre>\n\n<p>and then use:</p>\n\n<pre><code>fm.beginTransaction().hide(mainActivity.fragRef).commit()\nfm.beginTransaction().show(mainActivity.fragRef).commit()\n</code></pre>\n\n<p>but still does the same.</p>\n\n<p>What I'm doing wrong?</p>\n"}, {"tags": ["kotlin", "lambda", "functional-interface"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1572969040, "post_id": 58713623, "comment_id": 103723091, "body": "SAM conversion for Kotlin interfaces is not allowed <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\"><i>by design</i></a>. Quoting the documentation: &quot;note that this feature [SAM conversion] works only for Java interop; since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.&quot;"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1572969190, "post_id": 58713623, "comment_id": 103723172, "body": "Here is a related issue regarding this: <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">KT-7770</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1572967388, "post_id": 58713945, "comment_id": 103722068, "body": "I updated my question, the interface is defined in kotlin not java."}, {"owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "reply_to_user": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1572970543, "post_id": 58713945, "comment_id": 103724001, "body": "@Chriss, this solution works fine with interfaces that are defined in Kotlin. But you can make it a little bit better by adding an <code>inline</code> modifier to <code>Foo</code> function: <code>inline fun Foo(crossinline body: (String) -&gt; String) = object : Foo {...}</code>. It will prevent creating additional <code>(String) -&gt; String</code> instance during <code>Foo</code> creation. Also, when you use this function, you don&#39;t have to specify the type of argument explicitly, the following will work: <code>Foo { input -&gt; &quot;Hello $input!&quot; }</code> as well as <code>Foo { &quot;Hello $it!&quot; }</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 12014566, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDYoQ4QACU84ql_WE3VkZgwHUWiQyIXEyVPSerP=k-s128", "display_name": "Michael Stummvoll", "link": "https://stackoverflow.com/users/12014566/michael-stummvoll"}, "is_accepted": false, "score": 1, "last_activity_date": 1572965673, "creation_date": 1572965673, "answer_id": 58713945, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/58713945#58713945", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<p>I don't think there is a language level option to do this, but you can abstract the \"ugly\" code into a helper method so its easier to read where the business logic is actually needed:</p>\n\n<p><strong>Helper Method</strong></p>\n\n<pre><code>fun Foo(body: (String) -&gt; String) = object : Foo{\n  override fun bar(input: String)= body(input)\n}\n</code></pre>\n\n<p><strong>Business Code</strong></p>\n\n<pre><code>fun createFoo():Foo {\n  return Foo {input:String -&gt; \"Hello $input!\"}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "edited": false, "score": 0, "creation_date": 1572967392, "post_id": 58714094, "comment_id": 103722070, "body": "I updated my question, the interface is defined in kotlin not java."}], "tags": [], "owner": {"reputation": 9262, "user_id": 1426469, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a99e0f9b6711f185ae3fdefbc9dcaa0e?s=128&d=identicon&r=PG", "display_name": "Leo Aso", "link": "https://stackoverflow.com/users/1426469/leo-aso"}, "is_accepted": false, "score": 0, "last_activity_date": 1572966195, "creation_date": 1572966195, "answer_id": 58714094, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/58714094#58714094", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<p>To use Kotlin lambda to Java SAM interface conversion anywhere you want, simply specify the name of the interface before the lambda.</p>\n\n<pre><code>fun createFoo(): Foo {\n   return Foo { input:String -&gt; \"Hello $input!\" }\n}\n</code></pre>\n\n<p>It doesn't even need to be that long.</p>\n\n<pre><code>fun createFoo(): Foo {\n   return Foo { \"Hello $it!\" }\n}\n</code></pre>\n\n<p>As long as the interface has a single method and is declared in Java, that's all you need to do.</p>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1572970880, "last_edit_date": 1572970880, "creation_date": 1572968659, "answer_id": 58714809, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/58714809#58714809", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<p>It would be easier in your case to have the interface in Java:</p>\n\n<pre><code>fun createFoo() : Foo = Foo { \"hello $it\" }\n</code></pre>\n\n<p>But as you have a Kotlin interface instead, you are a bit out of luck here. Here is a related issue regarding this: <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">KT-7770</a></p>\n\n<p>A workaround to this could be (but that mainly depends on how you use that interface) to have a Kotlin interface as follows in place that is the main entry point for the Java side:</p>\n\n<pre><code>interface Foo : (String) -&gt; String\n</code></pre>\n\n<p>On the Kotlin side you will not use it and the Java side should only use it to deliver functions, e.g.</p>\n\n<pre><code>// Java class\npublic class JFooFactory implements FooFactory {\n  @Override\n  @NotNull\n  public Foo createFoo() { // uses the Foo-interface from Kotlin\n    return input -&gt; \"hello \" + input;\n  }\n}\n\n// Kotlin equivalent:\nclass KFactory : FooFactory {\n  override fun createFoo() : (String) -&gt; String = {\n    \"hello $it\"\n  }\n}\n</code></pre>\n\n<p>where the corresponding <code>FooFactory</code>-interface could look like:</p>\n\n<pre><code>interface FooFactory {\n  fun createFoo() : (String) -&gt; String\n}\n</code></pre>\n\n<p>Usage could look like:</p>\n\n<pre><code>listOf(KFooFactory(), JFooFactory())\n     .map {\n         it.createFoo()\n     }\n     .forEach { func : (String) -&gt; String -&gt; // i.e. func is of (sub)type (String) -&gt; String\n        func(\"demo\") // calling it to deliver \"hello demo\" twice\n     }\n</code></pre>\n\n<p>Alternatively, to have also that <code>Foo</code>-feeling for Kotlin you can do it as follows:</p>\n\n<pre><code>typealias Foo = (String) -&gt; String\ninterface JFoo : Foo \n// or if you put the interface in its own package you could also use:   \ninterface Foo : someother.package.Foo\n</code></pre>\n\n<p>then the Java code stays the same as above, either with <code>JFoo</code> or with <code>Foo</code> pointing to that other package; the typealias is not visible from Java. The Kotlin side would change to the following:</p>\n\n<pre><code>class KFactory : FooFactory {\n  override fun createFoo() : Foo = {\n    \"hello $it\"\n  }\n}\n</code></pre>\n\n<p>The <code>Factory</code>-interface could also be replaced:</p>\n\n<pre><code>interface FooFactory {\n  fun createFoo() : Foo\n}\n</code></pre>\n\n<p>Under the hood however everything stays the same. We have/use <code>(String) -&gt; String</code> in Kotlin and <code>Foo</code>-functional-interface in Java.</p>\n"}, {"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 2, "last_activity_date": 1572975731, "creation_date": 1572975731, "answer_id": 58716743, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/58716743#58716743", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<blockquote>\n  <p>I want to implement a functional kotlin interface (interface with a single abstract method) as a kotlin lambda. How to do that?</p>\n</blockquote>\n\n<p>Can't</p>\n\n<blockquote>\n  <p>It has to be implemented as object, which is ugly as hell.</p>\n</blockquote>\n\n<p>Indeed.</p>\n\n<hr>\n\n<p>You have two options:</p>\n\n<p>1.) use <code>typealias</code></p>\n\n<pre><code>typealias Foo = (String) -&gt; String\n\nfun createFoo(): Foo = { \"Hello $it!\" }\n</code></pre>\n\n<p>2.) depending on your API, you can define an extension function that receives the functional type <code>(String) -&gt; String</code> as a <code>crossinline</code> argument, then invokes it inside a <code>object: __</code> block. That way, you can hide the <code>object:</code> in a given function, and externally still be able to call it with a lambda argument. Doesn't seem applicable in this case, though.</p>\n"}, {"tags": [], "owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "is_accepted": true, "score": 3, "last_activity_date": 1586438826, "last_edit_date": 1586438826, "creation_date": 1573026778, "answer_id": 58725404, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/58725404#58725404", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<h2>since Kotlin v1.4</h2>\n\n<p>SAM conversion will be supported with version 1.4, with a new type inference algorithm.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2019/12/what-to-expect-in-kotlin-1-4-and-beyond/#language-features\" rel=\"nofollow noreferrer\">What to Expect in Kotlin 1.4 and Beyond</a></li>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-4-m1-released/#new-type-inference\" rel=\"nofollow noreferrer\">More powerful type inference algorithm</a></li>\n</ul>\n\n<hr>\n\n<h2>before Kotlin v1.4</h2>\n\n<p>It works if the companion object implements the <code>invoke</code> function taking a lambda.</p>\n\n<p><strong>Kotlin interface</strong></p>\n\n<pre><code>interface Foo{\n  fun bar(input: String): String\n\n   companion object { \n      inline operator fun invoke(crossinline function: (String) -&gt; String) =\n                object : Foo{\n                    override fun bar(input: String) = function(input)\n                } \n   } \n}\n</code></pre>\n\n<p><strong>Kotlin implementation</strong></p>\n\n<pre><code>fun createFoo()= Foo { input: String -&gt; \"Hello $input!\" }\n</code></pre>\n\n<hr>\n\n<p>Functional/SAM  interfaces defined in kotlin can't be implemented as Kotlin lambdas by design, see <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">KT-7770</a>. </p>\n\n<p>In Kotlin an functional / SAM interface is considered as an anti-pattern, a function type should be declared instead: <code>(String)-&gt;String</code>. The function type can be expressed as typealias to make it look and feel like an interface: <code>typealias Foo=(String)-&gt;String</code>. </p>\n\n<p>Note: The typealias is not visible in Java code only in Kotlin! </p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 7918717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91cfb8ddc1f52a245ab1a4118eb7ab2?s=128&d=identicon&r=PG&f=1", "display_name": "antaki93", "link": "https://stackoverflow.com/users/7918717/antaki93"}, "is_accepted": false, "score": 0, "last_activity_date": 1613560971, "last_edit_date": 1613560971, "creation_date": 1613495955, "answer_id": 66229105, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin/66229105#66229105", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<p>Just add the <code>fun</code> keyword to your interface declaration:</p>\n<pre><code>fun interface Foo {\n    fun bar(input: String): String \n}\n</code></pre>\n<p>It is the notation of functional interfaces in Kotlin (instead of <code>@FunctionalInterface</code> annotation in Java).</p>\n<p>Now you can implement it like this:</p>\n<pre><code>Foo { input: String -&gt; &quot;Hello $input!&quot; }\n</code></pre>\n"}], "owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 0, "accepted_answer_id": 58725404, "answer_count": 6, "score": 4, "last_activity_date": 1613560971, "creation_date": 1572964608, "last_edit_date": 1572968870, "question_id": 58713623, "link": "https://stackoverflow.com/questions/58713623/how-to-implement-a-functional-interface-as-lambda-in-kotlin", "title": "How to implement a functional interface as lambda in Kotlin?", "body": "<p>I want to implement a functional kotlin interface (interface with a single abstract method) as a kotlin lambda. How to do that?</p>\n\n<p><strong>Kotlin interface</strong></p>\n\n<pre><code>@FunctionalInterface\ninterface Foo{\n  fun bar(input: String): String \n}\n</code></pre>\n\n<p><strong>Kotlin implementation</strong> .</p>\n\n<pre><code>fun createFoo(): Foo {\n   return { input: String -&gt; \"Hello $input!\" }\n}\n</code></pre>\n\n<p>\u2191 doesn't compile \u2191 </p>\n\n<p>It has to be implemented as object, which is ugly as hell.</p>\n\n<pre><code>fun createFoo() = \n     object : Foo{\n            override fun bar(input: String)= \"Hello $input\"\n     }\n</code></pre>\n\n<hr>\n\n<p>EDIT: corrected my sample interface from java to kotlin</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "owner": {"reputation": 846, "user_id": 6582127, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ijqtr.png?s=128&g=1", "display_name": "Luis Cardoza Bird", "link": "https://stackoverflow.com/users/6582127/luis-cardoza-bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572964508, "creation_date": 1572964508, "question_id": 58713594, "link": "https://stackoverflow.com/questions/58713594/data-wont-display-when-recyclerview-with-listadapter-is-updated", "title": "Data won&#39;t display when RecyclerView with ListAdapter is updated", "body": "<p>The data in the RecyclerView is called the first time without issues. However when i refresh the data, for some reason all the items goes blank.</p>\n\n<p>The <strong>MainActivity</strong> is this</p>\n\n<pre><code>class BusinessActivity : AppCompatActivity() {\n\n    private val businessViewModel: BusinessViewModel by viewModel()\n    private val imageLoader: ImageLoader by inject()\n    private lateinit var staggeredGridLayoutManager: StaggeredGridLayoutManager\n    private lateinit var skeleton: Skeleton\n    private val adapter: BusinessAdapter by lazy { BusinessAdapter(imageLoader, businessViewModel) }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_business)\n        initToolbar()\n        skeleton = findViewById&lt;SkeletonLayout&gt;(R.id.skeletonLayout)\n        staggeredGridLayoutManager = StaggeredGridLayoutManager(2, StaggeredGridLayoutManager.VERTICAL)\n        staggeredGridLayoutManager.gapStrategy = StaggeredGridLayoutManager.GAP_HANDLING_MOVE_ITEMS_BETWEEN_SPANS\n        recycler_view.apply {\n            layoutManager = staggeredGridLayoutManager\n            adapter = this@BusinessActivity.adapter\n            setHasFixedSize(true)\n        }\n        setupSkeleton()\n        initializeObserverBusiness()\n        refreshBusiness.setOnRefreshListener {\n            refreshBusiness.isRefreshing = true\n            skeleton.showSkeleton()\n            businessViewModel.retrieveBusiness()\n        }\n    }\n\n    private fun initToolbar() {\n        setSupportActionBar(toolbar)\n        supportActionBar?.title = getString(R.string.app_name)\n        this.setSystemBarColor(this)\n    }\n\n    private fun setupSkeleton(){\n        skeleton = recycler_view.applySkeleton(R.layout.business_card, 6)\n        skeleton.showSkeleton()\n    }\n\n    private fun initializeObserverBusiness(){\n        businessViewModel.uiState.observe(this, Observer {\n            val dataState = it ?: return@Observer\n            if (!dataState.showProgress){\n                refreshBusiness.isRefreshing = false\n                skeleton.showOriginal()\n            }\n            if (dataState.business != null &amp;&amp; !dataState.business.consumed){\n                dataState.business.consume()?.let { business -&gt;\n                    adapter.submitList(business)\n                }\n            }\n            if (dataState.error != null &amp;&amp; !dataState.error.consumed){\n                dataState.error.consume()?.let { error -&gt;\n                    Toast.makeText(this, resources.getString(error), Toast.LENGTH_LONG).show()\n                }\n            }\n        })\n    }\n}\n</code></pre>\n\n<p>and the <strong>Adapter</strong> for the <strong>RecyclerView</strong>, im currently using <strong>DiffCallback</strong> and <strong>ListAdapter</strong> due to a better performance.</p>\n\n<pre><code>class BusinessAdapter(var imageLoader: ImageLoader, var viewModel: BusinessViewModel) : ListAdapter&lt;Business, BusinessViewHolder&gt;(DIFF_CALLBACK){\n    companion object{\n        private val DIFF_CALLBACK = object : DiffUtil.ItemCallback&lt;Business&gt;() {\n            override fun areItemsTheSame(oldItem: Business, newItem: Business) = oldItem.id == newItem.id\n            override fun areContentsTheSame(oldItem: Business, newItem: Business) = oldItem == newItem\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = BusinessViewHolder.create(parent)\n\n    override fun onBindViewHolder(holder: BusinessViewHolder, position: Int) {\n        holder.bind(getItem(position), imageLoader, viewModel)\n    }\n}\n</code></pre>\n\n<p>and the <strong>ViewHolder</strong> for the <strong>Adapter</strong></p>\n\n<pre><code>class BusinessViewHolder constructor(override val containerView: View) : RecyclerView.ViewHolder(containerView), LayoutContainer {\n\n    fun bind(business: Business, imageLoader: ImageLoader, viewModel: BusinessViewModel) {\n        businessImage?.let { imageLoader.load(\"${BuildConfig.MY_URL}/gallery/${business.images[0]}\", it) }\n        ownerBusiness.text = business.owner\n        businessName.text = business.name\n        cardBusiness.setOnClickListener {\n            viewModel.callDetailBusiness(business.id)\n        }\n    }\n\n    companion object {\n        fun create(parent: ViewGroup): BusinessViewHolder {\n            return BusinessViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.business_card, parent, false))\n        }\n    }\n}\n</code></pre>\n\n<p>and the <strong>ViewModel</strong></p>\n\n<pre><code>class BusinessViewModel (private val businessRepository: BusinessRepository): ViewModel() {\n    private val _uiState = MutableLiveData&lt;BusinessDataState&gt;()\n    val uiState: LiveData&lt;BusinessDataState&gt; get() = _uiState\n    val _showDetailBusiness = MutableLiveData&lt;Int?&gt;()\n    val showDetailBusiness: LiveData&lt;Int?&gt; get() = _showDetailBusiness\n\n    init {\n        retrieveBusiness()\n    }\n\n    fun retrieveBusiness(){\n        viewModelScope.launch {\n                runCatching {\n                    emitUiState(showProgress = true)\n                    businessRepository.retrieveBusiness()\n                }.onSuccess {\n                    emitUiState(business = Event(it))\n                }.onFailure {\n                    emitUiState(error = Event(R.string.internet_failure_error))\n                }\n        }\n    }\n\n    fun callDetailBusiness(businessId: Int) {\n        _showDetailBusiness.value = businessId\n    }\n\n    private fun emitUiState(showProgress: Boolean = false, business: Event&lt;List&lt;Business&gt;&gt;? = null, error: Event&lt;Int&gt;? = null){\n        val dataState = BusinessDataState(showProgress, business, error)\n        _uiState.value = dataState\n    }\n\n    data class BusinessDataState(val showProgress: Boolean, val business: Event&lt;List&lt;Business&gt;&gt;?, val error: Event&lt;Int&gt;?)\n}\n</code></pre>\n\n<p>When the data is loaded for the first time i see this.\n<a href=\"https://i.stack.imgur.com/Ofr4X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ofr4X.png\" alt=\"FirstTimeLoad\"></a></p>\n\n<p>however when i apply the SwipeRefresh. I receive the data.</p>\n\n<blockquote>\n  <p>D/OkHttp: [{\"id\":18,\"name\":\"Whatsup\",\"owner\":\"Mi\n  Soledad\",\"category\":\"ToDo\",</p>\n</blockquote>\n\n<p>but the RecyclerView won't attach the new information...\n<a href=\"https://i.stack.imgur.com/ZI7YC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZI7YC.png\" alt=\"DataMissing\"></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 0, "creation_date": 1572963836, "post_id": 58713161, "comment_id": 103719979, "body": "Other apps cannot access file: uris in your app. That restriction was added in Android 7.0. Consider e.g. a FileProvider instead. <a href=\"https://developer.android.com/training/secure-file-sharing/index.html\" rel=\"nofollow noreferrer\">developer.android.com/training/secure-file-sharing/index.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 13, "user_id": 9932582, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269633156594393/picture?type=large", "display_name": "Benji Cooper", "link": "https://stackoverflow.com/users/9932582/benji-cooper"}, "reply_to_user": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 0, "creation_date": 1572964859, "post_id": 58713161, "comment_id": 103720587, "body": "It does work on some phones though. Is it possible that an issue of this sort would only occur on some devices?"}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 4261600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZueCn0p31U4/AAAAAAAAAAI/AAAAAAAAAF4/ssf8KxHtIeA/photo.jpg?sz=128", "display_name": "6rchid", "link": "https://stackoverflow.com/users/4261600/6rchid"}, "is_accepted": false, "score": 0, "last_activity_date": 1593502769, "creation_date": 1593502769, "answer_id": 62652510, "question_id": 58713161, "link": "https://stackoverflow.com/questions/58713161/android-external-pdf-rendering-closes-immediately/62652510#62652510", "title": "Android external PDF rendering closes immediately", "body": "<p>This doesn't work on some phone using the default <code>Drive PDF Viewer</code>. Try using an alternative PDF viewer using the app picker.</p>\n"}], "owner": {"reputation": 13, "user_id": 9932582, "user_type": "registered", "profile_image": "https://graph.facebook.com/2269633156594393/picture?type=large", "display_name": "Benji Cooper", "link": "https://stackoverflow.com/users/9932582/benji-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1593502769, "creation_date": 1572963057, "question_id": 58713161, "link": "https://stackoverflow.com/questions/58713161/android-external-pdf-rendering-closes-immediately", "title": "Android external PDF rendering closes immediately", "body": "<p>I'm trying to externally render a PDF from my Android app.\nMy code looks like this</p>\n\n<pre><code>val file = File(&lt;path-to-pdf&gt;)\nval target = Intent(Intent.ACTION_VIEW)\ntarget.setDataAndType(Uri.fromFile(file), \"application/pdf\")\ntarget.flags = Intent.FLAG_ACTIVITY_NO_HISTORY\nval intent = Intent.createChooser(target, \"Open With\")\nintent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\ntry {\n      context.startActivity(intent)\n} catch (e: ActivityNotFoundException) {\n      Log.e(e.message)\n}\n\n</code></pre>\n\n<p>Whenever this runs on certain devices (so far observed on Pixel 2), the external reader launches, and closes immediately.\nSolution suggested <a href=\"https://stackoverflow.com/questions/41788650/android-pdf-closes-immediately-after-opening-from-internal-storage\">here</a> did not work.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 0, "creation_date": 1572962966, "post_id": 58713089, "comment_id": 103719421, "body": "For your first example, do you want all combinations of tuples? ie <code>{(x,y) | x in [1, 100] and y in [0, 50]}</code>? (&lt;- that&#39;s math notation, not python syntax)"}, {"owner": {"reputation": 366, "user_id": 11492659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e61e264c1094508a0ae578af2fc03e6?s=128&d=identicon&r=PG&f=1", "display_name": "hzqelf", "link": "https://stackoverflow.com/users/11492659/hzqelf"}, "reply_to_user": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 0, "creation_date": 1572963973, "post_id": 58713089, "comment_id": 103720059, "body": "@SyntaxVoid  Yes."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1572965916, "post_id": 58713089, "comment_id": 103721160, "body": "Maybe <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/zip.html\" rel=\"nofollow noreferrer\"><code>zip</code></a> is what you are looking for, e.g.: <code>(1..100).zip(50 downTo 0).forEach { (x, y) -&gt; &#47;* do something *&#47; }</code>..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1572966045, "post_id": 58713089, "comment_id": 103721238, "body": "For triple values it is a bit more complicated... <code>(1..100).zip(50 downTo 0).zip(500..1000 step 2).forEach { (xy, z) -&gt; xy.also { (x, y) -&gt; &#47;* do something with x, y and z *&#47; } }</code>... Note that if any of those ranges finishes earlier, it will stop with the latest possible value... e.g. in the last example the highest <code>z</code> would be <code>600</code>..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1572966118, "post_id": 58713089, "comment_id": 103721279, "body": "if you want to have all values combined with each other instead, you may just want to nest those loops instead, e.g. <code>for (x in 1..100) { for (y in 50 downTo 0) { for (z in 500..1000 step 2) { &#47;* do something with x, y and z *&#47; }}}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": true, "score": 1, "last_activity_date": 1572975680, "creation_date": 1572975680, "answer_id": 58716734, "question_id": 58713089, "link": "https://stackoverflow.com/questions/58713089/how-to-code-for-tuple-in-multiple-range/58716734#58716734", "title": "How to code &quot;for tuple in multiple range&quot;?", "body": "<p>You can create a <code>zipOf</code> function, which returns a <code>Sequence</code> of all possible combinations. Here are 3 overloads of this function:</p>\n\n<pre><code>fun &lt;T1, T2&gt; zipOf(first: Iterable&lt;T1&gt;, second: Iterable&lt;T2&gt;) = sequence {\n    for (t1 in first)\n        for (t2 in second)\n            yield(t1 to t2)\n}\n\nfun &lt;T1, T2, T3&gt; zipOf(first: Iterable&lt;T1&gt;, second: Iterable&lt;T2&gt;, third: Iterable&lt;T3&gt;) = sequence {\n    for (t1 in first)\n        for (t2 in second)\n            for (t3 in third)\n                yield(Triple(t1, t2, t3))\n}\n\nfun &lt;T&gt; zipOf(vararg iterables: Iterable&lt;T&gt;): Sequence&lt;List&lt;T&gt;&gt; =\n    iterables.fold(sequenceOf(emptyList())) { result, iterable -&gt;\n        result.flatMap { list -&gt; iterable.asSequence().map { elm -&gt; list + elm } }\n    }\n</code></pre>\n\n<p>You can use them like this:</p>\n\n<pre><code>for ((x, y) in zipOf(1..100, 50 downTo 0)) {}\nfor ((x, y, z) in zipOf(1..100, 50 downTo 0, 500..1000 step 2)) {}\nfor ((x, y, z, w) in zipOf(1..100, 50 downTo 0, 500..1000 step 2, 0..1)) {}\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 11492659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e61e264c1094508a0ae578af2fc03e6?s=128&d=identicon&r=PG&f=1", "display_name": "hzqelf", "link": "https://stackoverflow.com/users/11492659/hzqelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58716734, "answer_count": 1, "score": 0, "last_activity_date": 1572975680, "creation_date": 1572962832, "question_id": 58713089, "link": "https://stackoverflow.com/questions/58713089/how-to-code-for-tuple-in-multiple-range", "title": "How to code &quot;for tuple in multiple range&quot;?", "body": "<p>For example:</p>\n\n<pre><code>for ((x, y) in (1..100, 50 downTo 0)) {}\n</code></pre>\n\n<pre><code>for ((x, y, z) in (1..100, 50 downTo 0, 500..1000 step 2)) {}\n</code></pre>\n\n<p>I have found the official kotlin document: <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">Destructuring Declarations</a>, but still can't write correct code.</p>\n"}, {"tags": ["string", "kotlin"], "comments": [{"owner": {"reputation": 30143, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 1, "creation_date": 1572962549, "post_id": 58712848, "comment_id": 103719184, "body": "The Kotlin language documentation specifies that <code>\\n</code> is the newline escape sequence. It makes no mention of this being different on different systems. Have you tried writing <code>\\n</code> instead, and did it not work? <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#characters\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/basic-types.html#characters</a>"}, {"owner": {"reputation": 3818, "user_id": 4451521, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/4b19b54142d820aad565ca95f920c11c?s=128&d=identicon&r=PG", "display_name": "KansaiRobot", "link": "https://stackoverflow.com/users/4451521/kansairobot"}, "reply_to_user": {"reputation": 30143, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572962801, "post_id": 58712848, "comment_id": 103719308, "body": "Wow, I have never had any problem when programming in C# or others. I copy pasted \\n (since I cannot type it) and it worked."}, {"owner": {"reputation": 30143, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572963137, "post_id": 58712848, "comment_id": 103719516, "body": "If your keyboard mapping doesn&#39;t have \\, I recommend configuring an alternate keyboard mapping for when you&#39;re doing programming. Most operating systems allow you to install multiple keyboard mappings, and define a shortcut for switching between them."}], "owner": {"reputation": 3818, "user_id": 4451521, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/4b19b54142d820aad565ca95f920c11c?s=128&d=identicon&r=PG", "display_name": "KansaiRobot", "link": "https://stackoverflow.com/users/4451521/kansairobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572962112, "creation_date": 1572962112, "question_id": 58712848, "link": "https://stackoverflow.com/questions/58712848/line-break-does-not-work-in-kotlin-with-idea", "title": "line break does not work in Kotlin (with IDEA)", "body": "<p>I am following a course that uses Kotlin and there is this code</p>\n\n<pre><code>fun getName(@PathVariable(\"name\")name: String):String{\n        return \"Name: $name\u00a5n\"\n    }\n</code></pre>\n\n<p>In the course it gives a string \"Name: Peter(new line)\" if the name is Peter, but in my own code the new line is ignored and it prints <code>\u00a5n</code></p>\n\n<p>I wonder why. This has never has happened to me when using other languages or other IDEs.</p>\n\n<p>(note: in Japanese systems \u00a5n is the new line since we use the yen symbol instead of the opposite/)</p>\n"}, {"tags": ["selenium", "intellij-idea", "kotlin", "cucumber"], "comments": [{"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 2, "creation_date": 1572960964, "post_id": 58712327, "comment_id": 103718301, "body": "In Java class, your driver isn&#39;t static. Why do you keep everything in kotlin class in companion object?"}, {"owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1572961812, "post_id": 58712327, "comment_id": 103718769, "body": "I prefer static methods for this sort of thing, so maybe that&#39;s the reason. I&#39;m not sure :-)"}, {"owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 1, "creation_date": 1572962236, "post_id": 58712327, "comment_id": 103719016, "body": "HowEVER...it works when I remove the companion object and instead instantiate the Kotlin object. Why is that? Why doens&#39;t it work with a static call?"}, {"owner": {"reputation": 46, "user_id": 4605210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dec8bb9893490664fa527a511e9027c?s=128&d=identicon&r=PG", "display_name": "Alp Bilgin", "link": "https://stackoverflow.com/users/4605210/alp-bilgin"}, "edited": false, "score": 0, "creation_date": 1572962961, "post_id": 58712327, "comment_id": 103719418, "body": "Are selenium server logs reachable? Maybe you can derive some meaning from them?"}, {"owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "edited": false, "score": 0, "creation_date": 1572964666, "post_id": 58712327, "comment_id": 103720487, "body": "Hm. Those aren&#39;t allways easy to get anything useful out of. Well: I probably wouldn&#39;t have thought of trying non-static without your comment, so thanks a lot :-)"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "edited": false, "score": 0, "creation_date": 1572962179, "post_id": 58712519, "comment_id": 103718978, "body": "Good point, and a silly mistake by me, However, it doesn&#39;t seem to make any difference. However, if I remove the companion object and instantiate the class instead, it works. Why?"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "reply_to_user": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "edited": false, "score": 1, "creation_date": 1572963216, "post_id": 58712519, "comment_id": 103719558, "body": "I&#39;m not really familiar with neither Cucumber nor Selenium, so I&#39;m not sure what happens there. I&#39;d say that most likely the lblsokerOmboligprosjekt&#39;s value doesn&#39;t get there for some reason :)"}], "tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 1, "last_activity_date": 1572963013, "last_edit_date": 1572963013, "creation_date": 1572961061, "answer_id": 58712519, "question_id": 58712327, "link": "https://stackoverflow.com/questions/58712327/kotlin-cucumber-and-selenium-kotlin-not-able-to-interact-with-elements/58712519#58712519", "title": "Kotlin, Cucumber and Selenium - Kotlin not able to interact with element(s)", "body": "<pre><code>@FindBy(id = \"lblsokerOmboligprosjekt\")\n        private val lblsokerOmboligprosjekt: WebElement? = null\n</code></pre>\n\n<p>I'd say this is the problem. <code>val</code>s can't be reassigned, try changing it to <code>private var</code>, otherwise nothing happens, since your WebElement is null</p>\n\n<p>EDIT: It seems that the issue was connected to the logic being wrapped in a companion object</p>\n"}], "owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572963013, "creation_date": 1572960408, "question_id": 58712327, "link": "https://stackoverflow.com/questions/58712327/kotlin-cucumber-and-selenium-kotlin-not-able-to-interact-with-elements", "title": "Kotlin, Cucumber and Selenium - Kotlin not able to interact with element(s)", "body": "<p>I'm trying to create a simple test in IntelliJ, using Kotlin instead of Java, along with Cucumber and Selenium. However, it doesn't seem to be as straight-foward as I thouht. I've installed Kotlin and configured it for the project, and there are no error messages related to that.</p>\n\n<p>However, just a simple thing like clicking on a radio button i a list seems to be difficult to achieve in Kotlin. There is no error message; The click just doesn't happen.</p>\n\n<p>The Cucumber line:</p>\n\n<pre><code>Og jeg har et konkret boligprosjekt\n</code></pre>\n\n<p>The (Java) step definition:</p>\n\n<pre><code>@Og(\"^jeg har et konkret boligprosjekt$\")\npublic void jegHarEtKonkretBoligprosjekt() {\n    //oppforePage.velgKonkretBoligprosjekt();          &lt;-- Java\n    OppforePageK.Companion.velgKonkretBoligprosjekt(); &lt;-- Kotlin\n}\n</code></pre>\n\n<p>The Java Page Object (which works as expected):</p>\n\n<pre><code>@Slf4j\npublic class OppforePage {\n    import org.openqa.selenium.By;\n    import org.openqa.selenium.WebElement;\n    import org.openqa.selenium.support.FindBy;\n    import org.openqa.selenium.support.PageFactory;\n\n    private static WebElement lblsokerOmboligprosjekt;\n\n    private ExtendedWebDriver driver;\n\n\n    public OppforePage() {\n        this.driver = Browser.extendedDriver();\n        PageFactory.initElements(driver, this);\n    }\n\n    void velgKonkretBoligprosjekt() { lblsokerOmboligprosjekt.click(); }\n\n...\n</code></pre>\n\n<p>The Kotlin Page Object (which doesn't work):</p>\n\n<pre><code>import no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver\nimport org.openqa.selenium.WebElement\nimport org.openqa.selenium.support.FindBy\nimport org.openqa.selenium.support.PageFactory\n\nclass OppforePageK() {\n    companion object {\n        var driver: ExtendedWebDriver = Browser.extendedDriver()\n\n        @FindBy(id = \"lblsokerOmboligprosjekt\")\n        private val lblsokerOmboligprosjekt: WebElement? = null\n\n        init {\n            PageFactory.initElements(driver, this)\n        }\n\n        fun velgKonkretBoligprosjekt() {\n            lblsokerOmboligprosjekt?.click()\n        }\n    }\n}\n</code></pre>\n\n<p>(I've removed some of the obvious imports etc.)</p>\n\n<p>When Kotlin tries to click the button with the velgKonkretBoligprosjekt() method, nothing happens on the page. There is no error message, however, and the test continues and fails on a later step because the button wasn't clicked.</p>\n\n<p>Any ideas? I know it should be possible to use Kotlin for this, but I seem to be constantly running into small walls where I cannot figure out why seeminling small and simple things just doesn't work like I think the will.</p>\n"}, {"tags": ["kotlin", "executorservice", "redisson"], "answers": [{"tags": [], "owner": {"reputation": 8602, "user_id": 764206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a2897401b5e9d1aa5b25316d971271?s=128&d=identicon&r=PG", "display_name": "Nikita Koksharov", "link": "https://stackoverflow.com/users/764206/nikita-koksharov"}, "is_accepted": false, "score": 0, "last_activity_date": 1574578683, "creation_date": 1574578683, "answer_id": 59015375, "question_id": 58712068, "link": "https://stackoverflow.com/questions/58712068/executorservice-is-in-shutdown-state-in-redisson/59015375#59015375", "title": "ExecutorService is in shutdown state in redisson", "body": "<p>Give same time amount to spent between <code>execute</code> and <code>shutdown</code> methods invocations. </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 1447710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YOxT4.jpg?s=128&g=1", "display_name": "plajko", "link": "https://stackoverflow.com/users/1447710/plajko"}, "is_accepted": false, "score": 1, "last_activity_date": 1579986233, "creation_date": 1579986233, "answer_id": 59913382, "question_id": 58712068, "link": "https://stackoverflow.com/questions/58712068/executorservice-is-in-shutdown-state-in-redisson/59913382#59913382", "title": "ExecutorService is in shutdown state in redisson", "body": "<p>What is working for me:</p>\n\n<pre><code>val e = redisson.getExecutorService(\"myExecutor\")\nif (e.isShutdown()) {\n    e.delete()\n}\n</code></pre>\n\n<p>I assume the remote executor gets into shutdown state when there is no worker connected to process the tasks.</p>\n"}], "owner": {"reputation": 120, "user_id": 12036381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qujlc.jpg?s=128&g=1", "display_name": "Azdy", "link": "https://stackoverflow.com/users/12036381/azdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1579986233, "creation_date": 1572959523, "question_id": 58712068, "link": "https://stackoverflow.com/questions/58712068/executorservice-is-in-shutdown-state-in-redisson", "title": "ExecutorService is in shutdown state in redisson", "body": "<p>I am using redisson ExecutorService in kotlin,but an exception occur like this, \"java.util.concurrent.RejectedExecutionException: Task rejected. ExecutorService is in shutdown state\".</p>\n\n<pre><code>class RunnableTask : Runnable ,Serializable{\n   private val redissonClient: RedissonClient? = null\n   private var param: Long=0\n\n   override fun run() {\n      val atomic = redissonClient!!.getAtomicLong(\"myAtomic\")\n      atomic.addAndGet(param)\n      }\n\n }\n\nfun main(args: Array&lt;String&gt;) {\n  val config = Config()\n  config.useSingleServer()\n      .setAddress(\"redis://127.0.0.1:6379\")\n  val redisson = Redisson.create(config)\n\n  val nodeConfig =   RedissonNodeConfig(config)   \n\n  nodeConfig.setExecutorServiceWorkers(Collections.singletonMap(\"myExecutor\", 1))\n  val node = RedissonNode.create(nodeConfig)\n  node.start()\n  val e = redisson.getExecutorService(\"myExecutor\")\n  e.execute(  RunnableTask())\n  e.shutdown()\n  node.shutdown()\n\n}\n</code></pre>\n\n<p>I use redisson 3.11.5.</p>\n"}, {"tags": ["android", "kotlin", "android-jetpack", "android-paging-library"], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1572963464, "post_id": 58712377, "comment_id": 103719749, "body": "Thanks, I wondered about something like that. I was a little nervous if it was ok to Observe it though. I realise this is not a viewModel but I was think it will be referenced in the viewmodel from looking at the tutorial.  And the documentation says ... &quot;However ViewModel objects must never observe changes to lifecycle-aware observables, such as LiveData objects&quot;  Is it still ok to Observe in a Datasource?"}, {"owner": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "reply_to_user": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1572964927, "post_id": 58712377, "comment_id": 103720633, "body": "Yes it is ok to observe in a DataSource(but you need to handle removing observers yourself). The keyword from your quote is  &quot;Lifecycle-aware observables&quot;. You notice in the answer no LifeCycleOwner was passed to the observer. In this case we handle removing the observers(else you get memory leaks) and this is simplified for your case where you just need to remove the observer after the first update to the LiveData."}, {"owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1572973772, "post_id": 58712377, "comment_id": 103725721, "body": "Oh actually the overrides for loadInitial ect are already working on a background thread. So when I try to invoke observeOnce I get... Cannot invoke observeForever on a background thread"}, {"owner": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "reply_to_user": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1572975997, "post_id": 58712377, "comment_id": 103726718, "body": "Sorry about  that . Use kotlin&#39;s coroutine to switch observing to the main thread. I have edited the answer."}, {"owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1573035206, "post_id": 58712377, "comment_id": 103746550, "body": "Yep that now works. Thankyou. I will use the answer that you&#39;ve given. But after some thought, I think I might have gone about this the wrong way. Im thinking maybes I should make my PagedKeyedDataSource class more generic, pass the call in that I want to make. I could use this class for other calls that I make to build the list, switchmap over them ect."}, {"owner": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "reply_to_user": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1573041312, "post_id": 58712377, "comment_id": 103749873, "body": "Instead of returning LiveData from your getSomeCars() method. Another better way to achieve what you want is using callbacks (which is more cleaner as compared to the LiveData way). Declare the callback interface, override and pass an instance of your callback and call the corresponding method when everything(your multiple api calls) is successful. I have edited the answer to include the other way."}, {"owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "reply_to_user": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "edited": false, "score": 0, "creation_date": 1573054762, "post_id": 58712377, "comment_id": 103757639, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201954/discussion-between-aidanmack-and-networks\">continue this discussion in chat</a>."}, {"owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1573130017, "post_id": 58712377, "comment_id": 103786129, "body": "More issues with this. on the loadAfter , because we use observe once it appears to only return the same result as found in load initial. Tried ObserveForever which got half way there but im seeing  callback.onResult already called, cannot call again when onResult is Invoke. I guess thats to do with ObserveForever being wrapped inside the GlobeScope"}, {"owner": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "reply_to_user": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "edited": false, "score": 0, "creation_date": 1573131209, "post_id": 58712377, "comment_id": 103786805, "body": "I tried it in both loadInitial() and loadAfter() and it works perfectly. Can you update the question with what you have now."}], "tags": [], "owner": {"reputation": 1596, "user_id": 7014629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhOwb.jpg?s=128&g=1", "display_name": "Networks", "link": "https://stackoverflow.com/users/7014629/networks"}, "is_accepted": true, "score": 0, "last_activity_date": 1573040813, "last_edit_date": 1573040813, "creation_date": 1572960526, "answer_id": 58712377, "question_id": 58711960, "link": "https://stackoverflow.com/questions/58711960/can-i-use-livedata-to-create-data-for-a-pagekeyeddatasource/58712377#58712377", "title": "Can I use Livedata to create data for a PageKeyedDataSource?", "body": "<p>Add a convenience method <code>observeOnce</code> to your PagedKeyedDataSource class which listens for the only first update to a <code>LiveData</code> object. </p>\n\n<pre><code>fun &lt;T&gt; LiveData&lt;T&gt;.observeOnce(observer: Observer&lt;T&gt;) {\n\n        observeForever(object : Observer&lt;T&gt; {\n            override fun onChanged(t: T?) {\n                observer.onChanged(t)\n                removeObserver(this)\n            }\n        })\n\n    }\n</code></pre>\n\n<p>In your app level build.gradle file. Add this</p>\n\n<pre><code>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1'\n</code></pre>\n\n<p>Then call the <code>observeOnce</code> method on your <code>LiveData</code> object, which only observes the first update from your <code>LiveData</code> object, then calls callback.onSuccess. </p>\n\n<pre><code>GlobalScope.launch(Dispatchers.Main) {\n    val observer = Observer&lt;List&lt;Cars&gt;&gt;{\n        callback.onResult(it, null, \"dsd\")\n    }\n    yourLiveDataObj.observeOnce&lt;List&lt;Cars&gt;&gt;(observer)\n}\n\n</code></pre>\n\n<blockquote>\n  <p>EDIT</p>\n</blockquote>\n\n<p>Instead of using LiveData you can interfaces to also achieve the same purpose.\nDeclare a generic interface</p>\n\n<pre><code>interface ApiCallback&lt;T&gt;{\n\n    fun onSuccess(result: T)\n\n    fun onFailure(errMsg:String)\n\n}\n</code></pre>\n\n<p>In your PagedKeyDataSource</p>\n\n<pre><code>getSomeCars(object : ApiCallback&lt;List&lt;Cars&gt;&gt;{\n            override fun onSuccess(result: List&lt;Cars&gt;) {   \n                 callback.onResult(result, null, \"dsd\")\n            }\n\n            override fun onFailure(errMsg: String) {\n\n                Log.w(\"get some cars failed with err: $errMsg\")\n            }\n        })\n</code></pre>\n\n<p>In <code>getSomeCars()</code> function</p>\n\n<pre><code>fun getSomeCars(apiCallback:ApiCallback&lt;List&lt;Cars&gt;&gt;){\n    //after your multiple api calls call\n    apiCallback.onSuccess(carListResults)\n}\n\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 1799701, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c71591eb6ff6e2b46206677a7aa42d8?s=128&d=identicon&r=PG", "display_name": "aidanmack", "link": "https://stackoverflow.com/users/1799701/aidanmack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 58712377, "answer_count": 1, "score": 0, "last_activity_date": 1573040813, "creation_date": 1572958990, "last_edit_date": 1572959713, "question_id": 58711960, "link": "https://stackoverflow.com/questions/58711960/can-i-use-livedata-to-create-data-for-a-pagekeyeddatasource", "title": "Can I use Livedata to create data for a PageKeyedDataSource?", "body": "<p>I have a feature that requires paged data. For this I am trying to use the JetPack Paging library. </p>\n\n<p>Ive set up <code>PageKeyDataSource</code> and in the examples it shows the async call events which looks quite verbose. Especially if you have to do multiple calls to create the list.</p>\n\n<p>Instead I already have a datasource that makes multiple calls, maps all this and returns a livedata of a page of items.</p>\n\n<p>So I was thinking something like the code below, but I guess it would need to an observer in the DataSource for the list to be passed to the <code>onResult</code> </p>\n\n<p>(getsomeCars being the liveData)</p>\n\n<pre><code>    override fun loadInitial(params: LoadInitialParams&lt;String&gt;, callback: LoadInitialCallback&lt;String, Cars&gt;) {\n\n        callback.onResult(carsDataService.getSomeCars.value!!,null,\"dsd\")\n        TODO(\"not implemented\")\n    }\n\n    override fun loadAfter(params: LoadParams&lt;String&gt;, callback: LoadCallback&lt;String, Cars&gt;) {\n        TODO(\"not implemented\")\n    }\n\n    override fun loadBefore(params: LoadParams&lt;String&gt;, callback: LoadCallback&lt;String, Cars&gt;) {}\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["android", "kotlin", "android-intent", "android-activity", "start-activity"], "comments": [{"owner": {"reputation": 2394, "user_id": 5974659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ab982a491d36319cbcde99792f0123?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Mehar", "link": "https://stackoverflow.com/users/5974659/anas-mehar"}, "edited": false, "score": 1, "creation_date": 1572958574, "post_id": 58711764, "comment_id": 103717076, "body": "Use interface or Lamda."}], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 5165107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759ba9b349d471a8f55e9a9fc5d42719?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWithVikas", "link": "https://stackoverflow.com/users/5165107/codewithvikas"}, "is_accepted": true, "score": 2, "last_activity_date": 1572958566, "creation_date": 1572958566, "answer_id": 58711837, "question_id": 58711764, "link": "https://stackoverflow.com/questions/58711764/how-to-start-an-activity-from-non-activity-view-in-android-using-kotlin/58711837#58711837", "title": "How to start an Activity from non Activity view in Android using Kotlin", "body": "<p>Main Cause is Your 'context' is null.\ntry using context from 'itemView' like following</p>\n\n<pre><code>mDressImage1 = itemView.findViewById(R.id.dressImage_1)\n        mDressImage1!!.setOnClickListener {\n                            val detailsActivity = Intent(itemView.getContext(), DressDetailsActivity::class.java)\n                        itemView.getContext().startActivity(detailsActivity)\n                    }\n</code></pre>\n\n<p>Vote if it works.</p>\n\n<p>Thanks.</p>\n\n<p>Happy Coding.</p>\n"}], "owner": {"reputation": 1972, "user_id": 9494140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-RiQCuWECqiE/AAAAAAAAAAI/AAAAAAAAEsI/GLtd18UG8w8/photo.jpg?sz=128", "display_name": "Ahmed Wagdi", "link": "https://stackoverflow.com/users/9494140/ahmed-wagdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58711837, "answer_count": 1, "score": 0, "last_activity_date": 1572959209, "creation_date": 1572958307, "last_edit_date": 1572959209, "question_id": 58711764, "link": "https://stackoverflow.com/questions/58711764/how-to-start-an-activity-from-non-activity-view-in-android-using-kotlin", "title": "How to start an Activity from non Activity view in Android using Kotlin", "body": "<p>I need to create new intent and start it from an adapter for a recyclerView kotlin class.</p>\n\n<p>I've tried to <code>addOnClickListener</code> on the item needed. then creating intent and start it.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>        mDressImage1 = itemView.findViewById(R.id.dressImage_1)\n        mDressImage1!!.setOnClickListener {\n                            val detailsActivity = Intent(context, DressDetailsActivity::class.java)\n                        context!!.startActivity(detailsActivity)\n                    }\n</code></pre>\n\n<p>Expected to work normally but return me this error message : \n<code>Attempt to invoke virtual method 'java.lang.String android.content.Context.getPackageName()' on a null object reference</code></p>\n\n<p>and it crashes every time I click the view.</p>\n"}, {"tags": ["android-studio", "kotlin", "bytecode", "kotlinc"], "owner": {"reputation": 37, "user_id": 11836247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063d059be1e826f070bc655341fa7a6?s=128&d=identicon&r=PG&f=1", "display_name": "macquack", "link": "https://stackoverflow.com/users/11836247/macquack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572958213, "creation_date": 1572958213, "question_id": 58711744, "link": "https://stackoverflow.com/questions/58711744/how-to-configure-the-kotlin-bytecode-inspector", "title": "How to configure the Kotlin bytecode inspector?", "body": "<p>I want to configure the Kotlin bytecode inspector code in AS 3.5 to use an older version of the Kotlin compiler. Is it possible?</p>\n\n<p>Currently I have a Kotlin 1.1 project, and I'm interested in seeing what the bytecode looked like for certain features when Kotlin 1.1 was new. My problem is that it seems like the Kotlin bytecode inspector always compiles the source code according to the newest version of the Kotlin compiler.</p>\n\n<p>I basically want to reproduce the results of <a href=\"https://medium.com/@BladeCoder/exploring-kotlins-hidden-costs-part-1-fbb9935d9b62\" rel=\"nofollow noreferrer\">this</a> experiment.</p>\n\n<p>Incase you can't configure the bytecode inspector to use an old version of kotlinc, is there another convenient way to reproduce the results of the experiment?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1572958611, "post_id": 58710672, "comment_id": 103717097, "body": "It sounds to me, as if that specific function could rather be part of <code>SomeType</code> and/or delivered by its subtypes, e.g. if you add an abstract function to <code>SomeType</code> you would be forced to implement it for all its subtypes and there would be no way to overcome that... that would be better than hoping that all <code>when</code> and <code>if</code>s have all the possible conditions in them... and no: I do not know of any inspection or tool to check if <code>when</code>/<code>if</code> are used exhaustively :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1293, "user_id": 12141859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b68b508ccc9cca985ec76d00fc0b40?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/12141859/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572961449, "creation_date": 1572961449, "answer_id": 58712639, "question_id": 58710672, "link": "https://stackoverflow.com/questions/58710672/what-is-the-reason-for-making-usage-of-sealed-classes-in-when-expression-behave/58712639#58712639", "title": "What is the reason for making usage of sealed classes in when expression behave differently if when is used as an expression and not as a statement?", "body": "<p>Kotlin is a strongly typed language, which forces you to declare explicetely a type when you declare a value. </p>\n\n<p><a href=\"https://www.techopedia.com/definition/24434/strongly-typed\" rel=\"nofollow noreferrer\">Techopedia</a>:</p>\n\n<blockquote>\n  <p>Strongly typed is a concept used to refer to a programming language\n  that enforces strict restrictions on intermixing of values with\n  differing data types. When such restrictions are violated and error\n  (exception) occurs.</p>\n</blockquote>\n\n<p>In your first case, the <code>when</code> is a <strong>statement</strong>, which practically means that if any condition applies, it is executed, if not - it is ignored. Nothing happens with that statement afterwards.</p>\n\n<p>In the second case, <code>when</code> is an <strong>expression</strong> which creates a value - it can only detect the type by itself when all conditions are covered, including <code>else</code>.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">Kotlin documentation</a> says:</p>\n\n<blockquote>\n  <p>If <em>when</em> is used as an expression, the <em>else</em> branch is mandatory, unless\n  the compiler can prove that all possible cases are covered with branch\n  conditions</p>\n</blockquote>\n\n<p>Same applies to If/else:</p>\n\n<blockquote>\n  <p>Just like with <em>if</em>, each branch can be a block, and its value is the\n  value of the last expression in the block.</p>\n</blockquote>\n\n<pre><code>val result1 = if(true) 1 //will not compile\nval result2 = if(true) 1 else 2 // will compile\n</code></pre>\n"}], "owner": {"reputation": 7155, "user_id": 257501, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/517Dg.jpg?s=128&g=1", "display_name": "Sa\u0161a \u0160ijak", "link": "https://stackoverflow.com/users/257501/sa%c5%a1a-%c5%a0ijak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1584833703, "creation_date": 1572954219, "last_edit_date": 1584833703, "question_id": 58710672, "link": "https://stackoverflow.com/questions/58710672/what-is-the-reason-for-making-usage-of-sealed-classes-in-when-expression-behave", "title": "What is the reason for making usage of sealed classes in when expression behave differently if when is used as an expression and not as a statement?", "body": "<p>If you use sealed classes with <code>when</code>, <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">Kotlin treats <code>when</code> differently if you use it as expression than if you use it as a statement</a>.</p>\n\n<p>For example, this piece of code when I use <code>when</code> as a statement is valid : </p>\n\n<pre><code>sealed class SomeType\nobject Foo: SomeType()\nobject Bar: SomeType()\n\nfun test(input: SomeType) {\n    when(input) {\n        is Foo -&gt; {}\n    }\n}\n</code></pre>\n\n<p>But this one when I use it as an expression is not because because <code>when</code> expects either <code>else</code> branch or that the code checks for all subtypes of <code>SomeType</code> where <code>Bar</code> is missing in the example code :</p>\n\n<pre><code>sealed class SomeType\nobject Foo: SomeType()\nobject Bar: SomeType()\n\nfun test(input: SomeType) {\n    var result = when(input) {\n        is Foo -&gt; {}\n    }\n}\n</code></pre>\n\n<p>What is the reason behind this design decision?</p>\n\n<p>And my question is, what if I don't care about the result (not want to use <code>when</code> as an expression), just want to execute some code that returns <code>Unit</code> for each <code>when</code> branch, but I want to have the behavior where Kotlin will throw an error at compile-time if I have not used all the subtypes of sealed class in <code>when</code> statement? My only option is to use a dummy variable, so I force <code>when</code> statement to be an expression even though I don't care about the result? Any other way to achieve such behavior (compile-time check if all the cases are checked), maybe without <code>when</code>?</p>\n"}, {"tags": ["android", "kotlin", "android-asynctask"], "answers": [{"comments": [{"owner": {"reputation": 69363, "user_id": 413127, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/D8FKw.jpg?s=128&g=1", "display_name": "Blundell", "link": "https://stackoverflow.com/users/413127/blundell"}, "edited": false, "score": 0, "creation_date": 1572954149, "post_id": 58710570, "comment_id": 103714978, "body": "Good spot. Another fix for their code would be to change the line <code>val myServer = myObject</code> to use <code>clone</code>. i.e: <code>val myServer = myObject.clone()</code>"}, {"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "edited": false, "score": 1, "creation_date": 1572954210, "post_id": 58710570, "comment_id": 103715012, "body": "Wow! So an object is sort of a static class that does not spawn new copies. <b>You&#39;re absolutely right - as a class it works now!</b> Thank you, Markus."}, {"owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "reply_to_user": {"reputation": 69363, "user_id": 413127, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/D8FKw.jpg?s=128&g=1", "display_name": "Blundell", "link": "https://stackoverflow.com/users/413127/blundell"}, "edited": false, "score": 0, "creation_date": 1572954292, "post_id": 58710570, "comment_id": 103715058, "body": "@Blundell I&#39;ll give that a try as well. Thank you."}], "tags": [], "owner": {"reputation": 1231, "user_id": 2143225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJ614.jpg?s=128&g=1", "display_name": "Markus Penguin", "link": "https://stackoverflow.com/users/2143225/markus-penguin"}, "is_accepted": true, "score": 3, "last_activity_date": 1572953875, "creation_date": 1572953875, "answer_id": 58710570, "question_id": 58710405, "link": "https://stackoverflow.com/questions/58710405/new-instances-of-asynctask-not-executing/58710570#58710570", "title": "New instances of AsyncTask not executing", "body": "<p>An <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\"><code>AsyncTask</code></a> can only be executed once. If you want to execute it again, you'll need to create a second one.</p>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p>The task can be executed only once (an exception will be thrown if a\n  second execution is attempted.)</p>\n</blockquote>\n\n<p>What you could do is subclass the <code>AsnycTask</code> and use a new instance each time you want to execute it:</p>\n\n<pre><code>fun startBackgroundTask(){\n    CustomAsyncTask().execute()\n    // Or in your case:\n    CustomAsyncTask().myObjectInit(this, \"data\")\n}\n\nclass CustomAsyncTask: AsyncTask&lt;String, String, String&gt;(){\n\n    var thisInterface: myInterface? = null\n\n    fun myObjectInit(thatInterface: myInterface, stringData: String) {\n        thisInterface = thatInterface\n        execute(stringData)\n    }\n\n    override fun doInBackground(vararg params: String?): String {\n        // Do your work.\n        return \"\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 952, "user_id": 3017105, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bd63c6c3ee7fe49585b81c50100bada4?s=128&d=identicon&r=PG&f=1", "display_name": "iSofia", "link": "https://stackoverflow.com/users/3017105/isofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58710570, "answer_count": 1, "score": 0, "last_activity_date": 1572953875, "creation_date": 1572953313, "question_id": 58710405, "link": "https://stackoverflow.com/questions/58710405/new-instances-of-asynctask-not-executing", "title": "New instances of AsyncTask not executing", "body": "<p>This Kotlin routine which I cobbled together from various forum examples works <strong>BUT ONLY ON THE FIRST CALL.</strong></p>\n\n<pre><code>class myClass: Activity(), myInterface {\n\n\n    override fun onCreate(...) {\n        ...\n    }    \n\n    override fun myCallback(response: String) {\n        myReturningFunction(response)\n    }\n\n    fun myCallingFunction() {        \n        ...\n        ...        \n        val myServer = myObject \n        myServer.myObjectInit(this, stringData)\n        //myServer.execute(stringData)\n    }\n\n}\n\ninterface myInterface {\n    fun myCallback(response: String)\n}\n\nobject myObject : AsyncTask&lt;String, String, String&gt;() {\n\n    var thisInterface: myInterface? = null\n\n    fun myObjectInit(thatInterface: myInterface, stringData: String) {\n        thisInterface = thatInterface\n        //this.executeOnExecutor(THREAD_POOL_EXECUTOR)\n        this.execute(stringData)        \n    }\n\n    override fun doInBackground(vararg params: String): String? {\n\n        var response: String = \"\"\n\n        //return try {\n        try {\n            params.first().let {\n                val url = URL(\"- web service URL -\")\n                val urlConnect = url.openConnection() as HttpURLConnection\n                with(urlConnect) {\n                    requestMethod = \"POST\"\n                    readTimeout = 5000\n                    connectTimeout = 5000\n                    doInput = true\n                    doOutput = true\n                    setRequestProperty(\"Content-Type\", \"application/json\")\n                    setRequestProperty(\"Accept\", \"application/json\")\n                    setRequestProperty(\"Charset\", \"utf-8\")\n\n                    val jsonByteData = it.toByteArray(Charsets.UTF_8)\n                    outputStream.write(jsonByteData, 0, jsonByteData.size)\n                    outputStream.flush()\n                    outputStream.close()\n\n                    //inputStream.bufferedReader().readText()                    \n                    response = inputStream.bufferedReader().readText()\n                    inputStream.close()\n                    disconnect()\n                }\n            }\n        } catch (e: Exception) {\n            response = \"\"\n        }\n\n        return response\n    }\n\n    override fun onPostExecute(result: String?) {\n        when {\n            result != null -&gt; {\n                thisInterface?.myCallback(result)\n            }\n            else -&gt; {\n                println(\"null response\")\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I instantiate a copy of the AsyncTask object and execute it, and when I successfully receive the response via the interface, I instantiate another copy (<code>val myServer = myObject</code>) for a follow-up call, but this time it throws this error:</p>\n\n<pre><code>Cannot execute task: the task is already running.\n</code></pre>\n\n<p>I've tried many approaches, closing the input stream, disconnecting from the server, cancelling the task, but none of it works.</p>\n\n<p>Is there something obviously wrong with the code that I'm missing?</p>\n\n<p>TIA.</p>\n"}, {"tags": ["java", "android", "sqlite", "kotlin", "mediastore"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9312516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea754c55ec621732f3016ccdfc21e581?s=128&d=identicon&r=PG&f=1", "display_name": "Cor", "link": "https://stackoverflow.com/users/9312516/cor"}, "edited": false, "score": 0, "creation_date": 1572964830, "post_id": 58710818, "comment_id": 103720570, "body": "Hmm, bad,  looping through the Cursor can be slow for huge row sets - thanks for answer!"}], "tags": [], "owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "is_accepted": true, "score": 0, "last_activity_date": 1572954756, "creation_date": 1572954756, "answer_id": 58710818, "question_id": 58710018, "link": "https://stackoverflow.com/questions/58710018/is-there-a-way-to-set-mediastore-cursor-to-specific-row-in-rowset-using-where-co/58710818#58710818", "title": "Is there a way to set Mediastore cursor to specific row in Rowset using where condition?", "body": "<p>Not without looping through the Cursor, unless you know the position in advance in which case you could use <code>cur.moveToPosition(integer_posisition)</code>, where integer_position is as the name suggests, the position of the row in the Cursor, noting that the first row is row 0 and not 1.</p>\n\n<p>Of course if you are searching for a particular row you would typically use the query to retrieve only that row using a WHERE clause.</p>\n"}], "owner": {"reputation": 49, "user_id": 9312516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea754c55ec621732f3016ccdfc21e581?s=128&d=identicon&r=PG&f=1", "display_name": "Cor", "link": "https://stackoverflow.com/users/9312516/cor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58710818, "answer_count": 1, "score": 0, "last_activity_date": 1572954756, "creation_date": 1572951900, "last_edit_date": 1572952615, "question_id": 58710018, "link": "https://stackoverflow.com/questions/58710018/is-there-a-way-to-set-mediastore-cursor-to-specific-row-in-rowset-using-where-co", "title": "Is there a way to set Mediastore cursor to specific row in Rowset using where condition?", "body": "<p>I want to set the cursor to a specific row in a row set without to filter the row set. Is there a way to move cursor with where condition in row set? My solution in the moment is</p>\n\n<pre><code>// search for a _ID\nif (cur != null) {       // my row set\n        int idColumn = cur.getColumnIndex(MediaStore.Images.Media._ID);\n        cur.moveToFirst();\n        do {\n            if (search_id == cur.getInt(idColumn))) // row found\n                return;                      // ok, cursor in right position\n        } while (cur.moveToNext());\n        cur.moveToFirst();                    // id not found\n}\n</code></pre>\n\n<p>thanks in advance</p>\n"}, {"tags": ["kotlin", "amazon-dynamodb", "dynamo-local"], "answers": [{"comments": [{"owner": {"reputation": 983, "user_id": 562752, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b77a7ac2b20f4f3892c7e6d0d098e41e?s=128&d=identicon&r=PG", "display_name": "lennykey", "link": "https://stackoverflow.com/users/562752/lennykey"}, "edited": false, "score": 0, "creation_date": 1578584154, "post_id": 59392815, "comment_id": 105493580, "body": "Hi Paolo/ Lennart, the field is not annotated with @JsonIgnore"}], "tags": [], "owner": {"reputation": 1, "user_id": 12510381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e08fcc2dff1abef0bbe4815c6865480?s=128&d=identicon&r=PG&f=1", "display_name": "Lennart", "link": "https://stackoverflow.com/users/12510381/lennart"}, "is_accepted": false, "score": 0, "last_activity_date": 1576680773, "last_edit_date": 1576680773, "creation_date": 1576674575, "answer_id": 59392815, "question_id": 58709776, "link": "https://stackoverflow.com/questions/58709776/kotlin-with-dynamodbautogeneratestrategy-create-is-always-updating-not-only-du/59392815#59392815", "title": "Kotlin with DynamoDBAutoGenerateStrategy.CREATE is always updating - not only during creation time", "body": "<p>Is the field also annotated with <code>@JsonIgnore</code> or something similar?\nI noticed that when you use <code>@JsonIgnore</code>, that field will have it's timestamp regenerated each time, but it works properly without.</p>\n\n<p>A possible solution would be to use a dto object without the createdAt field and map it on the current object without the <code>@JsonIgnore</code>.</p>\n"}], "owner": {"reputation": 983, "user_id": 562752, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b77a7ac2b20f4f3892c7e6d0d098e41e?s=128&d=identicon&r=PG", "display_name": "lennykey", "link": "https://stackoverflow.com/users/562752/lennykey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576680773, "creation_date": 1572951017, "last_edit_date": 1574784662, "question_id": 58709776, "link": "https://stackoverflow.com/questions/58709776/kotlin-with-dynamodbautogeneratestrategy-create-is-always-updating-not-only-du", "title": "Kotlin with DynamoDBAutoGenerateStrategy.CREATE is always updating - not only during creation time", "body": "<p>Using in Kotlin\n<code>\n@get:DynamoDBAutoGeneratedTimestamp(strategy = DynamoDBAutoGenerateStrategy.CREATE)\nvar createdAt: Date? = null\n</code></p>\n\n<p>the value is always changing after saving the entity. Is there something I am missing? Because if I understand it correctly using <code>DynamoDBAutoGenerateStrategy.CREATE</code> should only update during creation time and not on every update</p>\n\n<p>see: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/datamodeling/DynamoDBAutoGeneratedTimestamp.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/datamodeling/DynamoDBAutoGeneratedTimestamp.html</a></p>\n"}, {"tags": ["android", "kotlin", "swagger", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 454, "user_id": 3410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NRX1V.jpg?s=128&g=1", "display_name": "K Pradeep Kumar Reddy", "link": "https://stackoverflow.com/users/3410835/k-pradeep-kumar-reddy"}, "edited": false, "score": 0, "creation_date": 1610256918, "post_id": 58708731, "comment_id": 116072617, "body": "Did you find any solution for this ? If yes, please share the answer. I&#39;m also facing the same issue."}], "owner": {"reputation": 455, "user_id": 10545524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZhuO.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/10545524/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1211, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1572947905, "creation_date": 1572947683, "last_edit_date": 1572947905, "question_id": 58708731, "link": "https://stackoverflow.com/questions/58708731/e-androidruntime-fatal-exception-defaultdispatcher-worker-4", "title": "E/AndroidRuntime: FATAL EXCEPTION: DefaultDispatcher-worker-4", "body": "<p>I have created an android app with kotlin, and I am using swagger to get all WS \nAmong the ws, one for create a new user, but an error appear, I put it below \nI want to know what's the mean of this error and how can I correct it \nHere's my code :</p>\n\n<pre><code>val current = LocalDateTime.now()\n                   val userFirstName = firstName.text.toString()\n                   val userLastName = lastName.text.toString()\n                   val userEmail = userEmail.text.toString()\n                   val userPassword = password.text.toString()\n                   val userMobileNumber = mobileNumber.text.toString()\n                   //   println(current)\n                   val formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\")\n                   val date = current.format(formatter)\n                       fireBaseAuthentication.createUserWithEmailAndPassword(userEmail, userPassword).addOnCompleteListener { task -&gt;\n                           if (task.isSuccessful) {\n                               fireBaseIdNewUser = fireBaseAuthentication.currentUser!!.uid\n                               val user = UsersData(\n                                       fireBaseID = fireBaseIdNewUser,\n                                       firstName = userFirstName,\n                                       lastName = userLastName,\n                                       phone = userMobileNumber,\n                                       email = userEmail,\n                                       image = \"\",\n                                       birthDay = date.toString(),\n                                       lastLogin = date.toString(),\n                                       registrationDate = date.toString(),\n                                       isActive = true,\n                                       allowComment = true\n                               )\n                               GlobalScope.launch(Dispatchers.IO) {\n\n                               val newUser = mobileApi.apiMobileUsersCreatePost(user)////////////\n                                   Log.e(\"test\",\"$newUser\")\n                                    }\n                           } else {\n                               task.exception\n                               Utility(this@Register).showMessage(\"Error: ${task.exception?.message}\")\n                           }\n</code></pre>\n\n<p>Here's the error : </p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: DefaultDispatcher-worker-4\n    Process: com.app.home, PID: 23639\n    io.swagger.client.infrastructure.ServerException: Server error\n        at io.swagger.client.apis.MobileApi.apiMobileUsersCreatePost(MobileApi.kt:947)\n        at com.app.homecraft.activity.user.register.Register$onCreate$1$1$1.invokeSuspend(Register.kt:90)\n        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n        at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:233)\n        at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:594)\n        at kotlinx.coroutines.scheduling.CoroutineScheduler.access$runSafely(CoroutineScheduler.kt:60)\n        at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:742)\n</code></pre>\n"}, {"tags": ["java", "kotlin", "redis", "lettuce"], "owner": {"reputation": 684, "user_id": 12103573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srltL.png?s=128&g=1", "display_name": "Seydazimov Nurbol", "link": "https://stackoverflow.com/users/12103573/seydazimov-nurbol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1573778451, "creation_date": 1572945000, "last_edit_date": 1573778451, "question_id": 58707893, "link": "https://stackoverflow.com/questions/58707893/how-i-can-make-my-custom-data-class-as-statefulredisconnection-value-type", "title": "How I can make my custom data class as StatefulRedisConnection value type?", "body": "<p>Lettuce Core API has RedisClient class that contains these methods:</p>\n\n<pre><code>public StatefulRedisConnection&lt;String, String&gt; connect() {\n      return this.connect(this.newStringStringCodec());\n}\n\npublic &lt;K, V&gt; StatefulRedisConnection&lt;K, V&gt; connect(RedisCodec&lt;K, V&gt; codec) {\n      this.checkForRedisURI();\n      return (StatefulRedisConnection)this.getConnection(this.connectStandaloneAsync(codec, this.redisURI, this.timeout));\n}\n</code></pre>\n\n<p>I want to call method <code>connect(RedisCodec&lt;K, V&gt; codec)</code>, but I don't know how to config my codec object that I should pass as a parameter to this method.</p>\n\n<p>My current code:</p>\n\n<pre><code>val redisClient = RedisClient.create(\"redis://password@localhost:6379/0\");\nval connection = redisClient.connect();\n// in this case type of connection is StatefulRedisConnection&lt;String, String&gt;\nval redisCommands = connection.sync()\n</code></pre>\n\n<p>I also has my custom data class.</p>\n\n<pre><code>data class MyCustomDataClassName {\n  val id: UUID,\n  val something: String,\n  val foo: String,\n  val bar: String\n}\n</code></pre>\n\n<p>I want to write this code:</p>\n\n<pre><code>val redisClient = RedisClient.create(\"redis://password@localhost:6379/0\");\nval codec = /* should be something that returns object of type StatefulRedisConnection&lt;String, MyCustomDataClassName&gt;*/\nval connection = redisClient.connect(codec);\nval redisCommands = connection.sync()\n</code></pre>\n"}, {"tags": ["kotlin", "design-patterns"], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 615987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f14c9c3022a3bd91fa0082ee00d6?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/615987/patrick"}, "edited": false, "score": 0, "creation_date": 1572947167, "post_id": 58708196, "comment_id": 103711254, "body": "I would like separation between serialisation, validation and validated data. This solution doesn&#39;t provide that."}], "tags": [], "owner": {"reputation": 1994, "user_id": 10536125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7445c27d383f2368956f6f23e75f5fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Bananon", "link": "https://stackoverflow.com/users/10536125/bananon"}, "is_accepted": false, "score": 0, "last_activity_date": 1572945956, "creation_date": 1572945956, "answer_id": 58708196, "question_id": 58707714, "link": "https://stackoverflow.com/questions/58707714/pattern-for-unvalidated-data-validated-data-and-validation/58708196#58708196", "title": "Pattern for unvalidated data, validated data and validation", "body": "<p>You can move validation to <code>Input</code> initialization:</p>\n\n<pre><code>@Serializable\ndata class Input(val something: Int) {\n    init {\n        validate()\n    }\n}\n</code></pre>\n\n<p>If you do it all <code>Input</code> instances will be valid.</p>\n"}, {"comments": [{"owner": {"reputation": 596, "user_id": 615987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f14c9c3022a3bd91fa0082ee00d6?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/615987/patrick"}, "edited": false, "score": 0, "creation_date": 1572952491, "post_id": 58709109, "comment_id": 103714130, "body": "Thank you! It didn&#39;t occur to me to turn it around, and your use of <code>out</code> made me learn about covariant/contravariant generic arguments. I&#39;m not opposed to something like <code>Validated&lt;Validatable&gt;</code>, I just didn&#39;t know how to implement it this way while preserving a nice API. (My question description probably wasn&#39;t very clear.) Could you please explain in more detail what your preferred solution is?"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 596, "user_id": 615987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f14c9c3022a3bd91fa0082ee00d6?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/615987/patrick"}, "edited": false, "score": 1, "creation_date": 1572981666, "post_id": 58709109, "comment_id": 103729164, "body": "@Patrick I updated the answer with an example using <code>Validated&lt;Input&gt;</code>."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 596, "user_id": 615987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f14c9c3022a3bd91fa0082ee00d6?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/615987/patrick"}, "edited": false, "score": 1, "creation_date": 1572982235, "post_id": 58709109, "comment_id": 103729398, "body": "Note that actually enforcing this in a code base of some size would require you to write either <code>Input&lt;Validated&gt;</code> or <code>Valid&lt;Input&gt;</code> on every function that takes an <code>Input</code> as a parameter though. That can get quite cumbersome. So usually I just validate the input at the edge of the program, then just assume that all values are already validated everywhere else."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 1, "last_activity_date": 1572981643, "last_edit_date": 1572981643, "creation_date": 1572948832, "answer_id": 58709109, "question_id": 58707714, "link": "https://stackoverflow.com/questions/58707714/pattern-for-unvalidated-data-validated-data-and-validation/58709109#58709109", "title": "Pattern for unvalidated data, validated data and validation", "body": "<p>If you want to make sure that <code>Input</code> is validated, you have to somehow put it in the type system. Since <code>Validated&lt;Input&gt;</code> is a no-go for you (I would prefer doing it this way), maybe you could turn it around by giving <code>Input</code> some kind of validation token as a type parameter?</p>\n\n<p>For example like this:</p>\n\n<pre><code>data class Input&lt;out Validation&gt;(val something: Int)\n\nsealed class Validation\nobject Validated : Validation()\nobject NotValidated : Validation()\n\nfun Input&lt;NotValidated&gt;.validate(): Input&lt;Validated&gt; {\n    return if(something &lt; 5) { throw RuntimeException(\"invalid\") }\n    else Input&lt;Validated&gt;(something)\n}\n</code></pre>\n\n<p>Doing it the other way (<code>Validated&lt;Input&gt;</code>) is a bit more flexible in my opinion. It also doesn't mix any code about validation into the <code>Input</code> class (like the validation token would). So, for example, you could do something like this:</p>\n\n<pre><code>sealed class Validated&lt;T&gt;\nclass Valid&lt;T&gt;(val value: T) : Validated&lt;T&gt;()\nclass Invalid&lt;T&gt;(val error: Exception): Validated&lt;T&gt;()\n\nfun Input.validate(): Validated&lt;Input&gt; {\n    return if(something &lt; 5) Invalid(RuntimeException(\"invalid\"))\n    else Valid(this)\n}\n\nfun performAction(input: Valid&lt;Input&gt;) { \n    TODO(\"Do something with the valid Input\")\n}\n\nfun main() {\n    val validated = Input(5).validate()\n\n    val result = when(validated) {\n        is Valid -&gt; performAction(validated)\n        is Invalid -&gt; throw validated.error\n    }\n\n    println(result)\n}\n</code></pre>\n"}], "owner": {"reputation": 596, "user_id": 615987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f14c9c3022a3bd91fa0082ee00d6?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/615987/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58709109, "answer_count": 2, "score": 0, "last_activity_date": 1572981643, "creation_date": 1572944333, "question_id": 58707714, "link": "https://stackoverflow.com/questions/58707714/pattern-for-unvalidated-data-validated-data-and-validation", "title": "Pattern for unvalidated data, validated data and validation", "body": "<p>In my Ktor REST API, I receive JSON. This is conveniently deserialised for me into simple data classes by <code>kotlinx.serialization</code>. Before I can proceed using this data I have to apply some validation. Then I can pass it on to to other parts of the code.</p>\n\n<p>I would like a clear separation between deserialised but unvalidated data, the validation itself, and validated code. </p>\n\n<p>For example, I have something to the effect of:</p>\n\n<pre><code>@Serializable\ndata class Input(val something: Int)\n\nfun Input.validate() {\n    if(something &lt; 5) { throw WhateverException(\"invalid\") }\n}\n</code></pre>\n\n<p>But there's a few issues with this: When receiving an instance of <code>Input</code> anywhere, I can't be sure it's been validated already, so to be safe I'll call <code>validate()</code> again. </p>\n\n<p>So, to avoid this I would like for <code>validate()</code> to return some version of <code>Input</code> that tells me the data is valid, and so that I can have method signatures in my codebase that accept validated data only.</p>\n\n<p>I know I can copy the class <code>Input</code> to a private one called <code>ValidatedInput</code> and have <code>validate()</code> return that, but that looks like code duplication. (I will end up having dozens of classes like <code>Input</code>.) Also that will prevent be from having an interface specifying <code>Input</code> to have the <code>validate</code> method and have it return something like <code>Validated&lt;Input&gt;</code> </p>\n\n<p>How do I design my classes and methods to clearly express this separation, and without repeating code?</p>\n"}, {"tags": ["kotlin", "kotlin-logging"], "answers": [{"tags": [], "owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "is_accepted": true, "score": 1, "last_activity_date": 1572946285, "creation_date": 1572946285, "answer_id": 58708283, "question_id": 58707703, "link": "https://stackoverflow.com/questions/58707703/how-to-wrap-an-existing-slf4j-logger-into-a-kotlin-logger/58708283#58708283", "title": "How to wrap an existing slf4j logger into a kotlin logger?", "body": "<p>It's possible to use the extension method: <code>Logger.toKLogger()</code> since 1.7.6. see this issue for more details: <a href=\"https://github.com/MicroUtils/kotlin-logging/issues/88\" rel=\"nofollow noreferrer\">https://github.com/MicroUtils/kotlin-logging/issues/88</a></p>\n"}], "owner": {"reputation": 261, "user_id": 127532, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/999226b562e630646cfd9a08362e6764?s=128&d=identicon&r=PG", "display_name": "Dieter", "link": "https://stackoverflow.com/users/127532/dieter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58708283, "answer_count": 1, "score": 1, "last_activity_date": 1572946285, "creation_date": 1572944290, "question_id": 58707703, "link": "https://stackoverflow.com/questions/58707703/how-to-wrap-an-existing-slf4j-logger-into-a-kotlin-logger", "title": "How to wrap an existing slf4j logger into a kotlin logger?", "body": "<p>Given an existing slf4j logger, I would like to wrap it into an kotlin-logging logger. </p>\n\n<p>The classes / methods to do that already exists in the library but are internal, so I can't call them:\n<code>mu.internal.KLoggerFactory.wrapJLogger()</code></p>\n\n<p>Is there another way to do it, which is accessible to users of the library?</p>\n"}, {"tags": ["android", "kotlin", "webview", "android-webview", "android-websettings"], "owner": {"reputation": 1804, "user_id": 5695091, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eyHWK.jpg?s=128&g=1", "display_name": "ysfcyln", "link": "https://stackoverflow.com/users/5695091/ysfcyln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1572943072, "creation_date": 1572943072, "question_id": 58707393, "link": "https://stackoverflow.com/questions/58707393/android-webview-not-showing-content-at-api-20", "title": "Android WebView not showing content at Api 20", "body": "<p>I have a WebView in my app. It works properly but at Api 20, WebView does not show the content.</p>\n\n<p>I checked the logs and see these errors</p>\n\n<pre><code>I/chromium: [INFO:CONSOLE(7)] \"The key \"shrink-to-fit\" is not recognized and ignored.\", source: https://...\n\nI/chromium: [INFO:CONSOLE(43)] \"Uncaught SyntaxError: Block-scoped declarations (let, const, function, class) not yet supported outside strict mode\", source: https://... (43)\n</code></pre>\n\n<p>I overviewed some answers and they generally suggest to use</p>\n\n<pre><code>webView.settings.useWideViewPort = true\nwebView.settings.loadWithOverviewMode = true\n</code></pre>\n\n<p>I have already implement these settings but still same error happens. WebView shows noting</p>\n\n<p>Here is my WebView Settings</p>\n\n<pre><code>/**\n * Initialize the WebView\n */\n@SuppressLint(\"SetJavaScriptEnabled\")\nprivate fun initWebView() {\n\n    webView.webViewClient = object : WebViewClient() {\n\n        @RequiresApi(Build.VERSION_CODES.LOLLIPOP)\n        override fun shouldOverrideUrlLoading(view: WebView, request: WebResourceRequest): Boolean {\n\n            return super.shouldOverrideUrlLoading(view, request)\n        }\n\n        override fun onPageStarted(\n            view: WebView, url: String, favicon: Bitmap?) {\n            showProgressDialog()\n        }\n\n        override fun onPageFinished(view: WebView, url: String) {\n            hideProgressDialog()\n        }\n\n        @RequiresApi(api = Build.VERSION_CODES.M)\n        override fun onReceivedError(view: WebView, request: WebResourceRequest, error: WebResourceError) {\n            // Your code to do\n            hideProgressDialog()\n        }\n\n        override fun onReceivedError(view: WebView, errorCode: Int, description: String, failingUrl: String) {\n            // Handle the error\n            hideProgressDialog()\n        }\n\n        override fun onReceivedSslError(view: WebView, handler: SslErrorHandler?, error: SslError) {\n            // ignore ssl error\n            if (handler != null) {\n                handler.proceed()\n            } else {\n                super.onReceivedSslError(view, null, error)\n            }\n        }\n    }\n\n    webView.isHorizontalScrollBarEnabled = false\n    webView.settings.javaScriptEnabled = true\n    webView.settings.useWideViewPort = true\n    webView.setInitialScale(1)\n    webView.settings.loadWithOverviewMode = true\n    context?.let { webView.setBackgroundColor(ContextCompat.getColor(it, R.color.colorDarkBlue)) }\n\n    }\n\n    /**\n     * Load url\n     */\n    private fun loadPage(url: String) {\n        webView.loadUrl(url)\n    }\n</code></pre>\n\n<p>Someone have a idea? I will be appreciate for any help</p>\n"}, {"tags": ["android", "ios", "kotlin", "multiplatform", "kotlin-multiplatform"], "answers": [{"comments": [{"owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "edited": false, "score": 0, "creation_date": 1572962071, "post_id": 58712238, "comment_id": 103718917, "body": "Okey I&#39;ll take a look at the examples to see if I can understand better the structure, thanks!"}], "tags": [], "owner": {"reputation": 1995, "user_id": 11533773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7AwO0.png?s=128&g=1", "display_name": "Artyom Degtyarev", "link": "https://stackoverflow.com/users/11533773/artyom-degtyarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1572960077, "creation_date": 1572960077, "answer_id": 58712238, "question_id": 58707299, "link": "https://stackoverflow.com/questions/58707299/implement-camera-lib-with-kotlin-multiplatform/58712238#58712238", "title": "Implement camera lib with Kotlin multiplatform", "body": "<p>Okay, let's go through your questions one-by-one.</p>\n\n<ol>\n<li>I would recommend you to have a look at <a href=\"https://github.com/AAkira/mpp-example\" rel=\"nofollow noreferrer\">this</a> example </li>\n<li>The\n    iOS module produces an  Objective-C framework as a result. It can be utilized by the Xcode project the same way as any other framework with non-Kotlin origins.</li>\n<li>It looks like the unavailability to use\n        Android SDK is the result of using <code>jvm(\"android\")</code> target instead\n        of <code>android()</code> one. To use the android target, one has to apply the android Gradle plugin in addition to kotlin-multiplatform one.</li>\n<li>I\n    think you want to do something like that: just ordinary class\n    declaration in the <code>common</code>  and extension function for it with an\n    <code>expect</code> modifier. And then actualize it in the platform-specific\n    code.</li>\n<li>I think so.</li>\n<li>I'd also recommend you to have a look at\n    <a href=\"https://github.com/touchlab/DroidconKotlin\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://github.com/Kotlin/kotlinconf-spinner\" rel=\"nofollow noreferrer\">this</a>, maybe these examples will be complex enough for you.\ud83d\ude01</li>\n</ol>\n"}], "owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 58712238, "answer_count": 1, "score": 0, "last_activity_date": 1572960077, "creation_date": 1572942725, "question_id": 58707299, "link": "https://stackoverflow.com/questions/58707299/implement-camera-lib-with-kotlin-multiplatform", "title": "Implement camera lib with Kotlin multiplatform", "body": "<p>I'm trying to understand what structure should have a multiplatform library. Checking on the Internet I've seen a huge number of examples explaining how to make a log or a \"hello world\" but there's a lack of complex examples, even in the <a href=\"https://kotlinlang.org/docs/reference/multiplatform.html\" rel=\"nofollow noreferrer\">official documentation</a> (important to note that I'm only interested in mobile platform, iOS and Android).</p>\n\n<p>So I want to create an example that simply opens the camera (as a lib, not as a multiplatform app) just to have an idea of how to work with a real feature which, also, is native. Right now I have created a project following the <a href=\"https://play.kotlinlang.org/hands-on/Targeting%20iOS%20and%20Android%20with%20Kotlin%20Multiplatform/01_Introduction\" rel=\"nofollow noreferrer\">official example</a>, so it has a common module (using expect) and one for Android and one for iOS (using actual), and now these are my doubts:</p>\n\n<ul>\n<li><p>I've seen that the iOS module is also in Kotlin, Kotlin/Native as I understand. Should my project have also an wrapper in Swift, or will the library have no Swift code? And if it should, where should it be in the project structure?</p></li>\n<li><p>Also in the Android module I've noticed I cannot import the class \"Activity\" nor the \"Intent\", which I will need to open the camera, why? is this code restricted to Java without the Android libs? Should it also have a wrapper to Android? If so, how can I configure this wrappers?</p></li>\n<li><p>I know I can use the \"expect\" key when creating classes but, as I understand, the common and the native modules will always be separated classes. I mean, if I create a class in the common module, can I define methods of this class using \"expect\" and define them later in the native?</p></li>\n<li><p>Can my lib have a Manifest?</p></li>\n<li><p>Finally, does anyone knows a real example that really explain a more complex situation?</p></li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1572942616, "post_id": 58706970, "comment_id": 103708780, "body": "Why do you need that? What information do you want to get from it?"}, {"owner": {"reputation": 33, "user_id": 5440568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860d55f5f14d75ad348201f51adae069?s=128&d=identicon&r=PG&f=1", "display_name": "natashadawra", "link": "https://stackoverflow.com/users/5440568/natashadawra"}, "reply_to_user": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1572944496, "post_id": 58706970, "comment_id": 103709708, "body": "@Ircover The client needs the information as to when the user kills the app"}, {"owner": {"reputation": 2203, "user_id": 7176189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R4gG9.png?s=128&g=1", "display_name": "jai khambhayta", "link": "https://stackoverflow.com/users/7176189/jai-khambhayta"}, "edited": false, "score": 0, "creation_date": 1572957844, "post_id": 58706970, "comment_id": 103716714, "body": "<a href=\"https://stackoverflow.com/questions/19568315/how-to-handle-code-when-app-is-killed-by-swiping-in-android\" title=\"how to handle code when app is killed by swiping in android\">stackoverflow.com/questions/19568315/&hellip;</a>  check this one"}], "owner": {"reputation": 33, "user_id": 5440568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860d55f5f14d75ad348201f51adae069?s=128&d=identicon&r=PG&f=1", "display_name": "natashadawra", "link": "https://stackoverflow.com/users/5440568/natashadawra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572941279, "creation_date": 1572941279, "question_id": 58706970, "link": "https://stackoverflow.com/questions/58706970/how-to-send-custom-google-analytics-event-when-user-kills-the-application-in-and", "title": "How to Send custom google Analytics event when user kills the application in Android", "body": "<p>I need to send google Analytics custom even when the user kills the application.</p>\n\n<ol>\n<li>I tried Service.onTaskRemoved() but could not preserve Analytics object till this is called</li>\n<li>I tried to send the event when the app goes to the background on pressing the back button, but this does not really solve the problem because I cannot track when the application goes to the background on pressing the home button.</li>\n</ol>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "kapt"], "answers": [{"comments": [{"owner": {"reputation": 2083, "user_id": 5994190, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b9dd29e38dcadc42fbe02964a6ed685f?s=128&d=identicon&r=PG&f=1", "display_name": "the_dani", "link": "https://stackoverflow.com/users/5994190/the-dani"}, "edited": false, "score": 0, "creation_date": 1573026980, "post_id": 58717073, "comment_id": 103742400, "body": "Well, but actually my compiler does not find <code>BaseFileObject</code>, not <code>Generated</code>..."}], "tags": [], "owner": {"reputation": 659, "user_id": 2606290, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/5fPLm.jpg?s=128&g=1", "display_name": "Fernando Prieto", "link": "https://stackoverflow.com/users/2606290/fernando-prieto"}, "is_accepted": false, "score": 0, "last_activity_date": 1572977119, "creation_date": 1572977119, "answer_id": 58717073, "question_id": 58706637, "link": "https://stackoverflow.com/questions/58706637/kaptdebugkotlin-crashes-when-building-with-java-version-11-or-higher/58717073#58717073", "title": "kaptDebugKotlin crashes when building with Java Version 11 or higher", "body": "<p>I had a similar issue recently regarding to JDK9.\nI used this library which solved the problem:</p>\n\n<pre><code>\"com.github.pengrad:jdk9-deps:1.0\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2083, "user_id": 5994190, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b9dd29e38dcadc42fbe02964a6ed685f?s=128&d=identicon&r=PG&f=1", "display_name": "the_dani", "link": "https://stackoverflow.com/users/5994190/the-dani"}, "is_accepted": true, "score": 0, "last_activity_date": 1575328917, "creation_date": 1575328917, "answer_id": 59148086, "question_id": 58706637, "link": "https://stackoverflow.com/questions/58706637/kaptdebugkotlin-crashes-when-building-with-java-version-11-or-higher/59148086#59148086", "title": "kaptDebugKotlin crashes when building with Java Version 11 or higher", "body": "<p>Unfortunately, this is due to the lacking support of JDK 13 in Gradle 5.x.\nGradle 6.0 will support Java 13 (<a href=\"https://docs.gradle.org/6.0/release-notes.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/6.0/release-notes.html</a>).</p>\n\n<p>Until then, there's no other possibility than waiting.</p>\n"}], "owner": {"reputation": 2083, "user_id": 5994190, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b9dd29e38dcadc42fbe02964a6ed685f?s=128&d=identicon&r=PG&f=1", "display_name": "the_dani", "link": "https://stackoverflow.com/users/5994190/the-dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 59148086, "answer_count": 2, "score": 1, "last_activity_date": 1575328917, "creation_date": 1572939808, "last_edit_date": 1573027011, "question_id": 58706637, "link": "https://stackoverflow.com/questions/58706637/kaptdebugkotlin-crashes-when-building-with-java-version-11-or-higher", "title": "kaptDebugKotlin crashes when building with Java Version 11 or higher", "body": "<p>I'm getting an IllegalStateException/NoClassDefFoundError when trying to run the command <code>./gradlew :data:test</code> on my project (<a href=\"https://github.com/guger/MoneyBook\" rel=\"nofollow noreferrer\">https://github.com/guger/MoneyBook</a>). This error does occur when I'm using a Java Version higher than 11. I'm not able to use the jdk bundled into the IDE, since robolectric requires Java 9 or higher, when testing against Android Q and Java 9 does not work as it provides it's version string in a format which is not recognized by robolectric.</p>\n\n<pre><code>java.lang.IllegalStateException: failed to analyze: java.lang.NoClassDefFoundError: com/sun/tools/javac/file/BaseFileObject\n        at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:56)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:182)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:164)\n        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:54)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:84)\n        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:42)\n        at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:104)\n        at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1558)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:689)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:562)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:796)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:677)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:389)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:676)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:835) Caused by: java.lang.NoClassDefFoundError: com/sun/tools/javac/file/BaseFileObject\n        at org.jetbrains.kotlin.kapt3.base.javac.KaptJavaFileManager.shouldBeFiltered(KaptJavaFileManager.kt:69)\n        at org.jetbrains.kotlin.kapt3.base.javac.KaptJavaFileManager.list(KaptJavaFileManager.kt:49)\n        at jdk.compiler/com.sun.tools.javac.code.ClassFinder.list(ClassFinder.java:737)\n        at jdk.compiler/com.sun.tools.javac.code.ClassFinder.scanUserPaths(ClassFinder.java:674)\n        at jdk.compiler/com.sun.tools.javac.code.ClassFinder.fillIn(ClassFinder.java:554)\n        at jdk.compiler/com.sun.tools.javac.code.ClassFinder.complete(ClassFinder.java:299)\n        at jdk.compiler/com.sun.tools.javac.code.Symbol.complete(Symbol.java:642)\n        at jdk.compiler/com.sun.tools.javac.code.Symbol$PackageSymbol.members(Symbol.java:1131)\n        at jdk.compiler/com.sun.tools.javac.code.Symtab.listPackageModules(Symtab.java:834)\n        at jdk.compiler/com.sun.tools.javac.comp.Enter.visitTopLevel(Enter.java:345)\n        at jdk.compiler/com.sun.tools.javac.tree.JCTree$JCCompilationUnit.accept(JCTree.java:535)\n        at jdk.compiler/com.sun.tools.javac.comp.Enter.classEnter(Enter.java:286)\n        at jdk.compiler/com.sun.tools.javac.comp.Enter.classEnter(Enter.java:301)\n        at jdk.compiler/com.sun.tools.javac.comp.Enter.complete(Enter.java:577)\n        at jdk.compiler/com.sun.tools.javac.comp.Enter.main(Enter.java:561)\n        at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:1066)\n        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:66)\n        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:35)\n        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:230)\n        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:188)\n        at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:99)\n        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)\n        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)\n        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:81)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:555)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:82)\n        at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:107)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:546)\n        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:177)\n        ... 23 more Caused by: java.lang.ClassNotFoundException: com.sun.tools.javac.file.BaseFileObject\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:436)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 52 more\n</code></pre>\n\n<p>Does anyone experience a similar behaviour when running Android Projects on Java 11/12/13?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "pagination", "notifydatasetchanged"], "comments": [{"owner": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 0, "creation_date": 1572940168, "post_id": 58706612, "comment_id": 103707703, "body": "try using jetpack pagination library - <a href=\"https://developer.android.com/topic/libraries/architecture/paging/\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/paging</a>"}, {"owner": {"reputation": 2200, "user_id": 4591115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb520245a355584395df519db195f3d?s=128&d=identicon&r=PG&f=1", "display_name": "Keshav1234", "link": "https://stackoverflow.com/users/4591115/keshav1234"}, "reply_to_user": {"reputation": 914, "user_id": 7473685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-KRePsh63XPc/AAAAAAAAAAI/AAAAAAAAAVQ/H7aB1jJaHxc/photo.jpg?sz=128", "display_name": "Pavan Varma", "link": "https://stackoverflow.com/users/7473685/pavan-varma"}, "edited": false, "score": 0, "creation_date": 1572945778, "post_id": 58706612, "comment_id": 103710440, "body": "@PavanVarma came to know about the library after posting the question. Exploring about that now."}], "owner": {"reputation": 2200, "user_id": 4591115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb520245a355584395df519db195f3d?s=128&d=identicon&r=PG&f=1", "display_name": "Keshav1234", "link": "https://stackoverflow.com/users/4591115/keshav1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572939724, "creation_date": 1572939724, "question_id": 58706612, "link": "https://stackoverflow.com/questions/58706612/pagination-not-working-as-expected-in-android-recyclerview", "title": "Pagination not working as expected in Android recyclerview", "body": "<p>I am facing an issue in implementing pagination behavior in android.</p>\n\n<p>Issue Faced:\nWhen I add the new list of items are added to the recyclerview it is scrolling to the top item.</p>\n\n<p>I want to avoid the recyclerview scrolling to the top and have to add the new list of items.</p>\n\n<p>My current code is as below:</p>\n\n<pre><code>with(recyclerview) {\n                    layoutManager = LinearLayoutManager(MainApplication.appContext).apply {\n                        bookingList.addAll(it.bookings as ArrayList&lt;Upcoming&gt;)\n                        list = it\n                        if (Adapter == null) {\n                                adapter = Adapter(bookingList)\n                                previouSize = it.bookings.size\n                            }\n                        } else {\n                            val recyclerViewState =\n                                recyclerview.layoutManager?.onSaveInstanceState()\n                            adapter?.updateData(bookingList)\n                            if (viewModel.pageNo &gt; 1) {\n                                adapter?.notifyItemRangeInserted(previouSize?.minus(1)!!, previouSize?.plus(it.size)!!)\n                                previouSize = adapter?.itemCount\n                            } else {\n                                adapter?.notifyDataSetChanged()\n\n                            }\n                            recyclerview.layoutManager?.onRestoreInstanceState(recyclerViewState)\n                        }\n                    }\n</code></pre>\n\n<p>UpdateData function:</p>\n\n<pre><code>fun updateData(upcoming: List&lt;Upcoming&gt;?) {\n        list = upcoming!!\n    }\n</code></pre>\n\n<p>I have tried with <code>notifyDatasetChanged</code>, <code>notifyItemRangeInserted</code>, <code>notifyItemRangeChanged</code>, <code>notifyItemInserted</code>, <code>notifyItemChanged</code> nothing is working. I have tried removing <code>onSaveInstanceState</code> on <code>onRestoreInstanceState</code> also.</p>\n\n<p>Please help me in fixing this issue. </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1572940388, "post_id": 58706541, "comment_id": 103707799, "body": "Add full xml file here"}, {"owner": {"reputation": 381, "user_id": 3779100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3554ffa1093bc0d9e8b59430a9dd8ec?s=128&d=identicon&r=PG&f=1", "display_name": "Ajit Sharma", "link": "https://stackoverflow.com/users/3779100/ajit-sharma"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1572941113, "post_id": 58706541, "comment_id": 103708087, "body": "Above is full xml"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "edited": false, "score": 0, "creation_date": 1572941187, "post_id": 58706541, "comment_id": 103708119, "body": "Isn&#39;t that the kotlin class?"}, {"owner": {"reputation": 381, "user_id": 3779100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3554ffa1093bc0d9e8b59430a9dd8ec?s=128&d=identicon&r=PG&f=1", "display_name": "Ajit Sharma", "link": "https://stackoverflow.com/users/3779100/ajit-sharma"}, "edited": false, "score": 0, "creation_date": 1572942897, "post_id": 58706541, "comment_id": 103708891, "body": "Nope. Its an XML file."}], "owner": {"reputation": 381, "user_id": 3779100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3554ffa1093bc0d9e8b59430a9dd8ec?s=128&d=identicon&r=PG&f=1", "display_name": "Ajit Sharma", "link": "https://stackoverflow.com/users/3779100/ajit-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572941254, "creation_date": 1572939419, "last_edit_date": 1572941254, "question_id": 58706541, "link": "https://stackoverflow.com/questions/58706541/after-restrating-the-android-studio-xml-showing-some-encoded-code-with-android-s", "title": "After restrating the Android Studio XML showing some encoded code with Android Studio 3.5.2", "body": "<p>After normal restart of android studio(with Version 3.5.2 and com.android.tools.build:gradle:3.5.2), I am getting some unreadable code like</p>\n\n<pre><code>package com.myapp.android.Activity.Account;\n\nimport java.lang.System;\n\n@kotlin.Metadata(mv = {1, 1, 15}, bv = {1, 0, 3}, k = 1, d1 = {\"\\u0000@\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0003\\n\\u0002\\u0010\\u0002\\n\\u0000\\n\\u0002\\u0010\\u000e\\n\\u0002\\b\\u0003\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0000\\n\\u0002\\u0010 \\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0003\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0003\\u0018\\u00002\\u00020\\u0001B\\u0005\\u00a2\\u0006\\u0002\\u0010\\u0002J\\u0010\\u0010\\u0007\\u001a\\u00020\\b2\\u0006\\u0010\\t\\u001a\\u00020\\nH\\u0002J\\b\\u0010\\u000b\\u001a\\u00020\\bH\\u0002J\\u0016\\u0010\\f\\u001a\\u00020\\b2\\f\\u0010\\r\\u001a\\b\\u0012\\u0004\\u0012\\u00020\\u000\n</code></pre>\n\n<p>I am getting above encoded code in XML file.\nHow to handle it?</p>\n"}, {"tags": ["android", "kotlin", "kommunicate"], "comments": [{"owner": {"reputation": 885, "user_id": 7047583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdaa9fdd80ac74e5c35f48ff9570f322?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Sable", "link": "https://stackoverflow.com/users/7047583/prashant-sable"}, "edited": false, "score": 0, "creation_date": 1572933397, "post_id": 58705250, "comment_id": 103705327, "body": "Pls show your data class. I think issue is there in data class."}], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 7307460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0695d020f41960e975c2540395d2dc3a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Kanswal", "link": "https://stackoverflow.com/users/7307460/ashish-kanswal"}, "is_accepted": false, "score": 3, "last_activity_date": 1575886949, "creation_date": 1575886949, "answer_id": 59246789, "question_id": 58705250, "link": "https://stackoverflow.com/questions/58705250/kommunicate-producing-illegalargumentexception-when-logging-in-using-release-bui/59246789#59246789", "title": "Kommunicate producing IllegalArgumentException when logging in using release build but is working fine in debug build", "body": "<p>This is not the issue with build flavor, you might have enabled proguard for release build and haven't added their proguard rules in your proguard-rules.pro file.</p>\n\n<p>Checkout the doc to add the rules in your proguard file: <a href=\"https://docs.kommunicate.io/docs/android-installation#building-with-proguard\" rel=\"nofollow noreferrer\">https://docs.kommunicate.io/docs/android-installation#building-with-proguard</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10651737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C3litIgSOuc/AAAAAAAAAAI/AAAAAAAAAAc/5TOiq0ft-uM/photo.jpg?sz=128", "display_name": "Sushant Yadav", "link": "https://stackoverflow.com/users/10651737/sushant-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575886949, "creation_date": 1572933175, "question_id": 58705250, "link": "https://stackoverflow.com/questions/58705250/kommunicate-producing-illegalargumentexception-when-logging-in-using-release-bui", "title": "Kommunicate producing IllegalArgumentException when logging in using release build but is working fine in debug build", "body": "<p>I am trying to integrate Kommunicate Chatbot in my Android App.\nAfter I have created KMUser with UserId and trying to login using Kommunicate.login(), it is giving me IllegalArgumentException, in onFailure() function.</p>\n\n<p>This exception only occurs in release build, but not in debug build.</p>\n\n<p>I have tried switching data in KMUser but didn't help.</p>\n\n<p>Here is the code snippet.</p>\n\n<pre><code>Kommunicate.init(this@HomeActivity, APP_ID)\n\n        if (!(mHomeViewModel?.dbProfileResponseModel?.contactNum.isNullOrEmpty())) {\n            kmUser.userId = mHomeViewModel?.dbProfileResponseModel?.contactNum\n        } else {\n            kmUser = Kommunicate.getVisitor()\n        }\n        if (!(mHomeViewModel?.dbProfileResponseModel?.email.isNullOrEmpty())) {\n            kmUser.email = mHomeViewModel?.dbProfileResponseModel?.email\n        }\n\n        kmUser.applicationId = APP_ID\n</code></pre>\n\n<pre><code>Kommunicate.login(this@HomeActivity, kmUser, object : KMLoginHandler {\n            override fun onSuccess(registrationResponse: RegistrationResponse?, context: Context?) {\n\n                val botIds = arrayListOf&lt;String&gt;()\n                botIds.add(\"beekun-yx526\")\n\n                KmConversationBuilder(this@HomeActivity)\n                        .setSingleConversation(false)\n                        .setBotIds(botIds)\n                        .setKmUser(kmUser)\n                        .launchConversation(object : KmCallback {\n                            override fun onSuccess(message: Any) {\n                                progressDialog.dismiss()\n                            }\n\n                            override fun onFailure(error: Any) {\n                                progressDialog.dismiss()\n                            }\n                        })\n\n            }\n\n            override fun onFailure(registrationResponse: RegistrationResponse?, exception: Exception?) {\n                if (progressDialog != null &amp;&amp; progressDialog.isShowing) {\n                    progressDialog.dismiss()\n                }\n                createLoginErrorDialog(registrationResponse, exception)\n            }\n        })\n</code></pre>\n\n<p>This is the exception raised.</p>\n\n<pre><code>W/System.err: java.lang.IllegalArgumentException: class c.b.g.a declares multiple JSON fields named a\nW/System.err:     at com.google.gson.b.a.i.a(ReflectiveTypeAdapterFactory.java:172)\nW/System.err:     at com.google.gson.b.a.i.a(ReflectiveTypeAdapterFactory.java:102)\nW/System.err:     at com.google.gson.Gson.a(Gson.java:458)\nW/System.err:     at com.google.gson.Gson.a(Gson.java:696)\nW/System.err:     at com.google.gson.Gson.a(Gson.java:683)\nW/System.err:     at com.google.gson.Gson.b(Gson.java:638)\nW/System.err:     at com.google.gson.Gson.b(Gson.java:618)\nW/System.err:     at com.applozic.mobicomkit.api.a.a.a.a(RegisterUserClientService.java:100)\nW/System.err:     at c.b.a.i.a(KmUserLoginTask.java:62)\nW/System.err:     at c.b.a.i.doInBackground(KmUserLoginTask.java:24)\nW/System.err:     at android.os.AsyncTask$2.call(AsyncTask.java:334)\nW/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:266)\nW/System.err:     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:246)\nW/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)\nW/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\nW/System.err:     at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n\n<p>Please help me out resolving this issue.</p>\n"}, {"tags": ["android", "kotlin", "android-webview"], "comments": [{"owner": {"reputation": 2568, "user_id": 685060, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4b3dae619e0ce0dcd8e1fa0632711662?s=128&d=identicon&r=PG", "display_name": "lighter", "link": "https://stackoverflow.com/users/685060/lighter"}, "edited": false, "score": 0, "creation_date": 1572941048, "post_id": 58705118, "comment_id": 103708053, "body": "what&#39;s the down vote reason?"}], "answers": [{"tags": [], "owner": {"reputation": 2568, "user_id": 685060, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4b3dae619e0ce0dcd8e1fa0632711662?s=128&d=identicon&r=PG", "display_name": "lighter", "link": "https://stackoverflow.com/users/685060/lighter"}, "is_accepted": true, "score": 0, "last_activity_date": 1573019187, "creation_date": 1573019187, "answer_id": 58723779, "question_id": 58705118, "link": "https://stackoverflow.com/questions/58705118/kotlin-how-to-use-new-webview-open-a-javascripts-window-open/58723779#58723779", "title": "kotlin how to use new webView open a javascript&#39;s window.open", "body": "<p>This is work for me, I need set <code>layoutParams</code> to new webView. So I reuse the original view layout.</p>\n\n<pre><code>newWebView.layoutParams = view.layoutParams\n</code></pre>\n"}], "owner": {"reputation": 2568, "user_id": 685060, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4b3dae619e0ce0dcd8e1fa0632711662?s=128&d=identicon&r=PG", "display_name": "lighter", "link": "https://stackoverflow.com/users/685060/lighter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 1, "accepted_answer_id": 58723779, "answer_count": 1, "score": -1, "last_activity_date": 1573019187, "creation_date": 1572932489, "last_edit_date": 1572941339, "question_id": 58705118, "link": "https://stackoverflow.com/questions/58705118/kotlin-how-to-use-new-webview-open-a-javascripts-window-open", "title": "kotlin how to use new webView open a javascript&#39;s window.open", "body": "<p>I reference <a href=\"https://stackoverflow.com/a/48514760/685060\">this</a>, I want open a new webView, when I meet <code>window.open</code>. I tried hard code to open a Google page,  this is my code</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private var myWebView: WebView? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        myWebView = findViewById(R.id.webview)\n        myWebView!!.settings.javaScriptEnabled = true\n        myWebView!!.settings.domStorageEnabled = true\n        myWebView!!.settings.setSupportMultipleWindows(true)\n        myWebView!!.settings.javaScriptCanOpenWindowsAutomatically = true\n\n        myWebView!!.webViewClient = object : WebViewClient() {\n            override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n                view?.loadUrl(url)\n                return true\n            }\n        }\n\n        myWebView!!.webChromeClient = object : WebChromeClient() {\n            ....\n\n            override fun onCreateWindow(\n                view: WebView,\n                dialog: Boolean,\n                userGesture: Boolean,\n                resultMsg: android.os.Message\n            ): Boolean {\n                var cookieValues: HashMap&lt;String, String&gt; = _parseCookie(view.url)\n                var tokenData: HashMap&lt;String, String&gt; = HashMap()\n                val newWebView = WebView(view.context)\n                view.addView(newWebView)\n\n                newWebView.settings.javaScriptEnabled = true\n                newWebView.settings.setSupportZoom(true)\n                newWebView.settings.builtInZoomControls = true\n                newWebView.settings.setSupportMultipleWindows(true)\n\n                val transport = resultMsg.obj as WebView.WebViewTransport\n                transport.webView = newWebView\n                resultMsg.sendToTarget()\n\n                newWebView.webViewClient = object : WebViewClient(){\n                    override fun shouldOverrideUrlLoading(\n                        view: WebView, url: String\n                    ): Boolean {\n                        view.loadUrl(\"https://www.google.com\")\n                        return true\n                    }\n                }\n\n                return true    \n            }\n        }\n\n        myWebView!!.loadUrl(\"http://www.example.com\")\n    }\n\n    .... \n}\n</code></pre>\n\n<p>It's work, but the new webView size didn't full scree, and I click the search input, this app closed, I got this message.</p>\n\n<pre><code>E/EGL_emulation: tid 8491: eglSurfaceAttrib(1354): error 0x3009 (EGL_BAD_MATCH)\nW/OpenGLRenderer: Failed to set EGL_SWAP_BEHAVIOR on surface 0xd623bbc0, error=EGL_BAD_MATCH\nW/cr_AwAutofillManager: Application attempted to call on a destroyed AwAutofillManager\n    java.lang.Throwable\n        at org.chromium.android_webview.AwAutofillManager.checkAndWarnIfDestroyed(AwAutofillManager.java:18)\n        at org.chromium.android_webview.AwAutofillProvider.startAutofillSession(AwAutofillProvider.java:98)\n        at org.chromium.base.SystemMessageHandler.nativeDoRunLoopOnce(Native Method)\n        at org.chromium.base.SystemMessageHandler.handleMessage(SystemMessageHandler.java:9)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6680)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\nW/cr_AwAutofillManager: Application attempted to call on a destroyed AwAutofillManager\n    java.lang.Throwable\n        at org.chromium.android_webview.AwAutofillManager.checkAndWarnIfDestroyed(AwAutofillManager.java:18)\n        at org.chromium.android_webview.AwAutofillManager.notifyVirtualViewEntered(AwAutofillManager.java:11)\n        at org.chromium.android_webview.AwAutofillProvider.startAutofillSession(AwAutofillProvider.java:103)\n        at org.chromium.base.SystemMessageHandler.nativeDoRunLoopOnce(Native Method)\n        at org.chromium.base.SystemMessageHandler.handleMessage(SystemMessageHandler.java:9)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6680)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n\n<p>This is my <strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;WebView\n        android:id=\"@+id/webview\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:layout_editor_absoluteX=\"8dp\"\n        tools:layout_editor_absoluteY=\"8dp\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>How can I fix it? Thanks your help.</p>\n"}, {"tags": ["android", "kotlin", "viewmodel"], "answers": [{"tags": [], "owner": {"reputation": 596, "user_id": 11218138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247f079528f83a18b6e56267664ea9bd?s=128&d=identicon&r=PG&f=1", "display_name": "Nezih Y\u0131lmaz", "link": "https://stackoverflow.com/users/11218138/nezih-y%c4%b1lmaz"}, "is_accepted": true, "score": 5, "last_activity_date": 1572932199, "creation_date": 1572932199, "answer_id": 58705066, "question_id": 58704965, "link": "https://stackoverflow.com/questions/58704965/viewmodel-does-not-retain-data-after-fragment-recreation/58705066#58705066", "title": "ViewModel does not retain data after fragment recreation", "body": "<p>Retrieve the viewmodel by passing viewmodelprovider the fragments parent activity instead of fragment itself.</p>\n\n<p>ViewModelProviders.of(activity).get(SongListViewModel::class.java)</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 11841659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEsjL.png?s=128&g=1", "display_name": "Danila says Reinstate Monica", "link": "https://stackoverflow.com/users/11841659/danila-says-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1572933094, "creation_date": 1572933094, "answer_id": 58705228, "question_id": 58704965, "link": "https://stackoverflow.com/questions/58704965/viewmodel-does-not-retain-data-after-fragment-recreation/58705228#58705228", "title": "ViewModel does not retain data after fragment recreation", "body": "<p>I don't consider it as an answer, just a little explanation, your viewModel lifecycle is connected to your fragments lifecycle so it's expectedly that when you changing fragments - it destroyed and concerning your viewModel destroyed too. The solution is move creating viewmodel to activity and pasing it like Nezih adviced, but I'm not sure it is the best option.</p>\n"}, {"tags": [], "owner": {"reputation": 5453, "user_id": 3283568, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/TiH1l.jpg?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3283568/akshay"}, "is_accepted": false, "score": 1, "last_activity_date": 1572935949, "creation_date": 1572935949, "answer_id": 58705755, "question_id": 58704965, "link": "https://stackoverflow.com/questions/58704965/viewmodel-does-not-retain-data-after-fragment-recreation/58705755#58705755", "title": "ViewModel does not retain data after fragment recreation", "body": "<p>Note that we need create the <code>ViewModel</code> instance in activity scope, otherwise android will create a separate instance rather than sharing the same instance and we will not get the data.</p>\n\n<p>For fragment do it like this:</p>\n\n<pre><code>activity?.let {\n    val viewmodel = ViewModelProviders.of(it).get(SongListViewModel::class.java)\n\n     viewmodel.songs.observe(this, Observer { songs -&gt;\n            songs?.let {\n                Log.d(\"Song Fragment\", \"ObserveViewModel\")\n                songListAdapter.updateSongList(songs)\n            }\n        })\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3835604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8944b6324d54d0d867e10c65a3e1c09b?s=128&d=identicon&r=PG&f=1", "display_name": "user3835604", "link": "https://stackoverflow.com/users/3835604/user3835604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 58705066, "answer_count": 3, "score": 2, "last_activity_date": 1572935949, "creation_date": 1572931423, "last_edit_date": 1572931540, "question_id": 58704965, "link": "https://stackoverflow.com/questions/58704965/viewmodel-does-not-retain-data-after-fragment-recreation", "title": "ViewModel does not retain data after fragment recreation", "body": "<p>I have three fragment app with a bottom navigation bar and I use NavigationUI to switch. \nI also have a viewmodel which creates the data (from the assets foolder) and the fragments observe the array list of live data which I use to populate a recycler view.</p>\n\n<p>My problem is  whenever I switch fragments, as the fragment is recreated, I do not want the data retrieval to happen every time the fragment is recreated. Hence the use of the viewmodel. But in my case, the data in the viewmodel is not retained.\nI have attached the fragment and the viewmodel code.I am not sure what is wrong here.</p>\n\n<p>I have tried loggging the number of entries in the aaraylist and it comes back with 0, if I do not call the routine which populates the arraylist.</p>\n\n<h1>SongsFragment</h1>\n\n<pre><code>private const val TAG = \"Songs Fragment\"\n\nclass SongsFragment : Fragment(), android.widget.SearchView.OnQueryTextListener {\n\n    private val viewmodel: SongListViewModel by lazy { ViewModelProviders.of(this).get(SongListViewModel::class.java)}\n\n    private val songListAdapter = SongListAdapter(arrayListOf())\n    private var raga = \"All\"\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n        Log.d(TAG, \"onCreateView called\")\n\n        return inflater.inflate(R.layout.fragment_songs, container, false)\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        Log.d(TAG, \"onViewCreated called\")\n\n\n\n        val context: FragmentActivity? = activity\n\n        (activity as AppCompatActivity).supportActionBar?.subtitle = \"Songs\"\n\n        val assetsPath: AssetManager? = context?.assets\n        val assetList = assetsPath?.list(\"\")\n        if (assetList != null) {\n            for (item in assetList)\n                Log.d(\"SongsFragment\", assetsPath.toString() + item)\n        }\n\n        arguments?.let {\n            raga = SongsFragmentArgs.fromBundle(it).raga\n        }\n\n        Log.d(\"Song Fragment\", \"Raga passed: \" + raga)\n\n        Log.d(TAG, \"Number of songs: \" + viewmodel.songList.size.toString())\n\n        if (raga == \"All\") {\n            viewmodel.allSongs()\n            viewmodel.allSongs(assetsPath!!)\n        } else {\n            viewmodel.songsForRaga(assetsPath!!, raga)\n        }\n\n        Log.d(TAG, \": Songlist size: \" + viewmodel.songList.size.toString())\n\n\n        songList_RecyclerView.apply {\n            layoutManager = LinearLayoutManager(context)\n            adapter = songListAdapter\n        }\n\n        songSearchView.setOnQueryTextListener(this)\n\n        observeViewModel()\n    }\n\n    override fun onQueryTextSubmit(query: String): Boolean {\n\n        return false\n    }\n\n    override fun onQueryTextChange(newText: String): Boolean {\n        Log.i(\"Song Fragment\", \"Text change:\" + newText.length.toString())\n\n        viewmodel.songSearchFilter(newText)\n\n        return false\n    }\n\n    fun observeViewModel() {\n        viewmodel.songs.observe(this, Observer { songs -&gt;\n            songs?.let {\n                Log.d(\"Song Fragment\", \"ObserveViewModel\")\n                songListAdapter.updateSongList(songs)\n            }\n        })\n    }\n}\n</code></pre>\n\n<h1>SongListViewModel</h1>\n\n<pre><code>private const val TAG = \"SongListViewModel\"\n\nclass SongListViewModel : ViewModel() {\n\n    val songs = MutableLiveData&lt;ArrayList&lt;Song&gt;&gt;()\n    var songList = arrayListOf&lt;Song&gt;()\n\n    fun allSongs() {\n        songList = getAllSongs()\n\n        songs.value = ArrayList(songList.sortedWith(compareBy({ it.songName })))\n    }\n\n    fun allSongs(assetsPath: AssetManager) {\n\n        Log.d(TAG, \"allSongs called\")\n        Log.d(TAG, \"Number of songs: \" + songList.size.toString())\n        getAllSongs(assetsPath)\n        songs.value = ArrayList(songList.sortedWith(compareBy({ it.songName })))\n    }\n\n    fun songSearchFilter(text: String) {\n\n        var filteredList = arrayListOf&lt;Song&gt;()\n        filteredList.clear()\n\n        if (text.length != 0) {\n            for (song in songList) {\n                if (song.songName.toLowerCase().contains(text)) {\n                    filteredList.add(song)\n                }\n\n            }\n            songs.value = ArrayList(filteredList.sortedWith(compareBy({ it.songName })))\n\n        } else {\n\n            songs.value = ArrayList(songList.sortedWith(compareBy({ it.songName })))\n        }\n\n\n    }\n\n    fun songsForRaga(assetsPath: AssetManager, raga: String) {\n\n        Log.d(TAG, \"songsForRaga called\")\n\n        var filteredList = arrayListOf&lt;Song&gt;()\n        filteredList.clear()\n        allSongs(assetsPath)\n        for (song in songList) {\n            if (song.raga == raga) {\n                filteredList.add(song)\n            }\n        }\n        songs.value = ArrayList(filteredList.sortedWith(compareBy({ it.songName })))\n    }\n\nfun getAllSongs(assetsPath: AssetManager) {\n\n        Log.d(TAG, \"getAllSongs called\")\n        val bufferedReader = assetsPath.open(\"test.csv\").bufferedReader()\n        val lineList = mutableListOf&lt;String&gt;()\n\n        bufferedReader.useLines { lines -&gt; lines.forEach { lineList.add(it) } }\n        lineList.forEach {\n            val parts = it.split(\",\")\n            songList.add(Song(parts[0], parts[1], parts[2], parts[3], \"\"))\n        }\n\n\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "realm"], "comments": [{"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "edited": false, "score": 0, "creation_date": 1572932101, "post_id": 58704878, "comment_id": 103704943, "body": "There is a even better way when dealing with kotlin use realm extension functions <a href=\"https://github.com/vicpinm/Kotlin-Realm-Extensions\" rel=\"nofollow noreferrer\">github.com/vicpinm/Kotlin-Realm-Extensions</a>"}, {"owner": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "edited": false, "score": 0, "creation_date": 1572932172, "post_id": 58704878, "comment_id": 103704971, "body": "Also don&#39;t use object class instead move your code into extension file"}, {"owner": {"reputation": 88, "user_id": 10954678, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3gxYuiiZ0f8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ9SDgEF7a6MXJp-JDAS5ZZW_SbXw/mo/photo.jpg?sz=128", "display_name": "ji Ba", "link": "https://stackoverflow.com/users/10954678/ji-ba"}, "reply_to_user": {"reputation": 1340, "user_id": 10888893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqDlu.jpg?s=128&g=1", "display_name": "Mr. Patel", "link": "https://stackoverflow.com/users/10888893/mr-patel"}, "edited": false, "score": 0, "creation_date": 1572932528, "post_id": 58704878, "comment_id": 103705093, "body": "thanks @Mr.Patel, I&#39;ll try that library."}], "owner": {"reputation": 88, "user_id": 10954678, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3gxYuiiZ0f8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ9SDgEF7a6MXJp-JDAS5ZZW_SbXw/mo/photo.jpg?sz=128", "display_name": "ji Ba", "link": "https://stackoverflow.com/users/10954678/ji-ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572930847, "creation_date": 1572930847, "question_id": 58704878, "link": "https://stackoverflow.com/questions/58704878/is-this-good-way-to-query-realm-in-kotlin", "title": "Is this good way to query realm in kotlin?", "body": "<p>I want reduce lines of code, (There are many overlapping codes)</p>\n\n<p>So I try move some functions to object class</p>\n\n<p>But is it good way?</p>\n\n<pre><code>object RealmManager {\n    fun getMemo() : RealmResults&lt;Memo&gt; {\n        Realm.getDefaultInstance().use { realm -&gt;\n            return realm.where(Memo::class.java).findAll()\n        }\n    }\n\n// more codes ~\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-cardview"], "comments": [{"owner": {"reputation": 1098, "user_id": 9908240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EqqQUy6lByw/AAAAAAAAAAI/AAAAAAAAAFs/4IdV2CygnX0/photo.jpg?sz=128", "display_name": "Viral Patel", "link": "https://stackoverflow.com/users/9908240/viral-patel"}, "edited": false, "score": 0, "creation_date": 1572931282, "post_id": 58704867, "comment_id": 103704739, "body": "see the demo example of GridView to solved your problem. Please try it."}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1572931346, "post_id": 58704867, "comment_id": 103704753, "body": "your question is unclear. What you are not able to achieve from the desired result with your current code ?"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572931403, "post_id": 58704867, "comment_id": 103704763, "body": "I have followed this already but the ImageView still fill the whole ScrollView. Any idea?"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572931461, "post_id": 58704867, "comment_id": 103704779, "body": "The ImageView is filling the whole scrollView instead of filling the CardView and respecting the CardView&#39;s height and width"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1572932124, "post_id": 58704867, "comment_id": 103704958, "body": "i think instead of match parent use wrap content and add image with fixed sized like 40*40"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572932277, "post_id": 58704867, "comment_id": 103705015, "body": "Going to try it, I&#39;ll hit you back later"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572932408, "post_id": 58704867, "comment_id": 103705055, "body": "It just zoomed the Image in the ImageView"}, {"owner": {"reputation": 5453, "user_id": 3283568, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/TiH1l.jpg?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3283568/akshay"}, "edited": false, "score": 0, "creation_date": 1572935267, "post_id": 58704867, "comment_id": 103705901, "body": "@GeraldTDPI Share your layout files"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572934223, "post_id": 58705396, "comment_id": 103705574, "body": "Yes i used a 520X520 Picture but i have tried to put it inside a same size imageview but its all fine :("}, {"owner": {"reputation": 101, "user_id": 11841659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEsjL.png?s=128&g=1", "display_name": "Danila says Reinstate Monica", "link": "https://stackoverflow.com/users/11841659/danila-says-reinstate-monica"}, "reply_to_user": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572934443, "post_id": 58705396, "comment_id": 103705646, "body": "Ok then it will be very nice from you to put here xml if you want get help :)"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572934563, "post_id": 58705396, "comment_id": 103705681, "body": "Thankyou but I need to do it programatically because a card view represents an item and i have different categories for each items."}, {"owner": {"reputation": 101, "user_id": 11841659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEsjL.png?s=128&g=1", "display_name": "Danila says Reinstate Monica", "link": "https://stackoverflow.com/users/11841659/danila-says-reinstate-monica"}, "reply_to_user": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572934744, "post_id": 58705396, "comment_id": 103705736, "body": "Got you, so did you try to put &quot;weight&quot; parametr to cardView?"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572935100, "post_id": 58705396, "comment_id": 103705843, "body": "Yes I did it this way"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572935104, "post_id": 58705396, "comment_id": 103705845, "body": "val param = GridLayout.LayoutParams()                                 param.rowSpec = GridLayout.spec(GridLayout.UNDEFINED, 1f)              param.columnSpec = GridLayout.spec(GridLayout.UNDEFINED, 1f)           card_view.layoutParams = param"}, {"owner": {"reputation": 101, "user_id": 11841659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEsjL.png?s=128&g=1", "display_name": "Danila says Reinstate Monica", "link": "https://stackoverflow.com/users/11841659/danila-says-reinstate-monica"}, "reply_to_user": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572935693, "post_id": 58705396, "comment_id": 103706047, "body": "kk, then I dont know how to help you, sorry)"}, {"owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "edited": false, "score": 0, "creation_date": 1572936076, "post_id": 58705396, "comment_id": 103706184, "body": "Its okay pal :)"}], "tags": [], "owner": {"reputation": 101, "user_id": 11841659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEsjL.png?s=128&g=1", "display_name": "Danila says Reinstate Monica", "link": "https://stackoverflow.com/users/11841659/danila-says-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1572934052, "creation_date": 1572934052, "answer_id": 58705396, "question_id": 58704867, "link": "https://stackoverflow.com/questions/58704867/how-to-set-imageview-in-cardview-properly/58705396#58705396", "title": "How to set ImageView in CardView properly", "body": "<p>I beleive it happens because u set width and height of your cardView as WRAP_CONTENT, and images that u put here is very big, so you should either change the size of images or use fixed size of cardView like 100dp height and 100dp-width, but that is not the best option or you can try to change your xml file, if you will put your xml file I will help you with that.\nAlso as long as it is LinearLayout try just put to every item \"weight\" parametr \"1\"</p>\n"}], "owner": {"reputation": 71, "user_id": 12056697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db29566f55a6c42f74425bbb519396?s=128&d=identicon&r=PG&f=1", "display_name": "GeraldTDPI", "link": "https://stackoverflow.com/users/12056697/geraldtdpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572934052, "creation_date": 1572930789, "question_id": 58704867, "link": "https://stackoverflow.com/questions/58704867/how-to-set-imageview-in-cardview-properly", "title": "How to set ImageView in CardView properly", "body": "<p>So I'm making a gallery like app and it needs some ScrollView and CardView inside it. </p>\n\n<p><a href=\"https://i.stack.imgur.com/TKkpI.jpg\" rel=\"nofollow noreferrer\">This is the screenshot when I put some background in the ImageView</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3XtlA.jpg\" rel=\"nofollow noreferrer\">This is how it suppose to look, I have removed the background image here</a></p>\n\n<p>I have tried to put an ImageView to inside the CardView with a Linear Layout but the Image filled the ScrollView Instead.</p>\n\n<pre><code>fun CreateCardView(ItemCount: Int){                                                         \n   for (i in 1 until ItemCount){                                                           \n\n       val card_view = CardView(this)                                                      \n       val param = GridLayout.LayoutParams()                                               \n       param.rowSpec = GridLayout.spec(GridLayout.UNDEFINED, 1f)                           \n       param.columnSpec = GridLayout.spec(GridLayout.UNDEFINED, 1f)                        \n       card_view.layoutParams = param                                                      \n       val param2 = card_view.layoutParams as GridLayout.LayoutParams                                                                            \n       card_view.layoutParams = param2                                                     \n       subLayoutGrid?.addView(card_view)                                                                      \n\n       val linearLayout = LinearLayout(this)                                               \n       val layoutParams = WindowManager.LayoutParams(                                      \n           WindowManager.LayoutParams.WRAP_CONTENT, // CardView width                      \n           WindowManager.LayoutParams.WRAP_CONTENT // CardView height                      \n       )                                                                                                                                       \n       linearLayout.layoutParams = layoutParams                                                                               \n       linearLayout.setBackgroundColor(Color.parseColor(\"#135517\"))                        \n       card_view.addView(linearLayout)                                                     \n\n\n       val imageView = ImageView(this)                                                     \n       val imageParams = WindowManager.LayoutParams(                                       \n           WindowManager.LayoutParams.MATCH_PARENT,                                        \n           WindowManager.LayoutParams.MATCH_PARENT                                         \n       )                                                                                   \n       imageView.layoutParams = imageParams                                                                                                       \n       imageView.setBackgroundResource(R.drawable.animaleight)                             \n       val layout = findViewById&lt;LinearLayout&gt;(finallinearId)                              \n       layout.addView(imageView)                                                           \n\n\n   }                                                                                       \n\n}\n</code></pre>\n\n<p>How can i achieve something like on the image 2 using ImageView</p>\n"}, {"tags": ["android", "json", "kotlin"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 1, "creation_date": 1572929125, "post_id": 58704638, "comment_id": 103704238, "body": "json array and json object are 2 different things"}, {"owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1572929204, "post_id": 58704638, "comment_id": 103704252, "body": "yeah, if i just have 1 array, i can convert it to Object. but i take many array overthere"}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 2, "creation_date": 1572929259, "post_id": 58704638, "comment_id": 103704265, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12559612/jsonarray-cannot-be-converted-to-jsonobject-error\">JSONArray cannot be converted to JSONObject error</a>"}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1572929336, "post_id": 58704638, "comment_id": 103704276, "body": "Should be <code>val jsonArray = JSONArray(response)</code> because your response is an array."}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 1, "creation_date": 1572929339, "post_id": 58704638, "comment_id": 103704277, "body": "you have just 1 json array with multiple json object. Check the link that I have shared above"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1572929652, "post_id": 58704638, "comment_id": 103704343, "body": "Adding to @VivekMishra, you have to take the array first then the object by rotating in a for loop."}, {"owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "edited": false, "score": 0, "creation_date": 1572929665, "post_id": 58704638, "comment_id": 103704346, "body": "i have checked that, i thing my code same as what you have shared"}, {"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1572929726, "post_id": 58704638, "comment_id": 103704356, "body": "@GyrothGames do you know how to identify which is json array and which is json object ?"}], "answers": [{"tags": [], "owner": {"reputation": 3396, "user_id": 4854891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WEK2n.jpg?s=128&g=1", "display_name": "Jakir Hossain", "link": "https://stackoverflow.com/users/4854891/jakir-hossain"}, "is_accepted": false, "score": 2, "last_activity_date": 1572929748, "creation_date": 1572929748, "answer_id": 58704734, "question_id": 58704638, "link": "https://stackoverflow.com/questions/58704638/the-jsonarray-cannot-be-converted-to-jsonobject/58704734#58704734", "title": "The JSONArray cannot be converted to JSONObject", "body": "<p>try like the following.</p>\n\n<pre><code>private fun findsend() {\n    val URL_PROFILE = \"https://awalspace.com/app/imbalopunyajangandiganggu/findsend.php\"\n    val stringRequest = object : StringRequest(Request.Method.GET, URL_PROFILE,\n            Response.Listener { response -&gt;\n                try {\n                    val jsonArray = JSONArray(response) // use JSONArray instead of JSONObject\n                    for(i in 0 until jsonArray.length()){\n                         var jsonObject = jsonArray.getJSONObject(i) // get each jsonobject from your jsonarray\n\n                         var name = jsonObject.getString(\"name\").trim()\n                         var no_hp = jsonObject.getString(\"no_hp\").trim()\n                         fetchUsers(name,no_hp)\n                    }\n\n\n                } catch (e: JSONException) {\n                    e.printStackTrace()\n                    Toast.makeText(this, \"Error $e\", Toast.LENGTH_SHORT).show()\n                }\n            }, Response.ErrorListener { error -&gt; Toast.makeText(this, \"Error $error\", Toast.LENGTH_SHORT).show() }) {\n    }\n    val requestQueue = Volley.newRequestQueue(this)\n    requestQueue.add(stringRequest)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12005344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2JxMchZNHtc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmLDs3CLlU9_IxA2Y_Lrh7_kZrqg/photo.jpg?sz=128", "display_name": "Gyroth Games", "link": "https://stackoverflow.com/users/12005344/gyroth-games"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1572934217, "creation_date": 1572929047, "last_edit_date": 1572934217, "question_id": 58704638, "link": "https://stackoverflow.com/questions/58704638/the-jsonarray-cannot-be-converted-to-jsonobject", "title": "The JSONArray cannot be converted to JSONObject", "body": "<p>Why the <code>JSONArray</code> cannot be converted to <code>JSONObject</code></p>\n\n<p>This my java :</p>\n\n<pre><code>private fun findsend() {\n    val URL_PROFILE = \"https://awalspace.com/app/imbalopunyajangandiganggu/findsend.php\"\n    val stringRequest = object : StringRequest(Request.Method.GET, URL_PROFILE,\n            Response.Listener { response -&gt;\n                try {\n                    val jsonObject = JSONObject(response)\n                    val jsonArray = jsonObject.getJSONArray(\"findsend\")\n\n                        for(i in 0 until jsonArray.length())\n                        {\n                            var `object` = jsonArray.getJSONObject(i)\n                            var name = `object`.getString(\"name\").trim()\n                            var no_hp = `object`.getString(\"no_hp\").trim()\n                            fetchUsers(name,no_hp)\n                        }\n\n\n                } catch (e: JSONException) {\n                    e.printStackTrace()\n                    Toast.makeText(this, \"Error $e\", Toast.LENGTH_SHORT).show()\n                }\n            }, Response.ErrorListener { error -&gt; Toast.makeText(this, \"Error $error\", Toast.LENGTH_SHORT).show() }) {\n    }\n    val requestQueue = Volley.newRequestQueue(this)\n    requestQueue.add(stringRequest)\n\n}\n</code></pre>\n\n<p>and this my JSON data</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y5ijF.png\" rel=\"nofollow noreferrer\">JSON Data</a></p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl", "jitpack", "maven-publish"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1572985317, "post_id": 58704470, "comment_id": 103730717, "body": "Can you post the exact error?"}, {"owner": {"reputation": 31, "user_id": 8738243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316408214b962818646fac95e991b5ec?s=128&d=identicon&r=PG&f=1", "display_name": "Aidan Heller", "link": "https://stackoverflow.com/users/8738243/aidan-heller"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1572989931, "post_id": 58704470, "comment_id": 103732529, "body": "Refreshing on IntelliJ causes no error, but running <code>.&#47;gradlew dependencies</code> has this error: <code>\\--- com.github.SouthEugeneRoboticsTeam:sertain:publishing-f3bdec&zwnj;&#8203;c967-1 FAILED</code>"}, {"owner": {"reputation": 31, "user_id": 8738243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316408214b962818646fac95e991b5ec?s=128&d=identicon&r=PG&f=1", "display_name": "Aidan Heller", "link": "https://stackoverflow.com/users/8738243/aidan-heller"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1579113608, "post_id": 58704470, "comment_id": 105661276, "body": "Somehow this got resolved, but I don&#39;t know what I did."}], "owner": {"reputation": 31, "user_id": 8738243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316408214b962818646fac95e991b5ec?s=128&d=identicon&r=PG&f=1", "display_name": "Aidan Heller", "link": "https://stackoverflow.com/users/8738243/aidan-heller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572977794, "creation_date": 1572927714, "last_edit_date": 1572977794, "question_id": 58704470, "link": "https://stackoverflow.com/questions/58704470/getting-newly-published-package-from-jitpack-fails", "title": "Getting newly published package from JitPack fails", "body": "<p>I'm trying to publish my java library to JitPack using the <code>maven-publish</code> plugin in Gradle. I have done all that the docs have said, and JitPack says publishing was a success, but it seems like I cannot install my library, even if I just copy and paste straight from JitPack's repository.</p>\n\n<p>I tried pushing straight to <code>master</code> on the github repo. I also changed the artifact id to <code>sertain-core</code> and the version to <code>1.0.0</code>, as that is what is specified in the <code>publish</code> block. I even checked the repository url and downloaded the jar manually, and it worked fine. It seems that the only problem is downloading the jar using it's maven coordinates.</p>\n\n<p>Here's my library's build file (the <code>dependencies</code> block is in another file and works fine):</p>\n\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nval ktlint by configurations.creating\n\nplugins {\n    kotlin(\"jvm\") version \"1.3.50\"\n    `maven-publish`\n}\n\ndependencies {\n    implementation(kotlin(\"stdlib-jdk8\"))\n    implementation(kotlin(\"reflect\", \"1.3.50\"))\n    implementation(\"org.jetbrains.kotlinx\", \"kotlinx-coroutines-core\", \"1.3.1\")\n    implementation(\"org.jetbrains.kotlin\", \"kotlin-reflect\", \"1.3.50\")\n    implementation(\"edu.wpi.first.wpilibj\", \"wpilibj-java\", \"2019.4.1\")\n    implementation(\"edu.wpi.first.hal\", \"hal-java\", \"2019.4.1\")\n    implementation(\"edu.wpi.first.ntcore\", \"ntcore-java\", \"2019.4.1\")\n    implementation(\"com.ctre.phoenix\", \"api-java\", \"5.14.1\")\n\n    ktlint(\"com.pinterest:ktlint:0.34.2\")\n}\n\ntasks {\n    val ktlint by creating(JavaExec::class) {\n        group = \"verification\"\n        description = \"Check Kotlin code style.\"\n        classpath = configurations[\"ktlint\"]\n        main = \"com.pinterest.ktlint.Main\"\n        args = listOf(\"src/**/*.kt\")\n    }\n\n    \"check\" {\n        dependsOn(ktlint)\n    }\n\n    create(\"ktlintFormat\", JavaExec::class) {\n        group = \"formatting\"\n        description = \"Fix Kotlin code style deviations.\"\n        classpath = configurations[\"ktlint\"]\n        main = \"com.pinterest.ktlint.Main\"\n        args = listOf(\"-F\", \"src/**/*.kt\")\n    }\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions.jvmTarget = \"1.8\"\n    kotlinOptions.freeCompilerArgs += setOf(\"-Xuse-experimental=kotlin.Experimental\")\n}\n\npublishing {\n    publications {\n        create&lt;MavenPublication&gt;(\"maven\") {\n            groupId = \"org.sert2521.sertain\"\n            artifactId = \"sertain-core\"\n            version = \"1.0.0\"\n\n            from(components[\"java\"])\n\n            artifact(\"$buildDir/libs/${project.name}.jar\")\n        }\n    }\n}\n\n</code></pre>\n\n<p>And here's the build file of the project that should install the library</p>\n\n<pre><code>plugins {\n    id \"org.jetbrains.kotlin.jvm\" version \"1.3.50\"\n    id \"edu.wpi.first.GradleRIO\" version \"2019.4.1\"\n}\n\next.kotlinVersion = \"1.3.50\"\n\ntasks.whenTaskAdded { task -&gt;\n    if (task.name == \"deploy\" || task.name == \"deployMain\" || task.name == \"simulateJava\") task.dependsOn \"assemble\"\n}\n    repositories {\n        google()\n        jcenter()\n        mavenCentral()\n        maven { url \"https://jitpack.io\" }\n        maven { url \"http://first.wpi.edu/FRC/roborio/maven/release\" }\n        maven { url \"http://devsite.ctr-electronics.com/maven/release\" }\n        maven { url \"https://www.kauailabs.com/maven2\" }\n        maven { url \"http://www.revrobotics.com/content/sw/max/sdk/maven/\" }\n        maven { url 'https://jitpack.io' }\n    }\n\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion\"\n\n    compile \"org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.1\"\n    compile \"com.kauailabs.navx.frc:navx-java:3.1.344\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:1.3.50\"\n\n    compile wpi.deps.wpilib()\n    compile wpi.deps.vendor.java()\n    nativeZip wpi.deps.vendor.jni(wpi.platforms.roborio)\n    nativeDesktopZip wpi.deps.vendor.jni(wpi.platforms.desktop)\n\n    implementation 'com.github.SouthEugeneRoboticsTeam:sertain:publishing-f3bdecc967-1'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n\ndeploy {\n    targets {\n        roboRIO(\"roborio\") {\n            team = frc.getTeamOrDefault(2521)\n        }\n    }\n    artifacts {\n        frcJavaArtifact(\"frcJava\") {\n            targets &lt;&lt; \"roborio\"\n            debug = frc.getDebugOrDefault(false)\n        }\n        fileTreeArtifact(\"frcStaticFileDeploy\") {\n            files = fileTree(dir: \"src/main/deploy\")\n            targets &lt;&lt; \"roborio\"\n            directory = \"/home/lvuser/deploy\"\n        }\n    }\n}\n\njar {\n    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }\n    manifest {\n        attributes(\n                \"Main-Class\": \"org.sert2521.example.MainKt\"\n        )\n    }\n}\n\nwrapper {\n    gradleVersion = \"5.0\"\n}\n</code></pre>\n\n<p>There are no error messages when publishing the library. When installing the library, there is only the usual error from gradle not being able to find a dependency.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1572921245, "post_id": 58703658, "comment_id": 103702861, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44595529/smart-cast-to-type-is-impossible-because-variable-is-a-mutable-property-tha\">Smart cast to &#39;Type&#39; is impossible, because &#39;variable&#39; is a mutable property that could have been changed by this time</a>"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1572924942, "post_id": 58703658, "comment_id": 103703505, "body": "Thanks\uff01but Code A has used  safe call <code>let</code>"}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1572928613, "post_id": 58703658, "comment_id": 103704153, "body": "But you are using the property again instead of \u201cit\u201d."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1572931577, "post_id": 58703658, "comment_id": 103704811, "body": "Thanks! But you can&#39;t use <code>it</code> because it&#39;s nest lamabad expression"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1572940238, "post_id": 58703658, "comment_id": 103707725, "body": "Simply name the parameter instead of using <code>it</code> then."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1572961185, "post_id": 58703658, "comment_id": 103718416, "body": "Use <code>filenameofVideo?.let {filenameofVideo -&gt; &#47;&#47;...</code> and it will shadow its own property so you can use <code>filenameofVideo</code> within the <code>let</code> block after all."}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1572963914, "post_id": 58703658, "comment_id": 103720017, "body": "Thanks! your code <code>filenameofVideo?.let {filenameofVideo -&gt; &#47;&#47;... </code> works well, but why doesn&#39;t the Code A work?"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1572963976, "post_id": 58703658, "comment_id": 103720061, "body": "I think <code>filenameofVideo?.let {filenameofVideo -&gt; &#47;&#47;... </code> is the same as Code A."}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1573434589, "post_id": 58785701, "comment_id": 103870312, "body": "Thanks! Would you please to see my added content in the question?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1573484717, "post_id": 58785701, "comment_id": 103887608, "body": "I&#39;ve edited the answer to address this additional question."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1573484669, "last_edit_date": 1573484669, "creation_date": 1573359677, "answer_id": 58785701, "question_id": 58703658, "link": "https://stackoverflow.com/questions/58703658/why-does-the-system-display-smart-cast-to-file-is-impossible-in-kotlin/58785701#58785701", "title": "Why does the system display &#39;Smart cast to &#39;File&#39; is impossible&#39; in Kotlin?", "body": "<p>The code like</p>\n\n<pre><code>private var aa: String? = null\naa?.let {\n    print(aa.length)\n}\n</code></pre>\n\n<p>does not compile because, while the safe call <code>?.let { }</code> block is executed only if <code>aa</code>  property is not null, by the time the execution reaches <code>aa.length</code>, the value of <code>aa</code> property might have been already changed to null in another thread.</p>\n\n<p>On the other hand, in this example</p>\n\n<pre><code>private var aa: String? = null    \naa?.let { aa -&gt;\n    print(aa.length)\n}\n</code></pre>\n\n<p>the non-null value of <code>aa</code> property is captured after the safe call in the read-only <code>aa</code> parameter of the lambda passed to <code>let</code>.</p>\n\n<p>Note that making <code>aa</code> property <code>val</code> instead of <code>var</code> as in your example B1 also helps to eliminate the error, but that causes the <code>let</code> block be never executed since a private val initialized to null can never become non-null.</p>\n\n<p>As for the additional question about what is a difference between the examples C and D: </p>\n\n<ul>\n<li>there's no difference in how the <code>let { }</code> function is executed. In both cases the lambda function is launched only when the receiver expression <code>aa</code> is not null, because you use <code>?.</code> safe call operator.</li>\n<li>the example D isn't accepted by the compiler because it can't ensure the value of <code>aa</code> property referenced inside lambda hasn't been changed by the time execution reaches that line.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1573434582, "post_id": 58785720, "comment_id": 103870308, "body": "Thanks! Would you please to see my added content in the question?"}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1573359930, "creation_date": 1573359930, "answer_id": 58785720, "question_id": 58703658, "link": "https://stackoverflow.com/questions/58703658/why-does-the-system-display-smart-cast-to-file-is-impossible-in-kotlin/58785720#58785720", "title": "Why does the system display &#39;Smart cast to &#39;File&#39; is impossible&#39; in Kotlin?", "body": "<p>Let's trim your code down a bit so that it's a little easier to discuss:</p>\n\n<blockquote>\n<pre><code>private var filename :File?=null\n\nfilename?.let {\n    action(filename.path)\n}\n</code></pre>\n</blockquote>\n\n<p>The problem here is that, even though you've called <code>?.let</code>, the compiler cannot guarantee that <code>filename</code> is not null inside the <code>let</code> block. This is because <code>filename</code> is a <code>var</code>, and the value of the <code>var</code> might have been changed (perhaps by another thread) between the moment it is accessed in the <code>?.let</code> call and the moment it is accessed within the <code>let</code> block.</p>\n\n<p>Therefore, you must handle the possibility of null yourself. The easiest way to do this will be to use the <code>it</code> value inside the <code>let</code> block, or to name that value yourself:</p>\n\n<pre><code>filename?.let { safe -&gt;\n    action(safe.path)\n}\n</code></pre>\n\n<p>The reason that this code <strong>does</strong> work:</p>\n\n<blockquote>\n<pre><code>private val aa:String?=null\naa?.let {\n    print(aa)\n}\n</code></pre>\n</blockquote>\n\n<p>is that here the variable is a <code>val</code>. This means that it will either be <code>null</code> or non-null, but either way <em>it can't change</em>. So you and I can read the code and see that the <code>.let</code> block will never be executed... but if somehow it <em>were</em>, that would mean that <code>aa</code> is guaranteed to not be null, and so the compiler can smart-cast it to a non-nullable type.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573484669, "creation_date": 1572921089, "last_edit_date": 1573434536, "question_id": 58703658, "link": "https://stackoverflow.com/questions/58703658/why-does-the-system-display-smart-cast-to-file-is-impossible-in-kotlin", "title": "Why does the system display &#39;Smart cast to &#39;File&#39; is impossible&#39; in Kotlin?", "body": "<p>In Code A1 I have used the <code>let</code> statement, so I think it will not be null with <code>filenameofVideo.path</code> </p>\n\n<p>But I get the following error, why?</p>\n\n<p><em>Smart cast to 'File' is impossible, because 'filenameofVideo' is a mutable property that could have been changed by this time</em> </p>\n\n<p>At this moment, I have to use Code A2.</p>\n\n<p><strong>Code A1</strong></p>\n\n<pre><code>private var filenameofVideo :File?=null\n\nfilenameofVideo?.let {\n          Navigation.findNavController(requireActivity(), R.id.fragment_container)\n               .navigate(UIFragmentCameraDirections.actionCameraToVideo(filenameofVideo.path))\n}\n</code></pre>\n\n<p><strong>Code A2</strong></p>\n\n<pre><code>private var filenameofVideo :File?=null\n\nfilenameofVideo?.let {filenameofVideo -&gt;\n        Navigation.findNavController(requireActivity(), R.id.fragment_container)\n            .navigate(UIFragmentCameraDirections.actionCameraToVideo(filenameofVideo.path))\n}\n</code></pre>\n\n<p>And more, I find both Code B1 and Code B2 are correct. Why is Code B1 correct and Code A1 wrong?</p>\n\n<p><strong>Code B1</strong></p>\n\n<pre><code>   private val aa:String?=null\n   aa?.let {\n            print(aa)\n        }\n</code></pre>\n\n<p><strong>Code B2</strong> </p>\n\n<pre><code>private val aa:String?=null    \n   aa?.let{aa-&gt;\n           print(aa)\n      }\n</code></pre>\n\n<p><strong>Added Content:</strong></p>\n\n<p>1:  In Code C, the var aa  might have been changed (perhaps by another thread) between the moment it is accessed in the ?.let call and the moment it is accessed within the let block.</p>\n\n<p>Code C will be launched when aa is not null, and Code C will not launched when aa is null, right?</p>\n\n<p>2:  In Code D (I assume the compiler accept it ), the function always be launched no matter aa is null or not, it can not be accepted, so the system will interrupt, right?</p>\n\n<p><strong>Code C</strong></p>\n\n<pre><code>private var aa: String? = null    \naa?.let { kk -&gt;\n    print(kk.length)\n}\n</code></pre>\n\n<p><strong>Code D</strong></p>\n\n<pre><code>private var aa: String? = null    \naa?.let {\n    print(aa.length)\n}\n</code></pre>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 3, "creation_date": 1572920629, "post_id": 58703577, "comment_id": 103702758, "body": "<code>val data = ArrayList&lt;ValueDataEntry&gt;()</code> should be <code>val data = ArrayList&lt;DataEntry&gt;()</code>. Same generic type as in the Java example."}], "owner": {"reputation": 293, "user_id": 7789984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c2b503d5090fd4a4e10b5d588898981?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Lee", "link": "https://stackoverflow.com/users/7789984/adam-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572920447, "creation_date": 1572920447, "question_id": 58703577, "link": "https://stackoverflow.com/questions/58703577/kotlin-java-type-mismatch-use-explicit-cast", "title": "Kotlin: Java type mismatch, use explicit cast", "body": "<p>I am trying to create a basic pie chart in Android through the AnyChart library following this link's tutorial: <a href=\"https://github.com/AnyChart/AnyChart-Android/wiki/Getting-started\" rel=\"nofollow noreferrer\">https://github.com/AnyChart/AnyChart-Android/wiki/Getting-started</a></p>\n\n<p>However, I am using Kotlin whereas the example uses Java. </p>\n\n<p>I receive the following error in my Android program:</p>\n\n<pre><code>Java type mismatch expected (Mutable)List&lt;DataEntry!&gt;! but found kotlin.collections.ArrayList&lt;ValueDataEntry /* = java.util.ArrayList&lt;ValueDataEntry&gt; */. Use explicit cast!\n</code></pre>\n\n<p>Below is my code (the error happens on the <strong>last line</strong>):</p>\n\n<pre><code>val pie = AnyChart.pie()\nval data = ArrayList&lt;ValueDataEntry&gt;()\ndata.add(ValueDataEntry(\"John\", 10000))\ndata.add(ValueDataEntry(\"Jake\", 12000))\ndata.add(ValueDataEntry(\"Peter\", 18000))\npie.data(data);\n</code></pre>\n\n<p>How would i go about casting the variable <code>data</code> to <code>(Mutable)List&lt;DataEntry!&gt;!</code>?</p>\n"}, {"tags": ["android", "kotlin", "realm"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 7919907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ddwq3.jpg?s=128&g=1", "display_name": "Apolo", "link": "https://stackoverflow.com/users/7919907/apolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572930465, "creation_date": 1572930465, "answer_id": 58704826, "question_id": 58703129, "link": "https://stackoverflow.com/questions/58703129/how-can-i-use-realmresult-loaded-from-background-thread-and-use-it-in-android-ma/58704826#58704826", "title": "How can I use RealmResult loaded from background thread and use it in Android Main thread", "body": "<p>Well, both of theses solutions that you gave are not suitable for android framework.</p>\n\n<p><strong>The first solution</strong>: Is bad because MainThread should not know and deal with Realm stuffs the MainThread is made for layout changes and android framework stuff's</p>\n\n<p><strong>The second solutions</strong>: Is bad because you are passing a data base model to your View ( that should not know anything about database ou remote database ). </p>\n\n<p><strong>The Solution would be:</strong>\nCreate an Object called UserModel, then in your ViewModel when you receive your users from DataBase read all these users and extract the values and create a list for UserModel an return these objects to View.</p>\n\n<p>This is a good practice to separate the concepts because it's bad you have an database object full of Realm annotations and fields in your View, then separate the object that will only have the important values for View and will not have any database annotation. This way you have a clear responsability separations and will solve theses problem you are having.</p>\n\n<p>It's importante to follow some DesignPatterns and the RepositoryPattern is a very nice one to solve some architectural problems, you can read mote about it here: <a href=\"https://proandroiddev.com/clean-architecture-data-flow-dependency-rule-615ffdd79e29\" rel=\"nofollow noreferrer\">https://proandroiddev.com/clean-architecture-data-flow-dependency-rule-615ffdd79e29</a></p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 2384, "user_id": 452486, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/a8k4V.jpg?s=128&g=1", "display_name": "Arst", "link": "https://stackoverflow.com/users/452486/arst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572935324, "creation_date": 1572916354, "last_edit_date": 1572935324, "question_id": 58703129, "link": "https://stackoverflow.com/questions/58703129/how-can-i-use-realmresult-loaded-from-background-thread-and-use-it-in-android-ma", "title": "How can I use RealmResult loaded from background thread and use it in Android Main thread", "body": "<p>In my app I am using <code>ViewModel</code>, and I want to keep Realm instance and all the CRUD operations in background thread. The <code>ViewModel</code> has a <code>MutableLiveData</code>:</p>\n\n<pre><code>data class User(val userId: Long, val name: String) : RealmModel\n\nclass UserViewModel : ViewModel() {\n\n    private val realmThreadContext = Executors.newSingleThreadExecutor().asCoroutineDispatcher()\n\n    lateinit var realm: Realm\n\n    init {\n        viewModelScope.launch(realmThreadContext) {\n            realm = Realm.getDefaultInstance()\n        }\n    }\n\n    val users: MutableLiveData&lt;RealmResults&lt;User&gt;&gt; = MutableLiveData()\n\n    suspend fun loadData() {\n        withContext(realmThreadContext) {\n            users.postValue(realm.where(User::class.java).findAll())\n        }\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        realm.close()\n    }\n}\n</code></pre>\n\n<pre><code>class UserActivity : AppCompatActivity() {\n\n    lateinit var viewModel: UserViewModel\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_user)\n\n        viewModel = ViewModelProvider(this).get(UserViewModel::class.java)\n\n        viewModel.users.observe(this, Observer { users -&gt;\n            tv_user_names.text = users.joinToString(\", \") { it.name }\n        })\n\n        lifecycleScope.launch {\n            viewModel.loadData()\n        }\n\n    }\n}\n</code></pre>\n\n<p>In the <code>Activity</code> I observe the <code>MutableLiveData</code> and react the changes to views, but it will throw an exception, because in Realm you cannot pass RealmObject between threads. I am wondering how do you manage that?  </p>\n\n<p>I know there are some workarounds. </p>\n\n<p>One is to call <code>Realm.getDefaultInstance</code> in main thread, call <code>findAllAsync</code> to get <code>RealmResults</code>, and then register an listener to it to observe any changes and update the <code>MutableLiveData</code>.</p>\n\n<p>Another solution is to to call <code>Realm.getDefaultInstance</code> in background thread, call <code>findAll</code> to get <code>RealmResults</code> and call <code>copyFromRealm</code>, passing it to <code>MutableLiveData</code>. </p>\n\n<p>First solution might be better because second one will load data into memory?</p>\n\n<p>However, my goal is to keep any Realm stuff in background if that is possible, please help!!</p>\n"}, {"tags": ["kotlin", "multiple-inheritance"], "comments": [{"owner": {"reputation": 13937, "user_id": 3824919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HpYR.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3824919/tom"}, "edited": false, "score": 0, "creation_date": 1572910270, "post_id": 58702262, "comment_id": 103700802, "body": "How should the compiler know that <code>human.appendages[&quot;Head&quot;]?.get(0)</code> contains an Object of type <code>Head</code>? All it knows is that it is <code>Appendage</code> and nothing else. You would need to cast here (e.g. <code>(human.appendages[&quot;Head&quot;]?.get(0) as Head).think()</code>. You should also look into data classes and primary constructors, those Kotlin features would help you to reduce boilerplate code."}, {"owner": {"reputation": 13937, "user_id": 3824919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HpYR.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3824919/tom"}, "edited": false, "score": 0, "creation_date": 1572910414, "post_id": 58702262, "comment_id": 103700835, "body": "The rules to Java are very similar in this subject, so this could be a duplicate and useful for you: <a href=\"https://stackoverflow.com/questions/20295671/does-a-subclass-object-in-an-arraylistsuperclass-keep-methods-unique-to-subcla\" title=\"does a subclass object in an arraylistsuperclass keep methods unique to subcla\">stackoverflow.com/questions/20295671/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9392134, "user_type": "registered", "profile_image": "https://graph.facebook.com/1385777181446478/picture?type=large", "display_name": "Matheus Lima", "link": "https://stackoverflow.com/users/9392134/matheus-lima"}, "is_accepted": false, "score": 0, "last_activity_date": 1572916241, "creation_date": 1572916241, "answer_id": 58703117, "question_id": 58702262, "link": "https://stackoverflow.com/questions/58702262/access-method-within-sub-class/58703117#58703117", "title": "Access method within sub-class", "body": "<p>as Tom said, your compiler dont know anything about the type. you need make a simple cast like this:</p>\n\n<pre><code>(human.appendages[\"Head\"]?.get(0) as Head).think()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10548766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8feAoBhauS0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCSyjhnJjTcxsU9OrzUF4SnDi5-pw/mo/photo.jpg?sz=128", "display_name": "Jeremy Heminger", "link": "https://stackoverflow.com/users/10548766/jeremy-heminger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572916241, "creation_date": 1572908439, "last_edit_date": 1572909963, "question_id": 58702262, "link": "https://stackoverflow.com/questions/58702262/access-method-within-sub-class", "title": "Access method within sub-class", "body": "<p>I am fiddling with Kotlin and attempting to create a simple creature hierarchy. I appear to have been able to do this successfully however, I am unable to access the \"think\" method in my \"Head : Appendage\" class that is a child of the Human : Creature class</p>\n\n<p>I can see the subclass printed out all the way to the head class but I am unable to run the think() method  </p>\n\n<pre><code>val human = Human()\nprintln(human.appendages[\"Head\"])           // [Head@3803641]\nprintln(human.appendages[\"Head\"]?.get(0))   // Head@3803641\nhuman.appendages[\"Head\"]?.get(0).think()    // uncaught reference\n</code></pre>\n\n<pre><code>import org.omg.CORBA.Object\nimport java.util.*\n\nopen class Creature {\n    var appendages = HashMap&lt;String,ArrayList&lt;Appendage&gt;&gt;()\n}\nopen class Appendage {\n    constructor() {}\n}\nopen class Human : Creature {\n    constructor()\n    {\n        appendages[\"Arm\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Arm\"]?.add(Arm())\n        appendages[\"Arm\"]?.add(Arm())\n        appendages[\"Leg\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Leg\"]?.add(Leg())\n        appendages[\"Leg\"]?.add(Leg())\n        appendages[\"Head\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Head\"]?.add(Head(\"Human\"))\n    }\n}\nclass Alien : Creature\n{\n    constructor()\n    {\n        appendages[\"Tentacle\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Tentacle\"]?.add(Tentacle())\n        appendages[\"Tentacle\"]?.add(Tentacle())\n        appendages[\"Tentacle\"]?.add(Tentacle())\n        appendages[\"Tentacle\"]?.add(Tentacle())\n        appendages[\"Arm\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Arm\"]?.add(Arm())\n        appendages[\"Arm\"]?.add(Arm())\n        appendages[\"Leg\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Leg\"]?.add(Leg())\n        appendages[\"Leg\"]?.add(Leg())\n        appendages[\"Head\"] = ArrayList&lt;Appendage&gt;()\n        appendages[\"Head\"]?.add(Head(\"Alien\"))\n        appendages[\"Head\"]?.add(Head(\"Alien\"))\n    }\n}\n\nclass Head : Appendage {\n    private var whatami : String = \"\"\n    constructor(whatami : String)\n    {\n        this.whatami = whatami\n    }\n    public fun think()\n    {\n        println(\"$whatami Thinking\")\n    }\n}\nopen class Arm : Appendage {\n    private var rotation = mutableListOf&lt;Int&gt;(0,0,0)\n    constructor() {}\n    fun rotateX(degrees: Int)\n    {\n        rotation[0] = degrees\n    }\n    fun rotateY(degrees: Int)\n    {\n        rotation[1] = degrees\n    }\n    fun rotateZ(degrees: Int)\n    {\n        rotation[2] = degrees\n    }\n}\nopen class Leg : Appendage {\n    private var rotation = mutableListOf&lt;Int&gt;(0,0,0)\n    constructor() {}\n    fun rotateX(degrees: Int)\n    {\n        rotation[0] = degrees\n    }\n    fun rotateY(degrees: Int)\n    {\n        rotation[1] = degrees\n    }\n    fun rotateZ(degrees: Int)\n    {\n        rotation[2] = degrees\n    }\n}\nopen class Tentacle : Appendage {\n    private var rotation = mutableListOf&lt;Int&gt;(0,0,0)\n    constructor() {}\n    fun rotateX(degrees: Int)\n    {\n        rotation[0] = degrees\n    }\n    fun rotateY(degrees: Int)\n    {\n        rotation[1] = degrees\n    }\n    fun rotateZ(degrees: Int)\n    {\n        rotation[2] = degrees\n    }\n}\n</code></pre>\n\n<p>I expect the program to print \"Human Thinking\" but I am getting an \"uncaught reference\" error</p>\n"}]