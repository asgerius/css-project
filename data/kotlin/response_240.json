[{"tags": ["android", "kotlin", "android-espresso", "ui-testing"], "answers": [{"tags": [], "owner": {"reputation": 739, "user_id": 4500099, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/059efc37d8a94dd09a991d6d25f74dc5?s=128&d=identicon&r=PG&f=1", "display_name": "veena", "link": "https://stackoverflow.com/users/4500099/veena"}, "is_accepted": false, "score": 0, "last_activity_date": 1576492358, "creation_date": 1576492358, "answer_id": 59354798, "question_id": 57503342, "link": "https://stackoverflow.com/questions/57503342/how-to-ui-test-preference-fragment/59354798#59354798", "title": "How to UI test Preference Fragment", "body": "<p>Preference Matcher uses Recyclerview internally.Referenced from <a href=\"https://stackoverflow.com/a/52144554/4500099\">here</a> </p>\n\n<pre><code>onView(withId(androidx.preference.R.id.recycler_view))\n    .perform(\n      RecyclerViewActions.actionOnItemAtPosition&lt;RecyclerView.ViewHolder&gt;(\n        1,\n        click()\n      ))\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11308096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2040839f1fb2d275e1f61c2a99003448?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidLearner", "link": "https://stackoverflow.com/users/11308096/androidlearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576492358, "creation_date": 1565826560, "question_id": 57503342, "link": "https://stackoverflow.com/questions/57503342/how-to-ui-test-preference-fragment", "title": "How to UI test Preference Fragment", "body": "<p>I am setting up UI Tests and keep getting an <code>androidx.test.espresso.NoMatchingViewException: No views in hierarchy found matching:</code>error message</p>\n\n<p>My xml file looks like this with multiple categories </p>\n\n<pre><code>&lt;PreferenceScreen xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                  android:key=\"@string/key_preference_screen\"\n                  android:title=\"@string/sometitlename\"&gt;\n    &lt;PreferenceCategory\n        android:layout=\"@layout/category_layout\"\n        android:key=\"@string/key_pref_\"&gt;\n        &lt;Preference\n            android:key=\"@string/key\"\n            android:title=\"@string/pref_title\"/&gt;\n    &lt;/PreferenceCategory&gt;\n&lt;/PreferenceScreen&gt;\n</code></pre>\n\n<p>I've tried variations of        </p>\n\n<pre><code>onData(allOf(`is`(instanceOf(Preference::class.java)),\n                 withKey(R.string.key),             \n                 withTitle(R.string.pref_title)))\n                .onChildView(withText(pref_title))\n                .check(matches(isCompletelyDisplayed()))```\n</code></pre>\n"}, {"tags": ["kotlin", "tornadofx", "kotlin-exposed"], "comments": [{"owner": {"reputation": 863, "user_id": 5363011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qqqla.jpg?s=128&g=1", "display_name": "George Leung", "link": "https://stackoverflow.com/users/5363011/george-leung"}, "edited": false, "score": 0, "creation_date": 1565844812, "post_id": 57503277, "comment_id": 101478264, "body": "By doing &quot;all the necessary transactions up front&quot;, I think you mean calling a function that returns a list. Have you considered streaming the data returned from the DB, possibly with coroutine channels?"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 2, "creation_date": 1565857385, "post_id": 57503277, "comment_id": 101481576, "body": "You should absolutely fetch your data up front. Even if you made sure to start a transaction when the data is retrieved after the fact, this would happen on the ui thread, which would be a violation of contract - you should not do any heavy work on the ui thread. Instead of chasing a solution here, just load the data you want up front."}], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "is_accepted": true, "score": 0, "last_activity_date": 1565879538, "creation_date": 1565879538, "answer_id": 57511249, "question_id": 57503277, "link": "https://stackoverflow.com/questions/57503277/can-i-get-a-tableview-column-to-use-a-kotlin-exposed-transaction-when-referencin/57511249#57511249", "title": "Can I get a TableView column to use a Kotlin Exposed transaction when referencing a property?", "body": "<p>Thanks, Edvin, for reminding me that columns work on the UI thread and that it shouldn't be doing the heavy lifting! I tried a few other things with mapping, hoping that the choke point was the amount of transactions I was doing, but it didn't help with speed. So I think having my View retrieve a list of all companies up front, then having my columns find the companies in that list is the way to go. Not as pretty, but no slow down! </p>\n\n<p>But to officially answer my own question: It doesn't matter, don't try it in the UI thread. It's bad practice and will kill performance.</p>\n"}], "owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 57511249, "answer_count": 1, "score": 0, "last_activity_date": 1565879538, "creation_date": 1565825915, "question_id": 57503277, "link": "https://stackoverflow.com/questions/57503277/can-i-get-a-tableview-column-to-use-a-kotlin-exposed-transaction-when-referencin", "title": "Can I get a TableView column to use a Kotlin Exposed transaction when referencing a property?", "body": "<p>When using TornadoFX, TableView columns are established like this:</p>\n\n<pre><code>tableview(list&lt;ObjectType&gt;) {\n   column(\"ColumnName\", ObjectType::property)\n   ...\n}\n</code></pre>\n\n<p>This is normally fine, but in my case I'm using a Kotlin Exposed entity that's using a reference to another entity. When that happens, if you want to use that reference, you have to surround it in a transaction. </p>\n\n<p>Example:</p>\n\n<pre><code>val company = transaction { employeeObject.companyObject }\n</code></pre>\n\n<p>If you don't wrap a call like that in a transaction, an error gets thrown. There doesn't seem to be an obvious way to override how a column accesses a property, so I'd like to know if it exists.</p>\n\n<p>Now, I've already tried to wrap my entity in another class that would do all the necessary transactions up front but when the amount of entities that need to be mapped gets in the thousands, it causes my program to basically go into a stand still. If need be, I can go back to how it used to be, which was to not have a reference, but just the plain old ID number to the other entity. Then the cellformat of the column would try to match the company to all companies in a list that was grabbed earlier. I don't really like that solution though, it seems uglier and less elegant, but it's a lot faster than mapping entities. There's also the chance that what I'm trying to achieve might also cause its own slow-down. I'd just like to know if this is possible so I could at least see how fast it is.</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 7061703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0c5bf45cdd05865a0f0111981adfdc?s=128&d=identicon&r=PG&f=1", "display_name": "ryn1x", "link": "https://stackoverflow.com/users/7061703/ryn1x"}, "edited": false, "score": 0, "creation_date": 1565874541, "post_id": 57506845, "comment_id": 101488100, "body": "Just tried this and it also did not work. See original question for code."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": false, "score": 0, "last_activity_date": 1565857512, "creation_date": 1565857512, "answer_id": 57506845, "question_id": 57503184, "link": "https://stackoverflow.com/questions/57503184/how-can-i-perform-clean-up-actions-upon-closing-a-view-in-kotlin-tornadofx/57506845#57506845", "title": "How can I perform clean up actions upon closing a view in Kotlin/TornadoFX?", "body": "<p><code>onDelete</code> is a callback for the <code>Workspace</code> in TornadoFX, and will be called if you click the <code>Delete</code> button in the Workspace when that View is active. What you can do is override <code>onDock</code> and add a once change listener to the hiding property:</p>\n\n<pre><code>override fun onDock() {\n    currentWindow?.onHidingProperty()?.onChangeOnce {\n        println(\"Closing\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "is_accepted": true, "score": 2, "last_activity_date": 1565970673, "creation_date": 1565970673, "answer_id": 57527631, "question_id": 57503184, "link": "https://stackoverflow.com/questions/57503184/how-can-i-perform-clean-up-actions-upon-closing-a-view-in-kotlin-tornadofx/57527631#57527631", "title": "How can I perform clean up actions upon closing a view in Kotlin/TornadoFX?", "body": "<p>I'm using this in my project right now. <code>setOnCloseRequest</code> is my go to!</p>\n\n<pre><code>override fun onDock() {\n    currentWindow?.setOnCloseRequest {\n        println(\"Closing\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 785, "user_id": 1562007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3c45af42b6b0490384fa780aaaf7ef?s=128&d=identicon&r=PG", "display_name": "Josh Larson", "link": "https://stackoverflow.com/users/1562007/josh-larson"}, "is_accepted": false, "score": 0, "last_activity_date": 1618770967, "creation_date": 1618770967, "answer_id": 67152127, "question_id": 57503184, "link": "https://stackoverflow.com/questions/57503184/how-can-i-perform-clean-up-actions-upon-closing-a-view-in-kotlin-tornadofx/67152127#67152127", "title": "How can I perform clean up actions upon closing a view in Kotlin/TornadoFX?", "body": "<p>If you're looking for cleanup code when closing the application, another option that works for child views/fragments/controllers is an FXEvent that's fired on close.  The event is defined like this:</p>\n<pre><code>object ApplicationClosingEvent : FXEvent()\n</code></pre>\n<p>In the main <code>App</code>, I override <code>stop()</code> so that the event is fired:</p>\n<pre><code>override fun stop() {\n    fire(ApplicationClosingEvent)\n}\n</code></pre>\n<p>Since <code>stop()</code> is running on the application thread, the event is fired and handled synchronously.  Finally, in each view/fragment/controller you can subscribe like so:</p>\n<pre><code>subscribe&lt;ApplicationClosingEvent&gt; {\n    // Clean-up code goes here\n}\n</code></pre>\n<p>The primary benefit of using an event instead of a window callback is that you can have many different views subscribing to it, rather than a single window callback.</p>\n"}], "owner": {"reputation": 733, "user_id": 7061703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0c5bf45cdd05865a0f0111981adfdc?s=128&d=identicon&r=PG&f=1", "display_name": "ryn1x", "link": "https://stackoverflow.com/users/7061703/ryn1x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 57527631, "answer_count": 3, "score": 1, "last_activity_date": 1618770967, "creation_date": 1565825000, "last_edit_date": 1565874488, "question_id": 57503184, "link": "https://stackoverflow.com/questions/57503184/how-can-i-perform-clean-up-actions-upon-closing-a-view-in-kotlin-tornadofx", "title": "How can I perform clean up actions upon closing a view in Kotlin/TornadoFX?", "body": "<p>I have been searching the docs and IDE autocomplete suggestions and cannot figure this out. The closest I have found is onDelete(), and it is not working the way I envision.</p>\n\n<p>I just need a way to run some clean up code when a view is closed.</p>\n\n<p>Here is a failed attempt using the simple example from the docs.</p>\n\n<pre><code>import tornadofx.*\n\nclass MyApp: App(MyView::class)\n\nclass MyView: View() {\n    // this does not print when the window is closed\n    override fun onDelete() {\n        super.onDelete()\n        println(\"Print on close!\")\n    }\n    override val root = vbox {\n        button(\"Press me\")\n        label(\"Waiting\")\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    launch&lt;MyApp&gt;(args)\n}\n</code></pre>\n\n<p>Another failed attempt per a suggestion below:</p>\n\n<pre><code>import tornadofx.*\n\nclass MyApp: App(MyView::class)\n\nclass MyView: View() {\n    // \"Closing\" is never printed when closing this view\"\n    override fun onDock() {\n        currentWindow?.onHidingProperty()?.onChangeOnce {\n            println(\"Closing\")\n        }\n    }\n    override val root = vbox {\n        button(\"Press me\")\n        label(\"Waiting\")\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    launch&lt;MyApp&gt;(args)\n}\n</code></pre>\n"}, {"tags": ["kotlin", "nullable", "non-nullable"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1565823128, "post_id": 57502902, "comment_id": 101474812, "body": "not really, your options are assigning it to a <code>val</code> within function scope, or use one of scoping functions (<code>let</code>, <code>run</code>, <code>apply</code>, <code>also</code>)"}, {"owner": {"reputation": 2296, "user_id": 1785730, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/130fbc040e6e248bd4e7659bc9bf78ee?s=128&d=identicon&r=PG", "display_name": "user1785730", "link": "https://stackoverflow.com/users/1785730/user1785730"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1565827785, "post_id": 57502902, "comment_id": 101475602, "body": "How would I assign it to a val within function scope, so that the val would be of type Foo (not Foo?)?"}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 3, "creation_date": 1565833385, "post_id": 57502902, "comment_id": 101476506, "body": "&quot;<i>This is about concurrency, right? Well, there is no concurrent code that might change the value of <code>foo</code></i>&quot;. <b>You</b> may know that there&#39;s no concurrency, but the <b>compiler</b> cannot guarantee that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 2, "creation_date": 1565839210, "post_id": 57502902, "comment_id": 101477424, "body": "@user1785730, the <code>val</code> will be of type <code>Foo?</code>. However, now smart cast will work and you won&#39;t need <code>!!</code> in the code."}], "answers": [{"tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": true, "score": 3, "last_activity_date": 1565858797, "last_edit_date": 1565858797, "creation_date": 1565824965, "answer_id": 57503180, "question_id": 57502902, "link": "https://stackoverflow.com/questions/57502902/how-to-deal-with-nullable-variables-that-are-not-null/57503180#57503180", "title": "How to deal with nullable variables that are not null?", "body": "<p>Well, this piece of code works if <code>foo</code> is a local variable. I guess, your code looks a little bit different and <code>foo</code> is a field of a class. The solution is simple: use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"nofollow noreferrer\"><code>let</code></a>:</p>\n\n<pre><code>foo?.let {\n    it.bar()\n}\n</code></pre>\n\n<p><code>let</code> \"captures\" the values of a variable so that any modifications to the original one have no effect in the passed lambda. And safe call is used here to invoke <code>let</code> only for non-null values.</p>\n"}], "owner": {"reputation": 2296, "user_id": 1785730, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/130fbc040e6e248bd4e7659bc9bf78ee?s=128&d=identicon&r=PG", "display_name": "user1785730", "link": "https://stackoverflow.com/users/1785730/user1785730"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57503180, "answer_count": 1, "score": 1, "last_activity_date": 1565872376, "creation_date": 1565822230, "last_edit_date": 1565872376, "question_id": 57502902, "link": "https://stackoverflow.com/questions/57502902/how-to-deal-with-nullable-variables-that-are-not-null", "title": "How to deal with nullable variables that are not null?", "body": "<p>Consider this piece of code:</p>\n\n<pre><code>var foo: Foo? = null\n\nif (foo != null) {\n    foo!!.bar()\n}\n</code></pre>\n\n<p>If I omit the two !! I get this error:</p>\n\n<blockquote>\n  <p>Smart cast to 'Foo' is impossible, because 'foo' is a mutable property that could have been changed by this time</p>\n</blockquote>\n\n<p>This is about concurrency, right? Well, there is no concurrent code that might change the value of <code>foo</code>.</p>\n\n<p>Of course, it works with the two !!. However, I was wondering if this is the most idiomatice way or if there is a better way, without the two !!.</p>\n\n<p>I know I could just <code>foo?.bar()</code> in this particular case. But the question is about whether I can treat <code>foo</code> as <code>Foo</code> instead of <code>Foo?</code> somehow after I've checked that it's not <code>null</code>.</p>\n"}, {"tags": ["kotlin", "constructor"], "comments": [{"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 4, "creation_date": 1565820943, "post_id": 57502441, "comment_id": 101474362, "body": "In the first snippet, <code>age: Int</code> isn&#39;t a property, it&#39;s a parameter to the constructor. So the definition of the age <i>property</i> (<code>var age: Int = age ....</code>) isn&#39;t redefining anything. It&#39;s defining a property <code>age</code> which is initialized to the value of the parameter <code>age</code>."}], "answers": [{"comments": [{"owner": {"reputation": 175860, "user_id": 2648, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8b2d39a59a961ef26440e9c1453d1939?s=128&d=identicon&r=PG", "display_name": "D&#243;nal", "link": "https://stackoverflow.com/users/2648/d%c3%b3nal"}, "edited": false, "score": 0, "creation_date": 1565828562, "post_id": 57502736, "comment_id": 101475744, "body": "Great explanation, I incorrectly thought that everything in the parentheses following the class name is a property"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1565820955, "creation_date": 1565820955, "answer_id": 57502736, "question_id": 57502441, "link": "https://stackoverflow.com/questions/57502441/defining-a-mutable-property-with-a-custom-setter/57502736#57502736", "title": "Defining a mutable property with a custom setter", "body": "<p>UPD: as <a href=\"https://stackoverflow.com/questions/57502441/defining-a-mutable-property-with-a-custom-setter/57502736#comment101474362_57502441\">@PaulHicks noted</a>, in the first example, <code>age</code> is not a property, it's just a constructor parameter with the same name, and the property <code>age</code> is declared in the body and then just initialized from the constructor parameter. You can tell that by the keyword <code>var</code> or <code>val</code> missing from <code>age: Int</code>.</p>\n\n<p>A property declared in a primary constructor is always a property with a backing field that is initialized from the constructor parameter and can't have custom accessors.</p>\n\n<p>You can, however, make it a private mutable property and provide access to it via a property with a different name with just custom accessors and no backing field as follows:</p>\n\n<pre><code>class Person(val name: String, private var myAge: Int) {\n    var age: Int \n        get() = myAge\n        set(value) {\n            val oldValue = myAge\n            myAge = value\n            println(\"age changed from $oldValue to $value\")\n        } \n}\n</code></pre>\n\n<p>Note that the setter now references <code>myAge</code> and not <code>field</code>. This is called a <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-properties\" rel=\"nofollow noreferrer\">backing property</a> and is useful, for example, when you want a property to have a different public type than its privately stored value.</p>\n"}], "owner": {"reputation": 175860, "user_id": 2648, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8b2d39a59a961ef26440e9c1453d1939?s=128&d=identicon&r=PG", "display_name": "D&#243;nal", "link": "https://stackoverflow.com/users/2648/d%c3%b3nal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57502736, "answer_count": 1, "score": 1, "last_activity_date": 1565820955, "creation_date": 1565818966, "question_id": 57502441, "link": "https://stackoverflow.com/questions/57502441/defining-a-mutable-property-with-a-custom-setter", "title": "Defining a mutable property with a custom setter", "body": "<p>The following class appears in \"Kotlin in Action\"</p>\n\n<pre><code>class Person(val name: String, age: Int) {\n\n  var age: Int = age\n    set(newValue) {\n      val oldValue = field\n      field = newValue\n      println(\"age changed from $oldValue to $newValue\")\n    }\n}\n</code></pre>\n\n<p>My understanding is that two things are happening in the constructor body</p>\n\n<ol>\n<li>The <code>age</code> property is redefined as a mutable property</li>\n<li>A custom setter is declared for <code>age</code></li>\n</ol>\n\n<p>Is there a simpler syntax that can achieve the same thing? Specifically is there a way to define a custom setter for a property that is defined as mutable in the property list? </p>\n\n<pre><code>class Person(val name: String, var age: Int) {\n  // how do I define a custom setter for age?\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "kotlin", "microservices", "jhipster"], "answers": [{"tags": [], "owner": {"reputation": 952, "user_id": 3241983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eded5efee7e4e95b7d6179ef468da61a?s=128&d=identicon&r=PG", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/3241983/nathaniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1566109238, "creation_date": 1566109238, "answer_id": 57542158, "question_id": 57501598, "link": "https://stackoverflow.com/questions/57501598/no-fallback-instance-of-type-class-kotlin-unit-found-for-feign-client/57542158#57542158", "title": "No fallback instance of type class kotlin.Unit found for feign client", "body": "<p>I managed to solve the problem, I only had to implement a fallback for my feign client. Since Kotlin does not support primitive types, in this case \"void\", which is a type allowed for spring cloud to avoid implement a fallback, I was force to create an implementation to handle this scenario.</p>\n"}], "owner": {"reputation": 952, "user_id": 3241983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eded5efee7e4e95b7d6179ef468da61a?s=128&d=identicon&r=PG", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/3241983/nathaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 678, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566109238, "creation_date": 1565814472, "question_id": 57501598, "link": "https://stackoverflow.com/questions/57501598/no-fallback-instance-of-type-class-kotlin-unit-found-for-feign-client", "title": "No fallback instance of type class kotlin.Unit found for feign client", "body": "<p>I'm trying to consume a microservices as a feign client but I getting this error.</p>\n\n<pre><code>Unsatisfied dependency expressed through constructor parameter 0; \nnested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.claro.mcp.client.McpUaaClient'\n: FactoryBean threw exception on object creation; \nnested exception is java.lang.IllegalStateException: No fallback instance of type class kotlin.Unit found for feign client mcpuaa\n\nError creating bean with name 'com.claro.mcp.client.McpUaaClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: No fallback instance of type class kotlin.Unit found for feign client mcpuaa\n</code></pre>\n\n<p>I'm using Kotlin 1.3.40 and Spring Boot 2.1.6. RELEASE. My project is based on <a href=\"https://github.com/jhipster/jhipster-kotlin\" rel=\"nofollow noreferrer\">Khipster code generator</a></p>\n\n<p>This is my feign client</p>\n\n<pre><code>@AuthorizedFeignClient(name = \"mcpuaa\")\npublic interface McpUaaClient {\n    @PostMapping(\"/api/auth/validatePassword\")\n    ResponseEntity&lt;JsonObject&gt; validatePassword(String password);\n}\n</code></pre>\n\n<p>I don't know what's wrong.</p>\n"}, {"tags": ["kotlin", "filter"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 1, "creation_date": 1565812988, "post_id": 57501179, "comment_id": 101471875, "body": "what about <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-indexed.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 1, "creation_date": 1565814787, "post_id": 57501553, "comment_id": 101472578, "body": "What is the need of the extension function? Isn&#39;t <code>filterIndexed</code> enough?"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1565815585, "post_id": 57501553, "comment_id": 101472876, "body": "filter indexed is enough .. but if he wants to have it reusable a extension function might be used .."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 2, "creation_date": 1565820542, "post_id": 57501553, "comment_id": 101474262, "body": "Note that this returns items in index order, not in filter order.  (This may be what&#39;s wanted, but isn&#39;t obvious so would be worth documenting.  If so, I&#39;d suggest making the parameter a Set, not a List, for efficiency.)  Alternatively, you could do e.g. <code>return filter.map{this[it]}</code> to get filter order, which would be faster for a random-access List."}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1565853708, "post_id": 57501553, "comment_id": 101480324, "body": "@gidds .. i like that approach :-)"}], "tags": [], "owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "is_accepted": false, "score": 1, "last_activity_date": 1565853693, "last_edit_date": 1565853693, "creation_date": 1565814246, "answer_id": 57501553, "question_id": 57501179, "link": "https://stackoverflow.com/questions/57501179/kotlin-how-to-get-sub-list-by-its-position/57501553#57501553", "title": "kotlin, how to get sub list by its position", "body": "<p>Doing it as suggested with filter Indexed </p>\n\n<pre><code>fun main() {\n    val values = listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 0)\n    val filter = listOf(1, 2, 4, 7)\n    val resultV1 = values.filterByIndexV1(filter)\n    val resultV2 = values.filterByIndexV2(filter)\n\n    println(\"Input: $values\")\n    println(\"Filter: $filter\")\n    println(\"Result V1: $resultV1\")\n    println(\"Result V2: $resultV2\")\n}\n\nfun &lt;T&gt; List&lt;T&gt;.filterByIndexV1(filter: List&lt;Int&gt;): List&lt;T&gt; {\n    return this.filterIndexed { index, _ -&gt; filter.contains(index) }\n}\n\nfun &lt;T&gt; List&lt;T&gt;.filterByIndexV2(filter: List&lt;Int&gt;): List&lt;T&gt; {\n    return filter.map { this[it] }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1565919897, "creation_date": 1565919897, "answer_id": 57518023, "question_id": 57501179, "link": "https://stackoverflow.com/questions/57501179/kotlin-how-to-get-sub-list-by-its-position/57518023#57518023", "title": "kotlin, how to get sub list by its position", "body": "<p>You can use <code>slice</code> function for that providing it a list of positions:</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5, 6, 7, 8)\nval positions = listOf(1, 2, 4, 7)\nprintln(list.slice(positions))\n</code></pre>\n\n<p>Note that it prints <code>[2, 3, 5, 8]</code> because positions of list items are numbered from zero in Kotlin, so the position 1 corresponds to the second element, and so on.</p>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565919897, "creation_date": 1565812369, "question_id": 57501179, "link": "https://stackoverflow.com/questions/57501179/kotlin-how-to-get-sub-list-by-its-position", "title": "kotlin, how to get sub list by its position", "body": "<p>Having a list</p>\n\n<pre><code>val list = toList(1,2,3,4,5,6...)\n</code></pre>\n\n<p>would like to have a sub list from it which has only items at certain known position, i.e. position at 1, 2, 4, 7 etc. </p>\n"}, {"tags": ["java", "android", "kotlin"], "owner": {"reputation": 117, "user_id": 9813600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c05cfe64dd0d6e8718ad2b723967faa3?s=128&d=identicon&r=PG&f=1", "display_name": "Mumphus", "link": "https://stackoverflow.com/users/9813600/mumphus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565811469, "creation_date": 1565809699, "question_id": 57500659, "link": "https://stackoverflow.com/questions/57500659/how-to-have-service-know-when-app-is-killed-to-clear-notifications", "title": "How to have service know when app is killed to clear notifications?", "body": "<p>I am working on an app that uses a BLE service that starts when a the user wants to connect to a device, and stops when there are no more connections. During the life of the BLE service I want to have a persistent notification that reminds the user that the app is running and using BLE. This works fine when the service is stopped while the app is still running. But the issue comes when the app is swiped away, I cannot seem to find a place where I can clear the notifiation. </p>\n\n<p>Things I have tried:</p>\n\n<ol>\n<li>Clearing notifications onUnbind()</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>override fun onUnbind(intent: Intent?): Boolean {\n    mNM = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n    mNM!!.cancelAll()\n    return super.onUnbind(intent)\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Clearing notifications onDestroy()</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>override fun onDestroy() {\n    mNM = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n    mNM!!.cancelAll()\n    super.onDestroy()\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>Setting stopWithTask to false and clearing notifications in</li>\n</ol>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;service\n    android:name=\".location.LocationService\"\n    android:enabled=\"true\"\n    android:stopWithTask=\"false\"/&gt;\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>override fun onTaskRemoved(rootIntent: Intent?) {\n    mNM = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n    mNM!!.cancelAll()\n    stopSelf()\n    super.onTaskRemoved(rootIntent)\n}\n</code></pre>\n\n<p>But none of these work</p>\n\n<p>I start the service by binding to it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>bindService(intent, mConnectionLocation, Context.BIND_AUTO_CREATE)\n</code></pre>\n\n<p>Also I allow screen rotation so the MainActivity onDestroy cannot be used to unbind.</p>\n\n<p>How else can I detect the app being swiped away in order to clear the persistent notification?</p>\n"}, {"tags": ["kotlin", "backing-field"], "comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 1, "creation_date": 1565821816, "post_id": 57500380, "comment_id": 101474559, "body": "By convention, you shouldn&#39;t include &quot;get&quot; in Kotlin. Just name your field: <code>lastNameLen</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3816, "user_id": 9779471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63Vvd.png?s=128&g=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/9779471/quinn"}, "is_accepted": false, "score": 3, "last_activity_date": 1565809221, "creation_date": 1565809221, "answer_id": 57500555, "question_id": 57500380, "link": "https://stackoverflow.com/questions/57500380/how-to-use-get-with-backing-fields-in-kotlin/57500555#57500555", "title": "How to use get() with backing fields in kotlin", "body": "<p>This is because you are using the = operator which is setting the getter to be a lambda.</p>\n\n<p>You have two options:</p>\n\n<pre><code>val getLastNameLen\n    get() {\n        return this.lastName?.length\n    }\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>val getLastNameLen\n    get() = this.lastName?.length\n\n</code></pre>\n\n<p>basically use the brackets right after <code>get()</code> to make a getter function, or if you can do it in one line use an = right after the <code>get()</code> but don't include the <code>{}</code> otherwise it will treat it like its a lambda</p>\n"}], "owner": {"reputation": 6353, "user_id": 3732958, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4ad4db32f4933b1bfcf0e0fa116781e0?s=128&d=identicon&r=PG", "display_name": "user2121", "link": "https://stackoverflow.com/users/3732958/user2121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565849066, "creation_date": 1565808289, "last_edit_date": 1565849066, "question_id": 57500380, "link": "https://stackoverflow.com/questions/57500380/how-to-use-get-with-backing-fields-in-kotlin", "title": "How to use get() with backing fields in kotlin", "body": "<p>in the below code I am trying to create a getter method as a backing field.\nso that, when the getLastNameLen property is invoked it should return the length of the lastNameset.</p>\n\n<p>please refer to the code below and help me to fix the bug.</p>\n\n<p>how to display output of the backing fields</p>\n\n<p><strong>code</strong>:</p>\n\n<pre><code>class Thomas (val nickname: String?, val age : Int?) {\n\n    //backing field 1\n    var lastName : String? = null\n        set(value) {\n            if (value?.length == 0) throw IllegalArgumentException(\"negative values are not allowed\")\n            field = value\n            println(\"lastname backing field set: ${field} \")\n        }\n\n    val getLastNameLen\n        get() = {\n            this.lastName?.length\n        }\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>lastname backing field set: jr.stephan \nlastName is jr.stephan\nlastNameLen is () -&gt; kotlin.Int?\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565822609, "post_id": 57500208, "comment_id": 101474704, "body": "<code>?.</code> means &quot;only if the object to the left is not null&quot;, <code>let</code> means &quot;do this code&quot; (the object it&#39;s called on is available via <code>it</code>), and finally <code>let { dto -&gt; ... }</code> sets a custom alias (access the object via <code>dto</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": true, "score": 2, "last_activity_date": 1565808883, "last_edit_date": 1565808883, "creation_date": 1565808378, "answer_id": 57500402, "question_id": 57500208, "link": "https://stackoverflow.com/questions/57500208/kotlin-combined-usage-of-arrow-lamda-and-let-what-it-mean/57500402#57500402", "title": "Kotlin combined usage of arrow, lamda, ?, . , and let. what it mean?", "body": "<ol>\n<li><code>dto.someMap[MAP_A]?.let(::setAId)</code> can be expanded like</li>\n</ol>\n\n<pre><code>val value = dto.someMap[MAP_A]\nif (value != null) {\n    setAId(value)\n}\n</code></pre>\n\n<p>2.\nYep, it's correct. You can think about it like</p>\n\n<pre><code>//the whole function will return item created by OrderProtoBuilders.theItem\nfun theItemDTO.toDomainModel(\n    domainOrderId: String,\n    pIds: List&lt;Long&gt; = emptyList()\n): theItem = let { dto -&gt;\n    //return OrderProtoBuilders.theItem\n    OrderProtoBuilders.theItem {\n        //do some additional initialization of the Item\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6278, "user_id": 2646226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7030bd05d9dc7920f066578f878b4688?s=128&d=identicon&r=PG", "display_name": "Ezeewei", "link": "https://stackoverflow.com/users/2646226/ezeewei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57500402, "answer_count": 1, "score": 1, "last_activity_date": 1565808883, "creation_date": 1565807397, "question_id": 57500208, "link": "https://stackoverflow.com/questions/57500208/kotlin-combined-usage-of-arrow-lamda-and-let-what-it-mean", "title": "Kotlin combined usage of arrow, lamda, ?, . , and let. what it mean?", "body": "<pre><code>fun theItemDTO.toDomainModel(\n    domainOrderId: String,\n    pIds: List&lt;Long&gt; = emptyList()\n): theItem = let { dto -&gt;\n    OrderProtoBuilders.theItem {\n        this.id = dto.id.toString()\n        skuId = dto.catalogEntryId.toString()\n        orderId = domainOrderId\n        quantity = dto.quantity\n        unitPrice = dto.unitPrice\n        totalPrice = dto.totalPrice\n        price = null\n        for (pId in pIds)\n            addpId(pId.toString())\n\n        dto.someMap[MAP_A]\n            ?.let(::setAId)\n\n        dto.someMap[MAP_B]\n            ?.let(::setBId)\n    }\n}\n</code></pre>\n\n<p>For above kotlin function, my order of questions starts from the inner block code to the outter block:\n1. what is <code>dto.someMap[MAP_A]\n            ?.let(::setAId)</code> doing? It looks like a reassignment of <code>someMap[MAP_A]</code>, but also a declaration of <code>let</code> something... what is it doing?</p>\n\n<ol start=\"2\">\n<li>the meaning of so many <code>{</code> wrapper is the same as <code>return</code>. correct? Since I did read <code>-&gt;</code> is like a function returning value automatically. So the end value of <code>...: theItem</code> is really what <code>OrderProtoBuilders.theItem {...</code> created?</li>\n</ol>\n\n<pre><code>let { dto -&gt;\n    OrderProtoBuilders.theItem {...\n</code></pre>\n"}, {"tags": ["android", "firebase", "android-fragments", "kotlin", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11928660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea4793aa7fc5c344907bd6d225288d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enshaedn", "link": "https://stackoverflow.com/users/11928660/enshaedn"}, "edited": false, "score": 0, "creation_date": 1565814992, "post_id": 57501095, "comment_id": 101472664, "body": "Thank you, Lyla! You were correct in that it was all a matter of where I was trying to update my LiveData. I had tried having the LiveData assignment within the function to get the data from Firestore, but I hadn&#39;t tried within the snapshot listener itself.  Now the UI refreshes automatically as the data loads and it even refreshes with the updates from Firestore on the specific documents. :)  I know I probably have some issues with my Firebase listeners as well. I&#39;ll take a look at Doug&#39;s talk. Thank you for your help!"}, {"owner": {"reputation": 318, "user_id": 8820190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6e6b8cd6acc6d024162ee31d1d4d58?s=128&d=identicon&r=PG&f=1", "display_name": "Robotec", "link": "https://stackoverflow.com/users/8820190/robotec"}, "edited": false, "score": 0, "creation_date": 1568434607, "post_id": 57501095, "comment_id": 102281648, "body": "I think setting lifecycle of the fragment &quot;this&quot; as the first parameter to observe method is not right ,because fragment&#39;s view is recreated everytime you press app&#39;s task or home button which mean your observer won&#39;t tear down as fragment&#39;s view does that&#39;s because your observer is tied to the whole fragment life cycle not the view life cycle .This implies that in the next time you reopen the app onCreateView method would create new observer listening to fragment life cycle but won&#39;t tear down unless fragment itself is destroyed ,this approach would end you up having multiple observers"}, {"owner": {"reputation": 318, "user_id": 8820190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6e6b8cd6acc6d024162ee31d1d4d58?s=128&d=identicon&r=PG&f=1", "display_name": "Robotec", "link": "https://stackoverflow.com/users/8820190/robotec"}, "edited": false, "score": 0, "creation_date": 1568434782, "post_id": 57501095, "comment_id": 102281676, "body": "What it is suggested is that you use getViewLifecycleOwner() instead of using fragment life cycle  &quot;this&quot;"}, {"owner": {"reputation": 318, "user_id": 8820190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6e6b8cd6acc6d024162ee31d1d4d58?s=128&d=identicon&r=PG&f=1", "display_name": "Robotec", "link": "https://stackoverflow.com/users/8820190/robotec"}, "edited": false, "score": 0, "creation_date": 1568434854, "post_id": 57501095, "comment_id": 102281681, "body": "if you want to user fragment life cycle you&#39;d better calling from fragment&#39;s onCreate() instead"}, {"owner": {"reputation": 103, "user_id": 13075886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06562b5defaaeb21f3859889e46c8ab?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidRocket", "link": "https://stackoverflow.com/users/13075886/androidrocket"}, "edited": false, "score": 0, "creation_date": 1595396961, "post_id": 57501095, "comment_id": 111455882, "body": "@Lyla can take a look at this <a href=\"https://stackoverflow.com/questions/63007155/how-to-query-firestore-in-mvvm-android-architecture\" title=\"how to query firestore in mvvm android architecture\">stackoverflow.com/questions/63007155/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2541, "user_id": 497605, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c87a8c5947ec4d8fa7fa6636fd3c1c37?s=128&d=identicon&r=PG", "display_name": "Lyla", "link": "https://stackoverflow.com/users/497605/lyla"}, "is_accepted": true, "score": 0, "last_activity_date": 1565812027, "creation_date": 1565812027, "answer_id": 57501095, "question_id": 57500120, "link": "https://stackoverflow.com/questions/57500120/how-to-refresh-the-ui-of-a-fragment-using-livedata-after-firestore-data-loads/57501095#57501095", "title": "How to refresh the UI of a fragment using LiveData after Firestore data loads", "body": "<p>When troubleshooting this issue, I'd recommend starting by looking at two things.</p>\n\n<h3>Take a look at where/when you're updating your LiveData</h3>\n\n<p>The goal is whenever the data in Firebase updates, your <code>assignments</code> LiveData updates your UI. Something like:</p>\n\n<ol>\n<li>Firestore updates</li>\n<li>Firestore triggers SnapshotListener</li>\n<li>SnapshotListener updates LiveData</li>\n<li>LiveData observer updates UI</li>\n</ol>\n\n<p>So in your snapshot listener, you should be updating your LiveData, which is what I think you're missing. So it would be something like:</p>\n\n<pre><code>// Where you define your SnapshotListner\nassignmentQuery.addSnapshotListener { documents, _ -&gt;\n    // Process the data\n    documents?.forEach { document -&gt;\n        val a = document.toObject(AssignmentModel::class.java)\n        a.Assignment_ID = document.id\n        a.Class_Title = c.Title\n\n        a.Formatted_Date_Due = formatAssignmentDueDate(a)\n\n        assignmentMap[a.Assignment_ID] = a\n    }\n\n    // Update your LiveData\n    assignments.value = assignmentMap.values.toList().filter {\n    if (it.Date_Due != null) it.Date_Due!!.toDate() &gt;= Calendar.getInstance().time else true }\n    .sortedBy { it.Date_Due }\n\n}\n</code></pre>\n\n<p>Now every time your Firestore updates, your LiveData will update and your UI should update. </p>\n\n<p>Given the code change, <code>getAssignments()</code> can just return assignments. You can do this using a Kotlin <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-properties\" rel=\"nofollow noreferrer\">backing property</a>, covered <a href=\"https://codelabs.developers.google.com/codelabs/kotlin-android-training-live-data/#5\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>private val _assignments = MutableLiveData&lt;List&lt;AssignmentModel&gt;&gt;()\nval assignments: LiveData&lt;List&lt;AssignmentModel&gt;&gt;\n    get() = _assignments\n</code></pre>\n\n<p><strong>As for why it's not working at the moment</strong>, right now you call <code>getAssignments()</code> once on start up. This will filter an empty <code>assignmentMap.values</code> (I believe - might be worth checking), because when it's called, Firebase hasn't finished getting you any data. And when Firebase does get it's new data, it triggers the listener, but you don't update the LiveData.</p>\n\n<h3>Mind where you're setting up your listeners/observers</h3>\n\n<p>A tricky thing with LiveData observers and Firebase listeners is to make sure you only set them up once. </p>\n\n<p>For your Firebase listener, you should be setting up the listener when you initialize your database and not every single time you call <code>getUserAssignments</code>. Then you wouldn't need all the null checking in the ViewModel, which essentially ensures that at least the ViewModel won't call getUserAssignments twice....but if you have other classes interacting with your database, they might call <code>getUserAssignments</code> multiple times and then you have tons of extra listeners.</p>\n\n<p>Also, make sure you <a href=\"https://firebase.google.com/docs/firestore/query-data/listen#detach_a_listener\" rel=\"nofollow noreferrer\">detach your listener</a>.</p>\n\n<p>One way to handle this is described in Doug Stevenson's talk <a href=\"https://www.youtube.com/watch?v=bfdgH2371oE\" rel=\"nofollow noreferrer\">Firebase and Android Jetpack: Fit Like a Glove</a> - the talk includes a demo code <a href=\"https://github.com/CodingDoug/firebase-jetpack\" rel=\"nofollow noreferrer\">here</a>. The part that's related to this is how he handles <a href=\"https://github.com/CodingDoug/firebase-jetpack/blob/master/android/app/src/main/java/com/hyperaware/android/firebasejetpack/livedata/firestore/FirestoreDocumentLiveData.kt\" rel=\"nofollow noreferrer\">LiveData</a> -- notice how the class includes adding and removing the listener. The TL;DR is that he's using <a href=\"https://youtu.be/OMcDk2_4LSk?t=141\" rel=\"nofollow noreferrer\">LiveData's lifecycle awareness</a> to automatically do Firebase listener setup and cleanup. How that's done is a bit complicated, so I'd suggest watching the talk <a href=\"https://youtu.be/bfdgH2371oE?t=380\" rel=\"nofollow noreferrer\">from here</a>.</p>\n\n<p>For your LiveData, setup/tear down looks correct since it's getting setup in onCreateView (and torn down automatically via the fact it's lifecycle aware). I might rename <code>updateUI</code> to something like <code>setupUIObservation</code>, since <code>updateUI</code> sounds like something you call multiple times. As with the Firebase listeners, you want to make sure you're not setting up the same LiveData observer more than once.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 3, "user_id": 11928660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea4793aa7fc5c344907bd6d225288d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enshaedn", "link": "https://stackoverflow.com/users/11928660/enshaedn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2605, "favorite_count": 0, "accepted_answer_id": 57501095, "answer_count": 1, "score": 0, "last_activity_date": 1565812027, "creation_date": 1565806970, "question_id": 57500120, "link": "https://stackoverflow.com/questions/57500120/how-to-refresh-the-ui-of-a-fragment-using-livedata-after-firestore-data-loads", "title": "How to refresh the UI of a fragment using LiveData after Firestore data loads", "body": "<p>I'm making an Android app using Kotlin with Firebase products. I have successful connections with Firestore and can successfully retrieve the data I want, but I am having difficulty displaying it within a RecyclerView. </p>\n\n<p>When the application loads, and after a user has logged in, my Firestore queries use the UID of the user to get a list of their assignments. Using logs I can see that this occurs without issue as the home screen loads. Within the home screen fragment I have data binding for the RecyclerView and setup my ViewModel to have the fragment observe the returned Firestore data. </p>\n\n<p>I believe it is a misunderstanding on my part on exactly how LiveData works because if I tap the bottom nav icon for the home screen to trigger a refresh of the UI then the list populates and I can use the app as desired. Therefore my observer/LiveData must not be setup properly as it is not automatically refreshing once the data has changed (null list to not null list).</p>\n\n<p>As I'm new to programming I'm sure I've fallen into a number of pitfalls and done a few things incorrectly, but I've been searching through StackOverflow and YouTube for help on this issue for months now. Unfortunately I don't have all of the links saved to every video and every post. </p>\n\n<p>I've tried tweaking the ViewModel and the Repository/Database class (singleton) to different effects and currently I'm at my best version with only a single tap required to refresh the UI. Previously it took multiple taps. </p>\n\n<p>from the Database class</p>\n\n<pre><code>private val assignments = MutableLiveData&lt;List&lt;AssignmentModel&gt;&gt;()\n\nprivate fun getUserAssignments(c: ClassModel) {\n        val assignmentQuery = assignmentRef.whereEqualTo(\"Class_ID\", c.Class_ID)\n\n        assignmentQuery.addSnapshotListener { documents, _ -&gt;\n            documents?.forEach { document -&gt;\n                val a = document.toObject(AssignmentModel::class.java)\n                a.Assignment_ID = document.id\n                a.Class_Title = c.Title\n\n                a.Formatted_Date_Due = formatAssignmentDueDate(a)\n\n                assignmentMap[a.Assignment_ID] = a\n            }\n        }\n    }\n\n    fun getAssignments() : LiveData&lt;List&lt;AssignmentModel&gt;&gt; {\n        assignments.value = assignmentMap.values.toList().filter {\n            if (it.Date_Due != null) it.Date_Due!!.toDate() &gt;= Calendar.getInstance().time else true }\n            .sortedBy { it.Date_Due }\n        return assignments\n    }\n</code></pre>\n\n<p>from the ViewModel</p>\n\n<pre><code>class AssignmentListViewModel internal constructor(private val myDatabase: Database) : ViewModel() {\n\n    private var _assignments: LiveData&lt;List&lt;AssignmentModel&gt;&gt;? = null\n\n    fun getAssignments() : LiveData&lt;List&lt;AssignmentModel&gt;&gt; {\n        var liveData = _assignments\n        if (liveData == null) {\n            liveData = myDatabase.getAssignments()\n            _assignments = liveData\n        }\n        return liveData\n    }\n}\n</code></pre>\n\n<p>from the Fragment</p>\n\n<pre><code>class AssignmentList : Fragment() {\n    private lateinit var model: AssignmentListViewModel\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        val binding = AssignmentListBinding.inflate(inflater, container, false)\n\n        val factory = InjectorUtils.provideAssignmentListViewModelFactory()\n        model = ViewModelProvider(this, factory).get(AssignmentListViewModel::class.java)\n\n        val assignmentAdapter = AssignmentAdapter()\n        binding.assignmentRecycler.adapter = assignmentAdapter\n        updateUI(assignmentAdapter)\n        return binding.root\n    }\n\n    private fun updateUI(adapter: AssignmentAdapter) {\n        model.getAssignments().observe(this, Observer { assignments -&gt;\n            if (assignments.isNotEmpty()) adapter.submitList(assignments)\n        })\n    }\n}\n</code></pre>\n\n<p>Again, I expect the RecyclerView to populate automatically once the data from Firestore appears, but it doesn't. The screen remains empty until I tap the home screen button.</p>\n\n<p>These snippets show the most recent changes I've made. Originally I had the Firestore query function returning the LiveData directly. I also had a much simpler ViewModel of something like fun getAssignments() = myDatabase.getAssignments().</p>\n\n<p>Thanks for any and all help and advice.</p>\n"}, {"tags": ["kotlin", "backing-field"], "comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565822927, "post_id": 57499848, "comment_id": 101474772, "body": "Use either <code>=</code> or <code>{...}</code>, but not both. If you don&#39;t have <code>=</code> the brackets declare the function scope, but with <code>= {...}</code> the brackets now declare a lambda function. That&#39;s why your fields are returning functions."}], "answers": [{"tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": false, "score": 1, "last_activity_date": 1565809262, "creation_date": 1565809262, "answer_id": 57500568, "question_id": 57499848, "link": "https://stackoverflow.com/questions/57499848/how-to-display-values-from-the-backing-fields/57500568#57500568", "title": "How to display values from the backing fields", "body": "<p>You can just get rid of your getters like this:</p>\n\n<pre><code>class Person_1 (val name: String, val age : Int) {\n\n    //backing field 1\n    var lastName : String? = null\n        set(value) {\n            if (value?.length == 0) throw IllegalArgumentException(\"negative values are not allowed\")\n            field = value\n        }\n\n    //backing field 2\n    var month : String? = null\n        set(value) {\n            field = value\n        }\n}\n</code></pre>\n\n<p>If later you'll need them you can add it like this without api changes:</p>\n\n<pre><code>var lastName : String? = null\n    get() = field\n    set(value) {\n        if (value?.length == 0) throw IllegalArgumentException(\"negative values are not allowed\")\n        field = value\n    }\n</code></pre>\n"}], "owner": {"reputation": 6353, "user_id": 3732958, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4ad4db32f4933b1bfcf0e0fa116781e0?s=128&d=identicon&r=PG", "display_name": "user2121", "link": "https://stackoverflow.com/users/3732958/user2121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565809262, "creation_date": 1565805611, "question_id": 57499848, "link": "https://stackoverflow.com/questions/57499848/how-to-display-values-from-the-backing-fields", "title": "How to display values from the backing fields", "body": "<p>i would liek to run the simple example mentioned below. eclipse generates an error says:</p>\n\n<pre><code>main class cant be found or loaded\n</code></pre>\n\n<p>please let me know how to fix this error and why it happens\nin the below code I am trying to use the backing fields. however, the way they are used in the code does not provide the expected output.\nplease refer to the output section.</p>\n\n<p>how to display output of the backing fields</p>\n\n<p><strong>code</strong>:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\nprintln(\"Hello, World!\")\n\n    val p1 = Person_1(\"jack\", 21);\n    p1.lastName = \"stephan\"\n    p1.month = \"may\"\n    println(\"lastName is ${p1.getLastName}\")\n    println(\"month is ${p1.getMonth}\")\n\n\n    val p2 = Person_1(\"jack\", 21);\n    p2.lastName = \"knauth\"\n    p2.month = \"june\"\n    println(p2.getLastName)\n    println(p2.getMonth)\n\nclass Person_1 (val name: String, val age : Int) {\n\n//backing field 1\nvar lastName : String? = null\nset(value) {\n    if (value?.length == 0) throw IllegalArgumentException(\"negative values are not allowed\")\n    field = value\n}\n\nval getLastName\nget() = {\n    lastName\n}\n\n\n//backing field 2\nvar month : String? = null\nset(value) {\n    field = value\n}\n\nval getMonth\nget() = {\n    month\n}\n}\n</code></pre>\n\n<p><strong>output</strong>:</p>\n\n<pre><code>Hello, World!\nlastName is () -&gt; kotlin.String?\nmonth is () -&gt; kotlin.String?\n() -&gt; kotlin.String?\n() -&gt; kotlin.String?\n</code></pre>\n"}, {"tags": ["java", "android", "firebase", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 2814, "user_id": 8259771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VmVQA.jpg?s=128&g=1", "display_name": "Yash Krishan", "link": "https://stackoverflow.com/users/8259771/yash-krishan"}, "edited": false, "score": 0, "creation_date": 1565805102, "post_id": 57499717, "comment_id": 101468919, "body": "Share the code of your signOut listener"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 1, "creation_date": 1565817323, "post_id": 57499717, "comment_id": 101473351, "body": "When you sign out from Firebase, the user stays signed into the Google. And next time you then tell Firebase to sign in, it detects the Google sign in and uses that account automatically. To prevent this, you&#39;ll also need to explicitly sign out from Google. See <a href=\"https://stackoverflow.com/questions/47775239/trying-to-sign-out-from-firebase-auth-and-google\" title=\"trying to sign out from firebase auth and google\">stackoverflow.com/questions/47775239/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/56097948/after-once-login-with-google-authentication-in-my-android-app-i-cant-sign-out\" title=\"after once login with google authentication in my android app i cant sign out\">stackoverflow.com/questions/56097948/&hellip;</a>"}, {"owner": {"reputation": 767, "user_id": 4751730, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1079075358787253/picture?type=large", "display_name": "Alen", "link": "https://stackoverflow.com/users/4751730/alen"}, "reply_to_user": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1565888421, "post_id": 57499717, "comment_id": 101494819, "body": "@FrankvanPuffelen Should I use googleSignInClient or googleApiClient to sign out, some examples are using first and some second. What is the difference, and should I call firebaseAuth.signOut() before google signOut"}], "owner": {"reputation": 767, "user_id": 4751730, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1079075358787253/picture?type=large", "display_name": "Alen", "link": "https://stackoverflow.com/users/4751730/alen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1565817327, "answer_count": 0, "score": 0, "last_activity_date": 1565807481, "creation_date": 1565804966, "last_edit_date": 1565807481, "question_id": 57499717, "link": "https://stackoverflow.com/questions/57499717/android-firebase-gmail-log-out", "closed_reason": "Duplicate", "title": "Android Firebase Gmail Log out", "body": "<p>I am using Firebase to log in users using their Google accounts. On my phone I have three Gmail account so when I press Google sign in button (which is in SignInActivity.java which is activity that is always opened first) I am given an option to chose between those three accounts, I pick one and I am logged in my app. I have added the button to log out current user and it does this:</p>\n\n<pre><code>FirestoreUtil.firebaseAuth.addAuthStateListener { firebaseAuth -&gt;\n            if(firebaseAuth.currentUser == null){\n                Log.i(\"logout\", \"logout complete current user = null\")\n                val intent = Intent(mContext, SignInActivity::class.java)\n                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n                startActivity(intent)\n                activity?.finish()\n            }else{\n                Log.i(\"logout\", \"current user != null = ${firebaseAuth.currentUser}\")\n            }\n        }\n        FirestoreUtil.firebaseAuth.signOut()\n</code></pre>\n\n<p>I call <code>firebaseAuth.signOut()</code> and use a listener to know when user has been successfully logged out, I then create an Intent with <code>SignInActivity.java</code> (which is the main activity that has google signin button) and I put some flags to clear tasks and I start new activity and finish current.</p>\n\n<p>This gives me the weirdest behaviour:</p>\n\n<ol>\n<li>First of all when I am returned to SignInActivity and I press\nGoogleSignIn button I don't get the option to choose between three\naccount that I have, instead I am logged back in with the account I\nused previously (The point of logout is you choose different account\nnot the same ! )</li>\n<li>Another problem is that after I press logout button I am returned\nback to SignInActivity, but if I then exit the app and come back I am\nsometimes returned back as logged user and sometimes I am show that\nsame login screen with sign in button, I don't know what is wrong\nwith that</li>\n</ol>\n\n<p>Does anyone know what is happening, am I doing the logout process wrong (I use the same functions from official documentation), why am I not getting the option to choose between accounts, what can be the cause of the weird behaviour when I am sometimes logged automatically and sometimes not.</p>\n"}, {"tags": ["android", "button", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1566730013, "post_id": 57499614, "comment_id": 101741780, "body": "While this code snippet may be the solution, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-%E2%80%8C%E2%80%8Bcode-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 1290, "user_id": 8663492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BZhl.jpg?s=128&g=1", "display_name": "Muntasir Aonik", "link": "https://stackoverflow.com/users/8663492/muntasir-aonik"}, "is_accepted": false, "score": 0, "last_activity_date": 1566730153, "last_edit_date": 1566730153, "creation_date": 1565804551, "answer_id": 57499614, "question_id": 57499544, "link": "https://stackoverflow.com/questions/57499544/how-to-move-a-view-on-touch-in-kotlin/57499614#57499614", "title": "How to move a view on touch in Kotlin", "body": "<p>Have a look to this method ,It is a example as you didn't provide any code: </p>\n\n<pre><code>   class YourMainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n    // Hide the action bar\n        val actionBar = supportActionBar\n\n        actionBar!!.hide()\n\n        setContentView(R.layout.activity_shapes_view)\n\n      var listener = View.OnTouchListener(function = {view, motionEvent -&gt;\n\n            if (motionEvent.action == MotionEvent.ACTION_MOVE) {\n\n                view.y = motionEvent.rawY - view.height/2\n                view.x = motionEvent.rawX - view.width/2\n            }\n\n            true\n\n        })\n\n        // Declared in our activity_shapes_view.xml file.\n        draggableImage.setOnTouchListener(listener)\n\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 10784151, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IRF8ewUvTIE/AAAAAAAAAAI/AAAAAAAAABI/eQBIqHaMffU/photo.jpg?sz=128", "display_name": "TOUSIF AHAMMAD", "link": "https://stackoverflow.com/users/10784151/tousif-ahammad"}, "is_accepted": false, "score": 0, "last_activity_date": 1583993451, "creation_date": 1583993451, "answer_id": 60648490, "question_id": 57499544, "link": "https://stackoverflow.com/questions/57499544/how-to-move-a-view-on-touch-in-kotlin/60648490#60648490", "title": "How to move a view on touch in Kotlin", "body": "<pre><code>private enum class GestureMode { NONE, DRAG, ZOOM, ROTATION }\nprivate var gestureMode = GestureMode.NONE\nprivate var any_view? = null\n\nany_view.setOnTouchListener(initTouchListener(id))\n\nprivate fun initTouchListener(id: String): OnTouchListener {\n        var dX = 0f\n        var dY = 0f\n        var _x = 0f\n        var _y = 0f\n\n        return OnTouchListener(function = { view, event -&gt;\n            //Log.d(\"1111\", \"gesture Mode : $gestureMode\")\n\n\n\n            when (event.action) {\n\n                MotionEvent.ACTION_DOWN -&gt; {\n                    gestureMode = GestureMode.DRAG\n\n                    dX = view.x - event.rawX\n                    dY = view.y - event.rawY\n                }\n\n                MotionEvent.ACTION_MOVE -&gt; {\n                    if (gestureMode == GestureMode.DRAG) {\n                        _x = event.rawX + dX\n                        _y = event.rawY + dY\n                        moveTheView(view, _x, _y)\n                   }\n                }\n\n                MotionEvent.ACTION_UP -&gt; {\n                   gestureMode = GestureMode.NONE\n                }\n            }\n            true\n        })\n    }\n\n\n    private fun moveTheView(view: View?, _x: Float, _y: Float) {\n        view!!.animate()\n            .x(_x)\n            .y(_y)\n            .setDuration(0)\n            .start()\n\n        view.invalidate()\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9594551, "user_type": "registered", "profile_image": "https://graph.facebook.com/1386617698109807/picture?type=large", "display_name": "Dornish", "link": "https://stackoverflow.com/users/9594551/dornish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1583993451, "creation_date": 1565804221, "question_id": 57499544, "link": "https://stackoverflow.com/questions/57499544/how-to-move-a-view-on-touch-in-kotlin", "title": "How to move a view on touch in Kotlin", "body": "<p>I want to move a button view whenever it is touched from the center position in a Relative Layout parent to positions such as top-right etc. How to do this in Kotlin?</p>\n"}, {"tags": ["eclipse", "kotlin"], "comments": [{"owner": {"reputation": 2268, "user_id": 3133286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8eb9502875ead75092230df8fdcf5dd7?s=128&d=identicon&r=PG", "display_name": "ordonezalex", "link": "https://stackoverflow.com/users/3133286/ordonezalex"}, "edited": false, "score": 1, "creation_date": 1565818933, "post_id": 57498500, "comment_id": 101473815, "body": "You might want to specify a package. Try adding <code>package demo</code> to the top of your file. I do not use Eclipse, but if you need to type which class to search for <code>main</code>, then you should use <code>demo.MainKt</code> as the class name (Kotlin will rename the <code>Main</code> class to <code>MainKt</code>)."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565823086, "post_id": 57498500, "comment_id": 101474806, "body": "Maybe worth mentioning that you don&#39;t need to declare a class in Kotlin, or even the Array param (if not needed): <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/hello-world.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/tutorials/kotlin-for-py/hello-world.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": false, "score": 2, "last_activity_date": 1565825807, "last_edit_date": 1565825807, "creation_date": 1565825303, "answer_id": 57503220, "question_id": 57498500, "link": "https://stackoverflow.com/questions/57498500/why-the-main-method-cant-be-loaded/57503220#57503220", "title": "Why the main method cant be loaded", "body": "<p>The issue with your code is that the <code>main</code> function is not static.</p>\n\n<p>To make it static, either put it out of the class (the recommended way):</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(\"Hello, World!\")\n}\n</code></pre>\n\n<p>Or use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/index.html\" rel=\"nofollow noreferrer\"><code>@JvmStatic</code></a> annotation:</p>\n\n<pre><code>object Main {\n    @JvmStatic\n    fun main(args: Array&lt;String&gt;) {\n        println(\"Hello, World!\")\n    }       \n}\n</code></pre>\n\n<p>Note that statics can only appear in objects. <strike>However, I am not sure that JVM will recognize such <code>main</code> method.</strike> It seems to be working as well:</p>\n\n<p><a href=\"https://i.stack.imgur.com/K57qs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K57qs.png\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 6353, "user_id": 3732958, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4ad4db32f4933b1bfcf0e0fa116781e0?s=128&d=identicon&r=PG", "display_name": "user2121", "link": "https://stackoverflow.com/users/3732958/user2121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565825807, "creation_date": 1565799374, "last_edit_date": 1565824527, "question_id": 57498500, "link": "https://stackoverflow.com/questions/57498500/why-the-main-method-cant-be-loaded", "title": "Why the main method cant be loaded", "body": "<p>I would like to run the simple example mentioned below. Eclipse generates an error reading:</p>\n\n<blockquote>\n  <p>main class can't be found or loaded</p>\n</blockquote>\n\n<p>Please let me know how to fix this error and describe why it happens.</p>\n\n<p><strong>Main.kt</strong></p>\n\n<pre><code>class Main {\n    fun main(args: Array&lt;String&gt;) {\n        println(\"Hello, World!\")\n    }       \n}\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 1, "creation_date": 1565803969, "post_id": 57498549, "comment_id": 101468448, "body": "Yeah I thought about that too but it&#39;s really important for me that the return value is the same as the first argument"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565823554, "post_id": 57498549, "comment_id": 101474884, "body": "Could you add some examples of your 2nd fun being called to clarify what you want."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1565874271, "post_id": 57498549, "comment_id": 101487960, "body": "@Cilenco I believe you could express that via Kotlin contracts API. I&#39;ve actually tried that way but I couldn&#39;t get anything that worked, so it&#39;s either too early for such functionality or I missed something in my tests"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 2, "last_activity_date": 1565800007, "last_edit_date": 1565800007, "creation_date": 1565799607, "answer_id": 57498549, "question_id": 57498288, "link": "https://stackoverflow.com/questions/57498288/require-a-possibly-nullable-generic-to-be-not-null/57498549#57498549", "title": "Require a possibly nullable generic to be not null", "body": "<p>If I understood what you want to achieve, you could change <code>V</code>'s upper bound to something not nullable and explicitly marking it as nullable wherever needed, like this:</p>\n\n<pre><code>fun &lt;V: Person&gt; identity(nullable: V?, nonNullable: V): V? = TODO() // do something\n\nval p1: Person? = identity(null, Person()) // works fine\nval p2: Person? = identity(Person(), Person()) // works fine\nval p3: Person? = identity(null, null) // does not compile as second argument is null\n</code></pre>\n\n<p>Note that however you'll need to decide whether to return a nullable or non-nullable result, while in your original example that was inferred depending on whether the actual <code>V</code> was nullable or not.</p>\n"}], "owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57498549, "answer_count": 1, "score": 0, "last_activity_date": 1565800007, "creation_date": 1565798513, "question_id": 57498288, "link": "https://stackoverflow.com/questions/57498288/require-a-possibly-nullable-generic-to-be-not-null", "title": "Require a possibly nullable generic to be not null", "body": "<p>In Kotlin I'm able to write a function which takes a generic possibly nullable argument from a super class - let's call it <code>Person</code> - and returns the exact same type like this:</p>\n\n<pre><code>fun &lt;V: Person?&gt; identity(arg1: V): V = arg1\n\nval p1: Person? = identity(null) // works fine\nval p2: Person = identity(Person()) // works fine\nval p3: Person = identity(null) // does not work\n</code></pre>\n\n<p>Is it also possible to write a function like the one above which takes a second argument of type <code>V</code> which must not be null? I think about something like this where <code>arg2</code> can not be null:</p>\n\n<pre><code>fun &lt;V: Person?&gt; identity(arg1: V, args2: V): V\n</code></pre>\n\n<p>Not that both args should have the exact same type so <code>&lt;V: Person?, W: Person&gt;</code> would not work.</p>\n"}, {"tags": ["android-studio", "gradle", "kotlin", "teamcity"], "comments": [{"owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "edited": false, "score": 0, "creation_date": 1565825958, "post_id": 57497931, "comment_id": 101475302, "body": "Add <code>--stacktrace</code> to Gradle invocation to see full stacktrace. (and share with us so we can help)"}], "owner": {"reputation": 373, "user_id": 11626426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788a39284bdd6021ff5e7e7c0313daa6?s=128&d=identicon&r=PG&f=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/11626426/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565797193, "creation_date": 1565797193, "question_id": 57497931, "link": "https://stackoverflow.com/questions/57497931/java-io-ioexception-there-are-no-more-files-android-gradle", "title": "java.io.IOException: There are no more files Android Gradle", "body": "<p>I am trying to run a clean build using the gradlew using TeamCity for CI/CD. I have BuildAgent to run it with what I believe to have all the necessary sdks, and everything installed. The Build Agents are running in a container. Additionally, the TeamCity server is on a Windows 10 VM.</p>\n\n<p>I try to run a clean build and it runs a few tasks, but then says:</p>\n\n<pre><code>java.io.IOException: There are no more files\n</code></pre>\n\n<p>I also got this error running it another time:</p>\n\n<blockquote>\n  <p>Task :annotations:compileKotlin FAILED\n      :annotations:compileKotlin</p>\n</blockquote>\n\n<pre><code>Execution failed for task ':annotations:compileKotlin'. org.gradle.api.UncheckedIOException: java.io.IOException: There are no more files\n</code></pre>\n\n<p>Am I missing files in the BuildAgent? I'm not sure what the problem is as it runs no problem on my local machine.</p>\n"}, {"tags": ["gradle", "kotlin", "ktor", "kotlin-multiplatform"], "answers": [{"tags": [], "owner": {"reputation": 3212, "user_id": 45062, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bae9466571d0f6d585ac54a3816592c6?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/45062/andy"}, "is_accepted": true, "score": 2, "last_activity_date": 1566404069, "creation_date": 1566404069, "answer_id": 57595663, "question_id": 57497621, "link": "https://stackoverflow.com/questions/57497621/serve-kotlin-multiplatform-javascript-from-ktor/57595663#57595663", "title": "Serve kotlin multiplatform javascript from ktor", "body": "<p>Fixed this by including a copy task. Note that the kotlin full stack mpp here (<a href=\"https://github.com/ktorio/ktor-samples/tree/master/mpp/fullstack-mpp\" rel=\"nofollow noreferrer\">https://github.com/ktorio/ktor-samples/tree/master/mpp/fullstack-mpp</a>) has an example that uses webpack outputs.</p>\n\n<pre><code>kotlin {\n    jvm() {\n        task copyJsToJvm(type: Copy) {\n            from(\"$buildDir/classes/kotlin/js/main\")\n            include '*.*'\n            into \"$buildDir/classes/kotlin/jvm/main\"\n        }\n        compilations.main {\n            tasks.getByName(processResourcesTaskName) {\n                dependsOn(copyJsToJvm)\n            }\n        }\n    }\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 3212, "user_id": 45062, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bae9466571d0f6d585ac54a3816592c6?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/45062/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 57595663, "answer_count": 1, "score": 2, "last_activity_date": 1566404069, "creation_date": 1565795956, "question_id": 57497621, "link": "https://stackoverflow.com/questions/57497621/serve-kotlin-multiplatform-javascript-from-ktor", "title": "Serve kotlin multiplatform javascript from ktor", "body": "<p>I have set up a multi-module gradle project with a common module and a ktor module.</p>\n\n<p>The common module is a kotlin multiplatform library.</p>\n\n<p>I would like to be able to serve the javascript files generated from the common library from the ktor server, when I run it from Intellij.</p>\n\n<p>Currently ktor is set up to serve resources as static content:</p>\n\n<pre><code>    static(\"/static\") {\n        resources()\n    }\n</code></pre>\n\n<p>The ktor module has a dependency on the common module:</p>\n\n<pre><code>dependencies {\n    compile project(':common')\n    ...\n}\n</code></pre>\n\n<p>I would assume when running in Intellij to be able to browse to <a href=\"http://localhost:8080/static/common.js\" rel=\"nofollow noreferrer\">http://localhost:8080/static/common.js</a> to retrieve the outputs of the common module JS build (written to common\\build\\classes\\kotlin\\js\\main) but this does not work.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-architecture-components", "android-navigation"], "owner": {"reputation": 212, "user_id": 10569707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7181b0cedd449bbbd514843b463d2d3?s=128&d=identicon&r=PG&f=1", "display_name": "San Mo", "link": "https://stackoverflow.com/users/10569707/san-mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570561492, "creation_date": 1565794596, "question_id": 57497218, "link": "https://stackoverflow.com/questions/57497218/how-to-mimic-youtube-bottom-navigation-behavior-with-android-navigation-componen", "title": "How to Mimic youtube bottom navigation behavior with android navigation component", "body": "<p>I'm trying to achieve navigation experience identical to youtube's bottom navigation using android navigation component. It seems like there is no easy way of doing it, at least not built into the library.</p>\n\n<p>I've already tried playing with <code>NavOptions</code> when navigating to the desired location.</p>\n\n<pre><code>navController.navigate(it.itemId, null, NavOptions.Builder()\n.setPopEnterAnim(R.anim.nav_default_pop_enter_anim)\n.setPopUpTo(it.itemId, false)\n.setLaunchSingleTop(true)\n.build())\n</code></pre>\n\n<p><strong>Assuming I have fragments A, B, C and D, and navigation:</strong></p>\n\n<p>A -> B -> C -> D -> A -> B </p>\n\n<p><strong>I expect the back stack to look like:</strong>\n<code>\n|B|\n|A|\n|D|\n|C|\n|A|\n</code></p>\n\n<p><strong>Back navigation to look like:</strong></p>\n\n<p>B -> A -> D -> C -> A </p>\n\n<p><strong>When it's actually resulting in:</strong>\n<code>\n|B|\n|A|\n</code></p>\n\n<p><strong>And:</strong></p>\n\n<p>B -> A </p>\n\n<p>Eliminating duplicates while maintaining proper home fragment navigation.<br>\nA is the home fragment, hence the first and last fragment the user will see.</p>\n\n<p>Anyone? Thanks</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1565794358, "post_id": 57497108, "comment_id": 101463971, "body": "<code>infoItems</code> sounds unsafe and you should not have that dingling around."}, {"owner": {"reputation": 117, "user_id": 9996550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OZXkpw9lFxs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3-0pmpCUgZtLZ2oMRC0TMW5n72tA/mo/photo.jpg?sz=128", "display_name": "Artur A", "link": "https://stackoverflow.com/users/9996550/artur-a"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1565794654, "post_id": 57497108, "comment_id": 101464139, "body": "@EpicPandaForce what do you mean?"}, {"owner": {"reputation": 863, "user_id": 5363011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qqqla.jpg?s=128&g=1", "display_name": "George Leung", "link": "https://stackoverflow.com/users/5363011/george-leung"}, "edited": false, "score": 0, "creation_date": 1565807855, "post_id": 57497108, "comment_id": 101470039, "body": "S/he means that you may have concurrent access to that object. Race conditions can corrupt memory and create hard-to-reproduce bugs."}, {"owner": {"reputation": 863, "user_id": 5363011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qqqla.jpg?s=128&g=1", "display_name": "George Leung", "link": "https://stackoverflow.com/users/5363011/george-leung"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1565807866, "post_id": 57497108, "comment_id": 101470045, "body": "@EpicPandaForce those coroutines run in the UI thread, that serializes the accesses. From the code we see (which does not even compile) it is safe."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 5363011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qqqla.jpg?s=128&g=1", "display_name": "George Leung", "link": "https://stackoverflow.com/users/5363011/george-leung"}, "is_accepted": false, "score": 0, "last_activity_date": 1565808897, "creation_date": 1565808897, "answer_id": 57500501, "question_id": 57497108, "link": "https://stackoverflow.com/questions/57497108/how-to-optimize-code-with-kotlin-coroutines/57500501#57500501", "title": "How to optimize code with kotlin coroutines?", "body": "<p>I hope I guessed your question right. You have a bunch of <code>Stuff</code>, and have to do an async call for every one of them. Creating a coroutine for each of them works fine.</p>\n\n<pre><code>val stuffList: List&lt;Stuff&gt; = ...\nstuffList.map {\n    launch {\n        process(it)\n    }\n}.joinAll()\n</code></pre>\n\n<p>But this piece of code starts a lot of requests all at once. So you want to limit the concurrency, maybe at most 5 concurrent calls.</p>\n\n<p>The \"best\" pattern for it is still <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/172\" rel=\"nofollow noreferrer\">an open issue</a> on github.\nYou should take a look at their ideas.</p>\n\n<hr>\n\n<p>For now you can use a naive implementation.</p>\n\n<ul>\n<li>Create a work <code>Channel</code>, send the stuff to it and then close it.</li>\n<li><code>launch</code> n coroutines that <code>receive</code> from it and process the <code>Stuff</code> until reaching <code>ClosedReceiveChannelException</code>.</li>\n<li><code>join</code> the coroutines.</li>\n</ul>\n"}], "owner": {"reputation": 117, "user_id": 9996550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OZXkpw9lFxs/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3-0pmpCUgZtLZ2oMRC0TMW5n72tA/mo/photo.jpg?sz=128", "display_name": "Artur A", "link": "https://stackoverflow.com/users/9996550/artur-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565808897, "creation_date": 1565794241, "question_id": 57497108, "link": "https://stackoverflow.com/questions/57497108/how-to-optimize-code-with-kotlin-coroutines", "title": "How to optimize code with kotlin coroutines?", "body": "<p>Here is my code for each item I open new coroutine ,but the problem is that I want to optimize it and do some limitation let's say to have 5 coroutines , I know there is a solution with Coroutines Action ,but I don't know how can I introduce them here. Any help could be useful </p>\n\n<pre><code>  uiScope.launch {\n        val infoItem = fetchItems(item.query)\n        infoItems.add(infoItem)\n        itemsMutableData.postValue(infoItems)\n      }\n  }\n\n  override suspend fun fetchItems(query: String): Response&lt;List&lt;Item&gt;&gt;{\n    return suspendCoroutine {})\n    }\n  }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore", "firebase-storage", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1565794270, "post_id": 57497055, "comment_id": 101463913, "body": "You will want to use this library to be able to await the results of a task in a coroutine.  <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/integration/kotlinx-coroutines-play-services\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/tree/master/integration&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 11897259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3QRTROVlu60/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG5-_hDndl5B0BEdRAWaIrCbL4-Q/photo.jpg?sz=128", "display_name": "Bhavana Yaduvanshi", "link": "https://stackoverflow.com/users/11897259/bhavana-yaduvanshi"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1565796798, "post_id": 57497055, "comment_id": 101465375, "body": "I am already using the following kotlin coroutines related dependencies:                                     implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1&#39;                             implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.1.&zwnj;&#8203;1&#39;                           implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.1&quot;"}], "owner": {"reputation": 11, "user_id": 11897259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3QRTROVlu60/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG5-_hDndl5B0BEdRAWaIrCbL4-Q/photo.jpg?sz=128", "display_name": "Bhavana Yaduvanshi", "link": "https://stackoverflow.com/users/11897259/bhavana-yaduvanshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565811470, "creation_date": 1565794058, "last_edit_date": 1565811470, "question_id": 57497055, "link": "https://stackoverflow.com/questions/57497055/java-lang-illegalstateexception-task-is-not-yet-complete-using-cloud-storage-w", "title": "java.lang.IllegalStateException: Task is not yet complete (Using Cloud Storage with Coroutines)", "body": "<p>My main activity (UserHomePage)  hosts a Navigation Drawer with Navigation Header. I am trying to load data into the Navigation Header using Kotlin Coroutines. The main activity code goes like this:</p>\n\n<pre><code>class UserHomePage : AppCompatActivity() {\n\nprivate lateinit var binding: com.newwebtools.maun.databinding.ActivityUserHomePageBinding\nprivate lateinit var headerBinding: NavHeaderMainBinding\nprivate lateinit var appBarConfiguration: AppBarConfiguration\nprivate lateinit var toolbar: Toolbar\nprivate lateinit var drawer: DrawerLayout\nprivate lateinit var toggle: ActionBarDrawerToggle\nprivate val currentUser = mAuth.currentUser\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n\n    super.onCreate(savedInstanceState)\n    binding = DataBindingUtil.setContentView(this, R.layout.activity_user_home_page)\n    headerBinding = NavHeaderMainBinding.bind(binding.navView.getHeaderView(0))\n\n    setNavHeader() //This is a runBlocking function to set nav header views\n\n    //code continue further dealing with navigation drawer features...\n</code></pre>\n\n<p>I have defined setNavHeader() as follows:</p>\n\n<pre><code>private fun setNavHeader() = runBlocking {\n    val name = async{mFireStore.collection(\"userProfiles\")\n        .whereEqualTo(\"user_id\", currentUser?.uid).get().result?.documents?.first()?.getString(\"name\")}\n    val downloadUrl = async{mStorage.reference.child(\"profileImages/${currentUser?.uid}\").downloadUrl.result}\n    Log.i(\"UserHomePage\", \"Nav Header View downloadUrl is ${downloadUrl.await()}\")\n    headerBinding.navHeaderName.text = name.await()\n    headerBinding.navHeaderPhoneNo.text = currentUser?.phoneNumber\n}\n</code></pre>\n\n<p>On running the above code, I get the following error:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.newwebtools.maun, PID: 4203\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.newwebtools.maun/com.newwebtools.maun.UserHomePage}: java.lang.IllegalStateException: Task is not yet complete\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2814)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2892)\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1613)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:173)\n    at android.app.ActivityThread.main(ActivityThread.java:6634)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:822)\n Caused by: java.lang.IllegalStateException: Task is not yet complete\n    at com.google.android.gms.common.internal.Preconditions.checkState(Unknown Source:29)\n    at com.google.android.gms.tasks.zzu.zzb(Unknown Source:121)\n    at com.google.android.gms.tasks.zzu.getResult(Unknown Source:12)\n    at com.newwebtools.maun.UserHomePage$setNavHeader$1$name$1.invokeSuspend(UserHomePage.kt:151)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:233)\n    at kotlinx.coroutines.EventLoopImplBase.processNextEvent(EventLoop.kt:116)\n    at kotlinx.coroutines.BlockingCoroutine.joinBlocking(Builders.kt:76)\n    at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking(Builders.kt:53)\n    at kotlinx.coroutines.BuildersKt.runBlocking(Unknown Source:1)\n    at kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking$default(Builders.kt:35)\n    at kotlinx.coroutines.BuildersKt.runBlocking$default(Unknown Source:1)\n    at com.newwebtools.maun.UserHomePage.setNavHeader(UserHomePage.kt:149)\n    at com.newwebtools.maun.UserHomePage.onCreate(UserHomePage.kt:40)\n    at android.app.Activity.performCreate(Activity.java:7074)\n    at android.app.Activity.performCreate(Activity.java:7065)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1215)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2767)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2892)\u00a0\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1613)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n    at android.os.Looper.loop(Looper.java:173)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6634)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:822)\u00a0\nI/Process: Sending signal. PID: 4203 SIG: 9\nApplication terminated.\n</code></pre>\n\n<p>I am new to Kotlin and Android-Studio. Moreover I am still figuring out how to work with Coroutines.</p>\n"}, {"tags": ["android", "kotlin", "bluetooth-lowenergy", "android-alertdialog", "thread-sleep"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1565794165, "post_id": 57497052, "comment_id": 101463843, "body": "This isn&#39;t necessarily related, but you almost certainly should <i>not</i> be using <code>sleep</code> here. Tying up threads just to add a delay isn&#39;t a good idea; especially if that&#39;s running on the application thread. Use a timer or another mechanism."}], "owner": {"reputation": 53, "user_id": 11891879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kJ2R9.jpg?s=128&g=1", "display_name": "Oy3", "link": "https://stackoverflow.com/users/11891879/oy3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565794050, "creation_date": 1565794050, "question_id": 57497052, "link": "https://stackoverflow.com/questions/57497052/how-to-display-dialog-while-thread-is-at-sleep-in-kotlin", "title": "How to display dialog while thread is at sleep in kotlin", "body": "<p>I'm trying to show a progress bar dialog while a loop process is running.</p>\n\n<pre><code>fun verifySensor(template: String) {\n\n    //Load progress bar\n    managerCallback.startLoading()\n\n    val raw = template.decodeHex().toByteArray()\n\n\n    var index = 0\n    while (index &lt; raw.size) {\n        val chunkSize: IntRange = if (index + 19 &gt; raw.lastIndex) {\n            IntRange(index, raw.lastIndex)\n        } else {\n            IntRange(index, index + 19)\n        }\n\n        val chunkList = raw.slice(chunkSize)\n\n        val chunk = chunkList.toByteArray()\n        Thread.sleep(350)\n        index += 20\n\n        writeToService(chunk)\n    }\n    Thread.sleep(350)\n    writeToService(\"VERIFY\".toByteArray())\n\n    //Stop progress bar\n    managerCallback.stopLoading()\n}\n</code></pre>\n\n<p>I'm calling the abstract class in the activity here::</p>\n\n<pre><code>override fun startLoading() {\nshowLoadingDialog()\n}\noverride fun stopLoading() {\ndismissLoadingDialog()\n}\n</code></pre>\n\n<p>The methods::</p>\n\n<pre><code>private fun createDialog() {\n    val builder = AlertDialog.Builder(this)\n    builder.setView(R.layout.layout_loading)\n    builder.setCancelable(false)\n\n    dialog = builder.create()\n    dialog.window?.requestFeature(Window.FEATURE_NO_TITLE)\n    dialog.window?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))\n}\n\nfun showLoadingDialog() {\n    dialog.show()\n}\n\nfun dismissLoadingDialog() {\n    if (dialog.isShowing) dialog.dismiss()\n}\n</code></pre>\n\n<p>I'm calling createDialog() in the onCreate of the activity.</p>\n\n<p>I'm expecting the progress bar to show on the main UI thread while the chunk of bytes is sending until it finishes, but it is not showing.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 3681304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e1701f763fd52ee2fd8807173f9420?s=128&d=identicon&r=PG&f=1", "display_name": "user3681304", "link": "https://stackoverflow.com/users/3681304/user3681304"}, "edited": false, "score": 0, "creation_date": 1566401714, "post_id": 57499613, "comment_id": 101647394, "body": "Thanks @hotkey! I like the suggestion with interfaces!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 4, "last_activity_date": 1565804545, "creation_date": 1565804545, "answer_id": 57499613, "question_id": 57497004, "link": "https://stackoverflow.com/questions/57497004/is-it-possible-to-extend-a-base-class-in-a-data-class-without-overriding-paramet/57499613#57499613", "title": "Is it possible to extend a base class in a data class without overriding parameters?", "body": "<p>Having a base class like this and a derived <code>data</code> class, you have to override its properties or separate them, because all primary constructor parameters of a <code>data</code> class must also be declared as properties:</p>\n\n<blockquote>\n  <p>\u2014 All primary constructor parameters need to be marked as <code>val</code> or <code>var</code>;</p>\n</blockquote>\n\n<p>However, based on what your goal really is, you can transform your code in one of the following ways:</p>\n\n<ul>\n<li><p>Declare the properties in <code>Child</code> as separate, unrelated properties:</p>\n\n<pre><code>open class Base(\n    open val first: String,\n    open val second: String\n)\n\ndata class Child(\n    val childFirst: String,\n    val childSecond: String,\n    val third: List&lt;String&gt;\n) : Base(childFirst, childSecond)\n</code></pre>\n\n<p>This will allow you to have separate implementations for the properties if you need it, storing the values passed as <code>childFirst</code> and <code>childSecond</code> in the <code>Child</code> and probably altering them in some way in the implementation of <code>Base</code>.</p></li>\n<li><p>Make <code>Base</code> an interface:</p>\n\n<pre><code>interface Base {\n    val first: String,\n    val second: String\n}\n\ndata class Child(\n    override val first: String,\n    override val second: String,\n    val third: List&lt;String&gt;\n) : Base\n</code></pre>\n\n<p>This ensures that <code>Base</code> doesn't have an implementation that stores property values in addition to the <code>Child</code>'s properties with backing fields (those will consume additional memory, but, as the propeties are overridden, <code>Base</code> will consistently see the values of the <code>Child</code>'s backing fields as <code>first</code> and <code>second</code>).</p></li>\n<li><p>Make <code>Base</code> an abstract class with <code>abstract</code> properties:</p>\n\n<pre><code>abstract class Base {\n    abstract val first: String,\n    abstract val second: String\n}\n\ndata class Child(\n    override val first: String,\n    override val second: String,\n    val third: List&lt;String&gt;\n) : Base()\n</code></pre>\n\n<p>This follows a similar purpose: <code>Base</code> won't store the property values in its implementation needlessly duplicating the properties of <code>Child</code>.</p></li>\n<li><p>Make <code>Child</code> a normal class, manually implementing those of <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">the functions that are generated for <code>data</code> classes</a> which you actually need.</p></li>\n</ul>\n"}], "owner": {"reputation": 422, "user_id": 3681304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e1701f763fd52ee2fd8807173f9420?s=128&d=identicon&r=PG&f=1", "display_name": "user3681304", "link": "https://stackoverflow.com/users/3681304/user3681304"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 57499613, "answer_count": 1, "score": 2, "last_activity_date": 1565804545, "creation_date": 1565793859, "question_id": 57497004, "link": "https://stackoverflow.com/questions/57497004/is-it-possible-to-extend-a-base-class-in-a-data-class-without-overriding-paramet", "title": "Is it possible to extend a base class in a data class without overriding parameters?", "body": "<p>I have a simple inheritance tree in my Kotlin project, where a base class is extended by a data class. I cannot declare construction of my data class without overriding the parameters from the base class</p>\n\n<p>I've noticed that this would work if I wasn't extending in a data class: </p>\n\n<pre><code>open class Base(\n    val first: String,\n    val second: String\n)\n\nclass Child(\n    first: String,\n    second: String,\n    val third: List&lt;String&gt;\n) : Base(first, second)\n</code></pre>\n\n<p>This is what I ended up with currently:</p>\n\n<pre><code>open class Base(\n    open val first: String,\n    open val second: String\n)\n\ndata class Child(\n    override val first: String,\n    override val second: String,\n    val third: List&lt;String&gt;\n) : Base(first, second)\n</code></pre>\n\n<p>But I would like to be able not to override the constructor parameters, because I'm not really overriding them. I just need to take them in my Child constructor to be able to pass them to Base.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 1394, "user_id": 1960464, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b9bd5ed73cbbfc3b825987708b6ac001?s=128&d=identicon&r=PG", "display_name": "I.S", "link": "https://stackoverflow.com/users/1960464/i-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1565956444, "creation_date": 1565956444, "answer_id": 57524200, "question_id": 57496946, "link": "https://stackoverflow.com/questions/57496946/why-unit-tests-with-coroutines-delay-fails/57524200#57524200", "title": "Why Unit tests with coroutines delay() fails?", "body": "<p>I have added   coroutinesTestRule.testDispatcher.runBlockingTest {}  and advanceTimeBy(20000L) and set time bigger than delay time in loadSession()</p>\n\n<pre><code> @Test\n  fun testLoadSession() {\n    viewModel.activationCodeRepository = SuccessActivationCodeRepository()\n    val activationCode = ActivationCode()\n    val expectedSession = Session()\n    coroutinesTestRule.testDispatcher.runBlockingTest {\n      viewModel.loadSession(activationCode)\n      viewModel.sessionData.observeForTesting {\n        advanceTimeBy(20000L)\n        assertThat(viewModel.sessionData.value.sessionToken).isEqualTo(expectedSession.sessionToken)\n      }\n    }\n  }```\n</code></pre>\n"}], "owner": {"reputation": 1394, "user_id": 1960464, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b9bd5ed73cbbfc3b825987708b6ac001?s=128&d=identicon&r=PG", "display_name": "I.S", "link": "https://stackoverflow.com/users/1960464/i-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 57524200, "answer_count": 1, "score": 2, "last_activity_date": 1565956444, "creation_date": 1565793673, "question_id": 57496946, "link": "https://stackoverflow.com/questions/57496946/why-unit-tests-with-coroutines-delay-fails", "title": "Why Unit tests with coroutines delay() fails?", "body": "<p>I have this piece of code I do want to test <code>loadSession()</code> and <code>testLoadSession()</code> is testing method I have <code>SuccessActivationCodeRepository</code> for unit test  and <code>observeForTesting</code> is extension function\nyou can see I have added longer delay in the unit test but it doesn't help it return null for sessionData, How can I fix this?</p>\n\n<pre><code>fun loadSession(activationCode: ActivationCode) {\n    viewModelScope.launch {\n      delay(START_DELAY)\n      when (val result = activationCodeRepository.fetchSession(activationCode)) {\n        is Response.Success&lt;ISession&gt; -&gt; {\n          sessionMutableData.postValue(result.data)\n        }\n        is Response.Failure -&gt; {\n          if (result.message == ERROR_RETRY_ACTIVATION) {\n            retryActivationMutableData.postValue(true)\n          } else {\n            errorMessageMutableData.postValue(ConsumableValue(result.message))\n          }\n        }\n      }\n    }\n  } \n\n\n@Test\n  fun testLoadSession() {\n    viewModel.activationCodeRepository = SuccessActivationCodeRepository()\n    val activationCode = ActivationCode()\n    val expectedSession = Session(\"\", \"\", \"\")\n    viewModel.loadSession(activationCode)\n    runBlocking {\n      delay(10000L)\n    }\n    viewModel.sessionData.observeForTesting {\n     assertThat(viewModel.sessionData.value?.sessionToken).isEqualTo(expectedSession.sessionToken)\n    }\n  }\n\nclass SuccessActivationCodeRepository : IActivationCodeRepository {\n  override suspend fun fetchSession(activationCode: ActivationCode): Response&lt;ISession&gt; {\n    return Response.Success(Session())\n  }\n}\n\nfun &lt;T&gt; LiveData&lt;T&gt;.observeForTesting(block: () -&gt; Unit) {\n  val observer = Observer&lt;T&gt; { Unit }\n  try {\n    observeForever(observer)\n    block()\n  } finally {\n    removeObserver(observer)\n  }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6153, "user_id": 4729721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68628b01886ee639255e69111990484?s=128&d=identicon&r=PG&f=1", "display_name": "a_local_nobody", "link": "https://stackoverflow.com/users/4729721/a-local-nobody"}, "edited": false, "score": 0, "creation_date": 1565795878, "post_id": 57496913, "comment_id": 101464856, "body": "where is your warning or error shown ?"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11862125, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gEqoSE3kSC4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdD4gX_70__gabxwgHC19snWHhK0Q/photo.jpg?sz=128", "display_name": "anime verse", "link": "https://stackoverflow.com/users/11862125/anime-verse"}, "edited": false, "score": 0, "creation_date": 1565798134, "post_id": 57497801, "comment_id": 101466036, "body": "thank you  so much for taking your time to answer this question"}], "tags": [], "owner": {"reputation": 36, "user_id": 11926996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a578fea0f46195685903790aa9e71c71?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon", "link": "https://stackoverflow.com/users/11926996/szymon"}, "is_accepted": false, "score": 1, "last_activity_date": 1565798885, "last_edit_date": 1565798885, "creation_date": 1565796701, "answer_id": 57497801, "question_id": 57496913, "link": "https://stackoverflow.com/questions/57496913/only-safe-or-non-null-assserted-kotlin-message/57497801#57497801", "title": "Only safe or non null assserted kotlin message", "body": "<p>This issue is connected with null safety in Kotlin. As I can't really see where in your code is arrayList, I assume that you've got error in\n<code>${it.result.user.uid}</code> and it should be something like <code>${it.result?.user?.uid}</code></p>\n\n<p>You can read more about it here: <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html</a></p>\n"}], "owner": {"reputation": 7, "user_id": 11862125, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gEqoSE3kSC4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdD4gX_70__gabxwgHC19snWHhK0Q/photo.jpg?sz=128", "display_name": "anime verse", "link": "https://stackoverflow.com/users/11862125/anime-verse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565798885, "creation_date": 1565793564, "last_edit_date": 1565793658, "question_id": 57496913, "link": "https://stackoverflow.com/questions/57496913/only-safe-or-non-null-assserted-kotlin-message", "title": "Only safe or non null assserted kotlin message", "body": "<p>I'm trying to run an app on mine phone and i'm keep getting this problem with my project pledase help me with this \nthank youOnly safe or non null assserted calls are allowed on a nullable receiver type of arraylis</p>\n\n<pre><code>register_btn.setOnClickListener { val email = \nemail_registersscreen.text.toString()\n   val password = password_registerscreeb.text.toString()\n\n   Log.d(\"MainActiviy\", \"Email is:\" + email)\n   Log.d(\"MainActivity\", \"Password:$password\")\n\n   //Firebase Authentication  user  with email and password\n\n   FirebaseAuth.getInstance().createUserWithEmailAndPassword(email, password)\n       .addOnCompleteListener {\n           if (!it.isSuccessful) return@addOnCompleteListener\n\n           // else it successful\n           Log.d(\"Main\", \"successfully created user with uid: \n${it.result.user.uid}\")\n\n           }\n   }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-sdcard"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3924767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d27917a65ce1d37aaa2d4f315fc2da?s=128&d=identicon&r=PG&f=1", "display_name": "gaoshin", "link": "https://stackoverflow.com/users/3924767/gaoshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574042398, "creation_date": 1574042398, "answer_id": 58907073, "question_id": 57496246, "link": "https://stackoverflow.com/questions/57496246/how-to-use-storage-access-framework-with-mediamuxer-if-android-api-level-less-th/58907073#58907073", "title": "How to use Storage Access Framework with MediaMuxer if Android API level less than 26", "body": "<p>I have the same issue as you and no any help.But there may have some workarounds.</p>\n\n<p>You can record the file into internal storage and when the record end you may copy the record file into your removable SD using SAF </p>\n"}], "owner": {"reputation": 21, "user_id": 8056656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c25f709fb3042340dd338d6a7de8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Ahgagabubu", "link": "https://stackoverflow.com/users/8056656/ahgagabubu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1574042398, "creation_date": 1565791225, "last_edit_date": 1565794576, "question_id": 57496246, "link": "https://stackoverflow.com/questions/57496246/how-to-use-storage-access-framework-with-mediamuxer-if-android-api-level-less-th", "title": "How to use Storage Access Framework with MediaMuxer if Android API level less than 26", "body": "<p>I'm creating a file to recording via Android MediaMuxer, and I want to store this file in any folder I specified in the removable SD card (Not only in the /Android/data/data/application).</p>\n\n<p>I can use SAF (Storage Access Framework) to achieve it if the Android API level is above 26.</p>\n\n<pre><code>var fd: FileDesciptor? = null\n\nfor (permission in activity.contentResolver.persistedUriPermissions) {\n    if (permission.uri.path == \"path/to/file\") {\n        val docFile = DocumentFile.fromTreeUri(activity, permission.uri)!!.\n                createFile(\"video/mp4\", \"test.mp4\")\n        fd = activity.contentResolver.\n                openFileDescriptor(docFile!!.uri, \"w\")!!.\n                fileDesciptor\n        break\n    }\n}\n\nval muxer = MediaMuxer(fd, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4)\n</code></pre>\n\n<p>But the file descriptor version constructor</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public MediaMuxer(@NonNull FileDescriptor fd, @Format int format) throws IOException \n</code></pre>\n\n<p>is not available if API level &lt; 26.</p>\n\n<p>There is only file path version</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public MediaMuxer(@NonNull String path, @Format int format) throws IOException \n</code></pre>\n\n<p>I can use.</p>\n\n<p>But I can't get the real path with permission from SAF.</p>\n\n<pre><code>docFile.uri.path // this gives me a path with strange prefix.\n</code></pre>\n\n<p>So is there a way I can record a file via MediaMuxer in any folder I specified in the removable SD card if the Android API level is less than 26?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-architecture-components", "android-diffutils"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1565788618, "post_id": 57495436, "comment_id": 101460656, "body": "Does item at position 0 move? <code>LinearLayoutManager</code> aggressively follows it by default"}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1565788859, "post_id": 57495436, "comment_id": 101460827, "body": "post the code of <code>CurrentListViewHolder.kt</code>"}, {"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1565789155, "post_id": 57495436, "comment_id": 101461017, "body": "@Pawel at this point no. I have clickListener on the list which sets the clicked item to the 0 but that is expected behaviour and works fine. Otherwise, every few seconds the list is refreshed from the server and if the list is scrolled down, onBindViewHolder scrolls it back to 0"}, {"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "reply_to_user": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1565789301, "post_id": 57495436, "comment_id": 101461121, "body": "@SantanuSur ViewHolder isn&#39;t important really because like I wrote the list is scrolled on the start of the onBindViewholder meaning that even if the binding viewHolder is commented/deleted this behaviour occur."}, {"owner": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "edited": false, "score": 0, "creation_date": 1566285457, "post_id": 57495436, "comment_id": 101597653, "body": "@tompadre Maybe is issue with focus, with EditText, try to comment out EditText in your recycler View item."}, {"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "reply_to_user": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "edited": false, "score": 0, "creation_date": 1566285812, "post_id": 57495436, "comment_id": 101597793, "body": "@mmmatey Thanks for the answer. That was also one of my first thoughts but unfortunately something else is messing with the scrolling and/or focus :/"}, {"owner": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "edited": false, "score": 1, "creation_date": 1566286515, "post_id": 57495436, "comment_id": 101598145, "body": "@tompadre next thing which you should tell us, is Item class &quot;data&quot; class or did you override hashCode and equals for comparing items in diffUtils? Can you share also MyDiffUtil?"}, {"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "reply_to_user": {"reputation": 573, "user_id": 1537916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a565084904efb180c6e83ad003f7c841?s=128&d=identicon&r=PG", "display_name": "mmmatey", "link": "https://stackoverflow.com/users/1537916/mmmatey"}, "edited": false, "score": 0, "creation_date": 1566289016, "post_id": 57495436, "comment_id": 101599381, "body": "@mmmatey Hvala kolega za fresh pair of eyes!"}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "edited": false, "score": 0, "creation_date": 1565792419, "post_id": 57496349, "comment_id": 101462903, "body": "Thanks for the answer. Yes, you understood correctly. I&#39;m trying to update items without losing focus/recreating it and scrolling to the position 0. Number of items is always the same, only some of the data in the items is changing but is changing in the every item in the list. But like I wrote, even if I don&#39;t have anything in the onBindViewHolder, after submitList is called, list is scrolled to the top."}, {"owner": {"reputation": 619, "user_id": 6430090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6RVa6.jpg?s=128&g=1", "display_name": "mr.kostua", "link": "https://stackoverflow.com/users/6430090/mr-kostua"}, "reply_to_user": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "edited": false, "score": 0, "creation_date": 1565871606, "post_id": 57496349, "comment_id": 101486742, "body": "@tompadre :) I have updated my answer. Still it&#39;s not enough info to solve the problem, as I think it&#39;s lies not in the adapter."}, {"owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "edited": false, "score": 1, "creation_date": 1566284935, "post_id": 57496349, "comment_id": 101597410, "body": "the rest of the code is plain simple and straightforward so I don&#39;t see where the issue can be but I updated my question anyway. DiffUtil works fine afaik and I migrated adapter to the ListAdapter but the mistery remains"}], "tags": [], "owner": {"reputation": 619, "user_id": 6430090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6RVa6.jpg?s=128&g=1", "display_name": "mr.kostua", "link": "https://stackoverflow.com/users/6430090/mr-kostua"}, "is_accepted": false, "score": 1, "last_activity_date": 1565871557, "last_edit_date": 1565871557, "creation_date": 1565791623, "answer_id": 57496349, "question_id": 57495436, "link": "https://stackoverflow.com/questions/57495436/onbindviewholder-on-update-autoscroll-to-top/57496349#57496349", "title": "OnBindViewHolder on update autoScroll to top", "body": "<p>Post override method for comparing submitted list by DiffUtil. I faced similar problem (my problem was RecycleView keeping focus on list_item_network_state, which was displaying loading views). From comments under your post <em>\"every few seconds the list is refreshed from the server and if the list is scrolled down, onBindViewHolder scrolls it back to 0\"</em>, so when data is getting updated and it contains same items you want to have focus on the focused element from the old list?</p>\n\n<p>a bit hard to find a solution for your problem (not enough info) I think problem is not on yours adapter.</p>\n\n<p>Also an advise to use <code>ListAdapter</code> it has DiffUtil.ItemCallback in itself.</p>\n\n<p><strong>Update</strong> \nSo if you don't have anything in the onBIndViewHolder it still scrolls to the top, that mean the problem is not there. The problem lies in submitting new list (as DiffUtil <em>\"it used to calculate updates for a RecyclerView Adapter.\"</em>). As during comparing it decides where to delete/update/add an item. It possible there is a problem (it's my assumption on info you provided, add more code to your question if it's possible). Check methods as areItemsTheSame() (it must compare id of items for example) and after it calls areContentsTheSame() so it checks what have been changed. </p>\n"}, {"comments": [{"owner": {"reputation": 619, "user_id": 6430090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6RVa6.jpg?s=128&g=1", "display_name": "mr.kostua", "link": "https://stackoverflow.com/users/6430090/mr-kostua"}, "edited": false, "score": 0, "creation_date": 1566375091, "post_id": 57569330, "comment_id": 101631945, "body": "After all the mystery was in DiffUtil, if you found help in my answer don&#39;t forget to up vote it :)"}], "tags": [], "owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "is_accepted": true, "score": 2, "last_activity_date": 1566288798, "creation_date": 1566288798, "answer_id": 57569330, "question_id": 57495436, "link": "https://stackoverflow.com/questions/57495436/onbindviewholder-on-update-autoscroll-to-top/57569330#57569330", "title": "OnBindViewHolder on update autoScroll to top", "body": "<p>The problem was with my DiffUtil. I was reckless and sloppy and had wrong/basically the same values on both <code>areItemsTheSame</code> and <code>areContentsTheSame</code> so diffUtil saw no difference between them meaning that every new content was the same as the new item.</p>\n"}], "owner": {"reputation": 789, "user_id": 5577679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPUBQ.jpg?s=128&g=1", "display_name": "tompadre", "link": "https://stackoverflow.com/users/5577679/tompadre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 57569330, "answer_count": 2, "score": 3, "last_activity_date": 1566288798, "creation_date": 1565788301, "last_edit_date": 1566284814, "question_id": 57495436, "link": "https://stackoverflow.com/questions/57495436/onbindviewholder-on-update-autoscroll-to-top", "title": "OnBindViewHolder on update autoScroll to top", "body": "<p>After the adapter submitList to the DiffUtil, onBindViewHolder is called and for some reason it always scroll the list to the top.</p>\n\n<p>I tried every single one of the answers in SO regarding autoscroll on updating list in the recyclerview but can't solve the issue. </p>\n\n<p>i.e.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/44993103/recyclerview-disable-scrolling-caused-by-change-in-focus\">RecyclerView: Disable scrolling caused by change in focus</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/43123400/recyclerview-scrolls-to-top-on-notifydatasetchanged-in-chat-screen\">RecyclerView scrolls to top on notifyDataSetChanged in chat screen</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/27079899/android-notifyitemrangeinserted-disable-autoscroll/30455749\">android notifyItemRangeInserted disable autoscroll</a></p>\n\n<p>etc</p>\n\n<p>Here is my adapter:</p>\n\n<pre><code>init {\n    setHasStableIds(true)\n}\n\nprivate val currentDiffer = AsyncListDiffer&lt;Item&gt;(this, MyDiffUtil())\n\n...\n\noverride fun setHasStableIds(hasStableIds: Boolean) {\n    super.setHasStableIds(true)\n}\n\noverride fun getItemCount(): Int {\n    return currentDiffer.currentList.size\n}\n\noverride fun getItemId(position: Int): Long = currentDiffer.currentList[position].name.hashCode().toLong()\noverride fun getItemViewType(position: Int) = position\n\noverride fun onAttachedToRecyclerView(recyclerView: RecyclerView) {\n    super.onAttachedToRecyclerView(recyclerView)\n}\n\noverride fun onBindViewHolder(holder: CurrentListViewHolder, position: Int) {\n    holder.bindView(position, activity, currentDiffer.currentList[position], onCurrencyListener)\n}\n\n\noverride fun onViewRecycled(holder: CurrentListViewHolder) {\n    holder.unbindView()\n    super.onViewRecycled(holder)\n}\n\nfun setData(list: LinkedList&lt;Item&gt;) {\n    val newList: LinkedList&lt;Item&gt; = LinkedList()\n    newList.addAll(list)\n\n    currentDiffer.submitList(newList.toList())\n}\n</code></pre>\n\n<hr>\n\n<p>So after every new submit of the list, no matter what is the current position, onBindViewHolder is called and before it does anything the list is scrolled to 0 position like the scrollToPosition is called. </p>\n\n<p>EDIT:</p>\n\n<pre><code>private fun setView() {\n\n  currentListAdapter = CurrentListAdapter()\n  with(currenciesRv) {\n        layoutManager = LinearLayoutManager(context)\n        adapter = currentListAdapter\n }\n</code></pre>\n\n<p>layout:</p>\n\n<pre><code>      &lt;RelativeLayout\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n                android:id=\"@+id/listRv\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"/&gt;\n\n     &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>item:</p>\n\n<pre><code>&lt;RelativeLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" \n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/itemLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n&lt;de.hdodenhof.circleimageview.CircleImageView\n        android:id=\"@+id/itemIvFlag\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:layout_marginTop=\"30dp\"\n        android:layout_marginStart=\"15dp\"\n        android:layout_alignParentStart=\"true\"\n        android:layout_centerVertical=\"true\"/&gt;\n\n&lt;LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_toEndOf=\"@id/itemIvFlag\"\n        android:orientation=\"vertical\"\n        android:layout_centerVertical=\"true\"\n        android:layout_marginTop=\"10dp\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/itemTvISO\"\n            android:layout_marginStart=\"10dp\"\n            android:textStyle=\"bold\"\n            tools:text=\"@string/dummy_number\"\n            android:textSize=\"16sp\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"/&gt;\n\n    &lt;TextView\n            android:id=\"@+id/itemTvName\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginStart=\"10dp\"\n            android:textSize=\"14sp\"\n            tools:text=\"@string/dummy_number\"/&gt;\n\n&lt;/LinearLayout&gt;\n\n\n&lt;EditText\n        android:id=\"@+id/itemEtAmount\"\n        android:layout_alignParentEnd=\"true\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerVertical=\"true\"\n        android:layout_marginEnd=\"15dp\"\n        tools:text=\"@string/dummy_number\"\n        android:inputType=\"numberDecimal\"\n        android:enabled=\"false\"\n        android:textColor=\"@drawable/et_disabled_color\"\n        android:imeOptions=\"actionDone\"\n        android:maxLines=\"1\"\n        android:singleLine=\"true\"/&gt;\n\n &lt;/RelativeLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11043902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/241e7701e272632453da5b6f4834c126?s=128&d=identicon&r=PG&f=1", "display_name": "Nopesal", "link": "https://stackoverflow.com/users/11043902/nopesal"}, "is_accepted": true, "score": 2, "last_activity_date": 1565789003, "creation_date": 1565789003, "answer_id": 57495652, "question_id": 57495153, "link": "https://stackoverflow.com/questions/57495153/why-navigation-graph-ids-are-not-listed-in-r-id/57495652#57495652", "title": "Why Navigation Graph IDs are not listed in R.id?", "body": "<p>I just solved it!</p>\n\n<p>I just noticed i had this imports at the beggining of the file. I suppose that they have imported automatically after copy and paste the navigation code. Deleting this imports fixed the issue.</p>\n\n<pre><code>import android.R.attr.data\nimport android.R\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11043902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/241e7701e272632453da5b6f4834c126?s=128&d=identicon&r=PG&f=1", "display_name": "Nopesal", "link": "https://stackoverflow.com/users/11043902/nopesal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 57495652, "answer_count": 1, "score": 0, "last_activity_date": 1565789003, "creation_date": 1565787315, "question_id": 57495153, "link": "https://stackoverflow.com/questions/57495153/why-navigation-graph-ids-are-not-listed-in-r-id", "title": "Why Navigation Graph IDs are not listed in R.id?", "body": "<p>I'm new to Android Navigation Component and I think I have everything ready for using it but when I try to navigate to another fragment using an action or a fragment id, the ids generated in the navigation graph xml file are not listed in R.id, so I can't use them to navigate. </p>\n\n<p>This is the code I'm trying to execute:</p>\n\n<p><code>view.findNavController().navigate(R.id.action_mainFragment_to_addFragment)</code></p>\n\n<p>This is my nav_graph.xml file (autogenerated):</p>\n\n<pre><code>&lt;navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n            xmlns:tools=\"http://schemas.android.com/tools\"\n            android:id=\"@+id/nav_graph\"\n            app:startDestination=\"@id/mainFragment\"&gt;\n    &lt;fragment android:id=\"@+id/mainFragment\"\n              android:name=\"com.example.nopesal.costlist.MainFragment\"\n              android:label=\"MainFragment\"\n              tools:layout=\"@layout/fragment_main\"&gt;\n        &lt;action android:id=\"@+id/action_mainFragment_to_addFragment\" app:destination=\"@id/addFragment\"\n                app:enterAnim=\"@anim/nav_default_enter_anim\" app:exitAnim=\"@anim/nav_default_exit_anim\"\n                app:popEnterAnim=\"@anim/nav_default_pop_enter_anim\" app:popExitAnim=\"@anim/nav_default_pop_exit_anim\"/&gt;\n    &lt;/fragment&gt;\n    &lt;fragment android:id=\"@+id/addFragment\" android:name=\"com.example.nopesal.costlist.AddFragment\"\n              android:label=\"fragment_add\" tools:layout=\"@layout/fragment_add\"/&gt;\n&lt;/navigation&gt;\n</code></pre>\n\n<p>As you can see, the ids are being generated with <code>@+id/</code> and it's supposed to appear in R.id when I try to referentiate them, but they are not showing. It doesn\u00b4t matter if I try to reference an action or a fragment, neither are showing. </p>\n\n<p>I've tried to clean the project, rebuild, change the gradle navigation implementation, change the id names, restart Android Studio... I can\u00b4t solve it. Also searching for tutorials, using R.id is he only way to referenciate them so I don\u00b4t know what I'm doing wrong. </p>\n\n<p>If anyone have faced the same issue o knows the solution I would be completely grateful.\nThank you so much.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8400139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3484443286b0939badf67548dd399245?s=128&d=identicon&r=PG&f=1", "display_name": "chosenandfree", "link": "https://stackoverflow.com/users/8400139/chosenandfree"}, "is_accepted": true, "score": 0, "last_activity_date": 1566046082, "creation_date": 1566046082, "answer_id": 57536409, "question_id": 57494934, "link": "https://stackoverflow.com/questions/57494934/smoothscrolltoposition-scrolls-to-bottom-instead-of-targeted-position-in-recyc/57536409#57536409", "title": "smoothScrollTo(position) scrolls to bottom instead of targeted position in RecyclerView", "body": "<p>It had to do with how I overrode LinearLayoutManager.</p>\n\n<p>I ended up using this solution:\n<a href=\"https://stackoverflow.com/a/36784136/8400139\">https://stackoverflow.com/a/36784136/8400139</a></p>\n\n<p>It works.</p>\n"}], "owner": {"reputation": 31, "user_id": 8400139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3484443286b0939badf67548dd399245?s=128&d=identicon&r=PG&f=1", "display_name": "chosenandfree", "link": "https://stackoverflow.com/users/8400139/chosenandfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 57536409, "answer_count": 1, "score": 0, "last_activity_date": 1566046082, "creation_date": 1565786498, "question_id": 57494934, "link": "https://stackoverflow.com/questions/57494934/smoothscrolltoposition-scrolls-to-bottom-instead-of-targeted-position-in-recyc", "title": "smoothScrollTo(position) scrolls to bottom instead of targeted position in RecyclerView", "body": "<p>My vertical RecyclerView (looking like a simple list) in Kotlin scrolls neatly to the next element when I press a button. \ud83d\udc4d\ud83c\udffb\nHowever when the next element is off screen (for example because in the meantime the user scrolled to a different position with a gesture) the problem is that this doesn't work anymore. Instead, it automatically scrolls all the way to the bottom of the RecyclerView.</p>\n\n<p>Any idea how to fix that? I'd appreciate it!\nThanks in advance for your efforts.</p>\n\n<p>I'm overriding SmoothScrollLinearLayoutManager:</p>\n\n<pre><code>class SmoothScrollLinearLayoutManager(private val mContext: Context, orientation: Int, reverseLayout: Boolean) : LinearLayoutManager(mContext, orientation, reverseLayout) {\n\n    override fun smoothScrollToPosition(recyclerView: RecyclerView, state: RecyclerView.State?,\n                                        position: Int) {\n        val smoothScroller = object : TopSnappedSmoothScroller(recyclerView.context) {\n            //This controls the direction in which smoothScroll looks for your view\n            override fun computeScrollVectorForPosition(targetPosition: Int): PointF {\n                return PointF(0f, 1f)\n            }\n\n            //This returns the milliseconds it takes to scroll one pixel.\n            protected override fun calculateSpeedPerPixel(displayMetrics: DisplayMetrics): Float {\n                return MILLISECONDS_PER_INCH / displayMetrics.densityDpi\n            }\n        }\n        smoothScroller.targetPosition = position\n        Log.i(\"Target\", smoothScroller.targetPosition.toString())\n        startSmoothScroll(smoothScroller)\n    }\n\n\n    private open inner class TopSnappedSmoothScroller(context: Context) : LinearSmoothScroller(context) {\n\n        override fun computeScrollVectorForPosition(targetPosition: Int): PointF? {\n            return this@SmoothScrollLinearLayoutManager\n                    .computeScrollVectorForPosition(targetPosition)\n        }\n\n        override fun getVerticalSnapPreference(): Int {\n            return LinearSmoothScroller.SNAP_TO_START\n        }\n    }\n\n    private open inner class CenterSnappedSmoothScroller(context: Context) : LinearSmoothScroller(context) {\n\n        override fun computeScrollVectorForPosition(targetPosition: Int): PointF? {\n            return this@SmoothScrollLinearLayoutManager\n                    .computeScrollVectorForPosition(targetPosition)\n        }\n\n        override fun getVerticalSnapPreference(): Int {\n            return LinearSmoothScroller.SNAP_TO_END\n        }\n    }\n\n    // Scrolling speed\n    companion object {\n        private val MILLISECONDS_PER_INCH = 110f\n    }\n}\n</code></pre>\n\n<p>The button triggers this function to scroll to the next element in the list (RecyclerView):</p>\n\n<pre><code>private fun fastForwardTapped() {\n\n        // Update selected position in RecyclerView\n            selectedPosition += 1\n\n        recyclerView.smoothScrollToPosition(selectedPosition)\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "android-databinding"], "comments": [{"owner": {"reputation": 1762, "user_id": 7592063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z5q5YjMsdWY/AAAAAAAAAAI/AAAAAAAABlQ/Mhax4OfAQ3E/photo.jpg?sz=128", "display_name": "Rajnish suryavanshi", "link": "https://stackoverflow.com/users/7592063/rajnish-suryavanshi"}, "edited": false, "score": 1, "creation_date": 1565785577, "post_id": 57494617, "comment_id": 101458929, "body": "holder.binding.executePendingBindings(). Add this method in onBindViewholder after binding everything."}, {"owner": {"reputation": 17, "user_id": 10940092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dfd6812a92ca471a077433815a89f7?s=128&d=identicon&r=PG&f=1", "display_name": "kirosc", "link": "https://stackoverflow.com/users/10940092/kirosc"}, "reply_to_user": {"reputation": 1762, "user_id": 7592063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z5q5YjMsdWY/AAAAAAAAAAI/AAAAAAAABlQ/Mhax4OfAQ3E/photo.jpg?sz=128", "display_name": "Rajnish suryavanshi", "link": "https://stackoverflow.com/users/7592063/rajnish-suryavanshi"}, "edited": false, "score": 0, "creation_date": 1565786694, "post_id": 57494617, "comment_id": 101459541, "body": "This method works, but I have to put it inside the initializer block of the ViewHolder. Thank you so much."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10940092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dfd6812a92ca471a077433815a89f7?s=128&d=identicon&r=PG&f=1", "display_name": "kirosc", "link": "https://stackoverflow.com/users/10940092/kirosc"}, "edited": false, "score": 0, "creation_date": 1565786745, "post_id": 57494903, "comment_id": 101459567, "body": "Thanks. I put executePendingBindings() inside the initializer block of the ViewHolder."}], "tags": [], "owner": {"reputation": 1067, "user_id": 5212417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-imJXj68IF_Q/AAAAAAAAAAI/AAAAAAAABGw/NHVRcnjDzyI/photo.jpg?sz=128", "display_name": "Peter Staranchuk", "link": "https://stackoverflow.com/users/5212417/peter-staranchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1565786410, "creation_date": 1565786410, "answer_id": 57494903, "question_id": 57494617, "link": "https://stackoverflow.com/questions/57494617/recyclerview-does-not-bind-data-to-viewholder-unless-it-is-notified/57494903#57494903", "title": "RecyclerView does not bind data to ViewHolder unless it is notified", "body": "<p>Try </p>\n\n<pre><code>class WiFiAdapter(_wifiList: ArrayList&lt;WiFi&gt;) :\n    androidx.recyclerview.widget.RecyclerView.Adapter&lt;WiFiAdapter.ViewHolder&gt;() {\n\n    ...\n\n    override fun onBindViewHolder(holder: ViewHolder, pos: Int) {\n\n        ...\n\n        holder.binding.executePendingBindings()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10940092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20dfd6812a92ca471a077433815a89f7?s=128&d=identicon&r=PG&f=1", "display_name": "kirosc", "link": "https://stackoverflow.com/users/10940092/kirosc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565786410, "creation_date": 1565785410, "last_edit_date": 1565786131, "question_id": 57494617, "link": "https://stackoverflow.com/questions/57494617/recyclerview-does-not-bind-data-to-viewholder-unless-it-is-notified", "title": "RecyclerView does not bind data to ViewHolder unless it is notified", "body": "<p>I'm trying to implement the <code>RecyclerView</code> with data binding.</p>\n\n<p>The <code>RecyclerView</code> worked properly when I used <code>findViewById</code> to retrieve the widgets. But, if I use <code>RecyclerView</code> with data binding, the data are not bound to the <code>ViewHolder</code>.</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>package com.example.wifilogger\n\nimport android.os.Bundle\nimport android.os.Handler\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.databinding.DataBindingUtil\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport com.example.wifilogger.databinding.ActivityMainBinding\nimport com.example.wifilogger.helper.WiFi\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    private var wifiList = ArrayList&lt;WiFi&gt;()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val binding: ActivityMainBinding =\n            DataBindingUtil.setContentView(this, R.layout.activity_main)\n\n        binding.loading = true\n\n        wifiList.add(WiFi(\"38:BC:01:64:2D:38\", \"Example\", -87, \"WPA2\"))\n\n        recycler_view.apply {\n\n            layoutManager = LinearLayoutManager(context)\n\n            adapter = WiFiAdapter(wifiList)\n        }\n\n        Handler().postDelayed({\n            recycler_view.adapter?.notifyDataSetChanged()\n        }, 1000)\n    }\n}\n</code></pre>\n\n<p>WiFi.kt</p>\n\n<pre><code>data class WiFi(var BSSID: String, var SSID: String, var level: Int, var encryption: String)\n</code></pre>\n\n<p>WiFiAdapter</p>\n\n<pre><code>package com.example.wifilogger\n\nimport android.view.LayoutInflater\nimport android.view.ViewGroup\nimport androidx.databinding.DataBindingUtil\nimport com.example.wifilogger.databinding.ListItemBinding\nimport com.example.wifilogger.helper.WiFi\n\n\nclass WiFiAdapter(_wifiList: ArrayList&lt;WiFi&gt;) :\n    androidx.recyclerview.widget.RecyclerView.Adapter&lt;WiFiAdapter.ViewHolder&gt;() {\n    private val wifiList = _wifiList\n\n    class ViewHolder(_binding: ListItemBinding) : androidx.recyclerview.widget.RecyclerView.ViewHolder(_binding.root) {\n        var binding: ListItemBinding = _binding\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val binding: ListItemBinding = DataBindingUtil.inflate(\n            LayoutInflater.from(parent.context),\n            R.layout.list_item, parent, false\n        )\n\n        return ViewHolder(binding)\n    }\n\n    override fun getItemCount() = wifiList.size\n\n    override fun onBindViewHolder(holder: ViewHolder, pos: Int) {\n        holder.binding.ssid.text = wifiList[pos].SSID\n        holder.binding.bssid.text = wifiList[pos].BSSID\n        holder.binding.level.text = wifiList[pos].level.toString()\n        holder.binding.encryption.text = wifiList[pos].encryption\n    }\n}\n</code></pre>\n\n<p>list_item.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tool=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n            name=\"ssid\"\n            type=\"String\" /&gt;\n        &lt;variable\n            name=\"bssid\"\n            type=\"String\" /&gt;\n        &lt;variable\n            name=\"level\"\n            type=\"int\" /&gt;\n        &lt;variable\n            name=\"encryption\"\n            type=\"String\" /&gt;\n    &lt;/data&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"\n        android:paddingBottom=\"8dp\"\n        android:paddingEnd=\"16dp\"\n        android:paddingStart=\"16dp\"\n        android:paddingTop=\"8dp\"&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/ssid\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:paddingBottom=\"8dp\"\n                android:textColor=\"@color/md_grey_900\"\n                android:text=\"@{ssid}\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"\n                tool:hint=\"SSID: Mum Use This One\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/bssid\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:textColor=\"@color/md_grey_600\"\n                android:text=\"@{bssid}\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/ssid\"\n                tool:hint=\"BSSID: 4A-C0-D0-07-91-E5\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/level\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:paddingBottom=\"8dp\"\n                android:textColor=\"@color/md_grey_600\"\n                android:text='@{level + \"dBm\"}'\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"\n                tool:hint=\"-68 dBm\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/encryption\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:textColor=\"@color/md_grey_600\"\n                android:text=\"@{encryption}\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintTop_toBottomOf=\"@+id/level\"\n                tool:hint=\"WPA2\" /&gt;\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>The code works if I call <code>notifyDataSetChanged()</code> with a small delay.\n<a href=\"https://i.imgur.com/9qhik38.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<p>But, if I remove that line, the data is not bound to the list_item.\n<a href=\"https://i.imgur.com/HObD5rk.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<p>I think some asynchronous task is running when binding the data to the <code>ViewHolder</code>, but I can't figure out where.</p>\n\n<p>Any help would be appreciated. Thank you.</p>\n"}, {"tags": ["android", "kotlin", "android-jetpack", "android-jetpack-compose"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 2, "creation_date": 1565783759, "post_id": 57494194, "comment_id": 101458060, "body": "Add <code>import androidx.compose.composer</code> to your list of imports and see if that clears it up. If you are using the experimental Android Studio build that is part of the current Jetpack Compose environment, this <code>import</code> will show up as not being used. However, it is necessary for many composables to actually work."}, {"owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1565784521, "post_id": 57494194, "comment_id": 101458439, "body": "@CommonsWare thank you! That helped. Can you write it as answer please? And yes I`m using the experimental AS from Jetpack"}], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 1, "last_activity_date": 1565828524, "creation_date": 1565828524, "answer_id": 57503533, "question_id": 57494194, "link": "https://stackoverflow.com/questions/57494194/jetpack-compose-exception-while-analyzing-expression/57503533#57503533", "title": "Jetpack Compose: Exception while analyzing expression", "body": "<p>I ran into this problem earlier.</p>\n\n<p>There is an implicit need to have <code>import androidx.compose.composer</code> in every Kotlin source file that has <code>@Composable</code> functions. I say \"implicit\" because Android Studio thinks that it is unnecessary and has a tendency to remove that line (e.g., you ask it to optimize imports). Some <code>@Composable</code> functions can survive without this import, but others cannot.</p>\n\n<p>As I understand it, this is one of those things that will get better as the libraries and tooling evolve, but at the moment, just keep an eye out for that import and add it if it is missing and you are getting weirder-than-normal results.</p>\n"}], "owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 57503533, "answer_count": 1, "score": 2, "last_activity_date": 1565861038, "creation_date": 1565783644, "last_edit_date": 1565861038, "question_id": 57494194, "link": "https://stackoverflow.com/questions/57494194/jetpack-compose-exception-while-analyzing-expression", "title": "Jetpack Compose: Exception while analyzing expression", "body": "<p>I am trying to build simple app using Jetpack Compose.\nI followed <a href=\"https://android.googlesource.com/platform/frameworks/support/+/refs/heads/androidx-master-dev/ui/README.md\" rel=\"nofollow noreferrer\">this documentation</a>, downloaded repository and created my own module.</p>\n\n<p>Code is pretty simple:</p>\n\n<pre><code>import android.app.Activity\nimport android.os.Bundle\nimport androidx.compose.Composable\nimport androidx.ui.core.Text\nimport androidx.ui.core.setContent\nimport androidx.ui.material.surface.Card\nimport androidx.ui.graphics.Color\n\nclass MainActivity : Activity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            MyApp()\n        }\n    }\n\n    @Composable\n    fun MyApp() {\n        Card(color = Color.Cyan) {\n            Text(\"test\")\n        }\n    }\n}\n</code></pre>\n\n<p>But I noticed that some composable widgets doesnt work and I have following error:</p>\n\n<blockquote>\n  <p>Exception while analyzing expression at (23,9) in\n  /path/Projects/androidx-master-dev/frameworks/support/ui/compose/src/main/java/app/myown/MainActivity.kt</p>\n</blockquote>\n\n<p>Where (23,9) references to <code>Card</code> widget</p>\n\n<p>By the way other widgets work, for example I dont have problems with</p>\n\n<pre><code>@Composable\nfun MyApp() {\n    Padding(10.dp) {\n        Text(\"test\")\n    }\n}\n</code></pre>\n\n<p>It compiles and runs perfectly.</p>\n\n<p>I got following problem with:</p>\n\n<ul>\n<li>Card </li>\n<li>Column </li>\n<li>Row </li>\n<li>Center </li>\n<li>FlexColumn</li>\n</ul>\n\n<p>and I guess many others widgets</p>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 455, "user_id": 7670871, "user_type": "registered", "profile_image": "https://graph.facebook.com/601670246602041/picture?type=large", "display_name": "Deep Naik", "link": "https://stackoverflow.com/users/7670871/deep-naik"}, "edited": false, "score": 0, "creation_date": 1565783954, "post_id": 57493982, "comment_id": 101458168, "body": "ensure that your nested launch has main launch&#39;s scope."}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1565783998, "post_id": 57493982, "comment_id": 101458193, "body": "Instead of launching <code>withContext(Dispatchers.Main)</code> to show the dialog..you could directly showed the dialog.. ( <b>there was no need for nesting in this case</b> ) also check if the debug breaks are showing <b>tick marks</b> .. else you can add log and test"}, {"owner": {"reputation": 2283, "user_id": 8159708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b814e69bb60fb1eac83b061ff2b7337d?s=128&d=identicon&r=PG", "display_name": "TomH", "link": "https://stackoverflow.com/users/8159708/tomh"}, "reply_to_user": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1565784320, "post_id": 57493982, "comment_id": 101458343, "body": "@SantanuSur if I don&#39;t use the <code>Dispatchers.Main</code> context the Android framework will say I&#39;m not on the main thread to be creating views?"}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1565784551, "post_id": 57493982, "comment_id": 101458455, "body": "@user8159708 it seems u are already in the <code>main thread</code> ..can you provide the <code>launch</code> function for <code>askToAddFriend()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 6656818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e629ee2481c49d17f4c763c55ee34ae?s=128&d=identicon&r=PG&f=1", "display_name": "J.D.1731", "link": "https://stackoverflow.com/users/6656818/j-d-1731"}, "is_accepted": false, "score": 0, "last_activity_date": 1565946851, "last_edit_date": 1565946851, "creation_date": 1565786545, "answer_id": 57494944, "question_id": 57493982, "link": "https://stackoverflow.com/questions/57493982/kotlin-nested-coroutine-launches-not-triggering/57494944#57494944", "title": "Kotlin Nested Coroutine Launches not triggering?", "body": "<p>That's what you have right now (not working code)</p>\n\n<pre><code>dialog.dismiss()\nlaunch(Dispatchers.IO) {\n     SendRequestHelper(this@EntryActivity).requestFriend(userUsername, userFirestoreDocumentId)\n}\n</code></pre>\n\n<p>As this code runs on Positive Button Click then you have to define what actually is the scope of the action. <code>launch</code> function simple fires and forgets so in Button Click function you don't simple have the scope cached (that's my assumption)</p>\n\n<pre><code>dialog.dismiss()\nGlobalScope.launch(Dispatchers.IO) {\n     SendRequestHelper(this@EntryActivity).requestFriend(userUsername, userFirestoreDocumentId)\n}\n</code></pre>\n\n<p>More abour that you can find <a href=\"https://medium.com/@elizarov/coroutine-context-and-scope-c8b255d59055\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>Please also notice, that <code>GlobalScope</code> is not for that case, as it keeps active over whole appliaction lifecycle.\nYou should probably have another scope like ViewModel scope to run your job in that one.</p>\n\n<p>More is <a href=\"https://medium.com/androiddevelopers/easy-coroutines-in-android-viewmodelscope-25bffb605471\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 2283, "user_id": 8159708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b814e69bb60fb1eac83b061ff2b7337d?s=128&d=identicon&r=PG", "display_name": "TomH", "link": "https://stackoverflow.com/users/8159708/tomh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1565946851, "creation_date": 1565782849, "last_edit_date": 1565784395, "question_id": 57493982, "link": "https://stackoverflow.com/questions/57493982/kotlin-nested-coroutine-launches-not-triggering", "title": "Kotlin Nested Coroutine Launches not triggering?", "body": "<p>I've noticed sometimes when I have a Kotlin Coroutine'launch' nested within another 'launch' that it doesn't always fire.</p>\n\n<p>For instance, I've got this code:</p>\n\n<pre><code>private suspend fun askToAddFriend() {\n        val friendExists = friendExists(userUsername)\n\n        if (!friendExists) {\n\n            withContext(Dispatchers.Main) {\n                AlertDialog.Builder(this@EntryActivity)\n                        .setTitle(getString(R.string.send_friend_request))\n                        .setMessage(\"${getString(R.string.would_you_like_to_add)} $userDisplayName ${getString(R.string.as_a_friend_questionmark)}\")\n                        .setPositiveButton(getString(R.string.yes)) { dialog, which -&gt;\n                            dialog.dismiss()\n\n                            launch(Dispatchers.IO) {\n                                SendRequestHelper(this@EntryActivity).requestFriend(userUsername, userFirestoreDocumentId)\n                            }\n\n                            AlertDialog.Builder(this@EntryActivity)\n                                    .setTitle(getString(R.string.friend_request_sent))\n                                    .setMessage(\"${getString(R.string.weve_sent_friend_request_to)} $userDisplayName\")\n                                    .setPositiveButton(getString(R.string.ok)) { dialog2, _ -&gt;\n                                        dialog2.dismiss()\n                                    }\n                                    .setOnDismissListener { callback.invoke() }\n                                    .create().show()\n                        }\n                        .setNegativeButton(getString(R.string.no)) { dialog, which -&gt;\n                            dialog.dismiss()\n                            callback.invoke()\n                        }\n                        .create().show()\n            }\n\n        }\n}\n</code></pre>\n\n<p>Now I've been debugging, and I placed a breakpoint in the <code>requestFriend</code> method of the <code>SendRequestHelper</code> class. And the breakpoint never hits.\nEven though it's gone past that code, because my second <code>AlertDialog</code> has shown up fine.</p>\n\n<p>What's going on here?</p>\n\n<p>Should I not be nesting <code>launch</code> statements? What stops it working?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "kotlin", "retrofit", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 5177, "user_id": 2219208, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/eA3xp.jpg?s=128&g=1", "display_name": "Lakhwinder Singh", "link": "https://stackoverflow.com/users/2219208/lakhwinder-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1565784433, "creation_date": 1565784433, "answer_id": 57494382, "question_id": 57493076, "link": "https://stackoverflow.com/questions/57493076/outofmemoryerror-while-trying-to-download-large-file-using-retrofit-streaming-a/57494382#57494382", "title": "OutOfMemoryError while trying to download large file using Retrofit @Streaming annotation", "body": "<p>Try using download manager for downloading large files</p>\n\n<p>You can find the complete sample here by @CommonsWare</p>\n\n<p><a href=\"https://github.com/commonsguy/cw-android/tree/master/Internet/Download\" rel=\"nofollow noreferrer\">https://github.com/commonsguy/cw-android/tree/master/Internet/Download</a></p>\n"}, {"tags": [], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "is_accepted": true, "score": 2, "last_activity_date": 1596120718, "last_edit_date": 1596120718, "creation_date": 1565786962, "answer_id": 57495061, "question_id": 57493076, "link": "https://stackoverflow.com/questions/57493076/outofmemoryerror-while-trying-to-download-large-file-using-retrofit-streaming-a/57495061#57495061", "title": "OutOfMemoryError while trying to download large file using Retrofit @Streaming annotation", "body": "<p>I have fixed it by changing <code>HttpLogingInterceptor</code> log level from <code>BODY</code> to <code>HEADERS</code></p>\n<pre><code>HttpLoggingInterceptor().apply {\n   level = HttpLoggingInterceptor.Level.HEADERS\n})\n</code></pre>\n<p>Seems strange bug fix, but it works</p>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 57495061, "answer_count": 2, "score": 3, "last_activity_date": 1596120718, "creation_date": 1565779172, "last_edit_date": 1565786175, "question_id": 57493076, "link": "https://stackoverflow.com/questions/57493076/outofmemoryerror-while-trying-to-download-large-file-using-retrofit-streaming-a", "title": "OutOfMemoryError while trying to download large file using Retrofit @Streaming annotation", "body": "<p>I'm downloading files using retrofit client, but when there is large file (200 MB) it throws <code>java.lang.OutOfMemoryError:</code>\nI have <code>@Streaming</code> annotation also and this is my download service method</p>\n\n<pre><code>@Streaming\n@GET(\"{path}\")\nsuspend fun downloadFile(@Path(\"path\") path: String): Response&lt;ResponseBody&gt;`\n</code></pre>\n\n<p>Here is invoke code snippet</p>\n\n<pre><code>suspend fun downloadFile(remotePath: String): FileDownloadResponse {\n  try {\n    val response = api.downloadFile(remotePath)\n    if (response.isSuccessful) {\n       FileDownloadResponse.Success(response.body()!!)\n    } else {\n      FileDownloadResponse.Fail()\n    }\n   } catch (e: Exception) {\n     e.printStakTrace()\n     FileDownloadResponse.Fail(throwable = e)\n\n   }\n\n}\n\nval response = remoteRepositroy.downloadFile(remotePath)\nval writeResult = response.body.writeResponseBodyToDisk()\n</code></pre>\n\n<p>Retrofit version = <code>2.6.0</code></p>\n\n<p>Coroutine version = <code>1.3.0-M1</code></p>\n"}, {"tags": ["kotlin", "jsr223"], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 2187775, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b21d706e94b545f57c13a6be2c7417d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/2187775/andreas"}, "is_accepted": true, "score": 1, "last_activity_date": 1565944037, "creation_date": 1565944037, "answer_id": 57521259, "question_id": 57492622, "link": "https://stackoverflow.com/questions/57492622/access-a-value-from-a-kotlin-script-using-jsr-223/57521259#57521259", "title": "Access a value from a Kotlin script using jsr-223", "body": "<p>Solved by creating a function that returns the value, and calling that function.</p>\n\n<pre><code>with(ScriptEngineManager().getEngineByExtension(\"kts\")!!) {\n        eval(\"fun getX() = 3\")\n        val invocator = this as? Invocable\n        val x = invocator!!.invokeFunction(\"getX\")\n        println(x) &lt;---------- x is 3\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2187775, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b21d706e94b545f57c13a6be2c7417d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/2187775/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 57521259, "answer_count": 1, "score": 0, "last_activity_date": 1565944037, "creation_date": 1565777364, "question_id": 57492622, "link": "https://stackoverflow.com/questions/57492622/access-a-value-from-a-kotlin-script-using-jsr-223", "title": "Access a value from a Kotlin script using jsr-223", "body": "<p>I'm wondering if it's possible to access variables from a kotlin script using jsr-223</p>\n\n<pre><code>with(ScriptEngineManager().getEngineByExtension(\"kts\")!!) {\n        eval(\"val x = 3\")\n        val x = get(\"x\")\n        println(x) &lt;---------- x is null\n    }\n</code></pre>\n\n<p>Here I want to access the variable x, but it seems to evalute to null.</p>\n\n<p>Is there another way to access data from within the script?</p>\n\n<p>I have looked at some examples here: <a href=\"https://github.com/JetBrains/kotlin/tree/master/libraries/examples/kotlin-jsr223-local-example\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/tree/master/libraries/examples/kotlin-jsr223-local-example</a>\nbut I can't seem to find what i'm looking for.</p>\n"}, {"tags": ["java", "kotlin", "libgdx"], "comments": [{"owner": {"reputation": 1557, "user_id": 7487013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2VmOFX8x_c/AAAAAAAAAAI/AAAAAAAAAW8/wcUOhJyNUjE/photo.jpg?sz=128", "display_name": "MrStahlfelge", "link": "https://stackoverflow.com/users/7487013/mrstahlfelge"}, "edited": false, "score": 0, "creation_date": 1565796150, "post_id": 57492334, "comment_id": 101465012, "body": "Does it look like this if you start the app the very first time or after a resume?"}, {"owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "reply_to_user": {"reputation": 1557, "user_id": 7487013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2VmOFX8x_c/AAAAAAAAAAI/AAAAAAAAAW8/wcUOhJyNUjE/photo.jpg?sz=128", "display_name": "MrStahlfelge", "link": "https://stackoverflow.com/users/7487013/mrstahlfelge"}, "edited": false, "score": 0, "creation_date": 1565807487, "post_id": 57492334, "comment_id": 101469894, "body": "Both. It&#39;s not an assets management issue."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1565844022, "post_id": 57492334, "comment_id": 101478113, "body": "Prime suspects...a shader not compiling or non-power-of-two textures. These are items that can work on a subset of devices due to GPUs that are more lenient about the OpenGL standard."}, {"owner": {"reputation": 1557, "user_id": 7487013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2VmOFX8x_c/AAAAAAAAAAI/AAAAAAAAAW8/wcUOhJyNUjE/photo.jpg?sz=128", "display_name": "MrStahlfelge", "link": "https://stackoverflow.com/users/7487013/mrstahlfelge"}, "edited": false, "score": 0, "creation_date": 1565852346, "post_id": 57492334, "comment_id": 101479881, "body": "I have a Nexus 7 as well, it supports non-power-of-two textures."}], "owner": {"reputation": 123, "user_id": 10081700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CBJeWDS-sw/AAAAAAAAAAI/AAAAAAAAAXs/2Ng_NpcsmQc/photo.jpg?sz=128", "display_name": "Luca1152", "link": "https://stackoverflow.com/users/10081700/luca1152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1565776321, "creation_date": 1565776321, "question_id": 57492334, "link": "https://stackoverflow.com/questions/57492334/libgdx-glitched-skin-on-older-android-versions", "title": "libGDX - Glitched skin on older Android versions", "body": "<p>The game I am working on works just fine on my phone and most devices. However, I tested it on an older tablet, a Nexus 7 that is running Android 4.2.1, and that's how the game looked like:</p>\n\n<p><img src=\"https://i.imgur.com/tKRA59b.png\" height=\"400\"></p>\n\n<p>And this is how the game should look like:</p>\n\n<p><img src=\"https://i.imgur.com/9F17rHd.jpg\" height=\"400\"></p>\n\n<p>Only what is included in the <code>Skin</code> I am using is glitched, as everything else (such as the game elements) looks just fine. </p>\n\n<p>So what could be the issue and how could I fix it?</p>\n"}, {"tags": ["kotlin", "wear-os", "androidx"], "owner": {"reputation": 92, "user_id": 2126974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpIP8.jpg?s=128&g=1", "display_name": "Dakroub_M", "link": "https://stackoverflow.com/users/2126974/dakroub-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565776475, "creation_date": 1565774374, "last_edit_date": 1565776475, "question_id": 57491747, "link": "https://stackoverflow.com/questions/57491747/androidx-wearable-package-not-found-missing", "title": "AndroidX Wearable Package not Found/Missing", "body": "<p>I am trying to implement a standalone Android wearable app using Kotlin and AndroidX.</p>\n\n<p>The app is running fine but logs show a crash at startup (Class not found).</p>\n\n<p>I have tried targeting older SDKs versions but nothing seems to resolve the issue.</p>\n\n<p>Any suggestion? </p>\n\n<pre><code>2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art: Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;: java.lang.NoClassDefFoundError: Failed resolution of: Landroid/view/View$OnUnhandledKeyEventListener;\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at int androidx.core.view.ViewCompat.getImportantForAutofill(android.view.View) (ViewCompat.java:730)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.recyclerview.widget.RecyclerView.initAutofill() (RecyclerView.java:748)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.recyclerview.widget.RecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int) (RecyclerView.java:675)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int, int) (WearableRecyclerView.java:77)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int) (WearableRecyclerView.java:72)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet) (WearableRecyclerView.java:68)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Constructor.newInstance0!(java.lang.Object[]) (Constructor.java:-2)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Constructor.newInstance(java.lang.Object[]) (Constructor.java:430)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createView(java.lang.String, java.lang.String, android.util.AttributeSet) (LayoutInflater.java:645)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:787)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet) (LayoutInflater.java:727)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.view.LayoutInflater.rInflate(org.xmlpull.v1.XmlPullParser, android.view.View, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:858)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.view.LayoutInflater.rInflateChildren(org.xmlpull.v1.XmlPullParser, android.view.View, android.util.AttributeSet, boolean) (LayoutInflater.java:821)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(org.xmlpull.v1.XmlPullParser, android.view.ViewGroup, boolean) (LayoutInflater.java:518)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(int, android.view.ViewGroup, boolean) (LayoutInflater.java:426)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(int, android.view.ViewGroup) (LayoutInflater.java:377)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.policy.PhoneWindow.setContentView(int) (PhoneWindow.java:412)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Activity.setContentView(int) (Activity.java:2414)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.ubanquity.xapp.wear.MainActivity.onCreate(android.os.Bundle) (MainActivity.kt:21)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Activity.performCreate(android.os.Bundle) (Activity.java:6682)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Instrumentation.callActivityOnCreate(android.app.Activity, android.os.Bundle) (Instrumentation.java:1118)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at android.app.Activity android.app.ActivityThread.performLaunchActivity(android.app.ActivityThread$ActivityClientRecord, android.content.Intent) (ActivityThread.java:2618)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.handleLaunchActivity(android.app.ActivityThread$ActivityClientRecord, android.content.Intent, java.lang.String) (ActivityThread.java:2726)\n2019-08-14 12:01:45.959 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.-wrap12(android.app.ActivityThread, android.app.ActivityThread$ActivityClientRecord, android.content.Intent, java.lang.String) (ActivityThread.java:-1)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread$H.handleMessage(android.os.Message) (ActivityThread.java:1477)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:102)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.os.Looper.loop() (Looper.java:154)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6119)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Method.invoke!(java.lang.Object, java.lang.Object[]) (Method.java:-2)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run() (ZygoteInit.java:886)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:776)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art: Caused by: java.lang.ClassNotFoundException: Didn't find class \"android.view.View$OnUnhandledKeyEventListener\" on path: DexPathList[[zip file \"/system/framework/com.google.android.wearable.jar\", zip file \"/data/app/com.ubanquity.xapp.wear-1/base.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_dependencies_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_0_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_1_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_2_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_3_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_4_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_5_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_6_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_7_apk.apk\", zip file \"/data/app/com.ubanquity.xapp.wear-1/split_lib_slice_8_apk.apk\", zip file \"/data/app/com.ub\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Class dalvik.system.BaseDexClassLoader.findClass(java.lang.String) (BaseDexClassLoader.java:56)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String, boolean) (ClassLoader.java:380)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String) (ClassLoader.java:312)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at int androidx.core.view.ViewCompat.getImportantForAutofill(android.view.View) (ViewCompat.java:730)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.recyclerview.widget.RecyclerView.initAutofill() (RecyclerView.java:748)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.recyclerview.widget.RecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int) (RecyclerView.java:675)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int, int) (WearableRecyclerView.java:77)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet, int) (WearableRecyclerView.java:72)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void androidx.wear.widget.WearableRecyclerView.&lt;init&gt;(android.content.Context, android.util.AttributeSet) (WearableRecyclerView.java:68)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Constructor.newInstance0!(java.lang.Object[]) (Constructor.java:-2)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Constructor.newInstance(java.lang.Object[]) (Constructor.java:430)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createView(java.lang.String, java.lang.String, android.util.AttributeSet) (LayoutInflater.java:645)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:787)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet) (LayoutInflater.java:727)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.view.LayoutInflater.rInflate(org.xmlpull.v1.XmlPullParser, android.view.View, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:858)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.view.LayoutInflater.rInflateChildren(org.xmlpull.v1.XmlPullParser, android.view.View, android.util.AttributeSet, boolean) (LayoutInflater.java:821)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(org.xmlpull.v1.XmlPullParser, android.view.ViewGroup, boolean) (LayoutInflater.java:518)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(int, android.view.ViewGroup, boolean) (LayoutInflater.java:426)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.view.View android.view.LayoutInflater.inflate(int, android.view.ViewGroup) (LayoutInflater.java:377)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.policy.PhoneWindow.setContentView(int) (PhoneWindow.java:412)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Activity.setContentView(int) (Activity.java:2414)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.ubanquity.xapp.wear.MainActivity.onCreate(android.os.Bundle) (MainActivity.kt:21)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Activity.performCreate(android.os.Bundle) (Activity.java:6682)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.Instrumentation.callActivityOnCreate(android.app.Activity, android.os.Bundle) (Instrumentation.java:1118)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at android.app.Activity android.app.ActivityThread.performLaunchActivity(android.app.ActivityThread$ActivityClientRecord, android.content.Intent) (ActivityThread.java:2618)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.handleLaunchActivity(android.app.ActivityThread$ActivityClientRecord, android.content.Intent, java.lang.String) (ActivityThread.java:2726)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.-wrap12(android.app.ActivityThread, android.app.ActivityThread$ActivityClientRecord, android.content.Intent, java.lang.String) (ActivityThread.java:-1)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread$H.handleMessage(android.os.Message) (ActivityThread.java:1477)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.os.Handler.dispatchMessage(android.os.Message) (Handler.java:102)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.os.Looper.loop() (Looper.java:154)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void android.app.ActivityThread.main(java.lang.String[]) (ActivityThread.java:6119)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at java.lang.Object java.lang.reflect.Method.invoke!(java.lang.Object, java.lang.Object[]) (Method.java:-2)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run() (ZygoteInit.java:886)\n2019-08-14 12:01:45.960 22258-22258/com.ubanquity.xapp.wear I/art:     at void com.android.internal.os.ZygoteInit.main(java.lang.String[]) (ZygoteInit.java:776)\n</code></pre>\n\n<p>My layout file is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.wear.widget.BoxInsetLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:deviceIds=\"wear\"\n        tools:context=\".MainActivity\"&gt;\n\n\n    &lt;androidx.wear.widget.WearableRecyclerView\n            android:id=\"@+id/wearableRecyclerView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:scrollbars=\"vertical\" /&gt;\n\n    &lt;ProgressBar\n            android:id=\"@+id/progressBar\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n\n&lt;/androidx.wear.widget.BoxInsetLayout&gt;\n</code></pre>\n\n<p>And this is my Gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 29\n    defaultConfig {\n        applicationId \"com.ubanquity.xapp.wear\"\n        minSdkVersion 25\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.google.android.gms:play-services-wearable:17.0.0'\n    implementation 'androidx.percentlayout:percentlayout:1.0.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.0.0'\n    implementation 'androidx.wear:wear:1.0.0'\n    implementation 'com.google.android.support:wearable:2.4.0'\n    compileOnly 'com.google.android.wearable:wearable:2.4.0'\n\n    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.amitshekhar.android:android-networking:1.0.2'\n}\n\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11926369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c181525e65b9c98820a87dd0b5f46dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Alex208", "link": "https://stackoverflow.com/users/11926369/alex208"}, "edited": false, "score": 0, "creation_date": 1565776001, "post_id": 57491938, "comment_id": 101454213, "body": "Thank you that works fine :) But how is it when I have a read method that returns a value... For example returnTimeStamp I do like this val timestamp = executeAllOpsOnIOThread { sharedPrefs.getTime() } return timestamp but it says need to return string but found Job"}, {"owner": {"reputation": 3, "user_id": 11926369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c181525e65b9c98820a87dd0b5f46dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Alex208", "link": "https://stackoverflow.com/users/11926369/alex208"}, "edited": false, "score": 0, "creation_date": 1565777303, "post_id": 57491938, "comment_id": 101454894, "body": "Cool!Thanks a lot"}, {"owner": {"reputation": 3, "user_id": 11926369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c181525e65b9c98820a87dd0b5f46dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Alex208", "link": "https://stackoverflow.com/users/11926369/alex208"}, "edited": false, "score": 0, "creation_date": 1565780581, "post_id": 57491938, "comment_id": 101456554, "body": "Jus a last question, sorry. With this Deferred&lt;String&gt;, if I use await() to get the actual String, it says I can only use await() from suspend function. How could I do this?"}, {"owner": {"reputation": 3, "user_id": 11926369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c181525e65b9c98820a87dd0b5f46dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Alex208", "link": "https://stackoverflow.com/users/11926369/alex208"}, "edited": false, "score": 0, "creation_date": 1565781196, "post_id": 57491938, "comment_id": 101456830, "body": "Sorry I found it myself :)"}], "tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": true, "score": 1, "last_activity_date": 1565776671, "last_edit_date": 1565776671, "creation_date": 1565774980, "answer_id": 57491938, "question_id": 57491405, "link": "https://stackoverflow.com/questions/57491405/single-method-to-launch-a-coroutine/57491938#57491938", "title": "Single method to launch a coroutine", "body": "<p>Hmm.. Maybe I misunderstand you but it seems you can just pass a block of code as lambda function like this:</p>\n\n<pre><code>class StorageRepository(\n    private val coroutineDispatcher: CoroutineContext = Dispatchers.Main\n) : CoroutineScope {\n\n    private val job = Job()\n\n    override val coroutineContext: CoroutineContext\n        get() = job + coroutineDispatcher\n\n    override fun storeUserDetails(userDetails: UserDetails) = executeAllOpsOnIOThread {\n        roomDB.store(userDetails)\n    }\n\n    override fun storeTimeStamp(timeStamp: String) = executeAllOpsOnIOThread {\n        sharedPrefs.store(timeStamp)\n    }\n\n    private fun executeAllOpsOnIOThread(block: () -&gt; Unit) = launch {\n        withContext(Dispatchers.IO) {\n            block()\n        }\n    }\n\n    //async get\n    fun getTimestamp(): Deferred&lt;String&gt; = getOnIOThread { sharedPrefs.getTime() }\n\n    private fun &lt;T&gt; getOnIOThread(block: () -&gt; T):Deferred&lt;T&gt; = async {\n        withContext(Dispatchers.IO) {\n            block()\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11926369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c181525e65b9c98820a87dd0b5f46dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Alex208", "link": "https://stackoverflow.com/users/11926369/alex208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57491938, "answer_count": 1, "score": 0, "last_activity_date": 1565776671, "creation_date": 1565773138, "question_id": 57491405, "link": "https://stackoverflow.com/questions/57491405/single-method-to-launch-a-coroutine", "title": "Single method to launch a coroutine", "body": "<p>I have a StorageRepository that talks with RoomDB and also shared prefs. I want this communication to happen through a single method on a IO thread. I have done this until now - </p>\n\n<pre><code>class StorageRepository(private val coroutineDispatcher: CoroutineContext = Dispatchers.Main\n) : CoroutineScope {\n\n    private val job = Job()\n\n    override val coroutineContext: CoroutineContext\n        get() = job + coroutineDispatcher\n\n    override fun storeUserDetails(userDetails: UserDetails) {\n        roomDB.store(userDetails)\n    }\n\n    override fun storeTimeStamp(timeStamp: String) {\n        sharedPrefs.store(timeStamp)\n    }\n\n    private fun executeAllOpsOnIOThread() = launch {\n        withContext(Dispatchers.IO) {\n            //Any DB write, read operations to be done here\n        }\n    }\n}\n</code></pre>\n\n<p>My question is how can I pass <code>roomDB.store(userDetails)</code> and <code>sharedPrefs.store(timeStamp)</code> to <code>executeAllOpsOnIOThread()</code> so that all DB communication happens on IO thread?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "interceptor", "okhttp3"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5297709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a16e3179286f642716d245ed1eb3aa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5297709/daniel"}, "is_accepted": false, "score": -1, "last_activity_date": 1565774436, "creation_date": 1565774436, "answer_id": 57491773, "question_id": 57490892, "link": "https://stackoverflow.com/questions/57490892/is-there-a-possibility-to-exclude-certain-service-calls-for-http-logging/57491773#57491773", "title": "Is there a possibility to exclude certain service calls for http logging?", "body": "<p>You can use two instances of OkHttpClient, one with and one without the interceptor:</p>\n\n<pre><code>OkHttpClient okHttpClientWithLogging = new OkHttpClient.Builder()\n  .addInterceptor(logging)\n  .build(); \n\nOkHttpClient okHttpClientWithoutLogging = new OkHttpClient.Builder()\n  .build();\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 7434126, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4_1QvXxIsg/AAAAAAAAAAI/AAAAAAAAAAw/kuBSxJfT-LE/photo.jpg?sz=128", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/7434126/rishabh-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1565777292, "creation_date": 1565777292, "answer_id": 57492609, "question_id": 57490892, "link": "https://stackoverflow.com/questions/57490892/is-there-a-possibility-to-exclude-certain-service-calls-for-http-logging/57492609#57492609", "title": "Is there a possibility to exclude certain service calls for http logging?", "body": "<p>Interceptors are meant to be hooked with your <strong>each http calls</strong> so that you can observe what\u2019s going up and what\u2019s coming down.</p>\n\n<p><strong>But to exempt fewer API calls from intercept, you can create 2 different retrofit client, one with OkHttpClient and other without any client.</strong></p>\n\n<p>So you can request your Api with regular Retrofit client which you don't want to intercept, for rest Apis, use OKHTTP client with logging intercept.   </p>\n"}], "owner": {"reputation": 195, "user_id": 6783049, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af4049fcbda1409c130cd230ed168cff?s=128&d=identicon&r=PG&f=1", "display_name": "BestPractice2Go", "link": "https://stackoverflow.com/users/6783049/bestpractice2go"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1565779861, "creation_date": 1565771102, "last_edit_date": 1565779861, "question_id": 57490892, "link": "https://stackoverflow.com/questions/57490892/is-there-a-possibility-to-exclude-certain-service-calls-for-http-logging", "title": "Is there a possibility to exclude certain service calls for http logging?", "body": "<p>In context of <a href=\"https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor\" rel=\"nofollow noreferrer\">https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor</a> is there a possibility to exclude some service calls?\nIn my app are 2-3 HTTP Calls, where I dont want, that the logging-interceptor logs it.</p>\n\n<p>Is there a possibility to override the intercept method in the HttpLoggingInterceptor class? Is there a possibility to write an annotation proccesor, which exclude/ignore certain service calls from logging?</p>\n"}, {"tags": ["android", "kotlin", "navigation-architecture"], "comments": [{"owner": {"reputation": 109, "user_id": 9229521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3060ec8a11cd5054bed11ffae98c26b?s=128&d=identicon&r=PG&f=1", "display_name": "Kalpesh Kulye", "link": "https://stackoverflow.com/users/9229521/kalpesh-kulye"}, "edited": false, "score": 0, "creation_date": 1565770939, "post_id": 57490553, "comment_id": 101451748, "body": "there is strong possibility that after rotating screen your bundle value is getting erase or may be null"}, {"owner": {"reputation": 1762, "user_id": 7592063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z5q5YjMsdWY/AAAAAAAAAAI/AAAAAAAABlQ/Mhax4OfAQ3E/photo.jpg?sz=128", "display_name": "Rajnish suryavanshi", "link": "https://stackoverflow.com/users/7592063/rajnish-suryavanshi"}, "edited": false, "score": 0, "creation_date": 1565771264, "post_id": 57490553, "comment_id": 101451907, "body": "<a href=\"https://stackoverflow.com/q/12672972/7592063\">stackoverflow.com/q/12672972/7592063</a>. Go through this Q&amp;A. Instead of using Fragmentmanager use findNavController for navigation. Read this document <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started#navigate\" rel=\"nofollow noreferrer\">developer.android.com/guide/navigation/&hellip;</a>"}], "owner": {"reputation": 1475, "user_id": 5693082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faaab1b925d46aed09b42526914ca38?s=128&d=identicon&r=PG&f=1", "display_name": "dotGitignore", "link": "https://stackoverflow.com/users/5693082/dotgitignore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1780, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565769694, "creation_date": 1565769694, "question_id": 57490553, "link": "https://stackoverflow.com/questions/57490553/navhostfragment-error-inflating-class-fragment-when-screen-is-rotated", "title": "NavHostFragment error inflating class fragment when screen is rotated", "body": "<p>I'm creating an application where it uses the Navigation Architecture, but my navigation has no default host, and can be set based on the selected destination by the user.</p>\n\n<p>So this is the setup of my NavHostFragment</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var finalHost: NavHostFragment? = null\n        when (bundle) {\n            REQUEST_FIRST -&gt; {\n                finalHost = NavHostFragment.create(R.navigation.navigation_first)\n            }\n            REQUEST_SECOND -&gt; {\n                finalHost = NavHostFragment.create(R.navigation.navigation_second)\n            }\n            REQUEST_THIRD -&gt; {\n                finalHost = NavHostFragment.create(R.navigation.navigation_third)\n            }\n        }\n        supportFragmentManager.beginTransaction()\n            .replace(R.id.fragmentMain, finalHost!!)\n            .setPrimaryNavigationFragment(finalHost)\n            .commit()\n}\n</code></pre>\n\n<p>and this is my main activity layout.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/black\"&gt;\n    &lt;!-- some stuff --&gt;\n    &lt;fragment\n            android:id=\"@+id/fragmentMain\"\n            android:name=\"androidx.navigation.fragment.NavHostFragment\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>So, my <code>MainActivity</code> is loading correctly but <strong>when I start to rotate the screen of the device, It encounters some errors</strong>.</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo: android.view.InflateException: Binary XML file line #10: Binary XML file line #10: Error inflating class fragment\n</code></pre>\n\n<p>the said error is pointing on my <code>setContentView(R.layout.activity_main)</code> and the NavHostFragment <code>&lt;fragment&gt;</code> in layout.</p>\n\n<p>any help is appreciated, Thanks!</p>\n"}, {"tags": ["android", "kotlin", "httprequest", "retrofit", "image-uploading"], "comments": [{"owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "edited": false, "score": 1, "creation_date": 1565769261, "post_id": 57490228, "comment_id": 101450911, "body": "The easiest way to use retrofit library, and it multipart post request.  <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">square.github.io/retrofit</a>"}, {"owner": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "reply_to_user": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "edited": false, "score": 0, "creation_date": 1568265717, "post_id": 57490228, "comment_id": 102220904, "body": "I had tried retrofit but the app get crashed every time when I clicked the upload button."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1568458089, "post_id": 57490754, "comment_id": 102285698, "body": "I had mentioned that I am getting many codes in java but not in kotlin, again you have provided a code of java. I am unable to get any kind of help from this. :( As I am not good enough to convert the codes."}, {"owner": {"reputation": 617, "user_id": 4938936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef64686b3112ea0e400b2321414c4c43?s=128&d=identicon&r=PG&f=1", "display_name": "No Body", "link": "https://stackoverflow.com/users/4938936/no-body"}, "reply_to_user": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1568458378, "post_id": 57490754, "comment_id": 102285763, "body": "All you have to do is copy and paste the codes. Android Studio converters them for you. \ud83d\ude12"}, {"owner": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1568612058, "post_id": 57490754, "comment_id": 102314031, "body": "can you share source code of this project you have developed?"}, {"owner": {"reputation": 617, "user_id": 4938936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef64686b3112ea0e400b2321414c4c43?s=128&d=identicon&r=PG&f=1", "display_name": "No Body", "link": "https://stackoverflow.com/users/4938936/no-body"}, "reply_to_user": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1568612376, "post_id": 57490754, "comment_id": 102314115, "body": "I&#39;m sorry. This project is owned by the company which I work for and I am not allowed to share the project."}, {"owner": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "edited": false, "score": 0, "creation_date": 1568700410, "post_id": 57490754, "comment_id": 102346757, "body": "Ok. Thank you. :-)"}], "tags": [], "owner": {"reputation": 617, "user_id": 4938936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef64686b3112ea0e400b2321414c4c43?s=128&d=identicon&r=PG&f=1", "display_name": "No Body", "link": "https://stackoverflow.com/users/4938936/no-body"}, "is_accepted": false, "score": 0, "last_activity_date": 1565770439, "creation_date": 1565770439, "answer_id": 57490754, "question_id": 57490228, "link": "https://stackoverflow.com/questions/57490228/how-to-upload-an-image-to-a-server-using-http-request-in-kotlin/57490754#57490754", "title": "How to upload an image to a server using http request in kotlin?", "body": "<p>You can use these functions to capture an image by the camera:</p>\n\n<pre><code>public static Uri getTakenPictureUri(Context mContext, Intent data) {\n    Uri selectedImage = data.getData();\n    String[] filePathColumn = {MediaStore.Images.Media.DATA};\n\n    Cursor cursor = mContext.getContentResolver().query(selectedImage,\n            filePathColumn, null, null, null);\n    cursor.moveToFirst();\n\n    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);\n    String picturePath = cursor.getString(columnIndex);\n    cursor.close();\n\n    picturePath = \"file://\" + picturePath;\n    LogHelper.trace(\"Selected file uri:\" + picturePath);\n\n    return Uri.parse(picturePath);\n}\n\npublic static File createImageFile() throws IOException {\n    String timeStamp = new SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(new Date());\n    String imageFileName = \"JPEG_\" + timeStamp + \"_\";\n    File storageDir = MyPharmacy.getmInstance().getExternalCacheDir();\n    LogHelper.trace(\"createImageFile:\" + storageDir.getAbsolutePath());\n    File image = File.createTempFile(\n            imageFileName,\n            \".jpg\",\n            storageDir\n    );\n    return image;\n}\n\npublic static File openCamera(Activity mActivity, int requestCode) {\n    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n    try {\n        File photoFile = createImageFile();\n        if (photoFile != null) {\n            Uri photoURI = FileProvider.getUriForFile(MyPharmacy.getmInstance(), BuildConfig.APPLICATION_ID + \".provider\", photoFile);\n            camera.putExtra(MediaStore.EXTRA_OUTPUT,\n                    photoURI);\n            if (camera.resolveActivity(mActivity.getPackageManager()) != null) {\n                mActivity.startActivityForResult(camera, requestCode);\n                return photoFile;\n            }\n        }\n    } catch (IOException ex) {\n    }\n    return null;\n}\n\npublic static File openCamera(Fragment fragment, int requestCode) {\n    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n    try {\n        File photoFile = createImageFile();\n        if (photoFile != null) {\n            Uri photoURI = FileProvider.getUriForFile(MyPharmacy.getmInstance(), BuildConfig.APPLICATION_ID + \".provider\", photoFile);\n            camera.putExtra(MediaStore.EXTRA_OUTPUT,\n                    photoURI);\n            if (camera.resolveActivity(fragment.getActivity().getPackageManager()) != null) {\n                fragment.startActivityForResult(camera, requestCode);\n                return photoFile;\n            }\n        }\n    } catch (IOException ex) {\n    }\n    return null;\n}\n</code></pre>\n\n<p>Then use below codes to upload it by retrofit</p>\n\n<pre><code>public static void uploadImage(final String filePath,\n                                           final String token,\n                                           final APIResponseCallback&lt;UploadResponse&gt; cb) {\n    if (filePath != null &amp;&amp; !filePath.isEmpty()) {\n        final File file = new File(filePath);\n        if (file.exists()) {\n\n            Glide.with(App.getmInstance().getContext()).load(file).asBitmap().override(700, 700).into(new SimpleTarget&lt;Bitmap&gt;() {\n                @Override\n                public void onResourceReady(Bitmap bitmap, GlideAnimation&lt;? super Bitmap&gt; glideAnimation) {\n                    OutputStream os = null;\n                    try {\n                        String realPath = StorageHelper.getRealPathFromUri(App.getmInstance().getContext(), Uri.fromFile(file));\n                        os = new BufferedOutputStream(new FileOutputStream(file));\n                        bitmap.compress(Bitmap.CompressFormat.JPEG, 80, os);\n                        os.flush();\n                        os.close();\n                    } catch (java.io.IOException e) {\n                        e.printStackTrace();\n                    }\n\n\n                    if (file != null) {\n                        // creates RequestBody instance from file\n                        RequestBody requestFile = RequestBody.create(MediaType.parse(\"image/*\"), file);\n                        // MultipartBody.Part is used to send also the actual filename\n                        MultipartBody.Part body = MultipartBody.Part.createFormData(\"file\", file.getName(), requestFile);\n                        // adds another part within the multipart request\n                        String descriptionString = \"Image\";\n                        RequestBody description = RequestBody.create(okhttp3.MultipartBody.FORM, descriptionString);\n                        // executes the request\n                        ServiceGenerator.getAPIServices().uploadImage(body, description, token).enqueue(new Callback&lt;UploadResponse&gt;() {\n                            @Override\n                            public void onResponse(Call&lt;UploadResponse&gt; call, Response&lt;UploadResponse&gt; response) {\n                                if (response.isSuccessful()) {\n                                    cb.onSuccess(response.body());\n                                } else {\n                                    checkError(response, token);\n                                }\n                            }\n\n                            @Override\n                            public void onFailure(Call&lt;UploadResponse&gt; call, Throwable t) {\n                                cb.onError(t);\n                            }\n                        });\n                    }\n                }\n            });\n        }\n    }\n}\n</code></pre>\n\n<p>And API interface is:</p>\n\n<pre><code>@Multipart\n@POST(\"Uploads/image/upload\")\nCall&lt;UploadResponse&gt; uploadImage(@Part MultipartBody.Part file,\n                                             @Part(\"description\") RequestBody description,\n                                             @Query(\"access_token\") String token);\n</code></pre>\n\n<p>Also, you can convert these codes to the kotlin equivalent.</p>\n"}, {"tags": [], "owner": {"reputation": 3385, "user_id": 5701085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbsOs.jpg?s=128&g=1", "display_name": "Asad Ali Choudhry", "link": "https://stackoverflow.com/users/5701085/asad-ali-choudhry"}, "is_accepted": false, "score": 0, "last_activity_date": 1594045809, "creation_date": 1594045809, "answer_id": 62758250, "question_id": 57490228, "link": "https://stackoverflow.com/questions/57490228/how-to-upload-an-image-to-a-server-using-http-request-in-kotlin/62758250#62758250", "title": "How to upload an image to a server using http request in kotlin?", "body": "<p>As this is question is still open. We can use OKHTTP library which is very easy to use and we have to write very less code. Here I have written a detailed article on the topic</p>\n<p><a href=\"https://handyopinion.com/upload-file-to-server-in-android-kotlin/\" rel=\"nofollow noreferrer\">Upload Image or File to Server in Android Kotlin</a></p>\n<p>I am not going to copy the same code again, I have written a UploadUtility class. Just copy it in your project from the above link and it will do the rest.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 11334374, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sA6sMm1ejAU/AAAAAAAAAAI/AAAAAAAAAAc/J2Hvlr7fvHA/photo.jpg?sz=128", "display_name": "Lelin Mahmud", "link": "https://stackoverflow.com/users/11334374/lelin-mahmud"}, "is_accepted": false, "score": 0, "last_activity_date": 1603574159, "creation_date": 1603574159, "answer_id": 64518071, "question_id": 57490228, "link": "https://stackoverflow.com/questions/57490228/how-to-upload-an-image-to-a-server-using-http-request-in-kotlin/64518071#64518071", "title": "How to upload an image to a server using http request in kotlin?", "body": "<p>Api Interface</p>\n<pre><code>@Multipart\n@POST(&quot;your_url&quot;)\nsuspend fun uploadImage(\n    @Part file:MultipartBody.Part\n): Response&lt;String&gt;\n</code></pre>\n<p>Kotlin code</p>\n<pre><code>        val file: File = ImagePicker.getFile(data)!!\n\n\n        val requestFile =RequestBody.create(&quot;multipart/form-data&quot;.toMediaTypeOrNull(),file)\n        val requestFile=RequestBody.create(MediaType.parse(&quot;image/*&quot;),file)\n        val body = MultipartBody.Part.createFormData(&quot;profile_picture&quot;, file.name, requestFile)\n        uploadImage(body)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9929698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-shpcUR7bpaw/AAAAAAAAAAI/AAAAAAAAFbY/drfEXg5psow/photo.jpg?sz=128", "display_name": "Chandranshu Raj Singh Rathore", "link": "https://stackoverflow.com/users/9929698/chandranshu-raj-singh-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6086, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1603574159, "creation_date": 1565768584, "last_edit_date": 1565777108, "question_id": 57490228, "link": "https://stackoverflow.com/questions/57490228/how-to-upload-an-image-to-a-server-using-http-request-in-kotlin", "title": "How to upload an image to a server using http request in kotlin?", "body": "<p>I have written code to upload images to the server using kotlin, that is, the user takes a picture through the camera then displays the image in the imageView when the user clicks the send button, I want the image from ImageView to be sent to the server, but I don't know how to change the image from ImageView be a file that can be sent to the server.</p>\n\n<p>I have designed code to capture image and set the image in image view to preview it but not getting idea to upload it to the server using http request.</p>\n\n<p>for opening camera and setting image into imageview:</p>\n\n<pre><code>private fun openCamera(){\n\n    val values = ContentValues()\n\n    values.put(MediaStore.Images.Media.TITLE, \"New Picture\")\n\n    values.put(MediaStore.Images.Media.DESCRIPTION, \"From Camera\")\n\n    private fun openCamera() {\n    val values = ContentValues()\n    values.put(MediaStore.Images.Media.TITLE, \"New Picture\")\n    values.put(MediaStore.Images.Media.DESCRIPTION, \"From Camera\")\n    image_uri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)\n\n    val cameraIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, image_uri)\n    startActivityForResult(cameraIntent, IMAGE_CAPTURE_CODE)\n}\n\noverride fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray) {\n\n    when (requestCode) {\n        PERMISSION_CODE_CAM -&gt; {\n            if (grantResults.size!! &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                openCamera()\n            } else {\n                Toast.makeText(this, \"Permission Denied\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n}\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n\n    if (resultCode == Activity.RESULT_OK &amp;&amp; resultCode == IMAGE_CAPTURE_CODE) {\n        imageView.setImageURI(image_uri)\n    }\n\n}\n</code></pre>\n\n<p>I want to upload image to server using http request, I am getting many codes in java but not in kotlin. I am not getting any idea to upload in kotlin.</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 2, "creation_date": 1565769120, "post_id": 57490107, "comment_id": 101450855, "body": "I think the reason for this is that Kotlin does not support intersection types, and thus, <code>arg</code> cannot be smart casted to <code>ClassA &amp; ClassB</code>."}, {"owner": {"reputation": 855, "user_id": 9437681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8240db0a4cfda69e8b4826a20326689b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Artsimovich", "link": "https://stackoverflow.com/users/9437681/alexei-artsimovich"}, "reply_to_user": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "edited": false, "score": 0, "creation_date": 1565769837, "post_id": 57490107, "comment_id": 101451194, "body": "@AndreiTanana ClassA is a class, and ClassB is an interface"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565867347, "post_id": 57490107, "comment_id": 101485166, "body": "I like the idea of an anonymous type, defined as the combination of multiple types. By definition, a concrete subtype of it must exist if the ifs return true, and the API is simply the union of participating types&#39; APIs (completely intuitive)."}], "answers": [{"comments": [{"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565824393, "post_id": 57490897, "comment_id": 101475031, "body": "&quot;Any is inferred&quot; - Why would Any be inferred? It&#39;s neither a ClassA nor a ClassB. We want a class that is both! Wouldn&#39;t <code>Nothing</code> be a more sensible inference?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 1, "creation_date": 1565859062, "post_id": 57490897, "comment_id": 101482177, "body": "That&#39;s a bit of a separate question, but I&#39;ve updated my answer with the explanation about Kotlin type system."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565867081, "post_id": 57490897, "comment_id": 101485074, "body": "Intuitively this makes sense if we start at Any, and think of the type checks as narrowing in on the type, i.e. what&#39;s our most specific type for C, given we know it&#39;s an A and it&#39;s a B? What&#39;s confusing is that this will never achieve what we actually want (unless A is a subtype of B or vice-versa), since the lowest common ancestor of 2 seperate types extends neither of them. The reason I asked about Nothing is because we really want a type that does extend both; Nothing extends everything (though not very usefully). For 0-1 classes + many interfaces we might find another common descendant."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565870088, "post_id": 57490897, "comment_id": 101486104, "body": "<code>Nothing</code> doesn&#39;t extend anything in Kotlin."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565870799, "post_id": 57490897, "comment_id": 101486402, "body": "Ah ok; <code>Nothing</code> is the Scala type for what I meant. Looks like Kotlin doesn&#39;t have an equivalent. Anyway, thank you for explaining smart casts."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 6, "last_activity_date": 1565859020, "last_edit_date": 1565859020, "creation_date": 1565771115, "answer_id": 57490897, "question_id": 57490107, "link": "https://stackoverflow.com/questions/57490107/kotlin-problems-with-where-generic-constraint/57490897#57490897", "title": "Kotlin - problems with &quot;where&quot; generic constraint", "body": "<p>Smart casts work, just not the way you expect them.<br>\nTo help you understand, your check:</p>\n\n<pre><code>if (arg is ClassA &amp;&amp; arg is ClassB) {\n    doSomething(arg)\n}\n</code></pre>\n\n<p>Is translated into:</p>\n\n<pre><code>if (arg is ClassA) {\n    if (arg is ClassB) {\n        doSomething(arg) // Only what's common between ClassA and ClassB is there\n    }\n}\n</code></pre>\n\n<p>Now, since there's nothing common between <code>ClassA</code> and <code>ClassB</code>, <code>Any</code> is inferred. Which is not what you expect.</p>\n\n<p>You can force cast, of course:</p>\n\n<pre><code>if (arg is ClassA &amp;&amp; arg is ClassB) {\n    doSomething(arg as ClassC)\n}\n</code></pre>\n\n<p>But that also may not work:</p>\n\n<pre><code>class ClassC: ClassA(), ClassB \n\nclass ClassD: ClassA(), ClassB // This will cause ClassCast exception\n</code></pre>\n\n<p>In the end, using this type of constraint makes sense only in cases such as this:</p>\n\n<pre><code>open class ClassC: ClassA(), ClassB\n\nclass ClassD: ClassC()\n\nclass ClassE: ClassC()\n</code></pre>\n\n<p>Now, question arouse why <code>Any</code> is inferred. Shouldn't it be <code>Nothing</code>, since there's nothing in common?</p>\n\n<p>Here we need to remember how Kotlin type system works.</p>\n\n<p>If you write something like:</p>\n\n<pre><code>open class ClassA\n\nopen class ClassB\n</code></pre>\n\n<p>What you actually mean is the following:</p>\n\n<pre><code>open class ClassA : Any\n\nopen class ClassB : Any\n</code></pre>\n\n<p>And that's the common ancestor we infer.</p>\n\n<p><code>Nothing</code>, on the other hand, is a final class at the bottom of the class hierarchy. So not a single class could inherit from it.</p>\n"}], "owner": {"reputation": 855, "user_id": 9437681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8240db0a4cfda69e8b4826a20326689b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Artsimovich", "link": "https://stackoverflow.com/users/9437681/alexei-artsimovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1565859020, "creation_date": 1565768119, "last_edit_date": 1565771189, "question_id": 57490107, "link": "https://stackoverflow.com/questions/57490107/kotlin-problems-with-where-generic-constraint", "title": "Kotlin - problems with &quot;where&quot; generic constraint", "body": "<p>there is <code>ClassA</code> and <code>ClassB</code>, and also there is a function like shown below:</p>\n\n<pre><code>fun &lt;T&gt; doSomething(arg: T) where T: ClassA, T: ClassB {  }\n</code></pre>\n\n<p>It compiles perfect and works as expected when I call this function passing as the argument an object of a class ClassC:</p>\n\n<pre><code>class ClassC: ClassA(), ClassB\n</code></pre>\n\n<p>But when I have an object of type <code>Any</code> and do something like this:</p>\n\n<pre><code>if (arg is ClassA &amp;&amp; arg is ClassB) {\n    doSomething(arg)\n}\n</code></pre>\n\n<p>The compiler doesn't compile this and says</p>\n\n<pre><code>None of the following functions can be called with the arguments supplied\n</code></pre>\n\n<p>I expected the smart-cast should do the work but it didn't. Please tell me what's wrong. Thanks in advance.</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1565768423, "post_id": 57490038, "comment_id": 101450522, "body": "Type should be a String representing a JSON so you can use LIKE to search inside that String."}, {"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "reply_to_user": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1565768749, "post_id": 57490038, "comment_id": 101450674, "body": "I have that in the <code>pokemon</code> table and the <code>type</code> column : <code>{&quot;id&quot;:0,&quot;element&quot;:&quot;fire&quot;}</code>"}, {"owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "reply_to_user": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1565768799, "post_id": 57490038, "comment_id": 101450697, "body": "You think I can access the <code>type.id</code> from the query? I&#39;m not very comfortable with SQLite"}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 1, "creation_date": 1565768923, "post_id": 57490038, "comment_id": 101450759, "body": "You can search on that type column like this <code>@Query(&quot;SELECT * FROM pokemons WHERE type LIKE &#39;%&quot;id&quot;:&#39; || :typeId || &#39;,%&#39;&quot;)</code> this will give you the pokemon row with the type column deserialized into the object property."}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "edited": false, "score": 0, "creation_date": 1565770286, "post_id": 57490038, "comment_id": 101451416, "body": "Will add it as an answer just in case someone needs it."}], "answers": [{"tags": [], "owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "is_accepted": true, "score": 0, "last_activity_date": 1565770290, "creation_date": 1565770290, "answer_id": 57490710, "question_id": 57490038, "link": "https://stackoverflow.com/questions/57490038/how-to-access-a-complex-object-from-a-dao-with-room/57490710#57490710", "title": "How to access a complex object from a Dao with Room?", "body": "<p>Since you are serializing your <code>Type</code> to a <strong>json</strong> formated String, you should use <code>LIKE</code> to search inside that string on you query:</p>\n\n<pre><code>@Query(\"SELECT * FROM pokemons WHERE type LIKE '%\"id\":' || :typeId || ',%'\")\nfun getPokemons(typeId: Int): LiveData&lt;List&lt;Pokemon&gt;&gt;\n</code></pre>\n\n<p>This will return the requested row with the Type column deserialized again.</p>\n"}], "owner": {"reputation": 300, "user_id": 7528285, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212123161171300/picture?type=large", "display_name": "diAz", "link": "https://stackoverflow.com/users/7528285/diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 57490710, "answer_count": 1, "score": 0, "last_activity_date": 1565770290, "creation_date": 1565767846, "last_edit_date": 1565768297, "question_id": 57490038, "link": "https://stackoverflow.com/questions/57490038/how-to-access-a-complex-object-from-a-dao-with-room", "title": "How to access a complex object from a Dao with Room?", "body": "<p>Let's take an example to illustrate my problem.</p>\n\n<p>my Entity : </p>\n\n<pre><code>@Entity(tableName = \"pokemon_table\")\ndata class Pokemon(@PrimaryKey\n        @ColumnInfo(name = \"id\")\n        val id: Int? = 0,\n        @ColumnInfo(name = \"type\")\n        val type: Type? = null)\n</code></pre>\n\n<p>According to Room, if i want to insert a complexe Object like <code>Type</code>, i have to use a TypeConverter : </p>\n\n<pre><code>    @TypeConverter\n    fun fromType(typeContent: Type?): String? {\n        if (typeContent== null) {\n            return null\n        }\n        val gson = Gson()\n        val type = object : TypeToken&lt;Type&gt;() {\n\n        }.type\n        return gson.toJson(typeContent, type)\n    }\n\n    @TypeConverter\n    fun toType(typeStr: String?): Type? {\n        if (typeStr == null) {\n            return null\n        }\n        val gson = Gson()\n        val type = object : TypeToken&lt;Type&gt;() {\n\n        }.type\n        return gson.fromJson(typeStr, type)\n    }\n</code></pre>\n\n<p>How can I access to a property of <code>Type</code> from the <code>PokemonDao</code> ?</p>\n\n<p>I have tried this but i can't use <code>type.id</code> in the Query because <code>type</code> is a json : </p>\n\n<pre><code>@Query(\"SELECT * FROM pokemon_table WHERE type.id = :typeId\")\nfun getPokemons(typeId: Int): LiveData&lt;List&lt;Pokemon&gt;&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "64-bit"], "comments": [{"owner": {"reputation": 118, "user_id": 1275066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaba01023bd842fb3c254ca482d4f6b?s=128&d=identicon&r=PG", "display_name": "abotrix", "link": "https://stackoverflow.com/users/1275066/abotrix"}, "edited": false, "score": 0, "creation_date": 1573237783, "post_id": 57490022, "comment_id": 103829956, "body": "I need to know this too..."}], "owner": {"reputation": 551, "user_id": 5437001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/tyiBO.png?s=128&g=1", "display_name": "Laurens V", "link": "https://stackoverflow.com/users/5437001/laurens-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1565767784, "creation_date": 1565767784, "question_id": 57490022, "link": "https://stackoverflow.com/questions/57490022/android-app-migrating-to-64-bit-missing-64-bit-folders", "title": "Android App migrating to 64 bit missing 64-bit folders", "body": "<p>Since 1 august your app has to be 64 bit supported.\nNow I have a problem because our app isn't 64 bit supported.</p>\n\n<p>I follow the steps of the Android Documentation (<a href=\"https://developer.android.com/distribute/best-practices/develop/64-bit\" rel=\"nofollow noreferrer\">https://developer.android.com/distribute/best-practices/develop/64-bit</a>) about 64 bit and when I analyze my apk I see this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pMn5R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pMn5R.png\" alt=\"enter image description here\"></a></p>\n\n<p>So I don't see the 64 bit folders \"lib/arm64-v8a\" en \"lib/x86_64\".\nI added this line in my gradle defaultConfig <code>ndk.abiFilters 'armeabi-v7a','arm64-v8a','x86','x86_64'</code></p>\n\n<p>My minSdkVersion is <strong>16</strong>\nMy targetSdkVersion is <strong>28</strong>\nMy compileSdkVersion is <strong>28</strong></p>\n\n<p>Hopefully someone can help me what to do... I want to upload a update of my app in de store soon.</p>\n"}, {"tags": ["android", "kotlin", "okhttp3"], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 861744, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f4427cb9d0fda8262b711a8fd81ed97?s=128&d=identicon&r=PG", "display_name": "Benjamin St&#252;rmer", "link": "https://stackoverflow.com/users/861744/benjamin-st%c3%bcrmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1565767173, "creation_date": 1565767173, "answer_id": 57489890, "question_id": 57489889, "link": "https://stackoverflow.com/questions/57489889/i-got-a-bootstrapmethoderror-after-upgrading-okhttp/57489890#57489890", "title": "I got a BootstrapMethodError after upgrading okhttp", "body": "<p>Set your source compatibility to Java 8 in the build.gradle and the problem is gone:</p>\n\n<pre><code>android {\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 536, "user_id": 861744, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f4427cb9d0fda8262b711a8fd81ed97?s=128&d=identicon&r=PG", "display_name": "Benjamin St&#252;rmer", "link": "https://stackoverflow.com/users/861744/benjamin-st%c3%bcrmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565767173, "creation_date": 1565767173, "question_id": 57489889, "link": "https://stackoverflow.com/questions/57489889/i-got-a-bootstrapmethoderror-after-upgrading-okhttp", "title": "I got a BootstrapMethodError after upgrading okhttp", "body": "<p>After upgrading okhttp library in my android app, I got a BootstrapMethodError on initialization.</p>\n\n<pre><code>  java.lang.BootstrapMethodError: Exception from call site #4 bootstrap method\n    at okhttp3.internal.Util.&lt;clinit&gt;(Util.java:87)\n    at okhttp3.internal.Util.immutableList(Util.java:234)\n    at okhttp3.OkHttpClient.&lt;clinit&gt;(OkHttpClient.java:124)\n    at okhttp3.OkHttpClient$Builder.&lt;init&gt;(OkHttpClient.java:449)\n</code></pre>\n"}, {"tags": ["unit-testing", "kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1565788468, "post_id": 57490244, "comment_id": 101460563, "body": "Thanks @MarkoTopolnik. I have done so, and it&#39;s working now as per my below answer"}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 3, "last_activity_date": 1565768639, "creation_date": 1565768639, "answer_id": 57490244, "question_id": 57489674, "link": "https://stackoverflow.com/questions/57489674/how-to-unit-test-function-that-has-coroutine-globalscope-launch/57490244#57490244", "title": "How to unit test function that has coroutine `GlobalScope.launch`", "body": "<p>To approach the answer, try asking a related question: \"How would I unit-test a function that has </p>\n\n<pre><code>Thread { trackingData.eventsList() }\n</code></pre>\n\n<p>in it?\"</p>\n\n<p>Your only hope is running a loop that repeatedly checks the expected condition, for some period time, until giving up and declaring the test failed.</p>\n\n<p>When you wrote <code>GlobalScope.launch</code>, you waived your interest in Kotlin's structured concurrency, so you'll have to resort to unstructured and non-deterministic approaches of testing.</p>\n\n<p>On the other hand, maybe you didn't actually want to use the <code>GlobalScope</code>, but just didn't know any better? In that case rewrite your code to use a scope under your control.</p>\n"}, {"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1565796762, "post_id": 57495484, "comment_id": 101465354, "body": "You can improve this if you follow Kotlin guys&#39; advice and make <code>trackEvent</code> an extension on <code>CoroutineScope</code>: <code>fun CoroutineScope.trackEvent(...)</code>. For example, the <code>launch</code> block has a <code>CoroutineScope</code> as its receiver, so if you call <code>trackEvent</code> inside it, you automatically pass that scope to it. And for a unit test, surround it with a <code>runBlocking</code>, which also has <code>CoroutineScope</code> as the receiver."}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": 3, "last_activity_date": 1565788439, "creation_date": 1565788439, "answer_id": 57495484, "question_id": 57489674, "link": "https://stackoverflow.com/questions/57489674/how-to-unit-test-function-that-has-coroutine-globalscope-launch/57495484#57495484", "title": "How to unit test function that has coroutine `GlobalScope.launch`", "body": "<p>I created my own <code>CoroutineScope</code> and pass in (e.g. <code>CoroutineScope(Dispatchers.IO)</code> as a variable <code>myScope</code>)</p>\n\n<p>Then have my function</p>\n\n<pre><code>    override fun trackEvent(trackingData: TrackingData) {\n        myScope.launch{\n            trackingData.eventsList()\n        }\n    }\n</code></pre>\n\n<p>Then in my test I mock the scope by create a <code>blockCoroutineScope</code> as below.</p>\n\n<pre><code>   class BlockCoroutineDispatcher : CoroutineDispatcher() {\n        override fun dispatch(context: CoroutineContext, block: Runnable) {\n            block.run()\n        }\n    }\n\n    private val blockCoroutineScope = CoroutineScope(BlockCoroutineDispatcher())\n</code></pre>\n\n<p>For my test, I'll pass the <code>blockCoroutineScope</code> in instead as <code>myScope</code>. Then the test is executed with <code>launch</code> as a blocking operation.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1565788439, "creation_date": 1565766322, "question_id": 57489674, "link": "https://stackoverflow.com/questions/57489674/how-to-unit-test-function-that-has-coroutine-globalscope-launch", "title": "How to unit test function that has coroutine `GlobalScope.launch`", "body": "<p>I have this function</p>\n\n<pre><code>    override fun trackEvent(trackingData: TrackingData) {\n        trackingData.eventsList()\n    }\n</code></pre>\n\n<p>And I could have my test as below.</p>\n\n<pre><code>    @Test\n    fun `My Test`() {\n        // When\n        myObject.trackEvent(myTrackingMock)\n\n        // Then\n        verify(myTrackingMock, times(1)).eventsList()\n    }\n\n</code></pre>\n\n<p>However, if I make it into a </p>\n\n<pre><code>    override fun trackEvent(trackingData: TrackingData) {\n        GlobalScope.launch{\n            trackingData.eventsList()\n        }\n    }\n</code></pre>\n\n<p>How could I still get my test running? (i.e. can make the <code>launch</code> Synchronous?)</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "reply_to_user": {"reputation": 5120, "user_id": 1401164, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/892b23de3c567590676d6ce001d5d854?s=128&d=identicon&r=PG", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/1401164/gustavo"}, "edited": false, "score": 1, "creation_date": 1565773142, "post_id": 57489578, "comment_id": 101452798, "body": "@Gustavo  scenario which i required and the solution which i had accepted is entirely different from that question"}], "answers": [{"comments": [{"owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "edited": false, "score": 0, "creation_date": 1565770766, "post_id": 57490618, "comment_id": 101451649, "body": "I was not aware of this method <code>withIndex()</code>, Thank you so much!"}], "tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": true, "score": 12, "last_activity_date": 1565769936, "creation_date": 1565769936, "answer_id": 57490618, "question_id": 57489578, "link": "https://stackoverflow.com/questions/57489578/how-to-get-index-position-of-list-in-onnext-from-observable-fromiterable-rxjav/57490618#57490618", "title": "How to get index / position of list in onnext from Observable.fromIterable Rxjava?", "body": "<p>You can use <code>Iterable.withIndex()</code> like this:</p>\n\n<pre><code>Observable.fromIterable(yourList.withIndex())\n    .observeOn(Schedulers.io())\n    .subscribe(\n        { (index, item) -&gt; {} },\n        { _ -&gt; {} },\n        { -&gt; {} }\n    )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1952, "user_id": 1168975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05939ffe70a4a3ca8b177b12c3d79a68?s=128&d=identicon&r=PG", "display_name": "Blehi", "link": "https://stackoverflow.com/users/1168975/blehi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565770178, "creation_date": 1565770178, "answer_id": 57490679, "question_id": 57489578, "link": "https://stackoverflow.com/questions/57489578/how-to-get-index-position-of-list-in-onnext-from-observable-fromiterable-rxjav/57490679#57490679", "title": "How to get index / position of list in onnext from Observable.fromIterable Rxjava?", "body": "<p>Using Java you can solve that by creating an indexed element and map all your list items to be indexed items. If you have <code>String</code> list then you can do something like this:</p>\n\n<pre><code>class Indexed {\n    int index;\n    String element;\n\n    Indexed(int index, String element) {\n        this.index = index;\n        this.element = element;\n    }\n}\n</code></pre>\n\n<p>Then use </p>\n\n<pre><code>List&lt;String&gt; stringList = Arrays.asList(\"one\", \"two\", \"three\", \"four\", \"five\");\n\nObservable.fromIterable(stringList)\n        .map(s -&gt; new Indexed(stringList.indexOf(s), s))\n        .subscribe(indexed -&gt; {\n            Log.i(\"TAG\", \"index: \" + indexed.index + \", element: \" + indexed.element);\n        });\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Just found a more generic way to <a href=\"https://stackoverflow.com/questions/30143591/elegant-way-to-get-index-of-filter-or-first-with-rx-java\">implement</a> this.</p>\n"}], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1037, "favorite_count": 0, "accepted_answer_id": 57490618, "answer_count": 2, "score": 0, "last_activity_date": 1565774134, "creation_date": 1565765917, "last_edit_date": 1565774134, "question_id": 57489578, "link": "https://stackoverflow.com/questions/57489578/how-to-get-index-position-of-list-in-onnext-from-observable-fromiterable-rxjav", "title": "How to get index / position of list in onnext from Observable.fromIterable Rxjava?", "body": "<p>I'm trying to loop a list but i'm not getting the index of current item.</p>\n\n<pre><code>Observable.fromIterable(yourList).observeOn(Schedulers.io())\n            .observeOn(Schedulers.io()).subscribe(\n                { item -&gt; {        }},\n                {_ -&gt;{}},\n                {-&gt;{}}\n</code></pre>\n\n<p>Is there any way to get index just like</p>\n\n<pre><code>yourList.forEachIndexed{ index, item -&gt; }\n</code></pre>\n\n<p>I already know that </p>\n\n<pre><code>class Indexed {\nint index;\nString element;\n\nIndexed(int index, String element) {\n    this.index = index;\n    this.element = element;\n    }\n}\n</code></pre>\n\n<p>this can be used as a solution. But i don't like this kind of approach. I want to know whether Rxjava itself has something for it.</p>\n"}, {"tags": ["android", "kotlin", "android-room", "kotlin-coroutines", "appwidgetprovider"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 11637718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tg3_BNDnz_g/AAAAAAAAAAI/AAAAAAAAAPo/CPA-3fKRw5c/photo.jpg?sz=128", "display_name": "Amit Parameshwar", "link": "https://stackoverflow.com/users/11637718/amit-parameshwar"}, "edited": false, "score": 0, "creation_date": 1565771138, "post_id": 57490599, "comment_id": 101451845, "body": "No I think you misunderstood. How do i create a viewmodel for a widget? I have used livedata in the rest parts of the app (fragments and activities). But what should I do for widgets??"}, {"owner": {"reputation": 157, "user_id": 11637718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tg3_BNDnz_g/AAAAAAAAAAI/AAAAAAAAAPo/CPA-3fKRw5c/photo.jpg?sz=128", "display_name": "Amit Parameshwar", "link": "https://stackoverflow.com/users/11637718/amit-parameshwar"}, "edited": false, "score": 0, "creation_date": 1565772562, "post_id": 57490599, "comment_id": 101452508, "body": "I want to show data from db in widget. thats it. i cant use livedata because widget dont have lifecycle like activities"}], "tags": [], "owner": {"reputation": 865, "user_id": 10922928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fcec10c285df503a650a817142f2fef?s=128&d=identicon&r=PG&f=1", "display_name": "solaza", "link": "https://stackoverflow.com/users/10922928/solaza"}, "is_accepted": false, "score": 0, "last_activity_date": 1565769860, "creation_date": 1565769860, "answer_id": 57490599, "question_id": 57489570, "link": "https://stackoverflow.com/questions/57489570/how-to-interact-with-db-from-widget-in-mvvm-pattern/57490599#57490599", "title": "How to interact with db from widget in MVVM pattern", "body": "<p>If you want text to be updated you can use LiveData in your DAO.</p>\n\n<pre><code>@Query(\"select * from current_weather where id = 0\")\nfun getCurrentWeatherMetricAsync(): LiveData&lt;CurrentMetric&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/54566663/room-dao-livedata-as-return-type-causing-compile-time-error\">Why you shouldn't use coroutines with LiveData</a></p>\n\n<p>If you hame multiple <code>CurrentMetric</code> you sould use <code>LiveData&lt;List&lt;CurrentMetric&gt;&gt;</code></p>\n\n<p>Then everything should be feched from model.</p>\n\n<p>In model you should have something like</p>\n\n<pre><code>fun getCurrentMetricLD() = dao.getCurrentMetricLD()\n</code></pre>\n\n<p>So it only gets data from database.</p>\n\n<p>Then in ViewModel you need LiveData that is then observed in Fragment/Activity.</p>\n\n<pre><code>val currentMetricLD: LiveData&lt;CurrentMetric&gt; = model.getCurrentMetricLD()\n</code></pre>\n\n<p>In Fragment/Activity</p>\n\n<pre><code>settingsViewModel.sifrBl.observe(this, Observer {\n    //what happens on change\n})\n</code></pre>\n\n<p>I would recommend you checking <a href=\"https://classroom.udacity.com/courses/ud9012\" rel=\"nofollow noreferrer\">this</a> free tutorial made by Google.</p>\n"}, {"tags": [], "owner": {"reputation": 275, "user_id": 4265500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd3ac39542fcd5c6eabbe5c08621927e?s=128&d=identicon&r=PG&f=1", "display_name": "miecio", "link": "https://stackoverflow.com/users/4265500/miecio"}, "is_accepted": true, "score": 4, "last_activity_date": 1574345588, "last_edit_date": 1574345588, "creation_date": 1574332556, "answer_id": 58972855, "question_id": 57489570, "link": "https://stackoverflow.com/questions/57489570/how-to-interact-with-db-from-widget-in-mvvm-pattern/58972855#58972855", "title": "How to interact with db from widget in MVVM pattern", "body": "<p>Since You're using suspended functions for Room, You can use it in <code>CoroutineScope</code> with <code>Dispatchers.Main</code> (<a href=\"https://medium.com/androiddevelopers/room-coroutines-422b786dc4c5\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/room-coroutines-422b786dc4c5</a>, <a href=\"https://medium.com/androiddevelopers/coroutines-on-android-part-i-getting-the-background-3e0e54d20bb\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/coroutines-on-android-part-i-getting-the-background-3e0e54d20bb</a>).</p>\n\n<pre><code>CoroutineScope(Dispatchers.Main.immediate).launch {\n     val weather = AppDatabase.getInstance(context.applicationContext).weatherDao().getCurrentWeatherMetricAsync()\n     val views = RemoteViews(context.packageName, R.layout.weather_widget)\n     views.setTextViewText(R.id.tv_counter, \" asd \" + weather.temperature)\n     appWidgetManager.updateAppWidget(appWidgetId, views)\n}\n</code></pre>\n\n<p>In case You don't use suspend functions or even Room, You can use <code>Dispatchers.IO</code> to load data async and update RemoteViews in the same thread, without <code>withContext(Dispatchers.Main)</code> because RemoteViews is not 'ours', we just telling launcher that he should set this data on that view. This is by default done in another, no-UI thread  - no even in thread created/owned by app.</p>\n\n<p>This is the only way I found, because since <code>AppWidgetProvider</code> is <code>BroadcastReceiver</code>, You cannot use Architecture Components in it (<a href=\"https://stackoverflow.com/a/47292260/4265500\">https://stackoverflow.com/a/47292260/4265500</a>). Just force update widget whenever You update DB (in <code>JobIntentService</code>, <code>Worker</code> (<code>WorkManager</code>), <code>Coroutines</code>, wheatever) and get the latest record in <code>updateAppWidget()</code> (like You're doing right now).</p>\n\n<p>Here's handy extension function to force widget update:</p>\n\n<pre><code>fun Context.updateWidget() {\n    val widgetUpdateIntent = Intent(this, Widget::class.java).apply {\n        action = AppWidgetManager.ACTION_APPWIDGET_UPDATE\n        putExtra(\n            AppWidgetManager.EXTRA_APPWIDGET_IDS,\n            AppWidgetManager.getInstance(this@updateWidget).getAppWidgetIds(\n                ComponentName(\n                    this@updateWidget,\n                    Widget::class.java\n                )\n            )\n        )\n    }\n    sendBroadcast(widgetUpdateIntent)\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 11637718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tg3_BNDnz_g/AAAAAAAAAAI/AAAAAAAAAPo/CPA-3fKRw5c/photo.jpg?sz=128", "display_name": "Amit Parameshwar", "link": "https://stackoverflow.com/users/11637718/amit-parameshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 2, "accepted_answer_id": 58972855, "answer_count": 2, "score": 3, "last_activity_date": 1574345588, "creation_date": 1565765873, "question_id": 57489570, "link": "https://stackoverflow.com/questions/57489570/how-to-interact-with-db-from-widget-in-mvvm-pattern", "title": "How to interact with db from widget in MVVM pattern", "body": "<p>I have an application which fetches the data from api and caches in db. I want to be able to show this data (from db) in the widget and also add a button to update the data, which when pressed will fetch the data and update the db and hence update the widget. The problem is since I'm using mvvm, Im not sure if at all it is possible to make use of livedata and fancy supports of jetpack components.</p>\n\n<p>So I just created a Dao reference in widget update fun and fetched the db. That does fetch the data but it is not updating the textview, i logged it and it showed me the data correctly.</p>\n\n<pre><code>companion object {\n\n        internal fun updateAppWidget(\n            context: Context, appWidgetManager: AppWidgetManager,\n            appWidgetId: Int\n        ) {\n            val db = AppDatabase.getInstance(context.applicationContext).weatherDao()\n            val views = RemoteViews(context.packageName, R.layout.weather_widget)\n            GlobalScope.launch {\n                val weather = db.getCurrentWeatherMetricAsync()\n                Log.d(\"TAG_TAG_TAG\", \"weather: \" + weather.temperature);\n                withContext(Dispatchers.Main) {\n                    views.setTextViewText(R.id.tv_counter, \" asd \" + weather.temperature)\n                }\n            }\n            appWidgetManager.updateAppWidget(appWidgetId, views)\n        }\n    }\n</code></pre>\n\n<p>the dao has a suspended fun for this.</p>\n\n<pre><code>    @Query(\"select * from current_weather where id = 0\")\n    suspend fun getCurrentWeatherMetricAsync(): CurrentMetric\n\n</code></pre>\n\n<p>Can you please tell me how to interact with the db and the proper means to interact with the repository of application?</p>\n"}, {"tags": ["android", "kotlin", "android-edittext"], "comments": [{"owner": {"reputation": 5177, "user_id": 2219208, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/eA3xp.jpg?s=128&g=1", "display_name": "Lakhwinder Singh", "link": "https://stackoverflow.com/users/2219208/lakhwinder-singh"}, "edited": false, "score": 0, "creation_date": 1565765997, "post_id": 57489527, "comment_id": 101449502, "body": "Why don&#39;t you add your own keypad, and use input on Textview, rather than Edittext? Although if  you continue with the current approach, then you need to add 4 watchers"}, {"owner": {"reputation": 109, "user_id": 11152684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f8c7d8159601a4a976ee24daa30e2?s=128&d=identicon&r=PG&f=1", "display_name": "X. Android", "link": "https://stackoverflow.com/users/11152684/x-android"}, "reply_to_user": {"reputation": 5177, "user_id": 2219208, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/eA3xp.jpg?s=128&g=1", "display_name": "Lakhwinder Singh", "link": "https://stackoverflow.com/users/2219208/lakhwinder-singh"}, "edited": false, "score": 0, "creation_date": 1565766995, "post_id": 57489527, "comment_id": 101449928, "body": "Hmm, yeah, I think creating my own keypad is actually a better way and gives me more freedom in customisation. I&#39;ll also block the soft keyboard from Manifest to prevent unwanted overlays."}, {"owner": {"reputation": 5177, "user_id": 2219208, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/eA3xp.jpg?s=128&g=1", "display_name": "Lakhwinder Singh", "link": "https://stackoverflow.com/users/2219208/lakhwinder-singh"}, "edited": false, "score": 0, "creation_date": 1565767115, "post_id": 57489527, "comment_id": 101449969, "body": "I can give you all the things if you want, I have created one"}, {"owner": {"reputation": 109, "user_id": 11152684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f8c7d8159601a4a976ee24daa30e2?s=128&d=identicon&r=PG&f=1", "display_name": "X. Android", "link": "https://stackoverflow.com/users/11152684/x-android"}, "reply_to_user": {"reputation": 5177, "user_id": 2219208, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/eA3xp.jpg?s=128&g=1", "display_name": "Lakhwinder Singh", "link": "https://stackoverflow.com/users/2219208/lakhwinder-singh"}, "edited": false, "score": 0, "creation_date": 1565770787, "post_id": 57489527, "comment_id": 101451667, "body": "Thanks but not needed because I want to do this as an exercise. I&#39;ll create a RecycleView with GrildLayoutManager for the keypad and use LiveData to mange the real-time key presses."}, {"owner": {"reputation": 2001, "user_id": 6808478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/819b668328bda2e76042b147293524f9?s=128&d=identicon&r=PG&f=1", "display_name": "Yyy", "link": "https://stackoverflow.com/users/6808478/yyy"}, "edited": false, "score": 0, "creation_date": 1565776916, "post_id": 57489527, "comment_id": 101454684, "body": "Check the following link <a href=\"http://lomza.totem-soft.com/pin-input-view-in-android/\" rel=\"nofollow noreferrer\">lomza.totem-soft.com/pin-input-view-in-android</a> This might help!"}], "owner": {"reputation": 109, "user_id": 11152684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6f8c7d8159601a4a976ee24daa30e2?s=128&d=identicon&r=PG&f=1", "display_name": "X. Android", "link": "https://stackoverflow.com/users/11152684/x-android"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565766756, "creation_date": 1565765636, "last_edit_date": 1565766756, "question_id": 57489527, "link": "https://stackoverflow.com/questions/57489527/how-to-create-pin-input-with-4-edittexts-and-addtextchangedlistener", "title": "How to create PIN input with 4 EditTexts and addTextChangedListener?", "body": "<p>I am trying to create a security code login page with 4 EdtiText cells. Basically I want the cell to be restricted to 1 digit, and as soon as the user types in a digit, it jumps to the next EditText. When we reach the 4th and last cell, I want the app to automatically check the entire code and change activity if code is correct.</p>\n\n<p>Here is my XML: </p>\n\n<pre><code>&lt;LinearLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginTop=\"@dimen/_30sdp\"\n                    android:layout_marginEnd=\"@dimen/_40sdp\"\n                    android:layout_marginStart=\"@dimen/_40sdp\"\n                    android:orientation=\"horizontal\"&gt;\n\n &lt;EditText\n                            style=\"@style/LoginSecurityCode\"\n                            android:id=\"@+id/et_login_code_1\"\n                            android:imeOptions=\"actionNext\"\n                            android:nextFocusRight=\"@+id/et_login_code_2\"/&gt;\n\n &lt;EditText\n                            style=\"@style/LoginSecurityCode\"\n                            android:id=\"@+id/et_login_code_2\"\n                            android:imeOptions=\"actionNext\"\n                            android:nextFocusRight=\"@+id/et_login_code_3\"/&gt;\n\n &lt;EditText\n                            style=\"@style/LoginSecurityCode\"\n                            android:id=\"@+id/et_login_code_3\"\n                            android:imeOptions=\"actionNext\"\n                            android:nextFocusRight=\"@+id/et_login_code_4\"/&gt;\n\n &lt;EditText\n                            style=\"@style/LoginSecurityCode\"\n                            android:id=\"@+id/et_login_code_1\"\n                            android:imeOptions=\"actionNext\"\n                            android:nextFocusRight=\"@+id/et_login_code_2\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>and my style for each EditText:</p>\n\n<pre><code>&lt;style name=\"LoginSecurityCode\"&gt;\n    &lt;item name=\"android:layout_width\"&gt;match_parent&lt;/item&gt;\n    &lt;item name=\"android:layout_height\"&gt;@dimen/_40sdp&lt;/item&gt;\n    &lt;item name=\"android:layout_marginEnd\"&gt;@dimen/_8sdp&lt;/item&gt;\n    &lt;item name=\"android:layout_marginBottom\"&gt;@dimen/_4sdp&lt;/item&gt;\n    &lt;item name=\"android:layout_marginStart\"&gt;@dimen/_8sdp&lt;/item&gt;\n    &lt;item name=\"android:layout_gravity\"&gt;center&lt;/item&gt;\n    &lt;item name=\"android:gravity\"&gt;center&lt;/item&gt;\n    &lt;item name=\"android:textAlignment\"&gt;center&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;@null&lt;/item&gt;\n    &lt;item name=\"android:textSize\"&gt;@dimen/_20ssp&lt;/item&gt;\n    &lt;item name=\"android:textColorHint\"&gt;#50000000&lt;/item&gt;\n    &lt;item name=\"android:hint\"&gt;@string/label_login_code_placeholder&lt;/item&gt;\n    &lt;item name=\"android:importantForAutofill\" tools:ignore=\"NewApi\"&gt;no&lt;/item&gt;\n    &lt;item name=\"android:inputType\"&gt;numberDecimal&lt;/item&gt;\n    &lt;item name=\"android:maxLines\"&gt;1&lt;/item&gt;\n    &lt;item name=\"android:maxLength\"&gt;1&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>It is important to note that I do not want to do the noob way with 4 different addTextChangedListeners, I want to find a smart way with minimum lines of Java/Kotlin.</p>\n"}, {"tags": ["java", "kotlin", "reflection", "compiler-errors", "kotlin-reflect"], "answers": [{"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 4, "last_activity_date": 1565763580, "last_edit_date": 1565763580, "creation_date": 1565762613, "answer_id": 57488929, "question_id": 57488848, "link": "https://stackoverflow.com/questions/57488848/kotlin-javasetter-method-is-not-compiling/57488929#57488929", "title": "Kotlin: javaSetter method is not compiling", "body": "<p>It's not compiling because <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/member-properties.html\" rel=\"nofollow noreferrer\"><code>memberProperties</code></a> is a <code>Collection&lt;KProperty1&gt;</code>, and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/index.html\" rel=\"nofollow noreferrer\"><code>KProperty1</code></a> doesn't have any <code>javaSetter</code> property. But you can test if the property <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/index.html#inheritors\" rel=\"nofollow noreferrer\">is in fact a <code>KMutableProperty1</code></a>, and if it is, after a cast or a smart cast, use its <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/java-setter.html\" rel=\"nofollow noreferrer\"><code>javaSetter</code></a> property.</p>\n\n<p>As you can see, the documentation helps. Use it.</p>\n"}], "owner": {"reputation": 571, "user_id": 8747255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BonzH.jpg?s=128&g=1", "display_name": "Mukhamedali  Zhadigerov", "link": "https://stackoverflow.com/users/8747255/mukhamedali-zhadigerov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57488929, "answer_count": 1, "score": 0, "last_activity_date": 1565765883, "creation_date": 1565762154, "last_edit_date": 1565765883, "question_id": 57488848, "link": "https://stackoverflow.com/questions/57488848/kotlin-javasetter-method-is-not-compiling", "title": "Kotlin: javaSetter method is not compiling", "body": "<p>I retrieved a property of my class using: </p>\n\n<pre><code> val prop = businessObject::class.memberProperties.first()\n</code></pre>\n\n<p>I can do this:</p>\n\n<pre><code>prop.javaGetter\n</code></pre>\n\n<p>But this method does not compile:</p>\n\n<pre><code>prop.javaSetter\n</code></pre>\n\n<p>Even though the method exists and is not deprecated</p>\n"}, {"tags": ["android", "kotlin", "fragment", "android-tabbed-activity"], "comments": [{"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "edited": false, "score": 0, "creation_date": 1565757493, "post_id": 57488002, "comment_id": 101446961, "body": "In your adapter while changing the fragments, pass the position through bundle."}], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 9959673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atUGh.png?s=128&g=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/9959673/eddy"}, "edited": false, "score": 0, "creation_date": 1565761769, "post_id": 57488688, "comment_id": 101447976, "body": "I tried to apply yr suggestion but getting error &quot;Unresolved reference: sectionNumber&quot;. Any idea?"}, {"owner": {"reputation": 4857, "user_id": 9199362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHXd5.png?s=128&g=1", "display_name": "Birju Vachhani", "link": "https://stackoverflow.com/users/9199362/birju-vachhani"}, "reply_to_user": {"reputation": 233, "user_id": 9959673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atUGh.png?s=128&g=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/9959673/eddy"}, "edited": false, "score": 0, "creation_date": 1565761847, "post_id": 57488688, "comment_id": 101448001, "body": "I did a silly mistake. I corrected by answer. Use this line <code>val sectionNumber = arguments?.getInt(ARG_SECTION_NUMBER) ?: 1</code>"}, {"owner": {"reputation": 233, "user_id": 9959673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atUGh.png?s=128&g=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/9959673/eddy"}, "edited": false, "score": 0, "creation_date": 1565762421, "post_id": 57488688, "comment_id": 101448167, "body": "Hi Birju, after applied your code, both tabs will show same result. May I know which part I did wrong? You may refer to screen as attached above."}, {"owner": {"reputation": 233, "user_id": 9959673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atUGh.png?s=128&g=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/9959673/eddy"}, "edited": false, "score": 1, "creation_date": 1565770417, "post_id": 57488688, "comment_id": 101451479, "body": "Finally its work when I change <code>if (sectionNumber == 0) {</code> to <code>if (sectionNumber == 1) {</code>."}], "tags": [], "owner": {"reputation": 4857, "user_id": 9199362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHXd5.png?s=128&g=1", "display_name": "Birju Vachhani", "link": "https://stackoverflow.com/users/9199362/birju-vachhani"}, "is_accepted": true, "score": 1, "last_activity_date": 1565771851, "last_edit_date": 1565771851, "creation_date": 1565761170, "answer_id": 57488688, "question_id": 57488002, "link": "https://stackoverflow.com/questions/57488002/how-can-i-change-different-url-or-view-in-tabbed-activity/57488688#57488688", "title": "How can I change different URL or view in tabbed activity?", "body": "<p>I see that you're putting <code>sectionNumber</code> in bundle arguments in fragment. So you can use that <code>arguments</code> to get the data back.</p>\n\n<p>Try this:</p>\n\n<pre><code>override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    val root = inflater.inflate(R.layout.fragment_left_menu_policies, container, false)\n    val sectionNumber = arguments?.getInt(ARG_SECTION_NUMBER) ?: 1\n    if (sectionNumber == 1) {\n        var webTnc: WebView = root.findViewById(R.id.myWebView)\n        webTnc.loadUrl(\"https://www.abcxyz.com/abcxyz/abcxyz_webpage/tnc.html\")\n    } else {\n        var webTnc: WebView = root.findViewById(R.id.myWebView)\n        webTnc.loadUrl(\"https://www.URL2.com/URL2.html\")\n    }\n\n\n    return root\n}\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 9959673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atUGh.png?s=128&g=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/9959673/eddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57488688, "answer_count": 1, "score": 1, "last_activity_date": 1565771851, "creation_date": 1565755232, "last_edit_date": 1565762359, "question_id": 57488002, "link": "https://stackoverflow.com/questions/57488002/how-can-i-change-different-url-or-view-in-tabbed-activity", "title": "How can I change different URL or view in tabbed activity?", "body": "<p>I'm new in Android kotlin development. I would like to create a tabbed activity in my app to show different static HTML page.</p>\n\n<p>I able to set 1 URL in my app now. But when I change or tap to another tab, it will show similar view or URL.</p>\n\n<pre><code>\nimport android.os.Bundle\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.TextView\nimport android.support.v4.app.Fragment\nimport android.arch.lifecycle.Observer\nimport android.arch.lifecycle.ViewModelProviders\nimport android.webkit.WebView\nimport xxx.abcabc.xxx.R\nimport android.util.Log\n\n\nclass PlaceholderFragment : Fragment() {\n\n    private lateinit var pageViewModel: PageViewModel\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        pageViewModel = ViewModelProviders.of(this).get(PageViewModel::class.java).apply {\n            setIndex(arguments?.getInt(ARG_SECTION_NUMBER) ?: 1)\n        }\n\n\n    }\n\n    override fun onCreateView(\n            inflater: LayoutInflater, container: ViewGroup?,\n            savedInstanceState: Bundle?\n    ): View? {\n        val root = inflater.inflate(R.layout.fragment_left_menu_policies, container, false)\n\n        var webTnc: WebView = root.findViewById(R.id.myWebView)\n        webTnc.loadUrl(\"https://www.abcxyz.com/abcxyz/abcxyz_webpage/tnc.html\")\n\n\n        return root\n    }\n\n    companion object {\n        /**\n         * The fragment argument representing the section number for this\n         * fragment.\n         */\n        private const val ARG_SECTION_NUMBER = \"section_number\"\n\n        /**\n         * Returns a new instance of this fragment for the given section\n         * number.\n         */\n        @JvmStatic\n        fun newInstance(sectionNumber: Int): PlaceholderFragment {\n            return PlaceholderFragment().apply {\n                arguments = Bundle().apply {\n                    putInt(ARG_SECTION_NUMBER, sectionNumber)\n                }\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>How can I detect sectionNumber something like </p>\n\n<pre><code>if(sectionNumber == 0)\n{\n var webTnc: WebView = root.findViewById(R.id.myWebView)\n    webTnc.loadUrl(\"https://www.abcxyz.com/abcxyz/abcxyz_webpage/tnc.html\")\n}\nelse\n{\nvar webTnc: WebView = root.findViewById(R.id.myWebView)\n    webTnc.loadUrl(\"https://www.URL2.com/URL2.html\")\n}\n</code></pre>\n\n<p>Please help. Thank you.</p>\n\n<p><strong>Edited</strong>\n<a href=\"https://i.stack.imgur.com/nth9j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nth9j.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "material-components", "material-components-android", "android-chips"], "comments": [{"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 280, "user_id": 8105702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X6zDsNMKFno/AAAAAAAAAAI/AAAAAAAAABM/lOd2OxVDaJQ/photo.jpg?sz=128", "display_name": "Adarsh Anurag", "link": "https://stackoverflow.com/users/8105702/adarsh-anurag"}, "edited": false, "score": 1, "creation_date": 1565755616, "post_id": 57487965, "comment_id": 101446618, "body": "@AdarshAnurag not really a duplicate.."}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1565756745, "creation_date": 1565756745, "answer_id": 57488145, "question_id": 57487965, "link": "https://stackoverflow.com/questions/57487965/can-i-create-a-gradient-background-color-on-a-material-chip/57488145#57488145", "title": "Can I create a gradient background color on a material Chip?", "body": "<p>It is not possible to set a background to Chip rather you can set the rounded corners or colors to it. You can also give a border color.</p>\n\n<p>According to the <a href=\"https://developer.android.com/reference/com/google/android/material/chip/Chip\" rel=\"nofollow noreferrer\">documentation</a>,</p>\n\n<blockquote>\n  <p>All attributes from Chip are supported. Do not use the\n  android:background attribute. It will be ignored because Chip manages\n  its own background Drawable. Also do not use the android:drawableStart\n  and android:drawableEnd attributes.</p>\n</blockquote>\n\n<p>Hence if you are looking something to give corners or a chip with a different border color I would suggest you to try this,</p>\n\n<pre><code>    Chip chip = new Chip(Activity.this);\n    chip.setText(\"Holiday\");\n    chip.setCloseIcon(ResourcesCompat.getDrawable(getResources(), R.drawable.close_chip, null));\n    chip.setCloseIconTint(ColorStateList.valueOf(Color.parseColor(\"#aa99bc\")));\n    chip.setPadding(5, 5, 5, 5);  \n    chip.setCloseIconVisible(true);\n    chip.setTextAppearanceResource(R.style.ChipTextStyle);\n    chip.setChipStrokeColorResource(R.color.chip_border_color);\n    chip.setChipStrokeWidth(1);\n    chip.setChipCornerRadius(30);                                          \n    chip.setChipBackgroundColorResource(R.color.chip_background);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 14252974, "user_type": "registered", "profile_image": "https://graph.facebook.com/3309438245800846/picture?type=large", "display_name": "Dorian Paveti\u0107", "link": "https://stackoverflow.com/users/14252974/dorian-paveti%c4%87"}, "edited": false, "score": 0, "creation_date": 1611173029, "post_id": 58246012, "comment_id": 116369082, "body": "Did that maybe change since then?"}], "tags": [], "owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "is_accepted": false, "score": 2, "last_activity_date": 1570257754, "creation_date": 1570257754, "answer_id": 58246012, "question_id": 57487965, "link": "https://stackoverflow.com/questions/57487965/can-i-create-a-gradient-background-color-on-a-material-chip/58246012#58246012", "title": "Can I create a gradient background color on a material Chip?", "body": "<p>Currently you <strong>can't do</strong> it.  </p>\n\n<ul>\n<li>The method <code>setChipBackgroundColorResource</code> is working with a <code>color</code> not a <code>drawable</code></li>\n<li>The method <code>setChipBackgroundColor</code> is working with a <code>ColorStateList</code></li>\n<li>The <a href=\"https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/chip/Chip.java#L497\" rel=\"nofollow noreferrer\">methods</a> <code>setBackgroundResource</code>, <code>setBackgroundDrawable</code>, <code>setBackground</code> just produce a warning:<code>Do not set the background; Chip manages its own background drawable.</code> </li>\n</ul>\n\n<p>It happens because the Chip widget is a thin view wrapper around the <a href=\"https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/chip/ChipDrawable.java\" rel=\"nofollow noreferrer\"><code>ChipDrawable</code></a>. The ChipDrawable is just a <code>MaterialShapeDrawable</code> whick manages its background with something like:</p>\n\n<pre>\n *   chipStartPadding     iconEndPadding     closeIconStartPadding         chipEndPadding\n *    +                    +                                    +                      +\n *    |                    |                                    |                      |\n *    |  iconStartPadding  |  textStartPadding   textEndPadding | closeIconEndPadding  |\n *    |   +                |    +                            +  |                  +   |\n *    |   |                |    |                            |  |                  |   |\n *    v   v                v    v                            v  v                  v   v\n * +-----+----+-----------+----+----+---------------------+----+----+----------+----+-----+\n * |     |    |       XX  |    |    |  XX   X  X  X  XXX  |    |    | X      X |    |     |\n * |     |    |      XX   |    |    | X  X  X  X  X  X  X |    |    |  XX  XX  |    |     |\n * |     |    |  XX XX    |    |    | X     XXXX  X  XXX  |    |    |    XX    |    |     |\n * |     |    |   XXX     |    |    | X  X  X  X  X  X    |    |    |  XX  XX  |    |     |\n * |     |    |    X      |    |    |  XX   X  X  X  X    |    |    | X      X |    |     |\n * +-----+----+-----------+----+----+---------------------+----+----+----------+----+-----+\n *                  ^                           ^                         ^\n *                  |                           |                         |\n *                  +                           +                         +\n *             chipIconSize                  *dynamic*              closeIconSize\n * </pre>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1570869511, "creation_date": 1565754929, "last_edit_date": 1570869511, "question_id": 57487965, "link": "https://stackoverflow.com/questions/57487965/can-i-create-a-gradient-background-color-on-a-material-chip", "title": "Can I create a gradient background color on a material Chip?", "body": "<p>I believe the answer is yes as I can see this answer for react <a href=\"https://stackoverflow.com/questions/48849340/how-to-add-linear-gradient-color-to-material-ui-chip-background\">here</a>, but I don't know how to do it in Kotlin/Java.\nThe only to options I see are <code>setChipBackgroundColorResource</code> or <code>setBackgroundColor</code> which both require a color resource. How can I use gradient for the background? </p>\n\n<ul>\n<li>I know how to set backgrounds for any regular view, but having an issue just with the chip. I've tried this <code>chip.setBackgroundResource(R.drawable.gradient_background)</code> but it just makes the background gray</li>\n</ul>\n"}, {"tags": ["kotlin", "operator-overloading", "extension-methods", "type-parameter"], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": false, "score": 3, "last_activity_date": 1565758963, "creation_date": 1565758963, "answer_id": 57488410, "question_id": 57487564, "link": "https://stackoverflow.com/questions/57487564/how-to-use-operator-overloading-in-kotlin-to-divide-a-number-by-a-numeric-vector/57488410#57488410", "title": "how to use operator overloading in Kotlin to divide a number by a numeric vector", "body": "<p>The problem is that the names of the functions/operators are the same and would generate the same static Java function name. You can easily assign a new Java-name with the <code>@JvmName</code> annotation (see <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname</a>). </p>\n\n<p>Here an example from the standard libs:</p>\n\n<pre><code>@JvmName(\"sumOfInt\")\nfun Iterable&lt;Int&gt;.sum(): Int { ... }\n\n@JvmName(\"sumOfFloat\")\nfun Iterable&lt;Float&gt;.sum(): Float { ... }\n</code></pre>\n"}], "owner": {"reputation": 1560, "user_id": 1673861, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FWGcY.jpg?s=128&g=1", "display_name": "L. Blanc", "link": "https://stackoverflow.com/users/1673861/l-blanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565766161, "creation_date": 1565750834, "last_edit_date": 1565766161, "question_id": 57487564, "link": "https://stackoverflow.com/questions/57487564/how-to-use-operator-overloading-in-kotlin-to-divide-a-number-by-a-numeric-vector", "title": "how to use operator overloading in Kotlin to divide a number by a numeric vector", "body": "<p>I'm trying to recreate in Kotlin something I <em>believe</em> is possible in Pandas/Python. I would like to perform division such that a number (Int, Double, etc) is divided by a numeric vector. (I'm told this is possible, but haven't found a reference.) One example i've seen was part of a growth rate calculation </p>\n\n<pre><code>1.0 / data1['nYears']\n</code></pre>\n\n<p>Here 1.0 is divided by each value in data1['nYears'], and a column was returned containing the element-wise result. E.G., if the column contained 2 and 4, the result would be a new column containing .5 and .25.</p>\n\n<p>Can this be done in Kotlin? </p>\n\n<p>(FWIW, the reverse calculations (dividing a column by a scalar constant) are perhaps more important, but i thought i would start here.)</p>\n\n<p>i found a partial solution in this using operator overloading with an extension function :</p>\n\n<pre><code>operator fun Int.div(vector: Vector&lt;Int&gt;) : Vector&lt;Double&gt; {\n    val result = Vector(\"\", ArrayList&lt;Double?&gt;())\n    for (e in vector) {\n        if (e == null) {\n            result.add(null)\n        } else {\n            result.add(this / (e * 1.0))\n        }\n    }\n    return result\n}\n</code></pre>\n\n<p>This works fine for Ints, but when I attempted to extend it to other numeric types I ran into trouble.  For example, adding a similar method for doubles I got an error, i believe is caused by type erasure.</p>\n\n<pre><code>Platform declaration clash: The following declarations have the same JVM signature...\n</code></pre>\n\n<p>Next I tried providing a single method with an argument of (Vector ) to cover both cases, but got </p>\n\n<pre><code>None of the following functions can be called with the arguments supplied\n</code></pre>\n\n<p>Is there a way to do this in Kotlin?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 4857, "user_id": 9199362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHXd5.png?s=128&g=1", "display_name": "Birju Vachhani", "link": "https://stackoverflow.com/users/9199362/birju-vachhani"}, "edited": false, "score": 1, "creation_date": 1565762139, "post_id": 57487261, "comment_id": 101448088, "body": "Did you check what the <code>hasCustomLocationChanged</code> method is returning?"}, {"owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "reply_to_user": {"reputation": 4857, "user_id": 9199362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHXd5.png?s=128&g=1", "display_name": "Birju Vachhani", "link": "https://stackoverflow.com/users/9199362/birju-vachhani"}, "edited": false, "score": 0, "creation_date": 1565795340, "post_id": 57487261, "comment_id": 101464555, "body": "I haven&#39;t, because it never hits that line.  That&#39;s the whole issue, the line with the return is never called"}], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "reply_to_user": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1565801349, "post_id": 57498094, "comment_id": 101467446, "body": "Possibly not, but I don&#39;t know how to test for that"}], "tags": [], "owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "is_accepted": false, "score": 0, "last_activity_date": 1565797754, "creation_date": 1565797754, "answer_id": 57498094, "question_id": 57487261, "link": "https://stackoverflow.com/questions/57487261/why-is-this-method-returning-without-hitting-the-return-statement/57498094#57498094", "title": "Why is this method returning without hitting the return statement?", "body": "<p>Ironically enough, this seems to be a bug in Android Studio's debugger.  The functions in the return statement actually were being called, but the debugger wasn't catching that breakpoint for some reason.  I just set a breakpoint in the function the return was calling and found the issue.</p>\n"}], "owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565797754, "creation_date": 1565747781, "question_id": 57487261, "link": "https://stackoverflow.com/questions/57487261/why-is-this-method-returning-without-hitting-the-return-statement", "title": "Why is this method returning without hitting the return statement?", "body": "<p>I'm having a baffling issue with this method in my app:</p>\n\n<pre><code>    override suspend fun hasLocationChanged(lastWeatherLocation: WeatherLocation): Boolean {\n        val deviceLocationChanged = try {\n            hasDeviceLocationChanged(lastWeatherLocation)\n        } catch (e: LocationPermissionNotGrantedException) {\n            false\n        }\n\n        return deviceLocationChanged || hasCustomLocationChanged(lastWeatherLocation)\n    }\n</code></pre>\n\n<p>It seems to be returning out of the method without actually calling the return statement and I don't know how that's possible or why it's happening.  The function <code>hasDeviceLocationChanged()</code> is returning false (which is correct), and it is not catching an exception, but the <code>hasLocationChanged()</code> function returns true, without calling the return statement.</p>\n\n<p>I've put breakpoints in the try, the catch, and the return, and only the breakpoint inside the try block is ever hit.</p>\n\n<p>I've never seen this before, and am hoping someone is able to help.  Here is the whole class for reference:</p>\n\n<pre><code>const val USE_DEVICE_LOCATION = \"USE_DEVICE_LOCATION\"\nconst val CUSTOM_LOCATION = \"CUSTOM_LOCATION\"\n\nclass LocationProviderImpl(\n        private val fusedLocationProviderClient: FusedLocationProviderClient,\n        context: Context\n) : PreferenceProvider(context), LocationProvider {\n\n    private val appContext = context.applicationContext\n\n    override suspend fun hasLocationChanged(lastWeatherLocation: WeatherLocation): Boolean {\n        val deviceLocationChanged = try {\n            hasDeviceLocationChanged(lastWeatherLocation)\n        } catch (e: LocationPermissionNotGrantedException) {\n            false\n        }\n\n        return deviceLocationChanged || hasCustomLocationChanged(lastWeatherLocation)\n    }\n\n    override suspend fun getLatitude(): Double {\n        val lastLocation = getLastDeviceLocation().await() ?: return 0.0\n\n        return lastLocation.latitude\n    }\n\n    override suspend fun getLongitude(): Double {\n        val lastLocation = getLastDeviceLocation().await() ?: return 0.0\n\n        return lastLocation.longitude\n    }\n\n    override suspend fun getPreferrredLocationString(): String {\n        if (isUsingDeviceLocation()) {\n            try {\n                val deviceLocation = getLastDeviceLocation().await()\n                        ?: return \"${getCustomLocationName()}\"\n                return \"${deviceLocation.latitude}, ${deviceLocation.longitude}\"\n            } catch (e: LocationPermissionNotGrantedException) {\n                return \"${getCustomLocationName()}\"\n            }\n        } else {\n            return \"${getCustomLocationName()}\"\n        }\n    }\n\n    private suspend fun hasDeviceLocationChanged(lastWeatherLocation: WeatherLocation): Boolean {\n        if (!isUsingDeviceLocation())\n            return false\n\n        val deviceLocation = getLastDeviceLocation().await()\n                ?: return false\n\n        val comparisonThreshold = 0.03\n        return Math.abs(deviceLocation.latitude - lastWeatherLocation.latitude) &gt; comparisonThreshold &amp;&amp;\n                Math.abs(deviceLocation.longitude - lastWeatherLocation.longitude) &gt; comparisonThreshold\n    }\n\n    private fun hasCustomLocationChanged(lastWeatherLocation: WeatherLocation): Boolean {\n        val customLocationName = getCustomLocationName()\n        return customLocationName != lastWeatherLocation.getLocationString(appContext)\n    }\n\n    private fun isUsingDeviceLocation(): Boolean {\n        return preferences.getBoolean(USE_DEVICE_LOCATION, true)\n    }\n\n    private fun getCustomLocationName(): String? {\n        return preferences.getString(CUSTOM_LOCATION, null)\n    }\n\n\n    private fun getLastDeviceLocation(): Deferred&lt;Location?&gt; {\n        return if (hasLocationPermission())\n            fusedLocationProviderClient.lastLocation.asDeferred()\n        else\n            throw LocationPermissionNotGrantedException()\n    }\n\n    private fun hasLocationPermission(): Boolean {\n        return ContextCompat.checkSelfPermission(appContext,\n                Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED\n    }\n}\n</code></pre>\n"}, {"tags": ["android-studio", "kotlin", "google-api", "google-signin"], "comments": [{"owner": {"reputation": 862, "user_id": 2145360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxhFc.jpg?s=128&g=1", "display_name": "Hayi Nukman", "link": "https://stackoverflow.com/users/2145360/hayi-nukman"}, "edited": false, "score": 0, "creation_date": 1565747319, "post_id": 57486576, "comment_id": 101445231, "body": "just change <code>val account: GoogleSignInAccount</code> to <code>val account: GoogleSignInAccount?</code>"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565825078, "post_id": 57486576, "comment_id": 101475151, "body": "...or remove the explicit type entirely. You don&#39;t need type declarations if they can be inferred from assignment."}], "answers": [{"tags": [], "owner": {"reputation": 1438, "user_id": 1065348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2RKw.jpg?s=128&g=1", "display_name": "Jackie Yeh", "link": "https://stackoverflow.com/users/1065348/jackie-yeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1591930811, "creation_date": 1591930811, "answer_id": 62336795, "question_id": 57486576, "link": "https://stackoverflow.com/questions/57486576/how-to-fix-expected-type-mismatch-inferred-type-is-googlesigninaccount-but-go/62336795#62336795", "title": "How to fix &quot;Expected type mismatch: inferred type is GoogleSignInAccount? but GoogleSignInAccount was expected&quot; error?", "body": "<p>This maybe a late answer, but hopefully it can help the Kotlin beginners like me in the future.</p>\n\n<p>I met exactly the same error, and modify as the following part to fix it:</p>\n\n<pre><code>    val account: GoogleSignInAccount? = completedTask.getResult(ApiException::class.java) \n    updateUI (account!!)\n</code></pre>\n\n<p>You may refer to Kotlin online document <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">Null Safety</a> for the details about null and \"!!\" operator.</p>\n"}], "owner": {"reputation": 11, "user_id": 11924707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51beff575081bcb83c1d1d5c853d04dc?s=128&d=identicon&r=PG&f=1", "display_name": "brms97", "link": "https://stackoverflow.com/users/11924707/brms97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1737, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1591930811, "creation_date": 1565740099, "question_id": 57486576, "link": "https://stackoverflow.com/questions/57486576/how-to-fix-expected-type-mismatch-inferred-type-is-googlesigninaccount-but-go", "title": "How to fix &quot;Expected type mismatch: inferred type is GoogleSignInAccount? but GoogleSignInAccount was expected&quot; error?", "body": "<p>When setting up Google Authentication using Kotlin, the following error arises: \"Type inference failed. Expected type mismatch: inferred type is GoogleSignInAccount? But GoogleSignInAccount was expected\". The error is coming from line \n\"val account: GoogleSignInAccount = completedTask.getResult(ApiException::class.java)\" \nThis code is coming almost in its entirety from <a href=\"https://developers.google.com/identity/sign-in/android/sign-in\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/android/sign-in</a></p>\n\n<p>I have checked a question posted on here with the exact same problem but answers to that one couldn't solve my problem (nor her's <a href=\"https://stackoverflow.com/questions/55677077/type-mismatch-inferred-type-is-googlesigninaccount-but-googlesigninaccount-was\">Type mismatch: inferred type is GoogleSignInAccount? but GoogleSignInAccount was expected &gt; Task :app:buildInfoGeneratorFdroidDebug</a>). </p>\n\n<p>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {</p>\n\n<pre><code>    super.onActivityResult(requestCode, resultCode, data)\n    if (requestCode == RC_SIGN_IN) {\n        val task: Task&lt;GoogleSignInAccount&gt; = GoogleSignIn.getSignedInAccountFromIntent(data)\n        handleResult (task)\n    }else {\n        Toast.makeText(this, \"Problem in execution order :(\", Toast.LENGTH_LONG).show()\n    }\n}\nprivate fun handleResult (completedTask: Task&lt;GoogleSignInAccount&gt;) {\n    try {\n        val account: GoogleSignInAccount = completedTask.getResult(ApiException::class.java) #error in this line\n        updateUI (account)\n    } catch (e: ApiException) {\n        Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p>If anyone has suggestions on what the cause of this error could be, that would be great.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565723622, "post_id": 57483978, "comment_id": 101439317, "body": "what is the problem you are facing?"}, {"owner": {"reputation": 27, "user_id": 8767663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c62f474b9711f09be29fb28c0db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bon Echo", "link": "https://stackoverflow.com/users/8767663/bon-echo"}, "reply_to_user": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565723798, "post_id": 57483978, "comment_id": 101439372, "body": "@ZohaibAmir sometimes <code>getRandomColor()</code> gets the previous color. I want the new color to be different from the previous one"}, {"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565724465, "post_id": 57483978, "comment_id": 101439628, "body": "Bon Echo, the problem is in the latter part of your code, check my answer"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 8767663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c62f474b9711f09be29fb28c0db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bon Echo", "link": "https://stackoverflow.com/users/8767663/bon-echo"}, "edited": false, "score": 0, "creation_date": 1565724138, "post_id": 57484063, "comment_id": 101439511, "body": "Hi @andrew  ``` if(newColor == lastColor){ setBackground() // here I am calling the same function to get another color instead of the last one  } ``` I used here recursion where <code>if(newColor == lastColor) </code> is part of <code>setBackground() </code>"}], "tags": [], "owner": {"reputation": 11, "user_id": 11536492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40c3f0f86ee4477e17043bffae6e6e4?s=128&d=identicon&r=PG&f=1", "display_name": "andrewgray0702", "link": "https://stackoverflow.com/users/11536492/andrewgray0702"}, "is_accepted": false, "score": 0, "last_activity_date": 1565723779, "creation_date": 1565723779, "answer_id": 57484063, "question_id": 57483978, "link": "https://stackoverflow.com/questions/57483978/applying-random-background-color-to-recyclerview-but-not-getting-the-same-color/57484063#57484063", "title": "Applying random background color to RecyclerView but not getting the same color twice in a row", "body": "<p>Right now you're only setting the background if the newColor equals the lastColor. This is going to cause the background to always be the same color. You want do do</p>\n\n<pre><code>if(newColor != lastColor){\nsetBackground()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "is_accepted": true, "score": 0, "last_activity_date": 1565724353, "last_edit_date": 1565724353, "creation_date": 1565724001, "answer_id": 57484105, "question_id": 57483978, "link": "https://stackoverflow.com/questions/57483978/applying-random-background-color-to-recyclerview-but-not-getting-the-same-color/57484105#57484105", "title": "Applying random background color to RecyclerView but not getting the same color twice in a row", "body": "<p>You need to return the function after recursion call, or just place the rest of the code in else statement:</p>\n\n<pre><code>fun setBackground(){\nval newColor = getRandomColor()\nif(newColor == lastColor){\nsetBackground()\nreturn;    //RETURN THE FUNCTION HERE\n}\n</code></pre>\n\n<p>Alternative:</p>\n\n<pre><code>fun setBackground(){\nval newColor = getRandomColor()\nif(newColor == lastColor){\nsetBackground()\n}else{\n...\n}\n</code></pre>\n\n<p>When your function comes back to the previous function, it sets the value again which overrides the color set earlier in stack.</p>\n\n<p>Also, you can do this easily without recursion if the above code is confusing you:</p>\n\n<pre><code>val newColor;\ndo{  \nnewColor = getRandomColor()\n}while(newColor == lastColor);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "is_accepted": false, "score": 0, "last_activity_date": 1565724689, "creation_date": 1565724689, "answer_id": 57484225, "question_id": 57483978, "link": "https://stackoverflow.com/questions/57483978/applying-random-background-color-to-recyclerview-but-not-getting-the-same-color/57484225#57484225", "title": "Applying random background color to RecyclerView but not getting the same color twice in a row", "body": "<p>Recursion is causing the issue because when recursion returns, the outer layer of the function call is setting the background colour again.</p>\n\n<p>I suggest you rewrite using a simple <code>do while</code> loop, following your logic:</p>\n\n<pre><code>fun setBackground(){\n  do {\n    val newColor = getRandomColor()\n    setBackground()\n  } while(newColor == lastColor);\n}\n</code></pre>\n\n<p>You can further improve above code by pulling both the <code>newColor</code> variable and the expensive <code>setBackground()</code> method call, out of the loop.</p>\n"}], "owner": {"reputation": 27, "user_id": 8767663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c62f474b9711f09be29fb28c0db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bon Echo", "link": "https://stackoverflow.com/users/8767663/bon-echo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 57484105, "answer_count": 3, "score": 0, "last_activity_date": 1565724689, "creation_date": 1565723369, "question_id": 57483978, "link": "https://stackoverflow.com/questions/57483978/applying-random-background-color-to-recyclerview-but-not-getting-the-same-color", "title": "Applying random background color to RecyclerView but not getting the same color twice in a row", "body": "<p>I am trying to apply a random background color from a list of colors to RecyclerView list items,\nhowever, I am trying not to get the same color twice in a row\nI tried recursion with something like </p>\n\n<pre><code>fun setBackground(){\nval newColor = getRandomColor()\nif(newColor == lastColor){\nsetBackground()\n}\n/*..*\\\n}\n</code></pre>\n\n<p>where <code>setBackground()</code> is called in <code>onBindViewHolder()</code> and <code>getRandomColor()</code> returns a random color in an array from resources</p>\n"}, {"tags": ["java", "javafx", "audio", "kotlin"], "comments": [{"owner": {"reputation": 129471, "user_id": 1155209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=128&d=identicon&r=PG", "display_name": "jewelsea", "link": "https://stackoverflow.com/users/1155209/jewelsea"}, "edited": false, "score": 4, "creation_date": 1565723629, "post_id": 57483669, "comment_id": 101439319, "body": "An <a href=\"https://openjfx.io/javadoc/12/javafx.media/javafx/scene/media/AudioClip.html\" rel=\"nofollow noreferrer\">AudioClip</a> is a better fit for this task than the MediaPlayer you are using."}, {"owner": {"reputation": 133, "user_id": 10700039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c99350d637d9ae4e7844bad3306ba5?s=128&d=identicon&r=PG&f=1", "display_name": "jaro2gw", "link": "https://stackoverflow.com/users/10700039/jaro2gw"}, "reply_to_user": {"reputation": 129471, "user_id": 1155209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=128&d=identicon&r=PG", "display_name": "jewelsea", "link": "https://stackoverflow.com/users/1155209/jewelsea"}, "edited": false, "score": 0, "creation_date": 1565761263, "post_id": 57483669, "comment_id": 101447846, "body": "You&#39;re right it&#39;s way easier to use and fits better since I only want to play a 2-second audio clip. Thanks for suggestion!"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 10700039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c99350d637d9ae4e7844bad3306ba5?s=128&d=identicon&r=PG&f=1", "display_name": "jaro2gw", "link": "https://stackoverflow.com/users/10700039/jaro2gw"}, "is_accepted": false, "score": 2, "last_activity_date": 1565722402, "creation_date": 1565722402, "answer_id": 57483796, "question_id": 57483669, "link": "https://stackoverflow.com/questions/57483669/how-to-play-same-audio-clip-multiple-times-using-javafx-mediaplayer/57483796#57483796", "title": "How to play same audio clip multiple times using JavaFX MediaPlayer", "body": "<p>Well, I found a workaround</p>\n\n<pre><code>private val explosion = Media(App::class.java.getResource(\"/bombs/explosion.mp3\").toString())\n</code></pre>\n\n<p>and then inside the <code>useTheBomb()</code> function:</p>\n\n<pre><code>MediaPlayer(explosion).play()\n</code></pre>\n\n<p>Tried it like a 100 times and worked everytime.\nDon't know why tho.</p>\n"}], "owner": {"reputation": 133, "user_id": 10700039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c99350d637d9ae4e7844bad3306ba5?s=128&d=identicon&r=PG&f=1", "display_name": "jaro2gw", "link": "https://stackoverflow.com/users/10700039/jaro2gw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565722402, "creation_date": 1565721749, "question_id": 57483669, "link": "https://stackoverflow.com/questions/57483669/how-to-play-same-audio-clip-multiple-times-using-javafx-mediaplayer", "title": "How to play same audio clip multiple times using JavaFX MediaPlayer", "body": "<p>I want to implement a simple task:\nwhen a button is clicked, I want to play a sound.\nI have 3 separate buttons that, when clicked, call the same function.\nIn this function, I play the audio clip.\nThe tricky part is: sometimes the buttons work just fine, sometimes not at all, which is super weird to me since they all call the same function.</p>\n\n<p>I've browsed other javafx-audio-related questions but they are all about the audio not playing at all, whereas in my case it seems to play only sometimes?</p>\n\n<p>FXML snippet:</p>\n\n<pre><code>&lt;ImageView fx:id=\"bomb1\" fitHeight=\"32.0\" fitWidth=\"32.0\" \n           onMouseClicked=\"#useTheBomb\"\n           pickOnBounds=\"true\" preserveRatio=\"true\"&gt;\n    &lt;Image url=\"@bombs/bomb1.png\"/&gt;\n    &lt;cursor&gt;\n        &lt;Cursor fx:constant=\"HAND\"/&gt;\n    &lt;/cursor&gt;\n&lt;/ImageView&gt;\n&lt;ImageView fx:id=\"bomb2\" fitHeight=\"32.0\" fitWidth=\"32.0\" \n           onMouseClicked=\"#useTheBomb\"\n           pickOnBounds=\"true\" preserveRatio=\"true\"&gt;\n    &lt;Image url=\"@bombs/bomb2.png\"/&gt;\n    &lt;cursor&gt;\n        &lt;Cursor fx:constant=\"HAND\"/&gt;\n    &lt;/cursor&gt;\n&lt;/ImageView&gt;\n&lt;ImageView fx:id=\"bomb4\" fitHeight=\"32.0\" fitWidth=\"32.0\" \n           onMouseClicked=\"#useTheBomb\"\n           pickOnBounds=\"true\" preserveRatio=\"true\"&gt;\n    &lt;Image url=\"@bombs/bomb4.png\"/&gt;\n    &lt;cursor&gt;\n        &lt;Cursor fx:constant=\"HAND\"/&gt;\n    &lt;/cursor&gt;\n&lt;/ImageView&gt;\n</code></pre>\n\n<p>This code is placed in my FXML Controller class</p>\n\n<pre><code>private val explosion = App::class.java.getResource(\"/bombs/explosion.mp3\").toString()\nprivate fun explode() = MediaPlayer(Media(explosion)).play()\n</code></pre>\n\n<p>the function that is called by the buttons:</p>\n\n<pre><code>fun useTheBomb() {\n        explode()\n\n        /* rest of the function does not concern audio at all, \n         * but I include it in case there's maybe some voodoo magic \n         * underneath that I don't know about\n         * bombArray: Array&lt;ImageView&gt;\n         */        \n        with(bombArray[brikks.bombs++]) {\n            image = exploded\n            onMouseClicked = null\n            cursor = Cursor.DEFAULT\n        }\n}\n</code></pre>\n\n<p>I get no errors when clicking the buttons</p>\n\n<p>I also modyfied my program to allow the buttons to be clicked multiple times, and out of 30 tries the audio failed to play 6 times randomly. I couldn't see a pattern.</p>\n"}, {"tags": ["android", "database", "kotlin", "migration"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 8051742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c7A1jdnO9nw/AAAAAAAAAAI/AAAAAAAABKE/shXaffK4z84/photo.jpg?sz=128", "display_name": "Pabi Moloi", "link": "https://stackoverflow.com/users/8051742/pabi-moloi"}, "edited": false, "score": 0, "creation_date": 1565753656, "post_id": 57484414, "comment_id": 101446309, "body": "Hey @tynn, thank you for your response, I actually want the <code>ingredients</code> property to be nullable."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1565725660, "creation_date": 1565725660, "answer_id": 57484414, "question_id": 57483065, "link": "https://stackoverflow.com/questions/57483065/android-room-migration-java-lang-illegalargumentexception-parameter-specified/57484414#57484414", "title": "Android Room Migration - java.lang.IllegalArgumentException: Parameter specified as non-null is null", "body": "<p>You're altering a table without setting a default value. Therefore the default is null for all rows already present within the table. Since you require the <em>Kotlin</em> property to be non-null, you receive the <code>IllegalArgumentException</code>.</p>\n\n<p>To resolve the issue, you'd have to alter the table to contain a default value for <code>ingredients</code> and declare it non-null as well.</p>\n\n<pre><code>val MIGRATION_2_3 = object : Migration(2, 3) {\n    override fun migrate(database: SupportSQLiteDatabase) {\n        database.execSQL(\n            \"ALTER TABLE product ADD COLUMN ingredients TEXT NOT NULL DEFAULT ''\"\n        )\n    }\n}\n</code></pre>\n\n<p>Alternatively you could make the <code>ingredients</code> <em>Kotlin</em> property nullable.</p>\n"}], "owner": {"reputation": 188, "user_id": 8051742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c7A1jdnO9nw/AAAAAAAAAAI/AAAAAAAABKE/shXaffK4z84/photo.jpg?sz=128", "display_name": "Pabi Moloi", "link": "https://stackoverflow.com/users/8051742/pabi-moloi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 57484414, "answer_count": 1, "score": 0, "last_activity_date": 1565725660, "creation_date": 1565719050, "last_edit_date": 1565725171, "question_id": 57483065, "link": "https://stackoverflow.com/questions/57483065/android-room-migration-java-lang-illegalargumentexception-parameter-specified", "title": "Android Room Migration - java.lang.IllegalArgumentException: Parameter specified as non-null is null", "body": "<p>I am trying to add a column to an existing table in the database. The column is type <code>ArrayList&lt;Date&gt;</code> I wrote a migration step, increased database version number, and added the migration. When I run the migration (run the app), I get the error:</p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter value</p>\n</blockquote>\n\n<p>when attempting to read data from that table. </p>\n\n<p>I have tried following the steps here: <a href=\"https://medium.com/androiddevelopers/understanding-migrations-with-room-f01e04b07929\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/understanding-migrations-with-room-f01e04b07929</a></p>\n\n<p>I have also tested with other data types, and it has migrated successfully. Seems like the issue is adding Lists or <code>ArrayList</code>s.</p>\n\n<pre><code>val MIGRATION_2_3 = object : Migration(2, 3) {\n    override fun migrate(database: SupportSQLiteDatabase) {\n        database.execSQL(\n            \"ALTER TABLE product ADD COLUMN ingredients TEXT\"\n        )\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-testing", "androidx", "android-fragmentscenario"], "answers": [{"tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": true, "score": 2, "last_activity_date": 1565719127, "creation_date": 1565719127, "answer_id": 57483080, "question_id": 57482544, "link": "https://stackoverflow.com/questions/57482544/error-inflating-class-com-google-android-material-tabs-tablayout-inside-fragment/57483080#57483080", "title": "Error inflating class com.google.android.material.tabs.TabLayout inside FragmentScenario test", "body": "<p>The default theme for the activity <code>FragmentScenario</code> launches has a parent theme of <code>android:Theme.WithActionBar</code> - not the <code>MaterialComponents</code> theme that <code>TabLayout</code> requires.</p>\n\n<p>You should pass in the theme that you want to use.</p>\n\n<p>For example, assuming your app has a theme declared as such:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>You'd use:</p>\n\n<pre><code>launchFragmentInContainer&lt;MyFragment&gt;(\n    Bundle().apply { putParcelableArray(MY_DATA, getMyData()) },\n    R.style.AppTheme)\n</code></pre>\n"}], "owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 57483080, "answer_count": 1, "score": 0, "last_activity_date": 1565719127, "creation_date": 1565716862, "last_edit_date": 1565717237, "question_id": 57482544, "link": "https://stackoverflow.com/questions/57482544/error-inflating-class-com-google-android-material-tabs-tablayout-inside-fragment", "title": "Error inflating class com.google.android.material.tabs.TabLayout inside FragmentScenario test", "body": "<p>I wrote a test using <code>FragmentScenario</code>:</p>\n\n<pre><code>@Test\n    fun test() {\n        launchFragmentInContainer&lt;MyFragment&gt;(Bundle().apply { putParcelableArray(MY_DATA, getMyData()) })\n        // checks here\n    }\n</code></pre>\n\n<p>And I get following error:</p>\n\n<pre><code>Error inflating class com.google.android.material.tabs.TabLayout\n</code></pre>\n\n<p>And I get the error only when I launch my test (the app works)\nI tried to add androidTestImplementation <code>\"com.google.android.material:material:1.0.0\"</code> to androidTestImplementation but it didn't help</p>\n\n<p>What can I do to fix that?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "is_accepted": true, "score": 1, "last_activity_date": 1565787404, "creation_date": 1565787404, "answer_id": 57495173, "question_id": 57482314, "link": "https://stackoverflow.com/questions/57482314/anko-custom-alert-not-showing/57495173#57495173", "title": "Anko - Custom Alert not showing", "body": "<p>I removed the typeface and it worked.</p>\n\n<pre><code>typeface = ResourcesCompat.getFont(context, R.font.rubik)\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 2928241, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/877a945a09003d61faad155090a93b2c?s=128&d=identicon&r=PG&f=1", "display_name": "yasin", "link": "https://stackoverflow.com/users/2928241/yasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57495173, "answer_count": 1, "score": 1, "last_activity_date": 1565787404, "creation_date": 1565715735, "question_id": 57482314, "link": "https://stackoverflow.com/questions/57482314/anko-custom-alert-not-showing", "title": "Anko - Custom Alert not showing", "body": "<p>I made this alert using Anko DSL and is not showing in devices with small resolution. </p>\n\n<pre><code>   dialog = alert {\n                customView {\n                    verticalLayout {\n                        backgroundColor = Color.WHITE\n                        textView {\n                            text = context.getString(R.string.delete_sessions)\n                            padding = 8\n                            textSize = 16f\n                            textAlignment = View.TEXT_ALIGNMENT_CENTER\n                            textColor = Color.BLACK\n                            typeface = ResourcesCompat.getFont(context, R.font.rubik)\n                        }\n                        linearLayout {\n                            gravity = Gravity.END\n                            padding = 16\n                            button {\n                                text = context.getString(R.string.no)\n                                textColor = Color.parseColor(\"#FF1A40\")\n                                backgroundColor = Color.WHITE\n                                onClick {\n                                    dialog.dismiss()\n                                }\n                            }\n                            button {\n                                text = context.getString(R.string.yes)\n                                textColor = Color.parseColor(\"#3A92CC\")\n                                backgroundColor = Color.WHITE\n                                onClick {\n                                    dialog.dismiss()\n                                    val list = this@SessionsFragment.getSelectedList()\n                                    if (list != null)\n                                        vm.deleteList(list)\n\n                                }\n                            }\n                        }\n                    }\n                }\n            }.show()\n</code></pre>\n\n<p>If I don't use all content inside customview{ } it works. \nFor example: </p>\n\n<pre><code>alert{\n  message = \"something\"\n   customView{}\n}.show()\n</code></pre>\n\n<p>In high resolution devices, the alert shows fine. \nI'm testing in a 5' with 1080x1920 with density 480 (Genymotion)</p>\n"}, {"tags": ["algorithm", "sorting", "kotlin", "data-structures"], "comments": [{"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1565785580, "post_id": 57480219, "comment_id": 101458930, "body": "Why not two lists?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11922802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f827cc5a3118248ff00bf406a526dab?s=128&d=identicon&r=PG&f=1", "display_name": "fejice", "link": "https://stackoverflow.com/users/11922802/fejice"}, "edited": false, "score": 0, "creation_date": 1565715647, "post_id": 57480461, "comment_id": 101435972, "body": "Yes, I can you Trie to speedup the prefix search, but how can I keep my sorting (probabilities) when constructing a trie?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 2, "creation_date": 1565729330, "post_id": 57480461, "comment_id": 101441367, "body": "Your elements can be referenced from 2 data structures at the same time."}], "tags": [], "owner": {"reputation": 196, "user_id": 11896805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9ccb6ad5b2c1a82726aa6d99384e4a?s=128&d=identicon&r=PG&f=1", "display_name": "work_ishaan", "link": "https://stackoverflow.com/users/11896805/work-ishaan"}, "is_accepted": false, "score": 4, "last_activity_date": 1565708331, "creation_date": 1565708331, "answer_id": 57480461, "question_id": 57480219, "link": "https://stackoverflow.com/questions/57480219/an-effective-way-to-perform-a-prefix-search-on-ranked-sorted-list/57480461#57480461", "title": "An effective way to perform a prefix search on ranked (sorted) list?", "body": "<p>You can read more about Trie data structure <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Trie</a> \nThis could be really useful for your usecase. </p>\n\n<p>Leetcode has another very detailed explanation on it, which you can find here <a href=\"https://leetcode.com/articles/implement-trie-prefix-tree/\" rel=\"nofollow noreferrer\">https://leetcode.com/articles/implement-trie-prefix-tree/</a></p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "is_accepted": false, "score": 0, "last_activity_date": 1565709050, "creation_date": 1565709050, "answer_id": 57480697, "question_id": 57480219, "link": "https://stackoverflow.com/questions/57480219/an-effective-way-to-perform-a-prefix-search-on-ranked-sorted-list/57480697#57480697", "title": "An effective way to perform a prefix search on ranked (sorted) list?", "body": "<p>If your List does not change often, you could create a <code>HashMap</code> where each existing Prefix is a <code>key</code> referring to a collection (sorted by probability) of all entries it is a prefix of.</p>\n\n<p>getting all entries for a given prefix needs ~O(1) then.</p>\n\n<p>Be careful the Map get really big. And creation of the map takes quite some time.</p>\n"}], "owner": {"reputation": 21, "user_id": 11922802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f827cc5a3118248ff00bf406a526dab?s=128&d=identicon&r=PG&f=1", "display_name": "fejice", "link": "https://stackoverflow.com/users/11922802/fejice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1565709050, "creation_date": 1565707556, "question_id": 57480219, "link": "https://stackoverflow.com/questions/57480219/an-effective-way-to-perform-a-prefix-search-on-ranked-sorted-list", "title": "An effective way to perform a prefix search on ranked (sorted) list?", "body": "<p>I have a large list of some elements sorted by their probabilities:</p>\n\n<pre><code>data class Element(val value: String, val probability: Float)\n\nval sortedElements = listOf(\n    Element(\"dddcccdd\", 0.7f),\n    Element(\"aaaabb\", 0.2f),\n    Element(\"bbddee\", 0.1f)\n)\n</code></pre>\n\n<p>Now I need to perform a prefix searches on this list to find items that start with one prefix and then with the next prefix and so on (elements still need to be sorted by probabilities)</p>\n\n<pre><code>val filteredElements1 = sortedElements\n                                  .filter { it.value.startsWith(\"aa\") }\n\nval filteredElements2 = sortedElements\n                                  .filter { it.value.startsWith(\"bb\") }\n</code></pre>\n\n<p>Each \"request\" of elements filtered by some prefix takes O(n) time, which is too slow in case of a large list. </p>\n\n<p>If I didn't care about the order of the elements (their probabilities), I could sort the elements lexicographically and perform a binary search: sorting takes O(n*log&nbsp;n) time and each request -- O(log&nbsp;n) time.</p>\n\n<p>Is there any way to speed up the execution of these operations without losing the sorting (probability) of elements at the same time? Maybe there is some kind of special data structure that is suitable for this task? </p>\n"}, {"tags": ["gradle", "kotlin", "java-module", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 1215, "user_id": 633940, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cdfa35422d7fc7758106b300b4d7f9b3?s=128&d=identicon&r=PG", "display_name": "Squeazer", "link": "https://stackoverflow.com/users/633940/squeazer"}, "is_accepted": false, "score": 1, "last_activity_date": 1565707371, "creation_date": 1565707371, "answer_id": 57480156, "question_id": 57479632, "link": "https://stackoverflow.com/questions/57479632/gradle-kotlin-dsl-multi-project-build-with-java-modules/57480156#57480156", "title": "Gradle Kotlin DSL multi project build with Java Modules", "body": "<p>Naturally after posting the question I found the solution. There exists a Gradle plugin that does exactly what's needed in this situation, with a KotlinDSL example: <a href=\"https://github.com/java9-modularity/gradle-modules-plugin/tree/master/test-project-kotlin\" rel=\"nofollow noreferrer\">https://github.com/java9-modularity/gradle-modules-plugin/tree/master/test-project-kotlin</a></p>\n\n<p>Using the plugin, all I needed to do is change the root <code>build.gradle.kts</code> file:</p>\n\n<pre><code>plugins {\n    base\n    kotlin(\"jvm\") version \"1.3.41\" apply false\n    id(\"org.javamodularity.moduleplugin\") version \"1.5.0\" apply false\n}\n\nsubprojects {\n    apply(plugin = \"org.javamodularity.moduleplugin\")\n\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n}\n</code></pre>\n\n<p><strong>Note: Make sure that your module-info.java file is in the <code>java</code> src folder, and not in the <code>kotlin</code> src folder, otherwise the plugin will not detect the module.</strong></p>\n"}], "owner": {"reputation": 1215, "user_id": 633940, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cdfa35422d7fc7758106b300b4d7f9b3?s=128&d=identicon&r=PG", "display_name": "Squeazer", "link": "https://stackoverflow.com/users/633940/squeazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1846, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1589284627, "creation_date": 1565705588, "last_edit_date": 1592644375, "question_id": 57479632, "link": "https://stackoverflow.com/questions/57479632/gradle-kotlin-dsl-multi-project-build-with-java-modules", "title": "Gradle Kotlin DSL multi project build with Java Modules", "body": "<p>I'm creating a new project (using IntelliJ IDEA) that will be using:</p>\n<ul>\n<li>Gradle as the build system</li>\n<li>Kotlin DSL for build scripts</li>\n<li>Java 9 modules for &quot;organisation&quot;</li>\n<li>Kotlin as the primary language</li>\n</ul>\n<p>I'm having problems setting up Gradle to properly build my project. Most examples I've found are for Groovy and not Kotlin DSL, and most only cover some of the features I want, but not all.</p>\n<p>Right now I have two modules, <em>core</em> and <em>lib</em>, where the <em>core</em> module requires the <em>lib</em> module. My gradle build scripts are:</p>\n<p><strong>build.gradle.kts</strong></p>\n<pre><code>plugins {\n    base\n    kotlin(&quot;jvm&quot;) version &quot;1.3.41&quot; apply false\n}\n\nsubprojects {\n    afterEvaluate {\n        tasks.withType&lt;JavaCompile&gt; {\n            inputs.property(&quot;moduleName&quot;, extra[&quot;moduleName&quot;])\n            options.compilerArgs.addAll(arrayOf(&quot;--module-path&quot;, classpath.asPath))\n            classpath = files()\n        }\n    }\n\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n}\n</code></pre>\n<p><strong>core/build.gradle.kts</strong></p>\n<pre><code>extra.set(&quot;moduleName&quot;, &quot;myproject.core&quot;)\n\nplugins {\n    kotlin(&quot;jvm&quot;)\n}\n\ndependencies {\n    compile(kotlin(&quot;stdlib&quot;))\n    compile(project(&quot;:networking&quot;))\n}\n</code></pre>\n<p><strong>lib/build.gradle.kts</strong></p>\n<pre><code>extra.set(&quot;moduleName&quot;, &quot;myproject.lib&quot;)\n\nplugins {\n    kotlin(&quot;jvm&quot;)\n}\n\ndependencies {\n    compile(kotlin(&quot;stdlib&quot;))\n}\n</code></pre>\n<p>Doing this, configuration fails with:</p>\n<blockquote>\n<p>A problem occurred configuring project ':core'.</p>\n<p>Cannot get property 'moduleName' on extra properties extension as it does not exist</p>\n</blockquote>\n<p>If I remove the <code>inputs.property()</code> line the configuration succeeds, but the <em>core</em> compilation fails (<em>lib</em> compiles successfully) with :</p>\n<blockquote>\n<p>Task :core:compileKotlin</p>\n<p>e: Module myproject.lib cannot be found in the module graph</p>\n</blockquote>\n<p>I assume the issue is is my root <code>build.gradle.kts</code>, but I cannot figure out how to make it work. Googling around, Kotlin DSL for Gradle is somewhat new and not as widely used, and documentation is pretty scarce.</p>\n<p>Any advice would be appreciated!</p>\n"}, {"tags": ["android", "opencv", "kotlin"], "comments": [{"owner": {"reputation": 397, "user_id": 6510944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213bbfd4b9567d215750985ced9d8f95?s=128&d=identicon&r=PG", "display_name": "vSomers", "link": "https://stackoverflow.com/users/6510944/vsomers"}, "edited": false, "score": 0, "creation_date": 1565711104, "post_id": 57479368, "comment_id": 101433968, "body": "Which version of OpenCv are you using?"}, {"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "reply_to_user": {"reputation": 397, "user_id": 6510944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213bbfd4b9567d215750985ced9d8f95?s=128&d=identicon&r=PG", "display_name": "vSomers", "link": "https://stackoverflow.com/users/6510944/vsomers"}, "edited": false, "score": 0, "creation_date": 1565747889, "post_id": 57479368, "comment_id": 101445339, "body": "I am using version 4.1.1 of the Android pack from here: <a href=\"https://opencv.org/releases/\" rel=\"nofollow noreferrer\">opencv.org/releases</a>"}, {"owner": {"reputation": 397, "user_id": 6510944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213bbfd4b9567d215750985ced9d8f95?s=128&d=identicon&r=PG", "display_name": "vSomers", "link": "https://stackoverflow.com/users/6510944/vsomers"}, "edited": false, "score": 0, "creation_date": 1566319556, "post_id": 57479368, "comment_id": 101616463, "body": "I also had troubles setting up OpenCv 4.1.1 Android release with instructions working on 4.1.0 version. Did you manage to make it work for 4.1.0?"}, {"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "reply_to_user": {"reputation": 397, "user_id": 6510944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213bbfd4b9567d215750985ced9d8f95?s=128&d=identicon&r=PG", "display_name": "vSomers", "link": "https://stackoverflow.com/users/6510944/vsomers"}, "edited": false, "score": 0, "creation_date": 1566367030, "post_id": 57479368, "comment_id": 101628491, "body": "Yup, I have added the steps I took to make it work as an answer below. Good Luck :)"}, {"owner": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "reply_to_user": {"reputation": 397, "user_id": 6510944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213bbfd4b9567d215750985ced9d8f95?s=128&d=identicon&r=PG", "display_name": "vSomers", "link": "https://stackoverflow.com/users/6510944/vsomers"}, "edited": false, "score": 0, "creation_date": 1608317657, "post_id": 57479368, "comment_id": 115556050, "body": "@vSomers can you also look at my question maybe you could help <a href=\"https://stackoverflow.com/questions/65362431/opencv-4-5-0-empty-javacameraview-and-javacamera2view\">question</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "edited": false, "score": 0, "creation_date": 1565707454, "post_id": 57480067, "comment_id": 101431950, "body": "Hi, that is pretty much what I have done.  Can you think of anything that I could have missed?"}, {"owner": {"reputation": 426, "user_id": 8193483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672d2260c4cdd51d3fb6c4752a656c19?s=128&d=identicon&r=PG&f=1", "display_name": "nfl-x", "link": "https://stackoverflow.com/users/8193483/nfl-x"}, "reply_to_user": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "edited": false, "score": 0, "creation_date": 1565707760, "post_id": 57480067, "comment_id": 101432129, "body": "Maybe try to do simple thing like grayscaling  and show it to imageview just to be sure opencv has been setup correctly"}, {"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "edited": false, "score": 0, "creation_date": 1565708397, "post_id": 57480067, "comment_id": 101432518, "body": "I&#39;ve never user OpenCV on android before, do you have a link to a tutorial which shows how to do grayscaling using OpenCV in Android?"}], "tags": [], "owner": {"reputation": 426, "user_id": 8193483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672d2260c4cdd51d3fb6c4752a656c19?s=128&d=identicon&r=PG&f=1", "display_name": "nfl-x", "link": "https://stackoverflow.com/users/8193483/nfl-x"}, "is_accepted": false, "score": 1, "last_activity_date": 1566443553, "last_edit_date": 1592644375, "creation_date": 1565707072, "answer_id": 57480067, "question_id": 57479368, "link": "https://stackoverflow.com/questions/57479368/trouble-using-opencv-in-android/57480067#57480067", "title": "Trouble using OpenCV in Android", "body": "<p>I use this method to set opencv 4.1.0. This should work too for 4.1.1.</p>\n<ol>\n<li>Download <a href=\"https://sourceforge.net/projects/opencvlibrary/files/4.1.0/\" rel=\"nofollow noreferrer\">opencv</a> and unzip it</li>\n<li>From android studio, file -&gt; new module -&gt; gradle project and select the sdk directory which contain <code>build.gradle</code> file</li>\n<li>Add it is as dependency module for our &quot;app&quot; module</li>\n<li>On fragment/activity that call opencv api, add</li>\n</ol>\n<pre><code>\nif (!OpenCVLoader.initDebug()) {\n    OpenCVLoader.initDebug()\n}\n</code></pre>\n<p>on either onResume or onCreateView lifecycle hook(the sample use onResume but I havent encounter any problem using it on <code>onCreateView</code>)</p>\n<p><strong>Update 1. How to check if opencv installed correctly</strong></p>\n<ol>\n<li>After unzip the library, we have two folder, <code>sdk</code> and <code>samples</code>.</li>\n<li>Go to <code>samples</code> folder and copy its .java and .xml file from <code>color-blob-detection</code>(This sample implement JavaCameraView) folder to our blank project. I think this faster than fully import the sample.</li>\n<li>Dont forget to copy the manifest file too. It add camera permision. The sample dont implement runtime permission so just toggle it manually from settings -&gt; application -&gt; permissions for now.</li>\n</ol>\n<p>note : Read the <code>build.gradle</code> file for more setup config. eg. splitting apk, ndk support etc.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "edited": false, "score": 0, "creation_date": 1608133925, "post_id": 57585256, "comment_id": 115490752, "body": "I exactly did that and <code>OpenCVLoader.initDebug();</code> showed me success. But in JavaCameraView no image is loading. Also the  <code>System.loadLibrary(&quot;native-lib&quot;);</code> is showing couldn&#39;t find &quot;libnative-lib.so&quot;. can you help please?"}, {"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "reply_to_user": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "edited": false, "score": 0, "creation_date": 1608194495, "post_id": 57585256, "comment_id": 115509930, "body": "You need to use the camera2 api, I have linked to a version of the JavaCamera2View class that worked for me.   Let me know if that workers for you."}, {"owner": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "edited": false, "score": 0, "creation_date": 1608226602, "post_id": 57585256, "comment_id": 115525290, "body": "No luck. can you share your code or see mine? btw I am using 4.5.0. I&#39;ll try on 4.1.1"}, {"owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "reply_to_user": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "edited": false, "score": 0, "creation_date": 1608287360, "post_id": 57585256, "comment_id": 115542835, "body": "Happy to look at your code, but I don&#39;t think I will be able to help as I haven&#39;t worked on Android or Java in over a year now. I&#39;m using Flutter for all my front end needs these days."}, {"owner": {"reputation": 63, "user_id": 12146909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510aec88dd13b9c564e3c6d7014765de?s=128&d=identicon&r=PG&f=1", "display_name": "liva", "link": "https://stackoverflow.com/users/12146909/liva"}, "edited": false, "score": 0, "creation_date": 1608317590, "post_id": 57585256, "comment_id": 115556021, "body": "I have added the question on the stack, please check and suggest something. <a href=\"https://stackoverflow.com/questions/65362431/opencv-4-5-0-empty-javacameraview-and-javacamera2view\">Question</a>"}], "tags": [], "owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "is_accepted": true, "score": 6, "last_activity_date": 1566366971, "creation_date": 1566366971, "answer_id": 57585256, "question_id": 57479368, "link": "https://stackoverflow.com/questions/57479368/trouble-using-opencv-in-android/57585256#57585256", "title": "Trouble using OpenCV in Android", "body": "<p>These are the steps that worked for me.</p>\n\n<ol>\n<li>Go to the OpenCV releases page and click on Android pack link of the current version section (<a href=\"https://opencv.org/releases.html\" rel=\"noreferrer\">https://opencv.org/releases.html</a>). I used 4.1.1</li>\n<li>Unzip the file named opencv--android-sdk</li>\n<li>In Android Studio, go to File > New > Import Module... and the choose /sdk and wait for the sync to finish. </li>\n<li>Include open-cv as a module dependency. File -> Project Structure.</li>\n<li>Select the project module(not the open-cv module we added in step 3)</li>\n<li>Add the opencv as a module dependency.</li>\n<li>Check in the build.gradle file is it has been added as a dependency.</li>\n<li>Clean and build the project.</li>\n</ol>\n\n<p>NOTEs </p>\n\n<ul>\n<li><strong>Do not</strong> import  /sdk/java like most tutorials suggest.</li>\n<li>You do not have to copy the native libraries into your project like most tutorials suggest.</li>\n</ul>\n\n<p>Once you have OpenCV imported, use <a href=\"https://heartbeat.fritz.ai/working-with-the-opencv-camera-for-android-rotating-orienting-and-scaling-c7006c3e1916\" rel=\"noreferrer\">this</a> tutorial to get the preview to fill the preview window. </p>\n\n<p>And then use <a href=\"https://github.com/alalek/opencv/blob/3998b41d6843217e639a3ba53389222ec0620351/modules/java/generator/android-21/java/org/opencv/android/JavaCamera2View.java\" rel=\"noreferrer\">this</a> version of the JavaCamera2View. JavaCamera2View uses the camera2 api. </p>\n\n<p>These are the steps that worked for me, happy to be corrected if I have done something wrong. </p>\n\n<p>Good Luck :) </p>\n"}], "owner": {"reputation": 1166, "user_id": 2544048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Vz0gc.jpg?s=128&g=1", "display_name": "DrkStr", "link": "https://stackoverflow.com/users/2544048/drkstr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2077, "favorite_count": 1, "accepted_answer_id": 57585256, "answer_count": 2, "score": 0, "last_activity_date": 1566443553, "creation_date": 1565704665, "last_edit_date": 1565707366, "question_id": 57479368, "link": "https://stackoverflow.com/questions/57479368/trouble-using-opencv-in-android", "title": "Trouble using OpenCV in Android", "body": "<p>I used <a href=\"https://android.jlelse.eu/a-beginners-guide-to-setting-up-opencv-android-library-on-android-studio-19794e220f3c\" rel=\"nofollow noreferrer\">A Beginner\u2019s Guide to Setting up OpenCV Android Library on Android Studio</a> as a guide to setup OpenCV in an Android Studio project. I have got the project to build and install on my phone but I am not getting a video feed from the camera (that is the <code>JavaCameraView</code> is empty).  </p>\n\n<p>The main issues seems to be that the  <a href=\"https://play.google.com/store/apps/details?id=org.opencv.engine\" rel=\"nofollow noreferrer\">OpenCV Manager</a> has been pulled from the google play store. :,( </p>\n\n<p>I have tried the solution from the <a href=\"https://stackoverflow.com/questions/40681578/how-to-run-opencv-code-without-opencv-manager\">this SO question</a> to try to use opencv without needing to get it off the play store, but that didn't help either. </p>\n\n<p>I have all the required permissions to use use the camera on my app. </p>\n\n<p>My code is pretty similar to the one from the Beginner\u2019s Guide tutorial, but let me know if you need to see any more of my code. </p>\n\n<p>My onResume: </p>\n\n<pre><code>public override fun onResume() {\n    super.onResume()\n    if (!OpenCVLoader.initDebug()) {\n        OpenCVLoader.initDebug()\n    }\n    loaderCallback.onManagerConnected(LoaderCallbackInterface.SUCCESS)\n}\n</code></pre>\n\n<p>BaseLoadCallback:</p>\n\n<pre><code>private val loaderCallback = object : BaseLoaderCallback(this) {\n    override fun onManagerConnected(status: Int) {\n        when (status) {\n            LoaderCallbackInterface.SUCCESS -&gt; {\n                Log.i(TAG, \"OpenCV loaded successfully\")\n                opencv_camera_view.enableView()\n                opencv_camera_view.setOnTouchListener(this@MainActivity)\n            }\n            else -&gt; {\n                super.onManagerConnected(status)\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-recyclerview", "android-viewpager"], "comments": [{"owner": {"reputation": 428, "user_id": 2852094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a1815180c4f7e2c24e9a4db7cc42d6?s=128&d=identicon&r=PG", "display_name": "jordan_terry", "link": "https://stackoverflow.com/users/2852094/jordan-terry"}, "edited": false, "score": 0, "creation_date": 1565704213, "post_id": 57479136, "comment_id": 101429919, "body": "Could you post your code as it is now? It would be helpful to see any data classes, or your adapter."}, {"owner": {"reputation": 731, "user_id": 9130759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Jm9w.png?s=128&g=1", "display_name": "Mini Chip", "link": "https://stackoverflow.com/users/9130759/mini-chip"}, "edited": false, "score": 0, "creation_date": 1565716381, "post_id": 57479136, "comment_id": 101436252, "body": "Try to debug this line  isSelected = position == selectedPosition ."}, {"owner": {"reputation": 78, "user_id": 11674907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3TVml0FffIU/AAAAAAAAAAI/AAAAAAAABKE/Eb-vPT42zVA/photo.jpg?sz=128", "display_name": "Ady", "link": "https://stackoverflow.com/users/11674907/ady"}, "edited": false, "score": 0, "creation_date": 1565766315, "post_id": 57479136, "comment_id": 101449630, "body": "This expression return the good result, but this line, and more exactly the function <code>onBindViewHolder()</code>, has called only when I scroll Recycler or change page of ViewPager2"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11942112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc16c0b00eade25a3180b1d950f8fcc9?s=128&d=identicon&r=PG&f=1", "display_name": "ImStupidCoder", "link": "https://stackoverflow.com/users/11942112/imstupidcoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1566117763, "creation_date": 1566117763, "answer_id": 57542981, "question_id": 57479136, "link": "https://stackoverflow.com/questions/57479136/recyclerview-doesnt-update-his-items-layouts/57542981#57542981", "title": "RecyclerView doesn&#39;t update his item&#39;s layouts", "body": "<p>Sorry about my poor English ! Is it works on Android5.1 or Android6.0,I have the same problem .finally I find a solution </p>\n\n<p><strong>1. add a ListView(you can set the height or width to zero make it invisiable) to the Fragment where RecyleView in</strong></p>\n\n<p><strong>2. set a Adapter to ListView</strong></p>\n\n<p>then the RecyclerView in this fragment can notifyDataSetChanged() correctly ,even the RecyclerView in other fragment of the same ViewPager2 can work correctly, I don't know how it works ,but it works for me ,hope it works for you too</p>\n"}], "owner": {"reputation": 78, "user_id": 11674907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3TVml0FffIU/AAAAAAAAAAI/AAAAAAAABKE/Eb-vPT42zVA/photo.jpg?sz=128", "display_name": "Ady", "link": "https://stackoverflow.com/users/11674907/ady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1611024985, "creation_date": 1565703950, "last_edit_date": 1611024985, "question_id": 57479136, "link": "https://stackoverflow.com/questions/57479136/recyclerview-doesnt-update-his-items-layouts", "title": "RecyclerView doesn&#39;t update his item&#39;s layouts", "body": "<p>I have a RecyclerView which contains TextViews as items. When I click on a item, it selects him and it normally changes layout of the TextView.</p>\n<p>However, TextView's layout doesn't update except if I scroll the RecyclerView. In back the item is selected, but in front, I have to scroll the RecyclerView to see the change.</p>\n<p>For information, my RecyclerView is in a Fragment which is in a ViewPager2.</p>\n<p>I use <code>notifyItemChanged()</code>and I tried with <code>notifyDataSetChanged()</code>. I've also tried with <code>requestLayout()</code>and <code>invalidate()</code> on the RecyclerView and Parent's layout.</p>\n<p><strong>EDIT 2 :</strong></p>\n<p>I've found the source of my problems, see this <a href=\"https://stackoverflow.com/questions/57427212/how-to-resize-programmatically-viewpager\">post</a> to check out.</p>\n"}, {"tags": ["sqlite", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2090, "user_id": 2736849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2aRYz.png?s=128&g=1", "display_name": "mfaisalhyder", "link": "https://stackoverflow.com/users/2736849/mfaisalhyder"}, "edited": false, "score": 0, "creation_date": 1570858347, "post_id": 58351075, "comment_id": 103056610, "body": "Hi Kuldeep, instead of just posting snippets, either add comments to them or add a brief explanation of your code, so people can have more understanding easily."}], "tags": [], "owner": {"reputation": 123, "user_id": 6816850, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0cSNf.jpg?s=128&g=1", "display_name": "Kuldeep", "link": "https://stackoverflow.com/users/6816850/kuldeep"}, "is_accepted": true, "score": 0, "last_activity_date": 1578289684, "last_edit_date": 1578289684, "creation_date": 1570857244, "answer_id": 58351075, "question_id": 57478790, "link": "https://stackoverflow.com/questions/57478790/how-to-properly-close-sqliteconnection-object-for-database/58351075#58351075", "title": "How to properly close SQLiteConnection object for database?", "body": "<pre><code>    var db: SQLiteDatabase? = null\n    var cursor: Cursor? = null\n    try {\n\n       db = getReadWriteDB()\n       val query = \"Select * From Table\"\n       cursor = db.rawQuery(query, null)\n\n     } catch (e: Exception) {    \n       e.printStackTrace()    \n     } finally {    \n    //     First close the cursor\n       if (cursor != null &amp;&amp; !cursor.isClosed()) {    \n          cursor.close()    \n       }\n    //     second close the database\n\n       if (db != null &amp;&amp; db.isOpen) {\n           db.close()\n    //     Release the database reference\n           db.releaseReference()\n       }\n    }\n</code></pre>\n\n<p>close your db object </p>\n\n<pre><code>db.close()\n</code></pre>\n\n<p>below method is completely close your db references </p>\n\n<pre><code>db.releaseReference()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 8979298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_IKDZ6OnSY/AAAAAAAAAAI/AAAAAAAADUg/fYd8XI4LQeY/photo.jpg?sz=128", "display_name": "Ashraf Patel", "link": "https://stackoverflow.com/users/8979298/ashraf-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1570858423, "last_edit_date": 1570858423, "creation_date": 1570857741, "answer_id": 58351114, "question_id": 57478790, "link": "https://stackoverflow.com/questions/57478790/how-to-properly-close-sqliteconnection-object-for-database/58351114#58351114", "title": "How to properly close SQLiteConnection object for database?", "body": "<p>The problem is with your second <code>if condition</code>.</p>\n\n<p>Here is the updated code,</p>\n\n<pre><code>var db: SQLiteDatabase? = null\nvar cursor: Cursor? = null\ntry {\n\n   db = getReadWriteDB()\n\n   val query = \"Select * From Table\"\n\n   cursor = db.rawQuery(query, null)\n\n } catch (e: Exception) {\n\n   e.printStackTrace()\n\n } finally {\n\n   if (cursor != null &amp;&amp; !cursor.isClosed()) {\n      cursor.close()\n   }\n\n   if(db != null &amp;&amp; db.isOpen()) {\n     db.close()\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6816850, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0cSNf.jpg?s=128&g=1", "display_name": "Kuldeep", "link": "https://stackoverflow.com/users/6816850/kuldeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58351075, "answer_count": 2, "score": 0, "last_activity_date": 1578289684, "creation_date": 1565702880, "last_edit_date": 1592644375, "question_id": 57478790, "link": "https://stackoverflow.com/questions/57478790/how-to-properly-close-sqliteconnection-object-for-database", "title": "How to properly close SQLiteConnection object for database?", "body": "<p><strong>abc.db' was leaked!</strong></p>\n<pre><code>var db: SQLiteDatabase? = null\nvar cursor: Cursor? = null\ntry {\n   \n   db = getReadWriteDB()\n\n   val query = &quot;Select * From Table&quot;\n\n   cursor = db.rawQuery(query, null)\n\n } catch (e: Exception) {\n\n   e.printStackTrace()\n\n } finally {\n\n   if (cursor != null &amp;&amp; !cursor.isClosed()) {\n\n      cursor.close()\n\n   }\n\n   if(db != null &amp;&amp; db.isOpen()) {\n\n     db.close()\n\n   }\n}\n\n</code></pre>\n<p><strong>Below is warning Text display.</strong></p>\n<p>Please fix your application to end transactions in progress properly and to close the database when it is no longer needed.</p>\n"}, {"tags": ["kotlin", "android-widget", "android-number-picker"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9849461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\uae40\uc608\uc131", "link": "https://stackoverflow.com/users/9849461/%ea%b9%80%ec%98%88%ec%84%b1"}, "edited": false, "score": 0, "creation_date": 1565760798, "post_id": 57484029, "comment_id": 101447718, "body": "I checked my question and your answer after wake up and I figured out that the link I posted is a totally different question. Of course, the answer couldn&#39;t solve my problem. it seems that since I was so tired, I made this mistake. I&#39;m sorry and thank you."}, {"owner": {"reputation": 27, "user_id": 9849461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\uae40\uc608\uc131", "link": "https://stackoverflow.com/users/9849461/%ea%b9%80%ec%98%88%ec%84%b1"}, "edited": false, "score": 0, "creation_date": 1565761150, "post_id": 57484029, "comment_id": 101447813, "body": "I decide not to get the string value directly, but to handle the Int value in other way"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1565723885, "last_edit_date": 1565723885, "creation_date": 1565723582, "answer_id": 57484029, "question_id": 57478594, "link": "https://stackoverflow.com/questions/57478594/the-value-of-numberpicker-doesnt-change/57484029#57484029", "title": "The value of NumberPicker doesn&#39;t change", "body": "<p>The translation of the answer there to Kotlin is</p>\n\n<pre><code>// do this outside the loop because it doesn't depend on picker\nval f = NumberPicker::class.java.getDeclaredField(\"mInputText\")\nf.setAccessible(true)\n\n// inside the loop\nval inputText = f.get(picker) as EditText\ninputText.setFilters(arrayOf())\n</code></pre>\n\n<p>(it's surrounded by <code>try-catch</code> which you can do in Kotlin as well if you want but the particular <code>catch</code> there is useless; and if you do it should be outside the <code>for</code> loop).</p>\n"}], "owner": {"reputation": 27, "user_id": 9849461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\uae40\uc608\uc131", "link": "https://stackoverflow.com/users/9849461/%ea%b9%80%ec%98%88%ec%84%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 57484029, "answer_count": 1, "score": 0, "last_activity_date": 1565723885, "creation_date": 1565702304, "question_id": 57478594, "link": "https://stackoverflow.com/questions/57478594/the-value-of-numberpicker-doesnt-change", "title": "The value of NumberPicker doesn&#39;t change", "body": "<p>I'm a beginner in android and Kotlin.\nI want to get string values I set as displayedValues from NumberPicker.\nI tried, but It only returns Int numbers. </p>\n\n<p>After some search, I found a question  <a href=\"https://stackoverflow.com/questions/42458566/formatted-value-of-numberpicker-disappears-onclick\">Formatted value of NumberPicker disappears onClick</a> which might be the solution to my problem. </p>\n\n<p>But I'm beginner and never studied java, so I couldn't apply it to my code. I need your help to figure out whether my code is correct and if it is, I hope to get a solution which can be applied to kotlin\nThankyou!</p>\n\n<pre><code>    val pickers = arrayListOf(picker1,picker2,picker3,picker4,picker5,picker6,picker7)\n    for (picker in pickers) {\n        picker.displayedValues = arrayOf(\n            \"0\", \"30\", \"40\", \"50\", \"60\", \"1\uc2dc\uac04\", \"1\uc2dc\uac04 30\ubd84\", \"2\uc2dc\uac04\", \"2\uc2dc\uac04 30\ubd84\", \"3\uc2dc\uac04\", \"3\uc2dc\uac04 30\ubd84\", \"4\uc2dc\uac04\",\n            \"4\uc2dc\uac04 30\ubd84\", \"5\uc2dc\uac04\"\n        )\n        picker.minValue = 0\n        picker.maxValue = 13\n        picker.setFormatter { num -&gt; picker.displayedValues[num] }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "junit"], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 9093586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WPojE.jpg?s=128&g=1", "display_name": "Marat Zangiev", "link": "https://stackoverflow.com/users/9093586/marat-zangiev"}, "edited": false, "score": 0, "creation_date": 1565859062, "post_id": 57481648, "comment_id": 101482178, "body": "Thank you for your reply. But I get <code>SecurityException</code> only when call <code>locationManager.getLastKnownLocation</code> method. Other <code>LocationManager</code>-s methods works correctly."}], "tags": [], "owner": {"reputation": 101, "user_id": 11875890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiK29.jpg?s=128&g=1", "display_name": "giovanibr", "link": "https://stackoverflow.com/users/11875890/giovanibr"}, "is_accepted": false, "score": 0, "last_activity_date": 1565712753, "creation_date": 1565712753, "answer_id": 57481648, "question_id": 57478445, "link": "https://stackoverflow.com/questions/57478445/got-securityexception-when-call-getlastknownlocation-in-junit-test/57481648#57481648", "title": "Got SecurityException when call getLastKnownLocation in JUnit test", "body": "<p>Theres something wrong with your package name or structure. When the JVM tries to load your class, it recognizes its package name as invalid and throw a SecurityException.</p>\n\n<p>For reference see <a href=\"https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html</a></p>\n"}], "owner": {"reputation": 584, "user_id": 9093586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WPojE.jpg?s=128&g=1", "display_name": "Marat Zangiev", "link": "https://stackoverflow.com/users/9093586/marat-zangiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565712753, "creation_date": 1565701852, "question_id": 57478445, "link": "https://stackoverflow.com/questions/57478445/got-securityexception-when-call-getlastknownlocation-in-junit-test", "title": "Got SecurityException when call getLastKnownLocation in JUnit test", "body": "<p>I have simple method for getting last known location from standard <code>LocationManager</code>:</p>\n\n<pre><code>fun getLastKnownLocation(context: Context): SimpleLocation {\n        val locationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n        val criteria = Criteria()\n        criteria.accuracy = Criteria.ACCURACY_FINE\n        val location: android.location.Location?\n            location = locationManager.getLastKnownLocation(locationManager.getBestProvider(criteria, true))\n        if (location == null) {\n            return SimpleLocation.create(0.0, 0.0)\n        }\n        return SimpleLocation.create(location.latitude, location.longitude)\n    }\n</code></pre>\n\n<p>And after that write simple test for it:</p>\n\n<pre><code>class LocationUtilTest {\n    private val locationUtil: LocationUtil = spyk()\n    private val context = InstrumentationRegistry.getInstrumentation().context\n\n\n    @Test\n    fun getLastKnownLocation() {\n         val l = locationUtil.getLastKnownLocation(context)\n         assertNotNull(l)\n    }\n    }\n</code></pre>\n\n<p>When I run this test, it throws <code>SecurityException</code>:</p>\n\n<p><strong>NOTE!</strong></p>\n\n<p>I replaced my application package name by <strong>app_package_name</strong> below in stackstace(my test package name is <code>app_package_name.test</code>)</p>\n\n<pre><code>java.lang.SecurityException: invalid package name: **app_package_name**.test\nat android.os.Parcel.createException(Parcel.java:1950)\nat android.os.Parcel.readException(Parcel.java:1918)\nat android.os.Parcel.readException(Parcel.java:1868)\nat android.location.ILocationManager$Stub$Proxy.getLastLocation(ILocationManager.java:866)\nat android.location.LocationManager.getLastKnownLocation(LocationManager.java:1434)\nat com.ziuon.trasher.utils.LocationUtil.getLastKnownLocation(LocationUtil.kt:77)\nat java.lang.reflect.Method.invoke(Native Method)\nat io.mockk.proxy.android.advice.Advice$SuperMethodCall.call(Advice.kt:135)\nat io.mockk.impl.instantiation.JvmMockFactoryHelper.handleOriginalCall(JvmMockFactoryHelper.kt:83)\nat io.mockk.impl.instantiation.JvmMockFactoryHelper.access$handleOriginalCall(JvmMockFactoryHelper.kt:20)\nat io.mockk.impl.instantiation.JvmMockFactoryHelper$mockHandler$1$invocation$$inlined$stdFunctions$lambda$1.invoke(JvmMockFactoryHelper.kt:28)\nat io.mockk.impl.stub.MockKStub$handleInvocation$originalPlusToString$1.invoke(MockKStub.kt:227)\nat io.mockk.impl.stub.SpyKStub.defaultAnswer(SpyKStub.kt:15)\nat io.mockk.impl.stub.MockKStub.answer(MockKStub.kt:42)\nat io.mockk.impl.recording.states.AnsweringState.call(AnsweringState.kt:16)\nat io.mockk.impl.recording.CommonCallRecorder.call(CommonCallRecorder.kt:53)\nat io.mockk.impl.stub.MockKStub.handleInvocation(MockKStub.kt:263)\nat io.mockk.impl.instantiation.JvmMockFactoryHelper$mockHandler$1.invocation(JvmMockFactoryHelper.kt:25)\nat io.mockk.proxy.android.advice.Advice$handle$1.call(Advice.kt:77)\nat com.ziuon.trasher.utils.LocationUtil.getLastKnownLocation(Unknown Source:40)\nat com.ziuon.trasher.utils.LocationUtilTest.getLastKnownLocation(LocationUtilTest.kt:55)\nat java.lang.reflect.Method.invoke(Native Method)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runners.Suite.runChild(Suite.java:128)\nat org.junit.runners.Suite.runChild(Suite.java:27)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\nat androidx.test.internal.runner.TestExecutor.execute(TestExecutor.java:56)\nat androidx.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:392)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2152)\nCaused by: android.os.RemoteException: Remote stack trace:\nat com.android.server.LocationManagerService.checkPackageName(LocationManagerService.java:2047)\nat com.android.server.LocationManagerService.getLastLocation(LocationManagerService.java:2228)\nat android.location.ILocationManager$Stub.onTransact(ILocationManager.java:159)\nat android.os.Binder.execTransact(Binder.java:731)\n</code></pre>\n\n<p>All <code>permissions</code> and <code>uses-feature</code> are indicated in manifest:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;\n&lt;uses-feature android:name=\"android.hardware.location.gps\"\n              android:required=\"false\"\n/&gt;\n</code></pre>\n\n<p>Is it throw because I use <code>InstrumentationRegistry.getInstrumentation().context</code>? Or why?\nThank you!</p>\n\n<p><strong>NOTE</strong></p>\n\n<p>I figured out <a href=\"https://stackoverflow.com/questions/16176862/securityexception-when-calling-getlastknownlocation\">this</a> and <a href=\"https://stackoverflow.com/questions/20474761/java-lang-securityexception-invalid-package-name-com-google-android-gms\">this</a>. It not helps me.</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1565700853, "post_id": 57478060, "comment_id": 101428025, "body": "Your error seems to be for a different entity than the one in your question. The error is for <code>SubtitleGeneratedInfo</code>; your question is about <code>SpeechToTextResult</code>."}, {"owner": {"reputation": 363, "user_id": 3884677, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7dfc4736a23b3bb92159c1b3a135453d?s=128&d=identicon&r=PG&f=1", "display_name": "user3884677", "link": "https://stackoverflow.com/users/3884677/user3884677"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1565702714, "post_id": 57478060, "comment_id": 101429032, "body": "Sorry!  my bad!. I resolve my problem with your help. tx"}], "owner": {"reputation": 363, "user_id": 3884677, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7dfc4736a23b3bb92159c1b3a135453d?s=128&d=identicon&r=PG&f=1", "display_name": "user3884677", "link": "https://stackoverflow.com/users/3884677/user3884677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1610032825, "creation_date": 1565700477, "last_edit_date": 1610032825, "question_id": 57478060, "link": "https://stackoverflow.com/questions/57478060/how-to-change-primary-key-of-room-database", "title": "How to change primary key of Room database", "body": "<p>I have a sqlite database and i want to change my primarykey using room.To do it, I create a new table, copy the data from the old table to new table, drop the old table and then rename the new table to the old table.\nThis is my migration code:</p>\n<pre><code>private val MIGRATION_5_6: Migration = object : Migration(5, 6) {\n        override fun migrate(database: SupportSQLiteDatabase) {\n            //Change the SpeechToTextResult primaryKeys\n            database.execSQL(&quot;&quot;&quot;\n               CREATE TABLE `SpeechToTextResult_copy` (\n                    `source` TEXT NOT NULL,\n                    `startTime` REAL NOT NULL,\n                    `endTime` REAL NOT NULL,\n                    `language` TEXT NOT NULL DEFAULT '',\n                    `computeFileIndex` INTEGER NOT NULL,\n                    `projectId` TEXT NOT NULL DEFAULT '',\n                    `wordResults` TEXT NOT NULL,\n                    `computeFileId` INTEGER NOT NULL DEFAULT 0,\n                    PRIMARY KEY (`language`, `projectId`, `computeFileId`)\n                );\n                &quot;&quot;&quot;.trimIndent())\n\n            database.execSQL(&quot;&quot;&quot;\n                INSERT INTO `SpeechToTextResult_copy` (`source`, `startTime`, `endTime`, `language`, `computeFileIndex`, `projectId`, `wordResults`, `computeFileId`)\n                    SELECT `source`, `startTime`, `endTime`, `language`, `computeFileIndex`, `projectId`, `wordResults`, `computeFileId` FROM `SpeechToTextResult`;\n                &quot;&quot;&quot;.trimIndent())\n\n            database.execSQL(&quot;&quot;&quot;\n                DROP TABLE `SpeechToTextResult`;\n                &quot;&quot;&quot;.trimIndent())\n\n            database.execSQL(&quot;&quot;&quot;\n                ALTER TABLE `SpeechToTextResult_copy` RENAME TO `SpeechToTextResult`;\n                &quot;&quot;&quot;.trimIndent())\n\n        }\n    }\n</code></pre>\n<p>I change also my entity:</p>\n<pre><code>@Entity(primaryKeys = [&quot;language&quot;, &quot;projectId&quot;, &quot;computeFileId&quot;])\nclass SpeechToTextResult constructor(@NonNull var source: String,\n                                     @NonNull var startTime: Float,\n                                     @NonNull var endTime: Float,\n                                     @NonNull var language: String,\n                                     @NonNull var computeFileIndex: Int, // index position in the computeFiles List\n                                     @NonNull var projectId: String,\n                                     @TypeConverters(ListConverters::class)\n                                     @NonNull var wordResults: List&lt;WordResult&gt;,\n                                     @NonNull var computeFileId: Int  // index of the scene\n\n) {\n\n    class ListConverters {\n        @TypeConverter\n        fun fromWordResultList(value: List&lt;WordResult&gt;): String {\n            val gson = Gson()\n            val type = object : TypeToken&lt;List&lt;WordResult&gt;&gt;() {\n\n            }.type\n            return gson.toJson(value, type)\n        }\n\n        @TypeConverter\n        fun toWordResultsList(list: String): List&lt;WordResult&gt; {\n            val gson = Gson()\n            val type = object : TypeToken&lt;List&lt;WordResult&gt;&gt;() {\n\n            }.type\n            return gson.fromJson(list, type)\n        }\n    }\n}\n</code></pre>\n<p>But, when I run my app, I have this error:</p>\n<blockquote>\n<p>2019-08-13 14:34:13.776 19028-19201/io.kannelle.app.dev\nE/AndroidRuntime: FATAL EXCEPTION: RxCachedThreadScheduler-1\nProcess: io.kannelle.app.dev, PID: 19028\nio.reactivex.exceptions.OnErrorNotImplementedException: The exception was not handled due to missing onError handler in the\nsubscribe() method call. Further reading:\n<a href=\"https://github.com/ReactiveX/RxJava/wiki/Error-Handling\" rel=\"nofollow noreferrer\">https://github.com/ReactiveX/RxJava/wiki/Error-Handling</a> |\njava.lang.IllegalStateException: Migration didn't properly handle\nSubtitleGeneratedInfo(io.kannelle.sdk.models.SubtitleGeneratedInfo).\nExpected:\nTableInfo{name='SubtitleGeneratedInfo', columns={projectId=Column{name='projectId', type='TEXT', affinity='2',\nnotNull=true, primaryKeyPosition=1}, language=Column{name='language',\ntype='TEXT', affinity='2', notNull=true, primaryKeyPosition=2}},\nforeignKeys=[], indices=[]}\nFound:\nTableInfo{name='SubtitleGeneratedInfo', columns={}, foreignKeys=[], indices=[]}\n...</p>\n</blockquote>\n<p>How I resolve this issue?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565699703, "post_id": 57476819, "comment_id": 101427463, "body": "can you show the code that you use to get the value via <code>property.get(receiver)</code>? It should work, if you pass an actual instance of your payload request."}, {"owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565700145, "post_id": 57476819, "comment_id": 101427685, "body": "The property.get(receiver) code doesn&#39;t compile because the receiver type is expected to be Nothing? Passing in the payload request has a type of I."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565700214, "post_id": 57476819, "comment_id": 101427729, "body": "nice that you see that compiler error, but I don&#39;t and I can&#39;t reproduce it. Can you please share your code?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565701386, "post_id": 57476819, "comment_id": 101428327, "body": "how do you get your receiver? why is your collection generic type <code>KProperty1&lt;I</code> and not <code>KProperty1&lt;Payload</code>? I am looking for that missing piece of information..."}, {"owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565704316, "post_id": 57476819, "comment_id": 101429982, "body": "Actually the <code>payload</code> has type <code>I</code>, so the type of <code>properties</code> is <code>Collection&lt;KProperty1&lt;I, *&gt;&gt;</code>, in the collection they can be different types. For example, the first and second <code>KProperty</code>s are Strings and the third is another object type MyObject. What I was hoping for was to be able to do <code>val obj : MyObj = property.get({What to put here, requires type Nothing})</code>, so that later I can do <code>obj.id = &quot;1234&quot;</code>, since only the MyObject object has the field id, not the two Strings."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565705216, "post_id": 57476819, "comment_id": 101430581, "body": "I mean... how can it have type <code>I</code>? where does this come from? On any example I construct I am able to extract the values... even on a very generic variant... so there must still be something missing... I assume <code>request</code> is an object with a property named <code>payload</code> which is a generic type, is that correct?"}, {"owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565705939, "post_id": 57476819, "comment_id": 101431078, "body": "Yes <code>request</code> is an object with a property named <code>payload</code>. The I is a generic that implements another class we have <code>Foo</code>. So the function declaration is like so: <code>fun &lt;I:Foo&gt; create(request: DRequest&lt;I&gt;, responseClass: KClass&lt;I&gt;) : DResponse&lt;I&gt; {</code>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1565706891, "post_id": 57476819, "comment_id": 101431662, "body": "still... even if I construct something like that, it works for me... I assume you have some sort of problem with your generic type information so you end up with <code>Nothing</code> instead of <code>Foo</code> or a deviation/implementation of it..."}, {"owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "edited": false, "score": 0, "creation_date": 1565707582, "post_id": 57476819, "comment_id": 101432024, "body": "@Programming123 it seems that in your code <code>property</code> has type <code>KProperty1&lt;out I, *&gt;</code>. You can try to explicitly cast it to <code>KProperty1&lt;I, *&gt;</code> and then you can use <code>property.get(request.payload)</code>"}, {"owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "reply_to_user": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "edited": false, "score": 0, "creation_date": 1565726710, "post_id": 57476819, "comment_id": 101440479, "body": "@AndreiTanana Thanks so much Andrei, you were right it had a type of <code>KProperty1&lt;out I, *&gt;</code> which needed to be explicitly cast to <code>KProperty1&lt;I, *&gt;</code>, I&#39;m not sure why this happened or what the <code>out I</code> means but glad it sorted now :)"}, {"owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "edited": false, "score": 0, "creation_date": 1565764585, "post_id": 57476819, "comment_id": 101448931, "body": "You&#39;re welcome!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "edited": false, "score": 0, "creation_date": 1565699247, "post_id": 57477112, "comment_id": 101427207, "body": "Unfortunately this doesn&#39;t help. The issue is that the <code>property</code> variable is a <code>KProperty1</code> type and not the type that I want to perform operations on, such as String. I&#39;m trying to understand how to use the .get(receiver) function, are you familiar with it?"}, {"owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "reply_to_user": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "edited": false, "score": 0, "creation_date": 1565700347, "post_id": 57477112, "comment_id": 101427797, "body": "Sorry, I don&#39;t get your problem. I know that <code>property</code> has type <code>KProperty1&lt;out Payload, *&gt;</code>. That&#39;s why I&#39;m using <code>returnType</code>"}], "tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": false, "score": 0, "last_activity_date": 1565702090, "last_edit_date": 1565702090, "creation_date": 1565696930, "answer_id": 57477112, "question_id": 57476819, "link": "https://stackoverflow.com/questions/57476819/collectionkproperty1i-how-to-get-the-property-instance/57477112#57477112", "title": "Collection&lt;KProperty1&lt;I,*&gt;&gt; How to get the property instance", "body": "<p>You can create a <code>KType</code> for your <code>ClassIWant</code> and then check the property's <code>returnType</code>. It will be something like this:</p>\n\n<pre><code>val properties = request.payload::class.memberProperties\nval desiredType = ClassIWant::class.createType()\nproperties.forEach { property -&gt;\n    if (property.name == \"nameIWant\" &amp;&amp; property.returnType == desiredType) {\n        //todo\n    }\n}\n\n</code></pre>\n\n<p>btw you can cast your property variable to correct type and use <code>get</code></p>\n\n<pre><code>val properties = request.payload::class.memberProperties\nproperties.forEach { property -&gt;\n    val value = (property as KProperty1&lt;Payload, *&gt;).get(request.payload)\n    if (property.name == \"nameIWant\" &amp;&amp; value is ClassIWant) {\n        //todo\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 11922420, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/888af685280fca6e8c482ea602aa933f?s=128&d=identicon&r=PG", "display_name": "justPassingBy", "link": "https://stackoverflow.com/users/11922420/justpassingby"}, "is_accepted": false, "score": 0, "last_activity_date": 1565699700, "creation_date": 1565699700, "answer_id": 57477844, "question_id": 57476819, "link": "https://stackoverflow.com/questions/57476819/collectionkproperty1i-how-to-get-the-property-instance/57477844#57477844", "title": "Collection&lt;KProperty1&lt;I,*&gt;&gt; How to get the property instance", "body": "<p>If you want to get the value of the property, cast the class into invariant type.</p>\n\n<pre><code>instance::class.memberProperties.first() // returns KProperty1&lt;out Instance, *&gt;\n(instance::class as KClass&lt;Instance&gt;).memberProperties.first() // returns KProperty1&lt;Instance, *&gt;\n</code></pre>\n\n<p>If your <code>KClass&lt;Instance&gt;</code> is <code>KClass&lt;*&gt;</code>, use <code>Any</code> as <code>Instance</code>.</p>\n\n<p>Why did the <code>KProperty.call</code> take <code>Nothing</code> as receiver?\nBecause <code>instance::class</code> returns <code>KClass&lt;out Instance&gt;</code>, which propagates the covariant type argument down to the property, which it becomes <code>KProperty&lt;out Instance, *&gt;</code>, which narrows down the possible method receiver to any subtype of Instance, but because we do not know which, we can not safely supply any instance of Instance, as show by the rules of variance, which here limit the generic type argument to <code>Nothing</code>, which means it is impossible to call the method at all.</p>\n\n<p>Why is <code>::class</code> designed to be covariant?\nTo guarantee safety. This has been an issue of great debates as it seems somewhat illogical.</p>\n\n<p>If you want to know the type of the value that the property can return, use</p>\n\n<pre><code>property.returnType\n</code></pre>\n\n<p>It returns a KType, wich is Kotlin's version of Java's Type, which is a more generic concept of a Class (which is one of the implementations of Type).</p>\n\n<p>If you need to 'convert' the KType to a KClass, you need to do the same as if you needed to convert Type to a Class, which is get the raw type of the type. Raw type is type stripped of the any generic information, yes, an erased type. The way to do this is (seemingly) more complicated (involves handling each possible KType/Type implementation) and I recommend checking for answer to this problem separately.</p>\n\n<p>You will be able to reuse Java implementation (that you will surely find on your own) using:</p>\n\n<pre><code>kType.javaType.covertJavaTypeToJavaClass().kotlin  // returns KClass&lt;*&gt;\n</code></pre>\n\n<p>Corrections in your question. I recommend using the proper terms if you wish to receive proper answers:\n* <code>I</code> in your question is type of the method receiver, not the value of the property\n* <code>collection</code> is not a type, <code>Collection is</code>\n* <code>property is ClassIWant</code>is ambiguous as <code>property.type</code> is type of the value in the property and <code>property::class</code> is simply the property implementation, <code>is</code> is also an <code>instanceof</code> check, but in reflection, you need to use <code>KClass.isSubclassOf</code>, or what is known in Java as <code>type.isAssignableFrom</code> (watch the call order), which then makes your condition to be <code>ClassIWant.isSuperclassOf(property.type.getRawType())</code>\n* <code>instance of the property</code> properties have values, not instances. Only classes have instances. Instances are values and values are instances (of some class), but you must still say <code>instance representing the value of the property</code></p>\n"}], "owner": {"reputation": 45, "user_id": 6570039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b3383e1bd770ee5da08a6c0ac3a496?s=128&d=identicon&r=PG&f=1", "display_name": "Programming123", "link": "https://stackoverflow.com/users/6570039/programming123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565702090, "creation_date": 1565695713, "last_edit_date": 1565701305, "question_id": 57476819, "link": "https://stackoverflow.com/questions/57476819/collectionkproperty1i-how-to-get-the-property-instance", "title": "Collection&lt;KProperty1&lt;I,*&gt;&gt; How to get the property instance", "body": "<p>I'm currently using Reflection to inspect an element at runtime using the <code>class.memberProperties</code> function. The type of <code>properties</code> is <code>collection&lt;KProperty1&lt;I, *&gt;&gt;</code> so I run through each of the <code>KProperty</code> objects to find the one that I want by checking if the name is equal to \"nameIWant\", though I would much rather be able to get the instance of the property from the <code>KProperty</code> by using the <code>.get()</code> method on the <code>property</code>, so that then I could do a check such as:</p>\n\n<pre><code>if (property.get(receiver) is ClassIWant) {\n  //Do something\n}\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>val properties = request.payload::class.memberProperties\n  properties.forEach { property -&gt;\n    run {\n      if (property.name.equals(\"nameIWant\")) {\n\n      }\n    }\n  }\n</code></pre>\n\n<p>So far I've been trying to use the <code>.get()</code> method on the <code>KProperty1</code> type but it takes an argument <code>receiver</code> of type <code>Nothing</code>. I'm not able to work out what I need to pass in order to call the <code>.get()</code> method and get the particular instance of the property. I've also checked the documentation here: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/index.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property1/index.html</a> but it hasn't really helped at all.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 1, "creation_date": 1565693489, "post_id": 57475978, "comment_id": 101424183, "body": "The <code>Cloneable</code> interface is nothing but a marker, it doesn&#39;t export any functions. The <code>clone</code> method comes from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--\" rel=\"nofollow noreferrer\"><code>java.lang.Object</code></a> itself and declares it&#39;s <code>clone</code> method as protected. So you&#39;d need to check whether that method was made public, e.g. by adding another interface that declares a <code>public T clone()</code>"}, {"owner": {"reputation": 185, "user_id": 7291215, "user_type": "registered", "profile_image": "https://graph.facebook.com/907248636072186/picture?type=large", "display_name": "Luciano Jeong", "link": "https://stackoverflow.com/users/7291215/luciano-jeong"}, "reply_to_user": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1565694056, "post_id": 57475978, "comment_id": 101424521, "body": "@msrd0 Would you tell me in code how to check if the method is public?"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1565694132, "post_id": 57475978, "comment_id": 101424561, "body": "If you control the code you&#39;d like to clone, invent a new interface. Otherwise, you&#39;d probably need to use reflection, in which case I&#39;d start by asking yourself whether you really need to do this in the first place, and if there is no other way than cloning (which can be runtime expensive so should be avoided by all means)"}, {"owner": {"reputation": 185, "user_id": 7291215, "user_type": "registered", "profile_image": "https://graph.facebook.com/907248636072186/picture?type=large", "display_name": "Luciano Jeong", "link": "https://stackoverflow.com/users/7291215/luciano-jeong"}, "reply_to_user": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1565694771, "post_id": 57475978, "comment_id": 101424932, "body": "OK, there&#39;s no way except reflection..."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1565694869, "post_id": 57475978, "comment_id": 101424984, "body": "If you gave more context I might be able to suggest a different solution than cloning"}], "owner": {"reputation": 185, "user_id": 7291215, "user_type": "registered", "profile_image": "https://graph.facebook.com/907248636072186/picture?type=large", "display_name": "Luciano Jeong", "link": "https://stackoverflow.com/users/7291215/luciano-jeong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "closed_date": 1565700032, "answer_count": 0, "score": 0, "last_activity_date": 1565692748, "creation_date": 1565692584, "last_edit_date": 1565692748, "question_id": 57475978, "link": "https://stackoverflow.com/questions/57475978/how-to-call-clone-method-in-kotlin", "closed_reason": "Duplicate", "title": "How to call &#39;clone&#39; method in Kotlin?", "body": "<p>I can't call <code>clone</code> method in Kotlin.\nHow can I call <code>clone</code> method in case of below:</p>\n\n<pre><code>fun foo(obj: Any?): Int {\n   var ret: Int = 0\n\n   if (obj === null) {\n      // do Something\n   }\n   else if (obj is Cloneable) {\n      var copied: Cloneable = (obj as Cloneable).clone() // Error occurs \n      // do Something \n   }\n}\n</code></pre>\n\n<blockquote>\n  <p>Cannot access <code>clone</code>: It is protected in <code>Cloneable</code></p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1565692602, "post_id": 57475636, "comment_id": 101423700, "body": "You should use different view types using <i>getItemViewType</i> method"}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 8296097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QN0lz43HhJU/AAAAAAAAAAI/AAAAAAAAAFY/eaAX2lU7rIE/photo.jpg?sz=128", "display_name": "Ayush Jain", "link": "https://stackoverflow.com/users/8296097/ayush-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1565692461, "creation_date": 1565692461, "answer_id": 57475947, "question_id": 57475636, "link": "https://stackoverflow.com/questions/57475636/listadapter-with-multiple-sections/57475947#57475947", "title": "ListAdapter with multiple sections", "body": "<p>In your model class you have to create on field for identify the viewType then just override this method in your listAdapter</p>\n\n<pre><code>    override fun getItemViewType(position: Int): Int {\n    //        Based on position set here view type / section type\n        val myModel = getItem(position)\n        when(myModel.viewType){\n            isBanner -&gt; \n            isVerticalList -&gt;\n            isTextField -&gt;\n            else -&gt; \n        }\n        }\n</code></pre>\n\n<p>Return type is integer value so you can simply return view id itself like <code>R.id.banner_type</code></p>\n\n<p>and then</p>\n\n<pre><code>override fun onCreateViewHolder(parent: ViewGroup, viewType: Int){\n        when(viewType){\n\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 4377, "user_id": 4353365, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fOb7w8Ofk5E/AAAAAAAAAAI/AAAAAAAADmc/nymnI-_Ng9g/photo.jpg?sz=128", "display_name": "Francis", "link": "https://stackoverflow.com/users/4353365/francis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565692461, "creation_date": 1565691237, "question_id": 57475636, "link": "https://stackoverflow.com/questions/57475636/listadapter-with-multiple-sections", "title": "ListAdapter with multiple sections", "body": "<p>Any idea how to implement <a href=\"https://developer.android.com/reference/android/support/v7/recyclerview/extensions/ListAdapter\" rel=\"nofollow noreferrer\">RecyclerView.<strong>ListAdapter</strong></a> with multiple section and keep the functionality of <code>ListAdapter</code> (computing diffs)?</p>\n"}, {"tags": ["android", "email", "kotlin", "smtp"], "comments": [{"owner": {"reputation": 3328, "user_id": 3269958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7dgi.png?s=128&g=1", "display_name": "Shalu T D", "link": "https://stackoverflow.com/users/3269958/shalu-t-d"}, "edited": false, "score": 0, "creation_date": 1565687648, "post_id": 57474185, "comment_id": 101421132, "body": "Plz try in thread"}, {"owner": {"reputation": 1, "user_id": 11823005, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wPfCmNq9Rw/AAAAAAAAAAI/AAAAAAAACfg/yaOEximAxHo/photo.jpg?sz=128", "display_name": "Asmoday WR", "link": "https://stackoverflow.com/users/11823005/asmoday-wr"}, "reply_to_user": {"reputation": 3328, "user_id": 3269958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7dgi.png?s=128&g=1", "display_name": "Shalu T D", "link": "https://stackoverflow.com/users/3269958/shalu-t-d"}, "edited": false, "score": 0, "creation_date": 1565687871, "post_id": 57474185, "comment_id": 101421228, "body": "I don&#39;t understand"}, {"owner": {"reputation": 3328, "user_id": 3269958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7dgi.png?s=128&g=1", "display_name": "Shalu T D", "link": "https://stackoverflow.com/users/3269958/shalu-t-d"}, "edited": false, "score": 0, "creation_date": 1565687944, "post_id": 57474185, "comment_id": 101421273, "body": "To avoid the stuck, use thread"}, {"owner": {"reputation": 1, "user_id": 11823005, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wPfCmNq9Rw/AAAAAAAAAAI/AAAAAAAACfg/yaOEximAxHo/photo.jpg?sz=128", "display_name": "Asmoday WR", "link": "https://stackoverflow.com/users/11823005/asmoday-wr"}, "reply_to_user": {"reputation": 3328, "user_id": 3269958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7dgi.png?s=128&g=1", "display_name": "Shalu T D", "link": "https://stackoverflow.com/users/3269958/shalu-t-d"}, "edited": false, "score": 0, "creation_date": 1565688139, "post_id": 57474185, "comment_id": 101421369, "body": "No that&#39;s not the issue, I use <code>doAsync</code> to send the email, the issue is just the email isn&#39;t sending. I&#39;ll edit the post, I meant that the loading screen is loading indefinitely on the ui and the email never sends."}], "owner": {"reputation": 1, "user_id": 11823005, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wPfCmNq9Rw/AAAAAAAAAAI/AAAAAAAACfg/yaOEximAxHo/photo.jpg?sz=128", "display_name": "Asmoday WR", "link": "https://stackoverflow.com/users/11823005/asmoday-wr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565724585, "creation_date": 1565686076, "last_edit_date": 1565724585, "question_id": 57474185, "link": "https://stackoverflow.com/questions/57474185/sending-emails-with-an-android-app-through-company-smtp-server", "title": "Sending emails with an android app through company smtp server", "body": "<p>I need to find a suitable <code>smtp</code> library for my android project, which can connect to a specific company <code>smtp</code> server and send an email through it. I've tried a few of them and none of them worked. The company email I want to send emails from doesn't need a password.</p>\n\n<p>I tried <code>javax.mail</code> library, maybe I just need to modify properties, code below:</p>\n\n<pre><code>props.put(\"mail.smtp.host\", host)\nprops.put(\"mail.smtp.ssl.trust\", host)\nprops.put(\"mail.smtp.port\", \"25\")\nprops.put(\"mail.smtp.auth\", \"false\")\nprops.put(\"mail.smtp.starttls.enable\", \"false\")\n\nval session = Session.getInstance(props)\n</code></pre>\n\n<p>There is no error, the application is loading indefinitely when I click send.</p>\n"}, {"tags": ["hibernate", "kotlin", "enums", "type-conversion"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 3, "creation_date": 1565688887, "post_id": 57474091, "comment_id": 101421769, "body": "What type of error are you getting? Can you provide Logcat output?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1565709845, "post_id": 57474091, "comment_id": 101433326, "body": "<code>Converter</code> is part of Hibernate, not related to Kotlin. And it looks fine. Error is a generic Oracle error. How exactly are you saving the entity?"}], "owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565709375, "creation_date": 1565685704, "last_edit_date": 1565709375, "question_id": 57474091, "link": "https://stackoverflow.com/questions/57474091/understanding-kotlin-enum-converter", "title": "Understanding Kotlin enum converter", "body": "<p>i have following kotlin code, made by guy who is nowhere to be found anymore...</p>\n\n<p>Enum class:</p>\n\n<pre><code>enum class CodeType(val code: Long) {\n    UNDEFINED(0), A(1), B(2), C(3), D(4);\n\n    companion object {\n        private val values = values()\n        fun getByDbCode(dbCode: Long) = values.firstOrNull { it.code == dbCode }\n    }\n}\n</code></pre>\n\n<p>Converter class ?</p>\n\n<pre><code>@Converter(autoApply = true)\nclass CodeTypeEnumConverter : AttributeConverter&lt;CodeType, Long&gt; {\n    override fun convertToEntityAttribute(dbCode: Long?): CodeType? {\n        return if (dbCode == null) {\n            null\n        } else CodeType.getByDbCode(dbCode)\n    }\n\n    override fun convertToDatabaseColumn(type: CodeType): Long? {\n        return type.code\n    }\n}\n</code></pre>\n\n<p>Entity:</p>\n\n<pre><code>@Entity\n@Table(schema = \"XXXX\", name = \"YYYY\")\ndata class Code (\n        @Id\n        @Column(name = \"ID\")\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        var id: Long?,\n            @Column(name = \"CUSTOMERID\")\n        var customerId: String,\n            @Column(name = \"CODE\")\n        var code: String,\n            @Column(name = \"CODETYPE\")\n        @Convert(converter = CodeTypeEnumConverter::class)\n        var codeType: CodeType,\n            @Column(name = \"COUNTRYCODE\")\n        var countryCode: String,\n            @Column(name = \"BEGINDATE\")\n        var beginDate: LocalDate?,\n            @Column(name = \"ENDDATE\")\n        var endDate: LocalDate?,\n)\n</code></pre>\n\n<p>I've done some work with kotlin, and somewhat understand it. But this is something i dont get..</p>\n\n<p>Im supposed to save new instance of this entity to DB.\nBut db column does not take CodeType as a value, but instead <code>Long</code> value 0-3.</p>\n\n<p>As i understand, this <code>@converter</code> system should covert CodeType -> Long but i dont think it does.. All i get is error when saving.</p>\n\n<p>However same entity is used for getting info from same table in the first place, so converter seems to work for getting info from database but not for saving.</p>\n\n<p>Why ? how would i fix this ?</p>\n\n<p>I could circumvent this with second entity and mapper, but thats quite ugly solution i think.</p>\n\n<p>EDIT:</p>\n\n<p>Error:</p>\n\n<pre><code>Caused by: java.sql.SQLException: Invalid argument(s) in call\n</code></pre>\n\n<p>And</p>\n\n<pre><code>org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 17068, SQLState: 99999\nERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Invalid argument(s) in call\n</code></pre>\n"}, {"tags": ["exception", "kotlin", "annotations"], "comments": [{"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 4, "creation_date": 1565683117, "post_id": 57473020, "comment_id": 101419050, "body": "@Throws provides compile time structure for java that is calling kotlin code. For java calling kotlin code that does not throw exceptions, the absence of this annotation is enough. If you are looking purely for a visual aid, you can make your own annotation and make it do nothing."}, {"owner": {"reputation": 1062, "user_id": 5082913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2643625611a7dda0fe37cf1dc9513f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Shreck Ye", "link": "https://stackoverflow.com/users/5082913/shreck-ye"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1566024801, "post_id": 57473020, "comment_id": 101533247, "body": "@Laurence Do you think <code>@Throws(Nothing::class)</code> can be a good &quot;visual aid&quot;?"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 1, "creation_date": 1566025905, "post_id": 57473020, "comment_id": 101533442, "body": "I assume you are adding the other annotations for java interoperability? If so, all of that java will be expecting a &quot;Nothing&quot; exception and you will have to write try catch blocks for it. I would suggest make your own annotation like &quot;@ThrowsNothing&quot; or if you do not need this for java interoperability then adopt the kotlin mindset of No Checked exceptions. See here <a href=\"https://kotlinlang.org/docs/reference/exceptions.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/exceptions.html</a>"}], "owner": {"reputation": 1062, "user_id": 5082913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2643625611a7dda0fe37cf1dc9513f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Shreck Ye", "link": "https://stackoverflow.com/users/5082913/shreck-ye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565681204, "creation_date": 1565681204, "question_id": 57473020, "link": "https://stackoverflow.com/questions/57473020/an-annotation-to-indicate-that-a-method-throws-no-exception-in-kotlin", "title": "An annotation to indicate that a method throws no exception in Kotlin", "body": "<p>Since Kotlin has no checked exceptions, whether a function throws an exception is unknown. When a function throws an exception, I can use the <code>@Throws</code> annotation to indicate what exceptions are thrown. On the other hand, what annotation can I use to indicate that in a function all exceptions are handled and no is thrown, for better readability?    </p>\n"}, {"tags": ["android", "kotlin", "onactivityresult", "startactivityforresult"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 1107274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044711b80d9c11a302f7b20d704c8217?s=128&d=identicon&r=PG&f=1", "display_name": "y2kbug", "link": "https://stackoverflow.com/users/1107274/y2kbug"}, "edited": false, "score": 0, "creation_date": 1565689415, "post_id": 57472902, "comment_id": 101422051, "body": "oh it works. but why it works on activity but not in the fragment? it used to work in fragment (before I write the common method in TVHandler.kt)"}, {"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "reply_to_user": {"reputation": 187, "user_id": 1107274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044711b80d9c11a302f7b20d704c8217?s=128&d=identicon&r=PG&f=1", "display_name": "y2kbug", "link": "https://stackoverflow.com/users/1107274/y2kbug"}, "edited": false, "score": 2, "creation_date": 1565689857, "post_id": 57472902, "comment_id": 101422266, "body": "even though the fragment is the one making the startActivityForResult() call, the activity gets the first shot at handling the result, so you need to call super to pass the result to fragment"}], "tags": [], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1565680724, "creation_date": 1565680724, "answer_id": 57472902, "question_id": 57472692, "link": "https://stackoverflow.com/questions/57472692/onactivityresult-is-not-triggered-when-startactivityforresult-from-a-common-meth/57472902#57472902", "title": "onActivityResult is not triggered when startActivityForResult from a common method", "body": "<p>Put <code>onActivityResult</code> in your activity that hosts the fragment so it can pass value to your fragment</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 1107274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044711b80d9c11a302f7b20d704c8217?s=128&d=identicon&r=PG&f=1", "display_name": "y2kbug", "link": "https://stackoverflow.com/users/1107274/y2kbug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 57472902, "answer_count": 1, "score": 0, "last_activity_date": 1565681793, "creation_date": 1565679867, "last_edit_date": 1565681793, "question_id": 57472692, "link": "https://stackoverflow.com/questions/57472692/onactivityresult-is-not-triggered-when-startactivityforresult-from-a-common-meth", "title": "onActivityResult is not triggered when startActivityForResult from a common method", "body": "<p>I am writing an app which TV and phone layout uses different methods, and they share some common methods. I put the common methods into a separated class. Before I call the common method, \"activity\" is passed to the common class, and \"startActivityForResult\" is called from the common method. However, finish() does not trigger the onActivityResult() on the calling \"Activity\".</p>\n\n<p>MainFragment.kt</p>\n\n<pre><code>class MainFragment : BrowseFragment() {\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        TVHandler.activity = activity\n    }\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        //not triggered    \n    }\n}\n</code></pre>\n\n<p>TVHandler.kt</p>\n\n<pre><code>import androidx.core.app.ActivityCompat.startActivityForResult\nclass TVHandler{\n    fun play(item: Movie, extra_url: String = \"\"){    \n                val intent = Intent(activity, PlaybackActivity::class.java)\n                intent.putExtra(\"item\", item)\n                intent.putExtra(\"url\", url)\n                startActivityForResult(activity, intent, 0, null)\n    }\n\n    companion object {\n        lateinit var activity: Activity\n    }\n}\n</code></pre>\n\n<p>PlaybackActivity.kt</p>\n\n<pre><code>class PlaybackActivity : FragmentActivity() {\n    fun channelSwitch(direction: String, showMessage: Boolean){\n        val intent = Intent()\n        intent.putExtra(\"action\", \"switch\")\n        intent.putExtra(\"direction\", direction)\n        intent.putExtra(\"showMessage\", showMessage)\n        this.setResult(Activity.RESULT_OK, intent)\n        finish()\n    }\n}\n</code></pre>\n\n<p>play() is called. Some action triggered ChannelSwitch(). However, onActivityResult() is not triggered. MainActivity is shown, without any error recorded. May I know how to modify it to make it work?</p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-datepicker", "android-mvvm"], "answers": [{"comments": [{"owner": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 0, "creation_date": 1565680787, "post_id": 57472759, "comment_id": 101418014, "body": "I tried to place it in my fragment and I faced context issue"}, {"owner": {"reputation": 2471, "user_id": 5360809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1618836835044059/picture?type=large", "display_name": "Maksym V.", "link": "https://stackoverflow.com/users/5360809/maksym-v"}, "reply_to_user": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 0, "creation_date": 1565682040, "post_id": 57472759, "comment_id": 101418580, "body": "What issue? Can you provide more details"}, {"owner": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 0, "creation_date": 1565683443, "post_id": 57472759, "comment_id": 101419188, "body": "I used Androidviewmodel to use context but when I placed context into the dialog couldn&#39;t be resolved"}], "tags": [], "owner": {"reputation": 2471, "user_id": 5360809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1618836835044059/picture?type=large", "display_name": "Maksym V.", "link": "https://stackoverflow.com/users/5360809/maksym-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1565680178, "creation_date": 1565680178, "answer_id": 57472759, "question_id": 57472499, "link": "https://stackoverflow.com/questions/57472499/how-to-display-date-in-edittext-and-update-it-via-datepicker-using-bindingadapte/57472759#57472759", "title": "How to display date in edittext and update it via datepicker using BindingAdapter and android Mvvm", "body": "<p>First of all,\nDialog should be part of activity/fragment.</p>\n\n<p>Thinking of that, you do not really need to have adapter for that.\nThinking of databinding - you might want to use separate fragment to have datepicker within it. In this case you can have shared ViewModel to share date value.</p>\n\n<p>Please note, in custom binding adapter you can work with <code>String</code> instead of <code>LiveData&lt;String&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 1436476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31784ec2475e3784e6c7901d2c8b60c5?s=128&d=identicon&r=PG", "display_name": "RonaldPaguay", "link": "https://stackoverflow.com/users/1436476/ronaldpaguay"}, "edited": false, "score": 1, "creation_date": 1583013525, "post_id": 57473859, "comment_id": 106975864, "body": "This link (in spanish) may help with &#39;Date picker dialog should be activity or fragment level ...&#39; <a href=\"https://programacionymas.com/blog/como-pedir-fecha-android-usando-date-picker\" rel=\"nofollow noreferrer\">programacionymas.com/blog/&hellip;</a>"}, {"owner": {"reputation": 175, "user_id": 4101918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a10acd355566ae3b8718dccb54e71ff?s=128&d=identicon&r=PG", "display_name": "Kape", "link": "https://stackoverflow.com/users/4101918/kape"}, "edited": false, "score": 1, "creation_date": 1607493777, "post_id": 57473859, "comment_id": 115286746, "body": "Thank you for the solution shown in the blog. Even without knowing Spanish it is very useful source of information on how to establish relation between a fragment and a date picker in Kotlin and Java"}], "tags": [], "owner": {"reputation": 2207, "user_id": 4101826, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BrRYa.jpg?s=128&g=1", "display_name": "Mitesh Vanaliya", "link": "https://stackoverflow.com/users/4101826/mitesh-vanaliya"}, "is_accepted": true, "score": 0, "last_activity_date": 1565684718, "creation_date": 1565684718, "answer_id": 57473859, "question_id": 57472499, "link": "https://stackoverflow.com/questions/57472499/how-to-display-date-in-edittext-and-update-it-via-datepicker-using-bindingadapte/57473859#57473859", "title": "How to display date in edittext and update it via datepicker using BindingAdapter and android Mvvm", "body": "<p>Create live data or observable field for a date into ViewModel (Initially assign default date).</p>\n\n<p>Date picker dialog should be activity or fragment level.\nWhen date change form date picker, update date into ViewModel. Define Viewmodel into you layout files.</p>\n"}], "owner": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1499, "favorite_count": 0, "accepted_answer_id": 57473859, "answer_count": 2, "score": 1, "last_activity_date": 1565684718, "creation_date": 1565678987, "question_id": 57472499, "link": "https://stackoverflow.com/questions/57472499/how-to-display-date-in-edittext-and-update-it-via-datepicker-using-bindingadapte", "title": "How to display date in edittext and update it via datepicker using BindingAdapter and android Mvvm", "body": "<p>I have a <code>button</code> and <code>editTtext</code> i want to set today's date into edittext then the user can set the new date using the button and display the <code>datepicker</code> to select a new one. The problem I couldn't set the current date in <code>edittext</code> I can displayed <code>datepicker</code> and the selection. I used <code>BindingAdapter</code> and <code>MVVM</code> I'm new to this approach any guide or help thanks in advance.</p>\n\n<p><strong>BindingAdapter:</strong></p>\n\n<pre><code>@BindingAdapter(\"selectDate\")\nfun bindDateClicks(button: Button,mutableLiveData: MutableLiveData&lt;String&gt;) {\n    button.setOnClickListener {\n        selectDate(button.context,mutableLiveData)\n    }\n}\n\nfun selectDate(context: Context,mutableLiveData: MutableLiveData&lt;String&gt;) {\n    val c = Calendar.getInstance()\n    val year = c.get(Calendar.YEAR)\n    val month = c.get(Calendar.MONTH)\n    val day = c.get(Calendar.DAY_OF_MONTH)\n\n\n    val datePickerDialog = DatePickerDialog(context,\n        DatePickerDialog.OnDateSetListener {\n                view, year, monthOfYear, dayOfMonth -&gt;\n            mutableLiveData.value = year.toString() + \"-\" + (monthOfYear + 1) + \"-\" + dayOfMonth.toString()\n        },year,month,day)\n    datePickerDialog.show()\n\n}\n</code></pre>\n\n<p><strong>button:</strong></p>\n\n<pre><code> &lt;Button\n                android:text=\"set Date\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/button3\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                android:layout_marginEnd=\"8dp\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                android:layout_marginStart=\"8dp\"\n                app:selectDate=\"@{viewModel.currentDate}\"\n                app:layout_constraintTop_toBottomOf=\"@+id/spinner3\"\n                android:layout_marginTop=\"48dp\"\n                app:layout_constraintHorizontal_bias=\"0.0\"\n                android:layout_marginBottom=\"8dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"\n                app:layout_constraintVertical_bias=\"0.005\"/&gt;\n</code></pre>\n\n<p><strong>viewmodel:</strong></p>\n\n<pre><code>val currentDate = MutableLiveData&lt;String&gt;()\n</code></pre>\n"}, {"tags": ["android", "kotlin", "fingerprint", "android-fingerprint-api"], "comments": [{"owner": {"reputation": 439, "user_id": 4549478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-4Hu6p-clYU4/AAAAAAAAAAI/AAAAAAAAAHo/JxzHlBX7MPE/photo.jpg?sz=128", "display_name": "SARATH V", "link": "https://stackoverflow.com/users/4549478/sarath-v"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565679113, "post_id": 57472412, "comment_id": 101417267, "body": "@RahulKhurana i&#39;m aware about the code and working flow. Question is about native UI for different devices.. Some with separate scanner and some with onscreen scanner."}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 1, "creation_date": 1565679615, "post_id": 57472412, "comment_id": 101417482, "body": "As there are multiple device manufacturers which customize UI on the OS level. There is no official API by google to achieve  it."}], "answers": [{"tags": [], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "is_accepted": true, "score": 1, "last_activity_date": 1565680902, "creation_date": 1565680902, "answer_id": 57472940, "question_id": 57472412, "link": "https://stackoverflow.com/questions/57472412/how-to-use-native-fingerprint-scanner-ui-in-android-devices/57472940#57472940", "title": "How to use native fingerprint scanner UI in android devices?", "body": "<p>Solution is to create a custom UI and replace it so that it'll be same UI for all devices</p>\n\n<pre><code>public class MyFingerPrintDialog extends BottomSheetDialog implements \nView.OnClickListener {\n\nprivate Context context;\n\nprivate Button btnCancel;\nprivate TextView itemTitle;\n\nprivate BiometricCallback biometricCallback;\n\npublic MyFingerPrintDialog(@NonNull Context context) {\n    super(context, R.style.BottomSheetDialogTheme);\n    this.context = context.getApplicationContext();\n    setDialogView();\n}\n\npublic MyFingerPrintDialog(@NonNull Context context, BiometricCallback biometricCallback) {\n    super(context, R.style.BottomSheetDialogTheme);\n    this.context = context.getApplicationContext();\n    this.biometricCallback = biometricCallback;\n    setDialogView();\n}\n\npublic MyFingerPrintDialog(@NonNull Context context, int theme) {\n    super(context, theme);\n}\n\nprotected MyFingerPrintDialog(@NonNull Context context, boolean cancelable, OnCancelListener cancelListener) {\n    super(context, cancelable, cancelListener);\n}\n\nprivate void setDialogView() {\n    View bottomSheetView = getLayoutInflater().inflate(R.layout.view_bottom_sheet, null);\n    setContentView(bottomSheetView);\n\n    btnCancel = findViewById(R.id.btn_cancel);\n    btnCancel.setOnClickListener(this);\n\n    itemTitle = findViewById(R.id.item_title);\n}\n</code></pre>\n\n<p>BiometricCallback</p>\n\n<pre><code>public interface BiometricCallback {\n\nvoid onAuthenticationFailed();\n\nvoid onAuthenticationCancelled();\n\nvoid onAuthenticationSuccessful();\n}\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 4549478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-4Hu6p-clYU4/AAAAAAAAAAI/AAAAAAAAAHo/JxzHlBX7MPE/photo.jpg?sz=128", "display_name": "SARATH V", "link": "https://stackoverflow.com/users/4549478/sarath-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 57472940, "answer_count": 1, "score": 1, "last_activity_date": 1565680902, "creation_date": 1565678593, "question_id": 57472412, "link": "https://stackoverflow.com/questions/57472412/how-to-use-native-fingerprint-scanner-ui-in-android-devices", "title": "How to use native fingerprint scanner UI in android devices?", "body": "<p><strong>Requirement : How to use native fingerprint scanner UI for onscreen sensor android devices (like Samsung s10 plus).</strong></p>\n\n<p>Working flow of fingerprint authentication is understandable. But is there any method or libraries available for obtaining native fingerprint scanner UI ?</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "kotlin-coroutines", "anko"], "comments": [{"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1565694041, "post_id": 57472240, "comment_id": 101424513, "body": "Why are you hiding the exceptions (argument mismatch exception) from us?"}, {"owner": {"reputation": 89, "user_id": 6049494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDTvc.jpg?s=128&g=1", "display_name": "Krantiz", "link": "https://stackoverflow.com/users/6049494/krantiz"}, "reply_to_user": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1565695357, "post_id": 57472240, "comment_id": 101425254, "body": "@Zun, i am not hiding them, i am not posting them just because there are many questions raising those exceptions but have not got any help and even on Anko github repo itself there are many issues regarding this problem and there seems to be no response/updates regarding those , so i just want to migrate my Anko layouts to other layout files(to XML or android KTX)."}, {"owner": {"reputation": 1302, "user_id": 420412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd48725d80ea0268e4011a520a89c7?s=128&d=identicon&r=PG", "display_name": "gildor", "link": "https://stackoverflow.com/users/420412/gildor"}, "edited": false, "score": 0, "creation_date": 1566284523, "post_id": 57472240, "comment_id": 101597234, "body": "There is no such layout as &quot;android KTX&quot;. I don&#39;t think that there is any way to convert it automatically, probably just find/replace may help, or manually port everything"}, {"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 0, "creation_date": 1566296223, "post_id": 57472240, "comment_id": 101603318, "body": "You can use <a href=\"https://github.com/LouisCAD/Splitties/tree/master/modules/views-dsl\" rel=\"nofollow noreferrer\">Splitties Views DSL</a> that has working IDE preview and is AndroidX compatible. Moving from Anko to it is quite easy. If you have further questions about it, other users and myself are happy to help you in the <code>#splitties</code> channel on Kotlin&#39;s Slack (<a href=\"https://slack.kotl.in\" rel=\"nofollow noreferrer\">invite here</a>)."}], "owner": {"reputation": 89, "user_id": 6049494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDTvc.jpg?s=128&g=1", "display_name": "Krantiz", "link": "https://stackoverflow.com/users/6049494/krantiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565693885, "creation_date": 1565677794, "last_edit_date": 1565693885, "question_id": 57472240, "link": "https://stackoverflow.com/questions/57472240/how-to-convert-anko-dsl-layouts-to-xml", "title": "How to convert Anko DSL Layouts to XML?", "body": "<p>On my project Anko-layout was used since it was trending at that time, but after IDE and sdk updates i am unable to preview layouts with Anko support plugin and plugin crashes with more than 90 exceptions one of which is argument mismatch exception. Tried downgrading Android studio and plugin but was of no help and the library seems to have abandoned since there is any update or issue fixes recently.</p>\n\n<p>Is there any way to convert the Anko DSL UI to XML?</p>\n\n<p>Or if there is any hotfix for the problem here are my dependency versions:</p>\n\n<pre><code>ext.kotlin_version = '1.2.30'\next.anko_version = '0.10.1'\n</code></pre>\n\n<p>Android Studio version 3.4.2 <br/>\nAnko support plugin version: 0.10.7-2</p>\n"}, {"tags": ["android", "macos", "android-studio", "kotlin", "flutter"], "comments": [{"owner": {"reputation": 2319, "user_id": 3514144, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/hRi21.jpg?s=128&g=1", "display_name": "Ajay Pandya", "link": "https://stackoverflow.com/users/3514144/ajay-pandya"}, "edited": false, "score": 2, "creation_date": 1565670926, "post_id": 57471109, "comment_id": 101414757, "body": "First make sure your sdk is not corrupted, You can force quit it and restart again, if not work try with restart your mac,still same issue arrive re install AS with latest dmg."}], "answers": [{"comments": [{"owner": {"reputation": 839, "user_id": 3015074, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zwfmQ.jpg?s=128&g=1", "display_name": "chabislav", "link": "https://stackoverflow.com/users/3015074/chabislav"}, "edited": false, "score": 0, "creation_date": 1570829975, "post_id": 58271755, "comment_id": 103052564, "body": "That&#39;s exactly what I found out too, just didn&#39;t have time to write it here. That plugin really messed up the entire Android Studio."}], "tags": [], "owner": {"reputation": 131, "user_id": 3555331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26733cfcb1ed77c6e0bcea7df42845a7?s=128&d=identicon&r=PG", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3555331/samuel"}, "is_accepted": false, "score": 1, "last_activity_date": 1570458873, "creation_date": 1570458873, "answer_id": 58271755, "question_id": 57471109, "link": "https://stackoverflow.com/questions/57471109/android-studio-crashes-after-latest-updates-aug-2019/58271755#58271755", "title": "Android Studio crashes after latest updates ( Aug 2019)", "body": "<p>I met the same problem as you after upgrading Android Studio to <strong>3.5</strong>. Base on the error log, I think the problem is out from <a href=\"https://github.com/wuseal/JsonToKotlinClass\" rel=\"nofollow noreferrer\">JsonToKotlinClass</a> plugin. I remove the plugin and Android Studio is back!</p>\n\n<p>You can find the plugin under <code>~/Library/Application Support/AndroidStudio3.5</code>. Make a backup and try to remove it.</p>\n\n<hr>\n"}], "owner": {"reputation": 839, "user_id": 3015074, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zwfmQ.jpg?s=128&g=1", "display_name": "chabislav", "link": "https://stackoverflow.com/users/3015074/chabislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570458873, "creation_date": 1565670450, "question_id": 57471109, "link": "https://stackoverflow.com/questions/57471109/android-studio-crashes-after-latest-updates-aug-2019", "title": "Android Studio crashes after latest updates ( Aug 2019)", "body": "<p>Opened up Android Studio after about 2 weeks from the last usage. Android Studio itself was up-to-date. It offered to update Android Tools and Flutter plugins. After the usual install, it offered to restart AS. And now this is what I see when I try to run my AS:</p>\n\n<pre><code>Internal error. Please report to https://code.google.com/p/android/issues\n\njava.lang.IllegalStateException: exceptionDir.listFiles() must not be null\nat wu.seal.jsontokotlin.feedback.PersistCache.readAllCachedExceptionInfo(PersistCache.kt:58)\nat wu.seal.jsontokotlin.feedback.NetWorkKt$sendHistoryExceptionInfo$1.run(NetWork.kt:33)\nat java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>Does anyone know what is it? Thank you.</p>\n"}, {"tags": ["android", "kotlin", "countdowntimer"], "comments": [{"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565670740, "post_id": 57471057, "comment_id": 101414710, "body": "How did you program <code>pauseTimer()</code>?"}, {"owner": {"reputation": 1, "user_id": 3840126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68e2O.jpg?s=128&g=1", "display_name": "Nam", "link": "https://stackoverflow.com/users/3840126/nam"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565674433, "post_id": 57471057, "comment_id": 101415583, "body": "@RahulKhurana by calling <code>countDownTimer?.cancel()</code>"}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565674657, "post_id": 57471057, "comment_id": 101415634, "body": "You can save the <code>millisUntilFinished</code> to save the current timer from  <code>onTick</code> method and then use the same milliSeconds to start the <code>CountDownTimer</code>"}, {"owner": {"reputation": 1, "user_id": 3840126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68e2O.jpg?s=128&g=1", "display_name": "Nam", "link": "https://stackoverflow.com/users/3840126/nam"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565676660, "post_id": 57471057, "comment_id": 101416276, "body": "@RahulKhurana I&#39;m not sure what you mean. For what purpose do we save the current timer from <code>onTick()</code> to <code>millisUntilFinished</code>?   The work and break time will be set by the user"}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565676889, "post_id": 57471057, "comment_id": 101416352, "body": "So basically you need to maintain a list of timer defined by the user and start the countdown on it. And after the timer is finished check if any other timer is pending to start."}, {"owner": {"reputation": 1, "user_id": 3840126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68e2O.jpg?s=128&g=1", "display_name": "Nam", "link": "https://stackoverflow.com/users/3840126/nam"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565741950, "post_id": 57471057, "comment_id": 101444362, "body": "@RahulKhurana That&#39;s one of the things I wasn&#39;t quite sure of is how could I create a list of timer? Would it be something like <code>listOf(CountDownTimer(20), CountDownTimer(5), CountDownTimer(20), CountDownTimer(5))</code>?   After creating a list of timer, how could I then control it to run one timer after another in the list?"}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565937531, "post_id": 57471057, "comment_id": 101507118, "body": "yes, you&#39;re right. Inside <code>onFinish()</code> method check if the list is empty and if it isn&#39;t picked then use next entry and start time."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3840126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68e2O.jpg?s=128&g=1", "display_name": "Nam", "link": "https://stackoverflow.com/users/3840126/nam"}, "edited": false, "score": 0, "creation_date": 1565742948, "post_id": 57473620, "comment_id": 101444501, "body": "I&#39;m not sure if this answers my question. You&#39;ve given implementations for the <code>startTimer</code>, <code>resetTimer</code> and <code>stopTimer</code> which I&#39;ve already defined.   What I&#39;m trying to figure out is after the first <code>countDownTimer</code> ends, how should I define a second timer that will act as the break time. Then how should I call that second timer when the first one ends"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11608547"}, "is_accepted": false, "score": 0, "last_activity_date": 1565687207, "last_edit_date": 1565687207, "creation_date": 1565683712, "answer_id": 57473620, "question_id": 57471057, "link": "https://stackoverflow.com/questions/57471057/how-do-i-include-a-break-time-in-a-countdown-timer-app-for-android/57473620#57473620", "title": "How do I include a break time in a countdown timer app for Android?", "body": "<p>No it will not create a new instance or not to restart the countdown timer, it just continue from where you stopped it or took a break.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2zqSP.png\" rel=\"nofollow noreferrer\">It Defines all methods</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/OXvbK.png\" rel=\"nofollow noreferrer\">Methods</a></p>\n"}], "owner": {"reputation": 1, "user_id": 3840126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/68e2O.jpg?s=128&g=1", "display_name": "Nam", "link": "https://stackoverflow.com/users/3840126/nam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565742584, "creation_date": 1565669882, "last_edit_date": 1565742584, "question_id": 57471057, "link": "https://stackoverflow.com/questions/57471057/how-do-i-include-a-break-time-in-a-countdown-timer-app-for-android", "title": "How do I include a break time in a countdown timer app for Android?", "body": "<p>I'm building an Android app, which is similar to a pomodoro timer. Basically a user can set a work time and a break time and depending on how many sessions that user sets, the timer will initiate the work time, then break time, and then repeat until its reached the number of sessions the user has specified. </p>\n\n<p>What I'm struggling with is how to approach creating a break time. When creating the break time, would it just restart the instance of <code>CountDownTimer</code> that I already have but set with the break time, or should I create a new instance of <code>CountDownTimer</code>? Should I create an array of <code>CountDownTimer</code> that would be something like <code>[work, break, work, break]</code> and then this would replace my single work time that I've created in <code>startTimer()</code>?</p>\n\n<p>More importantly, I'm trying to figure out how to break down problems on my own, so how might I break down thinking about this problem?</p>\n\n<p>Inside of <code>TimerFragment.kt</code>:</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n            savedInstanceState: Bundle?): View? {\n        ...\n\n        // Setup button actions\n        buttonTimerStartPause?.setOnClickListener {\n            if (isTimerRunning) {\n                pauseTimer()\n            } else {\n                startTimer()\n            }\n        }\n\nprivate fun startTimer() {\n        countDownTimer = object : CountDownTimer(timeLeftInMillis,\n                MILLIS_IN_ONE_SECOND.toLong() - 900) {\n            override fun onTick(millisUntilFinished: Long) {\n                timeLeftInMillis = millisUntilFinished\n                progressBarUpdate?.visibility = View.VISIBLE\n                progressBarStatic?.visibility = View.INVISIBLE\n                updateCountDownText()\n                updateProgressBar()\n        }\n\n            override fun onFinish() {\n                isTimerRunning = false\n                updateButtonVisibility()\n            }\n        }.start()\n\n        isTimerRunning = true\n        updateButtonVisibility()\n}\n</code></pre>\n\n<p><strong>Expected behaviour:</strong>\nIf the user has set a 20 min work time and 5 min break time for 2 sessions, then the timer will run like this: 20min work, 5min break, 20min work, 5min break, and end.</p>\n\n<p>What I have so far is an app where users can set a single work time, then start, pause or reset that work time. I've done this by using a <code>CountDownTimer</code>.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "google-play", "android-app-bundle"], "comments": [{"owner": {"reputation": 2319, "user_id": 3514144, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/hRi21.jpg?s=128&g=1", "display_name": "Ajay Pandya", "link": "https://stackoverflow.com/users/3514144/ajay-pandya"}, "edited": false, "score": 0, "creation_date": 1565670370, "post_id": 57471011, "comment_id": 101414633, "body": "I think linux &quot;x86&quot;,&quot;x86_64&quot; not required but and have you added PROP_APP_ABI=armeabi-v7a:arm64-v8a in gradle.properties ?also make sure you are using latest ndk too"}, {"owner": {"reputation": 61, "user_id": 9902339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rohit Bhujbal", "link": "https://stackoverflow.com/users/9902339/rohit-bhujbal"}, "reply_to_user": {"reputation": 2319, "user_id": 3514144, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/hRi21.jpg?s=128&g=1", "display_name": "Ajay Pandya", "link": "https://stackoverflow.com/users/3514144/ajay-pandya"}, "edited": false, "score": 0, "creation_date": 1565672622, "post_id": 57471011, "comment_id": 101415119, "body": "@AjayPandya Yes I have tried that as well still playstore is giving me same error."}, {"owner": {"reputation": 61, "user_id": 9902339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rohit Bhujbal", "link": "https://stackoverflow.com/users/9902339/rohit-bhujbal"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565672686, "post_id": 57471011, "comment_id": 101415129, "body": "@RahulKhurana I am already things mentioned in google docs"}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565672770, "post_id": 57471011, "comment_id": 101415141, "body": "Share your build.gradle file code in the question"}, {"owner": {"reputation": 61, "user_id": 9902339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rohit Bhujbal", "link": "https://stackoverflow.com/users/9902339/rohit-bhujbal"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565677749, "post_id": 57471011, "comment_id": 101416703, "body": "@RahulKhurana I have edited my answer and added whole gradle file"}, {"owner": {"reputation": 10450, "user_id": 4265103, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3i5oh_ORJuM/AAAAAAAAAAI/AAAAAAAAQcw/sme6yvNLT1c/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4265103/pierre"}, "edited": false, "score": 1, "creation_date": 1571607496, "post_id": 57471011, "comment_id": 103287548, "body": "Do you use renderscript? Or any file with the extension .BC in your bundle?"}, {"owner": {"reputation": 61, "user_id": 9902339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rohit Bhujbal", "link": "https://stackoverflow.com/users/9902339/rohit-bhujbal"}, "reply_to_user": {"reputation": 10450, "user_id": 4265103, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3i5oh_ORJuM/AAAAAAAAAAI/AAAAAAAAQcw/sme6yvNLT1c/photo.jpg?sz=128", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4265103/pierre"}, "edited": false, "score": 0, "creation_date": 1571640232, "post_id": 57471011, "comment_id": 103293827, "body": "Yes @Pierre , the issue is resolved now, there was a third party library which we were using which had renderscipt (.BC file) which wasn&#39;t 64 bit compatible. Later they fixed it for us and it was successfully deployed to Playstore. I found this root cause when I used  <a href=\"https://developer.android.com/studio/command-line/bundletool\" rel=\"nofollow noreferrer\">bundletool</a>. Use this before publishing it to Playstore to check for any errors."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4911814, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007058687037/picture?type=large", "display_name": "Ahmed Nafea", "link": "https://stackoverflow.com/users/4911814/ahmed-nafea"}, "is_accepted": false, "score": 0, "last_activity_date": 1566822117, "creation_date": 1566822117, "answer_id": 57657845, "question_id": 57471011, "link": "https://stackoverflow.com/questions/57471011/google-play-64-bit-requirement-issue/57657845#57657845", "title": "Google Play 64-bit requirement issue", "body": "<p>you can verify add this code</p>\n\n<p><code>defaultConfig {\n         ....\n        renderscriptTargetApi 18\n        renderscriptSupportModeEnabled true\n        ndk.abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64', \"armeabi\"\n    }</code></p>\n"}], "owner": {"reputation": 61, "user_id": 9902339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rohit Bhujbal", "link": "https://stackoverflow.com/users/9902339/rohit-bhujbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 801, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1571594230, "creation_date": 1565669373, "last_edit_date": 1565677615, "question_id": 57471011, "link": "https://stackoverflow.com/questions/57471011/google-play-64-bit-requirement-issue", "title": "Google Play 64-bit requirement issue", "body": "<p>I am uploading android app bundle on Google Play Store but getting 64-bit requirement error on review.My app bundle is completely Java/Kotlin based with native support as some third party has dependency on it.</p>\n\n<p>I have included the support for all architecture <code>armeabi-v7a</code>, <code>arm64-v8a</code>,<code>x86</code>,<code>x86_64</code> in gradle file also enabled split for the abi.</p>\n\n<p><strong>Gradle config I have added:</strong></p>\n\n<pre><code>apply plugin: \"com.android.application\"\napply plugin: \"io.fabric\"\napply plugin: 'com.google.gms.google-services'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'com.google.firebase.firebase-perf'\n\napply from: '../jacoco.gradle'\n\ndef appCenterKey = \"\\\"XXXX\\\"\"\n\nandroid {\nsigningConfigs {\n    release {\n        keyAlias 'XXXX'\n        keyPassword 'XXXX'\n        storeFile file('../buildconfig/XXXXX.jks')\n        storePassword 'XXXXX'\n    }\n}\ncompileSdkVersion 28\ndefaultConfig {\n    applicationId \"com.XXXXX.XXXX\"\n    minSdkVersion 23\n    targetSdkVersion 28\n    versionCode 504\n    versionName \"2.0.0\"\n    multiDexEnabled true\n    testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    vectorDrawables.useSupportLibrary = true\n    ndk {\n        abiFilters \"armeabi-v7a\", \"arm64-v8a\",\"x86\",\"x86_64\"\n    }\n}\n\n\nbuildTypes {\n    all {\n        buildConfigField \"String\", XXXXX,appCenterKey\n    }\n    debug {\n        applicationIdSuffix '.dev'\n        versionNameSuffix '-DEV'\n    }\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n\ntestOptions {\n    execution 'ANDROIDX_TEST_ORCHESTRATOR'\n    animationsDisabled true\n\n    unitTests {\n        includeAndroidResources = true\n        returnDefaultValues = true\n    }\n}\n\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n\nbundle {\n    language {\n        enableSplit = true\n    }\n    density {\n        enableSplit = true\n    }\n    abi {\n        enableSplit = true\n    }\n}\n}\n\ndependencies {\nimplementation fileTree(include: ['*.jar'], dir: 'libs')\nimplementation 'androidx.appcompat:appcompat:1.0.2'\nimplementation 'androidx.cardview:cardview:1.0.0'\nimplementation 'androidx.recyclerview:recyclerview:1.0.0'\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.google.android.material:material:1.0.0'\nimplementation 'androidx.browser:browser:1.0.0'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n\ntestImplementation \"junit:junit:4.12\"\nandroidTestImplementation 'androidx.test:runner:1.2.0'\n\n// Mockito\ndef mockitoVersion = \"2.17.0\"\ntestImplementation \"org.mockito:mockito-core:$mockitoVersion\"\nandroidTestImplementation \"org.mockito:mockito-android:$mockitoVersion\"\n\n// App Center dependencies\ndef appCenterVersion = \"1.4.0\"\nimplementation \"com.microsoft.appcenter:appcenter-analytics:$appCenterVersion\"\nimplementation \"com.microsoft.appcenter:appcenter-crashes:$appCenterVersion\"\n\n// GSON (https://github.com/google/gson)\nimplementation 'com.google.code.gson:gson:2.8.5'\nimplementation 'org.danilopianini:gson-extras:0.2.1'\n\n// Picasso (http://square.github.io/picasso/)\nimplementation \"com.squareup.picasso:picasso:2.71828\"\nimplementation 'androidx.exifinterface:exifinterface:1.0.0'\n\n// Google Play Services\ndef googlePlayVersion = \"17.0.0\"\nimplementation \"com.google.android.gms:play-services-maps:$googlePlayVersion\"\nimplementation \"com.google.android.gms:play-services-location:$googlePlayVersion\"\n\n// AWS (Cognito, API Gateway, etc.)\ndef awsVersion = \"2.14.2\"\nimplementation(\"com.amazonaws:aws-android-sdk-auth-userpools:$awsVersion@aar\") {\n    transitive = true\n}\nimplementation(\"com.amazonaws:aws-android-sdk-mobile-client:$awsVersion@aar\") {\n    transitive = true\n}\nimplementation \"com.amazonaws:aws-android-sdk-apigateway-core:$awsVersion\"\nimplementation \"com.amazonaws:aws-android-sdk-kinesis:$awsVersion\"\n\n// For amazon web hosted UI authorization\nimplementation(\"com.amazonaws:aws-android-sdk-cognitoauth:$awsVersion@aar\") {\n    transitive = true\n}\n\n// Adapter Delegates (https://github.com/sockeqwe/AdapterDelegates)\nimplementation 'com.hannesdorfmann:adapterdelegates3:3.0.1'\nimplementation 'com.squareup.retrofit2:retrofit:2.5.0'\nimplementation 'com.squareup.retrofit2:converter-gson:2.5.0'\nimplementation 'com.squareup.okhttp3:logging-interceptor:3.10.0'\n\n//Dagger 2\nimplementation 'com.google.dagger:dagger:2.16'\nkapt \"com.google.dagger:dagger-compiler:2.16\"\n\n//Permissions\ndef permissionsVersion = \"3.3.1\"\nimplementation(\"com.github.hotchemi:permissionsdispatcher:$permissionsVersion\") {\n    exclude module: \"support-v13\"\n}\nkapt \"com.github.hotchemi:permissionsdispatcher-processor:3.3.1\"\n\n// Braintree - (Suppressing Lint warning as the Braintree docs ask for dynamic version)\n\n//noinspection GradleDynamicVersion\nimplementation 'com.braintreepayments.api:drop-in:3.7.0'\n\n//Circular ImageView\nimplementation 'de.hdodenhof:circleimageview:2.2.0'\n\n//Calligraphy\nimplementation 'io.github.inflationx:calligraphy3:3.0.0'\nimplementation 'io.github.inflationx:viewpump:1.0.0'\n\n// Animated Gif\nimplementation 'pl.droidsonroids.gif:android-gif-drawable:1.2.16'\n\n//Image Compressor\nimplementation 'id.zelory:compressor:2.1.0'\n\n// Firebase\nimplementation \"com.google.firebase:firebase-core:17.0.1\"\nimplementation \"com.google.firebase:firebase-perf:18.0.1\"\nimplementation 'com.google.firebase:firebase-messaging:19.0.1'\n\nimplementation 'com.crashlytics.sdk.android:crashlytics:2.10.1'\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\ntestImplementation 'com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC2'\n\nimplementation 'com.airbnb.android:lottie:2.7.0'\n\n// Google vision API for Face Detection\nimplementation 'com.google.android.gms:play-services-vision:18.0.0'\n\n// Google wallet for Google Pay\nimplementation 'com.google.android.gms:play-services-wallet:17.0.0'\n\n// TODO Enable below line for this error for compile time error : Dagger2 cannot access nullable. javax.annotation.Nullable not found\n// implementation 'com.google.code.findbugs:jsr305:3.0.2'\n\n// QR and Barcode\nimplementation 'com.google.zxing:core:3.3.3'\n\n\n//Multidex\nimplementation 'com.android.support:multidex:1.0.3'\n}\nrepositories {\nmavenCentral()\n}\n</code></pre>\n\n<p>While creating a signed app bundle, in the analyzer it shows all the native support library in it(.so file under <code>armeabi-v7a</code>, <code>arm64-v8a</code>,<code>x86</code>,<code>x86_64</code> in lib folder).</p>\n\n<p>But when I upload this bundle to playstore it uploads successfully but shows support for only 2 platforms(32-bit) which is <code>armeabi-v7a</code>, x86. Instead it should have shown support for all platform both 64 and 32 bit.</p>\n\n<p>On click of review it shows me error message </p>\n\n<blockquote>\n  <p>The following APKs or App Bundles are available to 64-bit devices, but they only have 32-bit native code.</p>\n</blockquote>\n\n<p>Even though I have added dependency for both 32/64 bit native code.</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "mvvm", "data-binding"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11920295, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o1wsUTkE-PA/AAAAAAAAAAI/AAAAAAAAAJY/0f-T9kAwWyY/photo.jpg?sz=128", "display_name": "hukman thayib amri", "link": "https://stackoverflow.com/users/11920295/hukman-thayib-amri"}, "is_accepted": false, "score": 1, "last_activity_date": 1565689288, "creation_date": 1565689288, "answer_id": 57475074, "question_id": 57470920, "link": "https://stackoverflow.com/questions/57470920/how-to-bind-viewmodel-to-nested-view-in-android/57475074#57475074", "title": "How to Bind viewmodel to nested view in android", "body": "<p><p><strong>Thank You stackoverflow, i know what i missed, here is my solution</strong><p>\nwhat i change in <code>StaffActivity.kt</code></p>\n\n<pre><code>class StaffActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener, AnkoLogger {\n\nprivate var fragmentManager: FragmentManager = supportFragmentManager\nprivate lateinit var drawerLayout: DrawerLayout\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    //Create View Model\n    val staffBundle = intent.getBundleExtra(StaffModel.NAME)\n    val staff = staffBundle.getSerializable(StaffModel.NAME) as StaffModel\n    //Create databinding\n    val staffViewModel = StaffViewModel(staff)\n    //remove binding because no need to link view model with this layout\n    setContentView(R.layout.activity_staff) // setActivityLayout\n\n    ...\n\n    // I override this object method\n    val toggle =object: ActionBarDrawerToggle(\n        this, drawerLayout, toolbar,\n        R.string.navigation_drawer_open,\n        R.string.navigation_drawer_close\n    ){// do binding in this method\n       override fun onDrawerStateChanged(newState: Int) {\n            val binding2 = DataBindingUtil.bind&lt;NavHeaderStaffBinding&gt;(findViewById(R.id.staffHeader))\n            binding2!!.staff= staffViewModel\n            super.onDrawerStateChanged(newState)\n        }\n}\n    drawerLayout.addDrawerListener(toggle)\n    toggle.syncState()\n\n    navView.setNavigationItemSelectedListener(this)\n}\n</code></pre>\n\n<p>I made few changes in <code>activity_staff.xml</code> layout, by removing <code>&lt;layout&gt;</code> and <code>&lt;data&gt;</code> tags</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:id=\"@+id/drawer_layout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:fitsSystemWindows=\"true\"\n        tools:openDrawer=\"start\"&gt;\n\n\n    &lt;include\n            layout=\"@layout/app_bar_staff\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"/&gt;\n\n\n    &lt;com.google.android.material.navigation.NavigationView\n            android:id=\"@+id/nav_view\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:layout_gravity=\"start\"\n            android:fitsSystemWindows=\"true\"\n            app:headerLayout=\"@layout/nav_header_staff\"\n            app:menu=\"@menu/activity_staff_drawer\"/&gt;\n\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n\n<p><p><strong>so this is the result</strong><p></p>\n\n<p><a href=\"https://i.stack.imgur.com/CVV7M.png\" rel=\"nofollow noreferrer\">result</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11920295, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o1wsUTkE-PA/AAAAAAAAAAI/AAAAAAAAAJY/0f-T9kAwWyY/photo.jpg?sz=128", "display_name": "hukman thayib amri", "link": "https://stackoverflow.com/users/11920295/hukman-thayib-amri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1610495296, "creation_date": 1565668455, "last_edit_date": 1610495296, "question_id": 57470920, "link": "https://stackoverflow.com/questions/57470920/how-to-bind-viewmodel-to-nested-view-in-android", "title": "How to Bind viewmodel to nested view in android", "body": "<p>To bind my <code>StaffViewModel</code> data to <code>StaffActivity</code> view that has <code>DrawerLayout</code> and <code>NavigationView</code>. In that <code>NavigationView</code> there was a layout <code>nav_header_staf</code> that consist of staff name and email. How can i bind my viewmodel to that <code>nav_header_staff</code> to replace staff name and email</p>\n<p>I have tried to bind the view model in both layout in <code>activity_staff</code> and <code>nav_header_staff</code> layout, but <code>databinding</code> doesn't work.</p>\n<p><strong>Here is what i have tried in my StaffActivity.kt</strong></p>\n<pre><code>class StaffActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener, AnkoLogger {\n\n    private var fragmentManager: FragmentManager = supportFragmentManager\n    private lateinit var drawerLayout: DrawerLayout\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        //Create View Model\n        val staffBundle = intent.getBundleExtra(StaffModel.NAME)\n        val staff = staffBundle.getSerializable(StaffModel.NAME) as StaffModel\n        //Create databinding\n        val staffViewModel = StaffViewModel(staff)\n        val binding = DataBindingUtil.setContentView&lt;ViewDataBinding&gt;(this, R.layout.activity_staff)\n        binding!!.setVariable(BR.staff, staffViewModel)\n\n        val toolbar: Toolbar = toolbar\n        setSupportActionBar(toolbar)\n\n        val fab: FloatingActionButton = fab\n        fab.setOnClickListener { view -&gt;\n            Snackbar.make(view, &quot;Replace with your own action&quot;, Snackbar.LENGTH_LONG)\n                .setAction(&quot;Action&quot;, null).show()\n        }\n        drawerLayout = drawer_layout\n        val navView: NavigationView = nav_view\n\n        val toggle = ActionBarDrawerToggle(\n            this, drawerLayout, toolbar,\n            R.string.navigation_drawer_open,\n            R.string.navigation_drawer_close\n        )\n        drawerLayout.addDrawerListener(toggle)\n        toggle.syncState()\n\n        navView.setNavigationItemSelectedListener(this)\n    }\n</code></pre>\n<p><strong>and here is the activity_staff.xml layout</strong></p>\n<pre><code>&lt;layout&gt;\n    &lt;data xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n        &lt;variable name=&quot;staff&quot; type=&quot;id.code.sakilarentaldvd.viewModel.StaffViewModel&quot;/&gt;\n    &lt;/data&gt;\n    &lt;androidx.drawerlayout.widget.DrawerLayout\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n            xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n            android:id=&quot;@+id/drawer_layout&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:fitsSystemWindows=&quot;true&quot;\n            tools:openDrawer=&quot;start&quot;&gt;\n\n\n        &lt;include\n                layout=&quot;@layout/app_bar_staff&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;/&gt;\n\n\n        &lt;com.google.android.material.navigation.NavigationView\n                android:id=&quot;@+id/nav_view&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:layout_gravity=&quot;start&quot;\n                android:fitsSystemWindows=&quot;true&quot;\n                app:headerLayout=&quot;@layout/nav_header_staff&quot;\n                app:menu=&quot;@menu/activity_staff_drawer&quot;/&gt;\n\n\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n<p><strong>and here is the nav_header_staff.xml layout</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout&gt;\n    &lt;data xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n        &lt;variable name=&quot;staff&quot; type=&quot;id.code.sakilarentaldvd.viewModel.StaffViewModel&quot;/&gt;\n    &lt;/data&gt;\n&lt;LinearLayout\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:id=&quot;@+id/staffHeader&quot;\n        android:layout_height=&quot;@dimen/nav_header_height&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:background=&quot;@drawable/side_nav_bar&quot;\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark&quot;\n        android:orientation=&quot;vertical&quot;\n        android:gravity=&quot;bottom&quot;&gt;\n\n    &lt;ImageView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:paddingTop=&quot;@dimen/nav_header_vertical_spacing&quot;\n            app:srcCompat=&quot;@mipmap/ic_launcher_round&quot;\n            android:contentDescription=&quot;@string/nav_header_desc&quot;\n            android:id=&quot;@+id/imageView&quot;/&gt;\n\n    &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:paddingTop=&quot;@dimen/nav_header_vertical_spacing&quot;\n            tools:text=&quot;username&quot;\n            android:text=&quot;@{staff.staffName}&quot;\n            android:textAppearance=&quot;@style/TextAppearance.AppCompat.Body1&quot;/&gt;\n\n    &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            tools:text=&quot;blabla@sakila.org&quot;\n            android:text=&quot;@{staff.email}&quot;\n            android:id=&quot;@+id/textView&quot;/&gt;\n\n&lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n<p><strong>here is what the result does</strong></p>\n<p><a href=\"https://i.stack.imgur.com/5fmpH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5fmpH.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565670897, "post_id": 57470830, "comment_id": 101414747, "body": "Had you defined any other location permission in the <code>AndroidManifest.xml</code> like <code>ACCESS_COARSE_LOCATION</code>"}, {"owner": {"reputation": 5225, "user_id": 3582305, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/NDgTv.png?s=128&g=1", "display_name": "Kushan", "link": "https://stackoverflow.com/users/3582305/kushan"}, "edited": false, "score": 0, "creation_date": 1565673744, "post_id": 57470830, "comment_id": 101415403, "body": "just a small note: If you call ActivityCompat.requestPermissions in a fragment, the onRequestPermissionsResult callback is called on the activity and not the fragment"}, {"owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "reply_to_user": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565679099, "post_id": 57470830, "comment_id": 101417259, "body": "@RahulKhurana yes I believe both coarse and fine are defined in the manifest"}, {"owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "reply_to_user": {"reputation": 5225, "user_id": 3582305, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/NDgTv.png?s=128&g=1", "display_name": "Kushan", "link": "https://stackoverflow.com/users/3582305/kushan"}, "edited": false, "score": 0, "creation_date": 1565679140, "post_id": 57470830, "comment_id": 101417276, "body": "@Kushan this is in main activity, so I think that should be okay.  That was one of my first thoughts as well"}, {"owner": {"reputation": 7494, "user_id": 4079010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6JOy3.jpg?s=128&g=1", "display_name": "Rahul Khurana", "link": "https://stackoverflow.com/users/4079010/rahul-khurana"}, "edited": false, "score": 0, "creation_date": 1565679201, "post_id": 57470830, "comment_id": 101417305, "body": "@cpgreen2 Then you need to ask both the permissions not one"}], "owner": {"reputation": 589, "user_id": 9654570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd6d5a86a1ebf377a09d814cba9d82f?s=128&d=identicon&r=PG&f=1", "display_name": "cpgreen2", "link": "https://stackoverflow.com/users/9654570/cpgreen2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565667585, "creation_date": 1565667585, "question_id": 57470830, "link": "https://stackoverflow.com/questions/57470830/onrequestpermissionsresult-has-an-empty-permission-and-grantresults-arrays-even", "title": "onRequestPermissionsResult has an empty permission and grantResults arrays, even when permission is granted", "body": "<p>I understand from the Android docs that the <code>permissions</code> and <code>grantResults</code> arrays will be empty in <code>onRequestPermissionsResult()</code> if the dialog is cancelled, but in my case, the dialog shows up, I allow the location permissions, and then it shows the toast because the permissions and grantResults arrays are empty.</p>\n\n<p>What might be causing this?</p>\n\n<p>Here is the code requesting and receiving the permission:</p>\n\n<pre><code>    private fun requestLocationPermission() {\n        ActivityCompat.requestPermissions(\n                this,\n                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),\n                MY_PERMISSION_ACCESS_FINE_LOCATION\n        )\n    }\n\n    override fun onRequestPermissionsResult(requestCode: Int,\n                                            permissions: Array&lt;out String&gt;,\n                                            grantResults: IntArray) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        if (requestCode == MY_PERMISSION_ACCESS_FINE_LOCATION) {\n            if (grantResults.isNotEmpty() &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)\n                bindLocationManager()\n            else\n                Toast.makeText(this, \"Please turn on location access\", Toast.LENGTH_LONG).show()\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "material-design"], "comments": [{"owner": {"reputation": 1704, "user_id": 5909412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CczFB.png?s=128&g=1", "display_name": "P.Juni", "link": "https://stackoverflow.com/users/5909412/p-juni"}, "edited": false, "score": 0, "creation_date": 1565679853, "post_id": 57470387, "comment_id": 101417581, "body": "dont know what architecture you are using, but you could use livedata, observe some boolean and based on it, check / uncheck switches. Every switch would impact this one boolean, which would indicate whether to mark all switches as checked or not."}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 1489095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21973ac84d5ba98717368a220e110c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Phash", "link": "https://stackoverflow.com/users/1489095/phash"}, "is_accepted": false, "score": 0, "last_activity_date": 1565701075, "creation_date": 1565701075, "answer_id": 57478231, "question_id": 57470387, "link": "https://stackoverflow.com/questions/57470387/how-do-i-group-switch-buttons-to-control-selection/57478231#57478231", "title": "How do I group switch buttons to control selection?", "body": "<p>In your Activity you need to reference the switches, and apply the changes you want, after one switch is activated</p>\n\n<pre><code>firstButton.setOnCheckedChangeListener(\n    CompoundButton.OnCheckedChangeListener { buttonView, isChecked -&gt; changeOtherButtons()}\n)\n</code></pre>\n\n<p>You can update your other buttons in the changeOtherButtons() method - you will need to implement one method for each button, or give the method parameters etc. </p>\n"}], "owner": {"reputation": 902, "user_id": 10709519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xDanYP2D-iQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hL-s2Ye-IxGU1p4UmzV6G2kh5zzw/mo/photo.jpg?sz=128", "display_name": "QThompson", "link": "https://stackoverflow.com/users/10709519/qthompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565701075, "creation_date": 1565663323, "last_edit_date": 1565694059, "question_id": 57470387, "link": "https://stackoverflow.com/questions/57470387/how-do-i-group-switch-buttons-to-control-selection", "title": "How do I group switch buttons to control selection?", "body": "<p>I have three <code>SwitchMaterial</code> switches inside my app that need to communicate with each other. I would like to control the selections based on current selections. For example if the first switch is set to true, then the next two should be true as well. If second and third switch is set to true then first on should be set to true and so forth. I know that I could use if and else statements to control this, but is there a way to group these together for easier implementation? </p>\n\n<pre><code>    &lt;com.google.android.material.switchmaterial.SwitchMaterial\n        android:id=\"@+id/switch_all_holes_btn\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:checked=\"true\"\n        android:text=\"Select All Holes\"\n        android:textSize=\"25dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintBottom_toTopOf=\"@id/switch_front_nine_btn\"\n        android:paddingStart=\"10dp\"\n        android:paddingBottom=\"10dp\"/&gt;\n\n    &lt;com.google.android.material.switchmaterial.SwitchMaterial\n        android:id=\"@+id/switch_front_nine_btn\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:checked=\"false\"\n        android:text=\"Select Front Nine\"\n        android:textSize=\"25dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintBottom_toTopOf=\"@id/switch_back_nine_btn\"\n        android:paddingStart=\"10dp\"\n        android:paddingBottom=\"10dp\"/&gt;\n\n    &lt;com.google.android.material.switchmaterial.SwitchMaterial\n        android:id=\"@+id/switch_back_nine_btn\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:checked=\"false\"\n        android:text=\"Select Back Nine\"\n        android:textSize=\"25dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintBottom_toTopOf=\"@id/select_first_nine_btn\"\n        android:paddingStart=\"10dp\"\n        android:paddingBottom=\"10dp\"/&gt;\n</code></pre>\n"}, {"tags": ["java", "kotlin", "code-formatting"], "answers": [{"tags": [], "owner": {"reputation": 4234, "user_id": 5752737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4399530f88749f2a24bcbaef6f625490?s=128&d=identicon&r=PG&f=1", "display_name": "William Burnham", "link": "https://stackoverflow.com/users/5752737/william-burnham"}, "is_accepted": true, "score": 3, "last_activity_date": 1565664013, "creation_date": 1565664013, "answer_id": 57470469, "question_id": 57470369, "link": "https://stackoverflow.com/questions/57470369/how-to-decide-parameters-of-a-constructor/57470469#57470469", "title": "How to decide parameters of a constructor", "body": "<p>You should give the class what it needs to do its job and not more. Derive the parameters the class needs outside of the scope of the class. The constructor's job should be just variable initialization (ideally of private final fields).</p>\n\n<p>If you have a few parameters (someOtherClass, derivedValue) pass those directly to the constructor. If you have lots, instead of the Context object, create your own object such that it's not directly dependent on the context. That way you can mock it relatively easy as needed for testing and it's decoupled from your context object.</p>\n"}], "owner": {"reputation": 1376, "user_id": 1262131, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/2815cbd1f59f5aba6443a9dd16796661?s=128&d=identicon&r=PG&f=1", "display_name": "Aada", "link": "https://stackoverflow.com/users/1262131/aada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1565680278, "accepted_answer_id": 57470469, "answer_count": 1, "score": 1, "last_activity_date": 1565664013, "creation_date": 1565663095, "last_edit_date": 1565663180, "question_id": 57470369, "link": "https://stackoverflow.com/questions/57470369/how-to-decide-parameters-of-a-constructor", "closed_reason": "Opinion-based", "title": "How to decide parameters of a constructor", "body": "<p>I have a class with constructor accepting context as a parameter. Using context its deriving other properties. </p>\n\n<p>My question is should I pass those properties as param of a constructor or derive them using Context. </p>\n\n<p>Example:</p>\n\n<pre><code>class A (val context:Context){\n\n  val someOtherClass = SomeOtherClass(context)\n  val derivedValue = someOtherClass.deriveValue\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata", "android-paging"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8619911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d92fa346de953190c542f0ab8b952d?s=128&d=identicon&r=PG&f=1", "display_name": "Boubacar Bah", "link": "https://stackoverflow.com/users/8619911/boubacar-bah"}, "is_accepted": false, "score": 0, "last_activity_date": 1565674525, "creation_date": 1565674525, "answer_id": 57471659, "question_id": 57470014, "link": "https://stackoverflow.com/questions/57470014/recyclerview-loses-state-on-rotation/57471659#57471659", "title": "RecyclerView loses state on rotation", "body": "<p>I'm not a RxJava expert so I can't speak to that too much but have you tried getting your ViewModel from the ViewModelProviders class instead:</p>\n\n<pre><code>myViewModel = ViewModelProviders.of(this)[MyViewModel::class.java]\n</code></pre>\n\n<p>I believe creating a ViewModel instance this way allows your ViewModel to live outside of your Activities lifecycle and may help with your state issue.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 8767663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c62f474b9711f09be29fb28c0db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bon Echo", "link": "https://stackoverflow.com/users/8767663/bon-echo"}, "edited": false, "score": 0, "creation_date": 1565722164, "post_id": 57471798, "comment_id": 101438726, "body": "All your answers seem to be right at first glance, and I really really really appreciate your time and effort for trying to make this to work  The thing is that I am using <a href=\"https://github.com/MiguelCatalan/MaterialSearchView\" rel=\"nofollow noreferrer\">MaterialSearchView</a> and in <code>onQueryTextChange()</code> I was using the same <code>addNotesToRecyclerView()</code>  I solved it by making another method and applied the search results to the same adapter  Thank you for your time."}], "tags": [], "owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "is_accepted": true, "score": 0, "last_activity_date": 1565675349, "creation_date": 1565675349, "answer_id": 57471798, "question_id": 57470014, "link": "https://stackoverflow.com/questions/57470014/recyclerview-loses-state-on-rotation/57471798#57471798", "title": "RecyclerView loses state on rotation", "body": "<p>When you rotate your device, the view (fragment) is destroyed and re-created, but the ViewModel remains. You're running into trouble because your ViewModel never leverages this feature: instead, on (re-)creation of your view, it causes the ViewModel to re-fetch the data all over again. Each invocation of the VM's <code>loadPagedNotes</code> will create a new LiveData and return it. You really want to have just one and return a reference to that one every single time.</p>\n\n<p>Why don't you change your code to be something like this</p>\n\n<pre><code>class NoteViewModel: ViewModel() {\n    val pagedNotes = mNoteRepository.loadPagedNotes()\n}\n</code></pre>\n\n<p>and in your activity</p>\n\n<pre><code>override fun onCreate(/*...*/) {\n    mViewModel.pagedNotes.observe(this, Observer { addNotesToRecyclerView(it) \n})\n</code></pre>\n\n<p>Also, consider moving this <code>val adapter = PagedNoteListAdapter(this@HomeActivity)</code> to an instance member of the Activity: <code>val mAdapter = ...</code>. That way, your <code>addNotesToRecyclerView</code> code will not create and bind a new adapter every time there is an update from your repository.</p>\n\n<pre><code>class HomeActivity: /*...*/ {\n    val mAdapter = PagedNoteListAdapter(this)\n\n    override fun onCreate(...) {\n        ...\n        mBinding.notesRecyclerView.adapter = mAdapter\n    }\n\n    private fun addNotesToRecyclerView(list: PagedList&lt;Note&gt;) // You don't need the question mark since you're never calling the function except when you already know `list` isn't null) {\n        mAdapter.submitList(list)\n}\n</code></pre>\n\n<p>That could be another reason you're experiencing this.</p>\n\n<p>Also if you still have undesirable refreshing, look into DiffUtil. It enables you to update items of an adapter if they've individually changed, so even if the overall list changes but some elements stay the same, you'll only redraw the changed elements without redrawing the ones that haven't changed (e.g., if you've added one new item it won't redraw everything but just draw the one new item)</p>\n"}], "owner": {"reputation": 27, "user_id": 8767663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c62f474b9711f09be29fb28c0db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bon Echo", "link": "https://stackoverflow.com/users/8767663/bon-echo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 57471798, "answer_count": 2, "score": 0, "last_activity_date": 1565675349, "creation_date": 1565659114, "question_id": 57470014, "link": "https://stackoverflow.com/questions/57470014/recyclerview-loses-state-on-rotation", "title": "RecyclerView loses state on rotation", "body": "<p>I am making a note-taking app using MVVM design pattern, Room for persisting data and paging</p>\n\n<p>The problem is when I rotate my device it appears like it keeps its state for  less than one second, then the RecyclerView scrolls up \nI've debugged my code and found that <code>onChanged()</code> is called multiple times</p>\n\n<p>here is my code </p>\n\n<p><code>NoteRepository</code></p>\n\n<pre><code>override fun loadPagedNotes() : LiveData&lt;PagedList&lt;Note&gt;&gt; {\n       val factory : DataSource.Factory&lt;Int, Note&gt; = mNotesDao.getNotes()\n       val mNotesList = MutableLiveData&lt;PagedList&lt;Note&gt;&gt;()\n\n       val notesList = RxPagedListBuilder(\n           factory, PagedList.Config\n               .Builder()\n               .setPageSize(20)\n               .setEnablePlaceholders(true)\n               .build()\n       ).buildFlowable(BackpressureStrategy.LATEST)\n\n       mDisposables.add(\n           notesList.subscribeOn(Schedulers.io())\n               .observeOn(AndroidSchedulers.mainThread())\n               .subscribe {\n                   mNotesList.value = it\n               }\n       )\n       return mNotesList\n   }\n</code></pre>\n\n<p><code>NoteViewModel</code></p>\n\n<pre><code>fun loadPagedNotes() : LiveData&lt;PagedList&lt;Note&gt;&gt; {\n        return mNoteRepository.loadPagedNotes()\n    }\n</code></pre>\n\n<p><code>HomeActivity</code></p>\n\n<pre><code>class HomeActivity : AppCompatActivity() {\n\n    private lateinit var mBinding : ActivityHomeBinding\n    private val mViewModel : NoteViewModel by viewModel()\n\n    override fun onCreate(savedInstanceState : Bundle?) {\n        super.onCreate(savedInstanceState)\n        mBinding = DataBindingUtil.setContentView(this, R.layout.activity_home)\n        loadNotes()\n    }\n\n\n    private fun loadNotes() {\n        mViewModel.loadPagedNotes()\n            .observe(this,\n                Observer {\n                    if (it.isNotEmpty()) {\n                        addNotesToRecyclerView(it)\n                    }\n                })\n    }\n\n    private fun addNotesToRecyclerView(list : PagedList&lt;Note&gt;?) {\n        showRecyclerView()\n        val adapter = PagedNoteListAdapter(this@HomeActivity)\n        adapter.submitList(list)\n        mBinding.notesRecyclerView.adapter = adapter\n    }\n}\n\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1565649386, "post_id": 57469057, "comment_id": 101411137, "body": "Your SQL API (<code>SQLiteDatabase</code>, Room, etc.) should handle that escaping for you (e.g., <code>SQLiteDatabase</code> and positional parameters). How are you communicating with this database?"}, {"owner": {"reputation": 193, "user_id": 4061331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fcc9a25d39ca58d323118db6b7ebeaa?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Feltimo", "link": "https://stackoverflow.com/users/4061331/joshua-feltimo"}, "edited": false, "score": 0, "creation_date": 1565649404, "post_id": 57469057, "comment_id": 101411140, "body": "Does <code>\\&#39;</code> work?"}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1565649595, "post_id": 57469057, "comment_id": 101411186, "body": "@CommonsWare - One of my internal library at work is communicating with the DB and looks like they are not handling it. I am just passing the string as an input to their API."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 193, "user_id": 4061331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fcc9a25d39ca58d323118db6b7ebeaa?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Feltimo", "link": "https://stackoverflow.com/users/4061331/joshua-feltimo"}, "edited": false, "score": 0, "creation_date": 1565649597, "post_id": 57469057, "comment_id": 101411187, "body": "@JoshuaFeltimo - Will try that next. Right now am trying to replace &#39; with &quot;&#39;&quot; to check if it will work."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 193, "user_id": 4061331, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fcc9a25d39ca58d323118db6b7ebeaa?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Feltimo", "link": "https://stackoverflow.com/users/4061331/joshua-feltimo"}, "edited": false, "score": 0, "creation_date": 1565650159, "post_id": 57469057, "comment_id": 101411287, "body": "@JoshuaFeltimo - \\&#39; didn&#39;t work for me"}, {"owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "edited": false, "score": 0, "creation_date": 1565653142, "post_id": 57469057, "comment_id": 101411786, "body": "@tech_human Replace only the aphostrophe in the name of the table with double quotes &#39;Room&#39;&#39;s B&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "edited": false, "score": 0, "creation_date": 1565653473, "post_id": 57469208, "comment_id": 101411832, "body": "it will work, it only applies to the tables name, and you will have no problem."}], "tags": [], "owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "is_accepted": true, "score": 0, "last_activity_date": 1565650524, "creation_date": 1565650524, "answer_id": 57469208, "question_id": 57469057, "link": "https://stackoverflow.com/questions/57469057/kotlin-handling-apostrophe-character-while-creating-a-string-for-sql/57469208#57469208", "title": "Kotlin - Handling apostrophe character while creating a string for SQL", "body": "<p>I replaced \"'\" with \"''\" to make it work, but I am not sure which other characters could break SQL.</p>\n"}, {"tags": [], "owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "is_accepted": false, "score": 0, "last_activity_date": 1567181027, "last_edit_date": 1567181027, "creation_date": 1565652688, "answer_id": 57469434, "question_id": 57469057, "link": "https://stackoverflow.com/questions/57469057/kotlin-handling-apostrophe-character-while-creating-a-string-for-sql/57469434#57469434", "title": "Kotlin - Handling apostrophe character while creating a string for SQL", "body": "<p>Replace only the aphostrophe in the name of the table with double quotes, from 'Room's B' to 'Room''s B' and you will get the query from your table :</p>\n\n<pre><code>Select * from TableName where item = 'Room A' OR item = 'Room''s B'\n</code></pre>\n\n<p>I have experienced something similar, because i had the name \"<code>Secton\u00b4s X</code>\" in one of my tables</p>\n\n<p><a href=\"https://i.stack.imgur.com/jTR0x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jTR0x.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 57469208, "answer_count": 2, "score": 0, "last_activity_date": 1567181027, "creation_date": 1565649194, "last_edit_date": 1565651481, "question_id": 57469057, "link": "https://stackoverflow.com/questions/57469057/kotlin-handling-apostrophe-character-while-creating-a-string-for-sql", "title": "Kotlin - Handling apostrophe character while creating a string for SQL", "body": "<p>I am creating a string to query a SQL database. The query is something like below:</p>\n\n<p>Works fine: </p>\n\n<pre><code>Select * from TableName where item = 'Room A' OR item = 'Room B'\n</code></pre>\n\n<p>Doesn't work due to 's:</p>\n\n<pre><code>Select * from TableName where item = 'Room A' OR item = 'Room's B'\n</code></pre>\n\n<p>I am getting the values Room A or Room B from a json object and below is the sample code for it.</p>\n\n<pre><code>expression = \"$keyName = '${jsonObject.valueName}'\"\n</code></pre>\n\n<p>How can I escape the 's in the value?</p>\n"}, {"tags": ["android", "kotlin", "gson", "localdate"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 10889271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d035943d1b9d213b47e6b3cdf8680f17?s=128&d=identicon&r=PG", "display_name": "Joozd", "link": "https://stackoverflow.com/users/10889271/joozd"}, "edited": false, "score": 0, "creation_date": 1565673073, "post_id": 57469923, "comment_id": 101415219, "body": "Thanks! This will get me going again :)"}, {"owner": {"reputation": 327, "user_id": 10889271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d035943d1b9d213b47e6b3cdf8680f17?s=128&d=identicon&r=PG", "display_name": "Joozd", "link": "https://stackoverflow.com/users/10889271/joozd"}, "edited": false, "score": 0, "creation_date": 1565678748, "post_id": 57469923, "comment_id": 101417115, "body": "I fixed it by replacing: <code>val daysList =(Gson().fromJson&lt;List&lt;Day&gt;&gt;(jsonData, listType))</code> with  <code>val gsonDaysList =(Gson().fromJson&lt;List&lt;gsonFillableDay&gt;&gt;(jsonData, listType))</code>  <code>val daysList = gsonDaysList.map{ Day(it.date, it.events) }</code> Casn&#39;t get this to format properly, but basically made the gson dump into one class which I then used to fill another. Probably not the most elegant way, but it works."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1565658222, "creation_date": 1565658222, "answer_id": 57469923, "question_id": 57469014, "link": "https://stackoverflow.com/questions/57469014/why-wont-my-localdate-parse-work-with-a-value-inserted-from-gson/57469923#57469923", "title": "why wont my LocalDate.parse work with a value inserted from gson?", "body": "<p>If a class doesn't have parameterless constructor, Gson creates an object without calling the constructor, thus the field that stores <code>lazy</code> delegate doesn't get initialized and you get a NullPointerException when accessing the property delegated to it.</p>\n\n<p>See also this question for the possible solutions: <a href=\"https://stackoverflow.com/questions/52837665/why-kotlin-data-classes-can-have-nulls-in-non-nullable-fields-with-gson\">Why Kotlin data classes can have nulls in non-nullable fields with Gson?</a></p>\n"}], "owner": {"reputation": 327, "user_id": 10889271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d035943d1b9d213b47e6b3cdf8680f17?s=128&d=identicon&r=PG", "display_name": "Joozd", "link": "https://stackoverflow.com/users/10889271/joozd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57469923, "answer_count": 1, "score": 0, "last_activity_date": 1565658222, "creation_date": 1565648888, "question_id": 57469014, "link": "https://stackoverflow.com/questions/57469014/why-wont-my-localdate-parse-work-with-a-value-inserted-from-gson", "title": "why wont my LocalDate.parse work with a value inserted from gson?", "body": "<p>I have a class:</p>\n\n<pre><code>data class Day(val date: String, val events: List&lt;Event&gt;){\n    val localDateTimeDate: LocalDate by lazy {\n        LocalDate.parse(date)\n    }\n}\n</code></pre>\n\n<p>This gets filled from a JSON string (eg. <code>{\"date\": \"2019-06-26\", \"events\": []}</code>.</p>\n\n<p>If I read <code>someDay.date</code>, I get \"2019-06-26\", so the filling part works.\nIf I read <code>someDay.localDateTimeDate</code>, I get a nullpointer exception, and I don't see why.</p>\n\n<p>Now, if I go in REPL and fill a \"Day\" by hand (ie. <code>val day = Day(\"2019-06-26\"\", emptyList())</code> this works. \nIf I make my android phone do <code>LocalDate.parse(\"2019-06-26\")</code>, that works.</p>\n\n<p>Day gets filled by:</p>\n\n<pre><code>    fun receiveDays(): List&lt;Day&gt; {\n        val listType = object : TypeToken&lt;List&lt;Day&gt;&gt;() { }.type\n        val jsonData = (client.readFromSocket()!!.message).toString(Charsets.UTF_8)\n        val daysList =(Gson().fromJson&lt;List&lt;Day&gt;&gt;(jsonData, listType))\n        client.sendOK()\n        return daysList\n</code></pre>\n\n<p>If I try to read <code>someDay.localDateTimeDate</code>, I get a nullpointer exception:</p>\n\n<pre><code>2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err: java.lang.NullPointerException: Attempt to invoke interface method 'java.lang.Object kotlin.Lazy.getValue()' on a null object reference\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at nl.joozd.joozdter.data.Day.getLocalDateTimeDate(Unknown Source:25)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at nl.joozd.joozdter.ui.PdfParserActivity$onCreate$$inlined$let$lambda$1.invoke(PdfParserActivity.kt:140)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at nl.joozd.joozdter.ui.PdfParserActivity$onCreate$$inlined$let$lambda$1.invoke(PdfParserActivity.kt:28)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at org.jetbrains.anko.AsyncKt$doAsync$1.invoke(Async.kt:143)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at org.jetbrains.anko.AsyncKt$doAsync$1.invoke(Unknown Source:0)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at org.jetbrains.anko.AsyncKt$sam$java_util_concurrent_Callable$0.call(Unknown Source:2)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:301)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n2019-08-13 00:06:13.075 21870-21942/nl.joozd.joozdter W/System.err:     at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "autocompletetextview"], "answers": [{"tags": [], "owner": {"reputation": 1646, "user_id": 6591688, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b96a2c6a534e4f6450c81b8c91fc3eda?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/6591688/idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1565648155, "creation_date": 1565648155, "answer_id": 57468925, "question_id": 57468880, "link": "https://stackoverflow.com/questions/57468880/autocompletetextview-onsubmit-event/57468925#57468925", "title": "AutoCompleteTextView onSubmit event", "body": "<p>If you want to handle submit key you can add a property to <code>TextInput</code> component:</p>\n\n<pre><code>       onSubmitEditing={this.onSubmitEditing}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673, "user_id": 6580761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NFDjY.jpg?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/6580761/lukas"}, "is_accepted": true, "score": 0, "last_activity_date": 1565721381, "creation_date": 1565721381, "answer_id": 57483609, "question_id": 57468880, "link": "https://stackoverflow.com/questions/57468880/autocompletetextview-onsubmit-event/57483609#57483609", "title": "AutoCompleteTextView onSubmit event", "body": "<p>The problem was that the AutoCompleteTextView had an attribute <code>maxLines=\"1\"</code>, if you pressed enter on the soft keyboard, the event doesn't get called.</p>\n"}], "owner": {"reputation": 673, "user_id": 6580761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NFDjY.jpg?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/6580761/lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57483609, "answer_count": 2, "score": 0, "last_activity_date": 1565721381, "creation_date": 1565647894, "last_edit_date": 1565648052, "question_id": 57468880, "link": "https://stackoverflow.com/questions/57468880/autocompletetextview-onsubmit-event", "title": "AutoCompleteTextView onSubmit event", "body": "<p>I am using a AutoCompleteTextView and my question is if there is a event which gets called when you hit enter on your soft-keyboard?</p>\n\n<p><a href=\"https://i.stack.imgur.com/QljCp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QljCp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "mvvm", "viewmodel", "android-savedstate"], "answers": [{"tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": false, "score": 1, "last_activity_date": 1565681638, "creation_date": 1565681638, "answer_id": 57473117, "question_id": 57468124, "link": "https://stackoverflow.com/questions/57468124/what-type-of-application-does-savedstateviewmodelfactory-requires/57473117#57473117", "title": "What type of Application does SavedStateViewModelFactory requires", "body": "<p>You can take an application instance with </p>\n\n<pre><code>val app = context.applicationContext as Application\n</code></pre>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565681638, "creation_date": 1565643287, "question_id": 57468124, "link": "https://stackoverflow.com/questions/57468124/what-type-of-application-does-savedstateviewmodelfactory-requires", "title": "What type of Application does SavedStateViewModelFactory requires", "body": "<p>I'm trying to save the state of some text into my main activity, I have made a factory that passes one dependency as constructor of my view model and also the SavedStateViewModelFactory in order to save the state of that text.</p>\n\n<p>But I cant do an instance of that with just the owner context, it alsos requires Application, and I don't really know how to pass it since I dont have one in my app.    </p>\n\n<pre><code> class ViewModelFactory(val interactor: InteractorClass,val context:Context):ViewModelProvider.Factory {\n\n            val stateHandle = SavedStateViewModelFactory(context)\n\n            override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n                return modelClass.getConstructor(InteractorClass::class.java).newInstance(interactor,stateHandle)\n            }\n        }\n</code></pre>\n\n<p>Then in my Instance I want to instance my ViewModel like this</p>\n\n<pre><code>ViewModelProviders.of(this,ViewModelFactory(InteractorClass(),this)).get(MyViewModel::class.java)\n</code></pre>\n\n<p>Is there something that I'm not followin in the docs that I'm not aware off ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "xml", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565642661, "post_id": 57467827, "comment_id": 101409187, "body": "Did you try calling <code>recyclerview.invalidate()</code> after setting the layout manager?"}, {"owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "reply_to_user": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565643075, "post_id": 57467827, "comment_id": 101409315, "body": "@ZohaibAmir I did now and it didn&#39;t work."}, {"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565643476, "post_id": 57467827, "comment_id": 101409436, "body": "Can you try removing the XML attributes  <code>app:layoutManager</code> and `          app:stackFromEnd=&quot;true&quot;` and just set it dynamically to see if it works? lastly, call <code>adapter.notifyDatasetChanged()</code>"}, {"owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "reply_to_user": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 1, "creation_date": 1565643643, "post_id": 57467827, "comment_id": 101409486, "body": "I removed both and called notifyDataSetChanges(), but it still does not work."}, {"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 1, "creation_date": 1565645030, "post_id": 57467827, "comment_id": 101409884, "body": "What are you trying to achieve? it is possible that stackFromEnd does diffrent job than what you intend to do"}, {"owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "reply_to_user": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565645150, "post_id": 57467827, "comment_id": 101409926, "body": "I am trying to achieve that the list starts at the bottom. I was using ListView with stackFromBottom before and it did it exactly as I wanted. Now I switched to RecyclerView and it stopped working."}, {"owner": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565645883, "post_id": 57467827, "comment_id": 101410163, "body": "did you set layout direction anywhere in the parent?"}, {"owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "reply_to_user": {"reputation": 3068, "user_id": 3266367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3rAo.jpg?s=128&g=1", "display_name": "Zohaib Amir", "link": "https://stackoverflow.com/users/3266367/zohaib-amir"}, "edited": false, "score": 0, "creation_date": 1565646170, "post_id": 57467827, "comment_id": 101410245, "body": "The parent is a Constraint Layout without any specified orientation"}, {"owner": {"reputation": 799, "user_id": 2344192, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a5ddfcd95a172dce1bab5c67496d5189?s=128&d=identicon&r=PG&f=1", "display_name": "display name", "link": "https://stackoverflow.com/users/2344192/display-name"}, "edited": false, "score": 0, "creation_date": 1579029047, "post_id": 57467827, "comment_id": 105629135, "body": "@BlindJerobine were you able to resolve this issue? I am having the same exact issue"}, {"owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "reply_to_user": {"reputation": 799, "user_id": 2344192, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a5ddfcd95a172dce1bab5c67496d5189?s=128&d=identicon&r=PG&f=1", "display_name": "display name", "link": "https://stackoverflow.com/users/2344192/display-name"}, "edited": false, "score": 0, "creation_date": 1579113201, "post_id": 57467827, "comment_id": 105661070, "body": "@displayname Sadly, no :("}], "owner": {"reputation": 1, "user_id": 11919384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3869a052e159fd0f710e7780a74d19?s=128&d=identicon&r=PG&f=1", "display_name": "BlindJerobine", "link": "https://stackoverflow.com/users/11919384/blindjerobine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565641624, "creation_date": 1565641624, "question_id": 57467827, "link": "https://stackoverflow.com/questions/57467827/android-recyclerview-stackfromend-is-ignored", "title": "Android: RecyclerView stackfromEnd is ignored", "body": "<p>I am trying to setup a RecyclerView with LinearLayoutManager and stackfromEnd.</p>\n\n<p>I've tried setting it completely programmatically and in xml, but none of both did work.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;androidx.recyclerview.widget.RecyclerView\n          android:id=\"@+id/comments_view\"\n          android:layout_width=\"match_parent\"\n          android:layout_height=\"wrap_content\"\n          app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"\n          app:stackFromEnd=\"true\"\n          app:layout_constrainedHeight=\"true\"\n          app:layout_constraintBottom_toTopOf=\"@id/commen_send_bar\"\n          app:layout_constraintTop_toBottomOf=\"@id/barrier\"/&gt;\n</code></pre>\n\n<pre><code>comments_view = v.findViewById(R.id.comments_view)\nval linearLayoutManager = LinearLayoutManager(activity!!)\nlinearLayoutManager.stackFromEnd = true\ncomments_view.layoutManager = linearLayoutManager\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1565642856, "post_id": 57467740, "comment_id": 101409253, "body": "i dont know what this sealed class is for in that context . .but what about using a data class (which automatically creates hashCode and equals Method) .. which i guess is missing in your case ;-)"}, {"owner": {"reputation": 104, "user_id": 3571610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002744670128/picture?type=large", "display_name": "felipe.rce", "link": "https://stackoverflow.com/users/3571610/felipe-rce"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1565644374, "post_id": 57467740, "comment_id": 101409706, "body": "@IEE1394 I need this sealed class, because I will use this on coroutine actors"}], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 3571610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002744670128/picture?type=large", "display_name": "felipe.rce", "link": "https://stackoverflow.com/users/3571610/felipe-rce"}, "edited": false, "score": 0, "creation_date": 1565644858, "post_id": 57468052, "comment_id": 101409836, "body": "Great and well organized answer!!! I tested and it worked. I think only keep data classes inside the sealed class is suficient, I only need this class types to pass values to coroutine actor."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 4, "last_activity_date": 1565644070, "last_edit_date": 1565644070, "creation_date": 1565642941, "answer_id": 57468052, "question_id": 57467740, "link": "https://stackoverflow.com/questions/57467740/mutableset-dont-prevent-duplicated-content-when-using-sealed-class/57468052#57468052", "title": "MutableSet don&#39;t prevent duplicated content when using sealed class", "body": "<p>A <code>MutableSet</code> checks whether it contains an element by using the elements' <a href=\"https://kotlinlang.org/docs/reference/equality.html\" rel=\"nofollow noreferrer\"><code>equals</code> checks</a> and, depending on the implementation, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/hash-code.html\" rel=\"nofollow noreferrer\"><code>hashCode</code></a>. A <code>HashSet</code>, for instance, uses <code>hashCode</code> to store and quickly lookup the elements in a hash table.</p>\n\n<p>The two subclasses of the <code>sealed class</code> in your example don't override the <code>equals</code> function and therefore provide the default equality check implementation, which is identity equality (i.e. an object is only equal to itself, and different objects are never equal even if their properties are equal).</p>\n\n<p>To achieve uniqueness of <code>LoginSavedCommand</code> items within a <code>MutableSet</code>, you need to ensure the subclasses provide proper equality check implementation. </p>\n\n<hr>\n\n<p>A simple way to do that is to <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">make both subclasses <code>data class</code>es</a>, so that the compiler generates the <code>equals</code> and <code>hashCode</code> implementations based on the properties:</p>\n\n<pre><code>sealed class LoginSavedCommand {\n    data class Login(val email: String, val password: String) : LoginSavedCommand()\n    data class SaveData(val email: String, val password: String) : LoginSavedCommand()\n}\n</code></pre>\n\n<p><sup><a href=\"https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS4zLjMxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IlNhbXBsZUlucHV0MSBTYW1wbGVJbnB1dDIiLCJqc0NvZGUiOiIiLCJub25lTWFya2VycyI6dHJ1ZSwidGhlbWUiOiJpZGVhIiwiZm9sZGVkQnV0dG9uIjp0cnVlLCJyZWFkT25seSI6ZmFsc2UsImNvZGUiOiJzZWFsZWQgY2xhc3MgTG9naW5TYXZlZENvbW1hbmQge1xuICAgIGRhdGEgY2xhc3MgTG9naW4odmFsIGVtYWlsOiBTdHJpbmcsIHZhbCBwYXNzd29yZDogU3RyaW5nKSA6IExvZ2luU2F2ZWRDb21tYW5kKClcbiAgICBkYXRhIGNsYXNzIFNhdmVEYXRhKHZhbCBlbWFpbDogU3RyaW5nLCB2YWwgcGFzc3dvcmQ6IFN0cmluZykgOiBMb2dpblNhdmVkQ29tbWFuZCgpXG59XG5cbmZ1biBtYWluKGFyZ3M6IEFycmF5PFN0cmluZz4pIHtcblxuICAgIHZhbCBtU2V0OiBNdXRhYmxlU2V0PExvZ2luU2F2ZWRDb21tYW5kPiA9IGhhc2hTZXRPZigpXG5cbiAgICBtU2V0LmFkZChMb2dpblNhdmVkQ29tbWFuZC5Mb2dpbihcIm9iYVwiLCBcInBhc3NcIikpXG4gICAgbVNldC5hZGQoTG9naW5TYXZlZENvbW1hbmQuTG9naW4oXCJmYWlpaVwiLCBcImJsYWJsYVwiKSlcblxuICAgIGlmIChtU2V0LmFkZChMb2dpblNhdmVkQ29tbWFuZC5Mb2dpbihcIm9iYVwiLCBcInBhc3NcIikpKSB7XG4gICAgICAgIHByaW50bG4oXCJkb24ndFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHByaW50bG4oXCJkb1wiKVxuICAgIH1cbn0iLCJ0byI6IiIsImZyb20iOiIifQ==\" rel=\"nofollow noreferrer\">(runnable sample)</a></sup></p>\n\n<hr>\n\n<p>Alternatively, override the <code>equals</code> and <code>hashCode</code> functions manually in the subclasses.</p>\n\n<p><strong>Important:</strong> when overriding these functions, ensure that the implementations follow the contracts of the functions described in the API reference for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/equals.html\" rel=\"nofollow noreferrer\"><code>equals</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/hash-code.html\" rel=\"nofollow noreferrer\"><code>hashCode</code></a>.</p>\n\n<p>For example:</p>\n\n<pre><code>sealed class LoginSavedCommand {\n    class Login(val email: String, val password: String) : LoginSavedCommand() {\n        override fun equals(other: Any?): Boolean {\n            if (this === other) return true\n            if (javaClass != other?.javaClass) return false\n\n            other as Login\n\n            if (email != other.email) return false\n            if (password != other.password) return false\n\n            return true\n        }\n\n        override fun hashCode(): Int {\n            var result = email.hashCode()\n            result = 31 * result + password.hashCode()\n            return result\n        }\n    }\n\n\n    class SaveData(val email: String, val password: String) : LoginSavedCommand() {\n        /* ... */\n    }\n}\n</code></pre>\n\n<p><sup>These implementations where generated by IntelliJ IDEA, using the <code>Generate...</code> \u2192 <code>equals() and hashCode()</code> action within the class body.</sup></p>\n"}], "owner": {"reputation": 104, "user_id": 3571610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002744670128/picture?type=large", "display_name": "felipe.rce", "link": "https://stackoverflow.com/users/3571610/felipe-rce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57468052, "answer_count": 1, "score": 3, "last_activity_date": 1565644070, "creation_date": 1565641054, "question_id": 57467740, "link": "https://stackoverflow.com/questions/57467740/mutableset-dont-prevent-duplicated-content-when-using-sealed-class", "title": "MutableSet don&#39;t prevent duplicated content when using sealed class", "body": "<p>If I use <code>MutableSet</code> with <code>sealed class</code>, the <code>MutableSet</code> accept all duplicated content.</p>\n\n<p>Sample:</p>\n\n<pre><code>sealed class LoginSavedCommand {\n    class Login(val email: String, val password: String) : LoginSavedCommand()\n    class SaveData(val email: String, val password: String) : LoginSavedCommand()\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    val mSet: MutableSet&lt;LoginSavedCommand&gt; = hashSetOf()\n\n    mSet.add(LoginSavedCommand.Login(\"oba\", \"pass\"))\n    mSet.add(LoginSavedCommand.Login(\"faiii\", \"blabla\"))\n\n    if (mSet.add(LoginSavedCommand.Login(\"oba\", \"pass\"))) {\n        println(\"don't\")\n    } else {\n        println(\"do\")\n    }\n}\n</code></pre>\n\n<p>I passed the same values to <code>LoginSavedCommand.Login</code>, but the <code>MutableSet</code> keep accepting add the same value (on the sample <code>println</code> print \"don't\", and I need to print \"do\", because I need to prevent duplicated content using this <code>selaed class</code>)</p>\n"}, {"tags": ["android", "kotlin", "keyboard", "emoji"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 1, "creation_date": 1565634164, "post_id": 57466236, "comment_id": 101405906, "body": "DO you define onComputeInsets?  If so, post your code for it.  You can break the normal pan functionality by playing with this functions."}, {"owner": {"reputation": 158, "user_id": 8225777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNmEt.png?s=128&g=1", "display_name": "Dhananjay", "link": "https://stackoverflow.com/users/8225777/dhananjay"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1565712721, "post_id": 57466236, "comment_id": 101434761, "body": "I changed keyboard height dynamically when keyboard open or close using above code but I don&#39;t get a specific event or keyboard height from onGlobalLayout listener"}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1565769880, "post_id": 57466236, "comment_id": 101451212, "body": "You can&#39;t change the keyboard height.  THe keyboard chooses its own height.  It&#39;s not possible to change it.  If you somehow manage to find a way to make the OS restrict it, you WILL break the keyboard."}, {"owner": {"reputation": 158, "user_id": 8225777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNmEt.png?s=128&g=1", "display_name": "Dhananjay", "link": "https://stackoverflow.com/users/8225777/dhananjay"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1565774751, "post_id": 57466236, "comment_id": 101453603, "body": "I want to toggle between default keyboard and custom view like Whatsapp when you tap on emoji icon then appear custom emoji view same as Telegram."}], "owner": {"reputation": 158, "user_id": 8225777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNmEt.png?s=128&g=1", "display_name": "Dhananjay", "link": "https://stackoverflow.com/users/8225777/dhananjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565712301, "creation_date": 1565633713, "last_edit_date": 1565712301, "question_id": 57466236, "link": "https://stackoverflow.com/questions/57466236/edittext-not-display-for-emoji-keyboard", "title": "Edittext not display for emoji keyboard", "body": "<p>EditText not seen when a keyboard is open. I have changed in \n <code>android:windowSoftInputMode=adjustPan</code> manifest file and remove static keyboard height.\nThe keyboard does not update height as per the different size of devices (especially Samsung device)\nI have also tried to get keyboard height and set emoji_keyboard layout and I followed this demo <a href=\"https://github.com/edsilfer/emoji-keyboard\" rel=\"nofollow noreferrer\">https://github.com/edsilfer/emoji-keyboard</a></p>\n\n<p><strong>Assing emoji-keyboard layout height dynamically</strong> </p>\n\n<pre><code>mRootWindow = getWindow();\nmRootView = mRootWindow.getDecorView().findViewById(android.R.id.content);\nmRootView.getViewTreeObserver().addOnGlobalLayoutListener(\n    new ViewTreeObserver.OnGlobalLayoutListener() {\n    public void onGlobalLayout(){\n        Rect r = new Rect();\n        View view = mRootWindow.getDecorView();\n        view.getWindowVisibleDisplayFrame(r);\n        // r.left, r.top, r.right, r.bottom\n    }\n    });\n</code></pre>\n"}, {"tags": ["android", "kotlin", "paging"], "answers": [{"comments": [{"owner": {"reputation": 1112, "user_id": 7104821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51669296530927b4fbe25665d95d253d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Ent", "link": "https://stackoverflow.com/users/7104821/p-ent"}, "edited": false, "score": 0, "creation_date": 1565805005, "post_id": 57469135, "comment_id": 101468873, "body": "I want to take advantage of PagedList and friends. The scrolling is significantly faster. It can bring down a 3,000 element list as fast as you can scroll through it (providing you have a decent WiFi connection). I&#39;ve got something which I will write up shortly and post here."}], "tags": [], "owner": {"reputation": 327, "user_id": 10889271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d035943d1b9d213b47e6b3cdf8680f17?s=128&d=identicon&r=PG", "display_name": "Joozd", "link": "https://stackoverflow.com/users/10889271/joozd"}, "is_accepted": false, "score": 0, "last_activity_date": 1565649881, "creation_date": 1565649881, "answer_id": 57469135, "question_id": 57465967, "link": "https://stackoverflow.com/questions/57465967/using-android-pagedlist-for-charts-and-lists/57469135#57469135", "title": "Using Android PagedList for Charts and Lists", "body": "<p>What I tend to do is to build a class that handles the downloading of the data, then hand it out to whoever wants it\nlike </p>\n\n<pre><code>class BananaProvider {\n    private var _bananaData: List&lt;String&gt;? = null\n    val bananas: List&lt;String&gt;\n        get() {\n            _bananaData?.let{ return _bananaData!!}\n            _bananaData = getBananaData()\n            return _bananaData!!\n        }\n    fun getBananaData(){\n        (...)        \n    }\n}\n</code></pre>\n\n<p>and perhaps have a function for refilling your babana's with fresh data if you want.</p>\n\n<p>Then, just drop an instance of the BananaProvider in every fragment/function/whatever that needs it.</p>\n\n<p>Alternatively, if you want to share the data between activities, you could serialize it and send it in an intent, or drop it in an SQLite database if you want to save it locally for later use.</p>\n"}, {"tags": [], "owner": {"reputation": 1112, "user_id": 7104821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51669296530927b4fbe25665d95d253d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Ent", "link": "https://stackoverflow.com/users/7104821/p-ent"}, "is_accepted": false, "score": 0, "last_activity_date": 1565805773, "creation_date": 1565805773, "answer_id": 57499876, "question_id": 57465967, "link": "https://stackoverflow.com/questions/57465967/using-android-pagedlist-for-charts-and-lists/57499876#57499876", "title": "Using Android PagedList for Charts and Lists", "body": "<p>What I wound up doing was:</p>\n\n<ul>\n<li>Created a DataSource with the functions to fetch the data from the server. I'm using a PositionalDataSource.</li>\n<li>Created a DataSourceFactory to deliver my DataSource</li>\n<li>Created a LiveData using LivePagedListBuilder with my factory and a PagedList.Config (to bring in 100 records at a time, which seems optimal for my needs)</li>\n</ul>\n\n<p>It's the LiveData that I share between the RecyclerView and the chart.</p>\n\n<p>The object which controls the download for the chart keeps track of the current download position and size. If the chart winds up creating the shared LiveData, this will trigger the initial download and populate the underlying PagedList that LiveData is observing.</p>\n\n<p>Each time data comes down, I update the download position and size and draw points for the data just received. If the data isn't complete, I found that I have to wait a few milliseconds before triggering the next download using the PagedList's loadAround function. </p>\n\n<p>If the RecyclerView is the thing which is opened first by the user, its PagedListAdapter automatically brings the data down through the same DataSource and it fills the shared LiveData as the user scrolls.</p>\n\n<p>When I switch back to the Chart, since the LiveData is already populated (all or partially), it can draw the points. If the data isn't complete yet, the PagedList will attempt to load the rest, drawing the points of the data coming down.</p>\n\n<p>It's a pretty neat method. The key was keeping the LiveData around and reusing it and figuring out how to \"manually\" populate it when not using RecyclerView.</p>\n"}], "owner": {"reputation": 1112, "user_id": 7104821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51669296530927b4fbe25665d95d253d?s=128&d=identicon&r=PG&f=1", "display_name": "P. Ent", "link": "https://stackoverflow.com/users/7104821/p-ent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565805773, "creation_date": 1565632484, "question_id": 57465967, "link": "https://stackoverflow.com/questions/57465967/using-android-pagedlist-for-charts-and-lists", "title": "Using Android PagedList for Charts and Lists", "body": "<p>I am using Android API Level 28 with android components.</p>\n\n<p>I have an app that displays our data visually in a chart. I'd like to background load the data and begin charting it as it comes in. I also would like you to be able to view the data as a list. </p>\n\n<p>Ideally, the data for the chart and the list would be the same object instances. After all, the network call to retrieve the data is expensive. Plus, depending on the filters selected, there could be a lot of data to be charted.</p>\n\n<p>I cannot use a server-based chart building API; I must draw graphics from the data on the device. </p>\n\n<p>I am able to download the data in the background and build the chart. I looked into PagedList et al for the list view and that works terrifically.</p>\n\n<p>What I cannot figure out is how to share the data. In other words, if you view the chart first then the list, the list should not trigger a download again since the data is already there. Likewise if the user scrolls through the list then looks at the chart.</p>\n\n<p>This is especially helpful for tablets where one side displays the list and the other is the chart (eg, tapping on an item in the list highlights the data point in the chart).</p>\n\n<p>Any pointers would be greatly appreciated.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 1908090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3958195c1dd69979c8e06c4e8ffb402b?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/1908090/taha"}, "is_accepted": false, "score": 0, "last_activity_date": 1565633310, "last_edit_date": 1565633310, "creation_date": 1565631921, "answer_id": 57465851, "question_id": 57465779, "link": "https://stackoverflow.com/questions/57465779/how-to-remove-the-repeated-item-in-arraylist-of-class/57465851#57465851", "title": "how to remove the repeated item in arraylist of class", "body": "<p>replace <code>val list= ArrayList&lt;TypeItems&gt;()</code> with <code>val set = SortedSet&lt;TypeItems&gt;()</code></p>\n\n<p>and override equals method of TypeItems:</p>\n\n<pre><code>override fun equals(other: Any?): Boolean {\n    if (other is TypeItems) {\n        other.cartype == this.cartype &amp;&amp; ... // replace TypeItems fields\n    } else {\n        false\n    }\n}\n</code></pre>\n\n<p>also if you want to be sorted , TypeItems has to implement <code>Comparable</code>\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 9772, "user_id": 1786065, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/udTpS.png?s=128&g=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/1786065/rogue"}, "edited": false, "score": 1, "creation_date": 1565633076, "post_id": 57465981, "comment_id": 101405474, "body": "Make use of the <code>LinkedHashSet</code> class, both to disallow duplicates as well as preserving the order of the items in your code. <code>HashSet</code> alone does not guarantee ordering and your items will seem randomized in quite a few cases. I&#39;m not a kotliner, so while I can&#39;t speak for the data class in plain Java you should be overriding #equals <i>and</i> #hashcode to match"}, {"owner": {"reputation": 494, "user_id": 10138929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419ff84b6b4c28df9f29a2531c981e69?s=128&d=identicon&r=PG&f=1", "display_name": "samaromku", "link": "https://stackoverflow.com/users/10138929/samaromku"}, "edited": false, "score": 0, "creation_date": 1565636050, "post_id": 57465981, "comment_id": 101406751, "body": "How is that? I can&#39;t invoke list[0] on SortedSet."}, {"owner": {"reputation": 9772, "user_id": 1786065, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/udTpS.png?s=128&g=1", "display_name": "Rogue", "link": "https://stackoverflow.com/users/1786065/rogue"}, "edited": false, "score": 0, "creation_date": 1565638064, "post_id": 57465981, "comment_id": 101407523, "body": "A <code>TreeSet</code> would be my goto for a sorted set"}, {"owner": {"reputation": 656, "user_id": 1908090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3958195c1dd69979c8e06c4e8ffb402b?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/1908090/taha"}, "edited": false, "score": 0, "creation_date": 1565639081, "post_id": 57465981, "comment_id": 101407907, "body": "@samaromku list.first"}, {"owner": {"reputation": 31, "user_id": 11914480, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-54UlLCjS5nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reptSxPsPJA5Z3VVctzEIGBPUBZZw/photo.jpg?sz=128", "display_name": "APC Apps", "link": "https://stackoverflow.com/users/11914480/apc-apps"}, "edited": false, "score": 0, "creation_date": 1565644902, "post_id": 57465981, "comment_id": 101409852, "body": "its  worked, thank you so much, but can you explane to me what happend, and what is data class"}, {"owner": {"reputation": 31, "user_id": 11914480, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-54UlLCjS5nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reptSxPsPJA5Z3VVctzEIGBPUBZZw/photo.jpg?sz=128", "display_name": "APC Apps", "link": "https://stackoverflow.com/users/11914480/apc-apps"}, "edited": false, "score": 0, "creation_date": 1565715271, "post_id": 57465981, "comment_id": 101435795, "body": "do you know how to do it in swift?!"}], "tags": [], "owner": {"reputation": 494, "user_id": 10138929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419ff84b6b4c28df9f29a2531c981e69?s=128&d=identicon&r=PG&f=1", "display_name": "samaromku", "link": "https://stackoverflow.com/users/10138929/samaromku"}, "is_accepted": true, "score": 2, "last_activity_date": 1565636304, "last_edit_date": 1565636304, "creation_date": 1565632542, "answer_id": 57465981, "question_id": 57465779, "link": "https://stackoverflow.com/questions/57465779/how-to-remove-the-repeated-item-in-arraylist-of-class/57465981#57465981", "title": "how to remove the repeated item in arraylist of class", "body": "<p>You should use the data class. It will contain overriding <code>equals()</code> method inside:</p>\n\n<pre><code>data class TypeItems(\n    val car_typetype: String,\n    val typetype: String,\n    val modeletype: String,\n    val phtype: String\n)\n</code></pre>\n\n<p>After digging into this issue, I found, that you cannot call method <code>get()</code> on the <code>Set</code> collection. So, this code won't work:\n<code>(p0 as ItemView).bind(list[p1].cartype, list[p1].typetype, list[p1].modeltype, list[p1].photype)</code>\n<br/>\nSummarize, <code>Set</code> won't help you. To solve your issue, you need just to invoke defensive check:</p>\n\n<pre><code>val typeItems = TypeItems(\n                product.getString(\"car_type\"),\n                product.getString(\"type\"),\n                product.getString(\"model\"),\n                url2\n        )\n        if(!list.contains(typeItems)) {\n            list.add(typeItems)\n        }\n</code></pre>\n\n<p>Therefore, there is another way, to solve this issue:\ninstead of \n<br>\n<code>val adapter = TypeAdapter(this.applicationContext, list)</code> \n<br>\ninvoke \n<br>\n<code>val adapter = TypeAdapter(this.applicationContext, list.distinct())</code>\n<br/>\nMethod <code>distinct()</code> return you unique values of your list in the same order. Don't forget to make it data class though. </p>\n"}, {"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": false, "score": 0, "last_activity_date": 1565701702, "last_edit_date": 1565701702, "creation_date": 1565700615, "answer_id": 57478101, "question_id": 57465779, "link": "https://stackoverflow.com/questions/57465779/how-to-remove-the-repeated-item-in-arraylist-of-class/57478101#57478101", "title": "how to remove the repeated item in arraylist of class", "body": "<p>Please note that the accepted answer suggests using <code>list.contains(x)</code> before possibly adding the element to the list. However, <code>contains</code> takes O(n) and you're doing that check for each item you get in response, so you'll have a total complexity of O(n^2). Performance could be quite bad if you have many items, and this means your application could be unresponsive and UX could be affected. Moreover, items are ordered in insertion order, so we need to explicitly sort it in the desired order \u2013 adding at least another O(n*log(n)), which is though dominated by the previous O(n^2).</p>\n\n<p>A <code>TreeSet</code> could hence be a better fit for this particular use case \u2013 as suggested by @Rogue and @taha \u2013 since it automatically prevents duplicates, it has a complexity of O(log(n)) in insertion and it enforces some kind of sorting. </p>\n\n<p>Here's an example of how to use it:</p>\n\n<pre><code>data class TypeItems(\n    val car: String,\n    val type: String,\n    val model: String,\n    val ph: String\n)\n\nfun main() {\n    // simulates a response from the server\n    val response = listOf(\n        TypeItems(\"carBBB\", \"typeBBB\", \"modelBBB\", \"phBBB\"),\n        TypeItems(\"carAAA\", \"typeAAA\", \"modelAAA\", \"phAAA\"),\n        TypeItems(\"carAAA\", \"typeAAA\", \"modelAAA\", \"phAAA\"),\n        TypeItems(\"carCCC\", \"typeZZZ\", \"modelYYY\", \"phCCC\"),\n        TypeItems(\"carCCC\", \"typeXXX\", \"modelWWW\", \"phCCC\"),\n        TypeItems(\"carCCC\", \"typeXXX\", \"modelVVV\", \"phCCC\")\n    )\n\n    // creates an empty TreeSet with the desired sorting\n    val set = TreeSet&lt;TypeItems&gt;(\n        Comparator.comparing(TypeItems::car)\n            .thenComparing(TypeItems::type)\n            .thenComparing(TypeItems::model)\n            .thenComparing(TypeItems::ph) // needed for \"consistency with equals\"\n    )\n\n    // add each element to the set, it'll handle duplicates\n    response.forEach { set.add(it) }\n\n    // do something with the resulting set: print each item on a new line\n    set.forEach {\n        println(it)\n    }\n}\n</code></pre>\n\n<p>That'll print:</p>\n\n<pre><code>TypeItems(car=carAAA, type=typeAAA, model=modelAAA, ph=phAAA) // duplicate removed\nTypeItems(car=carBBB, type=typeBBB, model=modelBBB, ph=phBBB) // car order enforced (as B &gt; A)\nTypeItems(car=carCCC, type=typeXXX, model=modelVVV, ph=phCCC) // type order enforced (as X &gt; B)\nTypeItems(car=carCCC, type=typeXXX, model=modelWWW, ph=phCCC) // model order enforced (as W &gt; V)\nTypeItems(car=carCCC, type=typeZZZ, model=modelYYY, ph=phCCC)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11914480, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-54UlLCjS5nc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reptSxPsPJA5Z3VVctzEIGBPUBZZw/photo.jpg?sz=128", "display_name": "APC Apps", "link": "https://stackoverflow.com/users/11914480/apc-apps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 57465981, "answer_count": 3, "score": 1, "last_activity_date": 1565701702, "creation_date": 1565631587, "question_id": 57465779, "link": "https://stackoverflow.com/questions/57465779/how-to-remove-the-repeated-item-in-arraylist-of-class", "title": "how to remove the repeated item in arraylist of class", "body": "<p>I'm trying to data from my server put them in my app,\nusing RecyclerView and volley, now because of that I'm using an adapter and this is my adapter class</p>\n\n<pre><code>class TypeAdapter(var con: Context, var list: ArrayList&lt;TypeItems&gt;) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\noverride fun onBindViewHolder(p0: RecyclerView.ViewHolder, p1: Int) {\n\n    (p0 as ItemView).bind(list[p1].cartype, list[p1].typetype, list[p1].modeltype, list[p1].photype)\n\n}\noverride fun onCreateViewHolder(p0: ViewGroup, p1: Int): RecyclerView.ViewHolder {\n    val v= LayoutInflater.from(con).inflate(R.layout.car_model_item, p0, false)\n\n    return ItemView(v)\n}\n\noverride fun getItemCount(): Int {\n    return list.size\n}\n\nclass ItemView(itemVeiw: View) : RecyclerView.ViewHolder(itemVeiw) {\n\n    fun bind(car_type: String, type: String, modele: String, ph: String) {\n\n        Picasso.with(itemView.context).load(ph).into(itemView.type)\n\n        itemView.name.text= \"$car_type $type\"\n        itemView.model.text= modele\n\n\n    }\n}\n}\n</code></pre>\n\n<p>and this is my TypeItems class</p>\n\n<pre><code>class TypeItems(car_typetype: String, typetype: String, modeletype: String, phtype: String) {\nvar cartype:String = car_typetype\nvar typetype:String = typetype\nvar modeltype:String = modeletype\nvar photype:String = phtype\n\n}\n</code></pre>\n\n<p>and this is my main class</p>\n\n<pre><code>class CarModelActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_car_model)\n\n    val list= ArrayList&lt;TypeItems&gt;()\n\n    val rq= Volley.newRequestQueue(this)\n\n    val  url= (\"http://test123456789.cf/sell_items/reportall.php?car_type=${car_item.cartype}\").replace(\" \", \"%20\")\n\n    val srr= StringRequest(Request.Method.GET, url ,\n        Response.Listener { response -&gt;\n\n            //converting the string to json array object\n            val array = JSONArray(response)\n\n            list.clear()\n\n            //traversing through all the object\n            for (i in 0 until array.length()) {\n\n                //getting item object from json array\n                val product = array.getJSONObject(i)\n\n\n                //ex Image\n                var url2= \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRj3LA1ERJCx8lM-qHsgaW_5IgzeW21w-Ona7iI05E9aoXrImtl\"\n\n                //adding the product to item list\n                list.add(\n                    TypeItems(\n                        product.getString(\"car_type\"),\n                        product.getString(\"type\"),\n                        product.getString(\"model\"),\n                        url2\n                    )\n                )\n\n            }\n\n            //creating adapter object and setting it to recyclerview\n            val adapter = TypeAdapter(this.applicationContext, list)\n            rv.layoutManager= GridLayoutManager(this, 2)\n            rv.adapter = adapter\n\n        }, Response.ErrorListener { error -&gt;\n            Toast.makeText(this, error.message, Toast.LENGTH_LONG).show()\n        })\n\n    rq.add(srr)\n\n}\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QS90T.png\" rel=\"nofollow noreferrer\">this is image of the result</a></p>\n\n<p>now I want to remove the repeated items from my list, I want to sort by car_type and type and model, if the item is repeated, I want to remove it</p>\n"}, {"tags": ["kotlin", "constructor"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1565630090, "post_id": 57465460, "comment_id": 101404310, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/628950/constructors-vs-factory-methods\">Constructors vs Factory Methods</a>"}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565681082, "post_id": 57465460, "comment_id": 101418163, "body": "You say you have no interest in Java, but the arguments are near-identical, and already well-discussed for the Java case."}], "answers": [{"comments": [{"owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "edited": false, "score": 0, "creation_date": 1565642928, "post_id": 57466665, "comment_id": 101409279, "body": "I have clarified the question as I have no interest in Java. (The article: Effective Java in Kotlin...)."}, {"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 1, "creation_date": 1565645097, "post_id": 57466665, "comment_id": 101409905, "body": "The same points are valid, mostly (except for the names, I suppose). It&#39;s the usual static vs. instance considerations. There is only one (static) companion object; the code is run once. The code in an init block is run for each instance created."}, {"owner": {"reputation": 2644, "user_id": 2957169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1", "display_name": "charles-allen", "link": "https://stackoverflow.com/users/2957169/charles-allen"}, "edited": false, "score": 0, "creation_date": 1565681005, "post_id": 57466665, "comment_id": 101418123, "body": "I would add, a factory method could return a nullable, giving you the opportunity to cleanly reject invalid inputs."}], "tags": [], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "is_accepted": false, "score": 6, "last_activity_date": 1565733114, "last_edit_date": 1565733114, "creation_date": 1565635698, "answer_id": 57466665, "question_id": 57465460, "link": "https://stackoverflow.com/questions/57465460/why-would-you-use-a-kotlin-companion-object-rather-than-an-initializer-block-for/57466665#57466665", "title": "Why would you use a Kotlin companion object rather than an initializer block for creation?", "body": "<p>This practice of considering static factory methods (<strong>aka companion objects in Kotlin</strong>) over constructors (<strong>or init blocks in Kotlin</strong>) has been borrowed from the Java world. </p>\n\n<p>The differences between static factory methods and constructors in Java are pretty much the same as the differences between companion objects and init blocks in Kotlin.</p>\n\n<p><a href=\"https://blog.kotlin-academy.com/effective-java-in-kotlin-item-1-consider-static-factory-methods-instead-of-constructors-8d0d7b5814b2\" rel=\"nofollow noreferrer\">Here's a Medium article</a> which describes the advantages of companion objects neatly. To summarize:</p>\n\n<ol>\n<li>Unlike constructors, they have names</li>\n<li>Unlike constructors, they do not require to create a new object each time they\u2019re invoked</li>\n<li>Unlike constructors, they can return an object of any subtype of their return type</li>\n<li>They reduce verbosity of creating parameterized type instances</li>\n</ol>\n\n<p><strong>EDIT</strong>: Added AjahnCharles' comment as it's a valid use-case.</p>\n\n<ol start=\"5\">\n<li>They can return a null object, thereby indicating invalid params being passed for creating the object. ()</li>\n</ol>\n\n<p>As with all design patterns, there are also disadvantages with companion objects:</p>\n\n<ol>\n<li>They cannot be used in subclasses construction</li>\n<li>They are not readily distinguishable from other static methods</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1565670615, "creation_date": 1565670615, "answer_id": 57471132, "question_id": 57465460, "link": "https://stackoverflow.com/questions/57465460/why-would-you-use-a-kotlin-companion-object-rather-than-an-initializer-block-for/57471132#57471132", "title": "Why would you use a Kotlin companion object rather than an initializer block for creation?", "body": "<p>The general idea behind factory methods is that you have some input to the factory method, execute some logic, and then have \"output\" that is the necessary parameters for the object constructor.</p>\n\n<p>When you have only a single factory method, the main advantage of using it is that it lets your class expose only a single <em>primary constructor</em> that shows everything your class needs and everything your class retains. The logic to derive all of these properties is elsewhere. I personally think that this is nice, but it is admittedly not an extremely strong reason to prefer a factory method.</p>\n\n<p>However, as soon as you have two different factory methods, the plan of using an initializer block becomes impossible. Even if you create a <em>secondary constructor</em>, any constructor of your class will execute all <code>init</code> blocks... so there's no way to have two \"separate\" factories using initializers.</p>\n\n<p>The following is a very contrived example, but it does demonstrate behavior that would be impossible with only constructors and <code>init</code> blocks:</p>\n\n<pre><code>class Example(val text: String) {\n\n    companion object {\n\n        fun firstFactory(): Example {\n            println(\"you called the first factory method\")\n            return Example(\"first\")\n        }\n\n        fun secondFactory(): Example {\n            println(\"you called the second factory method\")\n            return Example(\"second\")\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565733114, "creation_date": 1565629893, "last_edit_date": 1565642618, "question_id": 57465460, "link": "https://stackoverflow.com/questions/57465460/why-would-you-use-a-kotlin-companion-object-rather-than-an-initializer-block-for", "title": "Why would you use a Kotlin companion object rather than an initializer block for creation?", "body": "<p><a href=\"https://www.youtube.com/watch?v=HTGj9ZxfiSA\" rel=\"nofollow noreferrer\">#37 Kotlin Tutorial | Companion Object | Factory Pattern</a> says you can use a Kotlin companion object when creating a class when it is complicated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DLrpP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DLrpP.png\" alt=\"Companion Object | Factory Pattern\"></a></p>\n\n<p><a href=\"https://www.programiz.com/kotlin-programming/constructors\" rel=\"nofollow noreferrer\">Kotlin Primary Constructor and Initializer Blocks</a> shows how to use a Kotlin initializer block  in a class.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val person1 = Person(\"joe\", 25)\n}\nclass Person(fName: String, personAge: Int) {\n    val firstName: String\n    var age: Int\n    // initializer block\n    init {\n        firstName = fName.capitalize()\n        age = personAge\n        println(\"First Name = $firstName\")\n        println(\"Age = $age\")\n    }\n}\n</code></pre>\n\n<p>Why would you use the companion object to do this rather than the initializer block?</p>\n\n<p>Regarding this question, I have no interest in Java.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6499, "user_id": 1554633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdb2108d3fd119d4d380e9e4a2b5611?s=128&d=identicon&r=PG", "display_name": "Andrei Tanana", "link": "https://stackoverflow.com/users/1554633/andrei-tanana"}, "is_accepted": true, "score": 1, "last_activity_date": 1565683013, "creation_date": 1565683013, "answer_id": 57473454, "question_id": 57464945, "link": "https://stackoverflow.com/questions/57464945/how-decode-urt-params/57473454#57473454", "title": "How decode urt params", "body": "<p>You can set <code>encoded</code> parameter of <code>Query</code> annotation to <code>true</code>. Then it'll work as intended</p>\n\n<pre><code>@GET(\"/transfers/tunnels\")\nfun getTunnelsList(\n    @Query(\"destination[id]\", encoded = true) destinationId: String,\n    @Query(\"amuunt\") amount: Double,\n    @Query(\"currency\") currency: String\n): Call&lt;List&lt;Tunnel&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 57473454, "answer_count": 1, "score": 0, "last_activity_date": 1565683013, "creation_date": 1565627430, "question_id": 57464945, "link": "https://stackoverflow.com/questions/57464945/how-decode-urt-params", "title": "How decode urt params", "body": "<p>In my android project I use Retrofit 2</p>\n\n<pre><code>@GET(\"/transfers/tunnels\")\n    fun getTunnelsList(\n        @Query(\"destination[id]\") destinationId: String,\n        @Query(\"amuunt\") amount: Double,\n        @Query(\"currency\") currency: String\n    ): Call&lt;List&lt;Tunnel&gt;&gt;\n</code></pre>\n\n<p>And here result:</p>\n\n<pre><code>-&gt; GET http://my_ip/transfers/tunnels?destination%5Bid%5D=9eb5fd41-16f8-430c-91b7-a69ad1fd4c89&amp;amuunt=4.0&amp;currency=EUR http/1.1\n</code></pre>\n\n<p>But I need param with name <code>destination[id]</code></p>\n\n<p>smt like this:</p>\n\n<pre><code>-&gt; GET http://my_ip/sends?preferred_agent[id]=12345&amp;amuunt=12.1&amp;currency=USD&amp;receiver[id]=receiverID_guid&amp;destination[id]=destinationId_guid&amp;contract[id]=contractId_guid&amp;is_ready=false \n</code></pre>\n\n<p>How I can do this?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "rx-java"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1519356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949608d24474fd4b793774655797dbfa?s=128&d=identicon&r=PG", "display_name": "ChronoMTB", "link": "https://stackoverflow.com/users/1519356/chronomtb"}, "is_accepted": false, "score": 0, "last_activity_date": 1565685739, "creation_date": 1565685739, "answer_id": 57474097, "question_id": 57464921, "link": "https://stackoverflow.com/questions/57464921/rx-disposable-not-being-created-on-time-in-unit-tests/57474097#57474097", "title": "Rx disposable not being created on time in unit tests", "body": "<p>What does <code>trigger cleanOldItems</code> do? Assuming this is a synchronous call, then it'll call your cleaning function before it returns any disposable to store in your map. Instead, you should have</p>\n\n<pre><code>@Test\n    fun doNotDeleteItemsBeingProcessed() {\n        `when`(itemProcessor.processItem(any()))\n                .thenAnswer {\n                    //from my understanding of disposables, the disposable should have been made in my real class and should have been inserted into the map at this point\n                    Completable.timer(5000, TimeUnit.MILLISECONDS)\n                }\n\n        repo.triggerProcessItems()\n        repo.triggerCleanOldItems()\n\n        Assert.assertTrue(itemList.contains(item))\n    }\n</code></pre>\n\n<p>Also bear in mind that <code>Completable.timer</code> call uses computation scheduler internally, so unless you explicitly provide a scheduler to it (as in <code>Completable.timer(5000, TimeUnit.MILLISECONDS, Schedulers.trampoline()</code>) or override setComputationSchedulerHandler your subscription will be triggered on a different thread.</p>\n"}], "owner": {"reputation": 59, "user_id": 6534785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf70645d985f2d00d4574c13eee9ff0c?s=128&d=identicon&r=PG&f=1", "display_name": "STL93", "link": "https://stackoverflow.com/users/6534785/stl93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565685739, "creation_date": 1565627332, "last_edit_date": 1565640146, "question_id": 57464921, "link": "https://stackoverflow.com/questions/57464921/rx-disposable-not-being-created-on-time-in-unit-tests", "title": "Rx disposable not being created on time in unit tests", "body": "<p>I'm having trouble with testing the manual manipulation of disposables inside my class being tested. I have a <code>itemsProcessed</code> map that keeps track of the different disposables that are created, the reason is that some disposables I need to be able to dispose on demand, and others I just need to know they exist.</p>\n\n<p>My class runs fine and everything works as expected, but in my tests, I noticed that the disposables that I make aren't being inserted into my map until what would be the async code is already completed.</p>\n\n<p>I'm not sure if it has anything to do with the fact that I'm using </p>\n\n<pre><code>RxJavaPlugins.setIoSchedulerHandler { Schedulers.trampoline() }\nRxAndroidPlugins.setInitMainThreadSchedulerHandler { Schedulers.trampoline() }\n</code></pre>\n\n<p>Here are the relevant methods I'm testing, the <code>myRepo.processItem()</code> call is on a background thread</p>\n\n<pre><code>    private fun processItem(item: Item) {\n        itemsProcessed[item] = myRepo.processItem(item)\n                .doOnComplete {\n                    safelyDelete(item)\n                    itemsProcessed.remove(item)\n                }\n                .doOnError {\n                    itemsProcessed.remove(item)\n                }\n                .subscribe({}, {})\n    }\n\n    private fun cleanOldItems() {\n        itemList.forEach {\n                if (!itemsProcessed[item].exist())\n                        safelyDelete(it)\n                }\n    }\n</code></pre>\n\n<p>myRepo has a processor called <code>itemProcessor</code> which calls the method above, my test is as follows </p>\n\n<pre><code>    @Test\n    fun doNotDeleteItemsBeingProcessed() {\n        `when`(itemProcessor.processItem(any()))\n                .thenAnswer {\n                    //from my understanding of disposables, the disposable should have been made in my real class and should have been inserted into the map at this point\n                    trigger cleanOldItems\n                    Completable.timer(5000, TimeUnit.MILLISECONDS)\n                }\n\n        repo.triggerProcessItems()\n\n        Assert.assertTrue(itemList.contains(item))\n    }\n</code></pre>\n\n<p>It seems like when I run the test, <code>itemsProcessed</code> map in my class is empty until the last assert line in my test is reached. When I added in <code>doOnSubscribe</code>, I noticed that <code>doOnSubscribe</code> was also called at the very end, what's causing this behaviour?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 1426469, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a99e0f9b6711f185ae3fdefbc9dcaa0e?s=128&d=identicon&r=PG", "display_name": "Leo Aso", "link": "https://stackoverflow.com/users/1426469/leo-aso"}, "is_accepted": true, "score": 7, "last_activity_date": 1565649561, "last_edit_date": 1565649561, "creation_date": 1565624091, "answer_id": 57464171, "question_id": 57464016, "link": "https://stackoverflow.com/questions/57464016/why-is-keyword-only-work-with-open-classes-in-kotlin/57464171#57464171", "title": "Why &#39;is&#39; keyword only work with open classes in kotlin?", "body": "<p>When you write it like this</p>\n\n<pre><code>class RandomClass {\n}\ninterface SomeRandomInterface {\n    fun mustImplementThis()\n}\n</code></pre>\n\n<p>It is not possible for any object to be an instance of both <code>RandomClass</code> <em>and</em> <code>SomeRandomInterface</code> because <code>RandomClass</code> itself does not implement <code>SomeRandomInterface</code> and it cannot have any subclasses that implement it either because it is not open (Kotlin classes by default cannot be extended unless you add <code>open</code>). </p>\n\n<p>Since the compiler knows that this check cannot return true, it marks it as an error. Most other languages would probably just warn you that the check is useless, but Kotlin makes it illegal entirely.</p>\n\n<p>On the other hand, when you write</p>\n\n<pre><code>open class RandomClass {\n}\ninterface SomeRandomInterface {\n    fun mustImplementThis()\n}\n</code></pre>\n\n<p>even though the class itself does not implement the interface, it <em>could</em> have a subclass that implements it, for example</p>\n\n<pre><code>open class RandomClass {\n}\ninterface SomeRandomInterface {\n    fun mustImplementThis()\n}\nclass RandomSubClass : RandomClass(), SomeRandomInterface {\n    fun mustImplementThis() {}\n}\n</code></pre>\n\n<p>which means that the check can return true, so the compiler allows it in that case.</p>\n"}], "owner": {"reputation": 301, "user_id": 11747064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cff44ffe9071f938c14161f01a0bb8d?s=128&d=identicon&r=PG&f=1", "display_name": "BRUCE", "link": "https://stackoverflow.com/users/11747064/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57464171, "answer_count": 1, "score": 1, "last_activity_date": 1565658490, "creation_date": 1565623430, "last_edit_date": 1565658490, "question_id": 57464016, "link": "https://stackoverflow.com/questions/57464016/why-is-keyword-only-work-with-open-classes-in-kotlin", "title": "Why &#39;is&#39; keyword only work with open classes in kotlin?", "body": "<p>My question might be noob but please help me. I don't understand what is purpose of not allowing non-open classes with \"is\" keyword in kotlin.</p>\n\n<p>Sample code 1</p>\n\n<pre><code>fun main(){\n    val randomclassobject = RandomClass()\n    println(randomclassobject is someRandomInterface)\n}\nopen class RandomClass{\n}\ninterface someRandomInterface{\n    fun mustImplementThis()\n}\n</code></pre>\n\n<p>The above code works perfectly fine</p>\n\n<p>Now\nSample code 2</p>\n\n<pre><code>fun main(){\n    val randomclassobject = RandomClass()\n    println(randomclassobject is someRandomInterface)\n}\nclass RandomClass{\n}\ninterface someRandomInterface{\n    fun mustImplementThis()\n}\n</code></pre>\n\n<p>without open keyword it shows the error \"Error:(3, 34) Kotlin: Incompatible types: someRandomInterface and RandomClass\"</p>\n\n<p>Why open keyword really matters?</p>\n"}, {"tags": ["android", "kotlin", "firebase-cloud-messaging"], "comments": [{"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1565679087, "post_id": 57463769, "comment_id": 101417251, "body": "Is this mMap data is passed by you in &#39;data&#39; payload from server side?? Can u post that code (to send notification)??"}, {"owner": {"reputation": 4835, "user_id": 2704885, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nGr5K.jpg?s=128&g=1", "display_name": "Boldijar Paul", "link": "https://stackoverflow.com/users/2704885/boldijar-paul"}, "reply_to_user": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1565684561, "post_id": 57463769, "comment_id": 101419730, "body": "No, is just the android representation. I&#39;ve attached the server sided code."}, {"owner": {"reputation": 482, "user_id": 4659743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DTuU0.jpg?s=128&g=1", "display_name": "Naitik Soni", "link": "https://stackoverflow.com/users/4659743/naitik-soni"}, "edited": false, "score": 0, "creation_date": 1565687738, "post_id": 57463769, "comment_id": 101421179, "body": "If &#39;booking_id&#39; is your field... Try to send in data payload instead of notification object. Then get it in android side."}], "owner": {"reputation": 4835, "user_id": 2704885, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nGr5K.jpg?s=128&g=1", "display_name": "Boldijar Paul", "link": "https://stackoverflow.com/users/2704885/boldijar-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565681309, "creation_date": 1565622454, "last_edit_date": 1565681309, "question_id": 57463769, "link": "https://stackoverflow.com/questions/57463769/notifications-params-only-showing-when-app-is-in-foreground", "title": "Notifications params only showing when app is in foreground", "body": "<p>I'm trying to get the notification params in onCreate, but I only get the google.* fields.</p>\n\n<p>My FCM Service:</p>\n\n<pre><code> override fun onMessageReceived(message: RemoteMessage?) {\n    Log.e(\"Push\", Gson().toJson(message))\n}\n</code></pre>\n\n<p>This will show me when app is in foreground:</p>\n\n<pre><code>{\n  \"zza\": {\n    \"mMap\": {\n      \"google.delivered_priority\": \"high\",\n      \"google.sent_time\": 1565619574704,\n      \"google.ttl\": 2419200,\n      \"google.original_priority\": \"high\",\n      \"gcm.notification.e\": \"1\",\n      \"gcm.notification.title\": \"New meeting\",\n      \"from\": \"308737816494\",\n      \"gcm.notification.booking_id\": \"339\",\n      \"google.message_id\": \"0:1565619574708538%545adad5545adad5\",\n      \"gcm.notification.body\": \".....\",\n      \"google.c.a.e\": \"1\"\n    }\n  }\n}\n</code></pre>\n\n<p>Notice  <strong>\"gcm.notification.booking_id\": \"339\",</strong> this is the field I need.</p>\n\n<p>When app is in background or killed, and I click the notification, I have the next code in my launcher activity:</p>\n\n<pre><code> private fun checkNotifications(intent: Intent?) {\n        val bookingId = intent?.getStringExtra(\"gcm.notification.booking_id\")\n        Log.e(\"Push\", \"bookind id $bookingId)\")\n        Log.e(\"PUSH\", Gson().toJson(intent?.extras))\n</code></pre>\n\n<p>The problem is here that I don't get any gcm.* filters, just google.*. And of course that bookindId is null.</p>\n\n<pre><code>{\n  \"mMap\": {\n    \"google.delivered_priority\": \"high\",\n    \"google.sent_time\": 1565622016732,\n    \"google.ttl\": 2419200,\n    \"google.original_priority\": \"high\",\n    \"from\": \"308737816494\",\n    \"google.message_id\": \"0:1565622016737416%545adad5545adad5\",\n    \"collapse_key\": \"com.wolfpack.planetoffinance\"\n  }\n}\n</code></pre>\n\n<p>Server sided code;</p>\n\n<pre><code> def options\n  {\n    notification: {\n      title: titles[notification.notification_type.to_sym],\n      body: bodies[notification.notification_type.to_sym],\n      booking_id: notification.booking_id\n    }\n  }\nend\n</code></pre>\n\n<pre><code>\n\n```def call\n    @other_user = other_user\n\n    response = FCM_CLIENT.send(registration_ids, options)\n    notification.user.devices.where(uuid: response[:not_registered_ids]).destroy_all\n  end\n</code></pre>\n\n<pre><code>def call\n@other_user = other_user\n\nresponse = FCM_CLIENT.send(registration_ids, options)\nnotification.user.devices.where(uuid: response[:not_registered_ids]).destroy_all\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["android", "kotlin", "data-binding", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 2902, "user_id": 998066, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c1e14f181603c670ebbaefaae9038341?s=128&d=identicon&r=PG", "display_name": "checkmate711", "link": "https://stackoverflow.com/users/998066/checkmate711"}, "edited": false, "score": 0, "creation_date": 1565632630, "post_id": 57465211, "comment_id": 101405305, "body": "Yes, sure enough. Thanks very much, Sandip!"}, {"owner": {"reputation": 708, "user_id": 8144663, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ap-YVEZ3kUY/AAAAAAAAAAI/AAAAAAAAAGg/aPu6SSHSeWQ/photo.jpg?sz=128", "display_name": "Sandip Savaliya", "link": "https://stackoverflow.com/users/8144663/sandip-savaliya"}, "reply_to_user": {"reputation": 2902, "user_id": 998066, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c1e14f181603c670ebbaefaae9038341?s=128&d=identicon&r=PG", "display_name": "checkmate711", "link": "https://stackoverflow.com/users/998066/checkmate711"}, "edited": false, "score": 0, "creation_date": 1565972876, "post_id": 57465211, "comment_id": 101522300, "body": "Welcome sire :)"}], "tags": [], "owner": {"reputation": 708, "user_id": 8144663, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ap-YVEZ3kUY/AAAAAAAAAAI/AAAAAAAAAGg/aPu6SSHSeWQ/photo.jpg?sz=128", "display_name": "Sandip Savaliya", "link": "https://stackoverflow.com/users/8144663/sandip-savaliya"}, "is_accepted": true, "score": 1, "last_activity_date": 1565628679, "creation_date": 1565628679, "answer_id": 57465211, "question_id": 57463600, "link": "https://stackoverflow.com/questions/57463600/recyclerview-data-binding-issue-with-item-viewmodel/57465211#57465211", "title": "RecyclerView data binding issue with item ViewModel", "body": "<p>This is just because you are using a mutable property, but not notifying your view somehow that your value is being updated. for binding them directly you should make it an observable and then attach it with view in databinding or you should notify the updates you are doing on that variable.</p>\n\n<pre><code>public class Foo {\n    public final ObservableField&lt;String&gt; baz = new ObservableField&lt;&gt;();\n}\n</code></pre>\n\n<p>however on view side do this,</p>\n\n<pre><code>&lt;TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@{foo.baz}\"/&gt;\n</code></pre>\n\n<p>and while changing the value you can do it like that - </p>\n\n<p><em>baz.set(\"changed value\")</em> and it will automatically update your view. </p>\n"}], "owner": {"reputation": 2902, "user_id": 998066, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c1e14f181603c670ebbaefaae9038341?s=128&d=identicon&r=PG", "display_name": "checkmate711", "link": "https://stackoverflow.com/users/998066/checkmate711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 57465211, "answer_count": 1, "score": 0, "last_activity_date": 1565628679, "creation_date": 1565621845, "question_id": 57463600, "link": "https://stackoverflow.com/questions/57463600/recyclerview-data-binding-issue-with-item-viewmodel", "title": "RecyclerView data binding issue with item ViewModel", "body": "<p>In my code I'm using two view models: one for the list of items used in a RecyclerView and one for the item itself, which I am binding to an item detail view.\nOnce the view is created, I'm having issues making any updates from the item detail view model to the view. So in the code below, when the button is clicked, the onButtonClick() function in the ItemViewModel is called but text update in the item_card view does not update.</p>\n\n<p>Any ideas greatly appreciated.</p>\n\n<p>Thanks!</p>\n\n<pre><code>MainActivity.kt:\n\nclass MainActivity : AppCompatActivity() {\n\n    private lateinit var binding: ActivityMainBinding\n    private lateinit var itemListVM: ItemListViewModel\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_main)\n        binding.lifecycleOwner = this\n\n        setupBindings()\n    }\n\nprivate fun setupBindings() {\n\n    binding.lifecycleOwner = this\n\n    // Create VM\n    itemListVM = ViewModelProviders.of(this).get(ItemListViewModel::class.java)\n    binding.itemListVM = itemListVM\n\n    setupRecyclerView()\n\n}\n\n// Set up RecyclerView\nprivate fun setupRecyclerView() {\n    val recyclerView = binding.itemListRecyclerview\n    val layoutManager = LinearLayoutManager(this)\n    recyclerView.layoutManager = layoutManager\n\n     // Set adapter\n    recyclerView.adapter = itemListVM.getAdapter()\n\n    // Create some data\n    var itemList = mutableListOf&lt;ItemModel&gt;()\n    for (i in 0..5){\n        var item = ItemModel()\n        itemList.add(item)\n    }\n\n    itemListVM.setItemList(itemList)\n}\n\nItemModel.kt:\nclass ItemModel{\n   var text = \"\"\n}\n\n ItemViewModel.kt:\n class ItemViewModel: ViewModel(){\n    var text = MutableLiveData&lt;String&gt;()\n    lateinit var itemModel : ItemModel\n    var position : Int = -1\n\n    init{\n        text.value = \"init\"\n    }\n\n    fun setItem(itemModel: ItemModel){\n        this.itemModel = itemModel\n        text.value = \"set model\"\n    }\n\n    fun onButtonClick(){\n        Log.d(\"ItemViewModel\", \"position: $position\")\n        text.value = \"button click\"\n    }\n}\n\nItemListViewModel.kt:\nclass ItemListViewModel: ViewModel(){\n\n    var itemVMMap = mutableMapOf&lt;Int, ItemViewModel&gt;()\n    var itemListAdapter : ItemListAdapter? = null\n\n    init {\n        itemListAdapter = ItemListAdapter(this)\n    }\n\n    fun getAdapter(): ItemListAdapter? {\n        return itemListAdapter\n    }\n\n    fun setItemList(itemList: List&lt;ItemModel&gt;){\n        itemListAdapter?.setItemList(itemList)\n    }\n\n    fun getItemAt(position: Int?): ItemModel? {\n        val itemList = itemListAdapter?.getItemList()\n\n        if (itemList != null &amp;&amp;\n            position != null &amp;&amp;\n            itemList.size &gt; position){\n            return itemList.get(position)\n        }\n        else {\n            return null\n        }\n    }\n\n    fun getItemVMAtPosition(position: Int?):ItemViewModel?{\n        // Check if VM exists\n        var itemVM: ItemViewModel? = null\n        if (itemVMMap.contains(position)){\n            itemVM = itemVMMap[position]\n        }\n        else {\n            // Create a new VM\n            itemVM = ItemViewModel()\n            itemVM.position = position!!\n\n            // Get item\n            val item = getItemAt(position)\n\n            item?.let{\n                itemVM?.setItem(it)\n            }\n\n            itemVMMap[position!!] = itemVM\n        }\n\n        return itemVM\n    }\n}\n\nItemListAdapter.kt:\nclass ItemListAdapter\ninternal constructor(listViewModel : ItemListViewModel) : RecyclerView.Adapter&lt;ItemListAdapter.GenericViewHolder&gt;() {\n\n    private var itemList: List&lt;ItemModel&gt;? = null\n    private var itemListVM: ItemListViewModel? = null\n    private var layoutId: Int = 0\n\n    init {\n        this.layoutId = layoutId\n        this.itemListVM = listViewModel\n    }\n\n    private fun getLayoutIdForPosition(position: Int): Int {\n        return layoutId\n    }\n\n    override fun getItemCount(): Int {\n        return itemList?.size ?: 0\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): GenericViewHolder {\n        val layoutInflater = LayoutInflater.from(parent.context)\n        val binding = DataBindingUtil.inflate&lt;ViewDataBinding&gt;(\n            layoutInflater,\n            com.example.test2.R.layout.item_card,\n            parent,\n            false\n        ) as com.example.test2.databinding.ItemCardBinding\n\n        return GenericViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: GenericViewHolder, position: Int) {\n        if (itemListVM != null) {\n            val itemVM = itemListVM!!.getItemVMAtPosition(position)\n            holder.bind(itemVM!!, position)\n        }\n    }\n\n    override fun getItemViewType(position: Int): Int {\n        return getLayoutIdForPosition(position)\n    }\n\n    // View Holder Definition\n    inner class GenericViewHolder(val binding: ViewDataBinding) : RecyclerView.ViewHolder(binding.root) {\n\n        fun bind(viewModel: ItemViewModel, position: Int?) {\n            binding.setVariable(BR.itemListVM, itemListVM)\n            binding.setVariable(BR.position, position)\n            binding.setVariable(BR.itemVM, viewModel)\n\n            binding.executePendingBindings()\n        }\n    }\n\n    // Setters\n    fun setItemList(itemList: List&lt;ItemModel&gt;?) {\n        this.itemList = itemList\n        notifyDataSetChanged()\n    }\n\n    // Getters\n    fun getItemList(): List&lt;ItemModel&gt;? {\n        return itemList\n    }\n}\n\nactivity_main.xml:\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n    &lt;data&gt;\n        &lt;variable name=\"itemListVM\" type=\"com.example.test2.ItemListViewModel\"/&gt;\n    &lt;/data&gt;\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            tools:context=\".MainActivity\"&gt;\n\n            &lt;androidx.recyclerview.widget.RecyclerView\n                    android:id=\"@+id/item_list_recyclerview\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:scrollbars=\"vertical\"&gt;\n            &lt;/androidx.recyclerview.widget.RecyclerView&gt;\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n&lt;/layout&gt;\n\nitem_card.xml:\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;data&gt;\n        &lt;import type=\"android.view.View\" /&gt;\n        &lt;variable name=\"itemListVM\" type=\"com.example.test2.ItemListViewModel\"/&gt;\n        &lt;variable name=\"position\" type=\"java.lang.Integer\" /&gt;\n        &lt;variable name=\"itemVM\" type=\"com.example.test2.ItemViewModel\"/&gt;\n    &lt;/data&gt;\n    &lt;LinearLayout\n                  android:layout_width=\"match_parent\"\n                  android:layout_height=\"wrap_content\"\n                    android:orientation=\"horizontal\"\n                    android:layout_margin=\"12dp\"&gt;\n        &lt;TextView android:layout_width=\"wrap_content\"\n                  android:layout_height=\"wrap_content\"\n                  android:text=\"@{itemVM.text}\"/&gt;\n        &lt;Button android:layout_height=\"wrap_content\"\n                android:layout_width=\"wrap_content\"\n                android:paddingLeft=\"12dp\"\n                android:onClick=\"@{() -&gt; itemVM.onButtonClick()}\"\n                android:text=\"Click Me\"/&gt;\n    &lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n"}]