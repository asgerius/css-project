[{"tags": ["server", "dart", "dart-io"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456331868, "post_id": 35607479, "comment_id": 58899914, "body": "The stacktrace should point to the exact source location where this exception is thrown. Can you please provide this information. Doesn&#39;t seem to be part of the code in your question."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456332422, "post_id": 35607479, "comment_id": 58900360, "body": "I can&#39;t get where <code>uploadServer.dart:12:54</code> exactly is. Can you give some indication what code line (12) that is in your question?"}, {"owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456332430, "post_id": 35607479, "comment_id": 58900367, "body": "@G&#252;nterZ&#246;chbauer I update the stacktrace in the question. Please have a look, thank you."}, {"owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456332943, "post_id": 35607479, "comment_id": 58900777, "body": "@G&#252;nterZ&#246;chbauer Just updated the question, uploadServer.dart is the file name of the server."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456333388, "post_id": 35607479, "comment_id": 58901149, "body": "Can you please change <code>HttpBodyFileUpload fileUploaded = body.body[&#39;myfile&#39;];</code> to <code>print(body.body)</code> and alternatively <code>print(body.request)</code> and add the output to your question?"}, {"owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456335828, "post_id": 35607479, "comment_id": 58902831, "body": "@G&#252;nterZ&#246;chbauer I updated the question with change and the output. Please check, thank you."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456336035, "post_id": 35607479, "comment_id": 58902972, "body": "Could you publish a full example to a GitHub repo so I can try it out locally without rebuilding a whole project?"}, {"owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1468533563, "post_id": 35607479, "comment_id": 64179701, "body": "This issue was resolved with package upgrade. There was some issue with the package version."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "is_accepted": true, "score": 2, "last_activity_date": 1468533927, "creation_date": 1468533927, "answer_id": 38384997, "question_id": 35607479, "link": "https://stackoverflow.com/questions/35607479/dart-receive-a-file-from-a-http-post-request-on-dart-server-and-save-print-its/38384997#38384997", "title": "Dart: receive a file from a HTTP POST request on Dart server and save/print its contents on the server", "body": "<p>This issue was resolved with package upgrade. The problem was with conflicting package versions. If anyone happens to stumble upon this issue again I would highly suggest checking the package versions and performing a pub upgrade.   </p>\n"}], "owner": {"reputation": 21, "user_id": 2921976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e990cc9927dff432a533e3627b86ba02?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2921976/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 38384997, "answer_count": 1, "score": 0, "last_activity_date": 1468533927, "creation_date": 1456330951, "last_edit_date": 1495540289, "question_id": 35607479, "link": "https://stackoverflow.com/questions/35607479/dart-receive-a-file-from-a-http-post-request-on-dart-server-and-save-print-its", "title": "Dart: receive a file from a HTTP POST request on Dart server and save/print its contents on the server", "body": "<p>I have a server side code which accepts a file from POST request and copy the contents to a new file. I am basically trying to reproduce the example mentioned on <a href=\"https://stackoverflow.com/questions/18435920/dart-how-to-upload-image\">Dart how to upload image</a> </p>\n\n<pre><code>import 'dart:io';\nimport 'packages/http_server/http_server.dart';\n\nvoid main() \n{\n HttpServer.bind('127.0.0.1', 8081)\n  .then((HttpServer server) {\n  server.listen((HttpRequest request) {\n  server.listen((HttpRequest request) {\n    if (request.method.toLowerCase() == 'post') {\n    HttpBodyHandler.processRequest(request).then((body) {\n      HttpBodyFileUpload fileUploaded = body.body['myfile'];\n      final file = new File('abc.txt');\n      file.writeAsBytes(fileUploaded.content, mode: FileMode.WRITE)\n          .then((_) {\n        request.response.close();\n      });\n    });\n   } \n}); \n});\n}\n</code></pre>\n\n<p>I get the below error when I send a file to the server using curl post:</p>\n\n<pre><code>curl -v -F myfile=@C:/aaa.txt -H \"Content-Type: text/plain\" http://localhost8081\n</code></pre>\n\n<blockquote>\n  <p>Unhandled exception:</p>\n</blockquote>\n\n<pre><code>type 'String' is not a subtype of type 'int' of 'index'.\n#0      _StringBase.[] (dart:core-patch/string_patch.dart:231)\n#1      main.&lt;anonymous closure&gt;.&lt;anonymous closure&gt;.&lt;anonymous closure&gt;  (file:///C:/Dart%20Examples/dart-samples-master/dart-samples-master/html5/web/file/dndfiles/uploadServer.dart:10:54)\n#2      _RootZone.runUnary (dart:async/zone.dart:1149)\n#3      _Future._propagateToListeners.handleValueCallback (dart:async/future_impl.dart:551)\n#4      _Future._propagateToListeners (dart:async/future_impl.dart:637)\n#5      _Future._complete (dart:async/future_impl.dart:414)\n#6      Stream.fold.&lt;anonymous closure&gt; (dart:async/stream.dart:624)\n#7      _RootZone.runGuarded (dart:async/zone.dart:1076)\n#8      _BufferingStreamSubscription._sendDone.sendDone (dart:async/stream_impl.dart:390)\n#9      _BufferingStreamSubscription._sendDone (dart:async/stream_impl.dart:399)\n#10     _BufferingStreamSubscription._close (dart:async/stream_impl.dart:290)\n#11     _SinkTransformerStreamSubscription._close (dart:async/stream_transformers.dart:95)\n#12     _EventSinkWrapper.close (dart:async/stream_transformers.dart:18)\n#13     _StringAdapterSink.close (dart:convert/string_conversion.dart:267)\n#14     _Utf8ConversionSink.close (dart:convert/string_conversion.dart:324)\n#15     _ConverterStreamEventSink.close (dart:convert/chunked_conversion.dart:84)\n#16     _SinkTransformerStreamSubscription._handleDone (dart:async/stream_transformers.dart:140)\n#17     _RootZone.runGuarded (dart:async/zone.dart:1076)\n#18     _BufferingStreamSubscription._sendDone.sendDone (dart:async/stream_impl.dart:390)\n#19     _BufferingStreamSubscription._sendDone (dart:async/stream_impl.dart:399)\n#20     _BufferingStreamSubscription._close (dart:async/stream_impl.dart:290)\n#21     _ForwardingStream._handleDone (dart:async/stream_pipe.dart:112)\n#22     _ForwardingStreamSubscription._handleDone (dart:async/stream_pipe.dart:180)\n#23     _RootZone.runGuarded (dart:async/zone.dart:1076)\n#24     _BufferingStreamSubscription._sendDone.sendDone (dart:async/stream_impl.dart:390)\n#25     _BufferingStreamSubscription._sendDone (dart:async/stream_impl.dart:399)\n#26     _BufferingStreamSubscription._close (dart:async/stream_impl.dart:290)\n#27     _StreamController&amp;&amp;_SyncStreamControllerDispatch._sendDone (dart:async/stream_controller.dart:752)\n#28     _StreamController._closeUnchecked (dart:async/stream_controller.dart:605)\n#29     _StreamController.close (dart:async/stream_controller.dart:598)\n#30     _HttpParser._closeIncoming (dart:io/http_parser.dart:1046)\n#31     _HttpParser._doParse (dart:io/http_parser.dart:784)\n#32     _HttpParser._parse (dart:io/http_parser.dart:330)\n#33     _HttpParser._onData (dart:io/http_parser.dart:819)\n#34     _RootZone.runUnaryGuarded (dart:async/zone.dart:1087)\n#35     _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:341)\n#36     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:270)\n#37     _StreamController&amp;&amp;_SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:744)\n#38     _StreamController._add (dart:async/stream_controller.dart:616)\n#39     _StreamController.add (dart:async/stream_controller.dart:562)\n#40     _Socket._onData (dart:io-patch/socket_patch.dart:1646)\n#41     _RootZone.runUnaryGuarded (dart:async/zone.dart:1087)\n#42     _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:341)\n#43     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:270)\n#44     _StreamController&amp;&amp;_SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:744)\n#45     _StreamController._add (dart:async/stream_controller.dart:616)\n#46     _StreamController.add (dart:async/stream_controller.dart:562)\n#47     _RawSocket._RawSocket.&lt;anonymous closure&gt; (dart:io-patch/socket_patch.dart:1215)\n#48     _NativeSocket.issueReadEvent.issue (dart:io-patch/socket_patch.dart:749)\n#49     _microtaskLoop (dart:async/schedule_microtask.dart:41)\n#50     _startMicrotaskLoop (dart:async/schedule_microtask.dart:50)\n#51     _runPendingImmediateCallback (dart:isolate-patch/isolate_patch.dart:96)\n#52     _RawReceivePortImpl._handleMessage (dart:isolate-patch/isolate_patch.dart:149)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I changed <code>HttpBodyFileUpload fileUploaded = body.body['myfile'];</code> in above code to <code>print(body.body);</code> &amp; <code>print(body.request)</code> and I sent a text file with content \"abcdef\" to the server via HTTP POST and got the below response: </p>\n\n<p>print(body.body);</p>\n\n<pre><code>--------------------------1e7b12f3c4249867\nContent-Disposition: form-data; name=\"myfile\"; filename=\"test.txt\"\nContent-Type: text/plain\n\nabcdef\n</code></pre>\n\n<p>print(body.request)</p>\n\n<pre><code>--------------------------1e7b12f3c4249867--\n\nInstance of '_HttpRequest'\n</code></pre>\n\n<p>I have referred the post as well: <a href=\"https://stackoverflow.com/questions/26938624/dart-language-receive-a-file-from-a-post-and-print-its-contents-on-the-server\">Dart Language: receive a file from a POST and print its contents on the server</a> but it is not helping in my case.</p>\n\n<p>Any assistance on this issue will be very helpful.</p>\n"}, {"tags": ["dart", "gitignore", "dart-pub"], "answers": [{"tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1456322423, "creation_date": 1456322423, "answer_id": 35604224, "question_id": 35603769, "link": "https://stackoverflow.com/questions/35603769/should-i-be-adding-pub-bin-dir-into-gitignore/35604224#35604224", "title": "Should I be adding .pub/bin dir into .gitignore", "body": "<p>The whole <code>.pub</code> directory should be added to <code>.gitignore</code></p>\n"}], "owner": {"reputation": 9417, "user_id": 34134, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d5c54e0ad7c352fcaf7a6ac83f6877d?s=128&d=identicon&r=PG", "display_name": "snitko", "link": "https://stackoverflow.com/users/34134/snitko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1456322457, "accepted_answer_id": 35604224, "answer_count": 1, "score": 1, "last_activity_date": 1456322423, "creation_date": 1456321109, "question_id": 35603769, "link": "https://stackoverflow.com/questions/35603769/should-i-be-adding-pub-bin-dir-into-gitignore", "closed_reason": "Duplicate", "title": "Should I be adding .pub/bin dir into .gitignore", "body": "<p>When creating a Dart library and running my tests, I noticed there's a <code>.pub</code> dir with a <code>.pub/bin/test</code> subdir in it. Should I be adding <code>.pub</code> dir into .gitignore? It doesn't look like something that needs to be in the repo, but I'd like to double check, thus the question.</p>\n"}, {"tags": ["dart", "angular"], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456323765, "post_id": 35604377, "comment_id": 58893889, "body": "thanks for your reply, could you explain more details of your code? i am fresh man with both dart and angular... 1)what the &#39;this&#39; mean ? the context is component code? 2)what is the fb ?"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456324201, "post_id": 35604377, "comment_id": 58894246, "body": "Not sure what to explain. A validator is passed to the <code>rtc</code> control <code>[&#39;&#39;, MyValidator.validate]</code>. <code>&#39;&#39;</code>, is the initial value, the 2nd argument is a single validator or a list of validators if you want to apply more than one. The validator itself is just a function which is called by Angular and where the <code>Control</code> is passed. If the value doesn&#39;t fulfill some criteria return a <code>Map</code> with an error key and an error value (not sure what the value is for). From the docs it doesn&#39;t seem seem it needs to be <code>bool</code>."}, {"owner": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456327868, "post_id": 35604377, "comment_id": 58896808, "body": "<code>class MyComponent  {    Control ctrlRtc1 = new Control([&#39;test&#39;, rtcValidator]);      static Map&lt;String, bool&gt; rtcValidator(Control control) {      print(111);    }  }</code>   this is my test code, but the print(111) never showed..."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456327948, "post_id": 35604377, "comment_id": 58896861, "body": "Seems the comment is not complete yet. Please edit your question and put the code there. Code in comments is very hard to read. There is an <code>edit</code> link just below the [ <a href=\"https://stackoverflow.com/questions/tagged/dart\">dart</a> ] [ <a href=\"https://stackoverflow.com/questions/tagged/angular2\">angular2</a> ] tags (to the bottom-left) of your question.."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456328677, "post_id": 35604377, "comment_id": 58897371, "body": "<code>Control ctrlRtc = new Control([&#39;test&#39;, rtcValidator]);</code> should be instead <code>Control ctrlRtc = new Control(&#39;test&#39;, rtcValidator);</code> without the <code>[]</code> otherwise <code>[&#39;test&#39;, rtcValidator]</code> is used as the initial value of the control."}, {"owner": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456368466, "post_id": 35604377, "comment_id": 58917763, "body": "i have modified the code, but my rtcValidator just run once when program bootstrap, it seems the Control which created by hand not bind to the html element #deviceRtc"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "edited": false, "score": 0, "creation_date": 1456391935, "post_id": 35604377, "comment_id": 58928030, "body": "See for an example <a href=\"https://github.com/bwu-dart-playground/dart_playground/blob/025db6579e41d30d9be892bdffeee95e89e3d39a/angular2/forms_and_validation_in_angular_2/lib/app_element.dart#L101-L101\" rel=\"nofollow noreferrer\">github.com/bwu-dart-playground/dart_playground/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1456322832, "creation_date": 1456322832, "answer_id": 35604377, "question_id": 35602799, "link": "https://stackoverflow.com/questions/35602799/how-to-implement-a-custom-validator-with-angular2-in-dart/35604377#35604377", "title": "How to implement a custom validator with Angular2 in Dart?", "body": "<p>Something like:</p>\n\n<pre><code>this.myForm = fb.group({  \n  'rtc':  ['', MyValidator.validate]  \n});\n\n\nclass MyValidator {\n  static Map&lt;String, bool&gt; validate(Control control) {\n    if(control.value !...) {\n      return {'someErrorKey': true};\n    }\n    return null;\n  }\n}\n</code></pre>\n\n<p>(not tested)</p>\n"}, {"comments": [{"owner": {"reputation": 1099, "user_id": 3832895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mtp6d.jpg?s=128&g=1", "display_name": "thisextendsthat", "link": "https://stackoverflow.com/users/3832895/thisextendsthat"}, "edited": false, "score": 0, "creation_date": 1500971550, "post_id": 41515260, "comment_id": 77557355, "body": "I followed the linked example and got validation working perfectly"}], "tags": [], "owner": {"reputation": 23053, "user_id": 122763, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3312219849e076b5e99adb78b9e60b58?s=128&d=identicon&r=PG", "display_name": "Mark E. Haase", "link": "https://stackoverflow.com/users/122763/mark-e-haase"}, "is_accepted": false, "score": 1, "last_activity_date": 1483741088, "creation_date": 1483741088, "answer_id": 41515260, "question_id": 35602799, "link": "https://stackoverflow.com/questions/35602799/how-to-implement-a-custom-validator-with-angular2-in-dart/41515260#41515260", "title": "How to implement a custom validator with Angular2 in Dart?", "body": "<p>I think you need to use <a href=\"https://webdev.dartlang.org/angular/api/angular2.common/NgFormControl-class\" rel=\"nofollow noreferrer\"><code>ngFormControl</code></a> instead of <code>ngControl</code>. You don't need the <code>#deviceRtc</code> spy.</p>\n\n<pre><code>&lt;input \n    type=\"number\"\n    min=\"1\"\n    max=\"43200\"\n    style=\"text-align: center\" \n    [(ngModel)]=\"device.rtc\"\n    [ngFormControl]=\"ctrlRtc\"&gt;\n</code></pre>\n\n<p>Then you will see that your <code>rtcValidator(...)</code> is called every time the input changes. I won't bother explaining the return type of the validator function, because G\u00fcnter already demonstrated that in his answer.</p>\n\n<p>I didn't try running your example, but I do have <a href=\"https://github.com/mehaase/ng2_quickstart/blob/form/lib/app_component.dart\" rel=\"nofollow noreferrer\">a working example</a> you can try.</p>\n"}], "owner": {"reputation": 152, "user_id": 5974452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-QVXEmZ-6WJc/AAAAAAAAAAI/AAAAAAAAABI/nZqax0SHiMY/photo.jpg?sz=128", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5974452/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "accepted_answer_id": 35604377, "answer_count": 2, "score": 3, "last_activity_date": 1483741213, "creation_date": 1456318449, "last_edit_date": 1483741213, "question_id": 35602799, "link": "https://stackoverflow.com/questions/35602799/how-to-implement-a-custom-validator-with-angular2-in-dart", "title": "How to implement a custom validator with Angular2 in Dart?", "body": "<p>My code:</p>\n\n<pre><code>&lt;input #rtc=\"ngForm\" \n       type=\"number\" \n       min=\"1\" \n       max=\"43200\" \n       style=\"text-align: center\" \n       [(ngModel)]=\"device.rtc\" \n       ngControl=\"rtc\" \n       required&gt;\n</code></pre>\n\n<p>The <code>ngControl</code> does not track the number type input valid status. How to implement a validator for the input myself?</p>\n\n<p>Here is my test code:</p>\n\n<p>Dart:</p>\n\n<pre><code>class MyComponent \n{\n    Control ctrlRtc = new Control('test', rtcValidator);\n\n    static Map&lt;String, bool&gt; rtcValidator(Control control)\n    {\n        print(111); \n    } \n}\n</code></pre>\n\n<p>HTML template:</p>\n\n<pre><code>&lt;input \n    #deviceRtc=\"ngForm\"\n    type=\"number\"\n    min=\"1\"\n    max=\"43200\"\n    style=\"text-align: center\" \n    [(ngModel)]=\"device.rtc\"\n    ngControl=\"ctrlRtc\" &lt;!-- also tried 'rtc'--&gt;\n&gt;\n</code></pre>\n\n<p>The \"111\" is never shown in the console...</p>\n"}, {"tags": ["dart", "angular", "angular2-forms"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456312676, "post_id": 35600126, "comment_id": 58885915, "body": "&quot;error is propagated by the stream to storage&quot; I can&#39;t see what error is propagated to what stream and what &quot;stream remains open&quot;."}, {"owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456313171, "post_id": 35600126, "comment_id": 58886300, "body": "&#39;error&#39; meaning the invalid input. I would like to prevent the stream from emitting the invalid input."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456313226, "post_id": 35600126, "comment_id": 58886333, "body": "What stream? I don&#39;t get it."}, {"owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456313975, "post_id": 35600126, "comment_id": 58886846, "body": "<code>EventEmitter raceEmitter = new EventEmitter( );</code> extends <code>Stream</code>"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456314098, "post_id": 35600126, "comment_id": 58886931, "body": "It only emits a even when <code>onSubmit()</code> is called. I don&#39;t see how this is related to your question."}, {"owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456314477, "post_id": 35600126, "comment_id": 58887214, "body": "Once I pressed the submit button, the event is submitted as expected. After that, the event is still being submitted irrespective of the validation result. Is there a way to prevent the invalid data being sent by the emitter?"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456314630, "post_id": 35600126, "comment_id": 58887325, "body": "Just wrap the <code>raceEmitter.emit(...)</code> in an <code>if(someThing)</code> than the event is not emitted if <code>someThing</code> is <code>false</code>."}], "owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456312587, "creation_date": 1456311307, "last_edit_date": 1456312587, "question_id": 35600126, "link": "https://stackoverflow.com/questions/35600126/eventemiter-pausing-and-restarting", "title": "EventEmiter pausing and restarting", "body": "<p>I have the following code</p>\n\n<h2>.html</h2>\n\n<pre><code>&lt;input\n    type = \"text\"\n    #raceCtrl = \"ngForm\"\n    [ngFormControl] = \"raceForm.controls['raceCtrl']\"\n    [(ngModel)] = \"race.race\"\n    (input) = \"inputHandler()\"\n    (mousemove) = \"inputHandler()\"\n    class = \"mdl-textfield__input\"\n    id = \"race\"&gt;\n\n&lt;input\n    type = \"text\"\n    #ethnicGroupCtrl = \"ngForm\"\n    [ngFormControl] = \"raceForm.controls['ethnicGroupCtrl']\"\n    [(ngModel)] = \"race.ethnicGroup\"\n    (input) = \"inputHandler()\"\n    (mousemove) = \"inputHandler()\"\n    class = \"mdl-textfield__input\"\n    id = \"ethnicGroup\"&gt;\n</code></pre>\n\n<h2>.dart</h2>\n\n<pre><code>RaceComponent( FormBuilder fb, ModelService modelSrvc ) {\n    raceForm = fb.group( {\n      'raceCtrl': ['', CustomValidators.requiredNounValidator( 2 )],\n      'ethnicGroupCtrl': ['', CustomValidators.optionalNounValidator( 2 )]\n    } );\n\n    _raceCtrl = raceForm.controls['raceCtrl'];\n    race = modelSrvc.getRace( );\n    inputHandler( );\n  }\n\n  void inputHandler( ) {\n    if ( raceForm.valid &amp;&amp;\n        !isEmpty( _raceCtrl.value ) ) {\n      isFormValid = true;\n    }\n    else {\n      isFormValid = false;\n    }\n    race.isValid = isFormValid;\n  }\n\n  onSubmit( ) {\n    isSubmitted = true;\n    if ( isFormValid ) {\n      raceEmitter.emit( {'topic': topic, 'race': race} );\n    }\n    else {\n      raceEmitter.emit( {'topic': topic, 'race': new Race( )} );\n    }\n\n    raceMap = new JsonObject.fromJsonString( encode( race ) );\n</code></pre>\n\n<p>The form submits as expected. But from then onwards the stream remains open and even when <code>ethinicGroup</code> has errors the error is propagated by the stream to storage. Is it possible to pause and unpause the stream depending on the validity of the form to prevent the erroneous data from being propagated.</p>\n"}, {"tags": ["angularjs", "node.js", "dart", "dart-polymer", "angular-dart"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4652251, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9Q2ulcZqDYE/AAAAAAAAAAI/AAAAAAAAAT4/8LQAhEFeQpE/photo.jpg?sz=128", "display_name": "sionydus", "link": "https://stackoverflow.com/users/4652251/sionydus"}, "edited": false, "score": 0, "creation_date": 1456361826, "post_id": 35597992, "comment_id": 58915903, "body": "Now I realize that my mindset when writing this question was off-base. The interaction is all in the REST API (passing JSON in my case). However, you bring up a good point on potential deployment issues and the need for sending <code>pub serve</code> to Dart source files. I&#39;ve seen mention of shelf for using Dart in the server domain. I will keep your tips in mind as I develop my app. Thanks!"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1456305686, "creation_date": 1456305686, "answer_id": 35597992, "question_id": 35597480, "link": "https://stackoverflow.com/questions/35597480/is-it-possible-to-use-an-angular-2-dart-frontend-with-a-node-js-backend/35597992#35597992", "title": "Is it possible to use an Angular 2 Dart frontend with a Node.js backend?", "body": "<p><strong>How to serve a Dart client application</strong></p>\n\n<p>The client and server can be two distinct applications that are not bound to each other at all. The only connection that is required is, that the server can interpret the requests sent by the client and that the client can interpret the responses.</p>\n\n<p>The built Dart client application is like static HTML and can be served by any HTTP server. I don't know Node.js, but I assume it has a directory where it serves static content from. This is where you place the build output of your Dart client application.</p>\n\n<p><strong>Communication between Dart client and Node.js server</strong></p>\n\n<p>For client and server to be able to communicate, Dart needs to send requests in the form the server expects. You can use REST, WebSocket, Ajax with JSON body or protocol buffers. \nAn advantage of using the same language on client and server is, that model classes that are serialized to or deserialized from the wire protocol format  and the serialization/deserialization code can be shared between client and server. That's not possible in this case. The Dart team is working in generating JS and TS from Dart which might solve this eventually. If you use Protocol Buffers this also doesn't apply because you can generate the code for both languages from the same proto files.</p>\n\n<p><strong>Development requirements</strong></p>\n\n<p>For development you have to consider that you \"need\" two servers. The Node.js server that is the actual server for you application and also <code>pub serve</code> for fast change and reload cycles (to avoid building to JS after each change). \nThis is usually done by a proxy (can be Nginx for example or a custom Dart script using the shelf and shelf_proxy package) that forwards requests for Dart source files to <code>pub serve</code> and Rest/Ajax/WebSocket requests to your Node.js server.  </p>\n"}], "owner": {"reputation": 113, "user_id": 4652251, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9Q2ulcZqDYE/AAAAAAAAAAI/AAAAAAAAAT4/8LQAhEFeQpE/photo.jpg?sz=128", "display_name": "sionydus", "link": "https://stackoverflow.com/users/4652251/sionydus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 35597992, "answer_count": 1, "score": 0, "last_activity_date": 1456305686, "creation_date": 1456304262, "question_id": 35597480, "link": "https://stackoverflow.com/questions/35597480/is-it-possible-to-use-an-angular-2-dart-frontend-with-a-node-js-backend", "title": "Is it possible to use an Angular 2 Dart frontend with a Node.js backend?", "body": "<p>I am planning out the tools I will use in my web app. I would like to use Node.js as a server backend because it has a module that would be particularly useful to me. However, I would also like to use Angular 2 (Dart) with Polymer.dart in the frontend. Excuse me if the answer should be obvious, but how will it work to combine these two parts of my app seamlessly (and without conversion tools), as is commonly done in the MEAN stack, since Dart is not directly compatible with JS?</p>\n\n<p>There aren't any tutorials or resources currently available that demonstrate this combination. It seems to me the more common use case is to have Dart also act as a server backend.</p>\n"}, {"tags": ["json", "dart", "encode"], "answers": [{"comments": [{"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 1, "creation_date": 1456314800, "post_id": 35592650, "comment_id": 58887418, "body": "A <code>Set</code> has no default JSON conversion in the <code>JSON.encode</code> method because JSON doesn&#39;t have a representation for it. We could have let any <code>Iterable</code> be automatically converted to a <code>List</code>, but decided on not being too clever - we only accept types that are converted back to the same type by <code>JSON.decode</code> (<code>List</code>, <code>Map&lt;String,?&gt;</code> and basic types)."}], "tags": [], "owner": {"reputation": 742, "user_id": 1547153, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d6fe84491d5c53d453ebb7eb2e483efe?s=128&d=identicon&r=PG", "display_name": "Tim Schimandle", "link": "https://stackoverflow.com/users/1547153/tim-schimandle"}, "is_accepted": false, "score": 1, "last_activity_date": 1456284315, "creation_date": 1456284315, "answer_id": 35592650, "question_id": 35592649, "link": "https://stackoverflow.com/questions/35592649/dart-how-can-i-convert-a-set-to-a-map-entry-in-the-tojson-method/35592650#35592650", "title": "Dart: how can I convert a Set to a Map entry in the toJson method?", "body": "<p>The short answer is convert it to a List. Set, for reasons I do not understand, will not work with the JSON.encode method.</p>\n\n<pre><code>List&lt;String&gt; myList = new List();\n...\nmap['myList'] = this.myList;\n</code></pre>\n\n<p>or if you want to keep your collection as a Set.</p>\n\n<pre><code>map['mySet'] = this.mySet.toList();\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 1547153, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d6fe84491d5c53d453ebb7eb2e483efe?s=128&d=identicon&r=PG", "display_name": "Tim Schimandle", "link": "https://stackoverflow.com/users/1547153/tim-schimandle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456284315, "creation_date": 1456284315, "question_id": 35592649, "link": "https://stackoverflow.com/questions/35592649/dart-how-can-i-convert-a-set-to-a-map-entry-in-the-tojson-method", "title": "Dart: how can I convert a Set to a Map entry in the toJson method?", "body": "<p>How can I convert a Set to a valid map entry in the toJson() method? My object looks like this:</p>\n\n<pre><code>class MyCustom{\n  String name = '';\n  Set&lt;String&gt; mySet= new Set();\n\n  Map toJson() {\n    Map map = new Map();\n    map['name'] = this.name;\n    map['mySet'] = this.mySet;\n    return map\n  }\n}\n</code></pre>\n"}, {"tags": ["dart", "webstorm"], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "edited": false, "score": 0, "creation_date": 1456382488, "post_id": 35598277, "comment_id": 58922781, "body": "Thanks Gunter -- is there a way to set it up so that the Pub Get menu options in Webstorm will automatically appentd the --no-packages-symlinks? Thanks."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "edited": false, "score": 0, "creation_date": 1456382792, "post_id": 35598277, "comment_id": 58922937, "body": "A workaround is to replace <code>pub</code> with a batch script and add <code>--no-package-symlinks</code> when is is called with <code>get</code> or <code>upgrade</code>. I guess it will become the default soon (no promises though). AFAIK Natalie the maintainer of the test package is currently working on it."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1456306434, "creation_date": 1456306434, "answer_id": 35598277, "question_id": 35592529, "link": "https://stackoverflow.com/questions/35592529/why-did-deleting-my-web-assets-folder-also-delete-all-source-in-lib/35598277#35598277", "title": "Why did deleting my web/assets folder also delete all source in lib?", "body": "<p>This is a known problem in WebStorm / IntelliJ, caused by a limitation of Java on Windows (where WebStorm / IntelliJ are built with).</p>\n\n<p><code>pub get</code> and <code>pub upgrade</code> create symlinks to the <code>packages</code> directory in <code>web</code>, <code>bin</code>, <code>test</code>, <code>tool</code> and any subdirectory of these. \nThe <code>packages</code> directory contains symlinks to the package directory in <code>.pub-cache</code>, and an additional symlink to the <code>lib</code> directory of the current package so you can use package imports to the current package.</p>\n\n<p>When a directory is deleted, Java on Windows also deletes symlinked content. <strong>This is why deleting the web directory also purged the <code>lib</code> directory.</strong>\nThe current solution or workaround is, to not delete folders from within WebStorm / IntelliJ.</p>\n\n<p>The Dart team is working on getting rid of the <code>packages</code> directory and all related symlinks alltogether. This is already in an experimental state since about a 3/4 year and will hopefully go live soon. </p>\n\n<p>Currently running <code>pub get</code> or <code>pub upgrade</code> with the <code>--no-package-symlinks</code> option, already suppresses the creation of the <code>packages</code> directory and symlinks.\nAFAIK the <code>test</code> is the last part that depends on the <code>packages</code> directory. When this is fixed (depends on some changes in the VM) this behave will become the default behavior.</p>\n"}], "owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456306434, "creation_date": 1456283532, "question_id": 35592529, "link": "https://stackoverflow.com/questions/35592529/why-did-deleting-my-web-assets-folder-also-delete-all-source-in-lib", "title": "Why did deleting my web/assets folder also delete all source in lib?", "body": "<p>I had an assets folder in my web directory and polymer started messing up whatever was in there so I decided to move everything out of it into /web. But then when i deleted the now empty assets folder all the source in my /lib folder disappeared. Is there some link between these that I am not aware of?</p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 5396835, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w4iDZ.jpg?s=128&g=1", "display_name": "Jonas Bojesen", "link": "https://stackoverflow.com/users/5396835/jonas-bojesen"}, "edited": false, "score": 0, "creation_date": 1456214796, "post_id": 35564055, "comment_id": 58831040, "body": "Thanks for the feedback. Now I have edited the question with more info and an example repo. Checked up on *) With order <code>IronA11yKeysBehavior, IronControlState, PaperInputBehavior</code>  It dumps an exception in the console at initialization, with the  order of the mixin. *) Accroding to api  &#39;polymerCreated()` will be invoked at <code>NbdatebehaviorInput.created() : super.created()</code>"}, {"owner": {"reputation": 705, "user_id": 5396835, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w4iDZ.jpg?s=128&g=1", "display_name": "Jonas Bojesen", "link": "https://stackoverflow.com/users/5396835/jonas-bojesen"}, "edited": false, "score": 0, "creation_date": 1456311430, "post_id": 35564055, "comment_id": 58884927, "body": "I have looked further into this. Maybe the needed functionality could be obtained by putting things in a <code>&lt;paper-input-container&gt;</code>, perhaps also what is intended by the framework. I will investigate this further."}], "tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": false, "score": 1, "last_activity_date": 1456175893, "creation_date": 1456175893, "answer_id": 35564055, "question_id": 35563154, "link": "https://stackoverflow.com/questions/35563154/in-dart-how-to-extend-a-custom-polymerelement-with-paperinputbehavior/35564055#35564055", "title": "In dart how to extend a custom PolymerElement with PaperInputBehavior?", "body": "<p>I would check the console for errors, the mixin ordering doesn't look like it is correct and it should give you the desired ordering in a message, which may solve your issue (I would expect an ordering like this <code>IronA11yKeysBehavior, IronControlState, PaperInputBehavior</code>).</p>\n\n<p>Additionally, make sure you are calling <code>polymerCreated()</code> in your constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 705, "user_id": 5396835, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w4iDZ.jpg?s=128&g=1", "display_name": "Jonas Bojesen", "link": "https://stackoverflow.com/users/5396835/jonas-bojesen"}, "is_accepted": true, "score": 0, "last_activity_date": 1456352299, "creation_date": 1456352299, "answer_id": 35614336, "question_id": 35563154, "link": "https://stackoverflow.com/questions/35563154/in-dart-how-to-extend-a-custom-polymerelement-with-paperinputbehavior/35614336#35614336", "title": "In dart how to extend a custom PolymerElement with PaperInputBehavior?", "body": "<p>For my case the needed functionality was provided by</p>\n\n<p><a href=\"https://elements.polymer-project.org/elements/paper-input?active=paper-input-container\" rel=\"nofollow\">https://elements.polymer-project.org/elements/paper-input?active=paper-input-container</a></p>\n\n<p>With Dart following the structure of last example (Social Security Number) in\n<a href=\"https://elements.polymer-project.org/elements/paper-input?view=demo:demo/index.html&amp;active=paper-input\" rel=\"nofollow\">https://elements.polymer-project.org/elements/paper-input?view=demo:demo/index.html&amp;active=paper-input</a></p>\n"}], "owner": {"reputation": 705, "user_id": 5396835, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w4iDZ.jpg?s=128&g=1", "display_name": "Jonas Bojesen", "link": "https://stackoverflow.com/users/5396835/jonas-bojesen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 35614336, "answer_count": 2, "score": 0, "last_activity_date": 1456352299, "creation_date": 1456172827, "last_edit_date": 1456214714, "question_id": 35563154, "link": "https://stackoverflow.com/questions/35563154/in-dart-how-to-extend-a-custom-polymerelement-with-paperinputbehavior", "title": "In dart how to extend a custom PolymerElement with PaperInputBehavior?", "body": "<p>Basically I try to do a port of <code>GoldCcCvcInput</code> to a dart implementation, instead of wrapping of a js implementation.</p>\n\n<p>Looking at this:\n<a href=\"https://github.com/PolymerElements/gold-cc-cvc-input/blob/master/gold-cc-cvc-input.html\" rel=\"nofollow\">https://github.com/PolymerElements/gold-cc-cvc-input/blob/master/gold-cc-cvc-input.html</a>\nTogether with <a href=\"https://github.com/dart-lang/polymer-dart/wiki/behaviors\" rel=\"nofollow\">https://github.com/dart-lang/polymer-dart/wiki/behaviors</a></p>\n\n<p>Something like:</p>\n\n<pre><code> @PolymerRegister('nbdate-input')\n class NbdateInput extends PolymerElement with PaperInputBehavior,\n IronControlState, IronA11yKeysBehavior ...\n</code></pre>\n\n<p>Minimal test project \n<a href=\"https://github.com/jonboj/inputbehavior-dart.git\" rel=\"nofollow\">https://github.com/jonboj/inputbehavior-dart.git</a></p>\n\n<p>The project initialize without dumping any error messages and displays the iron-input elements ok. But when one of the iron-input elements are put in focus, the exception below is dumped in the console:</p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'focus' of undefined\n  Polymer.PaperInputBehaviorImpl._onFocus   \n  handler   \n  Polymer.Base._addFeature.fire \n  Polymer.IronControlState._focusBlurHandler\n</code></pre>\n\n<p>This has an override of method <code>onFocusedChanged</code> <a href=\"https://github.com/PolymerElements/gold-cc-cvc-input/blob/master/gold-cc-cvc-input.html#L219\" rel=\"nofollow\">https://github.com/PolymerElements/gold-cc-cvc-input/blob/master/gold-cc-cvc-input.html#L219</a> </p>\n\n<p>In dart a corresponding Observer is triggered, with a printout occurring after the exception dump.</p>\n\n<p><a href=\"https://github.com/jonboj/inputbehavior-dart/blob/master/lib/nbdatebehavior_input.dart#L56\" rel=\"nofollow\">https://github.com/jonboj/inputbehavior-dart/blob/master/lib/nbdatebehavior_input.dart#L56</a></p>\n"}, {"tags": ["modal-dialog", "dart", "angular-dart"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456127027, "post_id": 35544874, "comment_id": 58784704, "body": "I guess you should create an issue in the GitHub repo of AngularDart UI to get attention of the maintainers. Please link to this question if you do."}, {"owner": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1456159128, "post_id": 35544874, "comment_id": 58806173, "body": "@G&#252;nterZ&#246;chbauer I posted the issue on GitHub - <a href=\"https://github.com/akserg/angular.dart.ui/issues/169\" rel=\"nofollow noreferrer\">github.com/akserg/angular.dart.ui/issues/169</a>"}], "owner": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456108185, "creation_date": 1456108185, "question_id": 35544874, "link": "https://stackoverflow.com/questions/35544874/angulardart-modal-component-not-being-injected", "title": "AngularDart Modal component not being injected", "body": "<p>I am working with the AngularDart UI modal component, and I am trying to implement successive modals.  Ask the user a question, get an answer, ask the user another question, etc.  The problem I'm having is that for the second modal, the component is not being compiled and injected.  </p>\n\n<p>I have confirmed that the template selector is being injected on modal open:</p>\n\n<pre><code>&lt;modal-window preventanimation=\"false\" backdrop=\"true\" keyboard=\"true\" windowclass=\"modal-editor\" size=\"sm\"\n          class=\"ng-binding\" index=\"0\"&gt;\n&lt;open-question-modal\n        question=\"There is only one version of this app.  You will need to create a copy for editing.  Please select the copy type.\"\n        answer-list-string=\"['Complete Copy','Data Sources Only']\" cancel-enabled=\"false\"\n        class=\"ng-binding\"&gt;&lt;/open-question-modal&gt;\n</code></pre>\n\n<p></p>\n\n<p>But then the compiled component doesn't get injected:</p>\n\n<pre><code>&lt;modal-window preventanimation=\"false\" backdrop=\"true\" keyboard=\"true\" windowclass=\"modal-editor\" size=\"sm\"\n          class=\"ng-binding\" index=\"0\"&gt;\n&lt;div tabindex=\"-1\" class ng-style ng-click=\"close($event)\" modal-window&gt;\n    &lt;div class modal-window&gt;\n        &lt;div class=\"modal-content\" modal-window&gt;\n            &lt;content modal-window class=\"ng-binding\"&gt;&lt;/content&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>I confirmed that the component  is being called because I can debug the 'attach' method.  I made sure the previous modal was closed (Modal.openedWindows was empty prior to the second modal being called).  My uninformed gut thinks it has something to do with scope, but I don't know enough about scope to say what.</p>\n\n<p>Has anyone else experienced something like this?  I can post or describe more of my code based on specific questions.  Thank you.</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 1, "creation_date": 1456144889, "post_id": 35537922, "comment_id": 58795742, "body": "The <code>f1</code> constant should be constant, and dart2js has no problem compiling it, so it seems like an analyzer bug to get a warning for it."}, {"owner": {"reputation": 2117, "user_id": 3165552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zvQzz.png?s=128&g=1", "display_name": "isaias-b", "link": "https://stackoverflow.com/users/3165552/isaias-b"}, "reply_to_user": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1456175561, "post_id": 35537922, "comment_id": 58816089, "body": "@lrn Updated the answer."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1456314577, "post_id": 35537922, "comment_id": 58887285, "body": "The reason <code>f2</code> doesn&#39;t work is that a function expression is not a compile-time constant expression. The specification lists the possible compile-time constant expressions, and function expressions are not among them, and the initializer expression of a const variable must be a compile-time constant expression."}], "tags": [], "owner": {"reputation": 2117, "user_id": 3165552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zvQzz.png?s=128&g=1", "display_name": "isaias-b", "link": "https://stackoverflow.com/users/3165552/isaias-b"}, "is_accepted": false, "score": 7, "last_activity_date": 1456175133, "last_edit_date": 1592644375, "creation_date": 1456068214, "answer_id": 35537922, "question_id": 35537389, "link": "https://stackoverflow.com/questions/35537389/in-dart-is-it-possible-to-have-a-const-map-of-closures/35537922#35537922", "title": "In Dart, is it possible to have a const map of closures?", "body": "<p>I suspect this might not be possible, take a look at this code:</p>\n<pre><code>int test1(int a, int b, int c) {\n  return a;\n}\nint test2(final int a, final int b, final int c) {\n  return a;\n}\n\nconst Function f1 = test1;\nconst Function f2 = (final a,b,c) =&gt; a;\n\nconst Map&lt;String, Function&gt; MAP_OF_FUNCS = const {\n  'foo': test1,\n  'fam': test2,\n  'bam': f1,\n  'bar': f2\n};\n</code></pre>\n<p>Only the first two versions referencing the static method references <code>test1</code> and <code>test2</code> work in this constellation. Even <code>f1</code> produces a compilation error, <strong>UPDATE</strong> but compiles using dartJS as @irn from the comments pointed out. Then it is unclear why the version with <code>f2</code> doesn't work.</p>\n<p>So probably it is the assignment operator which is not able to produce a statically compiled reference for a given constant lambda expression or a static method reference for its RHS (right hand side) argument.</p>\n<p><a href=\"https://www.dartlang.org/docs/dart-up-and-running/ch02.html#variables\" rel=\"nofollow noreferrer\">The documentation</a> pointed me in testing the <code>static const</code> combination, but this generally only works on non top level elements like class members. Thus adding a new class makes it possible to test this.</p>\n<pre><code>class A {\n  static const Function a1 = test1;\n  static const Function a2 = (final a, final b, final c) =&gt; a;\n}\nconst Map&lt;String, Function&gt; MAP_OF_FUNCS = const {\n  'foo': A.a1,\n  'bar': A.a2\n};\n</code></pre>\n<p>However, these function definitions are valid but assigning it to the map fails as before. The documentation about maps under the <a href=\"https://www.dartlang.org/docs/dart-up-and-running/ch02.html#built-in-types\" rel=\"nofollow noreferrer\">built in types</a> section shows how to create a compile time constant map using the <code>final</code> keyword.</p>\n<pre><code>final constantMap = const {\n  2: 'helium',\n  10: 'neon',\n  18: 'argon',\n};\n</code></pre>\n<p>Unfortunately, this approach has the same drawback. It might corellate with the minification limitations of symbols:</p>\n<blockquote>\n<p>A Symbol object represents an operator or identifier declared in a Dart program. You might never need to use symbols, but they\u2019re invaluable for APIs that refer to identifiers by name, because minification changes identifier names but not identifier symbols.\n...\nSymbol literals are compile-time constants.</p>\n<p>For more information on symbols, see <a href=\"https://www.dartlang.org/docs/dart-up-and-running/ch03.html#dartmirrors---reflection\" rel=\"nofollow noreferrer\">dart:mirrors - reflection</a>.</p>\n</blockquote>\n<p>Maybe someone else has a better idea, but for me this seems not possible for the moment.</p>\n"}, {"comments": [{"owner": {"reputation": 2117, "user_id": 3165552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zvQzz.png?s=128&g=1", "display_name": "isaias-b", "link": "https://stackoverflow.com/users/3165552/isaias-b"}, "edited": false, "score": 1, "creation_date": 1456175448, "post_id": 35539483, "comment_id": 58816031, "body": "Great finding, i placed callback comments into the issues so the correct answers might be pushed in the future by the authors. Otherwise keep pulling the information ;)"}, {"owner": {"reputation": 9818, "user_id": 272539, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/451c927ee96675fa05751927524d9b45?s=128&d=identicon&r=PG", "display_name": "Amsakanna", "link": "https://stackoverflow.com/users/272539/amsakanna"}, "edited": false, "score": 1, "creation_date": 1572102193, "post_id": 35539483, "comment_id": 103460511, "body": "I was trying static constant closures. Static functions trick didn&#39;t strike me lol."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 12, "last_activity_date": 1456076175, "creation_date": 1456076175, "answer_id": 35539483, "question_id": 35537389, "link": "https://stackoverflow.com/questions/35537389/in-dart-is-it-possible-to-have-a-const-map-of-closures/35539483#35539483", "title": "In Dart, is it possible to have a const map of closures?", "body": "<p>Closures aren't supported in const expressions. There is an open issue <a href=\"https://github.com/dart-lang/sdk/issues/4596\" rel=\"noreferrer\">https://github.com/dart-lang/sdk/issues/4596</a> and <a href=\"https://github.com/Pajn/dep-const-function-literals/issues/1\" rel=\"noreferrer\">https://github.com/Pajn/dep-const-function-literals/issues/1</a></p>\n\n<p>If you create static functions instead, you can reference them in const map literals,but you currently can't define them inline. </p>\n"}], "owner": {"reputation": 2939, "user_id": 652220, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/B3Bm7.png?s=128&g=1", "display_name": "Argenti Apparatus", "link": "https://stackoverflow.com/users/652220/argenti-apparatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8259, "favorite_count": 0, "accepted_answer_id": 35539483, "answer_count": 2, "score": 11, "last_activity_date": 1456341939, "creation_date": 1456065097, "last_edit_date": 1456341939, "question_id": 35537389, "link": "https://stackoverflow.com/questions/35537389/in-dart-is-it-possible-to-have-a-const-map-of-closures", "title": "In Dart, is it possible to have a const map of closures?", "body": "<p>I created a literal map of closures, something like:</p>\n\n<pre><code>Map&lt;String, Function&gt; mapOfFuncs = {\n  'foo': (a, b, c) =&gt; ... ,\n  'bar': (a, b, c) =&gt; ... ,\n   ...\n}\n</code></pre>\n\n<p>All good so far. Then I wanted to make this map <code>const</code>, as it is global within my program and should never be modified.</p>\n\n<pre><code>const Map&lt;String, Function&gt; MAP_OF_FUNCS = const {\n  'foo': (a, b, c) =&gt; ... ,\n  'bar': (a, b, c) =&gt; ... ,\n   ...\n}\n</code></pre>\n\n<p>Dart chokes on this as the literal closures in the map are not <code>const</code>.</p>\n\n<p>On Dartpad: <a href=\"https://dartpad.dartlang.org/817d2cfd141b0a56fc7d\" rel=\"noreferrer\">https://dartpad.dartlang.org/817d2cfd141b0a56fc7d</a></p>\n\n<p>I would have thought that literal closures are <code>const</code>. Is there a way to make them so?</p>\n"}, {"tags": ["dart"], "answers": [{"tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 5, "last_activity_date": 1456077079, "creation_date": 1456077079, "answer_id": 35539669, "question_id": 35534808, "link": "https://stackoverflow.com/questions/35534808/how-to-use-dart-analyzer-to-generate-an-ast-from-source-and-work-with-the-ast/35539669#35539669", "title": "How to use Dart analyzer to generate an AST from source and work with the AST?", "body": "<p>Analyzer code is still work in progress. I guess the rework of the Dart code auto-generated from the early Java source isn't done yet. They are working on improving the public API and then they will work on better docs as well. </p>\n\n<p>Without having a closer look myself yet I think these packages should make use of this as well</p>\n\n<ul>\n<li><a href=\"https://github.com/dart-lang/linter\" rel=\"noreferrer\">https://github.com/dart-lang/linter</a></li>\n<li><a href=\"https://github.com/dart-lang/dart_style\" rel=\"noreferrer\">https://github.com/dart-lang/dart_style</a></li>\n<li><a href=\"https://github.com/dart-lang/source_gen\" rel=\"noreferrer\">https://github.com/dart-lang/source_gen</a></li>\n<li><a href=\"https://github.com/dart-lang/dartdoc\" rel=\"noreferrer\">https://github.com/dart-lang/dartdoc</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 7554, "user_id": 700471, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ebb4cc58c1fce4f22abc59a1226ee8e2?s=128&d=identicon&r=PG", "display_name": "Matt Mc", "link": "https://stackoverflow.com/users/700471/matt-mc"}, "edited": false, "score": 0, "creation_date": 1601515924, "post_id": 35577287, "comment_id": 113435093, "body": "I tried the <code>Viewing the Tree</code> example but it doesn&#39;t seem to compile since the current version of the <code>analyzer</code> package has different contents in the <code>src&#47;generated</code> folder.  Any change you know of a modern example of how to do this?"}], "tags": [], "owner": {"reputation": 1002, "user_id": 4527319, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d40d99eaaeb459257b4bbc56382ceb51?s=128&d=identicon&r=PG&f=1", "display_name": "TastyCatFood", "link": "https://stackoverflow.com/users/4527319/tastycatfood"}, "is_accepted": false, "score": 7, "last_activity_date": 1597995952, "last_edit_date": 1597995952, "creation_date": 1456229517, "answer_id": 35577287, "question_id": 35534808, "link": "https://stackoverflow.com/questions/35534808/how-to-use-dart-analyzer-to-generate-an-ast-from-source-and-work-with-the-ast/35577287#35577287", "title": "How to use Dart analyzer to generate an AST from source and work with the AST?", "body": "<h1>Wiki</h1>\n<p>Note: Code samples posted here are not great in terms of quality.<br />\nThere should be more succinct and efficient way, though so far I've failed to find them.</p>\n<p>For further details, search dart-sdk for some function/class names on github.<br />\nThese were helpful:<br />\n<a href=\"https://github.com/dart-lang/sdk/blob/dd0c42cb72a4c218e4b04890f0ef666c6f6c0eb6/pkg/analyzer/test/dart/ast/visitor_test.dart\" rel=\"nofollow noreferrer\">https://github.com/dart-lang/sdk/blob/dd0c42cb72a4c218e4b04890f0ef666c6f6c0eb6/pkg/analyzer/test/dart/ast/visitor_test.dart</a><br />\n<a href=\"https://github.com/dart-lang/sdk/blob/71e7ed86c060ff2d695777d2c68c20e25cfb8ef9/pkg/analysis_server/lib/src/services/correction/util.dart\" rel=\"nofollow noreferrer\">https://github.com/dart-lang/sdk/blob/71e7ed86c060ff2d695777d2c68c20e25cfb8ef9/pkg/analysis_server/lib/src/services/correction/util.dart</a><br />\n<a href=\"https://github.com/dart-lang/sdk/blob/6715573c6eb5e5a3c2b8257fef02e88a7d707d9f/pkg/analyzer/lib/src/generated/incremental_resolver.dart\" rel=\"nofollow noreferrer\">https://github.com/dart-lang/sdk/blob/6715573c6eb5e5a3c2b8257fef02e88a7d707d9f/pkg/analyzer/lib/src/generated/incremental_resolver.dart</a></p>\n<p>For AstVisitor(There are several):<a href=\"https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/RecursiveASTVisitor-class.html\" rel=\"nofollow noreferrer\">https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/RecursiveASTVisitor-class.html</a></p>\n<p>As G\u00fcnter Z\u00f6chbauer mentioned, it's work in progress and poorly documented while it's must-know if you are writing a transformer for compile time code modification.</p>\n<p>#Update for new version</p>\n<pre><code>import 'package:analyzer/dart/analysis/utilities.dart';\nimport 'package:analyzer/dart/analysis/features.dart';\nimport 'package:analyzer/dart/ast/ast.dart';\n\nvar ast = parseFile('./lib/mistletoe.dart', featureSet: FeatureSet.fromEnableFlags([])).unit;\n...\n</code></pre>\n<p>#Sample code</p>\n<h3>Viewing the tree</h3>\n<pre><code>import 'package:analyzer/analyzer.dart';\nimport 'package:analyzer/src/generated/ast.dart';\nimport 'package:analyzer/src/generated/scanner.dart';\nimport 'dart:io';\n//code to parse\nString src = r&quot;&quot;&quot;\nimport 'package:mistletoe/mistletoe.dart';\nvar o = new Object();\nmain(){\n  f(o);\n}\nf(p){\n  var o = p;\n  o = o as Object;\n  print(o);\n}\n&quot;&quot;&quot;;\n\nmain() async {\n//  var src = await new File('./lib/mistletoe.dart').readAsString();\n  var ast = parseCompilationUnit(src\n    ,parseFunctionBodies: true);\n  var nodes = flatten_tree(ast);\n  var types ={};\n  for(var n in nodes){\n    types[n.runtimeType] ??= [];\n    types[n.runtimeType].add(n);\n  }\n  var data = [];\n  for(var k in types.keys){\n    data.add(k.toString());\n    for(var e in types[k]){\n      data.add('\\t'+e.toString());\n    }\n  }\n  data = data.join('\\n');\n  print(data);\n//  await new File('./lib/node_samples.txt').writeAsString(data);\n}\n\nList flatten_tree(AstNode n,[int depth=9999999]){\n  var que = [];\n  que.add(n);\n  var nodes = [];\n  int nodes_count = que.length;\n  int dep = 0;\n  int c = 0;\n  if(depth == 0) return [n];\n  while(que.isNotEmpty){\n    var node = que.removeAt(0);\n    if(node is! AstNode) continue;\n    for(var cn in node.childEntities){\n      nodes.add(cn);\n      que.add(cn);\n    }\n    //Keeping track of how deep in the tree\n    ++c;\n    if(c == nodes_count){\n      ++ dep; // One layer done\n      if(depth &lt;= dep) return nodes;\n      c = 0;\n      nodes_count = que.length;\n    }\n  }\n  return nodes;\n}\nshow(node){\n  print('Type: ${node.runtimeType}, body: $node');\n}\n</code></pre>\n<h3>Editing node</h3>\n<p><code>d.on(o).hi = 'bye'</code> to <code>d.on(o).set(&quot;hi&quot;, 'bye')</code></p>\n<pre><code>import 'package:analyzer/analyzer.dart';\nimport 'package:analyzer/src/generated/ast.dart';\nimport 'package:analyzer/src/generated/error.dart';\nimport 'package:analyzer/src/generated/parser.dart';\nimport 'package:analyzer/src/generated/scanner.dart';\nString src = &quot;&quot;&quot;\n  Dynamism d = new Dynamism(expert:true);\nmain(){\n  var o = new Object();\n  d.on(o).hi = 'bye';\n}\n&quot;&quot;&quot;;\nmain(){\n  var ast = parseCompilationUnit(src,parseFunctionBodies: true);\n  print('initial value: ');\n  print(ast.toSource());\n  var v = new Visitor();\n  ast.visitChildren(v);\n  print('After modification:');\n  print(ast.toSource());\n}\nclass Visitor extends RecursiveAstVisitor{\n  @override\n  visitAssignmentExpression(AssignmentExpression node){\n    //filter\n    var p = new RegExp(r'.*\\.on\\(\\w\\)');\n    if(!p.hasMatch(node.toString())) return;\n\n    //replace\n    SimpleStringLiteral ssl =\n    _create_SimpleStringLiteral(node);\n    node.parent.accept(new NodeReplacer(node,ssl));\n  }\n}\n\nSimpleStringLiteral _create_SimpleStringLiteral(AstNode node){\n  String new_string = modify(node.toString());\n  int line_num = node.offset;\n  //holds the position and type\n  StringToken st = new StringToken(\n      TokenType.STRING,new_string,line_num);\n  return new SimpleStringLiteral(st, new_string);\n}\nString modify(String s){\n  List parts = s.split('=');\n  var value = parts[1];\n  List l = parts[0].split('.');\n  String dynamism = l.sublist(0,l.length-1).join('.');\n  String propertyName = l.last.trim();\n  return '${dynamism}.set(&quot;${propertyName}&quot;,${value})';\n}\n</code></pre>\n<h3>Changing Keyword: <code>var o = new Object();</code> to <code>Object o = new Object()</code>:</h3>\n<p>Note: editing A VariableDeclarationList is harder than editing other nodes for some reason.</p>\n<pre><code>import 'package:analyzer/analyzer.dart';\nimport 'package:analyzer/src/generated/ast.dart';\nimport 'package:analyzer/src/generated/scanner.dart';\n\n//code to parse\nString src = r&quot;&quot;&quot;\nvar d = new Dynamism(expert: true);\nvar o = new Object();\nvoid main() {\n  var e = new Object();\n}\n&quot;&quot;&quot;;\nmain(){\n  var result = var_to_object(src);\n  print(result);\n}\nString var_to_object(String s){\n  var ast = parseCompilationUnit(\n      s,parseFunctionBodies: true);\n\n// list imports\n//  var directives = ast.directives;\n//  print(directives);\n\n  var v = new Visitor();\n  ast.visitChildren(v);\n  return ast.toSource();\n}\nclass Visitor extends RecursiveAstVisitor{\n  _is_type_Object(n){\n    for( var c in n.childEntities){\n      if(c is ConstructorName){\n        if(c.toString() == 'Object')\n          return true;\n      }\n      if(c is VariableDeclarationList)\n        return _is_type_Object(c);\n      if(c is VariableDeclaration)\n        return _is_type_Object(c);\n      if(c is InstanceCreationExpression)\n        return _is_type_Object(c);\n    }\n    return false;\n  }\n  @override\n  visitVariableDeclarationList(VariableDeclarationList n){\n    //if n does not contain new Dynamism(expert:true) return;\n    if(!_is_type_Object(n)) return;\n\n//    Some note on the Keyword class\n//     pseudo keywords are keywords that can be used as identifiers.\n//     e.g. \n//     const Keyword(&quot;await&quot;, isPseudo: true),\n//     const Keyword(&quot;yield&quot;, isPseudo: true)];\n\n// syntax arguments samples\n//    static const Keyword LIBRARY = const Keyword._('LIBRARY', &quot;library&quot;, true);\n//    static const Keyword NEW = const Keyword._('NEW', &quot;new&quot;);\n//    static const Keyword NULL = const Keyword._('NULL', &quot;null&quot;);\n//    static const Keyword OPERATOR = const Keyword._('OPERATOR', &quot;operator&quot;, true);\n\n    // name and syntax seems to have been switched around\n    var kw = const Keyword('class','Object', false);\n    var kt = new KeywordToken(kw,n.keyword.offset);\n    var ndl = new VariableDeclarationList(\n        n.documentationComment,[],kt,\n        n.type,n.variables);\n    //changing var d to Object d\n    n.parent.accept(new NodeReplacer(n,ndl));\n  }\n}\n</code></pre>\n<h3>Find the nearest declaration/assignment/FormalParameter/TypeName of a given variable</h3>\n<p>Note: The code probably contains bugs still. I should reorganize the code, but I'm a little short on time now and leaving as I prototyped.</p>\n<pre><code>import 'package:analyzer/analyzer.dart';\nimport 'package:analyzer/src/generated/ast.dart';\nimport 'package:analyzer/src/generated/scanner.dart';\n\n\nString src = r&quot;&quot;&quot;\nfinal String a = 'a';\nclass A{\n  static Dynamism d = new Dynamism(expert:true);\n  A(a){\n    a = 'changed';\n    print(a);\n    var o = new Object();\n    o = a as String;\n    print(o);\n  }\n}&quot;&quot;&quot;;\n\nmain() async{\n  var ast = parseCompilationUnit(\n      src,parseFunctionBodies: true);\n  //Get all SimpleIdentifier nodes in ast\n  var simple_nodes = new List&lt;AstNode&gt;();\n  for(var n in flatten_tree(ast)){\n    if(n is SimpleIdentifier){\n      simple_nodes.add(n);\n    }\n  }\n  for(SimpleIdentifier n in simple_nodes){\n    var a = guess_effective_assignment_of(n);\n    var d = get_declaration_of(n);\n    var f = get_formal_parameter_of(n);\n    if(a == null &amp;&amp; d == null &amp;&amp; f == null)\n      continue;\n    print('------------');\n    print('For $n at: ${n.offset} in the node:'\n        '${n.parent.parent}');\n    print('The effective definition is:');\n    var definitions = guess_effective_definition_of(n);\n    var first_candidate = definitions.first;\n    var second_candidate = definitions.second;\n    var third_candidate = definitions.third;\n    print('\\t`${first_candidate}` of type '\n        '${first_candidate.runtimeType}');\n    print('\\tSecond candidate is `${second_candidate}`');\n    print('\\tThird candidate is `${third_candidate}`');\n    print('Where the enclosing block is:');\n    print('\\t${get_surrounding_block(n)}');\n    var type = get_type_name(n);\n    print('type or class name:$type');\n  }\n\n}\nAstNode get_surrounding_block(node){\n  if(node == null) return null;\n  while(true){\n    if(node.parent == null) return null;\n    node = node.parent;\n    if(is_scope(node))\n      return node;\n\n  }\n}\nString get_type_name(SimpleIdentifier node){\n  Definitions definitions =\n    guess_effective_definition_of(node);\n  var g = definitions.first;\n  //Takes only SimpleFormalParameter or Declaration\n  TypeName _extract_TypeName_from(d){\n    if(d == null) return null;\n    for(var t in d.childEntities)\n      if(t is TypeName) return t;\n  }\n  var name;\n  if(g is VariableDeclaration){\n    name = _extract_TypeName_from(g);\n    if(name == null || name == 'var'){\n      name = extract_constructor_name_or_rvalue(g);\n      //Not supporting MethodInvocation\n      if(name is MethodInvocation)\n        return null;\n\n      //rvalue is a variable. calling self.\n      if(name is SimpleIdentifier)\n        return get_type_name(name);\n    }\n  }\n  if(g is AssignmentExpression){\n    // checking FormalParameter or\n    // VariableDeclaration for type\n    var closer = definitions.second;\n    var type_name = _extract_TypeName_from(closer);\n    if(type_name != 'var' &amp;&amp; type_name != null)\n      return type_name.toString();\n    //TypeName is var\n\n    for(var e in g.childEntities){\n      if(e is AsExpression){\n        return e.childEntities.last.toString();\n      }\n    }\n    name = extract_constructor_name_or_rvalue(g);\n    //Not supporting MethodInvocation\n    if(name is MethodInvocation)\n      return null;\n\n    //rvalue is a variable. calling self.\n    if(name is SimpleIdentifier)\n      return get_type_name(name);\n    //A literal is handled later\n  }\n  if(g is FormalParameter){\n    if(g.childEntities.length&gt;1){\n      name = _extract_TypeName_from(g);\n    }else{\n      name = 'var';\n    }\n  }\n\n  if(name is Literal){\n    name = name.runtimeType.toString();\n    name = name.replaceAll('Simple','')\n        .replaceAll('Literal','');\n  }else{\n    name = name.toString();\n  }\n  return name;\n}\n\n\n///finds the variable declaration for the given node\n///Takes SimpleIdentifier representing a variable\nList get_declaration_of(var n){\n  // Check if n is part of VariableDeclaration\n  // and is the variable being defined.\n  var r = new List(2);\n  var original = n;\n  while(n.parent !=null){\n    if(n is VariableDeclaration)\n      if(n.childEntities.first == original){\n        r[0]=n;r[1]=0;\n        return r;\n      }else{\n        //n is not the variable being defined\n        break;\n      }\n    n = n.parent;\n  }\n  n = original;\n\n  // The variable's identifier is defined up the lines\n  // or in outer scope.\n\n  //searching local scope\n  var block = get_surrounding_block(n);\n  var declarations = extract_scope_wide_declarations(block);\n  for(var d in declarations) {\n    if(d.offset &gt; n.offset) break;\n    var v = d?.childEntities?.first;\n    if(v == original){\n      r[0]=d;r[1]=0;\n      return r;}\n  }\n\n  //searching the outer scopes\n  block = get_surrounding_block(block);\n  declarations.clear();\n  int count = -1;\n  while(block != null){\n    var decls = extract_scope_wide_declarations(block);\n    for(var d in decls) {\n      var v = d.childEntities.first;\n      if(v.toString() == original.toString()){\n        r[0]=d;r[1]=count;\n        return r;\n      }\n    }\n    block = get_surrounding_block(block);\n    --count;\n  }\n  return null;//could not find the declaration\n}\n///Fetch declarations that have effect in\n///all the children blocks of the given node.\n///Does not cover FormalParameterList.\n///Does not enter a node that is a block.\nList extract_scope_wide_declarations(AstNode node){\n  var nodes = [];\n  var declarations = [];\n  nodes.addAll(node.childEntities);\n\n  //pushing more nodes and skipping blocks\n  while(nodes.isNotEmpty){\n    var e = nodes.removeAt(0);\n    if(e is! AstNode) continue;\n    if(e is VariableDeclaration){\n      declarations.add(e);\n      continue;\n    }\n    if(!is_scope(e) &amp;&amp; e is AstNode){\n        nodes.addAll(e.childEntities);\n    }\n  }\n  return declarations;\n}\n///Returns true if the given node has its\n///scope.\n///Returns also true for:\n/// MethodDeclaration\n/// FunctionDeclaration\n/// CompilationUnit\n/// ClassDeclaration\n///\n///as they have a scope.\nbool is_scope(node){\n    if(node is Block||\n        node is CompilationUnit ||\n        node is Block||\n        //below are for extracting arguments\n        node is MethodDeclaration ||\n        node is FunctionDeclaration ||\n        node is ConstructorDeclaration||\n        //FieldDeclarations\n        node is ClassDeclaration ||\n        //Block should cover these but jus in case\n        node is IfStatement ||\n        node is WhileStatement||\n        node is DoStatement ||\n        node is TryStatement ||\n        node is SwitchStatement) return true;\n  return false;\n}\n\n/// Takes a VariableDeclaration node.\n/// Returns a ConstructorName node or\n/// rvalue; includes MethodInvocation.\n/// todo write test\nextract_constructor_name_or_rvalue(n){\n  var nodes = flatten_tree(n,1);\n  for(var node in nodes){\n    if(node is Literal) return node;\n    if(node is TypeName){\n      return node;\n    }\n    if(node is InstanceCreationExpression)\n      for(var e in node.childEntities)\n        if(e is ConstructorName) return e;\n    if(node is MethodInvocation){\n      return node;\n    }\n  }\n  //rvalue is a variable\n  return nodes.last;\n}\n\n\n/// Returns the closest definition of n.\n/// sub blocks are ignored.\n///\n///  A guess because it would fail\n/// if a conditional modifies the value\n/// of the variable in runtime.\n///\n/// e.g.\n///\n///     var a = 'hi';\n///     if(user_input){\n///       a = new Object();\n///     }\n///     //a is an Object not String\n///\n/// also does not look into constructor.\n///\n/// todo write test\nDefinitions guess_effective_definition_of(n){\n  List al = guess_effective_assignment_of(n);\n  List dl = get_declaration_of(n);\n  List fl = get_formal_parameter_of(n);\n\n  if(al == null &amp;&amp; dl == null &amp;&amp; fl == null )\n    return null;\n\n  if(al == null &amp;&amp; fl == null &amp;&amp; dl != null)\n    return new Definitions()\n      ..first = dl[0]\n      ..first_relative_depth=dl[1]\n      ..length = 1;\n\n  if(dl == null &amp;&amp; fl == null &amp;&amp; al != null)\n    return new Definitions()\n      ..first = al[0]\n      ..first_relative_depth = al[1]\n      ..length = 1;\n\n  if(fl != null &amp;&amp; al == null &amp;&amp; dl == null)\n    return new Definitions()\n      ..first = fl[0]\n      ..first_relative_depth = fl[1]\n      ..length = 1;;\n\n  Definitions r = new Definitions();\n  // Guessing which declaration or\n  // definition takes precedence.\n  var l = []..add(dl)..add(al)..add(fl);\n  l.removeWhere((e)=&gt;e==null);\n\n  // 0 means local scope.\n  // -1 means one scope up.\n  //Comparator returns negative if a comes before b,\n  //0 if equal, positive if a comes after b.\n  l.sort((a,b)=&gt; b[1] - a[1]);\n  // if AssignmentExpression and\n  // VariableDeclaration are\n  // in the same scope,\n  // AssignmentExpression always\n  // takes precedence.\n  l.sort((a,b)=&gt;\n    a == al &amp;&amp; b == dl &amp;&amp; al[1] == dl[1] ?\n      -1:0\n  );\n  //maybe I should just return a list?\n  try {\n    r.length = l.length;\n    r.first = l[0][0];\n    r.first_relative_depth = l[0][1];\n    r.second = l[1][0];\n    r.second_relative_depth = l[1][1];\n    r.third = l[2][0];\n    r.third_relative_depth = l[2][1];\n  }on RangeError catch(e){\n    // do nothing\n  }\n  return r;\n}\n/// Searches for an AssignmentExpression\n/// that is most likely to define the value\n/// of the variable denoted by the identifier\n/// in n.\n///\n///  A guess because it would fail\n/// if a conditional modifies the value\n/// of the variable on runtime.\n///\n/// e.g.\n///\n///     var a = 'hi';\n///     if(user_input){\n///       a = new Object();\n///     }\n///     //a is an Object not String\n///     //but this function does not\n///     //know that.\n///\nguess_effective_assignment_of(SimpleIdentifier n){\n  //checks if n is part of a variable declaration\n  //Code is mostly duplicate of get_declaration_of\n  // AssignmentExpression does not contain\n  // VariableDeclaration or vice versa.\n  var r = new List(2);\n  var node = n;\n  while(node.parent !=null){\n    if(node is AssignmentExpression)\n      if(node.childEntities.first == n){\n        r[0]=node;r[1]=0;\n        return r;\n      }else{\n        //n is not the variable being defined\n        break;\n      }\n    node = node.parent;\n  }\n\n  //Search local scope\n  var b = get_surrounding_block(n);\n  AstNode closest;\n  for(var node in extract_assignments_to_n_from(n, b)){\n    if(n.offset &gt; node.offset){\n      closest = node;\n    }else{break;}\n  }\n  if(closest != null){\n    r[0]=closest;r[1]=0;\n    return r;\n  }\n  //outer scopes\n  b = get_surrounding_block(b);\n  int count = -1;\n  while(b != null){\n    for(var a in extract_assignments_to_n_from(n,b)) {\n      var v = a?.childEntities?.first;\n      if(v.toString() == n.toString()){\n        r[0]=a;r[1]=count;\n        return r;\n      }\n    }\n    b = get_surrounding_block(b);\n    --count;\n  }\n  return null;\n}\n\n///Searches scopes upward for an\n///AssignmentExpression for the\n///variable denoted by the identifier\n///in n.\n///\n/// Returns a list of AssignmentExpression.\n/// todo test this\nextract_assignments_to_n_from(\n    SimpleIdentifier n,\n    AstNode in_scope,\n    [int search_depth=2]){\n  var nodes = flatten_tree(in_scope,search_depth)\n      .where((e)=&gt;e is AssignmentExpression);\n  var r = [];\n  for(AstNode node in nodes){\n    String i = node.childEntities.first.toString();\n    if(i == n.toString()){\n      r.add(node);\n    }\n  }\n  return r;\n}\n///Takes any node.\n///\n///Searches scopes upward to find\n///the closest FormalParameterList\n///\n/// Returns a list of\n///   1.  FormalParameterList\n///   2.  Its depth relative to n\n///\n/// Or null.\n///\nList get_nearest_formal_parameter_list(n){\n  var r = new List(2);\n  int count = 0;\n  while(true){\n    if(n is FunctionDeclaration ||\n        n is MethodDeclaration ||\n        n is ConstructorDeclaration)\n      break;\n    n = get_surrounding_block(n);\n    --count;\n    if(n == null) return n;\n  }\n  for(var e in n.childEntities){\n    if(e is FormalParameterList){\n      r[0] = e;r[1] = count;\n      return r;\n    }\n  }\n  //empty FormalParameterList\n  return null;\n}\n///Searches up for a FormalParameterList.\n///\n///Returns a list of:\n///\n///  1. FormalParameter matching\n///  the identifier of n when stringified\n///  if such exists. Returns null\n///  otherwise.\n///\n///   2.  The number of scopes moved up\n///   from the scope n belongs to.\n///\nget_formal_parameter_of(n){\n  var r = new List(2);\n\n  //returns [FormalParameterList, int]\n  var fl = get_nearest_formal_parameter_list(n);\n\n  if( fl == null) return null;\n  List names = extract_arg_names(fl[0]);\n  for(var name in names){\n    if(name.toString() == n.toString()){\n      r[0]=name.parent;\n      r[1]=fl[1];\n      return r;\n    }\n  }\n  return null;\n}\n///Takes:\n///FunctionDeclaration\n///FunctionExpression\n///FormalParameterList\n///\n///Returns:\n///Positional argument names :e.g. a and b in `f(a,b){return a+b;}`\n///Named option names:e.g. your_name in `f({String your_name}){...}`\n///\nList&lt;SimpleIdentifier&gt; extract_arg_names(AstNode n){\n  var fpl;\n  if(n is! FormalParameterList){\n    for(var e in flatten_tree(n)){\n      if(e is FormalParameterList){\n        fpl = e;\n        break;\n      }\n    }\n  }else if(n is FormalParameterList){\n    fpl = n;\n  }\n  var r = [];\n  for(var c in fpl.childEntities){\n    if(c is! FormalParameter)\n      continue;\n    for(var cc in c.childEntities){\n      //filtering String int etc\n      if(cc is! TypeName) r.add(cc);\n    }\n  }\n  return r;\n}\nList flatten_tree(AstNode n,[int depth=9999999]){\n  var que = [];\n  que.add(n);\n  var nodes = [];\n  int nodes_count = que.length;\n  int dep = 0;\n  int c = 0;\n  if(depth == 0) return [n];\n  while(que.isNotEmpty){\n    var node = que.removeAt(0);\n    if(node is! AstNode) continue;\n    for(var cn in node.childEntities){\n      nodes.add(cn);\n      que.add(cn);\n    }\n    //Keeping track of how deep in the tree\n    ++c;\n    if(c == nodes_count){\n      ++ dep; // One layer done\n      if(depth &lt;= dep) return nodes;\n      c = 0;\n      nodes_count = que.length;\n    }\n  }\n  return nodes;\n}\nshow(node){\n  print('Type: ${node.runtimeType}, body: $node');\n}\n//todo test this: could not tokenize a node completely\nclass FlattenVisitor extends BreadthFirstVisitor{\n  List _nodes;\n  FlattenVisitor(this._nodes):super();\n  @override\n  visitNode(AstNode n){\n    _nodes.add(n);\n  }\n}\n\n/// Returned by guess_effective_definition_of\n///\n/// Confusing but a Definitions instance may\n/// include `var a;`; a declaration but also\n/// defining the type of a as dynamic.\n///\n/// Having moved upward to find the definition/\n/// declaration results in a negative depth.\n/// If definition/declaration is found locally,\n/// depth is set to 0.\n///\nclass Definitions{\n  AstNode first;\n  int first_relative_depth;\n  AstNode second;\n  int second_relative_depth;\n  AstNode third;\n  int third_relative_depth;\n  int length;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14577465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ae1a555585070d3fba444b79e350e2?s=128&d=identicon&r=PG", "display_name": "liunix", "link": "https://stackoverflow.com/users/14577465/liunix"}, "is_accepted": false, "score": 0, "last_activity_date": 1604497242, "creation_date": 1604497242, "answer_id": 64681193, "question_id": 35534808, "link": "https://stackoverflow.com/questions/35534808/how-to-use-dart-analyzer-to-generate-an-ast-from-source-and-work-with-the-ast/64681193#64681193", "title": "How to use Dart analyzer to generate an AST from source and work with the AST?", "body": "<p>dart 2.11, from test code</p>\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:analyzer/dart/analysis/utilities.dart';\nimport 'package:analyzer/dart/analysis/results.dart';\nimport 'package:test/test.dart';\n\nvoid main() {\n  test('hello_parser', () {\n    String content = '''\nvoid main() =&gt; print('Hello, world!')\n''';\n    ParseStringResult result = parseString(content: content, throwIfDiagnostics: false);\n    // print(result.unit.toSource());\n    expect(result.content, content);\n    expect(result.errors, hasLength(1));\n    expect(result.lineInfo, isNotNull);\n    expect(result.unit.toString(), equals(&quot;void main() =&gt; print('Hello, world!');&quot;));\n  });\n}\n</code></pre>\n"}], "owner": {"reputation": 1002, "user_id": 4527319, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d40d99eaaeb459257b4bbc56382ceb51?s=128&d=identicon&r=PG&f=1", "display_name": "TastyCatFood", "link": "https://stackoverflow.com/users/4527319/tastycatfood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2746, "favorite_count": 3, "accepted_answer_id": 35539669, "answer_count": 3, "score": 9, "last_activity_date": 1604497242, "creation_date": 1456049507, "last_edit_date": 1456663477, "question_id": 35534808, "link": "https://stackoverflow.com/questions/35534808/how-to-use-dart-analyzer-to-generate-an-ast-from-source-and-work-with-the-ast", "title": "How to use Dart analyzer to generate an AST from source and work with the AST?", "body": "<h2>AST</h2>\n\n<p>Documentation:<a href=\"https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/parseCompilationUnit.html\" rel=\"noreferrer\">https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/parseCompilationUnit.html</a></p>\n\n<p>An excellent sample by some smart programmer in the wild: <a href=\"https://github.com/mythz/dart-samples/blob/master/frog/leg/scanner/keyword.dart\" rel=\"noreferrer\">https://github.com/mythz/dart-samples/blob/master/frog/leg/scanner/keyword.dart</a></p>\n\n<p>RecursiveASTVisitor api:<a href=\"https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/RecursiveASTVisitor-class.html\" rel=\"noreferrer\">https://www.dartdocs.org/documentation/analyzer_experimental/0.8.0/analyzer/RecursiveASTVisitor-class.html</a></p>\n\n<p>Now the sample code has been moved to the wiki below.</p>\n\n<h2>dart analysis server or dart services</h2>\n\n<p>The package your IDE or editor depends on for detecting errors.  </p>\n\n<p>git: <a href=\"https://github.com/dart-lang/dart-services\" rel=\"noreferrer\">https://github.com/dart-lang/dart-services</a>  </p>\n\n<p>Install:  </p>\n\n<ul>\n<li>git clone <a href=\"https://github.com/dart-lang/dart-services.git\" rel=\"noreferrer\">https://github.com/dart-lang/dart-services.git</a>  </li>\n</ul>\n\n<p>Run server:</p>\n\n<ul>\n<li>cd dart-services    </li>\n<li>dart ./bin/services.dart --port 8082</li>\n</ul>\n\n<p>Client side code:</p>\n\n<pre><code>import \"dart:convert\";\nimport \"dart:io\";\n\n\nconst String url = \"localhost\";\nconst String path = r\"api/dartservices/v1/analyze\";\nString src = \"\"\"\nmain(){\n print('hi');\n}\n\"\"\";\n\nvoid main() {\n  analyse();\n}\n\nanalyse() async {\n  Map m = {'source': src};\n  var client = new HttpClient();\n  String data = JSON.encode(m);\n  HttpClientRequest request = await client.post (\n      url, 8082, path);\n  request.headers.contentType = ContentType.JSON;\n  request.write(data);\n  HttpClientResponse r = await request.close();\n  r.transform(UTF8.decoder).listen((d){\n    print(d);\n  });\n  client.close(force: false);\n}\n</code></pre>\n\n<p>The server serves the class CommonServer in /lib/src/common_server.dart as api. A post to \"api/dartservices/v1/analyze\" calls the method below in the class.</p>\n\n<pre><code>  @ApiMethod(\n      method: 'POST',\n      path: 'analyze',\n      description:\n          'Analyze the given Dart source code and return any resulting '\n          'analysis errors or warnings.')\n  Future&lt;AnalysisResults&gt; analyze(SourceRequest request) {\n    return _analyze(request.source);\n  }\n</code></pre>\n\n<h2>Using Analyzer as a local object.</h2>\n\n<pre><code>import 'src/analyzer.dart';\nimport 'src/api_classes.dart';\nimport 'dart:developer';\nString src = \"\"\"\nmain(){\n  a.print('hi');\n}\n\"\"\";\nmain() async {\n  String sdkPath = r'C:\\tools\\dart-sdk';\n  var a = new Analyzer(sdkPath);\n  var m = {'main.dart':src};\n  debugger();\n  AnalysisResults r = await a.analyzeMulti(m);\n  print(r.issues);\n  print(r.resolvedImports);\n}\n</code></pre>\n\n<p>Analyzer is fairly complicated and shrouded in micro-tasks, debugger was not much of a help.</p>\n"}, {"tags": ["dart", "web-component", "dart-html"], "comments": [{"owner": {"reputation": 141, "user_id": 766644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d044d887a7b78bf7250e556db54109?s=128&d=identicon&r=PG", "display_name": "Vaulter", "link": "https://stackoverflow.com/users/766644/vaulter"}, "edited": false, "score": 0, "creation_date": 1456005035, "post_id": 35529196, "comment_id": 58748449, "body": "such behavior in Chrome 48.0.2564.97."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 766644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d044d887a7b78bf7250e556db54109?s=128&d=identicon&r=PG", "display_name": "Vaulter", "link": "https://stackoverflow.com/users/766644/vaulter"}, "edited": false, "score": 0, "creation_date": 1456092313, "post_id": 35539577, "comment_id": 58774083, "body": "but ctor doesn&#39;t called while reattaching element, isn&#39;t it?"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1456076619, "creation_date": 1456076619, "answer_id": 35539577, "question_id": 35529196, "link": "https://stackoverflow.com/questions/35529196/an-attached-callback-during-children-clear-in-parents-detached-callback/35539577#35539577", "title": "An attached callback during children.clear in parent&#39;s detached callback", "body": "<p>There is an open issue about this AFAIR. I think it's caused by modifying the DOM from within the constructor of a custom element. </p>\n\n<p>Try to move</p>\n\n<pre><code> this.innerHtml = \"child created\";\n</code></pre>\n\n<p>to <code>attached()</code> </p>\n"}], "owner": {"reputation": 141, "user_id": 766644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d044d887a7b78bf7250e556db54109?s=128&d=identicon&r=PG", "display_name": "Vaulter", "link": "https://stackoverflow.com/users/766644/vaulter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456076619, "creation_date": 1456003265, "question_id": 35529196, "link": "https://stackoverflow.com/questions/35529196/an-attached-callback-during-children-clear-in-parents-detached-callback", "title": "An attached callback during children.clear in parent&#39;s detached callback", "body": "<p>Simple scenario: have 2 web components, <em>child</em> inside <em>parent</em>. \nWhen reinserting <em>parent</em> to smth else place, <strong>detached</strong> callback has been called of <em>parent</em>, and children.clear() invokes in it (maybe it is silly place here).\nDuring clearing of children I can see that not only <em>child's</em> <strong>detached</strong> cb called, but <strong>attached</strong> too:</p>\n\n<p><a href=\"https://dartpad.dartlang.org/26921310fb7f85dee672\" rel=\"nofollow\">https://dartpad.dartlang.org/26921310fb7f85dee672</a></p>\n\n<pre><code>import 'dart:html';\n\nvoid main() {\n\n  document.registerElement(\"x-my\", MyElement);\n  document.registerElement(\"x-ch\", MyChild);\n  var container = new Element.tag(\"x-my\");\n  document.body.children.add( container );\n  print(\"creation done\");\n\n  // just re-add container to somewhere else\n  var anothercontainer = new Element.div();\n  document.body.children.add( anothercontainer );\n  anothercontainer.children.add(container);\n\n}\n\nclass MyElement extends HtmlElement {\n  MyElement.created() : super.created();\n\n  @override\n  attached() {\n    print(\"attached enter ${this.outerHtml}\");\n    super.attached();\n    children.add( new Element.tag(\"x-ch\") );\n    print(\"attached leave ${this.outerHtml}\");\n  }\n\n   @override\n  detached() {\n    print(\"detached enter ${this.outerHtml}\");\n    children.clear();\n    super.detached();\n    print(\"detached leave ${this.outerHtml}\");\n  }\n}\n\nclass MyChild extends HtmlElement {\n  MyChild.created() : super.created() { this.innerHtml = \"child created\"; }\n\n  @override\n  attached() {\n    print(\"attached enter ${this.outerHtml}\");\n    super.attached();\n    print(\"attached leave ${this.outerHtml}\");\n  }\n\n   @override\n  detached() {\n    print(\"detached enter ${this.outerHtml}\");\n    super.detached();\n    print(\"detached leave ${this.outerHtml}\");\n  }\n}\n</code></pre>\n\n<p>Gives output:</p>\n\n<pre><code>attached enter &lt;x-my&gt;&lt;/x-my&gt;\nattached enter &lt;x-ch&gt;child created&lt;/x-ch&gt;\nattached leave &lt;x-ch&gt;child created&lt;/x-ch&gt;\nattached leave &lt;x-my&gt;&lt;x-ch&gt;child created&lt;/x-ch&gt;&lt;/x-my&gt;\ncreation done\ndetached enter &lt;x-my&gt;&lt;x-ch&gt;child created&lt;/x-ch&gt;&lt;/x-my&gt;\ndetached enter &lt;x-ch&gt;child created&lt;/x-ch&gt;\ndetached leave &lt;x-ch&gt;child created&lt;/x-ch&gt;\nattached enter &lt;x-ch&gt;child created&lt;/x-ch&gt; &lt;---- my question\nattached leave &lt;x-ch&gt;child created&lt;/x-ch&gt;\ndetached enter &lt;x-ch&gt;child created&lt;/x-ch&gt;\ndetached leave &lt;x-ch&gt;child created&lt;/x-ch&gt; &lt;---- ends here\ndetached leave &lt;x-my&gt;&lt;/x-my&gt;\nattached enter &lt;x-my&gt;&lt;/x-my&gt;\nattached enter &lt;x-ch&gt;child created&lt;/x-ch&gt;\nattached leave &lt;x-ch&gt;child created&lt;/x-ch&gt;\nattached leave &lt;x-my&gt;&lt;x-ch&gt;child created&lt;/x-ch&gt;&lt;/x-my&gt;\n</code></pre>\n"}, {"tags": ["dart", "dart-pub", "dart-html"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456047259, "post_id": 35529081, "comment_id": 58757553, "body": "Is this in Chrome or Dartium? What versions?  I think there was a bug report recently. Don&#39;t have to the time just now to look it up."}, {"owner": {"reputation": 99, "user_id": 631400, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7mwN0.jpg?s=128&g=1", "display_name": "Bahador Biglari", "link": "https://stackoverflow.com/users/631400/bahador-biglari"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456066880, "post_id": 35529081, "comment_id": 58763928, "body": "Dartium, I can send pull request probably and you merge it. the fix is simple, let me know if this helps."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1456075809, "post_id": 35529081, "comment_id": 58767391, "body": "Probably better to discuss it with the Dart team first. Looks similar to <a href=\"https://github.com/dart-lang/sdk/issues/16963\" rel=\"nofollow noreferrer\">github.com/dart-lang/sdk/issues/16963</a>. If you think it&#39;s different, just create a new issue."}], "owner": {"reputation": 99, "user_id": 631400, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7mwN0.jpg?s=128&g=1", "display_name": "Bahador Biglari", "link": "https://stackoverflow.com/users/631400/bahador-biglari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456002689, "creation_date": 1456002689, "question_id": 35529081, "link": "https://stackoverflow.com/questions/35529081/why-client-dart-in-route-use-gotopath-rather-than-handle", "title": "Why client.dart in route use gotopath rather than handle?", "body": "<p>I asked to fix an issue in software which use dart to develop a chrome application. currently, the chrome application doesn't run in my mac osx and I get the following exception:</p>\n\n<p>Uncaught Unhandled exception:\nClass '_InternalLinkedHashMap' has no instance method 'pushState'.</p>\n\n<pre><code>NoSuchMethodError: method not found: 'pushState'\nReceiver: _LinkedHashMap len:0\nArguments: [null, \"\", \"/index.html#events\"]\n#0      Object._noSuchMethod (dart:core-patch/object_patch.dart:42)\n#1      Object.noSuchMethod (dart:core-patch/object_patch.dart:45)\n#2      Router._go (package:route/client.dart:153:22)\n#3      Router.gotoPath (package:route/client.dart:139:7)\n#4      Router.listen.&lt;anonymous closure&gt; (package:route/client.dart:111:13)\n#5      wrap_event_listener.&lt;anonymous closure&gt;.&lt;anonymous closure&gt; (dart:html:1189)VM81:1 (anonymous function)\n</code></pre>\n\n<p>After I backtrace the issue, I found that listen() function instead of calling handle calls gotoPath(string,string). Can someone explain me that. this cause </p>\n\n<p>[<a href=\"https://github.com/justinfagnani/route/blob/master/lib/client.dart][1]\" rel=\"nofollow\">https://github.com/justinfagnani/route/blob/master/lib/client.dart][1]</a></p>\n\n<pre><code>void gotoPath(String path, String title) {\n    _logger.finest('gotoPath $path');\n    var url = _getUrl(path);\n    if (url != null) {\n      _go(path, title);\n      // If useFragment, onHashChange will call handle for us.\n      if (!_listen || !useFragment) {\n        _handlers[url](path);\n      }\n    }\n  }\n\nvoid handle(String path) {\n    _logger.finest('handle $path');\n    var url = _getUrl(path);\n    if (url != null) {\n      // always give handlers a non-fragment path\n      var fixedPath = url.reverse(url.parse(path));\n      _handlers[url](fixedPath);\n    } else {\n      _logger.info(\"Unhandled path: $path\");\n    }\n  }\n</code></pre>\n\n<p>this calls from here: \nNote that other methods if/else call <code>handle</code> and only the <code>!ignoreclick</code> is call <code>gotopath</code></p>\n\n<pre><code>void listen({bool ignoreClick: false}) {\n    _logger.finest('listen ignoreClick=$ignoreClick useFragment=$useFragment');\n    if (_listen) {\n      throw new StateError('listen should be called once.');\n    }\n    _listen = true;\n    if (useFragment) {\n      window.onHashChange.listen((_) {\n        var path = '${window.location.pathname}${window.location.hash}';\n        _logger.finest('onHashChange handle($path)');\n        return handle(path);\n      });\n      handle('${window.location.pathname}${window.location.hash}');\n    } else {\n      window.onPopState.listen((_) {\n        var path = '${window.location.pathname}${window.location.hash}';\n        _logger.finest('onPopState handle($path)');\n        handle(path);\n      });\n    }\n    if (!ignoreClick) {\n      window.onClick.listen((e) {\n        if (e.target is AnchorElement) {\n          AnchorElement anchor = e.target;\n          if (anchor.host == window.location.host) {\n            var fragment = (anchor.hash == '') ? '' : '${anchor.hash}';\n            gotoPath(\"${anchor.pathname}$fragment\", anchor.title);\n            e.preventDefault();\n          }\n        }\n      });\n    }\n  }\n</code></pre>\n"}, {"tags": ["build", "dart", "dart2js"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455901478, "post_id": 35510510, "comment_id": 58712488, "body": "What&#39;s the problem with <code>pub build</code> from command line? Do you use a directory structure like explained in <a href=\"https://www.dartlang.org/tools/pub/package-layout.html\" rel=\"nofollow noreferrer\">dartlang.org/tools/pub/package-layout.html</a> with <code>index.html</code> in the <code>web</code> sub-directory?"}, {"owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455904985, "post_id": 35510510, "comment_id": 58714497, "body": "Yes I do, but the terminal says: Could not find a file named &quot;pubspec.yaml&quot; in &quot;/Users/muggins&quot;. And the file exists!"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455906023, "post_id": 35510510, "comment_id": 58715160, "body": "and you run <code>pub build</code> from the directory that contains <code>pubspec.yaml</code>?"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455971220, "post_id": 35510510, "comment_id": 58736092, "body": "Did you get it working?"}, {"owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455993358, "post_id": 35510510, "comment_id": 58744092, "body": "I tried again and again but bummer!"}], "owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573736604, "creation_date": 1455900622, "last_edit_date": 1455901285, "question_id": 35510510, "link": "https://stackoverflow.com/questions/35510510/pub-build-by-command-line", "title": "Pub Build by Command Line", "body": "<p>How to use <em>pub build</em> by command line directly from terminal? Using <em>dart2js</em> is easy, it works like this:</p>\n\n<p>/Applications/dart-sdk/bin/dart2js --minify --out=file:/Users/muggins/my_project/web/my_project.dart.js /Users/muggins/my_project/web/my_project.dart</p>\n\n<p>But this creates the <em>my_project.dart.js</em> file into the same directory as <em>my_project.dart</em>. How can I obtain the distinct directory <em>build</em> by command line without using a software like ItelliJ IDEA?</p>\n\n<p>I can't get any result from <a href=\"https://www.dartlang.org/tools/pub/cmd/pub-build.html\" rel=\"nofollow\">https://www.dartlang.org/tools/pub/cmd/pub-build.html</a>.</p>\n"}, {"tags": ["dart", "flutter"], "comments": [{"owner": {"reputation": 1005, "user_id": 7857541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFKHV.jpg?s=128&g=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7857541/yash"}, "edited": false, "score": 0, "creation_date": 1598443625, "post_id": 35506533, "comment_id": 112459762, "body": "From official Doc- <a href=\"https://flutter.dev/docs/get-started/flutter-for/android-devs#how-do-i-handle-incoming-intents-from-external-applications-in-flutter\" rel=\"nofollow noreferrer\">flutter.dev/docs/get-started/flutter-for/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2523, "user_id": 6669611, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r4OJyp3Hp-8/AAAAAAAAAAI/AAAAAAAAAvI/gqRexRhkGoU/photo.jpg?sz=128", "display_name": "Eric Seidel", "link": "https://stackoverflow.com/users/6669611/eric-seidel"}, "is_accepted": false, "score": 10, "last_activity_date": 1598505150, "last_edit_date": 1598505150, "creation_date": 1481001066, "answer_id": 40988254, "question_id": 35506533, "link": "https://stackoverflow.com/questions/35506533/is-it-possible-to-register-a-flutter-app-as-an-android-intent-filter-and-to-hand/40988254#40988254", "title": "Is it possible to register a Flutter app as an Android Intent Filter and to handle Incoming Intents?", "body": "<p>To my knowledge, there is no way to handle incoming Intents from Dart code at this time.  Specifically the case of handling incoming URLs is tracked by <a href=\"https://github.com/flutter/flutter/issues/357\" rel=\"nofollow noreferrer\">https://github.com/flutter/flutter/issues/357</a>.</p>\n<p>It's also possible to handle incoming intents from Java code and post the result across to Dart using the HostMessage system documented at <a href=\"https://flutter.io/platform-services/\" rel=\"nofollow noreferrer\">https://flutter.io/platform-services/</a></p>\n<p><strong>Update 2020</strong>- <a href=\"https://flutter.dev/docs/get-started/flutter-for/android-devs#how-do-i-handle-incoming-intents-from-external-applications-in-flutter\" rel=\"nofollow noreferrer\">Accept incoming intent in the Flutter from Flutter Doc</a></p>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 5162053, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f62f65c8c9c5e94b0087304c5770506?s=128&d=identicon&r=PG&f=1", "display_name": "Helio Soares Junior", "link": "https://stackoverflow.com/users/5162053/helio-soares-junior"}, "is_accepted": false, "score": 3, "last_activity_date": 1535911531, "creation_date": 1535911531, "answer_id": 52139757, "question_id": 35506533, "link": "https://stackoverflow.com/questions/35506533/is-it-possible-to-register-a-flutter-app-as-an-android-intent-filter-and-to-hand/52139757#52139757", "title": "Is it possible to register a Flutter app as an Android Intent Filter and to handle Incoming Intents?", "body": "<p>This maybe can help u, thios show how to handle\n<a href=\"https://flutter.io/flutter-for-android/#what-is-the-equivalent-of-an-intent-in-flutter\" rel=\"nofollow noreferrer\">https://flutter.io/flutter-for-android/#what-is-the-equivalent-of-an-intent-in-flutter</a></p>\n\n<pre><code>&lt;activity\n  android:name=\".MainActivity\"\n  android:launchMode=\"singleTop\"\n  android:theme=\"@style/LaunchTheme\"\n  android:configChanges=\"orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection\"\n  android:hardwareAccelerated=\"true\"\n  android:windowSoftInputMode=\"adjustResize\"&gt;\n  &lt;!-- ... --&gt;\n  &lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.SEND\" /&gt;\n    &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n    &lt;data android:mimeType=\"text/plain\" /&gt;\n  &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n\n<p>On MainActivity</p>\n\n<pre><code>public class MainActivity extends FlutterActivity {\n\n  private String sharedText;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    GeneratedPluginRegistrant.registerWith(this);\n    Intent intent = getIntent();\n    String action = intent.getAction();\n    String type = intent.getType();\n\n    if (Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {\n      if (\"text/plain\".equals(type)) {\n        handleSendText(intent); // Handle text being sent\n      }\n    }\n\n    MethodChannel(getFlutterView(), \"app.channel.shared.data\")\n      .setMethodCallHandler(MethodChannel.MethodCallHandler() {\n        @Override\n        public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\n          if (methodCall.method.contentEquals(\"getSharedText\")) {\n            result.success(sharedText);\n            sharedText = null;\n          }\n        }\n      });\n  }\n\n  void handleSendText(Intent intent) {\n    sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);\n  }\n}\n</code></pre>\n\n<p>And finally to get it</p>\n\n<pre><code>class _SampleAppPageState extends State&lt;SampleAppPage&gt; {\n  static const platform = const MethodChannel('app.channel.shared.data');\n  String dataShared = \"No data\";\n\n  @override\n  void initState() {\n    super.initState();\n    getSharedText();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(body: Center(child: Text(dataShared)));\n  }\n\n  getSharedText() async {\n    var sharedData = await platform.invokeMethod(\"getSharedText\");\n    if (sharedData != null) {\n      setState(() {\n        dataShared = sharedData;\n      });\n    }\n  }\n}\n</code></pre>\n\n<p>But if need to send a real intent to android system u can use this library</p>\n\n<p><a href=\"https://github.com/flutter/plugins/tree/master/packages/android_intent\" rel=\"nofollow noreferrer\">https://github.com/flutter/plugins/tree/master/packages/android_intent</a></p>\n"}], "owner": {"reputation": 311, "user_id": 1089478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1724e11f70e8ad1b7d3ea8a9c682632d?s=128&d=identicon&r=PG", "display_name": "Pieter Greyling", "link": "https://stackoverflow.com/users/1089478/pieter-greyling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8156, "favorite_count": 2, "answer_count": 2, "score": 21, "last_activity_date": 1600927915, "creation_date": 1455888584, "question_id": 35506533, "link": "https://stackoverflow.com/questions/35506533/is-it-possible-to-register-a-flutter-app-as-an-android-intent-filter-and-to-hand", "title": "Is it possible to register a Flutter app as an Android Intent Filter and to handle Incoming Intents?", "body": "<p>One can launch another Activity using an Intent from a Flutter app: \n<a href=\"https://github.com/flutter/flutter/blob/master/examples/widgets/launch_url.dart\">https://github.com/flutter/flutter/blob/master/examples/widgets/launch_url.dart</a></p>\n\n<pre><code>import 'package:flutter/widgets.dart';\nimport 'package:flutter/services.dart';\n\nvoid main() {\n  runApp(new GestureDetector(\n    onTap: () {\n      Intent intent = new Intent()\n        ..action = 'android.intent.action.VIEW'\n        ..url = 'http://flutter.io/';\n      activity.startActivity(intent);\n    },\n    child: new Container(\n      decoration: const BoxDecoration(\n        backgroundColor: const Color(0xFF006600)\n      ),\n      child: new Center(\n        child: new Text('Tap to launch a URL!')\n      )\n    )\n  ));\n}\n</code></pre>\n\n<p>But can one do the following with the Flutter Activity Intent services when an Intent is passed to the app? \n<a href=\"http://developer.android.com/training/sharing/receive.html\">http://developer.android.com/training/sharing/receive.html</a></p>\n\n<pre><code>. . .\nvoid onCreate (Bundle savedInstanceState) {\n    ...\n    // Get intent, action and MIME type\n    Intent intent = getIntent();\n. . .\n</code></pre>\n"}, {"tags": ["dart", "dart-html"], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455877234, "post_id": 35502407, "comment_id": 58696781, "body": "but the port number 4047 is coming, why not 4045?"}, {"owner": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455878677, "post_id": 35502407, "comment_id": 58697722, "body": "I think if we create 4045 once, We need to destroy that port. But currently 4045 port is running, I am sure no other port is running."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455879034, "post_id": 35502407, "comment_id": 58697967, "body": "I still have no idea ;-) I just googled your error message and found the answer. Never run into any such issue."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455879267, "post_id": 35502407, "comment_id": 58698149, "body": "Summoned more knowledgeable people <a href=\"https://groups.google.com/a/dartlang.org/forum/#!topic/web/TL6XmY8sSrE\" rel=\"nofollow noreferrer\">groups.google.com/a/dartlang.org/forum/#!topic/web/TL6XmY8sS&zwnj;&#8203;rE</a>"}, {"owner": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455879559, "post_id": 35502407, "comment_id": 58698353, "body": "ok thank you! how to create question on google  Dart Web Development ."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "edited": false, "score": 0, "creation_date": 1455879693, "post_id": 35502407, "comment_id": 58698444, "body": "Click the red &quot;New Topic&quot; button. You might need to join first."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1455876016, "last_edit_date": 1490004264, "creation_date": 1455876016, "answer_id": 35502407, "question_id": 35502345, "link": "https://stackoverflow.com/questions/35502345/neterr-unsafe-port-in-dart/35502407#35502407", "title": "net::ERR_UNSAFE_PORT in dart", "body": "<p>Shameless copied from <a href=\"https://superuser.com/questions/188006/how-to-fix-err-unsafe-port-error-on-chrome-when-browsing-to-unsafe-ports\">https://superuser.com/questions/188006/how-to-fix-err-unsafe-port-error-on-chrome-when-browsing-to-unsafe-ports</a></p>\n\n<blockquote>\n  <p>Right Click on Chrome shortcut >> Properties >> </p>\n</blockquote>\n\n<p>Then Append \n<code>--explicitly-allowed-ports=xxx</code> to shortcut target</p>\n\n<p><strong>Example:</strong> </p>\n\n<blockquote>\n  <p>C:\\Documents and Settings\\User\\Local\n  Settings\\Application\n  Data\\Google\\Chrome\\Application\\chrome.exe\n  --explicitly-allowed-ports=6666</p>\n</blockquote>\n\n<p>Resource from <a href=\"http://www.google.com/support/forum/p/Chrome/thread?tid=7512620ef6d830c3&amp;hl=en\" rel=\"nofollow noreferrer\"> here</a></p>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 1667351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0I49N.png?s=128&g=1", "display_name": "Tawab Wakil", "link": "https://stackoverflow.com/users/1667351/tawab-wakil"}, "is_accepted": false, "score": 0, "last_activity_date": 1551998874, "last_edit_date": 1592644375, "creation_date": 1551998874, "answer_id": 55054037, "question_id": 35502345, "link": "https://stackoverflow.com/questions/35502345/neterr-unsafe-port-in-dart/55054037#55054037", "title": "net::ERR_UNSAFE_PORT in dart", "body": "<p>There is a bug in some versions of Chrome that prevents the given <strong>--explicitly-allowed-ports</strong> solution from working.  In that case, a <strong>temporary</strong> workaround would be:</p>\n<ol>\n<li>Browse to chrome://flags/#network-service.</li>\n<li>Set &quot;Enable network service&quot; to Disabled.</li>\n<li>Restart Chrome.</li>\n</ol>\n<p><a href=\"https://stackoverflow.com/questions/54732271/explicitly-allowed-ports-not-working-in-latest-google-chrome-v-72-0-3626-109\">Reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 3365, "user_id": 8490598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1XIMj.jpg?s=128&g=1", "display_name": "M. Hamza Rajput", "link": "https://stackoverflow.com/users/8490598/m-hamza-rajput"}, "is_accepted": false, "score": 3, "last_activity_date": 1596405148, "creation_date": 1596405148, "answer_id": 63221389, "question_id": 35502345, "link": "https://stackoverflow.com/questions/35502345/neterr-unsafe-port-in-dart/63221389#63221389", "title": "net::ERR_UNSAFE_PORT in dart", "body": "<h2>Here is a best way to deal with this issue.</h2>\n<blockquote>\n<p>There some ports are reserved for specific protocols like 80 for HTTP\nand 22 for SSH etc. If you use that port for another kind of protocol\nyou will face this error. In my case, I'm using 6000 port for my\nbackend API server which was resolved. I just simply move 6000 port to\n7789 all stuff working as expected. <a href=\"https://medium.com/@msinha2801/why-are-some-ports-considered-unsafe-restricted-c3c22d0596c0\" rel=\"nofollow noreferrer\">Here are the list ports for\nspecific protocols that you may not violate.</a> You need to use port other then this for your specific work.</p>\n</blockquote>\n"}], "owner": {"reputation": 1015, "user_id": 3985667, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/qnKjK.jpg?s=128&g=1", "display_name": "nisar", "link": "https://stackoverflow.com/users/3985667/nisar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17269, "favorite_count": 0, "accepted_answer_id": 35502407, "answer_count": 3, "score": 3, "last_activity_date": 1596405148, "creation_date": 1455875828, "question_id": 35502345, "link": "https://stackoverflow.com/questions/35502345/neterr-unsafe-port-in-dart", "title": "net::ERR_UNSAFE_PORT in dart", "body": "<p>I am doing a server side dart code using notepad++, I have already succeed in server side dart code using dart editor. But I the same think where I done with notepad++ done a error as net::ERR_UNSAFE_PORT in dart in browser, Dart server side initialed by Command prompt is done, When I try to access 172....190 ,Bowser(dartium) said that above error!!!</p>\n\n<p>server side code</p>\n\n<pre><code>main() {\n  HttpServer.bind(\"172...\", 4045).then((server) {\n    server.listen((res) {\n      res.response.headers.add(\"Access-Control-Allow-Origin\", \"172.25.10.181\");\n      res.response.headers\n          .add(\"Access-Control-Allow-Methods\", \"POST,GET,DELETE,PUT,OPTIONS\");\n      res.response.headers.add('Access-Control-Allow-Headers',\n          'Origin, X-Requested-With, Content-Type, Accept,application/x-www-form-urlencoded');\n      print('I am writing server side code');\n    });\n  });\n}\n</code></pre>\n\n<p>Client side code</p>\n\n<pre><code>req = new HttpRequest();\n\n  req.open('get', 'http://172...:4045');\n\n  req.send(data);\n\n  req.onReadyStateChange.listen((_) {\n    if (req.readyState == HttpRequest.DONE &amp;&amp;\n        (req.status == 200 || req.status == 0)) {\n     print(req.responseText);\n    }\n  });\n</code></pre>\n"}, {"tags": ["dart", "dart-async"], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 3778492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1413251a72ab3acaf39ab87909bd7ffb?s=128&d=identicon&r=PG&f=1", "display_name": "olerass", "link": "https://stackoverflow.com/users/3778492/olerass"}, "edited": false, "score": 0, "creation_date": 1455878207, "post_id": 35502560, "comment_id": 58697428, "body": "Thanks. This makes sense. I thought the code was fine as I got no analyzer warnings. Furthermore, I was confused by the fact that DartPad shows all errors and exceptions as just <code>Script error</code> so I thought the code failed because of the <code>completeError</code> call in <code>func2()</code> but it had nothing to do with that."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1456008001, "post_id": 35502560, "comment_id": 58749435, "body": "The function type of the <code>catchError</code> argument is not more specific because the function accepts both <code>(dynamic)-&gt;dynamic</code> and <code>(dynamic, StackTrace)-&gt;dynamic</code>. The most precise type accepting both is <code>Function</code>."}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "edited": false, "score": 0, "creation_date": 1456087246, "post_id": 35502560, "comment_id": 58772095, "body": "Thanks for the info. One more place where union type could help."}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": true, "score": 3, "last_activity_date": 1455876435, "creation_date": 1455876435, "answer_id": 35502560, "question_id": 35502097, "link": "https://stackoverflow.com/questions/35502097/async-future-error-handling-in-dart-not-working-as-expected/35502560#35502560", "title": "Async/future error handling in Dart not working as expected", "body": "<p>In <code>func1</code> the function used as <code>catchError</code> parameter must be a subtype of type <code>(dynamic) =&gt; dynamic</code> regarding the error:</p>\n\n<blockquote>\n  <p>Unhandled exception:</p>\n  \n  <p>type '() => dynamic' is not a subtype of type '(dynamic) => dynamic' of 'f'.</p>\n</blockquote>\n\n<p>Thus you should use:</p>\n\n\n\n<pre><code>Future func1() {\n  var completer = new Completer();\n  func2().catchError((e) =&gt; completer.completeError('Noo'));\n  return completer.future;\n}\n</code></pre>\n\n<p>You don't get any analyzer error because the parameter is typed with <code>Function</code>. You can <a href=\"http://dartbug.com/new\" rel=\"nofollow\">file an issue</a> to know why the type is not a more specific type matching <code>(dynamic)=&gt;dynamic</code> </p>\n"}], "owner": {"reputation": 380, "user_id": 3778492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1413251a72ab3acaf39ab87909bd7ffb?s=128&d=identicon&r=PG&f=1", "display_name": "olerass", "link": "https://stackoverflow.com/users/3778492/olerass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 35502560, "answer_count": 1, "score": 3, "last_activity_date": 1455876973, "creation_date": 1455875119, "question_id": 35502097, "link": "https://stackoverflow.com/questions/35502097/async-future-error-handling-in-dart-not-working-as-expected", "title": "Async/future error handling in Dart not working as expected", "body": "<p>I've been at this for hours studying the <a href=\"https://www.dartlang.org/articles/futures-and-error-handling/\" rel=\"nofollow\">Futures and Error Handling</a> section on the Dart page without any luck. Can anyone explain why the code below does not print <code>All good</code>?</p>\n\n<pre><code>import 'dart:async';\n\nmain() async {\n  try {\n    await func1();\n  } catch (e) {\n    print('All good');\n  }\n}\n\nFuture func1() {\n  var completer = new Completer();\n  func2().catchError(() =&gt; completer.completeError('Noo'));\n  return completer.future;\n}\n\nFuture func2() {\n  var completer = new Completer();\n  completer.completeError('Noo');\n  return completer.future;\n}\n</code></pre>\n"}, {"tags": ["backbone.js", "typescript", "dart", "marionette"], "answers": [{"tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1455865105, "creation_date": 1455865105, "answer_id": 35499185, "question_id": 35498373, "link": "https://stackoverflow.com/questions/35498373/dart-and-third-party-libs/35499185#35499185", "title": "Dart and third party libs", "body": "<p>There are some attempts or plans to support that better but currently I guess this isn't too easy.  </p>\n\n<ul>\n<li><p><code>dart:js</code> provides support to call between Dart and JS but this probably won't work with <code>d.ts</code>. You'd need to rebuild d.ts for <code>dart:js</code>.<br>\nSupport for <code>d.ts</code> seems to be work in progress and a first version should become available in the not too far future <a href=\"https://github.com/dart-lang/sdk/issues/23423\" rel=\"nofollow\">https://github.com/dart-lang/sdk/issues/23423</a></p></li>\n<li><p>The dev_compiler team is working on generating TypeScript output from Dart code <a href=\"https://github.com/dart-lang/dev_compiler/issues/397\" rel=\"nofollow\">https://github.com/dart-lang/dev_compiler/issues/397</a>. I don't know about the status. Seems to be farther away.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "is_accepted": false, "score": 0, "last_activity_date": 1456250288, "creation_date": 1456250288, "answer_id": 35584820, "question_id": 35498373, "link": "https://stackoverflow.com/questions/35498373/dart-and-third-party-libs/35584820#35584820", "title": "Dart and third party libs", "body": "<p>You probably want to look at package:js, <a href=\"https://pub.dartlang.org/packages/js\" rel=\"nofollow\">https://pub.dartlang.org/packages/js</a> and see the ChartJS example there. Angular has a ts2dart compiler, but I don't know if that would actually convert the d.ts files or if you'd need to do that by hand. It doesn't seem like it would be too difficult to turn d.ts definitions into package:js definitions.</p>\n"}], "owner": {"reputation": 1164, "user_id": 3110920, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bca24c0bfed04fdb620388f3b8f109d0?s=128&d=identicon&r=PG&f=1", "display_name": "Illorian", "link": "https://stackoverflow.com/users/3110920/illorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 35499185, "answer_count": 2, "score": 1, "last_activity_date": 1456250288, "creation_date": 1455861832, "question_id": 35498373, "link": "https://stackoverflow.com/questions/35498373/dart-and-third-party-libs", "title": "Dart and third party libs", "body": "<p>I have a few projects written on Typescript. </p>\n\n<p>TS has a declaration files (d.ts) to declare non-ts libs. How it's works in Dart?</p>\n\n<p>Dart looks very cool but I'd like to use Backbone and Marionette in my project.</p>\n\n<p>Is there opportunity to rewrite projects at Dart or use Dart in next project using Marionette?</p>\n"}, {"tags": ["dart", "angular", "angular-dart", "angular2-routing"], "answers": [{"tags": [], "owner": {"reputation": 4669, "user_id": 230637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hwJg5.jpg?s=128&g=1", "display_name": "Alon Amir", "link": "https://stackoverflow.com/users/230637/alon-amir"}, "is_accepted": true, "score": 0, "last_activity_date": 1456474804, "creation_date": 1456474804, "answer_id": 35646726, "question_id": 35494651, "link": "https://stackoverflow.com/questions/35494651/angular2-navigate-to-a-route-and-pop-back-to-the-root-of-the-pushstate-stack/35646726#35646726", "title": "Angular2: navigate to a route and pop back to the root of the pushState stack", "body": "<p>Until Angular2 provides this functionality in it's Router, here's a temporary workaround:</p>\n\n<pre><code>abstract class Hist {\n  static int _initialLength;\n  // Call this ASAP when app starts.\n  static void setAsInitialLength() {\n    _initialLength = window.history.length;\n  }\n  static Future goBackToRoot() async {\n    Completer completer = new Completer();\n    window.history.go(-(window.history.length-_initialLength));\n    Timer.run((){\n      completer.complete();\n    });\n    return completer.future;\n  }\n}\n</code></pre>\n\n<p>Then I can use it like this:</p>\n\n<pre><code>await Hist.goBackToRoot();\nrouter.navigate(['/Main',{}]);\n</code></pre>\n"}], "owner": {"reputation": 4669, "user_id": 230637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hwJg5.jpg?s=128&g=1", "display_name": "Alon Amir", "link": "https://stackoverflow.com/users/230637/alon-amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "accepted_answer_id": 35646726, "answer_count": 1, "score": 1, "last_activity_date": 1456474804, "creation_date": 1455838665, "question_id": 35494651, "link": "https://stackoverflow.com/questions/35494651/angular2-navigate-to-a-route-and-pop-back-to-the-root-of-the-pushstate-stack", "title": "Angular2: navigate to a route and pop back to the root of the pushState stack", "body": "<p>Using Angular2 routing, how can I navigate to some route, while having the <code>pushState</code> pop all the way back to the root?</p>\n\n<p>I looked into the <code>router.navigate([...])</code> method of <code>Router</code>, but didn't find it there.</p>\n\n<p>For example, in Dart's <code>route_hierarchical</code> <code>Router</code>, I could do<br/><code>router.go('login',{},replace: true,startingFrom:router.root);</code></p>\n"}, {"tags": ["dart", "polymer", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 236, "user_id": 3357461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a28db2af11ce51ea767c94370602ac4?s=128&d=identicon&r=PG&f=1", "display_name": "mikedal", "link": "https://stackoverflow.com/users/3357461/mikedal"}, "edited": false, "score": 0, "creation_date": 1455825337, "post_id": 35490067, "comment_id": 58675036, "body": "Thanks for the explanation. The part about converting the list to a non observable string makes sense. What still confuses me is how adding an observable integer to the template causes the non observable string to be updated as well."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 236, "user_id": 3357461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a28db2af11ce51ea767c94370602ac4?s=128&d=identicon&r=PG&f=1", "display_name": "mikedal", "link": "https://stackoverflow.com/users/3357461/mikedal"}, "edited": false, "score": 0, "creation_date": 1455856396, "post_id": 35490067, "comment_id": 58686729, "body": "I missed that one. Actually I can&#39;t tell."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1455821681, "creation_date": 1455821681, "answer_id": 35490067, "question_id": 35489244, "link": "https://stackoverflow.com/questions/35489244/using-an-observablelist-to-update-a-template-in-dart/35490067#35490067", "title": "Using an ObservableList to update a template in Dart", "body": "<p>It's a while I used Polymer 0.16 ... </p>\n\n<pre><code>{{theList}} \n</code></pre>\n\n<p>is basically </p>\n\n<pre><code>{{theList.toString()}}\n</code></pre>\n\n<p>and the returned string is not an observable. Also the reference to <code>theList</code> doesn't change when you add a value to the observable list. I remember there was a workaround to make Polymer recognize the change but don't remember what it was (transformer or something). </p>\n\n<p>The number is observed directly and when it changes it is recognized by Polymer. </p>\n"}], "owner": {"reputation": 236, "user_id": 3357461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a28db2af11ce51ea767c94370602ac4?s=128&d=identicon&r=PG&f=1", "display_name": "mikedal", "link": "https://stackoverflow.com/users/3357461/mikedal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455821681, "creation_date": 1455819097, "question_id": 35489244, "link": "https://stackoverflow.com/questions/35489244/using-an-observablelist-to-update-a-template-in-dart", "title": "Using an ObservableList to update a template in Dart", "body": "<p>I am trying to bind an ObservableList to a template, and I am a bit confused about how it is working. In the following example, when I click the button, the instance of the list that is displayed by iterating through the elements is updated, but the instance that is used directly is not.  </p>\n\n<h1>dart:</h1>\n\n<pre><code>@CustomTag('my-observing-list')\nclass ObservingList extends PolymerElement {\n\n  ObservingList.created() : super.created();\n\n  @observable ObservableList theList = new ObservableList.from([0, 1, 2, 3, 4]);\n\n  addElement(var x) {\n    theList.add(5);\n  }\n}\n</code></pre>\n\n<h1>html:</h1>\n\n<pre><code>&lt;polymer-element name=\"my-observing-list\"&gt;\n    &lt;template&gt;\n        &lt;template repeat=\"{{l in theList}}\"&gt;\n            {{l}}\n        &lt;/template&gt;\n        {{theList}}\n        &lt;button on-click=\"{{addElement}}\"&gt;&lt;/button&gt;\n    &lt;/template&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>Further adding to my confusion, if I add an observable integer to my element, include it in the template, and update it when the button is clicked, it causes <strong>both</strong> instances of the list to be updated when the button is clicked.  </p>\n\n<h1>dart:</h1>\n\n<pre><code>class ObservingList extends PolymerElement {\n\n  ObservingList.created() : super.created();\n\n  @observable ObservableList theList = new ObservableList.from([0, 1, 2, 3, 4]);\n  @observable var number = 0;\n\n  addElement(var x) {\n    theList.add(5);\n    number = 1;\n  }\n}\n</code></pre>\n\n<h1>html:</h1>\n\n<pre><code>&lt;polymer-element name=\"my-observing-list\"&gt;\n    &lt;template&gt;\n        &lt;template repeat=\"{{l in theList}}\"&gt;\n            {{l}}\n        &lt;/template&gt;\n        {{theList}}\n        {{number}}\n        &lt;button on-click=\"{{addElement}}\"&gt;&lt;/button&gt;\n    &lt;/template&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>Can someone explain what's happening here?</p>\n"}, {"tags": ["dart", "polymer", "polymer-1.0", "dart-polymer"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455779609, "post_id": 35474526, "comment_id": 58644500, "body": "To your last question: can you please add the code of <code>MainApp</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1455806424, "post_id": 35475047, "comment_id": 58662289, "body": "I add the behavior via using <code>implements</code>. The property are the ones from my initial question <code>alignTop</code> and the error message says <code>Missing concrete implementation of getter &#39;AlignmentBehavior.alignTop&#39;</code>"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1455806628, "post_id": 35475047, "comment_id": 58662479, "body": "You need to use <code>with</code> instead of <code>implements</code>. Implements only states that this class fulfills the contract of X but doesn&#39;t add anything to the class. <code>with</code> is like <code>extends</code> where you really add the members and implementation. Therefore the error message is correct. You state the class has those things but actually doesn&#39;t have them ;-)."}, {"owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "edited": false, "score": 1, "creation_date": 1455807017, "post_id": 35475047, "comment_id": 58662807, "body": "It should also be noted that the <code>ready</code> method in your behavior should be a static method which takes <code>this</code> as the first argument. This is to support multiple behaviors which define the same lifecycle methods."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1455807155, "post_id": 35475047, "comment_id": 58662908, "body": "Thanks for chiming in. I have already forgotten about that - haven&#39;t used it myself yet."}, {"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1455808244, "post_id": 35475047, "comment_id": 58663704, "body": "Thank you guys! Works now!"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1455779579, "creation_date": 1455779579, "answer_id": 35475047, "question_id": 35474526, "link": "https://stackoverflow.com/questions/35474526/dart-polymer-1-0-behavior-method-not-found-getters-required/35475047#35475047", "title": "Dart Polymer 1.0 Behavior - method not found &amp; getters required", "body": "<p>1)</p>\n\n<blockquote>\n  <p>var ele = Polymer.dom(root);</p>\n</blockquote>\n\n<p>If you want to access the DOM of the element, this fine.<br>\nJust <code>root</code> gives you the same AFAIK.  </p>\n\n<p>If you want to access the elements class instance, there is nothing to do. It's <code>this</code> but that is implicit in Dart anyway.\nYou can only access what is known in the mixin. To make \"things\" known to the mixin you can create an interface class.</p>\n\n<pre><code>abstract class MyComponentInterface {\n  void someFunction();\n  int someField;\n  String get someValue;\n  set someValue(String value);\n  ...\n}\n</code></pre>\n\n<p>Then implement the interface in the mixin and the element class and you have a shared contract.  </p>\n\n<pre><code>abstract class AlignmentBehavior implements MyComponentInterface, PolymerBase {\n</code></pre>\n\n<p>The mixin can now access the members because the <code>implements</code>MyComponentInterface` claims they will exist and</p>\n\n<pre><code>class MyComponent extends PolymerElement with AlignmentBehavior {\n</code></pre>\n\n<p>will force you to implement it to fulfill the contract of the mixin. </p>\n\n<p>2) looks fine </p>\n\n<p>3) </p>\n\n<blockquote>\n  <p>Another question is whether I have to inherit from <code>PolymerBase</code> or not.</p>\n</blockquote>\n\n<p>Is basically the same as 1) Any Polymer element in Dart has to extend <code>PolymerBase</code>. To be able to access the members of <code>PolymerBase</code> from within the mixin it has to implement it as well. This doesn't result in any limitations because the classes that the mixin will be applied to, will fulfill that contract anyway. </p>\n\n<p>If you don't need to access any members provided by <code>PolymerBase</code> there is no need to implement it.</p>\n"}], "owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 35475047, "answer_count": 1, "score": 1, "last_activity_date": 1456173847, "creation_date": 1455777501, "last_edit_date": 1456173847, "question_id": 35474526, "link": "https://stackoverflow.com/questions/35474526/dart-polymer-1-0-behavior-method-not-found-getters-required", "title": "Dart Polymer 1.0 Behavior - method not found &amp; getters required", "body": "<p>I wanted to write a simple behavior in Dart to be used by a custom element. </p>\n\n<pre><code>@behavior\nabstract class AlignmentBehavior implements PolymerBase {\n\n  @Property()\n  bool alignTop = false;\n  // more properties ...\n\n  ready() {\n    updateAlignment();\n  }\n\n  @reflectable\n  updateAlignment([_,__]) {\n    // reference to the element the Behavior is attached to. \n    // 1) Is that the correct way?\n    var ele = Polymer.dom(root);\n\n    // We need to inherit from PolymerBase to access set(...)\n    // 2) Is that the correct way?\n    set('alignTop', aTop);\n    // .. to more stuff\n  }\n\n}\n</code></pre>\n\n<p>My first two questions are already written in the code. How do I access the element the behavior is attached to? What's the proper way of doing this? I currently use <code>Polymer.dom(root)</code> but I don't know if that even works since I have some runtime errors which I am going to explain later in this post. What is the official way of accessing the underlying element? Is it using the JsObject? Is it calling a Behavior function from the parent PolymerElement and pass <code>this</code>, or should you not access it at all?</p>\n\n<p>Another question is whether I have to inherit from PolymerBase or not. The Behavior example at the Github wiki doesn't do so, but in order to access methods such as <code>set</code> to modify a <code>@Property</code> I have to inherit from it. What's the proper way of doing so?</p>\n\n<p>My last two questions are about errors I get. One error asks me to implement getters and setters for my properties, such as adding a getter and setter for alignTop.\nAnd last but not least, I cannot invoke <code>updateAlignment()</code> from my custom element. It says <code>Class 'MainApp' has no instance method 'updateAlignment'.</code></p>\n"}]