[{"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432719737, "post_id": 30478610, "comment_id": 49036430, "body": "So you want to use the class like a map and also like a normal class with autocompletion or something for your fields and you don&#39;t want to use reflection?"}, {"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432719974, "post_id": 30478610, "comment_id": 49036638, "body": "@G&#252;nterZ&#246;chbauer exactly, i know how to write a transformer for this but i wonder if it has been done, basicly it will be like being able to access members by name using [] just like javascript, because mirrors are useless and painful with dar2js and also slow things down"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432720026, "post_id": 30478610, "comment_id": 49036669, "body": "I never saw anything similar mentioned yet, but I can imagine it being useful ."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432786887, "post_id": 30478610, "comment_id": 49071239, "body": "See <a href=\"http://dartbug.com/23541\" rel=\"nofollow noreferrer\">dartbug.com/23541</a>"}, {"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432814125, "post_id": 30478610, "comment_id": 49087161, "body": "@G&#252;nterZ&#246;chbauer wrote a transformer that generates the 3 methods for classes that extend my abstract class the method call also supports named and positional parameters i will put it here when i make sure its working right"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432814205, "post_id": 30478610, "comment_id": 49087221, "body": "It would be great if you could it publish as a package to pub.dartlang.org :)"}], "answers": [{"tags": [], "owner": {"reputation": 2228, "user_id": 112087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359e13308a0dda54bc9ba30c1e611ce?s=128&d=identicon&r=PG", "display_name": "Xavier", "link": "https://stackoverflow.com/users/112087/xavier"}, "is_accepted": true, "score": 3, "last_activity_date": 1432823429, "last_edit_date": 1432823429, "creation_date": 1432816626, "answer_id": 30506808, "question_id": 30478610, "link": "https://stackoverflow.com/questions/30478610/generate-static-accessors-by-name/30506808#30506808", "title": "Generate static accessors by name", "body": "<p>Here is an example of a transformer that use the analyzer package to find the classes that extends DynamicallyAccessible and inject the code for the operator[].</p>\n\n\n\n<pre><code>import 'package:barback/barback.dart';\nimport 'package:analyzer/analyzer.dart';\n\nclass DynamicallyAccessibleTransformer extends Transformer {\n\n  DynamicallyAccessibleTransformer.asPlugin();\n\n  get allowedExtensions =&gt; '.dart';\n\n  apply(Transform transform) async {\n    var content = await transform.readInputAsString(transform.primaryInput.id);\n    var newContent = _transformDartFile(content);\n\n    transform.addOutput(new Asset.fromString(transform.primaryInput.id, newContent));\n  }\n\n  String _transformDartFile(String content) {\n    CompilationUnit unit = parseCompilationUnit(content);\n\n    String newContent = content;\n\n    for (ClassDeclaration declaration in unit.declarations.reversed.where((d) =&gt; d is ClassDeclaration)) {\n      if (_isDynamicallyAccessible(declaration)) {\n        String sourceToInject = _createSourceToInject(declaration);\n\n        String before = content.substring(0, declaration.endToken.offset);\n        String after = content.substring(declaration.endToken.offset);\n\n        newContent = before + \"\\n$sourceToInject\\n\" + after;\n      }\n    }\n\n    return newContent;\n  }\n\n  /// TODO: this is a fragile approach as we only check for the class name\n  /// and not the library from where it comes. We probably should resolve\n  /// the Element and check the library.\n  _isDynamicallyAccessible(ClassDeclaration declaration) {\n    ExtendsClause extendsClause = declaration.extendsClause;\n    if (extendsClause != null) {\n      return extendsClause.superclass.name.name == 'DynamicallyAccessible';\n    }\n    return false;\n  }\n\n  _createSourceToInject(ClassDeclaration declaration) {\n    //TODO: do the same things for setters, methods and variable declaration.\n    String getterCases = declaration.members\n      .where((member) =&gt; member is MethodDeclaration &amp;&amp; member.isGetter)\n      .map((MethodDeclaration getter) =&gt; getter.name.name)\n      .map((String name) =&gt; \"   case '$name': return $name;\")\n      .join('\\n');\n\n    return '''\n  operator [](String key) {\n    switch (key) {\n$getterCases\n      default:throw 'no getter called \\$key';\n    }\n  }\n''';\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "is_accepted": false, "score": 1, "last_activity_date": 1432851417, "last_edit_date": 1432851417, "creation_date": 1432838495, "answer_id": 30514660, "question_id": 30478610, "link": "https://stackoverflow.com/questions/30478610/generate-static-accessors-by-name/30514660#30514660", "title": "Generate static accessors by name", "body": "<p>Here is my version, also supports positional and named arguments for calling methods haven't tested deeply but it works fine</p>\n\n<pre><code>//TODO:support multiple inheritance where the sub class gets access to the super class members\nclass DynamicTransformer extends Transformer {\n\n\n  DynamicTransformer.asPlugin();\n\n\n  String get allowedExtensions =&gt; \".dart\";\n\n\n  Future apply(Transform transform) async{\n    var logger = new BuildLogger(transform);\n\n      var content = await transform.primaryInput.readAsString();\n      var sourceFile = new SourceFile(content);\n      var transaction = _transformCompilationUnit(content,sourceFile,logger);\n      var id = transform.primaryInput.id;\n      if(transaction.hasEdits){\n        var printer = transaction.commit();\n        var url = id.path.startsWith('lib/')\n                  ? 'package:${id.package}/${id.path.substring(4)}' : id.path;\n        printer.build(url);\n        transform.addOutput(new Asset.fromString(id,printer.text));\n      }\n      return logger.writeOutput();\n  }\n\n  Future&lt;bool&gt; isPrimary(id) {\n    return new Future.value(id.extension == '.dart');\n  }\n\n\n  TextEditTransaction _transformCompilationUnit(\n    String inputCode, SourceFile sourceFile, BuildLogger logger) {\n    var unit = parseCompilationUnit(inputCode, suppressErrors: true);\n    var editor = new TextEditTransaction(inputCode, sourceFile);\n\n    unit.declarations\n    .where((dec) =&gt; dec is ClassDeclaration &amp;&amp;\n    isSubClassOrHasMixinOf(dec, 'DynamicAccess'))\n    .forEach((classDec) {\n      _transformClass(classDec,editor,sourceFile,logger);\n    });\n\n    return editor;\n  }\n\n  void _transformClass(ClassDeclaration cls, TextEditTransaction editor,\n                       SourceFile file, BuildLogger logger) {\n\n\n\n    //TODO:throw another exception for private fields\n\n    var readWriteFieldNames = getClassDeclarationFieldDeclarationNames(cls,public:true);\n    var readOnlyFieldNames = getClassDeclarationFieldDeclarationNames(cls,public:true,readOnly:true);\n    var getters = getClassDeclarationMethodDeclarationNames(cls,getter:true).union(readWriteFieldNames).union(readOnlyFieldNames);\n    var setters = getClassDeclarationMethodDeclarationNames(cls,setter:true).union(readWriteFieldNames);\n    var methods = getClassDeclarationMethodDeclarations(cls,normal:true);\n\n    var methodsString = _buildSquareBracketsOperatorGet(getters);\n    methodsString+=_buildSquareBracketsOperatorAssignment(setters,readOnlyFieldNames);\n    methodsString+=_buildCallMethod(methods);\n    editor.edit(cls.endToken.offset,cls.endToken.offset,'$methodsString');\n\n  }\n\n  //build [] operator method\n  String _buildSquareBracketsOperatorGet(Set&lt;String&gt; getters) {\n    var sb = new StringBuffer();\n    sb.writeln('operator [](String key){');\n    sb.writeln('switch (key){');\n    getters.forEach((getter) {\n      sb.writeln(\"case '$getter': return this.$getter;\");\n    });\n    sb.writeln(\"default:throw 'no getter or field called \\$key';\");\n    sb.writeln('}}');\n    return sb.toString();\n  }\n\n  String _buildSquareBracketsOperatorAssignment(Set&lt;String&gt; setters,Set&lt;String&gt; readOnlyFields) {\n    var sb = new StringBuffer();\n    sb.writeln('operator []=(String key,Object value){');\n    sb.writeln('switch (key){');\n    setters.forEach((setter) {\n      sb.writeln(\"case '$setter':this.$setter=value;return;\");\n    });\n    readOnlyFields.forEach((readOnlyField) {\n      sb.writeln(\"case '$readOnlyField':throw 'field \\$key is read only';return;\");\n    });\n    sb.writeln(\"default:throw 'no setter or field called \\$key';\");\n    sb.writeln('}}');\n    return sb.toString();\n  }\n\n\n  String _buildCallMethod(Set&lt;MethodDeclaration&gt; methods){\n    var sb = new StringBuffer();\n    sb.writeln('call(String key,{List&lt;Object&gt; required:null,List&lt;Object&gt; positional:null,Map&lt;String,Object&gt; named:null}){');\n    sb.writeln('switch (key){');\n    methods.forEach((md){\n        sb.writeln(\"case '${md.name.name}': return this.${buildMethodCallString(md)}\");\n    });\n    sb.writeln(\"default:throw 'no setter or field called \\$key';\");\n    sb.writeln('}}');\n    return sb.toString();\n  }\n}\n</code></pre>\n\n<p>some utility methods:</p>\n\n<pre><code>isSubClassOrHasMixinOf(ClassDeclaration classDec, String superClassOrMixinName) {\n  if(classDec.withClause!=null){\n    print(classDec.withClause.mixinTypes);\n  }\n  if ((classDec.extendsClause != null &amp;&amp;\n  classDec.extendsClause.superclass.name.name == superClassOrMixinName) ||\n  (classDec.withClause != null &amp;&amp;\n  classDec.withClause.mixinTypes.any((type)=&gt;type.name.name==superClassOrMixinName))) {\n    return true;\n  }\n  return false;\n}\n\nSet&lt;String&gt; getClassDeclarationFieldDeclarationNames(ClassDeclaration cd,\n    {public: true, private: false, readOnly: false}) {\n  var fieldNames = new Set&lt;String&gt;();\n\n  cd.members.forEach((m) {\n    if (m is FieldDeclaration) {\n      var fd = m as FieldDeclaration;\n      if ((fd.fields.isFinal || fd.fields.isConst) &amp;&amp; readOnly || (!readOnly &amp;&amp; !fd.fields.isFinal &amp;&amp; !fd.fields.isConst)) {\n        fd.fields.variables.forEach((variable) {\n          var fName = variable.name.name;\n          if ((Identifier.isPrivateName(fName) &amp;&amp; private) || (!Identifier.isPrivateName(fName) &amp;&amp; public)) {\n            fieldNames.add(fName);\n          }\n        });\n      }\n    }\n  });\n  return fieldNames;\n}\n\nSet&lt;FieldDeclaration&gt; getClassDeclarationFieldDeclarations(ClassDeclaration cd,\n    {public: true, private: false, readOnly: false}) {\n  var fieldsDeclarations = new Set&lt;FieldDeclaration&gt;();\n\n  cd.members.forEach((m) {\n    if (m is FieldDeclaration) {\n      var fd = m as FieldDeclaration;\n      if ((fd.fields.isFinal || fd.fields.isConst) &amp;&amp; readOnly || (!readOnly &amp;&amp; !fd.fields.isFinal &amp;&amp; !fd.fields.isConst)) {\n        fd.fields.variables.forEach((variable) {\n          if ((Identifier.isPrivateName(variable.name.name) &amp;&amp; private) || (!Identifier.isPrivateName(variable.name.name) &amp;&amp; public)) {\n            fieldsDeclarations.add(fd);\n          }\n        });\n      }\n    }\n  });\n  return fieldsDeclarations;\n}\n\n\nString buildMethodCallString(MethodDeclaration md){\n  var sb = new StringBuffer();\n\n  sb.write('${md.name.name}(');\n\n  var requiredParams = getMethodFormalParameterDeclarations(md,required:true);\n  if(requiredParams.length&gt;0){\n    for(int i=0;i&lt;requiredParams.length;i++){\n      sb.write('required[$i],');\n    };\n  }\n\n  var positionalParams = getMethodFormalParameterDeclarations(md,positional:true);\n  if(positionalParams.length&gt;0){\n    for(int i=0;i&lt;positionalParams.length;i++){\n      sb.write('(positional==null || positional[$i]==null)?${positionalParams[i].childEntities.last}:positional[$i],');\n    };\n  }\n\n  var namedParams = getMethodFormalParameterDeclarations(md,named:true);\n  if(namedParams.length &gt; 0){\n    for(int i=0;i&lt;namedParams.length;i++){\n\n      sb.write(\"${namedParams[i].identifier.name}:(named==null || !named.containsKey('${namedParams[i].identifier}'))?${namedParams[i].childEntities.last}:named['${namedParams[i].identifier}'],\");\n    };\n  }\n\n  sb.write(');');\n  return sb.toString().replaceAll(r',)',')');\n}\n\nSet&lt;MethodDeclaration&gt; getClassDeclarationMethodDeclarations(\n    ClassDeclaration cd, {public: true, private: false, getter: false,\n    setter: false, operator: false, normal: false}) {\n  var methodDeclarations = new Set&lt;MethodDeclaration&gt;();\n\n  cd.members.forEach((d) {\n    if (d is MethodDeclaration) {\n      var md = d as MethodDeclaration;\n      var mName = md.name.name;\n      if ((Identifier.isPrivateName(mName) &amp;&amp; private) ||\n      (!Identifier.isPrivateName(mName) &amp;&amp; public)) {\n        if (md.isSetter &amp;&amp; setter) {\n          methodDeclarations.add(md);\n        } else if (md.isGetter &amp;&amp; getter) {\n          methodDeclarations.add(md);\n        } else if (md.isOperator &amp;&amp; operator) {\n          //to do warn if [] []= are already overloaded and terminate\n          return;\n        } else if (normal &amp;&amp; !md.isOperator &amp;&amp; !md.isGetter &amp;&amp; !md.isSetter) {\n          methodDeclarations.add(md);\n        }\n      }\n    }\n  });\n\n  return methodDeclarations;\n}\n\nSet&lt;String&gt; getClassDeclarationMethodDeclarationNames(\n    ClassDeclaration cd, {public: true, private: false, getter: false,\n    setter: false, operator: false, normal: false}) {\n\n  var methodDeclarationNames = new Set&lt;String&gt;();\n\n  cd.members.forEach((d) {\n    if (d is MethodDeclaration) {\n      var md = d as MethodDeclaration;\n      var mName = md.name.name;\n      if ((Identifier.isPrivateName(mName) &amp;&amp; private) ||\n      (!Identifier.isPrivateName(mName) &amp;&amp; public)) {\n        if (md.isSetter &amp;&amp; setter) {\n          methodDeclarationNames.add(mName);\n        } else if (md.isGetter &amp;&amp; getter) {\n          methodDeclarationNames.add(mName);\n        } else if (md.isOperator &amp;&amp; operator) {\n          //to do warn if [] []= are already overloaded and terminate\n          return;\n        } else if (normal &amp;&amp; !md.isOperator &amp;&amp; !md.isGetter &amp;&amp; !md.isSetter) {\n          methodDeclarationNames.add(mName);\n        }\n      }\n    }\n  });\n\n  return methodDeclarationNames;\n\n}\n\nList&lt;FormalParameter&gt; getMethodFormalParameterDeclarations(MethodDeclaration md,\n                                                           {required: false, positional: false, named: false}) {\n  var formalParameters = new List&lt;FormalParameter&gt;();\n  md.parameters.parameters.forEach((fp) {\n    if ((fp.kind == ParameterKind.REQUIRED &amp;&amp; required) ||\n    (fp.kind == ParameterKind.POSITIONAL &amp;&amp; positional) ||\n    (fp.kind == ParameterKind.NAMED &amp;&amp; named)) {\n      formalParameters.add(fp);\n    }\n  });\n  return formalParameters;\n}\n</code></pre>\n\n<p>example:</p>\n\n<pre><code>class Model extends Object with DynamicAccess{\n  String _a;\n  String get a =&gt; _a;\n  set a(v)=&gt; _a=v;\n\n  String _b;\n  String get b =&gt; _b;\n  set b(v)=&gt; _b=v;\n\n  final int c=9;\n\n  String _z = 'xx';\n\n\n  dummyMethod(int a,int b){\n    return 6+a+b;\n  }\n\n  dummyNoParams(){\n    return 0;\n  }\n\n  dummyMethodWithPositionalParams(int a,String d,[int x=4,y=6]){\n    return '${a+x+y} $d';\n  }\n\n\n  dummyMethodWithNamedParams(int x,int y,{int f:4,String g:'no'}){\n    return '${x+y+f} $g';\n  }\n}\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>class Model extends Object with DynamicAccess {\n  String _a;\n  String get a =&gt; _a;\n  set a(v) =&gt; _a = v;\n\n  String _b;\n  String get b =&gt; _b;\n  set b(v) =&gt; _b = v;\n\n  final int c = 9;\n\n  String _z = 'xx';\n\n  dummyMethod(int a, int b) {\n    return 6 + a + b;\n  }\n\n  dummyNoParams() {\n    return 0;\n  }\n\n  dummyMethodWithPositionalParams(int a, String d, [int x = 4, y = 6]) {\n    return '${a+x+y} $d';\n  }\n\n  dummyMethodWithNamedParams(int x, int y, {int f: 4, String g: 'no'}) {\n    return '${x+y+f} $g';\n  }\n  operator [](String key) {\n    switch (key) {\n      case 'a':\n        return this.a;\n      case 'b':\n        return this.b;\n      case 'c':\n        return this.c;\n      default:\n        throw 'no getter or field called $key';\n    }\n  }\n  operator []=(String key, Object value) {\n    switch (key) {\n      case 'a':\n        this.a = value;\n        return;\n      case 'b':\n        this.b = value;\n        return;\n      case 'c':\n        throw 'field $key is read only';\n        return;\n      default:\n        throw 'no setter or field called $key';\n    }\n  }\n  call(String key, {List&lt;Object&gt; required: null, List&lt;Object&gt; positional: null,\n      Map&lt;String, Object&gt; named: null}) {\n    switch (key) {\n      case 'dummyMethod':\n        return this.dummyMethod(required[0], required[1]);\n      case 'dummyNoParams':\n        return this.dummyNoParams();\n      case 'dummyMethodWithPositionalParams':\n        return this.dummyMethodWithPositionalParams(required[0], required[1],\n            (positional == null || positional[0] == null) ? 4 : positional[0],\n            (positional == null || positional[1] == null) ? 6 : positional[1]);\n      case 'dummyMethodWithNamedParams':\n        return this.dummyMethodWithNamedParams(required[0], required[1],\n            f: (named == null || !named.containsKey('f')) ? 4 : named['f'],\n            g: (named == null || !named.containsKey('g')) ? 'no' : named['g']);\n      default:\n        throw 'no setter or field called $key';\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 2, "accepted_answer_id": 30506808, "answer_count": 2, "score": 2, "last_activity_date": 1432851417, "creation_date": 1432719480, "last_edit_date": 1432720257, "question_id": 30478610, "link": "https://stackoverflow.com/questions/30478610/generate-static-accessors-by-name", "title": "Generate static accessors by name", "body": "<p>Suppose i had this class:</p>\n\n<pre><code>abstract class DynamicallyAccessible{\n  operator [](String key){\n    throw 'DynamicallyAcessible [] operator is not implemented';\n  }\n\n  operator []=(String key,Object value){\n    throw 'DynamicallyAcessible []= operator is not implemented';\n  }\n\n  call(String methodName,List&lt;Object&gt; params){\n    throw 'DynamicallyAcessible call method is not implemented';\n  }\n}\n</code></pre>\n\n<p>and this class which extends the above:</p>\n\n<pre><code>class Model extends DynamicallyAccessible{\n\n  String _a;\n  String get a =&gt; _a;\n  set a(v)=&gt; _a=v;\n\n  String _b;\n  String get b =&gt; _b;\n  set b(v)=&gt; _b=v;\n\n  int c;\n\n\n  dummyMethod(int a,int b){\n    return 6+a+b;\n  }\n\n  //this is to be generated by the transformer\n  //calls a getter or returns a value field by name\n  operator [](String key){\n    switch (key){\n      case 'a':return a;\n      case 'b':return b;\n      case 'c':return c;\n      default:throw 'no getter or field called $key';\n    }\n  }\n\n  //calls a setter or sets a field by name\n  operator []=(String key,Object value){\n    switch (key){\n      case 'a':a=value;return;\n      case 'b':b=value;return;\n      case 'c':c=value;return;\n      default:throw 'no setter or field called $key';\n    }\n  }\n\n  //calls a method by name\n  call(String key,List&lt;Object&gt; params){\n    switch(key){\n      case 'dummyMethod':return dummyMethod(params[0],params[1]);\n      default : throw 'no method called $key';\n    }\n  }\n}\n</code></pre>\n\n<p>i implement the methods manually which is a waste of time, my question is does a transformer that does something similar exist or i have to write one from scratch, if not any suggestions to make this better?</p>\n\n<p>the reason is to avoid using mirrors with dart2js</p>\n"}, {"tags": ["session", "authentication", "dart"], "comments": [{"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 1, "creation_date": 1432676322, "post_id": 30466065, "comment_id": 49019296, "body": "There is a bug in shelf_route package, causing path to be set with tailing slash: <code>http:&#47;&#47;localhost:8080&#47;login&#47;</code>. Maintainer promises to fix it soon."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1432668909, "last_edit_date": 1432668909, "creation_date": 1432668550, "answer_id": 30467257, "question_id": 30466065, "link": "https://stackoverflow.com/questions/30466065/dart-language-authentication-and-session-control-shelf-auth/30467257#30467257", "title": "Dart Language: Authentication and session control (shelf_auth)", "body": "<p>I got it working with this client code</p>\n\n<pre><code>import \"dart:html\";\n\nvoid main() {\n  Map _queryParameters = {\"username\": \"fred\", \"password\": \"blah\"};\n  var _button = querySelector(\"#login_button\");\n  _button.onClick.listen((MouseEvent e) async {\n    e.preventDefault();\n    var requisition = new HttpRequest();\n    Uri uri = new Uri(\n        path: \"http://localhost:8080/login/\");\n    requisition.onLoadEnd.listen((_) {\n      print(requisition.response.toString());\n    });\n    HttpRequest request = await HttpRequest.postFormData(\n        \"http://localhost:8080/login/\", _queryParameters\n        //,withCredentials: true\n        );\n    print(request.response);\n  });\n}\n</code></pre>\n\n<p>The example server expects the credentials in the body instead of query parameters <strike>and I set <code>withCredentials: true</code> so authentication cookies are sent with the request</strike>. Worked without <code>withCredentials</code>.</p>\n"}], "owner": {"reputation": 356, "user_id": 3740892, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/e6CX2.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/3740892/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 2, "accepted_answer_id": 30467257, "answer_count": 1, "score": 0, "last_activity_date": 1432668909, "creation_date": 1432664535, "last_edit_date": 1495540690, "question_id": 30466065, "link": "https://stackoverflow.com/questions/30466065/dart-language-authentication-and-session-control-shelf-auth", "title": "Dart Language: Authentication and session control (shelf_auth)", "body": "<p>I'm developing a Dart application that will need authentication and session control. I'm trying shelf_auth to do that, but the examples doesn't seem to work or, more likely, I'm not implementing them the right way.</p>\n\n<p>In short, this is what I want to happen:</p>\n\n<ol>\n<li>An user opens the application on the browser.</li>\n<li>The user enters the login information (login and password), which are POSTED to the server.</li>\n<li>If the provided information is valid, the application generates a session code that is passed to the client and stored on the DB (server-side). This code will be sent with every transaction to the server-side.</li>\n</ol>\n\n<p>The package shelf_auth has some examples, but I don't know which one to follow. So my question is: <strong>how could I do that with shelf_auth?</strong> I'm not asking for anyone to code this for me, but just to point me to the right direction.</p>\n\n<p><strong>EDIT:</strong> The example that I was trying out was this: <a href=\"https://bitbucket.org/andersmholmgren/shelf_auth/src/2343d20310b8c8477cd89ab5ad017eb6e6b9f97b/example/example_with_login_and_jwt_session.dart?at=master\" rel=\"nofollow noreferrer\" title=\"example_with_login_and_jwt_session.dart\">example_with_login_and_jwt_session.dart</a>. Seems that it's lacking CORS headers (<a href=\"https://stackoverflow.com/questions/28374931/how-do-i-validate-an-established-session-using-the-shelf-auth-library\" title=\"this question\">this question</a> helped me fixing it) and, even providing valid information, it responds \"Unauthorized\".</p>\n\n<p>This is how I'm POSTING the information:</p>\n\n<pre><code>import \"dart:html\";\n\nvoid main() {\n    Map _queryParameters = {\n        \"username\": \"fred\",\n        \"password\": \"blah\"\n    };\n    var _button = querySelector(\"#login_button\");\n    _button.onClick.listen((MouseEvent e) {\n        e.preventDefault();\n        var requisition = new HttpRequest();\n        Uri uri = new Uri(path: \"http://localhost:8080/login\", queryParameters: _queryParameters);\n        requisition.open(\"POST\", uri.toString());\n        requisition.setRequestHeader(\"content-type\", \"application/x-www-form-urlencoded\");\n        requisition.onLoadEnd.listen((_) {\n            print(requisition.response.toString());\n        });\n        requisition.send();\n    });\n}\n</code></pre>\n"}, {"tags": ["dart", "dart-isolates"], "answers": [{"tags": [], "owner": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "is_accepted": true, "score": 16, "last_activity_date": 1432872515, "last_edit_date": 1432872515, "creation_date": 1432662210, "answer_id": 30465382, "question_id": 30465381, "link": "https://stackoverflow.com/questions/30465381/how-can-i-dynamically-construct-a-dart-script-for-spawnuri/30465382#30465382", "title": "How can I dynamically construct a Dart script for spawnUri?", "body": "<p>In Dart SDK 1.10, you can now create a data: URI from a String, and pass that data: URI to spawnUri.</p>\n\n<p>This means you can dynamically construct a string, at runtime, encode it, and dynamically load/run it. Neat!</p>\n\n<p>Here's an example.</p>\n\n<p>Your Dart script:</p>\n\n<pre><code>import 'dart:isolate';\n\nmain() {\n  var loadMe = '''\n\nmain() {\n  print('from isolate');\n}\n\n''';\n\n  var uri = Uri.parse('data:application/dart;charset=utf-8,${Uri.encodeComponent(loadMe)}');\n  print('loading $uri');\n\n  Isolate.spawnUri(uri, null, null);\n}\n</code></pre>\n\n<p>Notice the data: URI must be of the form:</p>\n\n<pre><code>data:application/dart;charset=utf-8,DATA\n</code></pre>\n\n<p>where <code>DATA</code> is URI percent encoded.</p>\n\n<p>Also, <code>utf-8</code> must be lower case.</p>\n"}], "owner": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 5, "accepted_answer_id": 30465382, "answer_count": 1, "score": 11, "last_activity_date": 1432872515, "creation_date": 1432662210, "question_id": 30465381, "link": "https://stackoverflow.com/questions/30465381/how-can-i-dynamically-construct-a-dart-script-for-spawnuri", "title": "How can I dynamically construct a Dart script for spawnUri?", "body": "<p>I want to dynamically construct and load a Dart script. How do I do this?</p>\n\n<p>I know I can use Isolate.spawnUri to dynamically load a Dart script. However, I'm only aware that I can load from file: and http: URIs. This means I need to put my script somewhere to be loaded, which is a complication I'd like to avoid.</p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "edited": false, "score": 1, "creation_date": 1432642966, "post_id": 30458141, "comment_id": 48997488, "body": "Thanks, the login-form is placed inside the main-apps but nested, main-app component -&gt; login-page-component -&gt; login-form"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "edited": false, "score": 1, "creation_date": 1432643028, "post_id": 30458141, "comment_id": 48997534, "body": "I see, then you would have to pass the <code>route</code> field to each child in the chain. The globals approach might be a better fit in this case. What you also can do is to fire an event on route change and interested components listen for this event and store the last received value passed with the event."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1432642108, "last_edit_date": 1495542758, "creation_date": 1432642108, "answer_id": 30458141, "question_id": 30458002, "link": "https://stackoverflow.com/questions/30458002/sharing-variables-between-components/30458141#30458141", "title": "Sharing variables between components", "body": "<p>Just create a binding from parent to child element:</p>\n\n<p>Add a field <code>route</code> to your <code>login-form</code></p>\n\n<pre><code>@CustomTag('login-form')\nclass LoginForm extends PolymerElement {\n  ...\n  String route;\n\n  LoginForm.created() : super.created();\n\n  void submit(Event event, Object detail, Node sender) {\n    // Form submit\n    // Access router here\n    // ie. router.go('home', {});\n  }\n}\n</code></pre>\n\n<p>I assume you have placed your <code>login-form</code> somewhere inside the <code>main-app</code>s template.</p>\n\n<pre><code>&lt;polymer-element name=\"main-app\"&gt;\n  &lt;template&gt;\n    ...\n    &lt;login-form route=\"{{route}}\"&gt;&lt;login-form&gt;\n    ...\n  &lt;/template&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>This should update the <code>route</code> field in <code>LoginForm</code> every time the <code>route</code> field changes in <code>MainApp</code>.</p>\n\n<p>If <code>login-form</code> isn't placed inside the <code>main-apps</code> <code>template</code> you can also use this approach <a href=\"https://stackoverflow.com/a/29864797/217408\">https://stackoverflow.com/a/29864797/217408</a></p>\n"}], "owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432642108, "creation_date": 1432641693, "question_id": 30458002, "link": "https://stackoverflow.com/questions/30458002/sharing-variables-between-components", "title": "Sharing variables between components", "body": "<p>I have a main app component that uses login_form component, when the login form is submitted, I want to redirect the page to home, using the router.</p>\n\n<p><strong>/main_app/main_app.dart</strong></p>\n\n<pre><code>@CustomTag('main-app')\nclass MainApp extends PolymerElement {\n  @observable String route;\n\n  final Router router = new Router();\n\n  MainApp.created() : super.created();\n\n  ready() {\n    print('Main App: ready()');\n\n    router.root\n      ..addRoute(name: 'home', path: '/', enter: showHome, defaultRoute: true)\n      ..addRoute(name: 'login', path: '/#!/login', enter: showLogin);\n\n    router.listen();\n  }\n\n  void showHome(RouteEvent event) {\n    print(\"Main App: showHome()\");\n\n    route = event.route.name;\n  }\n\n  void showLogin(RouteEvent event) {\n    print(\"Main App: showLogin()\");\n\n    route = event.route.name;\n  }\n}\n</code></pre>\n\n<p><strong>/login_form/login_form.dart</strong></p>\n\n<pre><code>@CustomTag('login-form')\nclass LoginForm extends PolymerElement {\n  @observable String username;\n  @observable String password;\n\n  LoginForm.created() : super.created();\n\n  void submit(Event event, Object detail, Node sender) {\n    // Form submit\n    // Access router here\n    // ie. router.go('home', {});\n  }\n}\n</code></pre>\n\n<p>I have found solutions such as using singleton like this</p>\n\n<pre><code>static final Router _sharedRouter = new Router();\nstatic Router get sharedRouter =&gt; _router;\n</code></pre>\n\n<p>then</p>\n\n<pre><code>MainApp.sharedRouter.go('home', {}}\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["security", "authentication", "websocket", "dart", "dart-html"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432636484, "post_id": 30456022, "comment_id": 48992691, "body": "I assume that this <a href=\"http://stackoverflow.com/questions/4361173\">stackoverflow.com/questions/4361173</a> applies equally to Dart."}, {"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432639808, "post_id": 30456022, "comment_id": 48995132, "body": "Shame on me. I thought this limitation relates to dart implementation, and didn&#39;t check javascript questions."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432639870, "post_id": 30456022, "comment_id": 48995178, "body": "No prob, learned something new myself while investigating :)"}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 3, "last_activity_date": 1450788106, "last_edit_date": 1450788106, "creation_date": 1432636765, "answer_id": 30456179, "question_id": 30456022, "link": "https://stackoverflow.com/questions/30456022/add-extra-headers-to-websocket-connection-from-browser-in-dart/30456179#30456179", "title": "Add extra headers to websocket connection from browser in Dart", "body": "<p>You will have to use cookies which are automatically sent by websocket as well but you can't customize the headers sent with a WebSocket request.</p>\n\n<p>You can also send and receive a session token in the payload. See <a href=\"https://devcenter.heroku.com/articles/websocket-security#authentication-authorization\" rel=\"nofollow\">https://devcenter.heroku.com/articles/websocket-security#authentication-authorization</a> for more detailed explanation.</p>\n"}], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2255, "favorite_count": 0, "accepted_answer_id": 30456179, "answer_count": 1, "score": 5, "last_activity_date": 1450788106, "creation_date": 1432636359, "last_edit_date": 1495540751, "question_id": 30456022, "link": "https://stackoverflow.com/questions/30456022/add-extra-headers-to-websocket-connection-from-browser-in-dart", "title": "Add extra headers to websocket connection from browser in Dart", "body": "<p>I'm trying to establish an authenticated websocket connection, and this question is a sibling to <a href=\"https://stackoverflow.com/questions/30411169/authenticate-websocket-connection-in-dart-using-shelf-auth-and-shelf-web-socket\">similar question for server part</a>.\nHow I can add extra headers when I establish a websocket connection from browser?</p>\n\n<p>I'm trying to use <code>dart:html</code>'s WebSocket object to connect to server requiring a header <code>authentication:</code> containing current authentication token (JWT) to authenticate user. The problem is WebSocket establishes connection immediately after constructor called, which doesn't have any parameter to send headers with http request:</p>\n\n<pre><code>var ws = new WebSocket('wss://localhost:8080/ws');\n</code></pre>\n\n<p>Right after that string, websocket connection is closed with an error, because my server denies all requests not containing authentication token in headers to that path.</p>\n\n<p>Is there any other implementations of websocket for browser side which allows to authenticate websocket connection?</p>\n\n<p>Is it possible at all to write different implementation of WebSocket for browser?</p>\n\n<p>I'm not a pro in security, but would it be safe to send a token in a path request instead of headers? Something like:</p>\n\n<pre><code>wss://localhost:8080/ws?token=BLAHBLAHBLAH\n</code></pre>\n"}, {"tags": ["dart", "dart-async"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432618573, "post_id": 30450135, "comment_id": 48981853, "body": "Why would you need/want a stream for this. Isn&#39;t this a one-time event?"}, {"owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432619406, "post_id": 30450135, "comment_id": 48982175, "body": "yes, is it better to pass a callback param?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432619547, "post_id": 30450135, "comment_id": 48982244, "body": "If it is a one-time action just return a <code>Future&lt;LoginResult&gt;</code> and consume it like <code>user.login(&#39;owner&#39;, &#39;1234&#39;).then((loginResult) { ... }</code>"}, {"owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432619550, "post_id": 30450135, "comment_id": 48982246, "body": "I was googling solutions for passing callbacks to a method, it always shows something related to stream/future."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432619605, "post_id": 30450135, "comment_id": 48982273, "body": "Yeah, <code>Future</code> is for one-time results and <code>Stream</code> is for a series of events."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432619803, "post_id": 30450135, "comment_id": 48982350, "body": "<a href=\"https://www.dartlang.org/docs/tutorials/futures/\" rel=\"nofollow noreferrer\">dartlang.org/docs/tutorials/futures</a>, <a href=\"https://www.dartlang.org/docs/tutorials/streams/\" rel=\"nofollow noreferrer\">dartlang.org/docs/tutorials/streams</a>"}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1432618502, "creation_date": 1432618502, "answer_id": 30450219, "question_id": 30450135, "link": "https://stackoverflow.com/questions/30450135/make-function-to-return-custom-stream/30450219#30450219", "title": "Make function to return custom stream", "body": "<p>Something like:</p>\n\n<pre><code>class LoginResult {\n  bool success = false;\n  String username;\n}\n\nStream&lt;LoginResult&gt; onLogin() async* {\n  while(...) {\n    yield new LoginResult()\n      ..success = isSuccess\n      ..userName = 'someUser';\n  }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>StreamController&lt;LoginResult&gt; onLoginController = new StreamController&lt;LoginResult&gt;();\n// might not be necessary if you only need one listener at most\nStream&lt;LoginResult&gt; _onLogin = onLoginController.stream.asBroadcastStream(); \nStream&lt;LoginResult&gt; get onLogin =&gt; _onLogin\n...\nonLoginController.add(new LoginResult()\n  ..success = isSuccess\n  ..userName = 'someUser');\n</code></pre>\n\n<p>Then you can use it like </p>\n"}], "owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 30450219, "answer_count": 1, "score": 1, "last_activity_date": 1432618502, "creation_date": 1432618024, "question_id": 30450135, "link": "https://stackoverflow.com/questions/30450135/make-function-to-return-custom-stream", "title": "Make function to return custom stream", "body": "<p>Is it possible to create a function that returns a custom stream and handles it like this?</p>\n\n<pre><code>user.logIn('owner', '1234')\n.listen(\n  success (Object user) {\n    print(user);\n  },\n  error: (Object user, Object error) {\n    print(error);\n  }\n);\n</code></pre>\n"}, {"tags": ["dart", "dart-polymer"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432633666, "post_id": 30439549, "comment_id": 48990751, "body": "Examine it under debug does mean what? (DartEditor debugger, Dartium devtools, Webstorm debugger, ...)"}], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1432668275, "post_id": 30455076, "comment_id": 49014828, "body": "Hi, I am use the Dart Editor. I put in a break point immediately after Map mup = new Map(). The &quot;bad state&quot; can be seen in the map structure."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1432669362, "post_id": 30455076, "comment_id": 49015428, "body": "Never heard or seen such a problem but it seems a problem with DartEditor not with Polymer. DartEditor is discontinued btw."}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1432715594, "post_id": 30455076, "comment_id": 49033518, "body": "Oh!!  But I can still download it here - <a href=\"https://www.dartlang.org/tools/editor/\" rel=\"nofollow noreferrer\">dartlang.org/tools/editor</a>.  What would replace it? What do you use?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1432715852, "post_id": 30455076, "comment_id": 49033690, "body": "The next Dart version will not include DartEditor anymore. WebStorm is the recommended replacement and I use it as well. But you can use Sublime, Eclipse, Vim, ... I think IntelliJ (similar to WebStorm) provides a community edition (lacks proper debugging support AFAIK, as does Sublime). Dart Eclipse plugin has some issues on Windows (with symlinks) where a fix is work-in-progress (getting rid of symlinks entirely)."}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 1, "creation_date": 1432832740, "post_id": 30455076, "comment_id": 49100928, "body": "Thank you Gunter. Most helpful, as usual!"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1432633686, "creation_date": 1432633686, "answer_id": 30455076, "question_id": 30439549, "link": "https://stackoverflow.com/questions/30439549/dart-in-a-new-map-using-polymer-why-do-i-get-too-many-elements/30455076#30455076", "title": "Dart. In a new MAP, using polymer, why do I get &quot;too many elements&quot;?", "body": "<p>Looks like a bug in the tool you are using.</p>\n"}], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432633686, "creation_date": 1432560489, "last_edit_date": 1432633636, "question_id": 30439549, "link": "https://stackoverflow.com/questions/30439549/dart-in-a-new-map-using-polymer-why-do-i-get-too-many-elements", "title": "Dart. In a new MAP, using polymer, why do I get &quot;too many elements&quot;?", "body": "<p>In Dart, I create a new map, and examine it under debug. In a Dart console app, there is no problem.</p>\n\n<p>In a newly-created polymer app and examine it under debug, I get the following subtree:</p>\n\n<pre><code>&gt;mymap                               {}\n   &gt;_data\n   &gt;_index\n     &gt;_buffer\n     &gt;_iterator\n     &gt;_reversed\n     &gt;_runtimetype\n     &gt;_single                        Bad State: Too many elements [id=114]\n</code></pre>\n\n<p>Should I be worried about it; is it safe to ignore it?</p>\n\n<p>cheers</p>\n\n<p>Steve</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432549136, "post_id": 30435093, "comment_id": 48955316, "body": "Return a <code>Future</code>, wait for it to complete and then use <code>Timer</code> to delay the call."}], "answers": [{"comments": [{"owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1432613425, "post_id": 30436186, "comment_id": 48980134, "body": "But this will only run myFunction once."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1432613516, "post_id": 30436186, "comment_id": 48980157, "body": "Just add it at the end of your function and make it call itself with a delay. You need to wait for the returned future to complete before it starts itself again. I added <code>await</code> in my answer, you also need to mark your function with <code>async</code> to make this work."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1432617425, "last_edit_date": 1432617425, "creation_date": 1432549563, "answer_id": 30436186, "question_id": 30435093, "link": "https://stackoverflow.com/questions/30435093/dart-repeating-a-function-after-it-ends/30436186#30436186", "title": "Dart repeating a function after it ends", "body": "<pre><code>Future myFunction() async {\n  await downloader.download();\n  await new Future.delayed(const Duration(milliseconds:200),  myFunction);\n}\n</code></pre>\n\n<p>or to avoid stack overflows which will happen when above code runs too long</p>\n\n<pre><code>Future myFunction() async {\n  while(true) {\n    await downloader.download();\n    await new Future.delayed(const Duration(minutes:1), (){});\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432629388, "post_id": 30453185, "comment_id": 48987843, "body": "Is there any advantage/disadvantage using <code>Future.delayed</code> vs. <code>new Timer()</code> Isn&#39;t there a danger of running into a stack overflow as mentioned in my answer when <code>loop</code> calls itself even when it&#39;s async? I assume there isn&#39;t but I think I saw this mentioned recently in a bug report which made me unsure. If it&#39;s <code>async</code> the method returns immediately anyway."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432636461, "post_id": 30453185, "comment_id": 48992675, "body": "There is a risk in creating a loop through (effectively) a tail-recursive call, whether async or not. If it&#39;s not async, you get a stack overflow. If it is async, you will last longer, but will eventually fill the heap with futures waiting for each other. With async/await syntax, it&#39;s an open question whether it can become a stack overflow anyway - that depends entirely on the implementation. To break the dependency chain, you have ensure that your futures don&#39;t  depend on each other linearly. The loop version does that - it deconstructs the futures created inside before creating a new one."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432636621, "post_id": 30453185, "comment_id": 48992784, "body": "About <code>Future.delayed</code> and <code>new Timer</code> - I don&#39;t think there is any difference in practice. The problem comes when the function called by <code>Future.delayed</code> is recursive (asynchronously) because then each call creates a new <code>Future</code> which won&#39;t ever be completed. If you await a <code>Future.delayed</code> with no function at the end, then that future is completed and can be GCed - then you can loop in a non-Future based way and not accumulate uncompleted futures."}], "tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": false, "score": 2, "last_activity_date": 1432629157, "last_edit_date": 1432629157, "creation_date": 1432628426, "answer_id": 30453185, "question_id": 30435093, "link": "https://stackoverflow.com/questions/30435093/dart-repeating-a-function-after-it-ends/30453185#30453185", "title": "Dart repeating a function after it ends", "body": "<p>\nTo repeat a function after a short delay after it's done, you:</p>\n\n<ul>\n<li>need to know when it's done,</li>\n<li>need to know when a short delay has passed,</li>\n<li>and needs to call the function again.</li>\n</ul>\n\n<p>I'll create a separate function to do the calling and re-calling, because it gives a better separation of concerns.\nFor the first point, I'll assume the function returns a Future when it's done. Then there are lots of different ways to wait a short delay, I'll just use the most basic one, <code>new Timer</code>, and then repeat the process by calling the function again.</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Future myFunction() {\n  // do long operation in background, complete returned future when done.\n}\n\nvoid repeatMyFunction() {\n  myFunction().then((_) {\n    // using .then instead of .whenComplete, so we stop in\n    // case of an error.\n    new Timer(const Duration(millseconds: shortDelay), repeatMyFunction);\n  });\n}\n</code></pre>\n\n<p>If want to get the error back, you can create a new future:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Future repeatMyFunction() {\n  Completer completer = new Completer();\n  void loop() {\n    myFunction().then((_) {\n      // using .then instead of .whenComplete, so we stop in\n      // case of an error.\n      new Timer(const Duration(millseconds: shortDelay), loop);\n    }, onError: completer.completeError);\n  }\n  loop();\n  return completer.future;\n}\n</code></pre>\n\n<p>If you allow multiple errors, and don't want to stop for one, you can return the errors as a stream, and, heck, add the function results as values just for good measure:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Stream repeatMyFunction() {\n  StreamController controller = new StreamController();\n  void loop() {\n    myFunction().then(controller.add, onError: controller.addError)\n                .whenComplete(() {\n      new Timer(const Duration(millseconds: shortDelay), loop);\n  }\n  loop();\n  return controller.stream;\n}\n</code></pre>\n\n<p>None of these ways to repeat has a way to stop it again. For that, I'd pass an extra future to the repeat function and stop when that future completes.it</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>void repeatMyFunction(Future stop) {\n  bool stopFlag = false;\n  stop.whenComplete(() { stopFlag = true; });\n  void loop() {\n    myFunction().then((_) {\n      if (!stopFlag) {\n        new Timer(const Duration(millseconds: shortDelay), loop);\n      }\n    });\n  }\n  loop();\n}\n</code></pre>\n\n<p>The other variants can also get a stop-future, and complete the future/close the stream when the stop-future completes.</p>\n\n<p>G\u00fcnter's suggestions are also fine, and much simpler (but with less fine-grained control, which is something I like to have). You can turn his code it into a stream using:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Stream repeatMyFunction() async* {\n  while (true) {  // Stops if something throws.\n    yield await myFunction(); \n    await new Future.delayed(const Duration(milliseconds: shortDelay));\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 3, "answer_count": 2, "score": 1, "last_activity_date": 1432629157, "creation_date": 1432546044, "last_edit_date": 1432616431, "question_id": 30435093, "link": "https://stackoverflow.com/questions/30435093/dart-repeating-a-function-after-it-ends", "title": "Dart repeating a function after it ends", "body": "<p>I have a long running function that does some background processing. </p>\n\n<p>When the function completes I would like to repeat after a short delay. </p>\n\n<p>What is the best way to do this?</p>\n\n<p>I ended up with this messy code</p>\n\n<pre><code>  bool busy = false;\n  new Timer.periodic(const Duration(minutes:1) , (_)async {\n\n    if( !busy){\n      busy = true;\n      await downloader.download();\n      busy = false;\n    }    \n  });\n</code></pre>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432549201, "post_id": 30434880, "comment_id": 48955359, "body": "It says that the callback will be called periodically no matter what state the previous is in."}], "answers": [{"comments": [{"owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1432764763, "post_id": 30468744, "comment_id": 49065697, "body": "It is the work &#39;Could&#39; that is the issue. So on different systems it will have different behaviours which is very confusing."}, {"owner": {"reputation": 32377, "user_id": 25124, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4aec6b9ca532bc29a9c23e5147efa2fa?s=128&d=identicon&r=PG", "display_name": "Danny Tuppeny", "link": "https://stackoverflow.com/users/25124/danny-tuppeny"}, "reply_to_user": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1432796668, "post_id": 30468744, "comment_id": 49075330, "body": "That&#39;s correct. The exact details are left to the implementation, though &quot;No more than n callbacks will be made in duration * n time&quot;. It should be fine for most things (eg. poll this approx every x minutes), but isn&#39;t intended as an accurate timer."}, {"owner": {"reputation": 2880, "user_id": 2016196, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/i87B4.png?s=128&g=1", "display_name": "JVE999", "link": "https://stackoverflow.com/users/2016196/jve999"}, "edited": false, "score": 0, "creation_date": 1593638284, "post_id": 30468744, "comment_id": 110854744, "body": "Based on what the documentation says, in cases where higher than typical accuracy is desired, it may be helpful to encase the code run in the callback in an <code>async</code> lambda, i.e., <code>Timer.periodic(duration,(){ ()async{ code_to_run; }() });</code> Although it may still be inaccurate, as the documentation only gives an example and not necessarily every case of inaccuracy."}], "tags": [], "owner": {"reputation": 32377, "user_id": 25124, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4aec6b9ca532bc29a9c23e5147efa2fa?s=128&d=identicon&r=PG", "display_name": "Danny Tuppeny", "link": "https://stackoverflow.com/users/25124/danny-tuppeny"}, "is_accepted": false, "score": 1, "last_activity_date": 1432673813, "creation_date": 1432673813, "answer_id": 30468744, "question_id": 30434880, "link": "https://stackoverflow.com/questions/30434880/dart-timer-periodic-documentation-is-confusing/30468744#30468744", "title": "dart timer periodic documentation is confusing", "body": "<p>Let's say you set a timer to run every 30 seconds. If the second time the callback is called it takes 10 seconds to complete, the third call to the callback could be:</p>\n\n<ul>\n<li>30 seconds after the second call started</li>\n<li>30 seconds after the second call ended (which is 40s after the second call started, since it took 10 secs)</li>\n<li>30 seconds after the second call was scheduled to run (which based on the above, could have been delayed, eg. by the duration of the first call)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 3166024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ff3f2ac01af11300f89ff439354c9e?s=128&d=identicon&r=PG&f=1", "display_name": "user3166024", "link": "https://stackoverflow.com/users/3166024/user3166024"}, "is_accepted": false, "score": 0, "last_activity_date": 1611241028, "creation_date": 1611241028, "answer_id": 65830024, "question_id": 30434880, "link": "https://stackoverflow.com/questions/30434880/dart-timer-periodic-documentation-is-confusing/65830024#65830024", "title": "dart timer periodic documentation is confusing", "body": "<p>Timer's duration is delay. Timer.periodic's duration is period.</p>\n"}], "owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1611241028, "creation_date": 1432545311, "question_id": 30434880, "link": "https://stackoverflow.com/questions/30434880/dart-timer-periodic-documentation-is-confusing", "title": "dart timer periodic documentation is confusing", "body": "<p>I have a long running task and I would like to schedule a new run a fixed interval after the run ends and I found this.  What does the following mean? In particular the last paragraph. </p>\n\n<blockquote>\n  <p>Timer.periodic(Duration duration, Function void callback(Timer timer))</p>\n  \n  <p>Creates a new repeating timer.</p>\n  \n  <p>The callback is invoked repeatedly with duration intervals until\n  canceled with the cancel function.</p>\n  \n  <p>The exact timing depends on the underlying timer implementation. No\n  more than n callbacks will be made in duration * n time, but the time\n  between two consecutive callbacks can be shorter and longer than\n  duration.</p>\n  \n  <p>In particular, an implementation may schedule the next callback, e.g.,\n  a duration after either when the previous callback ended, when the\n  previous callback started, or when the previous callback was scheduled\n  for - even if the actual callback was delayed.</p>\n</blockquote>\n"}, {"tags": ["http", "http-headers", "dart"], "comments": [{"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1432542219, "post_id": 30432171, "comment_id": 48951696, "body": "I&#39;m starting to think the best way is to create a regexp matching all keys and one matching all values. Then create the map out of two lists."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1432542366, "post_id": 30432171, "comment_id": 48951767, "body": "This regexp takes the keys <code>&#47;.+?(?=\\: )&#47;g</code> excluding the &quot;: &quot; For some reason the same thing does not work for the values <code>&#47;(?=\\: ).*&#47;g</code> does anybody know why?"}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432549284, "post_id": 30432171, "comment_id": 48955415, "body": "This method is marked <code>unstable</code> so you probably shouldn&#39;t rely on it."}], "answers": [{"tags": [], "owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "is_accepted": true, "score": 1, "last_activity_date": 1432549369, "creation_date": 1432549369, "answer_id": 30436123, "question_id": 30432171, "link": "https://stackoverflow.com/questions/30432171/convert-httpheader-to-map/30436123#30436123", "title": "convert HttpHeader to Map", "body": "<p>The method <code>getAllResponseHeaders()</code> is unstable so you shouldn't rely on it/shouldn't be using it.</p>\n\n<p>If you need a Map format you can use the <a href=\"https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:html.HttpRequest#id_responseHeaders\" rel=\"nofollow\"><code>responseHeaders</code></a> getter from <code>HttpRequest</code>.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3567, "favorite_count": 0, "accepted_answer_id": 30436123, "answer_count": 1, "score": 2, "last_activity_date": 1432549369, "creation_date": 1432534151, "question_id": 30432171, "link": "https://stackoverflow.com/questions/30432171/convert-httpheader-to-map", "title": "convert HttpHeader to Map", "body": "<p>When using dart on the browser (no dart:io) is there a ready to use way, to convert the string returned by <code>req.getAllResponseHeaders()</code>, where req is a <code>HttpRequest</code>, into a dart Map. I was a bit surprised by the fact that there is no ready method here, since all http related functions seem to use the headers in a Map format.</p>\n\n<p>Also if there really are no ready methods, how would you approach converting a header returned by the <code>.getAllResponseHeaders()</code>?</p>\n\n<pre><code>date: Mon, 25 May 2015 06:03:29 GMT\nx-content-type-options: nosniff\nserver: dart:io with Shelf\nauthorization: ShelfAuthJwtSession eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE0MzI1MzM4MDgsImV4cCI6MTQzMjUzNTYwOCwiaXNzIjoic3VwZXIgYXBwIiwic3ViIjoiZnJlZCIsImF1ZCI6W251bGxdLCJzaWQiOiJjM2E0Y2IzMC1lY2EwLTExZTQtZmNiYS0xM2YwNjgwYTQxMDQiLCJ0c2UiOjE0MzI2MjAyMDh9.AB0TCJPcioCtBA-qzO1QSLuH7HUxHCbDZTUVANp5Dbo\nx-frame-options: SAMEORIGIN\naccess-control-allow-methods: GET, POST, OPTIONS\ncontent-type: text/plain; charset=utf-8\naccess-control-allow-origin: *\naccess-control-expose-headers: Authorization\naccess-control-allow-credentials: true\ntransfer-encoding: chunked\nx-xss-protection: 1; mode=block\n</code></pre>\n\n<p>into a map.</p>\n"}, {"tags": ["templates", "dom", "dart", "polymer", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432455042, "post_id": 30417791, "comment_id": 48928422, "body": "<code>$[&#39;page_template&#39;]</code> returns correct value in <code>MyApp.created()</code>, I said that <code>$[&#39;page_template&#39;].shadowRoot</code> returns <code>null</code>. I&#39;ve tried to setup callback in ready() and in domReady(), but still see no output in console"}, {"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432455546, "post_id": 30417791, "comment_id": 48928536, "body": "I wrote comment for first time and hit enter too early, sorry. Can you explain when to use <code>MyApp.created()</code>, when <code>ready()</code> and when <code>domReady()</code>?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432455940, "post_id": 30417791, "comment_id": 48928641, "body": "Normally you don&#39;t use <code>created</code> at all. It just has to exist so an instance can be created by the Polymer runtime. You can do some variable initialization or similar but don&#39;t use it to access the DOM. I don&#39;t remember the difference between ready and domReady. The Polymer.js site has a paragraph about these lifecycle methods. <code>ready</code> usually works therefore I never cared about the difference."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432456317, "post_id": 30417791, "comment_id": 48928753, "body": "It seems template-bound is only fired by the auto-binding template <a href=\"http://stackoverflow.com/questions/28467712/what-is-template-bound-in-polymer\" title=\"what is template bound in polymer\">stackoverflow.com/questions/28467712/&hellip;</a>. Why don&#39;t you just add the event handler declaratively instead of imperatively?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432458268, "post_id": 30417791, "comment_id": 48929187, "body": "From the code in your question it seems you want to listen to an event from the <code>page</code> element. You can do that declaratively like <code>&lt;my-page id=&quot;page&quot; on-some-event=&quot;{{myEventHandler}}&gt;&lt;&#47;my-page&gt;</code> (where <code>some-event</code> is the event you want to listen to)"}, {"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432459951, "post_id": 30417791, "comment_id": 48929632, "body": "Ahh I got it. Setting up event handler was only for example, I have much more things to initilize after template instantiated, there is more DOM elements inside that conditional template."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 1, "creation_date": 1432460172, "post_id": 30417791, "comment_id": 48929703, "body": "You could just add a custom element inside the template only for this purpose which fires an event on <code>ready</code> or maybe in <code>attached</code> (after <code>super.attached()</code>)"}, {"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432462048, "post_id": 30417791, "comment_id": 48930160, "body": "I thought about that, but afraid if one fire ready when it&#39;s siblings are not yet?  Anyway, it looks too much overcomplicated for task that initially looks simple."}, {"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 1, "creation_date": 1432462305, "post_id": 30417791, "comment_id": 48930224, "body": "Most clean solution I see for now would be to wrap all contents of template inside single custom element (like in simplified example I provided), which will have its ready function run just for that, like you  said :)"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432462505, "post_id": 30417791, "comment_id": 48930273, "body": "Sounds good. I&#39;m not sure if <code>ready</code> fires only the first time or every time <code>authenticated</code> becomes true but I assume it does. Otherwise you can try <code>attached</code>."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1432416605, "creation_date": 1432416605, "answer_id": 30417791, "question_id": 30417675, "link": "https://stackoverflow.com/questions/30417675/how-to-set-callback-when-template-if-is-finally-instantiated-into-dom-in/30417791#30417791", "title": "How to set callback when &lt;template if=&#39;...&#39;&gt; is finally instantiated into DOM in Dart Polymer", "body": "<p>I haven't needed the <code>template-bound</code> event myself yet, but it should be the right approach. If <code>$['page_template']</code> returns <code>null</code> this code might be in the wrong place. <code>MyApp.created()</code> is the wrong place for most code, especially wrong for everything that is Polymer related. If you override the <code>ready()</code> method and put your code there it should work.</p>\n"}, {"comments": [{"owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "edited": false, "score": 0, "creation_date": 1432673608, "post_id": 30467620, "comment_id": 49017964, "body": "That one works, thanks! I&#39;m marking this answer as accepted but during conversation with G&#252;nter Z&#246;chbauer I found this way is going to unclear and overcomplicated application design. It&#39;s better to wrap all contents of conditional template to new element and then declaratively link it with other ones in my case."}], "tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": true, "score": 1, "last_activity_date": 1432669775, "creation_date": 1432669775, "answer_id": 30467620, "question_id": 30417675, "link": "https://stackoverflow.com/questions/30417675/how-to-set-callback-when-template-if-is-finally-instantiated-into-dom-in/30467620#30467620", "title": "How to set callback when &lt;template if=&#39;...&#39;&gt; is finally instantiated into DOM in Dart Polymer", "body": "<p>You could use a mutation observer on your shadow root to do this, add something like the following in your <code>ready</code> method:</p>\n\n<pre><code>new MutationObserver((changes, _) {\n    print(changes.any((record) =&gt; record.addedNodes.any(\n        (node) =&gt; node is Element &amp;&amp; node.id == 'page')));\n})..observe(this.shadowRoot, childList: true);\n</code></pre>\n\n<p>This will print <code>true</code> any time the page is added. The efficiency of this will clearly vary based on how often your shadow dom is changing. Wrap the template in another node and listen on that if you want to get only the local changes.</p>\n"}], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 30467620, "answer_count": 2, "score": 2, "last_activity_date": 1432669775, "creation_date": 1432415692, "question_id": 30417675, "link": "https://stackoverflow.com/questions/30417675/how-to-set-callback-when-template-if-is-finally-instantiated-into-dom-in", "title": "How to set callback when &lt;template if=&#39;...&#39;&gt; is finally instantiated into DOM in Dart Polymer", "body": "<p>I have element like that:</p>\n\n<pre><code>&lt;polymer-element name=\"my-app\"&gt;\n  &lt;template&gt;\n    &lt;template id=\"page_template\" if=\"{{authenticated}}\"&gt;\n      &lt;my-page id=\"page\"&gt;&lt;/my-page&gt;\n    &lt;/template&gt;\n  &lt;/template&gt;\n  &lt;script src=\"...\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>I need to perform some initialization when template with id==\"page_template\" will be actually instanced into DOM.</p>\n\n<p>I've tried to make something like that:</p>\n\n<pre><code>authenticatedChange(_) {\n  if(authenticated)\n    shadowRoot.querySelector('#page').addEventListener(...);\n}\n</code></pre>\n\n<p>But got this:</p>\n\n<pre><code>Exception: The null object does not have a method 'addEventListener'\n</code></pre>\n\n<p>Looks like 'page' just doesn't exists yet.\nThen I tried to put creation event to the end of event-loop:</p>\n\n<pre><code>authenticatedChange(_) {\n  if(authenticated)\n    Timer.run(()=&gt;shadowRoot.querySelector('#page').addEventListener(...));\n}\n</code></pre>\n\n<p>This works, but I doubt it is a good style, because there is no guarantee it will actually be created to that step (it's completely implementation-dependent), because no explicit dependency like a Future or callback wasn't binded to event when template is instantiated.</p>\n\n<p>So the question is, does such event exist? All I found was 'template-bound', but this code</p>\n\n<pre><code>$['page_template'].on['template-bound'].listen((_)=&gt;print(\"template-bound!\"));\n</code></pre>\n\n<p>being executed in MyApp.created(), generates silence in console.</p>\n\n<p>How to bind my code to instantiate/deinstantiate events?</p>\n\n<pre><code>onMutation($['page_template']).asStream().listen((_)=&gt;print(\"mutated.\"));\n</code></pre>\n\n<p>Also didn't work for me.</p>\n\n<p><code>$['page_template'].shadowRoot</code> is <code>null</code>, so I can't bind to it's mutation at all.</p>\n"}, {"tags": ["session", "curl", "dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432400054, "post_id": 30415253, "comment_id": 48916487, "body": "Do you get an error message? I can&#39;t see one from the screenshot. What should the screenshot tell me? I think you also need to allow the request types <code>OPTIONS</code> and <code>POST</code> in addition to <code>Origin</code> if you want to support CORS requests."}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 1, "creation_date": 1432401252, "post_id": 30415253, "comment_id": 48916890, "body": "Try to change the action to &quot;login&quot;, &quot;/login&quot; or &quot;<a href=\"http://localhost:8080/login\" rel=\"nofollow noreferrer\">localhost:8080/login</a>&quot;."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1432401408, "post_id": 30415253, "comment_id": 48916948, "body": "You probably want do a HttpRequest instead posting a form because posting the form leads to a page reload which is usually not what you want in a single page Dart application."}, {"owner": {"reputation": 1022, "user_id": 1368752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cab03b4f3aa1fc464eb969acb1f4a4f?s=128&d=identicon&r=PG", "display_name": "dafyk", "link": "https://stackoverflow.com/users/1368752/dafyk"}, "edited": false, "score": 1, "creation_date": 1432401655, "post_id": 30415253, "comment_id": 48917049, "body": "Chrome developer console -&gt; netowrk tab, right click POST request and select &quot;Copy as cURL&quot; maybe you spot the difference there, if not post it here its probably better than screenshot"}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432402030, "post_id": 30415253, "comment_id": 48917169, "body": "Thanks, @Robert the &quot;/login&quot; solution works. If you want to you can add it as an answer and I will accept it."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432493295, "post_id": 30415253, "comment_id": 48939091, "body": "@G&#252;nterZ&#246;chbauer could you please take a look at the newest edit. It is relevant to your comment."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432494076, "post_id": 30415253, "comment_id": 48939342, "body": "Looks good............"}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432495347, "post_id": 30415253, "comment_id": 48939789, "body": "@G&#252;nterZ&#246;chbauer The problem is it does not work. The authenticator <code>shelf_auth</code> only handles <code>application&#47;x-www-form-urlencoded</code> POSTed data. So I can&#39;t effortlessly make a few changes on the server side and get this to work. I need to enforce <code>application&#47;x-www-form-urlencoded</code> on the client and can&#39;t find a way to do so."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432497077, "post_id": 30415253, "comment_id": 48940303, "body": "@G&#252;nterZ&#246;chbauer I&#39;m almost there, it works for data not from the form. If you could tell me how to obtain the data from a form as a Map, then I could post a complete solution."}], "answers": [{"tags": [], "owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "is_accepted": true, "score": 3, "last_activity_date": 1432450538, "creation_date": 1432450538, "answer_id": 30420883, "question_id": 30415253, "link": "https://stackoverflow.com/questions/30415253/different-server-behavior-from-curl-and-browser/30420883#30420883", "title": "Different server behavior from CURL and browser", "body": "<p>You URL in the <code>action</code> attribute is relative that means it is appended to the current hostname. Thus change it to a absolute URL by adding <code>http://</code> to it or changing it to <code>/login</code> if you're already on <code>localhost:8080</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432535494, "post_id": 30428022, "comment_id": 48948922, "body": "it looks fine. Maybe you can use <code>form.querySelector()</code> to get the inputs."}], "tags": [], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "is_accepted": false, "score": 1, "last_activity_date": 1432499405, "creation_date": 1432499405, "answer_id": 30428022, "question_id": 30415253, "link": "https://stackoverflow.com/questions/30415253/different-server-behavior-from-curl-and-browser/30428022#30428022", "title": "Different server behavior from CURL and browser", "body": "<p>This answer relates to the second part of the question (see the EDIT). I could not find a ready sample code anywhere in the documentation. That's why I add the working code below as an answer. If you find a more elegant way to get the data from the form please write a comment under this post.</p>\n\n<p>HTML part</p>\n\n<pre><code>  &lt;form id=\"login_form\" action=\"/login\" method=\"POST\" enctype=\"application/x-www-form-urlencoded\"&gt;\n    &lt;input type=\"text\" name=\"username\" placeholder=\"Username\"&gt;\n    &lt;input type=\"text\" name=\"password\" placeholder=\"Password\"&gt;\n    &lt;input type=\"submit\" id=\"sign_in\" value=\"Sign In\"&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>The dart code\nsubscribe to event</p>\n\n<pre><code>login_form = querySelector('#login_form');\nlogin_form.onSubmit.listen(submitLogin);\n</code></pre>\n\n<p>event handler</p>\n\n<pre><code>/* Login code */\nvoid submitLogin(Event e){\n  e.preventDefault();\n\n  FormElement form = e.target as FormElement;\n  print('inside of submitLogin');\n\n  Uri loginUri = new Uri(scheme: 'http',\n      host: 'localhost',\n      port: 8080,\n      path: 'login');\n  InputElement username = querySelector('[name=\"username\"]');\n  InputElement password = querySelector('[name=\"password\"]');\n  Map dataFromForm = {'username':username.value.toString(),'password':password.value.toString()};\n  print(loginUri);\n  HttpRequest.postFormData(loginUri.toString(), dataFromForm)\n  .then(onDataLoaded);\n}\n\nvoid onDataLoaded(HttpRequest req){\n  String response = req.responseText;\n  print(response);\n  //TODO: do visual\n</code></pre>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 1, "accepted_answer_id": 30420883, "answer_count": 2, "score": 2, "last_activity_date": 1432499405, "creation_date": 1432399908, "last_edit_date": 1432493190, "question_id": 30415253, "link": "https://stackoverflow.com/questions/30415253/different-server-behavior-from-curl-and-browser", "title": "Different server behavior from CURL and browser", "body": "<p>My server behaves differently when I do a login request with CURL and from the browser.</p>\n\n<p>When doing the following curl request:</p>\n\n<pre><code> curl -i -X POST 'http://localhost:8080/login' -d 'username=fred&amp;password=blah' -H 'content-type: application/x-www-form-urlencoded'\n</code></pre>\n\n<p>I get the expected result in form of:\n<img src=\"https://i.stack.imgur.com/fUvCv.png\" alt=\"response from curl request\"></p>\n\n<p>However when doing the same (or so I think) request from a browser form I see the following result in the browser debugger</p>\n\n<p><img src=\"https://i.stack.imgur.com/mwqBf.png\" alt=\"canceled request\">\n<img src=\"https://i.stack.imgur.com/dSs2y.png\" alt=\"canceled request details\"></p>\n\n<p>The code of the form used to make the request looks as follows</p>\n\n<pre><code>        &lt;form action=\"localhost:8080/login\" method=\"POST\"&gt;\n          &lt;input type=\"text\" name=\"username\" placeholder=\"Username\"&gt;\n          &lt;input type=\"text\" name=\"password\" placeholder=\"Password\"&gt;\n          &lt;input type=\"submit\" id=\"sign_in\" value=\"Sign In\"&gt;\n        &lt;/form&gt;\n</code></pre>\n\n<p>I don't think this is a problem with the Origin of the request since I set <code>Access-Controll-Allow-Origin': *</code>.</p>\n\n<p>The entire code of the server can be found <a href=\"https://github.com/LukaszTrojanowski/linkShepherdServer\" rel=\"nofollow noreferrer\">here</a>. The code of the client <a href=\"https://github.com/LukaszTrojanowski/linkShepherdClient\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I'am out of ideas. What could cause this problem?</p>\n\n<p>Edit: As suggested by  @G\u00fcnter Z\u00f6chbauer in the comments below it is often necessary to do this sort of form submission via an HttpRequest. I wanted to add a answer with a ready solution to do so, and walked straight into another problem.\nThe relevant html:</p>\n\n<pre><code>  &lt;form id=\"login_form\" action=\"/login\" method=\"POST\" enctype=\"application/x-www-form-urlencoded\"&gt;\n    &lt;input type=\"text\" name=\"username\" placeholder=\"Username\"&gt;\n    &lt;input type=\"text\" name=\"password\" placeholder=\"Password\"&gt;\n    &lt;input type=\"submit\" id=\"sign_in\" value=\"Sign In\" on-click=\"{{submitLogin}}\"&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>The relevant dart code:</p>\n\n<pre><code>  /* Login box */\n  login_form = querySelector('#login_form');\n  login_form.onSubmit.listen(submitLogin);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>/* Login code */\nvoid submitLogin(Event e){\n  e.preventDefault();\n\n  FormElement form = e.target as FormElement;\n  print('inside of submitLogin');\n\n  Uri loginUri = new Uri(scheme: 'http',\n      host: 'localhost',\n      port: 8080,\n      path: 'login');\n\n  print(loginUri);\n  var request = new HttpRequest();\n  request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n  request.request(\n      loginUri.toString(),\n      method: form.method,\n      sendData: new FormData(form)\n  ).then(onDataLoaded);\n}\n\nvoid onDataLoaded(HttpRequest req){\n  String response = req.responseText;\n  print(response);\n  //TODO: do visual confiramtion of login\n}\n</code></pre>\n\n<p>When comapring the CURL's from the original request (which worked) and the one done by the code above I noticed that the <code>Content-Type</code> is different.\nI tried to enforce the content type every way I knew but it keeps comming up like.</p>\n\n<pre><code>curl \"http://localhost:8080/login\" -H \"Origin: http://localhost:8080\" -H \"Accept-Encoding: gzip, deflate\" -H \"Accept-Language: pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.0 (Dart) Safari/537.36\" -H \"Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryZ1seZo8pq0PZt3Fg\" -H \"Accept: */*\" -H \"Referer: http://localhost:8080/\" -H \"Connection: keep-alive\" --data-binary \"------WebKitFormBoundaryZ1seZo8pq0PZt3Fg\"^\n\"Content-Disposition: form-data; name=\"\"username\"\"\"^\n\n\"fred\"^\n\"------WebKitFormBoundaryZ1seZo8pq0PZt3Fg\"^\n\"Content-Disposition: form-data; name=\"\"password\"\"\"^\n\n\"blah\"^\n\"------WebKitFormBoundaryZ1seZo8pq0PZt3Fg--\"^\n\"\" --compressed\n</code></pre>\n\n<p>Instead of.</p>\n\n<pre><code>curl \"http://localhost:8080/login\" -H \"Origin: http://localhost:8080\" -H \"Accept-Encoding: gzip, deflate\" -H \"Accept-Language: pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.0 (Dart) Safari/537.36\" -H \"Content-Type: application/x-www-form-urlencoded\" -H \"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\" -H \"Cache-Control: max-age=0\" -H \"Referer: http://localhost:8080/\" -H \"Connection: keep-alive\" --data \"username=fred&amp;password=blah\" --compressed\n</code></pre>\n"}, {"tags": ["dart", "dart-pub"], "answers": [{"comments": [{"owner": {"reputation": 4210, "user_id": 156787, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/55c51ac4d9e872a96185167c1641b351?s=128&d=identicon&r=PG", "display_name": "Evan Kroske", "link": "https://stackoverflow.com/users/156787/evan-kroske"}, "edited": false, "score": 0, "creation_date": 1432439403, "post_id": 30415175, "comment_id": 48925542, "body": "Can I write a transformer to copy the file for me?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 4210, "user_id": 156787, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/55c51ac4d9e872a96185167c1641b351?s=128&d=identicon&r=PG", "display_name": "Evan Kroske", "link": "https://stackoverflow.com/users/156787/evan-kroske"}, "edited": false, "score": 0, "creation_date": 1432442208, "post_id": 30415175, "comment_id": 48926041, "body": "No, AFAIK a transformer can&#39;t access files outside the top-level directories."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1432399446, "creation_date": 1432399446, "answer_id": 30415175, "question_id": 30415112, "link": "https://stackoverflow.com/questions/30415112/how-can-i-configure-pub-to-copy-a-file-from-the-root-directory-of-my-project-to/30415175#30415175", "title": "How can I configure pub to copy a file from the root directory of my project to build/web?", "body": "<p>You can't. \nYou can use for example <a href=\"https://pub.dartlang.org/packages/grinder\" rel=\"nofollow\">Grinder</a> and automate your build tasks with it. It makes it easy to invoke <code>pub build</code> and copying files with a few lines of Dart code. </p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1432468330, "last_edit_date": 1432468330, "creation_date": 1432467072, "answer_id": 30423023, "question_id": 30415112, "link": "https://stackoverflow.com/questions/30415112/how-can-i-configure-pub-to-copy-a-file-from-the-root-directory-of-my-project-to/30423023#30423023", "title": "How can I configure pub to copy a file from the root directory of my project to build/web?", "body": "<p>You can use symlink for that. It will be automatically copied during <code>pub build</code> to your <code>build</code> directory and will always be the same file as in your root directory during debug. \nYou may symlink the whole folder or single file to your web folder. </p>\n\n<p><code>pub</code> does exactly the same with packages folder. In linux or macosx its quite easy using <code>ln -s</code> command. In windows,  <a href=\"http://www.howtogeek.com/howto/16226/complete-guide-to-symbolic-links-symlinks-on-windows-or-linux/\" rel=\"nofollow\">here</a> is good explanation how to do that. </p>\n"}], "owner": {"reputation": 4210, "user_id": 156787, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/55c51ac4d9e872a96185167c1641b351?s=128&d=identicon&r=PG", "display_name": "Evan Kroske", "link": "https://stackoverflow.com/users/156787/evan-kroske"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432468330, "creation_date": 1432399121, "question_id": 30415112, "link": "https://stackoverflow.com/questions/30415112/how-can-i-configure-pub-to-copy-a-file-from-the-root-directory-of-my-project-to", "title": "How can I configure pub to copy a file from the root directory of my project to build/web?", "body": "<p>As part of the pub build process, I would like pub to copy a file from <code>$PROJECT_ROOT/third_party/foo/foo.png</code> to <code>$PROJECT_ROOT/build/web/foo.png</code> to make it accessible to my code at runtime. How can I configure pub to copy the file for me using <code>pubspec.yaml</code>?</p>\n"}, {"tags": ["websocket", "dart", "dart-shelf"], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1432374016, "creation_date": 1432374016, "question_id": 30411169, "link": "https://stackoverflow.com/questions/30411169/authenticate-websocket-connection-in-dart-using-shelf-auth-and-shelf-web-socket", "title": "Authenticate websocket connection in Dart using shelf_auth and shelf_web_socket", "body": "<p>Using shelf_auth I can extract current user information from request this way:</p>\n\n<pre><code>getAuthenticatedContext(request)\n  .map((ac) =&gt; ac.principal.name)\n  .getOrElse(() =&gt; 'guest')\n</code></pre>\n\n<p>but, obviously, I need a request for that to work :)\nOn the other hand, using shelf_web_socket, establishing of websocket connection executes handler like that:</p>\n\n<pre><code>handleWS(CompatibleWebSocket ws){\n  // Here I should get user from getAuthenticatedContext()\n  // but I cannot due to absence of Request here.\n  ws.messages.listen(...);\n};\n\nrootRouter.get('/ws', webSocketHandler(handleWS), middleWare: authMiddleware);\n</code></pre>\n\n<p>But I have no idea how to forward original socket connection request to my handleWS, to be able to know which user just connected to server.</p>\n\n<hr>\n\n<p>Another question is what is best practice to store these open sockets, to being able to send broadcast messages to all connected clients, and delete corresponding socket when it's closed.\nFirst what is coming to my mind is to store sockets in a map like <code>Map&lt;int,CompatibleWebSocket&gt;</code>, where int is <code>CompatibleWebSocket.hash()</code>.</p>\n\n<p>Then I can iterate over <code>Map.values()</code> to do broadcast, and delete by key when connection is closed.</p>\n\n<p>I can't get if that technique overcomplicated for such task and maybe exist more convenient way doing that, like storing them in a list? Or can I join Streams somehow for broadcasting?</p>\n"}, {"tags": ["dart", "polymer", "bower", "web-component"], "comments": [{"owner": {"reputation": 4419, "user_id": 3259815, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61953dae767329420ec29f8e8f1466d4?s=128&d=identicon&r=PG", "display_name": "Vaibhav Mule", "link": "https://stackoverflow.com/users/3259815/vaibhav-mule"}, "edited": false, "score": 0, "creation_date": 1432348318, "post_id": 30408297, "comment_id": 48903990, "body": "can you post your folder structure? looks like your path might be wrong"}, {"owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "reply_to_user": {"reputation": 4419, "user_id": 3259815, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61953dae767329420ec29f8e8f1466d4?s=128&d=identicon&r=PG", "display_name": "Vaibhav Mule", "link": "https://stackoverflow.com/users/3259815/vaibhav-mule"}, "edited": false, "score": 0, "creation_date": 1432348463, "post_id": 30408297, "comment_id": 48904014, "body": "I have /web and /bower_components at the root. index.html is in /web"}, {"owner": {"reputation": 915, "user_id": 1603689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NQXv2.jpg?s=128&g=1", "display_name": "fredtma", "link": "https://stackoverflow.com/users/1603689/fredtma"}, "edited": false, "score": 0, "creation_date": 1484291782, "post_id": 30408297, "comment_id": 70458664, "body": "I have not been able to import 3rd party polymer components base on javascript, because they depend on polymer.js and that conflict with polymer.dart. would you mind sharing how you did it?"}], "answers": [{"tags": [], "owner": {"reputation": 4419, "user_id": 3259815, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61953dae767329420ec29f8e8f1466d4?s=128&d=identicon&r=PG", "display_name": "Vaibhav Mule", "link": "https://stackoverflow.com/users/3259815/vaibhav-mule"}, "is_accepted": false, "score": 0, "last_activity_date": 1432348753, "creation_date": 1432348753, "answer_id": 30408341, "question_id": 30408297, "link": "https://stackoverflow.com/questions/30408297/how-can-i-use-a-bower-component-in-dart/30408341#30408341", "title": "How can I use a bower component in Dart?", "body": "<p>Your path looks right <code>../</code> this is correct but go to <code>/bower_components/paper-date-picker/paper-date-picker.html</code> and make sure it is right.</p>\n\n<p>or change that line to\n<code>../bower_components/paper-date-picker/paper-date-picker-dialog.html</code></p>\n\n<p>and see if it works.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1432385392, "last_edit_date": 1432385392, "creation_date": 1432377902, "answer_id": 30411735, "question_id": 30408297, "link": "https://stackoverflow.com/questions/30408297/how-can-i-use-a-bower-component-in-dart/30411735#30411735", "title": "How can I use a bower component in Dart?", "body": "<p>By default, pub serves web as root folder,  so you cant go deeper than root.\nThe easiest way to get this to work is to symlink bower_components folder into web folder, like pub does for packages folder.</p>\n\n<p>Don't forget to remove <code>..</code> before <code>/bower_components</code> in your href attribute after that. </p>\n"}], "owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 2, "accepted_answer_id": 30411735, "answer_count": 2, "score": 4, "last_activity_date": 1432385392, "creation_date": 1432348191, "last_edit_date": 1432348494, "question_id": 30408297, "link": "https://stackoverflow.com/questions/30408297/how-can-i-use-a-bower-component-in-dart", "title": "How can I use a bower component in Dart?", "body": "<p>I have found a nice JS component that's installed with Bower.</p>\n\n<p>I'd like to know how I could import my component and let it be served by Pub.</p>\n\n<p>So far I've tried to <code>bower install</code> it, and it gets downloaded in the root of my project in <code>/bower_components</code></p>\n\n<p>And then in my <code>index.html</code> I tried:</p>\n\n<pre><code>&lt;link rel=\"import\" href=\"../bower_components/paper-date-picker/paper-date-picker.html\"&gt;\n</code></pre>\n\n<p>but Pub won't load the files (seems like it can't figure out relative paths in Bower).</p>\n"}, {"tags": ["types", "dart", "jwt"], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "is_accepted": true, "score": 2, "last_activity_date": 1432378631, "creation_date": 1432378631, "answer_id": 30411853, "question_id": 30407034, "link": "https://stackoverflow.com/questions/30407034/type-error-when-using-jwtsessionhandler-dart/30411853#30411853", "title": "Type Error when using JwtSessionHandler - dart", "body": "<p>It happens because <code>JwtSessionHandler</code> expects <code>lookupByUsername</code> function with only one parameter, not <code>lookupByUsernamePassword</code> which has two.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 30411853, "answer_count": 1, "score": 1, "last_activity_date": 1432378631, "creation_date": 1432335524, "question_id": 30407034, "link": "https://stackoverflow.com/questions/30407034/type-error-when-using-jwtsessionhandler-dart", "title": "Type Error when using JwtSessionHandler - dart", "body": "<p>I have a problem with the dart types when using the JwtSessionHandler. I wanted to integrate user authentication and sessions using <a href=\"https://bitbucket.org/andersmholmgren/shelf_auth/src/2343d20310b8c8477cd89ab5ad017eb6e6b9f97b/example/example_with_login_and_jwt_session.dart?at=master\" rel=\"nofollow\">this</a> example application from the <a href=\"https://bitbucket.org/andersmholmgren/shelf_auth\" rel=\"nofollow\">shelf_auth</a> git repository as a guide.</p>\n\n<p>Unfortunately I get an error when running the application (no syntax errors are detected before running the application)\nThe error message reads as follows:</p>\n\n<pre><code>Breaking on exception: object of type _TypeError: type '(String, String) =&gt; Future&lt;UserLookupByUsernamePassword&lt;Principal&gt;&gt;' is not a subtype of type 'UserLookupByUsernamePassword' of 'userLookup'.\n</code></pre>\n\n<p>The error originates from this line of code</p>\n\n<pre><code>var sessionHandler = new JwtSessionHandler('super app',new Uuid().v4(),testLookup.lookupByUsernamePassword);\n</code></pre>\n\n<p>to be precise from the last input argument of <code>JwtSessionHandler</code>\nthe <code>testLookup.lookupByUsernamePassword</code>. <code>testLookup</code> is defined by <code>var testLookup = new TestUserLookup();</code></p>\n\n<p>where</p>\n\n<pre><code>class TestUserLookup {\n  Future&lt;Option&lt;Principal&gt;&gt; lookupByUsernamePassword(String username, String password) {\n    final validUser = username == 'fred';\n    final principalOpt = validUser ? new Some(new Principal(username)) : const None();\n\n    return new Future.value(principalOpt);\n  }\n\n  Future&lt;Option&lt;Principal&gt;&gt; lookupByUsername(String username) {\n    final validUser = username == 'fred';\n\n    final principalOpt = validUser ? new Some(new Principal(username)) : const None();\n\n    return new Future.value(principalOpt);\n  }\n}\n</code></pre>\n\n<p>So this part of code is exactly as in the example. I tried to change the <code>Option&lt;Principal&gt;</code> part to <code>UserLookupByUsername&lt;Principal&gt;</code> but then I get stuck a bit later. The entire code of my app can by found <a href=\"https://github.com/LukaszTrojanowski/linkShepherdServer\" rel=\"nofollow\">here</a>. The error occurs in <a href=\"https://github.com/LukaszTrojanowski/linkShepherdServer/blob/master/lib/handlers.dart\" rel=\"nofollow\">handlers.dart</a>.</p>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["asynchronous", "stream", "dart", "stdout"], "comments": [{"owner": {"reputation": 6413, "user_id": 997251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZqLx3.jpg?s=128&g=1", "display_name": "Florian Loitsch", "link": "https://stackoverflow.com/users/997251/florian-loitsch"}, "edited": false, "score": 0, "creation_date": 1432469433, "post_id": 30402568, "comment_id": 48932118, "body": "I have filed <a href=\"http://dartbug.com/23522\" rel=\"nofollow noreferrer\">dartbug.com/23522</a> since similar code is given as example in the documentation of Process.start."}], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432633598, "post_id": 30405749, "comment_id": 48990714, "body": "? I don&#39;t use <code>addStream</code> at least not explicitely. Do I implicitely? Maybe I should have been more verbose. The idea was to subscribe to the stream and forward the received data use <code>stream.add(data)</code>. I haven&#39;t tried it but I assume you can cancel the subscription and subscribe again. Another attempt would be to pass a handler to <code>proc.stdout.listen</code> which can be passed another target stream to forward to. I updated my answer."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1432633587, "last_edit_date": 1432633587, "creation_date": 1432328200, "answer_id": 30405749, "question_id": 30402568, "link": "https://stackoverflow.com/questions/30402568/what-is-the-proper-way-to-remove-a-stream-from-stdout-so-that-another-stream-may/30405749#30405749", "title": "What is the proper way to remove a stream from stdout so that another stream may be added?", "body": "<p>You could alternatively use</p>\n\n<pre><code>StreamSubscription subscr = proc.stdout.listen(io.stdout.add);\n...\nsubscr.cancel();\n</code></pre>\n\n<p>or with a configurable handler</p>\n\n<pre><code>class StdOutHandler { \n  IOSink sink; \n  call(data) =&gt; sink.add(); \n}\n\nvoid main() {\n  var proc = await Process.start(...);\n  var stdoutHandler = new StdOutHandler()..sink = stdout;\n  var subscription = proc.stdout.listen(stdoutHandler);\n  ....\n  stdoutHandler.sink = ...\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6413, "user_id": 997251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZqLx3.jpg?s=128&g=1", "display_name": "Florian Loitsch", "link": "https://stackoverflow.com/users/997251/florian-loitsch"}, "is_accepted": true, "score": 4, "last_activity_date": 1432632766, "last_edit_date": 1432632766, "creation_date": 1432466826, "answer_id": 30422982, "question_id": 30402568, "link": "https://stackoverflow.com/questions/30402568/what-is-the-proper-way-to-remove-a-stream-from-stdout-so-that-another-stream-may/30422982#30422982", "title": "What is the proper way to remove a stream from stdout so that another stream may be added?", "body": "<p><code>addStream</code> returns a Future that indicates when the adding of the stream is done. There should only be one stream that <code>addStream</code>s at the same time to a <code>StreamSink</code>.</p>\n\n<p>Depending on what you want/need to do, you have 2 options now:</p>\n\n<ul>\n<li>multiplex the output of the process(es) into stdout.</li>\n<li>await that <code>addStream</code> is finished.</li>\n</ul>\n\n<p>The latter is easier:</p>\n\n<pre><code>Process.start(executable, ['list','of','args']).then((proc) async {\n  await stdout.addStream(proc.stdout);  // Edit: don't do this.\n  await stdout.addStream(proc.stderr);\n  return proc.exitCode;\n});\n</code></pre>\n\n<p>Note the <code>async</code> modifier on the body, and the two <code>await</code>s in the body.</p>\n\n<p>Edit: It is an error to not listen to stderr immediately. (Your program could block on it).</p>\n\n<p>If the output of your program is small enough, you could just switch to <code>Process.run</code>:</p>\n\n<pre><code>Process.run(executable, ['list','of','args']).then((procResult) {\n  stdout.write(procResult.stdout);\n  stdout.write(procResult.stderr);\n  return procResult.exitCode;\n});\n</code></pre>\n\n<p>It won't interleave the stdout and stderr, though.</p>\n"}, {"tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": false, "score": 3, "last_activity_date": 1432633913, "creation_date": 1432633913, "answer_id": 30455157, "question_id": 30402568, "link": "https://stackoverflow.com/questions/30402568/what-is-the-proper-way-to-remove-a-stream-from-stdout-so-that-another-stream-may/30455157#30455157", "title": "What is the proper way to remove a stream from stdout so that another stream may be added?", "body": "<p>\nYou can't call <code>addStream</code> more than once at a time on the same sink.\nA sink is either in \"manual\" mode or \"automatic\" mode, the latter being triggered by adding a stream. Until that stream is done being added, pauses are routed to the stream being added instead of to the controller, and you are not allowed to add events manually until it's done. It is as if the added stream takes over the sink until it's done.</p>\n\n<p>To add two (or more) streams to the same sink interleaved, you have to do it manually. One way to do it could be to have a general way to interleave streams, like the following code. Another option is to listen on both streams yourself and add the events to the sink:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Stream interleave(Iterable&lt;Stream&gt; streams) {\n  List subscriptions = [];\n  StreamController controller;\n  controller = new StreamController(\n    onListen: () {\n      int active = 0;\n      void done() {\n        active--;\n        if (active &lt;= 0) controller.close();\n      }\n      for (var stream in streams) {\n        active++;\n        var sub = stream.listen(controller.add, \n                                onError: controller.addError,\n                                onDone: done);\n        subscriptions.add(sub);             \n      }\n    },\n    onPause: () {\n      for (var sub in subscriptions) { sub.pause(); }\n    }, \n    onResume: () {\n      for (var sub in subscriptions) { sub.resume(); }\n    },\n    onCancel: () {\n      for (var sub in subscriptions) { sub.cancel(); }  \n    }\n  );\n  return controller.stream;\n}\n</code></pre>\n\n<p>(Not thoroughly tested!)</p>\n"}], "owner": {"reputation": 777, "user_id": 3900056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45ff0756018a3a41955b5d29e3ab63fb?s=128&d=identicon&r=PG&f=1", "display_name": "zcleghern", "link": "https://stackoverflow.com/users/3900056/zcleghern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 1, "accepted_answer_id": 30422982, "answer_count": 3, "score": 5, "last_activity_date": 1432658338, "creation_date": 1432315530, "last_edit_date": 1432658338, "question_id": 30402568, "link": "https://stackoverflow.com/questions/30402568/what-is-the-proper-way-to-remove-a-stream-from-stdout-so-that-another-stream-may", "title": "What is the proper way to remove a stream from stdout so that another stream may be added?", "body": "<p>I am starting a process in Dart that attaches its stdout stream to stdout so that the results can be printed to the terminal like so:</p>\n\n<pre><code>Process.start(executable, ['list','of','args']).then((proc) {\n  stdout.addStream(proc.stdout);\n  stderr.addStream(proc.stderr);\n  return proc.exitCode;\n});\n</code></pre>\n\n<p>However, once this completes I would like to start a new process and begin this again (the function this is in will be called several times).  Sometimes, I am getting an error:</p>\n\n<pre><code>Uncaught Error: Bad State: StreamSink is already bound to a stream\n</code></pre>\n\n<p>Looking at the dart docs, it looks like I may need to do something like <code>stdout.close()</code> or <code>stdout.flush()</code> but these don't seem to solve the problem.  What is the proper way to handle having multiple streams in sequence bound to a streamsink? </p>\n"}, {"tags": ["dart", "internet-explorer-10", "internet-explorer-11", "dart2js"], "comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432283534, "post_id": 30391819, "comment_id": 48872010, "body": "Please add a code example with all code that we can run in the browser."}, {"owner": {"reputation": 140, "user_id": 2787255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TIwP0.png?s=128&g=1", "display_name": "raptaML", "link": "https://stackoverflow.com/users/2787255/raptaml"}, "reply_to_user": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432283841, "post_id": 30391819, "comment_id": 48872216, "body": "It depends on data fetched by AJAX calls. I will try to mock it a bit and post a woprking piece of code..."}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 2787255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TIwP0.png?s=128&g=1", "display_name": "raptaML", "link": "https://stackoverflow.com/users/2787255/raptaml"}, "edited": false, "score": 0, "creation_date": 1432289518, "post_id": 30393568, "comment_id": 48875712, "body": "Thank you very much! That solved my issue. One more question: Is it me or IE not following the conventions in this case ? ;-)"}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": true, "score": 3, "last_activity_date": 1432288237, "creation_date": 1432288237, "answer_id": 30393568, "question_id": 30391819, "link": "https://stackoverflow.com/questions/30391819/compiled-dart-code-not-running-in-ie-10-and-ie-11/30393568#30393568", "title": "compiled dart code not running in IE 10 and IE 11", "body": "<p>I guess the <code>click</code> handler registration is not supported on <code>&lt;option&gt;</code> in the browsers you mention. Alternatively you can register your callback on the <code>SelectElement.onChange</code> and retrieve the selected with something like :</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:html';\nvoid main() {\n  SelectElement select = querySelector('select');\n  select.onChange.listen((_) {\n    final opt = select.options[select.selectedIndex];\n    print(opt.value);\n  });\n}\n</code></pre>\n\n<p>You can <a href=\"https://dartpad.dartlang.org/0b9bc3e3d52005c92b36\" rel=\"nofollow\">try it on DartPad</a> with those browsers.</p>\n"}], "owner": {"reputation": 140, "user_id": 2787255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TIwP0.png?s=128&g=1", "display_name": "raptaML", "link": "https://stackoverflow.com/users/2787255/raptaml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 30393568, "answer_count": 1, "score": 2, "last_activity_date": 1432288237, "creation_date": 1432283203, "question_id": 30391819, "link": "https://stackoverflow.com/questions/30391819/compiled-dart-code-not-running-in-ie-10-and-ie-11", "title": "compiled dart code not running in IE 10 and IE 11", "body": "<p>I am having trouble with a small dart app which runs perfectly fine in Chrome and Firefox and... guess what.... not in IE 10 and 11 (Project Spartan in Win10 Preview works!).</p>\n\n<p>It is a simple UI controll logic like so:</p>\n\n<pre><code>...\n//init elements\nSelectElement studyList = querySelector('#studies');\nSelectElement roleList = querySelector('#roles');\nSelectElement siteList = querySelector('#sites');\nButtonElement createButton = querySelector('#create');\n\n//Kick in the UI logic\n_populateStudies();\n\n//UI logic\n_populateStudies() {\n  for (var study in studies) {\n    OptionElement option = new OptionElement();\n    option.text = study;\n    studyList.children.add(option);\n  }\n  for (OptionElement element in studyList.children) {\n    throw new Exception(\"ADDING_HANDLER\");\n</code></pre>\n\n<p><strong>//the following is executed, handler seems to get attached</strong></p>\n\n<pre><code>    element.onClick.listen(_studyClickHandler);\n  }\n}\n</code></pre>\n\n<p><strong>//Never executed in IE from here on</strong></p>\n\n<pre><code>_studyClickHandler(Event e) {\n  siteList.children.clear();\n  roleList.children.clear();\n  _populateRoles();\n}\n\n_populateRoles(){\n  List&lt;String&gt; roles = context.getRolesFor(studyList.selectedOptions[0].text);\n  for (var role in roles) {\n    OptionElement option = new OptionElement();\n    option.text = role;\n    roleList.children.add(option);\n  }\n  for (OptionElement element in roleList.children) {\n    element.onClick.listen(_roleClickHandler);\n  }\n}\n...\n</code></pre>\n\n<p>In IE the second selection box stays empty.\nChrome and Firefox handle the code as expected, populating the box's children according to the element selected in the first selection box.\nI have no idea what the problem is... I refactored the handlers to be anonymous functions</p>\n\n<pre><code>onClick.listen((_){\n  handle stuff\n});\n</code></pre>\n\n<p>Console shows no errors at all.\nMaybe there is an easy solution for it but I am relatively new to dart and can't figure it out?</p>\n\n<p>Thanks</p>\n\n<p><img src=\"https://i.stack.imgur.com/KWQ6k.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4331299"}, "edited": false, "score": 0, "creation_date": 1432280169, "post_id": 30390749, "comment_id": 48870148, "body": "Thanks! That makes sense for me! :) Can you tell me the meaning of the underscore in <code>listen((_) =&gt;</code>?"}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "edited": false, "score": 1, "creation_date": 1432283199, "post_id": 30390749, "comment_id": 48871785, "body": "It&#39;s the name of the parameter of the function. Usually you use <code>_</code> when you don&#39;t really need to use the parameter and you want to improve readibility of your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4331299"}, "edited": false, "score": 0, "creation_date": 1432367751, "post_id": 30390749, "comment_id": 48907599, "body": "Ah, so no special meaning. thought so. :) Thanks for your help Alex :)"}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": true, "score": 1, "last_activity_date": 1432279586, "creation_date": 1432279586, "answer_id": 30390749, "question_id": 30390542, "link": "https://stackoverflow.com/questions/30390542/add-delete-item-button-todo-app-dart/30390749#30390749", "title": "Add delete item button - ToDo App - Dart", "body": "<p>You need to register the <code>onClick</code> listen to remove the current item on every button. Here's a working version of your code.</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:html';\n\nInputElement toDoInput;\nUListElement toDoList;\n\nvoid main() {\n  toDoInput = querySelector('#to-do-input');\n  toDoList = querySelector('#to-do-list');\n\n  toDoInput.onChange.listen(addToDoItem);\n}\n\n// Add item to list\nvoid addToDoItem(Event e) {\n  final toDoItem = new LIElement();\n  toDoItem.text = toDoInput.value;\n\n  final deleteItemButton = new ButtonElement()\n    ..text = 'Delete'\n    ..onClick.listen((_) =&gt; toDoItem.remove());\n\n  toDoItem.children.add(deleteItemButton);\n  toDoList.children.add(toDoItem);\n\n  toDoInput.value = '';\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4331299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30390749, "answer_count": 1, "score": 0, "last_activity_date": 1432279586, "creation_date": 1432278895, "question_id": 30390542, "link": "https://stackoverflow.com/questions/30390542/add-delete-item-button-todo-app-dart", "title": "Add delete item button - ToDo App - Dart", "body": "<p>I'm very new to dart, so don't judge me. :))  </p>\n\n<p>I just started to write a simple ToDo App in Dart. I want to add a button to the item, so i can delete it from the list. I add the button successfully, but don't get the click event working.</p>\n\n<p>I know why the code isn't working, but don't know, what the best solution would be to solve this.</p>\n\n<p>Some improvements would be awesome.</p>\n\n<p>Thanks in advance\nRon</p>\n\n<p><a href=\"https://dartpad.dartlang.org/5a1f2aab7d9f52fc2368\" rel=\"nofollow\">my little sexy dartpad</a></p>\n"}, {"tags": ["jquery", "twitter-bootstrap", "dart"], "answers": [{"comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1432192423, "post_id": 30364545, "comment_id": 48824638, "body": "Are you sure you can use the callback directly and don&#39;t have to wrap it?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1432194073, "post_id": 30364545, "comment_id": 48825630, "body": "&quot;Sure&quot; is a strong word, it&#39;s a while I used this myself ;-)"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1432186939, "last_edit_date": 1432186939, "creation_date": 1432182169, "answer_id": 30364545, "question_id": 30363542, "link": "https://stackoverflow.com/questions/30363542/listening-for-event-in-dart-via-jquery-on-with-dartjs/30364545#30364545", "title": "Listening for event in Dart via JQuery \u201con\u201d with dart:js", "body": "<p>This should work</p>\n\n<pre><code>import 'dart:js' as js;\n...\nvoid someCallback(e) {\n  print('callback called, passed: $e');\n}\n...\njs.context.callMethod(r'$', ['#myModal'])\n    .callMethod('on', ['hidden.bs.modal', someCallBack]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>...\njs.context.callMethod(r'$', ['#myModal'])\n    .callMethod('on', ['hidden.bs.modal', (e) {\n        print('callback called, passed: $e');\n}]);\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4740569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6a9daa37abda6ee7b83f07d267fb2?s=128&d=identicon&r=PG&f=1", "display_name": "dylb1973", "link": "https://stackoverflow.com/users/4740569/dylb1973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 30364545, "answer_count": 1, "score": 3, "last_activity_date": 1435668433, "creation_date": 1432175266, "last_edit_date": 1495542602, "question_id": 30363542, "link": "https://stackoverflow.com/questions/30363542/listening-for-event-in-dart-via-jquery-on-with-dartjs", "title": "Listening for event in Dart via JQuery \u201con\u201d with dart:js", "body": "<p>I use dart call bootstrap modal window,and I want register a callback function ,but found the <a href=\"https://stackoverflow.com/questions/16194291/listening-for-event-in-dart-via-jquery-on\">same problem</a> other person mentioned before.</p>\n\n<p>here is jQuery code: </p>\n\n<pre><code>$('#myModal').on('hidden.bs.modal',function (e) {....})\n</code></pre>\n\n<p>How can I write the same code in dart with <code>dart:js</code>, because <code>package:js</code> is deprecated; so I can't use callback function .</p>\n\n<p>Thanks a lot !!!</p>\n"}]