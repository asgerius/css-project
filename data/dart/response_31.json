[{"tags": ["pdf", "iframe", "printing", "dart", "dart-html"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 2, "creation_date": 1439439267, "post_id": 31975269, "comment_id": 51864402, "body": "I guess an iframes is the way to go. Iframe and window are quite limited in Dart. The intention  was to clode some security holes. You can work around the limitations using dart-js-interop."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1439622133, "post_id": 31975269, "comment_id": 51946671, "body": "Iframes seem to work fine for normal pages, even if I have an iframe with the javascript on the same page and then use a second iframe to get around cross domain problems, it just won&#39;t print PDFs, everything else prints fine. I&#39;m busy looking at <a href=\"https://mozilla.github.io/pdf.js/\" rel=\"nofollow noreferrer\">mozilla.github.io/pdf.js</a>"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1439413033, "creation_date": 1439413033, "question_id": 31975269, "link": "https://stackoverflow.com/questions/31975269/print-pdf-using-dart-in-the-browser", "title": "Print PDF using Dart in the browser", "body": "<p>I'm trying to print out a PDF I'm generating in Java using a Dart frontend.\nI can perfectly display the PDF in an iFrame, trigger a download on the PDF, but now I need to be able to print the PDF.</p>\n\n<p>This is what I've tried so far, but got stuck:</p>\n\n<p>This is the div on my index.html which I'm using to put iframes in:</p>\n\n<pre><code>&lt;div class=\"iframe\"&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>This dart code loads a URL into an iframe and places the iframe on the page (the url for the PDF is on a different domain, but I have a CORS filter in place to allow cross-domain requests)</p>\n\n<pre><code>void printPDF(String url){\n    querySelectorAll(\"div.iframe\").forEach((DivElement div){\n        div.nodes.clear();\n        div.nodes.add(\n            new IFrameElement()\n                ..src = url\n                ..focus()\n                //..no print method print ??\n        );\n    });\n}\n</code></pre>\n\n<p>This is the iframe containing the PDF:</p>\n\n<p><a href=\"https://i.stack.imgur.com/l78T9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l78T9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've seen code like this in several places where this is done using JavaScript: <code>window.frames.myPdfFrame.print();</code>, but I can't call <code>print()</code> on my <code>IframeElement</code>.</p>\n\n<p>If there's a cleaner way that doesn't need iframes, I would prefer that, if not, whatever way works in the latest Firefox, Chrome or IE11+</p>\n"}, {"tags": ["file", "command-line", "dart", "google-chrome-app"], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 4731312, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152798214348424/picture?type=large", "display_name": "Matt Kindy", "link": "https://stackoverflow.com/users/4731312/matt-kindy"}, "is_accepted": true, "score": 3, "last_activity_date": 1461895507, "creation_date": 1461895507, "answer_id": 36928373, "question_id": 31975094, "link": "https://stackoverflow.com/questions/31975094/chrome-packaged-app-retrieving-fileentry-in-dart-from-command-line-launchdata/36928373#36928373", "title": "Chrome Packaged App: Retrieving FileEntry in Dart from command line (LaunchData) parameter", "body": "<p>I ended up with this as my solution:</p>\n\n<p><strong>manifest.json</strong>:</p>\n\n<pre><code>...\n\"file_handlers\": {\n  \"any\": {\n    \"extensions\": [\n      \"xml\"\n    ]\n  }\n}, \n...\n</code></pre>\n\n<p><strong>background.js</strong>:</p>\n\n<pre><code>chrome.app.runtime.onLaunched.addListener(function(launchData) {\n\n  chrome.app.window.create(\n    'htmlSource.html',\n\n  {\n    id: 'mainWindow',\n    state: \"fullscreen\"\n  },\n\n  function(createdWindow) {\n\n    if(launchData.items !== undefined) {\n      launchData.items[0].entry.file(\n\n        function(result) {\n\n          var reader = new FileReader();\n          var XML;\n\n          reader.onloadend = function(){\n            XML = reader.result;\n            chrome.storage.local.set({'XML': XML});\n          };\n\n          reader.readAsText(result);\n\n        },\n\n        function(){\n          console.log(\"Error reading XML file\");\n        }\n\n      );\n    } else {\n      console.log(\"No file was detected.\");\n    }\n  });\n});\n</code></pre>\n\n<p>The dart code to retrieve the XML was simply:</p>\n\n<pre><code>String text = (await chrome.storage.local.get('XML'))['XML'];\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 4731312, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152798214348424/picture?type=large", "display_name": "Matt Kindy", "link": "https://stackoverflow.com/users/4731312/matt-kindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 36928373, "answer_count": 1, "score": 1, "last_activity_date": 1461895507, "creation_date": 1439412454, "last_edit_date": 1439413554, "question_id": 31975094, "link": "https://stackoverflow.com/questions/31975094/chrome-packaged-app-retrieving-fileentry-in-dart-from-command-line-launchdata", "title": "Chrome Packaged App: Retrieving FileEntry in Dart from command line (LaunchData) parameter", "body": "<p>Similarly to another post on this topic, I've been attempting to run my app from the command line with the file path of a local XML file so that my <code>main.dart</code> can parse this file in order to extract information relevant to program operation from it. I've been stumped as to how to appropriately access the <code>FileEntry</code> reference included in <code>launchData</code> -- the parameter for the <code>onLaunched</code> event. </p>\n\n<p>Here's what I currently have:</p>\n\n<p><strong>manifest.json</strong>:</p>\n\n<pre><code>...\n\"permissions\": [\n    \"storage\",\n    \"fileSystem\",\n    \"*://*/*\"\n],\n\n\"file_handlers\" : {\n    \"any\" : {\n        \"types\" : [ \"*\" ]\n    }\n},\n...\n</code></pre>\n\n<p><strong>background.js</strong>:</p>\n\n<pre><code>chrome.app.runtime.onLaunched.addListener(function(launchData) {\n\n  chrome.app.window.create(\n\n  'htmlFile.html',\n\n  {...},\n\n  function(createdWindow) {\n    createdWindow.contentWindow.launchData = launchData;\n  });\n});\n</code></pre>\n\n<p>At this point, I can't access <code>launchData</code> from <code>main.dart</code> because trying to do</p>\n\n<pre><code>  FileEntry entry =  (chrome.app.window.current().contentWindow.launchData as chrome.LaunchData).items.elementAt(0).entry;\n</code></pre>\n\n<p>to get the <code>FileEntry</code> results in an error for accessing <code>launchData</code>. I'm really confused about how I'm supposed to access the <code>FileEntry</code> that I want from my Dart code as a result.</p>\n"}, {"tags": ["asynchronous", "dart"], "comments": [{"owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 2, "creation_date": 1439322228, "post_id": 31950369, "comment_id": 51810552, "body": "Why are you using await if you don&#39;t want to actually await?"}, {"owner": {"reputation": 187, "user_id": 3558173, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/941d705b95e67cfd2cc58c627cc90060?s=128&d=identicon&r=PG", "display_name": "Crunchex", "link": "https://stackoverflow.com/users/3558173/crunchex"}, "reply_to_user": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 0, "creation_date": 1439324099, "post_id": 31950369, "comment_id": 51811589, "body": "I was under the impression that await pauses execution for the subsequent code that requires the result of test2. But since <code>print(&#39;hello&#39;)</code> doesn&#39;t require that result, I thought that it should be able to execute independently.  This is just a simple example, but if the method body contents were scaled up to where there were several blocks that could be executed independently, I&#39;d like to know how to add code to support that."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1439322074, "creation_date": 1439322074, "answer_id": 31950531, "question_id": 31950369, "link": "https://stackoverflow.com/questions/31950369/in-a-dart-async-method-can-certain-lines-that-dont-share-any-dependencies-be-r/31950531#31950531", "title": "In a Dart async method, can certain lines that don&#39;t share any dependencies be run asynchronously?", "body": "<p>This is because of the <code>await</code> before <code>test2();</code>. The execution is stalled until the Future returned by <code>test2()</code> is completed. </p>\n"}, {"tags": [], "owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "is_accepted": false, "score": 2, "last_activity_date": 1439382298, "last_edit_date": 1439382298, "creation_date": 1439322159, "answer_id": 31950559, "question_id": 31950369, "link": "https://stackoverflow.com/questions/31950369/in-a-dart-async-method-can-certain-lines-that-dont-share-any-dependencies-be-r/31950559#31950559", "title": "In a Dart async method, can certain lines that don&#39;t share any dependencies be run asynchronously?", "body": "<p>\n<strong><em>edit for follow up:</em></strong></p>\n\n<p>I am not sure what you want to do after all, but if you want <em>wait</em> for the chain to finish before printing things, here's what you have to do:</p>\n\n<pre><code>Future&lt;String&gt; test1() async {\n  String result;\n  var result1 = await test2();\n  print(\"Printing result1 $result1 ; this will wait for the first call to test2() to finish to print\");\n  var result2 = await test2();\n  print(\"Printing result2 $result2 ; this will wait for the second call to test2() to print\");  \n\n  // This should be executed immediately before\n  // the test2() chain completes.\n  print('hello');\n\n  return 'test1: done';\n}\n</code></pre>\n\n<p>Now if you call <code>test1()</code> and wait for it to return \"test1: done\" you have to await it.</p>\n\n<pre><code>main() async {\n  var result = await test1();\n  print(result); // should print \"hello\" and \"test1: done\"\n}\n</code></pre>\n\n<hr>\n\n<p>If you want to execute code independently from a previous future result, just don't put the <code>await</code> keyword.</p>\n\n<pre><code>Future&lt;String&gt; test1() async {\n  test2().then((String result) =&gt; print(result)); // the call to test2 will not stop the flow of test1(). Once test2's execution will be finished, it'll print the result asynchronously\n\n  // This will be printed without having to wait for test2 to finish.\n  print('hello');\n\n  return 'test1: done';\n}\n</code></pre>\n\n<p>The keyword <code>await</code> makes the flow stalled until <code>test2()</code> is finished.</p>\n"}], "owner": {"reputation": 187, "user_id": 3558173, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/941d705b95e67cfd2cc58c627cc90060?s=128&d=identicon&r=PG", "display_name": "Crunchex", "link": "https://stackoverflow.com/users/3558173/crunchex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439382298, "creation_date": 1439321496, "last_edit_date": 1439339865, "question_id": 31950369, "link": "https://stackoverflow.com/questions/31950369/in-a-dart-async-method-can-certain-lines-that-dont-share-any-dependencies-be-r", "title": "In a Dart async method, can certain lines that don&#39;t share any dependencies be run asynchronously?", "body": "<p>Suppose you have an async method body, like below, with a method call that returns a Future and a print following it that doesn't not need the result of that method. Is it possible to add some structure to get the print statement to execute independently? Or does this syntactic sugar force an async method body to wholly run sequentially?</p>\n\n<pre><code>Future&lt;String&gt; test2() {\n  Completer c = new Completer();\n\n  new Timer(new Duration(seconds: 2), () {\n    c.complete('test2: done');\n  });\n\n  return c.future;\n}\n\nFuture&lt;String&gt; test1() async {\n  String result = await test2();\n  print(result);\n\n  // Why is this not executed immediately before test2 call completes?\n  print('hello');\n\n  return 'test1: done';\n}\n\nvoid main() {\n  test1().then((result) =&gt; print(result));\n}\n</code></pre>\n\n<p>Follow up: I've added below a rewrite of test1() which has chained async method calls. I'm really after how to use the async syntactic sugar to simplify this type of use case. How could I rewrite this block with the new syntax?</p>\n\n<pre><code>Future&lt;String&gt; test1() async {\n  test2().then((result) {\n    print(result);\n    test2().then((result) {\n      print(result);\n    });\n  });\n\n  // This should be executed immediately before\n  // the test2() chain completes.\n  print('hello');\n\n  return 'test1: done';\n}\n</code></pre>\n"}, {"tags": ["regex", "string", "dart", "masking"], "comments": [{"owner": {"reputation": 656, "user_id": 2223781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZODdM.jpg?s=128&g=1", "display_name": "kelegorm", "link": "https://stackoverflow.com/users/2223781/kelegorm"}, "edited": false, "score": 0, "creation_date": 1439276065, "post_id": 31931257, "comment_id": 51781125, "body": "In first adaptation you miss <code>$&amp;,</code> replacer. It&#39;s for JS only, without this replacer expression doesn&#39;t work. We should change expression to a little, look at my answer bellow."}], "answers": [{"comments": [{"owner": {"reputation": 272, "user_id": 5167207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/paRvP.jpg?s=128&g=1", "display_name": "Flipybitz", "link": "https://stackoverflow.com/users/5167207/flipybitz"}, "edited": false, "score": 1, "creation_date": 1439275130, "post_id": 31934571, "comment_id": 51780674, "body": "Wouldn&#39;t this produce something like <code>12,423,</code>, adding a comma at the end?"}, {"owner": {"reputation": 56, "user_id": 5213583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cd770b50fe8e7f797b16ebc6af91f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dungeonfire", "link": "https://stackoverflow.com/users/5213583/dungeonfire"}, "reply_to_user": {"reputation": 272, "user_id": 5167207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/paRvP.jpg?s=128&g=1", "display_name": "Flipybitz", "link": "https://stackoverflow.com/users/5167207/flipybitz"}, "edited": false, "score": 1, "creation_date": 1439275169, "post_id": 31934571, "comment_id": 51780697, "body": "No, it doesn&#39;t add an extra comma at the end of the new number"}, {"owner": {"reputation": 272, "user_id": 5167207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/paRvP.jpg?s=128&g=1", "display_name": "Flipybitz", "link": "https://stackoverflow.com/users/5167207/flipybitz"}, "edited": false, "score": 1, "creation_date": 1439275209, "post_id": 31934571, "comment_id": 51780721, "body": "Ah okay, and yeah I just tested it and you&#39;re right. GL OP!"}, {"owner": {"reputation": 336, "user_id": 4237845, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-M52APKaweu0/AAAAAAAAAAI/AAAAAAAAAB0/7_PQQGq0Pjs/photo.jpg?sz=128", "display_name": "Alex L.", "link": "https://stackoverflow.com/users/4237845/alex-l"}, "edited": false, "score": 0, "creation_date": 1439311298, "post_id": 31934571, "comment_id": 51804440, "body": "Dungeonfire &gt;&gt; I tried adapting your suggestion, but no dice. Maybe is my limited experience w/replaceAll.      <code>print(&quot;100030&quot;.replaceAll(new RegExp(r&#39;(\\d{1,3})(?=(\\d{3})+$)&#39;), &#39;$1,$2&#39;);</code>  That didn&#39;t work..neither using replaceAllMapped."}], "tags": [], "owner": {"reputation": 56, "user_id": 5213583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cd770b50fe8e7f797b16ebc6af91f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dungeonfire", "link": "https://stackoverflow.com/users/5213583/dungeonfire"}, "is_accepted": false, "score": 2, "last_activity_date": 1439274055, "creation_date": 1439274055, "answer_id": 31934571, "question_id": 31931257, "link": "https://stackoverflow.com/questions/31931257/dart-how-to-add-commas-to-a-string-number/31934571#31934571", "title": "Dart how to add commas to a string number", "body": "<p>Try the following regex: <code>(\\d{1,3})(?=(\\d{3})+$)</code></p>\n\n<p>This will provide two backreferences, and replacing your number using them like <code>$1,$2,</code> will add commas where they are supposed to be.</p>\n"}, {"comments": [{"owner": {"reputation": 336, "user_id": 4237845, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-M52APKaweu0/AAAAAAAAAAI/AAAAAAAAAB0/7_PQQGq0Pjs/photo.jpg?sz=128", "display_name": "Alex L.", "link": "https://stackoverflow.com/users/4237845/alex-l"}, "edited": false, "score": 2, "creation_date": 1439311407, "post_id": 31935029, "comment_id": 51804506, "body": "Kelegorm, AWESOME! thank you so much!  that worked. Here is my working code:          <code>print(&quot;1000200&quot;.replaceAllMapped(new RegExp(r&#39;(\\d{1,3})(?=(\\d{3})+(?!\\d))&#39;), (Match m) =&gt; &quot;${m[1]},&quot;));</code>"}], "tags": [], "owner": {"reputation": 656, "user_id": 2223781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZODdM.jpg?s=128&g=1", "display_name": "kelegorm", "link": "https://stackoverflow.com/users/2223781/kelegorm"}, "is_accepted": true, "score": 35, "last_activity_date": 1439356202, "last_edit_date": 1439356202, "creation_date": 1439275888, "answer_id": 31935029, "question_id": 31931257, "link": "https://stackoverflow.com/questions/31931257/dart-how-to-add-commas-to-a-string-number/31935029#31935029", "title": "Dart how to add commas to a string number", "body": "<p>You just forgot get first digits into group. Use this short one:</p>\n\n<pre><code>'12345kWh'.replaceAllMapped(new RegExp(r'(\\d{1,3})(?=(\\d{3})+(?!\\d))'), (Match m) =&gt; '${m[1]},')\n</code></pre>\n\n<p>Look at the readable version. In last part of expression I added checking to any not digit char including string end so you can use it with '12 Watt' too.</p>\n\n<pre><code>RegExp reg = new RegExp(r'(\\d{1,3})(?=(\\d{3})+(?!\\d))');\nFunction mathFunc = (Match match) =&gt; '${match[1]},';\n\nList&lt;String&gt; tests = [\n  '0',\n  '10',\n  '123',\n  '1230',\n  '12300',\n  '123040',\n  '12k',\n  '12 ',\n];\n\ntests.forEach((String test) {\n  String result = test.replaceAllMapped(reg, mathFunc);\n  print('$test -&gt; $result');\n});\n</code></pre>\n\n<p>It works perfectly: </p>\n\n<pre><code>0 -&gt; 0\n10 -&gt; 10\n123 -&gt; 123\n1230 -&gt; 1,230\n12300 -&gt; 12,300\n123040 -&gt; 123,040\n12k -&gt; 12k\n12  -&gt; 12 \n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 4237845, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-M52APKaweu0/AAAAAAAAAAI/AAAAAAAAAB0/7_PQQGq0Pjs/photo.jpg?sz=128", "display_name": "Alex L.", "link": "https://stackoverflow.com/users/4237845/alex-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7062, "favorite_count": 4, "accepted_answer_id": 31935029, "answer_count": 2, "score": 16, "last_activity_date": 1439356202, "creation_date": 1439252727, "last_edit_date": 1495541172, "question_id": 31931257, "link": "https://stackoverflow.com/questions/31931257/dart-how-to-add-commas-to-a-string-number", "title": "Dart how to add commas to a string number", "body": "<p>I'm trying to adapt this:\n<a href=\"https://stackoverflow.com/questions/721304/insert-commas-into-number-string\">Insert commas into number string</a>\nto work in dart, but no luck.</p>\n\n<p>either one of these don't work:</p>\n\n<pre><code>print(\"1000200\".replaceAllMapped(new RegExp(r'/(\\d)(?=(\\d{3})+$)'), (match m) =&gt; \"${m},\"));\nprint(\"1000300\".replaceAll(new RegExp(r'/\\d{1,3}(?=(\\d{3})+(?!\\d))/g'), (match m) =&gt; \"$m,\"));\n</code></pre>\n\n<p>Is there a simpler/working way to add commas to a string number?</p>\n"}, {"tags": ["dart", "bwu-datagrid"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1439239478, "last_edit_date": 1495540680, "creation_date": 1439239478, "answer_id": 31928799, "question_id": 31928161, "link": "https://stackoverflow.com/questions/31928161/data-binding-to-bwu-datagrid/31928799#31928799", "title": "Data binding to bwu_datagrid", "body": "<p>There aren't many options. What you could do is to make <code>SomeClass</code> observable (<a href=\"https://stackoverflow.com/a/25111790/217408\">https://stackoverflow.com/a/25111790/217408</a>) and listen to changes of each instance and call <code>grid.invalidate()</code> when you receive an event. </p>\n"}], "owner": {"reputation": 125, "user_id": 3103137, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e198968770fb5d77eeaa5fd3e83dd8e2?s=128&d=identicon&r=PG&f=1", "display_name": "user3103137", "link": "https://stackoverflow.com/users/3103137/user3103137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439239478, "creation_date": 1439237013, "question_id": 31928161, "link": "https://stackoverflow.com/questions/31928161/data-binding-to-bwu-datagrid", "title": "Data binding to bwu_datagrid", "body": "<p>How can we make one-way data binding between <code>Map&lt;int, SomeClass&gt;</code> and Bwu_datagrid like <a href=\"https://www.dartlang.org/docs/tutorials/polymer-intro/#data-binding\" rel=\"nofollow\">https://www.dartlang.org/docs/tutorials/polymer-intro/#data-binding</a>?\nI would like to have Bwu_datagrid automatic display data from <code>Map&lt;int, SomeClass&gt;</code> without manual call <code>grid.invalidate();</code> if any <code>SomeClass</code> object in <code>Map&lt;int, SomeClass&gt;</code> had changes. </p>\n\n<pre><code>class SomeClass extends Object {\n  int someClassId;\n  String someClassName;\n  String someClassDescr}\n</code></pre>\n"}, {"tags": ["unit-testing", "dart", "code-generation", "dart-analyzer"], "owner": {"reputation": 3780, "user_id": 1065654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/74bd400c23607114d9ff560ce1b7391c?s=128&d=identicon&r=PG", "display_name": "maiermic", "link": "https://stackoverflow.com/users/1065654/maiermic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1439281507, "creation_date": 1439217730, "last_edit_date": 1439281507, "question_id": 31922523, "link": "https://stackoverflow.com/questions/31922523/test-generated-dart-code", "title": "test generated Dart code", "body": "<h1>Prolog</h1>\n\n<p>I use <a href=\"https://pub.dartlang.org/packages/source_gen\" rel=\"nofollow\">source_gen</a> to generate <a href=\"https://www.dartlang.org/\" rel=\"nofollow\">Dart</a> code. I'd like to test the output of my generator (using <a href=\"https://pub.dartlang.org/packages/test\" rel=\"nofollow\">test</a> package). I looked at the tests of <a href=\"https://pub.dartlang.org/packages/source_gen\" rel=\"nofollow\">source_gen</a> and used <a href=\"https://github.com/dart-lang/source_gen/blob/master/test/json_serializable_test.dart\" rel=\"nofollow\">json_serializable_test.dart</a> as a template. I can call <code>generate</code> on my generator and get the result as a String. Now I'd like to test, if classes and methods are generated as I expect. Sadly, this kind of test is missing in <a href=\"https://github.com/dart-lang/source_gen/blob/master/test/json_serializable_test.dart\" rel=\"nofollow\">json_serializable_test.dart</a>:</p>\n\n<pre><code>expect(output, isNotNull);\n\n// TODO: test the actual output\n// print(output);\n</code></pre>\n\n<p>I modified the helpers (like <code>_getCompilationUnitForString</code>) to pass a source (instead of always using <code>_testSource</code>) and get its <a href=\"https://pub.dartlang.org/packages/analyzer\" rel=\"nofollow\">analyzer</a> elements. Thereby, I can specify the input and expected output of my generator as a file or string and get the <a href=\"https://pub.dartlang.org/packages/analyzer\" rel=\"nofollow\">analyzer</a> elements of input, output and expected output.</p>\n\n<h1>Approach</h1>\n\n<p>I came up with this primitive approach to match classes by their name and field declarations:</p>\n\n<pre><code>import 'package:analyzer/src/generated/element.dart';\nimport 'package:source_gen/src/utils.dart';\nimport 'package:test/test.dart';\n\n\nMatcher equalsClass(expected) =&gt; new ClassMatcher(expected);\n\nclass ClassMatcher extends Matcher {\n  final ClassElementImpl _expected;\n\n  const ClassMatcher(this._expected);\n\n  @override\n  Description describe(Description description) =&gt; description\n      .add('same class implementation as ')\n      .addDescriptionOf(_expected);\n\n  @override\n  Description describeMismatch(ClassElementImpl item, Description description,\n                               Map matchState, bool verbose) =&gt; description\n      .add('${friendlyNameForElement(item)}')\n      .add(' differs from ')\n      .add('${friendlyNameForElement(_expected)}');\n\n  @override\n  bool matches(ClassElementImpl item, Map matchState) {\n    return (item.displayName == _expected.displayName) &amp;&amp;\n        unorderedEquals(_mapFields(item.fields))\n            .matches(_mapFields(_expected.fields), matchState);\n  }\n}\n\nIterable _mapFields(List&lt;FieldElement&gt; fields) =&gt; fields\n    .map(friendlyNameForElement);\n</code></pre>\n\n<p>This solution might be error-prone, since I compare fields by a String representation. Apart from this, the mismatch desciption is very poor. How can I improve my matcher?</p>\n\n<p>Ps: Is there a better way to compare generated code with expectations?</p>\n"}, {"tags": ["google-app-engine", "dart"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1439213968, "creation_date": 1439213968, "answer_id": 31921104, "question_id": 31920744, "link": "https://stackoverflow.com/questions/31920744/how-can-i-check-if-the-server-is-running-on-app-engine/31921104#31921104", "title": "How can I check if the server is running on app engine", "body": "<p>You can specify environment variables and then check in your Dart code whether it is set</p>\n\n<p><a href=\"https://cloud.google.com/appengine/docs/python/config/appconfig#Python_app_yaml_Defining_environment_variables\" rel=\"nofollow\">https://cloud.google.com/appengine/docs/python/config/appconfig#Python_app_yaml_Defining_environment_variables</a></p>\n\n<p><strong>app.yaml</strong></p>\n\n<pre><code>env_variables:\n  IS_APPENGINE: 'true'\n</code></pre>\n\n<p>in Dart</p>\n\n<pre><code>if(Platform.environment['IS_APPENGINE'] == 'true') {\n  ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30038, "user_id": 16673, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2bd7c0e93b52c224e284d18ac34752b8?s=128&d=identicon&r=PG", "display_name": "Suma", "link": "https://stackoverflow.com/users/16673/suma"}, "is_accepted": false, "score": -1, "last_activity_date": 1570700921, "creation_date": 1570700921, "answer_id": 58320105, "question_id": 31920744, "link": "https://stackoverflow.com/questions/31920744/how-can-i-check-if-the-server-is-running-on-app-engine/58320105#58320105", "title": "How can I check if the server is running on app engine", "body": "<p>One checks for a value of environment variable <code>com.google.appengine.runtime.environment</code>, which is either <code>\"Production\"</code> or <code>\"Development\"</code>. If it is <code>null</code> instead, you are not running App Engine.</p>\n\n<p>I think following should do the job:</p>\n\n<pre><code>if(Platform.environment['com.google.appengine.runtime.environment'] != null) {\n   ...\n}\n</code></pre>\n\n<p>Note: in Java one normally uses <code>SystemProperty.environment.value()</code> to check for the value. I have no experience with Dart, I hope someone working with it can confirm if the above works or not.</p>\n"}], "owner": {"reputation": 340, "user_id": 3693707, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b2a11c6b8562996c52cabb3665a54912?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Fermin", "link": "https://stackoverflow.com/users/3693707/miguel-fermin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 31921104, "answer_count": 2, "score": 3, "last_activity_date": 1570700921, "creation_date": 1439212949, "question_id": 31920744, "link": "https://stackoverflow.com/questions/31920744/how-can-i-check-if-the-server-is-running-on-app-engine", "title": "How can I check if the server is running on app engine", "body": "<p>I need to check if the server is running on app engine.</p>\n\n<p>Something like this:</p>\n\n<pre><code>if (canRunAppEngine) {\n    runAppEngine(app.handleRequest);\n} else {\n    app.start();\n}\n</code></pre>\n"}, {"tags": ["ajax", "dart", "download", "dart-html"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1439212555, "post_id": 31920469, "comment_id": 51753634, "body": "What do you mean by &quot;download a file&quot;? Something like <a href=\"http://blog.butlermatt.me/2014/03/dynamically-generating-download-files/\" rel=\"nofollow noreferrer\">blog.butlermatt.me/2014/03/&hellip;</a> ?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1439212885, "post_id": 31920469, "comment_id": 51753905, "body": "If you click on a link that points to a file sitting on a server, it will download / open that file depending on what your Content Disposition is set to. If I do window.location to that file, it will also download. Both are GET requests to the server. Now I&#39;m trying to figure out if it&#39;s possible to download the file using an AJAX POST - POST JSON to a URL and have the file that&#39;s generated server side download in the browser."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1439213597, "post_id": 31920469, "comment_id": 51754456, "body": "Should work with the attempt explained in the above link or something like <a href=\"http://stackoverflow.com/questions/16086162\">stackoverflow.com/questions/16086162</a>"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1439213602, "post_id": 31920469, "comment_id": 51754460, "body": "Updated the question with an example that should clarify it."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1439214080, "post_id": 31920469, "comment_id": 51754810, "body": "It seems all the solutions in those links uses some sort of GET request whether it&#39;s via XHR-GET, window.location to some URL, using iFrames, etc. HTML5&#39;s Blob Feature is not supported in the latest IE, so my only option seems to be doing a window.location and passing the params in the JSON as GET paramaters. Not very elegant, but it&#39;ll have to do for now."}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1577578980, "creation_date": 1439212155, "last_edit_date": 1577578980, "question_id": 31920469, "link": "https://stackoverflow.com/questions/31920469/download-file-with-ajax-using-dart", "title": "Download file with AJAX using Dart", "body": "<p>Is it at all possible to download a file upon an ajax request?\nDoes it matter if it's same domain / cross domain?</p>\n\n<p>I know it can be done upon redirecting the browser to a URL and setting relevant headers, but was wondering if it can be done when doing an ajax request.</p>\n\n<p>I'm POSTing JSON as the Request Payload to a URL and based on the content of the JSON, I want to send back a specific file.</p>\n\n<pre><code>client.post(url, body: request, headers:{\"Content-Type\":\"application/json\"}).then((res) {\n    if (res.statusCode == 200) {\n        if (\"application/json\" == res.headers[\"content-type\"]) {\n            // parse JSON here\n\n        } else {\n            // download the content if Content-Disposition is set\n        }\n    }\n}).whenComplete(() {\n    client.close();\n}).catchError((exception, stacktrace) {\n    print(exception);\n    print(stacktrace);\n    showErrorMessage(\"An Error Occurred\");\n});\n</code></pre>\n\n<p>I can see the the correct headers coming back for downloading a PDF, but it's not doing anything if I receive these headers via an AJAX response.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RN7gs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RN7gs.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Update - clarifying:</strong></p>\n\n<p>If you click this link, it will do a GET request to Github and download the file: <a href=\"https://github.com/dartsim/dart/archive/master.zip\" rel=\"nofollow noreferrer\">https://github.com/dartsim/dart/archive/master.zip</a>\nI'm trying to download the file using a POST request via Dart's BrowserClient.post.</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "edited": false, "score": 0, "creation_date": 1439219907, "post_id": 31913675, "comment_id": 51759098, "body": "Does it work when you globally activate a package from pub.dartlang.org ?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "edited": false, "score": 0, "creation_date": 1439220000, "post_id": 31913675, "comment_id": 51759152, "body": "Interesting question. I haven&#39;t published one yet where I could try it with."}, {"owner": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "edited": false, "score": 2, "creation_date": 1439222875, "post_id": 31913675, "comment_id": 51761076, "body": "Just tried it. Doesn&#39;t work yet: <code>Could not resolve a package location for base at file:&#47;&#47;&#47;Users&#47;sethladd&#47;.pub-cache&#47;global_packages&#47;resourcete&zwnj;&#8203;st&#47;bin&#47;resourcetest.&zwnj;&#8203;dart.snapshot</code>"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 5, "last_activity_date": 1452867346, "last_edit_date": 1452867346, "creation_date": 1439191082, "answer_id": 31913675, "question_id": 31913674, "link": "https://stackoverflow.com/questions/31913674/how-to-load-resource-files-or-package-uris-in-dart/31913675#31913675", "title": "How to load resource files or package: URIs in Dart?", "body": "<p><strong>Update</strong>\nThe <a href=\"https://pub.dartlang.org/packages/resource\" rel=\"nofollow\">resource</a> package was published.</p>\n\n<p><strong>Update</strong>\nThis is being reworked. The <code>Resource</code> class will be moved to a package.</p>\n\n<p><strong>Original</strong></p>\n\n<p>There is a new <code>Resource</code> class in Dart (tested with <code>Dart VM version: 1.12.0-edge.d4d89d6f12b44514336f1af748e466607bcd1453 (Fri Aug  7 19:38:14 2015)</code>)</p>\n\n<p><strong>resource_example/lib/resource/sample.txt</strong></p>\n\n<pre><code>Sample text file.\n</code></pre>\n\n<p><strong>resource_example/bin/main.dart</strong></p>\n\n<pre><code>main() async {\n  var resource = const Resource('package:resource_example/resource/sample.txt');\n  print(await resource.readAsString());\n  // or for binary resources\n  // print(await resource.readAsBytes());\n}\n</code></pre>\n\n\n\n<p>Executing</p>\n\n<pre><code>dart bin/main.dart\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>Sample text file.\n</code></pre>\n\n\n\n<p>Executing</p>\n\n<pre><code>pub global activate -spath . \npub global run resource_example:main\n</code></pre>\n\n<p>also prints</p>\n\n<pre><code>Sample text file.\n</code></pre>\n\n<p>It's also possible to pass the content of a variable as a resource. This might for example be convenient in unit tests to pass mock resources.</p>\n\n<pre><code>const sampleText = \"Sample const text\";\n\nmain() async {\n  var uriEncoded = sampleText.replaceAll(' ', '%20');\n  var resource = new Resource('data:application/dart;charset=utf-8,$uriEncoded');\n  print(await resource.readAsString());\n}\n</code></pre>\n\n\n\n<p>Arbitrary file or http uris are supported as well but this might not work when using <code>pub run</code> or <code>pub global run</code> when using relative paths.</p>\n\n<pre><code>main() async {\n  var uri = new Uri.file('lib/resource/sample.txt');\n  var resource = new Resource(uri.toString());\n  print(await resource.readAsString());\n}\n</code></pre>\n\n<p>For more details see<br>\n- <a href=\"http://blog.sethladd.com/2015/08/dynamically-load-package-contents-with.html\" rel=\"nofollow\">http://blog.sethladd.com/2015/08/dynamically-load-package-contents-with.html</a><br>\n- <a href=\"https://codereview.chromium.org/1276263002/\" rel=\"nofollow\">https://codereview.chromium.org/1276263002/</a></p>\n"}], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 2, "accepted_answer_id": 31913675, "answer_count": 1, "score": 4, "last_activity_date": 1452867346, "creation_date": 1439191082, "last_edit_date": 1439220620, "question_id": 31913674, "link": "https://stackoverflow.com/questions/31913674/how-to-load-resource-files-or-package-uris-in-dart", "title": "How to load resource files or package: URIs in Dart?", "body": "<p>There is a way to get the path of the currently executing script and then find the resource files relative to this location, but there is no guarantee that the directory structure is the same when the application is published.</p>\n\n<p>Does Dart provide a generic way to load resources (files, data, ...) in a way that works also with <code>pub run</code> or <code>pub global run</code>?</p>\n\n<p>Asked another way, how do I dynamically load the contents of a <code>package:</code> URI, in a Dart app, at runtime?</p>\n"}, {"tags": ["dart", "httprequest", "dart-async", "dart-http"], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439139278, "post_id": 31905574, "comment_id": 51727155, "body": "That is similar to my first case, so it works, but I guess there is no other way to do this."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 1, "creation_date": 1439140032, "post_id": 31905574, "comment_id": 51727363, "body": "Right, I didn&#39;t look closer to your first case because it didn&#39;t cause problems. You could use a Completer in your 2nd case but you don&#39;t really gain anything but raise the complexity unnecessarily."}, {"owner": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439141589, "post_id": 31905574, "comment_id": 51727821, "body": "However, with his solution, it prints the response contents, then <code>*** request complete ***</code>, and then it takes a few seconds without doing anything before the execution terminates. Putting a <code>break</code> inside the <code>for</code> solves this, but doesn&#39;t seem very nice. Anyone knows why this happens?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439141824, "post_id": 31905574, "comment_id": 51727898, "body": "Inserting <code>break;</code> is pointless. Can you please update your question with your entire current code?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439142527, "post_id": 31905574, "comment_id": 51728117, "body": "I&#39;ll try it tomorrow. Do you have a public URL to test it with?"}, {"owner": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439142604, "post_id": 31905574, "comment_id": 51728139, "body": "Thanks. And not really. I&#39;m making requests to Twitter with a private key, sorry."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 0, "creation_date": 1439304880, "post_id": 31905574, "comment_id": 51800263, "body": "The pause is weird. I don&#39;t know what causes it. Maybe a bug in the VM. I updated my answer."}, {"owner": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "edited": false, "score": 1, "creation_date": 1439307090, "post_id": 31905574, "comment_id": 51801878, "body": "Thanks for all the help! I was already using <code>exit(0)</code>, and like you said this is probably a bug. I&#39;m going to report it."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1439466680, "last_edit_date": 1439466680, "creation_date": 1439132542, "answer_id": 31905574, "question_id": 31905527, "link": "https://stackoverflow.com/questions/31905527/reusable-sync-httpclient-request/31905574#31905574", "title": "Reusable Sync HttpClient Request", "body": "<p>It's probably caused by the <code>await</code> before the <code>response.transform</code>. </p>\n\n<p>You might want something like</p>\n\n<pre><code>  return response.transform(UTF8.decoder).join('');\n</code></pre>\n\n<p>The pause is not related to <code>makeRequest()</code>. The Dart VM seems to wait for something before it exits. Adding <code>exit(0);</code> as last line in <code>main()</code> makes the  application exit immediately.</p>\n\n<p><strong>Update</strong></p>\n\n<p>According to the response on the <a href=\"https://github.com/dart-lang/sdk/issues/24045#issuecomment-130567616\" rel=\"nofollow\">Dart SDK issue</a> </p>\n\n<blockquote>\n  <p>This is caused by the HttpClient instance having a connection pool\n  which can keep the Dart VM alive. There are two ways of avoiding this:</p>\n  \n  <p>1) Close the HttpClient explicitly<br>\n  2) Use non-persistent connections</p>\n</blockquote>\n\n<pre><code>import 'dart:async';\nimport 'dart:convert' show UTF8;\nimport 'dart:io';\n\nFuture main() async {\n  await makeRequest();\n  print('end of main');\n}\n\nFuture makeRequest() async {\n  var client = new HttpClient();\n  var request = await client.postUrl(Uri.parse('https://example.com'));\n  var response = await request.close();\n  var contents = await response.transform(UTF8.decoder).join();\n  print(contents);\n  client.close();  // Close the client.\n}\n</code></pre>\n\n\n\n<pre><code>import 'dart:async';\nimport 'dart:convert' show UTF8;\nimport 'dart:io';\n\nFuture main() async {\n  await makeRequest();\n  print('end of main');\n}\n\nFuture makeRequest() async {\n  var request = await new HttpClient().postUrl(Uri.parse('https://example.com'));\n  request.persistentConnection = false;  // Use non-persistent connection.\n  var response = await request.close();\n  var contents = await response.transform(UTF8.decoder).join();\n  print(contents);\n}\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 4413773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lLK8T.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4413773/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "accepted_answer_id": 31905574, "answer_count": 1, "score": 2, "last_activity_date": 1463666304, "creation_date": 1439132258, "last_edit_date": 1463666304, "question_id": 31905527, "link": "https://stackoverflow.com/questions/31905527/reusable-sync-httpclient-request", "title": "Reusable Sync HttpClient Request", "body": "<p>I need a reusable function that makes an HTTP request and awaits for its completion before returning the response as a String.</p>\n\n<p>Here's the main function:</p>\n\n<pre><code>main() async {\n  var json;\n  json = await makeRequest('https://...');\n  print(json);\n  print('*** request complete ***');\n}\n</code></pre>\n\n<p><strong>(First Case)</strong> This is the reusable function that makes the HTTP request:</p>\n\n<pre><code>makeRequest(String url) async {\n  var request = await new HttpClient().postUrl(Uri.parse(url));\n\n  // Includes the access token in the request headers.\n  request.headers.add(...);\n\n  // Waits until the request is complete.\n  var response = await request.close();\n\n  await for (var contents in response.transform(UTF8.decoder)) {\n    return contents;\n  }\n}\n</code></pre>\n\n<p>This works as expected and the output is:</p>\n\n<pre><code>// Response contents as a String...\n*** request complete ***\n</code></pre>\n\n<p><strong>(Second Case)</strong> Then I tried to do this and it didn't work:</p>\n\n<pre><code>makeRequest(String url) async {\n  var request = await new HttpClient().postUrl(Uri.parse(url));\n\n  // Includes the access token in the request headers.\n  request.headers.add(...);\n\n  // Waits until the request is complete.\n  var response = await request.close();\n\n  var json = '';\n  await response.transform(UTF8.decoder).listen((contents) {\n    // At first I tried to return contents here, but then I added onDone().\n    json += contents;\n  }, onDone: () {\n    return json;\n  });\n\n  return json;\n}\n</code></pre>\n\n<p>I've tried defining the function within <code>listen</code> with <code>async</code> and <code>await</code>, returning <code>contents</code> within <code>listen</code> without <code>onDone()</code>, but the output is the same:</p>\n\n<pre><code>// Empty line.\n*** request complete ***\n// Waits a few seconds doing nothing before terminating...\n</code></pre>\n\n<p>Does anyone know why the second case doesn't work?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After updating the code it does what it was supposed to do, but takes a few seconds before terminating execution:</p>\n\n<pre><code>Future&lt;String&gt; twitterRequest(String url) async {\n  var request = await new HttpClient().postUrl(Uri.parse(url));\n\n  // Includes the access token in the request headers.\n  request.headers.add(...);\n\n  // Waits until the request is complete.\n  var response = await request.close();\n\n  var json = '';\n  await for (var contents in response.transform(UTF8.decoder)) {\n    json += contents;\n    // Putting a break here produces the same output but terminates immediately (as wanted).\n  }\n\n  return json;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>// Prints response contents...\n*** request complete ***\n// Takes a few seconds before execution terminates. With the break the code terminates immediately.\n</code></pre>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>After submitting <a href=\"https://github.com/dart-lang/sdk/issues/24045\" rel=\"nofollow\">this issue on GitHub</a>, I found out that instances of the <code>HttpClient</code> have a connection pool and keep persistent connections by default, which keeps the Dart VM alive. Please consult the issue page to find out about the possible solutions.</p>\n"}, {"tags": ["json", "dart", "dartson"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1439048113, "post_id": 31894113, "comment_id": 51706693, "body": "I guess you should create a bug report in the GitHub repo of the package."}], "answers": [{"tags": [], "owner": {"reputation": 2381, "user_id": 1759687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2HgFx.png?s=128&g=1", "display_name": "JoaoBiriba", "link": "https://stackoverflow.com/users/1759687/joaobiriba"}, "is_accepted": false, "score": 2, "last_activity_date": 1439628701, "last_edit_date": 1439628701, "creation_date": 1439153055, "answer_id": 31908658, "question_id": 31894113, "link": "https://stackoverflow.com/questions/31894113/stack-overflow-in-serializing-to-json-an-object-with-double-members/31908658#31908658", "title": "Stack Overflow in serializing to JSON an Object with double members", "body": "<p>It's a closed issue, but the serialization of double doesn't work yet <a href=\"https://github.com/eredo/dartson/issues/26\" rel=\"nofollow\">GitHub issue</a></p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 4000414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61922721d2c686bae3b6b078286f61d1?s=128&d=identicon&r=PG&f=1", "display_name": "user4000414", "link": "https://stackoverflow.com/users/4000414/user4000414"}, "is_accepted": true, "score": 2, "last_activity_date": 1439362628, "creation_date": 1439362628, "answer_id": 31958065, "question_id": 31894113, "link": "https://stackoverflow.com/questions/31894113/stack-overflow-in-serializing-to-json-an-object-with-double-members/31958065#31958065", "title": "Stack Overflow in serializing to JSON an Object with double members", "body": "<p>I tried your example and it looks like there's an issue with doubles used in \"num\" defined properties. Please try:</p>\n\n<pre><code>import 'package:dartson/dartson.dart';\n\n@Entity()\nclass GeoFence {\n  String label;\n  double latitude;\n  double longitude;\n  double radius;\n}\n\n\nmain(List&lt;String&gt; args) {\n  var dson = new Dartson.JSON();\n\n  GeoFence object = new GeoFence()\n    ..label = \"test\"\n    ..latitude = 46.2\n    ..longitude = 12\n    ..radius = 10;\n\n\n  String jsonString = dson.encode(object);\n  print(jsonString);\n}\n</code></pre>\n\n<p>Also please notice that @MirrorUsed annotation is no longer required when using dartson. I'll update the issue on github and take a look at it asap.</p>\n"}], "owner": {"reputation": 2381, "user_id": 1759687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2HgFx.png?s=128&g=1", "display_name": "JoaoBiriba", "link": "https://stackoverflow.com/users/1759687/joaobiriba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 31958065, "answer_count": 2, "score": 2, "last_activity_date": 1439628701, "creation_date": 1439044215, "last_edit_date": 1439046065, "question_id": 31894113, "link": "https://stackoverflow.com/questions/31894113/stack-overflow-in-serializing-to-json-an-object-with-double-members", "title": "Stack Overflow in serializing to JSON an Object with double members", "body": "<p>Trying to run this code to serialize an object in JSON using dartson generates a Stack Overflow exception when using a double value in a member.\nHow can i solve this problem?</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code> import 'package:dartson/dartson.dart';\n\n\n    @MirrorsUsed(targets:const['example'], override:'*')\n    import 'dart:mirrors';\n\n    @Entity()\n    class GeoFence {\n      String label;\n      num latitude;\n      num longitude;\n      num radius;\n    }\n\n\n    main(List&lt;String&gt; args) {\n      var dson = new Dartson.JSON();\n\n      GeoFence object = new GeoFence()\n        ..label = \"test\"\n        ..latitude = 46.2\n        ..longitude = 12\n        ..radius = 10;\n\n\n      String jsonString = dson.encode(object);\n      print(jsonString);\n    }\n</code></pre>\n"}, {"tags": ["dart", "import", "webstorm"], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 3271067, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2384954abfe4c6a831dc6b6e22f8ae92?s=128&d=identicon&r=PG&f=1", "display_name": "Hyarantar", "link": "https://stackoverflow.com/users/3271067/hyarantar"}, "edited": false, "score": 0, "creation_date": 1439043052, "post_id": 31893787, "comment_id": 51704513, "body": "Thank you ! Is it the same about #source ? It is an old syntax and not used anymore ? If so, what are we using instead ?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 207, "user_id": 3271067, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2384954abfe4c6a831dc6b6e22f8ae92?s=128&d=identicon&r=PG&f=1", "display_name": "Hyarantar", "link": "https://stackoverflow.com/users/3271067/hyarantar"}, "edited": false, "score": 0, "creation_date": 1439043195, "post_id": 31893787, "comment_id": 51704564, "body": "No idea what <code>#source</code> was for. Could be <code>part</code>/<code>part of</code>. I suggest to search for more up-to-date documentation or tutorials at <a href=\"http://dartlang.org\" rel=\"nofollow noreferrer\">dartlang.org</a>"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1439041832, "creation_date": 1439041832, "answer_id": 31893787, "question_id": 31893478, "link": "https://stackoverflow.com/questions/31893478/webstorm-dart-import-errors/31893787#31893787", "title": "WebStorm - Dart import errors", "body": "<p>This is very old syntax (+2 years) </p>\n\n<p>Use instead</p>\n\n<pre><code>import 'dart:html';\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 3271067, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2384954abfe4c6a831dc6b6e22f8ae92?s=128&d=identicon&r=PG&f=1", "display_name": "Hyarantar", "link": "https://stackoverflow.com/users/3271067/hyarantar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31893787, "answer_count": 1, "score": 1, "last_activity_date": 1572889998, "creation_date": 1439039477, "last_edit_date": 1572889998, "question_id": 31893478, "link": "https://stackoverflow.com/questions/31893478/webstorm-dart-import-errors", "title": "WebStorm - Dart import errors", "body": "<p>I'm new to DART, so I was looking for some program to test and I found a little space invaders game. I have import the project in WebStorm, but there's an error with the import, and I don't understand where does the error comes from:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WnY1B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WnY1B.png\" alt=\"enter image description here\"></a></p>\n\n<p>Are there any missing libraries? I did download the dart-sdk and linked it when I installed WebStorm, but I didn't provide any link for Dartium, is that what causes the error?</p>\n"}, {"tags": ["dart", "dart-async"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1439022047, "post_id": 31890210, "comment_id": 51699269, "body": "There are a lot of similar questions under the <code>dart-async</code> tag."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439051382, "post_id": 31891032, "comment_id": 51707588, "body": "Thanks mate, how i tell you, i&#39;m learning dart and i&#39;m still learning async programming in dart, now i understamd my mistake."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439054824, "post_id": 31891032, "comment_id": 51708593, "body": "If this answers your questions please mark it as answered with the checkmark below the upvote buttons. For more information about async programming in Dart see <a href=\"https://www.dartlang.org/articles/await-async/\" rel=\"nofollow noreferrer\">dartlang.org/articles/await-async</a> <a href=\"https://www.dartlang.org/docs/tutorials/futures/\" rel=\"nofollow noreferrer\">dartlang.org/docs/tutorials/futures</a> <a href=\"https://www.dartlang.org/docs/tutorials/streams/\" rel=\"nofollow noreferrer\">dartlang.org/docs/tutorials/streams</a> <a href=\"https://www.dartlang.org/articles/beyond-async/\" rel=\"nofollow noreferrer\">dartlang.org/articles/beyond-async</a>"}, {"owner": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439143510, "post_id": 31891032, "comment_id": 51728429, "body": "I have another question, how i can access to parsedJSON from another class and set other variable with parsedJSON from the other class?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439143857, "post_id": 31891032, "comment_id": 51728528, "body": "<code>var th = new testHandler(); th.parsedJSON = {&#39;x&#39;:&#39;y&#39;};</code> Is this what you are asking for?"}, {"owner": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439144419, "post_id": 31891032, "comment_id": 51728676, "body": "No exactly, im trying to use the parsed json, to use them in another class, for example, i&#39;ll write a function to returns some data of the already parsed json, but in another class."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439144607, "post_id": 31891032, "comment_id": 51728728, "body": "&quot;Words are cheap. Show me some code.&quot; Linus Torvalds. Can you add code to your question that shows what you try to accomplish and explain what doesn&#39;t work as expected. I really don&#39;t understand what causes you troubles."}, {"owner": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1439144723, "post_id": 31891032, "comment_id": 51728771, "body": "<code>Map&lt;String, String&gt; getTests(String data){     if(!parsedJSON.containsKey(data)) return null;     return parsedJSON[data];   }</code> I Have this function in the same class of parsedJSON if i want to use in another &quot;foo&quot; class, it returns null."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1439021605, "last_edit_date": 1439021605, "creation_date": 1439020975, "answer_id": 31891032, "question_id": 31890210, "link": "https://stackoverflow.com/questions/31890210/why-dont-set-the-var-dart/31891032#31891032", "title": "Why don&#39;t set the var (Dart)", "body": "<p><code>print(parsedJSON);</code> is executed before <code>getString()</code> returns. <code>getString()</code> is async and the callback passed to <code>then()</code> will be executed sometimes later after <code>getString()</code> returned the result but <code>print(parsedJSON);</code> will be executed immediately. </p>\n\n<p>Using <code>async</code>/<code>await</code> makes this quite easy:</p>\n\n<pre><code>import 'dart:convert';\nimport 'dart:html';\n\nclass testHandler {\n\n  Map parsedJSON;\n\n  testHandler();\n\n  Future Initialize() async {\n    String rawJSON = \"core/testConfiguration.json\";\n\n    try {\n      String f = await HttpRequest.getString(rawJSON);\n      parsedJSON = JSON.decode(f);\n    } catch(Error e) { \n      print(e.toString());\n    } \n\n    print(parsedJSON);\n  }\n}\n</code></pre>\n\n<p>Async is contagious therefore code calling <code>Initialize()</code> has to wait for it to finish as well. </p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 2223781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZODdM.jpg?s=128&g=1", "display_name": "kelegorm", "link": "https://stackoverflow.com/users/2223781/kelegorm"}, "is_accepted": false, "score": 0, "last_activity_date": 1439029269, "last_edit_date": 1439029269, "creation_date": 1439027861, "answer_id": 31891897, "question_id": 31890210, "link": "https://stackoverflow.com/questions/31890210/why-dont-set-the-var-dart/31891897#31891897", "title": "Why don&#39;t set the var (Dart)", "body": "<p>No, you are not setting <code>parsedJSON</code> in <code>.then()</code>. You are trying to call method from null object. Before use <code>parsedJSON</code> you should set it with <code>=</code> operator, like</p>\n\n<pre><code>parsedJSON = new Map.from(JSON.decode(f));\n</code></pre>\n\n<p>In other words, you mixed up parsedJSON's methods and Map's constructors.</p>\n\n<p><strong>P.S.</strong> \nAnd, as Gunter denoted it, you may write it shortly:</p>\n\n<pre><code>parsedJSON = JSON.decode(f);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4081428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d05724d15e6102a3598f4f20051e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Gardu&#241;o", "link": "https://stackoverflow.com/users/4081428/jorge-gardu%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439029269, "creation_date": 1439014150, "last_edit_date": 1439020997, "question_id": 31890210, "link": "https://stackoverflow.com/questions/31890210/why-dont-set-the-var-dart", "title": "Why don&#39;t set the var (Dart)", "body": "<p>I'm trying this in Dart:</p>\n\n<pre><code>import 'dart:convert';\nimport 'dart:html';\n\nclass testHandler {\n\n  Map parsedJSON;\n\n  testHandler();\n\n  void Initialize(){\n    String rawJSON = \"core/testConfiguration.json\";\n\n    HttpRequest.getString(rawJSON)\n    .then((String f) =&gt; parsedJSON.from(JSON.decode(f)))\n    .catchError((Error e) =&gt; print(e.toString()));\n\n    print(parsedJSON);\n  }\n}\n</code></pre>\n\n<p>If you see I'm setting <em><code>parsedJSON</code></em> in <code>.then()</code> but when I'm trying to get the var, it returns null.</p>\n"}, {"tags": ["dart", "awesomium"], "comments": [{"owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 1, "creation_date": 1438938836, "post_id": 31873776, "comment_id": 51665870, "body": "<a href=\"https://en.wikipedia.org/wiki/Dart_(programming_language)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dart_(programming_language)</a>"}, {"owner": {"reputation": 2035, "user_id": 1010492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/mN0R3.jpg?s=128&g=1", "display_name": "Gyum Fox", "link": "https://stackoverflow.com/users/1010492/gyum-fox"}, "reply_to_user": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 0, "creation_date": 1438939101, "post_id": 31873776, "comment_id": 51666051, "body": "@HongOoi OK! So nothing to do with Awesomium itself. Then unless I want support for Dart on my pages, there&#39;s no point enabling it. Consider posting an answer and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 2223781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZODdM.jpg?s=128&g=1", "display_name": "kelegorm", "link": "https://stackoverflow.com/users/2223781/kelegorm"}, "is_accepted": true, "score": 1, "last_activity_date": 1439029682, "creation_date": 1439029682, "answer_id": 31892115, "question_id": 31873776, "link": "https://stackoverflow.com/questions/31873776/awesomium-what-is-dart/31892115#31892115", "title": "Awesomium: what is Dart?", "body": "<p>This options to provide Dart language. With this language you can write your awesome html application more fast then with JS, more maintable. And Dart can work two times faster than JS. </p>\n\n<p>Awesomium is a intergable browser, and if you want to use it with own html applications you can use Dart language to develop it and get benefits I have wrote before.</p>\n\n<p>Moreover, I guess Awesomium is a Chrome's fork and in this case you can write in Dart not html application only but Chrome extensions too!</p>\n"}], "owner": {"reputation": 2035, "user_id": 1010492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/mN0R3.jpg?s=128&g=1", "display_name": "Gyum Fox", "link": "https://stackoverflow.com/users/1010492/gyum-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 31892115, "answer_count": 1, "score": -2, "last_activity_date": 1439029682, "creation_date": 1438938332, "last_edit_date": 1439024431, "question_id": 31873776, "link": "https://stackoverflow.com/questions/31873776/awesomium-what-is-dart", "title": "Awesomium: what is Dart?", "body": "<p>There's <a href=\"http://docs.awesomium.net/html/P_Awesomium_Core_WebPreferences_Dart.htm\" rel=\"nofollow\">an option to enable Dart</a> in Awesomium's preferences (true by default). But the documentation is not very explicit about it. Does anybody know what it is for? What would be the benefits / cons to turn it on?</p>\n"}, {"tags": ["dart", "homebrew"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1438971155, "post_id": 31866975, "comment_id": 51685898, "body": "You could try to install it manually using the bwu_dart_archive_downloader package <a href=\"https://pub.dartlang.org/packages/bwu_dart_archive_downloader\" rel=\"nofollow noreferrer\">pub.dartlang.org/packages/bwu_dart_archive_downloader</a>. I haven&#39;t tried it on OSX though."}], "answers": [{"comments": [{"owner": {"reputation": 992, "user_id": 151072, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3c84abcd6676332b09ece705d5460a7?s=128&d=identicon&r=PG", "display_name": "John Dhom", "link": "https://stackoverflow.com/users/151072/john-dhom"}, "edited": false, "score": 0, "creation_date": 1440099432, "post_id": 31891399, "comment_id": 52145146, "body": "I went this route as well. Really wanted to be able to <code>brew switch</code> between versions tho. Thanks."}], "tags": [], "owner": {"reputation": 63, "user_id": 5157319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uKX4f.png?s=128&g=1", "display_name": "borut", "link": "https://stackoverflow.com/users/5157319/borut"}, "is_accepted": false, "score": 5, "last_activity_date": 1439024041, "creation_date": 1439024041, "answer_id": 31891399, "question_id": 31866975, "link": "https://stackoverflow.com/questions/31866975/error-installing-dart-development-version-on-os-x-with-homebrew/31891399#31891399", "title": "Error installing Dart Development version on OS X with homebrew", "body": "<p>Same thing happened to me too.</p>\n\n<p>I solved it with uninstalling dart first:</p>\n\n<pre><code>brew uninstall --force dart\nbrew install dart --devel --with-dartium --with-content-shell\n</code></pre>\n"}], "owner": {"reputation": 992, "user_id": 151072, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d3c84abcd6676332b09ece705d5460a7?s=128&d=identicon&r=PG", "display_name": "John Dhom", "link": "https://stackoverflow.com/users/151072/john-dhom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1439024041, "creation_date": 1438900959, "question_id": 31866975, "link": "https://stackoverflow.com/questions/31866975/error-installing-dart-development-version-on-os-x-with-homebrew", "title": "Error installing Dart Development version on OS X with homebrew", "body": "<p>Have installed several versions of Dart on OS X using homebrew.</p>\n\n<pre><code>brew tap dart-lang/dart\nbrew install dart\n</code></pre>\n\n<p>Today I did a 'brew upgrade' to Dart 1.11.3 stable, because I want to run cucumber/selenium/chromedriver tests in dartium. Dartium is still at version 39.* and chromedriver wants 40something.</p>\n\n<p><em>note: windows users are able to run these tests in dartium :(</em></p>\n\n<p>So, tried installing development version 1.12.0-dev.5.0 to see if dartium would also upgrade. No joy</p>\n\n<pre><code>brew install dart --devel\n\nWarning: dart-lang/dart/dart-1.11.3 already installed\n</code></pre>\n\n<p>Do I really have to uninstall to install the development version?</p>\n"}, {"tags": ["reflection", "dart", "dart-mirrors"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 3, "last_activity_date": 1439134429, "creation_date": 1439134429, "answer_id": 31905884, "question_id": 31862996, "link": "https://stackoverflow.com/questions/31862996/what-is-the-equivalent-to-mirrorsystem-getname-using-reflectable/31905884#31905884", "title": "What is the equivalent to MirrorSystem.getName using reflectable?", "body": "<p>This might be what you want but it's not as generic as <code>MirrorSystem.getName(#MySymbol);</code></p>\n\n<pre><code>library some_lib;\n\n//import 'dart:mirrors' as mirr;\nimport 'package:reflectable/reflectable.dart';\n\nclass Reflector extends Reflectable {\n  const Reflector() : super(typeCapability);\n}\n\nconst Reflector reflector = const Reflector();\n\nmain() {\n//  print(mirr.MirrorSystem.getName(#SomeClass));\n  reflector.libraries.values.forEach((LibraryMirror lm) {\n    if (lm.declarations.containsKey('SomeClass')) {\n      print(lm.declarations['SomeClass']);\n    }\n  });\n}\n\n@reflector\nclass SomeClass {}\n</code></pre>\n"}], "owner": {"reputation": 2106, "user_id": 2117440, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/hTbXB.jpg?s=128&g=1", "display_name": "Luis Vargas", "link": "https://stackoverflow.com/users/2117440/luis-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 31905884, "answer_count": 1, "score": 2, "last_activity_date": 1439134429, "creation_date": 1438884968, "question_id": 31862996, "link": "https://stackoverflow.com/questions/31862996/what-is-the-equivalent-to-mirrorsystem-getname-using-reflectable", "title": "What is the equivalent to MirrorSystem.getName using reflectable?", "body": "<p>In the dart:mirrors package the way to get a string value from a symbol was:</p>\n\n<pre><code>MirrorSystem.getName(#MySymbol);\n</code></pre>\n\n<p>is there any equivalent for reflectable package?</p>\n"}, {"tags": ["dart", "code-analysis", "static-code-analysis", "dart-analyzer"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5199359, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1361381d0c95299b7ae871c2a81e207e?s=128&d=identicon&r=PG", "display_name": "Brian Wilkerson", "link": "https://stackoverflow.com/users/5199359/brian-wilkerson"}, "is_accepted": true, "score": 5, "last_activity_date": 1438884787, "creation_date": 1438884787, "answer_id": 31862938, "question_id": 31861582, "link": "https://stackoverflow.com/questions/31861582/dart-analyzer-get-type-of-initial-value-of-a-field/31862938#31862938", "title": "Dart analyzer: Get type of initial value of a field", "body": "<p>After getting a fully resolved AST structure, ask the <code>Expression</code> representing the initial value expression for it's <code>staticType</code>. That will return the <code>DartType</code> representing the static type.</p>\n\n<p>It's possible for type inference to produce a more specialized type, which you can access using <code>propagatedType</code>. (And if you don't care which type you get, you can use <code>bestType</code>.</p>\n"}], "owner": {"reputation": 3780, "user_id": 1065654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/74bd400c23607114d9ff560ce1b7391c?s=128&d=identicon&r=PG", "display_name": "maiermic", "link": "https://stackoverflow.com/users/1065654/maiermic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 31862938, "answer_count": 1, "score": 3, "last_activity_date": 1438884787, "creation_date": 1438880140, "question_id": 31861582, "link": "https://stackoverflow.com/questions/31861582/dart-analyzer-get-type-of-initial-value-of-a-field", "title": "Dart analyzer: Get type of initial value of a field", "body": "<p>How can I get the type of an initial value expression of a field using <a href=\"https://www.dartlang.org/\" rel=\"nofollow\">Dart</a>'s <a href=\"https://pub.dartlang.org/packages/analyzer\" rel=\"nofollow\">analyzer</a> API?</p>\n\n<pre><code>class MyClass {\n  var prop = &lt;initial value expression&gt;;\n}\n</code></pre>\n\n<p>If initial value expression is for example <code>'text'</code>, I'd like to get <code>String</code>. If it is a function call, I'd like to get the return type of the function.</p>\n"}]