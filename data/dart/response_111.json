[{"tags": ["dart"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1487782709, "post_id": 42397679, "comment_id": 71942458, "body": "I don&#39;t get how the <code>title</code> getter is involved or what the expected behavior is?"}, {"owner": {"reputation": 4194, "user_id": 127735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pAFe7.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/127735/jonathan"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1487783197, "post_id": 42397679, "comment_id": 71942810, "body": "@G&#252;nterZ&#246;chbauer, the getter is just a title =&gt; _title. The point is, when I call aa(_title = &#39;oi&#39;, _title = &#39;something else&#39;), within aa the first argument is &#39;oi&#39; and the second is &#39;something else&#39;, but they are both _title in the caller scope. I guess this is alright, right?"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1487783382, "post_id": 42397679, "comment_id": 71942935, "body": "It&#39;s a bit confusing because you use <code>s</code> instead of <code>title</code> in the question. So is this why the first parameter doesn&#39;t also have the <code>oi2</code> value assigned inside <code>aa()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4194, "user_id": 127735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pAFe7.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/127735/jonathan"}, "edited": false, "score": 0, "creation_date": 1487783926, "post_id": 42398065, "comment_id": 71943299, "body": "I thought that the processor would parse all values and then call the function, making both arguments the same. I will use this and save one line of code. Thanks"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1488872764, "last_edit_date": 1488872764, "creation_date": 1487783547, "answer_id": 42398065, "question_id": 42397679, "link": "https://stackoverflow.com/questions/42397679/calling-a-function-with-two-same-arguments-but-setting-the-second-while-calling/42398065#42398065", "title": "Calling a function with two same arguments, but setting the second while calling", "body": "<p><code>s</code> is a <code>String</code> which are passed by value, not by reference.</p>\n\n<pre><code>aa(s, s = 'oi2');\n</code></pre>\n\n<p>evaluates the first parameter <code>s</code>, which is <code>'oi'</code><br>\nnext <code>s = 'oi2'</code> is evaluated, which means <code>s</code> gets <code>'oi2'</code> assigned<br>\nthen the result of <code>s = 'oi2'</code> (which is <code>'oi2'</code>) is passed as 2nd parameter.</p>\n\n<p>After <code>aa(s, s = 'oi2');</code> <code>s</code> has the value <code>oi2</code>.</p>\n\n<p>See also <a href=\"https://gist.github.com/floitschG/b278ada0316dca96e78c1498d15a2bb9\" rel=\"nofollow noreferrer\">https://gist.github.com/floitschG/b278ada0316dca96e78c1498d15a2bb9</a></p>\n"}, {"tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": false, "score": 1, "last_activity_date": 1487927029, "last_edit_date": 1487927029, "creation_date": 1487849416, "answer_id": 42414548, "question_id": 42397679, "link": "https://stackoverflow.com/questions/42397679/calling-a-function-with-two-same-arguments-but-setting-the-second-while-calling/42414548#42414548", "title": "Calling a function with two same arguments, but setting the second while calling", "body": "<p>Evaluation order of arguments is left-to-right, so you can rely on the first  argument's value being found by evaluation <code>s</code> to <code>\"ii\"</code>, and then second argument's value is the value of the assignment <code>s = 'oi2</code> - which evaluates to <code>\"oi2\"</code> (and not, technically, by reading the variable, it just happens that the variable is written to with the same value before the function is called). </p>\n\n<p>It is expected - if any implementation does something else, it's broken.</p>\n"}], "owner": {"reputation": 4194, "user_id": 127735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pAFe7.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/127735/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 42398065, "answer_count": 2, "score": 4, "last_activity_date": 1488872764, "creation_date": 1487782524, "last_edit_date": 1487783255, "question_id": 42397679, "link": "https://stackoverflow.com/questions/42397679/calling-a-function-with-two-same-arguments-but-setting-the-second-while-calling", "title": "Calling a function with two same arguments, but setting the second while calling", "body": "<p>I am calling a function that expects two arguments. I use the same variable, but at the second argument I set this variable to another thing.\nSee below:</p>\n\n<p><a href=\"https://dartpad.dartlang.org/2156442de07f56d90b430bc67f3461ac\" rel=\"nofollow noreferrer\">https://dartpad.dartlang.org/2156442de07f56d90b430bc67f3461ac</a></p>\n\n<pre><code>void main() {\n  String s = 'oi';\n\n  aa(s, s = 'oi2');\n}\nvoid aa(String buf, String buf2){\n  print('$buf, $buf2');\n}\n</code></pre>\n\n<p>This will print \"oi, oi2\". \nI want this to happen. I am using a modified notification within properties, like: </p>\n\n<pre><code>set title(String n) {\n    this.modified('title', _title, _title = n);\n}\n</code></pre>\n\n<p>However, I wonder if this can be seen as a bug or it is expected.</p>\n\n<p>thanks, Joe</p>\n"}, {"tags": ["asynchronous", "dart", "future"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487689768, "post_id": 42370787, "comment_id": 71891437, "body": "Hello! Many thanks for the reply. I&#39;ve edited the code according to your comments, but still it&#39;s not working as expected. The request class is simple:  <code>class Request{ \tFuture sendRequest(Object data, bool action,Function callback) async{ \t\tHttpRequest request = new HttpRequest(); \t\tString url = &quot;http:&#47;&#47;example.com&quot;; \t\tawait request \t\t\t..open(&#39;POST&#39;, url) \t\t\t..onLoadEnd.listen((e)=&gt; callback(JSON.decode(request.responseText))) \t\t\t..send(JSON.encode(data)); \t} }</code>"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487689873, "post_id": 42370787, "comment_id": 71891504, "body": "Hard to tell. &quot;it&#39;s not working&quot; is not too helpful. Please edit your question and post the code for <code>Request</code> there. Code in comments is unreadable."}, {"owner": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487690446, "post_id": 42370787, "comment_id": 71891981, "body": "I&#39;ve edited the code with all corrections and added a request class code."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487691038, "post_id": 42370787, "comment_id": 71892436, "body": "I updated my answer. I also changed the last 2 lines in <code>getDialogInfo()</code>"}, {"owner": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487697763, "post_id": 42370787, "comment_id": 71897269, "body": "At the moment I&#39;ve faced the problem that <code>response</code> is <code>&quot;An instance of _Future&quot;</code> and I can&#39;t get actual values."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487697888, "post_id": 42370787, "comment_id": 71897355, "body": "Sorry, I forgot the last line in <code>sendRequest</code> - updated."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "edited": false, "score": 0, "creation_date": 1487711950, "post_id": 42370787, "comment_id": 71905417, "body": "Did it help? . . . ."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1487697866, "last_edit_date": 1487697866, "creation_date": 1487689146, "answer_id": 42370787, "question_id": 42370471, "link": "https://stackoverflow.com/questions/42370471/dart-future-functions-with-callbacks-on-requests/42370787#42370787", "title": "Dart Future functions with callbacks on requests", "body": "<p><code>whenComplete</code> is like <code>finally</code>, it's called no matter whether the request returned normally or with an error. Normally <code>then</code> is used.</p>\n\n<p><code>getDialogsFunc</code> uses <code>async</code> but doesn't use <code>await</code> which is a bit uncommon. This might be your intention, but I'm not sure</p>\n\n<pre><code>Future getDialogsFunc(messagesList) async {\n    for(var i=0;i&lt;messagesList.length;i++){\n        if(messagesList[i][\"player2\"] != player.ID)  \n          await rm.getDialogInfo(messagesList[i][\"player2\"]);\n        if(messagesList[i][\"player1\"] != player.ID)\n         await rm.getDialogInfo(messagesList[i][\"player1\"]);\n    }\n}\n</code></pre>\n\n<p><code>getMessagesInfo</code> could then look like:</p>\n\n<pre><code>void getMessagesInfo(response) await {\n    dialogs = []; // I need this list to be filled to proceed\n    messagesList = response[\"data\"];\n    await getDialogsFunc(messagesList)\n    renderMessages(messagesList);\n}\n</code></pre>\n\n<p>I don't know where <code>Request</code> comes from, therefore hard to tell how that code should look like. It should at least use <code>await</code> for other <code>await</code>s to work as expected.</p>\n\n<pre><code>Future getDialogInfo(int id) async {\n    messages = querySelector(\"account-messages-tab\");\n    var request = new Request();\n    Object data = {\"id\": ServerAPI.PLAYER_INFO, \"data\":{\"id\": id}};\n    final response = await request.sendRequest(data,false);\n    messages.onGotDialogInfo(response)\n}\n</code></pre>\n\n<p><strong>update</strong></p>\n\n<pre><code>class Request{\n    Future sendRequest(Object data, bool action) async{\n        Completer completer = new Completer();\n        HttpRequest request = new HttpRequest();\n        String url = \"http://example.com\";\n        await request\n            ..open('POST', url)\n            ..onLoadEnd.listen((_) { \n               if (request.readyState == HttpRequest.DONE) {\n                 if (request.status == 200) {\n                   // data saved OK.\n                   completer.complete(JSON.decode(request.responseText)); // output the response from the server\n                 } else {\n                   completer.completeError(request.status);\n                 }\n               }\n            })\n            ..send(JSON.encode(data));\n\n        return completer.future;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4655495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qvRhTN3IGYw/AAAAAAAAAAI/AAAAAAAAANU/f2O3gSeN0V8/photo.jpg?sz=128", "display_name": "Alexandra Lutikova", "link": "https://stackoverflow.com/users/4655495/alexandra-lutikova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "accepted_answer_id": 42370787, "answer_count": 1, "score": 3, "last_activity_date": 1487697866, "creation_date": 1487688311, "last_edit_date": 1487690377, "question_id": 42370471, "link": "https://stackoverflow.com/questions/42370471/dart-future-functions-with-callbacks-on-requests", "title": "Dart Future functions with callbacks on requests", "body": "<p>I have an issue with understanding Future functions in dart and async programming. The examples I've found in web do not answer my question, so I would be grateful for community help. </p>\n\n<p>I have a function that asks for players messages list: </p>\n\n<pre><code>Future getMessagesInfo(response) async{\n        dialogs = []; // I need this list to be filled to proceed\n        messagesList = response[\"data\"];\n        await getDialogsFunc(messagesList);\n        renderMessages();\n    }\n</code></pre>\n\n<p>It is a callback for a previous request, which doesn't really matters here. \nSo, here is getDialogsFunc, which purpose is to runs through the list and ask playerInfo for each ID in the response: </p>\n\n<pre><code>Future getDialogsFunc(messagesList) async{\n        for(var i=0;i&lt;messagesList.length;i++){\n            if(messagesList[i][\"player2\"] != player.ID)  await rm.getDialogInfo(messagesList[i][\"player2\"]);\n            if(messagesList[i][\"player1\"] != player.ID)  await rm.getDialogInfo(messagesList[i][\"player1\"]);\n        }\n    }\n</code></pre>\n\n<p>Here is getDialogInfo, which actually sends a request for playerInfo and has a callback function that handles received info: </p>\n\n<pre><code>Future getDialogInfo(int id) async{\n        messages = querySelector(\"account-messages-tab\");\n        var request = new Request();\n        Object data = {\"id\": ServerAPI.PLAYER_INFO, \"data\":{\"id\": id}};\n        await request.sendRequest(data,false, messages.onGotDialogInfo);\n    }\n</code></pre>\n\n<p>The request is a simple class, that handles the requests: </p>\n\n<pre><code>class Request{\n    Future sendRequest(Object data, bool action,Function callback) async{\n        HttpRequest request = new HttpRequest();\n        String url = \"http://example.com\";\n        await request\n            ..open('POST', url)\n            ..onLoadEnd.listen((e)=&gt; callback(JSON.decode(request.responseText)))\n            ..send(JSON.encode(data));\n    }\n}\n</code></pre>\n\n<p>And finally here is a callback for the request: </p>\n\n<pre><code>Future onGotDialogInfo(response) async{\n        List dialog = new List();\n        dialog.add(response[\"data\"][\"id\"]);\n        dialog.add(response[\"data\"][\"login\"]);\n        dialogs.add(dialog);\n }\n</code></pre>\n\n<p>In the first function I wanted to run <code>renderMessages()</code> after I have received information about all messages, so that <code>dialogs</code> List should contain relevant information. In my realisation which I tested with breakpoints the <code>renderMessages()</code> functions runs BEFORE <code>onGotDialogInfo</code> callback. </p>\n\n<p>What should I do to wait for the whole cycle <code>getDialogsFunc</code> functions and only then go to <code>renderMessages()</code>?</p>\n"}, {"tags": ["http", "websocket", "dart"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4292635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9e7e881a2941fcb29fee15fd2ecc55?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Kustermann", "link": "https://stackoverflow.com/users/4292635/martin-kustermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1488027157, "creation_date": 1488027157, "answer_id": 42456289, "question_id": 42352561, "link": "https://stackoverflow.com/questions/42352561/what-are-the-supported-protocols-in-securesocket/42456289#42456289", "title": "What are the supported protocols in SecureSocket?", "body": "<p>Historically unencrypted application protocols were usually assigned their own port (e.g. <code>80</code> for <code>http</code>, <code>25</code> for <code>smtp</code>).</p>\n\n<p><strong>ALPN</strong>: Nowadays most traffic is encrypted via TLS which is a secure transport protocol. Any application protocol can use it. Instead of using new port numbers for application protocols a different solution is available: TLS supports an extension known as <strong>ALPN (Application-Level Protocol Negotiation)</strong> which allows client/server to tell the peer which protocols they support and what they prefer (possibly with a fallback to a protocol deduced by the port number -- which is great for backwards compatibility)</p>\n\n<p>(Side note: There was also a precursor TLS extension known as NPN \"Next Protocol Negotiation\" serving a similar purpose, but it is deprecated for various reasons)</p>\n\n<p><strong>Most common use case is http/2</strong>: Servers listen on port <code>443</code> and offer to speak <code>http/1.1</code>, <code>http/2</code> and let's say <code>spdy</code>. The browser will make a TCP connection to server port <code>443</code> and let's the server know which protocols it supports. The server will then choose which protocol to speak (based on the list the client sent and what the server application supports). For backwards compatibility, client/browsers will fallback to <code>http/1.1</code> if no protocol was negotiated.</p>\n\n<p><strong>Negogiation &amp; Priority</strong> There are 3 cases:</p>\n\n<ul>\n<li><p>Client or Server does not support the ALPN extension: No protocol was negogiated</p></li>\n<li><p>Client and Server support ALPN but have no common protocol: No protocol was neogogated</p></li>\n<li><p>Client and Server support ALPN and there is one or more protocols both support: The protocol with highest priority is taken.</p></li>\n</ul>\n\n<p><strong>Dart support</strong>: Dart added support for ALPN some time ago and exposes it  via the optional named <code>supportedProtocols</code> parameter to </p>\n\n<ul>\n<li><a href=\"https://api.dartlang.org/stable/1.22.1/dart-io/SecureSocket/connect.html\" rel=\"nofollow noreferrer\">SecureSocket.conect</a> for the client part</li>\n<li><a href=\"https://api.dartlang.org/stable/1.22.1/dart-io/SecureServerSocket/bind.html\" rel=\"nofollow noreferrer\">SecureServer.bind</a> for the server part</li>\n</ul>\n\n<p>Once a TLS connection has been established, both ends will be able to see the negogiated protocol via <a href=\"https://api.dartlang.org/stable/1.22.1/dart-io/SecureSocket/selectedProtocol.html\" rel=\"nofollow noreferrer\">SecureSocket.selectedProtocol</a>. If the peer does not support the ALPN TLS extension or there was no common protocol, then <code>selectedProtocol</code> will be <code>null</code>.</p>\n\n<p>The protocols in <code>supportedProtocols</code> are specified in decreasing preference (the first one in the list which is common between server/client will be chosen).</p>\n\n<p><strong>ALPN identifiers</strong> There are no real restrictions on what the protocol identifiers can be. Your application can use its own. Though for public protocols, usually RFCs will recommend which identifiers to use, for example <a href=\"https://tools.ietf.org/html/rfc7540\" rel=\"nofollow noreferrer\">RFC 7540</a> specifies in <a href=\"https://tools.ietf.org/html/rfc7540#section-3.1\" rel=\"nofollow noreferrer\">section 3.1</a>:</p>\n\n<p>\"The string \"h2\" identifies the protocol where HTTP/2 uses Transport Layer Security (TLS)\"</p>\n\n<p><strong>Inspect it yourself</strong>: If you are very curious you can use a network packet inspector, like newer versions of <a href=\"https://en.wikipedia.org/wiki/Wireshark\" rel=\"nofollow noreferrer\">wireshark</a>, to inspect TLS traffic and see what ALPN protocols are offered.</p>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 1124853, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94716e646031b94fa7662e4c6b7699e6?s=128&d=identicon&r=PG", "display_name": "Meshulam Silk", "link": "https://stackoverflow.com/users/1124853/meshulam-silk"}, "is_accepted": true, "score": 3, "last_activity_date": 1488039613, "last_edit_date": 1592644375, "creation_date": 1488039613, "answer_id": 42458483, "question_id": 42352561, "link": "https://stackoverflow.com/questions/42352561/what-are-the-supported-protocols-in-securesocket/42458483#42458483", "title": "What are the supported protocols in SecureSocket?", "body": "<ol>\n<li><p><strong>What is it?</strong></p>\n<p>A list of protocols that the client supports for secure communication</p>\n</li>\n<li><p><strong>What are the possible values?</strong></p>\n<p>Names of protocols and versions separated by a slash (e.g. <code>&quot;http/1.1&quot;</code>)</p>\n</li>\n<li><p><strong>Is the order important?</strong></p>\n<p>Yes. The precedence is set in descending order</p>\n</li>\n</ol>\n<p><strong>Some explanation:</strong></p>\n<p><code>TLS</code> has an extension called <code>ALPN</code> which (as the name suggests) is used to negotiate the application layer protocol to be used for the secure communication.</p>\n<p>In <code>ALPN</code> the protocols are identified using the format I specified above.</p>\n<p><code>SecureSocket</code> implements <code>TLS</code> and therefore has to receive the protocol list parameter to be used in the <code>ALPN</code> stage.</p>\n<p>Unless your server and client are implementing a custom communication protocol I would recommend you just use <code>&quot;http/1.1&quot;</code>.</p>\n<p><strong>More info:</strong></p>\n<p>The only documentation of the protocol list passed to <code>SecureServer</code> I could find in the Dart sources is at <code>SecurityContext._protocolsToLengthEncoding</code> (<code>io/security_context.dart:190</code>):</p>\n<pre><code>/// Encodes a set of supported protocols for ALPN/NPN usage.\n///\n/// The `protocols` list is expected to contain protocols in descending order\n/// of preference.\n///\n/// See RFC 7301 (https://tools.ietf.org/html/rfc7301) for the encoding of\n/// `List&lt;String&gt; protocols`:\n///     opaque ProtocolName&lt;1..2^8-1&gt;;\n///\n///     struct {\n///         ProtocolName protocol_name_list&lt;2..2^16-1&gt;\n///     } ProtocolNameList;\n///\n/// The encoding of the opaque `ProtocolName&lt;lower..upper&gt;` vector is\n/// described in RFC 2246: 4.3 Vectors.\n///\n/// Note: Even though this encoding scheme would allow a total\n/// `ProtocolNameList` length of 65535, this limit cannot be reached. Testing\n/// showed that more than ~ 2^14  bytes will fail to negotiate a protocol.\n/// We will be conservative and support only messages up to (1&lt;&lt;13)-1 bytes.\n</code></pre>\n<p>Going through <a href=\"https://tools.ietf.org/html/rfc7301\" rel=\"nofollow noreferrer\">RFC 7301</a> (<code>ALPN</code> description):</p>\n<pre><code>&quot;ProtocolNameList&quot; contains the list of protocols advertised by the\nclient, in descending order of preference.  Protocols are named by\nIANA-registered, opaque, non-empty byte strings, as described further\nin Section 6 (&quot;IANA Considerations&quot;) of this document. \n</code></pre>\n<p>And <a href=\"https://tools.ietf.org/html/rfc7301#section-6\" rel=\"nofollow noreferrer\">section 6</a>:</p>\n<pre><code>Protocol:  HTTP/1.1\nIdentification Sequence:\n   0x68 0x74 0x74 0x70 0x2f 0x31 0x2e 0x31 (&quot;http/1.1&quot;)\nReference:  [RFC7230]\n\nProtocol:  SPDY/1\nIdentification Sequence:\n   0x73 0x70 0x64 0x79 0x2f 0x31 (&quot;spdy/1&quot;)\nReference:\n   http://dev.chromium.org/spdy/spdy-protocol/spdy-protocol-draft1\n\nProtocol:  SPDY/2\nIdentification Sequence:\n   0x73 0x70 0x64 0x79 0x2f 0x32 (&quot;spdy/2&quot;)\nReference:\n   http://dev.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2\n</code></pre>\n<p>The &quot;Identification Sequence&quot; is the protocol identifier in ASCII bytes. It is the raw data sent in the negotiation stage through the socket.</p>\n<p>Fun fact: In Dart the <code>SecurityContext._protocolsToLengthEncoding</code> method is what encodes the protocol identifiers from string to bytes.</p>\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 42458483, "answer_count": 2, "score": 3, "last_activity_date": 1488039613, "creation_date": 1487618046, "last_edit_date": 1487619633, "question_id": 42352561, "link": "https://stackoverflow.com/questions/42352561/what-are-the-supported-protocols-in-securesocket", "title": "What are the supported protocols in SecureSocket?", "body": "<p>When looking at the documentation of <a href=\"https://api.dartlang.org/stable/1.22.0/dart-io/SecureSocket-class.html\" rel=\"nofollow noreferrer\"><code>SecureSocket</code></a>, I see there's a parameter in the methods <code>secure</code>/<code>connect</code>/<code>secureServer</code> called <code>supportedProtocols</code>. </p>\n\n<ul>\n<li>What is it?</li>\n<li>What are the possible values?</li>\n<li>Is the order important?</li>\n</ul>\n"}, {"tags": ["dart", "sublimetext3"], "answers": [{"comments": [{"owner": {"reputation": 2939, "user_id": 652220, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/B3Bm7.png?s=128&g=1", "display_name": "Argenti Apparatus", "link": "https://stackoverflow.com/users/652220/argenti-apparatus"}, "edited": false, "score": 0, "creation_date": 1487990355, "post_id": 42448696, "comment_id": 72046354, "body": "I&#39;m rather disappointed that the Sublime plugin has not been updated for so long. I&#39;m giving Atom a try, and I&#39;ll give VS Code a go too."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1416886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1816b2eac989b20642bb419e3b51605?s=128&d=identicon&r=PG", "display_name": "filiph", "link": "https://stackoverflow.com/users/1416886/filiph"}, "is_accepted": false, "score": 1, "last_activity_date": 1487972117, "creation_date": 1487972117, "answer_id": 42448696, "question_id": 42334633, "link": "https://stackoverflow.com/questions/42334633/sublime-text-dart-package-on-mac-os-x-live-analysis-not-working/42448696#42448696", "title": "Sublime Text Dart package on Mac OS X - live analysis not working", "body": "<p>It doesn't seem like there's anything wrong with your setup. I'm afraid that the Sublime bundle hasn't been updated since 2015, and there has been a lot of progress since then in the Dart analyzer. You might want to <a href=\"https://github.com/guillermooo/dart-sublime-bundle/issues\" rel=\"nofollow noreferrer\">file an issue</a>.</p>\n\n<p>FWIW, the most popular Sublime-style editor right now seems to be <a href=\"https://code.visualstudio.com/\" rel=\"nofollow noreferrer\">VS Code</a>, and that one has a fantastic and very popular <a href=\"https://marketplace.visualstudio.com/items?itemName=DanTup.dart-code\" rel=\"nofollow noreferrer\">Dart plugin</a>. A lot of people are happy with IntelliJ WebStorm, which has the Dart plugin installed by default.</p>\n"}], "owner": {"reputation": 2939, "user_id": 652220, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/B3Bm7.png?s=128&g=1", "display_name": "Argenti Apparatus", "link": "https://stackoverflow.com/users/652220/argenti-apparatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487972117, "creation_date": 1487550285, "question_id": 42334633, "link": "https://stackoverflow.com/questions/42334633/sublime-text-dart-package-on-mac-os-x-live-analysis-not-working", "title": "Sublime Text Dart package on Mac OS X - live analysis not working", "body": "<p>I have been using Sublime Text and the <a href=\"https://github.com/guillermooo/dart-sublime-bundle\" rel=\"nofollow noreferrer\">Dart package</a> on Windows 7 with no problems. I now want to switch to Mac OS X.</p>\n\n<p>I have Dart 1.22 installed via Homebrew and Sublime Text 3 Build 3126 installed via Homebrew Cask. </p>\n\n<p>I tried setting the Dart package <code>dart_sdk_path</code> to <code>/usr/local/Cellar/dart/1.22.0</code> and <code>/usr/local/Cellar/dart/1.22.0/libexec</code></p>\n\n<p>Looking at the Sublime console I see</p>\n\n<pre><code>reloading plugin Dart.__init__\nreloading plugin Dart._init_\nreloading plugin Dart._init_check\nreloading plugin Dart.AAA\nreloading plugin Dart.analyzer\n...\n...\nreloading plugin Dart.pub_support\nreloading plugin Dart.run\nreloading plugin Dart.stagehand\nplugins loaded\nDart: Exception occurred during init. Aborting\n==============================================\nno analysis server found. Are you using a recent sdk?\n</code></pre>\n\n<p>Live analysis does not work. Nothing happens if I introduce a syntax error to a Dart file. (Running a simple Dart Program from inside the Dart package does work however).</p>\n\n<p>Any clues would be appreciated.</p>\n"}, {"tags": ["dart", "dart-analyzer"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "edited": false, "score": 0, "creation_date": 1487356355, "post_id": 42304511, "comment_id": 71764912, "body": "That seems to work for the very simple example, but it is not working for my more complex BaseModel relationships."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "edited": false, "score": 0, "creation_date": 1487356463, "post_id": 42304511, "comment_id": 71764964, "body": "Can you update your question with a concrete example?"}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1487354216, "creation_date": 1487354216, "answer_id": 42304511, "question_id": 42304424, "link": "https://stackoverflow.com/questions/42304424/nested-parameterized-types-with-dart-1-22-0-new-instantiate-to-bound-rules/42304511#42304511", "title": "Nested parameterized types with Dart 1.22.0 new instantiate to bound rules", "body": "<p>This might do what you want:</p>\n\n<pre><code>abstract class BaseModel&lt;ParentType extends BaseModel&lt;Null&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "edited": false, "score": 0, "creation_date": 1487372549, "post_id": 42305838, "comment_id": 71772693, "body": "This satisfies the analyzer for the basic example, but it breaks where I have more complex inheritance. <code>class ParentModel&lt;ParentType&gt; extends ChildModel&lt;ParentType&gt;</code>  <code>class ChildModel extends BaseModel&lt;ParentType extends BaseModel&gt;</code> My codebase is too large and complex to make all of these typing changes, and I don&#39;t see the benefit. I am resigned to ignoring the rule. I&#39;ve struggled with strong mode in the past, which was the impetus to implement this pattern to begin with.  Before this, I was overriding field types, which to me seems like a preferred solution."}], "tags": [], "owner": {"reputation": 116, "user_id": 7582552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--u9P-XHWLj8/AAAAAAAAAAI/AAAAAAAAAeg/o8Nq-unTQ6Y/photo.jpg?sz=128", "display_name": "Leaf Petersen", "link": "https://stackoverflow.com/users/7582552/leaf-petersen"}, "is_accepted": false, "score": 2, "last_activity_date": 1487359260, "creation_date": 1487359260, "answer_id": 42305838, "question_id": 42304424, "link": "https://stackoverflow.com/questions/42304424/nested-parameterized-types-with-dart-1-22-0-new-instantiate-to-bound-rules/42305838#42305838", "title": "Nested parameterized types with Dart 1.22.0 new instantiate to bound rules", "body": "<p>Depends a bit on what you want to accomplish, but assuming that you want <code>ParentModel</code> to be usable as any kind of <code>BaseModel</code> (where the <code>parentModel</code> field will always be <code>null</code>), then this may be what you want: </p>\n\n<pre><code>abstract class BaseModel&lt;ParentType extends BaseModel&lt;ParentType&gt;&gt; {\n  ParentType parentModel;\n}\n\nclass ParentModel extends BaseModel&lt;Null&gt; {}\n\nclass ChildModel extends BaseModel&lt;ParentModel&gt; {}\n</code></pre>\n\n<p>If not, I would need to know more about what the constraints and goals of your problem are.</p>\n"}], "owner": {"reputation": 177, "user_id": 4557535, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f9a5b0074b788182e527f4e19b85c8b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/4557535/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487359260, "creation_date": 1487353910, "question_id": 42304424, "link": "https://stackoverflow.com/questions/42304424/nested-parameterized-types-with-dart-1-22-0-new-instantiate-to-bound-rules", "title": "Nested parameterized types with Dart 1.22.0 new instantiate to bound rules", "body": "<p>I have an issue related to the new instantiate to bound rule in Dart 1.22.0. I have a <code>BaseModel</code> class that takes a parameterized type called <code>ParentType</code> that itself extends <code>BaseModel</code>. </p>\n\n<p>Not all BaseModels have a specific ParentType, and if I instantiate BaseModel as the ParentType, then I get infinite rule breaking.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>abstract class BaseModel&lt;ParentType extends BaseModel&gt; {\n    ParentType parentModel\n}\n\nclass ParentModel extends BaseModel&lt;BaseModel&lt;...&gt;&gt; {}\n\nclass ChildModel extends BaseModel&lt;ParentModel&gt; {}\n</code></pre>\n\n<p>I\u2019m going to be ignoring the rule for now as this issue hasn't seemed to have any impact on development.</p>\n"}, {"tags": ["dart", "flutter"], "answers": [{"tags": [], "owner": {"reputation": 5909, "user_id": 432455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/650ac2be9efddfc61103fe5a0a13abbd?s=128&d=identicon&r=PG", "display_name": "Ian Hickson", "link": "https://stackoverflow.com/users/432455/ian-hickson"}, "is_accepted": false, "score": 1, "last_activity_date": 1491457452, "creation_date": 1491457452, "answer_id": 43246624, "question_id": 42295014, "link": "https://stackoverflow.com/questions/42295014/mask-crop-an-image/43246624#43246624", "title": "Mask/crop an image", "body": "<p>I would just paint it using a CustomPainter, setting the Paint.BlendMode on the Paint you pass to the method when you paint the image.</p>\n\n<p>See <a href=\"https://docs.flutter.io/flutter/dart-ui/Canvas/drawImageRect.html\" rel=\"nofollow noreferrer\">https://docs.flutter.io/flutter/dart-ui/Canvas/drawImageRect.html</a> and <a href=\"https://docs.flutter.io/flutter/dart-ui/Paint/blendMode.html\" rel=\"nofollow noreferrer\">https://docs.flutter.io/flutter/dart-ui/Paint/blendMode.html</a> and <a href=\"https://docs.flutter.io/flutter/widgets/CustomPaint-class.html\" rel=\"nofollow noreferrer\">https://docs.flutter.io/flutter/widgets/CustomPaint-class.html</a>.</p>\n"}], "owner": {"reputation": 886, "user_id": 1682344, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38b64f4bc7b9321fa69cbb04fb7c18a?s=128&d=identicon&r=PG", "display_name": "rwozniak", "link": "https://stackoverflow.com/users/1682344/rwozniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1505, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1491457452, "creation_date": 1487325967, "last_edit_date": 1495535445, "question_id": 42295014, "link": "https://stackoverflow.com/questions/42295014/mask-crop-an-image", "title": "Mask/crop an image", "body": "<p>What is the best approach to display a cropped/masked image in Flutter?</p>\n\n<p>Lets say I have one image with a mask (eg. an irregular star shape with transparent background) and the other image which I want to mask with this star, so that only the part inside the star of original image would be rendered.</p>\n\n<p>I'm aiming for something like <code>PorterDuffXfermode</code> on Android (similar question here - <a href=\"https://stackoverflow.com/questions/14801075/android-how-to-apply-mask-on-imageview\">Android how to apply mask on ImageView?</a>).</p>\n\n<p>In case of simple mask shapes is going the <a href=\"https://docs.flutter.io/flutter/rendering/RenderClipOval-class.html\" rel=\"nofollow noreferrer\"><code>RenderClipOval</code></a> way a good approach?</p>\n"}]