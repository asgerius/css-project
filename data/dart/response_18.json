[{"tags": ["dart", "polymer", "dart-polymer"], "answers": [{"tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": false, "score": 2, "last_activity_date": 1431539120, "creation_date": 1431539120, "answer_id": 30221888, "question_id": 30218319, "link": "https://stackoverflow.com/questions/30218319/group-a-list-without-redrawing-the-whole-dom-in-polymer/30221888#30221888", "title": "Group a list without redrawing the whole DOM in Polymer", "body": "<p>Afaik, this should only happen if you are creating an entirely new list each time any part of the list changes. If you can instead modify the existing list with only the required changes, then only the modified items should re-render.</p>\n\n<p>If you could post a link to an example polymer app that is experiencing this issue that would be helpful as well.</p>\n\n<p>If there are going to be a large number of items, you should probably look into using the <code>core-list-dart</code> element. It will manage rendering just the current viewport plus a buffer for you.</p>\n"}], "owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431539120, "creation_date": 1431528411, "question_id": 30218319, "link": "https://stackoverflow.com/questions/30218319/group-a-list-without-redrawing-the-whole-dom-in-polymer", "title": "Group a list without redrawing the whole DOM in Polymer", "body": "<p>I'm struggling w/ a challenge that is I think a good example of the kind of thing Polymer (with its observables) makes more difficult than React.</p>\n\n<p>I'm retrieving chat messages from Firebase. As they come in, I'd like to ensure they're sorted by date and I'd like for consecutive messages from the same user to be grouped together. This is so that I can print the user and picture just once when a user posts consecutive messages.</p>\n\n<pre><code>-- Load more --\n[ ] Dave\n  Message\n  Message\n[ ] Jane\n  Message\n  Message\n[ ] Dave\n  Message\n[ Add message ]\n</code></pre>\n\n<p>This needs to handle a) the initial page of N items, b) new messages that come in and c) the \"load more\" that loads <em>older</em> items. It all needs to go in the correct order and group.</p>\n\n<p>After several implementation attempts, here's one that, when a new item comes in (by adding new or loading more, doesn't matter), it a) sorts <code>items</code> by date, then b) groups everything by a user's consecutive messages.</p>\n\n<p><a href=\"https://dartpad.dartlang.org/3681de332d2e965e2480\" rel=\"nofollow\">https://dartpad.dartlang.org/3681de332d2e965e2480</a></p>\n\n<p>The problem: as this sorts and regroups fields that are <code>@observable</code> on every new item, adding a new message to the chat for example causes Polymer to re-draw the whole list in DOM. The user pictures actually flash, and the UI freezes for a moment. It's unacceptable.</p>\n\n<p>This has been done countless times before across chat apps. What is the right (Polymer-friendly?) approach here?</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431520891, "post_id": 30214563, "comment_id": 48534141, "body": "You might create a bug report in github.com/dart-lang/test. I had the impression there already is one but I couldn&#39;t find it."}, {"owner": {"reputation": 4011, "user_id": 563979, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/20OBY.png?s=128&g=1", "display_name": "alextk", "link": "https://stackoverflow.com/users/563979/alextk"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1431524314, "post_id": 30214563, "comment_id": 48536934, "body": "Good idea. Added: <a href=\"https://github.com/dart-lang/test/issues/110\" rel=\"nofollow noreferrer\">github.com/dart-lang/test/issues/110</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4011, "user_id": 563979, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/20OBY.png?s=128&g=1", "display_name": "alextk", "link": "https://stackoverflow.com/users/563979/alextk"}, "edited": false, "score": 0, "creation_date": 1431524121, "post_id": 30214828, "comment_id": 48536752, "body": "Thanks G&#252;nter. I will wait for an eventual suggestion before accepting your answer. I already miss the old solo_test and DartEditor for debugging. Migration to WebStorm is not that easy; I hope it&#39;ll get better overtime."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 4011, "user_id": 563979, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/20OBY.png?s=128&g=1", "display_name": "alextk", "link": "https://stackoverflow.com/users/563979/alextk"}, "edited": false, "score": 0, "creation_date": 1431525421, "post_id": 30214828, "comment_id": 48537874, "body": "Instead of solo_test you have the --name argument but we need WebStorm support and debugging support to be able to properly use it."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1431521006, "last_edit_date": 1431521006, "creation_date": 1431520240, "answer_id": 30214828, "question_id": 30214563, "link": "https://stackoverflow.com/questions/30214563/get-current-script-path-or-current-project-path-using-new-test-runner/30214828#30214828", "title": "Get current script path or current project path using new test runner", "body": "<p>This is a current limitation of <code>pub run</code>.</p>\n\n<p>What I currently do when I run into such requirements is to set an environment variable and read them from within the tests.</p>\n\n<p>I have them set in my OS and set them from grinder on other systems before launching tests. \nThis also works nice from WebStorm where launch configurations allow to specify environment variables.</p>\n\n<p>This might be related <a href=\"http://dartbug.com/21020\" rel=\"nofollow\">http://dartbug.com/21020</a></p>\n"}, {"tags": [], "owner": {"reputation": 4011, "user_id": 563979, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/20OBY.png?s=128&g=1", "display_name": "alextk", "link": "https://stackoverflow.com/users/563979/alextk"}, "is_accepted": true, "score": 0, "last_activity_date": 1433261439, "creation_date": 1433261439, "answer_id": 30601212, "question_id": 30214563, "link": "https://stackoverflow.com/questions/30214563/get-current-script-path-or-current-project-path-using-new-test-runner/30601212#30601212", "title": "Get current script path or current project path using new test runner", "body": "<p>I have the following workaround in the meantime. It is an ugly workaround that gets me the directory name of the current test script if I'm running it directly or with pub run test. It will definitely break if anything in the implementation changes but I needed this desperately...</p>\n\n<pre><code>library test_utils.test_script_dir;\n\nimport 'dart:io';\nimport 'package:path/path.dart';\n\n// temp workaround using test package\nString get testScriptDir {\n  String scriptFilePath = Platform.script.toFilePath();\n  print(scriptFilePath);\n  if (scriptFilePath.endsWith(\"runInIsolate.dart\")) {\n\n    // Let's look for this line:\n    // import \"file:///path_to_my_test/test_test.dart\" as test;\n\n    String importLineBegin = 'import \"file://';\n    String importLineEnd = '\" as test;';\n    int importLineBeginLength = importLineBegin.length;\n\n    String scriptContent = new File.fromUri(Platform.script).readAsStringSync();\n\n    int beginIndex = scriptContent.indexOf(importLineBegin);\n    if (beginIndex &gt; -1) {\n      int endIndex = scriptContent.indexOf(importLineEnd, beginIndex + importLineBeginLength);\n      if (endIndex &gt; -1) {\n        scriptFilePath = scriptContent.substring(beginIndex + importLineBegin.length, endIndex);\n      }\n    }\n  }\n  return dirname(scriptFilePath);\n}\n</code></pre>\n"}], "owner": {"reputation": 4011, "user_id": 563979, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/20OBY.png?s=128&g=1", "display_name": "alextk", "link": "https://stackoverflow.com/users/563979/alextk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 30601212, "answer_count": 2, "score": 2, "last_activity_date": 1433261439, "creation_date": 1431519547, "question_id": 30214563, "link": "https://stackoverflow.com/questions/30214563/get-current-script-path-or-current-project-path-using-new-test-runner", "title": "Get current script path or current project path using new test runner", "body": "<p>I am porting old vm unittest files using the new test package. Some relies on input files in sub directories of my test folder. Before I was using Platform.script to find the location of such files. This works fine when using</p>\n\n<pre><code>$ dart test/my_test.dart\n</code></pre>\n\n<p>However using</p>\n\n<pre><code>$ pub run test\n</code></pre>\n\n<p>this is now pointing to a temp folder (tmp/dart_test_xxxx/runInIsolate.dart). I am unable to locate my test input files anymore. I cannot rely on the current path as I might run the test from a different working directory.</p>\n\n<p>Is there a way to find the location of my_test.dart (or event the project root path), from which I could derive the locations of my files?</p>\n"}, {"tags": ["debugging", "intellij-idea", "dart"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1431491714, "creation_date": 1431491714, "answer_id": 30205757, "question_id": 30205650, "link": "https://stackoverflow.com/questions/30205650/how-to-debug-a-dart-client-side-application-using-intellij-idea-community-editio/30205757#30205757", "title": "How to debug a Dart client Side application using IntelliJ Idea Community Edition?", "body": "<p>Open the Dartium devtools <kbd>F11</kbd> (in Dartium), search for the Dart source files set a breakpoint and reload the page (as in JavaScript).</p>\n\n<p>You can also open the Observatory and use the debugger integrated there but this debugger is not yet as comfortable as the Dartium devtools debugger.</p>\n"}, {"comments": [{"owner": {"reputation": 7891, "user_id": 1737201, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9d553e4eece2656148b5d0e2a613e53e?s=128&d=identicon&r=PG", "display_name": "mezoni", "link": "https://stackoverflow.com/users/1737201/mezoni"}, "edited": false, "score": 0, "creation_date": 1431501896, "post_id": 30207904, "comment_id": 48521138, "body": "Why do you think that this is unfortunately? This is a JetBrains business and their decision."}], "tags": [], "owner": {"reputation": 223, "user_id": 1710958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791510818e4126572f81b2fbdd94bcc8?s=128&d=identicon&r=PG", "display_name": "Naoto Hc", "link": "https://stackoverflow.com/users/1710958/naoto-hc"}, "is_accepted": false, "score": 2, "last_activity_date": 1431503210, "last_edit_date": 1431503210, "creation_date": 1431500773, "answer_id": 30207904, "question_id": 30205650, "link": "https://stackoverflow.com/questions/30205650/how-to-debug-a-dart-client-side-application-using-intellij-idea-community-editio/30207904#30207904", "title": "How to debug a Dart client Side application using IntelliJ Idea Community Edition?", "body": "<p>For IntelliJ Idea 14.1+ (Ultimate Edition), You can use IntelliJ's JavaScript debugger for Dart debugging. I wrote the set up instruction for WebStrom. And it can also apply to IntelliJ Idea (with Dart plugin).</p>\n\n<p><a href=\"http://blog.ntaoo.com/2015/04/lets-start-dart-with-brilliant.html\" rel=\"nofollow\">http://blog.ntaoo.com/2015/04/lets-start-dart-with-brilliant.html</a></p>\n\n<p>The community edition doesn't provide JavaScript Debugger so it doesn't seems to enable Dart debugging. (Correct me if there's some way to enable it)</p>\n"}, {"tags": [], "owner": {"reputation": 7891, "user_id": 1737201, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9d553e4eece2656148b5d0e2a613e53e?s=128&d=identicon&r=PG", "display_name": "mezoni", "link": "https://stackoverflow.com/users/1737201/mezoni"}, "is_accepted": true, "score": 2, "last_activity_date": 1431505919, "creation_date": 1431505919, "answer_id": 30209622, "question_id": 30205650, "link": "https://stackoverflow.com/questions/30205650/how-to-debug-a-dart-client-side-application-using-intellij-idea-community-editio/30209622#30209622", "title": "How to debug a Dart client Side application using IntelliJ Idea Community Edition?", "body": "<p>I think that you cannot do this because JetBrains IntelliJ Idea Community Edition does not intended for such use (web development).</p>\n\n<p>Community Edition<br>\nA free and open-source IDE for Java, Groovy, Scala and Android development.</p>\n\n<p>Ultimate Edition<br>\nA complete toolset for web, mobile and enterprise development.</p>\n"}], "owner": {"reputation": 2106, "user_id": 2117440, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/hTbXB.jpg?s=128&g=1", "display_name": "Luis Vargas", "link": "https://stackoverflow.com/users/2117440/luis-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 30209622, "answer_count": 3, "score": 2, "last_activity_date": 1431505919, "creation_date": 1431490998, "question_id": 30205650, "link": "https://stackoverflow.com/questions/30205650/how-to-debug-a-dart-client-side-application-using-intellij-idea-community-editio", "title": "How to debug a Dart client Side application using IntelliJ Idea Community Edition?", "body": "<p>I would like to know if it is possible to debug a client side web application using IntelliJ Idea 14.1+.</p>\n\n<p>Until the moment I only have found some tutorials for Webstorm and IntelliJ Idea Ultimate Edition.</p>\n"}, {"tags": ["serialization", "dart"], "comments": [{"owner": {"reputation": 75233, "user_id": 123471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t75zo.jpg?s=128&g=1", "display_name": "Seth Ladd", "link": "https://stackoverflow.com/users/123471/seth-ladd"}, "edited": false, "score": 0, "creation_date": 1431485135, "post_id": 30204276, "comment_id": 48514687, "body": "Try the dartson package, that offers some customization options. If you run into a bug or issue, please update this question with the code that you tried and any errors you might be getting. Thanks!"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431490998, "post_id": 30204276, "comment_id": 48516299, "body": "I think the default constructor is only necessary for deserialization (never used a package for (de)serialization). Serialization shouldn&#39;t need it."}, {"owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1431511914, "post_id": 30204276, "comment_id": 48527817, "body": "The api complains if you don&#39;t have a public default constructor when you serialize an object. I also need to deserialize it"}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1439379591, "last_edit_date": 1439379591, "creation_date": 1431491596, "answer_id": 30205743, "question_id": 30204276, "link": "https://stackoverflow.com/questions/30204276/dart-serializing-immutable-objects/30205743#30205743", "title": "Dart serializing immutable objects", "body": "<p>I think the default constructor is only necessary for deserialization (never used a package for (de)serialization). Serialization shouldn't need it. </p>\n\n<p>The default constructor is redundant because if the deserialization package needs a default constructor it obviously attempts to create an instance using the default constructor to afterwards set the field values, which can't work with final fields.</p>\n\n<p>I don't know if a serialization package supports a custom <code>toJson()</code> method/<code>fromJson()</code> constructor but I think this would be the easiest way to go.</p>\n\n<pre><code>class CatalogueItem {\n  final Uri source;\n  final DateTime analysis;\n  final Period fromTo;\n\n  CatalogueItem.create(this.source, this.analysis, this.fromTo);\n  factory CatalogueItem.fromJson(Map json) {\n    return new CatalogueItem.create(\n        json['source']   == null ? null : Uri.parse(json['source']),\n        json['analysis'] == null ? null : DateTime.parse(json['analysis'])),\n        json['fromTo']   == null ? null : new Period.fromJson(json['fromTo']));\n  }\n\n  Map toJson() {\n    return {\n      'source':   source == null ? null : '$source', \n      'analysis': analysis == null ? null : '$analysis', \n      'fromTo':   fromTo == null ? null : fromTo.toJson();\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "is_accepted": false, "score": 0, "last_activity_date": 1431620130, "creation_date": 1431620130, "answer_id": 30242186, "question_id": 30204276, "link": "https://stackoverflow.com/questions/30204276/dart-serializing-immutable-objects/30242186#30242186", "title": "Dart serializing immutable objects", "body": "<p>One option is to read further in the article and use the serialization package, which does handle such cases.</p>\n"}, {"tags": [], "owner": {"reputation": 416, "user_id": 7235145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QTW4A_iRGs/AAAAAAAAAAI/AAAAAAAABco/Dc0b3issIC4/photo.jpg?sz=128", "display_name": "David Morgan", "link": "https://stackoverflow.com/users/7235145/david-morgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1490779956, "creation_date": 1490779956, "answer_id": 43089647, "question_id": 30204276, "link": "https://stackoverflow.com/questions/30204276/dart-serializing-immutable-objects/43089647#43089647", "title": "Dart serializing immutable objects", "body": "<p><a href=\"https://github.com/google/built_value.dart\" rel=\"nofollow noreferrer\">https://github.com/google/built_value.dart</a> may do what you want -- it is specifically for creating immutable classes and serializing them.</p>\n\n<p>Note that this requires a slightly different form for the class. This is to allow built_value to generate an implementation for you, and serializers.</p>\n\n<pre><code>abstract class CatalogueItem\n    implements Built&lt;CatalogueItem, CatalogueItemBuilder&gt; {\n  static Serializer&lt;CatalogueItem&gt; get serializer\n      =&gt; _$catalogueItemSerializer;\n\n  Uri get source;\n  DateTime get analyis;\n  Period get fromTo;\n\n  factory CatalogueItem([updates(CatalogueItemBuilder b)]) =\n      _$CatalogueItem;\n  CatalogueItem._();\n}\n</code></pre>\n\n<p>The generated implementation is immutable (uses final), and also provides operator==, hashCode and toString.</p>\n\n<p>More detailed example: <a href=\"https://github.com/google/built_value.dart/blob/master/example/lib/example.dart\" rel=\"nofollow noreferrer\">https://github.com/google/built_value.dart/blob/master/example/lib/example.dart</a></p>\n"}], "owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1490779956, "creation_date": 1431481722, "last_edit_date": 1431488108, "question_id": 30204276, "link": "https://stackoverflow.com/questions/30204276/dart-serializing-immutable-objects", "title": "Dart serializing immutable objects", "body": "<p>I would like serialize this immutable class </p>\n\n<pre><code>class CatalogueItem {\n  final Uri source;\n  final DateTime analyis;\n  final Period fromTo;\n\n  CatalogueItem.create(this.source, this.analyis, this.fromTo);\n}\n</code></pre>\n\n<p>But I cannot as it is not a simple class. From the web site <a href=\"https://www.dartlang.org/articles/serialization/\" rel=\"nofollow\">https://www.dartlang.org/articles/serialization/</a></p>\n\n<blockquote>\n  <p>Simple: All of the objects to be serialized are data transfer objects\n  (DTOs) with a default constructor.</p>\n</blockquote>\n\n<p>So I have to add a default constructor - which means I have to drop the final keywords and my class is no longer immutable.</p>\n\n<pre><code>class CatalogueItem {\n  Uri source;\n  DateTime analyis;\n  Period fromTo;\n\n  CatalogueItem.create(this.source, this.analyis, this.fromTo);\n  CatalogueItem(){}\n}\n</code></pre>\n\n<p>Is there any way around this one?</p>\n"}, {"tags": ["javascript", "dart"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4893467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5704f1d561586610f2f67ed7e8f43aef?s=128&d=identicon&r=PG&f=1", "display_name": "Satrofu", "link": "https://stackoverflow.com/users/4893467/satrofu"}, "edited": false, "score": 0, "creation_date": 1431544825, "post_id": 30203571, "comment_id": 48550874, "body": "Thank you for the answer. What I wanted to do was exactly the second point. I made it work by calling a JavaScript method, which saddens me since I would like to be able to complete it in Dart."}], "tags": [], "owner": {"reputation": 1207, "user_id": 3676180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ohvv1.jpg?s=128&g=1", "display_name": "Vink", "link": "https://stackoverflow.com/users/3676180/vink"}, "is_accepted": false, "score": 6, "last_activity_date": 1431476382, "last_edit_date": 1592644375, "creation_date": 1431476382, "answer_id": 30203571, "question_id": 30202951, "link": "https://stackoverflow.com/questions/30202951/dart-create-method-from-string/30203571#30203571", "title": "Dart: Create method from string", "body": "<p>I'm not sure to completely understand what you want achieve so i will try to provide the best answers</p>\n<h1>You want to dynamically add method to a class with a specific string identifier</h1>\n<p>In this case it's completely possible but you need to <strong>use some mirror</strong> so <strong>be careful if you want to use this for the web</strong></p>\n<p>here an implementation example :</p>\n<pre><code>import &quot;dart:mirrors&quot;;\n\nclass Test {\n  Map&lt;String, dynamic&gt; _methods = {};\n\n  void addMethod(String name, var cb) {\n    _methods[name] = cb;\n  }\n\n  void noSuchMethod(Invocation inv) {\n    if (inv.isMethod) {\n      Function.apply(_methods[MirrorSystem.getName(inv.memberName)],     inv.positionalArguments);\n    }\n  }\n}\n\nvoid testFunction() {\n  for (int i = 0; i &lt; 5; i++) {\n    print('hello ${i + 1}');\n  }\n}\n\nvoid testFunctionWithParam(var n) {\n  for (int i = 0; i &lt; 5; i++) {\n    print('hello ${i + n}');\n  }\n}\n\nvoid main() {\n  var t = new Test();\n\n  t.addMethod(&quot;printHello&quot;, testFunction);\n  t.addMethod(&quot;printHelloPlusN&quot;, testFunctionWithParam);\n  t.printHello();\n  t.printHelloPlusN(42);\n}\n</code></pre>\n<h1>You want to &quot;execute&quot; code within a string</h1>\n<p>Sorry but it's not possible. it's a big requested features but it's not planned by the dart team be cause it will involve to many change and trad off.</p>\n<p>Maybe it's possible to trick by creating dart file and use <a href=\"https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:isolate.Isolate\" rel=\"noreferrer\">isolate</a> to run it.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4893467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5704f1d561586610f2f67ed7e8f43aef?s=128&d=identicon&r=PG&f=1", "display_name": "Satrofu", "link": "https://stackoverflow.com/users/4893467/satrofu"}, "is_accepted": true, "score": 1, "last_activity_date": 1431561512, "last_edit_date": 1431561512, "creation_date": 1431492073, "answer_id": 30205826, "question_id": 30202951, "link": "https://stackoverflow.com/questions/30202951/dart-create-method-from-string/30205826#30205826", "title": "Dart: Create method from string", "body": "<p>Solution: Create an object in JavaScript such as this:</p>\n\n<pre><code>var FunctionObject = function() {\n  this.fun = function (name)\n  {\n    var text = \"var funs = \" + document.getElementById(\"personalFun\").value;\n    eval(text);\n    return funs(name);\n  };\n};\n</code></pre>\n\n<p>Then create the object in Dart:</p>\n\n<pre><code>caller = new JsObject(context['FunctionObject'], []);\n</code></pre>\n\n<p>Finally call the method to dynamically create the function:</p>\n\n<pre><code>caller.callMethod('fun', [text]);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4893467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5704f1d561586610f2f67ed7e8f43aef?s=128&d=identicon&r=PG&f=1", "display_name": "Satrofu", "link": "https://stackoverflow.com/users/4893467/satrofu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1434, "favorite_count": 1, "accepted_answer_id": 30205826, "answer_count": 2, "score": 3, "last_activity_date": 1431561512, "creation_date": 1431472060, "last_edit_date": 1431490529, "question_id": 30202951, "link": "https://stackoverflow.com/questions/30202951/dart-create-method-from-string", "title": "Dart: Create method from string", "body": "<p>I've been trying to create methods dynamically from strings using Dart to no avail. String example: \"(String str) => return str.length;\". The idea is to allow users to create their own functions to apply to a given string. The only thing I've found is NoSuchMethod which does not seem to apply to my case. I tried using new Function in JavaScript but when passing the function to Dart and executing it, I get the following error: <strong><em>Uncaught TypeError: J.$index$asx(...).call$0 is not a function</em></strong>.</p>\n\n<p>Code examples:</p>\n\n<p>Dart:</p>\n\n<pre><code>context[\"UpdateNames\"] =\n\n(JsObject pTag)\n{\n    print(pTag[\"function\"](\"text\"));\n};\n</code></pre>\n\n<p>JS:</p>\n\n<pre><code>function execute ()\n{\n    var func = {\"function\": new Function(\"str\", \"return str.length;\")};\n    UpdateNames(func);\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Solution: Create an object in JavaScript such as this:</p>\n\n<pre><code>this.fun = function (name)\n  {\n    var text = \"var funs = \" + document.getElementById(\"personalFun\").value;\n    eval(text);\n    return funs(name);\n  };\n</code></pre>\n\n<p>Then create the object in Dart:</p>\n\n<pre><code>caller = new JsObject(context['Point'], []);\n</code></pre>\n\n<p>Finally call the method to dynamically create the function:</p>\n\n<pre><code>caller.callMethod('fun', [text]);\n</code></pre>\n"}, {"tags": ["javascript", "dart"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1431439284, "creation_date": 1431439284, "answer_id": 30193192, "question_id": 30192998, "link": "https://stackoverflow.com/questions/30192998/parallel-run-syntax/30193192#30193192", "title": "Parallel.run syntax", "body": "<p><code>(y) =&gt; () =&gt; renderLine()</code> is a function which is passed as second parameter to <code>Parallel.run()</code> and this function takes one argument and returns a function which doesn't take any argument.</p>\n\n<p>I don't know why it is done this way. </p>\n\n<p><code>(x, y) =&gt; x + y;</code> is just a shorthand for <code>(x, y) { return x + y; }</code></p>\n"}, {"comments": [{"owner": {"reputation": 48313, "user_id": 123415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dVXEK.jpg?s=128&g=1", "display_name": "jcuenod", "link": "https://stackoverflow.com/users/123415/jcuenod"}, "edited": false, "score": 0, "creation_date": 1431444367, "post_id": 30193601, "comment_id": 48495519, "body": "But how does this do anything for <code>Parallel.run</code>?"}], "tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": true, "score": 3, "last_activity_date": 1431508208, "last_edit_date": 1431508208, "creation_date": 1431440292, "answer_id": 30193601, "question_id": 30192998, "link": "https://stackoverflow.com/questions/30192998/parallel-run-syntax/30193601#30193601", "title": "Parallel.run syntax", "body": "<p>\nThe <code>(y) =&gt; () =&gt; renderLine(y)</code> is a function that returns a function. If you write it without the <code>=&gt;</code> shorthand, it is the same as:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>(y) {\n  return () {\n    return renderLine(y);\n  };\n}\n</code></pre>\n\n<p>This means that the <code>List.generate</code> calls this function 100 times, with different values for <code>y</code>. Each call returns a function that will call <code>renderLine</code> with a different value. </p>\n\n<p>This generates a list of <em>functions</em> (each taking zero arguments). \nThat list is the argument to <code>Parallel.run</code>.</p>\n\n<p>So, the code is just using a quick in-line way to create a list, but it is equivalent to:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>var tempList = [];\nfor (int y = 0; y &lt; 100; y++) tempList.add(() =&gt; renderLine(y));\nParallel.run(tempList);\n</code></pre>\n\n<p>The <code>Parallel.run</code> function expects a list of functions, and will run the functions in parallel, so you get 100 calls to <code>renderLine</code> executed in parallel, each with a different argument.</p>\n"}, {"tags": [], "owner": {"reputation": 1390, "user_id": 178064, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6549591778177e649defdb342dd49357?s=128&d=identicon&r=PG", "display_name": "Tonio", "link": "https://stackoverflow.com/users/178064/tonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1431450428, "creation_date": 1431450428, "answer_id": 30197327, "question_id": 30192998, "link": "https://stackoverflow.com/questions/30192998/parallel-run-syntax/30197327#30197327", "title": "Parallel.run syntax", "body": "<p>I'm guessing (haven't watched the video) that the <code>Parallel.run()</code> function receives a list (or iterable) of no-arg functions to run in parallel.  The <code>List.generate()</code> constructor takes an <code>int</code> (length) and a function (which takes one <code>int</code> as an argument) and generates that many items by calling the function for each <code>int</code> in the range <code>0 .. n-1</code>.  So the code <code>new List.generate(100, (y) =&gt; renderLine(y))</code> generates a <code>List</code> of 100 items, each of which is the result of calling <code>renderLine()</code> on each index (that is, <code>renderLine(0), renderLine(1), ... , renderLine(99)</code>).</p>\n\n<p>The code <code>new List.generate(100, (y) =&gt; () =&gt; renderLine(y))</code> returns a list of 100 items, aech of which is a function which takes no argumens, and which when called, calls <code>renderLine()</code> with its index in the list.  That is, the list is: <code>() =&gt; renderLine(0), () =&gt; renderLine(1), () =&gt; renderLine(2), ..., () =&gt; renderLine(99)</code>.</p>\n\n<p>I'm guessing <code>Parallel.run()</code> then runs all those functions in parallel, maybe aggregating the results in a list and returning it?  If so, then the code <code>Parallel.run(new List.generate(100, (y) =&gt; () =&gt; renderLine(y)))</code> does something similar to <code>new List.generate(100, (y) =&gt; () =&gt; renderLine(y))</code>, except in parallel rather than sequentially.</p>\n"}], "owner": {"reputation": 48313, "user_id": 123415, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dVXEK.jpg?s=128&g=1", "display_name": "jcuenod", "link": "https://stackoverflow.com/users/123415/jcuenod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30193601, "answer_count": 3, "score": 4, "last_activity_date": 1431508208, "creation_date": 1431438844, "last_edit_date": 1431441757, "question_id": 30192998, "link": "https://stackoverflow.com/questions/30192998/parallel-run-syntax", "title": "Parallel.run syntax", "body": "<p>I just watched <a href=\"https://www.youtube.com/watch?v=FiXiI2Atexc\" rel=\"nofollow\">this introduction from the Dart Summit</a>. During the talk, this code was put up:</p>\n\n<pre><code>=&gt; new List.generate(100, (y) =&gt; renderLine(y));\n</code></pre>\n\n<p>I'm pretty sure I understand that line. The arrow function is new to me but okay - it looks a little coffee-esque. The point though, was changing this function to run in parallel which was done like this:</p>\n\n<pre><code>=&gt; Parallel.run(new List.generate(100, (y) =&gt; () =&gt; renderLine(y)));\n</code></pre>\n\n<p>Can someone explain the syntax of <code>(y) =&gt; () =&gt; renderLine(y)</code>?</p>\n"}, {"tags": ["postgresql", "dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431437513, "post_id": 30191445, "comment_id": 48489802, "body": "I added a more dartish example to my answer. You also don&#39;t connect the futures (missing returns). I didn&#39;t change this in my example because I don&#39;t know the intention."}, {"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 0, "creation_date": 1431508079, "post_id": 30191445, "comment_id": 48525110, "body": "I don&#39;t think you need the use a StringBuffer to build the query. I believe the bug in the first example is that you are missing the order_by parameter in the map passed to query(). This is probably causing a null to be substituted into your query leading to the odd error message. Try turning on query logging on your db, then you will be able to see the exact text of your queries."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1431526657, "post_id": 30191445, "comment_id": 48538898, "body": "Unfortunately you do need to build the string somehow. My code was not missing the <code>&#39;order_by&#39;: order_by</code> part. I just wrongfully inserted it in the question."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 0, "creation_date": 1431528678, "post_id": 30191445, "comment_id": 48540616, "body": "@GregLowe I fixed the code so it looks like it actually used to. By the way are you interested in a <a href=\"http://stackoverflow.com/questions/30107414/sessions-in-dart?noredirect=1#comment48491159_30107414\">bounty</a>?"}, {"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 0, "creation_date": 1431588005, "post_id": 30191445, "comment_id": 48565916, "body": "Thanks for the offer. ;) But no need."}], "answers": [{"comments": [{"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 1, "creation_date": 1431508283, "post_id": 30191805, "comment_id": 48525261, "body": "Currently the postgresql package just uses the simple query protocol which means that all parameter substitution is done by the client in the driver, and a raw sql string is sent to the server. So you can actually substitute order_by using @order_by (I think the bug is that Lukasz forgot to add this to the map passed to query()). This will change one day when I get around to implementing more of the postgresql protocol."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 0, "creation_date": 1431508400, "post_id": 30191805, "comment_id": 48525340, "body": "I guess it&#39;s better to not mention it because it would be a breaking change then ;-)"}, {"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 1, "creation_date": 1431508514, "post_id": 30191805, "comment_id": 48525408, "body": "Good point. But, the syntax will be different too, postgresql uses $ dollar signs, and my driver uses @ signs. Though I guess I could write a translation mode for backwards compatibility."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1431508510, "last_edit_date": 1431508510, "creation_date": 1431435921, "answer_id": 30191805, "question_id": 30191445, "link": "https://stackoverflow.com/questions/30191445/order-by-query-using-dart-and-postresql/30191805#30191805", "title": "Order by query using dart and postresql", "body": "<p>I don't think using bound variables for column names (same for table names, index names, ...) is supported by the SQL standard. These names need to be hardcoded in the SQL statement using for example String concatenation or interpolation. </p>\n\n<p>But ensure you don't use any values from user input here and/or do proper validation and sanitiy checks to not introduce any SQL injection backdoors.</p>\n\n<p>The PostgreSql package doesn't process the SQL you pass to execute, it only forwards it to the database in the required format and parses the results (not true currently, but it should work this way, see comment below).</p>\n\n<p>An example: </p>\n\n<pre><code>bool isValidSqlColumnName(String columnName) {\n  return new RegExp(r'^[a-zA-Z_][a-zA-Z0-9_]*$').hasMatch(columnName);\n}\n\ngetPost(int limit, int offset, String order_by){\n    if(!isValidSqlColumnName(order_by)) {\n      throw 'Only valid column names are accepted.';\n    }\n    connect(uri).then((conn){\n      conn.query('''select * from posts\n                    order by $order_by\n                    limit @limit offset @offset''', {'limit': limit, 'offset': offset, 'order_by': order_by})\n                    .toList()\n                    .then((rows){\n        print(rows);\n      })\n      .whenComplete(() =&gt; conn.close());\n    })\n    .catchError((err) =&gt; print('Error in getPost: $err'));\n  }\n</code></pre>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 30191805, "answer_count": 1, "score": 1, "last_activity_date": 1431528602, "creation_date": 1431435084, "last_edit_date": 1495535213, "question_id": 30191445, "link": "https://stackoverflow.com/questions/30191445/order-by-query-using-dart-and-postresql", "title": "Order by query using dart and postresql", "body": "<p>When running this query using dart and the postresql driver</p>\n\n<pre><code>  getPost(int limit, int offset, String order_by){\n    connect(uri).then((conn){\n      conn.query('''select * from posts\n                    order by @order_by\n                    limit @limit offset @offset''', {'limit': limit, 'offset': offset, 'order_by': order_by})\n                    .toList()\n                    .then((rows){\n        print(rows);\n      })\n      .whenComplete(() =&gt; conn.close());\n    })\n    .catchError((err) =&gt; print('Error in getPost: $err'));\n  }\n</code></pre>\n\n<p>I get the <code>Error: 42601 non-integer constant in ORDER BY</code>.</p>\n\n<p>The code above is a method of a helper class. I run it with the following code.</p>\n\n<pre><code>dbUtil.getPost(10, 10, \"posted_at\");\n</code></pre>\n\n<p>I read <a href=\"https://stackoverflow.com/questions/28574079/why-does-rails-activerecord-gives-a-postgres-syntaxerror-non-integer-constant\">here</a> that postgresql expects a string literal. That's why I also tried this code <code>dbUtil.getPost(10, 10, r\"posted_at\");</code> with no success.\nIf I replace <code>@order_by</code> with <code>posted_at</code> the query returns the values correctly.</p>\n\n<p>Does anybody know how to solve this problem?</p>\n\n<p>Working code inspired by the answer below.</p>\n\n<pre><code>  getPost(int limit, int offset, String order_by){\n    connect(uri).then((conn){\n      var sb = new StringBuffer();\n      sb.write(\"select * from posts \");\n      sb.write(order_by);\n      sb.write(\" limit @limit offset @offset\"); \n      String query = sb.toString();\n      conn.query(query, {'limit': limit, 'offset': offset})\n                    .toList()\n                    .then((rows){\n        print(rows);\n      })\n      .whenComplete(() =&gt; conn.close());\n    })\n    .catchError((err) =&gt; print('Error in getPost: $err'));\n  }\n</code></pre>\n"}, {"tags": ["dart", "dart-async"], "comments": [{"owner": {"reputation": 34787, "user_id": 1092711, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x6e4H.jpg?s=128&g=1", "display_name": "Pavlo", "link": "https://stackoverflow.com/users/1092711/pavlo"}, "edited": false, "score": 0, "creation_date": 1431421907, "post_id": 30186108, "comment_id": 48478084, "body": "How exactly it doesn&#39;t work?"}, {"owner": {"reputation": 1271, "user_id": 3296660, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a76d22e6c17075af3579b14eacb95192?s=128&d=identicon&r=PG&f=1", "display_name": "Druxtan", "link": "https://stackoverflow.com/users/3296660/druxtan"}, "reply_to_user": {"reputation": 34787, "user_id": 1092711, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x6e4H.jpg?s=128&g=1", "display_name": "Pavlo", "link": "https://stackoverflow.com/users/1092711/pavlo"}, "edited": false, "score": 0, "creation_date": 1431422207, "post_id": 30186108, "comment_id": 48478287, "body": "I get an instance of future instead of a value."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431422602, "post_id": 30186108, "comment_id": 48478607, "body": "The close vote is totally unnecessary. This question is quite clear and a good fit for StackOverflow."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431427835, "post_id": 30186108, "comment_id": 48482432, "body": "You are trying to approximate a double by a fraction. Since all doubles are binary values, they are always fractions of a power of 2. If you want an approximation that is not precise but close enough, it might be faster to start with the int/2^n fraction that instead of starting from scratch. You  are likely losing precision in the multiplications and divisions you are doing anyway."}, {"owner": {"reputation": 1271, "user_id": 3296660, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a76d22e6c17075af3579b14eacb95192?s=128&d=identicon&r=PG&f=1", "display_name": "Druxtan", "link": "https://stackoverflow.com/users/3296660/druxtan"}, "edited": false, "score": 0, "creation_date": 1431447622, "post_id": 30186108, "comment_id": 48497991, "body": "@Irn I&#39;m not sure to understand, could you provide an example ?"}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431508817, "post_id": 30186108, "comment_id": 48525646, "body": "Doubles are represented as an integer times a power of two. That means that a fractional value (negative power of two) is always exactly that integer divided by a power of two. You can find the integer and power much simpler than the searching you do, see: <a href=\"https://dartpad.dartlang.org/0c00e388f74d334b8758\" rel=\"nofollow noreferrer\">dartpad.dartlang.org/0c00e388f74d334b8758</a> . That doesn&#39;t mean that there isn&#39;t some other fraction that happens to generate the same double value due to rounding, and your code might find that eventually. I&#39;m <i>guessing</i> that you might be able to find such a fraction sooner by starting from the exact fraction, somehow."}], "answers": [{"comments": [{"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 2, "creation_date": 1431425587, "post_id": 30186584, "comment_id": 48480844, "body": "This won&#39;t work, for the reason you state above - for a timer to work, control needs to return to the event loop. The timedOut variable is never set to true while the loop is running. What you can do instead is use a stopwatch: <code>var sw = new StopWatch()..start(); while (df != d) { if (sw.elapsedMilliseconds &gt;= 2000) { return &quot;$top&#47;$bot&quot;; }; ...} </code>."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431425693, "post_id": 30186584, "comment_id": 48480911, "body": "Thanks for looking. I wondered why it worked but it seemed it did. Have to check closer."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431426440, "post_id": 30186584, "comment_id": 48481430, "body": "If seems the sync version was just a lot faster and <code>timedOut</code>  was set to <code>true</code> after it was already finished."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1431426265, "last_edit_date": 1495535049, "creation_date": 1431422223, "answer_id": 30186584, "question_id": 30186108, "link": "https://stackoverflow.com/questions/30186108/dart-async-await-encapsulation/30186584#30186584", "title": "Dart async/await encapsulation", "body": "<p>There are several problems with this code.\nIf you want to return the result of an async operation the return type has to be <code>Future&lt;...&gt;</code></p>\n\n<pre><code>Future&lt;String&gt; decimalToFractional(double d) async {\n</code></pre>\n\n<p>You can then consume the result like </p>\n\n<pre><code>main() async {\n  print(await decimalToFractional(123456789.123456789));\n}\n</code></pre>\n\n<p>If you want timeout to take effect you need to return to the event loop. As long as sync execution is running timeout doesn't fire.\nSee also <a href=\"https://stackoverflow.com/a/22473556/217408\">https://stackoverflow.com/a/22473556/217408</a></p>\n"}], "owner": {"reputation": 1271, "user_id": 3296660, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a76d22e6c17075af3579b14eacb95192?s=128&d=identicon&r=PG&f=1", "display_name": "Druxtan", "link": "https://stackoverflow.com/users/3296660/druxtan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431426265, "creation_date": 1431420891, "question_id": 30186108, "link": "https://stackoverflow.com/questions/30186108/dart-async-await-encapsulation", "title": "Dart async/await encapsulation", "body": "<p>I want to return fractional of a decimal, but if the function takes too much time, the function must give up. I tried this, but it doesn't work... I probably did something wrong. Could you to show me my mistake?</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>String decimalToFractional(double d) async {\n  var df = 1.0;\n  var top = 1;\n  var bot = 1;\n\n  var future = new Future&lt;String&gt;(() {\n    while (df != d) {\n      if (df &lt; d) {\n        top += 1;\n      } else {\n        bot += 1;\n        top = (d * bot).toInt();\n      }\n      df = top / bot;\n    }\n    return new Future.value('$top/$bot');\n  });\n  future.timeout(new Duration(seconds: 2), onTimeout: () =&gt; new Future.value(d.toString()));\n  return await future;\n}\n</code></pre>\n"}, {"tags": ["dart", "dart-polymer", "paper-elements"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431415846, "post_id": 30184406, "comment_id": 48474299, "body": "Have you tried calling <code>m.notifyResize();</code> (before or after <code>open()</code>)?"}, {"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431418556, "post_id": 30184406, "comment_id": 48475822, "body": "I just did, but same thing. Am I also supposed to add the dialog manually to the DOM somewhere or just let .open() place it there?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431421281, "post_id": 30184406, "comment_id": 48477606, "body": "Usually it centers itself. You could try to add it statically and just change the content at runtime."}, {"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431471136, "post_id": 30184406, "comment_id": 48511020, "body": "Thanks for that idea. I did try the code above with an empty project and simple polymer element. Same thing, not centered. Bug report worthy? I haven&#39;t submitted one before... Thanks again."}, {"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431491558, "post_id": 30184406, "comment_id": 48516459, "body": "Got the suggestion you made to work however now I&#39;ve got a new issue. If I use querySelector to grab the PaperActionDialog at runtime from the DOM then instantiate a PolymerElement into the modal dialog&#39;s content, for some reason it calls the PolymerElement&#39;s attached() but then when it finally renders the dialog it calls detached() then attached() again. Is this because the PaperActionDialog is pushing the content to a shadow DOM when rendering?"}], "owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431415877, "creation_date": 1431415651, "last_edit_date": 1431415877, "question_id": 30184406, "link": "https://stackoverflow.com/questions/30184406/is-a-paper-action-dialog-supposed-to-automatically-center-and-scroll-with-dart-p", "title": "Is a paper-action-dialog supposed to automatically center and scroll with dart-polymer?", "body": "<p>I am trying to launch a modal dialog using PaperActionDialog in Dart and the dialog never centers and doesn't scroll if the content is longer than the window. Is it supposed to automatically? All the polymer-only examples I come across seem to. Do I have to style it somehow? Here's the code I'm using:</p>\n\n<pre><code>PaperActionDialog m = new PaperActionDialog();\nm.setAttribute(\"role\", \"dialog\");\nm.setAttribute(\"backdrop\", \"true\");\nm.autoCloseDisabled=true;\nPaperButton closeButton = new PaperButton();\ncloseButton.text=\"Close\";\ncloseButton.raised = true;\ncloseButton.setAttribute(\"primary\", \"true\");\ncloseButton.setAttribute(\"dismissive\", \"true\");\nm.children.add(closeButton);\nm.heading=\"History\";\nm.open();\n</code></pre>\n"}, {"tags": ["dart", "dart-polymer", "dart-unittest"], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "edited": false, "score": 0, "creation_date": 1431495450, "post_id": 30181801, "comment_id": 48517774, "body": "Updated again because I forgot you need to register the entrypoint for the transformer."}, {"owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "edited": false, "score": 0, "creation_date": 1431518844, "post_id": 30181801, "comment_id": 48532671, "body": "Thanks for the update. The objective is for these tests to run on a continuous integration server. That is why I tried <code>content-shell</code> as I assumed I needed a headless vm for drone.io."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "edited": false, "score": 1, "creation_date": 1431518990, "post_id": 30181801, "comment_id": 48532756, "body": "You can use the generic <code>@TestOn(&#39;browser&#39;)</code> in the test file and then specify a concrete browser when you run the tests <code>pub run test -pcontent-shell</code>."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 3, "last_activity_date": 1431495420, "last_edit_date": 1495540689, "creation_date": 1431404917, "answer_id": 30181801, "question_id": 30180683, "link": "https://stackoverflow.com/questions/30180683/the-built-in-library-darthtml-is-not-available-on-the-stand-alone-vm/30181801#30181801", "title": "The built-in library &#39;dart:html&#39; is not available on the stand-alone VM", "body": "<p>You need to create an html page for the test and run the test in the browser. The new <code>test</code> package has a decent readme explaining how to do that. (I have an issue that browser tests time out often. This is a known issue and will probably be fixed soon.)</p>\n\n<p><strong>Update</strong>\nSee <a href=\"https://stackoverflow.com/questions/27345396\">Instantiating polymer element via dart code</a>, <a href=\"https://stackoverflow.com/questions/20474071\">Dynamically create polymer element</a> for how to create a Polymer element dynamically.</p>\n\n<p>Instead of <code>main()</code> use</p>\n\n<pre><code>@whenPolymerReady\ninit() {\n</code></pre>\n\n<p><code>@TestOn('content-shell')</code> is ok but it's better to use <code>@TestOn('browser')</code> and then specify the concrete browser using the <code>-p</code> argument (<code>-pchrome</code>, <code>-pdartium</code>, <code>-pfirefox</code>, <code>-pcontent-shell</code>, ... see test README for a list of supported browsers). You can pass more than one <code>-p</code> at a time to run the tests at more than one browser.</p>\n\n<p>You can also use a custom HTML page for the test</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;!-- custom_html_test.html --&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;browser/polymer test&lt;/title&gt;\n    &lt;link rel=\"import\" href=\"app_element.html\"&gt;\n    &lt;link rel=\"import\" href=\"child_element.html\"&gt;\n    &lt;link rel=\"x-dart-test\" href=\"html_test.dart\"&gt;\n    &lt;script src=\"packages/test/dart.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"granny\"&gt;\n      &lt;div&gt;\n        &lt;div id=\"parent\"&gt;\n          &lt;div&gt;\n            &lt;div id=\"child\"&gt;child&lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;app-element id=\"polymer-parent\" unresolved&gt;\n      &lt;child-element id=\"polymer-child\"&gt;&lt;/child-element&gt;\n    &lt;/app-element&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>where the file names needs to be the same as the Dart test file except <code>.html</code> as file extension and <code>&lt;link rel=\"x-dart-test\" href=\"html_test.dart\"&gt;</code> refers to your Dart test file. <code>app-element</code>, <code>child-element</code> are Polymer elements I used in my test (like your Foo)</p>\n\n<p><strong>Another update</strong>\nI assume you <strong>need</strong> to use a custom HTML file (not tried without yet) for Polymer tests because otherwise there is no way to register an entry point for the transformer.\nAnd then add the html file as entry point to the Polymer transformer section in <code>pubspec.yaml</code></p>\n"}], "owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431530952, "creation_date": 1431397395, "last_edit_date": 1431530952, "question_id": 30180683, "link": "https://stackoverflow.com/questions/30180683/the-built-in-library-darthtml-is-not-available-on-the-stand-alone-vm", "title": "The built-in library &#39;dart:html&#39; is not available on the stand-alone VM", "body": "<p>I'd like to be able to unit test my custom polymer elements. </p>\n\n<p>Given a component in lib/web_components:</p>\n\n<pre><code>class Foo extends PolymerElement {\n  Foo.created() : super.created();\n}\n</code></pre>\n\n<p>and a test in test/web_components:</p>\n\n<pre><code>main() {\n  test(\"Should Be a PolymerElement\", (){\n    Foo undertest = new Foo.created();\n\n    expect(undertest, new isInstanceOf&lt;PolymerElement&gt;());\n  });\n}\n</code></pre>\n\n<p>Running the test results in the error mentioned in the title. How can I avoid this error? </p>\n\n<p>Edit:</p>\n\n<p>So I've tried adding <code>@TestOn('content-shell')</code> at the top of my client side test files, and adding <code>@TestOn('vm')</code> to the server side tests. </p>\n\n<p>In Grinder I have:</p>\n\n<pre><code>@Task('Test')\ntest() {\n  new PubApp.local('test').run([]);\n  new PubApp.local('test').run([\"-p\", \"content-shell\"]);\n}\n</code></pre>\n\n<p>The server-side tests run fine but the client-side tests throw the following error:</p>\n\n<pre><code>pub run test -p content-shell test/web_component/foo_test.dart\n  \"Failed to start content shell: No such file or directory\"\n</code></pre>\n\n<p>Edit 2:</p>\n\n<p>I've tried running in the dartium platform with the following command since content-shell doesn't seem to work:</p>\n\n<pre><code>pub run test:test -p dartium test/web_component/foo_test.dart\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>Failed to load \"test/web_component/foo_test.dart\": type 'test.backend.declarer.Declarer' is not a subtype of type 'test.backend.declarer.Declarer' of 'function result'.\n  packages/test/test.dart 44:32                          _declarer\n  packages/test/test.dart 108:5                          test\n  foo_test.dart 9:3                     main\n  package:test                                           IframeListener.start\n  foo_test.dart.browser_test.dart 6:18  main\n</code></pre>\n"}, {"tags": ["dart", "operator-overloading", "metaprogramming", "vm-implementation", "dart2js"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431376059, "post_id": 30176588, "comment_id": 48460000, "body": "I&#39;m not sure this can easily distinguished in Dart because Dart compiles at runtime. As far as I know Dart optimizes such things if they are called often enough and it has enough knowledge. Dart drops type annotations at runtime which makes this even harder to tell."}, {"owner": {"reputation": 545, "user_id": 1625079, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/4X0OX.jpg?s=128&g=1", "display_name": "Gabriel Ratener", "link": "https://stackoverflow.com/users/1625079/gabriel-ratener"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431376198, "post_id": 30176588, "comment_id": 48460075, "body": "I guess I should rephrase the question, cause dart may do something in the middle."}], "answers": [{"comments": [{"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 1, "creation_date": 1431602257, "post_id": 30213284, "comment_id": 48573727, "body": "What&#39;s true of Dart is true of any compiler: &quot;what you get out, whether it be byte-code or object-code or source-code,&quot; is promised to be <i>functionally equivalent</i> to what you put in, but not identical.  &quot;Operator overloading&quot; is definitely something that you can expect Dart to do a lot of fiddling-around with, since the target language doesn&#39;t support that notion directly. As far as performance goes, best advice is: <i>&quot;Don&#39;t guess, don&#39;t try to predict.  Profile.&quot;</i> Try to avoid writing things that might be hot-spots, but to find out if they are:  Profile the (generated) code."}], "tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": false, "score": 2, "last_activity_date": 1431599841, "last_edit_date": 1431599841, "creation_date": 1431515913, "answer_id": 30213284, "question_id": 30176588, "link": "https://stackoverflow.com/questions/30176588/metaprogramming-performance-in-dart/30213284#30213284", "title": "Metaprogramming performance in Dart", "body": "<p>Operators in Dart are no different from other methods on objects.\nThe language specification allows methods to be resolved at runtime, and most of them will be.</p>\n\n<p>However, a smart compiler may be able to recognize the function being called at compile-time, if it is exceedingly clear from the code which kind of values are flowing where. There is no hard-and-fast rule for when that happens, because it depends on how good an analysis the compiler is used, which can change from day to day (generally for the better). \nThere's a big difference between the dart2js compiler, which can do all sorts of analyses and optimizations, and the VM JIT compiler which has to be very fast. In the latter case, optimization will also happen at runtime, when the optimizing recompilation knows the types actually reaching a function.</p>\n\n<p>So, a Dart compiler can definitely do optimizations like the one you show.\nWhether and when it does so isn't possible to say in general.</p>\n\n<p>All in all, don't worry until you have actually identified that a <code>+</code> call is a bottleneck. </p>\n"}], "owner": {"reputation": 545, "user_id": 1625079, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/4X0OX.jpg?s=128&g=1", "display_name": "Gabriel Ratener", "link": "https://stackoverflow.com/users/1625079/gabriel-ratener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434277495, "creation_date": 1431374368, "last_edit_date": 1434277495, "question_id": 30176588, "link": "https://stackoverflow.com/questions/30176588/metaprogramming-performance-in-dart", "title": "Metaprogramming performance in Dart", "body": "<p>When using operator overloading in Dart, are the operating functions resolved at compile time, or at runtime, or something else?</p>\n\n<p>In which cases will the vm or dart2js be able to bypass something like this:</p>\n\n<pre><code>function add(left, right) {\n    if (isPrimitive(left) &amp;&amp; isPrimitive(right)) {\n        return left + right;\n    } else if (left.hasOverload(\"+\")) {\n        return left.plus(right);\n    } else if (left.hasReverseOverload(\"+\")) {\n        return right.plus(left);\n    } else {\n        throw new Error(\"Cannot add objects\");\n    }\n}\n</code></pre>\n\n<p>Where in dart, maybe <code>a + b</code> at compile time would be changed to <code>add(a,b)</code>. This would be runtime checking, and for obvious reasons I have concerns about the performance of this. So basically, when in Dart if at all is runtime checking used?</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431347840, "post_id": 30167734, "comment_id": 48441900, "body": "Didn&#39;t know that. Would be interesting what&#39;s the point in allowing it in the initializer list but not as default value."}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431349178, "post_id": 30167734, "comment_id": 48442782, "body": "The main difference is when you explicitaly set the optional parameter with <code>null</code>. With the default value, the field will be equal to <code>null</code> though with this initializer list it will be equal to <code>new Bar()</code>"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1431349284, "post_id": 30167734, "comment_id": 48442857, "body": "That wasn&#39;t what I meant. I&#39;m curious why a non-const value is allowed in the initializer list but not as default value."}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431351120, "post_id": 30167734, "comment_id": 48444172, "body": "Indeed. I don&#39;t know."}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431426103, "post_id": 30167734, "comment_id": 48481195, "body": "The default value is part of the function signature - it&#39;s documented in the DartDoc, and you must not override a function with a default value with a function with a different default value. That only works if the value is known without evaluating a runtime expression. Also, there isn&#39;t any clear time where it should be evaluated at runtime. It&#39;s a default <i>value</i>, so you want the same value every time the function is called, and it would be slightly odd (but only slightly) if it was evaluated the first time the function is called. All in all, it makes everything much simpler if it is const."}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": true, "score": 5, "last_activity_date": 1431347524, "creation_date": 1431347524, "answer_id": 30167734, "question_id": 30167680, "link": "https://stackoverflow.com/questions/30167680/what-is-the-best-way-to-set-the-default-instance-for-a-final-private-field-with/30167734#30167734", "title": "What is the best way to set the default instance for a final private field with optional parameter?", "body": "<p></p>\n\n<pre><code>class Foo {\n  final Bar _bar;\n  Foo({Bar bar}) : _bar = bar != null ? bar : new Bar();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7891, "user_id": 1737201, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9d553e4eece2656148b5d0e2a613e53e?s=128&d=identicon&r=PG", "display_name": "mezoni", "link": "https://stackoverflow.com/users/1737201/mezoni"}, "is_accepted": false, "score": 1, "last_activity_date": 1431351332, "creation_date": 1431351332, "answer_id": 30169131, "question_id": 30167680, "link": "https://stackoverflow.com/questions/30167680/what-is-the-best-way-to-set-the-default-instance-for-a-final-private-field-with/30169131#30169131", "title": "What is the best way to set the default instance for a final private field with optional parameter?", "body": "<p>I recommend to use static methods when a logic is complex thing.</p>\n\n\n\n<pre><code>class Foo {\n  final Object _field1;\n\n  Foo({Object value1}) : this._field1 = _setUpField1(value1);\n\n  static Object _setUpField1(Object value) {\n    // Some complex logic\n    return value;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 1, "accepted_answer_id": 30167734, "answer_count": 2, "score": 4, "last_activity_date": 1431351332, "creation_date": 1431347354, "question_id": 30167680, "link": "https://stackoverflow.com/questions/30167680/what-is-the-best-way-to-set-the-default-instance-for-a-final-private-field-with", "title": "What is the best way to set the default instance for a final private field with optional parameter?", "body": "<p>Given a class with final private field _bar:</p>\n\n<pre><code>class Foo() {\n\nfinal Bar _bar;\n\n    Foo({Bar bar}) : _bar = bar {\n\n        //error: list cannot be used as setter, it is final\n       _bar = new Bar();\n    }\n\n}\n</code></pre>\n\n<p>Attempting to set it in the parameter list results in this error</p>\n\n<pre><code>//error: default values of an object must be constant\nFoo({Bar bar: new Bar()}) : _bar = bar ..\n</code></pre>\n\n<p>I'd like to keep the optional parameter so that I can inject mocks during unit tests. What is the best approach for this?</p>\n"}, {"tags": ["eclipse", "playframework-2.0", "dart", "dart-pub", "typesafe-activator"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431937548, "post_id": 30166045, "comment_id": 48692744, "body": "I&#39;m not sure what your added paragraph means exactly, but static ressources don&#39;t need to be processed by <code>pub serve</code> only Dart source files and HTML files containing Dart script tags and possibly CSS files which might be inlined. Can you provide more details about what you actually tried to accomplish?"}, {"owner": {"reputation": 251, "user_id": 4850463, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EMIPMI6MCDs/AAAAAAAAAAI/AAAAAAAAABM/LEXWZ4n_xOQ/photo.jpg?sz=128", "display_name": "Evan Thomas", "link": "https://stackoverflow.com/users/4850463/evan-thomas"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431954315, "post_id": 30166045, "comment_id": 48703480, "body": "In production, dart resources are compiled to static resources. But development the dart resources are not static. If I change something in the dart in the editor I want it reflected in the browser. Furthermore, I want to be able to debug the dart application in eclipse which I believe means running dart natively in dartium."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1431688205, "last_edit_date": 1431688205, "creation_date": 1431342619, "answer_id": 30166151, "question_id": 30166045, "link": "https://stackoverflow.com/questions/30166045/setting-up-play-framework-and-dart-for-development-and-debug/30166151#30166151", "title": "Setting up play framework and dart for development and debug", "body": "<p>I guess the best way is to use a proxy with rules to forward requests for Dart resources to <code>pub serve</code> and play resources to <code>activator</code>.\nThis would be simple to build in Dart for example using <a href=\"https://pub.dartlang.org/packages/shelf\" rel=\"nofollow\">shelf</a>, <a href=\"https://pub.dartlang.org/packages/shelf_route\" rel=\"nofollow\">shelf_route</a> and <a href=\"https://pub.dartlang.org/packages/shelf_proxy\" rel=\"nofollow\">shelf_proxy</a> or nginx with a few forwarding rules.</p>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 4850463, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EMIPMI6MCDs/AAAAAAAAAAI/AAAAAAAAABM/LEXWZ4n_xOQ/photo.jpg?sz=128", "display_name": "Evan Thomas", "link": "https://stackoverflow.com/users/4850463/evan-thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1431688675, "last_edit_date": 1431688675, "creation_date": 1431688621, "answer_id": 30258151, "question_id": 30166045, "link": "https://stackoverflow.com/questions/30166045/setting-up-play-framework-and-dart-for-development-and-debug/30258151#30258151", "title": "Setting up play framework and dart for development and debug", "body": "<p>G\u00fcnter's suggestion was pretty good. I installed nginx and used the following config</p>\n\n<pre><code>server {\n    listen       8080;\n    server_name  localhost;\n\n    location / {\n        # Dart pub serv\n        proxy_pass http://localhost:9100;\n    }\n\n    location /api/ {\n        # Play \n        proxy_pass http://localhost:9000/api/;\n    }\n}\n</code></pre>\n\n<p>I then start the dart server as</p>\n\n<pre><code>pub serve --port 9100\n</code></pre>\n\n<p>The typesafe/play server listens on 9000 by default.</p>\n\n<p>I found I had to use a dart port number well away from the activator port because it seems to listen on nearby ports as well.</p>\n\n<p>Evan</p>\n"}], "owner": {"reputation": 251, "user_id": 4850463, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EMIPMI6MCDs/AAAAAAAAAAI/AAAAAAAAABM/LEXWZ4n_xOQ/photo.jpg?sz=128", "display_name": "Evan Thomas", "link": "https://stackoverflow.com/users/4850463/evan-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 30166151, "answer_count": 2, "score": 1, "last_activity_date": 1431937346, "creation_date": 1431342310, "last_edit_date": 1431937346, "question_id": 30166045, "link": "https://stackoverflow.com/questions/30166045/setting-up-play-framework-and-dart-for-development-and-debug", "title": "Setting up play framework and dart for development and debug", "body": "<p>I'm developing a relatively simple web app using play framework for the server and dart for the client. I'm using eclipse. Development and debug are fine on their own but how do to get them to work together?</p>\n\n<p>Play has its own web server (activator) that knows how to load the entry points for each endpoint and the dart environment know how to serve up dart resources (pub serve) for dartium and (haven't tried this yet) serve js resources for other browsers. It there a way for activator to ask the dart/pub system for resources as needed?</p>\n\n<p>I tried adding a symlink from the server static resource directly to to the dart/html resources but it seems these files need to be processed by pub server before they can be used by the browser.</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1431337236, "post_id": 30164113, "comment_id": 48435060, "body": "Have you verified that when you compare those two instances (<code>print(a == b)</code>) returns actually <code>true</code>? Do you update a field which is used to calculate the hashCode of one of the instances? Can you please add your <code>hashCode</code> and <code>operator ==</code> implementations?"}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1431341541, "post_id": 30164113, "comment_id": 48437866, "body": "What is <code>_data</code>? Please add some more code and show us your key class."}, {"owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1431380095, "post_id": 30164113, "comment_id": 48462057, "body": "I have reworked my question to supply extra information"}, {"owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "edited": false, "score": 0, "creation_date": 1431384398, "post_id": 30164113, "comment_id": 48463670, "body": "Can you provide a simple test case that demonstrates the issue? I&#39;ve tried to reproduce it, and it works as expected. Also, don&#39;t worry about quoting code from the dart libraries."}, {"owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "edited": false, "score": 0, "creation_date": 1431397729, "post_id": 30164113, "comment_id": 48467365, "body": "I&#39;d make your member variables final to start with. It is dangerous to use mutable objects as keys and can lead to strange bugs like what you are describing."}, {"owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "edited": false, "score": 0, "creation_date": 1431406797, "post_id": 30164113, "comment_id": 48469907, "body": "I would love to make the fields immutable, but I need to stream the class to and from JSON and that requires a public constructor with no arguments, so how can I make the fields final?"}, {"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1431427291, "post_id": 30164113, "comment_id": 48482022, "body": "The <code>_data</code> value is just an internal value in the map implementation that is guaranteed to not be a key (because it&#39;s kept private). The code can&#39;t use <code>null</code> as marker for &quot;not found&quot; because <code>null</code> may be a valid key."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1431404606, "creation_date": 1431404606, "answer_id": 30181762, "question_id": 30164113, "link": "https://stackoverflow.com/questions/30164113/dart-cannot-find-a-value-in-the-map-even-through-the-keys-are-equal/30181762#30181762", "title": "Dart Cannot find a value in the map even through the keys are equal", "body": "<p>The fields you use to calculate the hashcode should be immutable (final). I guess you change one of these fields after you inserted the element into the map. This results in the map not finding the instance by hashcode and therefore doesn't reach the state where it does the equals check. </p>\n"}], "owner": {"reputation": 1689, "user_id": 315979, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/540b6a3876270cb9195c68d0968e237f?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/315979/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431480525, "creation_date": 1431336762, "last_edit_date": 1431380059, "question_id": 30164113, "link": "https://stackoverflow.com/questions/30164113/dart-cannot-find-a-value-in-the-map-even-through-the-keys-are-equal", "title": "Dart Cannot find a value in the map even through the keys are equal", "body": "<p>I have a map that has a complex object as a key</p>\n\n<pre><code>Map&lt;TimeseriesNode , MyObject&gt; myMap = {};\n</code></pre>\n\n<p>TimeseriesNode class has implemented <code>hashCode</code> and <code>==</code> operator </p>\n\n<pre><code>class TimeseriesNode {\n  String product;\n  String model;\n  String element;\n  String locationName;\n  String locationSuffix;\n\n  TimeseriesNode.create(this.product, this.model, this.element, this.locationName, this.locationSuffix);\n\n  int get hashCode {\n    return hashObjects([product, model, element, locationName, locationSuffix]);\n  }\n\n  bool operator ==(other) {\n    if (other is! TimeseriesNode) return false;\n    TimeseriesNode key = other;\n    return (key.element == element \n        &amp;&amp; key.locationName == locationName \n        &amp;&amp; key.locationSuffix == locationSuffix \n        &amp;&amp; key.model == model \n        &amp;&amp; key.product == product);\n  }\n}\n</code></pre>\n\n<p>(method hashObjects comes from import \"package:quiver/core.dart\";)</p>\n\n<p>One part of my application creates the keys and adds them to the map.</p>\n\n<p>Another part of the application creates a new <code>TimeseriesNode</code> (which is equal to the original key) and then uses this instance to query the map.</p>\n\n<pre><code>MyObject obj = myMap[ node];\n</code></pre>\n\n<p>Oddly the map returns <code>null</code>. I have done some debugging and found that myMap[node] calls the following code in the dart:collection-patch_compact_hash code </p>\n\n<pre><code>  V operator [](Object key) {\n    var v = _getValueOrData(key);\n    return identical(_data, v) ? null : v;\n  }\n</code></pre>\n\n<p>When I inspect <code>v</code>, I can see 'v' is the object that was originally added to the map, but the code returns null. </p>\n\n<p>If I put a break point on my equals method, it is never called. </p>\n\n<p>What is going on?</p>\n"}, {"tags": ["javascript", "dart", "dart-js-interop"], "comments": [{"owner": {"reputation": 3706, "user_id": 2969580, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wYsyT.jpg?s=128&g=1", "display_name": "GuyT", "link": "https://stackoverflow.com/users/2969580/guyt"}, "edited": false, "score": 0, "creation_date": 1431334980, "post_id": 30163462, "comment_id": 48433603, "body": "I guess you made a typo: <code>context[this].callMethod(&quot;_super&quot;);</code>(without the quotes)."}, {"owner": {"reputation": 2279, "user_id": 1646671, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d73882d3b106bda2f491b3f5475b55da?s=128&d=identicon&r=PG", "display_name": "uldall", "link": "https://stackoverflow.com/users/1646671/uldall"}, "reply_to_user": {"reputation": 3706, "user_id": 2969580, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wYsyT.jpg?s=128&g=1", "display_name": "GuyT", "link": "https://stackoverflow.com/users/2969580/guyt"}, "edited": false, "score": 0, "creation_date": 1431335112, "post_id": 30163462, "comment_id": 48433687, "body": "Without quotes &#39;this&#39; would refer to the instance of the HelloWorldScene Dart class. I wish to call _super() on the &quot;this&quot; variable living in the Javascript VM."}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1431335990, "post_id": 30163462, "comment_id": 48434248, "body": "Can you post a complete example. please?"}, {"owner": {"reputation": 3706, "user_id": 2969580, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wYsyT.jpg?s=128&g=1", "display_name": "GuyT", "link": "https://stackoverflow.com/users/2969580/guyt"}, "edited": false, "score": 0, "creation_date": 1431336060, "post_id": 30163462, "comment_id": 48434299, "body": "I&#39;m not familiar with DartJS but I would suggest to set a <code>debugger;</code> before the <code>context[&quot;this&quot;].callMethod(&quot;_super&quot;);</code> and see what&#39;s in <code>context</code>."}, {"owner": {"reputation": 2279, "user_id": 1646671, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d73882d3b106bda2f491b3f5475b55da?s=128&d=identicon&r=PG", "display_name": "uldall", "link": "https://stackoverflow.com/users/1646671/uldall"}, "reply_to_user": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1431339809, "post_id": 30163462, "comment_id": 48436799, "body": "@Robert I added the complete example to github."}], "answers": [{"comments": [{"owner": {"reputation": 2279, "user_id": 1646671, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d73882d3b106bda2f491b3f5475b55da?s=128&d=identicon&r=PG", "display_name": "uldall", "link": "https://stackoverflow.com/users/1646671/uldall"}, "edited": false, "score": 0, "creation_date": 1431343902, "post_id": 30166093, "comment_id": 48439385, "body": "I now get the following error: <code>NoSuchMethodError: method not found: &#39;_super&#39;</code>. It seems that it is not the correct &quot;this&quot; I get a hold off."}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": false, "score": 1, "last_activity_date": 1431342448, "creation_date": 1431342448, "answer_id": 30166093, "question_id": 30163462, "link": "https://stackoverflow.com/questions/30163462/referring-to-this-in-dart-js-interop/30166093#30166093", "title": "Referring to &quot;this&quot; in Dart JS interop", "body": "<p>You can capture the Js <code>this</code> with <a href=\"https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:js.JsFunction#id_JsFunction-withThis\" rel=\"nofollow\">JsFunction.withThis(f)</a>. With that definition an additionnal argument will be added as first argument. Thus your code should be :</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:js';\n\nclass HelloWorldScene {\n  HelloWorldScene() {\n    var sceneCollectionJS =\n        new JsObject.jsify({\"onEnter\": new JsFunction.withThis(_onEnter)});\n\n    context[\"HelloWorldScene\"] =\n        context[\"cc\"][\"Scene\"].callMethod(\"extend\", [sceneCollectionJS]);\n  }\n\n  void _onEnter(jsThis) {\n    jsThis.callMethod(\"_super\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2279, "user_id": 1646671, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d73882d3b106bda2f491b3f5475b55da?s=128&d=identicon&r=PG", "display_name": "uldall", "link": "https://stackoverflow.com/users/1646671/uldall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1589849644, "creation_date": 1431334837, "last_edit_date": 1431339763, "question_id": 30163462, "link": "https://stackoverflow.com/questions/30163462/referring-to-this-in-dart-js-interop", "title": "Referring to &quot;this&quot; in Dart JS interop", "body": "<p>I want to implement the following code in Dart:</p>\n\n<pre><code>var HelloWorldScene = cc.Scene.extend({\n    onEnter:function () {\n        this._super();\n    }\n});\n</code></pre>\n\n<p>My Dart implementation looks like this:</p>\n\n<pre><code>class HelloWorldScene {\n  HelloWorldScene() {\n    var sceneCollectionJS = new JsObject.jsify({ \"onEnter\": _onEnter});\n\n    context[\"HelloWorldScene\"] = context[\"cc\"][\"Scene\"].callMethod(\"extend\", [sceneCollectionJS]);\n  }\n\n  void _onEnter() {\n    context[\"this\"].callMethod(\"_super\");\n  }\n}\n</code></pre>\n\n<p>Unfortunately I get the following error when running the code:</p>\n\n<blockquote>\n  <p>The null object does not have a method 'callMethod'</p>\n</blockquote>\n\n<p>on the following line:</p>\n\n<blockquote>\n  <p>context[\"this\"].callMethod(\"_super\", []);</p>\n</blockquote>\n\n<p>context[\"this\"] seems to be null, so my question is: How do I refer to the \"this\" variable from Dart?</p>\n\n<p>UPDATE 1:\nThe full example code can be found on github:\n<a href=\"https://github.com/uldall/DartCocos2dTest\" rel=\"nofollow\">https://github.com/uldall/DartCocos2dTest</a></p>\n"}, {"tags": ["html", "dart", "dart-html"], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431331799, "post_id": 30159838, "comment_id": 48431720, "body": "Hi Gunter, Many thanks for that.  My table is fully generated/dynamic - I only  define &lt;table&gt;&lt;/table&gt; in the html file.  I tried setting the cell.id=&#39;#a&#39;+cell.hashcode.toString()  (when I create the cell). Then I use your method above, but the returned &quot;elem&quot; is always null. I call it immediately after setting the cell.id.  :(     Cheers, Steve"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 1, "creation_date": 1431331911, "post_id": 30159838, "comment_id": 48431798, "body": "The <code>#</code> is part of the selector not of the id. <code>#</code> is to tell <code>querySelector</code> it should look for the id, not the tag name. See my code, only in Dart code <code>#</code> is used but not in the HTML part."}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431337256, "post_id": 30159838, "comment_id": 48435073, "body": "Hi, Sorry, my typo here. My code was er... &#39;correct&#39;. But I have now tried cell.id=&#39;&#39;A&quot;+hashcode.tostring()  and the query as querySelector(&#39;#${id}&#39;).  No change."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431337320, "post_id": 30159838, "comment_id": 48435117, "body": "I&#39;m not sure what your last comment means. Does it work for you now?"}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431364313, "post_id": 30159838, "comment_id": 48453415, "body": "Hi Gunter. Thanks for persevering with me! No it doesn&#39;t work. I still get a null element. I&#39;ve tried a few variations. I will play further, and set one cell element id to something recognisable, and try to retrieve it. Might be a shadowRoot problem.  I&#39;ll report back when I find a solution. cheers, Steve"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431364486, "post_id": 30159838, "comment_id": 48453522, "body": "So, you are using Polymer? Do you have a custom <code>main()</code> method where you execute this code or is this code inside a Polymer element? <a href=\"http://stackoverflow.com/a/20982658/217408\">stackoverflow.com/a/20982658/217408</a>"}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1431458380, "post_id": 30159838, "comment_id": 48504773, "body": "Hi, yes, I&#39;m using Polymer, and my table is inside a polymer template. cheers,"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1431321620, "last_edit_date": 1431321620, "creation_date": 1431319625, "answer_id": 30159838, "question_id": 30157259, "link": "https://stackoverflow.com/questions/30157259/in-dart-how-do-i-get-the-width-of-a-table-cell/30159838#30159838", "title": "In Dart, how do I get the width of a table cell?", "body": "<p><strong>index.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;style&gt;\n      table,td {\n        border: 1px solid red;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n        &lt;td id=\"id1\"&gt;xxx&lt;/td&gt;&lt;td id=\"id2\"&gt;yyyy&lt;/td&gt;&lt;td id=\"id3\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;script type=\"application/dart\" src=\"index.dart\"&gt;&lt;/script&gt;\n    &lt;script src=\"packages/browser/dart.js\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>index.dart</strong></p>\n\n<pre><code>import 'dart:html';\n\nvoid main() {\n  printWidth('id1');\n  printWidth('id2');\n  printWidth('id3');\n}\n\nprintWidth(String id) {\n  print('${id}:');\n  CssStyleDeclaration elem = querySelector('#${id}').getComputedStyle();\n\n  print('width: ${elem.width}');\n  print('borderLeftWidth: ${elem.borderLeftWidth}');\n  print('borderRightWidth: ${elem.borderRightWidth}');\n  print('paddingLeft: ${elem.paddingLeft}');\n  print('paddingRight: ${elem.paddingRight}');\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>id1:\nwidth: 24px\nborderLeftWidth: 1px\nborderRightWidth: 1px\npaddingLeft: 1px\npaddingRight: 1px\nid2:\nwidth: 32px\nborderLeftWidth: 1px\nborderRightWidth: 1px\npaddingLeft: 1px\npaddingRight: 1px\nid3:\nwidth: 0px\nborderLeftWidth: 1px\nborderRightWidth: 1px\npaddingLeft: 1px\npaddingRight: 1px\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "is_accepted": false, "score": 0, "last_activity_date": 1435528349, "creation_date": 1435528349, "answer_id": 31105146, "question_id": 30157259, "link": "https://stackoverflow.com/questions/30157259/in-dart-how-do-i-get-the-width-of-a-table-cell/31105146#31105146", "title": "In Dart, how do I get the width of a table cell?", "body": "<p>This has worked for me:</p>\n\n<pre><code>      cell.contentEdge.width;\n</code></pre>\n"}], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1435528349, "creation_date": 1431296602, "last_edit_date": 1431321639, "question_id": 30157259, "link": "https://stackoverflow.com/questions/30157259/in-dart-how-do-i-get-the-width-of-a-table-cell", "title": "In Dart, how do I get the width of a table cell?", "body": "<p><br>\nOK, there seem to be lots of questions+answers related to this topic, but I cannot find a precise answer, mainly because the they seem to be related to <b>setting</b> a cell width. I'm not interested in that. Apologies if I've missed it!</p>\n\n<p>I want to draw a canvas in a cell, which has not had it's width set. </p>\n\n<p>I have a TableCellElement CELL and I can display innerHTML fine. But I want to add a child canvas to CELL, so I need the cell width.</p>\n\n<p>CELL.style.width, CELL.clientWidth, CELL.client, etc all return zero, always.</p>\n\n<p>Is this possibly a Dart bug, am I going about it incorrectly, or is it not possible? Should I find the column the cell is in (how?), and then find the width of that? <br>\nCheers<br>\nSteve</p>\n"}, {"tags": ["postgresql", "dart", "dart-async"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431424089, "post_id": 30156524, "comment_id": 48479747, "body": "I updated my answer."}], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1431424663, "post_id": 30159775, "comment_id": 48480209, "body": "Thanks for the update. The code looks nicer. Are there also speed gains?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1431424932, "post_id": 30159775, "comment_id": 48480399, "body": "Same speed. But now I looked closer at your code and saw that it doesn&#39;t do what it is (or I think it is) intended for. Because you don&#39;t use the future returned from <code>conn.execute()</code> the completer doesn&#39;t complete when all commands are done but already when all commands are enqueued in the Dart event queue (but not yet even started). <code>Future.wait</code> waits for all futures to be completed and then completes the future it returns."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 1, "creation_date": 1431425706, "post_id": 30159775, "comment_id": 48480920, "body": "You are right. Interestingly enough my code still works. It seems that <code>execute</code> is able to complete the task before the connection to the data base is closed."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1431424073, "last_edit_date": 1431424073, "creation_date": 1431319232, "answer_id": 30159775, "question_id": 30156524, "link": "https://stackoverflow.com/questions/30156524/postgresql-open-connection-and-execute-more-then-one-command/30159775#30159775", "title": "postgresql open connection and execute more then one command", "body": "<p>You need to add a <code>return</code> here</p>\n\n<pre><code>return _addTagToPost(conn, tag_values);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Future _addTagToPost(Connection conn, Map values) {\n  print('trying to add tag to attached tags');\n  return conn.execute(\n      \"insert into atatched_tags values(currval('posts_post_id_seq'),\n      @tag)\", values)\n  .catchError((err){\n    print('Execute error in addTagToPost: $err');\n  });\n}\n</code></pre>\n\n<p>to keep the async operations connected. Otherwise the connection is closed before <code>_addTagToPost()</code> is finished which results in not completing this SQL statement.</p>\n\n<p>Update to the edit in the question. This could also be done like </p>\n\n<pre><code>Future _addTagToPost(Connection conn, List&lt;Map&gt; values) {\n  return Future.wait(values.map((value){\n    return conn.execute(\"insert into attached_tags values(currval('posts_post_id_seq'), @tag)\", value)\n        .catchError((err){\n          print('Execute error in addTagToPost: $err');\n        });\n  }));\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>Future _addTagToPost(Connection conn, List&lt;Map&gt; values) =&gt;\n    Future.wait(values.map((value) =&gt; conn\n        .execute(\n            \"insert into attached_tags values(currval('posts_post_id_seq'), @tag)\",\n            value)\n        .catchError((err) =&gt; print('Execute error in addTagToPost: $err'))));\n</code></pre>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 30159775, "answer_count": 1, "score": 1, "last_activity_date": 1431425880, "creation_date": 1431291128, "last_edit_date": 1431425880, "question_id": 30156524, "link": "https://stackoverflow.com/questions/30156524/postgresql-open-connection-and-execute-more-then-one-command", "title": "postgresql open connection and execute more then one command", "body": "<p>I want to do the following two insert operations using the postgresql driver for dart. \nThe code below works!</p>\n\n<pre><code>INSERT INTO posts(\n            title, description, posted_at, last_edited, \"user\", \n            editor, up_votes, down_votes, flag, links_to)\n    VALUES ('test title', 'test description', now(), now(), 'dartUser', 'dartUser', \n            0, 0, 'healthy', 'http://google.com');\n\n\nINSERT INTO atatched_tags(\n            post_id, tag)\n    VALUES (currval('posts_post_id_seq'), 'testTag');\n</code></pre>\n\n<p>The second insert should only be done if an optional parameter is given to the dart method.\nThe code I have right now looks like this.</p>\n\n<pre><code>  addPost(Map post_values, [Map tag_values]){\n    Connection conn;\n    connect(uri)\n    .then((_conn){\n      conn = _conn;\n    })\n    .then((_){\n      conn.execute('''insert into posts(title, description, posted_at, last_edited, \"user\", editor, up_votes, down_votes, flag, links_to)\n                                  values(@title, @description, now(), now(), @user, @editor, @upVotes, @downVotes, @flag, @links_to)''', post_values)\n      .catchError((err){\n        print('Execute error in addPost: $err');\n    })\n    .then((_){\n      if(tag_values != null){\n        _addTagToPost(conn, tag_values);\n      }\n    })\n    .whenComplete(() =&gt; conn.close());\n    })\n    .catchError((err) =&gt; print('Error in addPost: $err'));\n  }\n\n  _addTagToPost(Connection conn, Map values) {\n    print('trying to add tag to attached tags');\n    conn.execute(\"insert into atatched_tags values(currval('posts_post_id_seq'), @tag)\", values)\n    .catchError((err){\n      print('Execute error in addTagToPost: $err');\n    });\n  }\n</code></pre>\n\n<p>I run the method as follows.</p>\n\n<pre><code>dbUtil.addPost({'title': 'Sample title', \n    'description': 'This is a description for a sample post', \n    'user': 'dartUser', 'editor': 'dartUser', 'upVotes': 0,\n    'downVotes': 0, 'flag': 'healthy', 'links_to': \n    'http://google.com'}, {'tag':'testTag'});\n</code></pre>\n\n<p><code>dbUtil</code> is an instance of the class where the two methods above reside.</p>\n\n<p>The code does not throw any errors. But even though it writes to the console <code>trying to add tag to attached tags</code> the second insert operation is not executed (no rows are added to the table). The first works as expected.</p>\n\n<p>Any help is much appreciated.</p>\n\n<p>Edit: If somebody wants to add mulitple tags in the <code>_addTagToPost</code> function then this code might be helpfull.\nEdit2: The code below is <strong>incorrect</strong> I leave it, but check the comments in the accepted answer.</p>\n\n<pre><code>  Future _addTagToPost(Connection conn, List&lt;Map&gt; values) {\n    var completer = new Completer();\n    values.forEach((value){\n      conn.execute(\"insert into attached_tags values(currval('posts_post_id_seq'), @tag)\", value)\n          .catchError((err){\n            print('Execute error in addTagToPost: $err');\n          });\n    });\n    return completer.future;\n  }\n</code></pre>\n"}, {"tags": ["dart", "dart-polymer"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431239303, "post_id": 30147396, "comment_id": 48404666, "body": "Have you tried it with the built JS output? This is what matters in the end."}, {"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431244393, "post_id": 30147396, "comment_id": 48405795, "body": "Thanks for the reply. Yes I have. It&#39;s twice as slow on my phone (Galaxy Note 4). In a previous non-core/paper version it was less than half the time. I guess I am not sure where best to focus my efforts in speeding this up. If you have any direction I&#39;d love to hear it."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1431244656, "post_id": 30147396, "comment_id": 48405864, "body": "Did you ensure to build in release mode? A common way to speed this up is to only render what&#39;s actually visible like polymers core-list or bwu_datagrid and others do."}, {"owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431288075, "post_id": 30147396, "comment_id": 48419204, "body": "Thanks! I had not come across the datagrid yet and really appreciate that suggestion. I wanted to add sorting anyway so it looks like that might do the trick. The example had tens of thousands of rows and was very fast."}], "owner": {"reputation": 223, "user_id": 2909507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/78bcc1cc3649bec32a9c03be23470875?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2909507/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431228360, "creation_date": 1431228360, "question_id": 30147396, "link": "https://stackoverflow.com/questions/30147396/is-adding-dynamic-rows-to-a-table-in-dart-slow", "title": "Is adding dynamic rows to a table in dart slow?", "body": "<p>I'm adding 300 rows to a table dynamically and it's taking about 1.75 seconds to add the rows and at least another 1 to 1.5 seconds to render. I know this might sound like I am being picky but overall it's a 3+ second delay to show the table when this happens and the calcs behind that table execute really quickly.</p>\n\n<p>I'm using a simple  TableRowElement row = tBody.addRow();\nand then row.addCell() for about ten columns of data. The data is coming from a List of Map objects. </p>\n\n<p>If this is normal, then is there a way I can get the rows to render as they are created to sort of \"speed up\" the process from the user's point of view? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["postgresql", "dart"], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1431248258, "post_id": 30146369, "comment_id": 48406717, "body": "Thanks for your answer. Also it seems that <code>user</code> is a bad choice of column name. For future reference. If you want this to actually work you need to execute something like this: <code>conn.execute(&#39;insert into posts(title, description, posted_at, last_edited, &quot;user&quot;, editor, up_votes, down_votes, flag) values(@title, @description, now(), now(), @user, @editor, @upVotes, @downVotes, @flag)&#39;, values)</code>"}], "tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": true, "score": 1, "last_activity_date": 1431216649, "creation_date": 1431216649, "answer_id": 30146369, "question_id": 30146304, "link": "https://stackoverflow.com/questions/30146304/error-42601-using-postgresql-and-dart/30146369#30146369", "title": "Error 42601 using postgresql and dart", "body": "<p>You can find the error codes for postgresql <a href=\"http://www.postgresql.org/docs/current/static/errcodes-appendix.html\" rel=\"nofollow\">here</a>. Error 42601 means a syntax error.</p>\n\n<p>I suspect the cause is that you are missing a closing bracket on the 'values' clause, after @flag.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 30146369, "answer_count": 1, "score": 0, "last_activity_date": 1431216649, "creation_date": 1431215885, "question_id": 30146304, "link": "https://stackoverflow.com/questions/30146304/error-42601-using-postgresql-and-dart", "title": "Error 42601 using postgresql and dart", "body": "<p>I get the error 42601 when using postgresql</p>\n\n<p>I created the table using pgAdmin. The autogenerated code looks as follows.</p>\n\n<pre><code>-- Table: posts\n-- DROP TABLE posts;\n\nCREATE TABLE posts\n(\n  post_id bigserial NOT NULL,\n  title character varying(150) NOT NULL,\n  description character varying(500),\n  posted_at timestamp with time zone,\n  last_edited timestamp with time zone,\n  \"user\" character varying(50) NOT NULL,\n  editor character varying(50),\n  up_votes integer NOT NULL,\n  down_votes integer NOT NULL,\n  flag character varying(7),\n  CONSTRAINT \"PK_post_id\" PRIMARY KEY (post_id),\n  CONSTRAINT \"FK_user\" FOREIGN KEY (\"user\")\n      REFERENCES users (login) MATCH SIMPLE\n      ON UPDATE NO ACTION ON DELETE NO ACTION\n)\nWITH (\n  OIDS=FALSE\n);\nALTER TABLE posts\n  OWNER TO postgres;\n</code></pre>\n\n<p>I execute an insert operation with the following helper method.</p>\n\n<pre><code>  addPost(Map values){\n    connect(uri)\n    .then((conn){\n      conn.execute('insert into posts values(@title, @description, now(), now(), @user, @editor, @upVotes, @downVotes, @flag', values)\n      .then((_) =&gt; conn.close())\n      .catchError((err){\n        print('Execute error in addPost: $err');\n      })\n      .whenComplete(() =&gt; conn.close());\n    })\n    .catchError((err) =&gt; print('Error in addPost: $err'));\n  }\n</code></pre>\n\n<p>where <code>Map values</code> has the form:</p>\n\n<pre><code> {'title': 'Sample title', 'description': 'This is a description for a sample post', 'user': 'dartUser', 'editor': 'dartUser', 'upVotes': 0, 'downVotes': 0, 'flag': 'healthy'}\n</code></pre>\n\n<p>I'm not a postgresql expert, so this might be something trivial I just don't see.</p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1431120301, "creation_date": 1431120301, "answer_id": 30133095, "question_id": 30128958, "link": "https://stackoverflow.com/questions/30128958/direct-access-to-observable-variable-from-other-object/30133095#30133095", "title": "Direct access to @observable variable from other object", "body": "<p>No, this is perfectly fine. When it's observable or published it's still a normal field of the class but is wrapped to fire events when the value changes.</p>\n"}], "owner": {"reputation": 618, "user_id": 1437087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d384be52d249aa4873d7ca58f13617f?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1437087/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 30133095, "answer_count": 1, "score": 1, "last_activity_date": 1431120311, "creation_date": 1431103781, "last_edit_date": 1431120311, "question_id": 30128958, "link": "https://stackoverflow.com/questions/30128958/direct-access-to-observable-variable-from-other-object", "title": "Direct access to @observable variable from other object", "body": "<p>Is it ok to access @observable variable directly from other object, without making it @published and defined as polymer element attribute?</p>\n\n<p>For example, I have a custom element, defined without any data binding:</p>\n\n<pre><code>&lt;my-element id=\"my\"&gt;&lt;/my-element&gt;\n</code></pre>\n\n<p>and, on response to some external event in it's parent element, I can do something like that:</p>\n\n<pre><code>($['my'] as MyElement).someObservableData = new MegaObject();\n</code></pre>\n\n<p>Looks like it working at first sight, but what I'm worring about, is that if anything can be broken after conversion with dart2js or minification if i wouldn't define polymer-element's attribute.</p>\n\n<p>What is the best practice to do things like that?</p>\n"}, {"tags": ["intellij-idea", "dart", "dart-pub"], "answers": [{"tags": [], "owner": {"reputation": 987, "user_id": 29176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb436f386c71b1c22d31f2d8504e5574?s=128&d=identicon&r=PG", "display_name": "ALW", "link": "https://stackoverflow.com/users/29176/alw"}, "is_accepted": true, "score": 2, "last_activity_date": 1431234824, "last_edit_date": 1431234824, "creation_date": 1431234254, "answer_id": 30147924, "question_id": 30123980, "link": "https://stackoverflow.com/questions/30123980/pub-serve-intellij-community-edition/30147924#30147924", "title": "Pub Serve &amp; IntelliJ Community Edition", "body": "<p>IntelliJ proxies from its HTTP server to pub.</p>\n\n<p>This lets them do some deeper introspection for better IDE support, such as being able to monitor HTTP requests, use a built-in REST client and display HTTP requests / responses for API debugging, and probably some other integrations I can't think of off the top of my head.</p>\n\n<p>It's probably more work <em>not</em> use their current infrastructure, so why bother?</p>\n"}], "owner": {"reputation": 2594, "user_id": 496862, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/132500947/picture?type=large", "display_name": "Jack Murphy", "link": "https://stackoverflow.com/users/496862/jack-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 30147924, "answer_count": 1, "score": 2, "last_activity_date": 1431234824, "creation_date": 1431088358, "question_id": 30123980, "link": "https://stackoverflow.com/questions/30123980/pub-serve-intellij-community-edition", "title": "Pub Serve &amp; IntelliJ Community Edition", "body": "<p>How come when i launch an instance of a dart web application in IntelliJ community edition 14, it kicks off using the IntelliJ server, but also spins up a Pub server instance. </p>\n\n<p>IntelliJ's server lives on port 63342, where as pub server lives on 56995. Shouldn't it just use the Pub server? Is the IntelliJ server proxying the pub Http Server, and if so what if any are the implications? </p>\n"}, {"tags": ["dart", "rsa", "key-generator"], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431029561, "post_id": 30110363, "comment_id": 48332398, "body": "I don&#39;t get any error with this code but <code>keyGenerator.generateKeyPair()</code> doesn&#39;t return :-(. You could also take a look at this package <a href=\"https://github.com/amaurel/rsa_pkcs\" rel=\"nofollow noreferrer\">github.com/amaurel/rsa_pkcs</a> which uses cipher to generate RSAPKs"}, {"owner": {"reputation": 852, "user_id": 1319379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5477921ddbdb422c535cbc46eeb2ee4d?s=128&d=identicon&r=PG", "display_name": "Peril Ravine", "link": "https://stackoverflow.com/users/1319379/peril-ravine"}, "edited": false, "score": 0, "creation_date": 1431032161, "post_id": 30110363, "comment_id": 48333809, "body": "I&#39;ll try that for now but I&#39;d really like to know how to hook it up to a better entropy source.   To get the keys you&#39;d have to: <code>print(&#39;Private key: &#39;+keyPair.privateKey + &#39; Public: &#39;+keyPair.publicKey);</code>"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 852, "user_id": 1319379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5477921ddbdb422c535cbc46eeb2ee4d?s=128&d=identicon&r=PG", "display_name": "Peril Ravine", "link": "https://stackoverflow.com/users/1319379/peril-ravine"}, "edited": false, "score": 0, "creation_date": 1431065067, "post_id": 30110363, "comment_id": 48344129, "body": "The calculation didn&#39;t end, it didn&#39;t even get to the print statement. The main problems in your code was the missing <code>initCipher()</code> and that you need to choose some concrete implementation for <code>SecureRandom</code> (<code>SecureRandon</code> is an abstract class). I have no knowledge of cryptography worth mentioning, so I can&#39;t make suggestions what makes sense to do. You could create an issue in the GitHub repo of the package to direct the authors attention to your question."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1431028078, "creation_date": 1431028078, "answer_id": 30110363, "question_id": 30108577, "link": "https://stackoverflow.com/questions/30108577/how-do-i-generate-a-rsa-key-in-dart/30110363#30110363", "title": "How do I generate a RSA key in Dart?", "body": "<p>From some unit tests I gathered some information about how this could work. Maybe this helps you over this hurdle.</p>\n\n<pre><code>import 'package:cipher/cipher.dart';\nimport 'package:bignum/bignum.dart';\nimport \"package:cipher/impl/base.dart\";\nimport \"package:cipher/random/secure_random_base.dart\";\n\nmain() {\n  initCipher();\n  var rnd = new FixedSecureRandom();\n  var rsapars = new RSAKeyGeneratorParameters(new BigInteger(\"65537\"), 4096, 12);\n  var params = new ParametersWithRandom(rsapars, rnd);\n\n  var keyGenerator = new KeyGenerator(\"RSA\")\n    ..init( params );\n\n  var keyPair = keyGenerator.generateKeyPair();\n  print(keyPair);\n}\n\nclass FixedSecureRandom extends SecureRandomBase {\n\n  var _next = 0;\n  var _values = [\n    75,88,182,94,166,69,30,196,252,236,154,103,237,207,120,199,211,4,22,27,126,204,106,203,29,26,93,69,154,89,194,120,140,155,95,9,64,242,227,83,56,85,12,16,62,129,190,211,18,121,169,203,212,163,187,187,117,124,170,12,112,111,19,133,191,117,36,123,231,153,177,155,230,155,239,249,210,79,203,82,120,30,148,199,232,132,132,145,101,186,136,89,156,85,204,18,126,249,24,109,220,42,173,181,237,186,244,78,234,51,210,164,2,109,69,15,127,94,62,219,166,17,26,136,33,23,40,228,117,210,195,135,171,254,220,250,159,123,135,190,59,253,31,116,4,130,214,100,108,131,98,215,162,43,73,131,200,193,196,25,254,124,111,12,43,190,57,235,182,46,245,103,14,156,248,6,118,46,90,156,161,92,36,232,192,27,4,79,164,239,33,7,234,134,251,201,183,101,130,16,53,156,159,128,31,114,102,189,93,146,195,240,218,69,200,116,38,100,150,240,83,115,112,26,45,227,187,192,209,78,26,103,205,244,16,222,206,14,44,137,122,90,242,71,18,100,66,54,129,102,204,6,184,67,183,150,113,49,19,39,46,106,155,228,196,172,176,135,28,190,112,244,165,186,8,34,215,198,40,10,137,192,232,115,29,235,232,156,228,111,19,89,114,179,117,98,132,58,185,89,156,198,29,45,146,137,41,250,115,13,199,244,160,255,117,54,88,218,216,139,160,190,127,123,126,254,25,43,124,25,74,41,139,14,191,198,187,212,165,180,77,29,144,169,231,133,47,196,243,254,75,150,175,157,166,54,201,243,112,124,33,125,99,173,107,23,250,204,103,213,56,34,64,50,191,114,45,96,31,33,110,236,211,218,134,80,241,191,124,222,44,145,251,193,30,123,162,41,177,216,208,15,99,198,118,251,82,98,12,60,176,75,25,79,65,45,137,64,17,193,160,121,112,152,249,117,230,118,99,250,66,78,91,9,143,8,108,119,122,27,173,51,28,26,1,146,254,44,31,61,62,99,210,108,192,152,182,249,229,137,201,204,145,160,158,243,0,28,183,47,70,254,173,148,176,222,163,153,84,84,219,73,236,5,141,84,95,183,145,100,96,116,181,35,161,116,168,247,224,235,222,61,179,49,152,119,210,227,244,110,144,87,198,188,203,171,236,93,116,85,21,120,211,255,137,223,28,80,173,206,165,86,229,147,17,194,96,32,48,219,203,162,41,249,221,51,219,130,233,63,208,8,35,103,215,76,230,91,108,153,122,215,220,113,37,81,56,164,80,29,39,14,115,82,137,182,74,123,88,213,156,210,254,45,118,57,158,109,238,114,101,234,187,5,67,172,175,222,242,161,212,62,5,233,205,72,5,204,103,163,67,128,76,14,170,7,42,136,114,115,220,215,182,201,45,42,160,12,113,61,221,240,168,179,89,26,18,225,127,243,110,85,127,16,176,76,206,169,250,188,244,54,185,97,18,132,147,64,151,228,23,222,145,152,151,33,115,231,19,237,52,30,141,20,198,7,148,81,162,245,23,237,98,237,3,27,233,253,93,75,205,201,23,201,187,72,124,38,85,87,217,86,103,112,39,101,199,99,247,129,230,100,5,30,202,105,150,172,39,254,116,147,168,133,30,225,26,34,57,64,88,40,19,147,46,108,222,96,207,136,168,253,131,107,227,179,60,31,154,146,2,162,33,36,158,17,251,184,68,33,95,234,45,141,217,173,114,140,199,224,128,54,244,69,209,144,187,193,89,188,87,208,209,246,37,133,165,74,110,224,222,254,159,31,154,90,72,208,52,109,218,41,185,185,177,248,180,172,227,111,167,51,31,184,234,184,132,157,212,17,154,9,191,193,131,100,197,105,129,55,25,146,97,127,171,7,246,79,93,181,42,214,244,64,141,203,19,170,117,28,43,92,172,129,244,142,247,69,144,34,8,241,17,239,81,56,18,248,150,48,167,252,17,73,189,154,34,169,34,146,94,14,80,185,86,25,130,90,87,166,188,89,99,10,36,28,214,15,109,187,206,166,224,118,186,9,189,121,155,6,100,4,251,197,66,225,69,154,215,130,238,45,103,44,35,56,86,60,101,229,51,172,240,140,148,144,133,46,197,44,227,62,124,251,74,125,176,228,95,187,64,172,152,89,11,62,248,79,223,81,49,16,210,148,14,110,69,217,242,79,45,134,151,12,227,204,5,68,216,86,134,237,247,216,252,162,117,210,183,33,232,216,17,152,124,224,224,162,16,51,157,124,163,33,233,217,155,94,242,176,23,36,238,139,206,34,82,159,98,96,177,163,212,150,\n  ];\n\n  String get algorithmName =&gt; \"Fixed\";\n\n  void seed(CipherParameters params) {\n  }\n\n  int nextUint8() {\n    if( _next&gt;=_values.length ) {\n      _next = 0;\n    }\n    return _values[_next++];\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 852, "user_id": 1319379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5477921ddbdb422c535cbc46eeb2ee4d?s=128&d=identicon&r=PG", "display_name": "Peril Ravine", "link": "https://stackoverflow.com/users/1319379/peril-ravine"}, "edited": false, "score": 0, "creation_date": 1431148006, "post_id": 30128757, "comment_id": 48382120, "body": "I use JSEncrypt in the javascript version of the app so this works as a transition until there is something more dart native. Also cudos on the excellent example of dart js interop."}], "tags": [], "owner": {"reputation": 181, "user_id": 3489593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPJGl.png?s=128&g=1", "display_name": "gooostaw", "link": "https://stackoverflow.com/users/3489593/gooostaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1431102964, "creation_date": 1431102964, "answer_id": 30128757, "question_id": 30108577, "link": "https://stackoverflow.com/questions/30108577/how-do-i-generate-a-rsa-key-in-dart/30128757#30128757", "title": "How do I generate a RSA key in Dart?", "body": "<p>Eventually you can use dart.js and JS library 'jsencrypt.js' (by Tom Wu).</p>\n\n<pre><code>class Rsa\n{\n  JsObject encryptObj;\n\n  Rsa()\n  {\n    encryptObj = new JsObject(context['JSEncrypt']);\n    encryptObj['default_key_size'] = 1024;\n    encryptObj.callMethod('getKey');\n  }\n\n  String get publicKey =&gt; encryptObj.callMethod('getPublicKey');\n  String get privateKey =&gt; encryptObj.callMethod('getPrivateKey');\n\n  set publicKey(String key)\n  {\n    encryptObj.callMethod('setPrivateKey',[key]);\n  }\n\n  set privateKey(String key)\n  {\n    encryptObj.callMethod('setPublicKey',[key]);\n  }\n\n  String encrypt(String plainText) =&gt; encryptObj.callMethod('encrypt',[plainText]);\n  String decrypt(String cipherText) =&gt; encryptObj.callMethod('decrypt',[cipherText]);\n}\n</code></pre>\n"}], "owner": {"reputation": 852, "user_id": 1319379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5477921ddbdb422c535cbc46eeb2ee4d?s=128&d=identicon&r=PG", "display_name": "Peril Ravine", "link": "https://stackoverflow.com/users/1319379/peril-ravine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1374, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1431102964, "creation_date": 1431021939, "question_id": 30108577, "link": "https://stackoverflow.com/questions/30108577/how-do-i-generate-a-rsa-key-in-dart", "title": "How do I generate a RSA key in Dart?", "body": "<p>I'm trying to generate a RSA key using Dart.  The problem seems to be in the SecureRandom initiation.  Unfortunately the documentation is vague or non-existent.  (It literally says use \"File\" or \"Url\", neither of which work).  Does anyone know how this is supposed to work?</p>\n\n<p>Includes:</p>\n\n<pre><code>import 'package:cipher/cipher.dart';\nimport 'package:bignum/bignum.dart';\n</code></pre>\n\n<p>Relevant code (taken from an example I found that was supposed to work):</p>\n\n<pre><code>var rsapars = new RSAKeyGeneratorParameters(new BigInteger(\"65537\"), 4096, 12);\nvar params = new ParametersWithRandom(rsapars, new SecureRandom());\n\nvar keyGenerator = new KeyGenerator(\"RSA\")\n  ..init( params );\n\nvar keyPair = keyGenerator.generateKeyPair();\n</code></pre>\n"}, {"tags": ["http", "session", "cookies", "dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431018089, "post_id": 30107414, "comment_id": 48325877, "body": "I use the session handler of <a href=\"https://pub.dartlang.org/packages/shelf_auth\" rel=\"nofollow noreferrer\">pub.dartlang.org/packages/shelf_auth</a> for this purpose."}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431127102, "post_id": 30107414, "comment_id": 48378411, "body": "@G&#252;nterZ&#246;chbauer could you please take a look at the code above."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431156775, "post_id": 30107414, "comment_id": 48383873, "body": "I won&#39;t have time today, maybe tomorrow..."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1431439101, "post_id": 30107414, "comment_id": 48491159, "body": "Sounds about right to me. The critical parts are how you create the session cookies so they can&#39;t be guessed/predicted and how you send the cookie (<a href=\"http://resources.infosecinstitute.com/securing-cookies-httponly-secure-flags/\" rel=\"nofollow noreferrer\">resources.infosecinstitute.com/&hellip;</a>). I don&#39;t have much knowledge about security though."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1432021839, "post_id": 30107414, "comment_id": 48734353, "body": "Have a look at this question, it&#39;ll explain the security part of what you&#39;re looking for, I had to solve the same problem in Java backend + Dart frontend: <a href=\"https://security.stackexchange.com/questions/84860/how-to-build-a-secure-stateless-authentication-system-for-a-client-side-javascri\" title=\"how to build a secure stateless authentication system for a client side javascri\">security.stackexchange.com/questions/84860/&hellip;</a>"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1432021989, "post_id": 30107414, "comment_id": 48734429, "body": "and also this one: <a href=\"https://stackoverflow.com/questions/29331222/how-to-build-a-secure-stateless-authentication-system-for-a-client-side-dart-app\" title=\"how to build a secure stateless authentication system for a client side dart app\">stackoverflow.com/questions/29331222/&hellip;</a> I generate session tokens using a UUID. I&#39;m not sure how to set the cookie on the response as I&#39;ve never worked with Dart on the server side, but it should give you an idea of what needs to happen on the server side."}], "answers": [{"tags": [], "owner": {"reputation": 3524, "user_id": 1364747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dAdPj.png?s=128&g=1", "display_name": "Teddy", "link": "https://stackoverflow.com/users/1364747/teddy"}, "is_accepted": false, "score": 2, "last_activity_date": 1432039126, "creation_date": 1432039126, "answer_id": 30325871, "question_id": 30107414, "link": "https://stackoverflow.com/questions/30107414/sessions-in-dart/30325871#30325871", "title": "Sessions in dart", "body": "<p>I'll describe how session works in Java with <em>servlets</em>. This could help you in making your implementation work. First off, I have to mention that <em>session</em> and <em>authentication</em> are two separate functions, although the latter depends on the former.</p>\n\n<p>A session helps the server understand consecutive requests coming from the same browser without a big idle time in between. Take a look at the below example:</p>\n\n<ol>\n<li>A user opened a browser A, visited your site</li>\n<li>Kept clicking around various links using multiple tabs in browser A</li>\n<li>Left the browser idle for 45 minutes</li>\n<li>Continued clicking on the pages that he left open</li>\n<li>Opened browser B, visited your site</li>\n<li>Closed the tab for your website in browser B</li>\n<li>Opened another new tab in browser B and clicked on a bookmark to\nvisit your site</li>\n</ol>\n\n<p>Here is the impact on the server-side session for the above steps of the user:</p>\n\n<ol>\n<li>New session created... let us say JSESSIONID 10203940595940</li>\n<li>Same session applies for all requests from all tabs </li>\n<li>Session expired on the server, and probably some memory was freed on server</li>\n<li>Since Java is not able to locate a session matching JSESSIONID 10203940595940, it creates a new session and asks client to remember new JSESSIONID w349374598457</li>\n<li>Requests from new browser are treated as new sessions because the JSESSIONID contract is between a single browser and the server. So, server assigns a new JSESSIONID like 956879874358734</li>\n<li>JSESSIONID hangs around in the browser till browser is exited. Closing a tab doesnt clear the JSESSIONID</li>\n<li>JSESSIONID is still used by browser, and if not much time elapsed, server would still be hanging on to that session. So, the sesison will continue.</li>\n</ol>\n\n<p>Session use on the server-side:</p>\n\n<ul>\n<li>A session is just a HashMap which maps JSESSIONIDs with another a\nbunch of attributes.</li>\n<li>There is a thread monitoring elapsed time for the sessions, and\nremoving JSESSIONIDs and the mapped attributes from memory once a\nsession expires.</li>\n<li>Usually, there is some provision for applications to get an event\nalert just when a session becomes ready for expiry.</li>\n</ul>\n\n<p>Implementation details:</p>\n\n<ul>\n<li>User's browser A sends a request to server. Server checks if there is\na Cookie by name JSESSIONID. If none is found, one is created on the\nserver. The server makes a note of the new JSESSIONID, the created\ntime, and the last request time which is the same as created time in\nthis case. In the HTTP response, the server attaches the new\nJSESSIONID as a cookie.</li>\n<li>Browsers are designed to keep attaching cookies for subsequent visits\nto the same site. So, for all subsequent visits to the site, the\nbrowser keeps attaching the JSESSIONID cookie to the HTTP request\nheader.</li>\n<li>So, this time the server sees the JSESSIONID and is able to map the\nrequest to the existing session, in case the session has not yet\nexpired. In case the session had already expired, the server would\ncreate a new session and attach back the new JSESSIONID as a cookie\nin HTTP response.</li>\n</ul>\n\n<p>Authentication mechanisms just make use of the above session handling to detect \"new sessions\" and divert them to the login page. Also, existing sessions could be used to store attributes such as \"auth-status\" - \"pass\" or \"fail\".</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1745, "favorite_count": 6, "answer_count": 1, "score": 9, "last_activity_date": 1432039126, "creation_date": 1431017989, "last_edit_date": 1431126516, "question_id": 30107414, "link": "https://stackoverflow.com/questions/30107414/sessions-in-dart", "title": "Sessions in dart", "body": "<p>Usually the dart documentation has a lot of useful examples on almost any topic. Unfortunately I could not find anything on sessions in dart.</p>\n\n<p>Could anyone validate this approach as a correct way to do sessions:</p>\n\n<ol>\n<li>Browser sends GET request to sever.</li>\n<li>Server responds with web-client.</li>\n<li>Web-client sends user credentials.</li>\n<li>\na) Server checks credentials and generates session cookie.\nb) Server sends session cookie back to client.</li>\n<li>Web-client stores cookie for further use.</li>\n<li>Web-client sends request for some user specific data, and attaches the cookie for verification.</li>\n</ol>\n\n<p>My special interest lies in points 4, 5 and 6, since the others are well documented. If you could share some code snippets on this points, I would very much appreciate it.</p>\n\n<p>EDIT:\nAfter reading the comment from G\u00fcnter Z\u00f6chbauer below I looked into shelf_auth. I realized that it requires rewriting the server app to use shelf.\nSo I did that.</p>\n\n<p>The main.dart:</p>\n\n<pre><code>// imports of all necessary libraries\n\nmain() {\n    runServer();\n}\n\n\n/**\n *  Code to handle Http Requests\n */\nrunServer() {\n  var staticHandler = createStaticHandler(r\"C:\\Users\\Lukasz\\dart\\auctionProject\\web\", defaultDocument: 'auctionproject.html');\n  var handler = new Cascade()\n                      .add(staticHandler)  // serves web-client\n                      .add(routes.handler) // serves content requested by web-client\n                      .handler;\n  io.serve(handler, InternetAddress.LOOPBACK_IP_V4, 8080).then((server) {\n    print('Listening on port 8080');\n  }).catchError((error) =&gt; print(error)); \n}\n</code></pre>\n\n<p>The routes.dart</p>\n\n<pre><code>import 'handlers.dart' as handler;\n\nimport 'package:shelf_route/shelf_route.dart';\nimport 'package:shelf_auth/shelf_auth.dart' as sAuth;\n\nRouter routes = new Router()\n         ..get('/anonymous', handler.handleAnonymousRequest);\n         //..post('/login', handler.handleLoginRequest); &lt;&lt; this needs to be implemented\n                      //other routs will come later\n</code></pre>\n\n<p>The handlers.dart</p>\n\n<pre><code>import 'dart:async';\nimport 'dart:convert';\nimport 'dart:io' show HttpHeaders;    \nimport 'databaseUtility.dart';\nimport 'package:shelf_exception_response/exception.dart';\nimport 'package:shelf/shelf.dart' as shelf;\nimport 'package:shelf_path/shelf_path.dart';\n\n\nshelf.Response handleAnonymousRequest(shelf.Request request) {\n  return new shelf.Response.ok('got anonymous get request');\n}\n</code></pre>\n\n<p>Unfortunately after reading the <a href=\"https://pub.dartlang.org/packages/shelf_auth\">shelf_auth</a> documentation I still don't quite know where to add the authentication. They use the Pipline syntax for the handler.</p>\n"}, {"tags": ["dart", "webstorm"], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430976605, "post_id": 30090250, "comment_id": 48297747, "body": "Actually you don&#39;t need to add it to each file. If you don&#39;t, the library gets the default library name (empty string). What you can&#39;t do is two libraries with the same name. So if you have a one-file Dart script you don&#39;t need the library declaration. When you start importing other libraries you need to add a library declaration to all but one file."}], "tags": [], "owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "is_accepted": false, "score": 2, "last_activity_date": 1430960989, "creation_date": 1430960989, "answer_id": 30090250, "question_id": 30090213, "link": "https://stackoverflow.com/questions/30090213/what-does-the-imported-libraries-and-both-cannot-be-unnamed-mean/30090250#30090250", "title": "What does the imported libraries {} and {} both cannot be unnamed mean?", "body": "<p>I just figured this out. </p>\n\n<p>I must add a <code>library myLibrary;</code> to the top of each file. </p>\n"}], "owner": {"reputation": 1794, "user_id": 250082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ntOSz.jpg?s=128&g=1", "display_name": "ZeroDivide", "link": "https://stackoverflow.com/users/250082/zerodivide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430960989, "creation_date": 1430960761, "question_id": 30090213, "link": "https://stackoverflow.com/questions/30090213/what-does-the-imported-libraries-and-both-cannot-be-unnamed-mean", "title": "What does the imported libraries {} and {} both cannot be unnamed mean?", "body": "<p>I have the following three imports from my application to a test class</p>\n\n<pre><code>import 'package:grocery_totes/domain/grocery_list.dart';\nimport 'package:grocery_totes/api/grocery_list_controller.dart';\nimport 'package:grocery_totes/repository/repository.dart';\n</code></pre>\n\n<p>The bottom two get highlighted by my IDE (WebStorm) with the error:</p>\n\n<pre><code> the imported libraries {} and {} both cannot be unnamed\n</code></pre>\n\n<p>What causes this? All three files contain only a single class that are uniquely named. </p>\n"}]