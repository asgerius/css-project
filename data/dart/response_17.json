[{"tags": ["postgresql", "unit-testing", "dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430933316, "post_id": 30083215, "comment_id": 48280321, "body": "Where do you start <code>server()</code> from?"}, {"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "edited": false, "score": 0, "creation_date": 1430985176, "post_id": 30083215, "comment_id": 48302189, "body": "This line looks fishy: &quot;pgsql.query(&quot;select max(id) as id from t_test&quot;, String)&quot;, why is the String class being passed in here?"}, {"owner": {"reputation": 77, "user_id": 4604913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b85da42262856fbf0e1cdb2f8bfbf8?s=128&d=identicon&r=PG&f=1", "display_name": "Kulaghin Yuri", "link": "https://stackoverflow.com/users/4604913/kulaghin-yuri"}, "edited": false, "score": 0, "creation_date": 1431011888, "post_id": 30083215, "comment_id": 48321610, "body": "Greg, redstone_mapper_pg uses <code>PostgreSql.query(String sql, Type type, [values])</code> and String as second argument is workable trick for simple requests."}], "owner": {"reputation": 77, "user_id": 4604913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b85da42262856fbf0e1cdb2f8bfbf8?s=128&d=identicon&r=PG&f=1", "display_name": "Kulaghin Yuri", "link": "https://stackoverflow.com/users/4604913/kulaghin-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431504654, "creation_date": 1430931983, "last_edit_date": 1431504654, "question_id": 30083215, "link": "https://stackoverflow.com/questions/30083215/how-to-make-unit-tests-for-redstone-with-postgresql", "title": "How to make unit tests for Redstone with PostgreSQL?", "body": "<p>I'm trying to make unit tests for Redstone microframework with PostgreSQL extension. Test of simple Route without pgsql request works fine. But when Route contains pgsql requests test fails because resp.statusCode=500. When I call application function with pgsql request directly from test it returns error because app.request is null. Here is code sample:</p>\n\n<pre><code>//--------------------------------------------------------\n// Redstone application\nlibrary rs_app;\nimport 'dart:async';\nimport 'package:redstone/server.dart' as app;\nimport 'package:redstone_mapper/plugin.dart';\nimport 'package:redstone_mapper_pg/manager.dart';\n\nFuture startServer() {\n  var uri = \"postgres://127.0.0.1:5432/testdb\";\n  var dbManager = new PostgreSqlManager(uri, min: 1, max: 3);\n  app.addPlugin(getMapperPlugin(dbManager));\n  app.setupConsoleLog();\n  return app.start(address: '127.0.0.1', port: 8100);\n}\n\nPostgreSql get pgsql =&gt; app.request.attributes.dbConn;\n\n@app.Route(\"/simple\")\nsimpleAnswer() =&gt; \"Hello, world!\";\n\n@app.Route(\"/complex\")\ncomplexAnswer() =&gt; getMaxId();\n\nFuture getMaxId() {\n  return pgsql.query(\"select max(id) as id from t_test\", String)\n  .then((id) {\n    return new Future.value(id[0]['id']);\n  });\n}\n\n//--------------------------------------------------------\n// Unit tests\nlibrary rs_app_test;\nimport 'package:rs_app/rs_app.dart' as rs_app;\nimport 'package:redstone/server.dart' as app;\nimport 'package:redstone/mocks.dart';\nimport 'package:unittest/unittest.dart';\n\nmain() =&gt; makeTests();\n\nvoid makeTests() {\n  setUp(() =&gt; app.setUp([#rs_app]));\n  tearDown(() =&gt; app.tearDown());\n  test('simple - PASS', () {\n    var req = new MockRequest('/simple');\n    return app.dispatch(req).then((resp) {\n      expect(resp.statusCode, equals(200));\n      expect(resp.mockContent, equals(\"Hello, world!\"));\n    });\n  });\n  test('complex - FAIL', () {\n    var req = new MockRequest('/complex');\n    return app.dispatch(req).then((resp) {\n      expect(resp.statusCode, equals(200));\n      expect(resp.mockContent, equals(\"0297\"));\n    });\n  });\n  test('direct - ERROR', () {\n    return rs_app.getMaxId().then((id) {\n      expect(id, equals(\"0297\"));\n    });\n  });\n}\n</code></pre>\n\n<p>I understand that dbManager is not initialized correctly, but how I must initialize it?</p>\n\n<hr>\n\n<p>After G\u00fcnter suggestion I experimented and found some solution for tests:</p>\n\n<pre><code>void makeTests() async {\n  //setUp(() =&gt; app.setUp([#rs_app])); not needed\n  //tearDown(() =&gt; app.tearDown()); closes all (and db-connection!) after each test\n  await rs_app.startServer();\n  test('simple - PASS', () { ... });\n  test('complex - PASS NOW', () { ... });\n  test('direct - STILL ERROR', () { ... });\n}\n</code></pre>\n\n<p>Direct test returns error \"The null object does not have a getter 'attributes'\" i.e. app.request in getMaxId() is null. I think the reason is that http-request does not exist in direct test - and app.request too. It is needed to change access to PostgreSQL connection in getMaxId().</p>\n\n<hr>\n\n<p>Redstone gives access to DB-connection during http-request handling only. If we want to test some DB-functions without http-request context we must care about DB-connection in our tests:</p>\n\n<pre><code>//--------------------------------------------------------\n// Redstone application\n// needed imports\nPostgreSqlManager dbManager;\nFuture startServer() {\n  var uri = \"postgres://127.0.0.1:5432/testdb\";\n  dbManager = new PostgreSqlManager(uri, min: 1, max: 3);\n  app.addPlugin(getMapperPlugin(dbManager));\n  app.setupConsoleLog();\n  return app.start(address: '127.0.0.1', port: 8100);\n}\n// skip to getMaxId()\nFuture getMaxId([PostgreSql test_pgsql]) {\n  var _pgsql = app.request == null ? test_pgsql : pgsql;\n  return _pgsql.query(\"select max(id) as id from t_test\", String)\n  .then((id) {\n    return new Future.value(id[0]['id']);\n  });\n}\n\n//--------------------------------------------------------\n// Unit tests\n// skip to direct test\n  test('direct - PASS NOW', () async {\n    var pgsql = await rs_app.dbManager.getConnection();\n    return rs_app.getMaxId(pgsql).then((id) {\n      rs_app.dbManager.closeConnection(pgsql);\n      expect(id, equals(\"0297\"));\n    });\n  });\n// skip other\n</code></pre>\n\n<p>I think I answered on my question :)</p>\n"}, {"tags": ["data-binding", "dart", "polymer", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 995311, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/apGl7.jpg?s=128&g=1", "display_name": "Jawaid", "link": "https://stackoverflow.com/users/995311/jawaid"}, "edited": false, "score": 0, "creation_date": 1430927112, "post_id": 30079317, "comment_id": 48276280, "body": "This is giving me following warning on var value = ti.model.value as Inner &#39;The name &#39;Inner&#39; is not a type and cannot be used in an &#39;as&#39; expression&#39;"}, {"owner": {"reputation": 79, "user_id": 995311, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/apGl7.jpg?s=128&g=1", "display_name": "Jawaid", "link": "https://stackoverflow.com/users/995311/jawaid"}, "edited": false, "score": 0, "creation_date": 1430927795, "post_id": 30079317, "comment_id": 48276729, "body": "OK great its working fine now. But I don&#39;t understand it. Can you give me some pointers to get insight into it. I&#39;m still learning Dart and Polymer I would really appreciate if you could give me links to learn quick and in depth. Thanks for your help."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 79, "user_id": 995311, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/apGl7.jpg?s=128&g=1", "display_name": "Jawaid", "link": "https://stackoverflow.com/users/995311/jawaid"}, "edited": false, "score": 0, "creation_date": 1430928145, "post_id": 30079317, "comment_id": 48276969, "body": "Sorry I don&#39;t have links, such &quot;advanced&quot; things aren&#39;t documented well yet. What Polymer does, is to assign an Expando  (<a href=\"http://stackoverflow.com/questions/13358018\">stackoverflow.com/questions/13358018</a>)  to each node it creates, holding a reference to the model instance (Attribute in your case) dynamically and with the code in my answer you acquire that referenced model instance from the node passed with the event."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 79, "user_id": 995311, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/apGl7.jpg?s=128&g=1", "display_name": "Jawaid", "link": "https://stackoverflow.com/users/995311/jawaid"}, "edited": false, "score": 0, "creation_date": 1430928425, "post_id": 30079317, "comment_id": 48277151, "body": "I&#39;m following a lot of discussions, and GitHub repo updates (issues, pull requests) where I sometimes find some interesting pieces. Also the [polymer] tag on StackOverflow for Polymer.js. Almost anything working in Polymer.js can somehow be translated to Dart. I&#39;m sure documentation will become better when Polymer is stable (1.0)"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1444908932, "last_edit_date": 1495540702, "creation_date": 1430921609, "answer_id": 30079317, "question_id": 30079141, "link": "https://stackoverflow.com/questions/30079141/dart-polymer-removing-element-from-list/30079317#30079317", "title": "Dart Polymer: Removing element from List", "body": "<p><strong>Polymer >= 1.0.0</strong></p>\n\n<pre><code>@reflectable\nvoid someClickHandler(dom.Event event, [_]) {\n  // for native events (like on-click)\n  var model = new DomRepeatModel.fromEvent(event);\n  // or for custom events (like on-tap, works also for native events)\n  var model = new DomRepeatModel.fromEvent(convertToJs(event));\n  var value = model.jsElement['items']; \n  // or \n  var value = model.jsElement[$['mylist'].attributes['as']];\n  // if you used the `as=\"somename\"` \n  // in your &lt;core-list&gt; or &lt;template is=\"dom-repeat\"&gt;\n}\n</code></pre>\n\n<p>There is an open issue related to custom events: <a href=\"https://github.com/dart-lang/polymer-dart/issues/624\" rel=\"nofollow noreferrer\">https://github.com/dart-lang/polymer-dart/issues/624</a></p>\n\n<p><strong>Polymer &lt;= 0.16.0</strong></p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:template_binding/template_binding.dart' as tb;\n...    \n\nvoid deleteAttribute(Event event, Object detail, Node sender) {\n  tb.TemplateInstance ti = tb.nodeBind(event.target).templateInstance; \n  var value = ti.model.value as Attribute;\n  attribs.remove(value);\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/24530054\">In Polymer.js children of a template have a reference to the template, how can this be done in Polymer.dart</a> for more details.</p>\n"}], "owner": {"reputation": 79, "user_id": 995311, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/apGl7.jpg?s=128&g=1", "display_name": "Jawaid", "link": "https://stackoverflow.com/users/995311/jawaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 30079317, "answer_count": 1, "score": 1, "last_activity_date": 1444908932, "creation_date": 1430921148, "question_id": 30079141, "link": "https://stackoverflow.com/questions/30079141/dart-polymer-removing-element-from-list", "title": "Dart Polymer: Removing element from List", "body": "<p>I have a custom element with some models. Here is the code for custom element.</p>\n\n<p>message-element.html</p>\n\n<pre><code>&lt;polymer-element name=\"message-element\" attributes=\"message\"&gt;\n  &lt;template&gt;\n\n    &lt;table class=\"table\"&gt;\n    &lt;tr template repeat=\"{{attrib in attribs}}\"&gt;\n      &lt;td&gt;&lt;paper-input name=\"message-attrib-name\" label=\"New Attribute\" value=\"{{attrib.name}}\"&gt;&lt;/paper-input&gt;&lt;/td&gt;\n      &lt;td&gt;\n        &lt;paper-input name=\"message-attrib-value\" label=\"\" value=\"{{attrib.value}}\"&gt;&lt;/paper-input&gt;\n\n        &lt;core-icon-button icon=\"check\" on-tap=\"{{addAttribute}}\"&gt;&lt;/core-icon-button&gt;\n        &lt;core-icon-button icon=\"highlight-remove\" on-tap=\"{{deleteAttribute}}\"&gt;&lt;/core-icon-button&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/table&gt;\n\n  &lt;/template&gt;\n\n  &lt;script type=\"application/dart\" src=\"message-element.dart\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>message-element.dart</p>\n\n<pre><code>@CustomTag('message-element')\nclass MessageElement extends PolymerElement with Observable {\n  @published Message message;\n  @observable List&lt;Attribute&gt; attribs = toObservable([]);\n  @observable Attribute att;\n\n  /// Constructor used to create instance of MainApp.\n  MessageElement.created() : super.created() {\n    polymerCreated();\n  }\n\n  attached() {\n    att = new Attribute('', '');\n    attribs.add(att);\n    message.attributes = attribs; // initialize with 1 attrib\n  }\n\n  void addAttribute(Event event, Object detail, Node sender) {\n    att = new Attribute('', '');\n    attribs.add(att);\n  }\n\n  void deleteAttribute(Event event, Object detail, Node sender) {\n    // remove the clicked attrib\n  }\n}\n</code></pre>\n\n<p>attribs is shown in a modal dialog and each attrib in attribs has couple inputs with add and delete buttons. Adding element is working fine. How do I delete the clicked attrib from attribs. I'm calling void deleteAttribute(Event event, Object detail, Node sender) on on-tap on delete button. In this call I need to delete the attrib from the list but how do I get the details of tapped attrib so I can delete that from the list.</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 4039204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5_4m8f8Bk8/AAAAAAAAAAI/AAAAAAAAAI8/YAAQMflcYk4/photo.jpg?sz=128", "display_name": "zhang qinglian", "link": "https://stackoverflow.com/users/4039204/zhang-qinglian"}, "edited": false, "score": 0, "creation_date": 1430921743, "post_id": 30078833, "comment_id": 48272018, "body": "can you tell me the version of DartEditor what I can use"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 793, "user_id": 4039204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5_4m8f8Bk8/AAAAAAAAAAI/AAAAAAAAAI8/YAAQMflcYk4/photo.jpg?sz=128", "display_name": "zhang qinglian", "link": "https://stackoverflow.com/users/4039204/zhang-qinglian"}, "edited": false, "score": 0, "creation_date": 1430921928, "post_id": 30078833, "comment_id": 48272149, "body": "Any version should work this way. If you download the Dart from the www.dartlang.org website or install it using homebrew or apt-get you should be fine."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 3, "last_activity_date": 1430920363, "creation_date": 1430920363, "answer_id": 30078833, "question_id": 30078759, "link": "https://stackoverflow.com/questions/30078759/how-to-run-a-dart-console-application/30078833#30078833", "title": "How to run a Dart Console Application?", "body": "<p>If you want to know how to start it from DartEditor, just right-click the file in the <code>Files</code> view and choose <code>Run</code>. If you click the <code>Run</code> button in the toolbar, probably the previously launched file is launched (didn't use DartEditor since 1/2 year)</p>\n\n<p>If you want to launch it from command line just run <code>dart bin/main.dart</code></p>\n"}], "owner": {"reputation": 793, "user_id": 4039204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5_4m8f8Bk8/AAAAAAAAAAI/AAAAAAAAAI8/YAAQMflcYk4/photo.jpg?sz=128", "display_name": "zhang qinglian", "link": "https://stackoverflow.com/users/4039204/zhang-qinglian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "accepted_answer_id": 30078833, "answer_count": 1, "score": 1, "last_activity_date": 1430920363, "creation_date": 1430920199, "question_id": 30078759, "link": "https://stackoverflow.com/questions/30078759/how-to-run-a-dart-console-application", "title": "How to run a Dart Console Application?", "body": "<p>I just follow <a href=\"https://www.dartlang.org/docs/dart-up-and-running/ch01.html\" rel=\"nofollow\">https://www.dartlang.org/docs/dart-up-and-running/ch01.html</a> to run a Dart console application,but the result is \u2018HTML file could not be found\u2019.</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430920204, "post_id": 30078643, "comment_id": 48270852, "body": "I don&#39;t know how to fix your problem, just a suggestion. Don&#39;t import from other top-level directories using relative paths. If you want to import code from other top-level directories, move the code into the <code>lib</code> directory and use package imports like <code>import &#39;package:my_package&#47;server.dart&#39;;</code> to import from there."}], "answers": [{"tags": [], "owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "is_accepted": false, "score": 0, "last_activity_date": 1430920167, "creation_date": 1430920167, "answer_id": 30078744, "question_id": 30078643, "link": "https://stackoverflow.com/questions/30078643/dart-unittest-pgsql-query-error/30078744#30078744", "title": "Dart unittest pgsql query error", "body": "<p>Looks like in your test you're not bootstrapping <code>app</code>. The code that's in your main has to be called for your test. The <code>main()</code> function isn't called automatically in your test.</p>\n\n<p>You could extract its logic in a function and call it your test setup.</p>\n\n<p><code>PostgreSql get pgsql =&gt; app.request.attributes.dbConn;</code> crashed when you call <code>attributes</code> on <code>request</code>, it's probably not initialized like you would want it to be.</p>\n"}], "owner": {"reputation": 47, "user_id": 4494679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4PqOq.jpg?s=128&g=1", "display_name": "Andrey Kargashinskiy", "link": "https://stackoverflow.com/users/4494679/andrey-kargashinskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430920167, "creation_date": 1430919872, "question_id": 30078643, "link": "https://stackoverflow.com/questions/30078643/dart-unittest-pgsql-query-error", "title": "Dart unittest pgsql query error", "body": "<p>I've got some code in file <strong>web_server.dart</strong> which is placed in <strong>bin</strong> folder:</p>\n\n<pre><code>import 'dart:async';\nimport 'package:redstone/server.dart' as app; \nimport 'package:redstone_mapper/mapper.dart'; \nimport 'package:redstone_mapper/plugin.dart'; \nimport 'package:redstone_mapper_pg/manager.dart';\nimport 'package:shelf/shelf.dart' as shelf; \n\nmain() {\n  var uri = \"postgres://rpss:@10.10.10.10:5432/rty\";\n  var dbManager = new PostgreSqlManager(uri, min: 1, max: 3);\n  app.addPlugin(getMapperPlugin(dbManager));\n  app.setupConsoleLog();\n  app.start(address: '127.0.0.1', port: 8100);\n}\n\nPostgreSql get pgsql =&gt; app.request.attributes.dbConn;\n\nFuture getNextPlanId() {\n  return pgsql.query(\"select smth from table1\", String);\n}\n</code></pre>\n\n<p>There is another dart file named <strong>web_server_test.dart</strong> in <strong>test</strong> folder:</p>\n\n<pre><code>library web_server_test;\n\nimport 'package:unittest/unittest.dart';\nimport 'dart:async';\nimport '../bin/web_server.dart';\n\nvoid main() {\n    group('test1', () { \n\n     test(\"Step 1: must be PASS\", (){\n          return getNextPlanId().then((onValue){\n              expect(onValue, hasLength(4));\n          });\n      });\n  }); \n}\n</code></pre>\n\n<p>When I run <strong>web_server_test.dart</strong> file, I get an error:</p>\n\n<p>Test failed: Caught The null object does not have a getter 'attributes'.<br>\n  NoSuchMethodError: method not found: 'attributes'</p>\n\n<p>I tryed to run web_server.dart or to stop one. The error is rising up.</p>\n"}, {"tags": ["json", "symfony", "dart", "fosrestbundle"], "comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1430901172, "post_id": 30071353, "comment_id": 48256887, "body": "<i>But for some it responds with</i> - what does that mean? Then I guess the data structure is different? The two responses are different for sure."}, {"owner": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "reply_to_user": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1430902125, "post_id": 30071353, "comment_id": 48257524, "body": "It should not be different. They both use the same Symfony Service only with a different Entity Class as Parameter."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430902575, "post_id": 30071353, "comment_id": 48257835, "body": "Seems more like a PHP problem than a Dart problem then."}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1430904786, "post_id": 30071353, "comment_id": 48259411, "body": "Oh .. you edited your answer from &quot;0&quot; to 0 ... In dart JSON map keys are always String, thus the actual object representation is different, because string key -&gt; Map and int key -&gt; List."}, {"owner": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 0, "creation_date": 1430904786, "post_id": 30071353, "comment_id": 48259412, "body": "Yes and no. It&#39;s more a problem of the Library I used not acounting for the fact that not all Lists of objects come in JSON-List notation and the PHP Library I used in the Backend for some reason spitting out object notation JSON when instead it should spit out list notation JSON. But the Dart Decoder works just like it should."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 0, "creation_date": 1430902733, "post_id": 30071763, "comment_id": 48257952, "body": "Ahhh. Ok So it is still a List just in object notation. due to it being more complicated than just a list. That makes sense. Still i find it odd that FosRest Modifies the Array index when its only purpose is to render the objects inside the array as an array so that json_encode can render everything. I&#39;ll file a bug with them about that. Thank you for your informative answer."}, {"owner": {"reputation": 14642, "user_id": 624594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbnHV.jpg?s=128&g=1", "display_name": "Mihai Stancu", "link": "https://stackoverflow.com/users/624594/mihai-stancu"}, "reply_to_user": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 0, "creation_date": 1430903447, "post_id": 30071763, "comment_id": 48258434, "body": "One example: in Doctrine2 you can (for example) fetch a list of objects as an array and specify a unique indexing column (ex. the ID) and the resulting array will have the id column as key for each row fetched. Another example: the backend fetches 10 items but delivers 6 because some of them are not accessible to you (by acl) or some of them have some kind of &quot;deleted flag&quot; etc.."}, {"owner": {"reputation": 14642, "user_id": 624594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbnHV.jpg?s=128&g=1", "display_name": "Mihai Stancu", "link": "https://stackoverflow.com/users/624594/mihai-stancu"}, "reply_to_user": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 0, "creation_date": 1430903477, "post_id": 30071763, "comment_id": 48258452, "body": "I really can&#39;t know what their reasons could be for modifying the content they retrieved from the DB."}], "tags": [], "owner": {"reputation": 14642, "user_id": 624594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbnHV.jpg?s=128&g=1", "display_name": "Mihai Stancu", "link": "https://stackoverflow.com/users/624594/mihai-stancu"}, "is_accepted": true, "score": 3, "last_activity_date": 1430903231, "last_edit_date": 1430903231, "creation_date": 1430901978, "answer_id": 30071763, "question_id": 30071353, "link": "https://stackoverflow.com/questions/30071353/is-0id1-id2-a-other-reprensation-of-a-json-list-like-id/30071763#30071763", "title": "Is {0:{&quot;id&quot;:1,...},{&quot;id:2,....}} a other reprensation of a JSON list like [{&quot;id&quot;:1,...},{&quot;id:2,....}]", "body": "<h2>Problem</h2>\n\n<p>You usually have a list of objects. You sometimes get an object with sub-objects as properties.</p>\n\n<h2>Underlying issue</h2>\n\n<p>JS/JSON-Lists are ordered from 0 upwards which means that if you have PHP-Array which does not respect this rule <code>json_encode</code> will output a JS/JSON-Object instead using the numeric indices as keys.</p>\n\n<p>PHP-Arrays are ordered maps which have more features that the JSON-Lists. Whenever you're using those extra features you won't be able to translate directly into JSON-Lists without loosing some information (ordering, keys, skipped indices, etc.).</p>\n\n<p>PHP-Arrays and JSON-Objects on the other hand are more ore less equivalent in terms of features and can be correctly translated between each other without any loss of information.</p>\n\n<h2>Occurence</h2>\n\n<p>This happens if you have an initial PHP-Array of values which respects the JS/JSON-List rules but the keys in the list of objects are modified somehow. For example if you have a custom indexing order <code>{\"3\":{}, \"0\":{}, \"1\":{}, \"2\":{}}</code> or if you have (any) keys that are strings (ie. not numeric).</p>\n\n<p>This always happens if you want to use the numeric id of the object as the numeric index of the list <code>{\"123\":{\"id\": 123, \"name\": \"obj\"}}</code> even if the numeric ids are in ascending order... so long as they are not starting from 0 upwards it's not a json-list it's a json-object.</p>\n\n<h2>Specific case</h2>\n\n<p>So my guess is that the PHP code in the backend is doing something like fetching a list of objects but its modifying something about it like inserting them by (string) keys into the array, inserting them in a specific order, removing some of them.</p>\n\n<h2>Resolution</h2>\n\n<p>The backend can easily fix this by using <code>array_values($listOfObjects)</code> before using <code>json_encode</code> which will reindex the entire list by numeric indices of ascending value.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 0, "creation_date": 1430903527, "post_id": 30071971, "comment_id": 48258478, "body": "Yep thats true. Unfortuantly it turns out that FOSRest turns non-associative arrays into associative ones even if array_values is used on the array beforehand."}, {"owner": {"reputation": 451, "user_id": 4860197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a21501e213f4f176494ae2d9a26d04b2?s=128&d=identicon&r=PG&f=1", "display_name": "laszlovl", "link": "https://stackoverflow.com/users/4860197/laszlovl"}, "reply_to_user": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "edited": false, "score": 1, "creation_date": 1430904487, "post_id": 30071971, "comment_id": 48259204, "body": "Right. I found a related bug report, perhaps one of the workarounds listed there will work for you: <a href=\"https://github.com/schmittjoh/JMSSerializerBundle/issues/373\" rel=\"nofollow noreferrer\">github.com/schmittjoh/JMSSerializerBundle/issues/373</a>"}], "tags": [], "owner": {"reputation": 451, "user_id": 4860197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a21501e213f4f176494ae2d9a26d04b2?s=128&d=identicon&r=PG&f=1", "display_name": "laszlovl", "link": "https://stackoverflow.com/users/4860197/laszlovl"}, "is_accepted": false, "score": 2, "last_activity_date": 1430902513, "creation_date": 1430902513, "answer_id": 30071971, "question_id": 30071353, "link": "https://stackoverflow.com/questions/30071353/is-0id1-id2-a-other-reprensation-of-a-json-list-like-id/30071971#30071971", "title": "Is {0:{&quot;id&quot;:1,...},{&quot;id:2,....}} a other reprensation of a JSON list like [{&quot;id&quot;:1,...},{&quot;id:2,....}]", "body": "<p>Arrays and dictionaries are two separate types in JSON (\"array\" and \"object\" respectively), but PHP combines this functionality in a single array type.</p>\n\n<p>PHP's json_encode deals with this as follows: an array that only contains numeric keys (<code>$array = ['cat', 'dog']</code>) is serialized as JSON array, an associative array that contains non-numeric keys (<code>$array = ['cat' =&gt; 'meow', 'dog' =&gt; 'woof']</code>) is serialized as JSON object, including the array's keys in the output.</p>\n\n<p>If you end up with an associative array in PHP, but want to serialize it as a plain array in JSON, just use this to convert it to a numerical array before JSON encoding it: <code>$array = array_values($array);</code></p>\n"}], "owner": {"reputation": 93, "user_id": 3913137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a524b597a781cf9619a674967ad350?s=128&d=identicon&r=PG", "display_name": "Toasterson", "link": "https://stackoverflow.com/users/3913137/toasterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 30071763, "answer_count": 2, "score": 0, "last_activity_date": 1430903231, "creation_date": 1430900849, "last_edit_date": 1430902008, "question_id": 30071353, "link": "https://stackoverflow.com/questions/30071353/is-0id1-id2-a-other-reprensation-of-a-json-list-like-id", "title": "Is {0:{&quot;id&quot;:1,...},{&quot;id:2,....}} a other reprensation of a JSON list like [{&quot;id&quot;:1,...},{&quot;id:2,....}]", "body": "<p>I have a little dilema. I have a backend/Frontend Application that comunicates with a JSON based REST Api.</p>\n\n<p>The backend is written in PHP(Symfony/jmsserializer) and the Frontend in Dart</p>\n\n<p>The communication between these two has a little Problem.</p>\n\n<p>For most List Data the backend responds with a JSON like </p>\n\n<pre><code>[{\"id\":1,...},{\"id:2,....}]\n</code></pre>\n\n<p>But for some it responds with </p>\n\n<pre><code>{\"0\":{\"id\":1,...}, \"1\":{\"id:2,....}}\n</code></pre>\n\n<p>Now my Question is should the backend respond with the later at all or only with the first?</p>\n"}, {"tags": ["dart", "google-cloud-endpoints"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430885407, "creation_date": 1430885407, "answer_id": 30067348, "question_id": 30064817, "link": "https://stackoverflow.com/questions/30064817/using-dart-discoveryapis-generator-on-webapp/30067348#30067348", "title": "Using dart discoveryapis_generator on webapp?", "body": "<p>The http package also contains a client that runs in the browser. Just change the import to import the file <code>package:http/browser_client.dart;</code> instead. </p>\n"}], "owner": {"reputation": 2224, "user_id": 954853, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c04680c3b2ec5bc1462ba601f3cc2fe?s=128&d=identicon&r=PG", "display_name": "Anthony Bobenrieth", "link": "https://stackoverflow.com/users/954853/anthony-bobenrieth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30067348, "answer_count": 1, "score": 1, "last_activity_date": 1430885407, "creation_date": 1430867819, "question_id": 30064817, "link": "https://stackoverflow.com/questions/30064817/using-dart-discoveryapis-generator-on-webapp", "title": "Using dart discoveryapis_generator on webapp?", "body": "<p>Can't use my model file generated with the <a href=\"https://pub.dartlang.org/packages/discovery_api_client_generator\" rel=\"nofollow\">discoveryapis_generator</a>.</p>\n\n<p>It ask for a http.client to be used, but it's from <a href=\"https://api.dartlang.org/apidocs/channels/be/dartdoc-viewer/dart:io\" rel=\"nofollow\">dart:io</a>, and i m trying to use it in a web app</p>\n\n<pre><code>static YoupipeApi api = new YoupipeApi(new http.Client()); //cant work on webapp\n</code></pre>\n\n<blockquote>\n  <p>Failed to invoke tokenLoaded callback: Unsupported operation: IOClient isn't supported on this platform.</p>\n</blockquote>\n\n<p>So, discoveryapis_generator is only available for native dart client? \nAm i doing something wrong?</p>\n\n<p>(<a href=\"https://github.com/dart-lang/discoveryapis_generator/issues/149\" rel=\"nofollow\">related question here</a>)</p>\n"}, {"tags": ["postgresql", "dart"], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1430915697, "post_id": 30069973, "comment_id": 48267051, "body": "You are of course right. Sorry for that error. Wasted your time.I know that one should not store passwords in plain text, but this is just a little student project, and security is not the main objective of the class."}, {"owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "reply_to_user": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1430985062, "post_id": 30069973, "comment_id": 48302129, "body": "No problem. Happens to everyone. Good luck ;)"}], "tags": [], "owner": {"reputation": 11352, "user_id": 1460491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hAkIT.jpg?s=128&g=1", "display_name": "Greg Lowe", "link": "https://stackoverflow.com/users/1460491/greg-lowe"}, "is_accepted": true, "score": 1, "last_activity_date": 1430896585, "last_edit_date": 1495540262, "creation_date": 1430896585, "answer_id": 30069973, "question_id": 30063120, "link": "https://stackoverflow.com/questions/30063120/error-42703-when-connecting-to-postgresql-database-with-dart/30069973#30069973", "title": "Error 42703 when connecting to postgresql database with dart", "body": "<p>I think you forgot to pass the values into conn.execute().</p>\n\n<p>Try changing this line:</p>\n\n<pre><code>conn.execute('insert into users values(@login, @password)')\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>conn.execute('insert into users values(@login, @password)', values)\n                                                            ^^^^^^\n</code></pre>\n\n<p>Also, I'd recommend storing salted password hashes rather than plaintext strings. Here's a good starting point: <a href=\"https://stackoverflow.com/questions/2647158/how-can-i-hash-passwords-in-postgresql\">How can I hash passwords in postgresql?</a></p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 30069973, "answer_count": 1, "score": 0, "last_activity_date": 1430896585, "creation_date": 1430859442, "question_id": 30063120, "link": "https://stackoverflow.com/questions/30063120/error-42703-when-connecting-to-postgresql-database-with-dart", "title": "Error 42703 when connecting to postgresql database with dart", "body": "<p>To test my connection to the database I wanted to simply add some hard coded data to one table.\nHere is my approach. In the <code>main.dart</code> file there are only 2 problem related rows</p>\n\n<pre><code>DatabaseUtility dbUtil = new DatabaseUtility('postgres', 'kewoziwa', 'auctionDB');\ndbUtil.insertIntoUsers({'login': 'dartUser', 'password': 'passMePlease'});\n</code></pre>\n\n<p>In the first row I create an instance of a helper class.\nIn the second I call a method defined in this class.</p>\n\n<p>The whole code of main:</p>\n\n<pre><code>import 'dart:io';\nimport 'package:http_server/http_server.dart' show VirtualDirectory;\nimport 'database_utility.dart';\n\nVirtualDirectory virDir; // not related to this problem\n\nmain() {\n    DatabaseUtility dbUtil = new DatabaseUtility('postgres', 'kewoziwa', 'auctionDB');\n    dbUtil.insertIntoUsers({'login': 'dartUser', 'password': 'passMePlease'});\n    initVirDir(); // not related to this problem\n    runServer(); // not related to this problem\n}\n</code></pre>\n\n<p>In the DatabaseUtility class constructor I only create the uri for the database connection. The same password used in the instantiation logs in without any problem using pgAdmin III. Also all other inputs are the same as in pgAdmin III.\nThe defined <code>insertIntoUsers</code> method simply executes an insert operation to the users table. I don't see what could be wrong there. After the insert i close the connection.</p>\n\n<p>The whole helper class:</p>\n\n<pre><code>import 'package:postgresql/postgresql.dart';\n\nclass DatabaseUtility {\n  //Connection conn;\n  String username;\n  String passwd;\n  String database;\n  var uri;\n\n  DatabaseUtility(this.username, this.passwd, this.database) {\n    uri ='postgres://$username:$passwd@localhost:5432/$database';\n    print(uri);\n  }\n\n  insertIntoUsers(Map values){\n    connect(uri)\n    .then((conn){\n      conn.execute('insert into users values(@login, @password)')\n        .then((_) =&gt; conn.close());\n    })\n    .catchError(print);\n  }\n}\n</code></pre>\n\n<p>Unfortunately when I run this I get the error:  42703</p>\n\n<p>Error message:</p>\n\n<pre><code>Unhandled exception:\nUncaught Error: B\u0141\u0104D 42703 kolumna \"login\" nie istnieje\n// Trnaslation Error: 42703 the column \"login\" does not exist\n#0      _rootHandleUncaughtError.&lt;anonymous closure&gt; (dart:async/zone.dart:886)\n#1      _asyncRunCallbackLoop (dart:async/schedule_microtask.dart:41)\n#2      _asyncRunCallback (dart:async/schedule_microtask.dart:48)\n#3      _runPendingImmediateCallback (dart:isolate-patch/isolate_patch.dart:96)\n#4      _RawReceivePortImpl._handleMessage (dart:isolate-patch/isolate_patch.dart:143)\n</code></pre>\n\n<p>In the pgAdminIII tool I can see this column.\n<img src=\"https://i.stack.imgur.com/t37Ly.png\" alt=\"pgAdminIII tool with &quot;missing&quot; column\">\nWhat's wrong here?</p>\n"}, {"tags": ["dart", "dart-shelf", "dart-rpc"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430917141, "post_id": 30076761, "comment_id": 48268205, "body": "After upgrading to Dart rpc [0.4.3] it all works fine - no workaround required anymore!  Thanks a lot for the fix!"}], "tags": [], "owner": {"reputation": 111, "user_id": 4865618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QHM3ZUD-8nY/AAAAAAAAAAI/AAAAAAAAAMU/ggpgZn3qWAg/photo.jpg?sz=128", "display_name": "Gustav Wibling", "link": "https://stackoverflow.com/users/4865618/gustav-wibling"}, "is_accepted": true, "score": 3, "last_activity_date": 1430915325, "creation_date": 1430915325, "answer_id": 30076761, "question_id": 30062245, "link": "https://stackoverflow.com/questions/30062245/incompatibility-when-running-dart-rpc-and-shelf-with-shelf-rpc-related-to-head/30076761#30076761", "title": "incompatibility when running dart rpc and shelf (with shelf_rpc) related to headers which are lists (and not Strings)", "body": "<p>This should be fixed in the latest version of the Dart RPC package (v0.4.3). Please try it out and let me know how it works.</p>\n\n<p>/gustav</p>\n"}], "owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 30076761, "answer_count": 1, "score": 1, "last_activity_date": 1440399736, "creation_date": 1430856223, "last_edit_date": 1440399736, "question_id": 30062245, "link": "https://stackoverflow.com/questions/30062245/incompatibility-when-running-dart-rpc-and-shelf-with-shelf-rpc-related-to-head", "title": "incompatibility when running dart rpc and shelf (with shelf_rpc) related to headers which are lists (and not Strings)", "body": "<p>incompatibility when running dart rpc and shelf (with shelf_rpc) \nrelated to headers which are lists (and not Strings).</p>\n\n<p>It seems that there is an incompatibility when running dart rpc and shelf (with shelf_rpc) \nrelated to headers which are lists (and not Strings).</p>\n\n<p>Error thrown is ( for shelf[0.5.7], shelf_rpc[0.0.3], rpc[0.4.2]: ):</p>\n\n<pre><code>    Error thrown by handler.\n    type 'List' is not a subtype of type 'String' of 'value'.\n    package:collection/src/canonicalized_map.dart 66:30  CanonicalizedMap.[]=\n    package:collection/src/canonicalized_map.dart 71:39  CanonicalizedMap.addAll.&lt;fn&gt;\n    dart:collection                                      _CompactLinkedHashMap.forEach\n    package:collection/src/canonicalized_map.dart 71:18  CanonicalizedMap.addAll\n    package:collection/src/canonicalized_map.dart 57:11  CanonicalizedMap.CanonicalizedMap.from\n    package:shelf/src/response.dart 215:9                Response.Response\n    package:shelf_rpc/shelf_rpc.dart 18:24               createRpcHandler.&lt;fn&gt;.&lt;fn&gt;\n</code></pre>\n\n<p>A workaround around this problem is to change shelf_rpc.dart to replace the Lists by Strings:</p>\n\n<pre><code>    // Copyright (c) 2015, the Dart project authors.  Please see the AUTHORS file\n    // for details. All rights reserved. Use of this source code is governed by a\n    // BSD-style license that can be found in the LICENSE file.\n\n    import \"package:shelf/shelf.dart\";\n    import \"package:rpc/rpc.dart\";\n\n    /// Creates a Shelf [Handler] that translates Shelf [Request]s to rpc's\n    /// [HttpApiRequest] executes the request on the given [ApiServer] and then\n    /// translates the returned rpc's [HttpApiResponse] to a Shelf [Response].\n    Handler createRpcHandler(ApiServer apiServer) {\n      return (Request request) {\n        try {\n          var apiRequest = new HttpApiRequest(request.method, request.requestedUri,\n              request.headers, request.read());\n          return apiServer.handleHttpApiRequest(apiRequest).then(\n              (apiResponse) {\n            // EXTRA: print and work-around\n            printHeaders(apiResponse.headers, true);\n            printHeaders(apiResponse.headers, false);\n            // EXTRA &lt;end&gt;        \n                return new Response(apiResponse.status, body: apiResponse.body,\n                                    headers: apiResponse.headers);\n              });\n        } catch (e) {\n          // Should never happen since the apiServer.handleHttpRequest method\n          // always returns a response.\n          return new Response.internalServerError(body: e.toString());\n        }\n      };\n    }\n\n    // EXTRA WORKAROUND: print headers &amp; replace Lists by Strings\n    printHeaders(Map headers, bool replaceListsBytStrings) {\n      print('--HEADERS start---');\n      headers.forEach(\n                     (key, value) {\n                   print('key: $key - value: $value - type: ${value.runtimeType}');\n                   if ( (replaceListsBytStrings) &amp;&amp; (value is List) ) {\n                     String str = value.toString().substring(1, value.toString().length-1);\n                     headers[key] = str;\n                   }\n                 });  \n      print('--HEADERS end---');\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    --HEADERS start---\n    key: content-type - value: application/json; charset=utf-8 - type: String\n    key: cache-control - value: no-cache, no-store, must-revalidate - type: String\n    key: pragma - value: no-cache - type: String\n    key: expires - value: 0 - type: String\n    key: access-control-allow-credentials - value: true - type: String\n    key: access-control-allow-origin - value: * - type: String\n    key: allow - value: [GET] - type: List\n    key: access-control-allow-methods - value: [GET] - type: List\n    key: access-control-allow-headers - value: origin, x-requested-with, content-type, accept - type: String\n    key: Access-Control-Allow-Headers - value: null,Authorization, content-type - type: String\n    --HEADERS end---\n    --HEADERS start---\n    key: content-type - value: application/json; charset=utf-8 - type: String\n    key: cache-control - value: no-cache, no-store, must-revalidate - type: String\n    key: pragma - value: no-cache - type: String\n    key: expires - value: 0 - type: String\n    key: access-control-allow-credentials - value: true - type: String\n    key: access-control-allow-origin - value: * - type: String\n    key: allow - value: GET - type: String\n    key: access-control-allow-methods - value: GET - type: String\n    key: access-control-allow-headers - value: origin, x-requested-with, content-type, accept - type: String\n    key: Access-Control-Allow-Headers - value: null,Authorization, content-type - type: String\n    --HEADERS end---\n</code></pre>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1430854087, "post_id": 30061271, "comment_id": 48238253, "body": "I feel like dartpad is using and old dart version."}, {"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "reply_to_user": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "edited": false, "score": 0, "creation_date": 1430854139, "post_id": 30061271, "comment_id": 48238281, "body": "Well, I&#39;ve got 1.10 on my local, and same thing."}], "answers": [{"comments": [{"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430854272, "post_id": 30061647, "comment_id": 48238365, "body": "Hm, I&#39;ve got 1.10. I imagine DartPad also using that latest stable version."}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "reply_to_user": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430854322, "post_id": 30061647, "comment_id": 48238393, "body": "dartpad does not complete for <code>SQ_ELEMENT</code> mode thus I don&#39;t think they use the latest stable version."}, {"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430855047, "post_id": 30061647, "comment_id": 48238844, "body": "Weird. In a brand new test.dart, it works as expected. But the same exact code in my app printed to console, does not work."}, {"owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "reply_to_user": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430855084, "post_id": 30061647, "comment_id": 48238866, "body": "Yes, that&#39;s really strange. Too bad there is no sdk-version over at dartpad."}, {"owner": {"reputation": 32377, "user_id": 25124, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4aec6b9ca532bc29a9c23e5147efa2fa?s=128&d=identicon&r=PG", "display_name": "Danny Tuppeny", "link": "https://stackoverflow.com/users/25124/danny-tuppeny"}, "edited": false, "score": 0, "creation_date": 1430891097, "post_id": 30061647, "comment_id": 48251101, "body": "There were definitely <i>some</i> changes to <code>HtmlEscape</code> in 1.10, see <a href=\"https://groups.google.com/a/dartlang.org/forum/#!topic/announce/l-wQTHX3VJo\" rel=\"nofollow noreferrer\">release notes</a> (Edit: Oops, should always expand comments before posting!)"}, {"owner": {"reputation": 32377, "user_id": 25124, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4aec6b9ca532bc29a9c23e5147efa2fa?s=128&d=identicon&r=PG", "display_name": "Danny Tuppeny", "link": "https://stackoverflow.com/users/25124/danny-tuppeny"}, "edited": false, "score": 1, "creation_date": 1430891357, "post_id": 30061647, "comment_id": 48251226, "body": "I raised an issue suggesting they add the version to DartPad: <a href=\"https://github.com/dart-lang/dart-pad/issues/403\" rel=\"nofollow noreferrer\">github.com/dart-lang/dart-pad/issues/403</a>"}, {"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430924669, "post_id": 30061647, "comment_id": 48274325, "body": "There&#39;s something more going on than the SDK version over at DartPad. I opened a new issue here: <a href=\"https://code.google.com/p/dart/issues/detail?id=23400&amp;thanks=23400&amp;ts=1430924595\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "is_accepted": false, "score": 2, "last_activity_date": 1430854195, "creation_date": 1430854195, "answer_id": 30061647, "question_id": 30061271, "link": "https://stackoverflow.com/questions/30061271/sanitize-html-with-htmlescape-only-and/30061647#30061647", "title": "Sanitize HTML with HtmlEscape, only &lt; and &gt;", "body": "<p>When I run the following code in the latest dev version (1.10.0-dev.1.10) I get the desired result. I guess dartpad uses and old version of dart.</p>\n\n<pre><code>import 'dart:convert';\n\nmain() {\n  var sanitizer = new HtmlEscape(HtmlEscapeMode.ELEMENT);\n  var text = 'http://woven.co/';\n\n  print(text);\n  text = sanitizer.convert(text);\n  print(text);\n}\n</code></pre>\n\n<blockquote>\n  <p><a href=\"http://woven.co/\" rel=\"nofollow\">http://woven.co/</a><br>\n  <a href=\"http://woven.co/\" rel=\"nofollow\">http://woven.co/</a></p>\n</blockquote>\n"}], "owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430854195, "creation_date": 1430852914, "question_id": 30061271, "link": "https://stackoverflow.com/questions/30061271/sanitize-html-with-htmlescape-only-and", "title": "Sanitize HTML with HtmlEscape, only &lt; and &gt;", "body": "<p>I'm having trouble with escaping HTML using <code>HtmlEscape</code> in <code>dart:convert</code>.</p>\n\n<pre><code>import 'dart:convert';\n\nvar sanitizer = new HtmlEscape(HtmlEscapeMode.ELEMENT);\nvar text = 'http://woven.co/';\n\nprint(text);\ntext = sanitizer.convert(text);\nprint(text); // http:&amp;#x2F;&amp;#x2F;woven.co&amp;#x2F;\n</code></pre>\n\n<p>Try it at: <a href=\"https://dartpad.dartlang.org/6036b7f888128b310a78\" rel=\"nofollow\">https://dartpad.dartlang.org/6036b7f888128b310a78</a></p>\n\n<p>I expected the string not to change, given the <code>HtmlEscapeMode.ELEMENT</code> definition:\n<a href=\"https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:convert.HtmlEscapeMode#id_ELEMENT\" rel=\"nofollow\">https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:convert.HtmlEscapeMode#id_ELEMENT</a></p>\n\n<p>As well, for the life of me I can't figure out how to pass my own <code>HtmlEscapeMode</code> in.</p>\n"}, {"tags": ["asynchronous", "dart"], "answers": [{"comments": [{"owner": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 0, "creation_date": 1430842907, "post_id": 30058243, "comment_id": 48231355, "body": "I did launch the final step from the context menu. And when I launched the development project for all the steps it worked fine. The final step has me click the built HTML file and select &quot;Run in Browser&quot;, which is the point at which I encountered this."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 0, "creation_date": 1430843022, "post_id": 30058243, "comment_id": 48231418, "body": "Do you get any error message? In DartEditor or in Chrome dev-tools (press F12 in the browser)"}, {"owner": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 0, "creation_date": 1430844239, "post_id": 30058243, "comment_id": 48232167, "body": "Failed to load resource: the server responded with a status of 404 (Not Found)  With a reference to: <a href=\"http://127.0.0.1:3030/darrrt/1-blankbadge/build/web/piratebadge.dart\" rel=\"nofollow noreferrer\">127.0.0.1:3030/darrrt/1-blankbadge/build/web/piratebadge.dar&zwnj;&#8203;t</a>"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 0, "creation_date": 1430844682, "post_id": 30058243, "comment_id": 48232447, "body": "Doesn&#39;t look like you are loading it using <code>pub serve</code>. If you open it from DartEditor (<code>6-piratebadge&#47;web&#47;piratebadge.html</code>) this should work or at least show a different error message."}, {"owner": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 0, "creation_date": 1430846346, "post_id": 30058243, "comment_id": 48233477, "body": "Yep, that stage works perfectly well. I&#39;m trying to run the built web app to double-check that it works (since I don&#39;t currently have a web server to upload it to) in deployment. But that probably means I should be running at least a simple web server on the build directory."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "edited": false, "score": 1, "creation_date": 1430846512, "post_id": 30058243, "comment_id": 48233599, "body": "Yup, otherwise you need to add command line options like <code>--allow-file-access-from-files</code> when you start chrome. If you start the built output you will always get the mentioned error because there is still an obsolete dart script tag in the <code>piratebadge.html</code> file. I assume this will be changed eventually."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430842666, "creation_date": 1430842666, "answer_id": 30058243, "question_id": 30057869, "link": "https://stackoverflow.com/questions/30057869/dart-pirate-tutorial-doesnt-download-json-after-build-step-7/30058243#30058243", "title": "Dart Pirate Tutorial Doesn&#39;t Download JSON after build (step 7)", "body": "<p>Why are you not running a web server? You could just run <code>pub serve web</code> from the package folder (where the <code>pubspec.yaml</code> file is) and load the page from <code>http://localhost:8080/piratebadge.html</code>.</p>\n\n<p>Your <code>&lt;Dart-SDK&gt;/bin</code> directory needs to be added to your systems <code>PATH</code> in order to make <code>pub serve web</code> work.</p>\n\n<p>If you use DartEditor just use the <code>run</code> context menu on the <code>piratebadge.html</code> file and it launches <code>pub serve</code> automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4865618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QHM3ZUD-8nY/AAAAAAAAAAI/AAAAAAAAAMU/ggpgZn3qWAg/photo.jpg?sz=128", "display_name": "Gustav Wibling", "link": "https://stackoverflow.com/users/4865618/gustav-wibling"}, "is_accepted": false, "score": 1, "last_activity_date": 1431417469, "creation_date": 1431417469, "answer_id": 30184987, "question_id": 30057869, "link": "https://stackoverflow.com/questions/30057869/dart-pirate-tutorial-doesnt-download-json-after-build-step-7/30184987#30184987", "title": "Dart Pirate Tutorial Doesn&#39;t Download JSON after build (step 7)", "body": "<p>This appears to be a new bug in the DartEditor on Mac (and Linux), see <a href=\"https://code.google.com/p/dart/issues/detail?id=23431&amp;thanks=23431&amp;ts=1431391466\" rel=\"nofollow\">https://code.google.com/p/dart/issues/detail?id=23431&amp;thanks=23431&amp;ts=1431391466</a></p>\n\n<p>One way to work around this is to start your own http server, e.g. 'python -m SimpleHTTPServer' in the build/web directory and then goto <a href=\"http://localhost:8000/piratebadge.html\" rel=\"nofollow\">http://localhost:8000/piratebadge.html</a>.</p>\n"}], "owner": {"reputation": 464, "user_id": 2152699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/13c6d477e622b7a710ef99d0dc3e63a3?s=128&d=identicon&r=PG", "display_name": "AberrantWolf", "link": "https://stackoverflow.com/users/2152699/aberrantwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30058243, "answer_count": 2, "score": 1, "last_activity_date": 1431417469, "creation_date": 1430841482, "question_id": 30057869, "link": "https://stackoverflow.com/questions/30057869/dart-pirate-tutorial-doesnt-download-json-after-build-step-7", "title": "Dart Pirate Tutorial Doesn&#39;t Download JSON after build (step 7)", "body": "<p>I did the Google Dart tutorial (pirate name badge: <a href=\"https://www.dartlang.org/codelabs/darrrt/\" rel=\"nofollow\">https://www.dartlang.org/codelabs/darrrt/</a>) all the way through and it ran exactly as expected until I hit step 7 where I run the build on my normal browser.</p>\n\n<p>What happens is the page loads, but it never seems to complete the async download of the JSON file, so the input and button never become enabled and Chrome keeps spinning because it's waiting on localhost (127.0.0.1).</p>\n\n<p>I imagine this is because I'm not running a web server?</p>\n\n<p>What would I have to do to get this sample app to run on my local machine?</p>\n\n<p>Thanks!</p>\n\n<p>Browser: Chrome 42.0.2311.90</p>\n\n<p>OS: Mac OS X 10.10.3</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430839459, "post_id": 30056975, "comment_id": 48228911, "body": "DartPad is a way better option to try and share Dart code <a href=\"https://dartpad.dartlang.org/b90ddbe86db7d366497a\" rel=\"nofollow noreferrer\">dartpad.dartlang.org/b90ddbe86db7d366497a</a>"}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 4, "last_activity_date": 1430839349, "creation_date": 1430839349, "answer_id": 30057080, "question_id": 30056975, "link": "https://stackoverflow.com/questions/30056975/inserting-value-of-map-to-string/30057080#30057080", "title": "inserting value of map to string", "body": "<p>Your example code from the PostgreSQL driver means that the <code>query()</code> method expects two arguments, a string and a map.</p>\n\n<p>Your 2nd example seems to try to do string interpolation. In Dart this would look like</p>\n\n<pre><code>var id = 5;\nvar string = 'select color from crayons where id = $id'; // or ${id}\n  print(string);\n</code></pre>\n\n<p>Please don't try this for SQL. This opens a big hole for SQL injection attachs.</p>\n\n<p>PostgresSQL does it's own string interpolation in a safe way.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 30057080, "answer_count": 1, "score": 1, "last_activity_date": 1430839349, "creation_date": 1430839032, "question_id": 30056975, "link": "https://stackoverflow.com/questions/30056975/inserting-value-of-map-to-string", "title": "inserting value of map to string", "body": "<p>I took a look at the <a href=\"https://pub.dartlang.org/packages/postgresql\" rel=\"nofollow\">postgresql driver dokumentation</a>. I found the following code there.</p>\n\n<pre><code>conn.query('select color from crayons where id = @id', {'id': 5})\n  .toList()\n    .then((result) { print(result); });\n\nconn.execute('insert into crayons values (@id, @color)',\n             {'id': 1, 'color': 'pink'})\n    .then((_) { print('done.'); });\n</code></pre>\n\n<p>I wanted to test the inserting of the id into the string and put the following code into <a href=\"https://try.dartlang.org/\" rel=\"nofollow\">try.dart.org</a></p>\n\n<pre><code>// Go ahead and modify this example.\n\nvoid main() {\nvar string = 'select color from crayons where id = @id', {'id': 5};\n  print(string);\n}\n</code></pre>\n\n<p>Unfortunately this gives me the following error <code>Compilation failed: Expected identifier, but got '{'.</code>. I also tried a few abbreviations but nothing helped.</p>\n\n<p>So the question is. How do I properly insert the values of a map into a string?</p>\n"}, {"tags": ["dart", "dart-shelf", "dart-rpc"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430816900, "post_id": 30048563, "comment_id": 48212245, "body": "O.K. done: <a href=\"https://github.com/dart-lang/rpc/issues/42\" rel=\"nofollow noreferrer\">github.com/dart-lang/rpc/issues/42</a>    Thanks for the swift reply!"}, {"owner": {"reputation": 111, "user_id": 4865618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QHM3ZUD-8nY/AAAAAAAAAAI/AAAAAAAAAMU/ggpgZn3qWAg/photo.jpg?sz=128", "display_name": "Gustav Wibling", "link": "https://stackoverflow.com/users/4865618/gustav-wibling"}, "reply_to_user": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430830396, "post_id": 30048563, "comment_id": 48221527, "body": "Should be fixed now. If you could try it out and let me know that would be great. You need to do a &#39;pub upgrade&#39; to get the latest version (v0.4.2)."}, {"owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430837202, "post_id": 30048563, "comment_id": 48227057, "body": "The previously mentioned issue seems to be fixed. Thanks for that!  A new issue turned up =&gt; see question update"}, {"owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430856257, "post_id": 30048563, "comment_id": 48239582, "body": "The new issue that shows up: <a href=\"http://stackoverflow.com/questions/30062245/incompatibility-when-running-dart-rpc-and-shelf-with-shelf-rpc-related-to-head\" title=\"incompatibility when running dart rpc and shelf with shelf rpc related to head\">stackoverflow.com/questions/30062245/&hellip;</a>"}, {"owner": {"reputation": 111, "user_id": 4865618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QHM3ZUD-8nY/AAAAAAAAAAI/AAAAAAAAAMU/ggpgZn3qWAg/photo.jpg?sz=128", "display_name": "Gustav Wibling", "link": "https://stackoverflow.com/users/4865618/gustav-wibling"}, "reply_to_user": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430915368, "post_id": 30048563, "comment_id": 48266797, "body": "Sorry about the lack of proper testing. It should be fixed now (rpc v0.4.3). Please let me know how it works for you."}, {"owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "edited": false, "score": 0, "creation_date": 1430917203, "post_id": 30048563, "comment_id": 48268268, "body": "After upgrading to Dart rpc [0.4.3] it all works fine - no workaround required anymore! Thanks a lot for the fix!"}], "tags": [], "owner": {"reputation": 111, "user_id": 4865618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QHM3ZUD-8nY/AAAAAAAAAAI/AAAAAAAAAMU/ggpgZn3qWAg/photo.jpg?sz=128", "display_name": "Gustav Wibling", "link": "https://stackoverflow.com/users/4865618/gustav-wibling"}, "is_accepted": true, "score": 4, "last_activity_date": 1430816667, "creation_date": 1430816667, "answer_id": 30048563, "question_id": 30047966, "link": "https://stackoverflow.com/questions/30047966/incompatibility-between-the-dart-shelf-and-rpc-packages-access-control-reques/30048563#30048563", "title": "Incompatibility between the Dart shelf and rpc packages? (&#39;access-control-request-method&#39; header)", "body": "<p>This is a bug in the RPC package. I will fix this ASAP and publish a new version of the RPC package.</p>\n\n<p>You are welcome to file this kind of issue under github at:</p>\n\n<p><a href=\"https://github.com/dart-lang/rpc/issues\" rel=\"nofollow\">https://github.com/dart-lang/rpc/issues</a></p>\n\n<p>Cheers,\n/gustav</p>\n"}], "owner": {"reputation": 245, "user_id": 3426096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8f65da7af45c7cfc85cd1c72ffb5ff?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/3426096/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 30048563, "answer_count": 1, "score": 1, "last_activity_date": 1440399499, "creation_date": 1430814980, "last_edit_date": 1495535335, "question_id": 30047966, "link": "https://stackoverflow.com/questions/30047966/incompatibility-between-the-dart-shelf-and-rpc-packages-access-control-reques", "title": "Incompatibility between the Dart shelf and rpc packages? (&#39;access-control-request-method&#39; header)", "body": "<p>There seems to be an incompatibility between the shelf and rpc packages.</p>\n\n<p>In  rpc [0.4.1] config/api.dart:  The handleHttpOptionsRequest expects the\n'access-control-request-method' header to be a List:</p>\n\n<pre><code>    Future&lt;HttpApiResponse&gt; handleHttpOptionsRequest(\n          ParsedHttpApiRequest request) async {\n        var requestedHttpMethods = request.headers['access-control-request-method'];\n        List&lt;String&gt; allowed = [];\n        assert('OPTIONS'.allMatches(request.methodKey).length == 1);\n        if (requestedHttpMethods != null) {\n          requestedHttpMethods.forEach((httpMethod) {\n            var methodKey =\n                request.methodKey.replaceFirst('OPTIONS', httpMethod);\n            final List&lt;ApiConfigMethod&gt; methods = _methodMap[methodKey];\n            if (methods != null) {\n              for (var method in methods) {\n                if (method.matches(request)) {\n                  allowed.add(httpMethod);\n                  break;\n               }\n              }\n            }\n          });\n        }\n</code></pre>\n\n<p>When using the shelf [0.5.7] package,\nthe ParsedHttpApiRequest which is passed to this method contains an \n'access-control-request-method' header which is a String.</p>\n\n<p>This generates an exception...</p>\n\n<p>When using rpc with dart.io HttpServer, the code works fine and ParsedHttpApiRequest\nhas a List of Strings (with a single element) as value of the \n'access-control-request-method' header.</p>\n\n<p>Anyone uses dart rpc + shelf successfully?  If so, any idea on how to avoid the\nexception?</p>\n\n<p>===\n[update] After the rpc fix, the previously mentioned issue seems to be fixed. Thanks for that!\nI now run into another issue, but I did not yet investigate in detail.\nStack trace is:</p>\n\n<p>shelf [0.5.7] shelf_rpc [0.0.3]  rpc [0.4.2]:</p>\n\n<pre><code>     Error thrown by handler.\n     type 'List' is not a subtype of type 'String' of 'value'.\n     package:collection/src/canonicalized_map.dart 66:30  CanonicalizedMap.[]=\n     package:collection/src/canonicalized_map.dart 71:39  CanonicalizedMap.addAll.&lt;fn&gt;\n     dart:collection                                      _CompactLinkedHashMap.forEach\n     package:collection/src/canonicalized_map.dart 71:18  CanonicalizedMap.addAll\n     package:collection/src/canonicalized_map.dart 57:11  CanonicalizedMap.CanonicalizedMap.from\n     package:shelf/src/response.dart 215:9                Response.Response\n     package:shelf_rpc/shelf_rpc.dart 18:24               createRpcHandler.&lt;fn&gt;.&lt;fn&gt;\n</code></pre>\n\n<p>=> see <a href=\"https://stackoverflow.com/questions/30062245/incompatibility-when-running-dart-rpc-and-shelf-with-shelf-rpc-related-to-head\">incompatibility when running dart rpc and shelf (with shelf_rpc) related to headers which are lists (and not Strings)</a></p>\n"}, {"tags": ["http", "dart"], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1430769017, "post_id": 30037402, "comment_id": 48193393, "body": "If I understand correctly, handleAnyRequest would need to return a future, when the called request handlers completes. How can I check if <code>.serveFile()</code> finished. It has no return value?"}, {"owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "edited": false, "score": 0, "creation_date": 1430770179, "post_id": 30037402, "comment_id": 48194046, "body": "You where certainly right about the cause of the error. For know I commented out the <code>request.response.close()</code> part. I will  hopefully be able to find a solution for this in the near future. Thanks."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1430764369, "creation_date": 1430764369, "answer_id": 30037402, "question_id": 30036950, "link": "https://stackoverflow.com/questions/30036950/uncaught-error-bad-state-header-already-sent/30037402#30037402", "title": "Uncaught Error: Bad state: Header already sent", "body": "<p>I didn't check but I assume <code>vdir.serveRequest()</code> is async.</p>\n\n<p>You need to await this call</p>\n\n<pre><code>await handleAnyRequest(request);\n</code></pre>\n\n<p>and ensure that the future returned by <code>vdir.serveRequest</code> is returned so it can be awaited.\nOtherwise <code>request.response.close();</code> is called before <code>vdir.serveRequest()</code> is completed, thus the error.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1937872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfd326469e84e932e5e40e0c4d6213ae?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/1937872/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430764369, "creation_date": 1430762955, "question_id": 30036950, "link": "https://stackoverflow.com/questions/30036950/uncaught-error-bad-state-header-already-sent", "title": "Uncaught Error: Bad state: Header already sent", "body": "<p>I couldn't find anything relating to this error and dart, hence the question.</p>\n\n<p>What might cause this error in a simple server application.</p>\n\n<pre><code>import 'package:auctionprojectServer/auctionprojectServer.dart' as auctionprojectServer;\nimport 'dart:io';\nimport 'package:http_server/http_server.dart' show VirtualDirectory;\n\nVirtualDirectory virDir;\n\nmain() {\n    initVirDir();\n    runServer();\n}\n\n\n/**\n *  Code for virtual directory\n */\ninitVirDir() {\n  virDir = new VirtualDirectory(r\"..\\auctionProject\\web\")   // change to build\\web after 2js\n    ..allowDirectoryListing = true\n    ..directoryHandler = directoryHandler;\n}\n\ndirectoryHandler(dir, request) {\n  var indexUri = new Uri.file(dir.path).resolve('auctionproject.html');\n  virDir.serveFile(new File(indexUri.toFilePath()), request);  \n}\n\n/* end of virtual directory related code */\n\n\n/**\n *  Code to handle Http Requests\n */\nrunServer() async {\n  var server = await HttpServer.bind('127.0.0.1', 8080).catchError((e) =&gt; print(e));\n  await for (HttpRequest request in server) {\n    handleAnyRequest(request);\n    request.response.close();\n  }\n}\n\nhandleAnyRequest(HttpRequest request) {\n  switch (request.method) {\n    case 'GET':\n      handleGetRequest(request);\n      break;\n    case 'POST':\n      handlePostRequest(request);\n      break;\n    default: defaultRequestHandler(request);\n  }\n}\n\nhandleGetRequest(HttpRequest req) {\n  print('got GET request');\n  virDir.serveRequest(req).catchError((e)=&gt; print('annoying error'));  // &lt;&lt;&lt;\n}\n\nhandlePostRequest(HttpRequest req) {\n  print('got POST request');\n}\n\n// place for other request types\n\ndefaultRequestHandler(HttpRequest req){\n  print('some unhandled request!!!\\n');\n}\n\n/* end of code handling Http Requests */\n</code></pre>\n\n<p>After commenting out the code marked with <code>// &lt;&lt;&lt;</code> the error disappears. On the other hand <code>annoying error</code> is never printed so I am not sure where the problem originates from.</p>\n\n<p>The console output is shown below.</p>\n\n<pre><code>got GET request\ngot GET request\nUnhandled exception:\nUncaught Error: Bad state: Header already sent\nStack Trace:\n#0      _HttpResponse.statusCode= (dart:io/http_impl.dart:523)\n#1      VirtualDirectory.serveFile.&lt;anonymous closure&gt; (package:http_server/src/virtual_directory.dart:287:16)\n#2      _RootZone.runUnary (dart:async/zone.dart:1155)\n#3      _Future._propagateToListeners.handleError (dart:async/future_impl.dart:515)\n#4      _Future._propagateToListeners (dart:async/future_impl.dart:570)\n#5      _Future._completeWithValue (dart:async/future_impl.dart:358)\n#6      _Future._asyncComplete.&lt;anonymous closure&gt; (dart:async/future_impl.dart:412)\n#7      _asyncRunCallbackLoop (dart:async/schedule_microtask.dart:41)\n#8      _asyncRunCallback (dart:async/schedule_microtask.dart:48)\n#9      _runPendingImmediateCallback (dart:isolate-patch/isolate_patch.dart:96)\n#10     _RawReceivePortImpl._handleMessage (dart:isolate-patch/isolate_patch.dart:143)\n\n#0      _rootHandleUncaughtError.&lt;anonymous closure&gt; (dart:async/zone.dart:886)\n#1      _asyncRunCallbackLoop (dart:async/schedule_microtask.dart:41)\n#2      _asyncRunCallback (dart:async/schedule_microtask.dart:48)\n#3      _runPendingImmediateCallback (dart:isolate-patch/isolate_patch.dart:96)\n#4      _RawReceivePortImpl._handleMessage (dart:isolate-patch/isolate_patch.dart:143)\n</code></pre>\n"}, {"tags": ["events", "dart", "google-visualization", "dart-async", "dart-js-interop"], "owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430758102, "creation_date": 1430758102, "question_id": 30035451, "link": "https://stackoverflow.com/questions/30035451/whats-the-best-way-to-provide-reusable-streams-for-my-google-visualization-api", "title": "What&#39;s the best way to provide reusable streams for my Google Visualization API Wrapper?", "body": "<p>I am developing a Dart based wrapper for the <a href=\"https://developers.google.com/chart/\" rel=\"nofollow\">Google Visualization / Charts API</a> that can be viewed over at <a href=\"https://github.com/roberthartung/google_visualization_api\" rel=\"nofollow\">github</a> already. I created a chart specific wrapper classes for all the charts that are available.</p>\n\n<p>Right now I am looking into the events of the underlying classes. The problem is that there are various events that are <strong>not</strong> shared across all charts. Thus I need to find a way to assign specific event types to their corresponding charts. What I already did is:</p>\n\n<ol>\n<li><p>I created a wrapper for the <a href=\"https://developers.google.com/chart/interactive/docs/reference#events\" rel=\"nofollow\">Events</a> api:</p>\n\n<pre><code>abstract class Events {\n  static JsObject addListener(source_visualization, event_name, Function handling_function) {\n    return vis['events'].callMethod('addListener', [source_visualization, event_name, new JsFunction.withThis(handling_function)]);\n  }\n\n  static JsObject addOneTimeListener(source_visualization, event_name, handling_function(e)) {\n    return vis['events'].callMethod('addOneTimeListener', [source_visualization, event_name, new JsFunction.withThis(handling_function)]);\n  }\n\n  static void removeListener(listener_handler) {\n    return vis['events'].callMethod('removeListener', [listener_handler]);\n  }\n\n  /// TODO(rh): removeAllListeners\n}\n</code></pre></li>\n<li><p>I created a <a href=\"https://github.com/roberthartung/google_visualization_api/blob/master/lib/src/base/events.dart#L42\" rel=\"nofollow\">wrapper class</a> that encapsulates all the code for one event The code looks like this:</p>\n\n<pre><code>class EventWrapper&lt;E extends Event&gt; {\n  JsObject _jsChart;\n  String _eventName;\n  JsObject _handler;\n  Stream&lt;E&gt; get onEvent =&gt; _streamController.stream;\n  StreamController&lt;E&gt; _streamController;\n  ...\n  EventWrapper(this._jsChart, this._eventName, E reviver(p)) {\n    _streamController = new StreamController.broadcast(onListen: () =&gt; _onListen(_eventName), onCancel: () =&gt; _onCancel(_eventName));\n  }\n\n  void _onListen(String event) {\n    _handler = Events.addListener(_jsChart, event, ...);\n  }\n\n  void _onCancel(String event) {\n    Events.removeListener(_handler);\n  }\n}\n</code></pre></li>\n<li><p>In the chart you can use the code like this:</p>\n\n<pre><code>class PieChart ... {\n  Stream&lt;SelectEvent&gt; get onSelect =&gt; _selectEventHandler.onEvent;\n  EventWrapper _selectEventHandler;\n\n  PieChart(Element e) : super._(e, \"PieChart\", vis) {\n    _selectEventHandler = new EventWrapper&lt;SelectEvent&gt;(jsChart, 'select', (p) =&gt; new SelectEvent());\n    // Other Events\n  }\n  // ...\n}\n</code></pre></li>\n</ol>\n\n<p><em>The problem is the following</em>: The <code>Events</code> interface requires a <code>source_visulization</code> argument, that is the chart I want to register events on. But as I use <code>dart:js</code> this is only available AFTER I called the constructor on my chart, because this creates the object via <code>JsObject</code>  (<code>jsChart = new JsObject(ctx[chartName], [element])</code>). Usually I would create the <code>EventWrapper</code> instances within the constructor, but as I have to use the events in several classes I thought of two other solutions than the current on you can see at #3.</p>\n\n<ol>\n<li><p>Create a mixin - this does not really work, because I do not have a constructor and I cannot specify an instsance method because it gives me an error:</p>\n\n<pre><code>abstract class SelectEventMixin {\n  Stream&lt;SelectEvent&gt; get onSelect =&gt; _selectEventHandler.stream;\n  final StreamController _selectEventHandler = new StreamController.broadcast(onListen: _onListen);\n\n  void _onListen() {\n    // jsChart is available here\n  }\n}\n</code></pre></li>\n<li><p>Create BaseClasses for each combination of events seen, this would allow me to share the most common code. Some BaseClasses would be: <code>NoEvents</code>, <code>SelectEvent</code>, <code>SelectReadyEvents</code>, <code>SelectReadyAnimationFinishEvents</code>, ...</p></li>\n</ol>\n\n<p>Does anyone of you have a better solution? Or can somebody tell me how to fix my problem #1? Is #2 already the best solution? As I would only have to combine the several methods and only have a little duplicated code?</p>\n"}, {"tags": ["javascript", "html", "dart", "protocol-buffers", "indexeddb"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430719583, "post_id": 30020651, "comment_id": 48164308, "body": "Sounds weird. Did you have a look how it&#39;s done in <a href=\"https://pub.dartlang.org/packages/lawndart\" rel=\"nofollow noreferrer\">pub.dartlang.org/packages/lawndart</a> ?"}, {"owner": {"reputation": 3288, "user_id": 125756, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/962884e9153354abc46b8a4cad7132e8?s=128&d=identicon&r=PG", "display_name": "Wienczny", "link": "https://stackoverflow.com/users/125756/wienczny"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430727765, "post_id": 30020651, "comment_id": 48168232, "body": "The interface of lawndart does not allow to insert objects. It has <code>Future save(String obj, String key)</code>."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430728370, "post_id": 30020651, "comment_id": 48168528, "body": "Looks similar to <a href=\"http://dartbug.com/16461\" rel=\"nofollow noreferrer\">dartbug.com/16461</a> and <a href=\"http://dartbug.com/22991\" rel=\"nofollow noreferrer\">dartbug.com/22991</a>"}, {"owner": {"reputation": 3288, "user_id": 125756, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/962884e9153354abc46b8a4cad7132e8?s=128&d=identicon&r=PG", "display_name": "Wienczny", "link": "https://stackoverflow.com/users/125756/wienczny"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1430731058, "post_id": 30020651, "comment_id": 48169879, "body": "These bugs are related but different. The first one is triggered after dart2js. The second one is strange. 1. The (current) lawndart api does not allow this 2. If keys are returned as String my bug should not occur ;-) So I&#39;ve submitted a new bug report <a href=\"https://code.google.com/p/dart/issues/detail?id=23366\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/detail?id=23366</a>"}, {"owner": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "edited": false, "score": 0, "creation_date": 1430889539, "post_id": 30020651, "comment_id": 48250468, "body": "Is it only in Dartium, or does it also affect dart2js?"}, {"owner": {"reputation": 3288, "user_id": 125756, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/962884e9153354abc46b8a4cad7132e8?s=128&d=identicon&r=PG", "display_name": "Wienczny", "link": "https://stackoverflow.com/users/125756/wienczny"}, "reply_to_user": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "edited": false, "score": 0, "creation_date": 1430967839, "post_id": 30020651, "comment_id": 48295061, "body": "@AlanKnight I compiled my code and tested it against Chrome (42.0.2311.135 (64-bit): The dart2js version does not throw an exception and is not affected."}], "owner": {"reputation": 3288, "user_id": 125756, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/962884e9153354abc46b8a4cad7132e8?s=128&d=identicon&r=PG", "display_name": "Wienczny", "link": "https://stackoverflow.com/users/125756/wienczny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1430727948, "creation_date": 1430696499, "last_edit_date": 1430727948, "question_id": 30020651, "link": "https://stackoverflow.com/questions/30020651/indexeddb-implicit-key-type-conversion", "title": "Indexeddb implicit key type conversion", "body": "<p>I'm using Dart to store a Protobuf <code>GeneratedMessage</code> into Indexeddb on Dartium. But somewhere (inside Indexeddb?) the types of my <code>Map</code> keys are changed and I'd like to know why.</p>\n\n<p>Adding to the database works, if you don't try to add Dart objects:</p>\n\n<pre><code>...\nvar database = ...\nvar transaction = database.transaction('myStore', 'readwrite');\nvar store = transaction.objectStore('myStore');\nvar jsonMap = myMessage.writeToJsonMap();\nstore.put(jsonMap, myKey)\n    .then((key) =&gt; print(\"Key added to database ${key}\"))\n    .catchError((e) =&gt; print(e));\n...\n</code></pre>\n\n<p>The <code>jsonMap</code> is of type <code>Map&lt;String,dynamic&gt;</code>. The int keys from the <code>GenericMessage</code>s are converted to <code>String</code>.\nWhen reading the result back this is different:</p>\n\n<pre><code>...\nstore.getObject(myKey).then((object) {\n    var message = new MyGeneratedMessage();\n    message.mergeFromJsonMap(object);\n...\n</code></pre>\n\n<p>Here object is still a Map but the keys are <code>int</code> which terribly fails in <code>mergeFromJsonMap</code>.</p>\n\n<pre><code>Exception: Uncaught Error: type 'int' is not a subtype of type 'String' of 'source'.\n</code></pre>\n\n<p>To circumvent this problem I'm currently doing a copy of the result into a new map while changing the key type.</p>\n\n<pre><code>...\nvar clonedMap = new Map&lt;String, dynamic&gt;();\nobject.forEach((key, value) {\n    clonedMap[key.toString()] = value;\n});\n...\n</code></pre>\n\n<p>My question is this: Why does this happen? Is this an expected behavior? Is this the result of <code>JavaScripts</code> poor type system? Is this a known bug?\nIs this an attempt to optimize the used storage in Indexeddb that should be working in JavaScript according to <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.1\" rel=\"nofollow\">ECMA-262 \u00a7 11.2.1</a>? If all object keys are implicitly converted to <code>String</code> shouldn't this happen to all results of Indexeddb?</p>\n"}, {"tags": ["dart", "dart-polymer"], "comments": [{"owner": {"reputation": 1365, "user_id": 1848653, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01b16c9fb1ae46f317a53694e944a1e6?s=128&d=identicon&r=PG", "display_name": "Tusshu", "link": "https://stackoverflow.com/users/1848653/tusshu"}, "edited": false, "score": 0, "creation_date": 1430691832, "post_id": 30019977, "comment_id": 48157509, "body": "setting date works. @observable String dob = &#39;2015-05-13&#39;; shows date in date field. I can enter new date manually or use up/down arrow to change date but click on the right arrow to display month and days and select date   then program crashes."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430803791, "post_id": 30019977, "comment_id": 48205144, "body": "Seems similar to <a href=\"http://dartbug.com/22609\" rel=\"nofollow noreferrer\">dartbug.com/22609</a> (and <a href=\"http://stackoverflow.com/questions/28777278\">stackoverflow.com/questions/28777278</a>) which was fixed recently."}], "owner": {"reputation": 1365, "user_id": 1848653, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01b16c9fb1ae46f317a53694e944a1e6?s=128&d=identicon&r=PG", "display_name": "Tusshu", "link": "https://stackoverflow.com/users/1848653/tusshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430803833, "creation_date": 1430690981, "last_edit_date": 1430803833, "question_id": 30019977, "link": "https://stackoverflow.com/questions/30019977/error-binding-date-input-field-with-polymer", "title": "Error binding date input field with Polymer", "body": "<p>Just upgraded to Dart SDK version 1.10.0 on Windows 8 platform. Generated sample polymer app. Added following line to main_app.html:</p>\n\n<pre><code>&lt;input type=\"date\" value=\"{{dob}}\"/&gt;\n</code></pre>\n\n<p>and following line to main_app.dart:</p>\n\n<pre><code> @observable String dob = '';\n</code></pre>\n\n<p>Code generates following error:\nFailed to load resource: net::ERR_CACHE_MISS\n<a href=\"https://ssl.gstatic.com/chrome/components/doodle-notifier-01.html\" rel=\"nofollow\">https://ssl.gstatic.com/chrome/components/doodle-notifier-01.html</a>\nObservatory listening at <a href=\"http://127.0.0.1:50511/\" rel=\"nofollow\">http://127.0.0.1:50511/</a>\n</p>\n\n<p>Complete app is as follows:\nmain_app.dart:</p>\n\n<pre><code>import 'dart:html';\nimport 'package:paper_elements/paper_input.dart';\nimport 'package:polymer/polymer.dart';\n/// A Polymer `&lt;main-app&gt;` element.\n@CustomTag('main-app')\nclass MainApp extends PolymerElement {\n  @observable String reversed = ''; \n\n  @observable String dob = '';   //added this line\n\n  /// Constructor used to create instance of MainApp.\n  MainApp.created() : super.created();\n\n  void reverseText(Event event, Object object, PaperInput target) {\n   reversed = target.value.split('').reversed.join('');\n  }\n}\n</code></pre>\n\n<p>main_app.html</p>\n\n<pre><code>&lt;link rel=\"import\" href=\"../../packages/polymer/polymer.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_input.html\"&gt;\n&lt;polymer-element name=\"main-app\"&gt;\n  &lt;template&gt;\n   &lt;style&gt;\n    :host {\n      display: block;\n    }\n   &lt;/style&gt;\n   &lt;paper-input label=\"Type something...\" on-keyup=\"{{reverseText}}\"&gt;\n   &lt;/paper-input&gt;\n   &lt;p&gt;\n       Reversed: {{ reversed }}\n   &lt;/p&gt;\n   &lt;input type=\"date\" value=\"{{dob}}\"/&gt; \n &lt;/template&gt;\n  &lt;script type=\"application/dart\" src=\"main_app.dart\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n"}, {"tags": ["dart", "mixins"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430719333, "post_id": 30019738, "comment_id": 48164193, "body": "When run from console it prints <code>Segmentation fault</code>. This is clearly a bug. Please report it at <a href=\"http://dartbug.com\" rel=\"nofollow noreferrer\">dartbug.com</a>"}, {"owner": {"reputation": 45, "user_id": 1610675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70584c4d395c61b6d90e47230b7bc1f0?s=128&d=identicon&r=PG", "display_name": "Dzenan Ridjanovic", "link": "https://stackoverflow.com/users/1610675/dzenan-ridjanovic"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1430831889, "post_id": 30019738, "comment_id": 48222713, "body": "Reported: Issue 23385 <a href=\"https://code.google.com/p/dart/issues/detail?id=23385&amp;thanks=23385&amp;ts=1430829914\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/&hellip;</a>"}], "owner": {"reputation": 45, "user_id": 1610675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70584c4d395c61b6d90e47230b7bc1f0?s=128&d=identicon&r=PG", "display_name": "Dzenan Ridjanovic", "link": "https://stackoverflow.com/users/1610675/dzenan-ridjanovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430689259, "creation_date": 1430689259, "question_id": 30019738, "link": "https://stackoverflow.com/questions/30019738/use-of-a-mixin-with-the-exit-code", "title": "Use of a mixin with the exit code", "body": "<p>Mixin Problem</p>\n\n<p>Without the use of a mixin, the following code in the default_project works:</p>\n\n<pre><code>abstract class ProjectGen extends ConceptEntity&lt;Project&gt; { \n</code></pre>\n\n<p>With the use of the ConceptEntity mixin, there is a problem, without an error message, with the exit code=139 on Ubuntu 14.04 LTS, and the exit code=-1073741819 on Windows 7.</p>\n\n<pre><code>abstract class ProjectGen extends Object with ConceptEntity&lt;Project&gt; { \n</code></pre>\n\n<p>The restrictions on the ConceptEntity mixin in dartling are fulfilled:\nConceptEntity does not declare a constructor.\nIts superclass is Object.\nIt does not ontain calls to super.</p>\n\n<p>default_project\n<a href=\"https://github.com/dzenanr/default_project\" rel=\"nofollow\">https://github.com/dzenanr/default_project</a>\nProjectGen in lib/gen/default/project/projects.dart</p>\n\n<p>dartling\n<a href=\"https://github.com/dzenanr/dartling\" rel=\"nofollow\">https://github.com/dzenanr/dartling</a>\nConceptEntity in lib/domain/model/entity.dart</p>\n\n<pre><code>class ConceptEntity&lt;E extends ConceptEntity&lt;E&gt;&gt; implements EntityApi {\n</code></pre>\n"}, {"tags": ["html", "dart", "polymer", "dart-polymer", "dart-html"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430665507, "post_id": 30015313, "comment_id": 48148230, "body": "What&#39;s the exact error thrown?"}, {"owner": {"reputation": 379, "user_id": 4130519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8460f457d5516081de4cfa0b94407577?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pavl&#237;\u010dek", "link": "https://stackoverflow.com/users/4130519/v%c3%a1clav-pavl%c3%ad%c4%8dek"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430665615, "post_id": 30015313, "comment_id": 48148264, "body": "type &#39;HtmlElement&#39; is not a subtype of type &#39;CoreDrawerPanel&#39; of &#39;panel&#39;. this error it throws"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430665691, "post_id": 30015313, "comment_id": 48148290, "body": "If you have a custom <code>main()</code> method you need to ensure Polymer initialization is done before accessing Polymer elements content."}, {"owner": {"reputation": 379, "user_id": 4130519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8460f457d5516081de4cfa0b94407577?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pavl&#237;\u010dek", "link": "https://stackoverflow.com/users/4130519/v%c3%a1clav-pavl%c3%ad%c4%8dek"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430666641, "post_id": 30015313, "comment_id": 48148631, "body": "when i&#39;m trying init polymer( initPolymer().run(() {...)  DartEditor throws warning The method &#39;run&#39; is not defined for the class &#39;Future&lt;Zone&gt;&#39; , and i have imported polymer package"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1430666803, "post_id": 30015313, "comment_id": 48148703, "body": "The answer to my referenced question contains 3 different ways to initialize Polymer in a custom main. Your Polymer version probably requires the 1st or 2nd way but you used the 3rd. Try renaming <code>main</code> to something else and add <code>@whenPolymerReady</code> as shown in my answer."}], "owner": {"reputation": 379, "user_id": 4130519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8460f457d5516081de4cfa0b94407577?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pavl&#237;\u010dek", "link": "https://stackoverflow.com/users/4130519/v%c3%a1clav-pavl%c3%ad%c4%8dek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1430665647, "answer_count": 0, "score": 0, "last_activity_date": 1430665724, "creation_date": 1430665283, "last_edit_date": 1430665724, "question_id": 30015313, "link": "https://stackoverflow.com/questions/30015313/dart-how-can-i-toggle-core-drawer-panel", "closed_reason": "Duplicate", "title": "Dart - how can i toggle core drawer panel?", "body": "<p>I'm trying to toggle drawer panel in Dart, but it throws <code>type 'HtmlElement' is not a subtype of type 'CoreDrawerPanel' of 'panel'.</code> on line <code>CoreDrawerPanel panel = querySelector('#drawerPanel');</code></p>\n\n<p>Here is my dart: </p>\n\n<pre><code>import 'dart:html';\nimport 'package:core_elements/core_drawer_panel.dart';\n\nvoid main() {\n  querySelector('#navicon')\n    ..onClick.listen(naviconClick);\n}\n\nvoid naviconClick(Event event) {\n  CoreDrawerPanel panel = querySelector('#drawerPanel');\n  panel.togglePanel();\n}\n</code></pre>\n\n<p>And here is my HTML:</p>\n\n<pre><code>    &lt;core-drawer-panel id=\"drawerPanel\"&gt;\n      &lt;core-header-panel drawer&gt;\n        &lt;core-toolbar&gt;Menu&lt;/core-toolbar&gt;\n        &lt;core-menu&gt;\n          &lt;core-item label=\"One\"&gt;&lt;/core-item&gt;\n          &lt;core-item label=\"Two\"&gt;&lt;/core-item&gt;\n        &lt;/core-menu&gt;\n      &lt;/core-header-panel&gt;\n      &lt;core-header-panel main&gt;\n        &lt;core-toolbar&gt;\n          &lt;core-icon-button id=\"navicon\" icon=\"menu\"&gt;&lt;/core-icon-button&gt;\n          &lt;div&gt;Project&lt;/div&gt;\n        &lt;/core-toolbar&gt;\n        &lt;div class=\"content\"&gt;\n        &lt;/div&gt;\n      &lt;/core-header-panel&gt;\n    &lt;/core-drawer-panel&gt;      \n</code></pre>\n\n<p>Thanks for answers.</p>\n"}, {"tags": ["dart", "polymer", "paper-elements"], "answers": [{"comments": [{"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430653701, "post_id": 30012314, "comment_id": 48144752, "body": "<code>$[&#39;dialog&#39;] as PaperDialog..jsElement.callMethod(&#39;notifyResize&#39;, []);</code> results in <code>NoSuchMethodError: method not found: &#39;notifyResize&#39;</code>."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430654214, "post_id": 30012314, "comment_id": 48144879, "body": "I don&#39;t get an error, when I use the code I posted or the code you posted in your comment."}, {"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430654319, "post_id": 30012314, "comment_id": 48144909, "body": "Which <code>&lt;paper-element&gt;</code> version are you using? Mine is: paper_elements: &#39;&gt;=0.6.1 &lt;0.7.0&#39;"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430654602, "post_id": 30012314, "comment_id": 48144999, "body": "paper_elements 0.7.1, core_elements 0.7.1+2, polymer 0.16.3+1 (from pubspec.lock)"}, {"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430654886, "post_id": 30012314, "comment_id": 48145087, "body": "Just upgraded to the latest version. <code>notifyResize</code> does exist now and I can call it without any errors, however, calling <code>notifyResize</code> has no effect at all. The dialog stays at the same size and doesn&#39;t get bigger to fit the content size. Is it because of the scroller which displays the content of a <code>&lt;paper-dialog&gt;</code>?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430655216, "post_id": 30012314, "comment_id": 48145181, "body": "Sorry, I don&#39;t know. I would need a complete example that allows to reproduce."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430661304, "post_id": 30012314, "comment_id": 48146942, "body": "The cause is that you set the the size on the content of the <code>&lt;core-pages&gt;</code> not on the <code>&lt;core-pages&gt;</code> itself. The <code>&lt;div&gt;</code>s where you set the size are positioned absolute and don&#39;t extend their container but the <code>&lt;paper-dialog&gt;</code> only gets the size from the container."}, {"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430664776, "post_id": 30012314, "comment_id": 48147971, "body": "I&#39;ve just added the width &amp; height dimensions for testing purposes. In my real world case, the DIVs do not have a height or with specified. Removing the dimensions and calling <code>notifyResize</code> still doesn&#39;t have any effect :&#39;("}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430665094, "post_id": 30012314, "comment_id": 48148064, "body": "The pages are positioned absolutely and therefore don&#39;t expand the container. The only solution I can offer you is to set the width/height of <code>&lt;core-pages&gt;</code> dynamically when selection changes for example by acquiring the size of the current page (&lt;div&gt;) and applying it to <code>&lt;core-pages&gt;</code>. There might be a smarter way but I don&#39;t know (I didn&#39;t do much Polymer development the recent months so I might miss something)"}, {"owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "edited": false, "score": 0, "creation_date": 1430665782, "post_id": 30012314, "comment_id": 48148336, "body": "That&#39;s what I thought too, but since the DIVs are in a scroller, their dimensions aren&#39;t really the ones I want. (hard to explain) Thus, I had to hardcode for every page its dimension, which seems to be pretty ugly."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430645729, "creation_date": 1430645729, "answer_id": 30012314, "question_id": 30009091, "link": "https://stackoverflow.com/questions/30009091/resize-paper-dialog-when-selecting-paper-tab-inside-the-dialog/30012314#30012314", "title": "Resize &lt;paper-dialog&gt; when selecting &lt;paper-tab&gt; inside the dialog", "body": "<p>You should be able to work around like</p>\n\n<pre><code>import 'dart:js' as js;\n...\nnew js.JsObject.fromBrowserObject($['dialog'])\n   .callMethod('notifyResize', []);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>import 'package:paper_elements/paper_dialog.dart';\n...\n($['dialog'] as PaperDialog).jsElement\n    .callMethod('notifyResize', []);\n</code></pre>\n\n<p>Please create a bug report in the github.com/dart-lang/paper-elements repo (or core-elements, because I think this function should be inherited from core-overlay)</p>\n"}], "owner": {"reputation": 8915, "user_id": 940300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7IWb0.jpg?s=128&g=1", "display_name": "Basic Coder", "link": "https://stackoverflow.com/users/940300/basic-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 30012314, "answer_count": 1, "score": 1, "last_activity_date": 1430656010, "creation_date": 1430613983, "last_edit_date": 1430656010, "question_id": 30009091, "link": "https://stackoverflow.com/questions/30009091/resize-paper-dialog-when-selecting-paper-tab-inside-the-dialog", "title": "Resize &lt;paper-dialog&gt; when selecting &lt;paper-tab&gt; inside the dialog", "body": "<p>resizeable_dialog.html</p>\n\n<pre><code>&lt;link rel=\"import\" href=\"../../packages/polymer/polymer.html\"&gt;\n\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_dialog.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_button.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_tabs.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_tab.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/paper_elements/paper_icon_button.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/core_elements/core_toolbar.html\"&gt;\n&lt;link rel=\"import\" href=\"../../packages/core_elements/core_pages.html\"&gt;\n\n&lt;polymer-element name=\"resizeable-dialog\"&gt;\n  &lt;template&gt;\n    &lt;style&gt;\n      :host {\n        display: block;\n      }\n    &lt;/style&gt;\n    &lt;paper-button on-click=\"{{open}}\"&gt;Open Dialog&lt;/paper-button&gt;    \n    &lt;paper-dialog id=\"dialog\" transition=\"core-transition-bottom\" backdrop&gt;\n      &lt;paper-tabs selected=\"{{selected}}\"&gt;\n        &lt;paper-tab&gt;Page 1&lt;/paper-tab&gt;\n        &lt;paper-tab&gt;Page 2&lt;/paper-tab&gt;\n      &lt;/paper-tabs&gt;\n      &lt;section&gt;\n        &lt;core-pages selected=\"{{selected}}\"&gt;\n          &lt;div style=\"width: 100px; height: 100px;\"&gt;\n            &lt;div&gt;Page 1: 100x100&lt;/div&gt;\n            &lt;paper-button on-click=\"{{notifyResize}}\"&gt;Call 'notifyResize'&lt;/paper-button&gt;          \n          &lt;/div&gt;\n          &lt;div style=\"width: 400px; height: 400px;\"&gt;\n            &lt;div&gt;Page 2: 400x400&lt;/div&gt;\n            &lt;paper-button on-click=\"{{notifyResize}}\"&gt;Call 'notifyResize'&lt;/paper-button&gt;          \n          &lt;/div&gt;\n        &lt;/core-pages&gt;\n      &lt;/section&gt;\n    &lt;/paper-dialog&gt;\n\n  &lt;/template&gt;\n  &lt;script type=\"application/dart\" src=\"resizeable_dialog.dart\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>resizeable_dialog.dart</p>\n\n<pre><code>library resizable_dialog;\n\nimport 'package:polymer/polymer.dart';\nimport 'package:paper_elements/paper_dialog.dart';\n\n@CustomTag('resizeable-dialog')\nclass ResizeableDialog extends PolymerElement {\n\n  ResizeableDialog.created() : super.created();\n  @observable int selected = 0;\n\n  notifyResize() {\n    $['dialog'] as PaperDialog..notifyResize();\n    print('\"notifyResize\" called.');\n  }\n\n  open() {\n    $['dialog'] as PaperDialog..open();\n  }\n\n}\n</code></pre>\n\n<p>This is my dialog, I think you get the idea with the tabbar. My problem is that the <code>&lt;paper-dialog&gt;</code> calculates its dimensions at some point before it gets shown. However, since my <code>&lt;core-pages&gt;</code> can have different width &amp; height, I have to resize the dialog whenever the user selects a tab to ensure, that the whole content of the current selected page is visible.</p>\n\n<p>The method <code>&lt;paper-dialog&gt;.notifyResize()</code> does not exist in Dart for some reasons. It's specified <a href=\"https://www.polymer-project.org/0.5/docs/elements/paper-dialog.html#paper-dialog.methods.notifyResize\" rel=\"nofollow\">here</a>, in the <code>paper-elements</code> documentation but I cannot invoke it, since it does not exist in Dart.</p>\n\n<p>How can I do this? How can I ask the dialog to re-measure its dimensions?</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430613946, "post_id": 30008644, "comment_id": 48136465, "body": "I&#39;m exploring <code>shelf</code> w/ the <code>rpc</code> package, which seems to make use of <code>shelf_rpc</code>. See <a href=\"https://github.com/dart-lang/rpc/blob/master/example/shelf_sample.dart\" rel=\"nofollow noreferrer\">github.com/dart-lang/rpc/blob/master/example/shelf_sample.da&zwnj;&#8203;rt</a>. Make sense? In a refactor, I think I&#39;d like to make my whole server-side an RPC API."}], "tags": [], "owner": {"reputation": 1117, "user_id": 3130717, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8dd8c8ecf16e5c83e93d7f2ac2434d52?s=128&d=identicon&r=PG&f=1", "display_name": "Anders", "link": "https://stackoverflow.com/users/3130717/anders"}, "is_accepted": false, "score": 3, "last_activity_date": 1430609580, "creation_date": 1430609580, "answer_id": 30008644, "question_id": 30008171, "link": "https://stackoverflow.com/questions/30008171/handling-an-httprequests-body-in-dart/30008644#30008644", "title": "Handling an HttpRequest&#39;s body in Dart", "body": "<p>Yes as you can see on <a href=\"https://github.com/dart-lang/shelf/blob/master/lib/src/message.dart#L136\" rel=\"nofollow\">https://github.com/dart-lang/shelf/blob/master/lib/src/message.dart#L136</a> shelf defaults to UTF-8</p>\n\n<p>I am likely biased but I would definitely recommend moving over to shelf. You have several options depending on what you prefer, like:</p>\n\n<ul>\n<li>shelf_rpc as you mentioned. I haven't used it but likely full featured API support</li>\n<li><p>shelf_bind if you simply want to bind a handler function parameter to a JSON body. This is lower level, more flexible and less prescriptive but does less. e.g.</p>\n\n<p>router.post('/foo', (@RequestBody() Foo foo) => ...)</p></li>\n<li><p>shelf_rest. Adds higher level more prescriptive API support (similar to shelf_rpc).</p></li>\n<li>full frameworks like redstone, mojito etc. These do more for you but you need to buy into more</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "edited": false, "score": 0, "creation_date": 1430611986, "post_id": 30008765, "comment_id": 48136053, "body": "Having trouble correlating your <code>input</code> to what comes in via the <code>HttpRequest</code>. I used to send JSON over the wire, and now I must do encode it client-side? <code>new JsonUtf8Encoder().convert(myJson);</code>? And if so, isn&#39;t that heavier to send over the wire?"}], "tags": [], "owner": {"reputation": 4296, "user_id": 39827, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/289adeb0bd8b3017a29329ed94364c3a?s=128&d=identicon&r=PG", "display_name": "Kevin Moore", "link": "https://stackoverflow.com/users/39827/kevin-moore"}, "is_accepted": false, "score": 4, "last_activity_date": 1430610716, "creation_date": 1430610716, "answer_id": 30008765, "question_id": 30008171, "link": "https://stackoverflow.com/questions/30008171/handling-an-httprequests-body-in-dart/30008765#30008765", "title": "Handling an HttpRequest&#39;s body in Dart", "body": "<p><code>HttpRequest</code> is a <code>Stream&lt;List&lt;int&gt;&gt;</code>. You don't want to use <code>listen</code> because you'll only get the first \"chunk\" of data.</p>\n\n<p>Instead you'll want to do something like this:</p>\n\n<pre><code>import 'dart:async';\nimport 'dart:convert';\n\nmain() async {\n  var input = {'a':1, 'b':2};\n\n  var decoder = JSON.fuse(UTF8).decoder;\n\n  var json = await decoder.bind(toByteStream(input)).single;\n\n  print(json);\n}\n\nStream&lt;List&lt;int&gt;&gt; toByteStream(json) =&gt;\n   _encoder.bind(new Stream.fromIterable([json]));\n\n\nfinal _encoder = new JsonUtf8Encoder();\n</code></pre>\n\n<p><a href=\"https://dartpad.dartlang.org/9807d0c5ed89360c9f53\" rel=\"nofollow\">https://dartpad.dartlang.org/9807d0c5ed89360c9f53</a></p>\n"}, {"tags": [], "owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "is_accepted": false, "score": 1, "last_activity_date": 1430618298, "creation_date": 1430618298, "answer_id": 30009467, "question_id": 30008171, "link": "https://stackoverflow.com/questions/30008171/handling-an-httprequests-body-in-dart/30009467#30009467", "title": "Handling an HttpRequest&#39;s body in Dart", "body": "<p>Had a chat w/ Kevin to better understand his answer, and thought it best to share my learnings as a new answer.</p>\n\n<p><code>HttpRequest</code> is always a <code>Stream&lt;List&lt;int&gt;&gt;</code> \u2013 a streamed list of integers. Those integers are bytecodes, and this is commonly referred to as a bytestream. You can be sure that no matter what API you use to send data over the wire, that it is sent as a bytestream.</p>\n\n<p>The <code>HttpRequest.request()</code> method accepts <code>sendData</code> in several forms...</p>\n\n<pre><code>   * If specified, `sendData` will send data in the form of a [ByteBuffer],\n   * [Blob], [Document], [String], or [FormData] along with the HttpRequest.\n</code></pre>\n\n<p>Source:\n<a href=\"https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:html.HttpRequest#id_request\" rel=\"nofollow\">https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart:html.HttpRequest#id_request</a></p>\n\n<p>...but these are just abstractions, and ultimately your data is sent as a <code>Stream&lt;List&lt;int&gt;&gt;</code> bytestream.</p>\n\n<p>So on the server we first set up a <code>decoder</code> that will decode both JSON and UTF8 (for correct char handling), and then we <code>bind</code> that to the <code>HttpRequest</code> request, which is a bytestream. I think <code>single</code> just serves to ensure we throw an exception if we received more than one data event. Here's all the code we need to interpret an <code>HttpRequest</code>:</p>\n\n<pre><code>import 'dart:async';\nimport 'dart:convert';\n\nstatic handleRequest(HttpRequest request) async {\n  var decoder = JSON.fuse(UTF8).decoder;\n  var data = await decoder.bind(request).single;\n\n  print('The decoded data received is:\\n\\n$data');\n}\n</code></pre>\n"}], "owner": {"reputation": 1426, "user_id": 1286442, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5adc28de809c89b48ed40d03e9c5af71?s=128&d=identicon&r=PG", "display_name": "David Notik", "link": "https://stackoverflow.com/users/1286442/david-notik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1430618298, "creation_date": 1430605563, "question_id": 30008171, "link": "https://stackoverflow.com/questions/30008171/handling-an-httprequests-body-in-dart", "title": "Handling an HttpRequest&#39;s body in Dart", "body": "\n\n<p>I used to do something like this:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>HttpResponse res = req.response;\n    String dataReceived;\n\n    await req.listen((List&lt;int&gt; buffer) {\n      dataReceived = new String.fromCharCodes(buffer);\n    }).asFuture();\n\n    Map data = JSON.decode(dataReceived);\n</code></pre>\n\n<p>When I needed UTF8 support, I modified it to:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Map data = JSON.decode(await new Utf8Codec().decodeStream(request));\n</code></pre>\n\n<p>Kevin Moore suggested to encode/decode like this:</p>\n\n<p><a href=\"https://dartpad.dartlang.org/1d229cfdc1c1fd2ab877\" rel=\"nofollow\">https://dartpad.dartlang.org/1d229cfdc1c1fd2ab877</a></p>\n\n<p>So I've got:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Map data;\n  await request.listen((List&lt;int&gt; buffer) {\n    data = JSON.fuse(UTF8).decode(buffer);\n  }).asFuture();\n</code></pre>\n\n<p>Not sure that I need the <code>asFuture()</code>:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Map data;\nawait request.listen((List&lt;int&gt; buffer) =&gt; data = JSON.fuse(UTF8).decode(buffer));\n</code></pre>\n\n<p>Or do I? And this method requires that I encode it into bytes on the client side:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>sendData: new JsonUtf8Encoder().convert({'model': message, 'authToken': app.authToken}))\n</code></pre>\n\n<p>What are the benefits of this? Isn't it more to send over the wire?</p>\n\n<p>I believe Shelf and/or the new RPC lib would handle this stuff for me? Shall I move to one of those? Right now, it's all homegrown.</p>\n"}, {"tags": ["html", "css", "dart", "dart-polymer", "paper-elements"], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 4832013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ddec751153ffeef7ffa6f810bd368d?s=128&d=identicon&r=PG&f=1", "display_name": "nephthyes white", "link": "https://stackoverflow.com/users/4832013/nephthyes-white"}, "is_accepted": true, "score": 2, "last_activity_date": 1430560597, "creation_date": 1430560597, "answer_id": 30000889, "question_id": 30000813, "link": "https://stackoverflow.com/questions/30000813/polymer-paper-input-floating-label-color/30000889#30000889", "title": "Polymer - paper-input floating label color", "body": "<p>The only way I was able to get around this issue was with this:</p>\n\n<pre><code>paper-input-decorator[focused] /deep/ .floating-label,\npaper-input-decorator[focused] /deep/ .label-text {\n/* floating label color when the input is focused */\ncolor: orange !important;\n}\n</code></pre>\n\n<p>Notice how it was necessary to type paper-input-decorator[focused] /deep/ twice</p>\n"}, {"tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": false, "score": 2, "last_activity_date": 1430753450, "creation_date": 1430753450, "answer_id": 30033977, "question_id": 30000813, "link": "https://stackoverflow.com/questions/30000813/polymer-paper-input-floating-label-color/30033977#30033977", "title": "Polymer - paper-input floating label color", "body": "<p>You could also use core-style to do this if you didn't want to use the /deep/ selectors, it would look something like this (untested):</p>\n\n<pre><code>&lt;core-style id=\"paper-input-decorator\"&gt;\n  .floating-label, .label-text {\n    color: orange;\n  }\n&lt;/core-style&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 6272061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b94257067957a9a0778f53546fbe751e?s=128&d=identicon&r=PG&f=1", "display_name": "thomas", "link": "https://stackoverflow.com/users/6272061/thomas"}, "edited": false, "score": 0, "creation_date": 1587979150, "post_id": 31758109, "comment_id": 108712099, "body": "this also changes the input bottom border unfortunately"}], "tags": [], "owner": {"reputation": 53, "user_id": 2368571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed35fe6c6196a983f242588e7d946dcf?s=128&d=identicon&r=PG", "display_name": "ManGI1", "link": "https://stackoverflow.com/users/2368571/mangi1"}, "is_accepted": false, "score": 2, "last_activity_date": 1438402118, "creation_date": 1438402118, "answer_id": 31758109, "question_id": 30000813, "link": "https://stackoverflow.com/questions/30000813/polymer-paper-input-floating-label-color/31758109#31758109", "title": "Polymer - paper-input floating label color", "body": "<p>You can set the following polymer style variable: --paper-input-container-focus-color, for example</p>\n\n<pre><code>#myInput{\n   --paper-input-container-focus-color: red;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2411, "user_id": 6191987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/XdBR5.jpg?s=128&g=1", "display_name": "vishnu", "link": "https://stackoverflow.com/users/6191987/vishnu"}, "is_accepted": false, "score": 0, "last_activity_date": 1545193618, "creation_date": 1545193618, "answer_id": 53844585, "question_id": 30000813, "link": "https://stackoverflow.com/questions/30000813/polymer-paper-input-floating-label-color/53844585#53844585", "title": "Polymer - paper-input floating label color", "body": "<blockquote>\n  <p>For an Information:</p>\n</blockquote>\n\n<p>To change any style of a <strong>label</strong> or <strong>floating label</strong> inside the <strong>paper-input</strong>, use the code below.</p>\n\n<pre><code>paper-input {\n  --paper-input-container-label: {\n    color: red;\n    font-size: 14px;\n  };\n  --paper-input-container-label-floating: {\n    color: red;\n    font-size: 14px;\n  };\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 4130519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8460f457d5516081de4cfa0b94407577?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pavl&#237;\u010dek", "link": "https://stackoverflow.com/users/4130519/v%c3%a1clav-pavl%c3%ad%c4%8dek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 1, "accepted_answer_id": 30000889, "answer_count": 4, "score": 3, "last_activity_date": 1545193618, "creation_date": 1430560115, "question_id": 30000813, "link": "https://stackoverflow.com/questions/30000813/polymer-paper-input-floating-label-color", "title": "Polymer - paper-input floating label color", "body": "<p>How can i change color of focused floating label in polymer?</p>\n\n<p><img src=\"https://i.stack.imgur.com/dKKJ5.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks for answers.</p>\n"}, {"tags": ["forms", "dart", "dart-force-mvc"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4308414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-ugbsol7N14c/AAAAAAAAAAI/AAAAAAAAD6U/fLtTaqCsfmA/photo.jpg?sz=128", "display_name": "Joris Hermans", "link": "https://stackoverflow.com/users/4308414/joris-hermans"}, "is_accepted": false, "score": 1, "last_activity_date": 1430561975, "last_edit_date": 1430561975, "creation_date": 1430561652, "answer_id": 30001044, "question_id": 29990361, "link": "https://stackoverflow.com/questions/29990361/dart-wont-let-me-use-the-post-method/30001044#30001044", "title": "Dart won&#39;t let me use the POST method", "body": "<p>I tested your code and you need todo the following:</p>\n\n<pre><code>library mongomvc1;\n// Copyright (c) 2015, &lt;your name&gt;. All rights reserved. Use of this source code\n// is governed by a BSD-style license that can be found in the LICENSE file.\n\nimport 'dart:async';\nimport 'dart:io';\n\nimport 'package:forcemvc/force_mvc.dart';\npart 'controllers/postcontroller.dart';\nvoid main() {\n  WebApplication app = new WebApplication();\n  app.host = \"127.0.0.1\";\n  app.port = 8080;\n  app.use(\"/\", (req, model) =&gt; \"index\");\n  // app.use(\"/verify\", (req, model) =&gt; \"verify\", method: \"POST\");\n  print(\"started\");\n  app.start();\n}\n</code></pre>\n\n<p>/verify is already been used by the postcontroller.dart, so in this case you need to put it in comment or remove that line!</p>\n\n<pre><code>part of mongomvc1;\n\n@Controller\nclass PostController {\n\n  @RequestMapping(value: \"/verify\", method: \"POST\")\n  Future postMethod(ForceRequest req, Model model) async {\n    req.getPostParams().then((map) {\n      model.addAttribute('first', map['first']);\n      model.addAttribute('last', map['last']);\n      req.async(null);\n    });\n    model.addAttribute('status', 'ok');\n    return req.asyncFuture;\n  }\n}\n</code></pre>\n\n<p>All your methods on req need to be in lowercase instead of uppercase.</p>\n\n<p>With the new async/await you can also write your code as follow:</p>\n\n<pre><code>part of mongomvc1;\n\n@Controller\nclass PostController {\n\n  @RequestMapping(value: \"/verify\", method: \"POST\")\n  Future postMethod(req, Model model) async {\n    var map = await req.getPostParams();\n    model.addAttribute('first', map['first']);\n    model.addAttribute('last', map['last']);\n\n    model.addAttribute('status', 'ok');\n  }\n}\n</code></pre>\n\n<p>With these adjustments, the post should work. If you have any further questions, please ask!</p>\n"}], "owner": {"reputation": 81, "user_id": 3720066, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100002655830068/picture?type=large", "display_name": "Ross Albertson", "link": "https://stackoverflow.com/users/3720066/ross-albertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430690760, "creation_date": 1430495730, "question_id": 29990361, "link": "https://stackoverflow.com/questions/29990361/dart-wont-let-me-use-the-post-method", "title": "Dart won&#39;t let me use the POST method", "body": "<p>I'm learning Dart, and I'm using the forcemvc package. My form renders, but when I click the button, I get the following error: The POST method is not allowed for /verify.</p>\n\n<p>Here is my main function:</p>\n\n<pre><code>library mongomvc1;\n// Copyright (c) 2015, &lt;your name&gt;. All rights reserved. Use of this source code\n// is governed by a BSD-style license that can be found in the LICENSE file.\n\n import 'dart:html';\nimport 'package:forcemvc/force_mvc.dart';\npart 'controllers/postcontroller.dart';\nvoid main() {\n//  querySelector('#output').text = 'Your Dart app is running.';\n  WebApplication app = new WebApplication();\n  app.host = \"127.0.0.1\";\n  app.port = 8080;\n  app.use(\"/\", (req, model) =&gt; \"index\");\n  app.use(\"/verify\", (req, model) =&gt; \"verify\", method: \"POST\");\n  app.start();\n}\n</code></pre>\n\n<p>Here is my form:</p>\n\n<pre><code> &lt;form id=\"form\" action=\"/verify\" method=\"POST\"&gt;\n  &lt;p&gt;First name: &lt;input type=\"text\" id=\"first\" name=\"first\" required /&gt;&lt;/p&gt;\n  &lt;p&gt;Last name: &lt;input type=\"text\" id=\"last\" name=\"last\" required /&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;button type=\"submit\"&gt;Continue&lt;/button&gt;\n &lt;/form&gt; \n</code></pre>\n\n<p>And here is my POST function:</p>\n\n<pre><code>part of mongomvc1;\n\n@Controller\nclass PostController {\n\n  @RequestMapping(value: \"/verify\", method: \"POST\")\n  Future postMethod(req, Model model) async {\n    req.GetPostParams().then((map) {\n      model.addAttribute('first', map['first']);\n      model.addAttribute('last', map['last']);\n      req.Async(null);\n\n    });\n    model.addAttribute('status', 'ok');\n    return req.AsyncFuture;\n  }\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["sql", "for-loop", "dart", "wait", "future"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430478066, "post_id": 29985514, "comment_id": 48090588, "body": "Have you considered using async/await. This makes it a lot easier to reason about the code."}, {"owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "edited": false, "score": 1, "creation_date": 1430485806, "post_id": 29985514, "comment_id": 48094073, "body": "You should format your code using <code>dartfmt</code> it would be easier to read."}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 1716980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71e90d483df166c6babcf7989837967b?s=128&d=identicon&r=PG", "display_name": "fsulser", "link": "https://stackoverflow.com/users/1716980/fsulser"}, "edited": false, "score": 0, "creation_date": 1430479145, "post_id": 29985674, "comment_id": 48090971, "body": "this solution didn&#39;t work, I think because the array can be empty or not completely filled when Future.wait(futures) is called there is nothing to wait for, so it will return"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1430477991, "creation_date": 1430477991, "answer_id": 29985674, "question_id": 29985514, "link": "https://stackoverflow.com/questions/29985514/wait-for-future-in-for-loop/29985674#29985674", "title": "wait for Future in for loop", "body": "<p>I'm not sure if this fixes all issues, it's not easy to see in such code what exactly returns a future. (I added comments where I added something)</p>\n\n<pre><code>Future&lt;Results&gt; mysqlAllTags = mysqlCon.query(query).then((results){\n  // Make new list as a part of the JsonObject\n  json.tags = new List();\n  // Loop throught the row of the result from Mysql data\n  return results.forEach((row){\n    // Create Map to put the word, value, rating and id into the JsonObject\n    Map data = new Map();\n\n    // Put the Mysql data into the Map\n    data[\"word\"] = row.word.toString();\n    data[\"value\"] = row.value.toString();\n    data[\"rating\"] = row.rating.toString();\n    data[\"id_tag\"] = row.id_tag.toString();\n    data[\"replacing\"] = null;\n\n    // Add the Map to the userPages list\n    json.tags.add(data);\n  }).then((e){\n    var futures = []; // added\n    for(var tag in json.tags){\n      print(\"row \");\n      print(json.tags);\n      //Map dataReplacing = getReplacing(userId, row.id_tag.toString());\n      String replacingTags = getReplacingSQL(tag['id_tag'].toString());\n\n      // added `futures.add(...)`\n      futures.add(mysqlCon.query(replacingTags).then((result) { \n        result.forEach((row1){\n          Map map = new Map();\n\n          map[\"word\"] = row1.word.toString();\n          map[\"value\"] = row1.value.toString();\n          map[\"id_tag\"] = row1.id_replacing_tag.toString();\n          tag[\"replacing\"] = map;\n        }).then((e){\n          print(\"then inner for called\");\n          return null;\n        });\n        print(\"then inner for called\");\n        return null;\n      }));\n    }\n\n    print(\"outer for returned\");\n    // Send the data in UTF8 to the client \n    result = Helpers.formatJsonAndEncodeUtf8('OK', session:_session, data: [json]);\n\n    return Future.wait(futures); // added\n  }).catchError((error){\n     result = Helpers.formatJsonAndEncodeUtf8('ERROR 856284555 (Could not load tags)', session:_session);\n  });\n}).catchError((error){\n  result = Helpers.formatJsonAndEncodeUtf8('ERROR 2346644555 (Could not load tags)', session:_session);\n});\n\nreturn Future.wait([mysqlAllTags]).then((e){\n  print(\"future returned\");\n  return result;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 1716980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71e90d483df166c6babcf7989837967b?s=128&d=identicon&r=PG", "display_name": "fsulser", "link": "https://stackoverflow.com/users/1716980/fsulser"}, "is_accepted": false, "score": 1, "last_activity_date": 1430481539, "creation_date": 1430481539, "answer_id": 29986432, "question_id": 29985514, "link": "https://stackoverflow.com/questions/29985514/wait-for-future-in-for-loop/29986432#29986432", "title": "wait for Future in for loop", "body": "<p>I solved it by adding the result declaration in the <code>Future.wait(futures).then()</code> function. Thank you G\u00fcnter Z\u00f6chbauer for your input.</p>\n\n<pre><code>Future&lt;Results&gt; mysqlAllTags = mysqlCon.query(query).then((results){\n  // Make new list as a part of the JsonObject\n  json.tags = new List();\n  // Loop throught the row of the result from Mysql data\n  return results.forEach((row){\n  // Create Map to put the word, value, rating and id into the JsonObject\n  Map data = new Map();\n\n  // Put the Mysql data into the Map\n  data[\"word\"] = row.word.toString();\n  data[\"value\"] = row.value.toString();\n  data[\"rating\"] = row.rating.toString();\n  data[\"id_tag\"] = row.id_tag.toString();\n  data[\"replacing\"] = null;\n\n  // Add the Map to the userPages list\n  json.tags.add(data);\n}).then((e){\n  var futures = []; // added\n  for(var tag in json.tags){\n    print(\"row \");\n    print(json.tags);\n    //Map dataReplacing = getReplacing(userId, row.id_tag.toString());\n    String replacingTags = getReplacingSQL(tag['id_tag'].toString());\n\n    // added `futures.add(...)`\n    futures.add(mysqlCon.query(replacingTags).then((result) { \n      result.forEach((row1){\n        Map map = new Map();\n\n        map[\"word\"] = row1.word.toString();\n        map[\"value\"] = row1.value.toString();\n        map[\"id_tag\"] = row1.id_replacing_tag.toString();\n        tag[\"replacing\"] = map;\n      }).then((e){\n        print(\"then inner for called\");\n        return null;\n      });\n      print(\"then inner for called\");\n      return null;\n    }));\n  }\n\n  print(\"outer for returned\");\n  // Send the data in UTF8 to the client \n\n    return Future.wait(futures).then((e){\n      result = Helpers.formatJsonAndEncodeUtf8('OK', session:_session, data: [json]);\n    }); // added\n  }).catchError((error){\n     result = Helpers.formatJsonAndEncodeUtf8('ERROR 856284555 (Could not load tags)', session:_session);\n  });\n}).catchError((error){\n  result = Helpers.formatJsonAndEncodeUtf8('ERROR 2346644555 (Could not load tags)', session:_session);\n});\n\nreturn Future.wait([mysqlAllTags]).then((e){\n  print(\"future returned\");\n  return result;\n});\n</code></pre>\n"}], "owner": {"reputation": 670, "user_id": 1716980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71e90d483df166c6babcf7989837967b?s=128&d=identicon&r=PG", "display_name": "fsulser", "link": "https://stackoverflow.com/users/1716980/fsulser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1430481539, "creation_date": 1430477176, "last_edit_date": 1592644375, "question_id": 29985514, "link": "https://stackoverflow.com/questions/29985514/wait-for-future-in-for-loop", "title": "wait for Future in for loop", "body": "<p>I'm having a future which is a result of an sql query, in it I'm looping over each returned row to add it to a list with a map to encode it to a json format later.\nIn this loop I'm executing another query depending on the result in each row of the outer query and add those rows again to a map.</p>\n<pre><code>Future&lt;Results&gt; mysqlAllTags = mysqlCon.query(query).then((results){\n  // Make new list as a part of the JsonObject\n  json.tags = new List();\n  // Loop throught the row of the result from Mysql data\n  return results.forEach((row){\n    // Create Map to put the word, value, rating and id into the JsonObject\n    Map data = new Map();\n\n    // Put the Mysql data into the Map\n    data[&quot;word&quot;] = row.word.toString();\n    data[&quot;value&quot;] = row.value.toString();\n    data[&quot;rating&quot;] = row.rating.toString();\n    data[&quot;id_tag&quot;] = row.id_tag.toString();\n    data[&quot;replacing&quot;] = null;\n    \n    // Add the Map to the userPages list\n    json.tags.add(data);\n  }).then((e){\n    for(var tag in json.tags){\n      //Map dataReplacing = getReplacing(userId, row.id_tag.toString());\n      String replacingTags = getReplacingSQL(tag['id_tag'].toString());\n      mysqlCon.query(replacingTags).then((result){\n        result.forEach((row1){\n          Map map = new Map();\n         \n          map[&quot;word&quot;] = row1.word.toString();\n          map[&quot;value&quot;] = row1.value.toString();\n          map[&quot;id_tag&quot;] = row1.id_replacing_tag.toString();\n          tag[&quot;replacing&quot;] = map;\n        }).then((e){\n          print(&quot;then inner for called&quot;);\n          return null;\n        });\n        print(&quot;then inner for called&quot;);\n        return null;\n      });\n    }\n    \n    print(&quot;outer for returned&quot;);\n    // Send the data in UTF8 to the client \n    result = Helpers.formatJsonAndEncodeUtf8('OK', session:_session, data: [json]);\n    \n    return null;\n  }).catchError((error){\n     result = Helpers.formatJsonAndEncodeUtf8('ERROR 856284555 (Could not load tags)', session:_session);\n  });\n}).catchError((error){\n  result = Helpers.formatJsonAndEncodeUtf8('ERROR 2346644555 (Could not load tags)', session:_session);\n});\n    \nreturn Future.wait([mysqlAllTags]).then((e){\n  print(&quot;future returned&quot;);\n  return result;\n});\n</code></pre>\n<p>The result looks like this:</p>\n<blockquote>\n<p>outer for returned</p>\n<p>=== TO CLIENT ===</p>\n<p>{&quot;status&quot;:[{&quot;message&quot;:&quot;OK&quot;,&quot;csrfToken&quot;:&quot;99&quot;}],&quot;data&quot;:[{&quot;tags&quot;:[{&quot;word&quot;:&quot;Melon&quot;,&quot;value&quot;:&quot;11.0&quot;,&quot;rating&quot;:&quot;1&quot;,&quot;id_tag&quot;:&quot;37&quot;,&quot;replacing&quot;:null},........}]}</p>\n<p>=================</p>\n<p>future returned</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n<p>then inner for called</p>\n</blockquote>\n<p>How can I wait until all Futures in my for loop are finished?</p>\n"}, {"tags": ["javascript", "dart", "dart-polymer"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430464468, "post_id": 29979346, "comment_id": 48085266, "body": "I suspect the issues is something different than than a not ready element. Maybe the script has problems with the shadow DOM."}, {"owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "edited": false, "score": 0, "creation_date": 1430488634, "post_id": 29979346, "comment_id": 48095671, "body": "I agree, if the js library is looking for an element with the id <code>divForJS</code> in the main document then it won&#39;t find this div, because its inside a shadow root. If you can modify how its querying for the element then you could use a shadow piercing query selector, like <code>html &#47;deep&#47; #divForJS</code>."}], "owner": {"reputation": 333, "user_id": 1748903, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53518a02163146ad2eaf612920c18b83?s=128&d=identicon&r=PG", "display_name": "Hesh", "link": "https://stackoverflow.com/users/1748903/hesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430442600, "creation_date": 1430435745, "last_edit_date": 1430442600, "question_id": 29979346, "link": "https://stackoverflow.com/questions/29979346/how-to-ensure-dart-polymer-element-is-ready-before-calling-javascript-function-t", "title": "How to ensure Dart Polymer element is ready before calling JavaScript function that uses it?", "body": "<p>I have a <code>&lt;div&gt;</code> within a template of a Polymer dart component, which is used by the JavaScript library that is loaded by the component.\nAs soon as the page is loaded, from the dart script for the Polymer component, I need to call a JavaScript function passing it an object created in the dart side.\nHowever, I get the error: \n<code>Invalid DIV id; could not get element with id: divForJS</code></p>\n\n<p><strong>html for the Polymer element</strong>\n    </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script src=\"mylibrary.js\"&gt;&lt;/script&gt;\n\n&lt;polymer-element name=\"ele-one\"&gt;\n    &lt;template&gt;\n        &lt;div id=\"divForJS\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p><strong>dart code to go with the Polymer element</strong>\n    </p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>var dartObj;\ntimeConsumingOp()\n  .then((result) {\n   dartObj = result;\n   })\n  .then((_){\n   var jsObj = new JsObject.jsify(dartObj.toMap());\n   context.callMethod('myJSFunction', [jsObj]);\n  });  \n</code></pre>\n\n<p>I have tried placing this code in <code>attached()</code> before and after the call to <code>super.attached()</code>, <code>created()</code>or in <code>ready()</code> but with similar results.</p>\n\n<p>How do I ensure that the JavaScript function only gets called after the time consuming dart operation is complete and the div for it is ready?</p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "edited": false, "score": 0, "creation_date": 1430422640, "post_id": 29972938, "comment_id": 48072284, "body": "Good idea!  Thanks. I&#39;ll try that and will report report back here. Cheers."}], "tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": true, "score": 1, "last_activity_date": 1430410915, "creation_date": 1430410915, "answer_id": 29972938, "question_id": 29971894, "link": "https://stackoverflow.com/questions/29971894/can-i-have-two-apps-in-one-webpage-in-dart-polymer/29972938#29972938", "title": "Can I have two apps in one webpage in Dart + polymer?", "body": "<p>If they are both polymer apps on the exact same version and all their packages are the exact same version then you might be ok, but I wouldn't suggest it.</p>\n\n<p>Instead, can you make a single package which has two entry points (one for each of your apps)? If you want to keep your code separate for each of them you can do that still by moving everything into the lib folder and using a git or path dependency on each package (you probably don't want to publish your apps to pub).</p>\n"}], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 29972938, "answer_count": 1, "score": 0, "last_activity_date": 1430471999, "creation_date": 1430407905, "last_edit_date": 1430471999, "question_id": 29971894, "link": "https://stackoverflow.com/questions/29971894/can-i-have-two-apps-in-one-webpage-in-dart-polymer", "title": "Can I have two apps in one webpage in Dart + polymer?", "body": "<p>I have a dart + polymer app, which I have uploaded to my home page. The entry point is not index.html. It works fine.</p>\n\n<p>I have now developed a home page, index.html, again in polymer and dart. Essentially, it's another app of course. It's n the same top level folder as my app.  I've been playing around uploading (which takes <strong>ages!</strong>) the <strong>packages</strong> subfolders, but can't get index.html to display at all - yet.</p>\n\n<p>So my question is, will the <strong>packages</strong> subfolders conflict with each other, and I shouldn't do it?</p>\n\n<p>Thanks</p>\n\n<p>cheers<br>\nSteve</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430402445, "post_id": 29969787, "comment_id": 48059200, "body": "Can you make this project (or a reduced version which still allows to reproduce the problem) available on GitHub?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430402567, "post_id": 29969787, "comment_id": 48059305, "body": "Are all your libraries which should be initialized be reachable from entry_points registered in the initialize transformer config?"}, {"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430403015, "post_id": 29969787, "comment_id": 48059687, "body": "No, only the main file. Do you mean all html files that include dart files that call &#39;run()&#39; should be included as entry_point during development in dartium?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430403182, "post_id": 29969787, "comment_id": 48059816, "body": "I haven&#39;t used initialize directly myself yet but this is how transformers and entrypoints usually work (for example in Polymer which also uses initialize). I&#39;m pretty sure it is necessary to add each html file to the transformser config. Each entry_point is a complete Dart application."}, {"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430403377, "post_id": 29969787, "comment_id": 48059966, "body": "Ok I got it now, I did not know that the transformers kick in while in development, I thought it is only useful when compiling to JS. I have added the files one by one and now it it working, thank you"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1430403487, "post_id": 29969787, "comment_id": 48060055, "body": "Usually they shouldn&#39;t be necessary during development but this isn&#39;t always the case (for example Angular 1). I don&#39;t know for initialize but I think it&#39;s better to check this before searching somewhere else."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1462343893, "last_edit_date": 1462343893, "creation_date": 1430403383, "answer_id": 29970181, "question_id": 29969787, "link": "https://stackoverflow.com/questions/29969787/stuck-with-initialize-package-dart/29970181#29970181", "title": "Stuck with initialize package (Dart)", "body": "<p>You need to add each HTML to the initialize transformer configuration <code>entry_page</code> list, which references a Dart file by a script tag where you want initialize to take effect. </p>\n\n<p>Each HTML page with a Dart script tag is a self-sufficient Dart application. </p>\n"}], "owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 29970181, "answer_count": 1, "score": 2, "last_activity_date": 1462343893, "creation_date": 1430402348, "question_id": 29969787, "link": "https://stackoverflow.com/questions/29969787/stuck-with-initialize-package-dart", "title": "Stuck with initialize package (Dart)", "body": "<p>I have been trying this the whole day: I use initialize in several places in my library and then I have some example code in several HTML+Dart files.</p>\n\n<p>For one set of html+dart it works for another it does not - it simply never calls the init methods even when I copy the files contents and they are identical.</p>\n\n<p>I have tried restarting DartEditor and Dartium and so on, I just don't understand how it can work for one file set and for the other not when they have the same content and are in same relative paths... </p>\n\n<p>Please advise where should I look for problems because this behavior is beyond me.</p>\n\n<p>Thanks</p>\n"}]