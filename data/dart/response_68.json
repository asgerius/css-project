[{"tags": ["firebase", "dart"], "answers": [{"tags": [], "owner": {"reputation": 368, "user_id": 1239271, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ddff13fe30e9d01c128d0f8df9892d1?s=128&d=identicon&r=PG", "display_name": "BeatingToADifferentRobot", "link": "https://stackoverflow.com/users/1239271/beatingtoadifferentrobot"}, "is_accepted": false, "score": 1, "last_activity_date": 1467537001, "creation_date": 1467537001, "answer_id": 38168440, "question_id": 36876056, "link": "https://stackoverflow.com/questions/36876056/no-error-events-in-firebase-onvalue-stream/38168440#38168440", "title": "No error events in Firebase onValue stream", "body": "<p>The important item here is that you also don't get to read the value.  You'll have to check the authentication yourself or leverage Firebase.getAuth() (for v2).  </p>\n\n<p>The errorHandle on listen is more for errors regarding that specific listener (mainly invalid object/path) and not for authentication.  </p>\n"}], "owner": {"reputation": 21, "user_id": 2945762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9755a21bf57d52a8e6ad80139bd633?s=128&d=identicon&r=PG&f=1", "display_name": "AngryCat", "link": "https://stackoverflow.com/users/2945762/angrycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1467537001, "creation_date": 1461705889, "question_id": 36876056, "link": "https://stackoverflow.com/questions/36876056/no-error-events-in-firebase-onvalue-stream", "title": "No error events in Firebase onValue stream", "body": "<p>I'm new to Dart and Firebase, but after playing a little bit with them I've stumbled upon the following problem:</p>\n\n<p>I've created a test firebase app with the following rules:</p>\n\n<pre><code>{\n  \"rules\": {\n    \"privateTestData\": {\n        \".write\": \"false\",\n        \".read\": \"auth.uid !== null &amp;&amp; auth.uid == $uid\"\n    },\n    \"publicTestData\": {\n        \".write\": false,\n        \".read\": true\n    }\n  }\n}\n</code></pre>\n\n<p>Now when I read publicTestData, everything is ok. But when I try to read privateTestData (not being authenticated) I expect to receive some security error or something like this, but errorHandler is never called.</p>\n\n<p>My code:</p>\n\n<pre><code>FB.Firebase testFBReference;\n\nvalueHandler(FB.Event event) {\n    var value = event.snapshot.val();\n    print(\"Value: '$value'.\");\n}\n\nerrorHandler(error) {\n    print(\"Some error.\");\n}\n\ndoneHandler() {\n    print(\"Done.\");\n}\n\nvoid initializeFBReference() {\n    testFBReference = new FB.Firebase(\"https://test.firebaseio.com/privateTestData\");\n    testFBReference.onValue.listen(valueHandler, onError: errorHandler, onDone: doneHandler);\n}\n</code></pre>\n"}, {"tags": ["javascript", "dart", "polymer"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1461856343, "post_id": 36863625, "comment_id": 61399336, "body": "A bug report in the custom_element_apigen GitHub repo might help."}, {"owner": {"reputation": 479, "user_id": 2001554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b78a957dda49ae7f600667156f0f433?s=128&d=identicon&r=PG", "display_name": "Vitaliy Vostrikov", "link": "https://stackoverflow.com/users/2001554/vitaliy-vostrikov"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461917919, "post_id": 36863625, "comment_id": 61425815, "body": "Okay, I&#39;ll try to do it. Thank you."}, {"owner": {"reputation": 662, "user_id": 5417498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2025254f85f914ab7cd28198b83954b?s=128&d=identicon&r=PG", "display_name": "ilikerobots", "link": "https://stackoverflow.com/users/5417498/ilikerobots"}, "edited": false, "score": 1, "creation_date": 1462354774, "post_id": 36863625, "comment_id": 61598230, "body": "I&#39;ve used custom_element_apigen in my project.  You might take a look there as another example of its use: <a href=\"https://github.com/ilikerobots/polymer-app-layout\" rel=\"nofollow noreferrer\">polymer-app-layout</a>"}], "owner": {"reputation": 479, "user_id": 2001554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b78a957dda49ae7f600667156f0f433?s=128&d=identicon&r=PG", "display_name": "Vitaliy Vostrikov", "link": "https://stackoverflow.com/users/2001554/vitaliy-vostrikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1461856294, "creation_date": 1461670099, "last_edit_date": 1461856294, "question_id": 36863625, "link": "https://stackoverflow.com/questions/36863625/polymer-js-elements-for-polymer-dart", "title": "Polymer JS elements for Polymer Dart", "body": "<p>I try port polymer element, for using it with dart.\nI use custom_element_apigen package.\nWhen i run pub, i get Build error:</p>\n\n<pre><code>pub serve example/\nLoading source assets... \nLoading polymer transformers... (1.6s) \nServing wysiwyg_e example/ on http://localhost:8080\nBuild error:\nTransforms {Dart2JS on wysiwyg_e|example/packages/test/src/runner/browser/static/host.dart} all emitted asset wysiwyg_e|example/packages/test/src/runner/browser/static/host.dart.js.\n</code></pre>\n\n<p>And some errors like:</p>\n\n<pre><code>[Error from WebComponents on wysiwyg_e|example/index.html]:\nCould not load asset wysiwyg_e|lib/paper_tooltip.dart\n[Error from WebComponents on wysiwyg_e|example/index.html]:\nCould not load asset wysiwyg_e|lib/prism_import.dart\n[Error from WebComponents on wysiwyg_e|example/index.html]:\nCould not load asset wysiwyg_e|lib/behavior.dart\n</code></pre>\n\n<p>How i can port polymer js with custom_element_apigen? I must add all bower packages in gen.yaml? What does this error mean?</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "edited": false, "score": 0, "creation_date": 1461593013, "post_id": 36841342, "comment_id": 61255352, "body": "The page you linked to sums up the problem I tried to solve. I think IntelliJIdead uses Dart_to_js_script_rewriter to make the Build duplicate file.  My goal was very simple: only one unique website file (no Build at all) and the same HTML polyvalent pages able to work both with Dart (in Dartium) or JS (anywhere else) without any manipulation while optimizing speed performances at the same time. I think my little script above does the job (we could write directly the original dart.js into HTML too)."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "edited": false, "score": 0, "creation_date": 1461593154, "post_id": 36841342, "comment_id": 61255458, "body": "It&#39;s great if your script works for you. I doubt though, WebStorm does anything you claim it does. WebStorm only calls <code>pub build</code>. If you don&#39;t have the transformer mentioned in my answer then there should be nothing that does the rewrite."}, {"owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "edited": false, "score": 0, "creation_date": 1461593734, "post_id": 36841342, "comment_id": 61255851, "body": "I don&#39;t speak of WebStorm, for Dart I use IntelliJIdea CE and I don&#39;t like my indentation to be moved upside-down. Thank you for your reply, I think the topic is over."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "edited": false, "score": 0, "creation_date": 1461593788, "post_id": 36841342, "comment_id": 61255900, "body": "Sorry, AFAIK in regard to this topic WebStorm and IntelliJ behave exactly the same."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1461589204, "creation_date": 1461589204, "answer_id": 36841342, "question_id": 36840954, "link": "https://stackoverflow.com/questions/36840954/script-tags-to-embed-dart-into-html/36841342#36841342", "title": "Script tags to embed Dart into HTML", "body": "<p>I haven't heard of any such problems with the Dart script tags.</p>\n\n<p>Using the transformer of <a href=\"https://pub.dartlang.org/packages/dart_to_js_script_rewriter\" rel=\"nofollow\">https://pub.dartlang.org/packages/dart_to_js_script_rewriter</a> \nremoves the Dart script tag which is only required by browsers that support Dart directly, which is only Dartium, which is not supposed to be used to access the web (only for development purposes), therefore for deployment this script tag is irrelevant.</p>\n"}, {"tags": [], "owner": {"reputation": 1636, "user_id": 999080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6967289baca601572cbec9c638e177ff?s=128&d=identicon&r=PG", "display_name": "Alexander Doroshko", "link": "https://stackoverflow.com/users/999080/alexander-doroshko"}, "is_accepted": false, "score": 0, "last_activity_date": 1461595884, "creation_date": 1461595884, "answer_id": 36844040, "question_id": 36840954, "link": "https://stackoverflow.com/questions/36840954/script-tags-to-embed-dart-into-html/36844040#36844040", "title": "Script tags to embed Dart into HTML", "body": "<p>Dart plugin is the same in IntelliJ IDEA, WebStorm and other JetBrains' IDEs. And it doesn't do anything with your source code on build, it only calls <code>pub build</code> as if you ran it from command line (assume you are talking about 'Pub: build' action in context of <code>pubspec.yaml</code> file).</p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "is_accepted": false, "score": 0, "last_activity_date": 1461605738, "creation_date": 1461605738, "answer_id": 36847358, "question_id": 36840954, "link": "https://stackoverflow.com/questions/36840954/script-tags-to-embed-dart-into-html/36847358#36847358", "title": "Script tags to embed Dart into HTML", "body": "<p>I'll stop here my delirium with this new polyvalent code of my own.</p>\n\n<pre><code>&lt;script&gt;\n  (function() {\n    var elem = document.createElement('script');\n    document.querySelector('body').appendChild(elem);\n    if (navigator.userAgent.indexOf('(Dart)') === -1) {\n      elem.type = 'application/javascript';\n      elem.src = 'script.dart.js';\n    }\n    else {\n      elem.type = 'application/dart';\n      elem.src = 'script.dart';\n    }\n  })();\n&lt;/script&gt;\n</code></pre>\n\n<p>Thank you for applause, that's all folks!</p>\n"}], "owner": {"reputation": 93, "user_id": 5312346, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29625595fdbe144f7c96d61e689a806?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Myrta", "link": "https://stackoverflow.com/users/5312346/pascal-myrta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1461605738, "creation_date": 1461588200, "question_id": 36840954, "link": "https://stackoverflow.com/questions/36840954/script-tags-to-embed-dart-into-html", "title": "Script tags to embed Dart into HTML", "body": "<p>Normally Dart is connected to HTML by means of this code:</p>\n\n<pre><code>&lt;script type=\"application/dart\" src=\"script.dart\"&gt;&lt;/script&gt;\n&lt;script src=\"packages/browser/dart.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>By running Build, IntellijIdea transforms the first line into <code>&lt;script src=\"script.dart.js\"&gt;</code> and eliminates the second line, OK. But there are some problems to me:</p>\n\n<ol>\n<li>After Build file has been created, my indentation is broken. </li>\n<li>Google PageSpeed Insight test says \"Too much http requests\", or something like that.</li>\n</ol>\n\n<p>I solved the problem this way. No Build file anymore, I use Dart2js + Terminal to create script.dart.js. As to the HTML code, I've written this little thing below instead.</p>\n\n<pre><code>&lt;script type=\"application/dart\" src=\"script.dart\" id=\"dart-script\"&gt;&lt;/script&gt;\n&lt;script&gt;\n  (function() {\n    if (navigator.userAgent.indexOf('(Dart)') === -1) {\n      var dartScript = document.querySelector('#dart-script');\n      dartScript.type = 'application/javascript';\n      dartScript.src = 'script.dart.js';\n    }\n  })();\n&lt;/script&gt;\n</code></pre>\n\n<p>It works very well. What do you think of it?</p>\n"}, {"tags": ["javascript", "json", "dart", "polymer"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1461559208, "post_id": 36828902, "comment_id": 61235026, "body": "Looks like a bug in <code>pub</code> or the Dart VM. I saw similar error messages recently in bug reports. Try updating to the newest Dart version (dev-channel if possible)."}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461609780, "post_id": 36828902, "comment_id": 61266163, "body": "Nope, unfortunately it&#39;s not that. I&#39;ve updated to <code>Pub 1.16.0-dev.5.4</code> but same error occours. I think it&#39;s a Polymer issue because that&#39;s where the error is originating from, and also everything seems to work fine if I remove the <code>polymer</code> transformer."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461609913, "post_id": 36828902, "comment_id": 61266217, "body": "Did you import <code>@reflectable</code> on server code or shared code?"}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461609996, "post_id": 36828902, "comment_id": 61266250, "body": "Yes, all my models have <code>@reflectable</code> fields. I use it to bind to them in Polymer templates."}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461610870, "post_id": 36828902, "comment_id": 61266738, "body": "I&#39;m not using <code>JsProxy</code> on the server-side, I only use Dart for the front-end part of a website. I have a web API written in C# that returns me JSON, which I deserialize with dartson, and on which I ultimately bind to with Polymer. Everything works fine on Dartium without any erros but I can&#39;t <code>pub build</code> it because it gives me that error."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461675858, "post_id": 36828902, "comment_id": 61298696, "body": "I can&#39;t open the repository you linked to in your question (Access denied)."}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461676096, "post_id": 36828902, "comment_id": 61298880, "body": "I&#39;ve made it private because it&#39;s irrelevant - please see my post update."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1461676280, "post_id": 36828902, "comment_id": 61299024, "body": "The transformers in your <code>pubspec.yaml</code> doesn&#39;t contain any entry points."}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461676989, "post_id": 36828902, "comment_id": 61299571, "body": "It&#39;s not that either ... Polymer should find the entry points automatically and dartson doesn&#39;t need entry points. I did it anyway but it&#39;s useless. I&#39;ll try comparing the two transformers&#39; source code and see if I find anything. Updated the post again."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1461677227, "post_id": 36828902, "comment_id": 61299757, "body": "Please change the order of the transformers like <code>dartson</code> first, then <code>polymer</code>, and <code>$dart2js</code> last"}, {"owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461697426, "post_id": 36828902, "comment_id": 61313828, "body": "It&#39;s not that either. I have chased it down a bit more but that only resulted in further breaking my project, so I have reverted to the latest pre-1.0 Polymer.dart version, as it was the one which worked best for me. Perhaps I will try re-porting when it will be more stable. Thank you for all the help."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461698123, "post_id": 36828902, "comment_id": 61314259, "body": "I see. The order of the transformers is relevant and I think the order mentioned in my comment above is correct. The root cause of your current problem is then somewhere else thought :-/"}], "owner": {"reputation": 26, "user_id": 2591722, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001050560509/picture?type=large", "display_name": "Uizz Underweasel", "link": "https://stackoverflow.com/users/2591722/uizz-underweasel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461676812, "creation_date": 1461532069, "last_edit_date": 1461676812, "question_id": 36828902, "link": "https://stackoverflow.com/questions/36828902/polymer-dart-1-0-the-built-in-library-darthtml-is-not-available-on-the-stan", "title": "Polymer.dart 1.0 - The built-in library &#39;dart:html&#39; is not available on the stand-alone VM", "body": "<p>I'm working on a hybrid project which combines ASP.NET Core and Dart (<a href=\"https://bitbucket.org/Uizz/livereactor/src/bcb4c60939c8d41ce5e1b57d3685a0351ac3c28d/ui/?at=dev\" rel=\"nofollow noreferrer\">Repo</a>). I use dartson to deserialize my JSON into Dart models, and have also started messing around with Polymer.dart 1.0. After doing loads of plumming and debugging, I have somewhat arrived at a point that can be considered stable (for now). Everything works fine and without any errors in Dartium.</p>\n\n<p>Let me explain my project structure first. I have 2 entry points : <code>home.html</code> and <code>account.html</code>. I have an <code>_imports.html</code> aggregator and have exported my models, services and views as libraries, also aggregated in their speciffic <code>.dart</code> files. I use dartson's <code>@Entity</code> and <code>@Property</code> annotations for mirror-less deserialization when compiling to JS, and Polymer's <code>@reflectable</code> to bind to them in my controls.</p>\n\n<p>All good so far, however, when I do a <code>pub build</code>, I get the following output :</p>\n\n<pre><code>Loading source assets...\nLoading initialize/build/loader_replacer, initialize, dartson, web_components, reflectable, polymer_interop/src/build/minify_transformer, reflectable/src/transform_import and web_components/build/mirrors_remover transformers...\nLoading polymer transformers...\nUnable to spawn isolate: The built-in library 'dart:html' is not available on the stand-alone VM.\n'package:polymer/src/template/array_selector.dart': error: line 6 pos 1: library handler failed\nimport 'dart:html';\n^\ndart:isolate-patch/isolate_patch.dart      Isolate.spawnUri.&lt;async&gt;\ndart:async-patch/async_patch.dart 34       _asyncErrorWrapperHelper.&lt;fn&gt;\ndart:async/zone.dart 1142                  _RootZone.runBinary\ndart:async/future_impl.dart 579            _Future._propagateToListeners.handleError\ndart:async/future_impl.dart 641            _Future._propagateToListeners\ndart:async/future_impl.dart 432            _Future._completeError\ndart:async/future_impl.dart 56             _SyncCompleter._completeError\ndart:async/future_impl.dart 27             _Completer.completeError\ndart:isolate-patch/isolate_patch.dart 439  Isolate._spawnCommon.&lt;fn&gt;\ndart:isolate-patch/isolate_patch.dart 148  _RawReceivePortImpl._handleMessage\n</code></pre>\n\n<p>Does anyone know what could be causing this issue?</p>\n\n<h1>UPDATE 2</h1>\n\n<p>It looks like my source has nothing to do with it, and that the <code>dartson</code> and <code>polymer</code> transformers don't like each other. I have created an empty project with an empty <code>web/</code> directory and the following <code>pubspec.yaml</code>, ran <code>pub get</code> and <code>pub build</code> and it gives me exactly the same error!</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ir7yw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ir7yw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["dart", "angular", "less"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461435321, "post_id": 36813073, "comment_id": 61201913, "body": "Did you add the <code>transformers:   - less_dart</code> part in <code>pubspec.yaml</code>?"}, {"owner": {"reputation": 41, "user_id": 6244911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RpN2b3jXm4g/AAAAAAAAAAI/AAAAAAAAAF8/hQva1Y1Gc1g/photo.jpg?sz=128", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/6244911/alexander-kabanov"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461498168, "post_id": 36813073, "comment_id": 61216728, "body": "@G&#252;nterZ&#246;chbauer, yes, sure. I added dependencies: less_dart: &quot;^0.3.3&quot; and transformers : - less_dart:     entry_point: web/main.less     build_mode: dart as well"}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461498458, "post_id": 36813073, "comment_id": 61216813, "body": "In the readme in <a href=\"https://pub.dartlang.org/packages/less_dart\" rel=\"nofollow noreferrer\">pub.dartlang.org/packages/less_dart</a> it says <code>entry_points&#39;</code> not <code>entry_point</code>"}, {"owner": {"reputation": 41, "user_id": 6244911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RpN2b3jXm4g/AAAAAAAAAAI/AAAAAAAAAF8/hQva1Y1Gc1g/photo.jpg?sz=128", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/6244911/alexander-kabanov"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461498684, "post_id": 36813073, "comment_id": 61216894, "body": "@G&#252;nterZ&#246;chbauer I writed entry_points, and it gives the same effect"}, {"owner": {"reputation": 41, "user_id": 6244911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RpN2b3jXm4g/AAAAAAAAAAI/AAAAAAAAAF8/hQva1Y1Gc1g/photo.jpg?sz=128", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/6244911/alexander-kabanov"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461503239, "post_id": 36813073, "comment_id": 61218342, "body": "@G&#252;nterZ&#246;chbauer I also have same issue like this, <a href=\"http://stackoverflow.com/questions/34193792/creating-a-simple-button-with-angular2-dart-and-angular2-material\" title=\"creating a simple button with angular2 dart and angular2 material\">stackoverflow.com/questions/34193792/&hellip;</a>, but it doesn&#39;t help me, is there some extra samples?"}], "owner": {"reputation": 41, "user_id": 6244911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RpN2b3jXm4g/AAAAAAAAAAI/AAAAAAAAAF8/hQva1Y1Gc1g/photo.jpg?sz=128", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/6244911/alexander-kabanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461427155, "creation_date": 1461427155, "question_id": 36813073, "link": "https://stackoverflow.com/questions/36813073/how-to-include-less-files-in-angular2-dart-components", "title": "How to include .less files in angular2 dart components", "body": "<p>I want to use less preprocessor in my dart angular 2 app. What I exactly do :</p>\n\n<ol>\n<li><p>include dependency into <strong>pabspec.yaml</strong> file \n<code>- less_dart:\nentry_point: web/main.less\nbuild_mode: dart</code></p></li>\n<li><p>include <code>&lt;link rel=\"stylesheet\" href=\"main.css\"/&gt;</code> into index.html file</p></li>\n<li>In web folder I added main.less file as well\nIn this point my app works correct, but when I try to include other .less files in other components in leads to exaption, for instance:</li>\n<li>I created file app.less, inside I writed some less code</li>\n<li>In file app_component.dart I included it like: <code>styleUrls: const ['app.less'],</code>\nAs result I had such exaption as: </li>\n</ol>\n\n<blockquote>\n  <p>GET <a href=\"http://localhost:8080/packages/SmartPeopleUI/app.less.dart\" rel=\"nofollow\">http://localhost:8080/packages/SmartPeopleUI/app.less.dart</a>\n  An error occurred loading file: package:Project/app.less.dart</p>\n</blockquote>\n"}, {"tags": ["dart", "dart-html"], "answers": [{"tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1461413650, "last_edit_date": 1461413650, "creation_date": 1461413043, "answer_id": 36810565, "question_id": 36810272, "link": "https://stackoverflow.com/questions/36810272/in-dart-must-element-html-occur-within-the-context-of-a-body-tag/36810565#36810565", "title": "In Dart must element.html(&quot; &quot;) occur within the context of a body tag?", "body": "<p>This is a browser \"feature\". A <code>&lt;tr&gt;</code> element can't exist on its own and is just dropped from the HTML when it finds one.</p>\n\n<p>The docs to <code>new Element.html()</code> says</p>\n\n<blockquote>\n  <p>Creates an HTML element from a valid fragment of HTML.</p>\n</blockquote>\n\n<p>Alternatively you can use</p>\n\n<pre><code>  table.append(\n      new TableRowElement()..append(new TableCellElement()..text = 'test'));\n</code></pre>\n\n<p><a href=\"https://dartpad.dartlang.org/12ea44d3c2a2935bc74d9d17baa8610a\" rel=\"nofollow\"><strong>DartPad example</strong></a></p>\n"}], "owner": {"reputation": 13, "user_id": 6244282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4663871bb0a3768474556d0c5156b20a?s=128&d=identicon&r=PG&f=1", "display_name": "s.virgo", "link": "https://stackoverflow.com/users/6244282/s-virgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36810565, "answer_count": 1, "score": 1, "last_activity_date": 1461488163, "creation_date": 1461411226, "last_edit_date": 1461488163, "question_id": 36810272, "link": "https://stackoverflow.com/questions/36810272/in-dart-must-element-html-occur-within-the-context-of-a-body-tag", "title": "In Dart must element.html(&quot; &quot;) occur within the context of a body tag?", "body": "<pre><code>TableElement table = new TableElement();\ndocument.body.children.add(table);\ntable.children.add(new Element.html(\"&lt;tr&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;\"));\n</code></pre>\n\n<p>The above code snippet returns the error: \"Uncaught Bad state: No element\". Reading the API docs on the DartLang website this is because when using the Element.html(\" \") constructor, \"the HTML fragment is parsed as if it occurred within the context of a &lt;body> tag\". Therefore, we would need to write:</p>\n\n<pre><code>new Element.html(\"&lt;table&gt;&lt;tr&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\")\n</code></pre>\n\n<p>However, reading \"dart in action\" Chris Buckett uses this exact same syntax when building a table.</p>\n\n<p>Has something changed or am I misunderstanding something?</p>\n"}, {"tags": ["dart", "dart-webui"], "comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461267093, "post_id": 36778417, "comment_id": 61133933, "body": "Why do you wan&#39;t to count in a loop? Could you not just measure the time when you &quot;start counting&quot; until the click happened?"}, {"owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461268772, "post_id": 36778417, "comment_id": 61134924, "body": "I want to be able to carry out some chunks of processing in a while loop - the task will be searching for words in a stack of random letters. This needs to stop when the opponent moves so i want to be able to change the value of OK from true to false at that moment."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461269749, "post_id": 36778417, "comment_id": 61135494, "body": "I still have no idea what you mean by &quot;control a while loop&quot;. Your generator function makes your code event-driven anyway. <code>await sleep()</code> adds some additional cycles for the browser main thread. I don&#39;t know if this is useful/necessary."}, {"owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "reply_to_user": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461277013, "post_id": 36778417, "comment_id": 61139223, "body": "I simply mean I want to be able to change the bool from true to false by using a mouseEvent to stop the while loop. Without the sleep() the execution is locked in the while loop so the mouse event is never picked up. In Java the OK would be a static variable that could be changed from another thread."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "edited": false, "score": 1, "creation_date": 1461340295, "post_id": 36787457, "comment_id": 61170744, "body": "Thank you Gunter. I appreciate the comment. I can get a web worker working, but the exact same problem exists: in HTML only spawnuri can work so we can only control the worker with messages. The while loop in the worker  prevents messages in worker  from being actioned so the loop can&#39;t be stopped. It would be nice to have a sleep function for one clock cycle as a millisecond seems very long."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "edited": false, "score": 0, "creation_date": 1461341339, "post_id": 36787457, "comment_id": 61171337, "body": "I guess new <code>new Future.delayed.const(Duration.ZERO), (){})</code> or even <code>new Future.value(null)</code> might do what you want. That should just enqueue into the message queue without any additional delay to be processed when previously enqueued tasks are done. <a href=\"https://www.dartlang.org/articles/event-loop/\" rel=\"nofollow noreferrer\">dartlang.org/articles/event-loop</a> should provide more information about this topic. There are different queues (event, microtask) and completed Futures are again treated differently AFAIR."}, {"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "edited": false, "score": 0, "creation_date": 1461342797, "post_id": 36787457, "comment_id": 61172178, "body": "Ok, I checked it. <code>new Future.delayed.const(Duration.ZERO))</code> works fine but <code>new Future.value()</code> doesn&#39;t."}, {"owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "edited": false, "score": 1, "creation_date": 1461342940, "post_id": 36787457, "comment_id": 61172254, "body": "Yes, that works Gunter. Thank you very much for your help."}], "tags": [], "owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1461342902, "last_edit_date": 1495541260, "creation_date": 1461309643, "answer_id": 36787457, "question_id": 36778417, "link": "https://stackoverflow.com/questions/36778417/controlling-while-loops-in-dart/36787457#36787457", "title": "Controlling while loops in Dart", "body": "<p><strong>update</strong></p>\n\n<p>Just enqueue to allow the event queue to process outstanding events without additional delay use</p>\n\n<pre><code>Future sleep() {\n  return new Future.delayed(Duration.ZERO);\n}\n</code></pre>\n\n<p><strong>original</strong></p>\n\n<p>JavaScript and therefore can't Dart have threads in the browser and you need to pass control back to the event queue to allow it to process other events like you do with <code>sleep()</code>.</p>\n\n<p>Another approach would be to use webworkers and run the heavy calculation in a background task (webworker) to keep the UI thread free to process user events. This way even additional CPU cores can be utilized which isn't possible when all code runs in the browsers UI thread.</p>\n\n<p>I don't know how to create webworkers in Dart though except with Angular2 Dart <a href=\"https://stackoverflow.com/questions/36290308/web-workers-in-angular-2-dart/36290589#36290589\">Web workers in Angular 2 Dart</a> where Angular does the initialization.\nI don't think it's too difficult but I don't know any docs.</p>\n"}, {"tags": [], "owner": {"reputation": 2939, "user_id": 652220, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/B3Bm7.png?s=128&g=1", "display_name": "Argenti Apparatus", "link": "https://stackoverflow.com/users/652220/argenti-apparatus"}, "is_accepted": false, "score": 2, "last_activity_date": 1461355602, "creation_date": 1461355602, "answer_id": 36802464, "question_id": 36778417, "link": "https://stackoverflow.com/questions/36778417/controlling-while-loops-in-dart/36802464#36802464", "title": "Controlling while loops in Dart", "body": "<p>To provide a more general answer - instead of a loop, you want to schedule a sequence of future tasks that each executes one iteration or step of your AI code (or whatever background process you want to have running).</p>\n\n<p>You can have the step task recursively schedule itself:</p>\n\n<pre><code>dynamic doSomething(_) {\n  print('Doing something ...'); \n  if(!stop) {\n    new Future.delayed(delay, (){}).then(doSomething);\n  }\n  return null;\n}\n\nmain() async {\n\n  doSomething(null);\n\n}\n</code></pre>\n\n<p>Although I don't recommend doing this. It's awkward to control - the step code has to check a flag variable to see if it should continue or stop and it's free running.</p>\n\n<p>Alternatively you could use a <code>Timer</code>:</p>\n\n<pre><code>void doSomething(Timer timer) {\n  print('Doing something ...');  \n}\n\nmain() async {\n\n new Timer.periodic(delay, doSomething);\n\n}\n</code></pre>\n\n<p>This is throttled at a constant rate and has a uniform time step, and is easier to stop (call <code>cancel()</code> on the timer).</p>\n\n<p>Another approach might be to synchronize with the browser's draw refresh cycle by requesting future <em>animation frame</em>s:</p>\n\n<pre><code>import 'dart:html';\n\ndoSomething(num delta) {\n  print('Doing something ...');  \n  window.animationFrame.then(doSomething);\n}\n\nvoid main() {\n  window.animationFrame.then(doSomething);\n}\n</code></pre>\n\n<p>Time steps are not constant but you get the time delta. The advantage of this approach is that animation frame futures will not be scheduled if the browser window is hidden.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/15753170/how-do-i-drive-an-animation-loop-at-60fps-with-dart\">How do I drive an animation loop at 60fps with Dart?</a></p>\n\n<p>Those are very simple examples. Setting up proper background processes for physics simulation and AI in web games is actually surprisingly (to me at least) non-trivial. Here are two resources I found helpful.</p>\n\n<p><a href=\"http://gameprogrammingpatterns.com/\" rel=\"nofollow\">http://gameprogrammingpatterns.com/</a> - a nice free online book of game programming patterns. <a href=\"http://gameprogrammingpatterns.com/game-loop.html\" rel=\"nofollow\">http://gameprogrammingpatterns.com/game-loop.html</a> - chapter on game loops.</p>\n\n<p><a href=\"http://gafferongames.com/game-physics/fix-your-timestep/\" rel=\"nofollow\">http://gafferongames.com/game-physics/fix-your-timestep/</a> - part of a sequence of articles on physics simulation in games.</p>\n"}, {"comments": [{"owner": {"reputation": 483716, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1461511217, "post_id": 36824989, "comment_id": 61221133, "body": "<code>new Future.delayed(Duration.ZERO);</code> has the same effect as <code>new Future.delayed(const Duration(milliseconds: 0), () {});</code>"}], "tags": [], "owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "is_accepted": false, "score": 1, "last_activity_date": 1461510968, "creation_date": 1461510968, "answer_id": 36824989, "question_id": 36778417, "link": "https://stackoverflow.com/questions/36778417/controlling-while-loops-in-dart/36824989#36824989", "title": "Controlling while loops in Dart", "body": "<p>Following all suggestions this is the code I have ended up with, putting the heavy lifting in a worker, with controllable stopping and starting. I have used simple counting to get this working, but this is being replaced with my complex AI game calculations. </p>\n\n<p>This uses time slices of 100ms within a worker isolate, which can only be interrupted after it has finished the batch. This allows me complete freedom to have complex animations on the screen while all this hard work is being done.</p>\n\n<pre><code>import 'dart:html' as html;\nimport 'dart:isolate';\nimport 'dart:math';\n\nSendPort worker;\nbool working = false;\n\nmain() async{\n\n  await startWorker();\n\n  html.querySelector('#stage').onMouseUp.listen((e){\n    if(working)worker.send('stop');\n    else worker.send('go');\n  });\n\n}\n\nstartWorker() async{\n  var response = new ReceivePort();\n\n  await Isolate.spawnUri(Uri.parse(\"worker.dart\"), null ,response.sendPort)\n      .then((_) =&gt; response.listen((msg){\n\n    if(msg is SendPort) {\n      worker = msg;\n    }\n    else {\n      messageReceived(msg);\n    }\n  }));\n}\n\nmessageReceived(String message){\n  switch (message){\n    case 'working': working = true;\n    break;\n\n    case 'idle': working = false;\n      break;\n\n    default : print(message);\n      break;\n  }\n}\n</code></pre>\n\n<p>worker.dart</p>\n\n<pre><code>import 'dart:isolate';\nimport 'dart:async';\n\nSendPort replyTo;\nbool OK = false;\nconst timeSlice = 100;\n\nmain(List&lt;String&gt; args, SendPort reply) async{\n  var response = new ReceivePort();\n  reply.send(response.sendPort);\n  replyTo = reply;\n  response.listen((msg) =&gt; messageReceived(msg));\n  replyTo.send(\"Hello from worker. Click to start and stop me\");\n}\n\nmessageReceived(String message){\n  switch(message){\n    case 'stop':\n      replyTo.send('idle');\n      OK = false;\n      break;\n\n    case 'go':\n      replyTo.send('working');\n      go();\n      break;\n  }\n}\n\ngo()async {\n  OK = true;\n  int i = 0;\n\n  batchJob(){\n    int startTime = new DateTime.now().millisecondsSinceEpoch;\n    int elapsed = 0;\n\n    while(elapsed &lt; timeSlice){\n\n      i ++; // the central routine\n\n      elapsed = new DateTime.now().millisecondsSinceEpoch - startTime;\n    }\n }\n\n  while(OK){\n    batchJob();\n    replyTo.send(i.toString());\n    await new Future.delayed(const Duration(milliseconds: 0), () {});\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4622480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8oXPAuDrxLw/AAAAAAAAAAI/AAAAAAAAAFk/gq0DyFsb1Zg/photo.jpg?sz=128", "display_name": "Stephen Poole", "link": "https://stackoverflow.com/users/4622480/stephen-poole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2346, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1461510968, "creation_date": 1461265693, "question_id": 36778417, "link": "https://stackoverflow.com/questions/36778417/controlling-while-loops-in-dart", "title": "Controlling while loops in Dart", "body": "<p>I am stuck trying to do something simple. I want to be able to count upwards until I click on the screen at which point i want the counting to stop. In reality the code itself will be carrying out complex AI calculations for a game, but first I want to understand how to control the while loop. In android this would be trivial.</p>\n\n<p>Here is what my code looks like</p>\n\n<pre><code>bool OK = true;\n\nmain() async{\n html.querySelector('#content').onMouseUp.listen((e){\n   OK = false;\n });\n\n await for(int i in naturals){\n   print(i);\n   await sleep();\n }\n}\n\nStream get naturals async* {\n int k = 0; while (OK) { yield await k++; }\n}\n\nFuture sleep() {\n return new Future.delayed(const Duration(milliseconds: 1), () =&gt; \"1\");\n}\n</code></pre>\n\n<p>I put the sleep() method in as a way to ensure that control is passed to the event loop. </p>\n\n<p>Is it possible to control a while loop without the sleep() method?</p>\n"}]