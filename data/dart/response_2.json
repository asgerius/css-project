[{"tags": ["dart", "dart2js"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1421852419, "last_edit_date": 1421852419, "creation_date": 1421841526, "answer_id": 28066718, "question_id": 28065573, "link": "https://stackoverflow.com/questions/28065573/why-copy-paste-dart2js-output-to-console-doesnt-work/28066718#28066718", "title": "Why copy &amp; paste dart2js&#39; output to console doesn&#39;t work?", "body": "<p>I didn't dig very deep but I had the impression the generated code registers itself for a script loaded event and then executes \"main\" as event handler. I don't know JavaScript and browser behavior good enough to understand how this can work. </p>\n\n<p>I got it working by running this code in the dev console</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>(function runTest() {\n  var s = document.createElement(\"script\");\n  s.type = \"text/javascript\";\n  s.src = \"test.js\";\n  document.body.appendChild(s);}\n)();\n</code></pre>\n\n<p>where the <code>test.js</code> (generated output from <code>dart2js</code>) file is in the same directory as the <code>index.html</code>. </p>\n\n<p>The code adds the script tag referencing the <code>dart2js</code> output dynamically and the code in <code>test.js</code> is executed.</p>\n"}], "owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421852419, "creation_date": 1421838094, "last_edit_date": 1421838554, "question_id": 28065573, "link": "https://stackoverflow.com/questions/28065573/why-copy-paste-dart2js-output-to-console-doesnt-work", "title": "Why copy &amp; paste dart2js&#39; output to console doesn&#39;t work?", "body": "<p>compile the following code with <code>dart2js -o test.js test.dart</code></p>\n\n<p>open <code>test.js</code>, copy its content</p>\n\n<p>open browser, go to stackoverflow.com</p>\n\n<p>open dev tools, go to console tab</p>\n\n<p>paste <code>test.js</code>'s content into console, hit <kbd>Enter</kbd></p>\n\n<p>I expect it to click the \"Ask Question\" button, but it doesn't, why?</p>\n\n<p>(The reason I want to do this is, I need some js, but I don't want to touch js.)</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>// test.dart\nimport 'dart:html';\nvoid main() {\n  document.querySelector('#nav-askquestion').click();\n}\n</code></pre>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 0, "creation_date": 1421817589, "post_id": 28060112, "comment_id": 44501580, "body": "ahah now i need to change 11 classes to be non generic and give the type to the constructor!"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 0, "creation_date": 1421821994, "post_id": 28060112, "comment_id": 44503041, "body": "I thought to remember reading about this but wasn&#39;t yet able to find anything."}, {"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 0, "creation_date": 1421822688, "post_id": 28060112, "comment_id": 44503296, "body": "not a problem just wanted to make sure its impossible"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1421817463, "creation_date": 1421817463, "answer_id": 28060112, "question_id": 28060094, "link": "https://stackoverflow.com/questions/28060094/why-cant-i-use-type-variable-as-a-type-parameter-to-a-generic-class/28060112#28060112", "title": "Why can&#39;t i use Type variable as a Type parameter to a generic class", "body": "<p>This is not (yet) supported. </p>\n\n<p>There was some explanation somewhere, I'll have to look it up....</p>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 2212743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d035e8d4b73af7c576183c503fc2339?s=128&d=identicon&r=PG", "display_name": "Gilad Bracha", "link": "https://stackoverflow.com/users/2212743/gilad-bracha"}, "is_accepted": true, "score": 9, "last_activity_date": 1596438301, "last_edit_date": 1596438301, "creation_date": 1421866984, "answer_id": 28074813, "question_id": 28060094, "link": "https://stackoverflow.com/questions/28060094/why-cant-i-use-type-variable-as-a-type-parameter-to-a-generic-class/28074813#28074813", "title": "Why can&#39;t i use Type variable as a Type parameter to a generic class", "body": "<p>This is not possible in Dart as it stands today.</p>\n<p>Parameterized types (things like <code>List&lt;int&gt;</code>) can take literal types (e.g., <code>List&lt;Chicken&gt;</code>) or <code>type</code> parameters (e.g., <code>List&lt;T&gt;</code> where <code>T</code> is declared as a <code>type</code> parameter in a generic, as it in Cage) as arguments. They cannot take arbitrary expressions, even if those are of <code>type Type</code>.</p>\n<p>A variable such as <code>t</code> might hold a <code>Type</code> (as in your example) but in general it is really hard to be sure of that. It could just as easily hold a non-type value such as the number 3, because Dart's type system does not guarantee that something with static type Type really is a <code>Type</code>.</p>\n<p>If we let these through, the system would be thoroughly corrupted. We could add runtime checks for that, but that would hit performance.</p>\n"}], "owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 28074813, "answer_count": 2, "score": 9, "last_activity_date": 1596438301, "creation_date": 1421817291, "last_edit_date": 1421820546, "question_id": 28060094, "link": "https://stackoverflow.com/questions/28060094/why-cant-i-use-type-variable-as-a-type-parameter-to-a-generic-class", "title": "Why can&#39;t i use Type variable as a Type parameter to a generic class", "body": "\n\n<pre class=\"lang-dart prettyprint-override\"><code>class Cage&lt;T&gt;{\n  Cage();\n}\n\nclass Chicken{\n  Chicken();\n}\n\nmain() {\n  Type t= Chicken;\n  var cage = new Cage&lt;t&gt;();        //Does not work\n  var cage2 = new Cage&lt;Chicken&gt;(); //Works\n}\n</code></pre>\n\n<p>Why cant I use Type variable as a Type parameter to a generic class?</p>\n\n<p>here is a part of my problem, easy to solve by sending the type variable to the constructor but makes it ugly</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>class Injector{\n  Map&lt;Symbol, DependencyMapping&gt; _dependencyMappings;\n\n  //problem comes here\n  RegisterDependency(Type type,[Symbol name=#unnamed]){\n     //...\n     var mapping = new DependencyMapping&lt;type&gt;(name);\n  } \n\n}\n\nclass DependencyMapping&lt;T&gt;{\n  //...\n}\n\nabstract class DependencyProvider&lt;T&gt; {\n  //...\n}\n\nclass ValueProvider&lt;T&gt; implements DependencyProvider {\n  //...\n}\n\nclass ClassProvider&lt;T&gt; implements DependencyProvider {\n  //...\n}\n\nclass SingletonProvider&lt;T&gt; implements DependencyProvider {\n  //...\n}\n</code></pre>\n"}, {"tags": ["dart", "md5", "sha1", "hmac", "vuforia"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 2, "creation_date": 1421819545, "post_id": 28059022, "comment_id": 44502223, "body": "It seems <a href=\"https://pub.dartlang.org/packages/cipher\" rel=\"nofollow noreferrer\">pub.dartlang.org/packages/cipher</a> provides what you need but I have no idea how to use it (didn&#39;t use it myself yet)"}, {"owner": {"reputation": 381, "user_id": 5345736, "user_type": "registered", "profile_image": "https://graph.facebook.com/878235185578287/picture?type=large", "display_name": "Kamran Bashir", "link": "https://stackoverflow.com/users/5345736/kamran-bashir"}, "edited": false, "score": 0, "creation_date": 1600273882, "post_id": 28059022, "comment_id": 113038505, "body": "You can have a look at the code I had used in a recent project on <a href=\"https://stackoverflow.com/a/63924363/5345736\">this answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "edited": false, "score": 0, "creation_date": 1421886697, "post_id": 28062315, "comment_id": 44537544, "body": "Thanks Soren! I still have a few doubts. 1) What function can convert my <code>String jsonBody</code> to your <code>List&lt;int&gt; content</code>? 2) My <code>server_secret_key</code> is something like <code>a26b48...</code>, not a <code>List&lt;int&gt;</code> like your <code>key</code> variable. 3) You are adding <code>content</code> to your <code>hmac</code>, but I am guessing that your intention was to add a <code>List&lt;int&gt;</code> representation of <code>stringToSign</code>, judging by the sample Java code. Look at link on the Edit section of the post for more info, ."}, {"owner": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "reply_to_user": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "edited": false, "score": 0, "creation_date": 1421999308, "post_id": 28062315, "comment_id": 44585037, "body": "Updated the code to do: 1) Encode the string body using UTF-8. 2) Decode the key from a hex-string into bytes. 3) Yes - good catch - fixed that to do UTF-8 encoding of <code>stringToSign</code>. When getting this to work having a set of &quot;known good&quot; input/output data makes it much easier to see when you got it right."}], "tags": [], "owner": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "is_accepted": false, "score": 5, "last_activity_date": 1421999035, "last_edit_date": 1421999035, "creation_date": 1421827620, "answer_id": 28062315, "question_id": 28059022, "link": "https://stackoverflow.com/questions/28059022/base64-hmac-sha1-and-md5-encryption-in-dart-and-vuforias-vws-api/28062315#28062315", "title": "Base64 HMAC-SHA1 and MD5 encryption in Dart and Vuforia&#39;s VWS API", "body": "<p>All the algorithms you need for this are in the dart <a href=\"https://pub.dartlang.org/packages/crypto\" rel=\"nofollow\">crypto package</a>.</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:convert';\nimport 'dart:io';\n\nimport 'package:crypto/crypto.dart' as crypto;\n\nmain() {\n  var contentStr = '{x:\"y\"}';\n  var content = UTF8.encode(contentStr);\n  var md5 = new crypto.MD5();\n  md5.add(content);\n\n  var verb = 'GET';\n  var hash = crypto.CryptoUtils.bytesToHex(md5.close());\n  var type = 'text/plain';\n  var date = HttpDate.format(new DateTime.now());\n  var path = '/request/path';\n  var stringToSign = '$verb\\n$hash\\n$type\\n$date\\n$path';\n  print(stringToSign);\n  print('');\n\n  var keyStr = \"0102030405060708090a0b0c0d0e0f\";\n  var key = [];\n  for (int i = 0; i &lt; keyStr.length; i += 2) {\n    key.add(int.parse(keyStr.substring(i, i + 2), radix: 16));\n  }\n  var hmac = new crypto.HMAC(new crypto.SHA1(), key);\n  hmac.add(UTF8.encode(stringToSign));\n  print(crypto.CryptoUtils.bytesToHex(hmac.close()));\n}\n</code></pre>\n\n<p>Of cause you need to figure out the exact encoding of the different parts, e.g. the date. If just one bit is wrong in the input nothing works. </p>\n\n<p>If you have some examples of input and output it is much easier to get the details right. E.g. test the MD5 of the empty string</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>print(crypto.CryptoUtils.bytesToHex(new crypto.MD5().close()));\n</code></pre>\n"}], "owner": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2138, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421999035, "creation_date": 1421810047, "last_edit_date": 1421886843, "question_id": 28059022, "link": "https://stackoverflow.com/questions/28059022/base64-hmac-sha1-and-md5-encryption-in-dart-and-vuforias-vws-api", "title": "Base64 HMAC-SHA1 and MD5 encryption in Dart and Vuforia&#39;s VWS API", "body": "<p>To communicate with Vuforia through its VWS API I have to do some tricky stuff: first create this string</p>\n\n<pre><code>StringToSign = \n  HTTP-Verb + \"\\n\" +\n  Content-MD5 + \"\\n\" +\n  Content-Type + \"\\n\" +\n  Date + \"\\n\" +\n  Request-Path;\n</code></pre>\n\n<p>where <code>Content-MD5</code> is the encryption of the request's body...</p>\n\n<blockquote>\n  <p>(from the first boundary to the last one, including the boundary\n  itself). For request types without request body, include the MD5 hash\n  of an empty string which is \u201cd41d8cd98f00b204e9800998ecf8427e\u201d.</p>\n</blockquote>\n\n<p>then with this string you have to perform the equivalent to this Java code</p>\n\n<pre><code>Signature = Base64 (HMAC-SHA1 (server_secret_key, StringToSign));\n</code></pre>\n\n<p>where <code>server_secret_key</code> is a constant. Finally you have to plug that into an authorization header of this form</p>\n\n<p><code>Authorization: VWS {provision_access_key}:{Signature}</code></p>\n\n<p>I've got no experience with encryption, can anybody tell me how to do this in Dart?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>More info about this on <a href=\"https://developer.vuforia.com/resources/dev-guide/setting-api\" rel=\"nofollow\">Setting Up the API</a></p>\n"}, {"tags": ["unit-testing", "dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421820707, "post_id": 28060070, "comment_id": 44502606, "body": "Does dart guarantee that two <code>pub build</code> on the same code will produce the same js?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821007, "post_id": 28060070, "comment_id": 44502717, "body": "I&#39;m not sure what you mean. I don&#39;t think this is guaranteed. It will guarantee semantic equivalent code. It might be possible that the used minified names differ from one build to the other. For example if things are done in parallel and the timing differs between two runs but I don&#39;t know if this is really the case. I remember somewhere mentioned that they aim to use the same minified names even when the code was changed, but can&#39;t of course can&#39;t guarantee it."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821364, "post_id": 28060070, "comment_id": 44502844, "body": "If I understand it right, the common way to do polymer dart unit testing is this: you write a <code>&lt;my-elem&gt;</code>, then you write a <code>.html</code> and a <code>.dart</code> that uses <code>&lt;my-elem&gt;</code>, put these two files under <code>my_package&#47;test&#47;</code>, repeat this for all custom elements, then <code>pub build test</code> to see if they work correctly."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821379, "post_id": 28060070, "comment_id": 44502849, "body": "... What I am doing is, use <code>unittest</code>, but not really use it to do unit testing, but test on the whole application, more like an automation tool - click this button for me, input &#39;foo&#39; to that <code>&lt;input&gt;</code>, this kind of thing. The benefit of this is, I don&#39;t have to maintain many test <code>.html</code> (entry points for custom elements), and if I changed something, the entire app is tested, in case that I forget change Foo will affect Bar? Any disadvantages you can see in my method?"}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821433, "post_id": 28060070, "comment_id": 44502865, "body": "Reply for the second comment: semantic equivalent code is good enough."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821494, "post_id": 28060070, "comment_id": 44502880, "body": "I usually use an <code>&lt;app-element&gt;</code> which wraps my entire Polymer application. This way when you test <code>&lt;app-element&gt;</code> you test the entire application. You still should have no test code in <code>lib</code>, <code>bin</code>, or <code>web</code>."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821675, "post_id": 28060070, "comment_id": 44502939, "body": "I had this thought, dev the app without test, when it&#39;s feature complete, write a <code>test.dart</code>, <code>dart2js test.dart -o test.js</code>, open <code>test.js</code>, copy its contents, launch the js version of the app, open &quot;Dev Tools&gt;Console&quot;, paste <code>test.js</code>&#39;s contents into it."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421821857, "post_id": 28060070, "comment_id": 44502996, "body": "Why would you use <code>dart2js</code> instead of <code>pub build</code>? If you create your test with an HTML entry point you can just run <code>pub build test</code> and run the test like any web application or use <code>pub serve</code> and run it with Dartium, Chrome, Firefox, IE, Opera, ... without explicitely compiling."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421822026, "post_id": 28060070, "comment_id": 44503055, "body": "&quot;You still should have no test code in lib, bin, or web&quot;?  Even if I use a transformer to remove the test code so that other transformers would see the same code as if there are no test codes? (I guess other transformers doesn&#39;t care about my transformer)"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421822136, "post_id": 28060070, "comment_id": 44503100, "body": "I can&#39;t see the advantage in comparsion to test code in <code>test</code> directory. Mixing production code with test code is usually not a good pattern."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421822887, "post_id": 28060070, "comment_id": 44503383, "body": "why <code>dart2js</code>: If you use a different entry point, <code>test.html</code>, to test <code>&lt;app-elem&gt;</code>, even if it passes all tests, the real production code, build from another entry point <code>index.html</code>, is still untested, (I am being a little paranoid here). To overcome this problem, we don&#39;t write test code as part of the package, we write it in js, and it more like an automation tool than a unit test, when the js is pasted into dev tools, it starts too run, which will click this, click that, this kind of thing. But I don&#39;t like js, so I write it in dart, compile it to js, hence <code>dart2js</code>, not <code>pub</code>."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421823534, "post_id": 28060070, "comment_id": 44503687, "body": "YMMV but in my opinion I would try to improve efficiency for developers writing tests instead of thinking about and coping with such mostly theoretical issues. I would expect that in an app there are areas where you get more return for your effort. Another issue I see is that it&#39;s probably very hard to automate (CI) this way, which I consider very important."}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421823966, "post_id": 28060070, "comment_id": 44503874, "body": "CI is hard, but not impossible, it will need a real browser and some way to talk to the browser, like WebDriver. (Thanks for your time, you answered almost all my dart questions :)"}, {"owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421824259, "post_id": 28060070, "comment_id": 44504000, "body": "BTW, is there a documentation of the format of the output of dart2js, what I am trying to know is, if I copy the output of dart2js to a dart app&#39;s console, will it cause conflict, since both of them use <code>main()</code>."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "edited": false, "score": 0, "creation_date": 1421824504, "post_id": 28060070, "comment_id": 44504112, "body": "I have no knowledge about this. Maybe building to JS without minification makes it easier to investigate it yourself. Otherwise I think you should create a new question because I doubt anyone will read all the comments above and find this quesiton ;-)"}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1424515060, "last_edit_date": 1424515060, "creation_date": 1421817163, "answer_id": 28060070, "question_id": 28057620, "link": "https://stackoverflow.com/questions/28057620/dart-pub-build-consistency-between-dart-version-and-compiled-js-version/28060070#28060070", "title": "Dart pub build: consistency between dart version and compiled js version", "body": "<p>A: Yes you should worry. \nWorking with that Dart code on the client side is mostly for faster development. In the end you have to ensure the built application runs correctly. \nUsually they work the same but there is no guarantee at all. There are a lot subtle and not so subtle differences (timing, browser differences, ...)</p>\n\n<p>B: doesn't apply because of A I guess.</p>\n\n<p>When you put your unit test code in <code>your_package/test</code> you don't need to worry about test code in production. This code is only built to JS if you explicitly do (<code>pub build test</code>), not by default (<code>pub build</code>) .\nYour production code in <code>your_package/lib</code>, <code>your_package/web</code>, <code>your_package/bin</code> should <strong>not</strong> contain any  test code.\nIf it does you're probably doing something wrong.</p>\n\n<p>You should build your tests to JavaScript and test your app with every browser in every version you target.</p>\n"}], "owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 28060070, "answer_count": 1, "score": 2, "last_activity_date": 1424515060, "creation_date": 1421799896, "last_edit_date": 1421801632, "question_id": 28057620, "link": "https://stackoverflow.com/questions/28057620/dart-pub-build-consistency-between-dart-version-and-compiled-js-version", "title": "Dart pub build: consistency between dart version and compiled js version", "body": "<p>I have a Polymer Dart app, in its development, it goes through these two stages:</p>\n\n<p>Stage 1: It works (feature complete and builds OK), but there is no automatic test. (So to guarantee it behaves like what it suppose to behave, I have to manually click some button, type some text in some input fields, to see it behaves correctly.)</p>\n\n<p>Stage 2: I added some test code to the app, use the unittest package to test the app works correctly. The test is against the uncompiled dart code, runs in Dartium, before <code>pub build</code>. Then I added a transformer, <code>lib/transformer.dart</code>, so that, when <code>pub build</code>, my transformer will remove all test-related code in the app, so Polymer, dart2js and other transformers will see exactly the same code they see in Stage 1, except in stage 1, there is no <code>lib/transformer.dart</code>.</p>\n\n<p>My questions are:</p>\n\n<p>A. (for stage 1) Should I worry about the consistency between dart version and compiled js version? i.e., can I safely assume that, if my code works correctly in dart version, it will work correctly in js version?</p>\n\n<p>B. Suppose that my transformer does exactly what it suppose to do, which is, remove all newly added, test related codes, (except the transformer itself, of course), suppose also that, the js version of my app already works correctly in stage 1, will the js version of stage 2 also works correctly?</p>\n\n<p>Note: Why do I run the tests in dart version instead of js version? Because I don't know how to it without introducing test codes into js version, i.e., I don't want the js version to contains test code.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["dart", "dart-io"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 1, "creation_date": 1421763637, "post_id": 28047080, "comment_id": 44477395, "body": "Works for me with Debian."}, {"owner": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "edited": false, "score": 0, "creation_date": 1421775917, "post_id": 28047080, "comment_id": 44485738, "body": "I don&#39;t see any issues with the code. Works for me on both Ubuntu and Mac OS. Please double check your /usr/bin/python. If I change /usr/bin/python to something which cannot be found I get the error you see."}, {"owner": {"reputation": 319, "user_id": 5632436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0CHKHP-j15A/AAAAAAAAAAI/AAAAAAAABpg/Wk0-2lGHe3I/photo.jpg?sz=128", "display_name": "G&#252;rkan Sevinc", "link": "https://stackoverflow.com/users/5632436/g%c3%bcrkan-sevinc"}, "edited": false, "score": 0, "creation_date": 1565691152, "post_id": 28047080, "comment_id": 101422951, "body": "try &#39;which python&#39; to see valid python path you have."}], "owner": {"reputation": 23, "user_id": 3309092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b2db6ac94afd773c048d1e4e0ce086?s=128&d=identicon&r=PG&f=1", "display_name": "user3309092", "link": "https://stackoverflow.com/users/3309092/user3309092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421763617, "creation_date": 1421762087, "last_edit_date": 1495542035, "question_id": 28047080, "link": "https://stackoverflow.com/questions/28047080/unable-to-execute-ubuntu-bash-command-with-process-run", "title": "Unable to execute Ubuntu bash command with Process.run", "body": "<p>I have a simple command I want to execute and process the result back in Dart, but I am failing to do this on my Ubuntu server. </p>\n\n<p>On my Windows desktop, I can execute this without problems, but I am not able to create the correct command in Ubuntu.</p>\n\n<p>This is what I am trying (I got this from <a href=\"https://stackoverflow.com/questions/25567795/why-cant-darts-process-start-execute-an-ubuntu-command-when-the-command-work\">Why can&#39;t Dart&#39;s &quot;Process.start&quot; execute an Ubuntu command when the command works in Ubuntu terminal?</a>):</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>Process.run('bash', ['-c', '/usr/bin/python -V']).then((ProcessResult results) {     \n      print(results.stdout);\n      print(results.stderr);      \n    });\n</code></pre>\n\n<p>When I execute this, I get the following error:   </p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>bash: /usr/bin/python: No such file or directory\n</code></pre>\n\n<p>Obviously, python is installed, available at /usr/bin/python and is working fine.\nThe strange thing is, executing this works fine:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Process.run('bash', ['-c', 'git version']).then((ProcessResult results) {     \n      print(results.stdout);\n      print(results.stderr);      \n    });\n</code></pre>\n\n<p>I can't see any difference in executing the python command versus the git command...</p>\n\n<p>Can anyone see something wrong?\nThanks in advance!</p>\n"}, {"tags": ["unit-testing", "web-applications", "dart", "dart-polymer"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1421748641, "last_edit_date": 1495540257, "creation_date": 1421748641, "answer_id": 28042665, "question_id": 28042009, "link": "https://stackoverflow.com/questions/28042009/polymer-dart-unittest-run-test-when-httprequest-request-is-complete/28042665#28042665", "title": "Polymer dart unittest: run test() when HttpRequest.request() is complete", "body": "<p>Because I don't know how <code>&lt;my-app&gt;</code>s code looks like I can't tell if it is possible without modification. </p>\n\n<p>The easiest way IMHO is to fire an event in <code>&lt;my-app&gt;</code> when loading JSON is finished and listen for this event in your unit test (see <a href=\"https://stackoverflow.com/questions/18971511\">How do I fire a custom event from Polymer Dart?</a>) and then run the checks (<code>expect(...)</code>) in the event handler.</p>\n"}], "owner": {"reputation": 2389, "user_id": 2345370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7f2ad519f77a20c173a0b5174a900c2d?s=128&d=identicon&r=PG", "display_name": "Not an ID", "link": "https://stackoverflow.com/users/2345370/not-an-id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 28042665, "answer_count": 1, "score": 2, "last_activity_date": 1421749576, "creation_date": 1421746872, "last_edit_date": 1421749576, "question_id": 28042009, "link": "https://stackoverflow.com/questions/28042009/polymer-dart-unittest-run-test-when-httprequest-request-is-complete", "title": "Polymer dart unittest: run test() when HttpRequest.request() is complete", "body": "<p>I have a single page web app that is written in Polymer Dart, now it's time to write some tests for it, (not a fan of test). Since Selenium IDE/WebDriver doesn't support shadow DOM, I write it with dart's unittest package, like this:</p>\n\n\n\n<pre><code>&lt;!-- index.html (the single page app) --&gt;\n&lt;title&gt;My App&lt;/title&gt;\n&lt;body&gt;\n  &lt;my-app&gt;&lt;/my-app&gt;\n  &lt;script type=\"application/dart\" src=\"index_test.dart\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n</code></pre>\n\n<pre class=\"lang-dart prettyprint-override\"><code>// index_test.dart\nimport 'package:unittest/unittest.dart';\nimport 'dart:html';\nimport 'package:polymer/polymer.dart';\n\nvoid main() {\n  initPolymer().run(allTests);\n}\n\nvoid allTests() {\n  test('First page should be \"First Page\"', () {\n    expect(window.location.pathname, equals(\"/somepath\"));\n    expect(document.title, equals(\"First Page\"));\n  });\n\n  test('Load Page 2', () {\n    document\n    .querySelector('my-app').shadowRoot\n    .querySelector('paper-button')\n    .click(); // load next page (without refresh)\n    expect(document.title, equals(\"Second Page\"));\n  });\n}\n</code></pre>\n\n<p>The problem with this method is, when <code>index.html</code> get loaded, it's title is \"My App\", then, <code>&lt;my-app&gt;</code> starts to work, it loads some JSON from server, changes the title and url in the location bar based on the JSON, say it changes title to \"First Page\", because when the JSON will load complete is not controlled by dart, (it's controlled by internet speed), so sometimes the test will success, (JSON loaded really quick), sometimes the test fails, (internet speed is low).</p>\n\n<p>My question is, is there a way to tell unittest to run the test at the \"right\" time, other than use some timer to wait? Better, can it be done with out touching <code>&lt;my-app&gt;</code>'s codes, i.e., separate test codes from application logic?</p>\n"}, {"tags": ["dart", "dart-io"], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1421733607, "creation_date": 1421733607, "answer_id": 28038694, "question_id": 28035515, "link": "https://stackoverflow.com/questions/28035515/how-do-you-set-a-dart-io-process-to-use-an-existing-stream-for-its-stdin/28038694#28038694", "title": "How do you set a Dart IO Process to use an existing Stream for its stdin?", "body": "<p>This might work</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>process.stdin.addStream(UTF8.encoder.bind(input.stream));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 3558173, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/941d705b95e67cfd2cc58c627cc90060?s=128&d=identicon&r=PG", "display_name": "Crunchex", "link": "https://stackoverflow.com/users/3558173/crunchex"}, "edited": false, "score": 0, "creation_date": 1421780050, "post_id": 28039661, "comment_id": 44487899, "body": "The send/receive understanding on an encoding method makes sense. Thanks!"}], "tags": [], "owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "is_accepted": true, "score": 2, "last_activity_date": 1421738243, "creation_date": 1421738243, "answer_id": 28039661, "question_id": 28035515, "link": "https://stackoverflow.com/questions/28035515/how-do-you-set-a-dart-io-process-to-use-an-existing-stream-for-its-stdin/28039661#28039661", "title": "How do you set a Dart IO Process to use an existing Stream for its stdin?", "body": "<p>\nThe <code>stdin</code> object is an <code>IOSink</code>, so it has a <code>write</code> method for strings. That will default to UTF-8 encoding the string. \nSo, instead of </p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>process.stdin.addStream(input.stream)\n</code></pre>\n\n<p>you can do</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>IOSink stdin = process.stdin;\ninput.stream.listen(stdin.write, onDone: stdin.close);\n</code></pre>\n\n<p>You may want some error handling, possibly flushing stdin between writes, so maybe:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>input.stream.listen(\n    (String data) {\n      stdin.write(data);\n      stdin.flush();\n    }, \n    onError: myErrorHandler,\n    onDone: stdin.close);\n</code></pre>\n\n<p>Alternatively you can do the UTF-8 encoding manually, to get the stream of list of integers that <code>addStream</code> expects:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>process.stdin.addStream(input.stream.transform(UTF8.encoder))\n</code></pre>\n\n<p>The reason why <code>stdin</code> expects a <code>List&lt;int&gt;</code> is that process communication is, at its core, just bytes. Sending text requires the sender and the receiver to pre-agree on an encoding, so they can interpret the bytes the same way.</p>\n"}], "owner": {"reputation": 187, "user_id": 3558173, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/941d705b95e67cfd2cc58c627cc90060?s=128&d=identicon&r=PG", "display_name": "Crunchex", "link": "https://stackoverflow.com/users/3558173/crunchex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 28039661, "answer_count": 2, "score": 1, "last_activity_date": 1421738243, "creation_date": 1421711171, "last_edit_date": 1421731322, "question_id": 28035515, "link": "https://stackoverflow.com/questions/28035515/how-do-you-set-a-dart-io-process-to-use-an-existing-stream-for-its-stdin", "title": "How do you set a Dart IO Process to use an existing Stream for its stdin?", "body": "<p>I'm creating a Process using Process.start and am a bit stuck with the stdin getter. Ideally, I've got a StreamController set up elsewhere, whose stream of Strings I'd like to pass into stdin. But there aren't too many sophisticated examples for interacting with Process.stdin, so I'm not sure how to do anything more than a writeln to stdin.</p>\n\n<p>So I've got something like this, that I can add String messages to:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>  StreamController&lt;String&gt; processInput = new StreamController&lt;String&gt;.broadcast();\n</code></pre>\n\n<p>And I want to do something like this:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>  Process.start(executable, args, workingDirectory: dir.path, runInShell: true).then((Process process) {\nprocess.stdout\n  .transform(UTF8.decoder)\n  .listen((data) {\n    s.add('[[CONSOLE_OUTPUT]]' + data);\n  });\nprocess.stdin.addStream(input.stream);\n});\n</code></pre>\n\n<p>I realize that <code>addStream()</code> wants <code>Stream&lt;List&lt;int&gt;&gt;</code>, though I'm not sure why that's the case.</p>\n"}, {"tags": ["templates", "constructor", "dart", "dart-polymer"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421861077, "post_id": 28031704, "comment_id": 44525762, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/27345396/instantiating-polymer-element-via-dart-code\">Instantiating polymer element via dart code</a>"}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1421861276, "creation_date": 1421861276, "answer_id": 28073302, "question_id": 28031704, "link": "https://stackoverflow.com/questions/28031704/dart-polymer-does-not-have-default-constructor/28073302#28073302", "title": "Dart polymer &#39;does not have default constructor&#39;", "body": "<p>If you want to create a new instance of a Polymer element you need to do it like <code>new Element.tag('t-person');</code>.<br>\nIf you add this to the default constructor you get a more convenient way.</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>@CustomTag('t-person')\nclass tPerson extends PolymerElement {\n\n  tPerson.created() : super.created();\n\n  factory tPerson tPerson() {\n    return new Element.tag('t-person');\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 28073302, "answer_count": 1, "score": 0, "last_activity_date": 1421861276, "creation_date": 1421693961, "last_edit_date": 1421860892, "question_id": 28031704, "link": "https://stackoverflow.com/questions/28031704/dart-polymer-does-not-have-default-constructor", "title": "Dart polymer &#39;does not have default constructor&#39;", "body": "<p>I have several templates (Polymer and Dart) working fine.  But I cannot understand the Dart editor complaining in the case where I have a (my) template within another of (my) templates.\nI have a template for \"staff\" - it extends PolymerElement.<br>\nI have a template for \"person\" - it extends PolymerElement.<br>\nI cannot dynamically create a \"person\" in \"staff\", with the complaint:  person 'does not have default constructor'.<br>\nHere is my code for staff:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:polymer/polymer.dart';\nimport 't_person.dart';\n@CustomTag('t-staff')\nclass tstaff extends PolymerElement {\n   tstaff.created() : super.created() {}\nvoid addPersonButton(){\n   tPerson tpe = new tPerson(); //ERROR HERE 'tPerson does not have default constructor'\n    ....\n</code></pre>\n\n<p>Here is my code for tPerson (no errors):</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:polymer/polymer.dart';\n@CustomTag('t-person')\nclass tPerson extends PolymerElement {\n  tPerson.created() : super.created() {   }\n }\n</code></pre>\n\n<p>Am I not allowed to use templates in this way? Is there a limit on the depth of children templates?</p>\n"}, {"tags": ["performance", "dart", "data-conversion"], "comments": [{"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "edited": false, "score": 1, "creation_date": 1421691667, "post_id": 28026648, "comment_id": 44446915, "body": "is conversion to big endian essential for your purposes? we haven&#39;t optimized it. passing <code>Endianness.HOST_ENDIAN</code> would improve performance by a factor of 3. I am currently looking at the code to see where another factor of 3 is hiding, will get back to you once I know more."}, {"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "reply_to_user": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "edited": false, "score": 1, "creation_date": 1421698892, "post_id": 28026648, "comment_id": 44450507, "body": "In the ported software big endian is a given pre-condition to stay compatible with Java generated data sets. For new software it might not be that important. But why does swapping 2 or 4 bytes make such a huge performance difference? That can be done without any additional check, or?"}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "edited": false, "score": 2, "creation_date": 1421700761, "post_id": 28026648, "comment_id": 44451457, "body": "I see, fair enough. It has a hit because we did not optimize the conversion (nobody before seemed to use it or did not notify us about the slowness): to convert a value BE -&gt; LE we would go jump through way to many hoops. This is not hard to optimize though - I have started on it and should get preliminary numbers today [<a href=\"https://code.google.com/p/dart/issues/detail?id=22107\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/detail?id=22107</a> ]."}, {"owner": {"reputation": 7891, "user_id": 1737201, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9d553e4eece2656148b5d0e2a613e53e?s=128&d=identicon&r=PG", "display_name": "mezoni", "link": "https://stackoverflow.com/users/1737201/mezoni"}, "reply_to_user": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "edited": false, "score": 0, "creation_date": 1421702224, "post_id": 28026648, "comment_id": 44452152, "body": "@VyacheslavEgorov Why need two <code>slow</code> native calls (ByteData_ToEndianIntXX and TypedData_SetIntXX)? You can swap bytes in a single call. Or you can simple swap them in Dart. And why need so many checks if native code called only from trusted Dart code?"}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "reply_to_user": {"reputation": 7891, "user_id": 1737201, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9d553e4eece2656148b5d0e2a613e53e?s=128&d=identicon&r=PG", "display_name": "mezoni", "link": "https://stackoverflow.com/users/1737201/mezoni"}, "edited": false, "score": 0, "creation_date": 1421702672, "post_id": 28026648, "comment_id": 44452340, "body": "@mezoni there is only one slow call <code>toEndianXYZ</code>. The other one is inlined by the optimizer. Checks are there because &quot;better safe than sorry&quot;, Dart has reflection so it&#39;s better to have checks on all native entries to prevent accidental attack through the reflection. Optimizer is there to inline this stuff and elide checks. <code>_toEndianXYZ</code> is there because a) it&#39;s unoptimized impl, b) there&#39;s no non-native way in Dart to swap bytes."}, {"owner": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "edited": false, "score": 0, "creation_date": 1421740966, "post_id": 28026648, "comment_id": 44464328, "body": "Another observation (on Intel) is that explicitly passing LITTLE_ENDIAN instead of HOST_ENDIAN improves performance by another factor of 2."}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "reply_to_user": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "edited": false, "score": 1, "creation_date": 1421749885, "post_id": 28026648, "comment_id": 44469072, "body": "@sgjesse it&#39;s most probably due to our inlining heuristics - we use amount of constants arguments to decide if we want to inline (among other things).  I am going to whitelist these methods for inlining, so that should no longer matter."}], "answers": [{"comments": [{"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 1, "creation_date": 1421752202, "post_id": 28036176, "comment_id": 44470417, "body": "I can confirm the improvements in the benchmark program. Still have to adapt my server software package. I have done the same benchmarks for reading binary data and here the difference to the Java version is even worse: 12 times slower. I will try to create a reader similar to your writer or have already done something like that?"}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "reply_to_user": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 1, "creation_date": 1421755358, "post_id": 28036176, "comment_id": 44472299, "body": "@TinaHildebrandt I haven&#39;t done it - but it&#39;s similar (just invert <code>writeXYZ</code> methods). Ping me if you have any trouble. And sorry for the performance issues, we&#39;ll get them sorted out."}], "tags": [], "owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "is_accepted": true, "score": 13, "last_activity_date": 1421715932, "creation_date": 1421715932, "answer_id": 28036176, "question_id": 28026648, "link": "https://stackoverflow.com/questions/28026648/how-to-improve-dart-performance-of-data-conversion-to-from-binary/28036176#28036176", "title": "How to improve Dart performance of data conversion to/from binary?", "body": "<p>It is true that performance of byte data methods (<code>ByteData.setXYZ</code> and <code>ByteData.getXYZ</code>) is pretty bad on Dart VM compared to direct typed array access. We started working on the issue and initial results are promising[1].</p>\n\n<p>In the mean time you can work around this unfortunate performance regression by rolling your own conversion to big endian using typed arrays (full code at[2]):</p>\n\n \n\n<pre class=\"lang-dart prettyprint-override\"><code>/// Writer wraps a fixed size Uint8List and writes values into it using\n/// big-endian byte order.\nclass Writer {\n  /// Output buffer.\n  final Uint8List out;\n\n  /// Current position within [out].\n  var position = 0;\n\n  Writer._create(this.out);\n\n  factory Writer(size) {\n    final out = new Uint8List(size);\n    if (Endianness.HOST_ENDIAN == Endianness.LITTLE_ENDIAN) {\n      return new _WriterForLEHost._create(out);\n    } else {\n      return new _WriterForBEHost._create(out);\n    }\n  }\n\n  writeFloat64(double v);\n\n}\n\n/// Lists used for data convertion (alias each other).\nfinal Uint8List _convU8 = new Uint8List(8);\nfinal Float32List _convF32 = new Float32List.view(_convU8.buffer);\nfinal Float64List _convF64 = new Float64List.view(_convU8.buffer);\n\n/// Writer used on little-endian host.\nclass _WriterForLEHost extends Writer {\n  _WriterForLEHost._create(out) : super._create(out);\n\n  writeFloat64(double v) {\n    _convF64[0] = v;\n    out[position + 7] = _convU8[0];\n    out[position + 6] = _convU8[1];\n    out[position + 5] = _convU8[2];\n    out[position + 4] = _convU8[3];\n    out[position + 3] = _convU8[4];\n    out[position + 2] = _convU8[5];\n    out[position + 1] = _convU8[6];\n    out[position + 0] = _convU8[7];\n    position += 8;\n  }\n}\n</code></pre>\n\n<p>Benchmarking this manual conversion on your test yields around 6x improvement:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:typed_data';\nimport 'package:benchmark_harness/benchmark_harness.dart';\nimport 'writer.dart';\n\nclass ConversionBenchmarkManual extends BenchmarkBase {\n\n  Uint8List result;\n\n  ConversionBenchmarkManual() : super(\"Conversion (MANUAL)\");\n\n  // The benchmark code.\n  void run() {\n    const int BufSize = 262144; // 256kBytes\n    const int SetSize = 64;     // one \"typical\" set of data, gets repeated\n\n    final w = new Writer(BufSize);\n\n    double doubleContent = 0.0; // used to simulate double content\n    int intContent = 0;         // used to simulate int content\n    int offset = 0;\n    for (int j = 0; j &lt; (BufSize / SetSize); j++) {\n      // The following represents some \"typical\" conversion mix:\n      w.writeFloat64(doubleContent); doubleContent += 0.123;\n      for (int k = 0; k &lt; 8; k++) { // main use case\n        w.writeFloat32(doubleContent); doubleContent += 0.123;\n      }\n      w.writeInt32(intContent); intContent++;\n      w.writeInt32(intContent); intContent++;\n      w.writeInt16(intContent); intContent++;\n      w.writeInt16(intContent); intContent++;\n      w.writeInt8(intContent);  intContent++;\n      w.writeInt8(intContent);  intContent++;\n      w.writeString(\"AsciiStrng\");\n      assert((offset % SetSize) == 0); // ensure the example content fits [SetSize] bytes\n    }\n    result = w.out; // only this can be used for further processing\n  }\n}\n</code></pre>\n\n<p>[1] <a href=\"https://code.google.com/p/dart/issues/detail?id=22107\" rel=\"noreferrer\">https://code.google.com/p/dart/issues/detail?id=22107</a></p>\n\n<p>[2] <a href=\"https://gist.github.com/mraleph/4eb5ccbb38904075141e\" rel=\"noreferrer\">https://gist.github.com/mraleph/4eb5ccbb38904075141e</a>    </p>\n"}, {"comments": [{"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1421944544, "post_id": 28092729, "comment_id": 44564069, "body": "I forgot to mention: the Java version uses file locks. They do not exist for Dart (and are dearly missed). But they account for only about a 3% performance penalty."}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "edited": false, "score": 0, "creation_date": 1422054994, "post_id": 28092729, "comment_id": 44614795, "body": "Thanks for the update! It&#39;s pretty exciting! We will work to further close that 30% gap... BTW, I already landed ( <a href=\"https://code.google.com/p/dart/source/detail?r=43038\" rel=\"nofollow noreferrer\">code.google.com/p/dart/source/detail?r=43038</a> ) some changes to the <code>ByteData</code> methods that speed up your original benchmark by 6x-7x and I have more improvements in the pipeline - once we are done going over this code there should be no need in custom endianess conversion routines."}], "tags": [], "owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "is_accepted": false, "score": 4, "last_activity_date": 1422029554, "last_edit_date": 1422029554, "creation_date": 1421940997, "answer_id": 28092729, "question_id": 28026648, "link": "https://stackoverflow.com/questions/28026648/how-to-improve-dart-performance-of-data-conversion-to-from-binary/28092729#28092729", "title": "How to improve Dart performance of data conversion to/from binary?", "body": "<p>I want to add some details on how I have finally solved the performance problem and how the results look like.</p>\n\n<p>First I used the approach postet by Vyacheslav Egorov and developed from it my own data converter class which provides conversions in both directions. It is still not production code but it worked very well for my server software port and therefore I have appended it below. I intentionally kept the [buffer] a public variable. This might not make for a perfect encapsulation but allows for an easy direct write into and read from the buffer, e.g. via a [RandomAccessFile.readInto] and [RandomAccessFile.writeFrom]. All plain and efficient!</p>\n\n<p>It really turned out that these data conversions where the culprit for the slow initial performance of seven times slower than the Java version. With the change the performance gap narrowed considerably. The Dart version of the 6000 lines server application now trails the Java version by just about 30%. Better than I expected from a language with such a flexible typing concept. That will leave Dart in good position for my customers future technology decisions.</p>\n\n<p>In my eyes having one language for client and server applications could be one very good argument for Dart.</p>\n\n<p>And here comes the code for the data converter as used for this project:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>part of ylib;\n\n/// [DataConverter] wraps a fixed size [Uint8List] and converts values from and into it\n/// using big-endian byte order.\n///\nabstract class DataConverter {\n  /// Buffer.\n  final Uint8List buffer;\n\n  /// Current position within [buffer].\n  int _position = 0;\n\n  DataConverter._create(this.buffer);\n\n  /// Creates the converter with its associated [buffer].\n  ///\n  factory DataConverter(size) {\n    final out = new Uint8List(size);\n    if (Endianness.HOST_ENDIAN == Endianness.LITTLE_ENDIAN) {\n      return new _ConverterForLEHost._create(out);\n    } else {\n      return new _ConverterForBEHost._create(out);\n    }\n  }\n\n  int get length =&gt; buffer.length;\n\n  int get position =&gt; _position;\n\n  set position(int position) {\n    if ((position &lt; 0) || (position &gt; buffer.lengthInBytes)) throw new ArgumentError(position);\n    _position = position;\n  }\n\n  double getFloat64();\n\n  putFloat64(double v);\n\n  double getFloat32();\n\n  putFloat32(double v);\n\n  static const int _MaxSignedInt64plus1 = 9223372036854775808;\n  static const int _MaxSignedInt32plus1 = 2147483648;\n  static const int _MaxSignedInt16plus1 = 32768;\n  static const int _MaxSignedInt8plus1 = 128;\n\n  int getInt64() {\n    int v =\n      buffer[_position + 7] | (buffer[_position + 6] &lt;&lt; 8) | (buffer[_position + 5] &lt;&lt; 16) |\n      (buffer[_position + 4] &lt;&lt; 24) | (buffer[_position + 3] &lt;&lt; 32) |\n      (buffer[_position + 2] &lt;&lt; 40) | (buffer[_position + 1] &lt;&lt; 48) | (buffer[_position] &lt;&lt; 56);\n    _position += 8;\n    if (v &gt;= _MaxSignedInt64plus1) v -= 2 * _MaxSignedInt64plus1;\n    return v;\n  }\n\n  putInt64(int v) {\n    assert((v &lt; _MaxSignedInt64plus1) &amp;&amp; (v &gt;= -_MaxSignedInt64plus1));\n    buffer[_position + 7] = v;\n    buffer[_position + 6] = (v &gt;&gt; 8);\n    buffer[_position + 5] = (v &gt;&gt; 16);\n    buffer[_position + 4] = (v &gt;&gt; 24);\n    buffer[_position + 3] = (v &gt;&gt; 32);\n    buffer[_position + 2] = (v &gt;&gt; 40);\n    buffer[_position + 1] = (v &gt;&gt; 48);\n    buffer[_position + 0] = (v &gt;&gt; 56);\n    _position += 8;\n  }\n\n  int getInt32() {\n    int v = buffer[_position + 3] | (buffer[_position + 2] &lt;&lt; 8) | (buffer[_position + 1] &lt;&lt; 16) |\n            (buffer[_position] &lt;&lt; 24);\n    _position += 4;\n    if (v &gt;= _MaxSignedInt32plus1) v -= 2 * _MaxSignedInt32plus1;\n    return v;\n  }\n\n  putInt32(int v) {\n    assert((v &lt; _MaxSignedInt32plus1) &amp;&amp; (v &gt;= -_MaxSignedInt32plus1));\n    buffer[_position + 3] = v;\n    buffer[_position + 2] = (v &gt;&gt; 8);\n    buffer[_position + 1] = (v &gt;&gt; 16);\n    buffer[_position + 0] = (v &gt;&gt; 24);\n    _position += 4;\n  }\n\n//  The following code which uses the 'double' conversion methods works but is about 50% slower!\n//\n//  final Int32List _convI32 = new Int32List.view(_convU8.buffer);\n//\n//  int getInt32() {\n//    _convU8[0] = out[_position + 0]; _convU8[1] = out[_position + 1];\n//    _convU8[2] = out[_position + 2]; _convU8[3] = out[_position + 3];\n//    _position += 4;\n//    return _convI32[0];\n//  }\n//\n//  putInt32(int v) {\n//    _convI32[0] = v;\n//    out[_position + 0] = _convU8[0]; out[_position + 1] = _convU8[1];\n//    out[_position + 2] = _convU8[2]; out[_position + 3] = _convU8[3];\n//    _position += 4;\n//  }\n\n  int getInt16() {\n    int v = buffer[_position + 1] | (buffer[_position] &lt;&lt; 8);\n    _position += 2;\n    if (v &gt;= _MaxSignedInt16plus1) v -= 2 * _MaxSignedInt16plus1;\n    return v;\n  }\n\n  putInt16(int v) {\n    assert((v &lt; _MaxSignedInt16plus1) &amp;&amp; (v &gt;= -_MaxSignedInt16plus1));\n    buffer[_position + 1] = v;\n    buffer[_position + 0] = (v &gt;&gt; 8);\n    _position += 2;\n  }\n\n  int getInt8() {\n    int v = buffer[_position++];\n    if (v &gt;= _MaxSignedInt8plus1) v -= 2 * _MaxSignedInt8plus1;\n    return v;\n  }\n\n  putInt8(int v) {\n    assert((v &lt; _MaxSignedInt8plus1) &amp;&amp; (v &gt;= -_MaxSignedInt8plus1));\n    buffer[_position] = v;\n    _position++;\n  }\n\n  String getString(int length) {\n    String s = new String.fromCharCodes(buffer, _position, _position + length);\n    _position += length;\n    return s;\n  }\n\n  putString(String str) {\n    buffer.setAll(_position, str.codeUnits);\n    _position += str.codeUnits.length;\n  }\n}\n\n/// Lists used for data convertion (alias each other).\nfinal Uint8List _convU8 = new Uint8List(8);\nfinal Float32List _convF32 = new Float32List.view(_convU8.buffer);\nfinal Float64List _convF64 = new Float64List.view(_convU8.buffer);\n\n/// Writer used on little-endian host.\nclass _ConverterForLEHost extends DataConverter {\n  _ConverterForLEHost._create(out) : super._create(out);\n\n  double getFloat64() {\n    _convU8[0] = buffer[_position + 7]; _convU8[1] = buffer[_position + 6];\n    _convU8[2] = buffer[_position + 5]; _convU8[3] = buffer[_position + 4];\n    _convU8[4] = buffer[_position + 3]; _convU8[5] = buffer[_position + 2];\n    _convU8[6] = buffer[_position + 1]; _convU8[7] = buffer[_position + 0];\n    _position += 8;\n    return _convF64[0];\n  }\n\n  putFloat64(double v) {\n    _convF64[0] = v;\n    buffer[_position + 7] = _convU8[0]; buffer[_position + 6] = _convU8[1];\n    buffer[_position + 5] = _convU8[2]; buffer[_position + 4] = _convU8[3];\n    buffer[_position + 3] = _convU8[4]; buffer[_position + 2] = _convU8[5];\n    buffer[_position + 1] = _convU8[6]; buffer[_position + 0] = _convU8[7];\n    _position += 8;\n  }\n\n  double getFloat32() {\n    _convU8[0] = buffer[_position + 3]; _convU8[1] = buffer[_position + 2];\n    _convU8[2] = buffer[_position + 1]; _convU8[3] = buffer[_position + 0];\n    _position += 4;\n    return _convF32[0];\n  }\n\n  putFloat32(double v) {\n    _convF32[0] = v;\n    assert(_convF32[0].isFinite || !v.isFinite); // overflow check\n    buffer[_position + 3] = _convU8[0]; buffer[_position + 2] = _convU8[1];\n    buffer[_position + 1] = _convU8[2]; buffer[_position + 0] = _convU8[3];\n    _position += 4;\n  }\n}\n\n\n/// Writer used on the big-endian host.\nclass _ConverterForBEHost extends DataConverter {\n  _ConverterForBEHost._create(out) : super._create(out);\n\n  double getFloat64() {\n    _convU8[0] = buffer[_position + 0]; _convU8[1] = buffer[_position + 1];\n    _convU8[2] = buffer[_position + 2]; _convU8[3] = buffer[_position + 3];\n    _convU8[4] = buffer[_position + 4]; _convU8[5] = buffer[_position + 5];\n    _convU8[6] = buffer[_position + 6]; _convU8[7] = buffer[_position + 7];\n    _position += 8;\n    return _convF64[0];\n  }\n\n  putFloat64(double v) {\n    _convF64[0] = v;\n    buffer[_position + 0] = _convU8[0]; buffer[_position + 1] = _convU8[1];\n    buffer[_position + 2] = _convU8[2]; buffer[_position + 3] = _convU8[3];\n    buffer[_position + 4] = _convU8[4]; buffer[_position + 5] = _convU8[5];\n    buffer[_position + 6] = _convU8[6]; buffer[_position + 7] = _convU8[7];\n    _position += 8;\n  }\n\n  double getFloat32() {\n    _convU8[0] = buffer[_position + 0]; _convU8[1] = buffer[_position + 1];\n    _convU8[2] = buffer[_position + 2]; _convU8[3] = buffer[_position + 3];\n    _position += 4;\n    return _convF32[0];\n  }\n\n  putFloat32(double v) {\n    _convF32[0] = v;\n    assert(_convF32[0].isFinite || !v.isFinite); // overflow check\n    buffer[_position + 0] = _convU8[0]; buffer[_position + 1] = _convU8[1];\n    buffer[_position + 2] = _convU8[2]; buffer[_position + 3] = _convU8[3];\n    _position += 4;\n  }\n}\n</code></pre>\n\n<p>And a very small and basic test unit:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:ylib/ylib.dart';\nimport 'package:unittest/unittest.dart';\n\n// -------- Test program for [DataConverter]: --------\n\nvoid main() {\n  DataConverter dc = new DataConverter(100);\n  test('Float64', () {\n    double d1 = 1.246e370, d2 = -0.0000745687436849437;\n    dc.position = 0;\n    dc..putFloat64(d1)..putFloat64(d2);\n    dc.position = 0; // reset it\n    expect(dc.getFloat64(), d1);\n    expect(dc.getFloat64(), d2);\n  });\n  test('Float32', () {\n    double d1 = -0.43478e32, d2 = -0.0;\n    dc.position = 0;\n    dc..putFloat32(d1)..putFloat32(d2);\n    dc.position = 0; // reset it\n    expect(dc.getFloat32(), closeTo(d1, 1.7e24));\n    expect(dc.getFloat32(), d2);\n  });\n  test('Int64', () {\n    int i1 = 9223372036854775807, i2 = -22337203685477580;\n    dc.position = 3;\n    dc..putInt64(i1)..putInt64(i2);\n    dc.position = 3; // reset it\n    expect(dc.getInt64(), i1);\n    expect(dc.getInt64(), i2);\n  });\n  test('Int32_16_8', () {\n    int i1 = 192233720, i2 = -7233, i3 = 32, i4 = -17;\n    dc.position = 0;\n    dc..putInt32(i1)..putInt16(i2)..putInt8(i3)..putInt32(i4);\n    dc.position = 0; // reset it\n    expect(dc.getInt32(), i1);\n    expect(dc.getInt16(), i2);\n    expect(dc.getInt8(), i3);\n    expect(dc.getInt32(), i4);\n  });\n  test('String', () {\n    String s1 = r\"922337203!\u00a7$%&amp;()=?68547/\\75807\", s2 = \"-22337203685477580Anton\";\n    int i1 = -33;\n    dc.position = 33;\n    dc..putString(s1)..putInt8(i1)..putString(s2);\n    dc.position = 33; // reset it\n    expect(dc.getString(s1.length), s1);\n    expect(dc.getInt8(), i1);\n    expect(dc.getString(s2.length), s2);\n  });\n}\n</code></pre>\n"}], "owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 7, "accepted_answer_id": 28036176, "answer_count": 2, "score": 18, "last_activity_date": 1422029554, "creation_date": 1421676977, "last_edit_date": 1421699576, "question_id": 28026648, "link": "https://stackoverflow.com/questions/28026648/how-to-improve-dart-performance-of-data-conversion-to-from-binary", "title": "How to improve Dart performance of data conversion to/from binary?", "body": "<p>Doing some consulting work for a bigger German companies Future Technologies Group I have ported about 6000 lines of Java server side software to Dart. This should help to answer the question whether Dart can efficiently be used on the server. (Which itself would give a green light for Dart due to the searched for advantage of having one language for client and server side programming.)</p>\n\n<p>Learning about Dart (which I really enjoyed working with) gave me an expectation of a performance penalty of 30-50% relative to Java but in any case no worse than 100% (twice as slow) which is the cutoff for the decision process mentioned above.</p>\n\n<p>The port went smoothly. I learned a lot. Unit tests were fine. But the performance turned out to be extremly bad ... SEVEN times slower overall compared to the Java program.</p>\n\n<p>Profiling the code revealed two main culprits: data conversion and file I/O. Maybe I'm doing something wrong? Before I go back to my client and they cancel their Dart research I would like to search some advice on how to improve things. Let's start with data conversion, the conversion of native Dart data types into various binary formats which can be used for effective transfer and storage of data.</p>\n\n<p>Usually these conversions are simple and very fast because nothing has really to be converted from the used internal format but mostly stored into a buffer. I created a benchmark program which somehow reflects the typical use of these conversions in my program:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:typed_data';\nimport 'package:benchmark_harness/benchmark_harness.dart';\n\n// Create a new benchmark by extending BenchmarkBase\nclass ConversionBenchmark extends BenchmarkBase {\n\n  Uint8List result;\n\n  ConversionBenchmark() : super(\"Conversion\");\n\n  // The benchmark code.\n  void run() {\n    const int BufSize = 262144; // 256kBytes\n    const int SetSize = 64;     // one \"typical\" set of data, gets repeated\n    ByteData buffer = new ByteData(BufSize);\n    double doubleContent = 0.0; // used to simulate double content\n    int intContent = 0;         // used to simulate int content\n    int offset = 0;\n    for (int j = 0; j &lt; buffer.lengthInBytes / SetSize; j++) {\n      // The following represents some \"typical\" conversion mix:\n      buffer.setFloat64(offset, doubleContent); offset += 8; doubleContent += 0.123;\n      for (int k = 0; k &lt; 8; k++) { // main use case\n        buffer.setFloat32(offset, doubleContent); offset += 4; doubleContent += 0.123;\n      }\n      buffer.setInt32(offset, intContent); offset += 4; intContent++;\n      buffer.setInt32(offset, intContent); offset += 4; intContent++;\n      buffer.setInt16(offset, intContent); offset += 2; intContent++;\n      buffer.setInt16(offset, intContent); offset += 2; intContent++;\n      buffer.setInt8(offset, intContent); offset += 1; intContent++;\n      buffer.setInt8(offset, intContent); offset += 1; intContent++;\n      buffer.buffer.asUint8List(offset).setAll(0, \"AsciiStrng\".codeUnits); offset += 10;\n        // [ByteData] knows no other mechanism to transfer ASCII strings in\n      assert((offset % SetSize) == 0); // ensure the example content fits [SetSize] bytes\n    }\n    result = buffer.buffer.asUint8List(); // only this can be used for further processing\n  }\n}\n\nmain() {\n  new ConversionBenchmark().report();\n}\n</code></pre>\n\n<p>It is based on the benchmark harness from <a href=\"https://github.com/dart-lang/benchmark_harness\">https://github.com/dart-lang/benchmark_harness</a>. For comparisions I used the following Java program based on a port of the Dart benchmark harness from <a href=\"https://github.com/bono8106/benchmark_harness_java\">https://github.com/bono8106/benchmark_harness_java</a>:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>package ylib.tools;\n\nimport java.nio.ByteBuffer;\n\npublic class ConversionBenchmark extends BenchmarkBase {\n\n  public ByteBuffer result;\n\n  public ConversionBenchmark() { super(\"Conversion\"); }\n\n  // The benchmark code.\n  @Override protected void run() {\n    final int BufSize = 262144; // 256kBytes\n    final int SetSize = 64;     // one \"typical\" set of data, gets repeated\n    ByteBuffer buffer = ByteBuffer.allocate(BufSize);\n    double doubleContent = 0.0; // used to simulate double content\n    int intContent = 0;         // used to simulate int content\n    for (int j = 0; j &lt; (buffer.capacity() / SetSize); j++) {\n      // The following represents some \"typical\" conversion mix:\n      buffer.putDouble(doubleContent); doubleContent += 0.123;\n      for (int k = 0; k &lt; 8; k++) { // main use case\n        buffer.putFloat((float)doubleContent); doubleContent += 0.123;\n      }\n      buffer.putInt(intContent); intContent++;\n      buffer.putInt(intContent); intContent++;\n      buffer.putShort((short)intContent); intContent++;\n      buffer.putShort((short)intContent); intContent++;\n      buffer.put((byte)intContent); intContent++;\n      buffer.put((byte)intContent); intContent++;\n      buffer.put(\"AsciiStrng\".getBytes());\n      //assert((buffer.position() % SetSize) == 0); // ensure the example content fits [SetSize] bytes\n    }\n    buffer.flip(); // needed for further processing\n    result = buffer; // to avoid the compiler optimizing away everything\n  }\n\n  public static void main(String[] args) {\n    new ConversionBenchmark().report();\n  }\n}\n</code></pre>\n\n<p>The Java code runs almost exactly 10 times faster than the Dart code on my Intel Windows 7 machine. Both run in production mode on their respective VMs.</p>\n\n<p>Is there an obvious error in the code? Or are there different Dart classes available to do the job? Any explanation as to why Dart is so much slower with these simple conversions? Or do I have completely wrong expectations with respect to Dart VM performance?</p>\n"}, {"tags": ["dart", "angular-dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421674087, "post_id": 28025188, "comment_id": 44436697, "body": "Why are you unhappy with doing the work in <code>onShadowRoot</code>?"}, {"owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421674144, "post_id": 28025188, "comment_id": 44436741, "body": "Yes <code>onShadowRoot</code> is called after, although initially thought this function was only to inject the shadowRoot. I thought I was potentially using the wrong method."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421674246, "post_id": 28025188, "comment_id": 44436798, "body": "If your code depends on <code>shadowRoot</code> then I think it&#39;s just fine. If you want to have a more expressive name for the task, you can of course move the code to another method and call this method from <code>onShadowRoot</code>."}], "answers": [{"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1421677874, "creation_date": 1421677874, "answer_id": 28026945, "question_id": 28025188, "link": "https://stackoverflow.com/questions/28025188/using-the-shadowroot-of-a-component-onattach/28026945#28026945", "title": "Using the ShadowRoot of a component onAttach", "body": "<p>I think <code>onShadowRoot</code> is a good place for code that depends on the shadowRoot being initialized.</p>\n"}], "owner": {"reputation": 16340, "user_id": 505810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/76df8d243d91e68ef15e5fde3474bf90?s=128&d=identicon&r=PG", "display_name": "Pacane", "link": "https://stackoverflow.com/users/505810/pacane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 28026945, "answer_count": 1, "score": 1, "last_activity_date": 1421677874, "creation_date": 1421672300, "last_edit_date": 1421674029, "question_id": 28025188, "link": "https://stackoverflow.com/questions/28025188/using-the-shadowroot-of-a-component-onattach", "title": "Using the ShadowRoot of a component onAttach", "body": "<p>So I have this angular dart component:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>@Component(...)\nclass TableCard implements AttachAware, ShadowRootAware {\n\n  void onShadowRoot(ShadowRoot shadowRoot) {\n    _shadowRoot = shadowRoot;\n  }\n\n  void attach() {\n    someDiv = _shadowRoot.querySelector(\"#card\");\n  }\n}\n</code></pre>\n\n<p>everytime I load the page and the <code>attach</code> function gets called, it says:</p>\n\n<pre><code>The null object does not have a method 'querySelector'.\n\nNoSuchMethodError: method not found: 'querySelector'\nReceiver: null\nArguments: [\"#card\"]\n</code></pre>\n\n<p>Is there a way to have the shadowRoot initialized for the <code>onAttach</code> call?</p>\n\n<p>edit: Or maybe there is another interface that provides a function that is called later than <code>attach</code> ?</p>\n\n<p>edit2: As a workaround I just do whatever I need to do with the shadowRoot in the <code>onShadowRoot</code> function.</p>\n"}, {"tags": ["dart", "dart-polymer"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421647377, "post_id": 28016432, "comment_id": 44424125, "body": "What Polymer version are you using? This shouldn&#39;t depend on the SDK version, only on Polymer."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421734222, "post_id": 28016432, "comment_id": 44461669, "body": "I suggest creating a bug report, maybe a regression."}], "owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421734239, "creation_date": 1421627488, "last_edit_date": 1421734239, "question_id": 28016432, "link": "https://stackoverflow.com/questions/28016432/darteditor-and-sdk-version-1-9-0-dev-3-0-do-not-display-error-hints-in-html-lin", "title": "DartEditor and SDK version 1.9.0-dev.3.0 do not display error hints in .html links", "body": "<p>I am using DartEditor and SDK version is 1.9.0-dev.3.0 as Dart eclipse plugin.</p>\n\n<p>The current versions do not display warning or error hints with incorrect links in the .html files.</p>\n\n<p>Consider the following</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>&lt;link rel='import' href='../../../../packages/polymer/polymer.html' &gt;\n&lt;link rel='import' href='packages/html_components/input/select_item.html'&gt;\n</code></pre>\n\n<p>The first link is correct, the second is not. However, there is no hints or warnings displayed on the page. This only occurred after I updated to the current version from the previous DEV version of Dart.</p>\n\n<p>However, when I run the dart application is Dartium, the error is displayed to the console. It seems as if something is broken in Dart SDK 1.9.0-dev3.0.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["dart", "dart-polymer", "dart-pub"], "comments": [{"owner": {"reputation": 2085, "user_id": 2418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661bf0e57b634fc69c154d2e1901520c?s=128&d=identicon&r=PG", "display_name": "sgjesse", "link": "https://stackoverflow.com/users/2418642/sgjesse"}, "edited": false, "score": 0, "creation_date": 1421776142, "post_id": 28016391, "comment_id": 44485852, "body": "The pub version should be the same as the version of the SDK. Please check how your path is configured. What version does &#39;&gt; dart --version&#39; report?"}], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "edited": false, "score": 0, "creation_date": 1421668955, "post_id": 28018464, "comment_id": 44433837, "body": "Maybe the Dart team only updated the Pub version when something changes and/or stable relrases."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 0, "last_activity_date": 1421645429, "creation_date": 1421645429, "answer_id": 28018464, "question_id": 28016391, "link": "https://stackoverflow.com/questions/28016391/how-to-update-pub-version/28018464#28018464", "title": "how to update pub version", "body": "<p>You can't. Pub is bound to the SDK. </p>\n"}], "owner": {"reputation": 4633, "user_id": 2258442, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7dc1f8dac4d92b4abb781ec2b11d8be6?s=128&d=identicon&r=PG", "display_name": "st_clair_clarke", "link": "https://stackoverflow.com/users/2258442/st-clair-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 28018464, "answer_count": 1, "score": 0, "last_activity_date": 1424514429, "creation_date": 1421627023, "last_edit_date": 1424514429, "question_id": 28016391, "link": "https://stackoverflow.com/questions/28016391/how-to-update-pub-version", "title": "how to update pub version", "body": "<p>When I run the command >pub version the console shows Pub 1.9.0-dev.0.0</p>\n\n<p>My DartEditor and SDK version is 1.9.0-dev.3.0</p>\n\n<p>How can I update pub to have similar version.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["dart", "polymer", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "edited": false, "score": 0, "creation_date": 1421617853, "post_id": 28015127, "comment_id": 44417648, "body": "i create observable list only once, its not the problem, note the repeat in the bottom shows the changes as it should but not the one in the table rows, tried calling what you suggested, same result"}], "tags": [], "owner": {"reputation": 4812, "user_id": 2515341, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/INO5m.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2515341/robert"}, "is_accepted": true, "score": 2, "last_activity_date": 1421649882, "last_edit_date": 1421649882, "creation_date": 1421617282, "answer_id": 28015127, "question_id": 28014451, "link": "https://stackoverflow.com/questions/28014451/changes-do-not-get-reflected-when-getting-property-by-name/28015127#28015127", "title": "Changes do not get reflected when getting property by name", "body": "<p><em>You could try two things here in my opinion:</em></p>\n\n<ol>\n<li><em>Use <code>Observable.dirtyCheck()</code></em></li>\n<li><em>Call <code>deliverChanges()</code> on the polymer element and not on the Model</em></li>\n</ol>\n\n<p><strong>// EDIT</strong></p>\n\n<p>I think your problem is that you create a new ObservableList() every time. Try to create the ObservableList only once e.g. in your created() contstructor and then change the elements of the list instead of the object.</p>\n\n<p><strong>// EDIT 2 - Possible Solution</strong></p>\n\n<p>Hi Again. Now that I understand your problem correctly I have a solution for you. I had the same problem as well. I solved it by writing a wrapper around the model:</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;link rel=\"import\" href=\"../../packages/polymer/polymer.html\"&gt;\n\n&lt;polymer-element name=\"model-wrapper\" attributes=\"model property\"&gt;\n  &lt;template&gt;\n    {{value}}\n  &lt;/template&gt;\n  &lt;script type=\"application/dart\" src=\"model_wrapper.dart\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p><strong>DART</strong></p>\n\n<pre><code>import 'package:polymer/polymer.dart';\nimport 'dart:mirrors';\n\n@CustomTag('model-wrapper')\nclass ModelWrapper extends PolymerElement {\n  @published var model;\n\n  @published String property;\n\n  @ComputedProperty('model[property]')\n  get value =&gt; model[property] == null ? \"\" : model[property].toString();\n\n  @observable\n  set value(v) =&gt; model[property] = v; \n\n  ModelWrapper.created() : super.created(){\n\n  }\n\n  void ready() {\n    model.changes.listen((List&lt;ChangeRecord&gt; changes) {\n      changes.forEach((record) {\n        if(record is PropertyChangeRecord) {\n          if(MirrorSystem.getName(record.name) == property) {\n            notifyPropertyChange(#value, record.oldValue, record.newValue);\n          }\n        }\n      });\n    });\n  }\n}\n</code></pre>\n\n<p>My original wrapper can be found here:</p>\n\n<p><a href=\"https://github.com/roberthartung/webui/blob/master/lib/util/webui-property-wrapper.dart\" rel=\"nofollow\">https://github.com/roberthartung/webui/blob/master/lib/util/webui-property-wrapper.dart</a>\n<a href=\"https://github.com/roberthartung/webui/blob/master/lib/util/webui-property-wrapper.html\" rel=\"nofollow\">https://github.com/roberthartung/webui/blob/master/lib/util/webui-property-wrapper.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "edited": false, "score": 0, "creation_date": 1421621573, "post_id": 28015419, "comment_id": 44418687, "body": "i actually tried getters and setters but can you please clarify what do you mean by new Symbol(&#39;[]&#39;),something like new Symbol(&#39;[fieldName]&#39;) in the setter but not Symbol(&#39;fieldName&#39;)? i could also overload []= and notify in it"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "edited": false, "score": 0, "creation_date": 1421647771, "post_id": 28015419, "comment_id": 44424222, "body": "Getters and setters by itself don&#39;t change anything. My suggestion is to call <code>NotifyPropertyChange()</code> when the values change and for this you need a setter instead of a field to be able to add custom code. I have never tried to call <code>NotifyPropertyChange()</code> on an operator (<code>[]</code>) but it might work. <code>[]</code> would be the function name. Calling <code>NotifyPropertyChange()</code> in <code>[]=</code> only makes sense when you use the array accessor for setting the values <code>model[&#39;fname&#39;] = &#39;xxx&#39;</code> instead of <code>model.fname = &#39;xxx&#39;</code>. I&#39;m not sure if <code>NotifyPropertyChange()</code> works for methods too. Seems like I got a bit rusty."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "edited": false, "score": 0, "creation_date": 1421655208, "post_id": 28015419, "comment_id": 44426933, "body": "I tried it but it doesn&#39;t work this way. @Robert s solution should work though."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1421658585, "last_edit_date": 1421658585, "creation_date": 1421619254, "answer_id": 28015419, "question_id": 28014451, "link": "https://stackoverflow.com/questions/28014451/changes-do-not-get-reflected-when-getting-property-by-name/28015419#28015419", "title": "Changes do not get reflected when getting property by name", "body": "<p>The problem is how you access the data in the Model</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>{{row[column.name]}}\n</code></pre>\n\n<p>the <code>[]</code> operator access is not observable and <code>column.name</code> doesn't change so the expression is never re-evaluated. \nJust because the fields are <code>@observable</code> doesn't make the reference using the <code>[]</code> operator access <code>@observable</code> too.</p>\n\n<p>My attempt - introduce a <code>dummy</code> field:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>class Model extends Observable {\n  @observable String fname;\n  @observable String lname;\n  @observable int age;\n\n  @observable String get dummy =&gt; '$fname$lname$age';\n\n  getValue(String colName, String dummy) {\n    return this[colName];\n  }\n\n  Model(this.fname, this.lname, this.age) {\n    changes.listen((List&lt;ChangeRecord&gt; c) {\n      c.forEach((PropertyChangeRecord r) {\n        if(r.name != #dummy) {\n          notifyPropertyChange(#dummy, null, dummy);\n        }\n      });\n    });\n  }\n\n  operator [](String fieldName){\n    var im = reflect(this);\n    return im.getField(new Symbol(fieldName)).reflectee;\n  }\n}\n</code></pre>\n\n<p>and bind the field value like</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>{{row.getValue(column.name, row.dummy)}}\n</code></pre>\n\n<p>This way the Polymer binding expression contains a field that changes <code>row.dummy</code> and this makes Polymer to re-evaluate the expression.</p>\n"}], "owner": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 28015127, "answer_count": 2, "score": 2, "last_activity_date": 1421658585, "creation_date": 1421612658, "last_edit_date": 1421613334, "question_id": 28014451, "link": "https://stackoverflow.com/questions/28014451/changes-do-not-get-reflected-when-getting-property-by-name", "title": "Changes do not get reflected when getting property by name", "body": "<p>I have the following polymer element</p>\n\n<pre><code>import 'package:polymer/polymer.dart';\nimport 'dart:mirrors';\nimport 'dart:async';\nimport 'dart:math';\n\nclass Column extends Observable{\n  @observable String name;\n  @observable String displayName;\n  Column(this.name,this.displayName);\n}\n\nclass Model extends Observable{\n  @observable String fname;\n  @observable String lname;\n  @observable int age;\n\n  Model(this.fname,this.lname,this.age);\n\n  operator [](String fieldName){\n    var im = reflect(this);\n    return im.getField(new Symbol(fieldName)).reflectee;\n  }\n}\n\n\n@CustomTag('main-app')\nclass MainApp extends PolymerElement {\n  @observable ObservableList&lt;Object&gt; data;\n  @observable ObservableList&lt;Column&gt; columns;\n\n  MainApp.created() : super.created(){\n    columns = new ObservableList.from([new Column(\"fname\",\"First Name\"), new Column(\"lname\",\"Last name\"),new Column(\"age\",\"Age\")]);\n    emulateDataChanging();\n  }\n\n  emulateDataChanging(){\n    var r = new Random();\n    var names = [\"aaa\",\"bbb\",\"ccc\",\"ddd\",\"eee\"];\n    //add some models to data first\n    data = new ObservableList();\n    for(int i=0;i&lt;5;i++){\n      data.add(new Model(names[r.nextInt(4)],names[r.nextInt(4)],r.nextInt(99)));\n    }\n\n    //modify couple random props every second\n    new Timer.periodic(new Duration(seconds:1),(t){\n\n      Model m;\n      m=(data[r.nextInt(data.length-1)] as Model);\n      m.lname=names[r.nextInt(4)];\n      m.deliverChanges();\n      m=(data[r.nextInt(data.length-1)] as Model);\n      m.fname=names[r.nextInt(4)];\n      m.deliverChanges();\n      m=(data[r.nextInt(data.length-1)] as Model);\n      m.age =r.nextInt(4);\n      m.deliverChanges();\n      //add a random model\n      //data.add(new Model(names[r.nextInt(4)],names[r.nextInt(4)],r.nextInt(99)));\n    });\n  }\n}\n</code></pre>\n\n<p>and the html for the element</p>\n\n<pre><code>&lt;link rel=\"import\" href=\"../../packages/polymer/polymer.html\"&gt;\n\n&lt;polymer-element name=\"main-app\"&gt;\n  &lt;template&gt;\n    &lt;style&gt;\n      :host {\n        display: block;\n      }\n    &lt;/style&gt;\n\n\n    &lt;!--A table --&gt;\n    &lt;table id=\"table\" class=\"table table-hover table-mc-light-blue\"&gt;\n      &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th template repeat='{{column in columns}}'&gt;\n          {{column.displayName}}\n        &lt;/th&gt;\n      &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n      &lt;tr template repeat='{{row in data}}'&gt;\n        &lt;td template repeat='{{ column in columns}}' data-title=\"{{column.displayName}}\"&gt;\n          {{row[column.name]}}\n        &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n\n    &lt;!--A repeat by binding to the Model properties directly --&gt;\n      &lt;template repeat=\"{{row in data}}\"&gt;\n        &lt;p&gt;{{row.fname}} {{row.lname}} {{row.age}}&lt;/p&gt;\n      &lt;/template&gt;\n\n  &lt;/template&gt;\n  &lt;script type=\"application/dart\" src=\"main_app.dart\"&gt;&lt;/script&gt;\n&lt;/polymer-element&gt;\n</code></pre>\n\n<p>i added the whole code so one can copy and past and run in seconds, as you can see in the template i have a table and rows are added using a nested repeat and the property of model gets accessed by the name of the column ,and a single repeat where properties get accessed directly.</p>\n\n<p>however the problem when changing a model property, the changes do not get reflected to the table but they get reflected in the other repeat, i think if you run it you'll understand better.</p>\n"}, {"tags": ["dart", "jekyll", "angular-dart"], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 975904, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/df8a5a4b9eb8345cad7e60052507c20f?s=128&d=identicon&r=PG", "display_name": "CarrKnight", "link": "https://stackoverflow.com/users/975904/carrknight"}, "edited": false, "score": 0, "creation_date": 1421624446, "post_id": 28014857, "comment_id": 44419468, "body": "hey thanks, but let me explain better. My problem is not to link the .js file from my html one. As you say, solution 2 takes care of that. My problem is that once main.js is called, it looks for packages ( and .html angular templates) not where main.js is but where the original .html that called it is! That is what I am trying to fix"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "reply_to_user": {"reputation": 1838, "user_id": 975904, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/df8a5a4b9eb8345cad7e60052507c20f?s=128&d=identicon&r=PG", "display_name": "CarrKnight", "link": "https://stackoverflow.com/users/975904/carrknight"}, "edited": false, "score": 1, "creation_date": 1421658088, "post_id": 28014857, "comment_id": 44428110, "body": "Maybe a configuration variable in your main.js instruct you code to look for packages in a certain place. Look for it."}, {"owner": {"reputation": 1838, "user_id": 975904, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/df8a5a4b9eb8345cad7e60052507c20f?s=128&d=identicon&r=PG", "display_name": "CarrKnight", "link": "https://stackoverflow.com/users/975904/carrknight"}, "edited": false, "score": 0, "creation_date": 1421746468, "post_id": 28014857, "comment_id": 44467008, "body": "found the right angular directive! It was hidden deep in the angularjs documentation and not mentioned even once in angular dart but oh well"}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 1, "last_activity_date": 1421615550, "creation_date": 1421615550, "answer_id": 28014857, "question_id": 28011690, "link": "https://stackoverflow.com/questions/28011690/move-the-asset-directory-for-a-dart-project-for-a-jekyll-blog-post/28014857#28014857", "title": "Move the asset directory for a dart project for a Jekyll blog post", "body": "<h3>Solution 1</h3>\n\n<p>Try to add your page as a page at the root of your site, instead of using it a a post.</p>\n\n<p>The <code>blabla.html</code> will then be at <code>yourdomain.tld/blabla.html</code> an then refer to <code>assets/script.js</code> as <code>yourdomain.tld/assets/script.js</code>.</p>\n\n<h3>Solution 2</h3>\n\n<p>Use the <a href=\"http://jekyllrb.com/docs/github-pages/#project-page-url-structure\" rel=\"nofollow\"><code>baseurl</code> variable</a> in <code>_config.yml</code>.</p>\n\n<p>The point to your assets with <code>&lt;script src=\"{{ site.baseurl }}/assets/main.js\"&gt;&lt;/script&gt;</code>. This will target aseets relative to the root of your site.</p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 975904, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/df8a5a4b9eb8345cad7e60052507c20f?s=128&d=identicon&r=PG", "display_name": "CarrKnight", "link": "https://stackoverflow.com/users/975904/carrknight"}, "is_accepted": true, "score": 1, "last_activity_date": 1421746400, "creation_date": 1421746400, "answer_id": 28041848, "question_id": 28011690, "link": "https://stackoverflow.com/questions/28011690/move-the-asset-directory-for-a-dart-project-for-a-jekyll-blog-post/28041848#28041848", "title": "Move the asset directory for a dart project for a Jekyll blog post", "body": "<p>Found it!</p>\n\n<p>Angular can be redirected by using the following html code:</p>\n\n<pre><code>&lt;base href=\"{{ site.baseurl }}/assets/\"&gt;\n</code></pre>\n\n<p>It's documented in angularjs but not angular dart which made it so hard to find!</p>\n\n<p>I add that as an _include in the jekyll post and everything is peachy </p>\n"}], "owner": {"reputation": 1838, "user_id": 975904, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/df8a5a4b9eb8345cad7e60052507c20f?s=128&d=identicon&r=PG", "display_name": "CarrKnight", "link": "https://stackoverflow.com/users/975904/carrknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 28041848, "answer_count": 2, "score": 0, "last_activity_date": 1421746400, "creation_date": 1421596555, "last_edit_date": 1421603484, "question_id": 28011690, "link": "https://stackoverflow.com/questions/28011690/move-the-asset-directory-for-a-dart-project-for-a-jekyll-blog-post", "title": "Move the asset directory for a dart project for a Jekyll blog post", "body": "<p>I have a simple Angular-Dart web-page that works great offline with pub-serve. I want to add that page as a blog-post on Jekyll.</p>\n\n<p>The problem is that Dart wants the assets (the package folder) in the same directory as the HTML file that call it. Jekyll produces that HTML file in a separate directory so that's not possible.</p>\n\n<p>Basically I have:</p>\n\n<pre><code>_post/blabla.html &lt;----- the html file/blog entry which will be built in another directory still\nassets/main.js &lt;----- the js-transformed script\nassets/packages/.... &lt;----- all the libs\n</code></pre>\n\n<p>But whenever I open <code>blabla.html</code> the jsfied Dart doesn't try to find the <code>packages</code> folder in the assets folder but in the _post folder. How do I tell it to look in a different directory?</p>\n"}, {"tags": ["exception", "dart", "angular-dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421581009, "post_id": 28007545, "comment_id": 44406287, "body": "Maybe the transformer is not configured. Can you ease add your <code>pubspec.yaml</code> to the question."}, {"owner": {"reputation": 3158, "user_id": 56050, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/r0pBm.jpg?s=128&g=1", "display_name": "Isvara", "link": "https://stackoverflow.com/users/56050/isvara"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421652359, "post_id": 28007545, "comment_id": 44425819, "body": "@G&#252;nterZ&#246;chbauer Okay, I added that."}, {"owner": {"reputation": 3158, "user_id": 56050, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/r0pBm.jpg?s=128&g=1", "display_name": "Isvara", "link": "https://stackoverflow.com/users/56050/isvara"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421656897, "post_id": 28007545, "comment_id": 44427582, "body": "@G&#252;nterZ&#246;chbauer I should point out that this happens in Dartium, so this is before any transformer magic happens."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421656937, "post_id": 28007545, "comment_id": 44427597, "body": "As far as I know the Angular transformer is also executed when run in Dartium. This is know bad behavior and there is an open issue. This breaks debugging because the debugger can&#39;t assign breakpoints to code lines when the code was changed by a transformer."}], "owner": {"reputation": 3158, "user_id": 56050, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/r0pBm.jpg?s=128&g=1", "display_name": "Isvara", "link": "https://stackoverflow.com/users/56050/isvara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421652440, "creation_date": 1421560207, "last_edit_date": 1421652440, "question_id": 28007545, "link": "https://stackoverflow.com/questions/28007545/whats-causing-this-exception-from-angulardart", "title": "What&#39;s causing this exception from AngularDart?", "body": "<p>My Angular Dart (1.0/1.1) web project is throwing the following exception, but because it's thrown from within the framework and not from my own code, I don't know what's causing it.</p>\n\n<pre><code>The null object does not have a getter '_nextEvalWatch'.\n\nNoSuchMethodError: method not found: '_nextEvalWatch'\nReceiver: null\nArguments: []\n\nSTACKTRACE:\n#0      Object.noSuchMethod (dart:core-patch/object_patch.dart:45)\n#1      WatchGroup.newGroup (package:angular/change_detection/watch_group.dart:279:34)\n#2      Scope.createChild (package:angular/core/scope.dart:361:51)\n#3      Scope.createProtoChild (package:angular/core/scope.dart:376:23)\n#4      _updateContent (package:angular/directive/ng_include.dart:46:41)\n#5      _rootRunUnary (dart:async/zone.dart:902)\n#6      _ZoneDelegate.runUnary (dart:async/zone.dart:508)\n#7      _onRunUnary.&lt;anonymous closure&gt; (package:angular/core/zone.dart:122:63)\n#8      VmTurnZone._onRunBase (package:angular/core/zone.dart:104:16)\n#9      _onRunUnary (package:angular/core/zone.dart:122:17)\n#10     _CustomZone.runUnary (dart:async/zone.dart:804)\n#11     _Future._propagateToListeners.handleValueCallback (dart:async/future_impl.dart:484)\n#12     _Future._propagateToListeners (dart:async/future_impl.dart:567)\n#13     _Future._propagateToListeners (dart:async/future_impl.dart:448)\n#14     _Future._completeWithValue (dart:async/future_impl.dart:358)\n#15     _Future._asyncComplete.&lt;anonymous closure&gt; (dart:async/future_impl.dart:412)\n#16     _rootRun (dart:async/zone.dart:891)\n#17     _ZoneDelegate.run (dart:async/zone.dart:501)\n#18     _onScheduleMicrotask.&lt;anonymous closure&gt; (package:angular/core/zone.dart:127:45)\n#19     RootScope._runAsyncFns (package:angular/core/scope.dart:924:25)\n#20     RootScope.digest (package:angular/core/scope.dart:813:38)\n#21     Scope.apply (package:angular/core/scope.dart:316:24)\n#22     RootScope.RootScope.&lt;anonymous closure&gt; (package:angular/core/scope.dart:768:12)\n#23     _rootRun (dart:async/zone.dart:895)\n#24     _ZoneDelegate.run (dart:async/zone.dart:501)\n#25     VmTurnZone._finishTurn (package:angular/core/zone.dart:168:21)\n#26     VmTurnZone._onRunBase (package:angular/core/zone.dart:111:43)\n#27     _onRunUnary (package:angular/core/zone.dart:122:17)\n#28     _CustomZone.runUnary (dart:async/zone.dart:804)\n#29     _CustomZone.runUnaryGuarded (dart:async/zone.dart:712)\n#30     _CustomZone.bindUnaryCallback.&lt;anonymous closure&gt; (dart:async/zone.dart:738)\n</code></pre>\n\n<p>Here's my pubspec.yaml:</p>\n\n<pre class=\"lang-yml prettyprint-override\"><code>name: webatara\ndescription: Web-based Confabulous client\ndependencies:\n  barback: any\n  browser: any\n  angular: 1.1.0\n  web_components: any\n  msgpack:\n    git:\n      url: git://github.com/danellis/dart-msgpack.git\n      ref: master\ndev_dependencies:\n  template_cache_transformer: any\ntransformers:\n  - template_cache_transformer:\n      entry_point: webatara|templates/app.html\n  - angular:\n      html_files:\n        - lib/templates/app.html\n        - lib/templates/input.html\n        - lib/templates/roster.html\n        - lib/templates/space.html\n        - lib/templates/space_list.html\n        - lib/templates/alerts.html\n        - lib/templates/rostermenu.html\n  - $dart2js:\n      commandLineOptions: [--show-package-warnings]\n      environment:\n        MIRRORS: 'false'\n</code></pre>\n"}, {"tags": ["dart", "uri", "dart-polymer", "dart-isolates"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421484858, "post_id": 27996308, "comment_id": 44385298, "body": "Looks like a dup of <a href=\"http://stackoverflow.com/questions/17299512\">stackoverflow.com/questions/17299512</a>"}, {"owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421496640, "post_id": 27996308, "comment_id": 44387995, "body": "The question is more about accessing a file in an external package. From what I can tell, that question was about local imports only. There are easy enough work-arounds, I know - a minimal new file that simply imports the external package and has a main that simply redirects to the import - but for such a well designed language, I&#39;d be surprised if there wasn&#39;t a much more elegant way."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421496739, "post_id": 27996308, "comment_id": 44388018, "body": "Isolates are still work in progress, don&#39;t expect too much."}, {"owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421498126, "post_id": 27996308, "comment_id": 44388351, "body": "Sure. Thought there might be something really obvious I was missing. Thanks."}], "owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421495551, "creation_date": 1421470735, "last_edit_date": 1421495551, "question_id": 27996308, "link": "https://stackoverflow.com/questions/27996308/dart-uri-for-isolate-in-external-local-package", "title": "dart: uri for isolate in external local package", "body": "<p>I have a web app using polymer (not sure if the polymer aspect is relevant), and I'm trying to spawn an isolate from an external package. While I can import the package fine, using the same path in Uri.file results in an invalid uri. For example:</p>\n\n<p>\n    //packaged_app.dart\n    library packaged_app;</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>main(args, message){\n  //do something\n}\n</code></pre>\n\n<hr>\n\n<pre class=\"lang-dart prettyprint-override\"><code>//main_app.dart\nlibrary main_app.dart;\nimport 'package:polymer/polymer.dart';\nimport 'dart:isolate';\n//import 'package:packaged_app/packaged_app.dart'; (finds the correct file, but not needed)\n\nvoid main(){\n  initPolymer();\n  var uri = new Uri.file('package:packaged_app/packaged_app.dart');\n  var rp = new ReceivePort();\n  Isolate.spawnUri(uri, rp.sendPort);\n}\n</code></pre>\n\n<p>I've tried many variations on the uri, including:</p>\n\n<p>\n- new Uri.file(path), and\n- new Uri(path: path)</p>\n\n<p>with values of path including:</p>\n\n<p>\n - package:packaged_app/packaged_app.dart,\n - packages/packaged_app/packaged_app.dart,\n - ../relative/path/to/packaged_app/packaged_app.dart, and\n - /absolute/path/to/packaged_app/packaged_app.dart</p>\n\n<p>all to not avail.\nIf I copy packaged_app.dart into the same directory as main_app.dart it runs fine, but that feels dirty.</p>\n"}, {"tags": ["dart", "angular-dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421851216, "post_id": 27988813, "comment_id": 44519049, "body": "The error message seems to be caused by this bug <a href=\"https://github.com/angular/angular.dart/issues/1189\" rel=\"nofollow noreferrer\">github.com/angular/angular.dart/issues/1189</a>"}, {"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421852069, "post_id": 27988813, "comment_id": 44519649, "body": "Yep, I saw that (noted in comment to Alexandre).  Funny thing is, it still fails when I use a class selector, so <code>.find-result</code> instead of <code>[find-result]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1421428071, "post_id": 27988926, "comment_id": 44369220, "body": "I tried this.  I edited my question with the reason this doesn&#39;t work."}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "reply_to_user": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1421428583, "post_id": 27988926, "comment_id": 44369488, "body": "What is the type of your <code>root</code> variable ? It should be <code>Element</code> and not <code>ShadowRoot</code>."}, {"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1421428647, "post_id": 27988926, "comment_id": 44369538, "body": "When injecting the element into the constructor?  Just <code>Element</code>."}, {"owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "reply_to_user": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1421428898, "post_id": 27988926, "comment_id": 44369678, "body": "Strange... Did you look at all the <code>find-result</code> in your code ? It seems related to that name."}, {"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1421429073, "post_id": 27988926, "comment_id": 44369785, "body": "The error is related to <a href=\"https://github.com/angular/angular.dart/issues/1189\" rel=\"nofollow noreferrer\">this</a> bug, but should be a non-issue because I don&#39;t want the shadowDom or any shims involved at all.  I tried changing the selector to my <code>find-result</code> component to a class <code>.find-result</code> and it still gives me the same error."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421846008, "post_id": 27988926, "comment_id": 44515740, "body": "I think in this case you should either use <code>document.querySelector()</code> or use the <code>_root</code> you inject in the 2nd code snippet inside <code>onShadowRoot</code> like <code>_root.querySelector()</code>. If there isn&#39;t a shadowRoot you can&#39;t use it as an anchor for querying."}, {"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421850970, "post_id": 27988926, "comment_id": 44518887, "body": "@G&#252;nterZ&#246;chbauer I did attempt to query the _root element injected via constructor in the onShadowRoot method (see the edit in my question).  It seems to me that when constructing the EmulatedShadowRoot (shadowDom: false and implement ShadowRootAware) the web platform shim attempts to do some stuff that is failing, even when not querying the shadowRoot object."}], "tags": [], "owner": {"reputation": 51074, "user_id": 634863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198449a7e196c4b0f2ed25f65279bf84?s=128&d=identicon&r=PG", "display_name": "Alexandre Ardhuin", "link": "https://stackoverflow.com/users/634863/alexandre-ardhuin"}, "is_accepted": false, "score": 1, "last_activity_date": 1421427375, "creation_date": 1421427375, "answer_id": 27988926, "question_id": 27988813, "link": "https://stackoverflow.com/questions/27988813/querying-child-elements-of-a-component-when-useshadowdom-false/27988926#27988926", "title": "Querying child elements of a component when useShadowDom = false", "body": "<p>You can also use <code>onShadowRoot</code> even with <code>useShadowDom: false</code>. However the parameter provided is not a <code>ShadowRoot</code> object.</p>\n"}, {"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421848034, "post_id": 28068397, "comment_id": 44516991, "body": "Or just move the code you pass to the <code>Future</code> to the <code>onShadowRoot()</code> method like I argued in the comment to Alexandres answer."}], "tags": [], "owner": {"reputation": 2766, "user_id": 617900, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56c19d0f5d2640d4ddf730e25acf4364?s=128&d=identicon&r=PG", "display_name": "Anton Moiseev", "link": "https://stackoverflow.com/users/617900/anton-moiseev"}, "is_accepted": false, "score": 2, "last_activity_date": 1421847173, "last_edit_date": 1421847173, "creation_date": 1421846718, "answer_id": 28068397, "question_id": 27988813, "link": "https://stackoverflow.com/questions/27988813/querying-child-elements-of-a-component-when-useshadowdom-false/28068397#28068397", "title": "Querying child elements of a component when useShadowDom = false", "body": "<p>We schedule child elements querying on the next event loop iteration. I'm not aware about particular internal implementation details, but it reliably works fine for us:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>MyComponent(Element root) {\n  // Schedule child elements querying on the next event loop iteration when\n  // AngularDart will render the child DOM.\n  new Future(() {\n    root.querySelector('.btn-go-back').onClick.listen((e) {\n      if (goBackHandler != null) {\n        goBackHandler();\n      }\n    });\n  });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1422320777, "post_id": 28160089, "comment_id": 44694414, "body": "This is exactly what I was looking for. I&#39;m handling the css encapsulation manually, and in fact, thought that was already necessary when useShadowDom was set to false."}, {"owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "edited": false, "score": 0, "creation_date": 1422329677, "post_id": 28160089, "comment_id": 44696635, "body": "Victor, the fix was slightly more involved than what was documented on the WIKI.  See the diff here: <a href=\"https://github.com/bgourlie/noBS/commit/84d4e9f129a83a9ea41748c9048907c0936d8e75#diff-96fa981a11712e552bdbb24051a99141\" rel=\"nofollow noreferrer\">github.com/bgourlie/noBS/commit/&hellip;</a>.  Basically, you need to create two implementations of NoShim.  This might only be necessary to satisfy the type checker, which wouldn&#39;t otherwise matter.  There is also the somewhat obscure import: <code>import &#39;package:angular&#47;core_dom&#47;module_internal.dart&#39;</code>"}, {"owner": {"reputation": 914, "user_id": 256743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1050910634/picture?type=large", "display_name": "Victor M.", "link": "https://stackoverflow.com/users/256743/victor-m"}, "edited": false, "score": 0, "creation_date": 1422504773, "post_id": 28160089, "comment_id": 44779015, "body": "I took the liberty of modifying the wiki with your code, w.brian"}], "tags": [], "owner": {"reputation": 1559, "user_id": 287662, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c6fd92ffda2f1165444bda7a03ed683?s=128&d=identicon&r=PG", "display_name": "Victor Savkin", "link": "https://stackoverflow.com/users/287662/victor-savkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1422312135, "creation_date": 1422312135, "answer_id": 28160089, "question_id": 27988813, "link": "https://stackoverflow.com/questions/27988813/querying-child-elements-of-a-component-when-useshadowdom-false/28160089#28160089", "title": "Querying child elements of a component when useShadowDom = false", "body": "<p>You can query the template of a emulated component as follows: </p>\n\n<pre><code>class Component implements ShadowRootAware {\n  Element el;\n\n  Component(this.el);\n\n  void onShadowRoot(_) {\n    this.el.querySelector('.blah');\n  }\n}\n</code></pre>\n\n<p>The error message:</p>\n\n<pre><code>[WebPlatformShim] WARNING: Failed to set up Shadow DOM shim for [find-result].\n</code></pre>\n\n<p>is caused by the css shim. This is one of the limitations of the shim (you can use only element selectors). </p>\n\n<p>You can disable the css shim. Then you will not see the error, but you won't have CSS encapsulation.</p>\n\n<p>See more here:</p>\n\n<p><a href=\"https://github.com/angular/angular.dart/wiki/CSS-Shim\" rel=\"noreferrer\">https://github.com/angular/angular.dart/wiki/CSS-Shim</a></p>\n"}], "owner": {"reputation": 13635, "user_id": 547365, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ddefbca930fdd39846b698bab7ac3146?s=128&d=identicon&r=PG", "display_name": "w.brian", "link": "https://stackoverflow.com/users/547365/w-brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 28160089, "answer_count": 3, "score": 1, "last_activity_date": 1422312135, "creation_date": 1421427014, "last_edit_date": 1421845784, "question_id": 27988813, "link": "https://stackoverflow.com/questions/27988813/querying-child-elements-of-a-component-when-useshadowdom-false", "title": "Querying child elements of a component when useShadowDom = false", "body": "<p>I'm using <code>useShadowDom: false</code> with my components in an attempt to support more browsers without having to use the troublesome web_components polyfill.  With the shadow DOM enabled, I would do something like this:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>void onShadowRoot(ShadowRoot root) {\n  root.querySelector('.btn-go-back').onClick.listen((e) {\n    if (goBackHandler != null) {\n      goBackHandler();\n    }\n  });\n}\n</code></pre>\n\n<p><code>onShadowRoot</code> would run <em>after</em> my component's template was loaded and therefore all the components elements exist in the DOM.  Without Shadow DOM enabled, I inject the component's root element in the constructor, and do something like this:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>MyComponent(this._root){\n  _root.querySelector('.btn-go-back').onClick.listen((e) {\n    if (goBackHandler != null) {\n      goBackHandler();\n    }\n  });\n}\n</code></pre>\n\n<p>This doesn't work because the component's template hasn't been loaded into the DOM yet, so the root element doesn't have any children to query yet.</p>\n\n<p>I've tried implementing AttachAware, and querying the root element in the <code>attach()</code> method, and the template isn't loaded at that point either.  </p>\n\n<p>So, if I'm not using the shadow DOM, how can I know when the template has been loaded into the DOM so I can query elements within my component?</p>\n\n<p><strong>Edit</strong> </p>\n\n<p>Attempting to use <code>ShadowRootAware</code> and <code>onShadowRoot</code> with <code>useShadowRoot: false</code> will result in the following error if you try to query against the provided <code>ShadowRoot</code> object:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>Unsupported operation: Not supported\n\nSTACKTRACE:\n#0      EmulatedShadowRoot._notSupported     (package:angular/core_dom/emulated_shadow_root.dart:5:21) \n#1      EmulatedShadowRoot.querySelector (package:angular/core_dom/emulated_shadow_root.dart:32:63)\n</code></pre>\n\n<p>I also tried a combination of:</p>\n\n<ul>\n<li>Injecting the root element in the constructor and</li>\n<li>querying against the root element within <code>onShadowRoot</code> which worked, kinda, but now I'm seeing this in the console output:</li>\n</ul>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>[WebPlatformShim] WARNING: Failed to set up Shadow DOM shim for [find-result].\n\nInvalidCharacterError: The string contains invalid characters. '[find-result]' is not a valid attribute name.\n</code></pre>\n\n<p>So, for some reason, even with <code>useShadowDom</code> set to false on all my Components, it's still attempting to use the ShadowDom shim.  I'm assuming this is because it is because I've implemented <code>ShadowRootAware</code> which constructs an <code>EmulatedShadowRoot</code>.  So, I think I need a solution that avoids <code>onShadowRoot</code></p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421411865, "post_id": 27984110, "comment_id": 44359374, "body": "Is this question about dartdoc? Like <code>&#47;&#47;&#47; This method [ClassName.method] ...</code>"}, {"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421509642, "post_id": 27984110, "comment_id": 44391389, "body": "yes, the generated docs do not have links, it is treated like regular text"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421509859, "post_id": 27984110, "comment_id": 44391468, "body": "I guess you should create a bug report because navigation within DartEditor works. AFAIK dartdoc bugs are managed in a github/dart-lang/xxx repo (probably dartlang.org)"}, {"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1422128000, "post_id": 27984110, "comment_id": 44631675, "body": "I am not sure where to report it so I just entered it the first result in google: <a href=\"https://code.google.com/p/dart/issues/detail?id=22144\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/detail?id=22144</a> - if its not the right place I will submit it wherever it must be."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1422221658, "post_id": 27984110, "comment_id": 44655148, "body": "Sorry, the message didn&#39;t contain the link when I saw it the last time. Thanks for adding the link to the issue."}], "answers": [{"comments": [{"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "edited": false, "score": 1, "creation_date": 1421509855, "post_id": 27984433, "comment_id": 44391467, "body": "Did not work for me : I tried regenerating the docs several times and yet in the resulting html the [...] part is kept as it is (i.e it is not a hyperlink but regular text). In my case the two classes are in separate files but part of the same lib. Currently I use the [text](link) workaround, but this is error prone. I will try putting everything in the same file as per your example."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "edited": false, "score": 0, "creation_date": 1421509948, "post_id": 27984433, "comment_id": 44391503, "body": "Your question was not clear to me. The syntax seems fine because navigation works in DartEditor this way."}, {"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "edited": false, "score": 0, "creation_date": 1421510283, "post_id": 27984433, "comment_id": 44391622, "body": "Maybe it is indeed bug in docgen. Will test some more and submit a bug when I am sure how it works."}, {"owner": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "edited": false, "score": 0, "creation_date": 1421607616, "post_id": 27984433, "comment_id": 44414258, "body": "Could be a bug in docgen or in the viewer. It is probably worthwhile to look at what the JSON that&#39;s produced says. It might be that docgen doesn&#39;t properly resolve the reference, or it might be that it writes it out in a way that the viewer doesn&#39;t parse properly. Also you might try it on the dartdoc that"}, {"owner": {"reputation": 2111, "user_id": 794906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4572b9e492319217d840854fcd7c3b2?s=128&d=identicon&r=PG", "display_name": "Alan Knight", "link": "https://stackoverflow.com/users/794906/alan-knight"}, "edited": false, "score": 0, "creation_date": 1421607661, "post_id": 27984433, "comment_id": 44414278, "body": "Might be a docgen issue, or in the viewer. It is a good idea to look at the JSON that&#39;s produced, not just the display output. It might be that docgen has a problem with it, but it might also be that the viewer doesn&#39;t resolve the reference from the JSON."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1421412860, "creation_date": 1421412860, "answer_id": 27984433, "question_id": 27984110, "link": "https://stackoverflow.com/questions/27984110/dart-how-to-reference-methods-of-classes/27984433#27984433", "title": "Dart: how to reference methods of classes", "body": "\n\n<pre class=\"lang-dart prettyprint-override\"><code>/// [B.someMethod] ..\n/// [someMethod] ..\nclass A {\n  void someMethod() {\n\n  }\n}\n\n/// [A.someMethod]\n/// [someMethod]\nclass B {\n  void someMethod() {\n\n  }\n}\n\n/// [A.someMethod]\nvoid main() {\n  new A().someMethod();\n}\n</code></pre>\n\n<p>All references in the doc comments work for me in this example, but sometimes DartEditor shows them only as links after a delay or after some other edits.</p>\n"}, {"tags": [], "owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "is_accepted": false, "score": 0, "last_activity_date": 1423685748, "creation_date": 1423685748, "answer_id": 28463661, "question_id": 27984110, "link": "https://stackoverflow.com/questions/27984110/dart-how-to-reference-methods-of-classes/28463661#28463661", "title": "Dart: how to reference methods of classes", "body": "<p>Its a docgen issue/bug - can be monitored here: <a href=\"https://code.google.com/p/dart/issues/detail?id=22144\" rel=\"nofollow\">https://code.google.com/p/dart/issues/detail?id=22144</a></p>\n"}], "owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1423685748, "creation_date": 1421411739, "question_id": 27984110, "link": "https://stackoverflow.com/questions/27984110/dart-how-to-reference-methods-of-classes", "title": "Dart: how to reference methods of classes", "body": "<p>While writing library documentation I need to be able to reference (i.e. link to) methods from other classes (in the same library) but with the same method name (i.e. reference the delegating method from the docs of the one that is doing the work). </p>\n\n<p>I have tried ClassName.method (does not work) and directly using the method (references the same class method).</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["php", "symfony", "dart", "twig", "assetic"], "comments": [{"owner": {"reputation": 6152, "user_id": 4074148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sO3xN.jpg?s=128&g=1", "display_name": "Veve", "link": "https://stackoverflow.com/users/4074148/veve"}, "edited": false, "score": 0, "creation_date": 1421352317, "post_id": 27970680, "comment_id": 44336673, "body": "Did you take a look at <a href=\"http://twig.sensiolabs.org/doc/advanced.html#tags\" rel=\"nofollow noreferrer\">twig.sensiolabs.org/doc/advanced.html#tags</a> ?"}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423496458, "post_id": 27970680, "comment_id": 45160275, "body": "Why don&#39;t you just use the <code>{% javascripts %}</code> tag with a dart2js filter? This way, your Dart scripts will be compiled to JavaScript, avoiding compatibility issues with browsers."}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "reply_to_user": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423507304, "post_id": 27970680, "comment_id": 45166992, "body": "@Nic The dartbootloader doesn&#39;t work without the filename ending in <code>.dart</code>. I could modify the bootloader but everytime the bootloader gets updated I&#39;d have to remember to modify the bootloader before my code works. That&#39;s why I&#39;d like a proper solution."}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423522786, "post_id": 27970680, "comment_id": 45175332, "body": "I have no experience with Dart, but doesn&#39;t compiling it to plain old javascript remove the need for client-side compilation?"}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "reply_to_user": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423528206, "post_id": 27970680, "comment_id": 45177177, "body": "@Nic There&#39;s never any client side compilation, the dart code is compiled to javascript on the server. Anyway the way it works is that the dart bootloader <code>dart.js</code> checks for the uncompiled <code>main.dart</code>. If the browser doesn&#39;t support it, it loads <code>main.js</code>. Now, somewhere in assetic it&#39;s preventing my filter from triggering compiling the code when <code>type=&quot;application&#47;dart</code> is added inside the <code>&lt;script&gt;</code> attribute. So the bootloader cannot load <code>main.js</code> because assetic never compiled in the first place."}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423559068, "post_id": 27970680, "comment_id": 45186907, "body": "OK, thanks for the explanation. I just tested and with the regular <code>{% javascripts %}</code> tag I am able to use <code>type=&quot;application&#47;dart&quot;</code>. I did not test it with a custom <code>{% darts %}</code> tag. However, I now understand your problem a little bit better and I think I have a very simple solution for you. I&#39;ll post it in an answer to your question."}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423560576, "post_id": 27970680, "comment_id": 45187710, "body": "After posting the answer I see that you already mention the <code>output</code> argument in your question... However, in my case it seems to work perfectly! Files are being output as <code>dart&#47;file.dart</code>, not <code>dart&#47;file.dart.js</code>. Are you sure it doesn&#39;t work for you?"}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423646105, "post_id": 27970680, "comment_id": 45228767, "body": "Well, it is getting very hard to help you without knowing more about your custom filter. Is it really called <code>MyCustomFilter</code>? And does it really work correctly when the script type is not <code>application&#47;dart</code>? In my application, I use the <code>uglifyjs2</code> filter to minify my JavaScripts. It works fine with <code>&lt;script type=&quot;application&#47;dart&quot;&gt;</code>. I don&#39;t even think that a filter can be aware of the script type. By the way, does this problem occur in production or development environment or both? Can you perhaps edit the question and post the <b>exact</b>, unmodified version of your <code>{% javascripts %}</code> tag?"}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "reply_to_user": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423664343, "post_id": 27970680, "comment_id": 45239748, "body": "@Nic Thanks for helping me improve my question. It looks like you were right. It works with the <code>{% javascripts %}</code> tag alone and that custom <code>application&#47;dart</code> attribute. I could have sworn I had tried this before but maybe I tried it when something else was broken. Which is when I thought I perhaps needed a custom tag. Thank you. Maybe I should have started from scratch once I finished <code>MyCustomFilter</code> long ago. haha."}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423664731, "post_id": 27970680, "comment_id": 45240008, "body": "Well, I&#39;m glad it works now! Thanks for the bounty!"}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "reply_to_user": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "edited": false, "score": 0, "creation_date": 1423664890, "post_id": 27970680, "comment_id": 45240114, "body": "@Nic You earned it, thanks for taking the time to think about my dumb mistake. :)"}], "answers": [{"comments": [{"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1421762471, "post_id": 27972847, "comment_id": 44476605, "body": "I got closer but unfortunately I&#39;ve stumbled upon another roadblock. I updated my answer with more details."}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1422307442, "post_id": 27972847, "comment_id": 44689303, "body": "Would you mind taking one last look at my updated answer before the bounty is awarded? I&#39;d appreciate it."}, {"owner": {"reputation": 32782, "user_id": 731138, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wMuZm.png?s=128&g=1", "display_name": "Alain Tiemblo", "link": "https://stackoverflow.com/users/731138/alain-tiemblo"}, "reply_to_user": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1422313549, "post_id": 27972847, "comment_id": 44692120, "body": "HI, I&#39;ll check that tomorrow morning. Sorry, didn&#39;t had much time this week."}, {"owner": {"reputation": 32782, "user_id": 731138, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wMuZm.png?s=128&g=1", "display_name": "Alain Tiemblo", "link": "https://stackoverflow.com/users/731138/alain-tiemblo"}, "reply_to_user": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1422351353, "post_id": 27972847, "comment_id": 44704439, "body": "Well, your issue looks specific to dart, not twig, and I really don&#39;t know dart. Are the <code>asset_url</code>s valid in the rendered views?"}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1422367969, "post_id": 27972847, "comment_id": 44714105, "body": "Thing is that twig doesn&#39;t seem to trigger filters if it&#39;s not <code>application&#47;javascript</code>. so it&#39;s not specific to dart. I can&#39;t seem to find where I can change it to allow <code>application&#47;dart</code> to trigger assetic filters"}], "tags": [], "owner": {"reputation": 32782, "user_id": 731138, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wMuZm.png?s=128&g=1", "display_name": "Alain Tiemblo", "link": "https://stackoverflow.com/users/731138/alain-tiemblo"}, "is_accepted": false, "score": 4, "last_activity_date": 1421355447, "last_edit_date": 1495541831, "creation_date": 1421355447, "answer_id": 27972847, "question_id": 27970680, "link": "https://stackoverflow.com/questions/27970680/custom-symfony2-filter-not-triggering-with-custom-twig-tag/27972847#27972847", "title": "Custom Symfony2 filter not triggering with custom twig tag", "body": "<p>I suggest you to have a look to <code>vendor/symfony/assetic-bundle/</code> files as it contains the <code>{% javascripts %}</code> implementation.</p>\n\n<p>From that bundle's <code>Resources/config/templating_twig.yml</code>, they inject a service named <code>@templating.name_parser</code>, it looks like that's just what you are looking for.</p>\n\n<p>You can have a try in a controller to do:</p>\n\n<pre><code>var_dump(\n  $this\n    -&gt;get('templating.name_parser')\n    -&gt;parse('@AcmeBundle/Resources/dart/AcmeMain/web/main.dart')\n    -&gt;getPath()\n);\n</code></pre>\n\n<p>About the tag itself, you can heavily copy/paste from the assetic bundle. And get some explanations about custom tags over one of my previous answers, <a href=\"https://stackoverflow.com/a/26215387/731138\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423576811, "post_id": 28427904, "comment_id": 45197076, "body": "I thought I tried this and it ended up renaming it to <code>.dart.js</code>... I&#39;ll have try this again. I don&#39;t think I did the wildcard so I wonder if that makes all the difference."}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "reply_to_user": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423576976, "post_id": 28427904, "comment_id": 45197184, "body": "It shouldn&#39;t make a difference. I&#39;ve tried both <code>dart&#47;foobar.dart</code> and <code>dart&#47;*.dart</code>, they both result into files with the <code>.dart</code> extension."}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423577093, "post_id": 28427904, "comment_id": 45197252, "body": "Ok thanks. I&#39;ll try it in a while when I have free time here at work. By the way, what version of Symfony and Assetic is in your <code>composer.json</code> file?"}, {"owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "reply_to_user": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423577431, "post_id": 28427904, "comment_id": 45197471, "body": "I currently have installed Symfony 2.6.3, Assetic 1.2.1 and AsseticBundle 2.5.0. The <code>composer.json</code> requires Symfony and AsseticBundle, both with version constraint <code>~2.5</code>. The Assetic library is automatically installed as a dependency of AsseticBundle."}, {"owner": {"reputation": 32782, "user_id": 731138, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wMuZm.png?s=128&g=1", "display_name": "Alain Tiemblo", "link": "https://stackoverflow.com/users/731138/alain-tiemblo"}, "edited": false, "score": 0, "creation_date": 1423589809, "post_id": 28427904, "comment_id": 45206102, "body": "I confirm that this works well (checked on 2.5 to 2.7-dev) +1."}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423591365, "post_id": 28427904, "comment_id": 45206986, "body": "Ah yeah, I remember now this is expected. I will update the question because I forgot the the dart bootloader <code>dart.js</code> renames the extension <code>.dart</code> to <code>.js</code> which is expected. The real issue is that <code>filter=&quot;MyCustomFilter&quot;</code> flag for assetic doesn&#39;t trigger trigger the filter (this filter compiles dart into JS code) when <code>type=&quot;application&#47;dart&quot;</code> is present. So the <code>dart.js</code> bootloader can&#39;t load the compiled JS code because it never got compiled."}, {"owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "edited": false, "score": 0, "creation_date": 1423664670, "post_id": 28427904, "comment_id": 45239965, "body": "I didn&#39;t even need the <code>output</code> argument. I just needed to switch back to the <code>{% javascripts %}</code> tag. For crying out loud :(. If only I hadn&#39;t thought I had already tried this."}], "tags": [], "owner": {"reputation": 10477, "user_id": 1001110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9259b46599c94aeba6cb910a7d0e9f10?s=128&d=identicon&r=PG", "display_name": "Nic Wortel", "link": "https://stackoverflow.com/users/1001110/nic-wortel"}, "is_accepted": true, "score": 3, "last_activity_date": 1423664793, "last_edit_date": 1423664793, "creation_date": 1423559808, "answer_id": 28427904, "question_id": 27970680, "link": "https://stackoverflow.com/questions/27970680/custom-symfony2-filter-not-triggering-with-custom-twig-tag/28427904#28427904", "title": "Custom Symfony2 filter not triggering with custom twig tag", "body": "<p>I think there is a very simple solution for your problem, that removes the need for a new <code>{% darts %}</code> tag.</p>\n\n<p>In Assetic tags, you can specify an <code>output</code> argument, that allows you to override the default output path (which is <code>js/*.js</code> in case of the <code>{% javascripts %}</code> tag). By setting <code>output</code> to <code>dart/*.dart</code>, you not only change the directory where the files will be stored, but also the file extension.</p>\n\n<p>Example:</p>\n\n<pre><code>{% javascripts '@AcmeBundle/Resources/dart/AcmeMain/web/main.dart' filter=\"MyCustomFilter\" output='dart/*.dart' %}\n    &lt;script type=\"application/dart\" src=\"{{ asset_url }}\"&gt;&lt;/script&gt;\n{% endjavascripts %}\n</code></pre>\n\n<p>Will (in production environment) result in:</p>\n\n<pre><code>&lt;script type=\"application/dart\" src=\"/dart/0b13818.dart\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>This feature is described <a href=\"http://symfony.com/doc/current/cookbook/assetic/asset_management.html#controlling-the-url-used\" rel=\"nofollow\">here</a> in the Symfony documentation, although it does not mention the fact that you can change the extension.</p>\n\n<p>I just ran a quick test in my Symfony application and it seems to be working perfectly.</p>\n"}], "owner": {"reputation": 2562, "user_id": 174368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/384637bfcac484cf8a243ad31f7f6453?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/174368/tek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 2, "accepted_answer_id": 28427904, "answer_count": 2, "score": 7, "last_activity_date": 1423664793, "creation_date": 1421347389, "last_edit_date": 1592644375, "question_id": 27970680, "link": "https://stackoverflow.com/questions/27970680/custom-symfony2-filter-not-triggering-with-custom-twig-tag", "title": "Custom Symfony2 filter not triggering with custom twig tag", "body": "<p><strong>TL:DR;</strong> Adding <code>type=&quot;application/dart&quot;</code> makes Assetic ignore the filter flag <code>filter=MyCustomFilter</code>.</p>\n<p>Removing the latter attribute type triggers <code>filter=MyCustomFilter</code> just fine. But I need the filter and the attribute. How do I make Assetic trigger my custom filter while having the <code>type=application/dart</code> attribute?</p>\n<p>I believe part of the problem is that it only accepts <code>type=application/javascript</code> or an empty html <code>type</code> attribute for the filter to trigger. I'm not sure where to go from here.</p>\n<hr>\n<h3>Full details:</h3>\n<p>I want to make a tag similar to <code>javascripts</code> but for Dart files.</p>\n<pre><code>{% darts\n    '@AcmeBundle/Resources/dart/AcmeMain/web/main.dart'\n%}$ \n    &lt;script type=&quot;application/dart&quot; src=&quot;{{ asset_url }}&quot;&gt;&lt;/script&gt;\n{% enddarts %}\n</code></pre>\n<p>I want to be able to use the <code>@</code> notation instead of <code>/bundles/etc/</code></p>\n<p>After a bit of searching, I tried the following:</p>\n<p>I extended <code>Symfony\\Bundle\\AsseticBundle\\Twig\\AsseticExtension</code></p>\n<p>I inherited the following function:</p>\n<pre><code>public function getTokenParsers()\n{\n    return array(\n        $this-&gt;createTokenParser('javascripts', 'js/*.js'),\n        $this-&gt;createTokenParser('stylesheets', 'css/*.css'),\n        $this-&gt;createTokenParser('image', 'images/*', true),\n    );\n}\n</code></pre>\n<p>In my own child class I added to the parent array <code>$this-&gt;createTokenParser('darts', 'dart/*.dart')</code>.</p>\n<p>Initially this works when I have.</p>\n<pre><code>{% darts '@MyBundle\\...\\main.dart' filter=&quot;MyCustomFilter&quot; %}\n&lt;script src=&quot;{{ asset_url }}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>However, the bootloader <code>dart.js</code> requires as <code>type=&quot;application/dart</code> attribute in order for the bootstrap to work.</p>\n<p>As soon as I add the required attribute, editing the source file does not recompile. It's pretty much ignored. The following code is ignored and does not trigger <code>MyCustomFilter</code> filter:</p>\n<pre><code>{% darts '@MyBundle\\...\\main.dart' filter=&quot;MyCustomFilter&quot; %}\n&lt;script type=&quot;application/dart&quot; src=&quot;{{ asset_url }}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>I can't seem to find where to go next from here, seeing how it all works is pretty overwhelming in itself. I only need it to recognize <code>type=&quot;application/dart</code> as valid so that my <code>MyCustomFilter</code> gets triggered.</p>\n"}, {"tags": ["dart", "dart2js"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421348313, "post_id": 27970066, "comment_id": 44334503, "body": "Can you elaborate a bit more why you need to build another directory. Maybe your project structure can be changed so you can use <code>pub build</code> instead of <code>dart2js</code>."}, {"owner": {"reputation": 895, "user_id": 864555, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/hffsW.jpg?s=128&g=1", "display_name": "darkzangel", "link": "https://stackoverflow.com/users/864555/darkzangel"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421351981, "post_id": 27970066, "comment_id": 44336493, "body": "Inlined my answer :) My main problem is that I&#39;m compiling my server and unittest code to js which is not recommended by Dart guideline and I&#39;m probably the only doing this..."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421352215, "post_id": 27970066, "comment_id": 44336624, "body": "The added info is helpful to understand your requirements but I have no idea how to solve it."}], "owner": {"reputation": 895, "user_id": 864555, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/hffsW.jpg?s=128&g=1", "display_name": "darkzangel", "link": "https://stackoverflow.com/users/864555/darkzangel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1421352494, "creation_date": 1421345122, "last_edit_date": 1421352494, "question_id": 27970066, "link": "https://stackoverflow.com/questions/27970066/manually-run-pub-transformer-in-dart", "title": "Manually run pub transformer in Dart", "body": "<p>I have a complex project and I have multiple entry point. I was manually running dart2js, but I'm trying to use aync_await library. The library require the the transformer async_await. The problem is that dart2js doesn't automatically run the transformer. Is there a way to specify dart2js to run a transformer or to manually run the transformer?</p>\n\n<p>I tried pub build, but it so broken, I can't get anywhere. For example, I can't ask it to just compile a dart file. It compile the whole project into a build directory. This works for the web directory, but I have a directory for my server which need to be compiled to js too and a test directory.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To inline my answer to <em>G\u00fcnter Z\u00f6chbauer</em>.</p>\n\n<p>I have the following structure:</p>\n\n<pre><code>root\n |-- packages\n |    |-- async_await (github.com/dart-lang/async_await)\n |    \\-- ...\n |-- node_modules\n |-- build (auto generated by pub build)\n |    \\-- web\n |         \\-- ...\n |-- server\n |    |-- main.dart\n |    \\-- main.js\n |-- test\n |    |-- main_unittest.dart\n |    \\-- main_unittest.js\n |-- web\n |    |-- index.html\n |    \\-- index.dart\n |-- package.json  (this is required to be in the root because of heroku)\n |-- Procfile  (this is required to be in the root because of heroku)\n \\-- pubspec.yaml\n</code></pre>\n\n<p><strong>Constraints:</strong></p>\n\n<p>1) I'm using heroku, because of that, i'm force to have \"node_modules\", \"Procfile\" and \"package,json\" in the root.</p>\n\n<p>2) Because of pub, I'm force to have web directory and only one \"pubspec.yaml\" in the projet. Having multiple one, make the editor choke/hang.</p>\n\n<p>3) I'm compiling to nodejs</p>\n\n<p>So my problem is that my test suite and my server can't be compiled using pub build. Also, I hate having a build directory. When I'm running Dartium and I'm making change, I have to run pub build just to have it copy my change from the directory root\\web to root\\build\\web or temporally make my server point to root/web.</p>\n\n<p>I was running dart2js manually, but with async_await, I have to find an another way of doing so I can run async_await transformer. So as of now, I can't run the server, neither my testbench with async_await.</p>\n"}, {"tags": ["dart"], "answers": [{"comments": [{"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1421659063, "post_id": 27970910, "comment_id": 44428625, "body": "You <i>can</i> do ugly stuff with noSuchMethod to capture the assignment <code>memberName</code>, but then it&#39;s simpler to just use <code>const Symbol(&quot;x=&quot;)</code>, and it helps dart2js know that the symbol is being used."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1421348225, "creation_date": 1421348225, "answer_id": 27970910, "question_id": 27970009, "link": "https://stackoverflow.com/questions/27970009/symbol-of-setter-declaration/27970910#27970910", "title": "Symbol of setter declaration", "body": "<p>No, as far as I know.</p>\n\n<p>Related issues: <a href=\"http://dartbug.com/13640\" rel=\"nofollow\">http://dartbug.com/13640</a>, <a href=\"http://dartbug.com/10029\" rel=\"nofollow\">http://dartbug.com/10029</a></p>\n"}], "owner": {"reputation": 866, "user_id": 3151466, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KgUCi.jpg?s=128&g=1", "display_name": "user1492051", "link": "https://stackoverflow.com/users/3151466/user1492051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 27970910, "answer_count": 1, "score": 2, "last_activity_date": 1421348225, "creation_date": 1421344951, "question_id": 27970009, "link": "https://stackoverflow.com/questions/27970009/symbol-of-setter-declaration", "title": "Symbol of setter declaration", "body": "<p>Is it actually possible to write a setter Symbol without calling the Symbol constructor? because the setter Symbol contains an <code>=</code> sign , so <code>#x=</code> does not work</p>\n"}, {"tags": ["dart"], "comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421348542, "post_id": 27969967, "comment_id": 44334641, "body": "Looks like a duplicate of <a href=\"http://stackoverflow.com/questions/13298140\">stackoverflow.com/questions/13298140</a>"}, {"owner": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421349528, "post_id": 27969967, "comment_id": 44335158, "body": "I got part of my setup from there, fixed a few things since dart have changed since that answer, but the problem is this error."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421349778, "post_id": 27969967, "comment_id": 44335305, "body": "How do you handle the request on the server? Maybe you can get some more details about the cause there."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421351226, "post_id": 27969967, "comment_id": 44336101, "body": "I don&#39;t know Redstone but I would try to set a brakpoint on the server and check if the metod gets called. If possible change the datatype in the signature to dynamic (instead of Map) to orevent exceptions. What is <code>app.Form</code>? Maybe the data is not sent as formdata."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 2879510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6038a92a06555024fb44e2daf241cab?s=128&d=identicon&r=PG&f=1", "display_name": "Raizul", "link": "https://stackoverflow.com/users/2879510/raizul"}, "is_accepted": false, "score": 1, "last_activity_date": 1429108101, "creation_date": 1429108101, "answer_id": 29652986, "question_id": 27969967, "link": "https://stackoverflow.com/questions/27969967/error-uploading-file-in-dart-to-redstone-server/29652986#29652986", "title": "Error uploading file in Dart to Redstone Server", "body": "<p>Dart: 1.9.1<br>\nRedstone: 0.5.21</p>\n\n<p>Let's say you have the following html:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;send_file.html&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;   \n    &lt;form id=\"read\"&gt;\n      user: &lt;input type=\"text\" name='user' value='DefaultValue'&gt;\n      &lt;input type=\"file\" id=\"file\" name=\"my_file\"/&gt; &lt;br&gt;\n\n      &lt;input type=\"button\" id=\"whole_btn\" value=\"Send whole form!\"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;\n      &lt;input type=\"button\" id=\"specific_btn\" value=\"Send specific values!\"&gt;\n    &lt;/form&gt;\n\n    &lt;script type=\"application/dart\" src=\"send_file.dart\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Redstone server file:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:io';\nimport 'package:logging/logging.dart';\nimport 'package:redstone/server.dart' as app;\nimport 'package:shelf_static/shelf_static.dart';\n\n@app.ErrorHandler(HttpStatus.NOT_FOUND)\nhandleNotFoundError() =&gt; app.redirect(\"not_found.html\");\n\n@app.Route('/post',methods: const [app.POST], allowMultipartRequest: true)\nwholeFormPost(@app.Body(app.FORM) Map form) {\n  var user = form['user'];\n  var f = form['my_file'];\n  print('user: $user \\n file: \\n ${f.content}');\n}\n\n@app.Route('/post1',methods: const [app.POST], allowMultipartRequest: true)\nspecificPost(@app.Body(app.FORM) Map form) {\n  var specificField = form['specificField'];\n  var f = form['my_file'];\n  print('specificField: $specificField \\n file: \\n ${f.content}');\n}\n\n@app.Interceptor(r'/.*')\ninterceptor1() {\n  if (app.request.method == 'OPTIONS') {\n    app.response = app.response.change(headers: CORS);\n    app.chain.interrupt();\n  } else {\n    app.chain.next(() {\n      return app.response = app.response.change(headers: CORS );\n    });\n  }\n}\n\nMap CORS = {\n  \"Access-Control-Allow-Origin\" : \"*, \",\n  \"Access-Control-Allow-Methods\": \"POST, GET, OPTIONS\",\n  \"Access-Control-Allow-Headers\": \"Origin, X-Requested-With, Content-Type, Accept, Content-Disposition\"\n};\n\nmain() {\n  app.setShelfHandler(createStaticHandler(\"/home/raz2/dartProjects_linux_1/PR5/cl2/lib\",\n                                          defaultDocument: 'send_file.html',\n                                            serveFilesOutsidePath: true));\n\n  app.setupConsoleLog(Level.ALL);\n  app.start(address: \"0.0.0.0\", port: 8081);\n}\n</code></pre>\n\n<p>The client dart file: send_file.dart</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:html';\n\nclass UploadFileEx {\n  FormElement _readForm;\n  InputElement _fileInput;\n  File file;\n  ButtonElement _wholeBtn;\n  ButtonElement _specificBtn;\n\n  UploadFileEx() {\n    _readForm = document.querySelector('#read');\n    _fileInput = \n        document.querySelector('#file')\n        ..onChange.listen(_onFileInputChange);\n\n    _wholeBtn = \n        document.querySelector('#whole_btn')\n        ..onClick.listen((sendForm));\n\n    _specificBtn = \n        document.querySelector('#specific_btn')\n        ..onClick.listen((sendFileAndField));\n  }\n\n  _onFileInputChange(_) {\n    file = _fileInput.files[0];\n  }\n\n  // Send the whole form\n  void sendForm(_) {\n    if(file == null) \n      return;\n\n    FormData fd = new FormData(_readForm);\n\n    HttpRequest req = new HttpRequest();\n    req.open(\"POST\", 'http://127.0.0.1:8081/post');\n    req.send(fd);\n  }\n\n  // add my own field to FormData\n  void sendFileAndField(_) {\n    if(file == null) \n      return;\n\n    FormData fd = new FormData();\n    fd.append('specificField', 'Lalala');\n    fd.appendBlob('my_file', file);\n\n    HttpRequest req = new HttpRequest();\n    req.open(\"POST\",'http://127.0.0.1:8081/post1');\n    req.send(fd);\n  }\n\n}\n\nvoid main() {\n  new UploadFileEx();\n}\n</code></pre>\n\n<p>Should work.\nCheck out this link for more info: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Sending_forms_through_JavaScript\" rel=\"nofollow\">Sending_forms_through_JavaScript</a></p>\n"}], "owner": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1429108101, "creation_date": 1421344796, "last_edit_date": 1421350258, "question_id": 27969967, "link": "https://stackoverflow.com/questions/27969967/error-uploading-file-in-dart-to-redstone-server", "title": "Error uploading file in Dart to Redstone Server", "body": "<p>I am trying to upload a file in Dart with this code</p>\n\n<p><strong>Reading the file</strong></p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>    dom.InputElement uploadInput = dom.querySelector('#upload');\n\n    uploadInput.onChange.listen((dom.Event e) \n    {\n        // read file content as dataURL\n        final files = uploadInput.files;\n\n        if (files.length == 1) \n        {\n            final file = files[0];\n            final reader = new dom.FileReader();\n\n            reader.onLoad.listen((_) \n            {\n                dataRequest('upload', reader.result);\n            });\n\n            reader.readAsDataUrl (file);\n        }\n    });\n</code></pre>\n\n<p><strong>Sending the file</strong></p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>    Future&lt;dom.HttpRequest&gt; dataRequest (String path, dynamic data)\n    {\n        return dom.HttpRequest.request (path, method: \"POST\", \n               sendData: data);\n    }\n</code></pre>\n\n<p>But I get this error</p>\n\n<pre><code>POST http://localhost:9090/upload 400 (Bad Request) :9090/upload:1\nInstance of '_XMLHttpRequestProgressEvent'\n\nSTACKTRACE:\nnull\n</code></pre>\n\n<p>I receive it in Redstone like this</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>@app.Route(\"/upload\", methods: const [app.POST], allowMultipartRequest: true)\n@Encode()\nupload(@app.Body(app.FORM) Map form) \n{\n    var file = form[\"file\"];\n    print(file.filename);\n    print(file.contentType);\n    print(file.runtimeType);\n\n    return new Resp()\n        ..success = (file.filename != null);\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 3533615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Q7gs1.png?s=128&g=1", "display_name": "Gonzalo Pezzi", "link": "https://stackoverflow.com/users/3533615/gonzalo-pezzi"}, "edited": false, "score": 0, "creation_date": 1421349556, "post_id": 27970820, "comment_id": 44335185, "body": "Thanks G&#252;nter. I will try again and get back to you if I get stuck again."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 1, "last_activity_date": 1421349853, "last_edit_date": 1421349853, "creation_date": 1421347925, "answer_id": 27970820, "question_id": 27969751, "link": "https://stackoverflow.com/questions/27969751/create-a-polymer-dart-element-that-works-with-a-template-provided-by-the-user/27970820#27970820", "title": "Create a Polymer.Dart element that works with a template provided by the user", "body": "<p>I also think <code>core_list_dart</code> is a good example. Take a look at the <code>attached()</code> method.<br>\nAt first the <code>template</code> tag is looked up among the children, then the template is registered with <code>templateBind</code>.\nThe <code>initializeData</code> method sets the model</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>templateBind(template).model = _physicalData;\ntemplate.attributes['repeat'] = '';\n</code></pre>\n\n<p>You might not need the <code>repeat</code> when you don't use a collection as data.</p>\n\n<p>I suggest you try it so far and post your code with the error you get or what doesn't work as expected. </p>\n"}], "owner": {"reputation": 555, "user_id": 3533615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Q7gs1.png?s=128&g=1", "display_name": "Gonzalo Pezzi", "link": "https://stackoverflow.com/users/3533615/gonzalo-pezzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421349853, "creation_date": 1421344012, "last_edit_date": 1421347938, "question_id": 27969751, "link": "https://stackoverflow.com/questions/27969751/create-a-polymer-dart-element-that-works-with-a-template-provided-by-the-user", "title": "Create a Polymer.Dart element that works with a template provided by the user", "body": "<p>I am trying to create a <strong>polymer element</strong> that would let the user provide a <strong>template</strong> so that a bunch of items will be created according to that template. </p>\n\n<p>I thought looking at the code of core-list-dart could be a good starting point, as it works exactly that way: </p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>&lt;core-list-dart id=\"list\" data=\"{{data}}\"&gt;\n  &lt;template&gt;\n    &lt;div&gt;Hello, {{model.name}} {{model.surname}}&lt;/div&gt;\n  &lt;/template&gt;\n&lt;/core-list-dart&gt;\n</code></pre>\n\n<p>However, I have been looking at the code for some time and I can't find where it creates the elements and adds them to the DOM. </p>\n\n<p>I suppose it has something to do with the use of the package <strong>template_binding</strong> but I still have no clue how to use it. </p>\n\n<p>Can anyone point me in the right direction?\nThanks in advance</p>\n"}, {"tags": ["utf-8", "dart", "dart2js"], "answers": [{"comments": [{"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "edited": false, "score": 0, "creation_date": 1421510194, "post_id": 27984545, "comment_id": 44391584, "body": "The whole string is Cyrillic chars, so I would expect some heuristics to be at play but..."}], "tags": [], "owner": {"reputation": 580, "user_id": 487683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341ab71348532b291fe16ee64fd0c4ac?s=128&d=identicon&r=PG", "display_name": "Erik Corry", "link": "https://stackoverflow.com/users/487683/erik-corry"}, "is_accepted": false, "score": 0, "last_activity_date": 1421413305, "creation_date": 1421413305, "answer_id": 27984545, "question_id": 27965994, "link": "https://stackoverflow.com/questions/27965994/how-to-control-the-string-encoding-utf/27984545#27984545", "title": "How to control the string encoding UTF", "body": "<p>In the browser (at least in V8 in Chrome) a string is represented with 1 byte per character if there are no characters outside the range of 0-255.  If there is just one character outside that range, then the string is represented as 2 bytes per character.  So for a small number of Cyrillic characters this can be a more compact representation in terms of browser memory.</p>\n\n<p>However I'm not aware of any measurements, and there may be reasons why this theoretical space saving does not work in practice.</p>\n"}, {"comments": [{"owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "edited": false, "score": 0, "creation_date": 1422128420, "post_id": 28104899, "comment_id": 44631783, "body": "Ok, thanks, submitted a report. <a href=\"https://code.google.com/p/dart/issues/detail?id=22145\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/detail?id=22145</a>"}], "tags": [], "owner": {"reputation": 6413, "user_id": 997251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZqLx3.jpg?s=128&g=1", "display_name": "Florian Loitsch", "link": "https://stackoverflow.com/users/997251/florian-loitsch"}, "is_accepted": true, "score": 1, "last_activity_date": 1421997817, "creation_date": 1421997817, "answer_id": 28104899, "question_id": 27965994, "link": "https://stackoverflow.com/questions/27965994/how-to-control-the-string-encoding-utf/28104899#28104899", "title": "How to control the string encoding UTF", "body": "<p>When dart2js reads a string it decodes that string. For example if your string contained a \\n it decodes it into a new line character. When dart2js writes the string out, it does needs to encode the strings again. For simplicity dart2js simply encodes everything that is not ASCII.</p>\n\n<p>Please file a bug report, and we will have a look to see if it's easy to fix.</p>\n"}], "owner": {"reputation": 1587, "user_id": 1221118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/931e9bf94717ebd18e085a4189a1e150?s=128&d=identicon&r=PG", "display_name": "Peter StJ", "link": "https://stackoverflow.com/users/1221118/peter-stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28104899, "answer_count": 2, "score": 1, "last_activity_date": 1421997817, "creation_date": 1421333146, "last_edit_date": 1421863904, "question_id": 27965994, "link": "https://stackoverflow.com/questions/27965994/how-to-control-the-string-encoding-utf", "title": "How to control the string encoding UTF", "body": "<p>When compiling to javaScript the dart2js compiler converts the string to an escaped utf format </p>\n\n<pre><code>\\u043d\\u041d...\n</code></pre>\n\n<p>I am not sure why his is done (the original file contains text strings that are in cyrillic, but the system (and hopefully DartEditor) use UTF).</p>\n\n<p>Other compilers (like Closure or TypeScript) leave it as it is.</p>\n\n<p>I am wondering if someone can explain:</p>\n\n<ol>\n<li>Why it is done in this way</li>\n<li>What is the significance of this</li>\n<li>Is there a way to turn this off</li>\n</ol>\n\n<p>Thanks. </p>\n"}, {"tags": ["dart", "dart-polymer"], "answers": [{"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421311539, "post_id": 27958534, "comment_id": 44312919, "body": "Meh, didn&#39;t know you could do that on the scaffold component itself. Thanks G&#252;nter!"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 1, "creation_date": 1421311647, "post_id": 27958534, "comment_id": 44312957, "body": "You could also wrap <code>&lt;core-menu&gt;</code> with <code>&lt;template if=&quot;{{isLoggedIn}&gt;&lt;core-menu&gt;...&lt;&#47;core-menu&gt;&lt;&#47;template&gt;</code> if you just want to hide the content of the drawer panel."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421311976, "post_id": 27958534, "comment_id": 44313107, "body": "Awesome, that almost looks like a &lt;c:if tag in JSTL, is there something equivalent for &lt;c:forEach ?"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421312017, "post_id": 27958534, "comment_id": 44313126, "body": "<code>&lt;template repeat=&quot;{{x in y}}&quot;&gt;</code>"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 1, "creation_date": 1421312185, "post_id": 27958534, "comment_id": 44313205, "body": "<code>&lt;template ...&gt;</code> can only be used within a Polymer element or within the <code>&lt;auto-binding-dart&gt;</code> element (see <a href=\"http://stackoverflow.com/questions/25838543\">stackoverflow.com/questions/25838543</a> for an example) which need to provide a model <code>&lt;template&gt;</code> can refer to. I usually use a <code>&lt;app-element&gt;</code> to wrap the whole application (<code>&lt;app-element&gt;&lt;core-scaffold&gt;...&lt;&#47;core-scaffold&gt;&lt;&#47;app-elemen&zwnj;&#8203;t&gt;</code> to be able to use bindings everywhere."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 1, "creation_date": 1421354633, "post_id": 27958534, "comment_id": 44337910, "body": "Only testing it now, seems jsElement.callMethod(&#39;closeDrawer&#39;, []); } doesn&#39;t actually close the drawer as it&#39;s supposed to, will log a bug."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421355974, "post_id": 27958534, "comment_id": 44338606, "body": "Logged a bug, you can vote for it here: <a href=\"https://code.google.com/p/dart/issues/detail?id=22077&amp;thanks=22077&amp;ts=1421355859\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/&hellip;</a>"}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421356286, "post_id": 27958534, "comment_id": 44338784, "body": "<a href=\"https://github.com/dart-lang/core-elements/issues\" rel=\"nofollow noreferrer\">github.com/dart-lang/core-elements/issues</a> would be the right place for this bug report. Where do you call the code from?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421356500, "post_id": 27958534, "comment_id": 44338899, "body": "I&#39;m calling the code from a button at the moment, click button to open drawer, click button to toggle the drawer and click button to close the drawer just to be sure that it&#39;s not due to polymer not being initialised yet and I&#39;m getting the same results. Will move it into a main function at startup once the paper-button&#39;s on-click can make it move in and out."}, {"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421356584, "post_id": 27958534, "comment_id": 44338943, "body": "Ok, I also think it can&#39;t be a timing issue then."}], "tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1421306754, "last_edit_date": 1495535232, "creation_date": 1421306754, "answer_id": 27958534, "question_id": 27957771, "link": "https://stackoverflow.com/questions/27957771/manually-hiding-and-showing-drawer-panel-in-core-scaffold-using-dart/27958534#27958534", "title": "Manually hiding and showing drawer-panel in core-scaffold using dart", "body": "<p>I guess you want to call <code>closeDrawer()</code> on <code>&lt;core-scaffold&gt;</code> at startup and on login one of the methods <code>togglePanel()</code> or <code>openDrawer()</code>. (see \"Methods\" section in <a href=\"https://www.polymer-project.org/docs/elements/core-elements.html#core-scaffold\" rel=\"nofollow noreferrer\">https://www.polymer-project.org/docs/elements/core-elements.html#core-scaffold</a>.</p>\n\n<p>You can do this either in <code>main()</code> (see <a href=\"https://stackoverflow.com/questions/20982489\">how to implement a main function in polymer apps</a>) or wrap <code>&lt;core-scaffold&gt;</code> in a custom Polymer element and put the code in the <code>ready()</code> lifecycle method.</p>\n"}, {"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421348461, "post_id": 27970776, "comment_id": 44334596, "body": "It seems to work for Jan therefore I guess it would be better to create a new question and put your code there. How do you invoke the code (custom main method, app-element, auto-binding-dart)?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421352715, "post_id": 27970776, "comment_id": 44336897, "body": "I&#39;m actually only getting around to testing it now, I&#39;m using: CoreScaffold scaff = shadowRoot.querySelector(&#39;core-scaffold&#39;); IntelliJ doesn&#39;t give me an autocomplete on scaff.closeDrawer it and it doesn&#39;t close for me either. I don&#39;t actually see a CoreScaffold.dart anywhere, unless it&#39;s buried in another file. Busy investigating ..."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421354656, "post_id": 27970776, "comment_id": 44337917, "body": "Only testing it now, seems jsElement.callMethod(&#39;closeDrawer&#39;, []); } doesn&#39;t actually close the drawer as it&#39;s supposed to, will log a bug."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421355923, "post_id": 27970776, "comment_id": 44338586, "body": "Logged a bug, you can vote for it here: <a href=\"https://code.google.com/p/dart/issues/detail?id=22077&amp;thanks=22077&amp;ts=1421355859\" rel=\"nofollow noreferrer\">code.google.com/p/dart/issues/&hellip;</a>"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421385919, "post_id": 27970776, "comment_id": 44347730, "body": "@Lymp, it seems my packages were a little bit out of date, updated to the latest version of polymer and paper_elements and is now working after a pub upgrade. See the discussion on github: <a href=\"https://github.com/dart-lang/polymer-dart/issues/12\" rel=\"nofollow noreferrer\">github.com/dart-lang/polymer-dart/issues/12</a>"}, {"owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "reply_to_user": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1421692829, "post_id": 27970776, "comment_id": 44447479, "body": "Hi Jan, @G&#252;nterZ&#246;chbauer.  Many thanks. I&#39;m not 100% clear on the position of that thread. (I&#39;m a beginner - big learning curves on many fronts.)  Anyway, on a positive note, I am now using a toggle button to [successfully] open and close the drawer, using     cdp.drawerWidth=&quot;50px&quot;;  (and 200px). I was missing the &#39;px&#39; previously. This is actually quite useful, because I can &quot;leave the drawer open a little&quot;, so the user has access to the menu in it."}], "tags": [], "owner": {"reputation": 783, "user_id": 4145218, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0799ebc719896b086690bb786878891a?s=128&d=identicon&r=PG&f=1", "display_name": "Lymp", "link": "https://stackoverflow.com/users/4145218/lymp"}, "is_accepted": false, "score": 1, "last_activity_date": 1421347745, "creation_date": 1421347745, "answer_id": 27970776, "question_id": 27957771, "link": "https://stackoverflow.com/questions/27957771/manually-hiding-and-showing-drawer-panel-in-core-scaffold-using-dart/27970776#27970776", "title": "Manually hiding and showing drawer-panel in core-scaffold using dart", "body": "<p>I hope this doesn't break SO rules. Anyway, my twopenny worth. I have tried:</p>\n\n<pre><code>CoreScaffold scaff = document.querySelector('core-scaffold');\nscaff.closeDrawer();\n</code></pre>\n\n<p>scaff is indeed the correct element (I see it in debug), and closeDrawer() <b>is</b> called (I step through) - but the drawer does not close.</p>\n\n<p>I thought I would try to set the width of the drawer:</p>\n\n<pre><code>CoreDrawerPanel cdp=scaff.shadowRoot.querySelector('core-drawer-panel');\ncdp.drawerWidth =\"70\";\n</code></pre>\n\n<p>but that just makes the window go white=empty.  (cdp is the correct element.) <br>It's taken me a while to discover how to get these two elements, so I hope that's a bit of help at least.<br>\nSteve</p>\n"}, {"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421359107, "post_id": 27973258, "comment_id": 44340194, "body": "shadowRoot.querySelector(&#39;core-drawer-panel&#39;).forceNarrow = true; throws a stacktrace and so does: CoreScaffold e = shadowRoot.querySelector(&#39;core-scaffold&#39;);       e.shadowRoot.querySelector(&#39;core-drawer-panel&#39;).forceNarrow = true; Exception: Uncaught Error: Class &#39;CoreDrawerPanel&#39; has no instance setter &#39;forceNarrow=&#39;. NoSuchMethodError: method not found: &#39;forceNarrow=&#39;  How do I set forceNarrow in dartCode and how would I set it in the HTML?  Should I log an enhancement request to document this feature ?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1421385868, "post_id": 27973258, "comment_id": 44347713, "body": "Seems my packages were a little bit out of date, updated to the latest version of polymer and paper_elements and is now working after a pub upgrade."}], "tags": [], "owner": {"reputation": 1293, "user_id": 4223471, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4BObBSHEeGs/AAAAAAAAAAI/AAAAAAAALoM/x0XAln25lII/photo.jpg?sz=128", "display_name": "Jake MacDonald", "link": "https://stackoverflow.com/users/4223471/jake-macdonald"}, "is_accepted": true, "score": 2, "last_activity_date": 1421357129, "creation_date": 1421357129, "answer_id": 27973258, "question_id": 27957771, "link": "https://stackoverflow.com/questions/27957771/manually-hiding-and-showing-drawer-panel-in-core-scaffold-using-dart/27973258#27973258", "title": "Manually hiding and showing drawer-panel in core-scaffold using dart", "body": "<p>The issue here is when in non-responsive mode core-drawer-panel ignores all calls to togglePanel (it will always be visible). You can force responsive mode regardless of the size by setting .forceNarrow = true.</p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 0, "accepted_answer_id": 27973258, "answer_count": 3, "score": 3, "last_activity_date": 1421386417, "creation_date": 1421302738, "last_edit_date": 1421386417, "question_id": 27957771, "link": "https://stackoverflow.com/questions/27957771/manually-hiding-and-showing-drawer-panel-in-core-scaffold-using-dart", "title": "Manually hiding and showing drawer-panel in core-scaffold using dart", "body": "<p>I'm experimenting with the core-scaffold component in polymer-dart, I like the layout, but I don't want the menu on the left to be visible if not logged in.</p>\n\n<p>What is the correct way of hiding / showing that menu bar?\n(here's a sample of the drawer panel hiding and showing: <a href=\"https://www.polymer-project.org/samples/layout-elements/scaffold-app.vulcanized.html\" rel=\"nofollow noreferrer\">https://www.polymer-project.org/samples/layout-elements/scaffold-app.vulcanized.html</a>)</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>&lt;core-scaffold&gt;\n    &lt;core-header-panel id=\"menu-panel\" navigation flex&gt;\n\n\n        &lt;core-toolbar id=\"navheader\"&gt;\n            &lt;span&gt;Menu&lt;/span&gt;\n        &lt;/core-toolbar&gt;\n        &lt;core-menu&gt;\n            &lt;core-item label=\"Abc\" on-click=\"{{abcClicked}}\"&gt;&lt;/core-item&gt;\n            &lt;core-item label=\"Def\" on-click=\"{{defClicked}}\"&gt;&lt;/core-item&gt;\n            &lt;core-item label=\"Ghi\" on-click=\"{{ghiClicked}}\"&gt;&lt;/core-item&gt;\n        &lt;/core-menu&gt;\n    &lt;/core-header-panel&gt;\n\n    &lt;span tool&gt;{{title}}&lt;/span&gt;\n    &lt;paper-tabs class=\"bottom fit\" selected=\"0\"&gt;\n        &lt;paper-tab on-click=\"{{abcClicked}}\" class=\"\"&gt;ABC&lt;/paper-tab&gt;\n        &lt;paper-tab on-click=\"{{defClicked}}\" class=\"\"&gt;DEF&lt;/paper-tab&gt;\n        &lt;paper-tab on-click=\"{{ghiClicked}}\" class=\"\"&gt;GHI&lt;/paper-tab&gt;\n    &lt;/paper-tabs&gt;\n\n    &lt;div class=\"content\"&gt;\n        If drawer is hidden, press button to display drawer.\n\n        &lt;paper-button role=\"button\" on-click=\"{{simulateLoginClicked}}\" class=\"ink\" affirmative raised&gt;\n            Simulate Login\n        &lt;/paper-button&gt;\n\n        &lt;paper-button role=\"button\" on-click=\"{{simulateLogoutClicked}}\" class=\"ink\" affirmative raised&gt;\n            Simulate Logout\n        &lt;/paper-button&gt;\n\n\n    &lt;/div&gt;\n&lt;/core-scaffold&gt;\n</code></pre>\n\n<p>I'm using the querySelector to find the panel in the dom:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code> CoreHedaerPanel chp = shadowRoot.querySelector(\"#menu-panel\");\n</code></pre>\n\n<p>I don't see a show / hide method, just a hidden property, the hidden property if set to true only makes the content of the drawer panel disappear, the drawer panel itself is still there.</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>I'm doing: </p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>CoreScaffold e = shadowRoot.querySelector('core-scaffold');\ne.closeDrawer();\n</code></pre>\n\n<p>Stepping through the code, I can see closeDrawer exists, stepping into it I can see it's going into the method, but the drawer doesn't close. Same goes for togglePanel.</p>\n\n<p><img src=\"https://i.stack.imgur.com/qjHu3.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/VPkLn.png\" alt=\"enter image description here\"></p>\n\n<p>Just to make sure, I've deleted .pub and did a pub cache repair:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>pub cache repair\n]Downloading analyzer 0.22.4...\nDownloading args 0.12.2+1...\nDownloading barback 0.15.2+2...\nDownloading browser 0.10.0+2...\nDownloading code_transformers 0.2.3+2...\nDownloading collection 1.1.0...\nDownloading core_elements 0.4.0+6...\nDownloading crypto 0.9.0...\nDownloading csslib 0.11.0+2...\nDownloading custom_element_apigen 0.1.3...\nDownloading event_bus 0.3.0+2...\nDownloading html5lib 0.12.0...\nDownloading http 0.11.1+1...\nDownloading http_parser 0.0.2+5...\nDownloading json_object 1.0.18+2...\nDownloading less_dart 0.1.3...\nDownloading less_dart 0.1.4...\nDownloading logging 0.9.2...\nDownloading logging 0.9.3...\nDownloading observe 0.12.2...\nDownloading paper_elements 0.5.0...\nDownloading path 1.3.0...\nDownloading path 1.3.1...\nDownloading polymer 0.15.1+5...\nDownloading polymer_expressions 0.13.0+1...\nDownloading pool 1.0.1...\nDownloading quiver 0.18.2...\nDownloading smoke 0.2.1+1...\nDownloading source_maps 0.10.0+1...\nDownloading source_span 1.0.2...\nDownloading stack_trace 1.1.1...\nDownloading stagehand 0.1.5+2...\nDownloading string_scanner 0.1.3...\nDownloading template_binding 0.13.1...\nDownloading usage 0.0.5...\nDownloading utf 0.9.0+1...\nDownloading watcher 0.9.3...\nDownloading web_components 0.9.0+1...\nDownloading yaml 2.1.2...\n</code></pre>\n\n<p>So I'm either doing something wrong, or I've hit a bug ...</p>\n\n<p>Have logged a bug in the meantime: \n<a href=\"https://github.com/dart-lang/polymer-dart/issues/12\" rel=\"nofollow noreferrer\">https://github.com/dart-lang/polymer-dart/issues/12</a>\nand here:\n<a href=\"https://code.google.com/p/dart/issues/detail?id=22077&amp;thanks=22077&amp;ts=1421355859\" rel=\"nofollow noreferrer\">https://code.google.com/p/dart/issues/detail?id=22077&amp;thanks=22077&amp;ts=1421355859</a>\nnot sure which one is the more official place to log it.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Solution to my problem is:</p>\n\n<p>To close the drawer:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>  CoreScaffold e = shadowRoot.querySelector('core-scaffold');\n  e.shadowRoot.querySelector('core-drawer-panel').forceNarrow = true;\n  e.closeDrawer();\n</code></pre>\n\n<p>and to open the drawer again without overlay:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>  CoreScaffold e = shadowRoot.querySelector('core-scaffold');\n  e.shadowRoot.querySelector('core-drawer-panel').forceNarrow = false;\n  e.openDrawer();\n</code></pre>\n"}, {"tags": ["dart", "dart-async"], "comments": [{"owner": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 1, "creation_date": 1421315964, "post_id": 27955539, "comment_id": 44315244, "body": "You return <code>completion.future</code>, but <code>completion</code> is a <code>Future</code>, not a <code>Completer</code>?"}, {"owner": {"reputation": 603, "user_id": 1025219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qnubn.jpg?s=128&g=1", "display_name": "ApperleyA", "link": "https://stackoverflow.com/users/1025219/apperleya"}, "reply_to_user": {"reputation": 35316, "user_id": 2156621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ed6aa5c7920063019e39f13f94c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "lrn", "link": "https://stackoverflow.com/users/2156621/lrn"}, "edited": false, "score": 0, "creation_date": 1421335841, "post_id": 27955539, "comment_id": 44326592, "body": "That was a mistake I made when editing the post"}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 1025219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qnubn.jpg?s=128&g=1", "display_name": "ApperleyA", "link": "https://stackoverflow.com/users/1025219/apperleya"}, "edited": false, "score": 0, "creation_date": 1421290773, "post_id": 27955845, "comment_id": 44306973, "body": "Hey man, thanks for commenting so quickly. Also thanks for the Uri tip, it&#39;s a much cleaner way to do that.  But as far as my code working, it&#39;s not. Not sure why though. The Future from the .then(JSON.decode) is returned and I attach a then() to it once back in the Model Factory but no dice. So in theory the then() execution should be HTTP Request Return String-&gt;JSON.decode parses it-&gt;I handle making the models, if everything worked that is. I do see the HTTP request returning a 200 ok from my server."}, {"owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "reply_to_user": {"reputation": 603, "user_id": 1025219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qnubn.jpg?s=128&g=1", "display_name": "ApperleyA", "link": "https://stackoverflow.com/users/1025219/apperleya"}, "edited": false, "score": 0, "creation_date": 1421317981, "post_id": 27955845, "comment_id": 44316319, "body": "@ApperleyA this is weird. I tested the code and it works <a href=\"http://dartlab.org/#9d14391454bf11f96e01\" rel=\"nofollow noreferrer\">dartlab.org/#9d14391454bf11f96e01</a> [the bottom-right frame takes a while to load because it compiles to JS right in the browser]. Also as @lrn pointed above in your version of the code you need to return <code>completion</code> not <code>completion.future</code>. You&#39;ll get <code>NoSuchMethod</code> error on that line."}, {"owner": {"reputation": 603, "user_id": 1025219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qnubn.jpg?s=128&g=1", "display_name": "ApperleyA", "link": "https://stackoverflow.com/users/1025219/apperleya"}, "edited": false, "score": 0, "creation_date": 1421471793, "post_id": 27955845, "comment_id": 44383027, "body": "I got it to work...not sure how but it started working today. Thanks for looking at my code and the help you provided."}], "tags": [], "owner": {"reputation": 9725, "user_id": 662844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wz88P.png?s=128&g=1", "display_name": "Vyacheslav Egorov", "link": "https://stackoverflow.com/users/662844/vyacheslav-egorov"}, "is_accepted": true, "score": 2, "last_activity_date": 1421288562, "creation_date": 1421288562, "answer_id": 27955845, "question_id": 27955539, "link": "https://stackoverflow.com/questions/27955539/the-call-back-assigned-to-my-compler-future-object-is-not-being-called-when-i-co/27955845#27955845", "title": "The call back assigned to my Compler.future object is not being called when I complete the completer after a network call", "body": "<p>I can't spot anything wrong with this code, except that it does not propagate errors. It should work. If <code>completion.complete</code> is invoked then <code>completion.future</code> must complete, check that <code>completion.complete</code> is indeed invoked (e.g. check if there were any network errors on the console, check Network tab in DevTools to see request/response).</p>\n\n<p>In general though I'd recommend avoiding explicit usage of completers. Just use the future returned by <code>then</code> instead of <code>completer.future</code>:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>  Future&lt;Map&gt; makeRequest(NetworkingRequestType type, Map params, String endpoint) {\n    switch (type) {\n      case NetworkingRequestType.GET:\n        return _makeGetRequest(endpoint, params);\n\n      case NetworkingRequestType.POST:\n        break;\n    }\n  }\n\n  Future&lt;Map&gt; _makeGetRequest(String endpoint, Map params) {\n    final uri = new Uri(path: \"${baseServerURL}${endpoint}\",\n                        queryParameters: params);\n    return HttpRequest.getString(\"${uri}\").then(JSON.decode);\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1421305560, "creation_date": 1421305560, "answer_id": 27958298, "question_id": 27955539, "link": "https://stackoverflow.com/questions/27955539/the-call-back-assigned-to-my-compler-future-object-is-not-being-called-when-i-co/27958298#27958298", "title": "The call back assigned to my Compler.future object is not being called when I complete the completer after a network call", "body": "<p>Your code looks to me like some mixture of using <code>Completer</code> and not using <code>Completer</code>.</p>\n\n<p>How the code would look like when using <code>Completer</code>: </p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>Future&lt;Map&gt; makeRequest(NetworkingRequestType type, Map params, String endpoint) {\n    // Future&lt;Map&gt; completion; // &lt;= if you want to use a completer this should be\n    Completer&lt;Map&gt; completion = new Completer&lt;Map&gt;()\n\n    switch (type) {\n      case NetworkingRequestType.GET:\n        // completion = _makeGetRequest(endpoint, params); // &lt;= this would change to\n        _makeGetRequest(endpoint, params).then((result) =&gt; completion.complete(result));\n\n        break;\n\n      case NetworkingRequestType.POST:\n        // completion.complete({});\n        _makePostRequest(endpoint, params).then((result) =&gt; completion.complete(result));\n        break;\n    }\n\n    return completion.future;\n  }\n</code></pre>\n\n<p>but you probably don't need to use a <code>Completer</code> for this use case.</p>\n\n<p>The code would then look like without using <code>Completer</code>:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Future&lt;Map&gt; makeRequest(NetworkingRequestType type, Map params, String endpoint) {\n\n    switch (type) {\n      case NetworkingRequestType.GET:\n        return _makeGetRequest(endpoint, params);\n\n        break;\n\n      case NetworkingRequestType.POST:\n        // return new Future.value({}); // or whatever you want to do here \n        return _makePostRequest(endpoint, params);\n        break;\n    }\n  }\n</code></pre>\n\n<p>caution: code not tested.</p>\n"}], "owner": {"reputation": 603, "user_id": 1025219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qnubn.jpg?s=128&g=1", "display_name": "ApperleyA", "link": "https://stackoverflow.com/users/1025219/apperleya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 27955845, "answer_count": 2, "score": 1, "last_activity_date": 1421335172, "creation_date": 1421285982, "last_edit_date": 1421335172, "question_id": 27955539, "link": "https://stackoverflow.com/questions/27955539/the-call-back-assigned-to-my-compler-future-object-is-not-being-called-when-i-co", "title": "The call back assigned to my Compler.future object is not being called when I complete the completer after a network call", "body": "<p>I'm new Dart and have an iOS background so I might be using the language incorrectly which is leading to my code not working as expected but I also cannot find a solution online and thought I would ask it here incase someone else has experienced it and fixed it.</p>\n\n<p>So what I'm trying to accomplish is have a model factory create a datasource in which you pass the request type (GET or POST), pass in an endpoint, and some params. Then it will return you back a future in which you listen for a <code>then()</code> call, this is called when the network request is successful/fails. The code I currently have works up until the point when I call completion.complete(responseObject);...nothing happens after that.</p>\n\n<p>Code for the few functions that are involved:</p>\n\n<p>Inside the Model Factory:</p>\n\n\n\n<pre class=\"lang-dart prettyprint-override\"><code>BaseDataSource bds = new BaseDataSource();\nMap params = {\"api_key\": \"random\",\"session_id\": \"random\", \"account_id\": \"random\"};\nFuture&lt;Map&gt; request = bds.makeRequest(NetworkingRequestType.GET, params, \"music/songs\");\nrequest.then((Map responseObject) {\n\n});\n</code></pre>\n\n<p>Inside the Datasource:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>enum NetworkingRequestType {\n   GET, POST\n}\n\nclass BaseDataSource {\n\n  static final String baseServerURL = config[appRunMode][\"baseServerURL\"];\n\n  Future&lt;Map&gt; makeRequest(NetworkingRequestType type, Map params, String endpoint) {\n    Future&lt;Map&gt; completion;\n\n    switch (type) {\n      case NetworkingRequestType.GET:\n        completion = _makeGetRequest(endpoint, params);\n        break;\n\n      case NetworkingRequestType.POST:\n        break;\n    }\n\n    return completion;\n  }\n\n  Future&lt;Map&gt; _makeGetRequest(String endpoint, Map params) {\n    final uri = new Uri(path: \"${baseServerURL}${endpoint}\",\n    queryParameters: params);\n    return HttpRequest.getString(\"${uri}\").then(JSON.decode);\n  }\n}\n</code></pre>\n"}]