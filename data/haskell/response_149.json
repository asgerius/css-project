[{"tags": ["haskell"], "comments": [{"owner": {"reputation": 1235, "user_id": 3086454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe13e8bdaaf213c71c5413ea1f17819?s=128&d=identicon&r=PG&f=1", "display_name": "d12frosted", "link": "https://stackoverflow.com/users/3086454/d12frosted"}, "edited": false, "score": 4, "creation_date": 1510782051, "post_id": 47317555, "comment_id": 81586526, "body": "The signature of <code>($)</code> can be written as <code>(a -&gt; b) -&gt; (a -&gt; b)</code> (hello, currying). So basically it takes a function and returns the same function. Which is <code>id</code>."}], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 8393442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649ba3617086819804333c4dc40a4715?s=128&d=identicon&r=PG", "display_name": "luispauloml", "link": "https://stackoverflow.com/users/8393442/luispauloml"}, "edited": false, "score": 0, "creation_date": 1510782994, "post_id": 47317756, "comment_id": 81587024, "body": "That&#39;s a very good observation. I guess I just need more practice with Haskell to get used to this kind of thing. Thank you, and hopefully someone can answer all my 4 questions. Still, +1."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 6, "creation_date": 1510783280, "post_id": 47317756, "comment_id": 81587160, "body": "The &quot;slightly magical&quot; bit is about two things, I suspect. The first is about <code>ST</code>; try <code>runST $ return ()</code> and <code>runST `id` return ()</code> in ghci to see what that one is about. This is a pretty simple hack; you can take as a mental model that GHC erases <code>$</code> and turns it into plain function application whenever it is fully applied. More details <a href=\"https://stackoverflow.com/q/9468963/791604\">in this question</a>. The second bit is about levity polymorphism. I&#39;m not sure that we have a canonical writeup about it here on SO."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510783389, "post_id": 47317756, "comment_id": 81587208, "body": "@DanielWagner Thank you! I think this may be a proper answer."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1510833702, "post_id": 47317756, "comment_id": 81608873, "body": "@DanielWagner This is very good answer regarding Levity Polymorphism: <a href=\"https://stackoverflow.com/questions/35318562/what-is-levity-polymorphism\" title=\"what is levity polymorphism\">stackoverflow.com/questions/35318562/&hellip;</a> For me magic of <code>($)</code> operator starts when you type <code>:info $</code> in <code>ghci</code>."}], "tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 16, "last_activity_date": 1510782111, "creation_date": 1510782111, "answer_id": 47317756, "question_id": 47317555, "link": "https://stackoverflow.com/questions/47317555/is-there-a-relationship-between-dollar-sign-and-id-function-in-haskell/47317756#47317756", "title": "Is there a relationship between dollar sign ($) and id function in Haskell?", "body": "<p>Haskell indeed is strongly typed; the issue is related to some hackery specific to the <code>($)</code> operator. Unfortunatelly, I have no idea what is it about: hopefully someone will answer your question 3 (and question 4 automatically).</p>\n\n<p>Concerning question 1, look at the types:</p>\n\n<pre><code>id :: a -&gt; a\n($) :: (a -&gt; b) -&gt; (a -&gt; b)\n</code></pre>\n\n<p>Rename <code>c = a -&gt; b</code> and you get <code>($) :: c -&gt; c</code>, which means that the type of <code>($)</code> is a specification of the type of <code>id</code>, so that at least types allow us to use <code>id</code> to implement <code>($)</code>.</p>\n\n<p>Now, look at the definition of <code>($)</code>:</p>\n\n<pre><code>f $ x = f x\n</code></pre>\n\n<p>Let's rewrite it a bit:</p>\n\n<pre><code>($) f = \\x -&gt; f x\n</code></pre>\n\n<p>And apply eta-reduction:</p>\n\n<pre><code>($) f = f\n</code></pre>\n\n<p>Now it is clearly seen that <code>($)</code> is just <code>id</code> with a bit more specific type (so that <code>f</code> is always a function).</p>\n\n<p>Note that it doesn't work another way round, since the type of <code>($)</code> is more restrictive. For example, you can call <code>id 5</code> and get <code>5</code> as a result, but <code>($) 5</code> won't typecheck: <code>5</code> doesn't have type of the form <code>a -&gt; b</code>.</p>\n\n<p>The point of <code>($)</code> is that it has very low priority and allows to avoid braces around the arguments of <code>f</code>, and can be used like</p>\n\n<pre><code>someFunction $ whatever complex computation you dont need braces around\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1510784189, "post_id": 47317800, "comment_id": 81587613, "body": "The unlifted bit is no longer so magical. <code>($) :: forall (rep :: RuntimeRep) arg (res :: TYPE rep). (arg -&gt; res) -&gt; arg -&gt; res</code>. The impredicative bit is still magical. I really think they should just bite the bullet and use <code>($) :: a -&gt; a</code>; guess that could be a libraries proposal...."}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510820791, "post_id": 47317800, "comment_id": 81600117, "body": "@dfeuer: Allowing <code>do</code> (and <code>let</code>, <code>case</code>, lambda, &amp;c.) to be arguments to functions (<a href=\"https://ghc.haskell.org/trac/ghc/wiki/ArgumentDo\" rel=\"nofollow noreferrer\"><code>ArgumentDo</code></a>) would also obviate the problem, since you could just write <code>runST do \u2026</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1510837621, "post_id": 47317800, "comment_id": 81611575, "body": "@JonPurdy, that would do nothing for backwards compatibility."}, {"owner": {"reputation": 940, "user_id": 8393442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649ba3617086819804333c4dc40a4715?s=128&d=identicon&r=PG", "display_name": "luispauloml", "link": "https://stackoverflow.com/users/8393442/luispauloml"}, "edited": false, "score": 0, "creation_date": 1510953927, "post_id": 47317800, "comment_id": 81671792, "body": "This question turned out to go &quot;deeper&quot; than I thought it would. I learned quite a lot reading related stuff. What the note meas by &quot;different types in different scenarios&quot; is actually, like, the polymorphic types reduce to different types depending on where <code>$</code> is applied. Is that right? And I stil don&#39;t understand what &quot;wired in&quot; means. Is that some English idiom I don&#39;t know about?"}, {"owner": {"reputation": 940, "user_id": 8393442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649ba3617086819804333c4dc40a4715?s=128&d=identicon&r=PG", "display_name": "luispauloml", "link": "https://stackoverflow.com/users/8393442/luispauloml"}, "edited": false, "score": 0, "creation_date": 1512260750, "post_id": 47317800, "comment_id": 82186478, "body": "Since there are no more answers, I will accept this one. Could you edit it to answer my questions in order?"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 12, "last_activity_date": 1512291604, "last_edit_date": 1512291604, "creation_date": 1510782274, "answer_id": 47317800, "question_id": 47317555, "link": "https://stackoverflow.com/questions/47317555/is-there-a-relationship-between-dollar-sign-and-id-function-in-haskell/47317800#47317800", "title": "Is there a relationship between dollar sign ($) and id function in Haskell?", "body": "<blockquote>\n  <ol>\n  <li>What do they mean by saying that <code>($) = id</code>?</li>\n  </ol>\n</blockquote>\n\n<p>The function <code>($)</code> could be defined as</p>\n\n<pre><code>($) f x = f x\n</code></pre>\n\n<p>i.e. taking a function and an argument and returning the result of the application. Equivalently, thanks to currying, we can interpret that as taking only <code>f</code> and returning a function of <code>x</code>.</p>\n\n<pre><code>($) f = \\x -&gt; f x\n</code></pre>\n\n<p>Here, we can note that the function <code>\\x -&gt; f x</code> maps any input <code>x</code> to <code>f x</code> -- that's also what <code>f</code> does! So, we can simplify the definition to</p>\n\n<pre><code>($) f = f\n</code></pre>\n\n<p>Now, this is the same as the identity function definition <code>id y = y</code>, so we might as well write</p>\n\n<pre><code>($) = id\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>In which cases is that statement true? Does that mean I can use one instead of the other?</li>\n  </ol>\n</blockquote>\n\n<p>The equation holds always, but there are two caveats.</p>\n\n<p>The first one is that <code>($)</code> has a more restricted type than the one of <code>id</code>, since <code>($) f = f</code> holds only for a function <code>f</code>, not for any value <code>f</code>. This means that you can replace <code>($)</code> with <code>id</code>, but not vice versa. When writing</p>\n\n<pre><code>($) = id\n</code></pre>\n\n<p>one could make the implicit type argument explicit and write that, for any types <code>a</code> and <code>b</code></p>\n\n<pre><code>($) @ a @ b = id @ (a-&gt;b)\n</code></pre>\n\n<p>The other caveat is that, in the presence of higher-ranked function, <code>($)</code> receives some special handling during type checking, while <code>id</code> does not.\nThis is point 3 blow.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>In the base, what is meant by saying that <code>($)</code> is \"slightly magical (it can return unlifted types)\" and \"being wired in\"?</li>\n  </ol>\n</blockquote>\n\n<p>Normally, in polymorphic functions such as</p>\n\n<pre><code>id :: forall a . a -&gt; a\n</code></pre>\n\n<p>the type variable <code>a</code> can be instantiated to other types, but only under some restrictions. For instance, <code>a</code> can be instantiated to <code>Int</code>, but can not be instantiated to another polymorphic type <code>forall b . ...</code>. This keeps the type system <em>predicative</em>, which helps greatly during type inference.</p>\n\n<p>Usually, this is not an issue in everyday programming. However, some functions use rank-2 types, e.g. <code>runST</code></p>\n\n<pre><code>runST :: (forall s. ST s x) -&gt; x\n</code></pre>\n\n<p>If we write</p>\n\n<pre><code>runST (some polymorphic value here)\n</code></pre>\n\n<p>the type system can type check that. But if we use the common idiom</p>\n\n<pre><code>runST $ some polymorphic value here\n</code></pre>\n\n<p>then the type inference engine has to take the type of <code>($)</code></p>\n\n<pre><code>($) :: forall a b . (a -&gt; b) -&gt; a -&gt; b\n</code></pre>\n\n<p>and choose <code>a ~ forall s. ST s x</code> which is polymorphic, hence forbidden.</p>\n\n<p>Since this idiom is too common, the GHC developers decided to add a special case to the typing of <code>($)</code> to allow this. Since this is a bit ad-hoc, if you define your own <code>($)</code> (possibly under another name), and try to type check <code>runST $ ...</code> this will fail since it does not use the special case.</p>\n\n<p>Further, <code>a</code> can not be instantiated to unboxed types such as <code>Int#</code>, or unboxed tuples <code>(# Int#, Int# #)</code>. These are GHC extensions which allow writing functions which pass a \"raw\" integer, without the usual thunk wrapper. This can change the semantics, e.g. making functions stricter than they are. Unless you want to squeeze more performance from some numeric code, you can ignore these.</p>\n\n<hr>\n\n<p>(I'm leaving this part here, but lisyarus already covered it more precisely.)</p>\n\n<pre><code>f $ x = f x\n-- i.e.\n($) f x = f x\n-- i.e.\n($) f x = id f x\n-- eta contraction\n($) f = id f\n-- eta contraction\n($) = id\n</code></pre>\n\n<p>Basically, <code>($)</code> is <code>id</code>, but with a more restrictive type. <code>id</code> can be used on arguments of any type, <code>($)</code> instead takes a function argument.</p>\n\n<pre><code>($) :: (a -&gt; b) -&gt; a -&gt; b\n-- is better read as\n($) :: (a -&gt; b) -&gt; (a -&gt; b)\n-- which is of the form (c -&gt; c) with c = (a -&gt; b)\n</code></pre>\n\n<p>Note that <code>id :: c -&gt; c</code>, so the type of <code>($)</code> is indeed a special case.</p>\n\n<blockquote>\n  <p>And what about \"different types in different scenarios\"? I thought that since Haskell is a strongly typed language, once you define a type signature, that signature is retained until the end of Time. Is that not true? Are there cases where one can change a function's type?</p>\n</blockquote>\n\n<p>In the code of the libraries which define <code>($)</code>, GHC has to play some tricks to get the special typing rules to work for the <em>other</em> libraries and programs. For that, apparently it is required not to use <code>($)</code> in said library. Unless you are developing GHC or the <code>base</code> module which happens to define <code>($)</code>, you can ignore this. It is an implementation detail internal to the compiler, not something that the user of the compiler and libraries must know.</p>\n"}], "owner": {"reputation": 940, "user_id": 8393442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649ba3617086819804333c4dc40a4715?s=128&d=identicon&r=PG", "display_name": "luispauloml", "link": "https://stackoverflow.com/users/8393442/luispauloml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 2, "accepted_answer_id": 47317800, "answer_count": 2, "score": 18, "last_activity_date": 1523342790, "creation_date": 1510781330, "last_edit_date": 1523342790, "question_id": 47317555, "link": "https://stackoverflow.com/questions/47317555/is-there-a-relationship-between-dollar-sign-and-id-function-in-haskell", "title": "Is there a relationship between dollar sign ($) and id function in Haskell?", "body": "<p>One of these days I was reading comments on the <a href=\"http://mightybyte.github.io/monad-challenges/\" rel=\"noreferrer\">Monad Challenge</a> (which I highly recommend to any beginner in Haskell, like myself), and I ended up on <a href=\"https://news.ycombinator.com/item?id=10935313\" rel=\"noreferrer\">this thread</a> where I read that <code>($) = id</code>.</p>\n\n<blockquote>\n  <blockquote>\n    <p>I don't know about scaring people, but many programming languages have concepts that are best demonstrated with small examples that make people say \"whoa\".</p>\n    \n    <p>For example, it's amazing that append() in Prolog can be run \"backwards\" from the concatenated result to yield all the lists that can be concatenated to produce it. Or that the monadic bind operator in Haskell (>>=) can be defined in terms of join and fmap, or that ($) = id.</p>\n  </blockquote>\n  \n  <p><code>($) = id !?</code> </p>\n  \n  <p>&lt; tries it out in Raskell/Ghci ></p>\n  \n  <p>I see now why it's true, but still... Whoah!! Thanks for that! (...)</p>\n</blockquote>\n\n<p>I then checked the <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/src/GHC.Base.html\" rel=\"noreferrer\"><code>base</code>-4.10.0.0</a> code, looking for the definitions of <code>($)</code> and <code>id</code>, but right at the top I read this:</p>\n\n<pre>NOTA BENE: Do NOT use ($) anywhere in this module! The type of ($) is\nslightly magical (it can return unlifted types), and it is wired in.\nBut, it is also *defined* in this module, with a non-magical type.\nGHC gets terribly confused (and *hangs*) if you try to use ($) in this\nmodule, because it has different types in different scenarios.\n\nThis is not a problem in general, because the type ($), being wired in, is not\nwritten out to the interface file, so importing files don't get confused.\nThe problem is only if ($) is used here. So don't!</pre>\n\n<p>And their implementations are:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- | Identity function.\nid                      :: a -&gt; a\nid x                    =  x\n\n-- | Application operator.\n{-# INLINE ($) #-}\n($)                     :: (a -&gt; b) -&gt; a -&gt; b\nf $ x                   =  f x\n</code></pre>\n\n<p>I tried swapping one by the other on GHCi and all I got was type errors (as I expected). Now, I have more questions than what I started with:</p>\n\n<ol>\n<li>What do they mean by saying that <code>($) = id</code>?</li>\n<li>In which cases is that statement true? Does that mean I can use one instead of the other?</li>\n<li>In the <code>base</code>, what is meant by saying that <code>($)</code> is \"slightly magical (it can return unlifted types)\" and \"being wired in\"?</li>\n<li>And what about \"different types in different scenarios\"? I thought that since Haskell is a strongly typed language, once you define a type signature, that signature is retained until the end of Time. Is that not true? Are there cases where one can change a function's type?</li>\n</ol>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 81794, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "edited": false, "score": 3, "creation_date": 1510781332, "post_id": 47317536, "comment_id": 81586164, "body": "Hi! What have you tried so far? Why didn&#39;t it work? What couldn&#39;t you figure out how to do?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1510781653, "post_id": 47317536, "comment_id": 81586324, "body": "Try to match all 5 cases explicitly with <code>if</code>/<code>else</code> (or guards if you prefer). Then simplify."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1510781769, "post_id": 47317536, "comment_id": 81586378, "body": "Alternatively, especially if your input is a list, <code>nub</code> is your friend."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 2, "creation_date": 1510782440, "post_id": 47317536, "comment_id": 81586727, "body": "Start with a clear problem statement. I&#39;m guessing you mean &quot;check if any two of the inputs are equal&quot; and &quot;count the number of distinct elements&quot;. Then write the type signatures you want. Then start trying to break down the problem into smaller parts and solve those"}], "answers": [{"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510784805, "post_id": 47318077, "comment_id": 81587919, "body": "(mind, <code>distinct</code> needs a type signature or else the monomorphism restriction monster will get you)"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1510784002, "last_edit_date": 1510784002, "creation_date": 1510783465, "answer_id": 47318077, "question_id": 47317536, "link": "https://stackoverflow.com/questions/47317536/haskell-check-for-distinct-value-within-three-variables-count-distinct-variab/47318077#47318077", "title": "Haskell: Check for distinct value within three variables &amp; count distinct variables", "body": "<p>sort and group elements and count the equivalence classes, which will give you the count of distinct elements</p>\n\n<pre><code>distinct = length . group . sort\n</code></pre>\n\n<p>use the above definition, if there are duplicates the number of distinct elements will be less than the number of elements.</p>\n\n<pre><code>dups = liftM2 (/=) length distinct\n</code></pre>\n\n<p>this is a fancier way of writing it simply</p>\n\n<pre><code>dups x = length x /= distinct x\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6403058, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6ccf7413b25795f562733a0653e00411?s=128&d=identicon&r=PG&f=1", "display_name": "muka90", "link": "https://stackoverflow.com/users/6403058/muka90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1510784002, "creation_date": 1510781250, "last_edit_date": 1510781624, "question_id": 47317536, "link": "https://stackoverflow.com/questions/47317536/haskell-check-for-distinct-value-within-three-variables-count-distinct-variab", "title": "Haskell: Check for distinct value within three variables &amp; count distinct variables", "body": "<p>I'm new to Haskell and trying to figure out how I could realise the following two functions.</p>\n\n<ol>\n<li>Input 3 integers and check if two of them are equal (e.g. <code>1,2,2 -&gt; true</code> and <code>1,2,3 -&gt; false</code>)</li>\n<li>Input 3 integers and count different values (e.g. <code>1,1,2 -&gt; 2</code>)</li>\n</ol>\n\n<p>Thank you very much. </p>\n"}, {"tags": ["haskell", "functional-programming", "monads"], "comments": [{"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 6, "creation_date": 1510780199, "post_id": 47317243, "comment_id": 81585592, "body": "Because <code>ma &gt;&gt;= k = join $ fmap k ma</code> is more powerful. Your variant is just alias to <code>fmap</code>, <code>ma &gt;&gt;= k = fmap k ma ~ (&gt;&gt;=) = flip fmap</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1510782057, "post_id": 47317243, "comment_id": 81586530, "body": "It&#39;s not burden, it&#39;s an opportunity. The whole point of monads is that they are not just functors with <code>fmap</code> and <code>&lt;$&gt;</code>. Of course in your specific example, those would have sufficed."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510785527, "post_id": 47317243, "comment_id": 81588239, "body": "<code>&gt;&gt;=</code> wasn&#39;t defined out of thin error; a function of type <code>a -&gt; m b</code> for a monad <code>m</code> is a Kleisli arrow, and its use is firmly grounded in category theory. Monads are useful in programming <i>because</i> they &quot;trap&quot; values, making it easy to lift a value into the monad but hard to get out."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1510786768, "post_id": 47317243, "comment_id": 81588689, "body": "<code>[0,1..] &gt;&gt;= \\i -&gt; [i * 2]</code> doesn&#39;t return <code>[[0], [2]..]</code> it returns <code>[0,2,4,6,8,..]</code> just like  <code>fmap (*2)</code> would do however with the bind operator you have the option to use <code>return</code> to make it return a monad properly so <code>[0,1..] &gt;&gt;= \\i -&gt; return [i * 2]</code> would result <code>[[0],[2],[4],[6],[8],..]</code>. Yet with <code>fmap</code> its not the case <code>take 5 $ (\\i -&gt; [i * 2]) &lt;$&gt; [0..]</code> would return <code>[[0],[2],[4],[6],[8],..]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1510781862, "creation_date": 1510781862, "answer_id": 47317697, "question_id": 47317243, "link": "https://stackoverflow.com/questions/47317243/haskell-operation-why-is-the-function-argument-required-to-return-another-m/47317697#47317697", "title": "Haskell &gt;&gt;= operation: why is the function argument required to return another Monad?", "body": "<p>A major feature of a monad is to be able to \"flatten\" (<code>join</code>). This is necessary to define a nice form of composition.</p>\n\n<p>Consider the composition of two functions with side effects, say in the <code>IO</code> monad:</p>\n\n<pre><code>foo :: A -&gt; IO B\nbar :: B -&gt; IO C\n</code></pre>\n\n<p>If <code>&gt;&gt;=</code> was only <code>fmap</code> (without the final <code>join</code>) pass, the composition</p>\n\n<pre><code>\\a -&gt; foo a &gt;&gt;= bar\n</code></pre>\n\n<p>would mean</p>\n\n<pre><code>\\a -&gt; fmap bar (foo a)\n-- i.e.\nfmap bar . foo\n</code></pre>\n\n<p>which does look as a nice composition, but unfortunately has type <code>A -&gt; IO (IO C)</code> ! If we can't flatten the nested <code>IO</code>, every composition would add yet another layer, and we would end up with result types of the form <code>IO (IO (IO ...))</code> showing the number of compositions.</p>\n\n<p>At best, this would be inconvenient. At worst, this would prevent recursion such as</p>\n\n<pre><code>loop = readLn &gt;&gt;= \\x -&gt; print x &gt;&gt;= \\_ -&gt; loop\n</code></pre>\n\n<p>since it leads to a type with an infinite nesting of <code>IO</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510797806, "post_id": 47317702, "comment_id": 81591836, "body": "You <i>can</i> get these results with just <code>fmap</code>... but it wouldn&#39;t be sensible to (e.g. <code>fmap (\\x -&gt; 2*x+1) [0..]</code> is <code>[1,3..]</code>, and <code>fmap (\\x -&gt; x + mod x 2 * (div x 2 - 1)) [0..]</code> is your <code>[0,0,2,3,4,6,6,9...]</code> value). But make the input list finite and all of a sudden the shape changes, which is not an effect <code>fmap</code> can have."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510797877, "post_id": 47317702, "comment_id": 81591859, "body": "The point was that your can&#39;t produce fewer or more than one value with <code>fmap</code>."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510798995, "post_id": 47317702, "comment_id": 81592155, "body": "I agree that&#39;s the point. And I think it&#39;s easy to make that point crystal clear: just avoid infinite lists in your examples."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510801911, "post_id": 47317702, "comment_id": 81592931, "body": "Well, those were the OP&#39;s examples. I was trying to keep close to the original to minimize cognitive overhead."}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 14, "last_activity_date": 1513177905, "last_edit_date": 1513177905, "creation_date": 1510781878, "answer_id": 47317702, "question_id": 47317243, "link": "https://stackoverflow.com/questions/47317243/haskell-operation-why-is-the-function-argument-required-to-return-another-m/47317702#47317702", "title": "Haskell &gt;&gt;= operation: why is the function argument required to return another Monad?", "body": "<p>What you're proposing is to simply define the bind operator to be equal to <code>fmap</code>, but with arguments swapped:</p>\n\n<pre><code>ma &gt;&gt;= k = fmap k ma\n-- is equivalent to:\n(&gt;&gt;=) = flip fmap\n</code></pre>\n\n<p>In which case, why not just use the <code>fmap</code> itself, or its operator form <code>&lt;$&gt;</code>?</p>\n\n<pre><code>(*2) &lt;$&gt; [0,1..]\n&gt; [0,2,4,6,...]\n</code></pre>\n\n<p>However, this does not cover <em>all</em> cases where <code>bind</code> may be used. The difference is that monads are more powerful than functors. Where functors only let you produce exactly one output for every input, monads let you do all kinds of crazy stuff.</p>\n\n<p>Consider, for example, the following:</p>\n\n<pre><code>[0,1,2,3] &gt;&gt;= \\i -&gt; [i*2, i*3]\n&gt; [0,0,2,3,4,6,6,9]\n</code></pre>\n\n<p>Here, the function produces two values for each input. This cannot be expressed via just <code>fmap</code>. This requires <code>join</code>ing the resulting values.</p>\n\n<p>Here's another, even less obvious example:</p>\n\n<pre><code>[0,1,2,3,4,5] &gt;&gt;= \\i -&gt; if i `mod` 2 == 0 then [] else [i]\n&gt; [1,3,5]\n</code></pre>\n\n<p>Here, the function either produces a value or doesn't. The empty list is technically still a value in the List monad, yet it cannot be obtained by <code>fmap</code>ing the input.</p>\n"}], "owner": {"reputation": 293, "user_id": 6675961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46f11b114fe506c0a7b305e730a02a64?s=128&d=identicon&r=PG&f=1", "display_name": "northlane", "link": "https://stackoverflow.com/users/6675961/northlane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 47317702, "answer_count": 2, "score": 10, "last_activity_date": 1513177905, "creation_date": 1510779989, "question_id": 47317243, "link": "https://stackoverflow.com/questions/47317243/haskell-operation-why-is-the-function-argument-required-to-return-another-m", "title": "Haskell &gt;&gt;= operation: why is the function argument required to return another Monad?", "body": "<p>Considering the expression: </p>\n\n<pre><code>[0,1..] &gt;&gt;= \\i -&gt; [i * 2]\n</code></pre>\n\n<p>In the definition of <code>&gt;&gt;=</code> for List, the lambda function <code>\\i -&gt; [i * 2]</code> is mapped over the list argument via fmap, resulting in a list of lists, <code>[[0], [2]..]</code>. So <code>&gt;&gt;=</code> needs to flatten the result using a join function in order to return the list: <code>[0, 2..]</code></p>\n\n<p>According to <a href=\"https://www.schoolofhaskell.com/school/starting-with-haskell/basics-of-haskell/13-the-list-monad\" rel=\"noreferrer\">this source</a>: \"...the definition of bind in terms of fmap and join works for every monad m: <code>ma &gt;&gt;= k = join $ fmap k ma</code>\"</p>\n\n<p>So why is it necessary to place the burden of returning a monad on the function supplied to >>=? Why not simply define bind like so? </p>\n\n<pre><code>ma &gt;&gt;= k = fmap k ma\n</code></pre>\n\n<p>This way you don't have to deal with flattening the result.</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 2, "creation_date": 1510777942, "post_id": 47316482, "comment_id": 81584285, "body": "Your function signature looks like it should be <code>[Grid] -&gt; IO [Grid]</code>. Your <code>IO String</code> isn&#39;t actually a parameter. You&#39;re pulling it in from a globally defined <code>getInput</code>."}, {"owner": {"reputation": 63, "user_id": 8947589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7730c4ccf5b0ba18bfab2f335f5172f4?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/8947589/christian"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510778911, "post_id": 47316482, "comment_id": 81584873, "body": "World like a charm, thanks ! &lt;3"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 2, "creation_date": 1510791877, "post_id": 47316482, "comment_id": 81590257, "body": "You might consider breaking out a &quot;pure&quot; function <code>String -&gt; [Grid] -&gt; [Grid]</code> to do the logic. Then you call this new function from a function such as the one you have here that does the IO and passes the string into the new function."}], "owner": {"reputation": 63, "user_id": 8947589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7730c4ccf5b0ba18bfab2f335f5172f4?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/8947589/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510777573, "creation_date": 1510776978, "last_edit_date": 1510777573, "question_id": 47316482, "link": "https://stackoverflow.com/questions/47316482/haskell-recursive-function-user-input-list-of-some-sort-list-of-some", "title": "Haskell - Recursive function - (User input, list of some sort) -&gt; (list of some sort)", "body": "<p>hi I need a recursive function where I give the function an input (IO String) and a list of some sort. This function will then based of the last element of the list and the user input, give me a new element. This element will be put in the list and it will be returned. The problem is that I always get an error with the input. </p>\n\n<pre><code>func :: IO String -&gt; [Grid] -&gt; [Grid] \nfunc gridList = input &lt;- getInput\n         do something...\n</code></pre>\n\n<p>I know the definition of the function is wrong, but I have no idea have I am gonne make it right. If someone have any suggestion, I would be greatful! :)</p>\n\n<p>NOTE: getInput is a function which gives me a IO String</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 1, "creation_date": 1510774719, "post_id": 47315623, "comment_id": 81582613, "body": "I don&#39;t think you can have a function of that type. You can make a function where the <code>n</code> part of the type is &quot;hidden&quot; in a existential type, but I&#39;m not sure if that maintains the usefulness of this. I have written something along those lines <a href=\"https://github.com/roboguy13/natural-constructions/blob/master/examples/vect/Vect.hs\" rel=\"nofollow noreferrer\">here</a> using <a href=\"https://github.com/roboguy13/natural-constructions/blob/master/src/Data/Natural.hs\" rel=\"nofollow noreferrer\">this</a>. That hasn&#39;t been cleaned up to be as readable it probably could be yet, hah."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510775907, "post_id": 47315623, "comment_id": 81583241, "body": "With that type, <code>fromList [] :: NSL (&#39;Incr &#39;Zero) Void</code> would type check. The only possible way to implement this is using infinite recursion. You want an existential, not universal, quantification on <code>n</code>."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1510781266, "post_id": 47315623, "comment_id": 81586134, "body": "I&#39;ve marked this question as a duplicate because, although the lead-up to the question is different (you are not using singletons`), the answer is still spot on."}], "owner": {"reputation": 31, "user_id": 8947298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa95d8b4d31b769bda8f03f2ef4c1ff4?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Richardson", "link": "https://stackoverflow.com/users/8947298/andrew-richardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1510781168, "answer_count": 0, "score": 3, "last_activity_date": 1510779384, "creation_date": 1510773680, "last_edit_date": 1510774703, "question_id": 47315623, "link": "https://stackoverflow.com/questions/47315623/converting-a-list-a-to-a-type-level-length-indexed-list", "closed_reason": "Duplicate", "title": "Converting a list ([a]) to a type-level length-indexed list", "body": "<p>I'm fairly inexperienced with Haskell, but essentially I've started working with DataKinds and GADTs. I have a GADT which represents a list that \"knows\" its length: </p>\n\n<pre><code>data NSL :: N -&gt; * -&gt; * where\nNull :: NSL 'Zero a\nMore :: a -&gt; NSL n a -&gt; NSL ('Incr n) a\n</code></pre>\n\n<p>which is created from the natural data representation</p>\n\n<pre><code>data N :: * where\n    Zero :: N\n    Incr :: N -&gt; N\n</code></pre>\n\n<p>So my question is, how do I create a function</p>\n\n<pre><code>fromList :: [a] -&gt; NSL n a\n</code></pre>\n\n<p>I've tried working with Foldable and similar ideas, but I can't quite wrap my head around it. </p>\n"}, {"tags": ["haskell", "maybe"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510773645, "post_id": 47315356, "comment_id": 81582061, "body": "This tries to apply <code>(++)</code> to the non-list <code>\\case ...</code>, which makes little sense. I&#39;d suggest to try <code>foldr (\\x rest -&gt; case x of ...) []</code>."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510776473, "post_id": 47315356, "comment_id": 81583542, "body": "<code>\\case Nothing -&gt; []; Just y -&gt; [y]</code> can also be spelled <code>toList</code>."}], "answers": [{"tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 1, "last_activity_date": 1510774436, "creation_date": 1510774436, "answer_id": 47315817, "question_id": 47315356, "link": "https://stackoverflow.com/questions/47315356/filtering-nothing-from-a-list-with-foldr-foldl/47315817#47315817", "title": "Filtering Nothing from a List with foldr/foldl", "body": "<pre><code>Just y -&gt; y\n</code></pre>\n\n<p>If this needs to unify with <code>[]</code> then you should have said <code>[Maybe [a]]</code> in the function type signature.  That or perhaps you meant <code>Just y -&gt; [y]</code>.</p>\n\n<pre><code>(++) \\case Nothing -&gt; []; Just y -&gt; y\n</code></pre>\n\n<p>That's just syntacticly nonsense.  I think you want 1. function composition 2. partial application of the first argument:</p>\n\n<pre><code>\\b -&gt; (b ++) . \\case Nothing -&gt; []; Just y -&gt; y\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8947239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b7rnKXtWt1s/AAAAAAAAAAI/AAAAAAAAALA/D3OEHPkfQQI/photo.jpg?sz=128", "display_name": "Frederik Sandmann", "link": "https://stackoverflow.com/users/8947239/frederik-sandmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510774436, "creation_date": 1510772712, "question_id": 47315356, "link": "https://stackoverflow.com/questions/47315356/filtering-nothing-from-a-list-with-foldr-foldl", "title": "Filtering Nothing from a List with foldr/foldl", "body": "<p>I'm trying to implement catMaybes with List folding but have no clue how i should start.</p>\n\n<p>My general idea is to use foldl and use a case to filter for Nothing and Just. After that the same function has to concat the found parts together my code this far looks like this:</p>\n\n<pre><code>{-# LANGUAGE LambdaCase #-}\ncatMaybes :: [Maybe a] -&gt; [a]\ncatMaybes xs = foldl((++) \\case Nothing -&gt; []; Just y -&gt; y) [] xs\n</code></pre>\n\n<p>I'm getting alot of errors when compiling...\nI think i need a push in the right direction to solve this. Thank you for your help!</p>\n"}, {"tags": ["list", "haskell", "recursion", "multiplication"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510773115, "post_id": 47315200, "comment_id": 81581754, "body": "If you want to cheat by converting back and forth between <code>Integer</code>: <code>longMulti x y = longMulti x y = map (read . (:[])) . show $ read (concatMap show x) * read (concatMap show y)</code> (it will need a type signature to work correctly because of <code>read</code>).  Otherwise you will have to think about how multiplication works, which is what I think you are actually after.  Step 1: before coding, explain how to multiply two numbers in gruesome detail."}], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1510793957, "last_edit_date": 1510793957, "creation_date": 1510791444, "answer_id": 47319509, "question_id": 47315200, "link": "https://stackoverflow.com/questions/47315200/long-multiplication-in-haskell/47319509#47319509", "title": "Long multiplication in Haskell", "body": "<p>Rather than converting back and forth to <code>String</code> with <code>show</code>, you can use modular arithmetic.</p>\n\n<pre><code>toDigits :: Integral a =&gt; a -&gt; [a]\ntoDigits = go [] where\n  go acc 0 = acc\n  go acc x = let (xs, x') = x `divMod` 10\n             in go (x':acc) xs\n</code></pre>\n\n<p>Then <code>fromDigits</code> can be implemented with a <code>foldl</code>.</p>\n\n<pre><code>import Data.List (foldl')\n\nfromDigits :: Integral a =&gt; [a] -&gt; a\nfromDigits = foldl' (\\acc x -&gt; acc * 10 + x) 0\n</code></pre>\n\n<p>or indeed with <code>zipWith (*)</code></p>\n\n<pre><code>-- note: this is significantly slower than above because of the necessary\n--       calls to reverse.\nfromDigits = sum . reverse . (zipWith (*) [10^i | i &lt;- [0..]]) . reverse\n</code></pre>\n\n<hr>\n\n<p>What's left is the multiplication itself. Do be careful though, because the naive approach doesn't work here.</p>\n\n<pre><code>terms = [112, 13]\n[xs, ys] = map toDigits terms\nwrongAnswer = fromDigits $ zipWith (*) xs ys\n-- 13\n</code></pre>\n\n<p><code>zipWith (*) [1, 1, 2] [1, 3]</code>, as above, becomes <code>[1*1, 1*3]</code> which is obviously wrong when you sit down and imagine it. Well then, we have to cross multiply and sum, right?</p>\n\n<pre><code>alsoWrong = fromDigits $ answerDigits where\n  answerDigits = zipWith (+) [map (*y) xs | y &lt;- ys]\n-- 448\n</code></pre>\n\n<p>This expands out to</p>\n\n<pre><code>zipWith (+) [map (*1) [1, 1, 2], map (*3) [1, 1, 2]]\n= zipWith (+) [[1, 1, 2], [3, 3, 6]]\n= [(1+3), (1+3), (2+6)]\n= [4, 4, 8] -- fromDigits yields 448\n</code></pre>\n\n<p>This is equivalent to doing by hand:</p>\n\n<pre><code>    112\n   x 13\n   ----\n    336\n    112  &lt;--- note this should be slid to the left\n   ----\n    448\n</code></pre>\n\n<p>So instead we can apply a similar technique to the folding <code>fromDigits</code> to each term.</p>\n\n<pre><code>sum $ map fromDigits $ zipWith (\\p xs -&gt; map (*p) xs) tens eachProduct where\n  tens        = [10^i | i &lt;- [len-1, len-2..0]]\n  eachProduct = [map (*y) xs | y &lt;- ys]\n  len         = length eachProduct\n</code></pre>\n\n<p>ending up with:</p>\n\n<pre><code>longMultiplication :: Integral a =&gt; a -&gt; a -&gt; a\nlongMultiplication x y = sum . map fromDigits . zipWith mapper tens $ eachProduct where\n    xs          = toDigits x\n    ys          = toDigits y\n    mapper      = (\\p xs -&gt; map (*p) xs)\n    tens        = [10^i | i &lt;- [len-1, len-2..0]]\n    len         = length eachProduct\n    eachProduct = [map (*y') xs | y' &lt;- ys]\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 8260539, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45974390fcb7548c100f887df0ad6496?s=128&d=identicon&r=PG&f=1", "display_name": "bubu", "link": "https://stackoverflow.com/users/8260539/bubu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510793957, "creation_date": 1510772200, "question_id": 47315200, "link": "https://stackoverflow.com/questions/47315200/long-multiplication-in-haskell", "title": "Long multiplication in Haskell", "body": "<p>How would you implement long multiplication on lists in Haskell. The idea being that if you have two numbers, let's say 112 and 13. These numbers can be represented as lists [1,1,2] and [1,3] and you want to multiply them together to get a list [1,4,5,6]. I want to do this recursively as I want it to work on any size list. My \"functionWhichSumsLists\" is a function I will define later which will add two lists element-wise.</p>\n\n<pre><code>longMulti l1 [] = p1\nlongMulti [] l2 = q1\nlongMulti (li:l1) (lii:l2) = functionWhichSumsLists [li*lii] (0:(longMulti l1 l2))\n</code></pre>\n"}, {"tags": ["haskell", "io", "show"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 0, "creation_date": 1510769876, "post_id": 47314543, "comment_id": 81579878, "body": "Thanks for answer. I want to print it to output. For exmaple to use print or putStrLn."}, {"owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "reply_to_user": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 1, "creation_date": 1510769961, "post_id": 47314543, "comment_id": 81579942, "body": "@lukaskiss Does my solution (using error) work for you then, or were you looking for something else?"}, {"owner": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 0, "creation_date": 1510770041, "post_id": 47314543, "comment_id": 81579989, "body": "Yes it works :) But I am trying to solve this Exercise: &quot;The  function uses error , so its callers cannot handle errors. Rewrite the function to fix this problem&quot;"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 0, "creation_date": 1510770250, "post_id": 47314543, "comment_id": 81580105, "body": "@lukaskiss Look into the Maybe data type. If it&#39;s not a number, return Nothing, else return Just the number. Alternatively, you can use Either to provide error strings like you have been doing before."}, {"owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "reply_to_user": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 0, "creation_date": 1510770344, "post_id": 47314543, "comment_id": 81580157, "body": "@lukaskiss that would require some more fundamental changes.  Instead of your function being <code>String -&gt; Int</code> you might use <code>String -&gt; Maybe Int</code> or if you need the error message <code>String -&gt; Either String Int</code>"}, {"owner": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 0, "creation_date": 1510770817, "post_id": 47314543, "comment_id": 81580421, "body": "Thank for you answer, I will try to remake it to Maybe option. By the way, how use print function inside of function ?"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 1, "creation_date": 1510770975, "post_id": 47314543, "comment_id": 81580500, "body": "@lukaskiss You can&#39;t print things out in a pure function, you have to either make it an IO function, use unsafe ways like unsafePerformIO, or use something like the writer monad to lazily print results as they execute. Generally the best way is to leave it a pure function and return the results you need to print"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "edited": false, "score": 1, "creation_date": 1510774344, "post_id": 47314543, "comment_id": 81582416, "body": "@lukaskiss Until you become an Haskell expert, never use <code>unsafePerformIO</code>. Just pretend it does not exist -- it&#39;s called unsafe for a reason. If you really must print within that function, read about the IO monad and how to use that. I think it&#39;s better if you do not print anything, and keep the function pure."}], "tags": [], "owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "is_accepted": true, "score": 2, "last_activity_date": 1510769971, "last_edit_date": 1510769971, "creation_date": 1510769694, "answer_id": 47314543, "question_id": 47314411, "link": "https://stackoverflow.com/questions/47314411/haskell-function-use-show-and-return-integer/47314543#47314543", "title": "Haskell function use show and return Integer", "body": "<p><code>show</code> doesn't print anything.  It's just a function to convert something into a <code>String</code></p>\n\n<p><code>my_digit</code> should be an <code>Int</code> but <code>| otherwise = show (\"Not a Number: '\" ++ [y] ++ \"'\")</code> returns a string.  Did you maybe mean to use <code>error</code> instead of <code>show</code>?</p>\n\n<pre><code>        my_digit y                 \n          | isNumber y = digitToInt y                                          \n          | otherwise = error (\"Not a Number: '\" ++ [y] ++ \"'\")\n</code></pre>\n\n<p>This will cause the program to fail and print your error message when it encounters a non-digit character.</p>\n"}], "owner": {"reputation": 319, "user_id": 4109398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d164617fb1f1cbcbf31d57715fe8d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "lukas kiss", "link": "https://stackoverflow.com/users/4109398/lukas-kiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 47314543, "answer_count": 1, "score": 1, "last_activity_date": 1510770148, "creation_date": 1510769217, "last_edit_date": 1510770148, "question_id": 47314411, "link": "https://stackoverflow.com/questions/47314411/haskell-function-use-show-and-return-integer", "title": "Haskell function use show and return Integer", "body": "<p>I am troubleshooting with this a long time.</p>\n\n<pre><code>asInt_either2 ::  String -&gt; Int\nasInt_either2 str\n    | null str = 0\n    | (head str) == '-' = -1 * asInt_either2 (tail str)\n    | isNumber (head str)  = foldl' nasob 0 str\n    | otherwise  = error (\"Not a Number: '\" ++ [(head str)] ++ \"'\")\n    where nasob x y = x*10 + (my_digit y)\n        my_digit y\n           | isNumber y = digitToInt y\n           | otherwise = show (\"Not a Number: '\" ++ [y] ++ \"'\")\n</code></pre>\n\n<p>This simply should convert String to Integer, but If it finds not Number character it will print \"Not a Number : 'a' \" (for example)</p>\n\n<p>I try to get it work but I still get error.\nI know, there exist better solutions for this,but this is exercise for me and I want to try it this way, if it is possible.</p>\n\n<p>I am getting error:</p>\n\n<pre><code>\u2022 Couldn't match type \u2018[Char]\u2019 with \u2018Int\u2019                                          \n  Expected type: Int                   \n    Actual type: String                \n\u2022 In the expression: show (\"Not a Number: '\" ++ [y] ++ \"'\")                        \n  In an equation for \u2018my_digit\u2019:       \n      my_digit y \n        | isNumber y = digitToInt y    \n        | otherwise = show (\"Not a Number: '\" ++ [y] ++ \"'\")                       \n  In an equation for \u2018asInt_either2\u2019:  \n      asInt_either2 str                \n        | null str = 0                 \n        | (head str) == '-' = - 1 * asInt_either2 (tail str)                       \n        | isNumber (head str) = foldl' nasob 0 str                                 \n        | otherwise = error (\"Not a Number: '\" ++ [(head str)] ++ \"'\")             \n        where    \n            nasob x y = x * 10 + (my_digit y)                                      \n            my_digit y                 \n              | isNumber y = digitToInt y                                          \n              | otherwise = show (\"Not a Number: '\" ++ [y] ++ \"'\")   \n</code></pre>\n\n<h2>Update:</h2>\n\n<p>Rewrite show to error function solve the problems.</p>\n\n<p>But I am trying to solve this exercise:\n\"The  function uses error , so its callers cannot handle errors. Rewrite\nthe function to fix this problem\"</p>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 4, "creation_date": 1510762067, "post_id": 47312107, "comment_id": 81574984, "body": "<code>(.|.)</code> is the name of an operator defined in the module you&#39;re looking at."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1510762995, "post_id": 47312107, "comment_id": 81575620, "body": "<a href=\"https://www.haskell.org/hoogle/\" rel=\"nofollow noreferrer\">Hoogle</a> is a great resource for searching for these kinds of answers."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 2, "creation_date": 1510767223, "post_id": 47312107, "comment_id": 81578412, "body": "@DavidYoung Slight correction: <code>(.|.)</code> is the name of an operator that is in scope in the module you&#39;re looking at. Might be defined elsewhere -- Haskell allows you to re-export things (and I&#39;m pretty sure this is an example of that happening)."}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510768368, "post_id": 47312107, "comment_id": 81579042, "body": "@DanielWagner That is a good point. I just assumed that wasn&#39;t the case because of the module exports before it but that could certainly be what is happening (for a more &quot;fine grained&quot; export)."}], "answers": [{"comments": [{"owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 0, "creation_date": 1510762207, "post_id": 47312133, "comment_id": 81575094, "body": "Oh, I see, thanks! I thought it&#39;s some syntax sugar."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 5, "creation_date": 1510762413, "post_id": 47312133, "comment_id": 81575246, "body": "@Siegmeyer almost all \u201csyntax\u201d in Haskell is really just a library function in infix form. You can <a href=\"https://hayoo.fh-wedel.de/?query=.%7C.\" rel=\"nofollow noreferrer\">use Hayoo</a> to search for them."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1510762630, "post_id": 47312133, "comment_id": 81575374, "body": "Naturally, there&#39;s also <a href=\"https://www.haskell.org/hoogle/\" rel=\"nofollow noreferrer\">hoogle</a> as a Hayoo alternative."}], "tags": [], "owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "is_accepted": true, "score": 3, "last_activity_date": 1510763461, "last_edit_date": 1510763461, "creation_date": 1510762078, "answer_id": 47312133, "question_id": 47312107, "link": "https://stackoverflow.com/questions/47312107/haskell-syntax/47312133#47312133", "title": "Haskell &quot;(.|.)&quot; syntax", "body": "<p>It means \"Bitwise or\". It is an operator that the XMonad package re-exports. It is originally defined in <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Bits.html\" rel=\"nofollow noreferrer\">Data.Bits</a>.  </p>\n\n<blockquote>\n  <p><a href=\"https://hackage.haskell.org/package/xmonad-0.13/docs/XMonad.html#v:.-124-\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/xmonad-0.13/docs/XMonad.html#v:.-124-</a>.</p>\n</blockquote>\n\n<pre><code>(.|.) :: Bits a =&gt; a -&gt; a -&gt; a #\n\n    Bitwise \"or\"\n</code></pre>\n\n<p>In Haskell, anything defined between <code>(</code> ... <code>)</code> is an operator, which is a function that works by default as infix notation. </p>\n"}], "owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 47312133, "answer_count": 1, "score": 0, "last_activity_date": 1510763461, "creation_date": 1510761977, "question_id": 47312107, "link": "https://stackoverflow.com/questions/47312107/haskell-syntax", "title": "Haskell &quot;(.|.)&quot; syntax", "body": "<p>What does this syntax mean? (in the context of module declaration)</p>\n\n<p>Example:</p>\n\n<pre><code>module XMonad (\n    module XMonad.Main,\n    module XMonad.Core,\n    module XMonad.Config,\n    module XMonad.Layout,\n    module XMonad.ManageHook,\n    module XMonad.Operations,\n    module Graphics.X11,\n    module Graphics.X11.Xlib.Extras,\n    (.|.),\n    MonadState(..), gets, modify,\n    MonadReader(..), asks,\n    MonadIO(..)\n) where\n</code></pre>\n\n<p>Can't find anything using search engines.</p>\n"}, {"tags": ["string", "haskell", "tuples"], "comments": [{"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 2, "creation_date": 1510752377, "post_id": 47308280, "comment_id": 81567521, "body": "You should try <code>unwords . fmap show . concatMap (\\(x,y) -&gt; [x,y])</code>"}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "reply_to_user": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1510752535, "post_id": 47308280, "comment_id": 81567636, "body": "Thank you, that worked great.. but i still have &quot;&quot; &lt;-- those"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510752543, "post_id": 47308280, "comment_id": 81567642, "body": "Shouldn&#39;t <code>showTuple</code> have type <code>(Int, Int) -&gt; String</code>, based on the name alone?"}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510752562, "post_id": 47308280, "comment_id": 81567651, "body": "Yes i&#39;ve changed it now"}, {"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 3, "creation_date": 1510753293, "post_id": 47308280, "comment_id": 81568195, "body": "You need to use <code>putStrLn</code> instead of <code>print</code> if you don&#39;t want to see the quotes when you&#39;re printing the string."}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510753665, "post_id": 47308280, "comment_id": 81568443, "body": "It&#39;s fixed thank you so much!"}], "answers": [{"comments": [{"owner": {"reputation": 2648, "user_id": 4375377, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/H6Fa4.png?s=128&g=1", "display_name": "Mr Tsjolder", "link": "https://stackoverflow.com/users/4375377/mr-tsjolder"}, "edited": false, "score": 0, "creation_date": 1510753280, "post_id": 47308785, "comment_id": 81568184, "body": "no need to add pattern for a list with single element if you have the empty list pattern"}, {"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "reply_to_user": {"reputation": 2648, "user_id": 4375377, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/H6Fa4.png?s=128&g=1", "display_name": "Mr Tsjolder", "link": "https://stackoverflow.com/users/4375377/mr-tsjolder"}, "edited": false, "score": 1, "creation_date": 1510753327, "post_id": 47308785, "comment_id": 81568229, "body": "@MrTsjolder You actually do need this extra case here because you&#39;re inserting extra space in between the numbers."}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510754000, "post_id": 47308785, "comment_id": 81568691, "body": "Thank you for your time, its fixed!"}, {"owner": {"reputation": 2648, "user_id": 4375377, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/H6Fa4.png?s=128&g=1", "display_name": "Mr Tsjolder", "link": "https://stackoverflow.com/users/4375377/mr-tsjolder"}, "reply_to_user": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510762964, "post_id": 47308785, "comment_id": 81575600, "body": "@ruubel If this answer helped you, please consider accepting it"}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "reply_to_user": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1510763078, "post_id": 47308785, "comment_id": 81575666, "body": "I would if it did ofc, but @gallais actually helped me. I just thanked this post cause it&#39;s an alternate solution."}, {"owner": {"reputation": 1020, "user_id": 8461625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWbOJ.jpg?s=128&g=1", "display_name": "Dennis Vennink", "link": "https://stackoverflow.com/users/8461625/dennis-vennink"}, "reply_to_user": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1510763163, "post_id": 47308785, "comment_id": 81575738, "body": "@gallais should add his solution as an answer so you can accept it. \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 1020, "user_id": 8461625, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWbOJ.jpg?s=128&g=1", "display_name": "Dennis Vennink", "link": "https://stackoverflow.com/users/8461625/dennis-vennink"}, "is_accepted": false, "score": 5, "last_activity_date": 1510771100, "last_edit_date": 1510771100, "creation_date": 1510752837, "answer_id": 47308785, "question_id": 47308280, "link": "https://stackoverflow.com/questions/47308280/haskell-list-of-int-tuples-to-string/47308785#47308785", "title": "Haskell list of int tuples to string", "body": "<p>Using pattern matching:</p>\n\n<pre><code>type Board = [(Int, Int)]\n\nshowTuples :: Board -&gt; String\nshowTuples [] = \"\"\nshowTuples (x:[]) = show(fst(x)) ++ \" \" ++ show(snd(x))\nshowTuples (x:xs) = show(fst(x)) ++ \" \" ++ show(snd(x)) ++ \" \" ++ showTuples xs\n\nmain :: IO ()\nmain = putStrLn . showTuples $ [(8, 7), (5, 6), (3, 3), (9, 4), (5, 4)] -- 8 7 5 6 3 3 9 4 5 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1510770540, "post_id": 47309033, "comment_id": 81580247, "body": "Using <code>foldl</code> with <code>(++)</code> is going to be dreadfully expensive, isn&#39;t it? I don&#39;t see any reason this couldn&#39;t be a <code>foldr</code>."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 2, "last_activity_date": 1510753492, "creation_date": 1510753492, "answer_id": 47309033, "question_id": 47308280, "link": "https://stackoverflow.com/questions/47308280/haskell-list-of-int-tuples-to-string/47309033#47309033", "title": "Haskell list of int tuples to string", "body": "<p>This can be done by a <code>foldl</code> too.</p>\n\n<pre><code>Prelude&gt; foldl (\\r (x,y) -&gt; r ++ \" \" ++ show x ++ \" \" ++ show y) \"\" [(8,7),(5,6),(3,3),(9,4),(5,4)]\n\" 8 7 5 6 3 3 9 4 5 4\"\n</code></pre>\n\n<p>If you don't want the preceding whitespace then just do like <code>tail $ foldl (\\r (x,y) -&gt; ...</code></p>\n"}], "owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510771100, "creation_date": 1510751417, "last_edit_date": 1510770479, "question_id": 47308280, "link": "https://stackoverflow.com/questions/47308280/haskell-list-of-int-tuples-to-string", "title": "Haskell list of int tuples to string", "body": "<p>I'm trying to write out my list of tuples from:</p>\n\n<pre><code>[(8,7),(5,6),(3,3),(9,4),(5,4)]\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>8 7 5 6 3 3 9 4 5 4\n</code></pre>\n\n<p>this is how far i've come:\n(Updated)</p>\n\n<pre><code>showTuples :: Board -&gt; String\nshowTuples = unwords . fmap show . concatMap (\\(x,y) -&gt; [x,y])\n</code></pre>\n\n<p>I know i'm suppose to map this function to all elements of my list but i can't seem to get it right.</p>\n\n<p>(UPDATE)\nIt worked, still having problems with the quotation marks though</p>\n\n<p>also type of Board is:</p>\n\n<pre><code>type Board = [(Int,Int)]\n</code></pre>\n"}, {"tags": ["haskell", "compiler-errors", "parse-error"], "answers": [{"comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 3, "creation_date": 1510726849, "post_id": 47300093, "comment_id": 81552158, "body": "It&#39;s also worth pointing out that the <code>do</code> keyword is unnecessary here, since do-notation is not really being used."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510773486, "post_id": 47300093, "comment_id": 81581965, "body": "This won&#39;t work: the indentation rule checks the indentation of the first word after <code>do</code> against the indentation of the next lines. The indentation of <code>do</code> wrt the block is not taken into consideration. Still, removing <code>do</code> is the easiest fix here."}], "tags": [], "owner": {"reputation": 66, "user_id": 8942455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab8282f0b2f18d9ded05189a9d478a8?s=128&d=identicon&r=PG&f=1", "display_name": "zale", "link": "https://stackoverflow.com/users/8942455/zale"}, "is_accepted": false, "score": 2, "last_activity_date": 1510724125, "creation_date": 1510724125, "answer_id": 47300093, "question_id": 47299906, "link": "https://stackoverflow.com/questions/47299906/compiler-error-for-haskell-program-not-understood/47300093#47300093", "title": "Compiler error for Haskell program not understood", "body": "<p>The indentation error has to do with the <code>do</code> block. Try indenting after the <code>do</code>. Something like:</p>\n\n<pre><code>varDeclStmt = do\n                keyword \"var\" &gt;&gt;\n                expr &gt;&gt;= \\s -&gt; \n                symbol \"=\" &gt;&gt;\n                expr &gt;&gt;= \\e -&gt;\n                return (VarDecl s e)\n</code></pre>\n\n<p>Let me know if that works.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 4, "last_activity_date": 1510749438, "creation_date": 1510749438, "answer_id": 47307631, "question_id": 47299906, "link": "https://stackoverflow.com/questions/47299906/compiler-error-for-haskell-program-not-understood/47307631#47307631", "title": "Compiler error for Haskell program not understood", "body": "<p>This is an indentation issue. The block </p>\n\n<pre><code>varDeclStmt = do\n              keyword \"var\" &gt;&gt;\n              expr &gt;&gt;= \\s -&gt; --ERROR\n              symbol \"=\" &gt;&gt;\n              expr &gt;&gt;= \\e -&gt;\n              return (VarDecl s e) \n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>varDeclStmt = do\n              { keyword \"var\" &gt;&gt;\n              ; expr &gt;&gt;= \\s -&gt; --ERROR\n              ; symbol \"=\" &gt;&gt;\n              ; expr &gt;&gt;= \\e -&gt;\n              ; return (VarDecl s e) \n              }\n</code></pre>\n\n<p>which is nonsense, since the first entry <code>keyword \"var\" &gt;&gt;</code> is not valid.</p>\n\n<p>Note that indenting the whole block further (or less) does not change how it is parsed.</p>\n\n<p>The easiest fix is to remove <code>do</code> completely, so that the text below that is not parsed as a block, hence it is not split into separate entries, but parsed as if it were on a single line.</p>\n\n<p>Otherwise, you can switch to proper <code>do</code> notation</p>\n\n<pre><code>varDeclStmt = do\n              keyword \"var\"\n              s &lt;- expr\n              symbol \"=\"\n              e &lt;- expr\n              return (VarDecl s e) \n</code></pre>\n\n<p>or (worst solution), make the <code>do</code> block a single-entry one, making the block indented more than the first line, as follos</p>\n\n<pre><code>varDeclStmt = do\n              keyword \"var\" &gt;&gt;\n                expr &gt;&gt;= \\s -&gt;\n                symbol \"=\" &gt;&gt;\n                expr &gt;&gt;= \\e -&gt;\n                return (VarDecl s e) \n</code></pre>\n\n<p>The above solution is silly, though, since the purpose of <code>do</code> is splitting the block into entries, and the indentation is made so that there is only one entry. So, we use two things to counteract each other.</p>\n"}], "owner": {"reputation": 299, "user_id": 8604329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34e9794ad93744d1fcf341dfb763b345?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Robbins", "link": "https://stackoverflow.com/users/8604329/matt-robbins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47307631, "answer_count": 2, "score": 2, "last_activity_date": 1510749438, "creation_date": 1510723168, "question_id": 47299906, "link": "https://stackoverflow.com/questions/47299906/compiler-error-for-haskell-program-not-understood", "title": "Compiler error for Haskell program not understood", "body": "<p>I'm working on a large Haskell program, so I'm only including the code that seems relevant here to make the problem clearer.  Please comment if I should include more.  </p>\n\n<p>When I compile, I get only one error message: \"parse error (possibly incorrect indentation or mismatched brackets)\"</p>\n\n<p>Here is some code with no errors (printStmt) and a very similar section (VarDeclStmt) with the error directed at the line reading, \"expr >>= \\s ->\".  I don't see why one would be fine and the other would cause a problem.  In what way are they different?</p>\n\n<pre><code>printStmt = \n            keyword \"print\" &gt;&gt;\n            expr &gt;&gt;= \\e -&gt;\n            symbol \";\" &gt;&gt;\n            return (Print e)\n\nvarDeclStmt = do\n              keyword \"var\" &gt;&gt;\n              expr &gt;&gt;= \\s -&gt; --ERROR\n              symbol \"=\" &gt;&gt;\n              expr &gt;&gt;= \\e -&gt;\n              return (VarDecl s e) \n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1510716910, "post_id": 47298872, "comment_id": 81549180, "body": "Specifically, what errors?"}, {"owner": {"reputation": 472, "user_id": 1836940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e3259f39e8efd198d666fdda8f96cde?s=128&d=identicon&r=PG", "display_name": "Daniel Causebrook", "link": "https://stackoverflow.com/users/1836940/daniel-causebrook"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1510717217, "post_id": 47298872, "comment_id": 81549227, "body": "@Carcigenicate I have updated the question with the error messages."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1510717410, "post_id": 47298872, "comment_id": 81549269, "body": "I posted an answer, but I&#39;m not proficient enough in Haskell to figure out the second error on my current mental state. With <code>foo2</code>, you&#39;re fully applying <code>&amp;&amp;</code>, so you should be using application (<code>$</code>), not composition (<code>.</code>)."}, {"owner": {"reputation": 472, "user_id": 1836940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e3259f39e8efd198d666fdda8f96cde?s=128&d=identicon&r=PG", "display_name": "Daniel Causebrook", "link": "https://stackoverflow.com/users/1836940/daniel-causebrook"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1510718214, "post_id": 47298872, "comment_id": 81549430, "body": "Okay, that&#39;s helpful. So <code>(.)</code> needs exactly 1 argument unapplied, whereas <code>($)</code> needs exactly 0. Is it even possible to leave 2 arguments unapplied, as I tried to do in <code>foo4</code>?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1510718586, "post_id": 47298872, "comment_id": 81549526, "body": "<code>$</code> is just function application, as it&#39;s name suggests. <code>.</code> expects a function. If you fully apply <code>&amp;&amp;</code>, you&#39;re not giving <code>.</code> a fucntion."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1510726214, "post_id": 47298872, "comment_id": 81551905, "body": "Why don&#39;t you post an example of one of your calls, that is a function applied to some input parameters"}], "answers": [{"comments": [{"owner": {"reputation": 472, "user_id": 1836940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e3259f39e8efd198d666fdda8f96cde?s=128&d=identicon&r=PG", "display_name": "Daniel Causebrook", "link": "https://stackoverflow.com/users/1836940/daniel-causebrook"}, "edited": false, "score": 0, "creation_date": 1510744609, "post_id": 47300683, "comment_id": 81562228, "body": "Oh, that makes sense now. It never occurred to me that <code>(&amp;&amp;) x y</code> would bind first, because it doesn&#39;t have brackets round it. Thank you."}], "tags": [], "owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "is_accepted": true, "score": 2, "last_activity_date": 1510729239, "last_edit_date": 1510729239, "creation_date": 1510726957, "answer_id": 47300683, "question_id": 47298872, "link": "https://stackoverflow.com/questions/47298872/function-composition-errors/47300683#47300683", "title": "Function composition errors", "body": "<h2>function application</h2>\n\n<p>Let's start with function application.</p>\n\n<p><code>a b</code> is an application of a function a to one arguments b.</p>\n\n<p><code>a b c</code> is an application of a function a to two arguments b and c.</p>\n\n<p><code>a b c d</code> is an application of a function a to three arguments b, c, and d.</p>\n\n<h2>(&amp;&amp;) and (.)'s type signature</h2>\n\n<p>Then look at these two functions' type signature.</p>\n\n<pre><code>(&amp;&amp;) :: Bool -&gt; Bool -&gt; Bool\n</code></pre>\n\n<p>takes two arguments</p>\n\n<pre><code>(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c\n</code></pre>\n\n<p>takes three arguments, two of them functions</p>\n\n<p>Then we look into these four cases.</p>\n\n<h2>foo1</h2>\n\n<pre><code>foo1 x y z = x == (y &amp;&amp; z)\n</code></pre>\n\n<p>(y &amp;&amp; z) is (&amp;&amp;) y z, fully applied. So the result is a Bool type.</p>\n\n<p>x == Bool is (==) x Bool. So x is a Bool type. </p>\n\n<p>It works.</p>\n\n<h2>foo2</h2>\n\n<pre><code>foo2 x y z = (x ==) . (&amp;&amp;) y z\n</code></pre>\n\n<p>(x ==) is a function that expects one argument.</p>\n\n<p>so <code>(x ==) . :: (a -&gt; b) -&gt; a -&gt; c</code></p>\n\n<p>However, as @Carcigenicate says, your (&amp;&amp;) is fully applied.</p>\n\n<p>Hence, compiler say, \"Couldn't match expected type \u2018a -> a1\u2019 with actual type \u2018Bool\u2019\"</p>\n\n<h2>foo3</h2>\n\n<pre><code>foo3 x y   = (x ==) . (&amp;&amp;) y\n\n(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c\n</code></pre>\n\n<p>(.) function composition takes function ( x==) and (&amp;&amp;) y</p>\n\n<p>and all it need now is another a to produce c.</p>\n\n<p>so foo3 is just foo1's point-free style.</p>\n\n<p>It works, too.</p>\n\n<h2>foo4</h2>\n\n<pre><code>foo4 x     = (x ==) . (&amp;&amp;)\n</code></pre>\n\n<p>So we already meet (x ==) . </p>\n\n<p>its type signature is (a -> b) -> a -> c</p>\n\n<p>However, (&amp;&amp;) :: Bool -> Bool -> Bool</p>\n\n<p>Although it can be seen as Bool -> (Bool -> Bool), a function that takes one argument and produce a Bool -> Bool function.</p>\n\n<p>(Bool->Bool) is not an instance for Eq. It doesn't have (==).</p>\n\n<p>Thus the compiler says \"No instance for (Eq (Bool -> Bool))\"</p>\n\n<h2>Point-free style</h2>\n\n<blockquote>\n  <p>As far as I know, there's no reason adding or removing equivalent\n  arguments to both the input and output should change the function.</p>\n</blockquote>\n\n<p>It holds true when they are on the same level.</p>\n\n<p>name b c d = function b c d --fully applied</p>\n\n<p>name b c = function b c --wait one argument</p>\n\n<p>name b = function b --wait two arguments</p>\n\n<p>name = function --wait three/all arguments</p>\n\n<p>but function composition needs to compose two one-argument functions into one-argument function(and the right one's output type need to match the left one's input type.)</p>\n\n<p>So the order is function application first, then (.) / function composition second. And you need to feed (b->c) and (a->b) to (.) to get a new (a->c) function.</p>\n"}], "owner": {"reputation": 472, "user_id": 1836940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e3259f39e8efd198d666fdda8f96cde?s=128&d=identicon&r=PG", "display_name": "Daniel Causebrook", "link": "https://stackoverflow.com/users/1836940/daniel-causebrook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 47300683, "answer_count": 1, "score": 1, "last_activity_date": 1510729239, "creation_date": 1510716544, "last_edit_date": 1510717132, "question_id": 47298872, "link": "https://stackoverflow.com/questions/47298872/function-composition-errors", "title": "Function composition errors", "body": "<p>I'm learning Haskell and I came across a situation in which I'm not entirely sure what is going on.</p>\n\n<p>I'm working on a bigger project, and have been trying to 'simplify' my code. I'd learnt about function composition and I think I mostly understand it. However, whilst pushing the limits of this, I encountered a situation I'm not sure how to explain.</p>\n\n<p>After a few hours of fiddling about with it, I boiled it down to this:</p>\n\n<pre><code>foo1 x y z = x == (y &amp;&amp; z)\nfoo2 x y z = (x ==) . (&amp;&amp;) y z     -- Error\nfoo3 x y   = (x ==) . (&amp;&amp;) y\nfoo4 x     = (x ==) . (&amp;&amp;)         -- Error\n</code></pre>\n\n<p>Why do <code>foo1</code> and <code>foo3</code> work, whilst <code>foo2</code> and <code>foo4</code> give errors when I try to define them? As far as I know, there's no reason adding or removing equivalent arguments to both the input and output should change the function.</p>\n\n<p><strong>Edit: Include errors</strong></p>\n\n<p><code>foo2</code> yields the error:</p>\n\n<pre><code>&lt;interactive&gt;:1:23: error:\n    \u2022 Couldn't match expected type \u2018a -&gt; a1\u2019 with actual type \u2018Bool\u2019\n    \u2022 Possible cause: \u2018(&amp;&amp;)\u2019 is applied to too many arguments\n      In the second argument of \u2018(.)\u2019, namely \u2018(&amp;&amp;) y z\u2019\n      In the expression: (x ==) . (&amp;&amp;) y z\n      In an equation for \u2018foo2\u2019: foo2 x y z = (x ==) . (&amp;&amp;) y z\n    \u2022 Relevant bindings include\n        x :: a1 (bound at &lt;interactive&gt;:1:6)\n        foo2 :: a1 -&gt; Bool -&gt; Bool -&gt; a -&gt; Bool\n          (bound at &lt;interactive&gt;:1:1)\n</code></pre>\n\n<p>Whilst <code>foo4</code> gives the error:</p>\n\n<pre><code>&lt;interactive&gt;:2:15: error:\n    \u2022 No instance for (Eq (Bool -&gt; Bool))\n        arising from an operator section\n        (maybe you haven't applied a function to enough arguments?)\n    \u2022 In the first argument of \u2018(.)\u2019, namely \u2018(x ==)\u2019\n      In the expression: (x ==) . (&amp;&amp;)\n      In an equation for \u2018foo4\u2019: foo4 x = (x ==) . (&amp;&amp;)\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 2, "creation_date": 1510708816, "post_id": 47297862, "comment_id": 81547281, "body": "&quot;it doesn&#39;t work&quot; should always be followed by an error message."}, {"owner": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 1, "creation_date": 1510708988, "post_id": 47297862, "comment_id": 81547329, "body": "@ThomasM.DuBuisson I&#39;m so sorry I did not mention the error message, it says ` No instance for (Num [Integer]) arising from the literal \u20181\u2019     \u2027 In the expression: 1       In the second argument of \u2018count\u2019, namely \u2018[1, 2, 3]\u2019       In the expression: count 6 [1, 2, 3]`   That was what I got if i put ele n into filter (== ele n)"}, {"owner": {"reputation": 42360, "user_id": 389146, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zGYUq.jpg?s=128&g=1", "display_name": "Karl Bielefeldt", "link": "https://stackoverflow.com/users/389146/karl-bielefeldt"}, "edited": false, "score": 0, "creation_date": 1510751708, "post_id": 47297862, "comment_id": 81567010, "body": "FYI, you don&#39;t need the comprehension for <code>ele n</code>.  It&#39;s the same thing as <code>ele n = [0..n-1]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 2, "creation_date": 1510744223, "post_id": 47298109, "comment_id": 81561999, "body": "<code>flip elem (ele n)</code> can be written <code>(`elem` (ele n))</code> which is arguably more readable."}], "tags": [], "owner": {"reputation": 827, "user_id": 1625415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b834badf82641e9381e139bb4228b92f?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1625415/alden"}, "is_accepted": true, "score": 0, "last_activity_date": 1510710393, "creation_date": 1510710393, "answer_id": 47298109, "question_id": 47297862, "link": "https://stackoverflow.com/questions/47297862/how-do-i-count-the-number-of-elements-of-list-from-another-list-in-haskell/47298109#47298109", "title": "How do I count the number of elements of list from another list in haskell", "body": "<p>If I understand correctly what you're trying to do, you might try this</p>\n\n<pre><code>count n ys = length (filter (flip elem (ele n)) ys)\n</code></pre>\n\n<p>Notice that in order to filter a list by <code>(== ele n)</code>, you would have to have a list of lists of numbers, because each element in the list will be checked for equality against the list of numbers <code>ele n</code>. If you want to check that each element of <code>ys</code> is in <code>ele n</code>, you should use the <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:elem\" rel=\"nofollow noreferrer\"><code>elem</code></a> function instead of <code>==</code>.</p>\n\n<p>Because <code>elem</code> takes the element as its first argument and the list as its second argument, you can use the <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:flip\" rel=\"nofollow noreferrer\"><code>flip</code></a> function to set up your filter function. <code>flip</code> takes a function of two arguments and returns a function that does the same thing but takes its arguments in the opposite order. For example, instead of writing</p>\n\n<pre><code>elem 3 [1..5]\n</code></pre>\n\n<p>you can write</p>\n\n<pre><code>flip elem [1..5] 3\n</code></pre>\n\n<p>An alternative solution would be to use <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:intersect\" rel=\"nofollow noreferrer\"><code>intersect</code></a> from Data.List, in which case you wouldn't have to use a filter at all.</p>\n\n<pre><code>import Data.List\ncount n ys = length (intersect ys (ele n))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 47298109, "answer_count": 1, "score": -1, "last_activity_date": 1510710393, "creation_date": 1510708445, "question_id": 47297862, "link": "https://stackoverflow.com/questions/47297862/how-do-i-count-the-number-of-elements-of-list-from-another-list-in-haskell", "title": "How do I count the number of elements of list from another list in haskell", "body": "<p>I have been trying to count the number of elements from a list which the elements are also from another list. </p>\n\n<p><code>ys</code> is the original list and <code>ele</code> is the list of elements. </p>\n\n<p>So that <code>count 6 [1,2,3] = 3</code> because it counts the elements of \"<code>0..5</code>\"</p>\n\n<p>My idea is to implement the <code>ele</code> function into the <code>count</code> function to get this done, but I have no clue how to do that.</p>\n\n<p>I have tried to insert ele n into \"<code>(filter (== ele n) ys)</code>\"in to code below :</p>\n\n<pre><code>count :: Eq a =&gt; a -&gt; [a] -&gt; Int\ncount n ys = length (filter (== n) ys)\n\nele n = [ n | n &lt;- [0..n-1]]\n</code></pre>\n\n<p>But apparently it doesn't work out and the above code is the code I got so far</p>\n"}, {"tags": ["string", "haskell", "functional-programming", "binary"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510712712, "post_id": 47297829, "comment_id": 81548216, "body": "Can you give an example (or a few examples) of the input and output you want?"}, {"owner": {"reputation": 21, "user_id": 8819527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bda4f44b210ec2c80ea77efe2e8770b?s=128&d=identicon&r=PG&f=1", "display_name": "TabbiCat", "link": "https://stackoverflow.com/users/8819527/tabbicat"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510744228, "post_id": 47297829, "comment_id": 81562004, "body": "@DanielWagner Let&#39;s say I give the function the string &quot;ab0&quot; I want it to output   [ 0,1,1,0,0,0,0,1,0,1,1,0,0,0,1,0,0,0,1,1,0,0,0,0]"}], "answers": [{"tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": false, "score": -1, "last_activity_date": 1510710515, "creation_date": 1510710515, "answer_id": 47298126, "question_id": 47297829, "link": "https://stackoverflow.com/questions/47297829/haskell-converting-string-to-binary-number/47298126#47298126", "title": "Haskell converting string to binary number", "body": "<p>What we want is a function of type <code>String -&gt; String</code> (<code>decimal -&gt; binary</code>). What you have now is</p>\n\n<pre><code>dec :: String -&gt; [Int]\nbin :: Int -&gt; [Int] -- use *lowercase*\n</code></pre>\n\n<p>So it seems impossible to compose a function of type <code>String -&gt; String</code> only with these two. Besides, <code>ord</code> is not what you want.</p>\n\n<pre><code>*Main&gt; dec \"123\"\n[49,50,51]\n*Main&gt; bin 123\n[0,1,1,1,1,0,1,1]\n</code></pre>\n\n<p>From what you have now, the possible solution would be:</p>\n\n<pre><code>*Main Data.Char&gt; toBinary = map intToDigit . bin . read\n*Main Data.Char&gt; toBinary \"123\"\n\"01111011\"\n</code></pre>\n\n<p>I guess your intention may be <code>dec :: String -&gt; Int</code>, then <code>bin . dec :: String -&gt; [Int]</code>. You can follow the type signature and retry. </p>\n"}, {"comments": [{"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 0, "creation_date": 1510763843, "post_id": 47312481, "comment_id": 81576253, "body": "Note that if you include any characters that has a Unicode value greater than 255, the upper bits of the binary representation will be elided."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": false, "score": 1, "last_activity_date": 1510763492, "last_edit_date": 1510763492, "creation_date": 1510763057, "answer_id": 47312481, "question_id": 47297829, "link": "https://stackoverflow.com/questions/47297829/haskell-converting-string-to-binary-number/47312481#47312481", "title": "Haskell converting string to binary number", "body": "<p>You can be pretty certain that an <code>Int</code> will be stored in binary.  It only appears to be in decimal because it is converted to decimal when you print it.  So, the name <code>dec</code> is a misnomer, that function is converting a <code>String</code> into a sequence of numbers that represent the Unicode value of each character.  You can avoid explicit recursion by using map:</p>\n\n<pre><code>toUnicode :: String -&gt; [Int]\ntoUnicode = map ord\n</code></pre>\n\n<p>Note that this function uses so-called point-free style.  The expected argument is missing, but will be passed to <code>map</code> when supplied by the caller.</p>\n\n<p>The <code>Bin</code> function will not compile because it starts with an upper case character, making it a data constructor.  You should name the function starting with a lower case character.  According to your example output, you want leading zeros in your binary representations, so you can't stop conversion when the value becomes zero.  You need to continue until you have converted the desired number of digits, which appears to be 8.  It is also inefficient to keep appending to a list.  It is better to prepend, and then reverse the result.</p>\n\n<pre><code>toBinary :: Int -&gt; [Int]\ntoBinary = go 8 [] where\n    go 0 acc _ = reverse acc\n    go n acc x = go (n-1) (bit:acc) x' where\n        (x', bit) = x `divMod` 2\n</code></pre>\n\n<p>Here, we use a helper function, <code>go</code> which counts down the number of remaining digits as it builds up the list of 1's and 0's.</p>\n\n<p>So, now we have a function to convert a <code>String</code> into a list of <code>Int</code>s, and a function to convert an <code>Int</code> into a list of 0/1 <code>Int</code>s, and we want to glue them together to make a function that converts a <code>String</code> to a list of 0/1 <code>Int</code>s.  If we <code>map</code> our <code>toBinary</code> function over the result of <code>toUnicode</code>, we will get a list of lists, which must be concatenated to form a single list.  This is such a common pattern that there's a function for that called, <code>concatMap</code>:</p>\n\n<pre><code>stringToBinary :: String -&gt; [Int]\nstringToBinary = concatMap toBinary . toUnicode\n</code></pre>\n\n<p>Here we use function composition to first apply <code>toUnicode</code> to the <code>String</code>, and then <code>concatMap</code> the <code>toBinary</code> over the result.</p>\n"}], "owner": {"reputation": 21, "user_id": 8819527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bda4f44b210ec2c80ea77efe2e8770b?s=128&d=identicon&r=PG&f=1", "display_name": "TabbiCat", "link": "https://stackoverflow.com/users/8819527/tabbicat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510771026, "creation_date": 1510708081, "last_edit_date": 1510771026, "question_id": 47297829, "link": "https://stackoverflow.com/questions/47297829/haskell-converting-string-to-binary-number", "title": "Haskell converting string to binary number", "body": "<p>I need to convert a string of chars to a list of binary numbers in Haskell. I've written two functions to do this, but I'm not sure how to combine them into one. So far I have</p>\n\n<pre><code>dec[]=[]\ndec(x:xs) = ord(x): dec xs\n</code></pre>\n\n<p>to convert every char in the list into a decimal number. The next function</p>\n\n<pre><code>bin 0 = [0]\nbin n| n `mod` 2 == 1 = bin (n `div` 2) ++ [1]\n     | n `mod` 2 == 0 = bin (n `div` 2) ++ [0]\n</code></pre>\n\n<p>converts a decimal number to its binary equivalent. I'm not sure how to apply the second function to every element in the list, in order to convert every char to its equivalent in binary. I tried to use the <code>where</code> clause:</p>\n\n<p><code>where n = dec(x:xs) = ord(x): dec xs</code></p>\n\n<p>but this is not valid as there are two equals signs on the same line. How can I achieve the correct functionality?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1510701944, "post_id": 47296881, "comment_id": 81545232, "body": "By the way, <code>foldl (++) []</code> is horribly inefficient, <code>foldr (++) []</code> is better, and <code>concat</code> is the same, but shorter."}, {"owner": {"reputation": 201, "user_id": 3594155, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/642d093fb5b3bf87d31dc0872c27e5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Shane P Kelly", "link": "https://stackoverflow.com/users/3594155/shane-p-kelly"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510702242, "post_id": 47296881, "comment_id": 81545320, "body": "Thanks!  that&#39;s useful to know. man I really complicated things."}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 2, "last_activity_date": 1510701786, "creation_date": 1510701786, "answer_id": 47296938, "question_id": 47296881, "link": "https://stackoverflow.com/questions/47296881/whats-the-best-way-to-write-nested-sums-in-haskell/47296938#47296938", "title": "Whats the best way to write nested sums in haskell", "body": "<p>What about a list comprehension?</p>\n\n<pre><code>sum [f x y z | x &lt;- [1..10], y &lt;- [x..2*x], z &lt;- [x+y..x+y+4]]\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 3594155, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/642d093fb5b3bf87d31dc0872c27e5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Shane P Kelly", "link": "https://stackoverflow.com/users/3594155/shane-p-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47296938, "answer_count": 1, "score": 1, "last_activity_date": 1510701786, "creation_date": 1510701468, "question_id": 47296881, "link": "https://stackoverflow.com/questions/47296881/whats-the-best-way-to-write-nested-sums-in-haskell", "title": "Whats the best way to write nested sums in haskell", "body": "<p>So if the limits of the nested sums don't depend on each other I can write this:</p>\n\n<pre><code>sumgrand k q l r = k*q*l*r\nkspace = [1..10]\nqspace = [1..10]\nlspace = [1..10]\nrspace = [1..10]\nresult = sum $ map sumgrand kSpace &lt;*&gt; qSpace &lt;*&gt; lSpace &lt;*&gt; rSpace\n</code></pre>\n\n<p>This seems to be efficient and clean,  but suppose the limits of the inner sums depend at where I'm at in the outer sum (the limits of the q sum depend on the k sum or the limits of the r sum depend on the q sum).  <strong>What's the best (efficient and clean) way to do this?</strong>  What I came up with is the following:</p>\n\n<pre><code>applyNsaveIdx y f x = (f x, (y, x))\n\nsumInAtIdx limitsFunction (outerGrand, oindex) =\n    map ( applyNsaveIdx oindex outerGrand) innerSpace where\n      innerSpace = limitsFunction oindex\n\nsumInner partiallyAppliedOuter limitF = foldl (++) [] $ \n    map (sumInAtIdx limitF) partiallyAppliedOuter\n\nkspace = [0..10]\nqspace (0,k)         = [0..k]\nlspace ((0,k),q)     = [0..q]\nrspace (((0,k),q),l) = [0..l]\n\nkSum     = map (applyNsaveIdx 0 sumgrand) kspace\nqkSum    = sumInner kSum   qspace\nlqkSum   = sumInner qkSum  lspace\nrlqkSum  = sumInner lqkSum rspace\nresult = sum $ map fst rlqkSum\n</code></pre>\n\n<p>This ends up being much slower.  I imagine I can do it faster if I use recursion, but I can't think of a clean way to do recursion. It seems like monads (controlling a sequence of computations) would be helpful here, but I don't understand them well enough.  My applyNsaveIdx reminds me of what I vaguely know of the writer monad, but I'm not sure how to use it here or if it's all that usefull.</p>\n\n<p>Thanks for any help or suggestions.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 233, "user_id": 3408155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7910903feef10f5a63773ac5d371890?s=128&d=identicon&r=PG", "display_name": "Hoff", "link": "https://stackoverflow.com/users/3408155/hoff"}, "edited": false, "score": 1, "creation_date": 1510699705, "post_id": 47296404, "comment_id": 81544409, "body": "I dont think this is possible. You are basically trying to change the Type Signature of your show Function. In your first example the Show constraint on a is used as a constraint for the Instance, in the second example pairs type gets changed to <code>Show b =&gt; a -&gt; b -&gt; (a, b)</code>"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510703206, "post_id": 47296404, "comment_id": 81545657, "body": "In the first case, it is unifying the types <code>(Show x) =&gt; x -&gt; b -&gt; (x, b)</code> and <code>Int -&gt; b -&gt; (Int, b)</code> which unify when <code>x ~ Int</code>. In this case the <code>Show x</code> constraint is entirely redundant, which is why it is permitted to be there at all - it is erased when the type is simplified. You have not &#39;added&#39; a constraint to anything in any sense. In the second case, the types <code>Show b =&gt; x -&gt; b -&gt; (x, b)</code> and <code>Int -&gt; b -&gt; (Int, b)</code> simply do not unify; setting <code>x ~ Int</code> as before still leaves the <code>Show b</code> constraint which doesn&#39;t match (which is exactly what the compiler tells you)."}, {"owner": {"reputation": 6218, "user_id": 962696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c93e1ec07b42606f1efd7d7414f3c21d?s=128&d=identicon&r=PG&f=1", "display_name": "JonnyRaa", "link": "https://stackoverflow.com/users/962696/jonnyraa"}, "edited": false, "score": 0, "creation_date": 1580479221, "post_id": 47296404, "comment_id": 106121094, "body": "I stumbled here looking for the syntax for adding constraints into instance declarations, it&#39;s like this  <code>instance SomeOtherClass a =&gt; ClassBeingImplemented a where</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "is_accepted": false, "score": 3, "last_activity_date": 1510700140, "creation_date": 1510700140, "answer_id": 47296630, "question_id": 47296404, "link": "https://stackoverflow.com/questions/47296404/type-class-constraints-in-type-signature-inside-an-instance-when-the-type-is-a-f/47296630#47296630", "title": "Type class constraints in type signature inside an instance when the type is a free variable", "body": "<p>You can't.</p>\n\n<p>The type of <code>pair</code> is <code>forall a b. Pair a =&gt; a -&gt; b -&gt; (a, b)</code>.</p>\n\n<p>Where <code>a = Int</code>, this specializes to <code>forall b. Int -&gt; b -&gt; (Int, b)</code>.</p>\n\n<p>In the first example, your type declaration <code>forall a b. Show a =&gt; a -&gt; b -&gt; (a, b)</code> specializes to <code>forall b. Show Int =&gt; Int -&gt; b -&gt; (Int, b)</code>, and then further reduces to <code>forall b. Int -&gt; b -&gt; (Int, b)</code>. (The <code>Show</code> constraint just gets dropped because it is redundant; you're \"constraining\" a concrete type, which is meaningless.) This is the correct type.</p>\n\n<p>In the second example, you're trying to define an instance where <code>pair</code> has the type <code>forall b. Show b =&gt; Int -&gt; b -&gt; (Int, b)</code>, which doesn't work because that's a different type.</p>\n"}, {"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": false, "score": 4, "last_activity_date": 1510700822, "creation_date": 1510700822, "answer_id": 47296747, "question_id": 47296404, "link": "https://stackoverflow.com/questions/47296404/type-class-constraints-in-type-signature-inside-an-instance-when-the-type-is-a-f/47296747#47296747", "title": "Type class constraints in type signature inside an instance when the type is a free variable", "body": "<p>At the conceptual-intuitive level, the <code>class Pair</code> is a promise to the consumer. It says \"there is this function <code>pair</code>, which will work for this type <code>a</code> and any other type <code>b</code>\". Anybody who sees the class can use the function with any type <code>b</code>. </p>\n\n<p>But your instance is trying to say \"I'll implement this function <code>pair</code>, but only for <code>b</code>s which have a <code>Show</code> instance\". Well, this is not a complete implementation of the class: the class promises to work for any <code>b</code>, but the instance works only for <em>some</em> <code>b</code>s.</p>\n"}], "owner": {"reputation": 249, "user_id": 4643591, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206103105435558/picture?type=large", "display_name": "Marius Catalin", "link": "https://stackoverflow.com/users/4643591/marius-catalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1510700822, "creation_date": 1510699017, "question_id": 47296404, "link": "https://stackoverflow.com/questions/47296404/type-class-constraints-in-type-signature-inside-an-instance-when-the-type-is-a-f", "title": "Type class constraints in type signature inside an instance when the type is a free variable", "body": "<p>How can I add type class constraints in type signature inside an instance when the type is a free variable in Haskell. For example:</p>\n\n<pre><code>{-# LANGUAGE InstanceSigs #-}\n\nclass Pair a where\n    pair :: a -&gt; b -&gt; (a, b)\n\ninstance Pair Int where\n    pair :: (Show a) =&gt; a -&gt; b -&gt; (a, b)\n    pair a b = (a, b)\n</code></pre>\n\n<p>works, 'a' is a bound type variable whereas:</p>\n\n<pre><code>{-# LANGUAGE InstanceSigs #-}\n\nclass Pair a where\n    pair :: a -&gt; b -&gt; (a, b)\n\ninstance Pair Int where\n    pair :: (Show b) =&gt; a -&gt; b -&gt; (a, b)\n    pair a b = (a, b)\n</code></pre>\n\n<p>gives this error:</p>\n\n<pre><code>source_file.hs:8:13:\n    No instance for (Show b)\n    Possible fix:\n      add (Show b) to the context of\n        the type signature for pair :: Int -&gt; b -&gt; (Int, b)\n    When checking that: forall a b. Show b =&gt; a -&gt; b -&gt; (a, b)\n      is more polymorphic than: forall b. Int -&gt; b -&gt; (Int, b)\n    When checking that instance signature for \u2018pair\u2019\n      is more general than its signature in the class\n      Instance sig: forall a b. Show b =&gt; a -&gt; b -&gt; (a, b)\n         Class sig: forall b. Int -&gt; b -&gt; (Int, b)\n    In the instance declaration for \u2018Pair Int\u2019\n</code></pre>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1510696770, "post_id": 47295720, "comment_id": 81543066, "body": "You should give type signatures to everything.  <code>printBoard</code>, <code>readrom</code>, <code>doLine</code>, <code>rowBreak</code>.  I think it will help you find the errors."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510696893, "post_id": 47295720, "comment_id": 81543123, "body": "Without proper signatures, GHC can not know what you actually intend to do, and will assign the inferred types to your functions, possibly getting them wrong, and causing type errors to show up elsewhere, in the middle of perfectly fine code. I&#39;d also recommend to turn on warnings."}, {"owner": {"reputation": 13, "user_id": 8705660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7f28d90ae3112a46e8966050daf681?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lou", "link": "https://stackoverflow.com/users/8705660/steve-lou"}, "edited": false, "score": 0, "creation_date": 1510700454, "post_id": 47295720, "comment_id": 81544711, "body": "Updated the code and added type signatures. Solved all the error issues I was getting. Now getting this one i&#39;m not sure about"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 5, "creation_date": 1510704988, "post_id": 47295720, "comment_id": 81546243, "body": "Your signature is for <code>leftToRight</code>, but your implementation is for <code>lefToRight</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "is_accepted": false, "score": 0, "last_activity_date": 1517006952, "creation_date": 1517006952, "answer_id": 48470680, "question_id": 47295720, "link": "https://stackoverflow.com/questions/47295720/a-few-haskell-errors-i-cant-seem-to-figure-out/48470680#48470680", "title": "A few Haskell errors I can&#39;t seem to figure out", "body": "<p>As Daniel Wagner pointed out in the question comments, you have a misspelling. <code>leftToRight</code> is used in the type signature, which is spelled correctly. <code>lefToRight</code> is used for the function definition, but that's misspelled.</p>\n\n<p>So, the type signature doesn't have a function definition of the exact same name, which gives the error you got.</p>\n"}], "owner": {"reputation": 13, "user_id": 8705660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7f28d90ae3112a46e8966050daf681?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Lou", "link": "https://stackoverflow.com/users/8705660/steve-lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517006952, "creation_date": 1510695823, "last_edit_date": 1517004157, "question_id": 47295720, "link": "https://stackoverflow.com/questions/47295720/a-few-haskell-errors-i-cant-seem-to-figure-out", "title": "A few Haskell errors I can&#39;t seem to figure out", "body": "<p>I'm trying to make a Tetris game using haskell for class. </p>\n\n<p>Right now i'm trying to implement printing out just a board from a given input. </p>\n\n<p>I ran into some erros. I'm basing my code of off an example my prof gave that is somewhat similar. </p>\n\n<p>The errors</p>\n\n<pre><code>assign3.hs:20:5: error:\nThe type signature for \u2018leftToRight\u2019 lacks an accompanying binding\n|\n20 |     leftToRight :: Int -&gt; Board -&gt; String -&gt; [Char]    |     \n^^^^^^^^^^^\n</code></pre>\n\n<p>My code</p>\n\n<pre><code>module Main where\nimport Text.Printf (printf)\nimport Test.HUnit\nimport Data.Set (empty,member,delete,insert,Set)\nmain = do\n     input &lt;- getContents\n     putStr $ show $ readFrom input\n\nclass Disp a where\n     disp :: a -&gt; String\ndata Square = Empty deriving (Show, Read, Eq)\ninstance Disp Square where\n     disp Empty = \" \"\ntype BoardCell = (Square,Int)\ntype Board = [BoardCell]\ndata Game = Game Board Int\ninstance Show Game where\n     show(Game board width)=\n         printBoard width board $ lefToRight width board\nleftToRight :: Int -&gt; Board -&gt; String -&gt; String\nlefToRight width [] = \"\"\nlefToRight width board = (lefToRight width $ drop width board) ++ (\"|\" ++ formatRow $ take width board ++ \"|\\n\")\nrowBreak :: a -&gt; String\nrowBreak row =\n     foldr (\\x -&gt; \\y -&gt; \"-\" ++ y) \"+\\n\" row\nformatRow :: Board -&gt; String\nformatRow row =\n     foldr (\\x -&gt; \\y -&gt; \"\" ++ row1 x ++ y) \"\" row\nrow1 :: BoardCell -&gt; String\nrow1 (square,int) = disp square\nprintBoard :: Int -&gt; Board -&gt; String -&gt; String\nprintBoard width [] string = string ++ rowBreak(replicate width 0)\nprintBoard width [(_,_)] string = printBoard width [] string\nprintBoard width (_:rest) string = printBoard width rest string\n\nemptyBoard = Game [] 1\nreadFrom = foldr doLine emptyBoard . lines\ndoLine game = doCommand game . words\n\ndoCommand :: Game -&gt; [String] -&gt; Game\ndoCommand (Game _ width) [\"board\",cols,rows] =\n             Game (take (int rows*width) $ zip (cycle [Empty]) (iterate succ 1))\n                 width\n                     where width = int cols\n\nint :: String -&gt; Int\nint = read\n</code></pre>\n\n<p>What i'm trying to do is take input like \"board 7 4\" and get an output like this</p>\n\n<pre><code>          |       |\n          |       |\n          |       |\n          |       |\n          +-------+ \n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7330220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c3f8e5f67877cc55b5a9961253d746?s=128&d=identicon&r=PG&f=1", "display_name": "Vacation", "link": "https://stackoverflow.com/users/7330220/vacation"}, "edited": false, "score": 0, "creation_date": 1510696538, "post_id": 47295777, "comment_id": 81542949, "body": "I am now getting this error:  Couldn&#39;t match type <code>Pos&#39; with </code>Integer -&gt; (Int, Int)&#39;       Expected type: (Int, Int) -&gt; Integer -&gt; (Int, Int)         Actual type: (Int, Int) -&gt; Pos"}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "reply_to_user": {"reputation": 45, "user_id": 7330220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c3f8e5f67877cc55b5a9961253d746?s=128&d=identicon&r=PG&f=1", "display_name": "Vacation", "link": "https://stackoverflow.com/users/7330220/vacation"}, "edited": false, "score": 0, "creation_date": 1510732310, "post_id": 47295777, "comment_id": 81554729, "body": "@JamesHolliday My mistake. Replace <code>zipWith Pos</code> with <code>zipWith (curry Pos)</code>."}], "tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": false, "score": 1, "last_activity_date": 1510732319, "last_edit_date": 1510732319, "creation_date": 1510696081, "answer_id": 47295777, "question_id": 47295706, "link": "https://stackoverflow.com/questions/47295706/haskell-couldnt-match-type-int-integer-with-pos/47295777#47295777", "title": "Haskell - Couldn&#39;t match type `(Int, Integer)&#39; with `Pos&#39;", "body": "<p><code>type</code> defines a <strong>Type alias</strong>. That is to say, writing:</p>\n\n<pre><code>type Pos = (Int, Int)\n</code></pre>\n\n<p>means that whenever you write <code>Pos</code> in your code, the compiler sees <code>(Int, Int)</code>. To construct a <code>Pos</code> in this case, you can just write <code>(1, 2)</code>, since an <code>(Int, Int)</code> and a <code>Pos</code> are indistinguishable.</p>\n\n<p>However, <code>data</code> defines a new datatype. Your example is:</p>\n\n<pre><code>data Pos = Pos (Int, Int)\n</code></pre>\n\n<p><code>Pos</code> is a type constructed by the function <code>Pos :: (Int, Int) -&gt; Pos</code>. <strong>These are not equal</strong>! To construct a <code>Pos</code> in this case, you would write <code>Pos (1, 2)</code>.</p>\n\n<p>To correct your code, write:</p>\n\n<pre><code>data Pos = Pos (Int, Int)\nallCoordinates :: [(Int, Int)]\nallCoordinates = concat [zipWith (curry Pos) (allHelper x) [0..8] | x&lt;-[0..8]]\n</code></pre>\n\n<p>Where <code>zipWith :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</code>.</p>\n\n<p>However, unless you want different behaviour in typeclasses, using a type alias would be best, otherwise, you should use a <a href=\"https://wiki.haskell.org/Newtype\" rel=\"nofollow noreferrer\">newtype</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 7330220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c3f8e5f67877cc55b5a9961253d746?s=128&d=identicon&r=PG&f=1", "display_name": "Vacation", "link": "https://stackoverflow.com/users/7330220/vacation"}, "edited": false, "score": 0, "creation_date": 1510696699, "post_id": 47295847, "comment_id": 81543030, "body": "Thank you very much! Has completely solved my issue!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1510731985, "last_edit_date": 1510731985, "creation_date": 1510696390, "answer_id": 47295847, "question_id": 47295706, "link": "https://stackoverflow.com/questions/47295706/haskell-couldnt-match-type-int-integer-with-pos/47295847#47295847", "title": "Haskell - Couldn&#39;t match type `(Int, Integer)&#39; with `Pos&#39;", "body": "<p>If you write:</p>\n\n<pre><code>type Pos = (Int, Int)\n</code></pre>\n\n<p>You have <strong>not</strong> constructed a new type: you have constructed a type alias, so you can interchange <code>Pos</code> with <code>(Int, Int)</code> in the code. So a function with signature <code>f :: [(Int,Int)]</code> is equivalent to <code>f :: [Pos]</code>.</p>\n\n<p>You can clean up the code and write:</p>\n\n<pre><code>allCoordinates :: [Pos]\nallCoordinates = [ (x,y) | x &lt;- [0..8], y &lt;- [0..8]]\n</code></pre>\n\n<p>Or even more clean (but probably somewhat harder to understand):</p>\n\n<pre><code>allCoordinates :: [Pos]\nallCoordinates = (,) &lt;$&gt; [0..8] &lt;*&gt; [0..8]\n</code></pre>\n\n<p>A disadvantage of the fact that you work with a type signature is that there can be a lot of functions defined on that type, and perhaps you want to define functions with the <em>same name</em> (in case of type classes), but with a different implementation. In that case you can define a <strong>datatype</strong>:</p>\n\n<pre><code><b>data</b> Pos = Pos (Int,Int)</code></pre>\n\n<p>Now we have defined a <em>new</em> type, with a constructor <code>Pos</code>. Now the above code will no longer work, but we can easily alter it by calling the constructor on the tuples we produce. So:</p>\n\n<pre><code>allCoordinates :: [Pos]\nallCoordinates = [ <b>Pos</b> (x,y) | x &lt;- [0..8], y &lt;- [0..8]]</code></pre>\n\n<p>In case you define a type with <em>one</em> constructor and that constructor has <em>one</em> parameter, we can use <code>newtype</code>. Now we have defined a type, but Haskell can optimize it such that internally, it will not wrap and unwrap in a constructor, but simply treat the tuple in another way:</p>\n\n<pre><code><b>newtype</b> Pos = Pos (Int,Int)</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7330220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c3f8e5f67877cc55b5a9961253d746?s=128&d=identicon&r=PG&f=1", "display_name": "Vacation", "link": "https://stackoverflow.com/users/7330220/vacation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 47295847, "answer_count": 2, "score": 2, "last_activity_date": 1510732319, "creation_date": 1510695766, "question_id": 47295706, "link": "https://stackoverflow.com/questions/47295706/haskell-couldnt-match-type-int-integer-with-pos", "title": "Haskell - Couldn&#39;t match type `(Int, Integer)&#39; with `Pos&#39;", "body": "<p>I am currently learning Haskell and I am currently having an issue.</p>\n\n<p>This is my code:</p>\n\n<pre><code>data Pos = Pos (Int, Int) deriving (Show, Eq)                             \nallCoordinates :: [Pos]\nallCoordinates = concat [(zip (allHelper x) [0..8]) | x&lt;-[0..8]]\n\nallHelper ::Int -&gt; [Int]\nallHelper x = [x | y&lt;-[0..8]]\n</code></pre>\n\n<p>I have to use that specific data type and I am having a little issue due to this.</p>\n\n<p>This code works perfectly fine if the code is written like this:</p>\n\n<pre><code>type Pos = (Int, Int)\nallCoordinates :: [(Int, Int)]\nallCoordinates = concat [(zip (allHelper x) [0..8]) | x&lt;-[0..8]]\n</code></pre>\n\n<p>but  I need to edit this bit:</p>\n\n<pre><code>concat [(zip (allHelper x) [0..8]) | x&lt;-[0..8]]\n</code></pre>\n\n<p>so that it works with:</p>\n\n<pre><code>allCoordinates :: [Pos]\n</code></pre>\n\n<p>It is probably a simple issue and I having a bit of a mental block however can anyone help?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["java", "haskell", "java-8", "java-stream"], "comments": [{"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1510694191, "post_id": 47295267, "comment_id": 81541775, "body": "I don&#39;t know haskell, but if you are willing to explain what it does..."}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1510694389, "post_id": 47295267, "comment_id": 81541879, "body": "Sorry for the direct question. The code is a function that builds a list, and each element of the produced list is a tuple (with four elements: w, m, n, g). Each one of these elements is itself drawn from a corresponding list, and then these elements are subject to certain constraints."}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1510694492, "post_id": 47295267, "comment_id": 81541932, "body": "Probably, my question could be asked better in the following way, though I appreciate a direct answer to the above code snippet:  is there in java something like Tuples in Haskell?"}, {"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1510694658, "post_id": 47295267, "comment_id": 81542030, "body": "this is ain&#39;t going to be a walk in the park... java does not have <code>Tuple</code>, at all. So your best bet would be <code>List&lt;List&lt;...&gt;&gt;</code> which ain&#39;t pretty; but possible. Generally if would make your requirements understandable, this could be done - but Java Functional very much <code>!=</code> haskell functional"}, {"owner": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "edited": false, "score": 2, "creation_date": 1510694681, "post_id": 47295267, "comment_id": 81542053, "body": "@HassanShahin unfortunately your question is <i>too broad</i>. have a look at <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\"><b>java.util.stream</b></a> package for classes that support functional-style operations on streams of elements and also see the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\"><b>java.util.function</b></a> package for the available functional interfaces. once you make an attempt and you&#39;re stuck feel free to come back with that you&#39;ve tried."}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "reply_to_user": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "edited": false, "score": 0, "creation_date": 1510694869, "post_id": 47295267, "comment_id": 81542160, "body": "@Aomin&#232; Thanks, I will."}, {"owner": {"reputation": 110342, "user_id": 1441122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1", "display_name": "Stuart Marks", "link": "https://stackoverflow.com/users/1441122/stuart-marks"}, "edited": false, "score": 4, "creation_date": 1510704652, "post_id": 47295267, "comment_id": 81546145, "body": "Voting to reopen. While general questions of converting Haskell to Java are certainly too broad, the example in this question is simple enough to convert, and it raises some interesting issues. I decided to think about this whilst in the shower, but you guys were too quick to close it. (Either that or I&#39;m too slow in the shower.)"}], "answers": [{"comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1510811628, "post_id": 47322249, "comment_id": 81595895, "body": "You can avoid boxing by replacing <code>.boxed().flatMap(...)</code> with <code>.mapToObj(...).flatMap(Function.identity())</code>."}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "edited": false, "score": 1, "creation_date": 1510848341, "post_id": 47322249, "comment_id": 81619637, "body": "@Stuart Marks Many many thanks for insisting to re-open the question. (I thought I was doing some harm because of the negative rating). Secondly thanks for the code, and yes! it produces the same results. Thirdly, thanks for the great clarification of the logic to building the code."}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "edited": false, "score": 0, "creation_date": 1510848421, "post_id": 47322249, "comment_id": 81619688, "body": "@Eugene: Thanks for accepting and voting to re-open the question."}, {"owner": {"reputation": 629, "user_id": 8314175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ab08f86db29617691e6de73fdbbdae?s=128&d=identicon&r=PG&f=1", "display_name": "123-xyz", "link": "https://stackoverflow.com/users/8314175/123-xyz"}, "edited": false, "score": 1, "creation_date": 1510859842, "post_id": 47322249, "comment_id": 81626918, "body": "Very interesting. A bit more about performance. if we merge all the condition in one filter: <code>filter(g -&gt; (((w - 2 * m - n * g) % (n + 1) == 0)) &amp;&amp; (n * g + 2 * m &lt;= w) &amp;&amp; (n * g &lt;= w)) </code>, the performance can be improved about 30%. if we use parallel stream, the speed will be almost doubled by the test on my laptop."}, {"owner": {"reputation": 189, "user_id": 8179137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b43fe26a1b6191280614f56683525d?s=128&d=identicon&r=PG&f=1", "display_name": "Potato44", "link": "https://stackoverflow.com/users/8179137/potato44"}, "edited": false, "score": 2, "creation_date": 1510876008, "post_id": 47322249, "comment_id": 81634355, "body": "About the Haskell being slow, since you didn&#39;t mention it I&#39;m guessing you compiled without optimizations. The -O2 compiler flag turns them on. Also GHC 7.6.3 is quite old."}, {"owner": {"reputation": 110342, "user_id": 1441122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1", "display_name": "Stuart Marks", "link": "https://stackoverflow.com/users/1441122/stuart-marks"}, "reply_to_user": {"reputation": 189, "user_id": 8179137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b43fe26a1b6191280614f56683525d?s=128&d=identicon&r=PG&f=1", "display_name": "Potato44", "link": "https://stackoverflow.com/users/8179137/potato44"}, "edited": false, "score": 1, "creation_date": 1510899180, "post_id": 47322249, "comment_id": 81640524, "body": "@Potato44 Ah! I compiled with -O2 with 7.6.3 and times were considerably faster, though still not quite as fast as Java. I&#39;ve edited the answer with these times. I also tried out GHC 8.2.1 with -O2 but oddly enough things were considerably slower than 7.6.3: 26s for <code>head</code> and 107s for all ops. Any ideas?"}, {"owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "edited": false, "score": 1, "creation_date": 1510899353, "post_id": 47322249, "comment_id": 81640590, "body": "@StuartMarks What happens if you use <code>Int</code>s instead of <code>Integer</code>s in Haskell (<code>build :: [(Int, Int, Int, Int)]</code>)? I get a good speedup."}, {"owner": {"reputation": 110342, "user_id": 1441122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1", "display_name": "Stuart Marks", "link": "https://stackoverflow.com/users/1441122/stuart-marks"}, "reply_to_user": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "edited": false, "score": 1, "creation_date": 1510900042, "post_id": 47322249, "comment_id": 81640843, "body": "@ChaiT.Rex I changed the comprehension to use <code>(w::Int,m::Int,n::Int,g::Int)</code> and speed improved to about 5s for <code>head</code> and 22s for all ops. Is there a better way to use <code>Int</code> instead of <code>Integer</code>?"}, {"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 2, "creation_date": 1510915568, "post_id": 47322249, "comment_id": 81649445, "body": "@StuartMarks I could have not even imagined I would be so happy re-opening a closed question. thank u so much"}, {"owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "reply_to_user": {"reputation": 629, "user_id": 8314175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ab08f86db29617691e6de73fdbbdae?s=128&d=identicon&r=PG&f=1", "display_name": "123-xyz", "link": "https://stackoverflow.com/users/8314175/123-xyz"}, "edited": false, "score": 0, "creation_date": 1510953853, "post_id": 47322249, "comment_id": 81671763, "body": "@123-xyz: Do you think we can we get more performance in the Haskell function if we combine the conditions into one condition, the same way as you suggested for Java filters?"}], "tags": [], "owner": {"reputation": 110342, "user_id": 1441122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1", "display_name": "Stuart Marks", "link": "https://stackoverflow.com/users/1441122/stuart-marks"}, "is_accepted": true, "score": 6, "last_activity_date": 1510898959, "last_edit_date": 1510898959, "creation_date": 1510809891, "answer_id": 47322249, "question_id": 47295267, "link": "https://stackoverflow.com/questions/47295267/converting-a-haskell-function-into-java-function/47322249#47322249", "title": "converting a Haskell function into java &quot;function&quot;", "body": "<p>(I'm not a Haskell expert, but I know enough to be dangerous.)</p>\n\n<p>The example code given has several Haskell constructs that map reasonably\nwell into Java constructs:</p>\n\n<ul>\n<li><p>A Haskell list is lazy, so it corresponds to a Java Stream.</p></li>\n<li><p>The ranges used are of integers, so they correspond to IntStream.\nFor example, <code>[240..1280]</code> corresponds to <code>IntStream.rangeClosed(240, 1280)</code>.</p></li>\n<li><p>A range with a step has no direct correspondence in Java, but it can easily\nbe computed; you just have to do a bit of arithmetic and then map the values\nfrom the sequential range to the one with steps. For example, <code>[2, 4..20]</code>\ncan be written as</p>\n\n<pre><code>IntStream.rangeClosed(1, 10).map(i -&gt; 2 * i)\n</code></pre></li>\n<li><p>A condition on a list comprehension corresponds to filtering a stream through\na predicate.</p></li>\n<li><p>A comprehension with multiple generators corresponds to flatmapping\nof nested streams.</p></li>\n<li><p>There is no general way to represent tuples in Java. Various third party\nlibraries provide tuple implementations with varying tradeoffs regarding\ngenerics and boxing. Or, you can just write your own class with the fields\nyou want. (This can be quite tedious if you use lots of different kinds of\ntuples, though.) In this case, the tuple is simply four ints, so it's easily\nrepresented using an int array with four elements.</p></li>\n</ul>\n\n<p>Putting it all together, we get the following.</p>\n\n<pre><code>static Stream&lt;int[]&gt; build() {\n    return IntStream.rangeClosed(240, 1280).boxed()\n               .flatMap(w -&gt; IntStream.rangeClosed(1, 10).map(m -&gt; 2 * m).boxed()\n                   .flatMap(m -&gt; IntStream.rangeClosed(2, 100).boxed()\n                       .flatMap(n -&gt; IntStream.rangeClosed(240, 1280)\n                                              .filter(g -&gt; ((w - 2*m - n*g) % (n+1) == 0))\n                                              .filter(g -&gt; n*g+2*m &lt;= w)\n                                              .filter(g -&gt; n*g &lt;= w)\n                                              .mapToObj(g -&gt; new int[] { w, m, n, g }))));\n}\n</code></pre>\n\n<p>This is clearly quite verbose compared to the original Haskell, but you can easily see where the Haskell constructs have ended up in the Java code. I believe this is correct, as it seems to generate the same output as the Haskell code.</p>\n\n<p>Note that we are generating values using <code>IntStream</code> but we want the flatmap to give a stream of arrays (which are objects), whereas <code>IntStream.flatMap</code> returns an <code>IntStream</code>. Perhaps ideally there would be a <code>flatMapToObj</code> operation, but there isn't, so we must box the int value into an <code>Integer</code> object and then call <code>Stream.flatMap</code> it.</p>\n\n<p>One could assign the stream pipeline to a variable of type Stream, but this wouldn't be very convenient, as Java streams can be used at most once. Since constructing such a stream is cheap (compared to evaluating it) it's reasonable to write a function <code>build()</code> that returns a freshly created stream, ready to be evaluated by the caller.</p>\n\n<p>When the following Java code is run,</p>\n\n<pre><code>    System.out.println(build().count());\n    System.out.println(build().findFirst().map(Arrays::toString).orElse(\"not found\"));\n    System.out.println(build().reduce((a, b) -&gt; b).map(Arrays::toString).orElse(\"not found\"));\n</code></pre>\n\n<p>the result is:</p>\n\n<pre><code>654559\n[484, 2, 2, 240]\n[1280, 20, 5, 248]\n</code></pre>\n\n<p>Running the following Haskell code (the definition of <code>build</code> is copied from the question)</p>\n\n<pre><code>build = [(w,m,n,g) | w &lt;- [240..1280], m &lt;- [2,4..20], n &lt;- [2..100], g &lt;- [240..1280],\n                     ((w - 2*m - n*g) `mod` (n+1) == 0), n*g+2*m &lt;= w, n*g &lt;= w]\n\nmain = do\n    print (length build)\n    print (head build)\n    print (last build)\n</code></pre>\n\n<p>gives the following output:</p>\n\n<pre><code>654559\n(484,2,2,240)\n(1280,20,5,248)\n</code></pre>\n\n<p>So the transliteration appears correct to my eye.</p>\n\n<p>Times for the <code>head</code> (in Java, <code>findFirst</code>) and <code>last</code> (in Java, <code>reduce((a, b) -&gt; b)</code>) operations were as follows: (updated using GHC 7.6.3 -O2)</p>\n\n<pre><code>       head     last\nGHC      8s      36s\nJDK      3s       9s\n</code></pre>\n\n<p>This at least shows that both systems provide laziness, as the computation is short-circuited after the first element is found, whereas finding the last element requires all to be computed.</p>\n\n<p>Interestingly, in Haskell, calling all three of <code>length</code>, <code>head</code>, and <code>last</code> doesn't take any more time than just calling <code>last</code> (around 36s) presumably because of memoization. There's no memoization in Java, but of course you could explicitly store the results in an array or List and process that multiple times.</p>\n\n<p>Overall, though, I was startled at how much faster the Java implementation is. I don't really understand Haskell performance, so I'll leave it to Haskell experts to comment on that. It's quite possible I've done something wrong, though mostly I just copied the function from the question into a file and compiled it using GHC.</p>\n\n<p>My environment:</p>\n\n<p>JDK 9, GHC 7.6.3 -O2, MacBook Pro mid 2014 2-core 3GHz Intel Core i7</p>\n"}], "owner": {"reputation": 181, "user_id": 5504664, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-uS2B2l7Eep8/AAAAAAAAAAI/AAAAAAAAAGA/IotCrHH3PYE/photo.jpg?sz=128", "display_name": "Hassan Shahin", "link": "https://stackoverflow.com/users/5504664/hassan-shahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 1, "accepted_answer_id": 47322249, "answer_count": 1, "score": 2, "last_activity_date": 1510898959, "creation_date": 1510693894, "last_edit_date": 1510807178, "question_id": 47295267, "link": "https://stackoverflow.com/questions/47295267/converting-a-haskell-function-into-java-function", "title": "converting a Haskell function into java &quot;function&quot;", "body": "<p>I have this function in Haskell, and I am wondering how it can be converted to Java, especially using streams:</p>\n\n<pre><code>build = [(w,m,n,g) | w &lt;- [240..1280], m &lt;- [2,4..20], n &lt;- [2..100], g &lt;- [240..1280], ((w - 2*m - n*g) `mod` (n+1) == 0), n*g+2*m &lt;= w, n*g &lt;= w]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510690656, "post_id": 47294416, "comment_id": 81539907, "body": "A monad has no state, a State monad is more some sort of representation of something that <i>changes</i> state."}, {"owner": {"reputation": 77, "user_id": 5838116, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mlwk4.png?s=128&g=1", "display_name": "iIllumination", "link": "https://stackoverflow.com/users/5838116/iillumination"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510690748, "post_id": 47294416, "comment_id": 81539952, "body": "okey, but like the function execState takes a function and a grid as input. How do I find the last grid?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510690936, "post_id": 47294416, "comment_id": 81540033, "body": "Well a <i>poor man solution</i> is to use an <code>IORef</code> I think. But You probably do some rewrites and use a <code>State</code> monad if you want to maintain state."}, {"owner": {"reputation": 77, "user_id": 5838116, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mlwk4.png?s=128&g=1", "display_name": "iIllumination", "link": "https://stackoverflow.com/users/5838116/iillumination"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510691404, "post_id": 47294416, "comment_id": 81540291, "body": "Okey, but I don&#39;t understand. Caues the new state is based of the previous."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510691486, "post_id": 47294416, "comment_id": 81540337, "body": "Well basically a <code>State</code> monad is just <code>s -&gt; (s,a)</code>. So a function that takes a state, and returns a tuple with the new state, and optionally some esponse <code>a</code>. And so you can chain these functions together in more complicated State monads. When done, you can then run it with an initial state, and catch the eventual state."}, {"owner": {"reputation": 77, "user_id": 5838116, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mlwk4.png?s=128&g=1", "display_name": "iIllumination", "link": "https://stackoverflow.com/users/5838116/iillumination"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510692038, "post_id": 47294416, "comment_id": 81540609, "body": "This seems very complicated. Do u have any example?"}, {"owner": {"reputation": 77, "user_id": 5838116, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mlwk4.png?s=128&g=1", "display_name": "iIllumination", "link": "https://stackoverflow.com/users/5838116/iillumination"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510692064, "post_id": 47294416, "comment_id": 81540629, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/159002/discussion-between-iillumination-and-willem-van-onsem\">continue this discussion in chat</a>."}], "owner": {"reputation": 77, "user_id": 5838116, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mlwk4.png?s=128&g=1", "display_name": "iIllumination", "link": "https://stackoverflow.com/users/5838116/iillumination"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510690393, "creation_date": 1510690393, "question_id": 47294416, "link": "https://stackoverflow.com/questions/47294416/haskell-get-last-state-board", "title": "Haskell - Get last state/board", "body": "<p>hi I need help to get the last state of a monad. So the program is based on the program Game of Life with some user interact. What I am working on right now is a function that allows the user to manualy input the x and y coords to make a cell alive. The problem is that I don't know how to get the last board. Is it a simple why to get the last state? Last board? Or maybe I should so something different? I appreciate all replies!</p>\n\n<p>Program so far: </p>\n\n<pre><code>import Control.Monad.State\nimport Data.List\nimport System.IO\nimport Data.Char\nimport Data.List.Split\n\ndata CellState = Dead | Alive deriving (Eq)\ndata Cell = Cell CellState Int deriving (Eq)\ndata Row = Row [Cell] Int deriving (Eq)\ndata Grid = Grid [Row]\n\ntype GridState a = State Grid a\n\ninstance Show Grid where\n        show (Grid rows) = do \n                unlines $ map show rows\n\ninstance Show Row where\n        show (Row cells n) = (show n) ++ \": \" ++ (unwords $ map show cells)\n\n\ninstance Show Cell where\n        show (Cell color _) = show color\n\ninstance Show CellState where\n        show c = case c of\n                Dead -&gt; \"_\"\n                Alive -&gt; \"#\"\n\nmain :: IO()      \nmain = do \n\n\n        let menu = do\n                putStrLn \"Please execute following command or exit program: \"\n                putStrLn \"1. Initialize new grid - 'y'\"\n                putStrLn \"2. Create new grid - 'c n'\"\n                putStrLn \"3. Set cell Alive, x y - 'n x y'\"\n                putStrLn \"4. Quit the program - 'q'\"\n\n                action &lt;- getLine \n                if action == \"q\"\n                        then return () \n\n                else if (action == \"y\") \n                        then do \n                                print $ execState initializeGrid (createGrid 9)\n                                menu\n\n                else if (fst (c action))\n                        then do \n                                let s = (snd (c action))\n                                let first = read (s !! 1) :: Int\n                                print $ execState initializeGrid (createGrid first)\n                                menu\n\n                else if (fst (n action))\n                        then do \n                                let s = (snd (n action))\n                                let first = read (s !! 1) :: Int\n                                let second = read (s !! 2) :: Int\n                                let list = --RIGHT HERE I WANT TO GET THE LAST GRID\n                                print $ execState updateAlive list\n                        else do \n                                putStrLn \"No\"\n                                menu\n\n        menu\n\n\nn :: String -&gt; (Bool, [String])\nn s = do \n        let list = splitOn \" \" s\n        let char = (list !! 0) \n        let first = all isDigit (list !! 1)\n        let second = all isDigit (list !! 2)\n        let l = length list\n\n        if (char == \"n\") &amp;&amp; first &amp;&amp; second &amp;&amp; (l == 3)\n                then (True, list)\n                else (False, list)\n\n\nc :: String -&gt; (Bool, [String])\nc s = do \n        let list = splitOn \" \" s\n        let char = (list !! 0)\n        let first = all isDigit (list !! 1)\n        let l = length list\n\n        if (char == \"c\") &amp;&amp; first &amp;&amp; (l == 2)\n                then (True, list)\n                else (False, list)\n\nupdateAlive :: Int -&gt; Int -&gt; GridState ()   \nupdateAlive x y = do \n        setAliveCell x y\n\ninitializeGrid :: GridState() \ninitializeGrid = do \n        setAliveCell 1 1\n        setAliveCell 1 2\n        setAliveCell 2 1 \n\ncreateGrid :: Int -&gt; Grid \ncreateGrid n = Grid (map row (take n [0, 1..])) where\n        row = Row (map cell (take n [0, 1..]))\n        cell = Cell Dead\n\nsetAliveCell :: Int -&gt; Int -&gt; GridState()\nsetAliveCell x y = do\n        grid &lt;- get\n        let rows = getRows grid\n            cells = getCells (rows !! x) \n            updateState = Grid (replaceCellState rows x (Row (replaceCellState cells y (Cell Alive y)) x))\n        put updateState\n\nsetDeadCell :: Int -&gt; Int -&gt; GridState() \nsetDeadCell x y = do \n        grid &lt;- get \n        let rows = getRows grid\n            cells = getCells (rows !! x) \n            updateState = Grid (replaceCellState rows x (Row (replaceCellState cells y (Cell Dead y )) x)) \n        put updateState\n\n\nisAlive :: Cell -&gt; Bool \nisAlive (Cell a _) = a == Alive\n\ngetCells :: Row -&gt; [Cell]\ngetCells (Row c _) = c \n\ngetRows :: Grid -&gt; [Row] \ngetRows (Grid r) = r\n\nreplaceCellState :: [a] -&gt; Int -&gt; a -&gt; [a] \nreplaceCellState list pos replacement = \n        let (x, _:xs) = splitAt pos list\n        in x ++ replacement : xs\n\nplayRound :: Grid -&gt; Grid\nplayRound (Grid rows) = Grid $ map (updateRow rows) rows        \n\nupdateRow :: [Row] -&gt; Row -&gt; Row\nupdateRow rows row@(Row cells p) = Row (map (updateCell rows row) cells) p\n\nupdateCell :: [Row] -&gt; Row -&gt; Cell -&gt; Cell\nupdateCell rows row cell@(Cell _ position) =\n        let upperRowCells = getCells $ previous rows row\n            upperCell = upperRowCells !! position\n            lowerRowCells = getCells $ next rows row\n            lowerCell = lowerRowCells !! position\n            neighbourCells = [upperCell, lowerCell] ++\n                getNextPrevious (getCells row) cell ++\n                getNextPrevious upperRowCells upperCell ++\n                getNextPrevious lowerRowCells lowerCell\n            countLivingNeighbours = length $ filter (==Alive) $ map getCellColor neighbourCells\n            isLiving = getCellColor cell == Alive\n        in Cell (calcCellState isLiving countLivingNeighbours) position\n\ngetCellColor :: Cell -&gt; CellState\ngetCellColor (Cell c _) = c\n\ncalcCellState :: Bool -&gt; Int -&gt; CellState\ncalcCellState living livingNeighbours\n        | living &amp;&amp; livingNeighbours &lt; 2 = Dead\n        | living &amp;&amp; livingNeighbours &lt;= 3 = Alive\n        | living &amp;&amp; livingNeighbours &gt; 3 = Dead\n        | not living &amp;&amp; livingNeighbours == 3 = Alive\n        | otherwise = Dead\n\ngetNextPrevious :: Eq a =&gt; [a] -&gt; a -&gt; [a]\ngetNextPrevious l e = [next l e, previous l e]\n\nnext :: Eq a =&gt; [a] -&gt; a -&gt;  a\nnext l@(x:_) e = case dropWhile (/= e) l of\n                (_:y:_) -&gt; y\n                _ -&gt; x\n\nprevious :: Eq a =&gt; [a] -&gt; a -&gt; a \nprevious l e = case takeWhile (/= e) l of\n                [] -&gt; last l\n                x -&gt; last x\n</code></pre>\n"}, {"tags": ["haskell", "quickcheck"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510682618, "post_id": 47292267, "comment_id": 81535373, "body": "Because you simply call the same function again."}, {"owner": {"reputation": 2699, "user_id": 304435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/38fb50d1c81b7a8ea1994bc02f695fef?s=128&d=identicon&r=PG", "display_name": "tesserakt", "link": "https://stackoverflow.com/users/304435/tesserakt"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510682697, "post_id": 47292267, "comment_id": 81535413, "body": "Which function am I calling again?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510683014, "post_id": 47292267, "comment_id": 81535588, "body": "the one you have just defined."}], "answers": [{"comments": [{"owner": {"reputation": 2699, "user_id": 304435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/38fb50d1c81b7a8ea1994bc02f695fef?s=128&d=identicon&r=PG", "display_name": "tesserakt", "link": "https://stackoverflow.com/users/304435/tesserakt"}, "edited": false, "score": 0, "creation_date": 1510682753, "post_id": 47292488, "comment_id": 81535442, "body": "Excellent, was right in front of me; thanks for the help."}, {"owner": {"reputation": 2699, "user_id": 304435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/38fb50d1c81b7a8ea1994bc02f695fef?s=128&d=identicon&r=PG", "display_name": "tesserakt", "link": "https://stackoverflow.com/users/304435/tesserakt"}, "edited": false, "score": 0, "creation_date": 1510682819, "post_id": 47292488, "comment_id": 81535468, "body": "Doesn&#39;t this change the return type, though? Why wouldn&#39;t the compiler catch it?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 2699, "user_id": 304435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/38fb50d1c81b7a8ea1994bc02f695fef?s=128&d=identicon&r=PG", "display_name": "tesserakt", "link": "https://stackoverflow.com/users/304435/tesserakt"}, "edited": false, "score": 0, "creation_date": 1510683002, "post_id": 47292488, "comment_id": 81535577, "body": "@tesserakt I hope my last edit clarifies this a bit."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 4, "last_activity_date": 1510682865, "last_edit_date": 1510682865, "creation_date": 1510682698, "answer_id": 47292488, "question_id": 47292267, "link": "https://stackoverflow.com/questions/47292267/haskell-arbitrary-typeclass-instance-return-type/47292488#47292488", "title": "Haskell arbitrary typeclass instance return type", "body": "<p>Type inference changes the <code>arbitrary</code> call to point at the <em>same</em> instance we are defining right now, causing an infinite loop.</p>\n\n<pre><code>instance (Arbitrary a) =&gt; Arbitrary (Identity a) where\n   arbitrary = do\n        x &lt;- Test.QuickCheck.arbitrary  -- this calls arbitrary @ a\n        return (Identity x)\n\ninstance (Arbitrary a) =&gt; Arbitrary (Identity a) where\n   arbitrary = do\n        x &lt;- Test.QuickCheck.arbitrary  -- this calls arbitrary @ (Identity a)\n        return x\n</code></pre>\n\n<p>Every time we call a class method, the compiler infers which instance to call.</p>\n\n<p>In the former case, the compiler infers <code>x :: a</code> (only this type makes the code type check!), hence it calls <code>arbitrary @ a</code>. </p>\n\n<p>In the latter case, the compiler infers <code>x :: Identity a</code> (only this type makes the code type check!), hence it calls <code>arbitrary @ (Identity a)</code>, causing the infinite loop.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1510682974, "creation_date": 1510682974, "answer_id": 47292575, "question_id": 47292267, "link": "https://stackoverflow.com/questions/47292267/haskell-arbitrary-typeclass-instance-return-type/47292575#47292575", "title": "Haskell arbitrary typeclass instance return type", "body": "<p>If you write it as:</p>\n\n<pre><code>instance Arbitrary a =&gt; Arbitrary (Identity a) where\n    <b>arbitrary</b> = do\n        x &lt;- <b>arbitrary</b>\n        return x</code></pre>\n\n<p>(I renamed <code>a</code> to <code>x</code> to cause less confusion).</p>\n\n<p>Then Haskell will do the type plumbing, and it will derive that, since you write <code>return x</code>, <code>x</code> must have type <code>Identity a</code>. And we are lucky, since there exists an <code>arbitrary :: Arbitrary a =&gt; Gen a</code>, the one we just defined (put in boldface here).</p>\n\n<p>So that means that we have constructed an infinite loop. For instance in Java, it would look like:</p>\n\n<pre><code>public int foo(int x) {\n    return foo(x);\n}\n</code></pre>\n\n<p>Of course we can define such a function, and it is correct if we check the types. But there is of course no progress, since we keep calling the same function that will again call that function and again, and again,...</p>\n\n<p>If you however write:</p>\n\n<pre><code>instance Arbitrary a =&gt; Arbitrary (Identity a) where\n    <b>arbitrary</b> = do\n        x &lt;- arbitrary\n        return <b>Identity</b> x</code></pre>\n\n<p>Haskell will derive that <code>x</code> has type <code>a</code>. And we are again lucky, since we have defined that <code>Arbitrary a</code> should hold, some somewhere there is an <code>arbitrary :: Arbitrary a =&gt; Gen a</code> function, but it is a different one (that's why I did not write it in boldface here), and that one will generate the value that we wrap in the <code>Identity</code> constructor.</p>\n\n<p>Note that in the <strong>first example, we do not even have to add the <code>Arbitrary a</code> constraint</strong>: indeed:</p>\n\n<pre><code>instance Arbitrary (Identity a) where\n    <b>arbitrary</b> = do\n        x &lt;- <b>arbitrary</b>\n        return x</code></pre>\n\n<p>this compiles just fine, since we never generate an arbitrary <code>a</code>.</p>\n"}], "owner": {"reputation": 2699, "user_id": 304435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/38fb50d1c81b7a8ea1994bc02f695fef?s=128&d=identicon&r=PG", "display_name": "tesserakt", "link": "https://stackoverflow.com/users/304435/tesserakt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 47292488, "answer_count": 2, "score": 2, "last_activity_date": 1510682974, "creation_date": 1510681982, "question_id": 47292267, "link": "https://stackoverflow.com/questions/47292267/haskell-arbitrary-typeclass-instance-return-type", "title": "Haskell arbitrary typeclass instance return type", "body": "<p>From the Haskell Book chapter on Monoids, I am writing quickcheck tests for </p>\n\n<pre><code>semigroupAssoc :: (Eq m, S.Semigroup m) =&gt; m -&gt; m -&gt; m -&gt; Bool\nsemigroupAssoc a b c =\n    (a S.&lt;&gt; (b S.&lt;&gt; c)) == ((a S.&lt;&gt; b) S.&lt;&gt; c)\n\ntype IdentAssoc = Identity String -&gt; Identity String -&gt; Identity String -&gt; Bool\n</code></pre>\n\n<p>, invoking with</p>\n\n<pre><code>quickCheck (semigroupAssoc :: IdentAssoc)\n</code></pre>\n\n<p>Here is the arbitrary typeclass instance</p>\n\n<pre><code>instance (Arbitrary a) =&gt; Arbitrary (Identity a) where\n    arbitrary = do\n        a &lt;- Test.QuickCheck.arbitrary\n        return (Identity a)\n</code></pre>\n\n<p>My question is that in my arbitrary instance, I can return either (Identity a) or just a.  (Identity a) is correct, but just a gives no compiler error and causes an infinite loop when run. Why is this?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1510681443, "post_id": 47292083, "comment_id": 81534676, "body": "<a href=\"https://www.haskell.org/hoogle/?q=sort\" rel=\"nofollow noreferrer\">haskell.org/hoogle/?q=sort</a>"}, {"owner": {"reputation": 25, "user_id": 7580334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeac32fe621ab49cebebdd2690c414ce?s=128&d=identicon&r=PG&f=1", "display_name": "user408340", "link": "https://stackoverflow.com/users/7580334/user408340"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1510681822, "post_id": 47292083, "comment_id": 81534905, "body": "I know about this function but the sorting of the list depends on the outputs of the function &quot;distance&quot; for every two points. So how can I use it in this case?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1510684227, "post_id": 47292083, "comment_id": 81536342, "body": "<a href=\"https://www.haskell.org/hoogle/?q=sortBy\" rel=\"nofollow noreferrer\">haskell.org/hoogle/?q=sortBy</a>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510684983, "post_id": 47292083, "comment_id": 81536826, "body": "<code>sortBy (comparing distance) list</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7580334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeac32fe621ab49cebebdd2690c414ce?s=128&d=identicon&r=PG&f=1", "display_name": "user408340", "link": "https://stackoverflow.com/users/7580334/user408340"}, "edited": false, "score": 0, "creation_date": 1510686126, "post_id": 47293196, "comment_id": 81537560, "body": "I got this error: &lt;interactive&gt;:92:1: error:     Variable not in scope:       sortOn :: ((Double, Double) -&gt; Double) -&gt; [(Integer, Integer)] -&gt; t"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 25, "user_id": 7580334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeac32fe621ab49cebebdd2690c414ce?s=128&d=identicon&r=PG&f=1", "display_name": "user408340", "link": "https://stackoverflow.com/users/7580334/user408340"}, "edited": false, "score": 0, "creation_date": 1510690455, "post_id": 47293196, "comment_id": 81539805, "body": "@user408340 Did you import <code>Data.List</code>? What version of <code>base</code> do you have (you can ask with <code>ghc-pkg list base</code>)?"}, {"owner": {"reputation": 25, "user_id": 7580334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeac32fe621ab49cebebdd2690c414ce?s=128&d=identicon&r=PG&f=1", "display_name": "user408340", "link": "https://stackoverflow.com/users/7580334/user408340"}, "edited": false, "score": 0, "creation_date": 1510691205, "post_id": 47293196, "comment_id": 81540189, "body": "No, I forgot to import it. Thank you very much!"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 2, "last_activity_date": 1510685427, "creation_date": 1510685427, "answer_id": 47293196, "question_id": 47292083, "link": "https://stackoverflow.com/questions/47292083/haskell-function-that-returns-a-sorted-list-of-points-depending-on-how-close-the/47293196#47293196", "title": "Haskell function that returns a sorted list of points depending on how close they are to a certain point", "body": "<p>You can use <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:sortOn\" rel=\"nofollow noreferrer\"><code>sortOn</code></a>, which has type</p>\n\n<pre><code>sortOn :: Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]\n</code></pre>\n\n<p>and which sorts the <code>a</code>s by comparing the output of the <code>a -&gt; b</code> function. For example,</p>\n\n<pre><code>Data.List&gt; sortOn (distance (0,0)) [(3,0), (1,1), (0,1)]\n[(0.0,1.0),(1.0,1.0),(3.0,0.0)]\n</code></pre>\n\n<p>You might also consider writing a <code>squaredDistance</code> function which omits the <code>sqrt</code> for efficiency, since <code>sqrt</code> is monotonic and hence does not affect sort order.</p>\n"}], "owner": {"reputation": 25, "user_id": 7580334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeac32fe621ab49cebebdd2690c414ce?s=128&d=identicon&r=PG&f=1", "display_name": "user408340", "link": "https://stackoverflow.com/users/7580334/user408340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 47293196, "answer_count": 1, "score": 0, "last_activity_date": 1510685427, "creation_date": 1510681279, "question_id": 47292083, "link": "https://stackoverflow.com/questions/47292083/haskell-function-that-returns-a-sorted-list-of-points-depending-on-how-close-the", "title": "Haskell function that returns a sorted list of points depending on how close they are to a certain point", "body": "<p>I have the following three functions. The function \"distance\" calculates the distance between two points. The function \"calculatesDistances\" takes a point (x1, y1) and a list of points [(x2, y2)] and uses the \"distance\" function to calculate the distance between (x1, y1) and every (x2, y2) in the list [(x2, y2)]. It returns a sorted list of points depending on their distance to (x1, y1). The function \"closestDistances\" returns the n closest points to (x1, y1) and it uses the sorted list from the function \"calculatesDistances\".</p>\n\n<p>I think my algorithm is correct but as you can see my code for \"calculatesDistances\" is missing because I have no idea how to write this in Haskell. I am a beginner and I'm really struggling with Haskell syntax. Any help will be appreciated.</p>\n\n<pre><code>distance :: (Floating a, Ord a) =&gt; (a,a) -&gt; (a,a)-&gt; a\n    distance (x1 , y1) (x2 , y2) = sqrt (x'*x' + y'*y')\n        where\n          x' = x1 - x2\n          y' = y1 - y2\n\n    Example outputs:\n    *Main&gt; distance (0,0) (1,0)\n    1.0\n    *Main&gt; distance (0,0) (2,0)\n    2.0\n    *Main&gt; distance (0,0) (3,0)\n    3.0\n\n\n    calculatesDistances :: (Floating a, Ord a) =&gt; (a,a) -&gt; [(a,a)] -&gt; [(a,a)]\n    Psesudocode:\n    Apply function distance to (x1 , y1) and every (x2 , y2) in [(x2 , y2)] and get a distance for every input\n    Return the list [(x2 , y2)] but sorted in ascending order depending on the distance\n\n    Expected output:\n    *Main&gt; calculatesDistances (0,0) [(3,0), (2,0),(-3,0), (1,0)]\n     [(1,0),(2,0),(3,0),(-3,0)]\n\n\n    closestDistances :: (Floating a, Ord a) =&gt; Int -&gt; (a,a) -&gt; [(a,a)] -&gt; [(a,a)]\n    closestDistances n (x1, y1) [(x2, y2)] = take n (calculatesDistances (x1, y1) [(x2, y2)])\n\n    Expected output:\n\n    *Main&gt; closestDistances 3 (0,0) [(1,0),(2,0),(3,0),(-3,0)]\n     [(1,0),(2,0),(3,0)]\n\n    *Main&gt; closestDistances 2 (0,0) [(1,0),(2,0),(3,0),(-3,0)]\n     [(1,0),(2,0)]\n</code></pre>\n"}, {"tags": ["linux", "haskell", "yesod", "c9.io", "hamlet"], "answers": [{"tags": [], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "is_accepted": false, "score": 1, "last_activity_date": 1510680607, "creation_date": 1510680607, "answer_id": 47291890, "question_id": 47291657, "link": "https://stackoverflow.com/questions/47291657/haskell-yesod-problems/47291890#47291890", "title": "Haskell Yesod problems", "body": "<p>How did you start the yesod project? It's recommended to do:</p>\n\n<pre><code>stack new my-yesod-project yesod-(your database here)\ncd my-yesod-project\nstack build\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "is_accepted": false, "score": 5, "last_activity_date": 1510688153, "last_edit_date": 1510688153, "creation_date": 1510687722, "answer_id": 47293797, "question_id": 47291657, "link": "https://stackoverflow.com/questions/47291657/haskell-yesod-problems/47293797#47293797", "title": "Haskell Yesod problems", "body": "<p>Just read the error message carefully:</p>\n\n<pre><code>Failed to load interface for \u2018Network.HTTP.Types.Status\u2019\nIt is a member of the hidden package \u2018http-types-0.9.1\u2019.\nPerhaps you need to add \u2018http-types\u2019 to the build-depends in your .cabal file.\nUse -v to see a list of the files searched for.\n</code></pre>\n\n<p>The line <em>Perhaps you need to add \u2018http-types\u2019 to the build-depends in your .cabal file</em> tells you what to do: You must add <em>http-types</em> to the <em>build-depends:</em> section of the library <em>aulahaskell</em> in your cabal file. </p>\n\n<p>If this does not help, please post your cabal file.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6876476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97aa92a4282a037d5d34867e3beff11?s=128&d=identicon&r=PG", "display_name": "Flavia", "link": "https://stackoverflow.com/users/6876476/flavia"}, "is_accepted": false, "score": 0, "last_activity_date": 1510724635, "creation_date": 1510724635, "answer_id": 47300199, "question_id": 47291657, "link": "https://stackoverflow.com/questions/47291657/haskell-yesod-problems/47300199#47300199", "title": "Haskell Yesod problems", "body": "<p>Thank you, guys! It was a problem on how I was starting the project, some files weren't installed on my workspace, so I delete the files, reinstall Yesod and cabal, create another new version after following this steps: <a href=\"https://www.yesodweb.com/page/quickstart\" rel=\"nofollow noreferrer\">https://www.yesodweb.com/page/quickstart</a></p>\n"}], "owner": {"reputation": 41, "user_id": 6876476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97aa92a4282a037d5d34867e3beff11?s=128&d=identicon&r=PG", "display_name": "Flavia", "link": "https://stackoverflow.com/users/6876476/flavia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1510724635, "creation_date": 1510679790, "last_edit_date": 1510682421, "question_id": 47291657, "link": "https://stackoverflow.com/questions/47291657/haskell-yesod-problems", "title": "Haskell Yesod problems", "body": "<p>someone could help me?! I'm working in a Haskell Yesod site for college on a C9 workspace, I've already installed by command Yesod and update cabal,  but when I try \"stack build\" command, this miserable error message appears:</p>\n\n<pre><code> $ stack build\n\naulahaskell-0.0.0: build (lib + exe)\nPreprocessing library aulahaskell-0.0.0...\n[ 7 of 13] Compiling Handler.Cliente  ( src/Handler/Cliente.hs, .stack-work/dist/x86_64-linux/Cabal-1.24.2.0/build/Handler/Cliente.o )\n\n/home/ubuntu/workspace/web2017/src/Handler/Cliente.hs:10:1: error:\n    Failed to load interface for \u2018Network.HTTP.Types.Status\u2019\n    It is a member of the hidden package \u2018http-types-0.9.1\u2019.\n    Perhaps you need to add \u2018http-types\u2019 to the build-depends in your .cabal file.\n    Use -v to see a list of the files searched for.\n\n--  While building package aulahaskell-0.0.0 using:\n      /home/ubuntu/.stack/setup-exe-cache/x86_64-linux/Cabal-simple_mPHDZzAJ_1.24.2.0_ghc-8.0.2 --builddir=.stack-work/dist/x86_64-linux/Cabal-1.24.2.0 build lib:aulahaskell exe:aulahaskell --ghc-options \" -ddump-hi -ddump-to-file\"\n    Process exited with code: ExitFailure 1\n</code></pre>\n\n<p>Seriously, I tried a bunch of things to fix it, but nothing is working =S</p>\n"}, {"tags": ["haskell", "list-comprehension"], "comments": [{"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510678999, "post_id": 47291340, "comment_id": 81533276, "body": "cause if i &lt; 10 then &quot;three spaces&quot; else &quot;two spaces&quot;, and i&#39;m new to haskell so i don&#39;t know what you mean by intercalate. I&#39;m doing my best with what I know."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510679286, "post_id": 47291340, "comment_id": 81533414, "body": "What goes wrong when you try <code>if i&lt;10 then &quot;three spaces&quot; else &quot;two spaces&quot;</code>?"}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510679385, "post_id": 47291340, "comment_id": 81533477, "body": "I can&#39;t do it, I need to write it in this way. Is it even possible to write an else statement in a list comprehension?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510679480, "post_id": 47291340, "comment_id": 81533535, "body": "Why not, a list comprehension is <code>[ &lt;expr&gt; | &lt;list monad&gt; ]</code> so you can write any valid Haskell regex."}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510679699, "post_id": 47291340, "comment_id": 81533658, "body": "so the form would be [&lt;expr&gt; | &lt;list monad&gt; | &lt;expr&gt; | &lt;list monad&gt;] ?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510679813, "post_id": 47291340, "comment_id": 81533734, "body": "@ruubel: no, for instance <code>[ if &lt;bool-expr&gt; then &lt;expr&gt; else &lt;expr&gt; | &lt;list-monad&gt;]</code>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1510698260, "post_id": 47291340, "comment_id": 81543809, "body": "To find out how many spaces to deduct your best friend is a <code>floor . logBase 10 $ n</code> here. But check <a href=\"https://stackoverflow.com/q/26844123/4543207\">this</a> too."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510680048, "post_id": 47291653, "comment_id": 81533871, "body": "Thank you so much, it worked perfectly. It gave me a better understanding too."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510680640, "post_id": 47291653, "comment_id": 81534204, "body": "By &quot;dedicated formatting&quot; are you referring to <code>printf &quot;%-4d&quot; i</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510680787, "post_id": 47291653, "comment_id": 81534288, "body": "@4castle: yes indeed, although there are of course more sophisticated tools."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510680898, "post_id": 47291653, "comment_id": 81534365, "body": "@4castle: I added your suggestion to the answer."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1510680887, "last_edit_date": 1510680887, "creation_date": 1510679778, "answer_id": 47291653, "question_id": 47291340, "link": "https://stackoverflow.com/questions/47291340/haskell-if-else-list-comprehension/47291653#47291653", "title": "Haskell if else list comprehension", "body": "<p>The left hand of the list comprehension accepts any Haskell expression, so we can write the <code>if</code>-<code>then</code>-<code>else</code> in the left hand of the list comprehension and omit the <code>i &lt; 10</code> condition on the right hand:</p>\n\n<pre><code>concat [(\"\"++show i)++<b>if i &lt; 10 then \"   \" else \"  \"</b> | i &lt- [1..n]]++\"\\n\"</code></pre>\n\n<p>For <code>n = 15</code>, this then produces:</p>\n\n<pre><code>Prelude&gt; concat [(\"\"++show i)++if i &lt; 10 then \"   \" else \"  \" | i &lt;- [1..n]]++\"\\n\"\n\"1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  \\n\"\n</code></pre>\n\n<p>We can also remove the <code>\"\"++</code> part on the left side of the list comprehension, since this is bascially a <em>no operation</em>:</p>\n\n<pre><code>concat [show i ++ if i &lt; 10 then \"   \" else \"  \" | i &lt- [1..n]] ++ \"\\n\"</code></pre>\n\n<p>The above is however not very elegant: if <code>i = 123</code>, then we still will run into trouble. We can calculate the length of the <code>show</code>, calculate <code>4-l</code> (with <code>l</code> the length), and add this as extra spacing. For instance:</p>\n\n<pre><code>concat [<b>s</b> ++ <b>replicate (4-length s) ' '</b> | i &lt- [1..n], <b>let s = show i</b>] ++ \"\\n\"</code></pre>\n\n<p>There are also some more dedicated formatting and joining functions, but since the exercise is probably to get familier with lists, I think this is out of scope here.</p>\n\n<p>Like @4castle says, we can use for instance <code>printf</code>:</p>\n\n<pre><code>import Text.Printf(printf)\n\nconcatMap (printf \"%-4d\") [1..n] ++ \"\\n\"\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2152, "favorite_count": 0, "accepted_answer_id": 47291653, "answer_count": 1, "score": 5, "last_activity_date": 1510680887, "creation_date": 1510678845, "last_edit_date": 1510678953, "question_id": 47291340, "link": "https://stackoverflow.com/questions/47291340/haskell-if-else-list-comprehension", "title": "Haskell if else list comprehension", "body": "<p>I'm trying to print out a board in the right way, like this:</p>\n\n<pre><code>  1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  \n 1.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 2.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 3.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 4.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 5.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 6.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 7.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 8.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n 9.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n10.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n11.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n12.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n13.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n14.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n15.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n16.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n17.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n18.   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .         \n</code></pre>\n\n<p>I have the list comprehension here </p>\n\n<pre><code> ((concat [(\"\"++show i)++\"   \" | i &lt;- [1..n], i&lt;10])++\"\\n\")\n</code></pre>\n\n<p>I can get the 9 first numbers correctly, but the problem comes when i would like to put an else statement in my comprehension. I can't seem to know how to do that. So to make my self extra clear, i would like to do the same thing with the double digits but the only difference will be that i want two spaces instead of three between each double digit. </p>\n"}, {"tags": ["haskell", "matrix", "equality"], "comments": [{"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 2, "creation_date": 1510678614, "post_id": 47291117, "comment_id": 81533022, "body": "One plausible reason is that floating point arithmetic might have some issues due to the errors that pile up?"}], "answers": [{"comments": [{"owner": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 1, "creation_date": 1510682028, "post_id": 47292009, "comment_id": 81535014, "body": "Out of curiosity from a newcomer to Haskell, if he were to write an expression for \u221a2 instead, would it test for equality by evaluating that expression or &#39;lazily&#39; avoid evaluating and see that one is the same expression as the other?"}, {"owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "reply_to_user": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 1, "creation_date": 1510684111, "post_id": 47292009, "comment_id": 81536266, "body": "@bjd2385 Haskell doesn&#39;t attempt to do equality on terms based on the expression that generates is. It&#39;ll perform the calculation and then check equality. You could define a numeric type that represented arithmetic expressions, and define equality on that type to be equality of normalized expressions, but that&#39;s not how <code>Double</code> works :)"}, {"owner": {"reputation": 53, "user_id": 5451972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f49abb27d4c8d9b9735d0d60841d9c?s=128&d=identicon&r=PG&f=1", "display_name": "E.Zanca", "link": "https://stackoverflow.com/users/5451972/e-zanca"}, "edited": false, "score": 0, "creation_date": 1510687160, "post_id": 47292009, "comment_id": 81538085, "body": "Aha, that explains it. Making every double explicitly into a fixed solves the problem. Thanks!"}], "tags": [], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "is_accepted": true, "score": 3, "last_activity_date": 1510681031, "creation_date": 1510681031, "answer_id": 47292009, "question_id": 47291117, "link": "https://stackoverflow.com/questions/47291117/haskell-matrix-equality-failing/47292009#47292009", "title": "Haskell Matrix equality failing", "body": "<p><code>Double</code> are floating point numbers, and floating point numbers are inherently inaccurate. <code>==</code> is going to perform an exact equality check, where you likely want a \"close enough\" equality check.</p>\n\n<p>Alternatively, you can use a different numeric type that either 1) has fixed precision (like , or 2) unbounded memory use for unlimited precision. <a href=\"https://hackage.haskell.org/package/scientific\" rel=\"nofollow noreferrer\"><code>scientific</code></a> is a good choice, as is <a href=\"https://hackage.haskell.org/package/fixed\" rel=\"nofollow noreferrer\"><code>fixed</code></a>.</p>\n"}], "owner": {"reputation": 53, "user_id": 5451972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f49abb27d4c8d9b9735d0d60841d9c?s=128&d=identicon&r=PG&f=1", "display_name": "E.Zanca", "link": "https://stackoverflow.com/users/5451972/e-zanca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 47292009, "answer_count": 1, "score": 5, "last_activity_date": 1510681031, "creation_date": 1510678204, "question_id": 47291117, "link": "https://stackoverflow.com/questions/47291117/haskell-matrix-equality-failing", "title": "Haskell Matrix equality failing", "body": "<p>I'm messing around with using Haskell for implementing some quantum transformation matrices. I have a function designed to test if a square matrix is unitary or not by building the inverse and adjoint matrices and then testing both.</p>\n\n<p>The function is shown below, where <em>wrap</em> is a simple function used to test the Either value returned from <em>inverse</em>.   </p>\n\n<pre><code>isUnitary :: [[Copmlex Double]] -&gt; Bool\nisUnitary lists = let mat =  fromLists lists --Create matrix from lists\n                      conjugateTranspose = fmap conjugate $ Data.Matrix.transpose mat --Conjugate Transpose Matrix\n                      inverseMat = debug(\"ConjugateTranspose: \\n\" ++ show conjugateTranspose ++ \"\\n\")\n                                    wrap $ inverse mat --The inverse matrix\n                      in if (conjugateTranspose) == inverseMat then debug(\"InverseMat: \\n\" ++ show inverseMat ++ \"\\n\")\n                                                                      True\n                         else debug(\"InverseMat: \\n\" ++ show inverseMat ++ \"\\n\")\n                                False\n</code></pre>\n\n<p>For some simple test matrices it works fine, returning True when getting the matrices shown below:</p>\n\n<pre><code>ConjugateTranspose:\n(    1.0 :+ (-0.0)                   0.0 :+ (-0.0) )\n(    0.0 :+ (-0.0)                   (-1.0) :+ (-0.0) )\n\nInverseMat:\n(    1.0 :+ 0.0                      0.0 :+ 0.0 )\n(    0.0 :+ (-0.0)                   (-1.0) :+ (-0.0) )\n</code></pre>\n\n<p>My problem is that the function returns False for the Hadamard transform matrix built by using ((1/sqrt(2) :+ 0) and ((-1/sqrt(2)) :+ 0))</p>\n\n<pre><code>ConjugateTranspose:\n(    0.7071067811865475 :+ (-0.0)    0.7071067811865475 :+ (-0.0) )\n(    0.7071067811865475 :+ (-0.0)    (-0.7071067811865475) :+ (-0.0) )\n\nInverseMat:\n(    0.7071067811865476 :+ 0.0       0.7071067811865476 :+ 0.0 )\n(    0.7071067811865476 :+ 0.0       (-0.7071067811865476) :+ (-0.0) )\n</code></pre>\n\n<p>What could be causing the equality test for the second pair of matrices to fail? Is there a more correct way for me to present the complex numbers in the code?</p>\n"}, {"tags": ["haskell", "recursion", "type-mismatch"], "comments": [{"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 1, "creation_date": 1510678694, "post_id": 47290884, "comment_id": 81533090, "body": "If you want to use <code>div</code> as an infix function, you need to use backquotes, i.e, <code>`div`</code>"}, {"owner": {"reputation": 3290, "user_id": 4400065, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kbo7S.gif?s=128&g=1", "display_name": "Siegmeyer", "link": "https://stackoverflow.com/users/4400065/siegmeyer"}, "edited": false, "score": 1, "creation_date": 1510678969, "post_id": 47290884, "comment_id": 81533260, "body": "Moreover div accepts only Integrals."}], "answers": [{"tags": [], "owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "is_accepted": false, "score": 0, "last_activity_date": 1510699449, "creation_date": 1510699449, "answer_id": 47296504, "question_id": 47290884, "link": "https://stackoverflow.com/questions/47290884/function-type-mismatch/47296504#47296504", "title": "Function type mismatch", "body": "<p>As already mentioned in the comments:</p>\n\n<ul>\n<li>if you want to use <code>div</code> as an infix function, you have to enclose it in backticks</li>\n<li><code>div</code> is for integral division with truncation towards negative infinity, not for dividing <code>Double</code></li>\n</ul>\n\n<p>These two points are the cause for your error message.</p>\n\n<p>To divide <code>Doubles</code>, use the <code>/</code> operator like you already did in your expression <code>1/xn</code>.</p>\n\n<p>With this your code should work. For clarity it could be transformed:</p>\n\n<ol>\n<li><p>Extract the duplicated expression to compute the next <code>xn</code> in the sequence into a <code>where</code> clause. The expression can also be slightly simplified. Adding a single element in front of a list can simply be done with the cons operator <code>(:)</code>:</p>\n\n<pre><code>newtonRootSequence' xn d = xn' : newtonRootSequence' xn' d\n    where xn' = (xn + (d / xn)) / 2\n</code></pre></li>\n<li><p>You could use <code>iterate :: (a -&gt; a) -&gt; a -&gt; [a]</code> from the Prelude to separate the computation for a single step from the generation of the list of intermediate steps (note the flipped arguments):</p>\n\n<pre><code>sequenceStep :: Double -&gt; Double -&gt; Double\nsequenceStep s xn = (xn + (s / xn)) / 2\n\nnewtonRootSequence' :: Double -&gt; Double -&gt; [Double]\nnewtonRootSequence' s x0 = iterate (sequenceStep s) x0\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510699449, "creation_date": 1510677459, "last_edit_date": 1510679258, "question_id": 47290884, "link": "https://stackoverflow.com/questions/47290884/function-type-mismatch", "title": "Function type mismatch", "body": "<p>I have a function with function type :</p>\n\n<pre><code>newtonRootSequence' :: Double -&gt; Double -&gt; [Double]     \n</code></pre>\n\n<p>and function definition:</p>\n\n<pre><code>newtonRootSequence' xn d = [(xn + (d * (1/xn))) div 2] ++ newtonRootSequence' ((xn + (d * (1/xn))) div 2) d\n</code></pre>\n\n<p>upon receiving two values xn and d it should calculate the results for the given function</p>\n\n<pre><code>[(xn + (d * (1/xn))) div 2]\n</code></pre>\n\n<p>But for some reason on launch the compilator is not accepting the function with an error:</p>\n\n<blockquote>\n  <p>Couldnt match expected type '(Integer->Integer->Integer->) ->Integer\n  ->Double with actual type double the function (xn + (d * (1/xn))) div 2) is applied to two arguments</p>\n</blockquote>\n\n<p>This error occurs to the part where I try to send the result of the equation into the recursive step</p>\n\n<pre><code>++ newtonRootSequence' ((xn + (d * (1/xn))) div 2) d\n</code></pre>\n"}, {"tags": ["haskell", "generics", "functor", "scrap-your-boilerplate"], "comments": [{"owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 1, "creation_date": 1510671212, "post_id": 47288342, "comment_id": 81527901, "body": "Have you looked at <a href=\"http://hackage.haskell.org/package/unbound\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/unbound</a>"}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "reply_to_user": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 0, "creation_date": 1510671303, "post_id": 47288342, "comment_id": 81527971, "body": "No I didn&#39;t. Thanks for the tip!"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510695823, "post_id": 47288342, "comment_id": 81542618, "body": "You should also look at <code>unbound-generics</code> and maybe also <code>bound</code>."}], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1612567876, "creation_date": 1510670102, "last_edit_date": 1612567876, "question_id": 47288342, "link": "https://stackoverflow.com/questions/47288342/scrapping-the-boilerplate-of-doing-variable-substitution-in-an-expression", "title": "Scrapping the boilerplate of doing variable substitution in an expression", "body": "<p>Suppose we have the following data structure, whose values represent expressions on some language:</p>\n\n<pre><code>data BExpr = Stop\n           | Guard Expr BExpr\n           | Choice BExpr BExpr\n           | Parallel BExpr BExpr\n           | Disable BExpr BExpr\n           -- ... and so on.\n           | Act Expr\n\n\ndata Expr = Var String | Val Int\n</code></pre>\n\n<p>I would like to define a function <code>substBExpr</code> that substitutes variable names by their integer values in a <code>BExpr</code>. This can be done as follows:</p>\n\n<pre><code>subst :: Map String Int -&gt; Expr -&gt; Expr\nsubst substMap e@(Var name) = maybe e Val $ Map.lookup name substMap\nsubst _  v@(Val _)          = v\n\nsubstBExpr :: Map String Int -&gt; BExpr -&gt; BExpr\nsubstBExpr _ Stop                     =  Stop\nsubstBExpr substMap (Guard gExp be)   = Guard gExp' be'\n    where gExp' = subst substMap gExp\n          be' = substBExpr substMap be\nsubstBExpr substMap (Choice be0 be1)  = Choice be0' be1'\n    where be0' = substBExpr substMap be0\n          be1' = substBExpr substMap be1\nsubstBExpr substMap (Parallel be0 be1) = Parallel be0' be1'\n    where be0' = substBExpr substMap be0\n          be1' = substBExpr substMap be1\nsubstBExpr substMap (Disable be0 be1) = Disable be0' be1'\n    where be0' = substBExpr substMap be0\n          be1' = substBExpr substMap be1\nsubstBExpr substMap (Act aExp)        = Act aExp'\n    where aExp' = subst substMap aExp\n</code></pre>\n\n<p>The problem is that this requires a lot of boilerplate, which I would like to avoid.</p>\n\n<p>I can think of two solutions right now. The first solution is adding a type parameter to <code>BExpr</code> so that I can derive automatically an instance of <code>Functor</code> for it:</p>\n\n<pre><code>data GBExpr e = GStop\n              | GGuard e (GBExpr e)\n              | GChoice (GBExpr e) (GBExpr e)\n              | GParallel (GBExpr e) (GBExpr e)\n              | GDisable (GBExpr e) (GBExpr e)\n              -- ... and so on.\n              | GAct e\n              deriving (Show, Functor)\n\ntype BExpr2 = GBExpr Expr\n\nsubstBExpr2 :: Map String Int -&gt; BExpr2 -&gt; BExpr2\nsubstBExpr2 substMap = (subst substMap &lt;$&gt;)\n</code></pre>\n\n<p>While this works, it is not viable if <code>Bexpr</code> cannot be changed to incorporate a type parameter.</p>\n\n<p>The second solution is using <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Data.html#v:gfoldl\" rel=\"nofollow noreferrer\"><code>gfoldl</code></a>:</p>\n\n<pre><code>substT :: (Typeable a) =&gt; Map String Int -&gt; a -&gt; a\nsubstT substMap = mkT (subst substMap)\n\nsubstExprs :: (Data a) =&gt; Map String Int -&gt; a -&gt; a\nsubstExprs substMap a = runIdentity $ gfoldl step return (substT substMap a)\n    where\n      step :: Data d =&gt; Identity (d -&gt; b) -&gt; d -&gt; Identity b\n      step cdb d = cdb &lt;*&gt; pure (substExprs substMap d)\n</code></pre>\n\n<p>Which involves some boilerplate of its own (but I don't know of any function that traverses a structure, and applies a function to values inside the structure only if they can be casted to a particular type).</p>\n\n<p>Is there a superior alternative to this \"scrap-your-boilerplate\" problem? (I could imagine it might be some solution that involves lenses, but I'm not that familiar with optics...).</p>\n"}, {"tags": ["haskell", "yesod", "yesod-forms"], "comments": [{"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1510670860, "post_id": 47287664, "comment_id": 81527570, "body": "you can always do <code>[(&quot;&quot;, Nothing)]</code>, or exactly what HTML do you want to generate? <code>&lt;option disabled&gt;..</code>?"}], "owner": {"reputation": 1791, "user_id": 550026, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a9808a71e03d9b9602aae53622c64d70?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/550026/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1510667839, "creation_date": 1510667839, "question_id": 47287664, "link": "https://stackoverflow.com/questions/47287664/select-element-default-empty-option-in-yesod", "title": "Select element default/empty option in Yesod", "body": "<p>Using <code>selectFieldList</code> form fields in Yesod, the behaviour seems to be that if you use <code>mreq</code>, there is no default \"empty\" option for the select element.  If you use <code>mopt</code>, the default option (corresponding to a <code>Nothing</code> value) has the text <code>&lt;None&gt;</code>.</p>\n\n<p>1) How can you change the text for the <code>&lt;None&gt;</code> option when using <code>mopt</code>?</p>\n\n<p>2) How can I add an empty option while using <code>mreq</code>?  The type signature for <code>selectFieldList</code> takes<code>[(msg, a)]</code> as its argument for the options - so there's no scope there to add a \"dummy\" option.</p>\n"}, {"tags": ["html", "haskell", "haskell-lucid"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1510666309, "last_edit_date": 1510666309, "creation_date": 1510665992, "answer_id": 47287031, "question_id": 47286938, "link": "https://stackoverflow.com/questions/47286938/using-lucid-for-simple-example/47287031#47287031", "title": "Using Lucid for Simple Example", "body": "<p>As is written in the <a href=\"https://hackage.haskell.org/package/lucid-2.9.9/docs/Lucid.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>Intro</strong></p>\n  \n  <p>(..)</p>\n  \n  <p>For <code>GHCi</code>:</p>\n\n<pre><code>:set -XOverloadedStrings -XExtendedDefaultRules@\nimport Lucid\n</code></pre>\n  \n  <p>In a module: <code>{-# LANGUAGE OverloadedStrings, ExtendedDefaultRules #-}</code></p>\n  \n  <p>(..)</p>\n</blockquote>\n\n<p>So you need to turn on the <code>OverloadedStrings</code> and <code>ExtendedDefaultRules</code> extensions.</p>\n\n<p>You can do this by <strong>compiling with</strong>:</p>\n\n<pre><code>ghc <b>-XOverloadedStrings -XExtendedDefaultRules</b> file.hs</code></pre>\n\n<p>But perhaps more convenient is to <strong>turn the extensions on in the header of the file</strong>:</p>\n\n<pre><code><b>{-# LANGUAGE OverloadedStrings #-}\n{-# LANGUAGE ExtendedDefaultRules #-}</b>\n\nimport Lucid\nimport Lucid.Base\n\nmainPage :: Html ()\nmainPage = div_ (p_ \"hello\")</code></pre>\n\n<p>Like the compiler says in the error message, <code>p_</code> and <code>div_</code> do <em>not</em> expect <code>String</code>s, but a <code>HtmlT Data.Functor.Identity.Identity ()</code> type (some sort of string). This type is however a member of the <code>IsString</code> typeclass, so it can be seen as \"string-like\" types, and has an implementation <a href=\"https://hackage.haskell.org/package/lucid-2.9.9/docs/src/Lucid-Base.html#line-200\" rel=\"nofollow noreferrer\">[source code]</a>:</p>\n\n<blockquote>\n<pre><code>instance (Monad m,a ~ ()) =&gt; IsString (HtmlT m a) where\n  fromString = toHtml\n</code></pre>\n</blockquote>\n\n<p>The reason this happens is because you can <strong>add HTML characters</strong>, in which case <code>(p_ \"&lt;foo&gt;\")</code> would look like: <code>&lt;p&gt;&lt;foo&gt;&lt;/p&gt;</code>. But this is quite unsafe. By first processing it through <code>toHtml</code>, the result will be <code>&lt;p&gt;&amp;lt;foo&amp;gt;&lt;/p&gt;</code>.</p>\n"}], "owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1554646625, "creation_date": 1510665693, "last_edit_date": 1554646625, "question_id": 47286938, "link": "https://stackoverflow.com/questions/47286938/using-lucid-for-simple-example", "title": "Using Lucid for Simple Example", "body": "<p>Given:</p>\n\n<pre><code>import Lucid\nimport Lucid.Base\n\nmainPage :: Html ()\nmainPage = div_ (p_ \"hello\")\n</code></pre>\n\n<p>I get the following compile-time error:</p>\n\n<pre><code>/Users/kevinmeredith/Workspace/my-project/src/Lib.hs:9:18: error:\n    \u2022 Couldn't match type \u2018HtmlT Data.Functor.Identity.Identity ()\u2019\n                     with \u2018[Char]\u2019\n        arising from a functional dependency between:\n          constraint \u2018Term [Char] (HtmlT Data.Functor.Identity.Identity ())\u2019\n            arising from a use of \u2018p_\u2019\n          instance \u2018Term (HtmlT m a) (HtmlT m a)\u2019 at &lt;no location info&gt;\n    \u2022 In the first argument of \u2018div_\u2019, namely \u2018(p_ \"hello\")\u2019\n      In the expression: div_ (p_ \"hello\")\n      In an equation for \u2018mainPage\u2019: mainPage = div_ (p_ \"hello\")\n</code></pre>\n\n<p>How can I fix this compile-time error please?</p>\n"}, {"tags": ["haskell", "polymorphism", "higher-kinded-types", "type-constructor"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 2, "creation_date": 1510702728, "post_id": 47283106, "comment_id": 81545490, "body": "<code>Either Char</code> is a type constructor of kind <code>* -&gt; *</code>. <code>Either Char a</code> is a type (of kind <code>*</code>) - it is shorthand for <code>forall a . Either Char a</code>; this must be a type because every <code>forall</code> is a type (has kind <code>*</code>). Neither type variable in <code>Either a b</code> can possibly be phantom, since if you have <code>x :: Either a b</code> then there may be an <code>a</code> contained within or there may be a <code>b</code>; you can only discover there is no <code>a</code> by pattern matching."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6445533"}, "edited": false, "score": 0, "creation_date": 1511519497, "post_id": 47283414, "comment_id": 81897007, "body": "I still try to understand it. <code>Either a Char</code> is a monotype or type constant and <code>a</code> is just a placeholder for a particular type. With which type <code>a</code> is substituted depends on the context, e.g. <code>let t = Right &#39;x&#39;</code> has type <code>Either Bool Char</code> in the context of <code>[Left True, t, Left False]</code>. Is this a proper reasoning?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1511519890, "post_id": 47283414, "comment_id": 81897242, "body": "Yes, that&#39;s about it."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 8, "last_activity_date": 1510655520, "creation_date": 1510655520, "answer_id": 47283414, "question_id": 47283106, "link": "https://stackoverflow.com/questions/47283106/does-the-either-type-constructor-contain-a-phantom-type-each-for-the-left-right/47283414#47283414", "title": "Does the Either type constructor contain a phantom type each for the left/right case?", "body": "<blockquote>\n  <p>AFAIK, only types are inhabited by values in Haskell, not type constructors.</p>\n</blockquote>\n\n<p>Spot on.</p>\n\n<blockquote>\n  <p><code>Left</code> and <code>Right</code> both apply this type constructor to a single type</p>\n</blockquote>\n\n<p>You can't say that. <code>Left</code> and <code>Right</code> don't live in the type language at all, so they don't apply anything to any types, they only apply themselves to <em>values</em>.</p>\n\n<blockquote>\n  <p><code>x</code> has the type <code>Either a Char</code>. I would assume that this type would have the kind <code>* -&gt; *</code></p>\n</blockquote>\n\n<p>You need to distinguish between <em>function/constructor arguments</em>, and <em>type variables</em>. It's basically the distinction between <a href=\"https://en.wikipedia.org/wiki/Free_variables_and_bound_variables\" rel=\"noreferrer\">free and bound variables</a>. <code>Either a Char</code> still has kind <code>*</code>, not <code>* -&gt; *</code>, because it is already applied to <code>a</code>. Yes, that's a type variable, but it still is an argument that's already applied.</p>\n\n<blockquote>\n  <p>Yet <code>Either a Char</code> can be inhabited by values like <code>'x'</code>.</p>\n</blockquote>\n\n<p>Not quite \u2013 it can be inhabited by values like <code>Right 'x'</code>.</p>\n\n<blockquote>\n  <p>My suspicion is that the type variable <code>a</code> is a phantom type for the <code>Right</code> case resp. <code>b</code> for <code>Left</code></p>\n</blockquote>\n\n<p>kind of, but I wouldn't call it \u201cphantom\u201d because you can't just count out <code>Left</code> or <code>Right</code>. At least not unless you choose <code>Either Void b</code>, but in that case you don't have the <code>a</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "is_accepted": false, "score": 1, "last_activity_date": 1510679034, "last_edit_date": 1510679034, "creation_date": 1510664414, "answer_id": 47286572, "question_id": 47283106, "link": "https://stackoverflow.com/questions/47283106/does-the-either-type-constructor-contain-a-phantom-type-each-for-the-left-right/47286572#47286572", "title": "Does the Either type constructor contain a phantom type each for the left/right case?", "body": "<p>I would argue that a type variable is phantom if and only if the choice of the type variable does not restrict what values can be passed to the type's constructors. The important part is that this is a type-centric definition. It is determined by looking only at the type definition, not at some particular value of the type.</p>\n\n<p>So does it matter that no value of type <code>String</code> appears in the value <code>Left 5 :: Either Int String</code>? Not at all. What matters is that the choice of <code>String</code> in <code>Either Int String</code> prevents <code>Right ()</code> from type-checking.</p>\n"}, {"tags": [], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "is_accepted": false, "score": 1, "last_activity_date": 1510681296, "creation_date": 1510681296, "answer_id": 47292088, "question_id": 47283106, "link": "https://stackoverflow.com/questions/47283106/does-the-either-type-constructor-contain-a-phantom-type-each-for-the-left-right/47292088#47292088", "title": "Does the Either type constructor contain a phantom type each for the left/right case?", "body": "<p>Haskell has \"implicit universal quantification\", which means that type variables have an implicit <code>forall</code>. <code>Either a Int</code> is equivalent to <code>forall a. Either a Int</code>.</p>\n\n<p>One way to consider a <code>forall</code> is that it's like a lambda, but for type variables. If we use the syntax <code>@</code> for type application, then, you can \"apply\" a type to this and get a new type out.</p>\n\n<pre><code>let foo = Right 1 :: forall a. Either a Int\nfoo @Char   :: Either Char Int\nfoo @Double :: Either Double Int\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6445533"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 47283414, "answer_count": 3, "score": 3, "last_activity_date": 1510681296, "creation_date": 1510654703, "last_edit_date": 1510655397, "question_id": 47283106, "link": "https://stackoverflow.com/questions/47283106/does-the-either-type-constructor-contain-a-phantom-type-each-for-the-left-right", "title": "Does the Either type constructor contain a phantom type each for the left/right case?", "body": "<p>AFAIK, only types are inhabited by values in Haskell, not type constructors. <code>Either</code> is a binary type constructor of kind <code>* -&gt; * -&gt; *</code>. <code>Left</code> and <code>Right</code> both apply this type constructor to a single type, which is provided by the passed value. Doesn't that mean that in both cases <code>Either</code> is merely partially applied and thus still a type constructor awaiting the missing type argument?</p>\n\n<pre><code>let x = Right 'x' -- Either a Char\n</code></pre>\n\n<p><code>x</code> has the type <code>Either a Char</code>. I would assume that this type would have the kind <code>* -&gt; *</code>. This is clearly a polymorphic type, not a ground one. Yet <code>Either a Char</code> can be inhabited by values like <code>'x'</code>.</p>\n\n<p>My suspicion is that the type variable <code>a</code> is a phantom type for the <code>Right</code> case resp. <code>b</code> for <code>Left</code>. I know phantom types in connection with  <code>Const</code>, where the respective type variable isn't used at all. Am I on the right tack?</p>\n"}, {"tags": ["haskell", "gtk", "msys2"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510649658, "post_id": 47280515, "comment_id": 81512920, "body": "You don&#39;t need to point to the glib sources. Haskell needs the compiled glib binary and the development includes. Usually, you get these by installing a dev version of glib, e.g. one you might find already ready-to-install on the web (easier), or one you can generate by compiling and installing the glib sources."}, {"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510651413, "post_id": 47280515, "comment_id": 81514034, "body": "@chi How do I get the dev version of glib on MSYS2? That is why I went to ftp.gnome.org for sources. In the ideal world, I would need help from someone who tried the same on Windows."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510740260, "post_id": 47280515, "comment_id": 81559420, "body": "AFAIK, there&#39;s no devel package on MSYS2, the includes are shipped with the main package. Just list the available packages and install glib2. <a href=\"https://github.com/msys2/msys2/wiki/Using-packages\" rel=\"nofollow noreferrer\">github.com/msys2/msys2/wiki/Using-packages</a>"}, {"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "reply_to_user": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510798018, "post_id": 47280515, "comment_id": 81591894, "body": "@liberforce, thanks, I have found glib2 includes using pacman -Ql mingw-w64-x86_64-glib2. Now I suspect that Haskell can&#39;t find the existing directories because the path contains spaces."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510823301, "post_id": 47280515, "comment_id": 81601681, "body": "That&#39;s possible, look at <a href=\"http://msys2.org\" rel=\"nofollow noreferrer\">msys2.org</a>, at step 3 they say: <code>Enter Installation Folder (ASCII, no accents, spaces nor symlinks, short path) </code>."}, {"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "edited": false, "score": 0, "creation_date": 1510825173, "post_id": 47280515, "comment_id": 81602978, "body": "So I need to try to install Haskell platform in a non-standard location?"}, {"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "edited": false, "score": 0, "creation_date": 1510848378, "post_id": 47280515, "comment_id": 81619659, "body": "I have tried another approach. It is documented here. <a href=\"https://github.com/bigos/haskell-installation\" rel=\"nofollow noreferrer\">github.com/bigos/haskell-installation</a> , it turns out installing Haskell Platform in a nonstandard folder without spaces indeed fixes the problem of garbling the extra-libs-dirs. It was another wasted day struggling with it. It seems I have moved forward a bit, but I need a rest now."}, {"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "edited": false, "score": 0, "creation_date": 1511009560, "post_id": 47280515, "comment_id": 81685067, "body": "However with different apporoach stack creates own instance of msys on a path without spaces."}], "answers": [{"tags": [], "owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "is_accepted": true, "score": 0, "last_activity_date": 1522583748, "last_edit_date": 1522583748, "creation_date": 1510880829, "answer_id": 47341728, "question_id": 47280515, "link": "https://stackoverflow.com/questions/47280515/how-do-i-set-up-gtk-on-windows-for-haskell-development/47341728#47341728", "title": "How do I set up Gtk on Windows for Haskell development?", "body": "<p>After all, I have managed to compile and launch example Haskell program written using Gtk library.</p>\n\n<p>This gist is the record of the steps taken.</p>\n\n<p><a href=\"https://gist.github.com/bigos/62defeec09a06f18ee38daf644af5340\" rel=\"nofollow noreferrer\">https://gist.github.com/bigos/62defeec09a06f18ee38daf644af5340</a></p>\n"}, {"comments": [{"owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "edited": false, "score": 0, "creation_date": 1514773207, "post_id": 48043257, "comment_id": 83065076, "body": "With regards to item 5 I have a question. I have created a custom launcher <a href=\"https://gist.github.com/bigos/62defeec09a06f18ee38daf644af5340\" rel=\"nofollow noreferrer\">gist.github.com/bigos/62defeec09a06f18ee38daf644af5340</a> that modifies path only for certain programs. What are the pros and cons using your approach?"}, {"owner": {"reputation": 43, "user_id": 4544037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ded10e98957fa5559deba7cb27db496?s=128&d=identicon&r=PG", "display_name": "Mike Pilgrem", "link": "https://stackoverflow.com/users/4544037/mike-pilgrem"}, "reply_to_user": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "edited": false, "score": 0, "creation_date": 1514815321, "post_id": 48043257, "comment_id": 83072282, "body": "@ruby_object Re Item 5, I&#39;ve not yet encountered any cons of having <code>C:\\msys64\\mingw64\\bin</code> permanently on the path."}], "tags": [], "owner": {"reputation": 43, "user_id": 4544037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ded10e98957fa5559deba7cb27db496?s=128&d=identicon&r=PG", "display_name": "Mike Pilgrem", "link": "https://stackoverflow.com/users/4544037/mike-pilgrem"}, "is_accepted": false, "score": 2, "last_activity_date": 1514730562, "creation_date": 1514730562, "answer_id": 48043257, "question_id": 47280515, "link": "https://stackoverflow.com/questions/47280515/how-do-i-set-up-gtk-on-windows-for-haskell-development/48043257#48043257", "title": "How do I set up Gtk on Windows for Haskell development?", "body": "<p>I was able to build and run the example 'Hello World' program at the <a href=\"https://github.com/haskell-gi/haskell-gi\" rel=\"nofollow noreferrer\"><code>haskell-gi</code> repository</a> on 64-bit Windows (version 10.0.16299.125) using the <a href=\"https://docs.haskellstack.org/en/stable/README/\" rel=\"nofollow noreferrer\">Haskell Tool Stack</a> (<code>stack</code>, version 1.6.3) as follows:</p>\n\n<ol>\n<li><p><code>stack</code> had previously been set up to use GHC 8.0.2 or GHC 8.2.2.</p></li>\n<li><p>I followed the instructions for the <a href=\"http://www.msys2.org/\" rel=\"nofollow noreferrer\">MSYS2 installer</a> for 64-bit Windows, accepting the defaults and updating (as set out in the instructions).</p></li>\n<li><p>Opening a MSYS2 shell, I then used <code>pacman</code> to install packages <code>mingw64/mingw-w64-x86_64-pkg-config</code> <code>mingw64/mingw-w64-x86_64-gobject-introspection</code> <code>mingw64/mingw-w64-x86_64-gtksourceview3</code> <code>mingw64/mingw-w64-x86_64-webkitgtk3</code>. I then returned to Windows' Command Prompt. (However, I can't rule out that I may have installed other packages.)</p></li>\n<li><p>I set up the following Windows environment variables for my account (finding `Edit environment variables for your account' by typing 'env' into the Windows 10 search bar):</p>\n\n<pre><code>PKG_CONFIG_PATH=C:\\msys64\\mingw64\\lib\\pkgconfig\nXDG_DATA_DIRS=C:\\msys64\\mingw64\\share\n</code></pre>\n\n<p>Steps 3 and 4 were based on a <a href=\"https://github.com/haskell-gi/haskell-gi/wiki/Using-haskell-gi-in-Windows\" rel=\"nofollow noreferrer\">page on the <code>haskell-gi</code> wiki</a>.</p></li>\n<li><p>I added <code>C:\\msys64\\mingw64\\bin</code> near the start of the <code>PATH</code> environment variable for my account. See step 7 below about the importance of what is found first on the path.</p></li>\n<li><p>I created a new Haskell project <code>gi-gtk-test</code> with a <code>simple</code> template and then moved into its folder using:</p>\n\n<pre><code>stack new gi-gtk-test simple\ncd gi-gtk-test\n</code></pre>\n\n<p>At the time of writing, that created a <code>stack.yaml</code> file with <code>resolver: lts-10.1</code> (GHC 8.2.2). A <a href=\"https://ghc.haskell.org/trac/ghc/ticket/14382\" rel=\"nofollow noreferrer\">bug in GHC 8.2.2</a> means that it does not work with <code>gi-gtk</code>, so I changed that to <code>resolver: lts-9.21</code> to revert to GHC 8.0.2.</p></li>\n<li><p>This proved to be a vital step: Using <code>stack exec where -- pkg-config</code> and <code>stack exec where -- zlib1.dll</code> to see what versions were first encountered on the <code>PATH</code> that is set up in the <code>stack</code> environment, I made sure that the versions first encountered were those in <code>C:\\msys64\\mingw64\\bin\\</code> (by changing the order of folders on my <code>PATH</code> or renaming unwanted <code>zlib1.dll</code> as <code>zlib1.dll.old</code>). (I think that other versions of the former resulted in error messages about 'missing C libraries' and other versions of the latter resulted in dialog boxes with obscure messages about dlls.)</p></li>\n<li><p>I added the packages <code>gi-gtk</code> and <code>haskell-gi-base</code> to the <code>gi-gtk-test.cabal</code> file, as follows:</p>\n\n<pre><code>executable gi-gtk-test\n  hs-source-dirs:      src\n  main-is:             Main.hs\n  default-language:    Haskell2010\n  build-depends:       base &gt;= 4.7 &amp;&amp; &lt; 5\n                     , gi-gtk\n                     , haskell-gi-base\n</code></pre></li>\n<li><p>I changed the contents of <code>Main.hs</code> to be the example program, namely:</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings, OverloadedLabels #-}\n\nmodule Main where\n\nimport qualified GI.Gtk as Gtk  -- package gi-gtk\nimport Data.GI.Base             -- package haskell-gi-base\n\nmain :: IO ()\nmain = do\n  Gtk.init Nothing\n  win &lt;- new Gtk.Window [ #title := \"Hi there\" ]\n  on win #destroy Gtk.mainQuit\n  button &lt;- new Gtk.Button [ #label := \"Click me\" ]\n  on button #clicked (set button [ #sensitive := False,\n                                   #label := \"Thanks for clicking me\" ])\n  #add win button\n  #showAll win\n  Gtk.main\n</code></pre></li>\n<li><p>Then, the following worked as expected to build and run the example program:</p>\n\n<pre><code>stack build\nstack exec gi-gtk-test\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1059, "user_id": 1395810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/434085debcc69044679269ce84d5dad1?s=128&d=identicon&r=PG", "display_name": "ruby_object", "link": "https://stackoverflow.com/users/1395810/ruby-object"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1214, "favorite_count": 0, "accepted_answer_id": 47341728, "answer_count": 2, "score": 5, "last_activity_date": 1522583748, "creation_date": 1510646655, "last_edit_date": 1510798560, "question_id": 47280515, "link": "https://stackoverflow.com/questions/47280515/how-do-i-set-up-gtk-on-windows-for-haskell-development", "title": "How do I set up Gtk on Windows for Haskell development?", "body": "<p>So far I have installed full version from <a href=\"https://www.haskell.org/platform/windows.html\" rel=\"nofollow noreferrer\">https://www.haskell.org/platform/windows.html</a></p>\n\n<p>Initially, pacman did not work so I did run as an administrator mingw64.exe found in</p>\n\n<pre><code>C:\\Program Files\\Haskell Platform\\8.2.1\\msys\n</code></pre>\n\n<p>I have updated the msys2 sytem running pacman -Syu and installed all Gtk libraries. I am trying to compile <a href=\"https://github.com/mmsbrggr/hsudoku\" rel=\"nofollow noreferrer\">https://github.com/mmsbrggr/hsudoku</a> using stack. I have gone past the missing dll errors and now I get the following:</p>\n\n<blockquote>\n  <p>haskell-gi-base-0.20.4: configure</p>\n  \n  <p>--  While building package haskell-gi-base-0.20.4 using:\n        C:\\sr\\setup-exe-cache\\x86_64-windows\\Cabal-simple_Z6RU0evB_1.24.2.0_ghc-8.0.2.exe --builddir=.stack-work\\dist\\ca59d0ab configure --with-ghc=C:\\Users\\Jacek\\AppData\\Local\\Programs\\stack\\x86_64-windows\\ghc-8.0.2\\bin\\ghc.EXE\n  --with-ghc-pkg=C:\\Users\\Jacek\\AppData\\Local\\Programs\\stack\\x86_64-windows\\ghc-8.0.2\\bin\\ghc-pkg.EXE\n  --user --package-db=clear --package-db=global --package-db=C:\\sr\\snapshots\\7eb65607\\pkgdb --libdir=C:\\sr\\snapshots\\7eb65607\\lib --bindir=C:\\sr\\snapshots\\7eb65607\\bin --datadir=C:\\sr\\snapshots\\7eb65607\\share --libexecdir=C:\\sr\\snapshots\\7eb65607\\libexec --sysconfdir=C:\\sr\\snapshots\\7eb65607\\etc --docdir=C:\\sr\\snapshots\\7eb65607\\doc\\haskell-gi-base-0.20.4 --htmldir=C:\\sr\\snapshots\\7eb65607\\doc\\haskell-gi-base-0.20.4 --haddockdir=C:\\sr\\snapshots\\7eb65607\\doc\\haskell-gi-base-0.20.4 --dependency=base=base-4.9.1.0 --dependency=bytestring=bytestring-0.10.8.1 --dependency=containers=containers-0.5.7.1 --dependency=text=text-1.2.2.2-9UQZjEJZQFSGMffj1Z5g00 \"--extra-include-dirs=C:\\Program Files\\Haskell\n  Platform\\8.2.1\\msys\\mingw64\\include\"\n  \"--extra-include-dirs=C:\\Program Files\\Haskell\n  Platform\\8.2.1\\msys\\mingw64\\include\\GLIB-2.0\"\n  --extra-include-dirs=C:\\Users\\Jacek\\AppData\\Local\\Programs\\stack\\x86_64-windows\\msys2-20150512\\mingw64\\include\n  --extra-include-dirs=C:\\Users\\Jacek\\Downloads\\glib-2.54.1 \"--extra-lib-dirs=C:\\Program Files\\Haskell\n  Platform\\8.2.1\\msys\\mingw64\\bin\" \"--extra-lib-dirs=C:\\Program\n  Files\\Haskell Platform\\8.2.1\\msys\\usr\\bin\"\n  --extra-lib-dirs=C:\\Users\\Jacek\\AppData\\Local\\Programs\\stack\\x86_64-windows\\msys2-20150512\\mingw64\\bin\n  --extra-lib-dirs=C:\\Users\\Jacek\\AppData\\Local\\Programs\\stack\\x86_64-windows\\msys2-20150512\\mingw64\\lib\n      Process exited with code: ExitFailure 1\n      Logs have been written to: C:\\Users\\Jacek\\Documents\\ExperimentingHaskell\\hsudoku.stack-work\\logs\\haskell-gi-base-0.20.4.log</p>\n\n<pre><code>Configuring haskell-gi-base-0.20.4...\nCabal-simple_Z6RU0evB_1.24.2.0_ghc-8.0.2.exe: Missing dependencies on foreign\nlibraries:\n* Missing C libraries: gobject-2.0, glib-2.0, intl\nThis problem can usually be solved by installing the system packages that\nprovide these libraries (you may need the \"-dev\" versions). If the libraries\nare already installed but in a non-standard location then you can use the\nflags --extra-include-dirs= and --extra-lib-dirs= to specify where they are.\n</code></pre>\n</blockquote>\n\n<p>I am able to find includes, but I am concerned that some compiler options are wrapped in quotes. Could it be a problem?</p>\n\n<p>How do I correctly add development files when I develop with Haskell and Gtk on Windows? How do I tell the Haskell compiler where it can find the includes?</p>\n\n<blockquote>\n  <p>extra-include-dirs: ['C:\\Program Files\\Haskell\n  Platform\\8.2.1\\msys\\mingw64\\include',\n  'C:\\Users\\Jacek\\Downloads\\glib-2.54.1','C:\\Program Files\\Haskell\n  Platform\\8.2.1\\msys\\mingw64\\include\\GLIB-2.0'] extra-lib-dirs:\n  ['C:\\Program Files\\Haskell Platform\\8.2.1\\msys\\mingw64\\bin',\n  'C:\\Program Files\\Haskell Platform\\8.2.1\\msys\\usr\\bin']</p>\n</blockquote>\n\n<p>My extra-include dirs seem to be garbled in the compiler output.</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510642688, "post_id": 47279076, "comment_id": 81509343, "body": "The fact that Haskell has infinite lists should probably mean that it is possible to do <i>something</i> with them, right? Otherwise they would be pretty useless."}], "answers": [{"tags": [], "owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "is_accepted": false, "score": 3, "last_activity_date": 1510641819, "creation_date": 1510641819, "answer_id": 47279243, "question_id": 47279076, "link": "https://stackoverflow.com/questions/47279076/execution-part-of-an-infinite-list-in-haskell/47279243#47279243", "title": "Execution part of an infinite list in Haskell?", "body": "<p><code>takeWhile (&lt;10000)</code> puts a limit on how many elements to process for the sum. Haskell is lazy-evaluated and will only do as much work as needed.  For this reason it's a common pattern to create an infinite list and limit it with a take operation.  This means that only elements from a list that are used are generated and processed. Once <code>takeWhile</code>s condition is false, no other elements from the list are used, so they aren't generated.</p>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "edited": false, "score": 2, "creation_date": 1510652822, "post_id": 47279346, "comment_id": 81515038, "body": "such a clever lazy language . i loved it .thank you @Adam"}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 2, "creation_date": 1510661965, "post_id": 47279346, "comment_id": 81521190, "body": "Great explanation. It works for list comprehension as well <code>sum (takeWhile (&lt;10000) [x^2 | x &lt;- [1..], odd (x^2)])</code> however evaluation fails for <code>sum [x^2 | x &lt;- [1..], odd (x^2), x^2 &lt; 10000]</code>."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 7, "last_activity_date": 1510642201, "creation_date": 1510642201, "answer_id": 47279346, "question_id": 47279076, "link": "https://stackoverflow.com/questions/47279076/execution-part-of-an-infinite-list-in-haskell/47279346#47279346", "title": "Execution part of an infinite list in Haskell?", "body": "<p>Haskell is as lazy as it can possibly be. It doesn't calculate any value that you don't ask it for, and if you do <code>let nums = filter odd (map (^2) [1..])</code> you haven't forced it to calculate anything yet. For now it knows that <code>nums</code> is of type <code>Num a =&gt; [a]</code> (because of the types of the operations you've described) but it doesn't know anything else about it (and that's fine!)</p>\n\n<p>Even when you run <code>takeWhile (&lt;10000)</code> you're not forcing any numbers. Now ghc knows that <code>takeWhile (&lt;10000) nums</code> has type <code>(Ord a, Num a) =&gt; [a]</code> (you've introduced the additional typeclass when you compared by <code>(&lt;)</code>) but that's all it knows.</p>\n\n<p><strong>Even</strong> once you call <code>sum</code>, ghc doesn't have to do anything. <code>sum</code> expects a <code>Num a =&gt; [a]</code> (technically a <code>(Num a, Foldable t) =&gt; t a</code> but let's pretend those are the same thing for right now) and you've given it one. Until you actually ask for the result of that operation, ghc doesn't do <em>anything</em>. You can test this by doing <code>let foobar = sum [1..]</code> in your interpreter. As long as you don't ever ask for the result of <code>foobar</code>, Haskell is fine with that expression.</p>\n\n<p>However, if you ever ask for that result, you've forced the whole line to compute. <code>sum</code> needs its list, so it asks <code>takeWhile (&lt;10000)</code> for it. <code>takeWhile</code> needs its list, so it asks <code>filter odd</code> for it. <code>filter</code> needs its list so it asks <code>map (^2)</code> for it, but <code>filter</code> doesn't need the whole list at a time, so <code>map</code> still works as lazily as possible and gives each number one at a time.</p>\n\n<p>Once <code>takeWhile</code> has found a number <code>(&gt;=10000)</code>, it doesn't need anymore and happily hands off to <code>sum</code>, which produces your result and ghc goes back to being lazy, not producing any more results of <code>nums</code> unless you need them.</p>\n"}, {"tags": [], "owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "is_accepted": false, "score": 3, "last_activity_date": 1510658992, "creation_date": 1510658992, "answer_id": 47284661, "question_id": 47279076, "link": "https://stackoverflow.com/questions/47279076/execution-part-of-an-infinite-list-in-haskell/47284661#47284661", "title": "Execution part of an infinite list in Haskell?", "body": "<p>You can imagine a dialogue between functions.</p>\n\n<p><code>GHCi</code> asks <code>sum</code> to give a result. <code>sum</code> wakes up and asks <code>takeWhile</code> to give at least one element. Wakes up <code>takeWhile</code> and asks <code>filter</code> to give at least one element. Wakes up <code>filter</code> and asks <code>map</code> to give at least one element. Wakes up <code>map</code> and asks <code>[1..]</code> to give at least one element.</p>\n\n<p><code>[1..]</code> gives <code>1</code>. <code>map</code> applies <code>(^2)</code> and gives <code>(1^2)</code>. <code>filter</code> checks <code>odd (1^2)</code> and gives <code>1</code>. <code>takeWhile</code> checks (1 &lt; 10000) and gives <code>1</code>. <code>sum</code> adds <code>1</code> to accumulator and continue asks <code>takeWhile</code> to give at least one element. And so on, until the <code>takeWhile</code> check is successful. Then <code>sum</code> returns the accumulator to GHCi.</p>\n"}], "owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1578473060, "creation_date": 1510641164, "last_edit_date": 1578473060, "question_id": 47279076, "link": "https://stackoverflow.com/questions/47279076/execution-part-of-an-infinite-list-in-haskell", "title": "Execution part of an infinite list in Haskell?", "body": "<p>I'm a little confused about how exactly Haskell execution works on infinite lists. for example, consider below <code>sum</code> function :</p>\n\n<pre><code>sum (takeWhile (&lt;10000) (filter odd (map (^2) [1..])))\n</code></pre>\n\n<p>here the code for finding Sum of all odd squares that are smaller than <code>10000</code>  and I know how these <code>takewhile</code>, <code>filter</code>, <code>map</code> functions work. my doubt is, here the <code>map</code> function is taking one element from the infinite list and squaring it and returning the list of squared elements to the <code>filter</code> function right? in that case it would run infinitely for squaring that infinite list of elements isn't it? or is it taking just one element squaring it and then returning to the <code>filter</code>? </p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 5, "last_activity_date": 1510641141, "creation_date": 1510641141, "answer_id": 47279066, "question_id": 47278975, "link": "https://stackoverflow.com/questions/47278975/how-to-write-a-function-in-haskell-which-inserts-space-after-every-character-of/47279066#47279066", "title": "how to write a function in haskell which inserts space after every character of String", "body": "<p>You could write this by hand through explicit recursion.</p>\n\n<pre><code>insertSpace :: String -&gt; String\ninsertSpace []     = []\ninsertSpace (x:[]) = x  -- you need this to keep from adding a space at the end\ninsertSpace (x:xs) = x:' ':(insertSpace xs)\n</code></pre>\n\n<p>but there is a stdlib function for this in <code>Data.List</code> -- <code>intersperse</code>.</p>\n\n<pre><code>import Data.List (intersperse)\n\ninsertSpace :: String -&gt; String\ninsertSpace = intersperse ' '\n</code></pre>\n\n<p>This is the first result when you search <a href=\"https://www.haskell.org/hoogle/\" rel=\"noreferrer\">Hoogle</a> for <code>Char -&gt; String -&gt; String</code>.</p>\n"}], "owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1510641141, "creation_date": 1510640736, "question_id": 47278975, "link": "https://stackoverflow.com/questions/47278975/how-to-write-a-function-in-haskell-which-inserts-space-after-every-character-of", "title": "how to write a function in haskell which inserts space after every character of String", "body": "<p>i want to implemet a method in haskeel which should add space after every char of string passed to that method but not after the last char of the string\n for example</p>\n\n<pre><code>Main&gt; insertSpace \"This is world\"\n\"T h i s  i s  w o r l d\"\n</code></pre>\n"}, {"tags": ["haskell", "functor", "applicative"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1510636009, "post_id": 47277479, "comment_id": 81506891, "body": "Since none of the other laws mention <code>(&lt;$&gt;)</code> at all, there&#39;s something fishy with this claim. If it is correct, parametricity will play a role."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1510649022, "post_id": 47277479, "comment_id": 81512578, "body": "@DanielWagner The <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Applicative.html\" rel=\"nofollow noreferrer\">applicative</a> docs also mention that such law comes from free from the others, but also seem to require <code>(&lt;*&gt;) = liftA2 id</code> and <code>liftA2 f x y = f &lt;$&gt; x &lt;*&gt; y</code>. Either this or parametricity looks crucial."}, {"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510653541, "post_id": 47277479, "comment_id": 81515547, "body": "@chi when they say free, do they mean as a consequence of free theorems?"}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 4, "creation_date": 1510657615, "post_id": 47277479, "comment_id": 81518227, "body": "Per @DanielWagner and @chi, I think it probably follows from the <a href=\"http://article.gmane.org/gmane.comp.lang.haskell.libraries/15384\" rel=\"nofollow noreferrer\">uniqueness of <code>fmap</code></a>. (Coincidentally that mail appears to be from a thread on this very topic.) There&#39;s only one function with that type which satisfies the <code>fmap id = id</code> law, so it suffices to show that <code>fmap f x = pure f &lt;*&gt; x</code> obeys the <code>fmap id = id</code> law as a consequence of the <code>Applicative</code> laws."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1510667176, "post_id": 47277479, "comment_id": 81524798, "body": "@BenjaminHodgson Ah, right! That&#39;s it, I think."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510667350, "post_id": 47277479, "comment_id": 81524916, "body": "@AgnishomChattopadhyay Yes, the free theorem implies that we can&#39;t have two implementations of <code>fmap :: (a-&gt;b) -&gt; f a -&gt; f b</code> that satisfy <code>fmap id = id</code>. By parametricity, any such <code>fmap</code> must be the &quot;canonical&quot; one (derived from the type structure in the &quot;natural&quot; way)."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510667580, "post_id": 47277479, "comment_id": 81525095, "body": "@AgnishomChattopadhyay Actually when I above wrote &quot;comes from free&quot; I meant &quot;comes for free&quot;, as in &quot;can be derived&quot;. Unfortunate typo. Still, Benjamin and Rainbacon now solved the issue."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510667465, "post_id": 47287001, "comment_id": 81525003, "body": "So, in the end, it arises from parametricity and the Identity law alone."}, {"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 0, "creation_date": 1510676323, "post_id": 47287001, "comment_id": 81531523, "body": "I am not sure I understand what this means: &quot;that fmap f x = pure f &lt;*&gt; x obeys the fmap id = id law&quot;. What does it mean for an equation to mean something?"}, {"owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "reply_to_user": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 0, "creation_date": 1510680486, "post_id": 47287001, "comment_id": 81534107, "body": "@AgnishomChattopadhyay Think of it as an equality rather than equation. What it is saying is that <code>fmap f x</code> is equivalent to <code>pure f &lt;*&gt; x</code>. By inserting <code>id</code> as <code>f</code> on both sides of the equality we see that the equivalence is true only if <code>fmap id = id</code>"}, {"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 0, "creation_date": 1510680674, "post_id": 47287001, "comment_id": 81534230, "body": "I do not see what this proof does. A correct proof must have <code>f &lt;$&gt; x = pure f &lt;*&gt; x</code> as a conclusion. However, your proof starts off with this as a premise, and derives <code>x = x</code>. Why does that imply the original statement is true?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "reply_to_user": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "edited": false, "score": 5, "creation_date": 1510704005, "post_id": 47287001, "comment_id": 81545928, "body": "@AgnishomChattopadhyay The style of this proof is somewhat strange; it isn&#39;t showing that <code>f &lt;$&gt; x = pure f &lt;*&gt; x</code> directly, it is just showing that <code>id &lt;$&gt; x = pure id &lt;*&gt; x</code> (the first line there is completely superfluous). Then, due to the uniqueness of <code>fmap</code>, for any function <code>q</code> satisfying <code>q id = id</code>, you also have <code>q = fmap</code> (up to extensionality of course). In this case we simply set <code>q = \\f x -&gt; pure f &lt;*&gt; x</code> and then the necessary condition for <code>q = fmap</code> to be true is <code>q id = id = \\x -&gt; pure id &lt;*&gt; x</code> (in other words, <code>x = pure id &lt;*&gt; x</code>). This necessary condition is what is proved"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510761218, "post_id": 47287001, "comment_id": 81574327, "body": "Nice answer, but please add the explanation why \u201cit sufficies to show that <code>fmap f x = pure f &lt;*&gt; x</code> obeys the <code>fmap id = id</code> law\u201d to the post itself, as it&#39;s really crucial here."}], "tags": [], "owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "is_accepted": false, "score": 3, "last_activity_date": 1510773384, "last_edit_date": 1510773384, "creation_date": 1510665906, "answer_id": 47287001, "question_id": 47277479, "link": "https://stackoverflow.com/questions/47277479/relation-between-and/47287001#47287001", "title": "Relation between `&lt;*&gt;` and `&lt;$&gt;`", "body": "<h2>The Functor and Applicative Laws</h2>\n\n<p>Let's start with what the functor and applicative laws are. <a href=\"https://en.wikibooks.org/wiki/Haskell/Applicative_functors\" rel=\"nofollow noreferrer\">Let's take a look at these laws presented in the Haskell Wikibook</a>.</p>\n\n<pre><code>fmap id = id                   -- 1st functor law\nfmap (g . f) = fmap g . fmap f -- 2nd functor law\n</code></pre>\n\n<p>Now we should look at the applicative laws. </p>\n\n<pre><code>pure id &lt;*&gt; v = v                            -- Identity\npure f &lt;*&gt; pure x = pure (f x)               -- Homomorphism\nu &lt;*&gt; pure y = pure ($ y) &lt;*&gt; u              -- Interchange\npure (.) &lt;*&gt; u &lt;*&gt; v &lt;*&gt; w = u &lt;*&gt; (v &lt;*&gt; w) -- Composition\n</code></pre>\n\n<blockquote>\n  <p>The identity law says that applying the <code>pure id</code> morphism does nothing, exactly like with the plain <code>id</code> function.</p>\n  \n  <p>The homomorphism law says that applying a \"pure\" function to a \"pure\" value is the same as applying the function to the value in the normal way and then using pure on the result. In a sense, that means pure preserves function application.</p>\n  \n  <p>The interchange law says that applying a morphism to a \"pure\" value <code>pure y</code> is the same as applying <code>pure ($ y)</code> to the morphism. No surprises there - as we have seen in the higher order functions chapter, <code>($ y)</code> is the function that supplies <code>y</code> as argument to another function.</p>\n  \n  <p>The composition law says that <code>pure (.)</code> composes morphisms similarly to how <code>(.)</code> composes functions: applying the composed morphism <code>pure (.) &lt;*&gt; u &lt;*&gt; v</code> to <code>w</code> gives the same result as applying <code>u</code> to the result of applying <code>v</code> to <code>w</code>.</p>\n</blockquote>\n\n<h2>What we need to prove in order to prove the relation</h2>\n\n<p>Per @benjamin-hodgson</p>\n\n<blockquote>\n  <p>it suffices to show that <code>fmap f x = pure f &lt;*&gt; x</code> obeys the <code>fmap id = id</code> law as a consequence of the Applicative laws.</p>\n</blockquote>\n\n<p>The reason that we only need to show that <code>fmap f x = pure f &lt;*&gt; x</code> obeys the <code>fmap id = id</code> law is because the second functor law can be shown to follow from the first law. I've provided a brief walk through this proof, but Edward Kmett has a more verbose version <a href=\"https://www.schoolofhaskell.com/user/edwardk/snippets/fmap\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Section 3.5 of Wadler's <a href=\"http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf\" rel=\"nofollow noreferrer\">Theorems for Free</a> provides some work on the function <code>map</code>. Based on the idea of free theorems anything that is shown for a function holds for any other function of the same type signature. Since we know that the list is a functor the type of <code>map :: (a -&gt; b) -&gt; [a] -&gt; [b]</code> is analogous to the type of <code>fmap :: Functor f =&gt; (a -&gt; b) -&gt; [a] -&gt; [b]</code> which means that all of Wadler's work with map applies to fmap as well.</p>\n\n<p>Wadler's conclusion about map leads to this theorem about fmap:</p>\n\n<p>Given functions <code>f</code>, <code>g</code>, <code>k</code>, and <code>h</code> such that <code>g . h = k . f</code> then <code>$map g . fmap h = fmap k . $map' f</code> with <code>$map</code> being the \"natural\" mapping function for a given functor. The full proof of this theorem is a bit verbose, but Bartosz Milewski provides a good <a href=\"https://disqus.com/home/discussion/edwardk/the_free_theorem_for_fmap_school_of_haskell_fp_complete/\" rel=\"nofollow noreferrer\">overview</a> of it.</p>\n\n<p>We will need two lemmas to show that the second functor law is a consequence of the first.</p>\n\n<h3>Lemma 1</h3>\n\n<p>Given <code>fmap id = id --the first functor law</code> then <code>fmap f = $map f</code></p>\n\n<pre><code>fmap f = $map id . fmap f   --Because $map id = id\n= fmap id . $map f          --Because of the free theorem with g = k = id and h = f\n= $map f                    --Because of the first functor law\n</code></pre>\n\n<p>So <code>fmap f = $map f</code> and by extension <code>fmap = $map</code></p>\n\n<h3>Lemma 2</h3>\n\n<p><code>f . g = id . (f . g)</code> which is obvious given that <code>id . v = v</code></p>\n\n<h3>Putting it all together</h3>\n\n<p>Given <code>fmap id = id</code> then <code>fmap f . fmap g = fmap (f . g)</code></p>\n\n<pre><code>fmap f . fmap g = $map f . fmap g  --Because of lemma 1\n= fmap id . $map (f . g)           --Because of the free theorem for fmap and lemma 2\n= $map (f . g)                     --Because of the first functor law\n= fmap (f . g)                     --Because $map = fmap\n</code></pre>\n\n<p>Therefore, if we can show that the first functor law holds, then the second will also hold.</p>\n\n<h2>Proving the relation</h2>\n\n<p>To show that we'll need the Applicative Identity law. Looking at the law we have <code>pure id &lt;*&gt; v = v</code> and from the equivalence we are trying to prove <code>f &lt;$&gt; x = pure f &lt;*&gt; x</code>. If we let <code>x = id</code> then the Applicative Identity law tells us that the right hand side of that equivalence is <code>id x</code> and the first Functor law tells us that the left hand side is <code>id x</code>.</p>\n\n<pre><code>f &lt;$&gt; x = pure f &lt;*&gt; x\nid &lt;$&gt; x = pure id &lt;*&gt; x  -- Substitute id into the general form\nid &lt;$&gt; x = x              -- Apply the applicative identity law\nid x = x                  -- Apply the first functor law\nx = x                     -- simplify id x to x\n</code></pre>\n\n<p>There we have shown that <code>fmap f x = pure f &lt;*&gt; x</code> obeys the first functor law by applying the applicative laws.</p>\n"}], "owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 13, "last_activity_date": 1510773384, "creation_date": 1510632356, "question_id": 47277479, "link": "https://stackoverflow.com/questions/47277479/relation-between-and", "title": "Relation between `&lt;*&gt;` and `&lt;$&gt;`", "body": "<p>According to the <a href=\"https://en.wikibooks.org/wiki/Haskell/Applicative_functors\" rel=\"noreferrer\">Haskell Wikibook</a>, the following relation between <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> hold:</p>\n\n<pre><code>f &lt;$&gt; x = pure f &lt;*&gt; x\n</code></pre>\n\n<p>They claim that one can prove this theorem as a consequence of the functor and applicative laws.</p>\n\n<p>I do not see how to prove this. Any help is appreciated.</p>\n"}, {"tags": ["haskell", "math"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1510630451, "post_id": 47277195, "comment_id": 81505424, "body": "What language do you use?"}, {"owner": {"reputation": 151, "user_id": 8622509, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64ce0a9af573d9ec892fbd05278c43ec?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Buckley", "link": "https://stackoverflow.com/users/8622509/jack-buckley"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1510630634, "post_id": 47277195, "comment_id": 81505470, "body": "I use Haskell. 1 ** (1/0) = Infinity but 1 ** (-1/0) = 0.0. Is this is a limit of the language or is it mathematically sound?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1510632006, "post_id": 47277195, "comment_id": 81505839, "body": "I&#39;m not sure if you knew this, but &quot;undefined&quot; has a very strong connotation in Haskell, and <code>1&#47;0 :: Double</code> is not undefined in this standard sense. This makes the question confusing at best, or based on a wrong assumption if you actually intended it the way it sounds."}], "answers": [{"comments": [{"owner": {"reputation": 22622, "user_id": 148897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7u1oT.jpg?s=128&g=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/148897/henrik"}, "edited": false, "score": 2, "creation_date": 1510645330, "post_id": 47277222, "comment_id": 81510685, "body": "Nitpick: Anything &gt; 1 to the -INF power is going to be zero."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 4, "last_activity_date": 1510630533, "creation_date": 1510630533, "answer_id": 47277222, "question_id": 47277195, "link": "https://stackoverflow.com/questions/47277195/why-does-x-1-0-0/47277222#47277222", "title": "Why does x^(-1/0) = 0", "body": "<p>FPU rules. 1/0 in floating point results in +INF, and you have -1/0 which results in -INF. Anything to the -INF power is going to be zero.</p>\n"}, {"tags": [], "owner": {"reputation": 5291, "user_id": 2225960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbe6ed4dfe3277edd4921b31ad78d05?s=128&d=identicon&r=PG&f=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/2225960/juan"}, "is_accepted": false, "score": 2, "last_activity_date": 1510633612, "creation_date": 1510633612, "answer_id": 47277667, "question_id": 47277195, "link": "https://stackoverflow.com/questions/47277195/why-does-x-1-0-0/47277667#47277667", "title": "Why does x^(-1/0) = 0", "body": "<p>Mathematically the <code>limit of x tending to 0 of 1/x is infinity</code>.</p>\n\n<p>Under this scope you can think of <code>1/0</code> as a huge number <code>(hn)</code>.</p>\n\n<p>So the function <code>x^(-1/0)</code> which is the same as <code>1/(x\u02c6(hn))</code> can be looked at like this: </p>\n\n<pre><code>for x = 0, 0 to any power is still 0 \n\nfor (0 &lt; x &lt; 1), x^(hn) will tend to be 0, hence we end up with 1/0 which tends to infinity.\n\nfor x = 1, x\u02c6(hn) will be 1\n\nfor x &gt; 1, x^(hn) will tend to also be huge number, hence we end up with 1/(hn) which tends to be 0\n</code></pre>\n\n<p>So the simple result of <code>x^(-1/0) = 0</code> is not mathematically correct</p>\n"}], "owner": {"reputation": 151, "user_id": 8622509, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64ce0a9af573d9ec892fbd05278c43ec?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Buckley", "link": "https://stackoverflow.com/users/8622509/jack-buckley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 47277222, "answer_count": 2, "score": -1, "last_activity_date": 1510633612, "creation_date": 1510630310, "last_edit_date": 1510630663, "question_id": 47277195, "link": "https://stackoverflow.com/questions/47277195/why-does-x-1-0-0", "title": "Why does x^(-1/0) = 0", "body": "<p>The expression x^(1/0) results in undefined, and I suppose x^(-1/0) = 1/x^(1/0), but why does this equal 0? What exponent rule is at play here?</p>\n\n<p>I thought (1/0) always returns undefined, so why would there be a difference if this exponent is in the numerator or denominator?</p>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 1, "user_id": 8935381, "user_type": "registered", "profile_image": "https://graph.facebook.com/1847759528598152/picture?type=large", "display_name": "Ricardo Cunha", "link": "https://stackoverflow.com/users/8935381/ricardo-cunha"}, "edited": false, "score": 0, "creation_date": 1510610221, "post_id": 47274209, "comment_id": 81499684, "body": "it&#39;s just missing this     data Orientacao = Norte | Este | Sul | Oeste       deriving (Eq,Read,Show,Enum)"}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510610560, "post_id": 47274209, "comment_id": 81499840, "body": "<code>isLavva</code> takes two arguments and you&#39;re only supplying one, resulting in a function of one argument that the REPL cannot display. Supply a value of type <code>Tipo</code> to <code>isLavva</code>."}, {"owner": {"reputation": 1, "user_id": 8935381, "user_type": "registered", "profile_image": "https://graph.facebook.com/1847759528598152/picture?type=large", "display_name": "Ricardo Cunha", "link": "https://stackoverflow.com/users/8935381/ricardo-cunha"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510610696, "post_id": 47274209, "comment_id": 81499903, "body": "i put &#39;isLavva ((Peca h a):t) x&#39; and i supposed the x would be the &#39;Tipo&#39; ... I&#39;m not sure though, but thanks :)"}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510610906, "post_id": 47274209, "comment_id": 81499979, "body": "Your problem is when calling <code>isLavva</code> i.e. in <code>isLavva [Peca Lava 0,Peca Lava 0,Peca Recta 0]</code>. There you are only supplying the first argument but you need to supply two e.g. <code>isLavva [Peca Lava 0,Peca Lava 0,Peca Recta 0] Recta</code>."}, {"owner": {"reputation": 1, "user_id": 8935381, "user_type": "registered", "profile_image": "https://graph.facebook.com/1847759528598152/picture?type=large", "display_name": "Ricardo Cunha", "link": "https://stackoverflow.com/users/8935381/ricardo-cunha"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510611069, "post_id": 47274209, "comment_id": 81500029, "body": "oh yeah thank you so much... &#39; [Peca Lava 0,Peca Lava 0*** Exception: Tarefa2_2017li1g80.hs:(163,1)-(164,49): Non-exhaustive patterns in function isLavva  &#39; now it&#39;s this error though :D i can&#39;t get nothing right"}, {"owner": {"reputation": 1, "user_id": 8935381, "user_type": "registered", "profile_image": "https://graph.facebook.com/1847759528598152/picture?type=large", "display_name": "Ricardo Cunha", "link": "https://stackoverflow.com/users/8935381/ricardo-cunha"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510611619, "post_id": 47274209, "comment_id": 81500277, "body": "oh wait i resolved it xD it was the lower case l in islavva [ ] _"}], "owner": {"reputation": 1, "user_id": 8935381, "user_type": "registered", "profile_image": "https://graph.facebook.com/1847759528598152/picture?type=large", "display_name": "Ricardo Cunha", "link": "https://stackoverflow.com/users/8935381/ricardo-cunha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1510684904, "answer_count": 0, "score": 0, "last_activity_date": 1517004167, "creation_date": 1510610149, "last_edit_date": 1517004167, "question_id": 47274209, "link": "https://stackoverflow.com/questions/47274209/why-am-i-getting-this-error-arising-from-a-use-of-print", "closed_reason": "Duplicate", "title": "Why am i getting this error (arising from a use of \u2018print\u2019)", "body": "<p>I did something like this:</p>\n\n<pre><code>data Peca = Peca Tipo Altura\n  deriving (Eq,Read,Show) \n\ntype Altura = Int \n\ndata Tipo = Rampa Orientacao | Curva Orientacao | Recta | Lava\n  deriving (Eq,Read,Show)\n\nisLavva:: [Peca] -&gt; Tipo -&gt; [Peca]\nislavva [] _ = []\nisLavva ((Peca h a):t) x |h==x = (Peca h a):isLavva t x\n                         |otherwise = isLavva t x\n</code></pre>\n\n<p>Don't mind the names in portuguese... When i try isLavva [Peca Lava 0] it just says </p>\n\n<pre><code>isLavva [Peca Lava 0,Peca Lava 0,Peca Recta 0]\n\n&lt;interactive&gt;:45:1:\nNo instance for (Show (Tipo -&gt; [Peca]))\n  (maybe you haven't applied enough arguments to a function?)\n  arising from a use of \u2018print\u2019\nIn a stmt of an interactive GHCi command: print it\n</code></pre>\n"}, {"tags": ["haskell", "pandoc"], "comments": [{"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1510611364, "post_id": 47274139, "comment_id": 81500179, "body": "Do you need to add more constructors to the type, or merely new fields to existing constructors?"}, {"owner": {"reputation": 2447, "user_id": 2061783, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5fc1d7081d9f24bd0307795baea57d56?s=128&d=identicon&r=PG", "display_name": "danbroooks", "link": "https://stackoverflow.com/users/2061783/danbroooks"}, "reply_to_user": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1510612045, "post_id": 47274139, "comment_id": 81500476, "body": "I&#39;m not 100% sure yet, but I certainly want to be able to add additional fields to existing constructors at least"}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 1, "creation_date": 1510613696, "post_id": 47274139, "comment_id": 81501104, "body": "Haskell data types are closed, so I don&#39;t believe you can extend the exact ADT without modifying the source code. You could look into extensible types as a solution."}], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": false, "score": 4, "last_activity_date": 1510614908, "creation_date": 1510614908, "answer_id": 47275114, "question_id": 47274139, "link": "https://stackoverflow.com/questions/47274139/haskell-manipulating-extending-an-adt-that-isn-t-under-your-control/47275114#47275114", "title": "Haskell - manipulating/extending an ADT that isn\u2019t under your control", "body": "<p>Yes I think defining your own <code>JSON</code> serializer is probably the best way to go.  You can define <code>JSON</code> serializers without using the typeclass mechanism, because Aeson is well-designed (thanks @bos), just define a function from <code>Block -&gt;</code><a href=\"https://hackage.haskell.org/package/aeson-1.2.3.0/docs/Data-Aeson.html#t:Value\" rel=\"nofollow noreferrer\"><code>Value</code></a>.  Unfortunately it seems like you will have to traverse every case manually, at least the cases with nested <code>Block</code>s such as <code>BlockQuote</code>, <code>OrderedList</code>, etc.  For the others you can just forward to <code>ToJSON</code>:</p>\n\n<pre><code>serialize :: Block -&gt; Value\nserialize (BlockQuote bs) = object\n   [ \"type\" .= \"blockquote\"       -- or whatever the encoding is\n   , \"blocks\" .= map serailize bs\n   ]\n...  -- implement this for every constructor with recursive Blocks\nserialize b = toJSON b\n</code></pre>\n\n<p>It's not great, since you might have to directly rewrite things that have been written.  I don't see a way around it given pandoc's design, though (often ASTs are parameterized over a type of annotations, e.g. <a href=\"https://hackage.haskell.org/package/haskell-src-exts\" rel=\"nofollow noreferrer\">haskell-src-exts</a>, or use some open-fixedpoint design, which would allow something more clever).</p>\n\n<p>A rather crude way would be to serialize using <code>toJSON</code>, find just the parts of the <code>JSON</code> structure you want to annotate, deserialize just that part and compute the annotation, reserialize, then add your computed annotation.  Very ugly, but you don't have to reimplement any serializers, I think.  If pandoc had a <em>lot</em> of recursive constructors, or very complex serialization, I might consider this, but as it stands I would probably just bite the bullet and reimplement the recursive cases.</p>\n"}, {"tags": [], "owner": {"reputation": 7779, "user_id": 1261777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc793fa11fa22df8961198cccaa057d?s=128&d=identicon&r=PG", "display_name": "John MacFarlane", "link": "https://stackoverflow.com/users/1261777/john-macfarlane"}, "is_accepted": false, "score": 7, "last_activity_date": 1510617455, "creation_date": 1510617455, "answer_id": 47275498, "question_id": 47274139, "link": "https://stackoverflow.com/questions/47274139/haskell-manipulating-extending-an-adt-that-isn-t-under-your-control/47275498#47275498", "title": "Haskell - manipulating/extending an ADT that isn\u2019t under your control", "body": "<blockquote>\n  <p>however I am unable to override the instance as it is already defined!</p>\n</blockquote>\n\n<p>You could define newtype that wraps a Pandoc, and then define a custom ToJSON instance for that.  <code>query</code> from <code>Text.Pandoc.Walk</code> could easily and efficiently extract the strings from the Para.</p>\n\n<p>Another thing you might consider is creating a function that wraps each Para inside a Div with the strings stored in one of its attributes.  It wasn't clear from what you said whether this would work for your purposes, but it would be easy to define a function that did this transformation.</p>\n"}], "owner": {"reputation": 2447, "user_id": 2061783, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5fc1d7081d9f24bd0307795baea57d56?s=128&d=identicon&r=PG", "display_name": "danbroooks", "link": "https://stackoverflow.com/users/2061783/danbroooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 11, "last_activity_date": 1512641388, "creation_date": 1510609798, "last_edit_date": 1512641388, "question_id": 47274139, "link": "https://stackoverflow.com/questions/47274139/haskell-manipulating-extending-an-adt-that-isn-t-under-your-control", "title": "Haskell - manipulating/extending an ADT that isn\u2019t under your control", "body": "<p>What is the best way to go about manipulating/extending an ADT that isn\u2019t under your control? (ie from a dependency)</p>\n\n<p><a href=\"https://github.com/jgm/pandoc-types/blob/f1278603a4766f32b8375de84b8581f4bb1e665a/Text/Pandoc/Definition.hs#L212\" rel=\"nofollow noreferrer\">Here</a> is the data type that relates to my problem: </p>\n\n<p>I want to maintain the structure of the data, but add additional data (ie adding another type), but the structure itself is not under my control. Do I have to map the data over to my own version of this definition?</p>\n\n<p>For example, for all the paragraphs in the structure, I would like <code>Para</code> to become <code>Para [Inline] [String]</code> where <code>[String]</code> is a list of words contained in the paragraph (as it's own data structure).</p>\n\n<p>I am serving this data up as JSON via an endpoint, I thought one way I could get around this would be to define my own <code>ToJSON</code> instance, and perform this translation on <code>Para</code> there, however I am unable to override the instance as it is already defined! I am willing to accept a solution that does not actually touch the <code>Para</code> type itself, I just need a way to couple more data to <code>Para</code> without losing any of the structure of full <code>Pandoc</code> document.</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1510607543, "post_id": 47273470, "comment_id": 81498408, "body": "How are the values per character is set? You may need something like <code>Data.Map.fromList $ zip [&#39;A&#39;..&#39;Z&#39;] [1..]</code> to start with."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 2, "creation_date": 1510607722, "post_id": 47273470, "comment_id": 81498482, "body": "<code>(==) . sum . map (subtract (fromEnum &#39;A&#39;) . fromEnum)</code>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1510608013, "post_id": 47273470, "comment_id": 81498614, "body": "@karakfa This looks super cool. I just would like to to know the time complexity of <code>fromEnum  &#39;A&#39;</code>."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1510608170, "post_id": 47273470, "comment_id": 81498690, "body": "It should be constant time, I trust the compiler to do the right thing."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1510608326, "post_id": 47273470, "comment_id": 81498758, "body": "the snippet above maps A to 0.  Add one for your convention."}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1510608481, "post_id": 47273470, "comment_id": 81498845, "body": "@karakfa, mind if I steal that and add it to my answer? I didn&#39;t include how to create that function and a one-liner is a lot nicer than pattern matching."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1510608524, "post_id": 47273470, "comment_id": 81498864, "body": "@jkeuhlen go for it."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510607631, "post_id": 47273626, "comment_id": 81498448, "body": "how do I specify A = 1, B = 2, C = 3?"}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "reply_to_user": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510608437, "post_id": 47273626, "comment_id": 81498822, "body": "@JayRowen, Pattern matching on the individual characters (like in Adam Smith&#39;s answer) is one to to solve it. Another is using the code snippet that karakfa wrote in a comment above."}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "reply_to_user": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510608858, "post_id": 47273626, "comment_id": 81499011, "body": "@JayRowen You can look at my updated answer now as well."}], "tags": [], "owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "is_accepted": false, "score": 2, "last_activity_date": 1510608793, "last_edit_date": 1510608793, "creation_date": 1510607489, "answer_id": 47273626, "question_id": 47273470, "link": "https://stackoverflow.com/questions/47273470/transforming-a-string-to-list-of-integer-then-sum-them-up-in-haskell/47273626#47273626", "title": "Transforming a string to list of integer then sum them up in haskell?", "body": "<p><code>String</code> in Haskell is a type synonym for <code>[Char]</code>. You can utilize this to your advantage here! </p>\n\n<p>Write a function that translates <code>Char -&gt; Int</code>, then map that over your list: </p>\n\n<pre><code>stringValue :: String -&gt; Int \nstringValue s = sum $ map charToInt s \n</code></pre>\n\n<p>Now you can use this function to write your <code>checkIfTrue</code> in a simpler manner: </p>\n\n<pre><code>checkIfTrue :: String -&gt; Int -&gt; Bool \ncheckIfTrue s i = stringValue s == i \n</code></pre>\n\n<p>As @karakfa notes in the comments, you can write a simple <code>charToInt</code> function making use of the <code>Enum</code> typeclass that will map <code>'A' -&gt; 1</code> ... <code>'Z' -&gt; 26</code>: </p>\n\n<pre><code>charToInt :: Char -&gt; Int\ncharToInt = (+1) . (subtract (fromEnum 'A') . fromEnum)\n</code></pre>\n\n<p>And the whole thing can be condensed to a one-liner using function composition and eta-reduction: </p>\n\n<pre><code>checkIfTrue = (==) . sum . map (subtract (fromEnum 'A') . fromEnum)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 1, "creation_date": 1510608511, "post_id": 47273671, "comment_id": 81498856, "body": "You can also use <code>mapMaybe</code> instead of <code>catMaybes . map</code> to make it a little simpler."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1510608651, "post_id": 47273671, "comment_id": 81498918, "body": "@jkeuhlen thanks! I&#39;m still learning Haskell myself and half the reason I answer questions on this tag is to learn about new stdlib functions to simplify my code. What&#39;s that old saying? The fastest way to get the right answer to a question is to answer it wrong and be corrected? :)"}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 1, "creation_date": 1510608842, "post_id": 47273671, "comment_id": 81498999, "body": "I do the same thing, but I&#39;m a little further along with Haskell. <code>mapMaybe</code> has cleaned up a lot of my code along the way!"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1510608600, "last_edit_date": 1510608600, "creation_date": 1510607702, "answer_id": 47273671, "question_id": 47273470, "link": "https://stackoverflow.com/questions/47273470/transforming-a-string-to-list-of-integer-then-sum-them-up-in-haskell/47273671#47273671", "title": "Transforming a string to list of integer then sum them up in haskell?", "body": "<p>You'll need a function with signature</p>\n\n<pre><code>:: Char -&gt; Int\n</code></pre>\n\n<p>Or more likely</p>\n\n<pre><code>:: Char -&gt; Maybe Int\n</code></pre>\n\n<p>since only 3 values in the domain <code>Char</code> will have valid outputs. You can write this as:</p>\n\n<pre><code>charVal :: Char -&gt; Maybe Int\ncharVal 'A' = Just 1\ncharVal 'B' = Just 2\ncharVal 'C' = Just 3\ncharVal _   = Nothing\n</code></pre>\n\n<p>Then you can <code>sum</code> over the <code>map</code> of the string, using <code>Data.Maybe</code>'s <code>catMaybes</code> to ignore the <code>Nothing</code> values. This can be generalized with <code>Data.Maybe</code>'s <code>mapMaybe :: (a -&gt; Maybe b) -&gt; [a] -&gt; [b]</code></p>\n\n<pre><code>import Data.Maybe (catMaybes)\n\ncharVal :: Char -&gt; Maybe Int\ncharVal 'A' = Just 1\ncharVal 'B' = Just 2\ncharVal 'C' = Just 3\ncharVal _   = Nothing\n\ncheckIfTrue :: String -&gt; Int -&gt; Bool\ncheckIfTrue s k = k == stringSum where\n  stringSum = sum . (mapMaybe charVal) $ s\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 47273671, "answer_count": 2, "score": 2, "last_activity_date": 1510608793, "creation_date": 1510606902, "last_edit_date": 1510607801, "question_id": 47273470, "link": "https://stackoverflow.com/questions/47273470/transforming-a-string-to-list-of-integer-then-sum-them-up-in-haskell", "title": "Transforming a string to list of integer then sum them up in haskell?", "body": "<p>I have a function checkIfTrue where I want to computes a string and check if the sum of the string is true. Like for example, I have a String \"ABC\" where A= 1, B=2, C=3.Let say</p>\n\n<p>input:</p>\n\n<blockquote>\n  <p>checkIfTrue \"ABC\" 2 </p>\n</blockquote>\n\n<p>output:</p>\n\n<blockquote>\n  <p>False</p>\n</blockquote>\n\n<p>as the sum of A+B+C = 6.</p>\n\n<pre><code>checkIfTrue :: String -&gt; Int -&gt; Bool\ncheckIfTrue = sum x + xs .words \n    | x &lt;- A = 1\n    |x &lt;- B = 2\n    |x &lt;- C = 3\n</code></pre>\n\n<p>This is what I had in mind but I don't know how to compare if the sum of the input is the same. Sorry if what I had in mind is ridiculous.</p>\n"}, {"tags": ["haskell", "types", "type-mismatch"], "comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 2, "creation_date": 1510605918, "post_id": 47273108, "comment_id": 81497473, "body": "You mention <code>Floating a</code> in type definition and then feed <code>fromIntegral</code> in the function with the same <code>a</code> type which is supposed to belong <code>Integral</code> type class... which is a conflict."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510607086, "post_id": 47273108, "comment_id": 81498175, "body": "You need a function <code>Floating a =&gt; a -&gt; Float</code> to produce the result. I would expect <code>close :: Floating a =&gt; (a,a) -&gt; (a,a) -&gt; a</code>, or <code>close :: (Integral a, Floating b) =&gt; (a,a) -&gt; (a,a) -&gt; b</code>. Where do <code>Ord</code> and <code>Float</code> come from?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510607351, "post_id": 47273108, "comment_id": 81498308, "body": "@molbdnilo maybe he wants a concrete <code>Float</code> from the output?"}, {"owner": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510610827, "post_id": 47273108, "comment_id": 81499950, "body": "@molbdnilo yes, I have no idea why i had float.... I think I just didnt realise that I can use a as the ambiguous for float"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "edited": false, "score": 0, "creation_date": 1510607002, "post_id": 47273305, "comment_id": 81498123, "body": "gives me    &#39;Floating a =&gt; (a,a) -&gt; (a,a) -&gt; a&#39;"}, {"owner": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "edited": false, "score": 0, "creation_date": 1510607169, "post_id": 47273305, "comment_id": 81498225, "body": "which is basically what I had as my type"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "edited": false, "score": 0, "creation_date": 1510607213, "post_id": 47273305, "comment_id": 81498247, "body": "@MaxUmarovs Your definition of <code>close</code> does not have that type, but <code>(Floating a1, Integral b, Integral b1, Integral a, Integral a2) =&gt; (a2, b1) -&gt; (a, b) -&gt; a1</code>."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "edited": false, "score": 0, "creation_date": 1510607241, "post_id": 47273305, "comment_id": 81498262, "body": "@MaxUmarovs you missed the part where he said to comment out your type signature."}], "tags": [], "owner": {"reputation": 4185, "user_id": 15467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89c04ada36efa853c7f5be0a96b6dd9?s=128&d=identicon&r=PG", "display_name": "ja.", "link": "https://stackoverflow.com/users/15467/ja"}, "is_accepted": false, "score": 0, "last_activity_date": 1510606163, "creation_date": 1510606163, "answer_id": 47273305, "question_id": 47273108, "link": "https://stackoverflow.com/questions/47273108/haskell-couldnt-match-expected-type-float-with-actual-type-a/47273305#47273305", "title": "Haskell couldn&#39;t match expected type float with actual type &#39;a&#39;", "body": "<p>One technique to help you debug this would be to comment out your type signature and ask the system what the type is. In ghci, that'll be <code>:t close</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1510607197, "creation_date": 1510607197, "answer_id": 47273546, "question_id": 47273108, "link": "https://stackoverflow.com/questions/47273108/haskell-couldnt-match-expected-type-float-with-actual-type-a/47273546#47273546", "title": "Haskell couldn&#39;t match expected type float with actual type &#39;a&#39;", "body": "<p>Your type is wrong. As Redu mentions in the comments, you have a type under typeclass <code>Floating</code> and are calling <code>fromIntegral</code> on it.</p>\n\n<pre><code>Prelude&gt; :t fromIntegral\nfromIntegral :: (Num b, Integral a) =&gt; a -&gt; b\n</code></pre>\n\n<p>You can't have a <code>Floating</code> <code>Integral</code>, so this fails. Your type instead should be:</p>\n\n<pre><code>close :: Integral a =&gt; (a, a) -&gt; (a, a) -&gt; Float\n</code></pre>\n\n<p>Note that you also don't need as many <code>fromIntegral</code> calls, since <code>(^)</code> operates on <code>(Num a, Integral b) =&gt; a -&gt; b -&gt; a</code>, any number can be the base. The only operation that matters is <code>sqrt</code> which requires a <code>Floating a</code>.</p>\n\n<pre><code>close :: Integral a =&gt; (a, a) -&gt; (a, a) -&gt; Float\nclose (x1, y1) (x2, y2) = sqrt . fromIntegral $ squaredDistance where\n  squaredDistance = (x1 - x2) ^ 2 + (y1 - y2) ^ 2\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8925802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1626601887401829/picture?type=large", "display_name": "SoMax", "link": "https://stackoverflow.com/users/8925802/somax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 0, "accepted_answer_id": 47273546, "answer_count": 2, "score": 3, "last_activity_date": 1510607197, "creation_date": 1510605338, "question_id": 47273108, "link": "https://stackoverflow.com/questions/47273108/haskell-couldnt-match-expected-type-float-with-actual-type-a", "title": "Haskell couldn&#39;t match expected type float with actual type &#39;a&#39;", "body": "<p>I have run into a problem when trying to add 2 parts of a tuple together</p>\n\n<p>Function Type:</p>\n\n<pre><code>close :: (Floating a, Ord a) =&gt; (a,a) -&gt; (a,a) -&gt; Float\n</code></pre>\n\n<p>Function definition:</p>\n\n<pre><code>close y x = sqrt (((fromIntegral(snd x) - fromIntegral(snd y))^2) + ((fromIntegral(fst x) - fromIntegral(fst y)^2)))\n</code></pre>\n\n<p>On feeding the function a y tuple of format ( , ) and a x tuple of format ( , ) it should calculate the distance between two coordinates. \nHowever on launch I get an error of:</p>\n\n<pre><code>Couldn't match expected type 'Float' with actual type 'a'\na is a rigid type variable bound by...\n</code></pre>\n\n<p>I do understand why the problem is arising, but I have no idea how to fix it</p>\n"}, {"tags": ["haskell", "monads"], "comments": [{"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 1, "creation_date": 1510606225, "post_id": 47272933, "comment_id": 81497636, "body": "You could use <code>asum</code> to collapse an infinite list of <code>MaybeT IO</code> actions and get the first that succeeds, a bit like in this answer: <a href=\"https://stackoverflow.com/questions/47120384/keeping-io-lazy-under-append/47126169#47126169\" title=\"keeping io lazy under append\">stackoverflow.com/questions/47120384/&hellip;</a>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1510607019, "post_id": 47272933, "comment_id": 81498132, "body": "Laziness and IO sometimes don&#39;t mix well. You may check <a href=\"https://hackage.haskell.org/package/lazyio-0.1.0.4/docs/System-IO-Lazy.html\" rel=\"nofollow noreferrer\">System.IO.Lazy</a> to turn your IO operations into lazy."}], "answers": [{"comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1510606043, "post_id": 47273119, "comment_id": 81497537, "body": "There&#39;s some <a href=\"https://hackage.haskell.org/package/llvm-hs-pure-5.1.0/docs/src/LLVM.Prelude.html#findM\" rel=\"nofollow noreferrer\">similarly-typed existing code</a> but nothing standard, it looks like..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1510606129, "post_id": 47273119, "comment_id": 81497585, "body": "@ephemient: indeed. <code>find</code> was the closest non-monad version of this problem. But <code>findM</code> does not seem to exist in a standard package, nor did a Hoogle search yield any result."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1510609109, "last_edit_date": 1510609109, "creation_date": 1510605388, "answer_id": 47273119, "question_id": 47272933, "link": "https://stackoverflow.com/questions/47272933/how-to-use-filterm-with-an-infinite-list/47273119#47273119", "title": "How to use filterM with an infinite list", "body": "<p>An equivalent without monads, would be <code>find :: Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a</code>. But I can not find a version to let it work with monads.</p>\n\n<p>An idea might be to implement <code>findM</code> ourselves:</p>\n\n<pre><code>import Data.Bool(bool)\n\nfindM :: Monad m =&gt; (a -&gt; m Bool) -&gt; [a] -&gt; m (Maybe a)\nfindM f [] = return Nothing\nfindM f (x:xs) = f x &gt;&gt;= bool (findM f xs) (return (Just x))\n</code></pre>\n\n<p>You can then use it like:</p>\n\n<pre><code>import System.Directory(doesFileExist)\n\nmain = do\n    Just fln &lt;- findM (not . doesDirectoryExist) (map (getDatedDir t d) [0..])\n    putStrLn fln\n</code></pre>\n\n<p>to print the first filename such that the file does not exists. Of course you can also process <code>fln</code> in a different way.</p>\n"}, {"comments": [{"owner": {"reputation": 1237, "user_id": 3416536, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/33e660f9b48e97aa96c9029e9645f15d?s=128&d=identicon&r=PG&f=1", "display_name": "user3416536", "link": "https://stackoverflow.com/users/3416536/user3416536"}, "edited": false, "score": 0, "creation_date": 1510640094, "post_id": 47273518, "comment_id": 81508264, "body": "That looks like exactly what I&#39;m after.  Thanks!  Glad to see that I wasn&#39;t missing something in Control.Monad ."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": true, "score": 6, "last_activity_date": 1510607095, "creation_date": 1510607095, "answer_id": 47273518, "question_id": 47272933, "link": "https://stackoverflow.com/questions/47272933/how-to-use-filterm-with-an-infinite-list/47273518#47273518", "title": "How to use filterM with an infinite list", "body": "<p>There's <code>firstM</code> from <code>Control.Monad.Loops</code>:</p>\n\n<pre><code>firstM :: Monad m =&gt; (a -&gt; m Bool) -&gt; [a] -&gt; m (Maybe a)\n</code></pre>\n\n<blockquote>\n  <p>return the first value from a list, if any, satisfying the given\n  predicate.</p>\n</blockquote>\n"}], "owner": {"reputation": 1237, "user_id": 3416536, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/33e660f9b48e97aa96c9029e9645f15d?s=128&d=identicon&r=PG&f=1", "display_name": "user3416536", "link": "https://stackoverflow.com/users/3416536/user3416536"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 47273518, "answer_count": 2, "score": 7, "last_activity_date": 1510609109, "creation_date": 1510604647, "question_id": 47272933, "link": "https://stackoverflow.com/questions/47272933/how-to-use-filterm-with-an-infinite-list", "title": "How to use filterM with an infinite list", "body": "<p>I was trying to find a directory name by appending a number until I found a name that doesn't yet exist:</p>\n\n<pre><code>head &lt;$&gt; filterM (fmap not . fexists_) [ getDatedDir t d n | n &lt;- [0..] ]\n</code></pre>\n\n<p>The problem with this is that it never returns.  I think the problem is that although IO is a Functor, filterM has to do all the IO before the head effects; that is, it has to evaluate fexists for every n - and that's of course infinite.</p>\n\n<p>Now, I can solve this:</p>\n\n<pre><code>go t d 0\nwhere go t d n = do\n    let dir = getDatedDir t d n\n    fexists_ dir &gt;&gt;= \\case\n        False -&gt; return dir\n        True  -&gt; go t d (n+1)\n</code></pre>\n\n<p>But I feel that there ought to be a more elegant approach, using filterM or something similar.</p>\n\n<p>This feels like a common enough pattern that there is probably an extisting function in Control.Monad, I'm just not seeing it.</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 5, "creation_date": 1510597961, "post_id": 47271149, "comment_id": 81493158, "body": "Declare the data type as normal, then make a function which does what you want, and export that instead of the data constructor - see <a href=\"https://wiki.haskell.org/Smart_constructors\" rel=\"nofollow noreferrer\">wiki.haskell.org/Smart_constructors</a>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1510598822, "post_id": 47271149, "comment_id": 81493625, "body": "How do you like to implement an ordered comparison among two different types..?"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510598646, "post_id": 47271288, "comment_id": 81493533, "body": "It&#39;s also safe to export <code>TwoValued</code>, just not <code>ValuePair</code>."}, {"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 4, "creation_date": 1510600474, "post_id": 47271288, "comment_id": 81494487, "body": "Small nit: I would omit the <code>Ord a =&gt;</code> part in the <code>data</code> declaration if a smart contructor is used anyway. AFAIRC, that syntax does nothing else than restrict construction of <code>TwoValued</code> things. This has precedent all over the place, e.g. <a href=\"https://hackage.haskell.org/package/containers-0.5.10.2/docs/src/Data.Map.Internal.html#Map\" rel=\"nofollow noreferrer\"><code>Data.Map</code></a>. There&#39;s even <code>empty :: Map (Int -&gt;Int)</code> although <code>Int -&gt; Int</code> has no <code>Ord</code> instance."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 1, "creation_date": 1510600652, "post_id": 47271288, "comment_id": 81494589, "body": "@SebastianGraf thanks! I can erase it from the answer"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 10, "last_activity_date": 1510600744, "last_edit_date": 1510600744, "creation_date": 1510598250, "answer_id": 47271288, "question_id": 47271149, "link": "https://stackoverflow.com/questions/47271149/haskell-use-guarded-equation-to-create-type/47271288#47271288", "title": "Haskell Use guarded equation to create type", "body": "<p>You are needing here a ADT (Abstract data type), so, first, create your data type correctly:</p>\n\n<pre><code>data TwoValued a = ValuePair a a deriving Show\n</code></pre>\n\n<p>then make the constructor</p>\n\n<pre><code>makePair :: Ord a =&gt; a -&gt; a -&gt; TwoValued a a\nmakePair x y = if x &lt; y then (ValuePair x y) else (ValuePair y x)\n</code></pre>\n\n<p>Finally, export the module with just the function the user need to see (in this case makePair)</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 6, "last_activity_date": 1510598694, "last_edit_date": 1510598694, "creation_date": 1510598370, "answer_id": 47271317, "question_id": 47271149, "link": "https://stackoverflow.com/questions/47271149/haskell-use-guarded-equation-to-create-type/47271317#47271317", "title": "Haskell Use guarded equation to create type", "body": "<p>As far as I know, you can not define logic in a constructor. To put it bold, a constructor is used to discriminate between values, and to hold parameters.</p>\n\n<p>You can however <strong>hide the constructor(s)</strong>, and define <strong>functions</strong> to perform the construction. For example:</p>\n\n<pre><code>module Foo(TwoValued(), <b>twoValued</b>, firstValue, secondValue)\n\ndata TwoValued a = ValuePair { firstValue :: a, secondValue :: a}\n\n<b>twoValued :: Ord a =&gt; a -&gt; a -&gt; TwoValued a\ntwoValued a b | a &lt;= b = ValuePair a b\n              | otherwise = ValuePair b a</b></code></pre>\n\n<p>So we define a data structure <code>TwoValued</code> and export it <strong>without</strong> the constructor (we write <code>module Foo(TwoValued())</code>, note <code>module Foo(TwoValued(..))</code>) as well as a function <code>twoValued</code> that acts like a constructor.</p>\n\n<p>We can also export the getters <code>firstValue :: TwoValued a -&gt; a</code> and <code>secondValue :: TwoValued a -&gt; a</code> such that other modules can obtain the parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 5, "last_activity_date": 1510600432, "creation_date": 1510600432, "answer_id": 47271815, "question_id": 47271149, "link": "https://stackoverflow.com/questions/47271149/haskell-use-guarded-equation-to-create-type/47271815#47271815", "title": "Haskell Use guarded equation to create type", "body": "<p>Smart constructors are the idiomatic approach, as others already commented.</p>\n\n<p>As an alternative, we can also use \"smart pattern-constructors\", which allow logic beyond regular ones.</p>\n\n<pre><code>{-# LANGUAGE PatternSynonyms #-}\n\nmodule SmartCons(OrdPair(OrdPair)) where\n\ndata OrdPair = OP Int Int\n\npattern OrdPair :: Int -&gt; Int -&gt; OrdPair\npattern OrdPair x y &lt;- OP x y where\n   OrdPair x y = if x &lt;= y then OP x y else OP y x\n</code></pre>\n\n<p>We can then use them as intended:</p>\n\n<pre><code>&gt; import SmartCons\n&gt; case OrdPair 3 2 of OrdPair x _ -&gt; x\n2\n</code></pre>\n\n<p>Note that the <code>OP</code> dumb constructor is accessible only within the module. From outside, we can only use the smart one.</p>\n\n<p>Whether this is a good or bad idea is arguable, though. I guess we are not yet used to expect constructors to involve some logic. Hiding an expensive computation behind construction could easily surprise the user.</p>\n"}], "owner": {"reputation": 73, "user_id": 5303092, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LY8ainpZ9Nw/AAAAAAAAAAI/AAAAAAAAABE/1mFGJbmOBpc/photo.jpg?sz=128", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5303092/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 47271288, "answer_count": 3, "score": 3, "last_activity_date": 1573715687, "creation_date": 1510597772, "last_edit_date": 1573715687, "question_id": 47271149, "link": "https://stackoverflow.com/questions/47271149/haskell-use-guarded-equation-to-create-type", "title": "Haskell Use guarded equation to create type", "body": "<p>I want to create a type called <code>TwoValued</code> and it contains two values: <code>a</code> and <code>b</code>, and I'd like to make sure that <code>a &lt;= b</code></p>\n\n<pre><code>data TwoValued a b | a &lt;= b = ValuePair a b\n                   | otherwise = ValuePair b a\n</code></pre>\n\n<p>But it's not working, I think guarded equation is not allowed here, so is there any other way to achieve what I want? Thanks.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 4, "creation_date": 1510595352, "post_id": 47270438, "comment_id": 81491737, "body": "Unrelated to <code>if then else</code>. There is no <code>+=</code> operator in Haskell. (Well ok, some libraries like Lens define it, but it doesn&#39;t do what you think it does.)"}, {"owner": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1510595702, "post_id": 47270438, "comment_id": 81491928, "body": "yes, thank you for pointing out that :) . I&#39;ve just changed my code into sum = sum+56 and so on"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 6, "creation_date": 1510595874, "post_id": 47270438, "comment_id": 81492031, "body": "There is no assignment operator <code>=</code> either, that symbol can only be used in declarations."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1510596190, "post_id": 47270438, "comment_id": 81492208, "body": "@Fatball: Like many others here that start Haskell, you write an imperative program in what looks like familiar syntax. Yes, I think the designers of Haskell perhaps better had used different names for these function (this is not an insult or anything). But Haskell is <i>functional programming</i>, and that is a (very) different paradigm than <i>imperative</i> programming. There is for instance no <code>for</code> loop in Haskell either. Therefore I really would advice you to look for a few examples in Haskell instead of the &quot;immediate hands-on approach&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "edited": false, "score": 0, "creation_date": 1510599176, "post_id": 47271113, "comment_id": 81493799, "body": "Thank you, totally worked!! I have learnt a lot from your code and the way you think. But what if I wanted to have &quot;A*&quot; (String) than using Char? is that possible? My original purpose was to calculate the sum of the grades then compare to another variable. I have evaluated with your helps so it works totally fine with Char. But what should I do if I wanted to have A* instead of A?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "edited": false, "score": 0, "creation_date": 1510600981, "post_id": 47271113, "comment_id": 81494788, "body": "@Fatball It should work for strings as well, e.g. <code>pts &quot;A&quot; = 10 ; pts &quot;A*&quot; = 12 ; ...</code>. Just use double quotes instead of single ones."}, {"owner": {"reputation": 976, "user_id": 8848344, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/bo8Ct.jpg?s=128&g=1", "display_name": "Luai Ghunim", "link": "https://stackoverflow.com/users/8848344/luai-ghunim"}, "edited": false, "score": 0, "creation_date": 1510601696, "post_id": 47271113, "comment_id": 81495185, "body": "There are many ways to solve this but using map and composit functions for a beginner is not a good idea"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8583928"}, "is_accepted": true, "score": 1, "last_activity_date": 1510597656, "creation_date": 1510597656, "answer_id": 47271113, "question_id": 47270438, "link": "https://stackoverflow.com/questions/47270438/if-else-to-calculate-from-a-string-haskell/47271113#47271113", "title": "if else to calculate from a string haskell", "body": "<p>Here is something to get you started. I would recommend a good book, for example Hutton's <em>Haskell Programming (2nd edition)</em>.</p>\n\n<pre><code>-- a function to convert grades to points\npts 'A' = 56\npts 'B' = 40\npts 'C' = 32\npts 'D' = 24\npts 'E' = 8\npts _ = 0\n\n-- then your desired function\ngrades str = sum (map pts str)\n-- or, point-free (no pun intended)\ngrades' = sum . map pts\n</code></pre>\n\n<p>After these definitions</p>\n\n<pre><code>\u03bb&gt; map pts \"ABC\"\n[56,40,32]\n\u03bb&gt; grades \"ABC\"\n128\n</code></pre>\n\n<p>Happy Haskelling!</p>\n"}], "owner": {"reputation": 13, "user_id": 8011478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0226bc12323d01f88110a502b36367ae?s=128&d=identicon&r=PG&f=1", "display_name": "Fatball", "link": "https://stackoverflow.com/users/8011478/fatball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "closed_date": 1510603051, "accepted_answer_id": 47271113, "answer_count": 1, "score": -1, "last_activity_date": 1510597656, "creation_date": 1510595145, "question_id": 47270438, "link": "https://stackoverflow.com/questions/47270438/if-else-to-calculate-from-a-string-haskell", "closed_reason": "Needs more focus", "title": "if else to calculate from a string haskell", "body": "<p>hi I am new to haskell and very confused about if condition of haskell.\nI was trying to calculate a sum from a String of grades. \nFor example, <code>grades \"ABC\"</code> should have the result of \"128\" while A=56,B=40 and C=32.\nI am wondering if I am heading to the right direction. I wanted to output the sum of the grades by having sum after <code>then</code>\nHere is the code I got so far :</p>\n\n<pre><code>grades (x:xs) =\n if x==\"A\" then sum+=56\n else if x==\"B\" then sum+=40\n else if x==\"C\" then sum+=32\n else if x==\"D\" then sum+=24\n else if x==\"E\" then sum+=8\n else sum+=0\n</code></pre>\n"}, {"tags": ["haskell", "polymorphism", "typeclass", "haskell-lens"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510606994, "post_id": 47270677, "comment_id": 81498114, "body": "What&#39;s more restrictive than what? How? I&#39;m missing something."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510608376, "post_id": 47270677, "comment_id": 81498787, "body": "@dfeuer I&#39;m not sure what I had written there.. hopefully the edit makes more sense. Thanks for being such a diligent reader!"}, {"owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "edited": false, "score": 0, "creation_date": 1510609964, "post_id": 47270677, "comment_id": 81499567, "body": "Do I need UndecidableInstances for this?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "reply_to_user": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "edited": false, "score": 0, "creation_date": 1510615559, "post_id": 47270677, "comment_id": 81501676, "body": "@VansonSamuel I think so (in order to have the type equality constraints in the context - with the simpler versions, i.e. <code>instance FieldC (X1 a b) (X1 a b&#39;) b b&#39;</code>, you shouldn&#39;t need it)."}, {"owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "edited": false, "score": 0, "creation_date": 1511215019, "post_id": 47270677, "comment_id": 81757241, "body": "@user2407038 I posted another questions on how to do the generalization you mentioned: <a href=\"https://stackoverflow.com/questions/47401763/how-to-simplify-calling-a-field-on-a-polymorphic-field-name-into-one-typeclass\" title=\"how to simplify calling a field on a polymorphic field name into one typeclass\">stackoverflow.com/questions/47401763/&hellip;</a>.  Would love to see a continuation of your answer."}], "tags": [], "owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "is_accepted": true, "score": 1, "last_activity_date": 1510608314, "last_edit_date": 1510608314, "creation_date": 1510595974, "answer_id": 47270677, "question_id": 47270018, "link": "https://stackoverflow.com/questions/47270018/creating-polymorphic-lens/47270677#47270677", "title": "Creating polymorphic lens", "body": "<p>You can generalize the definition of the <code>HavingField</code> class; in particular, you can express the relationship between the updated type variable and the record type using functional dependencies. This allows the update type variable to occur in any position; and it allows updates to monomorphic fields.</p>\n\n<pre><code>class FieldC k k' x x' | k x' -&gt; k', k' x -&gt; k, k -&gt; x, k' -&gt; x' where\n  fieldC :: Functor f =&gt; (x -&gt; f x') -&gt; k -&gt; f k'\n\ninstance (b ~ b0, b' ~ b0') =&gt; FieldC (X1 a b) (X1 a b') b0 b0' where ...\ninstance (b ~ b0, b' ~ b0') =&gt; FieldC (X2 c a b) (X2 c a b') b0 b0' where ...\n</code></pre>\n\n<p>You define instances in much the same way; note that some of the equality constraints are placed in the context to improve type inference. You can read the first instance above as <code>instance FieldC (X1 a b) (X1 a b') b b'</code>.</p>\n\n<p>The classes for other fields are defined in exactly the same way; this is essentially the most general way to define a class for lenses (which should be more apparent if one notes that the type of <code>fieldC</code> is actually just <code>Lens k k' x x'</code>).</p>\n\n<pre><code>class FieldA k k' x x' | k x' -&gt; k', k' x -&gt; k, k -&gt; x, k' -&gt; x' where\n  fieldA :: Functor f =&gt; (x -&gt; f x') -&gt; k -&gt; f k'\n\nclass FieldB k k' x x' | k x' -&gt; k', k' x -&gt; k, k -&gt; x, k' -&gt; x' where\n  fieldB :: Functor f =&gt; (x -&gt; f x') -&gt; k -&gt; f k'\n</code></pre>\n\n<p>(Note: this too can be generalized to a single class with an additional parameter corresponding to the field name; this is probably outside the scope of this question).</p>\n\n<p>Now it should be clearer how to write the instance declarations:</p>\n\n<pre><code>instance (x0 ~ Int, x1 ~ Int) =&gt; FieldB (X1 a c) (X1 a c) x0 x1 where ...\ninstance (b0 ~ b, b0' ~ b') =&gt; FieldB (X2 a b c) (X2 a b' c) b0 b0' where ...\n\ninstance (a ~ a0, a' ~ a0') =&gt; FieldA (X1 a c) (X1 a' c) a0 a0' where ...\ninstance (a0 ~ a, a0' ~ a') =&gt; FieldA (X2 a b c) (X2 a' b c) a0 a0' where ...\n</code></pre>\n\n<p>The only difference for monomorphic fields being that the field types are monomorphic types.</p>\n\n<p>A simple test will show that the proper polymorphic types are assigned:</p>\n\n<pre><code>foo x = \n  let y = view fieldB x\n  in set fieldA (2 * y) $ set fieldC (3 + y) x\n</code></pre>\n\n<p>You can ask GHCi for the inferred types at particular instantiations:</p>\n\n<pre><code>\\x -&gt; foo x `asTypeOf` X1{} :: X1 a b -&gt; X1 Int Int\n\\x -&gt; foo x `asTypeOf` X2{} :: Num a0' =&gt; X2 a a0' b -&gt; X2 a0' a0' a0'\n</code></pre>\n\n<hr>\n\n<p>This general pattern can be found implemented e.g. <a href=\"https://www.stackage.org/haddock/lts-9.13/lens-labels-0.1.0.2/Lens-Labels.html#t:HasLens\" rel=\"nofollow noreferrer\">here</a>. This implementation is slightly more permissive; the <code>f</code> in <code>Functor f =&gt; ..</code> is a typeclass parameter instead of being universally quantified over. Depending on your specific use cases, this may or may not work for you.</p>\n"}], "owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 47270677, "answer_count": 1, "score": 2, "last_activity_date": 1510608314, "creation_date": 1510593662, "question_id": 47270018, "link": "https://stackoverflow.com/questions/47270018/creating-polymorphic-lens", "title": "Creating polymorphic lens", "body": "<p>I am able to create a lens for the last field (<code>c</code>) in my data types by doing the follow:</p>\n\n<pre><code>{-# LANGUAGE DuplicateRecordFields #-}\n\ndata X1 a c = X1 { a' :: a, b' :: Int, c' :: c } \n\ndata X2 a b c = X2 { a' :: a, b' :: b, c' :: c }\n\nclass HavingFieldC x cs ct where\n  c :: Functor f =&gt; (cs -&gt; f ct) -&gt; x cs -&gt; f (x ct)\n\ninstance HavingFieldC (X1 a) cs ct  where\n  c = lens\n    (\\X1 { c' } -&gt; c')\n    (\\X1 {..} v -&gt; X1 {c' = v, ..})\n\ninstance HavingFieldC (X2 a b) cs ct where\n  c = lens\n    (\\X2 { c' } -&gt; c')\n    (\\X2 {..} v -&gt; X2 {c' = v, ..})\n</code></pre>\n\n<p>Is there something similar I can do for fields <code>a</code> and <code>b</code></p>\n"}, {"tags": ["haskell", "show", "user-defined-types"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 2, "creation_date": 1510593353, "post_id": 47269879, "comment_id": 81490661, "body": "It compiles fine if you replace <code>Main.show</code> with <code>show</code>."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1510593436, "post_id": 47269879, "comment_id": 81490712, "body": "<code>Main.show</code>? Uh, that&#39;s not a good idea, what this means is that you&#39;re calling <i>your own</i> function <code>show</code>, which is completely detached from the standard <code>Show</code> class with its <code>show</code> method (i.e., <code>Prelude.show</code>)."}, {"owner": {"reputation": 229, "user_id": 7450338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419bd8beb0bdef4aac01a64cb9c7e9e?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/7450338/a-m"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510593586, "post_id": 47269879, "comment_id": 81490797, "body": "@leftaroundabout Using just &quot;show&quot; (which I did originally) gave an &quot;Ambiguous occurrence&quot; error. I thought I was trying to call my own function (recursively)."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510593488, "post_id": 47269950, "comment_id": 81490743, "body": "Speaking of over-complicating, <code>data Nat = Zero | Succ Nat deriving (Show)</code> would also do the trick."}, {"owner": {"reputation": 229, "user_id": 7450338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419bd8beb0bdef4aac01a64cb9c7e9e?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/7450338/a-m"}, "edited": false, "score": 0, "creation_date": 1510593740, "post_id": 47269950, "comment_id": 81490877, "body": "@anumi The &quot;deriving (Show)&quot; method works (though as you point out, with extraneous brackets), but I had already attempted &quot;show = showNat&quot; and get the same error of &quot;No explicit implementation&quot;."}, {"owner": {"reputation": 3724, "user_id": 1015095, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e8105efd9ef42b8fcee1552080c9c74c?s=128&d=identicon&r=PG", "display_name": "anumi", "link": "https://stackoverflow.com/users/1015095/anumi"}, "reply_to_user": {"reputation": 229, "user_id": 7450338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419bd8beb0bdef4aac01a64cb9c7e9e?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/7450338/a-m"}, "edited": false, "score": 2, "creation_date": 1510593853, "post_id": 47269950, "comment_id": 81490941, "body": "@A.Morris: Is it possible that you missed the indentation after the <code>where</code>?"}, {"owner": {"reputation": 229, "user_id": 7450338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419bd8beb0bdef4aac01a64cb9c7e9e?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/7450338/a-m"}, "edited": false, "score": 0, "creation_date": 1510593933, "post_id": 47269950, "comment_id": 81490978, "body": "@anumi Ahhh, it&#39;s not just possible but definitely what caused the problem. Thank you."}], "tags": [], "owner": {"reputation": 3724, "user_id": 1015095, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e8105efd9ef42b8fcee1552080c9c74c?s=128&d=identicon&r=PG", "display_name": "anumi", "link": "https://stackoverflow.com/users/1015095/anumi"}, "is_accepted": true, "score": 8, "last_activity_date": 1510593932, "last_edit_date": 1510593932, "creation_date": 1510593421, "answer_id": 47269950, "question_id": 47269879, "link": "https://stackoverflow.com/questions/47269879/how-to-show-a-user-defined-data-type-in-haskell/47269950#47269950", "title": "How to show a user-defined data type in Haskell", "body": "<p>The instantiation seems over-complicated. This is enough:</p>\n\n<pre><code>data Nat = Zero | Succ Nat\n\nshowNat :: Nat -&gt; String\nshowNat Zero = \"Zero\"\nshowNat (Succ k) = \"Succ \" ++ (showNat k)\n\ninstance Show Nat where\n    show = showNat\n</code></pre>\n\n<p>Alternatively, one might like to use the automatically generated <code>show</code> using <code>deriving</code>:</p>\n\n<pre><code>data Nat = Zero | Succ Nat deriving (Show)\n</code></pre>\n\n<p>In this case, nats will be shown as <code>Succ (Succ Zero)</code>, not as <code>Succ Succ Zero</code> as intended in the original code.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1510608029, "creation_date": 1510608029, "answer_id": 47273745, "question_id": 47269879, "link": "https://stackoverflow.com/questions/47269879/how-to-show-a-user-defined-data-type-in-haskell/47273745#47273745", "title": "How to show a user-defined data type in Haskell", "body": "<p>Just to clarify, without the indentation, you are doing two separate things: </p>\n\n<ol>\n<li><p>Defining <code>instance Show Nat</code> without implementing any functions in it and</p></li>\n<li><p>Defining an unrelated function called <code>show</code>. This is why </p>\n\n<blockquote>\n  <p>Using just \"show\" (which I did originally) gave an \"Ambiguous occurrence\" error</p>\n</blockquote>\n\n<p>there are two <code>show</code> functions in scope and Haskell rules don't give priority to one of them.</p></li>\n</ol>\n"}], "owner": {"reputation": 229, "user_id": 7450338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419bd8beb0bdef4aac01a64cb9c7e9e?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/7450338/a-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "accepted_answer_id": 47269950, "answer_count": 2, "score": 2, "last_activity_date": 1510608029, "creation_date": 1510593193, "question_id": 47269879, "link": "https://stackoverflow.com/questions/47269879/how-to-show-a-user-defined-data-type-in-haskell", "title": "How to show a user-defined data type in Haskell", "body": "<p>So I'm trying to define my own data type which expresses natural numbers recursively, as such:</p>\n\n<pre><code> data Nat = Zero | Succ Nat\n</code></pre>\n\n<p>This function works correctly:</p>\n\n<pre><code> showNat :: Nat -&gt; String\n showNat Zero = \"Zero\"\n showNat (Succ k) = \"Succ \" ++ (showNat k)\n</code></pre>\n\n<p>However, I don't want to have to call it every time I want to output a Nat to the screen. I attempted this:</p>\n\n<pre><code>  instance Show Nat where\n  show Zero = \"Zero\"\n  show (Succ k) = \"Succ \" ++ Main.show k\n</code></pre>\n\n<p>But it returns an error:</p>\n\n<pre><code>\u2022 No explicit implementation for\n    either \u2018showsPrec\u2019 or \u2018Prelude.show\u2019\n\u2022 In the instance declaration for \u2018Show Nat\u2019\n|\n| &gt; instance Show Nat where   |            ^^^^^^^^\n</code></pre>\n\n<p>How can I correctly write instances of 'Show'?</p>\n"}, {"tags": ["haskell", "haskell-stack", "postfix-notation"], "comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 5, "creation_date": 1510590886, "post_id": 47268977, "comment_id": 81489047, "body": "Consider the result of <code>words &quot;3 4 5 * -&quot;</code> vs the result of <code>words &quot;345*-&quot;</code>."}, {"owner": {"reputation": 72, "user_id": 7681272, "user_type": "registered", "profile_image": "https://graph.facebook.com/937529103050352/picture?type=large", "display_name": "Octavian Stefan Stoica", "link": "https://stackoverflow.com/users/7681272/octavian-stefan-stoica"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1510592438, "post_id": 47268977, "comment_id": 81490136, "body": "For the first input there are separate chars and for the second input is the entire string. So i should use another function to split the string?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510593429, "post_id": 47268977, "comment_id": 81490707, "body": "Your desired syntax is slightly less than trivial, so you need a more sophisticated tokenizer than <code>words</code>. If you didn&#39;t have <code>ln</code> (i.e. if every lexeme was a single character) then you could use <code>filter (&#47;= &#39; &#39;)</code>. Try writing a primitive recursive function of type <code>String -&gt; [String]</code> which handles your desired notation; you might be interested in <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:stripPrefix\" rel=\"nofollow noreferrer\">this</a> function (also <code>dropWhile (&#47;= &#39; &#39;)</code> could be useful)"}, {"owner": {"reputation": 72, "user_id": 7681272, "user_type": "registered", "profile_image": "https://graph.facebook.com/937529103050352/picture?type=large", "display_name": "Octavian Stefan Stoica", "link": "https://stackoverflow.com/users/7681272/octavian-stefan-stoica"}, "edited": false, "score": 0, "creation_date": 1510598183, "post_id": 47268977, "comment_id": 81493279, "body": "I tried and failed to implement a function that splits a string into characters. Is someone can provide an example that will be wonderful."}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "edited": false, "score": 0, "creation_date": 1510602795, "post_id": 47268977, "comment_id": 81495804, "body": "What if I <i>want</i> to operate on the number 345, rather than the numbers 3, 4, and 5?"}, {"owner": {"reputation": 72, "user_id": 7681272, "user_type": "registered", "profile_image": "https://graph.facebook.com/937529103050352/picture?type=large", "display_name": "Octavian Stefan Stoica", "link": "https://stackoverflow.com/users/7681272/octavian-stefan-stoica"}, "edited": false, "score": 0, "creation_date": 1510607968, "post_id": 47268977, "comment_id": 81498591, "body": "Well, what I`m trying to do accept only numbers who are less or equal to 9."}], "owner": {"reputation": 72, "user_id": 7681272, "user_type": "registered", "profile_image": "https://graph.facebook.com/937529103050352/picture?type=large", "display_name": "Octavian Stefan Stoica", "link": "https://stackoverflow.com/users/7681272/octavian-stefan-stoica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510590355, "creation_date": 1510590234, "last_edit_date": 1510590355, "question_id": 47268977, "link": "https://stackoverflow.com/questions/47268977/reverse-polish-notation-in-haskell-that-computes-inputs-without-spaces-between-c", "title": "Reverse polish notation in Haskell that computes inputs without spaces between characters", "body": "<p>I'm trying to write a program that takes a string input and return the value after computing the input using polish notation. Here is my code, the problem is that I need to calculate for every input for example  for input <code>3 4 5 * -</code> the result is -17, but for the input <code>345*-</code> I got <code>Exception: Prelude.read: no parse</code></p>\n\n<p>Here is my code:</p>\n\n<pre><code>rpcalc :: String -&gt; Float\nchunksOf :: Int -&gt; [e] -&gt; [[e]]\nchunksOf n [] = []\n\nrpcalc = head .foldl foldingFunction [] . words  \nwhere   foldingFunction (x:y:ys) \"*\" = (x * y):ys  \n  foldingFunction (x:y:ys) \"+\" = (x + y):ys  \n  foldingFunction (x:y:ys) \"-\" = (y - x):ys\n  foldingFunction (x:y:ys) \"/\" = (y / x):ys\n  foldingFunction (x:y:ys) \"^\" = (y ** x):ys\n  foldingFunction (x:xs) \"ln\" = log  x:xs\n  foldingFunction xs numberString = read numberString:xs\n</code></pre>\n\n<p>Thank you for help guys, I'm new to functional programming and is harder then I thought. *Note: I'm not using chunksOf in anyway.</p>\n"}, {"tags": ["haskell", "functional-programming", "applicative"], "comments": [{"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 6, "creation_date": 1510588965, "post_id": 47268466, "comment_id": 81487748, "body": "They discard the <i>result</i> of the argument, but keep its <i>effects</i>, if any. (Pretty sure this is a dup, not sure of what...)"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510588968, "post_id": 47268466, "comment_id": 81487750, "body": "It&#39;s similar to <code>&gt;&gt;</code>, in that if you have a function with a side effect, you don&#39;t need the result, as it often is <code>()</code>, which generally isn&#39;t helpful. For example <code>putStrLn &quot;Input a line:&quot; *&gt; getLine</code>. It will print &quot;Input a line&quot;, prompt for an input, then return the input"}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 3, "creation_date": 1510589665, "post_id": 47268466, "comment_id": 81488206, "body": "Here&#39;s another example, in another applicative: <code>Nothing *&gt; Just &#39;a&#39;</code> gives back <code>Nothing</code> (not <code>Just &#39;a&#39;</code>)."}, {"owner": {"reputation": 550, "user_id": 2665006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f5fc5207efb9ca551f6c5f3e4804beca?s=128&d=identicon&r=PG", "display_name": "phage", "link": "https://stackoverflow.com/users/2665006/phage"}, "edited": false, "score": 0, "creation_date": 1510590431, "post_id": 47268466, "comment_id": 81488739, "body": "Ahhh!!! Discarding the RESULT.  I was confused because the explanation said &quot;discarding the value&quot;."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1510592239, "post_id": 47268466, "comment_id": 81490000, "body": "I recommend clicking through to the source (in this case some of the instance declarations) if you&#39;re not sure what something does or why"}], "answers": [{"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 8, "last_activity_date": 1510589839, "creation_date": 1510589839, "answer_id": 47268839, "question_id": 47268466, "link": "https://stackoverflow.com/questions/47268466/why-do-you-need-functions-such-as-these-or-if-they-discard-the-first-o/47268839#47268839", "title": "Why do you need functions such as these (*&gt;) or (&lt;*) if they discard the first or second argument?", "body": "<p>Let\u2019s suppose our applicative functor here is already a monad. We might implement <code>*&gt;</code> and <code>&lt;*</code> like this:</p>\n\n<pre><code>x *&gt; y = do\n  x\n  y\n\nx &lt;* y = do\n  result &lt;- x\n  y\n  return result\n</code></pre>\n\n<p>So you can use <code>&lt;*</code> and <code>*&gt;</code> to write simple things like:</p>\n\n<pre><code>askForNumber :: IO Int\naskForNumber = putStr \"Please enter a number: \" *&gt; readLn &lt;* putStrLn \"Thank you.\"\n</code></pre>\n\n<p>So you can see that while the \u201cresult\u201d is discarded, the result is only one part of a monadic action or applicative functor action.</p>\n"}, {"tags": [], "owner": {"reputation": 4565, "user_id": 1134885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c428466054762cf7d4b5fb5f4396fa2?s=128&d=identicon&r=PG", "display_name": "NovaDenizen", "link": "https://stackoverflow.com/users/1134885/novadenizen"}, "is_accepted": false, "score": 3, "last_activity_date": 1510610180, "creation_date": 1510610180, "answer_id": 47274216, "question_id": 47268466, "link": "https://stackoverflow.com/questions/47268466/why-do-you-need-functions-such-as-these-or-if-they-discard-the-first-o/47274216#47274216", "title": "Why do you need functions such as these (*&gt;) or (&lt;*) if they discard the first or second argument?", "body": "<p>The \"shape\" of the discarded argument is still used.  Think of an <code>Applicative f =&gt; f a</code> value as having some values of type <code>a</code> arranged in some sort of shape made possible by the applicative functor f.  The operator <code>&lt;*&gt; :: Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b</code> combines the shapes of its first two arguments to come up with a third shape.  <code>pure x</code> always has a simple 'idenitity' shape that doesn't alter another shape.  </p>\n\n<p>The definitions for the two operators in question are equivalent to:</p>\n\n<pre><code>a &lt;* b = pure (\\x y -&gt; x) &lt;*&gt; a &lt;*&gt; b\na *&gt; b = pure (\\x y -&gt; y) &lt;*&gt; a &lt;*&gt; b\n</code></pre>\n\n<p><code>pure</code> expressions have an identity shape, which can be inferred from the first applicative law, <code>pure id &lt;*&gt; v = v</code>.  So when <code>pure (\\x y -&gt; ...) &lt;*&gt; a</code> is evaluated, its result has the same shape as <code>a</code>.  It's equivalent to <code>fmap (\\...) a</code>, whose result also has the same shape as <code>a</code>.  </p>\n\n<p>Then when <code>(pure (\\x y -&gt; ...) &lt;*&gt; a) &lt;*&gt; b</code> is evaluated, its result will have the shape of <code>a</code> combined with <code>b</code>.  </p>\n\n<p>There are only two shapes values of <code>Maybe a</code> and <code>Either a b</code> can take.  They're not that interesting.</p>\n\n<pre><code>Prelude&gt; :set +t\nPrelude&gt; Just 'x' &lt;* Just (1::Int)\nJust 'x'\nit :: Maybe Char\nPrelude&gt; Just 'x' &lt;* (Nothing :: Maybe Int)\nNothing\nit :: Maybe Char\nPrelude&gt; (Nothing :: Maybe Char) &lt;* Just (1::Int)\nNothing\nit :: Maybe Char\nPrelude&gt; (Nothing :: Maybe Char) &lt;* (Nothing :: Maybe Char)\nNothing\nit :: Maybe Char\n</code></pre>\n\n<p>For lists, the shape combination is easy to visualize. </p>\n\n<pre><code>Prelude&gt; \"ab\" *&gt; \"123\"\n\"123123\"\nPrelude&gt; \"ab\" &lt;* \"123\"\n\"aaabbb\"\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 2665006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f5fc5207efb9ca551f6c5f3e4804beca?s=128&d=identicon&r=PG", "display_name": "phage", "link": "https://stackoverflow.com/users/2665006/phage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510610180, "creation_date": 1510588731, "last_edit_date": 1510589184, "question_id": 47268466, "link": "https://stackoverflow.com/questions/47268466/why-do-you-need-functions-such-as-these-or-if-they-discard-the-first-o", "title": "Why do you need functions such as these (*&gt;) or (&lt;*) if they discard the first or second argument?", "body": "<p><a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Applicative.html#v:-42--62-\" rel=\"nofollow noreferrer\">The type signature of the function <code>(*&gt;)</code></a> is such:</p>\n\n<blockquote>\n<pre><code>(*&gt;) :: f a -&gt; f b -&gt; f b \n</code></pre>\n  \n  <p>Sequence actions, discarding the value of the first argument.</p>\n</blockquote>\n\n<p>Can someone please explain why this is useful?  Seems counter-intuitive if the first argument is discarded.</p>\n\n<p>Please illustrate with examples.  Thanks.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1510588125, "post_id": 47267851, "comment_id": 81487189, "body": "you should compare it with the type of <code>fmap . fmap</code> (<i>not</i> <code>fmap fmap</code>).  (see also the type for <code>fmap . fmap . fmap</code> etc.). -- But I understand that you want <code>fmap&#39;</code> to decide how many <code>fmap</code>s are in the <code>.</code>-connected chain, is this correct?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1510589035, "post_id": 47267851, "comment_id": 81487795, "body": "You would like to have a function which decides if an arbitrary type has a <code>Functor</code> instance, but this isn&#39;t possible - it&#39;s simply not how type classes work. Typically when people want to do things like this, it&#39;s because they hope to save some typing here and there; some context as to what you want to achieve would help."}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510593373, "post_id": 47267851, "comment_id": 81490673, "body": "@Wil Ness, yes you understood what I aimed to ask"}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510593531, "post_id": 47267851, "comment_id": 81490767, "body": "@user2407038 : no context really, just to help me progressing and understanding haskell tricks;"}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510599387, "post_id": 47270968, "comment_id": 81493914, "body": "could you please show how can I map <code>(*2)</code> on the numbers inside <code>[[[1,2]], [[3],[4,5]]]</code> with <code>Compose</code>? I know I can do this with <code>(fmap.fmap.fmap)</code> simply."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510600324, "post_id": 47270968, "comment_id": 81494408, "body": "@WillNess, that&#39;s not really what <code>Compose</code> is good at if you&#39;re just doing it once, but ok.  <code>getCompose . getCompose . fmap (*2) . Compose . Compose</code>"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510600711, "post_id": 47270968, "comment_id": 81494622, "body": "thanks. I was sure I tried something similar and it didn&#39;t work. :) thanks a lot!"}], "tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 2, "last_activity_date": 1510600394, "last_edit_date": 1510600394, "creation_date": 1510597108, "answer_id": 47270968, "question_id": 47267851, "link": "https://stackoverflow.com/questions/47267851/having-a-custom-fmap-traversing-until-non-functor-type-is-found/47270968#47270968", "title": "Having a custom fmap traversing until non Functor type is found", "body": "<p>You are looking for a function:</p>\n\n<pre><code>rfmap :: (a -&gt; b) -&gt; F a -&gt; F b\n</code></pre>\n\n<p>where <code>F</code> is some arbitrary \"context\" of <code>a</code>, which may be quite sophisticated.  E.g. one specialization would be:</p>\n\n<pre><code>rfmap :: (a -&gt; b) -&gt; Maybe (Int -&gt; Either Bool a) -&gt; Maybe (Int -&gt; Either Bool b)\n</code></pre>\n\n<p>We need the typechecker to figure out that <code>F = Maybe (Int -&gt; Either Bool _)</code>.  This is not as easy as <code>fmap</code>, whose argument is a type constructor applied to a variable</p>\n\n<pre><code>fmap :: (a -&gt; b) -&gt; Compose Maybe (Either Bool) a -&gt; Compose Maybe (Either Bool) b\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^      ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>and is easily found, because type constructors are injective.</p>\n\n<p><code>rfmap</code> needs to deal with some tricky ambiguities. Consider:</p>\n\n<pre><code>rfmap id (Just [42])\n</code></pre>\n\n<p>Which specialization should we choose?</p>\n\n<pre><code>rfmap :: (Int -&gt; Int) -&gt; Maybe [Int] -&gt; Maybe [Int]\nrfmap :: ([Int] -&gt; [Int]) -&gt; Maybe [Int] -&gt; Maybe [Int]\nrfmap :: (Maybe [Int] -&gt; Maybe [Int]) -&gt; Maybe [Int] -&gt; Maybe [Int]\n</code></pre>\n\n<p>That is, do we consider the functor <code>Maybe _</code> or <code>Maybe (Int -&gt; _)</code>, or even the identity functor <code>_</code>?  You probably want to say \"as deep as possible\", but alas, that interferes with polymorphism:</p>\n\n<pre><code>f :: a -&gt; Maybe a\nf x = rfmap id (Just x)\n</code></pre>\n\n<p>You probably want this to just be one <code>fmap</code>, because going deeper doesn't typecheck. However if we pass <code>f [42]</code> then it's the same as the expression above which goes down two by the \"as deep as possible\" rule -- so this is something like like a violation of referential transparency (I wouldn't consider it a full violation because there is hidden type-directed information that might differ).</p>\n\n<p>Nevermind that there might be a <code>Num</code> instance for a functor, e.g. <code>Num a =&gt; Num (Vector a)</code>, which would mean that <code>[42]</code> is actually <em>more</em> than two levels deep.</p>\n\n<p>So there are a lot of hard questions that make something like <code>rfmap</code> unlikely to have a well-behaved implementation.</p>\n\n<p>As usual, <em>if</em> you give up polymorphism (which is a terrible idea), <a href=\"https://github.com/luqui/experiments/blob/master/rfmap.hs\" rel=\"nofollow noreferrer\">you can hack something together with typeclasses</a>.  It also has some other problems.</p>\n\n<p>I would recommend against expecting any solution to be usable.  It's the kind of thing that's not very compatible with Haskell's type system.</p>\n\n<p>As far as alternatives:</p>\n\n<ul>\n<li>If you are writing a single instance and just annoyed with all the <code>fmap</code>s, look at <a href=\"http://conal.net/blog/posts/semantic-editor-combinators\" rel=\"nofollow noreferrer\">semantic editor combinators</a> for a nice way to think about it.</li>\n<li>If you are making abstractions (in the sense of a type w/ operations) which are just nested functors and annoyed by the tedious reimplementation of <code>fmap = fmap.fmap.fmap</code>, then using <a href=\"https://hackage.haskell.org/package/transformers-0.3.0.0/docs/Data-Functor-Compose.html\" rel=\"nofollow noreferrer\"><code>Compose</code></a> is the way to go.</li>\n</ul>\n"}], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47270968, "answer_count": 1, "score": 1, "last_activity_date": 1510600394, "creation_date": 1510586894, "question_id": 47267851, "link": "https://stackoverflow.com/questions/47267851/having-a-custom-fmap-traversing-until-non-functor-type-is-found", "title": "Having a custom fmap traversing until non Functor type is found", "body": "<p>In my learning curve of Haskell, I am wondering if it possible to implement a custom fmap function, fmap' , that would \"apply\" until a non Functor is found. </p>\n\n<p>For example; with fmap , one has to write </p>\n\n<pre><code>fmap (fmap (*2)) [[1,2] , [ 3,4 ,5]]\n[[2,4],[6,8,10]]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>fmap (fmap (*2)) [Just 1, Just 2]\n[Just 2,Just 4]\n</code></pre>\n\n<p>The idea is to write </p>\n\n<pre><code>fmap' (*2) [[1,2] , [3,4,5]]\nfmap' (*2) [Just 1 , Just 2]\n</code></pre>\n\n<p>to get the same result as above.</p>\n\n<p>My current understanding is that it is not possible because fmap' and fmap do not have the same signature as </p>\n\n<pre><code>:t fmap (fmap) \nfmap (fmap)\n  :: (Functor f2, Functor f1) =&gt; f1 (a -&gt; b) -&gt; f1 (f2 a -&gt; f2 b)\n</code></pre>\n"}, {"tags": ["variables", "haskell", "syntax", "reference"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510585461, "post_id": 47267254, "comment_id": 81485330, "body": "If you just have two clauses, you just need <code>if something then something else something</code> instead of another if. If you&#39;ve already read the ioref then you probably want to use writeIORef. Furthermore, are you sure you need an IORef? Quite often it can be done a much better way."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510585597, "post_id": 47267254, "comment_id": 81485415, "body": "Please give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If you have parse errors, you&#39;re likely not using <code>do</code> syntax properly."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510586241, "post_id": 47267254, "comment_id": 81485866, "body": "This looks like you want to write <i>imperative</i> programs in Haskell (functional language). Although this is of course possible, usually it is a very bad idea to do so. You also do not provide an <code>else</code> for the last <code>if</code> case. It is also usually an anti-pattern to use <code>(!!)</code>, since it is a non-total (and for arbitrary index inefficient) function."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510588005, "post_id": 47267254, "comment_id": 81487100, "body": "@leftaroundabout I can&#39;t give a full MCVE here because it&#39;s part of an online game"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510588246, "post_id": 47267254, "comment_id": 81487276, "body": "@WillemVanOnsem You&#39;re right that I am trying to write imperative style -- it&#39;s because I don&#39;t know how to write my desired program using non-imperative style. Have literally wasted like 4 days trying to do that with no progress -- so until I can finish the problem / see how other people did it / learn from that, I&#39;m cheesing it with IORefs."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510588318, "post_id": 47267254, "comment_id": 81487323, "body": "@user8930358: usually if you want to iterate over something, one uses recursion, usually instead of (chained) <code>if</code>-<code>then</code>-<code>else</code>s, one uses guards."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510588523, "post_id": 47267254, "comment_id": 81487460, "body": "@user8930358: In order to help you I think it is better to first specify the problem you are aiming to solve. Right now you are only giving a program. This is basically the XY-problem. Based on your description, there is no way to show how to implement things in a better way, since we do not know what you aim to do."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510588607, "post_id": 47267254, "comment_id": 81487504, "body": "@WillemVanOnsem I am trying to beat this challenge using Haskell: <a href=\"https://www.codingame.com/ide/puzzle/shadows-of-the-knight-episode-1\" rel=\"nofollow noreferrer\">codingame.com/ide/puzzle/shadows-of-the-knight-episode-1</a> I already have a working algorithm and everything and have completed this challenge in an imperative language or two, but I want to also complete it learning Haskell."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510588881, "post_id": 47267254, "comment_id": 81487692, "body": "<code>modifyIORef maxY (y_old - 1)</code> is syntactically valid (if not type correct) so if you get errors, you should include those errors and the steps required to  produce them. What you want is something like <code>if condition then modifyIORef maxY (subtract 1) else return ()</code> which roughly does the same thing as <code>if (condition) { maxY = maxY - 1 }</code> in an imperative language."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510589490, "post_id": 47267254, "comment_id": 81488106, "body": "@user2407038 Using that syntax introduced a huge slew of errors so I don&#39;t know if that&#39;s my issue (couldn&#39;t match expected type Int -&gt; Int with actual type Int, possible cause - is applied to too many arguments)"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510592543, "post_id": 47267254, "comment_id": 81490205, "body": "Sorry that you&#39;re having a frustrating experience, but I can only add to the chorus: the reason seems to be that you&#39;re working <i>against</i> the language, rather than <i>with</i> it. Haskell is so different from most other programming languages that <i>just coding something</i>, without really having learned the basic ideas, is bound to lead to big disappointment. I strongly recommend reading a book first."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510592873, "post_id": 47267254, "comment_id": 81490396, "body": "@user2407038 (gaah, can you guys please get some proper nicknames so SO&#39;s autocomplete works?) Your suggestion <code>modifyIORef maxY (subtract 1)</code> does something different from what the OP wants: <code>maxY \u27fb (y - 1)</code>, not <code>maxY \u27fb (maxY - 1)</code>."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510595789, "post_id": 47267254, "comment_id": 81491984, "body": "@leftaroundabout I&#39;ve been down that road like 4 times already with no luck. How do I work with the language then to solve a challenge like this? I don&#39;t even know what I need to be looking for. The problem constantly gives you inputs in a loop and you have to update your search space until you narrow in on the target."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510597764, "post_id": 47267254, "comment_id": 81493058, "body": "@user8930358 that shouldn&#39;t require IORefs, just a recursive \u201cloop\u201d where each input causes the function to call itself with modified argument. A better alternative would be to take the entire input from a <a href=\"http://hackage.haskell.org/package/conduit\" rel=\"nofollow noreferrer\">conduit</a>, then you hardly need to worry about control flow at all."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510599024, "post_id": 47267254, "comment_id": 81493718, "body": "@leftaroundabout How would I set up such a recursion? I&#39;m not asking you to solve the problem (I&#39;ve already solved it in other languages and know what to set up), but how I&#39;d carry all these updated variables along in a recursion and output commands based on input. I don&#39;t think I can use a conduit since an output is expected after each input is received (I can&#39;t receive all the inputs at once and then output stuff)."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510602077, "post_id": 47267254, "comment_id": 81495401, "body": "Being able to process input piece-by-piece and responding dynamically is what conduits are all about. So, that wouldn&#39;t be a problem. Still, I think for learning purpose a manual-recursion approach is better. \u2014 We can show you how to do that, but you&#39;d need to narrow it down to some simple, complete, well-specified use scenario, else it&#39;s <i>too broad</i> for SO. That would probably something for a new question. Whereas <i>this</i> question could be salvaged if you completed the code so there is on concrete problem we can discuss. <a href=\"https://stackoverflow.blog/2010/01/04/stack-overflow-where-we-hate-fun/\">stackoverflow.blog/2010/01/04/stack-overflow-where-we-hate-f&zwnj;&#8203;un</a>"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1510603818, "post_id": 47267254, "comment_id": 81496387, "body": "@leftaroundabout I updated the post with my full code so far. Please note that the logic is sound (i.e. the intended layout of my code solves the problem in terms of  how it&#39;s trying to update the x&#39;s and y&#39;s) but the syntax / use of Haskell is incorrect."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "edited": false, "score": 0, "creation_date": 1510720641, "post_id": 47284524, "comment_id": 81550087, "body": "This was extraordinarily helpful -- thank you. As an aside the compiler was giving me an error about the pattern matching being nonexhaustive but it worked after I added a case to each <code>_ -&gt; (maxY, minY)</code> for example, is this the right practice?"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "edited": false, "score": 0, "creation_date": 1510720795, "post_id": 47284524, "comment_id": 81550129, "body": "So the general idea is that we don&#39;t change variables -- we recurse / call new functions with modified arguments and that&#39;s how we update state?"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 0, "last_activity_date": 1510658631, "creation_date": 1510658631, "answer_id": 47284524, "question_id": 47267254, "link": "https://stackoverflow.com/questions/47267254/how-do-i-update-the-values-of-these-int-refs-haskell/47284524#47284524", "title": "How do I update the values of these Int refs (Haskell)?", "body": "<p>First a bit of good style:</p>\n\n<pre><code>    ...\n    input_line &lt;- getLine\n    let input = words input_line\n    let w = read (input!!0) :: Int -- width of the building.\n    let h = read (input!!1) :: Int -- height of the building.\n</code></pre>\n\n<p>This works, but it's awkward. You build up a list and give it a name, only to access individual elements, parse them one-by-one and give them new names. Why not just</p>\n\n<pre><code>    input_line &lt;- getLine\n    let [w,h] = map read (words input_line) :: [Int]\n</code></pre>\n\n<p>In fact, you don't even need <code>input_line</code>, nor the signatures (provided you later <em>use</em> <code>w</code> and <code>h</code>, so their types are unambiguous). I.e., the following also does the trick:</p>\n\n<pre><code>    [w,h] &lt;- map read . words &lt;$&gt; getLine\n</code></pre>\n\n<p>Likewise,</p>\n\n<pre><code>    [x\u2080,y\u2080] &lt;- map read . words &lt;$&gt; getLine\n</code></pre>\n\n<p>The real problem with your code in <code>loop</code> is that you try to use <code>if</code> as a procedural control-flow statement. Haskell <em>doesn't have control flow</em>, it only has expressions. Hence Haskell's <code>if</code> is actually very different from the <code>if</code> statement in imperative languages, it's more like the <code>? :</code> operator. One thing you could do is complete these conditionals to</p>\n\n<pre><code>    if (bombdir!!0 == 'U')\n     then writeIORef maxY (y_old - 1)\n     else pure ()\n</code></pre>\n\n<p>...<code>pure ()</code> being the no-op in a pseudo-imperative (monadic) <code>do</code> block. But there's a standard combinator for this particular construct, <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Monad.html#v:when\" rel=\"nofollow noreferrer\"><code>when</code></a>. It's actually just a library function, but behaves almost exactly like <code>if</code> in imperative languages. With that, you could make it</p>\n\n<pre><code>    when (bombdir!!0 == 'U') $ writeIORef maxY (y_old - 1)\n</code></pre>\n\n<p>But I wouldn't recommend it. You're again do awkward list-element accessing. A much nicer way of deciding what to do depending on values of list-elements is directly pattern-matching them with a <code>case</code> expression:</p>\n\n<pre><code>loop :: Int -&gt; Int -&gt; Int -&gt; Int\n -&gt; IORef Int -&gt; IORef Int -&gt; IORef Int -&gt; IORef Int-&gt; IORef Int -&gt; IORef Int -&gt; IO ()\nloop x\u2080 y\u2080 w h x y minX maxX minY maxY = do\n\n    bombdir &lt;- getLine  -- no need to first name it `input_line`\n\n    x_old &lt;- readIORef x \n    y_old &lt;- readIORef y\n\n    case bomdir of\n      ('U':_) -&gt; writeIORef maxY (y_old - 1)\n      ('D':_) -&gt; writeIORef minY (y_old + 1)\n      _       -&gt; pure ()\n\n    case reverse bombdir of\n      ('L':_) -&gt; writeIORef maxX (x_old - 1)\n      ('R':_) -&gt; writeIORef minX (x_old + 1)\n      _       -&gt; pure ()\n</code></pre>\n\n<p>Then, you attempt to do arithmetic directly on IORefs, instead of on pure values. This is generally eschewed; what you'd actually need to write is</p>\n\n<pre><code>    writeIORef x =&lt;&lt; do\n        xmin &lt;- readIORef minX\n        xmax &lt;- readIORef maxX\n        pure $ (xmin + xmax) / 2\n</code></pre>\n\n<p>I think we agree that this looks horrible, but it works. A more concise way of writing it would be</p>\n\n<pre><code>    writeIORef x =&lt;&lt; (/2) &lt;$&gt; ((+) &lt;$&gt; readIORef minX &lt;*&gt; readIORef maxX)\n</code></pre>\n\n<p>As I already commented, you fortunately don't need those ugly IORefs at all. Just make \u201cnew versions\u201d of your variables to pass in the recursive call:</p>\n\n<pre><code>loop :: Int -&gt; Int -&gt; Int -&gt; Int -&gt; Int -&gt; Int -&gt; Int -&gt; Int-&gt; Int -&gt; Int -&gt; IO ()\nloop x\u2080 y\u2080 w h x y minX maxX minY maxY = do\n    bombdir &lt;- input_line\n\n    let (maxY',minY') = case bombdir of\n          ('U':_) -&gt; (y - 1, minY )\n          ('D':_) -&gt; (maxY , y + 1)\n        (maxX',minX') = case reverse bombdir of\n          ('L':_) -&gt; (x - 1, minX )\n          ('R':_) -&gt; (maxX , x + 1)\n\n        x' = (minX' + maxX') / 2\n        y' = (minY' + maxY') / 2\n\n    printf \"%d %d\" x' y'\n    loop x\u2080 y\u2080 w h x' y' minX' maxX' minY' maxY'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 47284524, "answer_count": 1, "score": 0, "last_activity_date": 1510658631, "creation_date": 1510585110, "last_edit_date": 1510603807, "question_id": 47267254, "link": "https://stackoverflow.com/questions/47267254/how-do-i-update-the-values-of-these-int-refs-haskell", "title": "How do I update the values of these Int refs (Haskell)?", "body": "<p>I have some variables like so:</p>\n\n<pre><code>let y0 = read (input!!0) :: Int\nlet h = read (input!!1) :: Int\ny &lt;- newIORef y0\nminY &lt;- newIORef 0 \nmaxY &lt;- newIORef (h - 1) \n</code></pre>\n\n<p>And later I have</p>\n\n<pre><code>y_old &lt;- readIORef y\n\nif (some_string!!0 == 'U') then   \n    maxY = (y_old - 1)       --I don't think this is working\nelse if (some_string!!0 == 'D') then\n    minY = (y_old + 1)       --I don't think this is working\n</code></pre>\n\n<p>I am basically reading the references into some local ints and then trying to update the references based on criteria.</p>\n\n<p>I also tried <code>modifyIORef maxY (y_old - 1)</code> but this doesn't work either. The compiler is only telling me \"parse error\" or \"syntax error\" which is not helpful.</p>\n\n<p>My full code:</p>\n\n<pre><code>import System.IO\nimport Control.Monad\nimport Data.IORef\nimport Text.Printf\n\nmain :: IO ()\nmain = do\n    hSetBuffering stdout NoBuffering -- DO NOT REMOVE\n\n    -- Auto-generated code below aims at helping you parse\n    -- the standard input according to the problem statement.\n\n    input_line &lt;- getLine\n    let input = words input_line\n    let w = read (input!!0) :: Int -- width of the building.\n    let h = read (input!!1) :: Int -- height of the building.\n    input_line &lt;- getLine\n    let n = read input_line :: Int -- maximum number of turns before game over.\n    input_line &lt;- getLine\n    let input = words input_line\n    let x0 = read (input!!0) :: Int\n    let y0 = read (input!!1) :: Int\n    x &lt;- newIORef x0\n    y &lt;- newIORef y0\n    minX &lt;- newIORef 0 \n    maxX &lt;- newIORef (w - 1) \n    minY &lt;- newIORef 0 \n    maxY &lt;- newIORef (h - 1) \n    loop x0 y0 w h x y minX maxX minY maxY\n\nloop :: Int -&gt; Int -&gt; Int -&gt; Int -&gt; IORef Int -&gt; IORef Int -&gt; IORef Int -&gt; IORef Int-&gt; IORef Int -&gt; IORef Int -&gt; IO ()\nloop x0 y0 w h x y minX maxX minY maxY = do\n    input_line &lt;- getLine\n    let bombdir = input_line :: String -- the direction of the bombs from batman's current location (U, UR, R, DR, D, DL, L or UL)\n\n    x_old &lt;- readIORef x \n    y_old &lt;- readIORef y\n\n    if (bombdir!!0 == 'U') then\n        writeIORef maxY (y_old - 1)\n    if (bombdir!!0 == 'D') then\n        writeIORef minY (y_old + 1)\n\n    if (bombdir!!(bombdir.length-1) == 'L') then\n        writeIORef maxX (x_old - 1)\n    if (bombdir!!(bombdir.length-1) == 'R') then\n        writeIORef minX (x_old + 1)\n\n\n    x = (minX + maxX) / 2\n    y = (minY + maxY) / 2\n\n    x_out &lt;- readIORef x \n    y_out &lt;- readIORef y\n\n\n    printf \"%d %d\" x_out y_out\n    loop x0 y0 w h x y minX maxX minY maxY\n</code></pre>\n"}, {"tags": ["parsing", "haskell", "tuples"], "comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1510583949, "post_id": 47266850, "comment_id": 81484290, "body": "Of course it is possible, but remember always first add some code showing your attempt and effort, provide more context, (the 3,3 comes from a text file? input from the user?), if you don&#39;t, users will downvote the question..."}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1510584200, "post_id": 47266850, "comment_id": 81484478, "body": "It&#39;s a terminal input, the problem isn&#39;t how I get the info.. but rather that I can do it with any String, but if you would like a context I have a command function that take a couple of commands that I&#39;m then callin in my main. And one of my functions need a input (x,y) from the command d 3 3 for example."}, {"owner": {"reputation": 765, "user_id": 3316409, "user_type": "registered", "profile_image": "https://graph.facebook.com/719585406/picture?type=large", "display_name": "dvaergiller", "link": "https://stackoverflow.com/users/3316409/dvaergiller"}, "edited": false, "score": 1, "creation_date": 1510585035, "post_id": 47266850, "comment_id": 81485063, "body": "In that case I guess:  &quot;stringtup = (&#91;a, b] -&gt; (a, b)) . map read . words&quot;  But that throws exception if the format is wrong"}, {"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510585275, "post_id": 47266850, "comment_id": 81485231, "body": "thank you, so much!"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510584746, "post_id": 47267080, "comment_id": 81484866, "body": "stringtup :: String -&gt; (Int, Int) stringtup s = do   [(n, s&#39;)] &lt;- return $ reads s   [(n, _)] &lt;- return $ reads s&#39;   return (n, s) like this? I get an error saying actual type (Int, (t0, String))"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "edited": false, "score": 0, "creation_date": 1510584847, "post_id": 47267080, "comment_id": 81484935, "body": "Similar to that. Provided you properly lay it out in the <code>do</code> block. But you need to give both the <i>parsed</i> values as the final result."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 2, "last_activity_date": 1510584564, "creation_date": 1510584564, "answer_id": 47267080, "question_id": 47266850, "link": "https://stackoverflow.com/questions/47266850/haskell-parse-string-of-ints-to-tuple-int-int/47267080#47267080", "title": "Haskell Parse string of Ints to tuple (Int,Int)", "body": "<p><code>reads</code> only parses one value (if possible), and gives it back as well as the rest of the <em>input string</em>. So,</p>\n\n<pre><code>    [(n, _)] &lt;- return $ reads s\n</code></pre>\n\n<p>works and will, for <code>\"3 3\"</code> indeed have <code>n\u22613</code>.</p>\n\n<p>But the other number still needs to be parsed too. So what you'd actually do is first bind something like</p>\n\n<pre><code>    [(n, s')] &lt;- return $ reads s\n</code></pre>\n\n<p>and then parse the other number in the same fashion from <code>s'</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 7618600, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e78a3aacdad2310fbe5f263f1f754b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruubel", "link": "https://stackoverflow.com/users/7618600/ruubel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 47267080, "answer_count": 1, "score": 1, "last_activity_date": 1510584564, "creation_date": 1510583869, "last_edit_date": 1510584150, "question_id": 47266850, "link": "https://stackoverflow.com/questions/47266850/haskell-parse-string-of-ints-to-tuple-int-int", "title": "Haskell Parse string of Ints to tuple (Int,Int)", "body": "<p>I would like to parse a string in form 3 3 from input user to a tuple (3,3) is this possible?</p>\n\n<pre><code>stringtup :: String -&gt; Maybe (Int, Int)\nstringtup s = do\n[(n, [c])] &lt;- return $ reads s\nreturn (n, c)\n</code></pre>\n\n<p>this is my attempt but it does't work..</p>\n"}, {"tags": ["haskell", "recursion", "tree"], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1510584692, "last_edit_date": 1510584692, "creation_date": 1510584299, "answer_id": 47266993, "question_id": 47266691, "link": "https://stackoverflow.com/questions/47266691/can-i-how-can-i-access-the-int-value-of-the-next-node-tree-recursion/47266993#47266993", "title": "(Can I?) How can I access the int value of the next node (tree recursion)", "body": "<p>Of course you can, instead of put variables like left and right, use the constructors again:</p>\n\n<blockquote>\n  <p>Edit, I forget the case of Leaf, it has also an int:</p>\n</blockquote>\n\n<pre><code>data Tree = Node Tree Int Tree | Leaf Int\n\nexampleSumNodes (Node left x right) = (treeToInt left) + x + (treeToInt right)\n\ntreeToInt (Node _ n _) = n\ntreeToInt (Leaf n ) = n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1510584711, "post_id": 47267036, "comment_id": 81484846, "body": "Great! thanks for sharing, I forget the case of leaf, it has also an int, it is a plus one"}], "tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": true, "score": 3, "last_activity_date": 1510584425, "creation_date": 1510584425, "answer_id": 47267036, "question_id": 47266691, "link": "https://stackoverflow.com/questions/47266691/can-i-how-can-i-access-the-int-value-of-the-next-node-tree-recursion/47267036#47267036", "title": "(Can I?) How can I access the int value of the next node (tree recursion)", "body": "<p>Yes, you can write a function that returns the integer at the top node:</p>\n\n<pre><code>getInt (Node _ i _) = i\ngetInt (Leaf i) = i\n</code></pre>\n\n<p>E.g.</p>\n\n<pre><code>Prelude&gt; getInt $ Leaf 42\n42\nPrelude&gt; getInt $ Node (Leaf 42) 123 (Leaf 1337)\n123\n</code></pre>\n"}], "owner": {"reputation": 1601, "user_id": 3258708, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WBG4I.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3258708/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 47267036, "answer_count": 2, "score": 1, "last_activity_date": 1510584692, "creation_date": 1510583386, "question_id": 47266691, "link": "https://stackoverflow.com/questions/47266691/can-i-how-can-i-access-the-int-value-of-the-next-node-tree-recursion", "title": "(Can I?) How can I access the int value of the next node (tree recursion)", "body": "<p>So I have a tree defined as follows:</p>\n\n<pre><code>data Tree = Node Tree Int Tree | Leaf Int\n</code></pre>\n\n<p>The <code>Int</code> for a <code>Node</code> in this case is the value at that <code>Node</code>. I am trying to check that a tree is balanced, and that the tree is increasing as it's traversed left to right.</p>\n\n<p>To do so I have a recursive function that takes a <code>(Node left x right)</code> and checks that the difference in height of <code>left</code> and <code>right</code> (the nodes below it) is no more than one. I then call balanced again for left and right.</p>\n\n<p>Is it possible to access the <code>Int</code> value of <code>left</code> and <code>right</code>?</p>\n"}, {"tags": ["haskell", "ghc", "ghci"], "comments": [{"owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "edited": false, "score": 0, "creation_date": 1510580081, "post_id": 47265489, "comment_id": 81481739, "body": "@WillNess I try but cant find the answer from <code>:help</code>. If you have answer please write it for me."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510585394, "post_id": 47265489, "comment_id": 81485292, "body": "for what little I know about this, I arrived at by trial and error. Sorry for misreading your question at first."}, {"owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 0, "creation_date": 1510606295, "post_id": 47265489, "comment_id": 81497678, "body": "Do you need the list of all unambiguous prefixes? List of commands by how common they are? Or anything else?"}, {"owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "reply_to_user": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 0, "creation_date": 1510644131, "post_id": 47265489, "comment_id": 81510071, "body": "@Yuras Basically I just want to know what <code>?</code> would be. Anything other than that would be a plus."}], "answers": [{"tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": false, "score": 4, "last_activity_date": 1510620252, "creation_date": 1510620252, "answer_id": 47275890, "question_id": 47265489, "link": "https://stackoverflow.com/questions/47265489/is-there-a-list-of-ghci-abbreviated-commands/47275890#47275890", "title": "Is there a list of ghci abbreviated commands?", "body": "<p>I checked <a href=\"https://github.com/ghc/ghc/blob/master/ghc/GHCi/UI.hs\" rel=\"nofollow noreferrer\">ghc source file</a>, and found stdin input is processed by</p>\n\n<pre><code>runGHIC -&gt; runGHCiInput -&gt; ghciCompleteWord -&gt; lookupCompletion -&gt; lookupCommand'\n</code></pre>\n\n<p>At the end of <a href=\"https://github.com/ghc/ghc/blob/e3ec2e7ae94524ebd111963faf34b84d942265b4/ghc/GHCi/UI.hs#L1238\" rel=\"nofollow noreferrer\">lookupCommand</a></p>\n\n<pre><code>  -- first, look for exact match (while preferring macros); then, look\n  -- for first prefix match (preferring builtins), *unless* a macro\n  -- overrides the builtin; see #8305 for motivation\n  return $ lookupExact str xcmds &lt;|&gt;\n           lookupExact str ghci_cmds &lt;|&gt;\n           (builtinPfxMatch &gt;&gt;= \\c -&gt; lookupExact (cmdName c) xcmds) &lt;|&gt;\n           builtinPfxMatch &lt;|&gt;\n           lookupPrefix str xcmds\n</code></pre>\n\n<p>Basically, it first lookup exact match, then prefix match in order. So for normal <code>:xxx</code> command, it follows <code>ghci_cmds</code> order, which is <a href=\"https://github.com/ghc/ghc/blob/e3ec2e7ae94524ebd111963faf34b84d942265b4/ghc/GHCi/UI.hs#L160\" rel=\"nofollow noreferrer\">availableCommands</a> in <code>GhciSettings</code>, i.e.</p>\n\n<pre><code>  (\"?\",         keepGoing help,                 noCompletion),\n  (\"add\",       keepGoingPaths addModule,       completeFilename),\n  (\"abandon\",   keepGoing abandonCmd,           noCompletion),\n  (\"break\",     keepGoing breakCmd,             completeIdentifier),\n  (\"back\",      keepGoing backCmd,              noCompletion),\n  (\"browse\",    keepGoing' (browseCmd False),   completeModule),\n  (\"browse!\",   keepGoing' (browseCmd True),    completeModule),\n  (\"cd\",        keepGoing' changeDirectory,     completeFilename),\n  (\"check\",     keepGoing' checkModule,         completeHomeModule),\n  (\"continue\",  keepGoing continueCmd,          noCompletion),\n  (\"cmd\",       keepGoing cmdCmd,               completeExpression),\n  (\"ctags\",     keepGoing createCTagsWithLineNumbersCmd, completeFilename),\n  (\"ctags!\",    keepGoing createCTagsWithRegExesCmd, completeFilename),\n  (\"def\",       keepGoing (defineMacro False),  completeExpression),\n  (\"def!\",      keepGoing (defineMacro True),   completeExpression),\n  (\"delete\",    keepGoing deleteCmd,            noCompletion),\n  (\"edit\",      keepGoing' editFile,            completeFilename),\n  (\"etags\",     keepGoing createETagsFileCmd,   completeFilename),\n  (\"force\",     keepGoing forceCmd,             completeExpression),\n  (\"forward\",   keepGoing forwardCmd,           noCompletion),\n  (\"help\",      keepGoing help,                 noCompletion),\n  (\"history\",   keepGoing historyCmd,           noCompletion),\n  (\"info\",      keepGoing' (info False),        completeIdentifier),\n  (\"info!\",     keepGoing' (info True),         completeIdentifier),\n  (\"issafe\",    keepGoing' isSafeCmd,           completeModule),\n  (\"kind\",      keepGoing' (kindOfType False),  completeIdentifier),\n  (\"kind!\",     keepGoing' (kindOfType True),   completeIdentifier),\n  (\"load\",      keepGoingPaths loadModule_,     completeHomeModuleOrFile),\n  (\"load!\",     keepGoingPaths loadModuleDefer, completeHomeModuleOrFile),\n  (\"list\",      keepGoing' listCmd,             noCompletion),\n  (\"module\",    keepGoing moduleCmd,            completeSetModule),\n  (\"main\",      keepGoing runMain,              completeFilename),\n  (\"print\",     keepGoing printCmd,             completeExpression),\n  (\"quit\",      quit,                           noCompletion),\n  (\"reload\",    keepGoing' reloadModule,        noCompletion),\n  (\"reload!\",   keepGoing' reloadModuleDefer,   noCompletion),\n  (\"run\",       keepGoing runRun,               completeFilename),\n  (\"script\",    keepGoing' scriptCmd,           completeFilename),\n  (\"set\",       keepGoing setCmd,               completeSetOptions),\n  (\"seti\",      keepGoing setiCmd,              completeSeti),\n  (\"show\",      keepGoing showCmd,              completeShowOptions),\n  (\"showi\",     keepGoing showiCmd,             completeShowiOptions),\n  (\"sprint\",    keepGoing sprintCmd,            completeExpression),\n  (\"step\",      keepGoing stepCmd,              completeIdentifier),\n  (\"steplocal\", keepGoing stepLocalCmd,         completeIdentifier),\n  (\"stepmodule\",keepGoing stepModuleCmd,        completeIdentifier),\n  (\"type\",      keepGoing' typeOfExpr,          completeExpression),\n  (\"trace\",     keepGoing traceCmd,             completeExpression),\n  (\"undef\",     keepGoing undefineMacro,        completeMacro),\n  (\"unset\",     keepGoing unsetOptions,         completeSetOptions),\n  (\"where\",     keepGoing whereCmd,             noCompletion)\n</code></pre>\n\n<p>so <code>:c</code> means <code>:cd</code>, <code>:d</code> means <code>:def</code>, follow the order.</p>\n"}], "owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1510620252, "creation_date": 1510579798, "last_edit_date": 1510580405, "question_id": 47265489, "link": "https://stackoverflow.com/questions/47265489/is-there-a-list-of-ghci-abbreviated-commands", "title": "Is there a list of ghci abbreviated commands?", "body": "<p>The <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ghci.html#ghci-commands\" rel=\"nofollow noreferrer\">document</a> wrote,</p>\n\n<blockquote>\n  <p>The command name may be abbreviated, with ambiguities being resolved in favour of the more commonly used commands</p>\n</blockquote>\n\n<p>but I can't find exact list.</p>\n\n<p>I know some of them but I want to know if there is the full list available. The command with <code>?</code> means ther are more than one suggesstions when tab-completion.</p>\n\n<pre><code>:a -&gt; ?\n:b -&gt; ?\n:c -&gt; ?\n:de -&gt; ?\n:e -&gt; :edit\n:for -&gt; ?\n:h -&gt; :help\n:i -&gt; :info\n:l -&gt; :load\n:m -&gt; :module\n:r -&gt; :reload\n:s -&gt; :script\n:t -&gt; :type\n:un -&gt; ?\n:where -&gt; undocumented, found by completion, don't know what it is for\n</code></pre>\n"}, {"tags": ["haskell", "replace", "pattern-matching", "bytestring"], "comments": [{"owner": {"reputation": 3587, "user_id": 7824574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a639be4c9ecc139065fbc6b12b87e6a9?s=128&d=identicon&r=PG&f=1", "display_name": "typetetris", "link": "https://stackoverflow.com/users/7824574/typetetris"}, "edited": false, "score": 2, "creation_date": 1510582746, "post_id": 47265308, "comment_id": 81483443, "body": "Use <code>Data.ByteString.Char8</code> to get rid of the nasty <code>Word8</code>, <code>Char</code> conversions and back. Shouldn&#39;t alter performance according to <a href=\"https://hackage.haskell.org/package/bytestring-0.10.8.2/docs/Data-ByteString-Char8.html\" rel=\"nofollow noreferrer\">Data.ByteString.Char8 first sentence</a>. Otherwise <code>BS.split</code> doesn&#39;t really help, as you also want to repace <code>\\n\\r</code> combinations? I would do a recursive function with <code>BS.span (&#47;=&#39;\\n&#39;)</code>. Inelegant, but hopefully not soo slow."}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "edited": false, "score": 0, "creation_date": 1510597740, "post_id": 47265308, "comment_id": 81493041, "body": "Thanks, that works! If you write it up as an answer I&#39;ll accept"}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 3587, "user_id": 7824574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a639be4c9ecc139065fbc6b12b87e6a9?s=128&d=identicon&r=PG&f=1", "display_name": "typetetris", "link": "https://stackoverflow.com/users/7824574/typetetris"}, "edited": false, "score": 0, "creation_date": 1510640475, "post_id": 47265308, "comment_id": 81508389, "body": "Gotcha. I can&#39;t edit the previous comment, so I hope it won&#39;t be too confusing to put it here: @krom"}], "answers": [{"tags": [], "owner": {"reputation": 3587, "user_id": 7824574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a639be4c9ecc139065fbc6b12b87e6a9?s=128&d=identicon&r=PG&f=1", "display_name": "typetetris", "link": "https://stackoverflow.com/users/7824574/typetetris"}, "is_accepted": true, "score": 2, "last_activity_date": 1510651934, "creation_date": 1510651934, "answer_id": 47282082, "question_id": 47265308, "link": "https://stackoverflow.com/questions/47265308/replace-newlines-in-bytestring/47282082#47282082", "title": "Replace newlines in ByteString", "body": "<p>Use <code>Data.ByteString.Char8</code> to get rid of the nasty <code>Word8</code>, <code>Char</code> conversions you otherwise have to do. According to <a href=\"https://hackage.haskell.org/package/bytestring-0.10.8.2/docs/Data-ByteString-Char8.html\" rel=\"nofollow noreferrer\">Data.ByteString.Char8 first sentence</a> performance shouldn't be altered.</p>\n\n<p>Additionally use <code>B.span</code> instead of <code>B.split</code> as you want to replace also <code>\\n\\r</code> combinations and not only <code>\\n</code>.</p>\n\n<p>My own (probably clumsy) attempt to do so:</p>\n\n<pre><code>module Test where\n\nimport Data.Monoid ((&lt;&gt;))\nimport Data.ByteString.Char8 (ByteString)\nimport qualified Data.ByteString.Char8 as B\nimport qualified Data.ByteString.Builder as Build\nimport qualified Data.ByteString.Lazy as LB\n\neatNewline :: ByteString -&gt; (Maybe Char, ByteString)\neatNewline string\n  | B.null string = (Nothing, string)\n  | B.head string == '\\n' &amp;&amp; B.null (B.tail string) = (Just ',', B.empty)\n  | B.head string == '\\n' &amp;&amp; B.head (B.tail string) /= '\\r' = (Just ',', B.drop 1 string)\n  | B.head string == '\\n' &amp;&amp; B.head (B.tail string) == '\\r' = (Just ',', B.drop 2 string)\n  | otherwise = (Nothing, string)\n\nreplaceNewlines :: ByteString -&gt; ByteString\nreplaceNewlines = LB.toStrict . Build.toLazyByteString . go mempty\n  where\n    go :: Build.Builder -&gt; ByteString -&gt; Build.Builder\n    go builder string = let (chunk, rest) = B.span (/= '\\n') string\n                            (c, rest1)    = eatNewline rest\n                            maybeComma    = maybe mempty Build.char8 c\n                        in if B.null rest1 then\n                             builder &lt;&gt; Build.byteString chunk &lt;&gt; maybeComma\n                           else\n                             go (builder &lt;&gt; Build.byteString chunk &lt;&gt; maybeComma) rest1\n</code></pre>\n\n<p>Hopefully the <code>mappend</code> for <code>Data.ByteString.Builder</code> isn't linear in the number of times <code>mappend</code> was already used for one of its operands, otherwise, there would be a quadratic alogrithm here.</p>\n"}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 47282082, "answer_count": 1, "score": 5, "last_activity_date": 1510651934, "creation_date": 1510579184, "question_id": 47265308, "link": "https://stackoverflow.com/questions/47265308/replace-newlines-in-bytestring", "title": "Replace newlines in ByteString", "body": "<p>I'd like a function that takes a ByteString and replaces newlines <code>\\n</code> and <code>\\n\\r</code> with commas, but can't think of a nice way to do it.</p>\n\n<pre><code>import qualified Data.ByteString as BS\nimport Data.Char (ord) \nimport Data.Word (Word8)\n\nendlWord8 = fromIntegral $ ord '\\n' :: Word8\n\nreplace :: BS.ByteString -&gt; BS.ByteString\n</code></pre>\n\n<p>I thought of using <code>BS.map</code> but can't see how since I can't pattern match on <code>Word8</code>'s. Another option would be <code>BS.split</code> and then join with Word8 commas, but that sounds slow and inelegant. Any ideas? </p>\n"}, {"tags": ["haskell", "pattern-matching"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510575449, "post_id": 47264165, "comment_id": 81478961, "body": "No, Haskell only supports <i>linear</i> pattern matching."}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510575492, "post_id": 47264165, "comment_id": 81478994, "body": "@WillemVanOnsem What would be opposed to <i>linear</i> pattern matching?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510575542, "post_id": 47264165, "comment_id": 81479020, "body": "first of all it is not clear at all how two parameters <i>should</i> be equal."}, {"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1510575619, "post_id": 47264165, "comment_id": 81479066, "body": "@WillemVanOnsem Okay I guess that is true, there would be some link to an <code>Eq</code> type class."}], "answers": [{"comments": [{"owner": {"reputation": 2719, "user_id": 566890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T0Csa.png?s=128&g=1", "display_name": "Markus1189", "link": "https://stackoverflow.com/users/566890/markus1189"}, "edited": false, "score": 0, "creation_date": 1510576483, "post_id": 47264419, "comment_id": 81479572, "body": "You can shorten it to two statements by checking the <code>==</code> case and using <code>otherwise</code> for the rest"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2719, "user_id": 566890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T0Csa.png?s=128&g=1", "display_name": "Markus1189", "link": "https://stackoverflow.com/users/566890/markus1189"}, "edited": false, "score": 0, "creation_date": 1510576700, "post_id": 47264419, "comment_id": 81479714, "body": "@Markus1189: but we use <code>otherwise</code> for the remaining parts implicitly. Of course we can perform a swap."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510581772, "post_id": 47264419, "comment_id": 81482843, "body": "@4castle: yes, I had not considered the specific case. Thanks."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1510581757, "last_edit_date": 1510581757, "creation_date": 1510576208, "answer_id": 47264419, "question_id": 47264165, "link": "https://stackoverflow.com/questions/47264165/match-two-equal-values-in-pattern-matching-in-haskell/47264419#47264419", "title": "Match two equal values in pattern matching in Haskell", "body": "<p>To answer your question: <em>no</em>, Haskell allows only <em>linear</em> pattern matching: this means that a variable can occur only once in the head of a clause.</p>\n\n<h1>Using <code>Eq</code></h1>\n\n<p>A more elegant solution is probably to let <strong><code>IOMode</code> derive from <code>Eq</code></strong>:</p>\n\n<pre><code>data IOMode = Read | Write | ReadWrite <b>deriving Eq</b></code></pre>\n\n<p>and then we can use the <code>(==) :: Eq a =&gt; a -&gt; a -&gt; a</code> function, and write it as:</p>\n\n<pre><code>instance Semigroup IOMode where\n   <b>a         &lt;&gt; b         | a == b = a</b>\n   ReadWrite &lt;&gt; _         = ReadWrite\n   _         &lt;&gt; ReadWrite = ReadWrite\n   Read      &lt;&gt; Write     = ReadWrite\n   Write      &lt;&gt; Read      = ReadWrite</code></pre>\n\n<p>But now a problem is that the Haskell compiler can not derive that we have covered all the cases: for the compiler <code>(==)</code> is a blackbox function, so that means that a compiler is conservative and does not know when <code>a == b</code> might fail. So perhaps we want another solution.</p>\n\n<h2>Reducing the amount of rules</h2>\n\n<p>The above still is quite redundant, since the operator is commutative, we can first check for equality, then test against some cases, and otherwise perform a swap:</p>\n\n<pre><code>instance Semigroup IOMode where\n   ReadWrite &lt;&gt; _         = ReadWrite\n   Read      &lt;&gt; Write     = ReadWrite\n   <b>a         &lt;&gt; b         | a == b = a</b>\n                          | otherwise = b &lt;&gt; a</code></pre>\n\n<p>In this case, we can fold it all together, since if <code>a /= b</code>, we know that the outcome is <code>ReadWrite</code>:</p>\n\n<pre><code>instance Semigroup IOMode where\n   a         &lt;&gt; b         | a == b = a\n                          | otherwise = <b>ReadWrite</b></code></pre>\n\n<h1>Using <em>wildcards</em></h1>\n\n<p>Another way to handle this is to cover all the cases that are different, and use wildcards for all the cases where <code>a == b</code>:</p>\n\n<pre><code>instance Semigroup IOMode where\n   ReadWrite &lt;&gt; _         = ReadWrite\n   _         &lt;&gt; ReadWrite = ReadWrite\n   Read      &lt;&gt; Write     = ReadWrite\n   Write     &lt;&gt; Read      = ReadWrite\n   a         &lt;&gt; _         = a</code></pre>\n\n<p>We know this will work since only the three instances that all cases where the first two parameters are different are covered by the definitions above.</p>\n\n<p>We can check this by writing an instance without the wildcards (if we enable warnings):</p>\n\n<pre><code>Prelude Data.Semigroup| instance Semigroup IOMode where\nPrelude Data.Semigroup|    ReadWrite &lt;&gt; _         = ReadWrite\nPrelude Data.Semigroup|    _         &lt;&gt; ReadWrite = ReadWrite\nPrelude Data.Semigroup|    Read      &lt;&gt; Write     = ReadWrite\nPrelude Data.Semigroup|    Write     &lt;&gt; Read      = ReadWrite\nPrelude Data.Semigroup| :}\n\n&lt;interactive&gt;:22:4: warning: [-Wincomplete-patterns]\n    Pattern match(es) are non-exhaustive\n    In an equation for \u2018&lt;&gt;\u2019:\n        Patterns not matched:\n            Read Read\n            Write Write\n</code></pre>\n\n<p>So Haskell has derived that there are only two patterns left: <code>Read Read</code> and <code>Write Write</code>.</p>\n"}], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 47264419, "answer_count": 1, "score": 2, "last_activity_date": 1510581757, "creation_date": 1510575293, "question_id": 47264165, "link": "https://stackoverflow.com/questions/47264165/match-two-equal-values-in-pattern-matching-in-haskell", "title": "Match two equal values in pattern matching in Haskell", "body": "<p>I have a data type, which basically just consists of flags, e.g.:</p>\n\n<pre><code>data IOMode = Read | Write | ReadWrite\n</code></pre>\n\n<p>Now this would be ideal for a Semigroup, so that I could use it similiar to <code>enum</code>s in <code>C</code> (<code>openFile(\"./file\", READ || WRITE)</code>).</p>\n\n<pre><code>instance Semigroup IOMode where\n   ReadWrite &lt;&gt; _         = ReadWrite\n   _         &lt;&gt; ReadWrite = ReadWrite\n   Read      &lt;&gt; Write     = ReadWrite\n   Read      &lt;&gt; Read      = Read\n   Write     &lt;&gt; Read      = ReadWrite\n   Write     &lt;&gt; Write     = Write\n</code></pre>\n\n<p>However is there some way to have a pattern match like:</p>\n\n<pre><code>(cont.)\n  a          &lt;&gt; a         = a\n</code></pre>\n"}, {"tags": ["haskell", "monads"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1510574551, "post_id": 47263690, "comment_id": 81478421, "body": "<code>m &gt;&gt;= return</code> is equivalent to <code>m</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1510575389, "post_id": 47263690, "comment_id": 81478927, "body": "<code>return</code> and <code>(\\x -&gt; return x)</code> are the same. <code>m &gt;&gt;= (\\x -&gt; return x)</code> is the same as <code>do { x &lt;- m ; return x }</code>. It so happens, due to the Monad Laws, that it is also the same as <code>do { m }</code>, or simply <code>m</code>. It is also the same as <code>do { x &lt;- m ; y &lt;- return x ; return y }</code>, due to the same Monad law."}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1510575847, "post_id": 47264040, "comment_id": 81479198, "body": "How could putStrLn return IO if it only accepts String and doesn&#39;t accepts IO as input parameter? (putStrLn :: String -&gt; IO ())"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1510575916, "post_id": 47264040, "comment_id": 81479240, "body": "@BulatM.: because the <code>&gt;&gt;=</code> operator <i>unwraps</i> the value in the <code>IO</code>. Notice that in the type signature, it is not <code>m a -&gt; (m a -&gt; m b) -&gt; m b</code>, it is <code>m a -&gt; (a -&gt; m b) -&gt; m b</code>."}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1510581140, "post_id": 47264040, "comment_id": 81482420, "body": "So IO returned by &quot;return&quot; and IO returned(in addition to String) by putStrLn are two different objects?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1510586528, "post_id": 47264040, "comment_id": 81486063, "body": "@BulatM. no they are not objects, not even types; <code>IO</code> is <code>IO</code> is the same - it is a marker, a tag that goes together with another type, like <code>IO String</code> or <code>IO Int</code>, to make a type that <i>&quot;things&quot;</i> can have. this is why <code>IO</code> is referred to as &quot;type constructor&quot;. now, <code>return 1 :: IO Int</code> means that <code>return 1</code> is a Haskell expression of type <code>IO Int</code>. this in turn means, that having <code>x &lt;- return 1</code> as part of a <code>do</code> block under <code>main</code> will cause <code>x</code> to refer to a value <code>1 :: Int</code>, as the part of the overall <i>I/O</i> computation referred to by the value <code>main :: IO ()</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1510586751, "post_id": 47264040, "comment_id": 81486218, "body": "and another <i>primitive</i> of the <i>I/O</i> &quot;language&quot;, <code>getLine :: IO String</code> means, having <code>s &lt;- getLine</code> under <code>main</code> will cause <code>s :: String</code> to &quot;hold&quot; i.e. refer to a string, i.e. a value of type <code>String</code>. which string? the one the user <i>will</i> have typed at the prompt, <i>when</i> the <code>main</code> is run."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1510574908, "creation_date": 1510574908, "answer_id": 47264040, "question_id": 47263690, "link": "https://stackoverflow.com/questions/47263690/what-does-m-return-means/47264040#47264040", "title": "What does m &gt;&gt;= return means?", "body": "<p><a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:-62--62--61-\" rel=\"noreferrer\"><strong><code>(&gt;&gt;=)</code></strong></a> is the <em>bind</em> operator. It has signature:</p>\n\n<pre><code>(&gt;&gt;=) :: Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b\n</code></pre>\n\n<p>So it expects (on the left side) a monadic object (for instance <code>IO Int</code>), and on the right side a function <code>a -&gt; m b</code> (for instance <code>Int -&gt; IO b</code>) here.</p>\n\n<p>The operator is used to chain operations in a monad together. For instance <code>putStrLn :: String -&gt; IO ()</code> can be used if we use it like:</p>\n\n<pre><code>return \"foo\" &gt;&gt;= putStrLn\n</code></pre>\n\n<p>So now we <code>return</code> a string <code>\"foo\"</code>. The bind operator will unwrap it out of the IO monad so to speak, and pass it to the <code>putStrLn</code> function that will print <code>\"foo\"</code> to the standard output channel, and return an <code>IO ()</code>. We can then use that <code>IO ()</code> for further processing.</p>\n\n<p>Since <code>return</code> wraps data into a monad, writing <code>&gt;&gt;= return</code> is basically useless. Since for all <code>x</code> <code>x &gt;&gt;= return</code> should be equal to <code>x</code>.</p>\n\n<p>The argument of <code>return</code> is not missing in the sense that <code>&gt;&gt;=</code> will call the return with an argument. You can also write:</p>\n\n<pre><code>m &gt;&gt;= (\\x -&gt; return x)\n</code></pre>\n\n<p>but this is equivalent to <code>m &gt;&gt;= return</code>.</p>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 47264040, "answer_count": 1, "score": 0, "last_activity_date": 1510574974, "creation_date": 1510573885, "last_edit_date": 1510574974, "question_id": 47263690, "link": "https://stackoverflow.com/questions/47263690/what-does-m-return-means", "title": "What does m &gt;&gt;= return means?", "body": "<p>Was reading tutorial about monads and stuck on following:</p>\n\n<pre><code>let m = return 2 :: IO Int\n</code></pre>\n\n<p>That's understandable - we pack 2 in monadic variable(IO 2)\nBut what does the following mean?</p>\n\n<pre><code>m &gt;&gt;= return\n</code></pre>\n\n<p>It outputs 2.</p>\n\n<p>As I know from <code>Monad</code> definition, that <em>return</em> always accepts exactly one argument. However, here the argument absents. How it could be understood?</p>\n"}, {"tags": ["haskell", "syntax", "scope", "mutable"], "comments": [{"owner": {"reputation": 19480, "user_id": 2491900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8FMW.jpg?s=128&g=1", "display_name": "shree.pat18", "link": "https://stackoverflow.com/users/2491900/shree-pat18"}, "edited": false, "score": 0, "creation_date": 1510559634, "post_id": 47259310, "comment_id": 81469412, "body": "Can you make <code>loop</code> accept an input parameter and pass <code>x</code> to it?"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 19480, "user_id": 2491900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8FMW.jpg?s=128&g=1", "display_name": "shree.pat18", "link": "https://stackoverflow.com/users/2491900/shree-pat18"}, "edited": false, "score": 0, "creation_date": 1510559745, "post_id": 47259310, "comment_id": 81469473, "body": "I don&#39;t know how, but I would assume that is a valid way to do it"}, {"owner": {"reputation": 19480, "user_id": 2491900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8FMW.jpg?s=128&g=1", "display_name": "shree.pat18", "link": "https://stackoverflow.com/users/2491900/shree-pat18"}, "edited": false, "score": 4, "creation_date": 1510559813, "post_id": 47259310, "comment_id": 81469516, "body": "More important, what are you trying to do that needs <code>IORef</code> and such?"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 19480, "user_id": 2491900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8FMW.jpg?s=128&g=1", "display_name": "shree.pat18", "link": "https://stackoverflow.com/users/2491900/shree-pat18"}, "edited": false, "score": 0, "creation_date": 1510559942, "post_id": 47259310, "comment_id": 81469590, "body": "I have a game loop that runs over and over again and I need to read input and update values / output accordingly, I have no idea how you&#39;re supposed to do that if everything is immutable"}, {"owner": {"reputation": 19480, "user_id": 2491900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W8FMW.jpg?s=128&g=1", "display_name": "shree.pat18", "link": "https://stackoverflow.com/users/2491900/shree-pat18"}, "edited": false, "score": 0, "creation_date": 1510560938, "post_id": 47259310, "comment_id": 81470091, "body": "I see. Perhaps you can update your question with the above, and provide some sample data so that we could see another solution to this?"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510564970, "post_id": 47260370, "comment_id": 81472454, "body": "This won&#39;t type check. Above, <code>x</code> is an <code>IORef Int</code>, then is used as a <code>String</code>. With slightly more work it should work, though."}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510583380, "post_id": 47260370, "comment_id": 81483889, "body": "@chi I changed the parameter to IORef Int -- how do I get it to print? I tried <code>print $ x</code> and <code>print (readIORef x)</code> etc, nothing is working"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "edited": false, "score": 0, "creation_date": 1510583497, "post_id": 47260370, "comment_id": 81483965, "body": "@user8930358 Try <code>print =&lt;&lt; readIORef x</code> or split the read and the print: as in <code>do .... ; xVal &lt;- readIORef x ; print xVal</code>"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510583669, "post_id": 47260370, "comment_id": 81484075, "body": "@chi I have to print two of them on the same line with a space separator, to be specific, will <code>print =&lt;&lt; readIORef x</code> syntax let me do that or do I have to do some string conversion thing using your second method?"}, {"owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "edited": false, "score": 0, "creation_date": 1510584117, "post_id": 47260370, "comment_id": 81484411, "body": "Looks like <code>printf &quot;%d %d&quot; x_out y_out</code> works after doing <code>x_out &lt;- readIORef x</code> and importing <code>Text.Printf</code> although I don&#39;t know if this is nonstandard"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "edited": false, "score": 0, "creation_date": 1510588770, "post_id": 47260370, "comment_id": 81487614, "body": "@user8930358 That&#39;s OK too. <code>putStrLn (show x_out ++ &quot; &quot; ++ show y_out)</code> is more common, though."}], "tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 1, "last_activity_date": 1510565034, "last_edit_date": 1510565034, "creation_date": 1510563593, "answer_id": 47260370, "question_id": 47259310, "link": "https://stackoverflow.com/questions/47259310/why-is-this-variable-out-of-scope-haskell/47260370#47260370", "title": "Why is this variable out of scope? (Haskell)", "body": "<p>You can make <code>x</code> a parameter.</p>\n\n<pre><code>import System.IO\nimport Control.Monad\nimport Data.IORef\n\nmain :: IO ()\nmain = do\n    hSetBuffering stdout NoBuffering \n\n    input_line &lt;- getLine\n    let input = words input_line\n    let x0 = read (input!!0) :: Int\n    x &lt;- newIORef x0\n    loop x\n\nloop :: Int -&gt; IO ()\nloop x = do\n    input_line &lt;- getLine\n    let the_dir = input_line :: String \n\n    putStrLn $ show x\n\n    loop\n</code></pre>\n\n<p>Or simply use <code>forever</code>.</p>\n\n<pre><code>import Control.Monad\n\n...\n\n    x &lt;- newIORef x0\n    forever $ do\n        input_line &lt;- getLine\n        let the_dir = input_line :: String \n\n        putStrLn $ show x\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8930358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d8cbedaef438cec1f850d8469ffcab?s=128&d=identicon&r=PG&f=1", "display_name": "user8930358", "link": "https://stackoverflow.com/users/8930358/user8930358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510565928, "creation_date": 1510559057, "last_edit_date": 1510565928, "question_id": 47259310, "link": "https://stackoverflow.com/questions/47259310/why-is-this-variable-out-of-scope-haskell", "title": "Why is this variable out of scope? (Haskell)", "body": "<p>I'll get right to it (I removed a bunch of extraneous code, in case this looks a little funny -- trying to make this a MCVE):</p>\n\n<pre><code>import System.IO\nimport Control.Monad\nimport Data.IORef\n\nmain :: IO ()\nmain = do\n    hSetBuffering stdout NoBuffering \n\n    input_line &lt;- getLine\n    let input = words input_line\n    let x0 = read (input!!0) :: Int\n    x &lt;- newIORef x0\n    loop\n\nloop :: IO ()\nloop = do\n    input_line &lt;- getLine\n    let the_dir = input_line :: String \n\n    putStrLn x\n\n    loop\n</code></pre>\n\n<p>Just to test it I tried outputting x and it's saying it's out of scope. Why? How do I fix it so it is in scope? I need to access the variables but I also need to have them initialized before I enter the loop for the first time.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "edited": false, "score": 0, "creation_date": 1510552976, "post_id": 47257942, "comment_id": 81466571, "body": "can you post the full description of the exercise?"}, {"owner": {"reputation": 12054, "user_id": 3614835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xzZDV.png?s=128&g=1", "display_name": "Jeffrey Bosboom", "link": "https://stackoverflow.com/users/3614835/jeffrey-bosboom"}, "edited": false, "score": 1, "creation_date": 1510553073, "post_id": 47257942, "comment_id": 81466599, "body": "<code>a</code> probably indicates a type; with no constraints it&#39;s a type you know nothing about, which limits you to two implementations having signature <code>a -&gt; a -&gt; a</code>.  (I&#39;m not a Haskell programmer but I think I know what the question&#39;s getting at.)"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1510553616, "post_id": 47257942, "comment_id": 81466800, "body": "In layman&#39;s terms: since you need to know <i>something</i> about an argument&#39;s type to do anything to it, you can&#39;t do anything to either argument. Since you can&#39;t do anything to either argument, you can either return (unchanged) argument one, or argument two."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 3, "creation_date": 1510553931, "post_id": 47257942, "comment_id": 81466916, "body": "@Ngm Every parameter to a function needs to have a different name. The type signature of <code>a -&gt; a -&gt; a</code> is just saying that the first two parameters have the same type. It doesn&#39;t mean they have the same name."}, {"owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "edited": false, "score": 3, "creation_date": 1510553976, "post_id": 47257942, "comment_id": 81466942, "body": "The don&#39;t have the same name, they have the same type.  <code>a -&gt; a -&gt; a</code> means that the function takes in two arguments of the same type type <code>a</code> and returns a value of that same type."}], "answers": [{"tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": false, "score": 6, "last_activity_date": 1510553401, "creation_date": 1510553401, "answer_id": 47258059, "question_id": 47257942, "link": "https://stackoverflow.com/questions/47257942/function-with-a-a-a-possible-in-haskell/47258059#47258059", "title": "Function with a -&gt; a -&gt; a possible in Haskell?", "body": "<p>let <code>f :: a -&gt; a -&gt; a</code>, because there's no limitation on type <code>a</code>, the only possible 2 implementations would be just return 1st/2nd parameter, i.e.</p>\n\n<pre><code>f x _ = x\n</code></pre>\n\n<p>or</p>\n\n<pre><code>f _ x = x\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1510576596, "post_id": 47258081, "comment_id": 81479642, "body": "there is in fact a second possible implementation for <code>ident</code>: <code>ident x = ident x</code>. or an equivalent  <code>ident x = y where y = y</code> (or, the equivalent, <code>... where y = undefined</code>). --- (did you mean to call your second <code>someFunc1</code> as <code>someFunc2</code>, actually?)"}, {"owner": {"reputation": 6788, "user_id": 1748754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jjk7p.jpg?s=128&g=1", "display_name": "erewok", "link": "https://stackoverflow.com/users/1748754/erewok"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510583908, "post_id": 47258081, "comment_id": 81484249, "body": "You&#39;re right on both accounts. To the second point, I was trying to make a compileable example and also differentiate."}], "tags": [], "owner": {"reputation": 6788, "user_id": 1748754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jjk7p.jpg?s=128&g=1", "display_name": "erewok", "link": "https://stackoverflow.com/users/1748754/erewok"}, "is_accepted": true, "score": 10, "last_activity_date": 1510583919, "last_edit_date": 1510583919, "creation_date": 1510553518, "answer_id": 47258081, "question_id": 47257942, "link": "https://stackoverflow.com/questions/47257942/function-with-a-a-a-possible-in-haskell/47258081#47258081", "title": "Function with a -&gt; a -&gt; a possible in Haskell?", "body": "<p>The way to think about this problem, perhaps, is to <strong>imagine how much we do not know about your arguments</strong> <code>a</code> and <code>a</code>. </p>\n\n<p>It is impossible, for instance, for us to say the following:</p>\n\n<pre><code>someFunc :: a -&gt; a -&gt; a\nsomeFunc x y = x == y\n</code></pre>\n\n<p>This won't typecheck because we don't even know if <code>a</code> is an instance of the typeclass <code>Eq</code>. In other words, we have no useful information about these <code>a</code> things except that <em>they are the same type of thing</em> (whatever that may be).</p>\n\n<p>Consider the identity function:</p>\n\n<pre><code>ident :: a -&gt; a\nident x = ...\n</code></pre>\n\n<p>There is nothing this function can know about its sole argument <code>x</code>. There is, as a result, only one possible, valid result:</p>\n\n<pre><code>ident x = x\n</code></pre>\n\n<p>Nothing else works because there's nothing else we can assume about our argument.</p>\n\n<p>Now, in your case, you have two arguments which can be absolutely anything in the universe. There is no possible assertion we can make about any behaviors these two arguments can conform to. Thus, we can define our function in possibly two different ways:</p>\n\n<pre><code>someFunc1 :: a -&gt; a -&gt; a\nsomeFunc1 x y = x\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>someFunc2 :: a -&gt; a -&gt; a\nsomeFunc2 x y = y\n</code></pre>\n\n<p>There is no other valid way to represent this function. </p>\n"}], "owner": {"reputation": 9547, "user_id": 46279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/df9614769cb56c2cc06330efa2599e3f?s=128&d=identicon&r=PG", "display_name": "coder_bro", "link": "https://stackoverflow.com/users/46279/coder-bro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 47258081, "answer_count": 2, "score": 4, "last_activity_date": 1510583919, "creation_date": 1510552760, "question_id": 47257942, "link": "https://stackoverflow.com/questions/47257942/function-with-a-a-a-possible-in-haskell", "title": "Function with a -&gt; a -&gt; a possible in Haskell?", "body": "<p>I am going through Haskell Programming book and an in exercise on page 140, the author states this:</p>\n\n<p><code>A hypothetical function a-&gt;a-&gt;a has two possible implementations. Write both possible versions.</code></p>\n\n<p>I am assuming <code>a -&gt; a -&gt; a</code>  would imply a function that takes two arguments <code>(a and a)</code> - (which does not makes sense to me and if I declare a function with two args as <code>a</code>, ghci rightly complains too) and returns <code>a</code></p>\n\n<p>I think I am missing something, what is it?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 2, "creation_date": 1510541727, "post_id": 47256425, "comment_id": 81463833, "body": "Do you know the function <code>map</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 3, "last_activity_date": 1510542617, "creation_date": 1510542617, "answer_id": 47256554, "question_id": 47256425, "link": "https://stackoverflow.com/questions/47256425/haskell-takes-a-list-of-floats-and-returns-a-list-of-chars/47256554#47256554", "title": "Haskell - Takes a list of floats and returns a list of chars", "body": "<p>You can write a function that converts ONE float to a Char, as you've done here:</p>\n\n<pre><code>convertRawsToLetters :: (Num a, Ord a) =&gt; a -&gt; Char\nconvertRawsToLetters s | s &gt; 90    = 'A'\n                       | s &gt; 80    = 'B'\n                       | s &gt; 70    = 'C'\n                       | otherwise = 'F'\n</code></pre>\n\n<p>(note that I don't have to run both inequalities here since the guards are evaluated in order)</p>\n\n<p>Then you map that over the list of floats. <code>map</code> has type:</p>\n\n<pre><code>map :: (a -&gt; b) -&gt; [a] -&gt; [b]\n</code></pre>\n\n<p>so its first argument is a function from <code>a -&gt; b</code> (<code>Float -&gt; Char</code>, in this case), its second argument is a list of <code>a</code>s (<code>Float</code>s), and it returns a list of <code>b</code>s (<code>Char</code>s).</p>\n\n<pre><code>listOfChars :: [Char]\nlistOfChars = map convertRawsToLetters listOfFloats\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8930176, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-59IthFxoJME/AAAAAAAAAAI/AAAAAAAAAA0/2KpUrRP7EAI/photo.jpg?sz=128", "display_name": "JiaQ", "link": "https://stackoverflow.com/users/8930176/jiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510542617, "creation_date": 1510541438, "last_edit_date": 1510541595, "question_id": 47256425, "link": "https://stackoverflow.com/questions/47256425/haskell-takes-a-list-of-floats-and-returns-a-list-of-chars", "title": "Haskell - Takes a list of floats and returns a list of chars", "body": "<p>I am wondering to create a Haskell function to take a list of floats and returns a list of chars that represent the letter grades based off the original scores.\nI can complete this requirement without list:</p>\n\n<pre><code> convertRawsToLetters :: (RealFloat score) =&gt; score -&gt; Char\n convertRawsToLetters score\n    | score &gt; 90 = 'A'\n    | score &lt;= 90 &amp;&amp; score &gt; 80 = 'B'\n</code></pre>\n\n<p>How can I use condition in list? </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "reply_to_user": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1510542091, "post_id": 47256380, "comment_id": 81463903, "body": "But it doesn&#39;t help me specifically for my example. I still don&#39;t know the answer."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1510542164, "post_id": 47256380, "comment_id": 81463919, "body": "But your question is the same as the linked question. Is there some part of the answer that you don&#39;t understand?"}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "reply_to_user": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1510543038, "post_id": 47256380, "comment_id": 81464087, "body": "So I should do it with iterate?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510543529, "post_id": 47256380, "comment_id": 81464201, "body": "No, you should not do it with <code>iterate</code>, or anything of the like. Doing the same thing <code>n</code> times is is absolutely the wrong way to rotate a list!"}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510544398, "post_id": 47256380, "comment_id": 81464393, "body": "So how should I do it then?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510546364, "post_id": 47256380, "comment_id": 81464831, "body": "@Paddy369, look at arguments and results. Can you think of another way to accomplish that? Your approach will be very inefficient (O (n * k)), where you rotate a list of length k n times. You can do it in O (k)."}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510546676, "post_id": 47256380, "comment_id": 81464901, "body": "I don&#39;t get it :/"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1510562849, "post_id": 47256380, "comment_id": 81471107, "body": "Haskell has no <code>while</code> <i>operator</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510549931, "post_id": 47257181, "comment_id": 81465663, "body": "If I rotate it for example seven times it would be the same as I would rotate it 1 time with 6 elements.So basically  I just divide the amount of rotations I do by n-elements and my remainder will be the total amount of rotations. For example if I want to rotate the list 23 times with 6 elements, then I do 23/6= 3 mod 5 -&gt; So 5 rotations. But I still don&#39;t know how to make it recursive, the efficiency is not so important for me."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510550430, "post_id": 47257181, "comment_id": 81465791, "body": "@Paddy369, what do you mean, &quot;make it recursive&quot;?"}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510550799, "post_id": 47257181, "comment_id": 81465916, "body": "I mean that it won&#39;t rotate just once, but rather 3, or 4 times."}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510551733, "post_id": 47257181, "comment_id": 81466205, "body": "My problem I have that I don&#39;t know what to write in Haskell so the rotation won&#39;t be only once. Currently your rotateLeft1 function only rotates once, so my question is, how do I write the rotateLeft function."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510553946, "post_id": 47257181, "comment_id": 81466927, "body": "@Paddy369, I outlined the procedure I suggest for writing <code>rotateLeft</code>, which does <i>not</i> involve any calls to <code>rotateLeft1</code>. What specific aspect do you find hard to understand?"}, {"owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510555133, "post_id": 47257181, "comment_id": 81467433, "body": "The part where I split the list. How do I write that?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "edited": false, "score": 0, "creation_date": 1510555925, "post_id": 47257181, "comment_id": 81467731, "body": "@Paddy369, look up <code>splitAt</code>."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1510548102, "creation_date": 1510548102, "answer_id": 47257181, "question_id": 47256380, "link": "https://stackoverflow.com/questions/47256380/how-can-i-make-my-simple-haskell-function-recursive/47257181#47257181", "title": "How can I make my simple Haskell function recursive?", "body": "<p>You shouldn't rotate multiple places by rotating once and doing that repeatedly. Let's look at a slightly cleaner version of your single rotation to see why:</p>\n\n<pre><code>rotateLeft1 :: [a] -&gt; [a]\nrotateLeft1 [] = []\nrotateLeft1 (x:xs) = xs ++ [x]\n</code></pre>\n\n<p>The problem is that <code>p ++ q</code> takes time linear in the length of <code>p</code>. You're doing that once for each rotation step, which wastes a lot of time. Let's look at it differently, with an example.</p>\n\n<pre><code>rotateLeft 3 [1,2,3,4,5,6,7,8]\n-- split the list\n([1,2,3], [4,5,6,7,8])\n-- swap the pieces\n([4,5,6,7,8], [1,2,3])\n-- Append\n[4,5,6,7,8,1,2,3]\n</code></pre>\n\n<p>There's one tricky bit left: what if I rotate a list by a number greater than its length? I'll let you give that a go yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1510569279, "creation_date": 1510569279, "answer_id": 47262283, "question_id": 47256380, "link": "https://stackoverflow.com/questions/47256380/how-can-i-make-my-simple-haskell-function-recursive/47262283#47262283", "title": "How can I make my simple Haskell function recursive?", "body": "<p>Let us first clean up the <code>rotatebyone</code> function:</p>\n\n<pre><code>rotatebyone :: [Int] -&gt; [Int]\nrotatebyone [] = []\nrotatebyone (x:xs) = ((tail (x:xs)) ++ (take 1 (x:xs)))\n</code></pre>\n\n<p>Here you call <code>tail</code> on <code>(x:xs)</code> but that is quite weird, since we already have a tail: <code>xs</code>. So we can replace <code>tail (x:xs)</code> with <code>xs</code>.</p>\n\n<p>The same holds for <code>take 1 (x:xs)</code>. This will construct a list with the head of the list, so <code>[x]</code>. So we can clean up the code to:</p>\n\n<pre><code>rotatebyone :: [Int] -&gt; [Int]\nrotatebyone [] = []\nrotatebyone (x:xs) = <b>xs</b> ++ <b>[x]</b></code></pre>\n\n<p>Furthermore your function only works on lists of type <code>Int</code> (it has signature <code>[Int] -&gt; [Int]</code>). We can however rotate lists by one regardless the type of elements these lists hold, so we can write it as:</p>\n\n<pre><code>rotatebyone :: [<b>a</b>] -&gt; [<b>a</b>]\nrotatebyone [] = []\nrotatebyone (x:xs) = xs ++ [x]</code></pre>\n\n<p>Now we can look for a way to rotate <code>n</code> times with:</p>\n\n<pre><code>rotatebyn :: <b>Int -&gt;</b>[<b>a</b>] -&gt; [<b>a</b>]\nrotatebyn ...</code></pre>\n\n<p>In case we wish to rotate over zero places, then the list remains the same, so as a base case we can write:</p>\n\n<pre><code>rotatebyn 0 l = l\n</code></pre>\n\n<p>and in case we want to rotate over one or more places, we can rotate over one place by the <code>rotatebyone</code> function, and then rotate this result another <code>n-1</code> times:</p>\n\n<pre><code>rotatebyn n l = rotatebyn (n-1) (rotateone n)\n</code></pre>\n\n<p>or these together:</p>\n\n<pre><code>rotatebyn :: Int -&gt;[a] -&gt; [a]\nrotatebyn 0 l = l\nrotatebyn n l = rotatebyn (n-1) (rotateone n)\n</code></pre>\n\n<p>But the above is, like <a href=\"https://stackoverflow.com/a/47257181/67579\">@dfeuer</a> says not efficient: it takes <em>O(n)</em> time to rotate a list, if we need to do this <em>k</em> times, the time complexity is thus <em>O(n k)</em>.</p>\n\n<p>Note furthermore that the above function only works in case <code>n</code> is greater than or equal to zero.</p>\n"}], "owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510569279, "creation_date": 1510541016, "last_edit_date": 1510563718, "question_id": 47256380, "link": "https://stackoverflow.com/questions/47256380/how-can-i-make-my-simple-haskell-function-recursive", "title": "How can I make my simple Haskell function recursive?", "body": "<p>This is my function:</p>\n\n<pre><code>rotatebyone :: [Int] -&gt; [Int]\nrotatebyone [] = []\nrotatebyone (x:xs) = ((tail (x:xs)) ++ (take 1 (x:xs)))\n\nrotatebyn :: Int -&gt; [Int] -&gt; [Int]\nrotatebyn n [] = []\nrotatebyn 1 (x:xs) = rotatebyone (x:xs) \nrotatebyn 2 (x:xs) = (rotatebyone (rotatebyone (x:xs)))\n</code></pre>\n\n<p>I want my function to repeat itself for n-times. I guess you do this with guardians or the \"while\" operator, but I don't know quite how. The goal is to rotate elements of a integer-list n-times.</p>\n\n<p>This was my failed approach:</p>\n\n<pre><code>rota :: Int -&gt; [Int] -&gt; [Int]\nrota n (x:xs) = rotatebyone (x:xs)\n                where\n                rota n\n                    | n &gt; 1 = rota (n - 1)\n                    | otherwise = rotatebyone (x:xs)\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1510564799, "post_id": 47255052, "comment_id": 81472349, "body": "@epsilonhalbe It does not scale, though. I guess <code>null (drop 1000 xs) &amp;&amp; sort xs == [1..1000]</code> could be used. We need an idiomatic way to check <code>length xs == 1000</code> without scanning all of <code>xs</code>. Using <code>genericLength</code> and Peano naturals could be it? Dropping both <code>n-1</code> (not null required) and dropping one more (null required)?"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1510528292, "creation_date": 1510528292, "answer_id": 47255052, "question_id": 47254938, "link": "https://stackoverflow.com/questions/47254938/beginner-peroblem-check-if-one-list-belongs-to-a-list-made-out-of-lists/47255052#47255052", "title": "(Beginner peroblem) Check if one list belongs to a list made out of lists", "body": "<p>You can use <code>elem</code> to check for membership.</p>\n\n<pre><code>funk3 :: [Int] -&gt; Bool\nfunk3 xs = elem xs perm\n</code></pre>\n\n<p>This is rather inefficient, though, since there is no need to generate all the 720 permutations. We can sort the input list and simply compare it to [1..6].</p>\n\n<pre><code>funk3 :: [Int] -&gt; Bool\nfunk3 xs = sort xs == [1..6]\n</code></pre>\n\n<p>Or, if we want to avoid sorting a potentially large list,</p>\n\n<pre><code>funk3 :: [Int] -&gt; Bool\nfunk3 xs@[_,_,_,_,_,_] = sort xs == [1..6]\nfunk3 _                = False\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8929816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6358897ee0f1df46cd7a15ef2a7ffc?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy369", "link": "https://stackoverflow.com/users/8929816/paddy369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510535848, "creation_date": 1510527394, "question_id": 47254938, "link": "https://stackoverflow.com/questions/47254938/beginner-peroblem-check-if-one-list-belongs-to-a-list-made-out-of-lists", "title": "(Beginner peroblem) Check if one list belongs to a list made out of lists", "body": "<p>So I want to check if a list belongs to the permutations of [1..6]. My idea was this: </p>\n\n<pre><code>&gt;import Data.List\n\n&gt;perm = permutations [1..6]\n\n&gt;funk3 :: [Int] -&gt; Bool\n&gt;funk3 [] = False\n&gt;funk3 (x:xs) = if (x:xs) == perm\n&gt;           then True\n&gt;           else False\n</code></pre>\n\n<p>I know that the following code in incorrect, because I can't compare a list with a list, which contains more lists. But I really don't know how to tell Haskell that my list is only a partial quantity. Pleas help me!</p>\n"}, {"tags": ["haskell", "types", "functional-programming"], "comments": [{"owner": {"reputation": 1946, "user_id": 1432740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a84709030a711eb919bec460051eac8?s=128&d=identicon&r=PG", "display_name": "Mateusz Kowalczyk", "link": "https://stackoverflow.com/users/1432740/mateusz-kowalczyk"}, "edited": false, "score": 3, "creation_date": 1510516475, "post_id": 47253227, "comment_id": 81456714, "body": "your type signature says that <code>remain</code> should be <code>[Integer]</code> but you are comparing it with <code>==</code> to <code>1</code> with is <code>Integer</code>. Perhaps <code>remain</code>&#39;s type signature was intended to be <code>plus1 :: [Integer] -&gt; Integer -&gt; [Integer]</code>?"}, {"owner": {"reputation": 23, "user_id": 8848965, "user_type": "registered", "profile_image": "https://graph.facebook.com/1593259364065370/picture?type=large", "display_name": "Mohamad Shebli", "link": "https://stackoverflow.com/users/8848965/mohamad-shebli"}, "reply_to_user": {"reputation": 1946, "user_id": 1432740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a84709030a711eb919bec460051eac8?s=128&d=identicon&r=PG", "display_name": "Mateusz Kowalczyk", "link": "https://stackoverflow.com/users/1432740/mateusz-kowalczyk"}, "edited": false, "score": 0, "creation_date": 1510516726, "post_id": 47253227, "comment_id": 81456803, "body": "My all thanks, thank you for your time"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510518838, "post_id": 47253643, "comment_id": 81457592, "body": "pulled from Mateusz&#39;s comment so this question has an answer."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1510518783, "creation_date": 1510518783, "answer_id": 47253643, "question_id": 47253227, "link": "https://stackoverflow.com/questions/47253227/no-instance-for-num-integer-arising-from-the-literal-1/47253643#47253643", "title": "No instance for (Num [Integer]) arising from the literal \u20181\u2019", "body": "<p>your type signature says that <code>remain</code> should be <code>:: [Integer]</code> but you are comparing it with <code>==</code> to <code>1</code> with is <code>Integer</code>. Perhaps your type signature was intended to be <code>plus1 :: [Integer] -&gt; Integer -&gt; [Integer]</code></p>\n"}], "owner": {"reputation": 23, "user_id": 8848965, "user_type": "registered", "profile_image": "https://graph.facebook.com/1593259364065370/picture?type=large", "display_name": "Mohamad Shebli", "link": "https://stackoverflow.com/users/8848965/mohamad-shebli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 47253643, "answer_count": 1, "score": -3, "last_activity_date": 1510518801, "creation_date": 1510516285, "last_edit_date": 1510518801, "question_id": 47253227, "link": "https://stackoverflow.com/questions/47253227/no-instance-for-num-integer-arising-from-the-literal-1", "title": "No instance for (Num [Integer]) arising from the literal \u20181\u2019", "body": "<pre><code>plus1 :: [Integer] -&gt;  [Integer] -&gt; [Integer] \nplus1 (x:xs) remain  \n    | (x==0) &amp;&amp; (remain==1) = [1] ++ (plus1 xs (remain-1) )\n    | (x==1) &amp;&amp; (remain==1) = [0] ++ (plus1 xs remain)\n    | (x==0) &amp;&amp; (remain==0) = [0] ++ (plus1 xs 0)\n    | (x==1) &amp;&amp; (remain==0) = [1] ++ (plus1 xs 0)\n    |  otherwise = []\n</code></pre>\n\n<p>\u2022 No instance for (Num [Integer]) arising from the literal \u20181\u2019</p>\n\n<p>\u2022 In the second argument of \u2018(==)\u2019, namely \u20181\u2019</p>\n\n<p>In the second argument of \u2018(&amp;&amp;)\u2019, namely \u2018(remain == 1)\u2019</p>\n\n<p>In the expression: (x == 0) &amp;&amp; (remain == 1)</p>\n"}, {"tags": ["list", "sorting", "haskell"], "comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 3, "creation_date": 1510515918, "post_id": 47253084, "comment_id": 81456551, "body": "Hint: there&#39;s a fourth possibility, which is that the list contains a single value repeated <i>n</i> times. Such a list is not <i>not sorted</i>, but it&#39;s not exactly sorted ascending or descending either. Think about how your beliefs about a given list might change between these four possibilities as you examine it element by element."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510516177, "post_id": 47253084, "comment_id": 81456626, "body": "<code>Ascending</code> and <code>Descending</code>, strictly speaking, really only apply to lists without duplicates. The more general terms <code>Nondecreasing</code> and <code>Nonincreasing</code> could describe lists that could have duplicate items, and both apply equally well to the degenerate case of a single repeated item."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1510516372, "post_id": 47253084, "comment_id": 81456686, "body": "and this is <i>not</i> list comprehension! this is <a href=\"https://wiki.haskell.org/Keywords#.7C\" rel=\"nofollow noreferrer\">&quot;guards&quot;</a>."}, {"owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510516606, "post_id": 47253084, "comment_id": 81456763, "body": "@chepner how do I check if the list have duplicate?"}, {"owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510516743, "post_id": 47253084, "comment_id": 81456812, "body": "@WillNess I&#39;ve tried that but it gave me &quot;parse error in input &#39;|&#39; &quot;"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510517137, "post_id": 47253084, "comment_id": 81456959, "body": "@JayRowen you have to follow a specific syntax. to see an example, go to <a href=\"https://www.haskell.org/tutorial/patterns.html\" rel=\"nofollow noreferrer\">haskell.org/tutorial/patterns.html</a> and search for &quot;guard&quot;."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510521011, "post_id": 47253084, "comment_id": 81458355, "body": "you can also <a href=\"https://stackoverflow.com/search?q=haskell+guard\">search for &quot;haskell guard&quot; on SO</a>. examples of using <code>where</code> with them see e.g. <a href=\"https://stackoverflow.com/questions/34124558/is-it-possible-to-nest-guards-in-haskell\">here</a>. do note that &quot;pattern guard&quot; is another, different concept."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1510517465, "post_id": 47253254, "comment_id": 81457099, "body": "Actually sorting the list is inefficient. If the list is already sorted, you could determine that in O(n), while sorting could take as long as O(n lg n). If the list isn&#39;t sorted, you&#39;ll probably spend O(n lg n) time sorting it before making one or more linear-time passes to compare to the original, when as few as 2 comparisons on the original could tell you the list is unsorted."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510517852, "post_id": 47253254, "comment_id": 81457245, "body": "@chepner True, Willem&#39;s answer is much more comprehensive anyway. I generally try and write clear code and optimize later which might not be the best idea"}], "tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": false, "score": 1, "last_activity_date": 1510516418, "creation_date": 1510516418, "answer_id": 47253254, "question_id": 47253084, "link": "https://stackoverflow.com/questions/47253084/check-a-list-if-sorted-in-ascending-or-descending-or-not-sorted-in-haskell/47253254#47253254", "title": "Check a list if sorted in ascending or descending or not sorted in haskell?", "body": "<p>We have an implementation of <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:sort\" rel=\"nofollow noreferrer\">sort</a> already, from Data.List that we can use to achieve this.</p>\n\n<pre><code>import Data.List (sort)\n\nsorted xs \n    | sort xs == xs = Ascending\n    | reverse (sort xs) == xs = Descending\n    | otherwise = NotSorted\n</code></pre>\n\n<p>If the sorted list is equal to the list, then it must be sorted with an ascended sort.</p>\n\n<p>If the sorted list, reversed, is equal to the list, then it must be sorted with a descended sort.</p>\n\n<p>Otherwise, it's not sorted.</p>\n\n<p>As @Benjamin-Hodgson points out, the edge conditions might need thinking about. With this implementation, an empty list counts as sorted, so does a list of one item, and so does a list of the same item repeated.</p>\n\n<p>Usage:</p>\n\n<pre><code>\u03bb&gt; sorted [1..5]\nAscending\n\u03bb&gt; sorted [5,4..1]\nDescending\n\u03bb&gt; sorted [1,3,1]\nNotSorted\n\u03bb&gt; sorted []\nAscending\n\u03bb&gt; sorted [1]\nAscending\n\u03bb&gt; sorted [1,1,1]\nAscending\n</code></pre>\n\n<p>Alternatively, we can use <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:sortBy\" rel=\"nofollow noreferrer\">sortBy</a> for the reverse case, to avoid having to reverse the list completely. This just sorts by the default comparison function, with the arguments flipped, so a less than becomes a greater than.</p>\n\n<pre><code>import Data.List (sort, sortBy)\n\nsorted xs \n    | sort xs == xs = Ascending\n    | sortBy (flip compare) xs == xs = Descending\n    | otherwise = NotSorted\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510574665, "post_id": 47253263, "comment_id": 81478486, "body": "you don&#39;t need <code>init</code>. also, your version will properly return <code>NotSorted</code> for <code>[1,3,2,1&#47;0]</code> after examining only the first three of its elements, as it ought to; kudos for that. you could also have another clause, <code>| and [x == y | (x, y) &lt;- zipCustom xs] = Flat</code>; and maybe call the result for <code>[]</code> &quot;Unknown&quot; (similar to Redu&#39;s answer)."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510575781, "post_id": 47253263, "comment_id": 81479164, "body": "yes you do, and yes it is, due to Haskell&#39;s laziness. It will work fine on infinite lists, and detect <code>NotSorted</code> as soon as possible. Unlike Willem&#39;s answer."}], "tags": [], "owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "is_accepted": false, "score": 4, "last_activity_date": 1510587725, "last_edit_date": 1510587725, "creation_date": 1510516470, "answer_id": 47253263, "question_id": 47253084, "link": "https://stackoverflow.com/questions/47253084/check-a-list-if-sorted-in-ascending-or-descending-or-not-sorted-in-haskell/47253263#47253263", "title": "Check a list if sorted in ascending or descending or not sorted in haskell?", "body": "<p>My solution without using the sort function and without recursion :</p>\n\n<pre><code>data SortType = Ascending | Descending | NotSorted | Flat | Unknown deriving (Show)\n\nsorted :: (Ord a) =&gt; [a] -&gt; SortType \nsorted [] = Unknown\nsorted [a] = Flat\nsorted xs  \n    | and [x == y | (x, y) &lt;- zipPairs xs] = Flat\n    | and [x &lt;= y | (x, y) &lt;- zipPairs xs] = Ascending\n    | and [x &gt;= y | (x, y) &lt;- zipPairs xs] = Descending\n    | otherwise                            = NotSorted\n\nzipPairs :: [a] -&gt; [(a, a)]\nzipPairs xs = zip xs (tail xs)\n</code></pre>\n\n<p>Faster is probably the one using lambdas</p>\n\n<pre><code>all (\\(x, y) -&gt; x &lt;= y) (zipPairs xs)\n</code></pre>\n\n<p>In Python I would probably do something like this</p>\n\n<pre><code>from itertools import izip, islice\n\nn = len(lst)\n\nall(x &lt;= y for x, y in izip(islice(lst, 0, n - 1), islice(lst, 1, n)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510517143, "post_id": 47253311, "comment_id": 81456963, "body": "thank you for your clear answer but it gave me parse error on input &#39;|&#39;..."}, {"owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510518387, "post_id": 47253311, "comment_id": 81457439, "body": "Thank you so much for your explanation sir!"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "edited": false, "score": 0, "creation_date": 1510521455, "post_id": 47253311, "comment_id": 81458513, "body": "@JayRowen: yes, when merging the fragments together something went wrong."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510521677, "post_id": 47253311, "comment_id": 81458582, "body": "@WillNess: that was exactly why I was building up to the argument that this is a bad idea: because unfortunately a salary is too high to pay people to look for typos :)"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510522508, "post_id": 47253311, "comment_id": 81458854, "body": "also, why shouldn&#39;t <code>sorted (1:3:2:undefined)</code> return <code>NotSorted</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510522756, "post_id": 47253311, "comment_id": 81458940, "body": "@WillNess: because then I had to write two intermezzo section(s) about <code>undefined</code>, and about accumulators in the answer, and sometimes people work to earn a living (and something extra). But feel free to write an answer yourself."}, {"owner": {"reputation": 189, "user_id": 8179137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b43fe26a1b6191280614f56683525d?s=128&d=identicon&r=PG&f=1", "display_name": "Potato44", "link": "https://stackoverflow.com/users/8179137/potato44"}, "edited": false, "score": 0, "creation_date": 1511113695, "post_id": 47253311, "comment_id": 81712258, "body": "In both the non-monoidal version and the monoidal version you are missing the x == y case. You are currently returning NotSorted instead of intersecting Both with the outcome of the rest."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 189, "user_id": 8179137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b43fe26a1b6191280614f56683525d?s=128&d=identicon&r=PG&f=1", "display_name": "Potato44", "link": "https://stackoverflow.com/users/8179137/potato44"}, "edited": false, "score": 0, "creation_date": 1511120090, "post_id": 47253311, "comment_id": 81714618, "body": "@Potato44: but this is mentioned in the answer, we assume strict ordering. But it is easy to generalize the code."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 5, "last_activity_date": 1510521813, "last_edit_date": 1510521813, "creation_date": 1510516700, "answer_id": 47253311, "question_id": 47253084, "link": "https://stackoverflow.com/questions/47253084/check-a-list-if-sorted-in-ascending-or-descending-or-not-sorted-in-haskell/47253311#47253311", "title": "Check a list if sorted in ascending or descending or not sorted in haskell?", "body": "<p>A problematic part of your function is the <code>| otherwise = Descending</code>. According to your function definition, if there are two consecutive examples in the list such that <code>x &gt;= y</code>, then the function is <em>descending</em>. This is not <code>True</code>: a function is descending if for <em>all</em> two consecutive elements <code>x &gt; y</code> (or <code>x &gt;= y</code> if you do not require it to be <em>strictly</em> descending).</p>\n\n<p>Furthermore an additional problem here is that a list with one element (or no elements) can be seen as both <code>Ascending</code> and <code>Descending</code>. So I think the first thing we have to do is define some semantics. We can decide to make the output a list of <code>TypeOfSort</code> items, or we can decide to extend the number of options of <code>TypeOfSort</code>.</p>\n\n<p>In this answer I will pick the last option. We can extend <code>TypeOfSort</code> to:</p>\n\n<pre><code>data TypeOfSort = Ascending | Descending | Both | NotSorted\n    deriving (Show)\n</code></pre>\n\n<p>Now we can work on the function itself. The base cases here are of course the empty list <code>[]</code> and the list with one element <code>[_]</code>:</p>\n\n<pre><code>sorted [] = Both\nsorted [_] = Both\n</code></pre>\n\n<p>Now we need to define the inductive case. When is a list sorted ascendingly? If all elements are (strictly) larger than the previous element. Analogue a list is sorted descending if all elements are (strictly) smaller than the previous element. Let us for now assume <em>strictness</em>. It is easy to alter the function definition later.</p>\n\n<p>So in case we have a list with two or more elements, a list is <code>Ascending</code> if the list that starts with the second element is <code>Ascending</code> or <code>Both</code>, and <code>x &lt; y</code>, or in other words:</p>\n\n<pre><code>sorted (x:y:xs) | Both &lt;- sort_yxs, x &lt; y = Ascending\n                | Ascending &lt;- sort_yxs, x &lt; y = Ascending\n    where sort_yxs = sorted (y:xs)\n</code></pre>\n\n<p>The same holds for descending order: if the rest of the list is in descending order, and the first element is greater than the second, then the list is in descending order:</p>\n\n<pre><code>                | Both &lt;- sort_yxs, x &gt; y = Descending\n                | Ascending &lt;- sort_yxs, &gt; y = Descending\n    where sort_yxs = sorted (y:xs)\n</code></pre>\n\n<p>In all the remaining cases, it means that some part(s) of the list are <code>Ascending</code> and some part(s) are <code>Descending</code>, so then the list is <code>NotSorted</code>.</p>\n\n<pre><code>                | otherwise = NotSorted\n</code></pre>\n\n<p>or putting these all together:</p>\n\n<pre><code>sorted [] = Both\nsorted [_] = Both\nsorted (x:y:xs) | Both &lt;- sort_yxs, x &lt; y = Ascending\n                | Ascending &lt;- sort_yxs, x &lt; y = Ascending\n                | Both &lt;- sort_yxs, x &gt; y = Descending\n                | Ascending &lt;- sort_yxs, x &gt; y = Descending\n                | otherwise = NotSorted\n    where sort_yxs = sorted (y:xs)\n</code></pre>\n\n<h1>Refactoring: make <code>TypeOfSort</code> a <code>Monoid</code></h1>\n\n<p>The above definition contains a lot of edge cases, this makes it hard to write a simple program. We can make it easier by introducing some utility functions. This can for instance be done by defining a function that takes two <code>TypeOfSort</code>s and then returns the intersection. Such a function could look like:</p>\n\n<pre><code>intersect Both x = x\nintersect x Both = x\nintersect Ascending Ascending = Ascending\nintersect Descending Descending = Descending\nintersect _ _ = NotSorted\n</code></pre>\n\n<p>This actually forms a <em>monoid</em> with <code>Both</code> as identity element:</p>\n\n<pre><code>instance Monoid where\n    mappend Both x = x\n    mappend x Both = x\n    mappend Ascending Ascending = Ascending\n    mappend Descending Descending = Descending\n    mappend _ _ = NotSorted\n\n    mempty = Both\n</code></pre>\n\n<p>Now we can rewrite our definition as:</p>\n\n<pre><code>sorted [] = Both\nsorted [_] = Both\nsorted (x:y:ys) | x &gt; y = mappend rec Ascending\n                | x &lt; y = mappend rec Descending\n                | otherwise = NotSorted\n    where rec = sorted (y:ys)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1510574761, "post_id": 47254401, "comment_id": 81478546, "body": "<code>a==True</code> is the same as <code>a</code>."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510578820, "post_id": 47254401, "comment_id": 81480938, "body": "@Will Ness this is one silly mistake i can never stop making regardless of the time. Lucky me it&#39;s harmless."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 2, "last_activity_date": 1510579962, "last_edit_date": 1510579962, "creation_date": 1510523465, "answer_id": 47254401, "question_id": 47253084, "link": "https://stackoverflow.com/questions/47253084/check-a-list-if-sorted-in-ascending-or-descending-or-not-sorted-in-haskell/47254401#47254401", "title": "Check a list if sorted in ascending or descending or not sorted in haskell?", "body": "<p>I guess you may also do as follows;</p>\n\n<pre><code>data Sorting = Why | Karma | Flat | Descent | Ascent deriving (Show)\n\nhowSorted :: Ord a =&gt; [a] -&gt; Sorting\nhowSorted xs | xs == []                    = Why\n             | all (== head xs) $ tail xs  = Flat\n             | and $ map (uncurry (&lt;=)) ts = Ascent\n             | and $ map (uncurry (&gt;=)) ts = Descent\n             | otherwise                   = Karma\n             where ts = zip xs $ tail xs\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8929215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be48b515c553d572ae2e8ba289ed0f75?s=128&d=identicon&r=PG&f=1", "display_name": "JayRowen", "link": "https://stackoverflow.com/users/8929215/jayrowen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1761, "favorite_count": 0, "accepted_answer_id": 47253311, "answer_count": 4, "score": 1, "last_activity_date": 1510587725, "creation_date": 1510515408, "question_id": 47253084, "link": "https://stackoverflow.com/questions/47253084/check-a-list-if-sorted-in-ascending-or-descending-or-not-sorted-in-haskell", "title": "Check a list if sorted in ascending or descending or not sorted in haskell?", "body": "<p>I am new in Haskell. I just studied Haskell for two weeks now. I don't really understand how the if else statement and the list comprehension for haskell works. So I wanted to make function that can figure out the sort type such as the list is sorted in ascending or descending or not sorted at all. I know how to check if the list is sorted ascending and descending but I don't know how to check if the list is not sorted at all.</p>\n\n<pre><code>data SortType = Ascending | Descending | NotSorted deriving (Show)\n\nsorted :: (Ord a) =&gt; [a] -&gt; TypeOfSort \nsorted [] = Ascending\nsorted [x] = Ascending\nsorted (x:y:xs) | x &lt; y = sorted (y:xs) \n            | otherwise = Descending\nsorted_  = Ascending\n</code></pre>\n\n<p>It would be a great help if someone could tell me how to do it. Thank you.\nP/s: this is not a homework/work stuffs but rather something I want to learn. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 2, "creation_date": 1510514105, "post_id": 47252771, "comment_id": 81455842, "body": "If you remove the type signature or replace it with <code>distance :: Floating a =&gt; (a, a) -&gt; (a, a) -&gt; a</code> it will compile just fine. The issue is that sqrt takes a floating a and you&#39;ve passed it an int, as constrained by your type signature."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510514334, "post_id": 47252771, "comment_id": 81455929, "body": "@Zpalmtree But, as an example, why does <code>sqrt 2</code> run fine and gives me <code>1.4142135623730951</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510514406, "post_id": 47252771, "comment_id": 81455948, "body": "@Elmex80s: Because the interpreter looks what the signature of <code>sqrt</code> is, and will decode to use a <code>Float</code>. In programming languages like Java, if you write <code>double x = 2;</code> it will also interpret <code>2</code> as a <code>double</code>."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510514481, "post_id": 47252771, "comment_id": 81455980, "body": "@Elmex80s If you run <code>:t 2</code> in ghci, you&#39;ll get back <code>Num p =&gt; p</code>, so 2 is an instance of the Num typeclass. If we run <code>:info Num</code> we can see that Double is an instance of Num, and Double is an instance of Floating, so the types unify and 2 becomes a double."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 3, "creation_date": 1510514550, "post_id": 47252771, "comment_id": 81456012, "body": "@Elmex90s To add to this, if you run <code>sqrt (2 :: Int)</code> it will fail as expected."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510515058, "post_id": 47252771, "comment_id": 81456205, "body": "@Zpalmtree I added my solution, thanks for your help, helped me getting to the solution."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1510515343, "post_id": 47252771, "comment_id": 81456323, "body": "Basically, Haskell 1) never performs numeric type conversions unless explicitly asked, and 2) considers numeric literals of the type required by the context. So, literals always are of the right numeric type, while variables must be converted explicitly. It can be bothersome, but I now prefer it to implicit conversion which has its own traps, e.g. in Java <code>1&#47;2*x*x</code> with double <code>x</code> will always evaluate to <code>0</code> &quot;thanks&quot; to promotion, while in Haskell does the right\u2122 thing."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1510515655, "post_id": 47252771, "comment_id": 81456440, "body": "<code>distance (x, y) (u, v) = sqrt (fromIntegral ((x - u) ^ 2 + (y - v) ^ 2))</code> is enough. You don&#39;t need the explicit <code>:: Double</code> type, since you give the explicit type signature to the function <code>distance</code>. So, with the explicit top-level type signatures (which are good practice to have, anyway), a few <code>fromIntegral</code>s here and there is usually all it takes to take care of it."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1510516849, "post_id": 47252771, "comment_id": 81456851, "body": "@WillNess Thanks, your solution was indeed the elegant solution for me. I already answered it and replied to my own question."}], "answers": [{"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 8, "last_activity_date": 1510518326, "last_edit_date": 1510518326, "creation_date": 1510516029, "answer_id": 47253185, "question_id": 47252771, "link": "https://stackoverflow.com/questions/47252771/easy-function-gives-compile-error-on-conversion-from-int-to-double/47253185#47253185", "title": "Easy function gives compile error on conversion from Int to Double", "body": "<p>Most languages only do type inference (if any) \u201cin direction of data flow\u201d. E.g., you start with a value <code>2</code> in Java or Python, that'll be an <code>int</code>. You calculate something like <code>2 + 4</code>, and the <code>+</code> operator infers from the integer arguments that the result is also <code>int</code>. In dynamic languages this is the only way that's <em>possible</em> at all (because the types are only an \u201cassociated property\u201d of values). In static languages like C++, the inference-step is only done once at compile time, but it's still done largely \u201cas if the types were associated properties of values\u201d.</p>\n\n<p>Not so in Haskell. Like other <a href=\"https://en.wikipedia.org/wiki/Hindley-Milner_type_inference\" rel=\"noreferrer\">Hindley-Milner languages</a>, it has a type system that works completely independent of any runtime data flow directions. It can still do forward-inference (<code>(2::Int) + (4::Int)</code> is unambiguously of type <code>Int</code>), but it's only a special case \u2013 types can just as well be inferred in the \u201creverse direction\u201d, i.e. if you write <code>(x + y) :: Int</code> the compiler is able to infer that both <code>x</code> and <code>y</code> must have type <code>Int</code> as well.</p>\n\n<p>This reverse-polymorphism enables many nice tricks \u2013 <a href=\"http://hackage.haskell.org/package/simple-reflect-0.3.2/docs/Debug-SimpleReflect.html\" rel=\"noreferrer\">example</a>:</p>\n\n<pre><code>Prelude Debug.SimpleReflect&gt; 2 + 4 :: Expr\n2 + 4\nPrelude Debug.SimpleReflect&gt; 7^3 :: Expr\n7 * 7 * 7\n</code></pre>\n\n<p>...but it only works if the language <em>never does implicit conversions, not even in \u201csafe<sup>\u2020</sup>, obvious cases\u201d like <code>Int -&gt; Integer</code></em>.</p>\n\n<p>Usually, the type checker automatically infers the most sensible type. For your original implementation, the checker would infer the type</p>\n\n<pre><code>distance :: Floating a =&gt; (a, a) -&gt; (a, a) -&gt; a\n</code></pre>\n\n<p>and that \u2013 or perhaps the specialised version</p>\n\n<pre><code>distance :: (Double,Double) -&gt; (Double,Double) -&gt; Double\n</code></pre>\n\n<p>is a much more sensible type than your <code>(Int, Int) -&gt; ...</code> attempt, because the Euclidean distance makes actually no sense on a discrete grid (you'd want something like a <a href=\"https://en.wikipedia.org/wiki/Taxicab_geometry\" rel=\"noreferrer\">Taxcab distance</a> there).</p>\n\n<p>What you'd <em>actually</em> want is <a href=\"http://hackage.haskell.org/package/vector-space-0.12/docs/Data-AffineSpace.html#v:distance\" rel=\"noreferrer\"><code>distance</code></a> from the <code>vector-space</code> package. This is more general, works not only on 2-tuples but any suitable space.</p>\n\n<hr>\n\n<p><sup>\u2020</sup><sub><code>Int -&gt; Double</code> is actually <em>not</em> a safe conversion \u2013 try <code>float(1000000000000000001)</code> in Python! So even without Hindley-Milner, this is not really a very smart thing to do implicitly.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "is_accepted": true, "score": 1, "last_activity_date": 1510516665, "creation_date": 1510516665, "answer_id": 47253301, "question_id": 47252771, "link": "https://stackoverflow.com/questions/47252771/easy-function-gives-compile-error-on-conversion-from-int-to-double/47253301#47253301", "title": "Easy function gives compile error on conversion from Int to Double", "body": "<p><strong>SOLVED</strong>: now I have this</p>\n\n<pre><code>distance :: (Int, Int) -&gt; (Int, Int) -&gt; Double\ndistance (x, y) (u, v) = sqrt (fromIntegral ((x - u) ^ 2 + (y - v) ^ 2)) \n</code></pre>\n"}], "owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 47253301, "answer_count": 2, "score": 0, "last_activity_date": 1510518326, "creation_date": 1510513702, "last_edit_date": 1510516647, "question_id": 47252771, "link": "https://stackoverflow.com/questions/47252771/easy-function-gives-compile-error-on-conversion-from-int-to-double", "title": "Easy function gives compile error on conversion from Int to Double", "body": "<p>Why does this easy function which computes the distance between 2 integer points in the plane not compile? </p>\n\n<pre><code>distance :: (Int, Int) -&gt; (Int, Int) -&gt; Double\ndistance (x, y) (u, v) = sqrt ((x - u) ^ 2 + (y - v) ^ 2)\n</code></pre>\n\n<p>I get the error <code>Couldn't match expected type \u2018Double\u2019 with actual type \u2018Int\u2019</code>.</p>\n\n<p>It is frustrating such an easy mathematical function consumes so much of my time. Any explanation why this goes wrong and the most elegant way to fix this is appreciated.</p>\n\n<p>This is my solution to overcome the problem</p>\n\n<pre><code>distance :: (Int, Int) -&gt; (Int, Int) -&gt; Double\ndistance (x, y) (u, v) = \n    let xd = fromIntegral x :: Double\n        yd = fromIntegral y :: Double\n        ud = fromIntegral u :: Double\n        vd = fromIntegral v :: Double\n    in sqrt ((xd - ud) ^ 2 + (yd - vd) ^ 2)\n</code></pre>\n\n<p>but there must be a more elegant way. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510511515, "post_id": 47252371, "comment_id": 81454985, "body": "I&#39;m not sure what the <code>(!!) i a</code> bit is supposed to do, but as long as the two different bits have the same return value, you can absolutely do two things, using a do block"}, {"owner": {"reputation": 51, "user_id": 8168200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-QsHbz8YjcMY/AAAAAAAAAAI/AAAAAAAAACw/jqGmmP79ahk/photo.jpg?sz=128", "display_name": "BaasBartMans", "link": "https://stackoverflow.com/users/8168200/baasbartmans"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510513252, "post_id": 47252371, "comment_id": 81455575, "body": "the (!!) i a is pick element i from list a."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510513586, "post_id": 47252371, "comment_id": 81455693, "body": "Well of course you can take an element from a, but what are you doing with it? Are you wanting to output the picture, bind it to a variable? You can use let or where to bind variables."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 2, "creation_date": 1510514093, "post_id": 47252371, "comment_id": 81455840, "body": "Why not just <code>listofpictures !! i</code>?"}, {"owner": {"reputation": 51, "user_id": 8168200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-QsHbz8YjcMY/AAAAAAAAAAI/AAAAAAAAACw/jqGmmP79ahk/photo.jpg?sz=128", "display_name": "BaasBartMans", "link": "https://stackoverflow.com/users/8168200/baasbartmans"}, "edited": false, "score": 0, "creation_date": 1510515283, "post_id": 47252371, "comment_id": 81456300, "body": "yes i could also do that, but that is not the main concern here"}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1510515371, "post_id": 47252371, "comment_id": 81456336, "body": "Would this help you <code>[doSomethingWithPicture picture | picture &lt;- listOfPictures]</code>?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510535910, "post_id": 47252371, "comment_id": 81462494, "body": "What do you mean by &quot;go to the next picture&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8168200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-QsHbz8YjcMY/AAAAAAAAAAI/AAAAAAAAACw/jqGmmP79ahk/photo.jpg?sz=128", "display_name": "BaasBartMans", "link": "https://stackoverflow.com/users/8168200/baasbartmans"}, "edited": false, "score": 0, "creation_date": 1510826492, "post_id": 47253417, "comment_id": 81603976, "body": "I wanted to constantly switch pictures to mimic animation"}], "tags": [], "owner": {"reputation": 1946, "user_id": 1432740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a84709030a711eb919bec460051eac8?s=128&d=identicon&r=PG", "display_name": "Mateusz Kowalczyk", "link": "https://stackoverflow.com/users/1432740/mateusz-kowalczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1510517404, "creation_date": 1510517404, "answer_id": 47253417, "question_id": 47252371, "link": "https://stackoverflow.com/questions/47252371/haskell-multiple-actions-within-pattern-match/47253417#47253417", "title": "Haskell multiple actions within pattern match", "body": "<p>Seeing as you're always recursively calling <code>getPicture</code>, it looks to me like you just want all the pictures in order. You also have a base case which goes back to the first picture. Don't you think <code>getPictures :: [IO Picture] -&gt; IO [Picture]</code> looks like a more suitable signature? It would just get all pictures in a sequence, no need to manually keep track of <code>i</code>.</p>\n\n<p>Luckily there's <code>sequence</code> from <code>Control.Monad</code> which can do exactly this for you. We'll throw in a <code>cycle</code> which accommodates the \"go back to the beginning\" part.</p>\n\n<pre><code>do\n  pictures &lt;- cycle &lt;$&gt; sequence getPictures\n  \u2026 -- animate the pictures as you wish\n</code></pre>\n\n<p>Of course I'm just guessing what you might actually want. For example, this will keep all the pictures (frames?) loaded in memory.</p>\n"}], "owner": {"reputation": 51, "user_id": 8168200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-QsHbz8YjcMY/AAAAAAAAAAI/AAAAAAAAACw/jqGmmP79ahk/photo.jpg?sz=128", "display_name": "BaasBartMans", "link": "https://stackoverflow.com/users/8168200/baasbartmans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510517404, "creation_date": 1510511371, "last_edit_date": 1510511544, "question_id": 47252371, "link": "https://stackoverflow.com/questions/47252371/haskell-multiple-actions-within-pattern-match", "title": "Haskell multiple actions within pattern match", "body": "<p>For a game I want to use animations, for that I want to pick a picture from a list, and then go to the next picture. However, for that I would need to do two things within one function which is not possible I think.</p>\n\n<pre><code>getPicture :: [IO Picture] -&gt; Int -&gt; IO Picture\ngetPicture a i | i &lt; length a = (!!) i a &amp;&amp; getPicture a (i+1)\n               | otherwise    = (!!) i a &amp;&amp; getPicture a (0)\n</code></pre>\n\n<p>Obviously I cannot use <code>&amp;&amp;</code> to proceed to the next part, but I was wondering if there was a possibility to do this?</p>\n"}, {"tags": ["haskell", "recursion", "syntax", "sum"], "comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1510509194, "post_id": 47251628, "comment_id": 81454210, "body": "For reference, the idiomatic way to write this would be <code>f n = sum $ (\\d -&gt; d * (n `quot` d)) &lt;$&gt; [1..n+1]</code>. I use <code>quot</code> instead of <code>div</code> because it is more efficient. <code>d</code> will never be negative, so it will behave the same. Also, <code>read &lt;$&gt; getLine</code> (aka first two lines of <code>main</code>) is better written <code>readLn</code>, and you do not need a <code>return ()</code>, because <code>putStrLn _ :: IO ()</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1510509537, "post_id": 47251628, "comment_id": 81454330, "body": "Less expensively, <code>d*(n&#47;&#47;d) == n - n % d</code>."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8926565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/194368687cbe9133dc51a8b7c399172b?s=128&d=identicon&r=PG&f=1", "display_name": "user8926565", "link": "https://stackoverflow.com/users/8926565/user8926565"}, "edited": false, "score": 0, "creation_date": 1510507727, "post_id": 47251725, "comment_id": 81453700, "body": "For some reason it gives me a parse error on that first <code>|</code>"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 87, "user_id": 8926565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/194368687cbe9133dc51a8b7c399172b?s=128&d=identicon&r=PG&f=1", "display_name": "user8926565", "link": "https://stackoverflow.com/users/8926565/user8926565"}, "edited": false, "score": 0, "creation_date": 1510507804, "post_id": 47251725, "comment_id": 81453724, "body": "@user8926565 Have you indented it with a tab? Whitespace is significant in some places in haskell."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 87, "user_id": 8926565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/194368687cbe9133dc51a8b7c399172b?s=128&d=identicon&r=PG&f=1", "display_name": "user8926565", "link": "https://stackoverflow.com/users/8926565/user8926565"}, "edited": false, "score": 0, "creation_date": 1510508287, "post_id": 47251725, "comment_id": 81453863, "body": "@user8926565 It&#39;s because you&#39;re in a do block, which is in the IO monad instead of in pure code. I updated my answer to show a few ways to use the function"}], "tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 1, "last_activity_date": 1510508559, "last_edit_date": 1510508559, "creation_date": 1510507621, "answer_id": 47251725, "question_id": 47251628, "link": "https://stackoverflow.com/questions/47251628/how-to-write-this-as-a-recursive-haskell-function/47251725#47251725", "title": "How to write this as a recursive Haskell function?", "body": "<p>The example you gave is nearly correct.</p>\n\n<p>The correct way to write it is as follows:</p>\n\n<pre><code>f d n = if d == 0 then 0 else d * (n `div` d) + f (d-1) n\n</code></pre>\n\n<p>Integer division in haskell is done with the <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:div\" rel=\"nofollow noreferrer\">div</a> keyword, whereas normal division is done with <code>/</code> as expected.</p>\n\n<p>Secondly, in haskell you don't need to use brackets for function arguments, except where to ensure the correct precedence. In the above code, we need brackets for <code>(d-1)</code> to indicate it is one parameter, and n is the second parameter.</p>\n\n<p>Finally, when writing pure code, it's generally a lot nicer to use guard syntax instead of if then else, like below:</p>\n\n<pre><code>f d n\n    | d == 0 = 0\n    | otherwise = d * (n `div` d) + f (d-1) n\n</code></pre>\n\n<p>If you do use if then else, it's generally a good idea to split into multiple lines, so it's a bit easier to read.</p>\n\n<pre><code>f d n = if d == 0\n            then 0\n            else d * (n `div` d) + f (d-1) n\n</code></pre>\n\n<p>And depending on the function, it might be a good idea to give the function name and parameters better names.</p>\n\n<p>If you're calling this from a do block, there's a few ways to approach it.</p>\n\n<pre><code>f d n\n    | d == 0 = 0\n    | otherwise = d * (n `div` d) + f (d-1) n\n\nmain = do\n    input_line &lt;- getLine\n    let n = read input_line :: Int\n        output = f n n\n\n    print output\n\n    -- or convert to string manually\n\n    putStrLn (show output)\n\n    -- or call without binding to a variable\n\n    -- $ is sort of like putting brackets around the f n n, so it is one\n    -- parameter to print\n    print $ f n n\n\n    putStrLn . show $ f n n\n\n    {- or we can bind the function to a let block - must be double indented\n    let f d n\n            | d == 0 = 0\n            | otherwise = d * (n `div` d) + f (d - 1) n -}\n\n\n\n    return ()\n\n    {- you can also make functions in where blocks\n    where f d n\n        | d == 0 = 0\n        | otherwise = d * (n `div` d) + f (d-1) n -}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1510524173, "creation_date": 1510524173, "answer_id": 47254514, "question_id": 47251628, "link": "https://stackoverflow.com/questions/47251628/how-to-write-this-as-a-recursive-haskell-function/47254514#47254514", "title": "How to write this as a recursive Haskell function?", "body": "<p>First, I wouldn't use a loop in the Python version, either:</p>\n\n\n\n<pre><code>def f(n):\n    # s=0\n    # for d in range(1,n+1):\n    #     s+=d*(n//d)\n    # return(s)\n    return sum(d*(n//d) for d in range(1, n+1))\n</code></pre>\n\n<p>This is a natural approach in Haskell, as well.</p>\n\n<pre><code>f n = sum [d*(n `div` d) | d &lt;- [1..n]]\n</code></pre>\n\n<p>However, this is inefficient, as you are performing a multiplication and a division for each element of the range. Instead, start by recognizing that</p>\n\n<pre><code>d * (n // d) == n - n % d  # Python\nd * (n `div` d) == n - n `mod` d  # Haskell\n</code></pre>\n\n<p>which means you could write</p>\n\n<pre><code>sum(n - n % d for d in range(1, n+1)  # Python\nsum [n - n `mod` d | d &lt;- [1..n]]  # Haskell\n</code></pre>\n\n<p>You can take this a step further; the first <code>n</code> term doesn't depend on <code>d</code>, so you can pull that out of the sum and just multiply once:</p>\n\n<pre><code>n * n - sum(n % d for d in range(1, n+1))  # Python\nn*n - sum [n `mod` d | d &lt;- [1..n]]  # Haskell\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8926565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/194368687cbe9133dc51a8b7c399172b?s=128&d=identicon&r=PG&f=1", "display_name": "user8926565", "link": "https://stackoverflow.com/users/8926565/user8926565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 47251725, "answer_count": 2, "score": 1, "last_activity_date": 1510659265, "creation_date": 1510507102, "last_edit_date": 1510507867, "question_id": 47251628, "link": "https://stackoverflow.com/questions/47251628/how-to-write-this-as-a-recursive-haskell-function", "title": "How to write this as a recursive Haskell function?", "body": "<p>I'll illustrate what I want to do using Python (I want to write this in Haskell). I have this function:</p>\n\n<pre><code>def f(n):\n    s=0\n    for d in range(1,n+1):\n        s+=d*(n//d)\n    return(s)\n</code></pre>\n\n<p>Which is basically looping from d=1 to n inclusive, and summing up the values of d times the floor of n/d.</p>\n\n<p>In want to do this in Haskell which I believe requires recursion. Python equivalent:</p>\n\n<pre><code>def f(d, n):\n    if d == 0: return 0\n    else: return d*(n//d) + f(d-1, n)\n</code></pre>\n\n<p>and then I'd call the function with <code>f(n, n)</code>.</p>\n\n<p>What's the correct way to write this?</p>\n\n<p>My attempt:</p>\n\n<pre><code>   f (d n) = if d == 0 then 0 else d * (n//d) + f (d - 1 n)\n</code></pre>\n\n<p>edit, full code:</p>\n\n<pre><code>main = do\n    input_line &lt;- getLine\n    let n = read input_line :: Int\n    f d n\n        | d == 0 = 0\n        | otherwise = d * (n `div` d) + f (d-1) n\n    putStrLn f n n\n    return ()\n</code></pre>\n"}, {"tags": ["parsing", "haskell", "command-line", "optparse-applicative"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8618191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSf5ZeAQYC0/AAAAAAAAAAI/AAAAAAAAAUo/-cJCCTBFnt0/photo.jpg?sz=128", "display_name": "Alex k", "link": "https://stackoverflow.com/users/8618191/alex-k"}, "edited": false, "score": 0, "creation_date": 1510500714, "post_id": 47248946, "comment_id": 81451249, "body": "Thanks a lot! It may seem trivial for you, but I am beginning with Haskell, and I thought about a problem in the code, not in the imports at all. Thanks again!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 13, "user_id": 8618191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSf5ZeAQYC0/AAAAAAAAAAI/AAAAAAAAAUo/-cJCCTBFnt0/photo.jpg?sz=128", "display_name": "Alex k", "link": "https://stackoverflow.com/users/8618191/alex-k"}, "edited": false, "score": 0, "creation_date": 1510502299, "post_id": 47248946, "comment_id": 81451803, "body": "@Alexk Yeah, this is not obvious. It looks like the examples were written for an earlier version of optparse-applicative, which did export <code>(&lt;&gt;)</code>, but that was changed for a reason I don&#39;t understand: <a href=\"https://github.com/pcapriotti/optparse-applicative/issues/224\" rel=\"nofollow noreferrer\">github.com/pcapriotti/optparse-applicative/issues/224</a>"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1510490825, "creation_date": 1510490825, "answer_id": 47248946, "question_id": 47248839, "link": "https://stackoverflow.com/questions/47248839/error-variable-not-in-scope-with-the-library-optparse-applicative/47248946#47248946", "title": "Error: &quot;Variable not in scope: (&lt;&gt;)&quot; with the library optparse-applicative", "body": "<p><a href=\"http://hackage.haskell.org/package/optparse-applicative-0.14.0.0/docs/Options-Applicative.html#t:Parser\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/optparse-applicative-0.14.0.0/docs/Options-Applicative.html#t:Parser</a>:</p>\n\n<blockquote>\n  <p>A modifier can be created by composing the basic modifiers provided by here using the <code>Monoid</code> operations <code>mempty</code> and <code>mappend</code>, or their aliases <code>idm</code> and <code>&lt;&gt;</code>.</p>\n</blockquote>\n\n<p>It looks like it doesn't export <code>&lt;&gt;</code>, though, so you need to get it from <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Monoid.html#v:-60--62-\" rel=\"nofollow noreferrer\"><code>Data.Monoid</code></a>:</p>\n\n<pre><code>import Data.Monoid\n</code></pre>\n\n<p>... or just:</p>\n\n<pre><code>import Data.Monoid ((&lt;&gt;))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8618191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSf5ZeAQYC0/AAAAAAAAAAI/AAAAAAAAAUo/-cJCCTBFnt0/photo.jpg?sz=128", "display_name": "Alex k", "link": "https://stackoverflow.com/users/8618191/alex-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510526625, "creation_date": 1510490096, "last_edit_date": 1510526625, "question_id": 47248839, "link": "https://stackoverflow.com/questions/47248839/error-variable-not-in-scope-with-the-library-optparse-applicative", "title": "Error: &quot;Variable not in scope: (&lt;&gt;)&quot; with the library optparse-applicative", "body": "<p>I was watching a video made by Richard Cook on SafariBookOnline. He builds a command line app with Haskell. In this video, he explains some basic concepts while writing a program to parse command lines arguments.</p>\n\n<p>I am quite new to Haskell, and I can't figure out why this code does not work:</p>\n\n<pre><code>dataPathParser :: Parser FilePath\ndataPathParser = strOption $\n  value defaultDataPath\n  &lt;&gt; long \"data-path\"\n  &lt;&gt; short 'p'\n  &lt;&gt; metavar \"DATAPATH\"\n  &lt;&gt; help (\"path to data file (default \" ++ defaultDataPath ++ \")\")\n</code></pre>\n\n<p>This code does not work at well:</p>\n\n<pre><code>itemDescriptionValueParser :: Parser String\nitemDescriptionValueParser =\n  strOption (long \"desc\" &lt;&gt; short 'd' &lt;&gt; metavar \"DESCRIPTION\" &lt;&gt; help \"description\")\n</code></pre>\n\n<p>And actually, everywhere I wrote \"&lt;>\", I got an error where the compiler tells me that:</p>\n\n<pre><code>\u2022 Variable not in scope:\n    (&lt;&gt;) :: Mod f5 a5 -&gt; Mod f4 a4 -&gt; Mod ArgumentFields ItemIndex\n\u2022 Perhaps you meant one of these:\n    \u2018&lt;$&gt;\u2019 (imported from Options.Applicative),\n    \u2018&lt;*&gt;\u2019 (imported from Options.Applicative),\n    \u2018&lt;|&gt;\u2019 (imported from Options.Applicative)\n</code></pre>\n\n<p>The problem I got is most probably due to the difference of versions of GHC and Optparse-applicative. I use the latest ones.\nLTS Haskell 9.12:   0.13.2.0.</p>\n\n<p>But since I am quite new, I can't figure out how to rewrite the code of Richard Cook.</p>\n\n<p>I would appreciate any help. </p>\n\n<p>Thanks in advance,\nAlex</p>\n"}, {"tags": ["scala", "haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 5, "creation_date": 1510489794, "post_id": 47248719, "comment_id": 81447694, "body": "I wonder how this is \u201cthe same\u201d... seems to be two very different functions."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 1, "creation_date": 1510489812, "post_id": 47248719, "comment_id": 81447702, "body": "What are you trying to do exactly? <code>Array[Byte]</code> is not a type class. Are you trying to say that <code>A</code> and <code>B</code> must be equal to <code>Array[Byte]</code>? That&#39;d be like doing <code>f :: (a ~ [Byte]) =&gt; a -&gt; a -&gt; a</code> in Haskell - you can do that with the right extensions, but it&#39;s pretty nonsensical since it&#39;s equivalent to <code>f :: [Byte] -&gt; [Byte] -&gt; [Byte]</code>, so why (pretend to) have the type variable at all?"}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510490541, "post_id": 47248719, "comment_id": 81447972, "body": "What I want to do is, avoid writing type several times, like:  <code>sendMessage(producer: Eval[KafkaProducer[Array[Byte], Array[Byte]]])(pr: Eval[ProducerRecord[Array[Byte], Array[Byte]]])</code>. As you can I see, I have to write <code>Array[Byte]</code> four times."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510490633, "post_id": 47248719, "comment_id": 81447999, "body": "How to constraint, a type parameter to a typeclass in scala?"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 3, "creation_date": 1510490855, "post_id": 47248719, "comment_id": 81448080, "body": "@zero_coding &quot;How to avoid writing the same type name multiple times?&quot; and &quot;How to constraint a type parameter to a typeclass?&quot; are two fundamentally different questions, which makes me think that you don&#39;t understand what <code>Num a =&gt; a -&gt; a -&gt; a</code> does in Haskell (it&#39;s not a shortcut for <code>Num -&gt; Num -&gt; Num</code>, which isn&#39;t even legal unless you define a type named <code>Num</code>). You constrain a type parameter to a typeclass using <code>[TypeParameter : TypeClass]</code>, but <code>Array[Byte]</code> is <i>not</i> a typeclass. To avoid typing, you can just use a type alias."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510491690, "post_id": 47248719, "comment_id": 81448352, "body": "Thanks a lot. I did it."}], "answers": [{"comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1510490340, "post_id": 47248787, "comment_id": 81447895, "body": "The <code>Byte</code> class if final, so there can&#39;t be any subclasses of it. So you might as well do <code>sendMessage(producer: Eval[KafkaProducer[Array[Byte]])(pr: Eval[KafkaProducer[Array[Byte]])</code>"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1510490592, "last_edit_date": 1510490592, "creation_date": 1510489783, "answer_id": 47248787, "question_id": 47248719, "link": "https://stackoverflow.com/questions/47248719/arraybyte-does-not-take-type-parameters/47248787#47248787", "title": "Array[Byte] does not take type parameters", "body": "<p>If you know that always takes an Array, just constraint the inside type, and the types are equal, so you just need one type variable, and then the type you want to be subtype, I'm not sure if Byte can be subtyped so:</p>\n\n<pre><code>def sendMessage[A&lt;:YourClass](producer: Eval[KafkaProducer[Array [A]])(pr: Eval[KafkaProducer[Array [A]]) =...\n</code></pre>\n\n<p>But I think you can just do in your case:</p>\n\n<pre><code>def sendMessage(producer: Eval[KafkaProducer[Array [Byte]])(pr: Eval[KafkaProducer[Array [Byte]]) =...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 5, "last_activity_date": 1510492797, "last_edit_date": 1510492797, "creation_date": 1510492470, "answer_id": 47249215, "question_id": 47248719, "link": "https://stackoverflow.com/questions/47248719/arraybyte-does-not-take-type-parameters/47249215#47249215", "title": "Array[Byte] does not take type parameters", "body": "<p>In Scala type classes are represented as generic traits whose instances are passed as implicit parameters. As an example take the following Haskell type class:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>class Foo a where\n    foo :: a\n    bar :: a -&gt; a -&gt; a\n\nf :: Foo a =&gt; a -&gt; a\nf x = bar foo x\n\ninstance Foo Int where\n    foo = 42\n    bar x y = x + y\n\nf 23 -- Result: 42 + 23 = 65\n</code></pre>\n\n<p>The Scala equivalent would look like this:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>// class Foo a\ntrait Foo[A] {\n    def foo: A\n    def bar(x: A, y: A): A\n}\n\ndef f[A](x: A)(implicit foo: Foo[A]) = foo.bar(foo.foo, x)\n\n// instance Foo Int\nimplicit case object FooInt extends Foo[Int] {\n    def foo = 42\n    def bar(x: Int, y: Int) = x + y\n}\n\nf(23) // Result: 42 + 23 = 65\n</code></pre>\n\n<p>There's also a shortcut to define the implicit parameter: <code>def f[A: Foo](x: A)</code> is short for <code>def f[A](x: A)(implicit _unnamed: Foo[A])</code>. However this means that you can't access the instance of the type class directly in the body (because you don't give it a name), so it's only useful when all you do is pass the type class instance around to other methods (which can be done implicitly and thus does not require a name).</p>\n\n<p>In Scala the <code>Num</code> type class is called <code>Numeric</code> instead, which offers methods like <code>plus</code> and <code>times</code>. So to do the same thing as your Haskell example, you can write:</p>\n\n<pre><code>def f[A](x: A, y: A)(implicit num: Numeric[A]) = num.times(x,y)\n</code></pre>\n\n<hr>\n\n<p>The reason that your attempt with <code>Array[Byte]</code> did not work is because <code>Array[Byte]</code> is not a type class. Specifically the <code>A: Array[Byte]</code> shorthand expands to this:</p>\n\n<pre><code>def sendMessage[A, B](producer: Eval[KafkaProducer[A, B]])(pr: Eval[ProducerRecord[A, B]])(implicit _unamed1: Array[Byte][A], implicit _unnamed2: Array[Byte][B])\n</code></pre>\n\n<p>Looking at that it should be clear why that does not work: <code>Array[Byte][A]</code> just makes no sense.</p>\n\n<p>According to your comments you simply want to avoid writing <code>Array[Byte]</code> multiple times. This has nothing whatsoever to do with type classes (neither in Haskell nor in Scala). You can simply use a type alias for that.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1322, "favorite_count": 1, "accepted_answer_id": 47249215, "answer_count": 2, "score": 1, "last_activity_date": 1510492797, "creation_date": 1510489366, "question_id": 47248719, "link": "https://stackoverflow.com/questions/47248719/arraybyte-does-not-take-type-parameters", "title": "Array[Byte] does not take type parameters", "body": "<p>In Haskell, I can constraint a parameter to a type class, for example:</p>\n\n<pre><code>Prelude&gt; f x y = x * y\nPrelude&gt; :t f\nf :: Num a =&gt; a -&gt; a -&gt; a\n</code></pre>\n\n<p>I was trying to do the same in <code>Scala</code> as following:  </p>\n\n<pre><code>def sendMessage[A: Array[Byte], B: Array[Byte]](producer: Eval[KafkaProducer[A, B]])(pr: Eval[ProducerRecord[A, B]]) =  \n</code></pre>\n\n<p>But the compiler complains:  </p>\n\n<pre><code>[error] /home/developer/Desktop/scala/PureProducer/src/main/scala/TheProducer.scala:39:20: Array[Byte] does not take type parameters\n[error]   def sendMessage[A: Array[Byte], B: Array[Byte]](producer: Eval[KafkaProducer[A, B]])(pr: Eval[ProducerRecord[A, B]]) =  \n</code></pre>\n\n<p>How to constraint a type parameter in Scala? </p>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "edited": false, "score": 0, "creation_date": 1510487910, "post_id": 47245895, "comment_id": 81447072, "body": "What&#39;s the error message? And how about using this method &quot;import Mod as Foo&quot; to give three modules different names? Just a guess."}, {"owner": {"reputation": 1029, "user_id": 668074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f82d3dd033cd691ad5340b9620bdcf38?s=128&d=identicon&r=PG", "display_name": "user668074", "link": "https://stackoverflow.com/users/668074/user668074"}, "reply_to_user": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "edited": false, "score": 0, "creation_date": 1510501735, "post_id": 47245895, "comment_id": 81451587, "body": "@JohnnyLiao, I added the error message that I get. I also tried importing the module with <code>as</code> but I got the same error message."}], "answers": [{"tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1510522174, "last_edit_date": 1510522174, "creation_date": 1510498421, "answer_id": 47250193, "question_id": 47245895, "link": "https://stackoverflow.com/questions/47245895/how-do-i-use-packageimports-properly-in-ghci/47250193#47250193", "title": "How do I use PackageImports properly in ghci?", "body": "<p>Perhaps the easiest way is to avoid <code>PackageImports</code> and instead rename the packages when starting ghci, using the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/packages.html\" rel=\"nofollow noreferrer\">-package</a> option:</p>\n\n<pre><code>ghci -package \"crypto-api (Crypto.Random as A)\" -package \"cryptonite (Crypto.Random as B)\"\n</code></pre>\n\n<p>Once in ghci, you could import the renamed modules:</p>\n\n<pre><code>Prelude&gt; import A\nPrelude A&gt; import B\nPrelude A B&gt;\n</code></pre>\n\n<hr>\n\n<p>The syntax <code>-package \"crypto-api (Crypto.Random as A)\"</code> makes only the <code>Crypto.Random</code> module available to ghci, but not the other modules in the package.</p>\n\n<p>According to the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/packages.html#package-thinning-and-renaming\" rel=\"nofollow noreferrer\">Thinning and renaming modules</a> section of the GHC user guide:</p>\n\n<blockquote>\n  <p>We also support renaming of modules, in case you need to refer to both\n  modules simultaneously; this is supporting by writing OldModName as\n  NewModName, e.g. -package \"base (Data.Bool as Bool). You can also\n  write -package \"base with (Data.Bool as Bool) to include all of the\n  original bindings (e.g. the renaming is strictly additive).</p>\n</blockquote>\n\n<p>So perhaps it's better to write the options like <code>-package \"crypto-api with (Crypto.Random as A)\"</code> to maintain access to all the modules.</p>\n\n<hr>\n\n<p>Using <code>PackageImports</code> instead of thinning and renaming modules has the problem that it makes the source code dependent on the precise packages in which imported modules live. If a module changes packages that breaks the program.</p>\n"}, {"comments": [{"owner": {"reputation": 1029, "user_id": 668074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f82d3dd033cd691ad5340b9620bdcf38?s=128&d=identicon&r=PG", "display_name": "user668074", "link": "https://stackoverflow.com/users/668074/user668074"}, "edited": false, "score": 0, "creation_date": 1510532443, "post_id": 47251078, "comment_id": 81461731, "body": "I&#39;ve edited my initial question because I guess I didn&#39;t write it clearly. I wasn&#39;t trying to import <code>DRBG</code> twice, I was just trying to show that two ways of importing <code>DRBG</code> with <code>PackageImports</code> didn&#39;t work. The <code>cryptonite</code> package isn&#39;t directly involved with the error, but the reason I&#39;m using <code>PackageImports</code> in the first place is that <code>cryptonite</code> and <code>crypto-api</code> have shared module names, so I think it&#39;s worth mentioning. I know that I can import them from a file but I want to know if this can be done if ghci without causing a bug."}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 0, "last_activity_date": 1510503662, "creation_date": 1510503662, "answer_id": 47251078, "question_id": 47245895, "link": "https://stackoverflow.com/questions/47245895/how-do-i-use-packageimports-properly-in-ghci/47251078#47251078", "title": "How do I use PackageImports properly in ghci?", "body": "<p>Why would you expect that to work at all?</p>\n\n<pre><code>:set -XPackageImports\nimport \"crypto-api\" Crypto.Random\nimport Crypto.Random.DRBG  -- Error!\nimport \"DRBG\" Crypto.Random.DRBG -- Error!\n</code></pre>\n\n<p>You have imported the DRBG module twice and from the same package.  From your question I thought you'd want to get the <code>Crypto.Random</code> modules from crypto-api and cryptonite but I don't see any attempt to use cryptonite at all here.</p>\n\n<p>Just so we're clear, I can reproduce the error I think you were getting via GHCi:</p>\n\n<pre><code>Prelude&gt; :set -XPackageImports\nPrelude&gt; import \"crypto-api\" Crypto.Random as OriginalRandom\nPrelude OriginalRandom&gt; import \"cryptonite\" Crypto.Random as ConflictRandom\n\n&lt;interactive&gt;:1:1: error:\n    Ambiguous module name \u2018Crypto.Random\u2019:\n      it was found in multiple packages:\n      crypto-api-0.13.2 cryptonite-0.24\n</code></pre>\n\n<p>But it all works when you load it from a file so this is just a bug and can be avoided:</p>\n\n<pre><code>% cat t.hs\n{-# LANGUAGE PackageImports #-}\n\nimport \"crypto-api\" Crypto.Random as OriginalRandom\nimport \"cryptonite\" Crypto.Random as ConflictRandom\nimport Crypto.Random.DRBG -- This only appears in one package\n% ghci t.hs\nGHCi, version 8.2.1: http://www.haskell.org/ghc/  :? for help\nLoaded GHCi configuration from /Users/tommd/.ghci\n[1 of 1] Compiling Main             ( t.hs, interpreted )\nOk, 1 module loaded.\n*Main&gt;\n</code></pre>\n\n<p>Notice that DRBG is not part of this discussion.  It doesn't have any conflicting modules names with anything on hackage as far as I know.</p>\n"}], "owner": {"reputation": 1029, "user_id": 668074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f82d3dd033cd691ad5340b9620bdcf38?s=128&d=identicon&r=PG", "display_name": "user668074", "link": "https://stackoverflow.com/users/668074/user668074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1510532181, "creation_date": 1510465619, "last_edit_date": 1510532181, "question_id": 47245895, "link": "https://stackoverflow.com/questions/47245895/how-do-i-use-packageimports-properly-in-ghci", "title": "How do I use PackageImports properly in ghci?", "body": "<p>I want to do testing in ghci and I'm running into problems with similarly named modules in different packages (this is basically a continuation of my previous question: <a href=\"https://stackoverflow.com/questions/47110907/what-should-i-do-if-two-modules-share-the-same-name/47111418#47111418\">What should I do if two modules share the same name?</a>)</p>\n\n<p>The packages in question are <code>crypto-api</code>, <code>cryptonite</code>, and <code>DRBG</code>. They all provides modules involving <code>Crypto.Random</code>. I'm using <code>PackageImports</code> in ghci to work fix this issue.</p>\n\n<p>However, it seems that the order of using <code>PackageImports</code> is important.</p>\n\n<p>This works (in ghci):</p>\n\n<pre><code>:set -XPackageImports\nimport Crypto.Random.DRBG\nimport \"crypto-api\" Crypto.Random\n</code></pre>\n\n<p>This does not work:</p>\n\n<pre><code>:set -XPackageImports\nimport \"crypto-api\" Crypto.Random\nimport Crypto.Random.DRBG  -- Error!\n</code></pre>\n\n<p>Also this does not work:</p>\n\n<pre><code>:set -XPackageImports\nimport \"crypto-api\" Crypto.Random\nimport \"DRBG\" Crypto.Random.DRBG -- Error!\n</code></pre>\n\n<p>The error that appears is:</p>\n\n<pre><code>&lt;interactive&gt;:1:1: error:\nAmbiguous interface for \u2018Crypto.Random\u2019:\n  it was found in multiple packages:\n  crypto-api-0.13.2 cryptonite-0.23\n</code></pre>\n\n<p>Am I doing something wrong or is this a bug?</p>\n"}, {"tags": ["haskell", "docker", "docker-compose", "hostname", "alpine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510447219, "post_id": 47244229, "comment_id": 81439042, "body": "Have you tried <code>strace</code>?"}, {"owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510447965, "post_id": 47244229, "comment_id": 81439164, "body": "Inside Docker (running <code>strace -p 1</code> as root): <code>strace: attach: ptrace(PTRACE_ATTACH, 1): Operation not permitted</code>"}, {"owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1510479978, "post_id": 47244229, "comment_id": 81444966, "body": "Does haskell build a binary that you run without an interpreter? i.e unlike java, ruby or nodejs which need an external binary to run code."}, {"owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "reply_to_user": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "edited": false, "score": 0, "creation_date": 1510484473, "post_id": 47244229, "comment_id": 81446087, "body": "@Matt, yes, I am generating statically linked binary."}], "answers": [{"comments": [{"owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "edited": false, "score": 0, "creation_date": 1510484390, "post_id": 47247521, "comment_id": 81446064, "body": "Yes, I am creating statically linked binary, here&#39;s build command: <a href=\"https://github.com/carbolymer/docker-images/blob/master/haskell-stack/stack-build-static\" rel=\"nofollow noreferrer\">github.com/carbolymer/docker-images/blob/master/haskell-stac&zwnj;&#8203;k/&hellip;</a> . I suppose the issue here is the <code>network</code> Haskell package, which still requires original glibc. The question here is, is musl libc compatible with GNU libc?  Btw. The article you linked is outdated and does not work with ghc-8.2.1."}], "tags": [], "owner": {"reputation": 50397, "user_id": 1318694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JPEVC.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1318694/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1510481018, "creation_date": 1510481018, "answer_id": 47247521, "question_id": 47244229, "link": "https://stackoverflow.com/questions/47244229/haskell-hostname-resolution-inside-alpine-docker-image-does-not-work/47247521#47247521", "title": "Haskell - hostname resolution inside Alpine Docker image does not work", "body": "<p>It sounds like you are missing some linked dependencies for your Haskell code to run. </p>\n\n<p>Alpine uses <a href=\"https://www.musl-libc.org/\" rel=\"nofollow noreferrer\">musl libc</a> to cutdown on size which means most standard linked binaries won't run from the standard distros as they use <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">GNU libc</a>. Either compile your app as normal in an <a href=\"https://hub.docker.com/r/q4uw/haskell_build_env/\" rel=\"nofollow noreferrer\">alpine image</a> or create a <a href=\"https://www.fpcomplete.com/blog/2016/10/static-compilation-with-stack\" rel=\"nofollow noreferrer\">statically linked binary to run in any Linux distro/container</a>.</p>\n\n<p>The base Debian layer is shared between any image that uses it, so you're probably not saving as much space as you think in any case. If it's going to be easier to use the Debian image, then use that. </p>\n"}, {"tags": [], "owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "is_accepted": true, "score": 2, "last_activity_date": 1511200031, "last_edit_date": 1511200031, "creation_date": 1511174777, "answer_id": 47390194, "question_id": 47244229, "link": "https://stackoverflow.com/questions/47244229/haskell-hostname-resolution-inside-alpine-docker-image-does-not-work/47390194#47390194", "title": "Haskell - hostname resolution inside Alpine Docker image does not work", "body": "<p>I couldn't manage to install GHC 8.2.1 on alpine + musl libc. As a workaround I tried to use <a href=\"https://hub.docker.com/r/frolvlad/alpine-glibc/\" rel=\"nofollow noreferrer\">alpine-glibc</a> image, but it resulted in the segfaults whenever my application tried to resolve host names. <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=10652\" rel=\"nofollow noreferrer\">It turns out, that this is known bug in glibc.</a></p>\n\n<p>The solution is to use dynamically linked binary + <a href=\"https://hub.docker.com/r/frolvlad/alpine-glibc/\" rel=\"nofollow noreferrer\">alpine-glibc</a> image + install <a href=\"https://pkgs.alpinelinux.org/packages?name=gmp-dev&amp;branch=&amp;repo=&amp;arch=&amp;maintainer=\" rel=\"nofollow noreferrer\"><code>gmp-dev</code></a> additionally.</p>\n"}], "owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 47390194, "answer_count": 2, "score": 6, "last_activity_date": 1511200031, "creation_date": 1510446081, "last_edit_date": 1510448114, "question_id": 47244229, "link": "https://stackoverflow.com/questions/47244229/haskell-hostname-resolution-inside-alpine-docker-image-does-not-work", "title": "Haskell - hostname resolution inside Alpine Docker image does not work", "body": "<h1>The Issue</h1>\n\n<p>I am trying to create docker image with the Haskell application inside. however, the domain name resolution of hostnames of other containers in the network in my application inside docker container fails (but I am able to <code>wget</code> / <code>ping</code> other containers and their hostnames are correctly resolved).</p>\n\n<p>To find the root cause I tried to resolve manually hostnames (using <code>Network.DNS</code> package) and use only IP addresses in <code>servant-client</code>. However this yields just cryptic error message:</p>\n\n<p><code>Network.BSD.getProtocolByName: does not exist (no such protocol name: udp)\n</code></p>\n\n<p>I think I am missing some packages inside my docker image. I've tried installing <a href=\"https://pkgs.alpinelinux.org/package/v3.6/main/x86_64/libc6-compat\" rel=\"noreferrer\"><code>libc6-compat</code></a> but without success (<code>libc6</code> from Debian was used to compile Haskell application). Moreover <code>/etc/protocols</code> contains correct entries. What else is missing inside a docker image?</p>\n\n<h1>Docker images</h1>\n\n<p>The docker image I am using to run the application is <code>alpine:3.6</code> - <a href=\"https://github.com/carbolymer/blockchain/blob/0b041875f71b2a09dc8568ee7b0cc22460fd5624/Dockerfile-run\" rel=\"noreferrer\">Whole dockerfile, there's not much in it</a>. This is different image than used to build the application (It is ~20x smaller).</p>\n\n<p>The docker image I am using to build the haskell app is based on <code>debian:stretch</code>. <a href=\"https://github.com/carbolymer/docker-images/blob/master/haskell-stack/Dockerfile\" rel=\"noreferrer\">Dockerfile</a>.</p>\n\n<p>Whole source code with the build instructions is available here (Angular part can be skipped):</p>\n\n<p><a href=\"https://github.com/carbolymer/blockchain/tree/0b041875f71b2a09dc8568ee7b0cc22460fd5624\" rel=\"noreferrer\">https://github.com/carbolymer/blockchain/tree/0b041875f71b2a09dc8568ee7b0cc22460fd5624</a></p>\n"}, {"tags": ["haskell", "opengl", "glut"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 3, "creation_date": 1510471074, "post_id": 47244111, "comment_id": 81443143, "body": "You probably need to enable alpha blending. In C, this is done with <code>glEnable(GL_BLEND)</code>. Not sure, how you do this in Haskell."}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 3, "last_activity_date": 1510484281, "creation_date": 1510484281, "answer_id": 47247967, "question_id": 47244111, "link": "https://stackoverflow.com/questions/47244111/transparency-alpha-with-haskell-glut-bindings/47247967#47247967", "title": "Transparency/Alpha with haskell GLUT bindings", "body": "<p>Taken from the <a href=\"https://github.com/haskell-opengl/GLUT/blob/master/examples/RedBook4/Alpha.hs\" rel=\"nofollow noreferrer\">Alpha.hs</a> example.</p>\n\n<pre><code>-- Initialize alpha blending function.\nmyInit :: IO ()\nmyInit = do\n   blend $= Enabled\n   blendFunc $= (SrcAlpha, OneMinusSrcAlpha)\n   shadeModel $= Flat\n   clearColor $= Color4 0 0 0 0\n</code></pre>\n"}], "owner": {"reputation": 3629, "user_id": 379639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4fa63505dd4dd4691b87d30508b1bfd3?s=128&d=identicon&r=PG", "display_name": "Xavier Shay", "link": "https://stackoverflow.com/users/379639/xavier-shay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 47247967, "answer_count": 1, "score": 3, "last_activity_date": 1510484281, "creation_date": 1510444784, "question_id": 47244111, "link": "https://stackoverflow.com/questions/47244111/transparency-alpha-with-haskell-glut-bindings", "title": "Transparency/Alpha with haskell GLUT bindings", "body": "<p>Using the <a href=\"https://hackage.haskell.org/package/GLUT\" rel=\"nofollow noreferrer\">Haskell GLUT binding</a>, I modified the <a href=\"https://github.com/haskell-opengl/GLUT/blob/master/examples/RedBook4/Hello.hs\" rel=\"nofollow noreferrer\">Hello World example</a> in two ways:</p>\n\n<ol>\n<li>Added <code>WithAlphaComponent</code> to <code>initialDisplayMode</code>.</li>\n<li>Changed color to a <code>Color4</code> with <code>0.5</code> opacity.</li>\n</ol>\n\n<p>I would expect it to display a semi-transparent white square with the background red showing through. Instead it shows a solid white square, as if the opacity is being ignored. I can't figure out why this doesn't work?</p>\n\n<pre><code>import Graphics.UI.GLUT\n\ndisplay :: DisplayCallback\ndisplay = do\n   -- clear all pixels\n   clear [ ColorBuffer ]\n\n   -- draw white polygon (rectangle) with corners at\n   -- (0.25, 0.25, 0.0) and (0.75, 0.75, 0.0)\n\n   -- CHANGE #2\n   color (Color4 1.0 1.0 (1.0 :: GLfloat) 0.5)\n\n   -- resolve overloading, not needed in \"real\" programs\n   let vertex3f = vertex :: Vertex3 GLfloat -&gt; IO ()\n   renderPrimitive Polygon $ mapM_ vertex3f [\n      Vertex3 0.25 0.25 0.0,\n      Vertex3 0.75 0.25 0.0,\n      Vertex3 0.75 0.75 0.0,\n      Vertex3 0.25 0.75 0.0]\n\n   -- don't wait!\n   -- start processing buffered OpenGL routines\n   flush\n\nmyInit :: IO ()\nmyInit = do\n   -- select clearing color\n   clearColor $= Color4 0.7 0 0 0\n\n   -- initialize viewing values\n   matrixMode $= Projection\n   loadIdentity\n   ortho 0 1 0 1 (-1) 1\n\n-- Declare initial window size, position, and display mode (single buffer and\n-- RGBA). Open window with \"hello\" in its title bar. Call initialization\n-- routines. Register callback function to display graphics. Enter main loop and\n-- process events.\nmain :: IO ()\nmain = do\n   _ &lt;- getArgsAndInitialize\n   -- CHANGE #1\n   initialDisplayMode $= [ SingleBuffered, RGBMode, WithAlphaComponent ]\n   initialWindowSize $= Size 250 250\n   initialWindowPosition $= Position 100 100\n   _ &lt;- createWindow \"hello\"\n   myInit\n   displayCallback $= display\n   mainLoop\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 2, "creation_date": 1510431416, "post_id": 47242294, "comment_id": 81435296, "body": "Slight improvement for the folde function, if you&#39;re not using the arguments, you can replace them with a <code>_</code>, which makes the definition a bit easier to read by removing unnecessary bits. example: <code>folde t _ _ _ _ T = t</code>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510431523, "post_id": 47242294, "comment_id": 81435338, "body": "Hint: what should be the <code>a</code> in the <code>folde</code> function?"}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 8, "last_activity_date": 1529985722, "last_edit_date": 1529985722, "creation_date": 1510438349, "answer_id": 47243324, "question_id": 47242294, "link": "https://stackoverflow.com/questions/47242294/find-tree-height-using-folde-function-in-haskell/47243324#47243324", "title": "Find tree height using folde function in Haskell", "body": "<blockquote>\n  <p>The assignment says it should treat <code>T</code> and <code>F</code> as height <code>1</code>. It goes on that <code>Not x</code> should evaluate to <code>height x + 1</code>. <code>And</code> and <code>Or</code> has the height of its tallest subtree + <code>1</code>.</p>\n</blockquote>\n\n<p>You can write this pretty directly with explicit recursion:</p>\n\n<pre><code>height T = 1\nheight F = 1\nheight (Not x) = height x + 1\nheight (And x y) = max (height x) (height y) + 1\nheight (Or  x y) = max (height x) (height y) + 1\n</code></pre>\n\n<p>Now, how do you write this with <code>folde</code>? The key thing about recursive folding is that <code>folde</code> gives each of your functions the result of folding all the subtrees. When you <code>folde</code> on <code>And l r</code>, it folds both subtrees first, and then passes those results into the argument to <code>folde</code>. So, instead of you manually calling <code>height x</code>, <code>folde</code> is going to calculate that for you and pass it as an argument, so your own work ends up something like <code>\\x y -&gt; max x y + 1</code>. Essentially, split <code>height</code> into 5 definitions, one per constructor, and instead of destructuring and recursing down subtrees, take the heights of the subtrees as arguments:</p>\n\n<pre><code>heightT = 1 -- height T = 1\nheightF = 1 -- height F = 1\nheightN x = x + 1 -- height (Not x) = height x + 1\nheightA l r = max l r + 1 -- height (And l r) = max (height l) (height r) + 1\nheightO l r = max l r + 1 -- height (Or  l r) = max (height l) (height r) + 1\n</code></pre>\n\n<p>Feed them to <code>folde</code>, and simplify</p>\n\n<pre><code>height = folde 1 1  -- T F\n               ao   -- And\n               ao   -- Or\n               (+1) -- Not\n         where ao x y = max x y + 1\n</code></pre>\n\n<p><hr/>\nAnd now for something new! Take this definition:</p>\n\n<pre><code>data ExpF a = T | F | Not a | And a a | Or a a\n              deriving (Functor, Foldable, Traversable)\n</code></pre>\n\n<p>This looks like your <code>Exp</code>, except instead of recursion it's got a type parameter and a bunch of holes for values of that type. Now, take a look at the types of expressions under <code>ExpF</code>:</p>\n\n<pre><code>T :: forall a. ExpF a\nNot F :: forall a. ExpF (ExpF a)\nAnd F (Not T) :: forall a. ExpF (ExpF (ExpF a))\n</code></pre>\n\n<p>If you set <code>a = ExpF (ExpF (ExpF (ExpF (ExpF ...))))</code> (on to infinity) in each of the above, you find that they can all be made to have the same type:</p>\n\n<pre><code>T             :: ExpF (ExpF (ExpF ...))\nNot F         :: ExpF (ExpF (ExpF ...))\nAnd F (Not T) :: ExpF (ExpF (ExpF ...))\n</code></pre>\n\n<p>Infinity is fun! We can encode this infinitely recursive type with <code>Fix</code></p>\n\n<pre><code>newtype Fix f = Fix { unFix :: f (Fix f) }\n-- Compare\n-- Type  level: Fix f = f (Fix f)\n-- Value level: fix f = f (fix f)\n-- Fix ExpF = ExpF (ExpF (ExpF ...))\n-- fix (1:) =    1:(   1:(  1: ...))\n-- Recover original Exp\ntype Exp = Fix ExpF\n-- Sprinkle Fix everywhere to make it work\nFix T :: Exp\nFix $ And (Fix T) (Fix $ Not $ Fix F) :: Exp\n-- can also use pattern synonyms\npattern T' = Fix T\npattern F' = Fix F\npattern Not' t = Fix (Not t)\npattern And' l r = Fix (And l r)\npattern Or' l r = Fix (Or l r)\nT' :: Exp\nAnd' T' (Not' F') :: Exp\n</code></pre>\n\n<p>And now here's the nice part: one definition of <code>fold</code> to rule them all:</p>\n\n<pre><code>fold :: Functor f =&gt; (f a -&gt; a) -&gt; Fix f -&gt; a\nfold alg (Fix ffix) = alg $ fold alg &lt;$&gt; ffix\n-- ffix :: f (Fix f)\n-- fold alg :: Fix f -&gt; a\n-- fold alg &lt;$&gt; ffix :: f a\n-- ^ Hey, remember when I said folds fold the subtrees first?\n-- Here you can see it very literally\n</code></pre>\n\n<p>Here's a monomorphic <code>height</code></p>\n\n<pre><code>height = fold $ \\case -- LambdaCase extension: \\case ... ~=&gt; \\fresh -&gt; case fresh of ...\n  T -&gt; 1\n  F -&gt; 1\n  Not x -&gt; x + 1\n  And x y -&gt; max x y + 1\n  Or  x y -&gt; max x y + 1\n</code></pre>\n\n<p>And now a very polymorphic <code>height</code> (in your case it's off by one; oh well).</p>\n\n<pre><code>height = fold $ option 0 (+1) . fmap getMax . foldMap (Option . Just . Max)\nheight $ Fix T -- 0\nheight $ Fix $ And (Fix T) (Fix $ Not $ Fix F) -- 2\n</code></pre>\n\n<p>See the <a href=\"https://hackage.haskell.org/package/recursion-schemes-5.0.2\" rel=\"nofollow noreferrer\">recursion-schemes</a> package to learn these dark arts. It also makes this work for base types like <code>[]</code> with a type family, and removes the need to <code>Fix</code> everything with said trickery + some TH.</p>\n"}], "owner": {"reputation": 115, "user_id": 5880715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0df13a1f9bf2caabf244d4bbe1bbb08a?s=128&d=identicon&r=PG&f=1", "display_name": "greenbottle", "link": "https://stackoverflow.com/users/5880715/greenbottle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 47243324, "answer_count": 1, "score": 6, "last_activity_date": 1529985722, "creation_date": 1510430934, "question_id": 47242294, "link": "https://stackoverflow.com/questions/47242294/find-tree-height-using-folde-function-in-haskell", "title": "Find tree height using folde function in Haskell", "body": "<p>One of the assignments I am working on leading up to exams had me create</p>\n\n<pre><code>data Exp =  T | F | And Exp Exp | Or Exp Exp | Not Exp deriving (Eq, Show, Ord, Read)\n</code></pre>\n\n<p>Then it asked to make</p>\n\n<p><code>folde :: a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; Exp -&gt; a\n</code></p>\n\n<p>This is what I came up with</p>\n\n<pre><code>folde :: a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; Exp -&gt; a\nfolde t f a o n T = t\nfolde t f a o n F = f\nfolde t f a o n (And x y) = a (folde t f a o n x) (folde t f a o n y)\nfolde t f a o n (Or x y) = o (folde t f a o n x) (folde t f a o n y)\nfolde t f a o n (Not x) = n (folde t f a o n x)\n</code></pre>\n\n<p>The assignment asks for <code>evb</code>, <code>evi</code> and <code>evh</code>.</p>\n\n<p>They are all supposed to work with one single call to folde using correct parameters. </p>\n\n<p>Evb evaluates boolean expressions. </p>\n\n<pre><code>evb :: Exp -&gt; Bool\nevb = folde True False (&amp;&amp;) (||) not\n</code></pre>\n\n<p>Evi evaluates to an integer, treating <code>T</code> as <code>Int 1</code>, <code>F</code> as <code>Int 5</code>, <code>And</code> as <code>+</code>, <code>Or</code> as <code>*</code> and <code>Not</code> as negate.</p>\n\n<pre><code>evi :: Exp -&gt; Int\nevi = folde 1 5 (+) (*) negate \n</code></pre>\n\n<p>So far so good, it all works. I'll be happy for any feedback on this as well.</p>\n\n<hr>\n\n<p>However, I can't seem to understand how to solve the <code>evh</code>.\n<code>evh</code> is supposed to calculate the heigh of the tree.</p>\n\n<p>It should be <code>evh :: Exp -&gt; Int</code></p>\n\n<p>The assignment says it should treat <code>T</code> and <code>F</code> as height <code>1</code>.\nIt goes on that <code>Not x</code> should evaluate to <code>height x + 1</code>. <code>And</code> and <code>Or</code> has the <code>height of its tallest subtree + 1</code>.</p>\n\n<p>I can't seem to figure out what I should pass on to my <code>folde</code> function</p>\n"}, {"tags": ["haskell", "nix"], "answers": [{"comments": [{"owner": {"reputation": 2885, "user_id": 1360368, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7997d33ca6f47d0e48080d6f58a72443?s=128&d=identicon&r=PG", "display_name": "Ashesh", "link": "https://stackoverflow.com/users/1360368/ashesh"}, "edited": false, "score": 0, "creation_date": 1588757178, "post_id": 47240520, "comment_id": 109018421, "body": "Can we just do ` (import &lt;nixpkgs&gt; {}).ghc ` in the repl  (or evaluate it otherwise) to get the ghc version? There&#39;s also <a href=\"https://nixos.org/nixos/packages.html?channel=nixos-20.03&amp;query=ghc\" rel=\"nofollow noreferrer\">nixos.org/nixos/packages.html?channel=nixos-20.03&amp;query=ghc</a> (I believe the search employed there is quite basic and <code>ghc</code> doesn&#39;t show up on the first page despite the exact match. But you get the idea.)"}], "tags": [], "owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "is_accepted": false, "score": 0, "last_activity_date": 1510496928, "last_edit_date": 1510496928, "creation_date": 1510419723, "answer_id": 47240520, "question_id": 47239096, "link": "https://stackoverflow.com/questions/47239096/nix-channels-and-ghc-hackage-package-versions/47240520#47240520", "title": "Nix channels and GHC/Hackage package versions", "body": "<p>For the version of the Haskell packages I have found an answer: There are files like <a href=\"https://raw.githubusercontent.com/NixOS/nixpkgs/release-16.09/pkgs/development/haskell-modules/hackage-packages.nix\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/NixOS/nixpkgs/release-16.09/pkgs/development/haskell-modules/hackage-packages.nix</a>. These files are not really easy to use ...</p>\n\n<p><strong>Edit</strong></p>\n\n<p>In this file I can \nsearch for <code>= \"base\"</code> then I can find the version of the <code>base</code> library. \nFrom the version of the base library I can <a href=\"https://wiki.haskell.org/Base_package\" rel=\"nofollow noreferrer\">lookup</a> of the GHC version.</p>\n\n<p>This gives the following table:</p>\n\n<pre><code>newest   -&gt; base-4.10.0.0    -&gt; GHC 8.2.1\n17.09    -&gt; base-4.10.0.0    -&gt; GHC 8.2.1\n17.03    -&gt; base-4.9.1.0     -&gt; GHC 8.0.2\n16.09    -&gt; base-4-9.0.0     -&gt; GHC 8.0.1\n16.03    -&gt; base-4.8.2.0     -&gt; GHC 7.10.3\n15.09    -&gt; base-4.8.2.0     -&gt; GHC 7.10.3\n</code></pre>\n\n<p>However a simpler method would be nice...</p>\n"}, {"tags": [], "owner": {"reputation": 7435, "user_id": 4617597, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/b1Sdw.png?s=128&g=1", "display_name": "Marcelo Lazaroni", "link": "https://stackoverflow.com/users/4617597/marcelo-lazaroni"}, "is_accepted": true, "score": 1, "last_activity_date": 1589321764, "creation_date": 1589321764, "answer_id": 61762945, "question_id": 47239096, "link": "https://stackoverflow.com/questions/47239096/nix-channels-and-ghc-hackage-package-versions/61762945#61762945", "title": "Nix channels and GHC/Hackage package versions", "body": "<p>Given a revision hash, let's say <code>683c68232e91f76386db979c461d8fbe2a018782</code>, you can list all packages from that revision with</p>\n\n<pre><code>nix-env -qaP -f https://github.com/NixOS/nixpkgs-channels/archive/683c68232e91f76386db979c461d8fbe2a018782.tar.gz\n</code></pre>\n\n<p>You can also mix and match packages from different revisions. The only shortcoming there is that there is no official way to search old versions of a package. </p>\n\n<p>I wrote <a href=\"https://lazamar.co.uk/nix-versions\" rel=\"nofollow noreferrer\">https://lazamar.co.uk/nix-versions</a> to help with that. It shows all past versions of a package, what derivations they are from and how to install them.</p>\n"}], "owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 61762945, "answer_count": 2, "score": 2, "last_activity_date": 1589321764, "creation_date": 1510411290, "last_edit_date": 1510412254, "question_id": 47239096, "link": "https://stackoverflow.com/questions/47239096/nix-channels-and-ghc-hackage-package-versions", "title": "Nix channels and GHC/Hackage package versions", "body": "<p>I'm currently working through <a href=\"https://github.com/Gabriel439/haskell-nix\" rel=\"nofollow noreferrer\">Gabriel's tutorial</a> on <em>Nix and Haskell</em>.</p>\n\n<p>In nix there are <a href=\"https://nixos.org/channels/\" rel=\"nofollow noreferrer\">channels</a> and they contain\n (similar to the Stack LTS versions)\na curated set of Hackage packages and a GHC compiler.  </p>\n\n<p>For every\nLTS version <a href=\"https://www.stackage.org/\" rel=\"nofollow noreferrer\">Stackage</a> shows the version of the GHC compiler and the version\nof every Hackage package. Where can I lookup this information for the nix channels before I start using the channel ?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510414279, "post_id": 47239014, "comment_id": 81429270, "body": "What function do you actually want to use instead of <code>id</code>? (<code>id . f == f</code>) The problem here, I think, is that <code>V.create</code> is existentially qualified, but <code>id</code> is not."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510414403, "post_id": 47239014, "comment_id": 81429321, "body": "As instance, <code>Data.Array.Repa.fromUnboxed someShape</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510433390, "post_id": 47239014, "comment_id": 81435888, "body": "I think you might be able to &quot;fix&quot; this with a preprocessing step that replaces saturated applications of <code>(.)</code> with the appropriate lambdas. That is, you&#39;d manually inline <code>(.)</code> before running the type checker. But you might have to do some extra work to shift lambdas to the left of the <code>=</code> or (case) <code>-&gt;</code>, so it may not be so trivial."}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 9, "last_activity_date": 1510414405, "creation_date": 1510414405, "answer_id": 47239607, "question_id": 47239014, "link": "https://stackoverflow.com/questions/47239014/type-error-when-composing-any-function-with-the-vector-create-function/47239607#47239607", "title": "Type error when composing any function with the vector `create` function", "body": "<p>You've hit the fact that GHC can't do impredicative polymorphism. <code>V.create</code> has the higher rank type <code>forall a. Unbox a =&gt; (forall s. ST s (MVector s a)) -&gt; Vector a</code>, and when you try to apply it to <code>(id .) :: (x -&gt; y) -&gt; (x -&gt; y)</code> you end up needing to instantiate <code>x = forall s. ST s (MVector s a)</code>, which explodes. It's not that there's anything really <em>wrong</em> with the required instantiation; it's just that GHC cannot deal with it. There used to be an extension, <code>ImpredicativePolymorphism</code>, that tried to give limited support, but as of GHC 8 it's completely broken and deprecated. The reason <code>($)</code> still works is because it's actually hardwired into GHC so that it can avoid the issue, which is why if you tried to define</p>\n\n<pre><code>f $$ x = f x\n</code></pre>\n\n<p>and used it instead of <code>($)</code> here it'd fail similarly to <code>(id .)</code>.</p>\n"}], "owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 47239607, "answer_count": 1, "score": 2, "last_activity_date": 1510414405, "creation_date": 1510410771, "last_edit_date": 1510411957, "question_id": 47239014, "link": "https://stackoverflow.com/questions/47239014/type-error-when-composing-any-function-with-the-vector-create-function", "title": "Type error when composing any function with the vector `create` function", "body": "<p>The following code will be not compile:</p>\n\n<pre><code>import qualified Data.Vector.Unboxed as V\nimport qualified Data.Vector.Unboxed.Mutable as MV\n\nbad :: V.Vector Int\nbad = id . V.create $ do\n    v &lt;- MV.new 1\n    MV.set v 0\n    pure v\n</code></pre>\n\n<blockquote>\n<pre><code>\u2022 Couldn't match type \u2018m0 (MV.MVector\n                             (Control.Monad.Primitive.PrimState m0) a0)\u2019\n                 with \u2018forall s. GHC.ST.ST s (MV.MVector s Int)\u2019\n  Expected type: m0 (MV.MVector\n                       (Control.Monad.Primitive.PrimState m0) a0)\n                 -&gt; V.Vector Int\n    Actual type: (forall s. GHC.ST.ST s (MV.MVector s Int))\n                 -&gt; V.Vector Int\n\u2022 In the second argument of \u2018(.)\u2019, namely \u2018V.create\u2019\n  In the expression: id . V.create\n  In the expression:\n    id . V.create\n    $ do { v &lt;- MV.new 1;\n           MV.set v 0;\n           pure v }\n</code></pre>\n</blockquote>\n\n<p>But next will be:</p>\n\n<pre><code>import qualified Data.Vector.Unboxed as V\nimport qualified Data.Vector.Unboxed.Mutable as MV\n</code></pre>\n\n<p><pre><code>\ngood :: V.Vector Int\ngood = id <b>$</b> V.create $ do\n    v &lt;- MV.new 1\n    MV.set v 0\n    pure v\n</pre></code></p>\n\n<p><code>stack</code> resolver is lts-9.12</p>\n\n<p>So, why it does and how to fix if I prefer to compose by <code>(.)</code>?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1510415149, "post_id": 47238642, "comment_id": 81429637, "body": "Could also do <code>combine xs ys = [x ++ y | (x, y) &lt;- zip xs ys]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "edited": false, "score": 0, "creation_date": 1510409507, "post_id": 47238670, "comment_id": 81427631, "body": "what if don&#39;t want to use zipwith function"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "edited": false, "score": 0, "creation_date": 1510409761, "post_id": 47238670, "comment_id": 81427720, "body": "@UmairAziz see my edit. It&#39;s a pretty simple recursive function."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "edited": false, "score": 0, "creation_date": 1510411417, "post_id": 47238670, "comment_id": 81428335, "body": "@UmairAziz Why wouldn&#39;t you? As a general rule, you should try to avoid explicit recursion; it&#39;s a sign you are reinventing the wheel."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510411613, "post_id": 47238670, "comment_id": 81428413, "body": "@chepner I know it&#39;s bad style but a lot of the time I find an explicit recursion function a lot more readable than a foldl/foldr. In this case it&#39;s a no brainer though."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510412647, "post_id": 47238670, "comment_id": 81428769, "body": "@chepner: because this is a homework question and some student that does not want to to find a job later."}], "tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 7, "last_activity_date": 1510409741, "last_edit_date": 1510409741, "creation_date": 1510408593, "answer_id": 47238670, "question_id": 47238642, "link": "https://stackoverflow.com/questions/47238642/how-to-combine-two-strings-i-haskell-and-return-a-new-string/47238670#47238670", "title": "How to combine two strings i Haskell and return a new string", "body": "<pre><code>combine = zipWith (++)\n</code></pre>\n\n<p><a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:zipWith\" rel=\"noreferrer\">zipWith</a> takes two lists, and applies the function given to the first item of both lists, then the second, etc. If one list is longer than the other, its extra items will be skipped.</p>\n\n<p>The <code>++</code> function takes two lists and joins them together. A string is just a list of characters.</p>\n\n<p><code>\"hello \" ++ \"world\" == \"hello world\"</code></p>\n\n<p>usage:</p>\n\n<pre><code>\u03bb&gt; combine [\"me\",\"you\",\"he\"] [\"she\",\"they\",\"it\"]\n[\"meshe\",\"youthey\",\"heit\"]\n\u03bb&gt; combine [] []\n[]\n\u03bb&gt; combine [\"me\", \"you\"] [\"she\"]\n[\"meshe\"]\n\u03bb&gt; \n</code></pre>\n\n<p>The <code>++</code> operator is very basic though, so you might be better continuing reading whatever learning material you're using before coming to stackoverflow, as you'll have a lot of questions which I expect will be answered in your book.</p>\n\n<p>If you don't want to use zipWith, you can write it very simply with recursion like so:</p>\n\n<pre><code>combine [] _ = []\ncombine _ [] = []\ncombine (x:xs) (y:ys) = (x ++ y) : combine xs ys\n</code></pre>\n\n<p>Usage is the same as before.</p>\n"}], "owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7062, "favorite_count": 0, "accepted_answer_id": 47238670, "answer_count": 1, "score": -2, "last_activity_date": 1510409741, "creation_date": 1510408399, "last_edit_date": 1510408663, "question_id": 47238642, "link": "https://stackoverflow.com/questions/47238642/how-to-combine-two-strings-i-haskell-and-return-a-new-string", "title": "How to combine two strings i Haskell and return a new string", "body": "<p>How to concatinate two strings . For example I have two lists<br>\n<code>[\"me\",\"you\",\"he\"]</code> and  <code>[\"she\",\"they\",\"it\"]</code>. I want to form a new list in which every correspondging strings are combined togatheer, like\n<code>[\"meshe\",\"youthey\",\"heit\"]</code>. Now my question is: how can I combine two strings</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510402066, "post_id": 47237687, "comment_id": 81425453, "body": "Can you first provide the objective. What are you trying to do here?"}, {"owner": {"reputation": 41, "user_id": 8923956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7aece8d1b9dfe4af833b339977e01d?s=128&d=identicon&r=PG", "display_name": "Stewart", "link": "https://stackoverflow.com/users/8923956/stewart"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510402451, "post_id": 47237687, "comment_id": 81425539, "body": "@WillemVanOnsem Given a number n, and a set of characters x, produce every combination of symbols from x of length n. For example x = &quot;abc&quot; and n = 2 would give [&quot;aa&quot;,&quot;ab&quot;,&quot;ac&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;ca&quot;,&quot;cb&quot;,&quot;cc&quot;]."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510406582, "post_id": 47237687, "comment_id": 81426684, "body": "List comprehensions are effectively a nice shortcut for certain monadic operations. (In fact, there is a GCH extension which allows a generator to be an arbitrary monad, not just a list.) You shouldn&#39;t think of them as <i>the</i> way to perform them, though."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1510402890, "creation_date": 1510402890, "answer_id": 47237816, "question_id": 47237687, "link": "https://stackoverflow.com/questions/47237687/haskell-list-comprehensions-with-arbitrary-number-of-generators/47237816#47237816", "title": "Haskell List Comprehensions with Arbitrary number of Generators", "body": "<p>As far as I know, you can not construct list comprehension with an arbitrary number of generators, but usually if you do something with arbitrary depth, <em>recursion</em> is the way to do it.</p>\n\n<p>So we have to think of solving this, in terms of itself. If you want all possible strings that can be generated with the characters in <code>x</code>. In case <code>n = 0</code>, we can generate exactly one string: the empty string.</p>\n\n<pre><code>combs 0 = [\"\"]\n</code></pre>\n\n<p>so a list with one element <code>[]</code>.</p>\n\n<p>Now in case we want to generate strings with one characters, we can of course simply return <code>x</code>:</p>\n\n<pre><code>combs 1 = x\n</code></pre>\n\n<p>and now the question is what to do in case <code>n &gt; 1</code>. In that case we can obtain all the strings with length <code>n-1</code>, and and for each such string, and each such character in <code>x</code>, produce a new string. Like:</p>\n\n<pre><code>combs n = [ (c:cs) | c &lt;- x, cs &lt;- combs (n-1) ]\n</code></pre>\n\n<p>Note that this makes the second case (<code>n = 1</code>) redundant. We can pick a character <code>c</code> from <code>x</code>, and prepend that to the empty string. So a basic implementation is:</p>\n\n<pre><code>combs :: Int -&gt; [[Char]]\ncombs 0 = [\"\"]\ncombs n = [(c:cs) | c &lt;- x, cs &lt;- combs (n-1)]\n    where x = \"abc\"\n</code></pre>\n\n<p>Now we can still look for improvements. List comprehensions are basically syntactical sugar for the list monad. So we can use <code>liftA2</code> here:</p>\n\n<pre><code><b>import Control.Applicative(liftA2)</b>\n\ncombs :: Int -&gt; [[Char]]\ncombs 0 = [\"\"]\ncombs n = <b>liftA2 (:) x (combs (n-1))</b>\n    where x = \"abc\"</code></pre>\n\n<p>we probably also want to make the set of characters a parameter:</p>\n\n<pre><code>import Control.Applicative(liftA2)\n\ncombs :: <b>[Char] -&gt;</b> Int -&gt; [[Char]]\ncombs <b>_</b> 0 = [\"\"]\ncombs <b>x</b> n = liftA2 (:) x (combs (n-1))</code></pre>\n\n<p>and we do not have to restrict us to characters, we can produce a <em>certesian power</em> for all possible types:</p>\n\n<pre><code>import Control.Applicative(liftA2)\n\ncombs :: [<b>a</b>] -&gt; Int -&gt; [[<b>a</b>]]\ncombs _ 0 = [<b>[]</b>]\ncombs x n = liftA2 (:) x (combs (n-1))</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8923956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7aece8d1b9dfe4af833b339977e01d?s=128&d=identicon&r=PG", "display_name": "Stewart", "link": "https://stackoverflow.com/users/8923956/stewart"}, "edited": false, "score": 0, "creation_date": 1510403171, "post_id": 47237819, "comment_id": 81425754, "body": "Thank you so much! That&#39;s exactly what I needed :)"}], "tags": [], "owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "is_accepted": true, "score": 6, "last_activity_date": 1510402925, "creation_date": 1510402925, "answer_id": 47237819, "question_id": 47237687, "link": "https://stackoverflow.com/questions/47237687/haskell-list-comprehensions-with-arbitrary-number-of-generators/47237819#47237819", "title": "Haskell List Comprehensions with Arbitrary number of Generators", "body": "<p>You can use <code>replicateM</code>:</p>\n\n<pre><code>replicateM :: Applicative m =&gt; Int -&gt; m a -&gt; m [a]\n</code></pre>\n\n<p>E.g.:</p>\n\n<pre><code>generate :: Num a =&gt; Int -&gt; [[a]]\ngenerate = flip replicateM [1,2,3]\n</code></pre>\n\n<p>to generate all possiible lists of a given length and consisting of elements <code>1..3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13362, "user_id": 260584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63f9744d1d903eef5f9954fa31d25a26?s=128&d=identicon&r=PG", "display_name": "erisco", "link": "https://stackoverflow.com/users/260584/erisco"}, "is_accepted": false, "score": 2, "last_activity_date": 1510407592, "creation_date": 1510407592, "answer_id": 47238510, "question_id": 47237687, "link": "https://stackoverflow.com/questions/47237687/haskell-list-comprehensions-with-arbitrary-number-of-generators/47238510#47238510", "title": "Haskell List Comprehensions with Arbitrary number of Generators", "body": "<p>First I would translate the comprehension as a monadic expression.</p>\n\n<pre><code>x &gt;&gt;= \\i -&gt; x &gt;&gt;= \\j -&gt; x &gt;&gt;= \\k -&gt; x &gt;&gt;= \\l -&gt; return [i,j,k,l]\n</code></pre>\n\n<p>With <code>n = 4</code> we see we have 4 <code>x</code>'s, and generally will have <code>n</code> <code>x</code>'s. Therefore, I am thinking about a list of <code>x</code>'s of length <code>n</code>.</p>\n\n<pre><code>[x,x,x,x] :: [[a]]\n</code></pre>\n\n<p>How might we go from <code>[x,x,x,x]</code> to the monadic expression? A first good guess is <code>foldr</code>, since we want to do something with each element of the list. Particularly, we want to take an element from each <code>x</code> and form a list with these elements.</p>\n\n<pre><code>foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b\n-- Or more accurately for our scenario:\nfoldr :: ([a] -&gt; [[a]] -&gt; [[a]]) -&gt; [[a]] -&gt; [[a]] -&gt; [[a]]\n</code></pre>\n\n<p>There are two terms to come up with for foldr, which I will call <code>f :: [a] -&gt; [[a]] -&gt; [[a]]</code> and <code>z :: [[a]]</code>. We know what <code>foldr f z [x,x,x,x]</code> is:</p>\n\n<pre><code>foldr f z [x,x,x,x] = f x (f x (f x (f x z)))\n</code></pre>\n\n<p>If we add parentheses to the earlier monadic expression, we have this:</p>\n\n<pre><code>x &gt;&gt;= \\i -&gt; (x &gt;&gt;= \\j -&gt; (x &gt;&gt;= \\k -&gt; (x &gt;&gt;= \\l -&gt; return [i,j,k,l])))\n</code></pre>\n\n<p>You can see how the two expressions are looking similar. We should be able to find an <code>f</code> and <code>z</code> to make them the same. If we choose <code>f = \\x a -&gt; x &gt;&gt;= \\x' -&gt; a &gt;&gt;= \\a' -&gt; return (x' : a')</code> we get:</p>\n\n<pre><code>f x (f x (f x (f x z)))\n= (\\x a -&gt; a &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\x' -&gt; return (x' : a')) x (f x (f x (f x z)))\n= f x (f x (f x z)) &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\x' -&gt; return (x' : a')\n= f x (f x (f x z)) &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\l -&gt; return (l : a')\n= (f x (f x z) &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\k -&gt; return (k : a')) &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\l -&gt; return (l : a')\n= f x (f x z) &gt;&gt;= \\a' -&gt; x &gt;&gt;= \\k -&gt; x &gt;&gt;= \\l -&gt; return (l : k : a')\n</code></pre>\n\n<ul>\n<li>Note that I have reversed the order of <code>i,j,k,l</code> to <code>l,k,j,i</code> but in context of finding combinations, this should be irrelevant. We could try <code>a' ++ [x']</code> instead if it was really of concern.</li>\n</ul>\n\n<p>The last step is because <code>(a &gt;&gt;= \\b -&gt; c) &gt;&gt;= \\d -&gt; e</code> is the same as <code>a &gt;&gt;= \\b -&gt; c &gt;&gt;= \\d -&gt; e</code> (when accounting for variable hygiene) and <code>return a &gt;&gt;= \\b -&gt; c</code> is the same as <code>(\\b -&gt; c) a</code>.</p>\n\n<p>If we keep unfolding this expression, eventually we will reach <code>z &gt;&gt;= \\a' -&gt; \u2026</code> on the front. The only choice that makes sense here then is <code>z = [[]]</code>. This means that <code>foldr f z [] = [[]]</code> which may not be desirable (preferring <code>[]</code> instead). Instead, we might use <code>foldr1</code> (for non-empty lists, and we might use <code>Data.NonEmpty</code>) or we might add a separate clause for empty lists to <code>combs</code>.</p>\n\n<p>Looking at <code>f = \\x a -&gt; x &gt;&gt;= \\x' -&gt; a &gt;&gt;= \\a' -&gt; return (x' : a')</code> we might realise this helpful equivalence: <code>a &gt;&gt;= \\b -&gt; return (c b) = c &lt;$&gt; a</code>. Therefore, <code>f = \\x a -&gt; x &gt;&gt;= \\x' -&gt; (x' :) &lt;$&gt; a</code>. Then also, <code>a &gt;&gt;= \\b -&gt; c (g b) = g &lt;$&gt; a &gt;&gt;= \\b -&gt; c</code> and so <code>f = (:) &lt;$&gt; x &gt;&gt;= \\x' -&gt; x' &lt;$&gt; a</code>. Finally, <code>a &lt;*&gt; b = a &gt;&gt;= \\x -&gt; x &lt;$&gt; b</code> and so <code>f = (:) &lt;$&gt; x &lt;*&gt; a</code>.</p>\n\n<p><a href=\"http://hackage.haskell.org/package/base-4.9.0.0/docs/src/Data.Traversable.html#line-184\" rel=\"nofollow noreferrer\">The official implementation</a> of <code>sequenceA</code> for lists is <code>foldr (\\x a -&gt; (:) &lt;$&gt; x &lt;*&gt; a) (pure [])</code>, exactly what we came up with here too. This can be further shortened as <code>foldr (liftA2 (:)) (pure [])</code> but there is possibly some optimisation difference that made the implementors not choose this.</p>\n\n<p>Last step is to merely come up with a list of <code>n</code> <code>x</code>'s. This is just <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:replicate\" rel=\"nofollow noreferrer\">replicate</a> <code>replicate n x</code>. There happens to be a function which does both replication and sequencing, called <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Monad.html#v:replicateM\" rel=\"nofollow noreferrer\">replicateM</a> <code>replicateM n x</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8923956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce7aece8d1b9dfe4af833b339977e01d?s=128&d=identicon&r=PG", "display_name": "Stewart", "link": "https://stackoverflow.com/users/8923956/stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 47237819, "answer_count": 3, "score": 2, "last_activity_date": 1510407592, "creation_date": 1510401866, "last_edit_date": 1510402525, "question_id": 47237687, "link": "https://stackoverflow.com/questions/47237687/haskell-list-comprehensions-with-arbitrary-number-of-generators", "title": "Haskell List Comprehensions with Arbitrary number of Generators", "body": "<p>So what I have so far is something like this: </p>\n\n<pre><code>combs :: [[Char]]\ncombs = [[i] ++ [j] ++ [k] ++ [l] | i &lt;- x, j &lt;- x, k &lt;- x, l &lt;- x]\n  where x = \"abc\"\n</code></pre>\n\n<p>So this is the working function for n = 4, is there any way to make this work for an arbitrary number of generators? I could program in for n = 1, 2, 3 etc.. but ideally need it to work for any given n. For reference, x is just an arbitrary string of unique characters. I'm struggling to think of a way to somehow extract it to work for n generators.</p>\n"}, {"tags": ["haskell", "image-processing", "fractals"], "comments": [{"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "edited": false, "score": 0, "creation_date": 1510398342, "post_id": 47237050, "comment_id": 81424538, "body": "Some languages use those terms interchangeably and it depends on the language you are talking about, but that is not the point here. I don&#39;t think it matters a lot whether we use lists or not, the difficulty is about accessing and changing something using indices. If you insist you can replace this list with e.g. an <code>Image</code> from <code>Codec.Picture</code>, but my problem basically stays the same."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 1, "creation_date": 1510398943, "post_id": 47237050, "comment_id": 81424699, "body": "You question about <i>more efficient and elegant functional way</i>. So, I wrote what using lists it isn&#39;t efficient way. About <i>elegant functional way</i>, maybe if you add your solution it can help us to understand your problems here?"}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1510399544, "post_id": 47237050, "comment_id": 81424848, "body": "Usually it is not meaningful to solve such problems on Haskell, since you are starting from data that is convenient for imperative code. But you should to start from those data that are convenient for the functional way. For example, you can change this problem by adding two images. One of them will be your original image, the second one will be an image &quot;created from your points&quot;."}, {"owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "edited": false, "score": 0, "creation_date": 1510401351, "post_id": 47237050, "comment_id": 81425272, "body": "How about this?  <a href=\"https://wiki.haskell.org/Numeric_Haskell:_A_Vector_Tutorial#Generating_Vectors\" rel=\"nofollow noreferrer\">wiki.haskell.org/&hellip;</a>  &quot;Vector is a Haskell library for working with arrays. It has an emphasis on very high performance ...&quot;"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1510402909, "post_id": 47237050, "comment_id": 81425672, "body": "@freestyle How would you generate the data from the linked example in a more functional way? I&#39;m not sure if I understood you correctly, but adding two images in each step does not seem very efficient, as only basically one pixel needs to be updated. I now added my solution with just a <code>4x4</code> instead of a <code>1024x1024</code> &quot;image&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "is_accepted": false, "score": 2, "last_activity_date": 1510409079, "last_edit_date": 1510409079, "creation_date": 1510404975, "answer_id": 47238113, "question_id": 47237050, "link": "https://stackoverflow.com/questions/47237050/efficiently-accessing-pixels/47238113#47238113", "title": "Efficiently accessing Pixels", "body": "<p>You can use, as one of variants, <code>Data.Array</code>:</p>\n\n<pre><code>import Data.Array\n\nmain = do\n    putStrLn \"before:\" &gt;&gt; print myArr\n    putStrLn \"after:\" &gt;&gt; print myArr2\n    putStrLn \"output of our \\\"image\\\":\" &gt;&gt; print outArr\n\nn :: Int\nn = 4\n\n-- example for \"increment\"\nmyArr = listArray ((0,0), (n-1,n-1)) [1..]\nmyArr2 = accum (+) myArr [((2, 3), 1000)]\n\n-- example for our application\noutArr = accumArray (+) 0 ((0,0), (n-1,n-1)) [ (p, 1) | p &lt;- points ]\n\n-- our \"data\" (here im just filling this with arbitrary numbers)\npoints = [(i `mod` n,j `mod` n)|i &lt;-[1..14],j&lt;-[i..77+i]]\n</code></pre>\n\n<hr>\n\n<p>Using <code>repa</code> with <code>vector</code>:</p>\n\n<pre><code>import Control.Monad\nimport Data.Array.Repa\nimport qualified Data.Vector.Generic as V\nimport qualified Data.Vector.Generic.Mutable as MV\n\nmain = putStrLn \"output of our \\\"image\\\":\" &gt;&gt; print outArr\n\nn :: Int\nn = 1024\n\n-- example for our application\noutArr :: Array U DIM2 Int\noutArr = fromUnboxed (Z :. n :. n) $ V.create $ do\n    v &lt;- MV.new (n * n)\n    MV.set v 0\n    forM_ points $ \\(i, j) -&gt; do\n        let idx = i * n + j\n        MV.modify v (+1) idx\n    pure v\n\n-- our \"data\" (here im just filling this with arbitrary numbers)\npoints = [(i `mod` n,j `mod` n)|i &lt;-[1..14],j&lt;-[i..77+i]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "is_accepted": false, "score": 1, "last_activity_date": 1510406667, "creation_date": 1510406667, "answer_id": 47238362, "question_id": 47237050, "link": "https://stackoverflow.com/questions/47237050/efficiently-accessing-pixels/47238362#47238362", "title": "Efficiently accessing Pixels", "body": "<p>One possibility to do image processing in Haskell is with <em>Comonads</em>. It allows to specify image processing algorithms in an <em>elegant fuctional way</em>. A good and accessible introduction is <a href=\"https://jaspervdj.be/posts/2014-11-27-comonads-image-processing.html\" rel=\"nofollow noreferrer\">https://jaspervdj.be/posts/2014-11-27-comonads-image-processing.html</a>. </p>\n"}], "owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510409079, "creation_date": 1510397236, "last_edit_date": 1510402801, "question_id": 47237050, "link": "https://stackoverflow.com/questions/47237050/efficiently-accessing-pixels", "title": "Efficiently accessing Pixels", "body": "<p>I just discovered <a href=\"https://mathematica.stackexchange.com/questions/159668/drawing-clifford-attractors-in-mathematica\">this post</a> and was wondering how to do something like that in Haskell. In the following I just simplify the part that I had difficulties with:</p>\n\n<p>I have a list with a large number of 2D coordinates. For simplicitys sake let us assume that the list contains <code>Int</code> coordinates that are all in the range <code>0 - 1023</code></p>\n\n<pre><code>points :: [(Int,Int)]  -- long list of points\n</code></pre>\n\n<p>The goal is now having an image (let us say <code>img :: [[Int]]</code> where <code>img</code> and each entry thereof has length <code>1024</code>) where <code>(img!!i)!!j</code> is the number of occurences of <code>(i,j)</code> in <code>points</code> (which would get mapped to some gray values).</p>\n\n<p><strong>What I tried so far:</strong></p>\n\n<ol>\n<li>If I just use the imperative approach of looping over <code>points</code> and trying to incerment the entry <code>i,j</code> of some 2d array, the part about picking some entry <code>i,j</code> and incrementing it is very cumbersome and probably not very efficient on the one hand, and on the other hand using <code>!!</code> is prone to <code>index too large</code> errors.</li>\n<li>A slightly more efficinet approach: For each pairf of coordinates <code>(i,j)</code> use <code>partition</code> to filter out the <code>(i,j)</code> entries and count them, and pass the rest of the list to the next pair of coordnates. This way we get a list of <code>(i,j, count)</code> and we just have to plug <code>count</code> into each pixel <code>i,j</code> once, but this is still not very elegant in my opinion.</li>\n</ol>\n\n<blockquote>\n  <p>So can you suggest any solutions on how to do this in more efficient and elegant <em>functional</em> way?</p>\n</blockquote>\n\n<p>This is just meant as an exemplary problem, because I frequently ran into similar problems and only found unsatisfactory solutions.</p>\n\n<hr>\n\n<p>EDIT: As requested here is an example of such code:</p>\n\n\n\n<pre class=\"lang-hs prettyprint-override\"><code>\nmain = putStrLn \"before:\" &gt;&gt; print myImg  &gt;&gt; putStrLn \"after:\" &gt;&gt; print myImg2\n       &gt;&gt; putStrLn \"output of our \\\"image\\\":\" &gt;&gt; print outImg\n\nn :: Int\nn = 4\n\n-- example for \"increment\"\nmyImg = [[n..n+3]|n&lt;-[1,5..16]] :: [[Int]]\nmyImg2 = increment myImg 2 3 10000\n\n-- example for our application\nzeroImg = [[0,0,0,0]|_&lt;-[0,0,0,0]]\noutImg = foldl (\\img (i,j) -&gt; increment img i j 1 ) zeroImg points\n\n-- our \"data\" (here im just filling this with arbitrary numbers)\npoints = [(i `mod` n,j `mod` n)|i &lt;-[1..14],j&lt;-[i..77+i]]&#32;\n\n\n-- not very elegant code\nincrement :: [[Int]] -&gt; Int -&gt; Int -&gt; Int -&gt; [[Int]]\nincrement img i j v = a ++ [x ++ [y + v] ++ z] ++  c -- increments the \"pixel\" (i,j) by v\n  where&#32;\n   a = take i img &#32;\n   b = img !! i\n   c = drop (i+1) img\n   x = take j b\n   y = b !! j\n   z = drop (j+1) b\n\n</code></pre>\n\n<p><a href=\"https://tio.run/##ZVLBbqMwEL37K145BUFQSbtbKdrmXqm3HgnaGjCJKdjImDRE@ffsGEraVYxk5pk3M28e3vPuQ9T15cIaLhWe0fb2zZpXBS8TpTZi7WGzQWuksmiGl2aHEV9ZvLTC3JBWDNP6j6t7SwC6hO4Ntp5s@E5svZ/ZRKF0xhTWa7woy5ymR8aWS4gjb9pagFTBkyo3ohHKemxS9YwkUVGkgof0rP4skzj8FUXx7zR1hZKESqXpRF0R95r@NdMKD4jvad10ckp529Yy51ZqxU7C6LnffTg@6fkvNZxByqYZiFHquqix2EpCCxlWPpabH63dsUSFGD7msq0mF7pRhevsFdxyD4u9MIL4qPrOopR1LdUOdi87fEq7BzeZtIabAapvMmE6n02FnMyFxHuji3eosJoj/yzhTCKLHtOwolBG0dNTIMkvNnZX2uIgqKKoxY6T2lwXgn2L/3bVDUXB7Wt2/XbiA@niCAIkx3EfEOCQuvA07shBEq55HY0q4LXyKGrvy8lswIEu2efojLttnGpa/kE2jW3Gs8z9agJ3d5AO54QLo1uqEcS@@@ROj3NmhczhgXDmciqHTtecyuVk7HL5Bw\" rel=\"nofollow noreferrer\" title=\"Haskell \u2013 Try It Online\">Try it online!</a></p>\n"}, {"tags": ["haskell", "instance"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1510394670, "post_id": 47236567, "comment_id": 81423535, "body": "I think the problem here is with your <code>Show</code>. If that is your query, you never call <code>(==)</code>. Note furthermore dat Hugs is basically dead (since 2006 iirc), so perhaps you better use GHC."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510394757, "post_id": 47236567, "comment_id": 81423562, "body": "You also forgot a case where <code>(N x) == Null</code>."}, {"owner": {"reputation": 21, "user_id": 5841185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lwhFV.png?s=128&g=1", "display_name": "Marc-Aurel P.", "link": "https://stackoverflow.com/users/5841185/marc-aurel-p"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510403277, "post_id": 47236567, "comment_id": 81425782, "body": "Thank you for your answer and Time! But in ghci it&#39;s still a stack overflow"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510403344, "post_id": 47236567, "comment_id": 81425800, "body": "please post a <i>minimal woking example</i>: the text file you load into the compiler as well as the <i>query</i>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5841185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lwhFV.png?s=128&g=1", "display_name": "Marc-Aurel P.", "link": "https://stackoverflow.com/users/5841185/marc-aurel-p"}, "edited": false, "score": 0, "creation_date": 1510403346, "post_id": 47236955, "comment_id": 81425802, "body": "Thank you for your answer and Time! But in ghci it&#39;s still a stack overflow. &gt;Prelude Null    -&gt;   Stack overflow"}, {"owner": {"reputation": 21, "user_id": 5841185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lwhFV.png?s=128&g=1", "display_name": "Marc-Aurel P.", "link": "https://stackoverflow.com/users/5841185/marc-aurel-p"}, "edited": false, "score": 0, "creation_date": 1510504559, "post_id": 47236955, "comment_id": 81452622, "body": "It was my Show method indeed. I forgot using tabs. I didnt know that Haskell is that sensitive. Thank you!"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 5, "last_activity_date": 1510408919, "last_edit_date": 1510408919, "creation_date": 1510396558, "answer_id": 47236955, "question_id": 47236567, "link": "https://stackoverflow.com/questions/47236567/haskell-data-error-control-stack-overflow/47236955#47236955", "title": "Haskell Data &quot;Error - Control stack overflow&quot;", "body": "<p>You are not covering all the cases. Also, you can simplify your definition by making a last \"catch all the rest\" case as follows:</p>\n\n<pre><code>instance Eq Nat where\n    (==) Null   Null    = True \n    (==) (N xs) (N xs2) = xs == xs2\n    (==) _      _       = False\n</code></pre>\n\n<p>I have no idea, though, about why your code gave you a stack overflow. It should have given you a non-exhaustive match error, possibly.</p>\n\n<p>Anyway, note that Hugs is now obsolete -- it went 10+ years without updates. You should switch to GHC and use <code>ghci</code> instead of Hugs.</p>\n\n<hr>\n\n<p>If you still get stack overflows, it's likely that the issue is in the <code>Show</code> instance, where you could have defined an infinite recursion, as Willem Van Onsem points out above.</p>\n\n<p>You should use something like</p>\n\n<pre><code>instance Show Nat where\n   show Null = \"Null\"\n   show (N x) = \"(N \" ++ show x ++ \")\"\n</code></pre>\n\n<p>By the way, note that some standard instances can be automatically generated, in a correct way. For instance,</p>\n\n<pre><code>data Nat = Null | N Nat deriving (Show, Eq, Ord)\n</code></pre>\n\n<p>should just work as intended. It is a nice learning exercise to define these on your own, though.</p>\n"}], "owner": {"reputation": 21, "user_id": 5841185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lwhFV.png?s=128&g=1", "display_name": "Marc-Aurel P.", "link": "https://stackoverflow.com/users/5841185/marc-aurel-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 47236955, "answer_count": 1, "score": 0, "last_activity_date": 1510408919, "creation_date": 1510393930, "last_edit_date": 1510399671, "question_id": 47236567, "link": "https://stackoverflow.com/questions/47236567/haskell-data-error-control-stack-overflow", "title": "Haskell Data &quot;Error - Control stack overflow&quot;", "body": "<p>I'm a newbie in Haskell and I am writing my first data structure.</p>\n\n<pre><code> data Nat = Null | N Nat\n</code></pre>\n\n<p>For example:   <code>5</code> is <code>N (N (N (N (N Null))))</code></p>\n\n<p>I have to create instances from <code>Show, Eq, Ord, Num, Enum</code></p>\n\n<p>I wrote <code>Eq</code> already and it works.</p>\n\n<pre><code>instance Eq Nat where\n    (==) Null Null = True \n    (==) (N Null) (N Null) = True\n    (==) Null (N Null) = False\n    (==) Null (N xs) = False\n    (==) (N xs) (N xs2) = xs == xs2\n</code></pre>\n\n<p>But when I try this in hugs it gives me an error (\"Error- Control stack overflow\").</p>\n\n<p>And I can't go on.</p>\n\n<pre><code>(N (N Null)) :: Nat   \n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1510386804, "post_id": 47235357, "comment_id": 81421670, "body": "For buffers that you only read from, that might be fine, but having two handles to the same writable object with separate buffers sounds like a recipe for madness."}], "answers": [{"comments": [{"owner": {"reputation": 1376, "user_id": 7213112, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/933ad5b40bde4c78aef7faa4cd136434?s=128&d=identicon&r=PG&f=1", "display_name": "sidoshi", "link": "https://stackoverflow.com/users/7213112/sidoshi"}, "edited": false, "score": 0, "creation_date": 1510402295, "post_id": 47236400, "comment_id": 81425497, "body": "Thank you for detailed explanation."}], "tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": true, "score": 6, "last_activity_date": 1510392683, "creation_date": 1510392683, "answer_id": 47236400, "question_id": 47235357, "link": "https://stackoverflow.com/questions/47235357/why-doesnt-hsetbuffering-return-a-new-handle-instead-of-changing-the-given-hand/47236400#47236400", "title": "Why doesn&#39;t hSetBuffering return a new handle instead of changing the given handle?", "body": "<p>With regular Haskell values, there is no problem keeping older versions of a value around. However, <code>Handle</code>s are references to mutable resources allocated with the operating system, and carry state. After calling a version of <code>hSetBuffering</code>that returned a new <code>Handle</code>, what should happen to <em>earlier</em> versions of the <code>Handle</code> that are still kept around? Should they reflect the change? If the answer is yes, then the new-handle-returning version of <code>hSetBuffering</code> is a bit of a lie.</p>\n\n<p>This new-handle-returning version of <code>hSetBuffering</code> could work if the type system somehow disallowed keeping old versions of the <code>Handle</code> after calling the function. It could do that by enforcing a constraint: functions that receive a <code>Handle</code> as parameter can only use that parameter <em>one single time</em>, and functions that \"duplicate\" handles like <code>dup :: Handle -&gt; (Handle,Handle)</code> are <em>disallowed</em>.</p>\n\n<p>There is a (not yet accepted) <a href=\"https://arxiv.org/abs/1710.09756\" rel=\"noreferrer\">proposal</a> to extend Haskell with the ability to enforce such restrictions. In fact, file operations are one of the motivating examples. From section 2.3 of the paper:</p>\n\n<pre><code>type File\nopenFile :: FilePath \u2192 IOL 1 File\nreadLine :: File \u22b8 IOL 1 (File,Unrestricted ByteString)\ncloseFile :: File \u22b8 IOL \u03c9 ()\n</code></pre>\n\n<p>Under this proposal, we can only have a single version of a <code>File</code> around at any given time. <code>closeFile</code> makes the reference to <code>File</code> unavailable so that we can't close an already closed file. Every read operation takes the previous version of the <code>File</code> and returns a new one along with the read data. And <code>hSetBuffering</code> would have a type like:</p>\n\n<pre><code>hSetBuffering :: BufferingMode -&gt; File \u22b8 IOL 1 File\n</code></pre>\n"}], "owner": {"reputation": 1376, "user_id": 7213112, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/933ad5b40bde4c78aef7faa4cd136434?s=128&d=identicon&r=PG&f=1", "display_name": "sidoshi", "link": "https://stackoverflow.com/users/7213112/sidoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 47236400, "answer_count": 1, "score": 3, "last_activity_date": 1510392683, "creation_date": 1510384020, "question_id": 47235357, "link": "https://stackoverflow.com/questions/47235357/why-doesnt-hsetbuffering-return-a-new-handle-instead-of-changing-the-given-hand", "title": "Why doesn&#39;t hSetBuffering return a new handle instead of changing the given handle?", "body": "<p>In Haskell, as we try to write most of our code in immutable way by not changing variables or passed parameters and instead we create a new value from the old one with required changes. </p>\n\n<pre><code>main = do   \nwithFile \"something.txt\" ReadMode (\\handle -&gt; do  \n    hSetBuffering handle $ BlockBuffering (Just 2048)  \n    contents &lt;- hGetContents handle  \n    putStr contents)  \n</code></pre>\n\n<p>Then what is the reason than <code>hSetBuffering</code>, a function that takes a handle and sets its buffering mode, changes the passed <code>handle</code> itself instead of returning a new handle with required buffering mode?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 3231, "user_id": 1013393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bca51e5ae3eb8dc24a98616b4e5d6fd?s=128&d=identicon&r=PG", "display_name": "sjakobi", "link": "https://stackoverflow.com/users/1013393/sjakobi"}, "edited": false, "score": 2, "creation_date": 1510377576, "post_id": 47234565, "comment_id": 81419819, "body": "The problem is in the line <code>| otherwise = (x:head rest) : tail rest</code> where you cons <code>x</code> on <code>head rest</code> no matter what <code>head rest</code> may be."}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 1, "last_activity_date": 1522472406, "last_edit_date": 1522472406, "creation_date": 1510380045, "answer_id": 47234903, "question_id": 47234565, "link": "https://stackoverflow.com/questions/47234565/recursive-tokenizer-in-haskell/47234903#47234903", "title": "Recursive tokenizer in Haskell", "body": "<p>First off, <code>tokenize [x] _ _</code> is probably not what you want, because <code>tokenize \"a\" \"\" \"a\"</code> ends up being <code>[\"a\"]</code> when it should probably be <code>[]</code>. Second, don't call the separator and removal lists <code>String</code>s. They are just <code>[Char]</code>s. There is no difference underneath, because <code>type String = [Char]</code>, but the point of a synonym is to make a semantic meaning clearer, and you are not really using your <code>String</code>s as <code>String</code>s, so your function isn't worthy of it. Additionally, you should shuffle the arguments to <code>tokenize seps rems str</code>, because that makes currying easier. Finally, you probably want to use <code>Data.Set</code> instead of <code>[Char]</code>, but I won't use it here to stay closer to the question.</p>\n\n<p>The issue itself is <code>| otherwise = (x:head rest) : tail rest</code>, which tacks any unspecial character onto the next token, even if that token is supposedly a separator. In your case, an example of this is when <code>head rest = \"+\"</code> and <code>x = 'a'</code>, and you join them so you have <code>\"a+\"</code>. You need to guard further.</p>\n\n<p>(Also: your indentation is messed up: <code>where</code> clauses bind to the <em>entire</em> equation, so it's visible throughout all the guards. It should be indented such that that's clear.)</p>\n\n<pre><code>tokenize :: [Char] -&gt; [Char] -&gt; String -&gt; [String]\ntokenize _ _ \"\" = []\ntokenize seps rems (x:xs)\n  | x `elem` rems                      = rest\n  | x `elem` seps                      = [x]:rest\n  -- Pattern guard: if rest has a single-char token on top and that token is a sep...\n  | ([sep]:_) &lt;- rest, sep `elem` seps = [x]:rest\n  -- Otherwise, if rest has a token on top (which isn't a sep), grow it\n  | (growing:rest') &lt;- rest            = (x:growing):rest'\n  -- Or else make a new token (when rest = [])\n  | otherwise                          = [x]:rest\n  where rest = tokenize seps rems xs\n</code></pre>\n\n<p>You may also use <code>filter</code>:</p>\n\n<pre><code>tokenize seps rems = tokenize' . filter (not . flip elem rems)\n  where tokenize' \"\" = []\n        tokenize' (x:xs)\n          | x `elem` seps                      = [x]:rest\n          | ([sep]:_) &lt;- rest, sep `elem` seps = [x]:rest\n          | (growing:rest') &lt;- rest            = (x:growing):rest'\n          | otherwise                          = [x]:rest\n          where rest = tokenize' xs\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5880715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0df13a1f9bf2caabf244d4bbe1bbb08a?s=128&d=identicon&r=PG&f=1", "display_name": "greenbottle", "link": "https://stackoverflow.com/users/5880715/greenbottle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 47234903, "answer_count": 1, "score": 3, "last_activity_date": 1522472406, "creation_date": 1510376886, "question_id": 47234565, "link": "https://stackoverflow.com/questions/47234565/recursive-tokenizer-in-haskell", "title": "Recursive tokenizer in Haskell", "body": "<p>I am working an assignment in Haskell, to prepare for tests. The current task asks to tokenize a string after the following formula:\nWhen running \"tokenize str separate remove\" it should should output a list of strings. Every character in \"str\" appearing in string \"separate\" should be a string of one character. Every character in \"str\" appearing in string \"remove\" should be removed. Characters not appearing in either separate or remove should be bundled together.</p>\n\n<p>Example shows that</p>\n\n<pre><code>tokenize \"a + b* 12-def\"   \"+-*\"   \" \"\n</code></pre>\n\n<p>should output</p>\n\n<pre><code>[\"a\", \"+\", \"b\", \"*\", \"12\", \"-\", \"def\"]\n</code></pre>\n\n<p>my current code below</p>\n\n<pre><code>tokenize :: String -&gt; String -&gt; String -&gt; [String]\ntokenize [] _ _  = []\ntokenize [x] _ _ = [[x]]\ntokenize (x:xs) a b     | x `elem` a = [x] : tokenize xs a b\n                        | x `elem` b = tokenize xs a b\n                        | otherwise = (x:head rest) : tail rest\n                                where\n                                        rest = tokenize xs a b\n</code></pre>\n\n<p>It works to some extent, the problem being that it the operators in the example is bundled with the letter preceding it.</p>\n\n<p>like this</p>\n\n<pre><code>[\"a+\",\"b*\",\"12-\",\"def\"]\n</code></pre>\n\n<p>despite the operators being in the separate string.</p>\n"}, {"tags": ["list", "parsing", "haskell", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "is_accepted": true, "score": 7, "last_activity_date": 1510380667, "last_edit_date": 1510380667, "creation_date": 1510377271, "answer_id": 47234600, "question_id": 47234281, "link": "https://stackoverflow.com/questions/47234281/haskell-list-to-tuple/47234600#47234600", "title": "Haskell List to Tuple", "body": "<p>In your code,\n<code>parseArgs [x, y]</code> means it only accepts exactly a list of two elements.\nSo <code>length [x, y]</code> will always be 2, and those (>2) (&lt;2) conditions will never be met.</p>\n\n<p><code>otherwise</code> will always be a list of two elements. So when the input is a list of two elements, you can get x and y, and make them a Maybe tuple for sure.</p>\n\n<p>But other than that, if you <code>parseArgs []</code> <code>parseArgs [\"a\"]</code> <code>parseArgs [\"a\",\"b\",\"c\"]</code>, you get an exception \"Non-exhaustive patterns in function parseArgs\".\nIt is because the code didn't cover all the patterns in <code>[String]</code></p>\n\n<p>I use Maybe (String, String) for output here. It means parseArg will either produce Just (String, String) or Nothing. Perhaps it's closer to what you want.</p>\n\n<p>So try this:</p>\n\n<pre><code>parseArgs :: [String] -&gt; Maybe (String, String)\nparseArgs x:y:[] = Just (x,y)\nparseArgs xs = Nothing\n</code></pre>\n\n<p>It means if the input [String] happens to be x:y:[] (a list of exact two strings), produce Just (x,y). Other than that, produce Nothing. In this way, it covers all patterns in [String]. And you then can get <code>Nothing</code> when it is not a list of two elements.</p>\n\n<p>Edit:\nAnd second to @pdoherty926's <code>parseArgs _ = Nothing</code>, the wildcard _ is a better way to express \"everything else\".</p>\n"}, {"tags": [], "owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "is_accepted": false, "score": 5, "last_activity_date": 1510377646, "creation_date": 1510377646, "answer_id": 47234645, "question_id": 47234281, "link": "https://stackoverflow.com/questions/47234281/haskell-list-to-tuple/47234645#47234645", "title": "Haskell List to Tuple", "body": "<p>@Johhny Liao beat me to it, but here's my similar answer:</p>\n\n<p>Based on your requirements, I'm unclear as to why the second tuple element would be <code>Maybe String</code>. So, I'm going to proceed as though the type of your function is: <code>parseArgs :: [String] -&gt; Maybe (String, String)</code></p>\n\n<pre><code>parseArgs :: [String] -&gt; Maybe (String, String)\nparseArgs [x, xx] = Just (x, xx)  -- pattern match on the list of two elements\nparseArgs _ = Nothing               -- discard _everything_ else\n\nprint $ parseArgs [\"hi\", \"bye\"]    -- Just (\"hi\", \"bye\")\nprint $ parseArgs [\"hi\"]               -- Nothing\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "accepted_answer_id": 47234600, "answer_count": 2, "score": 2, "last_activity_date": 1510380667, "creation_date": 1510373771, "question_id": 47234281, "link": "https://stackoverflow.com/questions/47234281/haskell-list-to-tuple", "title": "Haskell List to Tuple", "body": "<p>I am writing a function, <code>parseArgs</code>, which will take in command line arguments in the form of a list. If the size of the list is two, the function is to parse the contents of the list and convert them to a tuple, otherwise returning <code>Nothing</code>. I am unsure of quite how to go about this; my code thus far is below:</p>\n\n<pre><code>parseArgs :: [String] -&gt; Maybe (String, Maybe String)\nparseArgs [x, y]\n  | length [x, y] &lt; 2 = Nothing\n  | length [x, y] &gt; 2 = Nothing\n  | otherwise = Just (x, Just y)\n</code></pre>\n"}, {"tags": ["haskell", "recursion", "io", "tail-recursion"], "comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1510375257, "post_id": 47234256, "comment_id": 81419367, "body": "That is actually not tail recursive. If you desugar the first one, you get <code>go l = getLine &gt;&gt;= (\\inp -&gt; if (inp == &quot;&quot;) then return l else go (inp:l))</code>. The outermost call is to <code>(&gt;&gt;=)</code>."}, {"owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1510377351, "post_id": 47234256, "comment_id": 81419770, "body": "@DavidYoung right, I totally forgot about that. In such a case, is there any advantage of one style over the other?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1510387791, "post_id": 47234256, "comment_id": 81421899, "body": "I&#39;d consider the first one to be at least morally tail recursive. By comparison <code>f x = bool (x==0) (f (x-1)) 0</code> is not tail recursive, but <code>bool</code> will eventually transfer control to <code>f (x-1)</code>, so this runs in constant space. I guess it&#39;s the same with IO&#39;s <code>&gt;&gt;=</code>, except it&#39;s less trivial to notice since we need to dig inside the IO implementation. (Also, note that the result of the two posted IO actions is different, since they return the list in a different order)"}, {"owner": {"reputation": 60057, "user_id": 1333025, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/79ab43010f900324ac5e2de19a2916cb?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1333025/petr"}, "edited": false, "score": 2, "creation_date": 1514568128, "post_id": 47234256, "comment_id": 83021805, "body": "Related: <a href=\"https://stackoverflow.com/q/13379060/1333025\">Under what circumstances are monadic computations tail-recursive?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 2, "last_activity_date": 1514513647, "last_edit_date": 1514513647, "creation_date": 1510575098, "answer_id": 47264102, "question_id": 47234256, "link": "https://stackoverflow.com/questions/47234256/is-it-recommended-to-use-recursive-io-actions-in-the-tail-recursive-form/47264102#47264102", "title": "Is it recommended to use recursive IO actions in the tail recursive form?", "body": "<p>That\u2019s really not how I would write it, but it\u2019s clear enough what you\u2019re doing.  (By the way, if you want to be able to efficiently insert arbitrary output from any function in the chain, without using monads, you might try a <code>Data.ByteString.Builder</code>.)</p>\n\n<p>Your first implementation is very similar to a left fold, and your second very similar to a right fold or map.  (You might try actually writing them as such!)  The second one has several advantages for I/O.  One of the most important, for handling input and output, is that <em>it can be interactive</em>.</p>\n\n<p>You\u2019ll notice that the first builds the entire list from the outside in: in order to determine what the first element of the list is, the program needs to compute the entire structure to get to the innermost thunk, which is <code>return l</code>.  The program generates the entire data structure first, then starts to process it.  That\u2019s useful when you\u2019re <em>reducing</em> a list, because tail-recursive functions and strict left folds are efficient.</p>\n\n<p>With the second, the outermost thunk contains the head and tail of the list, so you can grab the tail, then call the thunk to generate the second list.  This can work with infinite lists, and it can produce and return partial results.</p>\n\n<p>Here\u2019s a contrived example: a program that reads in one integer per line and prints the sums so far.</p>\n\n<pre><code>main :: IO ()\nmain = interact( display . compute 0 . parse . lines )\n  where parse :: [String] -&gt; [Int]\n        parse [] = []\n        parse (x:xs) = (read x):(parse xs)\n\n        compute :: Int -&gt; [Int] -&gt; [Int]\n        compute _ [] = []\n        compute accum (x:xs) = let accum' = accum + x\n                               in accum':(compute accum' xs)\n\n        display = unlines . map show\n</code></pre>\n\n<p>If you run this interactively, you\u2019ll get something like:</p>\n\n<pre><code>$ 1\n1\n$ 2\n3\n$ 3\n6\n$ 4\n10\n</code></pre>\n\n<p>But you could also write <code>compute</code> tail-recursively, with an accumulating parameter:</p>\n\n<pre><code>main :: IO ()\nmain = interact( display . compute [] . parse . lines )\n  where parse :: [String] -&gt; [Int]\n        parse = map read\n\n        compute :: [Int] -&gt; [Int] -&gt; [Int]\n        compute xs [] = reverse xs\n        compute [] (y:ys) = compute [y] ys\n        compute (x:xs) (y:ys) = compute (x+y:x:xs) ys\n\n        display = unlines . map show\n</code></pre>\n\n<p>This is an artificial example, but strict left folds are a common pattern. If, however, you write either <code>compute</code> or <code>parse</code> with an accumulating parameter, this is what you get when you try to run interactively, and hit EOF (<code>control-D</code> on Unix, <code>control-Z</code> on Windows) after the number 4:</p>\n\n<pre><code>$ 1\n$ 2\n$ 3\n$ 4\n1\n3\n6\n10\n</code></pre>\n\n<p>This left-folded version needs to compute the entire data structure before it can read any of it.  That can\u2019t ever work on an infinite list (When would you reach the base case?  How would you even reverse an infinite list if you did?) and an application that can\u2019t respond to user input until it quits is a deal-breaker.</p>\n\n<p>On the other hand, the tail-recursive version can be strict in its accumulating parameter, and will run more efficiently, especially when it\u2019s not being consumed immediately.  It doesn\u2019t need to keep any thunks or context around other than its parameters, and it can even re-use the same stack frame.  A strict accumulating function, such as <code>Data.List.foldl'</code>, is a great choice whenver you\u2019re reducing a list to a value, not building an eagerly-evaluated list of output.  Functions such as <code>sum</code>, <code>product</code> or <code>any</code> can\u2019t return any useful intermediate value.  They inherently have to finish the computation first, then return the final result.</p>\n"}, {"tags": [], "owner": {"reputation": 60057, "user_id": 1333025, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/79ab43010f900324ac5e2de19a2916cb?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1333025/petr"}, "is_accepted": false, "score": 3, "last_activity_date": 1516005623, "last_edit_date": 1516005623, "creation_date": 1514569551, "answer_id": 48026376, "question_id": 47234256, "link": "https://stackoverflow.com/questions/47234256/is-it-recommended-to-use-recursive-io-actions-in-the-tail-recursive-form/48026376#48026376", "title": "Is it recommended to use recursive IO actions in the tail recursive form?", "body": "<p>FWIW,  I'd go for existing monadic combinators and focus on readability/consiseness. Using <a href=\"https://hackage.haskell.org/package/monad-loops-0.4.3/docs/Control-Monad-Loops.html#v:unfoldM\" rel=\"nofollow noreferrer\"><code>unfoldM :: Monad m =&gt; m (Maybe a) -&gt; m [a]</code></a>:</p>\n\n<pre><code>import Control.Monad (liftM, mfilter)\nimport Control.Monad.Loops (unfoldM)\n\nmyReadListTailRecursive :: IO [String]\nmyReadListTailRecursive = unfoldM go\n  where\n    go :: IO (Maybe String)\n    go = do\n        line &lt;- getLine\n        return $ case line of\n            \"\" -&gt; Nothing\n            s -&gt; Just s\n</code></pre>\n\n<p>Or using <code>MonadPlus</code> instance of <code>Maybe</code>, with <a href=\"https://hackage.haskell.org/package/base-4.10.1.0/docs/Control-Monad.html#v:mfilter\" rel=\"nofollow noreferrer\"><code>mfilter :: MonadPlus m =&gt; (a -&gt; Bool) -&gt; m a -&gt; m a</code></a>:</p>\n\n<pre><code>myReadListTailRecursive :: IO [String]\nmyReadListTailRecursive = unfoldM (liftM (mfilter (/= \"\") . Just) getLine)\n</code></pre>\n\n<p>Another, more versatile option, might be to use <a href=\"https://hackage.haskell.org/package/control-monad-loop-0.1/docs/Control-Monad-Trans-Loop.html\" rel=\"nofollow noreferrer\"><code>LoopT</code></a>.</p>\n"}], "owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 2, "answer_count": 2, "score": 12, "last_activity_date": 1516005623, "creation_date": 1510373538, "last_edit_date": 1510377576, "question_id": 47234256, "link": "https://stackoverflow.com/questions/47234256/is-it-recommended-to-use-recursive-io-actions-in-the-tail-recursive-form", "title": "Is it recommended to use recursive IO actions in the tail recursive form?", "body": "<p>Consider the two following variations:</p>\n\n<pre><code>myReadListTailRecursive :: IO [String]\nmyReadListTailRecursive = go []\n    where \n    go :: [String] -&gt; IO [String]   \n    go l = do {\n                 inp &lt;- getLine;\n                 if (inp == \"\") then \n                     return l;\n                 else go (inp:l);\n                }\n\nmyReadListOrdinary :: IO [String]\nmyReadListOrdinary = do\n        inp &lt;- getLine\n        if inp == \"\" then\n            return []\n        else\n            do\n                moreInps &lt;- myReadListOrdinary\n                return (inp:moreInps)\n</code></pre>\n\n<p>In ordinary programming languages, one would know that the tail recursive variant is a better choice. </p>\n\n<p>However, going through <a href=\"https://stackoverflow.com/a/13052612/1955231\">this answer</a>, it is apparent that haskell's implementation of recursion is not similar to that of using the recursion stack repeatedly.</p>\n\n<p>But because in this case the program in question involves actions, and a strict monad, I am not sure if the same reasoning applies. In fact, I think in the <code>IO</code> case, the tail recursive form is indeed better. I am not sure how to correctly reason about this.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> David Young pointed out that the outermost call here is to <code>(&gt;&gt;=)</code>. Even in that case, does one of these styles have an advantage over the other?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510359577, "post_id": 47233030, "comment_id": 81416775, "body": "related: <a href=\"https://stackoverflow.com/questions/28665917/accessing-the-default-show-in-haskell\" title=\"accessing the default show in haskell\">stackoverflow.com/questions/28665917/&hellip;</a>"}, {"owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510360650, "post_id": 47233030, "comment_id": 81416978, "body": "@WillemVanOnsem it&#39;s not same. For my data constructor i have only two values and for both of these values i have defined show but it does not print anything, i even tried to do with read by using type-annotations but it does not work :)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510360768, "post_id": 47233030, "comment_id": 81416999, "body": "Of course it does not print anything, it is stuck an in infinite loop."}, {"owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510361247, "post_id": 47233030, "comment_id": 81417082, "body": "What will be the solution except using <code>deriving</code> word ? Excuses for so many questions :("}], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 3, "last_activity_date": 1510363423, "last_edit_date": 1510363423, "creation_date": 1510363088, "answer_id": 47233348, "question_id": 47233030, "link": "https://stackoverflow.com/questions/47233030/difference-between-deriving-and-instance-in-haskell/47233348#47233348", "title": "Difference between deriving and instance in haskell", "body": "<p>The code</p>\n\n<pre><code>show (Justs v) = show (Justs v)\n</code></pre>\n\n<p>goes into an infinite loop for the same reason</p>\n\n<pre><code>f x = f x\n</code></pre>\n\n<p>does.</p>\n\n<p>You can write it without the <code>Justs</code> as you asked, you only need a constraint on the instance</p>\n\n<pre><code>\ninstance <b>(Show v) =&gt;</b> Show (SomeValue v) where\n    show Null = \"You have no value\"\n    show (Justs v) = show v\n</code></pre>\n\n<p>because if you are going to try to show a <code>v</code>, <code>v</code> should be showable, no?</p>\n"}], "owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 47233348, "answer_count": 1, "score": 2, "last_activity_date": 1510363423, "creation_date": 1510359477, "question_id": 47233030, "link": "https://stackoverflow.com/questions/47233030/difference-between-deriving-and-instance-in-haskell", "title": "Difference between deriving and instance in haskell", "body": "<p>I have a type which i have made an instance of <code>Show</code> class but i'm not getting the desired result. If i try to make it an instance of show class by using <code>deriving</code> word then it works but if try like:</p>\n\n<pre><code>instance Show (SomeValue v) where\n  show (Null) = \"You have no value\"\n  show (Justs v) = show (Justs v)\n\nfindKey key = foldr (\\(k,v) acc -&gt; if key == k then Justs v else acc ) Null \n</code></pre>\n\n<p>It goes in an un-ending loop(kind of). I think that default implementation works which i get by using <code>deriving</code> word what's wrong with the above code? it compiles but it does not print anything.</p>\n\n<p>Is it possible that i print the value like this: (without \"Justs\")?</p>\n\n<pre><code>instance Show (SomeValue v) where\n  show (Null) = \"You have no value\"\n  show (Justs v) = show (v)\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1510367306, "post_id": 47232769, "comment_id": 81418053, "body": "I think this would probably be a good question if you added code that could reproduce this sort of error"}, {"owner": {"reputation": 4234, "user_id": 4942760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f322d06b4f3e34278f29a954e0f38cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Robertson", "link": "https://stackoverflow.com/users/4942760/dan-robertson"}, "edited": false, "score": 1, "creation_date": 1510372788, "post_id": 47232769, "comment_id": 81418938, "body": "I don\u2019t want to leave an answer as I\u2019m not very sure but here\u2019s a guess. You have written a type signature and ghc wants to check that the function for which the type was fully inferred is of that type. Ie it wants to check that the type signature give is a special case of the inferred type. In this case the problem is that the function uses an arbitrary monad which could be anything. The inferred type signature captures this whole the signature does not."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1510378893, "post_id": 47232769, "comment_id": 81420041, "body": "This error can be seen in <code>ghci</code> if you do <code>let (x,y) = (&quot;foo&quot;, return &quot;bar&quot;)</code>.  It tells me that it has something to do with predicative polymorphism, i.e. that a data structure like a tuple or a list cannot contain a polymorphic type, and there are no applicable defaulting rules.  But it&#39;s hard to say without seeing some example code (and that link you gave ... tldr)"}, {"owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510415806, "post_id": 47232769, "comment_id": 81429870, "body": "@luqui I think you are onto something! Thanks for the smaller repro case. I&#39;ve updated my question based on what you wrote. And as you can see in my update, the tuple has no problem holding a polymorphic value. <code>c :: Monad m =&gt; (Char, m Char)</code>. So I think we are getting closer to understanding this, but we are not quite there yet."}, {"owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1510416044, "post_id": 47232769, "comment_id": 81429948, "body": "@jberryman I&#39;ve updated the question with the code of a smaller reproducible case. And here ( <a href=\"https://gist.github.com/Wizek/396b0a608fa93d7d458a78dbf7c88870\" rel=\"nofollow noreferrer\">gist.github.com/Wizek/396b0a608fa93d7d458a78dbf7c88870</a> ) you can find a larger motivating example."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510423094, "post_id": 47232769, "comment_id": 81432501, "body": "@Wizek, What I meant is a type like <code>(Char, forall m. Monad m =&gt; m Char)</code>, which is illegal (it was allowed by <code>-XImpredicativePolymorphism</code>, which is deprecated)."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510423383, "post_id": 47232769, "comment_id": 81432598, "body": "Also, the fact that <code>let e = return &#39;y&#39;</code> works is due to <code>NoMonomorphismRestriction</code> being on by default in ghci.  In source files it is off by default, and you can <code>:set -XMonomorphismRestriction</code> in ghci to get this behavior.  The error message is different though."}], "answers": [{"comments": [{"owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "edited": false, "score": 0, "creation_date": 1510572147, "post_id": 47243733, "comment_id": 81476992, "body": "Yes, this is what I came to understand as I wrote my edit as well. But it still doesn&#39;t make full sense to me. <code>fst ab :: Monad m =&gt; Char</code> seems nonsensical to me. Is there any reason for that not to be <code>fst ab :: Char</code>? In general, only to propagate the constraints for the type variables that are actually mentioned in the right hand side? Or is propagating &#39;phantom&#39;/impossible constraints ever useful?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "edited": false, "score": 0, "creation_date": 1510601054, "post_id": 47243733, "comment_id": 81494825, "body": "@Wizek, well, it seems silly here, but in other cases it may be less so. In particular, you&#39;re relying on the fact that the <code>Monad m</code> constraint is not used to calculate the value of the first component. You probably can&#39;t, but what if you use a class dictionary to calculate something of a type that doesn&#39;t reflect the instance type?"}, {"owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "edited": false, "score": 0, "creation_date": 1510619380, "post_id": 47243733, "comment_id": 81502696, "body": "&quot;You probably can&#39;t, but what if you use a class dictionary to calculate something of a type that doesn&#39;t reflect the instance type?&quot; Do you mean this is probably not possible? Because if I understand what you write, I&#39;d lean towards that it isn&#39;t possible. Or can you give an example where <code>C v =&gt; (a, v b)</code>, and <code>C</code> could have any effect on <code>a</code>? If it were <code>v a</code>, sure, but we already have a plain <code>a</code> &#39;unconstrained&#39;. And if this turns out to be impossible, wouldn&#39;t it make sense to fix GHC inferring <code>Monad m =&gt; Char</code> by making it look at the variables on the right hand side?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "edited": false, "score": 0, "creation_date": 1510620494, "post_id": 47243733, "comment_id": 81502987, "body": "@Wizek, I don&#39;t think it&#39;s possible for <code>Monad</code>, but it&#39;s possible for other classes, I imagine. Trying to pin down a sensible rule smells hard."}, {"owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "edited": false, "score": 0, "creation_date": 1510622923, "post_id": 47243733, "comment_id": 81503654, "body": "&quot;but it&#39;s possible for other classes, I imagine.&quot; I&#39;d love to see an example for that! \\\\\\ &quot;Trying to pin down a sensible rule smells hard&quot; Do you mean that you&#39;d find it hard to come up with an example? Or that it would be hard to decide whether to allow or disallow this in GHC?"}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1510600662, "last_edit_date": 1510600662, "creation_date": 1510441313, "answer_id": 47243733, "question_id": 47232769, "link": "https://stackoverflow.com/questions/47232769/what-does-a-haskell-type-error-mean-when-it-includes-is-as-general-as-its/47243733#47243733", "title": "What does a Haskell type error mean when it includes: &quot;... is as general as its inferred signature ...&quot;?", "body": "<p>I believe the problem is that you're using a pattern binding.</p>\n\n<pre><code>(a, b) = ('x', return 'y')\n</code></pre>\n\n<p>basically does this</p>\n\n<pre><code>ab = ('x', return 'y')\na = fst ab\nb = snd ab\n</code></pre>\n\n<p>The type of <code>ab</code> is</p>\n\n<pre><code>ab :: Monad m =&gt; (Char, m Char)\n</code></pre>\n\n<p>so <code>a</code> has type</p>\n\n<pre><code>a :: Monad m =&gt; Char\n</code></pre>\n\n<p>What is <code>m</code>? It doesn't appear to the right of the <code>=&gt;</code>, so it's ambiguous.</p>\n"}], "owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1510600662, "creation_date": 1510357261, "last_edit_date": 1510415606, "question_id": 47232769, "link": "https://stackoverflow.com/questions/47232769/what-does-a-haskell-type-error-mean-when-it-includes-is-as-general-as-its", "title": "What does a Haskell type error mean when it includes: &quot;... is as general as its inferred signature ...&quot;?", "body": "<p><strong>Edit:</strong> <a href=\"https://stackoverflow.com/questions/47232769/what-does-a-haskell-type-error-mean-when-it-includes-is-as-general-as-its#comment81420041_47232769\">@luqui</a> is onto something, with a much simpler reproducible case in GHCi:</p>\n\n<pre><code>Prelude&gt; let (a, b) = ('x', return 'y')\n\n&lt;interactive&gt;:1:5: error:\n    * Ambiguous type variable `m0'\n      prevents the constraint `(Monad m0)' from being solved.\n    * When checking that the inferred type\n        a :: forall (m :: * -&gt; *). Monad m =&gt; Char\n      is as general as its inferred signature\n        a :: Char\n</code></pre>\n\n<p>But then how come all the following variants work?</p>\n\n<pre><code>Prelude&gt; let c = ('x', return 'y')\nPrelude&gt; :t c\nc :: Monad m =&gt; (Char, m Char)\nPrelude&gt; let d = 'x'; e = return 'y'\nPrelude&gt; :t d\nd :: Char\nPrelude&gt; :t e\ne :: Monad m =&gt; m Char\nPrelude&gt; :t (d, e)\n(d, e) :: Monad m =&gt; (Char, m Char)\nPrelude&gt;\n</code></pre>\n\n<p>Shouldn't all of these work the same way?</p>\n\n<hr>\n\n<p>Original question:</p>\n\n<p>Here is a specific example:</p>\n\n<pre><code>\u2022 Ambiguous type variable \u2018m0\u2019\n  prevents the constraint \u2018(Monad m0)\u2019 from being solved.\n\n\u2022 When checking that the inferred type\n    logger :: forall b t (m :: * -&gt; *).\n              Monad m =&gt;\n              Data.Text.Internal.Text -&gt; IO ()\n  is as general as its inferred signature\n    logger :: Data.Text.Internal.Text -&gt; IO ()\n</code></pre>\n\n<p>And <a href=\"https://gist.github.com/Wizek/396b0a608fa93d7d458a78dbf7c88870\" rel=\"nofollow noreferrer\">here</a> is some background information and some instructions to reproduce the error in the above specific case.</p>\n\n<p>But I'm curious even in the general case: under what circumstances can this error arise, and what is it trying to convey?</p>\n"}, {"tags": ["haskell", "calculator"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1510357401, "post_id": 47232744, "comment_id": 81416282, "body": "What have you tried to solve this problem yourself?"}], "answers": [{"tags": [], "owner": {"reputation": 4234, "user_id": 4942760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f322d06b4f3e34278f29a954e0f38cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Robertson", "link": "https://stackoverflow.com/users/4942760/dan-robertson"}, "is_accepted": false, "score": 0, "last_activity_date": 1510373152, "creation_date": 1510373152, "answer_id": 47234226, "question_id": 47232744, "link": "https://stackoverflow.com/questions/47232744/building-a-calculator-with-haskell-that-can-take-more-than-two-arguments/47234226#47234226", "title": "Building a calculator with Haskell that can take more than two arguments", "body": "<p>Changing apply op might help. Here\u2019s two examples:</p>\n\n<pre><code>apply_op \u201c+\u201d xs = sum xs\napply_op \u201c-\u201c [x] = -x\napply_op \u201c-\u201c (x:xs@(_:_)) = x - sum xs\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7532953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a747e3fb92a9e75d417f972440970bd?s=128&d=identicon&r=PG&f=1", "display_name": "Random Coder ", "link": "https://stackoverflow.com/users/7532953/random-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510373152, "creation_date": 1510357044, "question_id": 47232744, "link": "https://stackoverflow.com/questions/47232744/building-a-calculator-with-haskell-that-can-take-more-than-two-arguments", "title": "Building a calculator with Haskell that can take more than two arguments", "body": "<p>I'm trying to make a calculator in Haskell. I've done it to a point where it can take two arguments. But I'm stuck at a point where it can take more than two arguments. For example the input type is (+ 1 2) and it prints 3. But now it should be able to take in (+ 1 2 3) and print out 6. </p>\n\n<p>The code is here: </p>\n\n<pre><code>import System.IO\n\nmain = do loop []\n\nleadingNonSpaces [] = 0\nleadingNonSpaces (' ':cs) = 0\nleadingNonSpaces (c:cs) = 1 + (leadingNonSpaces cs)\n\nkeepNonSpaces cs = take (leadingNonSpaces cs) cs\n\nfirstWord cs = keepNonSpaces cs\n\nsecond x = head (drop 1 x)\n\n-- evaluation loop, taking list of defined variables (var, value) tuples\n-- reads a statement and prints out its value\nloop vars = do\n     eof &lt;- isEOF\n     if eof\n     then return ()\n     else do line &lt;- getLine\n             if ((firstWord line) == \"set\")\n               then do\n                 let tokens = (drop 1 (tokenize line))\n                 let value = (eval vars (second tokens))\n                 putStrLn (show value)\n                 loop (((head tokens),value):vars)\n               else do\n                 let res = eval vars line\n                 putStrLn (show res)\n                 loop vars\n\n-- split string into space-separated tokens, but counting\n--   a parenthesized subexpression as a single token\ntokenize [] = []\ntokenize (' ':cs) = tokenize cs\ntokenize cs = let i = charsInToken cs\n  in (take i cs):(tokenize (drop i cs))\n\n-- returns # characters in first token; counts parenthesized\n-- expression as a single token\ncharsInToken str = helper str 0\n  -- helper takes string and number of open parentheses to be matched\n  -- returns number of chars in first token\n  where helper [] 0 = 0\n        helper (' ':cs) 0 = 0\n        helper (' ':cs) d = 1 + (helper cs d)\n        helper ('(':cs) d = 1 + (helper cs (d+1))\n--        helper (')':cs) 1 = 1              -- correct, but unnecessary\n        helper (')':cs) d = 1 + (helper cs (d-1))\n        helper (c:cs) d = 1 + (helper cs d)\n\n-- evaluates expression in its argument string, returning an int\n-- first argument is list of (var, value) tuples for declared variables\neval vars ('(':cs) = eval vars (take ((length cs)-1) cs)\neval vars (c:cs) = if (elem c \"0123456789\")\n              then read (c:cs) :: Int\n              else let ts = tokenize (c:cs)\n                in if (elem (head (head ts)) \"+-*/\")\n                   then apply_op (head ts) (map (eval vars) (drop 1 ts))\n                   else lookupVar vars (head ts)\n\n-- look up a variable in the list of (variable, value) tuples and\n-- return corresponding value\nlookupVar [] v = error (\"Undefined variable: \" ++ v)\nlookupVar ((var,val):ts) v = if(v == var)\n                             then val\n                             else lookupVar ts v\n\n-- apply an operator to a list of two integers\napply_op \"+\" [arg1, arg2] = arg1 + arg2\napply_op \"-\" [arg1, arg2] = arg1 - arg2\napply_op \"*\" [arg1, arg2] = arg1 * arg2\napply_op \"/\" [arg1, arg2] = div arg1 arg2\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510354373, "post_id": 47232335, "comment_id": 81415460, "body": "Be more specific about how it is not working.  Is it an error?  Is it giving the wrong output?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510355369, "post_id": 47232335, "comment_id": 81415763, "body": "Your first case precludes the empty list from being a sublist of the empty list."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1510355497, "post_id": 47232335, "comment_id": 81415796, "body": "Define &quot;sublist&quot;. Your attempt implies you want <code>[1,3]</code> to be a sublist of <code>[1,2,3]</code>, but one could imagine that <code>x</code> is a sublist of <code>y</code> iff there are (possibly empty) lists <code>w</code> and <code>z</code> such that <code>w ++ x ++ z == y</code>."}, {"owner": {"reputation": 4185, "user_id": 15467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89c04ada36efa853c7f5be0a96b6dd9?s=128&d=identicon&r=PG", "display_name": "ja.", "link": "https://stackoverflow.com/users/15467/ja"}, "edited": false, "score": 0, "creation_date": 1510356783, "post_id": 47232335, "comment_id": 81416121, "body": "Looks like you&#39;re trying to use Pattern Guards in the last 3 lines, but don&#39;t quite have the syntax correct.  Delete the <code>=</code> from the first of those 3 lines, and add <code>|</code> (guard) character to the beginning of the remaining 2 lines."}], "answers": [{"comments": [{"owner": {"reputation": 13435, "user_id": 1601580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2B6rV.png?s=128&g=1", "display_name": "Charlie Parker", "link": "https://stackoverflow.com/users/1601580/charlie-parker"}, "edited": false, "score": 0, "creation_date": 1569184261, "post_id": 47234043, "comment_id": 102504246, "body": "is this tail or forward recursive?"}], "tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": true, "score": 4, "last_activity_date": 1510381630, "last_edit_date": 1510381630, "creation_date": 1510370676, "answer_id": 47234043, "question_id": 47232335, "link": "https://stackoverflow.com/questions/47232335/check-if-list-is-a-sublist-of-another-list/47234043#47234043", "title": "Check, if list is a sublist of another list", "body": "<p>Your code is close to working, but just needs some minor changes. As other have said in the comments, you need to include <code>|</code> pattern guards, and remove <code>=</code> from the first function call. Here is what the last 3 lines should look like:</p>\n\n<pre><code>subList (x:xs) (y:ys)   \n    | x == y    = subList xs ys   \n    | otherwise = subList (x:xs) ys\n</code></pre>\n\n<p>This will fix up your code for the most part, but you also need to add the base case <code>subList [] [] = True</code>, because the empty list <code>[]</code> is the a sublist of another empty list <code>[]</code>, just like <code>[1]</code> is a sublist of <code>[1]</code>. </p>\n\n<p>Adding these changes, your code would look like this:</p>\n\n<pre><code>subList :: Eq a =&gt; [a] -&gt; [a] -&gt; Bool\nsubList [] [] = True\nsubList _ []    = False\nsubList [] _    = True\nsubList (x:xs) (y:ys) \n    | x == y    = subList xs ys   \n    | otherwise = subList (x:xs) ys\n</code></pre>\n\n<p>Some example calls:</p>\n\n<pre><code>Prelude&gt; subList [] []\nTrue\nPrelude&gt; subList [1] [1,2,3]\nTrue\nPrelude&gt; subList [1] [4,2,3]\nFalse\nPrelude&gt; subList [1] []\nFalse\nPrelude&gt; subList [1,2] [1,2]\nTrue\nPrelude&gt; subList [1,2] [2,1]\nFalse\nPrelude&gt; subList [1,2] [1,2,2,1]\nTrue\n</code></pre>\n\n<p>However, their is problem with a call like this:</p>\n\n<pre><code>Prelude&gt; subList [1,3] [1,2,3]\nTrue\n</code></pre>\n\n<p>implying that <code>[1,3]</code> is a sublist of <code>[1,2,3]</code>. This could be intended, but if it is not, then you need to change your approach. </p>\n\n<p><strong>Another approach:</strong></p>\n\n<p>For your two lists, <code>xs</code> and <code>ys</code>, You could instead split the <code>ys</code> into sublists of length <code>xs</code>, let's say <code>subys</code>, and check if <code>xs</code> exists in <code>subys</code>. To do this, you could use <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:splitAt\" rel=\"nofollow noreferrer\"><code>splitAt</code></a>, which splits a list every <code>n</code> characters. Here is an example function:</p>\n\n<pre><code>split_lists :: Int -&gt; [a] -&gt; [[a]]\nsplit_lists _ [] = []\nsplit_lists n xs\n    | length first == n = first : restxs\n    | otherwise = restxs\n    where (first, rest) = splitAt n xs\n          restxs = split_lists n (tail first ++ rest)\n</code></pre>\n\n<p>If you don't wish to use <code>splitAt</code>, you could do something like this:</p>\n\n<pre><code>split_lists :: Int -&gt; [a] -&gt; [[a]]\nsplit_lists _ [] = []\nsplit_lists n xs = filter (\\x -&gt; length x == n) list\n    where list = take n xs : split_lists n (drop 1 xs)\n</code></pre>\n\n<p>Which behaves like:</p>\n\n<pre><code>Prelude&gt; split_lists 3 [1,2,3,4,5,6,7,8,9,10]\n[[1,2,3],[2,3,4],[3,4,5],[4,5,6],[5,6,7],[6,7,8],[7,8,9],[8,9,10]]\n</code></pre>\n\n<p>Then you could just use <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:any\" rel=\"nofollow noreferrer\"><code>any</code></a> to check if the first list exists in the second list splitted into sublists, or you could just use normal recursion, up to you. </p>\n\n<p>Here is an example using <code>any</code>:</p>\n\n<pre><code>subList :: (Eq a) =&gt; [a] -&gt; [a] -&gt; Bool\nsubList [] [] = True\nsubList xs ys = any (==xs) subys\n    where subys = (split_lists (length xs) ys)\n</code></pre>\n\n<p>Here is an example using recursion:</p>\n\n<pre><code>subList :: (Eq a) =&gt; [a] -&gt; [a] -&gt; Bool\nsubList [] [] = True\nsubList xs ys = check_lists xs subys\n    where subys = (split_lists (length xs) ys)\n\ncheck_lists :: (Eq a) =&gt; [a] -&gt; [[a]] -&gt; Bool\ncheck_lists _ [] = False\ncheck_lists xs (y:ys)\n    | xs == y = True\n    | otherwise = check_lists xs ys\n</code></pre>\n\n<p>Which now behaves as follows:</p>\n\n<pre><code>Prelude&gt; subList [] []\nTrue\nPrelude&gt; subList [1] [1,2,3]\nTrue\nPrelude&gt; subList [1] [4,2,3]\nFalse\nPrelude&gt; subList [1] []\nFalse\nPrelude&gt; subList [1,2] [1,2]\nTrue\nPrelude&gt; subList [1,2] [2,1]\nFalse\nPrelude&gt; subList [1,2] [1,2,2,1]\nTrue\nPrelude&gt; subList [1,3] [1,2,3]\nFalse\nPrelude&gt; subList [1,2] [0,1,2,3]\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 10726996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbcdadae077a6301ed0b4abb5845757?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/10726996/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1581770677, "creation_date": 1581770677, "answer_id": 60238887, "question_id": 47232335, "link": "https://stackoverflow.com/questions/47232335/check-if-list-is-a-sublist-of-another-list/60238887#60238887", "title": "Check, if list is a sublist of another list", "body": "<p>You could use the function intersect like this:</p>\n\n<p>intersect [list1] [list2] == [list1]</p>\n\n<pre><code>*Test&gt; intersect [] [] == []\nTrue\n*Test&gt; intersect [1] [] == [1]\nFalse\n*Test&gt; intersect [2,4,6,4] [9,5,4,2,6,3,3] == [2,4,6,4]\nTrue\n*Test&gt; intersect [1,2,3] [3,2,5,4] == [1,2,3]\nFalse\n\n</code></pre>\n\n<p>You will have to import Data.List for this. </p>\n"}], "owner": {"reputation": 116, "user_id": 8803689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5D67w.png?s=128&g=1", "display_name": "lunesco", "link": "https://stackoverflow.com/users/8803689/lunesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4343, "favorite_count": 0, "accepted_answer_id": 47234043, "answer_count": 2, "score": 4, "last_activity_date": 1581770677, "creation_date": 1510354276, "question_id": 47232335, "link": "https://stackoverflow.com/questions/47232335/check-if-list-is-a-sublist-of-another-list", "title": "Check, if list is a sublist of another list", "body": "<p>I'd like to write a function that checks if one list is a sublist of another list. I wrote this, but it is not working, but I need something like this, I guess. Thanks for help.</p>\n\n<pre><code>subList :: Eq a =&gt; [a] -&gt; [a] -&gt; Bool\nsubList _ []    = False\nsubList [] _    = True\nsubList (x:xs) (y:ys) =   \n     x == y    = subList xs ys   \n     otherwise = subList (x:xs) ys\n</code></pre>\n"}, {"tags": ["haskell", "yesod"], "comments": [{"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 0, "creation_date": 1510415875, "post_id": 47231969, "comment_id": 81429893, "body": "I think the problem is the Hamlet does not support multiple attribute values. You can put the value in your Haskell source code instead and then include via #{...}"}, {"owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "reply_to_user": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 0, "creation_date": 1510419110, "post_id": 47231969, "comment_id": 81431065, "body": "@MichaelSnoyman thank you Michael. Could you directly include Html file?"}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 0, "creation_date": 1510460589, "post_id": 47231969, "comment_id": 81441196, "body": "I don&#39;t know what you mean"}], "owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1510352187, "creation_date": 1510352187, "question_id": 47231969, "link": "https://stackoverflow.com/questions/47231969/yesod-hamlet-file-error-with-path-tag-d-attribute", "title": "Yesod hamlet file error with &lt;path&gt; tag d attribute", "body": "<pre><code>&lt;path class=\"st1\" d=\"M72.5,38.6c0-0.1,0.1-0.1,0.1-0.2c0.1-0.1,0.1-0.2,0.2-0.2c0.1-0.1,0.2-0.1,0.3-0.2c0.1,0,0.2-0.1,0.3-0.1\n                                                    h4.6c0.2,0,0.4,0.1,0.5,0.2c0.1,0.1,0.3,0.2,0.3,0.3l0.5,1l9.5,24.4c0.1,0.2,0.1,0.4-0.1,0.6c-0.1,0.2-0.4,0.2-0.7,0.2h-5.2\n                                                    c-0.3,0-0.5-0.1-0.6-0.2c-0.2-0.1-0.3-0.3-0.4-0.5c-0.2-0.6-0.5-1.2-0.7-1.8c-0.2-0.6-0.5-1.2-0.7-1.8H71\n                                                    c-0.2,0.6-0.5,1.2-0.7,1.8c-0.2,0.6-0.5,1.2-0.7,1.8c-0.2,0.4-0.5,0.7-0.9,0.7h-5.3c-0.2,0-0.4-0.1-0.6-0.2\n                                                    c-0.2-0.1-0.2-0.3-0.1-0.5L72.5,38.6z M75.8,46.3c-0.2,0.6-0.5,1.3-0.7,2c-0.2,0.7-0.5,1.4-0.7,2.1c-0.2,0.7-0.5,1.4-0.7,2.1\n                                                    c-0.2,0.7-0.5,1.4-0.7,2h5.5L75.8,46.3z\"/&gt;\n</code></pre>\n\n<p>In my hamlet file I have the above code. GHC complains <code>unexpected d,expecting \"&gt;\"</code></p>\n\n<p>Any hint?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 4, "creation_date": 1510344322, "post_id": 47230303, "comment_id": 81411211, "body": "Well, at least, <code>liftM f . liftM g = liftM (f . g)</code>"}, {"owner": {"reputation": 554, "user_id": 1382487, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/JdQcl.jpg?s=128&g=1", "display_name": "wsaleem", "link": "https://stackoverflow.com/users/1382487/wsaleem"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510344997, "post_id": 47230303, "comment_id": 81411475, "body": "That could have been an answer. @Izaak beat you to it!"}], "answers": [{"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 4, "creation_date": 1510344667, "post_id": 47230349, "comment_id": 81411348, "body": "Except <code>replicateM</code> is not just <code>liftM . replicate</code>"}], "tags": [], "owner": {"reputation": 1290, "user_id": 5499871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206799318615183/picture?type=large", "display_name": "Izaak Weiss", "link": "https://stackoverflow.com/users/5499871/izaak-weiss"}, "is_accepted": false, "score": 4, "last_activity_date": 1510344391, "creation_date": 1510344391, "answer_id": 47230349, "question_id": 47230303, "link": "https://stackoverflow.com/questions/47230303/optimizing-repeated-function-calls-in-a-haskell-composition/47230349#47230349", "title": "Optimizing repeated function calls in a Haskell composition", "body": "<p>You could <code>liftM</code> the whole composition, as opposed to <code>liftM</code>ing each function separately.</p>\n\n<p><code>liftM (sum . replicate numTrials . boolToInt . hasDuplicates . sort)</code></p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 5, "last_activity_date": 1510351791, "last_edit_date": 1510351791, "creation_date": 1510344498, "answer_id": 47230370, "question_id": 47230303, "link": "https://stackoverflow.com/questions/47230303/optimizing-repeated-function-calls-in-a-haskell-composition/47230370#47230370", "title": "Optimizing repeated function calls in a Haskell composition", "body": "<p>Yes, you can compose some of them. The simplest way to see that is to recognize that <code>liftM</code> is really just an implementation of <code>fmap</code> for <code>Monad</code> instances.(1) So the usual functor laws apply:</p>\n\n<pre><code>fmap id = id\nfmap f . fmap g = fmap (f . g)\n</code></pre>\n\n<p>Thus</p>\n\n<pre><code>liftM boolToInt .\nliftM hasDuplicates .\nliftM sort\n</code></pre>\n\n<p>can be written</p>\n\n<pre><code>fmap (boolToInt . hasDuplicates . sort)\n</code></pre>\n\n<p>How can we do better? Let's look at this in context.</p>\n\n<pre><code>liftM sum . replicateM numTrials .\nfmap (boolToInt . hasDuplicates . sort) .\nreplicateM checkNum\n</code></pre>\n\n<p>There doesn't seem to be a lot of duplication here, but if there are many trials or many checks within each, there could be significant inefficiency because you're building up these lists in memory before summing them. You can fix this up by hand, but it won't be very pleasant(2). The nice way to fix it up is using a streaming package. Another thing to consider is that since the only effect we're working with is randomness, we can stop trials short if duplicates occur. I'll try to give a demonstration later.</p>\n\n<hr>\n\n<ol>\n<li><p>The <em>entire purpose</em> of <code>liftM</code> is to be able to write a <code>Monad</code> instance for a type <code>m</code> and then write <code>instance Functor m where fmap = liftM</code>. You shouldn't generally use <code>liftM</code> for anything else.</p></li>\n<li><p>For example,</p>\n\n<pre><code>fmap sum . replicateM n\n</code></pre>\n\n<p>can be written</p>\n\n<pre><code>sumReplications = go 0 where\n  go !acc 0 _ = pure acc\n  go acc n m = m &gt;&gt;= \\res -&gt; go (acc + res) (n - 1) m\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 554, "user_id": 1382487, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/JdQcl.jpg?s=128&g=1", "display_name": "wsaleem", "link": "https://stackoverflow.com/users/1382487/wsaleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1510351791, "creation_date": 1510344214, "last_edit_date": 1510344799, "question_id": 47230303, "link": "https://stackoverflow.com/questions/47230303/optimizing-repeated-function-calls-in-a-haskell-composition", "title": "Optimizing repeated function calls in a Haskell composition", "body": "<p>In writing a program to explore the birthday paradox, I have the following working Haskell code</p>\n\n<pre><code>sort :: Ord a =&gt; [a] -&gt; [a]\n-- body\n\nhasDuplicates :: Eq a =&gt; [a] -&gt; Bool\n-- body\n\nboolToInt :: Bool -&gt; Int\n-- body\n\nmain = do\n  -- stuff\n  repeats &lt;- liftM sum . replicateM numTrials . liftM boolToInt .\n    liftM hasDuplicates . liftM sort . replicateM checkNum $\n    randomRIO (1::Int, 365)\n  -- stuff\n</code></pre>\n\n<p>In the last line, there are a lot of <code>liftM</code> composed one after the other. Can this composition be optimized?</p>\n\n<p>I thought of <code>map</code>ping <code>liftM</code> to <code>[boolToInt, hasDuplicates, sort]</code> and then <a href=\"https://stackoverflow.com/questions/4342013/the-composition-of-functions-in-a-list-of-functions\"><code>compose</code>ing</a> but that list is heterogeneous so invalid. <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:iterate\" rel=\"nofollow noreferrer\"><code>iterate</code></a> would not work for similar reasons.</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1510343735, "post_id": 47230163, "comment_id": 81410983, "body": "Your pattern matching doesn&#39;t mean what you think.  <code>[x:xs]</code> is a list of one element, that element is itself a list with at least one element <code>x</code> followed by the rest of the list <code>xs</code>.  What you probably want is <code>(x:xs)</code> and same with <code>(y:ys)</code>."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1510345272, "post_id": 47230163, "comment_id": 81411589, "body": "Let me know if you don&#39;t understand something of my answer"}], "answers": [{"tags": [], "owner": {"reputation": 1290, "user_id": 5499871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206799318615183/picture?type=large", "display_name": "Izaak Weiss", "link": "https://stackoverflow.com/users/5499871/izaak-weiss"}, "is_accepted": false, "score": 1, "last_activity_date": 1510344061, "creation_date": 1510344061, "answer_id": 47230270, "question_id": 47230163, "link": "https://stackoverflow.com/questions/47230163/extremely-simple-haskell-program-but-i-still-have-problems-finding-my-errors/47230270#47230270", "title": "extremely simple haskell program but i still have problems finding my errors", "body": "<p>Change <code>[x:xs]</code> to <code>(x:xs)</code>, and the same for and <code>[y:ys]</code>.</p>\n\n<p>Also, you can't prepend a list to a list; you prepend elements to a list. So change <code>[x, y]:</code> to <code>x:y:</code>.</p>\n\n<p>You don't want to create nested lists for cases 2 and 3, either, so change <code>[xs]</code> to just <code>xs</code>, and the same for <code>[ys]</code></p>\n"}, {"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510344346, "post_id": 47230304, "comment_id": 81411221, "body": "This will still error if the difference between the lists is more than one element."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510344463, "post_id": 47230304, "comment_id": 81411269, "body": "<code>andX [1,4,2,5] [1,3,0,2,5,7]</code>."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1510344883, "last_edit_date": 1510344883, "creation_date": 1510344223, "answer_id": 47230304, "question_id": 47230163, "link": "https://stackoverflow.com/questions/47230163/extremely-simple-haskell-program-but-i-still-have-problems-finding-my-errors/47230304#47230304", "title": "extremely simple haskell program but i still have problems finding my errors", "body": "<p>Let me explain this code:</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [a]\nandX []         []      = []  \nandX xs         []      = xs\nandX []         ys      = ys\nandX (x:xs) (y:ys)      = x : y : andX xs ys\n</code></pre>\n\n<p>For example, and looking your answer, you want this:</p>\n\n<pre><code>andX [1,2,3] [4,5,6]\n=&gt; [1,4,2,5,3,6]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>andX [1,4,2,5] [1,3,0,2,5,7]\n=&gt; [1,1,4,3,2,0,5,2,5,7]\n</code></pre>\n\n<p>Look at your attempt (it was close enough)</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [a]\nandX []         []      = []  \nandX [xs]       []      = [xs]  \nandX []         [ys]    = [ys]  \n</code></pre>\n\n<p>Here, the first three cases are ok, but be carefull <code>[xs]</code> and <code>[ys]</code> are lists with just one element, so you will get in a patter matching failure if the lists has different sizes.</p>\n\n<pre><code>andX [x:xs] [y:ys]  = [x,y] : andX [xs] [ys]\n</code></pre>\n\n<p>here is the best problem, first <code>[x:xs] :: [[a]]</code> that's a list of list, you have to use <code>()</code> when you are doing pattern matching.\n Then <code>[x,y] : andX [xs] [ys]</code> is wrong, again, types doesn't match, you are trying to add <code>[a]</code> into a <code>[a]</code>, and you have just to add the <code>a</code> element, you do it like <code>x : y : andX [xs] [ys]</code> if you read it is \"add element x, add element y and then put the rest of the list <code>andX [xs] [ys]</code>\"</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 8921562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef6fde23e3c256fcc6748882df3327a?s=128&d=identicon&r=PG&f=1", "display_name": "Smurf Frums", "link": "https://stackoverflow.com/users/8921562/smurf-frums"}, "edited": false, "score": 0, "creation_date": 1510345039, "post_id": 47230329, "comment_id": 81411494, "body": "Thank you so much this was incredibly informative and Ive learned a lot!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 8, "last_activity_date": 1510344715, "last_edit_date": 1510344715, "creation_date": 1510344314, "answer_id": 47230329, "question_id": 47230163, "link": "https://stackoverflow.com/questions/47230163/extremely-simple-haskell-program-but-i-still-have-problems-finding-my-errors/47230329#47230329", "title": "extremely simple haskell program but i still have problems finding my errors", "body": "<p>There are some problems here, but the most important is probably that the <strong>list syntax</strong> is wrong.</p>\n\n<p>There are two types of list <em>constructors</em>:</p>\n\n<ol>\n<li>the empty list <code>[]</code>; and</li>\n<li>the <em>cons</em> <code><b>(</b>x:xs<b>)</b></code> (note round brackets).</li>\n</ol>\n\n<p>Your first clause is thus correct: you match two <em>empty</em> lists.</p>\n\n<p>The second and third are <em>syntactically</em> correct, but it means that you match a <strong>singleton</strong> list: a list with one item. This is because Haskell has syntactical sugar: <code>[x]</code> is short for <code>(x:[])</code>. I'm quite certain you do not want to match a singleton list, but any list. In case you want to do that, you can simply write:</p>\n\n<pre><code>andX xs [] = ...\nandX [] ys = ...\n</code></pre>\n\n<p>but now there will be other problems which we will discuss later.</p>\n\n<p>The last clause is an example of using <em>cons</em> for both parameters. So you should write it as:</p>\n\n<pre><code>andX <b>(</b>x:xs<b>)</b> <b>(</b>y:ys<b>)</b>  = [x,y] : andX <b>xs</b> <b>ys</b></code></pre>\n\n<p>Note that we do not write <code>andX [xs] [ys]</code> in the recursive calls (since that would result in constructing singelton lists), but we pass the <em>tails</em> of both the first and second list.</p>\n\n<p>So now we obtain:</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [a]\nandX []     []     = []  \nandX xs     []     = xs\nandX []     ys     = ys\nandX (x:xs) (y:ys) = [x,y] : andX xs ys\n</code></pre>\n\n<p>But it is still incorrect. There are basically two applications I can think of.</p>\n\n<h1>\"merging\" the two lists</h1>\n\n<p>If you want to merge the lists in the sense that we obtain a list of the form:</p>\n\n<pre><code>[x1,y1,x2,y2,x3,...]\n</code></pre>\n\n<p>then we can not write the inductive case as:</p>\n\n<pre><code>andX (x:xs) (y:ys)  = [x,y] : andX xs ys\n</code></pre>\n\n<p>since here as return we take <code>[x,y]</code> as <em>one</em> first element of the output. We can however write:</p>\n\n<pre><code>andX (x:xs) (y:ys)  = x : y : andX xs ys\n</code></pre>\n\n<p>now we emit the two items <code>x</code> and <code>y</code> as separate items, followed by the recursive call. In that case the code fragment is:</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [a]\nandX []     []     = []  \nandX xs     []     = xs\nandX []     ys     = ys\nandX (x:xs) (y:ys) = x : y : andX xs ys\n</code></pre>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>Prelude&gt; andX [1,4,2,5] [1,3,0,2,5]\n[1,1,4,3,2,0,5,2,5]\n</code></pre>\n\n<h1>Constructing sublists</h1>\n\n<p>Based on your code you want to returns a list of lists. But your output type says <code>[a]</code>. If you want to return a list of lists, it should be <code>[[a]]</code>.</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [[a]]\nandX []     []     = []  \nandX xs     []     = xs\nandX []     ys     = ys\nandX (x:xs) (y:ys) = [x,y] : andX xs ys\n</code></pre>\n\n<p>So now we have list of lists, and each sublist contains an element from the first list, and one from the second list. A problem however is that the second and third clause use <code>xs</code> and <code>ys</code> as output. We can not do this, since we expect a list of lists. We can solve this by rewriting it to:</p>\n\n<pre><code>andX :: [a] -&gt; [a] -&gt; [[a]]\nandX []     []     = []  \nandX (x:xs) []     = [x] : andX xs []\nandX []     (y:ys) = [y] : andX [] ys\nandX (x:xs) (y:ys) = [x,y] : andX xs ys\n</code></pre>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>Prelude&gt; andX [1,4,2,5] [1,3,0,2,5]\n[[1,1],[4,3],[2,0],[5,2],[5]]\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8921562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef6fde23e3c256fcc6748882df3327a?s=128&d=identicon&r=PG&f=1", "display_name": "Smurf Frums", "link": "https://stackoverflow.com/users/8921562/smurf-frums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1510344883, "creation_date": 1510343473, "last_edit_date": 1510344359, "question_id": 47230163, "link": "https://stackoverflow.com/questions/47230163/extremely-simple-haskell-program-but-i-still-have-problems-finding-my-errors", "title": "extremely simple haskell program but i still have problems finding my errors", "body": "<pre><code>andX :: [a] -&gt; [a] -&gt; [a]\nandX []         []      = []  \nandX [xs]       []      = [xs]  \nandX []         [ys]    = [ys]  \nandX [x:xs] [y:ys]  = [x,y] : andX [xs] [ys]\n</code></pre>\n\n<p>Hi guys this is a very simple code I wrote and I think what it should do is clear but it just doesnt work and i cant seem to find a way to fix it.\nI am grateful for every help get but please correct the program as is because for now I am not looking to find another way to write the same program but to find the errors i already created \nthanks in advance </p>\n"}, {"tags": ["haskell", "dependent-type", "higher-kinded-types", "data-kinds", "singleton-type"], "answers": [{"comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 2, "creation_date": 1510342122, "post_id": 47229834, "comment_id": 81410236, "body": "At first, I wasn&#39;t expecting that&#39;d be possible either but I think <code>TypeInType</code> lets you have parametrized kinds (since they&#39;re not really very distinguished from types then, I guess)."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 6, "last_activity_date": 1510341899, "creation_date": 1510341899, "answer_id": 47229834, "question_id": 47229674, "link": "https://stackoverflow.com/questions/47229674/does-haskell-have-kind-unification/47229834#47229834", "title": "Does Haskell have kind unification?", "body": "<p>You need to make the dependency explicit. The following compiles with GHC 8.0.1.</p>\n\n<pre><code>import Data.Kind(Type)\n\ndata SBool :: Bool -&gt; Type where\n  STrue :: SBool 'True\n  SFalse :: SBool 'False\n\ndata SSBool :: forall (b :: Bool) . SBool b -&gt; Type where\n  SSFalse :: SSBool 'SFalse\n  SSTrue  :: SSBool 'STrue\n</code></pre>\n\n<p>To be honest, I'm suprised by this. I was not aware that this sort of kind-dependency was allowed at all.</p>\n\n<p>Note that this is not that different from Coq, where</p>\n\n<pre><code>Inductive SSBool (b: bool) : SBool b -&gt; Type :=\n  | SSFalse : SSBool SFalse\n  | SSTrue  : SSBool STrue\n.\n</code></pre>\n\n<p><em>fails</em> to compile, while</p>\n\n<pre><code>Inductive SSBool : forall (b: bool), SBool b -&gt; Type :=\n  | SSFalse : SSBool false SFalse\n  | SSTrue  : SSBool true STrue\n.\n</code></pre>\n\n<p>compiles.</p>\n"}], "owner": {"reputation": 43226, "user_id": 61342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3e8d217e0ecf6db31de80b698726a50a?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Lew", "link": "https://stackoverflow.com/users/61342/%c5%81ukasz-lew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 47229834, "answer_count": 1, "score": 3, "last_activity_date": 1510341899, "creation_date": 1510341175, "question_id": 47229674, "link": "https://stackoverflow.com/questions/47229674/does-haskell-have-kind-unification", "title": "Does Haskell have kind unification?", "body": "<p>I'm researching to what extent singleton types can simulate dependent types and I've arrived at a problem. The minimal code I replicate the error with:</p>\n\n<pre><code>{-# LANGUAGE GADTs #-}\n{-# LANGUAGE TypeInType #-}\n\nimport Data.Kind(Type)\n\ndata SBool :: Bool -&gt; Type where\n  STrue :: SBool 'True\n  SFalse :: SBool 'False\n\ndata SSBool :: SBool b -&gt; Type where\n  SSFalse :: SSBool 'SFalse\n  SSTrue  :: SSBool 'STrue\n</code></pre>\n\n<p>The error message is:</p>\n\n<blockquote>\n  <p>Expected kind \u2018SBool b\u2019, but \u2018'SFalse\u2019 has kind \u2018SBool 'False\u2019</p>\n</blockquote>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510340287, "post_id": 47229452, "comment_id": 81409373, "body": "What query did you write? It looks to me that you wrote something like <code>newtonRoot 3</code>."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1510340331, "post_id": 47229452, "comment_id": 81409397, "body": "Where are you printing? You seem to be trying to print a partially applied function."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1510342581, "post_id": 47229452, "comment_id": 81410456, "body": "Did you notice the message &quot;(maybe you haven&#39;t applied a function to enough arguments?)&quot; ?"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1510340623, "creation_date": 1510340623, "answer_id": 47229543, "question_id": 47229452, "link": "https://stackoverflow.com/questions/47229452/no-instance-for-show-double-double/47229543#47229543", "title": "No instance for (Show (Double -&gt; Double))", "body": "<p><code>newtonRoot</code> takes two arguments, a <code>d</code> and an <code>epsilon</code>. You didn't supply an <code>epsilon</code>. Try</p>\n\n<pre><code>&gt; newtonRoot 35 0.1\n</code></pre>\n\n<p>instead.</p>\n\n<p>There are other errors, too, but this should get you started down the debugging path.</p>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 4, "last_activity_date": 1510340803, "creation_date": 1510340803, "answer_id": 47229588, "question_id": 47229452, "link": "https://stackoverflow.com/questions/47229452/no-instance-for-show-double-double/47229588#47229588", "title": "No instance for (Show (Double -&gt; Double))", "body": "<p>In Haskell all function are curryfied, so, your function </p>\n\n<pre><code>newtonRoot:: Double -&gt; Double -&gt; Double\n</code></pre>\n\n<p>the are \"hidden parenthesis\":</p>\n\n<pre><code>newtonRoot:: Double -&gt; (Double -&gt; Double)\n</code></pre>\n\n<p>if you provide one argument <code>newtonRoot 35</code> you have </p>\n\n<pre><code>(newtonRoot 35) :: Double -&gt; Double\n</code></pre>\n\n<p>and a function <code>f :: Double -&gt; Double</code> is not instance of Show type class</p>\n\n<p>You need to finally provide the last argument to your function value:</p>\n\n<pre><code>(newtonRoot 35 2) :: Double\n</code></pre>\n\n<p>Double can me showed  </p>\n"}], "owner": {"reputation": 157, "user_id": 7026851, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh6.googleusercontent.com/-h1VcP9Pdc_U/AAAAAAAAAAI/AAAAAAAAAGc/XvP4_p7qeZM/photo.jpg?sz=128", "display_name": "Sreten Joci\u0107", "link": "https://stackoverflow.com/users/7026851/sreten-joci%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 0, "accepted_answer_id": 47229588, "answer_count": 2, "score": 2, "last_activity_date": 1510340803, "creation_date": 1510340243, "last_edit_date": 1510340356, "question_id": 47229452, "link": "https://stackoverflow.com/questions/47229452/no-instance-for-show-double-double", "title": "No instance for (Show (Double -&gt; Double))", "body": "<p>I have the following code which uses Newton's method to approximate the square root of some number. The problems is that when I run it, I get an error..<strong>What is wrong and how can I fix it?</strong></p>\n\n<pre><code>newtonRootSequence :: Double -&gt; [Double]\nnewtonRootSequence d = newtonSequenceGenerator d 1\n\nnewtonSequenceGenerator :: Double -&gt; Double -&gt; [Double]\nnewtonSequenceGenerator d xn = nxplus1 : newtonSequenceGenerator d nxplus1\n    where nxplus1 =  (xn + d / xn) / 2\n\nnewtonRoot:: Double -&gt; Double -&gt; Double\nnewtonRoot d epsilon = head ([xs !! index | index &lt;- [1..((length xs) - 1)], (xs !! index) - (xs !! index - 1) &lt;= epsilon]\n    where xs = newtonRootSequence d\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code> &lt;interactive&gt;:2:1: error:\n        * No instance for (Show (Double -&gt; Double))\n            arising from a use of `print'\n            (maybe you haven't applied a function to enough arguments?)\n        * In a stmt of an interactive GHCi command: print it\n</code></pre>\n\n<p>Running it should be like the following:</p>\n\n<blockquote>\n  <p>$newtonRoot 35</p>\n</blockquote>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 5, "creation_date": 1510331465, "post_id": 47227158, "comment_id": 81404720, "body": "<code>TemplateHaskell</code> generates code at compile time. That codes still has to compile though. Here, Template Haskell is generating code that needs more extensions than you have enabled to compile."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510336303, "post_id": 47227158, "comment_id": 81407343, "body": "Probably the tutorial forgot to add that extension to the already listed ones. Just enable it and you should be OK."}], "answers": [{"tags": [], "owner": {"reputation": 7230, "user_id": 788337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wiVpx.png?s=128&g=1", "display_name": "jmite", "link": "https://stackoverflow.com/users/788337/jmite"}, "is_accepted": false, "score": -1, "last_activity_date": 1510537177, "creation_date": 1510537177, "answer_id": 47255965, "question_id": 47227158, "link": "https://stackoverflow.com/questions/47227158/haskell-error-references-code-that-is-not-in-the-code/47255965#47255965", "title": "Haskell error references code that is not in the code?", "body": "<p>When GHC asks you to add an extension, it's usually a good idea to do so.</p>\n\n<p>The trick here is that the <code>[name|...|]</code> notation is for quasi quotation, which uses Template Haskell to generate code at compile time, much like macros in other languages. So the error is not in your code, but in your code's code!</p>\n\n<p>It's errors like this that make Template Haskell hard to debug, which is why the community is fairly split on its use.</p>\n"}], "owner": {"reputation": 8964, "user_id": 584121, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3c7af62d226bc7420d49128d03a5b139?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/584121/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1510537177, "creation_date": 1510331088, "question_id": 47227158, "link": "https://stackoverflow.com/questions/47227158/haskell-error-references-code-that-is-not-in-the-code", "title": "Haskell error references code that is not in the code?", "body": "<p>I'm trying to follow the <a href=\"https://www.yesodweb.com/book/persistent#persistent_code_generation\" rel=\"nofollow noreferrer\">Persistent</a> tutorial, which has this code: </p>\n\n<pre><code>{-# LANGUAGE GADTs                      #-}\n{-# LANGUAGE GeneralizedNewtypeDeriving #-}\n{-# LANGUAGE OverloadedStrings          #-}\n{-# LANGUAGE QuasiQuotes                #-}\n{-# LANGUAGE TemplateHaskell            #-}\n{-# LANGUAGE TypeFamilies               #-}\nimport Database.Persist\nimport Database.Persist.TH\nimport Database.Persist.Sqlite\nimport Control.Monad.IO.Class (liftIO)\n\nmkPersist sqlSettings [persistLowerCase|\nPerson\n    name String\n    age Int\n    deriving Show\n|]\n</code></pre>\n\n<p>But when I try to run it, I get: </p>\n\n<pre><code>src/model.hs:31:1: error:\n    \u2022 Illegal instance declaration for \u2018ToBackendKey SqlBackend Post\u2019\n        (Only one type can be given in an instance head.\n         Use MultiParamTypeClasses if you want to allow more, or zero.)\n    \u2022 In the instance declaration for \u2018ToBackendKey SqlBackend Post\u2019\n</code></pre>\n\n<p>And those declarations (<code>ToBackendKey</code> etc) are not in my code, and not at line 31. What's going on? I have a feeling it's related to TemplateHaskell, but I don't know enough about it to figure this out. How can I debug this? </p>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510318662, "post_id": 47223302, "comment_id": 81396355, "body": "The title says <code>-fproof</code>, but the code says <code>-prof</code>."}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510318861, "post_id": 47223302, "comment_id": 81396462, "body": "Corrected, thanks !"}], "answers": [{"tags": [], "owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "is_accepted": true, "score": 4, "last_activity_date": 1510319410, "creation_date": 1510319410, "answer_id": 47223547, "question_id": 47223302, "link": "https://stackoverflow.com/questions/47223302/error-when-starting-ghci-with-option-fexternal-interpreter-prof/47223547#47223547", "title": "Error when starting ghci with option -fexternal-interpreter -prof", "body": "<p>It is known issue, see <a href=\"https://ghc.haskell.org/trac/ghc/ticket/14271\" rel=\"nofollow noreferrer\">https://ghc.haskell.org/trac/ghc/ticket/14271</a>\nLooks like it occurs only on Windows.</p>\n\n<p>Unfortunately I don't have anything to add, there is no known workaround.</p>\n"}], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 47223547, "answer_count": 1, "score": 3, "last_activity_date": 1510319410, "creation_date": 1510318617, "last_edit_date": 1510318938, "question_id": 47223302, "link": "https://stackoverflow.com/questions/47223302/error-when-starting-ghci-with-option-fexternal-interpreter-prof", "title": "Error when starting ghci with option -fexternal-interpreter -prof", "body": "<p>I am trying to see callstacks as explained here, <a href=\"https://simonmar.github.io/posts/2016-02-12-Stack-traces-in-GHCi.html\" rel=\"nofollow noreferrer\">https://simonmar.github.io/posts/2016-02-12-Stack-traces-in-GHCi.html</a></p>\n\n<p>Unfortunately I am getting an error right after ghci starts : </p>\n\n<pre><code>C:\\Users\\sandwood&gt;ghci -fexternal-interpreter -prof\nGHCi, version 8.2.1: http://www.haskell.org/ghc/  :? for help\nAccess violation in generated code when reading 00000001001a0418\n</code></pre>\n\n<p>Any clue of what to do ? </p>\n"}, {"tags": ["haskell", "testing", "haskell-stack"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 2, "creation_date": 1510316258, "post_id": 47222544, "comment_id": 81394902, "body": "Maybe post your .cabal? You should be able to run just <code>stack test</code>"}, {"owner": {"reputation": 1127, "user_id": 6171872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2wfQM.jpg?s=128&g=1", "display_name": "StarSheriff", "link": "https://stackoverflow.com/users/6171872/starsheriff"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510318364, "post_id": 47222544, "comment_id": 81396178, "body": "That&#39;s actually exactly what I was after. I didn&#39;t know that <code>stack test</code> should do what I want. It&#39;s working, thanks!"}, {"owner": {"reputation": 1127, "user_id": 6171872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2wfQM.jpg?s=128&g=1", "display_name": "StarSheriff", "link": "https://stackoverflow.com/users/6171872/starsheriff"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510319136, "post_id": 47222544, "comment_id": 81396616, "body": "@Zpalmtree feel free to add an answer, then I can mark it closed."}], "answers": [{"comments": [{"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "edited": false, "score": 1, "creation_date": 1572082620, "post_id": 47223529, "comment_id": 103456537, "body": "For some reason that I can&#39;t understand, <i>sometimes</i> a plain <code>stack test</code> won&#39;t see the latest modifications made to the spec files. I usually give <code>stack clean &amp;&amp; stack test</code>, wasting a few seconds of my life budget at each run."}], "tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 10, "last_activity_date": 1510324753, "last_edit_date": 1510324753, "creation_date": 1510319359, "answer_id": 47223529, "question_id": 47222544, "link": "https://stackoverflow.com/questions/47222544/idiomatic-way-to-run-test-suites-in-stack/47223529#47223529", "title": "Idiomatic way to run test-suites in stack", "body": "<p><code>stack test</code> runs tests located in a .cabal file. It runs <code>stack build</code> if required, so you don't need to build manually before testing.</p>\n\n<p>See further: <a href=\"https://docs.haskellstack.org/en/stable/GUIDE/#stack-test\" rel=\"noreferrer\">https://docs.haskellstack.org/en/stable/GUIDE/#stack-test</a></p>\n"}], "owner": {"reputation": 1127, "user_id": 6171872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2wfQM.jpg?s=128&g=1", "display_name": "StarSheriff", "link": "https://stackoverflow.com/users/6171872/starsheriff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 0, "accepted_answer_id": 47223529, "answer_count": 1, "score": 6, "last_activity_date": 1510324753, "creation_date": 1510316049, "last_edit_date": 1510318719, "question_id": 47222544, "link": "https://stackoverflow.com/questions/47222544/idiomatic-way-to-run-test-suites-in-stack", "title": "Idiomatic way to run test-suites in stack", "body": "<p>Haskell beginner here. </p>\n\n<p>I am struggling to find a nice way to run my test-suites that I have defined in my <code>.cabal</code> file. Given that you add <code>test-suite</code> sections in the <code>.cabal</code> file I would expect that you can run all of them with a single command like <code>stack runtests</code>.</p>\n\n<p>The best answer I found is this one:\n<a href=\"https://stackoverflow.com/questions/34558002/haskell-stack-ghci-test-suite\">Haskell Stack Ghci test-suite</a> suggesting that you have to run </p>\n\n<p><code>stack ghci --test module:test:libtests</code></p>\n\n<p>However, there are two things that irritate me and I think that there must be a better way doing it.</p>\n\n<ol>\n<li>It is cumbersome to call <code>stack ghci --test module:test:libtests</code> explicitly. I don't want to do that if I have more test-suites when projects get larger.</li>\n<li>Even worse, I end up in an interactive session and have to call <code>main</code> myself. This does not scale.</li>\n</ol>\n\n<p>Isn't there a better way to run your test-suites for a project in stack? Of course I could do some shell scripting, but hey stack should <em>know</em> how to run my tests, I specified everything in the <code>.cabal</code> file.</p>\n\n<p>I tried <code>stack runghc --test</code> but that doesn't help.</p>\n\n<p>Project setup:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.hs\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 Setup.hs\n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Lib.hs\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 WordNumber.hs\n\u251c\u2500\u2500 stack.yaml\n\u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Spec.hs\n\u2514\u2500\u2500 WordNumber.cabal\n</code></pre>\n\n<p><code>WordNumber.cabal</code></p>\n\n<pre><code>name:                WordNumber\nversion:             0.1.0.0\n-- synopsis:\n-- description:\nhomepage:            https://github.com/githubuser/WordNumber#readme\nlicense:             BSD3\nlicense-file:        LICENSE\nauthor:              Author name here\nmaintainer:          example@example.com\ncopyright:           2017 Author name here\ncategory:            Web\nbuild-type:          Simple\nextra-source-files:  README.md\ncabal-version:       &gt;=1.10\n\nlibrary\n  hs-source-dirs:      src\n  exposed-modules:     Lib, WordNumber\n  build-depends:       base &gt;= 4.7 &amp;&amp; &lt; 5\n  default-language:    Haskell2010\n\nexecutable wordnumber\n  hs-source-dirs:      app\n  main-is:             Main.hs\n  ghc-options:         -threaded -rtsopts -with-rtsopts=-N\n  build-depends:       base\n                     , WordNumber\n  default-language:    Haskell2010\n\ntest-suite wordnumber-test\n  type:                exitcode-stdio-1.0\n  hs-source-dirs:      test\n  main-is:             Spec.hs\n  build-depends:       base\n                     , WordNumber\n                     , hspec\n  ghc-options:         -threaded -rtsopts -with-rtsopts=-N\n  default-language:    Haskell2010\n</code></pre>\n\n<p><strong>Update</strong>:\nActually I feel a bit stupid for not finding the answer myself. It is either <code>stack test</code> or <code>stack build --test</code> and also documented. </p>\n\n<p>However, for people following the HaskellBook it might not be that obvious. For some reason all tests in the testing chapter are executed in the cumbersome way and running tests with <code>stack test</code> is never mentioned.</p>\n"}, {"tags": ["scala", "haskell"], "comments": [{"owner": {"reputation": 2885, "user_id": 1360368, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7997d33ca6f47d0e48080d6f58a72443?s=128&d=identicon&r=PG", "display_name": "Ashesh", "link": "https://stackoverflow.com/users/1360368/ashesh"}, "edited": false, "score": 1, "creation_date": 1510311837, "post_id": 47221125, "comment_id": 81392155, "body": "This may be a matter of discretion. Scala is hybrid in nature so its really up to you to keep referentially transparent code separate from side effecting code \u2013 think IO Monads in Haskell. While the implementational details are quite generic based on your question, I&#39;d suggest using Akka streams \u2013 wherein your sources can be exposed via an IO interface and consumers \u2013 RT or not, can act upon the &quot;output&quot; of the Source. The other end of the side effects can be accomplished using Sink&#39;s \u2013 another concept Akka streams introduces. Its really up to you to keep the code &quot;in-between&quot; RT."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510315251, "post_id": 47221125, "comment_id": 81394287, "body": "You could implement the Polling Consumer pattern. <a href=\"http://blog.ploeh.dk/2017/06/28/pure-times-in-haskell\" rel=\"nofollow noreferrer\">Here&#39;s an article that shows how to do that in Haskell</a>."}, {"owner": {"reputation": 699, "user_id": 3832116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18d84de0cff826aa653199d0748c2133?s=128&d=identicon&r=PG&f=1", "display_name": "perbellinio", "link": "https://stackoverflow.com/users/3832116/perbellinio"}, "edited": false, "score": 0, "creation_date": 1510325711, "post_id": 47221125, "comment_id": 81400977, "body": "If you interested to go with Scala you can have a look to this blog: <a href=\"https://medium.com/dive-in-scala/communicating-with-kafka-using-akka-actors-ce4af02482c6\" rel=\"nofollow noreferrer\">medium.com/dive-in-scala/&hellip;</a> and this github repository: <a href=\"https://github.com/cakesolutions/scala-kafka-client\" rel=\"nofollow noreferrer\">github.com/cakesolutions/scala-kafka-client</a>"}, {"owner": {"reputation": 5699, "user_id": 5517389, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cYxdnMYb1r4/AAAAAAAAAAI/AAAAAAAAEec/XwCejjX-Xcg/photo.jpg?sz=128", "display_name": "Alvaro Carrasco", "link": "https://stackoverflow.com/users/5517389/alvaro-carrasco"}, "edited": false, "score": 0, "creation_date": 1510336726, "post_id": 47221125, "comment_id": 81407577, "body": "Take a look at this implementation: <a href=\"https://github.com/monix/monix-kafka\" rel=\"nofollow noreferrer\">github.com/monix/monix-kafka</a> (monix Task is an implementation of IO Monad, but the key concept is <code>Observable</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 7230, "user_id": 788337, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wiVpx.png?s=128&g=1", "display_name": "jmite", "link": "https://stackoverflow.com/users/788337/jmite"}, "is_accepted": false, "score": 0, "last_activity_date": 1510537452, "creation_date": 1510537452, "answer_id": 47255998, "question_id": 47221125, "link": "https://stackoverflow.com/questions/47221125/how-to-keep-listening-in-fp/47255998#47255998", "title": "How to keep listening in FP?", "body": "<p>I don't know Scala, but in Haskell the answer is, exactly like you would in an imperative language, but in the IO monad.</p>\n\n<p>There may be systems like Functional Reactive Programming that let you write listeners in a functional way, but ultimately they're declarative languages for generating an imperative program, and under the hood they're going to be imperative.</p>\n\n<p>Some people consider Haskell to be their favorite imperative language! The idea is not that Haskell has no side effects, but that the type system makes it explicitly clear where they occur and in what order.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1510537452, "creation_date": 1510311169, "question_id": 47221125, "link": "https://stackoverflow.com/questions/47221125/how-to-keep-listening-in-fp", "title": "How to keep listening in FP?", "body": "<p>I want to use Kafka for sending messages between microservices.  </p>\n\n<p>Kafka uses publish subscribe mechanism, that it is mean, a producer produces messages, kafka receives it and subscribes to consumers. Consumers always listen to an events for incoming messages and react accordingly.   </p>\n\n<p>My question is, how to build a system with functional programming language(scala, haskell), for listening incoming events?  </p>\n\n<p>It is like a http server, that is listening for incoming requests.   </p>\n\n<p>I think, it needs an <code>IO Monad</code> because of the side effects, that is going the happen.\nAnd how to keep it always running? With a simple look?</p>\n"}, {"tags": ["haskell", "random", "monads"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 7, "creation_date": 1510275496, "post_id": 47214096, "comment_id": 81377701, "body": "Can you clarify what you mean?   <code>StdGen</code> is a type provided by the <code>System.Random</code> module and is not a monad.  You can construct <code>StdGen</code>s without any monad and use those (via <code>next</code>) also with no monad.  Are you wondering why getting a uniquely seeded generator requires IO?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510280265, "post_id": 47214096, "comment_id": 81378868, "body": "A random number generator is just a <code>State</code> monad in disguise; (part of) the return value of one call to the RNG is passed as an argument to the next call to ensure that a different PRN can be returned each time."}, {"owner": {"reputation": 73, "user_id": 8702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8e5108dd07336da0fde1fdb3e856f3?s=128&d=identicon&r=PG&f=1", "display_name": "Momo", "link": "https://stackoverflow.com/users/8702185/momo"}, "edited": false, "score": 0, "creation_date": 1510312159, "post_id": 47214096, "comment_id": 81392380, "body": "I guess I got it wrong. I thought I only can use the RNG with giving mw back a monad. So what&#39;s the difference  between the mentioned uniquely seed generator and the StdGen?"}, {"owner": {"reputation": 73, "user_id": 8702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8e5108dd07336da0fde1fdb3e856f3?s=128&d=identicon&r=PG&f=1", "display_name": "Momo", "link": "https://stackoverflow.com/users/8702185/momo"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1510464801, "post_id": 47214096, "comment_id": 81441948, "body": "@ThomasM.DuBuisson I edited my question. Would you please have a look at it?"}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1510477367, "post_id": 47214096, "comment_id": 81444409, "body": "Your words reveal some misunderstandings that make this question answerable so I&#39;ll vote to re-open. I&#39;ll comment for now (I&#39;m hoping someone else answers or I will later): The two RNGs are the same (both are RNGs of type <code>StdGen</code>). In one case you provide an explicit seed (or, leave it to someone else to provide, hence the <code>Int</code> argument) while in the other you expect some IO action to give you the seed.  I think you misunderstand the values - <code>IO Tree</code> is not a tree but an operation that returns a tree.  <code>Int -&gt; Tree</code> is a function from Ints to Trees (returns a tree computed from the Int)."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1510477453, "post_id": 47214096, "comment_id": 81444419, "body": "OK, I voted to re-open. I suggest you also include your code (both versions of <code>baum</code>) since your questions center on it.  Others could invent a similar function but that&#39;s not preferable."}], "owner": {"reputation": 73, "user_id": 8702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8e5108dd07336da0fde1fdb3e856f3?s=128&d=identicon&r=PG&f=1", "display_name": "Momo", "link": "https://stackoverflow.com/users/8702185/momo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510565819, "creation_date": 1510275217, "last_edit_date": 1510514823, "question_id": 47214096, "link": "https://stackoverflow.com/questions/47214096/haskell-why-is-system-random-in-a-monad", "title": "haskell why is System.Random in a monad", "body": "<p>I want to use a random number generator. After doing research I found out, that System.Random is the only way to do that (except programming a RNG yourself). Can someone please tell me what the difference is between the RNGs from this class? I have the following simple structure:</p>\n\n<pre><code>data Tree = Leaf\n            | Function Tree Tree\n            | Lambda Tree\n            deriving (Show)\n</code></pre>\n\n<p>When I use mkStdGen to build a random tree, that tree will have the type </p>\n\n<pre><code>baum :: Int -&gt; Tree\n</code></pre>\n\n<p>And I can't let the console show me the tree (If I have a random generated tree called a and if I type a in the console I get an error).\nWhen I use getStdGen, that tree will have the type </p>\n\n<pre><code>baum :: IO Tree\n</code></pre>\n\n<p>And I can let the console show me my tree (If I have a random generated tree called a and if I type a in the console it displays the tree).</p>\n\n<p>So what is the difference between those two RNGs and are both giving me back a tree in a Monad? (Why is the mk version giving back: Int -> Tree?)</p>\n\n<p>Because of data protection reason I can't post my code here. \nThe type signature of my function is build :: RandomGen g => Int -> Int -> Int -> Int -> g -> Tree. All I want to do is to generate my tree radomly with some parameters. I need this for a university project. I don't know wich RNG is the best to choose and if it is inevitable that I don't get only a Tree back.</p>\n"}, {"tags": ["haskell", "fold"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510274751, "post_id": 47213976, "comment_id": 81377511, "body": "Not sure why the close vote, since I did provide an MCVE. At the very least, the close reason chosen is incorrect. (Too broad, maybe? &quot;Why do things fold the way they fold&quot; is pretty broad)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510274769, "post_id": 47213976, "comment_id": 81377516, "body": "You seem to have made no effort debugging this yourself. Your code is far from minimal and you give no justification for why different code should produce the same output, just &quot;<i>it seems to me that my code shouldn&#39;t care which way the fold happens</i>&quot;. This leaves us with having to reverse engineer not just your code, but also your thought process to figure out where you went wrong (i.e. <i>why</i> you think <code>foldl</code> should produce the same result)."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510274945, "post_id": 47213976, "comment_id": 81377565, "body": "@melpomene interesting to hear, since I walk through my debug process in the question and arrived at the correct solution independently and before I posted the question. I&#39;m confused about how the right vs left fold affects my function, which appears (to me) to work independent of fold direction. I&#39;m obviously <i>wrong</i> about that, which is why I&#39;m asking the specific, well-defined question."}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1510275005, "post_id": 47213976, "comment_id": 81377583, "body": "Why do you <i>think</i> the fold order shouldn&#39;t matter? It certainly matters if the operation is <code>(-)</code>, or <code>div</code>, or <code>\\x y -&gt; y * 5000</code>. Fold order doesn&#39;t matter if the binary operation is both associative and commutative, while there is absolutely zero reason to assume your function is either of those things."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510275073, "post_id": 47213976, "comment_id": 81377598, "body": "Explain why you think it should work the same with <code>foldl</code> and <code>foldr</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1510275206, "post_id": 47213976, "comment_id": 81377631, "body": "By &quot;debugging&quot; I don&#39;t mean the solution to the Advent of Code exercise, I mean the problem you&#39;re asking about here. I classify this as debugging because it falls under the general &quot;my code does <i>X</i> where I expected <i>Y</i>&quot; umbrella."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1510275272, "post_id": 47213976, "comment_id": 81377654, "body": "@SilvioMayolo isn&#39;t it, though? Maybe that&#39;s the point I&#39;m not quite grasping."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510275558, "post_id": 47213976, "comment_id": 81377721, "body": "@melpomene Hmm because I thought that <code>foldr f == foldl (flip f)</code>, which I just went to sarcastically respond to you with and found that that&#39;s wrong. Maybe I don&#39;t understand folding as well as I thought I did. Does <code>foldr</code> then pull from the end of the foldable first? So it&#39;s applying my instructions in reverse order?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510275673, "post_id": 47213976, "comment_id": 81377749, "body": "I don&#39;t know what you mean by &quot;pull&quot;. To me, <code>foldl</code> and <code>foldr</code> are completely different functions. Just look at their source code."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1510282558, "post_id": 47213976, "comment_id": 81379371, "body": "Just compare two examples of <code>foldr</code> and <code>foldl</code> on a piece of paper, you&#39;ll find that they behave very differently, and <code>foldr f == foldl (flip f)</code> is not the way to look at it."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1510283347, "post_id": 47213976, "comment_id": 81379556, "body": "Another thing to think about: if it really were the case that <code>foldr f</code> is the same as <code>foldl (flip f)</code>, then would both have been included in the language? Probably not, I think: it would be so easy to adapt your code to always use <code>foldr</code> whichever direction you really want to fold. Therefore, you should suspect there might be some deeper difference between them causing both to be in the language."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1510288325, "post_id": 47213976, "comment_id": 81380778, "body": "@amalloy, there are plenty of functions in the standard library that differ by less.  <code>($&gt;)</code> vs <code>(&lt;$)</code>, <code>($)</code> vs <code>(&amp;)</code>, <code>all</code> vs <code>and</code>, <code>concat . map</code> vs <code>concatMap</code> ..."}], "answers": [{"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1510344127, "post_id": 47214180, "comment_id": 81411157, "body": "For fun, <a href=\"https://github.com/luqui/experiments/blob/master/foldlr.agda#L17\" rel=\"nofollow noreferrer\">here&#39;s a proof</a> of your &quot;it seems&quot; theorem"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1510347047, "post_id": 47214180, "comment_id": 81412487, "body": "@luqui I literally spent several hours this morning trying to come up with that (in Agda as well, no less), and I kept hitting roadblocks. Thank you!"}], "tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 7, "last_activity_date": 1510277272, "last_edit_date": 1510277272, "creation_date": 1510275872, "answer_id": 47214180, "question_id": 47213976, "link": "https://stackoverflow.com/questions/47213976/folding-right-vs-left/47214180#47214180", "title": "folding right vs left", "body": "<p>Based on the comments, I'd say you have some confusion about the difference between <code>foldl</code> and <code>foldr</code>. I'll try to distinguish those here. Let's look at a minimal example.</p>\n\n<pre><code>foldr f x [a, b, c] = a `f` (b `f` (c `f` x))\nfoldl g x [a, b, c] = ((x `g` a) `g` b) `g` c\n</code></pre>\n\n<p>That's the way these functions would expand on a somewhat small list containing three elements. Now, let's suppose <code>g = flip f</code> and see what <code>foldl</code> does then.</p>\n\n<pre><code>foldr f x [a, b, c] = a `f` (b `f` (c `f` x))\nfoldl (flip f) x [a, b, c] = c `f` (b `f` (a `f` x))\n</code></pre>\n\n<p>So the order of the list, in a sense, ends up being reversed when you do <code>foldl (flip f)</code> as opposed to <code>foldr f</code>.</p>\n\n<p>Thus, your initial assertion that <code>foldl (flip f) === foldr f</code> is false in general, but we do end up with a rather interesting property in its place. Assuming the list we're working with is finite, it seems that <code>foldl (flip f) x === foldr f x . reverse</code></p>\n"}], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 2, "accepted_answer_id": 47214180, "answer_count": 1, "score": 4, "last_activity_date": 1510277272, "creation_date": 1510274342, "question_id": 47213976, "link": "https://stackoverflow.com/questions/47213976/folding-right-vs-left", "title": "folding right vs left", "body": "<p>This has been <a href=\"https://stackoverflow.com/questions/7396978/left-and-right-folding-over-an-infinite-list\">discussed</a> <a href=\"https://stackoverflow.com/questions/1446419/how-do-you-know-when-to-use-fold-left-and-when-to-use-fold-right\">to</a> <a href=\"https://stackoverflow.com/questions/28461908/how-should-i-conceptualize-a-right-fold-vs-a-left-fold\">death</a> here on SO, but my specific example is escaping me because I feel that my fold shouldn't <strong><em>care</em></strong> whether it's composed right-to-left or left-to-right. This is a solution to day 1 of 2016's <a href=\"https://adventofcode.com/\" rel=\"nofollow noreferrer\">Advent of Code</a> which boils down to taking a list of instructions (turn right/left, walk x steps forward), applying them, and giving the <a href=\"https://en.wikipedia.org/wiki/Taxicab_geometry\" rel=\"nofollow noreferrer\">taxicab-geometry</a> distance between where you end up and where you started.</p>\n\n<p>I wrote an <code>apply</code> function to handle one step of this journey, which has signature:</p>\n\n<pre><code>data Direction   = North | East | South | West deriving (Enum, Show)\ntype Location    = (Int, Int)\ntype Instruction = String\n\napply :: Direction -&gt; Location -&gt; Instruction -&gt; (Direction, Location)\n</code></pre>\n\n<p>Assume for the moment that it's implemented correctly (because I tested it and it is. I'll include a runnable example below the fold). I noticed that I can use a fold to apply this to the whole list of instructions, and did</p>\n\n<pre><code>(_, finalLocation) = foldr f (North, (0, 0)) instructions  -- note the foldr.\n  where f = (\\ins (d, loc) -&gt; apply d loc ins)\n</code></pre>\n\n<p>Using the right-associated fold here worked, but gave me the wrong answer. When I re-ran it with <code>foldl</code> (and <code>flip f</code>) I got a totally different answer which adventofcode accepted, so I acknowledge that the fold direction is definitely the difference, I just don't know <em>why</em> it's a difference since it seems to me that my code shouldn't care which way the fold happens.</p>\n\n<p>Why am I wrong?</p>\n\n<hr>\n\n<pre><code>module AdventOfCode where\n\n-- split\nimport Data.List.Split (splitOn)\n\nday1input :: String\nday1input = \"L4, R2, R4, L5, L3, L1, R4, R5, R1, R3, L3, L2, L2, R5, R1, L1, L2, \\\n            \\R2, R2, L5, R5, R5, L2, R1, R2, L2, L4, L1, R5, R2, R1, R1, L2, L3, \\\n            \\R2, L5, L186, L5, L3, R3, L5, R4, R2, L5, R1, R4, L1, L3, R3, R1, L1, \\\n            \\R4, R2, L1, L4, R5, L1, R50, L4, R3, R78, R4, R2, L4, R3, L4, R4, L1, \\\n            \\R5, L4, R1, L2, R3, L2, R5, R5, L4, L1, L2, R185, L5, R2, R1, L3, R4, \\\n            \\L5, R2, R4, L3, R4, L2, L5, R1, R2, L2, L1, L2, R2, L2, R1, L5, L3, L4, \\\n            \\L3, L4, L2, L5, L5, R2, L3, L4, R4, R4, R5, L4, L2, R4, L5, R3, R1, L1, \\\n            \\R3, L2, R2, R1, R5, L4, R5, L3, R2, R3, R1, R4, L4, R1, R3, L5, L1, L3, \\\n            \\R2, R1, R4, L4, R3, L3, R3, R2, L3, L3, R4, L2, R4, L3, L4, R5, R1, L1, \\\n            \\R5, R3, R1, R3, R4, L1, R4, R3, R1, L5, L5, L4, R4, R3, L2, R1, R5, L3, \\\n            \\R4, R5, L4, L5, R2\"\n\nday1Processed :: [String]\nday1Processed = splitOn \", \" day1input\n\ndata Direction = North | East | South | West deriving (Enum, Show)\ntype Location = (Int, Int)\n\n-- |'apply' takes your current 'Direction' and 'Location', applies the instruction\n-- and gives back a tuple of (newDirection, (new, location))\napply :: Direction -&gt; Location -&gt; String -&gt; (Direction, Location)\napply d' loc (t:num') = (d, step d loc numsteps)\n  where d        = turn d' t\n        numsteps = read num' :: Int\n\n-- |'distanceBetween' returns the taxicab geometric distance between two 'Location's\ndistanceBetween :: Location -&gt; Location -&gt; Int\ndistanceBetween (x1, y1) (x2, y2) = (abs $ x1-x2) + (abs $ y1-y2)\n\n\n-- |'turn' changes direction based on the received Char\nturn :: Direction -&gt; Char -&gt; Direction\nturn West  'R' = North\nturn North 'L' = West\nturn d     'R' = succ d\nturn d     'L' = pred d\nturn d      _  = d\n\n-- |'step' moves location based on current direction and number of steps\nstep :: Direction -&gt; Location -&gt; Int -&gt; Location\nstep North (x, y) s = (x  , y+s)\nstep East  (x, y) s = (x+s, y)\nstep South (x, y) s = (x  , y-s)\nstep West  (x, y) s = (x-s, y)\n\nwrongLocation :: Location\nrightLocation :: Location\n(_, wrongLocation) = foldr (\\x (d, loc) -&gt; apply d loc x) (North, (0, 0)) day1Processed\n(_, rightLocation) = foldl (\\(d, loc) x -&gt; apply d loc x) (North, (0, 0)) day1Processed\n\nwrongAnswer :: Int\nrightAnswer :: Int\nwrongAnswer = distanceBetween (0, 0) wrongLocation\nrightAnswer = distanceBetween (0, 0) rightLocation\n</code></pre>\n"}, {"tags": ["haskell", "selection-sort"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1510262549, "post_id": 47211690, "comment_id": 81372877, "body": "For me, the first version works fine as well. But you probably added a signature <code>[a] -&gt; [a]</code> to the definition, whereas the signature should be <code>Ord a =&gt; [a] -&gt; [a]</code>"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510262935, "post_id": 47211690, "comment_id": 81373082, "body": "Do you have have a type signature specified for <code>ssort</code> in your code? The error message says &quot;relevant bindings&quot; and lists a signature that I don&#39;t see defined in your question."}, {"owner": {"reputation": 123, "user_id": 8791653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db106cf0b10d2c4ee9055f8da881f9?s=128&d=identicon&r=PG&f=1", "display_name": "Zigmas Bitinas", "link": "https://stackoverflow.com/users/8791653/zigmas-bitinas"}, "edited": false, "score": 0, "creation_date": 1510263332, "post_id": 47211690, "comment_id": 81373294, "body": "I have not added any type signatures. Those are all of the contents of the file. Besides, even if I did, why would adding an xs change the behaviour"}, {"owner": {"reputation": 123, "user_id": 8791653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db106cf0b10d2c4ee9055f8da881f9?s=128&d=identicon&r=PG&f=1", "display_name": "Zigmas Bitinas", "link": "https://stackoverflow.com/users/8791653/zigmas-bitinas"}, "edited": false, "score": 0, "creation_date": 1510265088, "post_id": 47211690, "comment_id": 81374181, "body": "Explicitly stating the type signature of ssort fixed the problem. Still don&#39;t understand why the compiler wouldn&#39;t infer the type on its own."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510265120, "post_id": 47211690, "comment_id": 81374194, "body": "I can reproduce this. About the cause: DMR strikes again. Disabling it via  <code>{-# LANGUAGE NoMonomorphismRestriction #-}</code> makes the code compile in both ways."}], "owner": {"reputation": 123, "user_id": 8791653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db106cf0b10d2c4ee9055f8da881f9?s=128&d=identicon&r=PG&f=1", "display_name": "Zigmas Bitinas", "link": "https://stackoverflow.com/users/8791653/zigmas-bitinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1510265069, "answer_count": 0, "score": 2, "last_activity_date": 1510262298, "creation_date": 1510262298, "question_id": 47211690, "link": "https://stackoverflow.com/questions/47211690/different-compiler-behaviour-on-what-appears-to-be-equivalent-function-definitio", "closed_reason": "Duplicate", "title": "Different compiler behaviour on what appears to be equivalent function definitions", "body": "<p>I have written 2 Haskell functions:\n</p>\n\n<pre><code>unfold nhs xs | val == Nothing = []\n              | otherwise      = b:unfold nhs a\n   where val = nhs xs\n         Just (b, a) = val\n\nextractMin [] = Nothing\nextractMin (x:xs) | val == Nothing || b &gt; x = Just (x, xs)\n                  | otherwise = Just (b, x:a)\n   where val = extractMin xs\n         Just (b, a) = val\n</code></pre>\n\n<p>The first one is essentially unfoldr from Data.List, and the second one takes a list and returns a Maybe tuple consisting of the minimum element and the rest of the list. Both functions seem to be working properly.</p>\n\n<p>Applying extractMin to unfold is supposed to produce selection sort. However, here I have noticed some strange behavior. If I define selection sort as:</p>\n\n<pre><code>ssort = unfold extractMin\n</code></pre>\n\n<p>the compiler throws an error:</p>\n\n<pre><code>test.hs:13:10:\n    No instance for (Eq t0) arising from a use of \u2018unfold\u2019\n    The type variable \u2018t0\u2019 is ambiguous\n    Relevant bindings include\n      ssort' :: [t0] -&gt; [t0] (bound at test.hs:13:1)\n    Note: there are several potential instances:\n      instance (Eq a, Eq b) =&gt; Eq (Either a b)\n        -- Defined in \u2018Data.Either\u2019\n      instance forall (k :: BOX) (s :: k). Eq (Data.Proxy.Proxy s)\n        -- Defined in \u2018Data.Proxy\u2019\n      instance (GHC.Arr.Ix i, Eq e) =&gt; Eq (GHC.Arr.Array i e)\n        -- Defined in \u2018GHC.Arr\u2019\n      ...plus 28 others\n    In the expression: unfold extractMin\n    In an equation for \u2018ssort'\u2019: ssort' = unfold extractMin\n\ntest.hs:13:17:\n    No instance for (Ord t0) arising from a use of \u2018extractMin\u2019\n    The type variable \u2018t0\u2019 is ambiguous\n    Relevant bindings include\n      ssort' :: [t0] -&gt; [t0] (bound at test.hs:13:1)\n    Note: there are several potential instances:\n      instance (Ord a, Ord b) =&gt; Ord (Either a b)\n        -- Defined in \u2018Data.Either\u2019\n      instance forall (k :: BOX) (s :: k). Ord (Data.Proxy.Proxy s)\n        -- Defined in \u2018Data.Proxy\u2019\n      instance (GHC.Arr.Ix i, Ord e) =&gt; Ord (GHC.Arr.Array i e)\n        -- Defined in \u2018GHC.Arr\u2019\n      ...plus 27 others\n    In the first argument of \u2018unfold\u2019, namely \u2018extractMin\u2019\n    In the expression: unfold extractMin\n    In an equation for \u2018ssort'\u2019: ssort' = unfold extractMin\nFailed, modules loaded: none.\n</code></pre>\n\n<p>However,</p>\n\n<pre><code>ssort xs = unfold extractMin xs\n</code></pre>\n\n<p>works just fine. </p>\n\n<p>I am really confused since I thought that the 2 definitions are equivalent. Any help is appreciated but essentially I would like to understand what the difference between the two definitions is and why was the error thrown in the first place.</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510259732, "post_id": 47210822, "comment_id": 81371487, "body": "I assume you were doing this to practice your skills, but if you weren&#39;t aware, this is already implemented by the <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:maximum\" rel=\"nofollow noreferrer\">maximum</a> function"}, {"owner": {"reputation": 39, "user_id": 6680220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f21753ec3320428a94afa2af05e51da?s=128&d=identicon&r=PG&f=1", "display_name": "eyoung", "link": "https://stackoverflow.com/users/6680220/eyoung"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510259934, "post_id": 47210822, "comment_id": 81371617, "body": "yeah i&#39;m aware, this was just for practice"}], "answers": [{"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 2, "creation_date": 1510267851, "post_id": 47210984, "comment_id": 81375427, "body": "When you remove the <code>0</code>, it would be good to remove the vestigial <code>Num</code> constraint as well."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1510267953, "post_id": 47210984, "comment_id": 81375472, "body": "@amalloy: correct. I had not considered that. Thanks for the feedback."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 11, "last_activity_date": 1510267924, "last_edit_date": 1510267924, "creation_date": 1510259406, "answer_id": 47210984, "question_id": 47210822, "link": "https://stackoverflow.com/questions/47210822/haskell-couldnt-match-expected-type-b-with-actual-type-a/47210984#47210984", "title": "Haskell - Couldn&#39;t match expected type \u2018b\u2019 with actual type \u2018a\u2019", "body": "<p><code>max'</code> takes as input (based on the signature) an <code>[a]</code>: a list of <code>a</code>s. But you return a <code>b</code>. That means that you have written that - regardless of the type of the elements in the list - we can pick whatever type <code>b</code> as output we want, as long as it is a <code>Num b</code>. But that does not makes sense. If we enter a list of strings, we can of course calculate the \"largest string\" (lexicographically), but we can not return that as a <code>Num</code>.</p>\n\n<p>Another problem is that you use the <code>(&gt;) :: Ord a =&gt; a -&gt; a -&gt; Bool</code> function (as a guard). But you do not specify in the function signature that the type of the input elements must be an instance of the <code>Ord</code> typeclass. So you can not compare the elements.</p>\n\n<p>The minimal fix is to <em>restrict the input type to be <code>b</code> as well</em>:</p>\n\n<pre><code>max' :: <b>(Ord b, </b>Num b<b>)</b> =&gt; [<b>b</b>] -&gt; b\nmax' [] = 0\nmax' (x:xs)\n    | x &gt; max' xs = x\n    | otherwise = max' xs</code></pre>\n\n<p>That being said, it does <em>not</em> make much sense to return an <code>0</code> in case we provide an empty list. That would result in the weird fact that <code>max []</code> is actually greater than <code>max [-1]</code>: usually we expect the maximum of a superset to be greater than or equal to the maximum of the set.</p>\n\n<p>So the <code>max'</code> function can probably be best seen as a non-total function: a function for which not every input results in output. In this case the empty list does not.</p>\n\n<p>We can rewrite it to error with:</p>\n\n<pre><code>max' :: Ord b =&gt; [b] -&gt; b\nmax' [] = <b>error \"Empty list\"</b>\n<b>max' [x] = x</b>\nmax' (x:xs@(_:_))\n    | x &gt; max' xs = x\n    | otherwise = max' xs</code></pre>\n\n<p>So now there are three patterns: (1) the empty list, (2) the singlton list, and (3) the list with at least two elements.</p>\n\n<p>Writing errors however is not always a good way to handle non-total functions, since one can not see in the type signature that a function is non-total. Another wa to do it is use <strong><code>Maybe b</code></strong> as return type. This will be a <code>Nothing</code> in case there is no maximum, or a <code>Just x</code> in case there is one:</p>\n\n<pre><code>max' :: Ord b =&gt; [b] -&gt; <b>Maybe </b>b\nmax' [] = <b>Nothing</b>\nmax' [x] = <b>Just x</b>\nmax' (x:xs@(_:_))\n    | <b>y &lt;- max' xs = max x y</b>\n    | otherwise = Nothing</code></pre>\n\n<p>Or shorter:</p>\n\n<pre><code>max' :: Ord b =&gt; [b] -&gt; Maybe b\nmax' [] = <b>Nothing</b>\nmax' [x] = <b>Just x</b>\nmax' (x:xs@(_:_)) = <b>fmap (max x) (max' xs)</b></code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; max' []\nNothing\nPrelude&gt; max' [1,4,2,5]\nJust 5\nPrelude&gt; max' [-3]\nJust (-3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": false, "score": 1, "last_activity_date": 1510259432, "creation_date": 1510259432, "answer_id": 47210986, "question_id": 47210822, "link": "https://stackoverflow.com/questions/47210822/haskell-couldnt-match-expected-type-b-with-actual-type-a/47210986#47210986", "title": "Haskell - Couldn&#39;t match expected type \u2018b\u2019 with actual type \u2018a\u2019", "body": "<p>Your function takes a list of something and returns one of these somethings. But the function's type signature says that it takes a list of something <code>[a]</code> and returns a completely different thing <code>b</code>. This baffles the compiler. It cannot reconcile the declared type signature with the actual implementation (aka \"typechecking\").</p>\n\n<p>To fix the problem, make the type signature match the implementation:</p>\n\n<pre><code>max' :: (Num a) =&gt; [a] -&gt; a \n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6680220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f21753ec3320428a94afa2af05e51da?s=128&d=identicon&r=PG&f=1", "display_name": "eyoung", "link": "https://stackoverflow.com/users/6680220/eyoung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2204, "favorite_count": 0, "accepted_answer_id": 47210984, "answer_count": 2, "score": 3, "last_activity_date": 1510267924, "creation_date": 1510258770, "question_id": 47210822, "link": "https://stackoverflow.com/questions/47210822/haskell-couldnt-match-expected-type-b-with-actual-type-a", "title": "Haskell - Couldn&#39;t match expected type \u2018b\u2019 with actual type \u2018a\u2019", "body": "<p>Just started learning Haskell and\nIm trying to implement a max function to find the max of a list recursively </p>\n\n<pre><code>max' :: (Num b) =&gt; [a] -&gt; b\nmax' [] = 0\nmax' (x:xs)\n    | x &gt; max' xs = x\n    | otherwise = max' xs\n</code></pre>\n\n<p>but am getting the error when trying to compile</p>\n\n<blockquote>\n  <p>Couldn't match expected type \u2018b\u2019 with actual type \u2018a\u2019\n        \u2018a\u2019 is a rigid type variable bound by\n          the type signature for:\n            max' :: forall b a. (Num b, Num a) => [a] -> b\n          at implementingFunctions.hs:5:1-34\n        \u2018b\u2019 is a rigid type variable bound by\n          the type signature for:\n            max' :: forall b a. (Num b, Num a) => [a] -> b\n          at implementingFunctions.hs:5:1-34</p>\n</blockquote>\n\n<p>Can anyone help me understand whats wrong\n?</p>\n"}, {"tags": ["haskell", "docker", "dockerfile", "haskell-stack", "ghcjs"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8876236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420bdedde72dc3263d569e715e9f9def?s=128&d=identicon&r=PG&f=1", "display_name": "user8876236", "link": "https://stackoverflow.com/users/8876236/user8876236"}, "edited": false, "score": 0, "creation_date": 1510436988, "post_id": 47228328, "comment_id": 81436888, "body": "The steps were out of order thanks.  I have added an edit in my initial answer to show how I have reordered it for others who are interested."}], "tags": [], "owner": {"reputation": 303, "user_id": 365104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac371ea5f1a8011985fd4929a1b44f04?s=128&d=identicon&r=PG", "display_name": "CanonicEpicure", "link": "https://stackoverflow.com/users/365104/canonicepicure"}, "is_accepted": true, "score": 1, "last_activity_date": 1510335524, "creation_date": 1510335524, "answer_id": 47228328, "question_id": 47209331, "link": "https://stackoverflow.com/questions/47209331/stack-ghcjs-project-initaliziation-error-when-building-a-docker-image/47228328#47228328", "title": "Stack GHCJS project initaliziation error when building a docker image", "body": "<p>You need to install ghcjs before making a new project with it (<code>ghcjs-base</code> will be part of the ghcjs installation).</p>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/37254692/install-ghcjs-from-stack\">here</a> and <a href=\"https://docs.haskellstack.org/en/stable/ghcjs/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 105, "user_id": 8876236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420bdedde72dc3263d569e715e9f9def?s=128&d=identicon&r=PG&f=1", "display_name": "user8876236", "link": "https://stackoverflow.com/users/8876236/user8876236"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 47228328, "answer_count": 1, "score": 3, "last_activity_date": 1510437319, "creation_date": 1510252941, "last_edit_date": 1510437319, "question_id": 47209331, "link": "https://stackoverflow.com/questions/47209331/stack-ghcjs-project-initaliziation-error-when-building-a-docker-image", "title": "Stack GHCJS project initaliziation error when building a docker image", "body": "<p>I am trying to create a docker image to be a GHCJS development environment.</p>\n\n<p>I am getting an error on this line of the Dockerfile which is to initialize a GHCJS template project using stack:</p>\n\n<p><code>RUN stack new helloWorld ghcjs</code></p>\n\n<p>The entire Dockerfile is:</p>\n\n<pre><code>FROM debian:latest\n\n#update\nRUN apt-get update\n#install apt-utils and emacs\nRUN apt-get install -y apt-utils emacs-nox\n#install ghcjs dependencies\nRUN apt-get install -y curl git libtinfo-dev alex happy nodejs-legacy nodejs\n#install stack\nRUN curl -sSL https://get.haskellstack.org/ | sh\n#add stack to path\nRUN echo \"PATH=$PATH:/usr/local/bin/stack:/root/.local/bin\" &gt;&gt; /root/.profile\n#create and change into project directory\nRUN mkdir /root/ghcjs/ &amp;&amp; cd /root/ghcjs/\n#initialize ghcjs project\nRUN stack new helloWorld ghcjs\n#add stack.yaml\nADD stack.yaml /root/ghcjs/helloWorld/\n#install ghcjs\nRUN stack setup\n</code></pre>\n\n<p>The output and error are:</p>\n\n<pre><code>Downloading template \"ghcjs\" to create project \"helloWorld\" in helloWorld/ ...\n\nThe following parameters were needed by the template but not provided: author-email, author-name, category, copyright, github-username\nYou can provide them in /root/.stack/config.yaml, like this:\ntemplates:\n  params:\n    author-email: value\n    author-name: value\n    category: value\n    copyright: value\n    github-username: value\nOr you can pass each one as parameters like this:\nstack new helloWorld ghcjs -p \"author-email:value\" -p \"author-name:value\" -p \"category:value\" -p \"copyright:value\" -p \"github-username:value\"\n\nLooking for .cabal or package.yaml files to use to init the project.\nUsing cabal packages:\n- helloWorld/helloWorld.cabal\n\nSelecting the best among 11 snapshots...\n\nDownloading lts-9.12 build plan ...\nDownloaded lts-9.12 build plan.\nUpdating package index Hackage (mirrored at https://s3.amazonaws.com/hackage.fpcomplete.com/) ...\nSelected mirror https://s3.amazonaws.com/hackage.fpcomplete.com/\nDownloading root\nSelected mirror https://s3.amazonaws.com/hackage.fpcomplete.com/\nDownloading timestamp\nDownloading snapshot\nDownloading mirrors\nCannot update index (no local copy)\nDownloading index\nUpdated package list downloaded\nPopulating index cache ...\nPopulated index cache.\n* Partially matches lts-9.12\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading nightly-2017-11-09 build plan ...\nDownloaded nightly-2017-11-09 build plan.\n* Partially matches nightly-2017-11-09\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-8.24 build plan ...\nDownloaded lts-8.24 build plan.\n* Partially matches lts-8.24\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-7.24 build plan ...\nDownloaded lts-7.24 build plan.\n* Partially matches lts-7.24\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-6.35 build plan ...\nDownloaded lts-6.35 build plan.\n* Partially matches lts-6.35\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-5.18 build plan ...\nDownloaded lts-5.18 build plan.\n* Partially matches lts-5.18\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-4.2 build plan ...\nDownloaded lts-4.2 build plan.\n* Partially matches lts-4.2\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-3.22 build plan ...\nDownloaded lts-3.22 build plan.\n* Partially matches lts-3.22\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-2.22 build plan ...\nDownloaded lts-2.22 build plan.\n* Partially matches lts-2.22\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-1.15 build plan ...\nDownloaded lts-1.15 build plan.\n* Partially matches lts-1.15\n    ghcjs-base not found\n        - helloWorld requires -any\n\nDownloading lts-0.7 build plan ...\nDownloaded lts-0.7 build plan.\n* Partially matches lts-0.7\n    ghcjs-base not found\n        - helloWorld requires -any\n\nSelected resolver: lts-9.12\nResolver 'lts-9.12' does not have all the packages to match your requirements.\n    ghcjs-base not found\n        - helloWorld requires -any\n\nThis may be resolved by:\n    - Using '--solver' to ask cabal-install to generate extra-deps, atop the chosen snapshot.\n    - Using '--omit-packages to exclude mismatching package(s).\n    - Using '--resolver' to specify a matching snapshot/resolver\n\nThe command '/bin/sh -c stack new helloWorld ghcjs' returned a non-zero code: 1\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Here is the Dockerfile after editing it to take into acount @SamuraiJack comment.  It now gets past the issue mentioned in this question.</p>\n\n<pre><code>FROM debian:latest\n\n#update\nRUN apt-get update\n#install apt-utils and emacs\nRUN apt-get install -y apt-utils emacs-nox\n#install ghcjs dependencies\nRUN apt-get install -y curl git libtinfo-dev alex happy nodejs-legacy nodejs\n#install stack\nRUN curl -sSL https://get.haskellstack.org/ | sh\n#add stack to path\nRUN echo \"PATH=$PATH:/usr/local/bin/stack:/root/.local/bin\" &gt;&gt; /root/.profile\n#create and change into project directory\nRUN mkdir /home/ghcjs/ &amp;&amp; cd /home/ghcjs/ &amp;&amp; \\\n#initialize ghc project\nstack new helloWorld\n#add stack.yaml\nADD stack.yaml /home/ghcjs/helloWorld/\n#install ghcjs\nRUN cd /home/ghcjs/helloWorld/ &amp;&amp; \\\nstack setup\n</code></pre>\n"}, {"tags": ["haskell", "jupyter", "haskell-stack", "ihaskell"], "owner": {"reputation": 1278, "user_id": 1185179, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/776f28ab850903865a90b52c2f90a220?s=128&d=identicon&r=PG", "display_name": "brittAnderson", "link": "https://stackoverflow.com/users/1185179/brittanderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1510255114, "creation_date": 1510252014, "last_edit_date": 1510255114, "question_id": 47209070, "link": "https://stackoverflow.com/questions/47209070/how-do-i-use-a-stack-built-haskell-package-in-an-ihaskell-notebook", "title": "How do I use a stack built haskell package in an IHaskell Notebook?", "body": "<p>I can successfully open and use the IHaskell demo notebook. I also have some haskell code that I wrote and which builds with stack and for which <code>stack ghci</code> gives me an interactive venue for using my functions and data types. How do I combine these two so that I can use my module within an IHaskell notebook?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510251842, "post_id": 47208991, "comment_id": 81367077, "body": "What should <code>filter (d3 &lt; val) [((d1,d2),d3)]</code> do?"}, {"owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510251917, "post_id": 47208991, "comment_id": 81367122, "body": "It should return a list [((d1,d2),d3)] of all d3 that are less than the value"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510251941, "post_id": 47208991, "comment_id": 81367135, "body": "but your pattern only matches lists with <b>one</b> element."}, {"owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510252071, "post_id": 47208991, "comment_id": 81367211, "body": "How would I rewrite it to match lists in the format?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510252105, "post_id": 47208991, "comment_id": 81367241, "body": "the signature of the function already does that. But you need a function to pass to the <code>filter</code>."}, {"owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510252208, "post_id": 47208991, "comment_id": 81367303, "body": "Do you mean like this <code>filter (((_,_),d3) &lt;epsilon) [((d1,d2),d3)]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "edited": false, "score": 0, "creation_date": 1510252790, "post_id": 47209171, "comment_id": 81367595, "body": "Thank you, that makes far more sense now. However when I try to execute this it won&#39;t compile."}, {"owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "edited": false, "score": 0, "creation_date": 1510252830, "post_id": 47209171, "comment_id": 81367618, "body": "I get the error <code>ex8.hs:54:1: error:     \u2022 Couldn&#39;t match expected type \u2018[((b, c), a)]\u2019                   with actual type \u2018[((a0, b0), [((b, c), a)])]                                     -&gt; [((a0, b0), [((b, c), a)])]\u2019     \u2022 The equation(s) for \u2018filterTuples\u2019 have two arguments,       but its type \u2018[((b, c), a)] -&gt; [((b, c), a)]\u2019 has only one     \u2022 Relevant bindings include         filterTuples :: [((b, c), a)] -&gt; [((b, c), a)]           (bound at ex8.hs:54:1)    | 54 | filterTuples val l = filter (\\((d1,d2),d3) -&gt; d3 &lt; val) l</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1510252930, "last_edit_date": 1510252930, "creation_date": 1510252418, "answer_id": 47209171, "question_id": 47208991, "link": "https://stackoverflow.com/questions/47208991/haskell-filter-list-by-custom-tuple/47209171#47209171", "title": "Haskell Filter list by custom tuple", "body": "<p>What you here have written is pattern matching that <em>only</em> matches a <strong>list with one element</strong>. You write:</p>\n\n<pre><code>filterTuples val <b>[((d1,d2),d3)]</b> = ...</code></pre>\n\n<p>So this means a list with <em>one</em> element: a tuple <code>((d1,d2),d3)</code>. This is <em>not</em> how you should filter lists an arbitrary number of elements.</p>\n\n<p>We can write it as <code>l</code>:</p>\n\n<pre><code>filterTuples val <b>l</b> = ...</code></pre>\n\n<p>but now we of course still have to write a <code>filter</code>. The <strong><code>filter :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong> function expects a function <code>a -&gt; Bool</code> as parameter that is a predicate that should decide what elements to keep.</p>\n\n<p>We thus have to design such function. We can write this as a <em>lambda expression</em>:</p>\n\n<pre><code>\\((d1,d2),d3) -&gt; d3 &lt; val\n</code></pre>\n\n<p>So now we can write it as:</p>\n\n<pre><code>filterTuples :: Ord a =&gt; a -&gt; [((b,c),a)] -&gt; [((b,c),a)]\nfilterTuples val l = filter <b>(\\((d1,d2),d3) -&gt; d3 &lt; val) l</b></code></pre>\n\n<p>Now we can still improve it. For instance we can perform an <em>eta reduction</em>: eliminate the variable both in the head and body of the clause:</p>\n\n<pre><code>filterTuples :: Ord a =&gt; a -&gt; [((b,c),a)] -&gt; [((b,c),a)]\nfilterTuples val = filter (\\((d1,d2),d3) -&gt; d3 &lt; val)</code></pre>\n\n<p>Still we can improve it. For instance it is not clear why you want to filter only tuples with a tuple as first element. Why not generalize it to all possible 2-tuples?</p>\n\n<pre><code>filterTuples :: Ord a =&gt; a -&gt; [(<b>d</b>,a)] -&gt; [(<b>d</b>,a)]\nfilterTuples val = filter (\\(<b>dx</b>,d3) -&gt; d3 &lt; val)</code></pre>\n\n<p>We also usually write variables we do not care about with an underscore (<code>_</code>):</p>\n\n<pre><code>filterTuples :: Ord a =&gt; a -&gt; [(d,a)] -&gt; [(d,a)]\nfilterTuples val = filter (\\(<b>_</b>,d3) -&gt; d3 &lt; val)</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7841878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ea84e22431b5da70d9f514ee95767b09?s=128&d=identicon&r=PG&f=1", "display_name": "James Hamish", "link": "https://stackoverflow.com/users/7841878/james-hamish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 47209171, "answer_count": 1, "score": 2, "last_activity_date": 1510252930, "creation_date": 1510251703, "last_edit_date": 1510251966, "question_id": 47208991, "link": "https://stackoverflow.com/questions/47208991/haskell-filter-list-by-custom-tuple", "title": "Haskell Filter list by custom tuple", "body": "<p>I am trying to write a function to filter my list of custom tuples in the form ((d1,d2),d3) by the a parameter value larger than d3.</p>\n\n<p>filterTuple 1.5 [((1.0,2.0),1.0),((3.0,5.0),2.0),((4.0,5.0),2.0)] should return [((3.0,5.0),2.0),((4.0,5.0),2.0)]</p>\n\n<pre><code>filterTuples :: Double -&gt;[((Double, Double), Double)] -&gt; [((Double, Double), Double)] \nfilterTuples val [((d1,d2),d3)] = filter (d3 &lt; val) [((d1,d2),d3)]\n</code></pre>\n\n<p>This throws the error below with the expression in <code>d3 &lt; val</code>, what is correct to write in there instead?</p>\n\n<pre><code>x8.hs:54:47: error:\n\u2022 Couldn't match expected type \u2018((Double, Double), Double) -&gt; Bool\u2019\n              with actual type \u2018Bool\u2019\n\u2022 Possible cause: \u2018(&lt;)\u2019 is applied to too many arguments\n  In the first argument of \u2018filter\u2019, namely \u2018(d3 &lt; value)\u2019\n  In the expression: filter (d3 &lt; value) [((d1, d2), d3)]\n  In an equation for \u2018filterTuples\u2019:\n      filterTuples value [((d1, d2), d3)]\n        = filter (d3 &lt; value) [((d1, d2), d3)]    |   \n</code></pre>\n"}]