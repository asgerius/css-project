[{"tags": ["haskell", "tuples", "conditional-statements", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 3, "last_activity_date": 1490825608, "creation_date": 1490825608, "answer_id": 43105117, "question_id": 43104846, "link": "https://stackoverflow.com/questions/43104846/list-comprehensions-with-a-condition-on-an-array/43105117#43105117", "title": "List Comprehensions with a condition on an array?", "body": "<p><code>oldArray</code> is a list, always and forever, even inside the comprehension, so <code>snd</code> can't be applied to it. Use <code>z == 5</code> instead.</p>\n"}], "owner": {"reputation": 45, "user_id": 7788477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a673c33968b5655b9f86ff3ad5e232f9?s=128&d=identicon&r=PG&f=1", "display_name": "plshelp", "link": "https://stackoverflow.com/users/7788477/plshelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 43105117, "answer_count": 1, "score": 0, "last_activity_date": 1563080963, "creation_date": 1490824426, "last_edit_date": 1563080963, "question_id": 43104846, "link": "https://stackoverflow.com/questions/43104846/list-comprehensions-with-a-condition-on-an-array", "title": "List Comprehensions with a condition on an array?", "body": "<p>I have an array that contains tuples that look like this: <code>[((Int, Int), Int)]</code>. I am trying to create a new array with list comprehensions that says to only add all 3 Ints if the 3rd Int == a certain number. I have it written as</p>\n\n<pre><code>newArray = [((x,y),z) | ((x,y),z)&lt;-oldArray, (snd oldArray) == 5]\n</code></pre>\n\n<p>However, when I try to run the code that contains this, it says \"couldn't match expected type\" and point the error at my conditional. <code>\"Couldn't match expected type '(a0, Int)' with actual type '[((Int, Int), Int)]'\"</code>.</p>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1490829078, "post_id": 43104723, "comment_id": 73292753, "body": "could you explain a bit more of what you are trying to achieve - maybe the task you have can be done with other means - be it <code>Generics</code> or <code>TemplateHaskell</code> right now I find it rather difficult to write a meaningful answer. Also be aware that recommendation of libraries/blogs and so forth is not what SO.com is for, you are better of writing to the mailing list or ask on reddit."}, {"owner": {"reputation": 1, "user_id": 7570786, "user_type": "registered", "profile_image": "https://graph.facebook.com/545655947/picture?type=large", "display_name": "Ben Perez", "link": "https://stackoverflow.com/users/7570786/ben-perez"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490829803, "post_id": 43104723, "comment_id": 73292969, "body": "Basically I&#39;m trying to get every expression of type IO a, add a function of type IO a -&gt; IO a to each of these expressions, and run the resulting code"}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490831397, "post_id": 43104723, "comment_id": 73293465, "body": "i think you can extract module information with template haskell <a href=\"https://hackage.haskell.org/package/template-haskell\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/template-haskell</a> - and manipulate the functions in said module - though I don&#39;t know whether you can filter based on the type of that function."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490858608, "post_id": 43104723, "comment_id": 73302357, "body": "@BenPerez, do you mind saying <i>why</i> you want to apply this <code>IO a -&gt; IO a</code> function? What function do you have in mind?  Again, maybe there is another way to do what you want."}, {"owner": {"reputation": 1, "user_id": 7570786, "user_type": "registered", "profile_image": "https://graph.facebook.com/545655947/picture?type=large", "display_name": "Ben Perez", "link": "https://stackoverflow.com/users/7570786/ben-perez"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1490899131, "post_id": 43104723, "comment_id": 73330715, "body": "@luqui its basically for getting better stack traces than possible with existing tools. I want to be able to feed this IO a -&gt; IO a function various pieces of info and have it log them. So the point of this whole thing is being able to run a program in a customizable debugging mode, which essentially rewrites the program to have these trace functions peppered throughout."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490902788, "post_id": 43104723, "comment_id": 73332661, "body": "Why bother with the <code>IO</code> bit?  Since its a debugging tool, you could go with <code>Debug.Trace</code>-style annotations (or something else using <code>unsafePerformIO</code>). And then you wouldn&#39;t need to know the type, so you could do it in TH just by traversing the syntax."}], "owner": {"reputation": 1, "user_id": 7570786, "user_type": "registered", "profile_image": "https://graph.facebook.com/545655947/picture?type=large", "display_name": "Ben Perez", "link": "https://stackoverflow.com/users/7570786/ben-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490829711, "creation_date": 1490823957, "last_edit_date": 1490829711, "question_id": 43104723, "link": "https://stackoverflow.com/questions/43104723/using-ghc-api-to-rewrite-program", "title": "Using GHC api to rewrite program", "body": "<p>I'm trying to write a piece of code that does the following</p>\n\n<ol>\n<li>Take as input a Haskell module</li>\n<li>Parse and type check the input module</li>\n<li>Find all expressions in the module that have type IO a</li>\n<li>Add a function of type IO a -> IO a to each of these expressions</li>\n<li>Compile and run the rewritten module</li>\n</ol>\n\n<p>I've been digging around the GHC api to help do this but its fairly impenetrable for someone new to serious Haskell development. I tried reading the <a href=\"https://wiki.haskell.org/GHC/As_a_library\" rel=\"nofollow noreferrer\">GHC as a library wiki page</a> but many decisions they make (e.g. their choice of DynFlags) aren't clarified. Any tips or places to look would be super helpful!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1490817979, "post_id": 43101697, "comment_id": 73287956, "body": "Also try <code>commaSeparated = intercalate &quot;,&quot; . map show</code> after <code>import Data.List</code>. It will not output the tailing comma, so that you won&#39;t have to use <code>init</code> to remove it."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": true, "score": 7, "last_activity_date": 1490813445, "creation_date": 1490813445, "answer_id": 43101798, "question_id": 43101697, "link": "https://stackoverflow.com/questions/43101697/no-instance-for-show-a-arising/43101798#43101798", "title": "No instance for (Show a) arising", "body": "<p>Your <code>instance</code> declaration does not have a context. Rewrite it as <code>instance Show a =&gt; Show (Set a)</code>.</p>\n"}], "owner": {"reputation": 121, "user_id": 5712298, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ced70332842c48c0825bc1d39d670148?s=128&d=identicon&r=PG&f=1", "display_name": "Feltie", "link": "https://stackoverflow.com/users/5712298/feltie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 0, "accepted_answer_id": 43101798, "answer_count": 1, "score": -1, "last_activity_date": 1490813445, "creation_date": 1490813122, "question_id": 43101697, "link": "https://stackoverflow.com/questions/43101697/no-instance-for-show-a-arising", "title": "No instance for (Show a) arising", "body": "<p>ghci is giving me the error \"No instance for (Show a) arising from use of 'commaSeperated'\"</p>\n\n<p>What im trying to do is define a show for my data Set that uses curly braces instead of square. What am I doing wrong here?</p>\n\n<pre><code>data Set a = Set [a]\n\ninstance Show (Set a) where\n    show (Set a) = \"{\" ++ init (commaSeparated a) ++ \"}\"\n\ncommaSeparated :: Show a =&gt; [a] -&gt; [Char]\ncommaSeparated [] = \"\"\ncommaSeparated (x:xs) = show x ++ \",\" ++ commaSeparated xs\n</code></pre>\n"}, {"tags": ["c++", "haskell", "g++", "ghc"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1490811476, "post_id": 43100934, "comment_id": 73283981, "body": "I just spent all day doing this yesterday, and succeeded, so it is possible.  I didn&#39;t hit the error you are seeing, but the errors seem to be telling you to add <code>-fPIC</code> to your compiler flags.  (I hope it doesn&#39;t mean when compiling GHC)"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1490811795, "post_id": 43100934, "comment_id": 73284177, "body": "Another option (which wasn&#39;t available to me) that I heard worked is to use <code>ghc</code> as your linker.  Then you don&#39;t need to futz with all the <code>-L</code> stuff.  I.e. <code>g++ -c main.cpp; ghc Hello.hs main.o -o main</code> or something"}, {"owner": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490811922, "post_id": 43100934, "comment_id": 73284265, "body": "@luqui Thank you for taking the time. Do you have any link for this other option? About -fPIC, I have tried to add it but it doesn&#39;t change anything. My guess is that the error come from the libraries and not from the compilation of my code. Do you have any working example ? Could you kindly share? Regards"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490812040, "post_id": 43100934, "comment_id": 73284337, "body": "I don&#39;t know how much <a href=\"https://github.com/luqui/lukeper\" rel=\"nofollow noreferrer\">my example</a> is going to help, it&#39;s a pretty different context.  OSX on Xcode.  But the linker flags are <a href=\"https://github.com/luqui/lukeper/blob/master/Builds/MacOSX/lukeper.xcodeproj/project.pbxproj#L3894\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490812339, "post_id": 43100934, "comment_id": 73284493, "body": "Wait -- there seem to be some errors in your makefile.  You talk about <code>HaskellPart.o</code> but there&#39;s no <code>HaskellPart.hs</code>.  And <code>Hello.o</code> is on the <code>g++</code> command line despite ostensibly requiring <code>HaskellPart.o</code>.  Clean out your project directory and try again (so your won&#39;t be misled by stale object files).  Also shouldn&#39;t <code>-c</code> be on the <code>ghc</code> command line?"}, {"owner": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490812863, "post_id": 43100934, "comment_id": 73284821, "body": "@luqui Thanks for the linker flags. <code>HaskellPart.o</code> is the instruction compiling <code>Hello.hs</code>, not a file. What <code>-c</code>?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490813404, "post_id": 43100934, "comment_id": 73285163, "body": "Oh, I see. That&#39;s very misleading -- it looks like a file.   <code>-c</code> says to compile only the object file (<code>.o</code>) and not try to make an executable program.  Maybe it&#39;s the default if there&#39;s no output <code>-o</code> or <code>--make</code> flag."}, {"owner": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490813820, "post_id": 43100934, "comment_id": 73285430, "body": "@luqui Yeah I understand. I have rename it to keep things clear. I&#39;m desperate to find a solution :/"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1490813887, "post_id": 43100934, "comment_id": 73285481, "body": "things take as long as they take.  One step at a time.  ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "edited": false, "score": 0, "creation_date": 1490863379, "post_id": 43107962, "comment_id": 73305300, "body": "Awesome, thank you so much ! Would you say that the github tutorial is wrong or only adapted to mac os? Do you have any further explanation?"}, {"owner": {"reputation": 661, "user_id": 7720738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HccZv.png?s=128&g=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/7720738/james-burton"}, "reply_to_user": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "edited": false, "score": 1, "creation_date": 1490989012, "post_id": 43107962, "comment_id": 73374181, "body": "@MaximeVAST I can&#39;t really say because I don&#39;t know a huge amount about CMake. The tutorial is from 2014 so it might just be outdated. Try adding -shared and -dynamic (maybe -fPIC as well) to your Haskell flags in the CMake file and see if your original method works then."}], "tags": [], "owner": {"reputation": 661, "user_id": 7720738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HccZv.png?s=128&g=1", "display_name": "James Burton", "link": "https://stackoverflow.com/users/7720738/james-burton"}, "is_accepted": true, "score": 2, "last_activity_date": 1490844318, "creation_date": 1490844318, "answer_id": 43107962, "question_id": 43100934, "link": "https://stackoverflow.com/questions/43100934/calling-haskell-from-c/43107962#43107962", "title": "Calling Haskell from c++", "body": "<p>Not sure whether that's actually in your file or whether it's just in the version you put in your question but \"// hello.hs\" won't compile. Comments are -- in Haskell not //.</p>\n\n<p>Anyway on to the interesting part...</p>\n\n<p>First you need to import the HsFFI.h header file into your C++ code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Hello_stub.h\"\n#include &lt;HsFFI.h&gt;\n</code></pre>\n\n<p>Then use ghc to link the files after compiling them. Open a command prompt / terminal and navigate the directory containing your C++ and Haskell files. Then run the following commands:</p>\n\n<pre><code>ghc -c -XForeignFunctionInterface -O hello.hs\ng++ -c -O main.cpp -I \"C:\\Program Files\\Haskell Platform\\7.10.3\\lib\\include\"                         \nghc -no-hs-main hello.o main.o -lstdc++\n</code></pre>\n\n<p>The filepath in the second command is to the directory containing the HsFFI.h file.</p>\n\n<p>Running main then outputs:</p>\n\n<pre><code>Hello from C++\nHello from Haskell\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 5324537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da02c8d20023c2bb9823f8ef6b9e3ee?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime VAST", "link": "https://stackoverflow.com/users/5324537/maxime-vast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 43107962, "answer_count": 1, "score": 8, "last_activity_date": 1490844318, "creation_date": 1490810744, "last_edit_date": 1495541882, "question_id": 43100934, "link": "https://stackoverflow.com/questions/43100934/calling-haskell-from-c", "title": "Calling Haskell from c++", "body": "<p>I'm trying to call Haskell from c++.</p>\n\n<p>I tried to use <a href=\"https://github.com/jarrett/cpphs\" rel=\"nofollow noreferrer\">this</a> explanation; and already asked one question on <a href=\"https://stackoverflow.com/q/42976708/5324537\">SO</a>.</p>\n\n<p>However, I haven't got any answer so I'd like to reformulate to a Minimal, Complete, and Verifiable example.</p>\n\n<p>I'm using Debian and this is what I have (In the same folder):</p>\n\n<p><strong>c++:</strong></p>\n\n<pre><code>// main.cpp\n#include &lt;iostream&gt;\n#include \"Hello_stub.h\"\n\nint main(int argc, char** argv) {\n  hs_init(&amp;argc, &amp;argv);\n  std::cout &lt;&lt; \"Hello from C++\\n\";\n  helloFromHaskell();\n  hs_exit();\n  return 0;\n}\n</code></pre>\n\n<p><strong>Haskell:</strong></p>\n\n<pre><code>// hello.hs\nmodule Hello where\n\nforeign export ccall helloFromHaskell :: IO ()\n\nhelloFromHaskell :: IO ()\nhelloFromHaskell = putStrLn \"Hello from Haskell\"\n</code></pre>\n\n<p><strong>MakeFile:</strong></p>\n\n<pre><code>CPP_SOURCES = main.cpp\nHASKELL_SOURCES = Hello.hs\nCFLAGS = -Wall -g -fno-stack-protector\nHFLAGS = -fforce-recomp\n\nall: main; ./main\n\nmain: $(CPP_SOURCES) HaskellPart; g++ \\\n    $(CFLAGS) -o main $(CPP_SOURCES) Hello.o \\\n    -I/usr/lib/ghc/include \\\n    -liconv \\\n    -I/usr/lib/ghc/ghc-8.0.1/include \\\n    -L/usr/lib/ghc/ghc-8.0.1 \\\n    -L/usr/lib/ghc/base-4.9.0.0 \\\n    -lHSbase-4.9.0.0 \\\n    -L/usr/lib/ghc/ghc-prim-0.5.0.0 \\\n    -lHSghc-prim-0.5.0.0 \\\n    -L/usr/lib/ghc/integer-gmp-1.0.0.1 \\\n    -lHSinteger-gmp-1.0.0.1 \\\n    -lHSghc-prim-0.5.0.0 \\\n    -L/usr/lib/ghc/rts \\\n    -lHSrts \\\n\nHaskellPart: $(HASKELL_SOURCES); ghc $(HFLAGS) $(HASKELL_SOURCES)\n\nclean: ; rm -rf main &amp;&amp; rm -rf *.o &amp;&amp; rm -rf *.hi &amp;&amp; rm -rf *_stub.h\n</code></pre>\n\n<p>Here's the <a href=\"https://pastebin.com/HsQw0L4c\" rel=\"nofollow noreferrer\">output</a>. It seems to be a bunch of errors of the form</p>\n\n<pre><code>/usr/bin/ld: Hello.o: relocation R_X86_64_32S against symbol `stg_bh_upd_frame_info' can not be used when making a shared object; recompile with -fPIC\n</code></pre>\n\n<p>What's wrong? Thank you for your help !</p>\n"}, {"tags": ["haskell", "list-comprehension"], "comments": [{"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 6, "creation_date": 1490803836, "post_id": 43098752, "comment_id": 73279072, "body": "evaluation of <code>[x|x &lt;- [1..], x &lt; 20]</code> would not terminate so I don&#39;t know what you mean by how it &#39;will be just fine&#39;. No attempt to reason about the predicate is done at all."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1490804164, "post_id": 43098752, "comment_id": 73279290, "body": "@Lee: I suppose you can take up to 19 elements from <code>[x | x &lt;- [1..], x &lt; 20]</code> safely, and <i>after that</i> an attempt to find another element matching the predicate never terminates."}, {"owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "edited": false, "score": 0, "creation_date": 1490804200, "post_id": 43098752, "comment_id": 73279312, "body": "I mean are the filter (p) . map (f) $ list and [f x|x &lt;- list, p] evaluated the same way or is it possible for the compiler to do optimizations better in one than the other?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1490804948, "post_id": 43098752, "comment_id": 73279823, "body": "A list comprehension desugars to monadic code (using the <code>guard</code> function), not a composition of <code>filter</code> and <code>map</code>."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490810219, "post_id": 43098752, "comment_id": 73283244, "body": "What do you think should <code>filter (&lt;20) ([1..]++[1])</code> yield, it is not too much different from your original example"}, {"owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1490863978, "post_id": 43098752, "comment_id": 73305729, "body": "@epsilonhalbe: I think <code>filter (&lt; finiteNumber) ([1..] ++ [1])</code> <i>should</i> give a list of length finiteNumber, however I understand now that it will not. Thank you guys."}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "edited": false, "score": 0, "creation_date": 1490805131, "post_id": 43099045, "comment_id": 73279943, "body": "so this basically means list-comprehensions can really screw you over... thanks a lot for the quick answer. I don&#39;t have a specific problem I am trying to optimize but as I am new to Haskell I try to get a better understanding of what the compiler will do for you and what not."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "edited": false, "score": 2, "creation_date": 1490806826, "post_id": 43099045, "comment_id": 73281028, "body": "@Chris: it&#39;s not comprehensions, it&#39;s infinite sequences that need handling with care; infinite loops in any other language need an extra bit of attention, too."}], "tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": true, "score": 3, "last_activity_date": 1490804564, "creation_date": 1490804564, "answer_id": 43099045, "question_id": 43098752, "link": "https://stackoverflow.com/questions/43098752/evaluation-of-list-comprehensions-in-haskell/43099045#43099045", "title": "Evaluation of list-comprehensions in Haskell", "body": "<p>There's nothing obvious about the fact that a particular infinite sequence has no more elements matching a predicate. When you pass a list to <code>filter</code>, it has no way of knowing any other properties of the elements than that an element can be passed to the predicate. </p>\n\n<p>You can write your own version of <code>Ord a =&gt; List a</code> which can describe a sequence as ascending or not, and a version of <code>filter</code> that can use this information to stop looking at elements past a particular threshold. Unfortunately, list comprehensions won't use either of them.</p>\n\n<p>Instead, I'd use a combination of <code>takeWhile</code> and a comprehension without a predicate / a plain <code>map</code>. Somewhere in the <code>takeWhile</code> arguments, you will supply the compiler the information about the expected upper bound; for a number of <em>n</em> decimal digits, it would be 10^<em>n</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 8268, "user_id": 7602518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ddcddc4afafdfc5603b2473b191c74f?s=128&d=identicon&r=PG", "display_name": "Pedro Castilho", "link": "https://stackoverflow.com/users/7602518/pedro-castilho"}, "is_accepted": false, "score": 3, "last_activity_date": 1490805142, "creation_date": 1490805142, "answer_id": 43099228, "question_id": 43098752, "link": "https://stackoverflow.com/questions/43098752/evaluation-of-list-comprehensions-in-haskell/43099228#43099228", "title": "Evaluation of list-comprehensions in Haskell", "body": "<pre><code>[&lt;function&gt; x|x &lt;- &lt;someList&gt;, &lt;somePredicate&gt;]\n</code></pre>\n\n<p>should always <em>evaluate</em> to the same result as</p>\n\n<pre><code>filter (&lt;somePredicate&gt;) . map (&lt;function&gt;) $ &lt;someList&gt;\n</code></pre>\n\n<p>However, there is <em>no guarantee</em> that this is how the compiler will actually do it. <a href=\"https://www.haskell.org/onlinereport/exps.html#sect3.11\" rel=\"nofollow noreferrer\">The section on list comprehensions in the Haskell Report</a> only mentions <em>what</em> list comprehensions should do, not <em>how</em> they should work. So each compiler is free to do as its developers find best. Therefore, you should not assume anything about the performance of list comprehensions or that the compiler will do any optimizations. </p>\n"}], "owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 1, "accepted_answer_id": 43099045, "answer_count": 2, "score": 1, "last_activity_date": 1490805415, "creation_date": 1490803638, "last_edit_date": 1495540920, "question_id": 43098752, "link": "https://stackoverflow.com/questions/43098752/evaluation-of-list-comprehensions-in-haskell", "title": "Evaluation of list-comprehensions in Haskell", "body": "<p>I am wondering exactly how list-comprehensions are evaluated in Haskell. After reading this <a href=\"https://stackoverflow.com/questions/8029046/removing-syntactic-sugar-list-comprehension-in-haskell\">Removing syntactic sugar: List comprehension in Haskell</a> and this: <a href=\"https://stackoverflow.com/questions/4532443/haskell-lazy-evaluation-and-reuse\">Haskell Lazy Evaluation and Reuse</a> I still don't really understand if</p>\n\n<pre><code>[&lt;function&gt; x|x &lt;- &lt;someList&gt;, &lt;somePredicate&gt;]\n</code></pre>\n\n<p>is actually exactly equivalent (not just in outcome but in evaluation) to</p>\n\n<pre><code>filter (&lt;somePredicate&gt;) . map (&lt;function&gt;) $ &lt;someList&gt;\n</code></pre>\n\n<p>and if so, does this mean it can potentially reduce time complexity drastically to build up the desired list with only desired elements? \nAlso, how does this work in terms of infinite lists? To be specific: I assume something like:</p>\n\n<pre><code>[x|x &lt;- [1..], x &lt; 20]\n</code></pre>\n\n<p>will be evaluated in finite time, but how \"obvious\" does the fact that there are no more elements above some value which satisfy the predicate need to be, for the compiler to consider it? Would</p>\n\n<pre><code>[x|x &lt;- [1..], (sum.map factorial $ digits x) == x]\n</code></pre>\n\n<p>work (see project Euler problem 34 <a href=\"https://projecteuler.net/problem=34\" rel=\"nofollow noreferrer\">https://projecteuler.net/problem=34</a>). There is obviously an upper bound because from some x on x*9! &lt; 10^n -1 always holds, but do I need to supply that bound or will the compiler find it?</p>\n"}, {"tags": ["string", "haskell", "io"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7656340"}, "reply_to_user": {"reputation": 1414, "user_id": 6564029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WxyK5.jpg?s=128&g=1", "display_name": "Michail", "link": "https://stackoverflow.com/users/6564029/michail"}, "edited": false, "score": 0, "creation_date": 1490798739, "post_id": 43095903, "comment_id": 73275026, "body": "Could you post the code? I&#39;m new to haskell and don&#39;t know much"}, {"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "edited": false, "score": 0, "creation_date": 1490800247, "post_id": 43095903, "comment_id": 73276317, "body": "Consider elaborating on your code sample.  Explain why it is not doing what you want. To help you, that&#39;s the first thing we&#39;re going to have to figure out, and you can save us from having to deduce that from your code."}], "answers": [{"tags": [], "owner": {"reputation": 7323, "user_id": 343957, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FAVPm.jpg?s=128&g=1", "display_name": "mathk", "link": "https://stackoverflow.com/users/343957/mathk"}, "is_accepted": false, "score": 2, "last_activity_date": 1490800001, "last_edit_date": 1490800001, "creation_date": 1490799017, "answer_id": 43096984, "question_id": 43095903, "link": "https://stackoverflow.com/questions/43095903/haskell-remove-trailing-and-leading-whitespace-from-a-file/43096984#43096984", "title": "Haskell remove trailing and leading whitespace from a file", "body": "<p>Here is a possible solution for what you are looking for:</p>\n\n<pre><code>import qualified Data.Text as T\n\nmain = do\n  trimedFile &lt;- (T.unlines . map T.strip . T.lines) &lt;$&gt; T.readFile \"mary.txt\"\n  T.putStr trimedFile\n</code></pre>\n\n<p><code>strip</code> from <code>Data.Text</code> is doing the job.</p>\n"}, {"tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 6, "last_activity_date": 1490809183, "creation_date": 1490809183, "answer_id": 43100492, "question_id": 43095903, "link": "https://stackoverflow.com/questions/43095903/haskell-remove-trailing-and-leading-whitespace-from-a-file/43100492#43100492", "title": "Haskell remove trailing and leading whitespace from a file", "body": "<p>Your code suggests a few misunderstandings about Haskell so let's go through your code before getting to the solution.</p>\n\n<pre><code>import Data.Text as T\n</code></pre>\n\n<p>You're using <code>Text</code>, great!  I suggest you also use the IO operations that read and write <code>Text</code> types instead of what is provided by the prelude which works on <code>String</code>s (linked lists of characters).  That is, <code>import Data.Text.IO as T</code></p>\n\n<pre><code>readTheFile = do\n    handle &lt;- openFile \"mary.txt\" ReadMode\n    contents &lt;- hGetContents handle\n    putStrLn contents\n    hClose handle\n    return(contents)\n</code></pre>\n\n<p>Oh, hey, the use of <code>hGetContents</code> and manually opening and closing a file can be  error prone.  Consider <code>readTheFile = T.readFile \"mary.txt\"</code>.</p>\n\n<pre><code>main :: IO ()\nmain = do\n    file &lt;- readTheFile\n    file2 &lt;- (T.strip file)\n    return()\n</code></pre>\n\n<p>Two issues here.</p>\n\n<p><em>Issue one</em> Notice here you have used <code>strip</code> as though it's an IO action... but it isn't.  I suggest you learn more about IO and binding (do notation) vs let-bound variables.  <code>strip</code> computes a new value of type <code>Text</code> and presumably you want to do something useful with that value, like write it.</p>\n\n<p><em>Issue two</em> Stripping the whole file is different than stripping each line one at a time.  I suggest you read mathk's answer.</p>\n\n<p>So in the end I think you want:</p>\n\n<pre><code>-- Qualified imports are accessed via `T.someSymbol`\nimport qualified Data.Text.IO as T\nimport qualified Data.Text as T\n\n-- Not really need as a separate function unless you want to also\n-- put the stripping here too.\nreadTheFile :: IO T.Text\nreadTheFile = T.readFile \"mary.txt\"\n\n-- First read, then strip each line, then write a new file.\nmain :: IO ()\nmain =\n    do file &lt;- readTheFile\n       let strippedFile = T.unlines $ map T.strip $ T.lines file\n       T.writeFile \"newfile.txt\" (T.strip strippedFile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 3295004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IGNvT.jpg?s=128&g=1", "display_name": "fp_mora", "link": "https://stackoverflow.com/users/3295004/fp-mora"}, "is_accepted": false, "score": 0, "last_activity_date": 1607637181, "last_edit_date": 1607637181, "creation_date": 1578509720, "answer_id": 59652183, "question_id": 43095903, "link": "https://stackoverflow.com/questions/43095903/haskell-remove-trailing-and-leading-whitespace-from-a-file/59652183#59652183", "title": "Haskell remove trailing and leading whitespace from a file", "body": "<p>Read the file or process the file one line at a time then</p>\n<pre><code>&gt; intercalate &quot; &quot;.words $ &quot;   The lamb, the lamb    was sure to go, yeah   &quot;\n&quot;The lamb, the lamb was sure to go, yeah&quot;\n</code></pre>\n<p>But, <code>unwords</code> with no parameter is better than <code>intercalate &quot; &quot;</code> and it neither has to be imported.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7656340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 43100492, "answer_count": 3, "score": 1, "last_activity_date": 1607637181, "creation_date": 1490796418, "question_id": 43095903, "link": "https://stackoverflow.com/questions/43095903/haskell-remove-trailing-and-leading-whitespace-from-a-file", "title": "Haskell remove trailing and leading whitespace from a file", "body": "<p>Let's say I have a file</p>\n\n<pre><code>mary had a little lamb\n         It's fleece was white as snow    \nEverywhere   \n    the child went   \n   The lamb, the lamb was sure to go, yeah    \n</code></pre>\n\n<p>How would I read the file as a string, and remove the trailing and leading whitespace? It could be spaces or tabs. It would print like this after removing whitespace:</p>\n\n<pre><code>mary had a little lamb\nIt's fleece was white as snow\nEverywhere\nthe child went\nThe lamb, the lamb was sure to go, yeah\n</code></pre>\n\n<p>Here's what I have currently:</p>\n\n<pre><code>import Data.Text as T\n\nreadTheFile = do\n    handle &lt;- openFile \"mary.txt\" ReadMode\n    contents &lt;- hGetContents handle\n    putStrLn contents\n    hClose handle\n    return(contents)\n\nmain :: IO ()\nmain = do\n    file &lt;- readTheFile\n    file2 &lt;- (T.strip file)\n    return()\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1490789958, "creation_date": 1490789958, "answer_id": 43093333, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how/43093333#43093333", "title": "Haskell, List as input for a function, How?", "body": "<p>Well it is clear that in the case the list is <strong>not</strong> empty, it is of the form <code>((ca,cb):cs)</code> with <code>ca</code> the <code>Char</code>, <code>cb</code> the <code>Int</code> and <code>cs</code> the remainder of the list <code>[(Char,Int)]</code>.</p>\n\n<p>In that case we can simply construct a string for that sequence <code>ca:(show cb)</code> with <a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:show\" rel=\"nofollow noreferrer\"><code>show :: Show a =&gt; a -&gt; String</code></a> we convert an integer to its <code>String</code> counterpart. Next we concatenate the flattening of remainder of the list to that string, so:</p>\n\n<pre><code>flatten ((ca,cb):cs) = ca:(show cb ++ flatten cs)\n</code></pre>\n\n<p>Or in full:</p>\n\n<pre><code>flatten :: [(Char, Int)] -&gt; String\nflatten [] = []\nflatten ((ca,cb):cs) = ca:(show cb ++ flatten cs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 2, "creation_date": 1490800843, "post_id": 43093743, "comment_id": 73276727, "body": "foldr would be acceptable here (though concatMap is better, as mentioned elsewhere). foldl, however, is a poor choice. It is quite expensive to use in this way."}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1490854034, "post_id": 43093743, "comment_id": 73299766, "body": "Thanks for the hint."}], "tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": false, "score": 1, "last_activity_date": 1490854021, "last_edit_date": 1490854021, "creation_date": 1490791052, "answer_id": 43093743, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how/43093743#43093743", "title": "Haskell, List as input for a function, How?", "body": "<p>You might also use <code>foldl</code> to make your intention very clear:</p>\n\n<pre><code>a=[('a',5),('b',4),('c',2)]\nf b (x,y)=b++[x]++(show y)   \nresult=foldl f \"\" a\n</code></pre>\n\n<p>Or you can make it a one-liner:</p>\n\n<p>Solution 1:</p>\n\n<pre><code>foldl (\\b (x,y)-&gt;b++[x]++(show y)) \"\" a\n</code></pre>\n\n<p>Solution 2:</p>\n\n<pre><code>concat $ map (\\(x,y)-&gt;[x]++show y) a\n</code></pre>\n\n<p>Solution 3: (Being more efficient compared to solution 1)</p>\n\n<pre><code>foldr (\\(x,y) b-&gt;b++[x]++(show y)) \"\" a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490807959, "post_id": 43095472, "comment_id": 73281786, "body": "+ for the <code>concatMap</code> my original idea was <code>flatten = concat.map (\\(c,i) -&gt; c : show i)</code>"}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 3, "last_activity_date": 1490795456, "creation_date": 1490795456, "answer_id": 43095472, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how/43095472#43095472", "title": "Haskell, List as input for a function, How?", "body": "<p>First of all, we try to create a <code>String</code> from a <code>(Char, Int)</code>. If we can do that we've almost done, since we can do that for all <code>(Char, Int)</code>. So let's transform a single <code>(Char, Int)</code>:</p>\n\n<pre><code>flattenSingle :: (Char, Int) -&gt; String\nflattenSingle (c, i) = c : show i\n</code></pre>\n\n<p>Now, we need to do that for all entries:</p>\n\n<pre><code>flattenAll :: [(Char, Int)] -&gt; [String]\nflattenAll xs = map flattenSingle xs\n</code></pre>\n\n<p>And last, but not least, we need to <code>concat</code> the <code>[String]</code> (which is a <code>[[Char]]</code>) to a <code>String</code> (which is a <code>[Char]</code>):</p>\n\n<pre><code>flatten :: [(Char, Int)] -&gt; String\nflatten xs = concat (flattenAll xs)\n</code></pre>\n\n<p>And we're done. How did we do that? Well, we've started with a much easier problem, namely how to get a single <code>String</code> from a <code>(Char, Int)</code>, and used that to get our result.</p>\n\n<p>Here's everything in a single function:</p>\n\n<pre><code>flatten = concat . map flattenSingle\n  where\n    flattenSingle (c, i) = c : show i\n</code></pre>\n\n<p>Since <code>concat . map f</code> is often used, there's a function for that, called <code>concatMap</code>:</p>\n\n<pre><code>flatten :: [(Char, Int)] -&gt; String\nflatten = concatMap flattenSingle\n  where\n    flattenSingle (c, i) = c : show i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "is_accepted": false, "score": 2, "last_activity_date": 1490801578, "creation_date": 1490801578, "answer_id": 43097949, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how/43097949#43097949", "title": "Haskell, List as input for a function, How?", "body": "<p>Let\u2019s think about what goes into <code>flatten</code> and what comes out of it.\n<code>flatten</code>, takes a list of pairs of type: <code>(Char, Int)</code> and produces a <code>[Char]</code>; it produces a list from an existing list. Does this ring a bell?</p>\n\n<pre><code>flatten xs = [ c | (char, int) &lt;- xs, c &lt;-[char] ++ show int]\n</code></pre>\n\n<p>We can sequentially deconstruct each pair in the given list; for each pair, we turn each component into a string so we can concatenate them. Now we have a string for each pair, we just need to take each character out to produce the final string.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 3511511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f695d53cc3acd300a9e119b40c9d7ac?s=128&d=identicon&r=PG", "display_name": "user12457", "link": "https://stackoverflow.com/users/3511511/user12457"}, "is_accepted": false, "score": 1, "last_activity_date": 1490821352, "creation_date": 1490821352, "answer_id": 43104118, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how/43104118#43104118", "title": "Haskell, List as input for a function, How?", "body": "<pre><code>flatten = mconcat. map (\\(c,i) -&gt; [c] ++ show i)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7785666, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79236b36b3b85725142e0a115620c0fa?s=128&d=identicon&r=PG&f=1", "display_name": "AmberL0uise", "link": "https://stackoverflow.com/users/7785666/amberl0uise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3277, "favorite_count": 0, "accepted_answer_id": 43093333, "answer_count": 5, "score": 1, "last_activity_date": 1490854021, "creation_date": 1490789671, "last_edit_date": 1490789800, "question_id": 43093230, "link": "https://stackoverflow.com/questions/43093230/haskell-list-as-input-for-a-function-how", "title": "Haskell, List as input for a function, How?", "body": "<p>I've been given the following question in my coursework;</p>\n\n<p>Define a function</p>\n\n<pre><code>flatten :: [(Char,Int)] -&gt; String\n</code></pre>\n\n<p>that flattens a list of pairs of characters and digits to a string. For example:</p>\n\n<pre><code>flatten [('a',5),('b',4),('c',2)]\n\"a5b4c2\"\nflatten [('d',9),('d',3)]\n\"d9d3\"\n</code></pre>\n\n<p>My problem is that whenever I attempt to define this function i get a type error relating the the <code>[(Char, Int)]</code> input. For example;</p>\n\n<blockquote>\n<pre><code>Couldn't match type '(Char, Int)' with '[Char]'\nExpected type: [[Char]]\nActual type: [(Char, Int)]\n</code></pre>\n</blockquote>\n\n<p>I've tried more ways of writing this definition in more ways than I can count, so I don't have any particular code to show, or any particular error ( I kept getting different ones...so many). All i have so far is;</p>\n\n<pre><code>flatten :: [(Char, Int)] -&gt; String\nflatten [] = []\n</code></pre>\n\n<p>i figure my next line should go something like;</p>\n\n<pre><code>flatten ???? = concat (????)\n</code></pre>\n\n<p>but I have no idea what to put in place of these question marks and Google search/class notes give no examples to follow. \nany ideas?</p>\n"}, {"tags": ["parsing", "haskell", "heap-memory", "parsec", "continuation-passing"], "answers": [{"comments": [{"owner": {"reputation": 3128, "user_id": 3040129, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TcwLC.png?s=128&g=1", "display_name": "illabout", "link": "https://stackoverflow.com/users/3040129/illabout"}, "edited": false, "score": 1, "creation_date": 1490793097, "post_id": 43094097, "comment_id": 73270113, "body": "It seems like <code>go</code> should desurgar as <code>go !i = (p *&gt; pure True) &lt;|&gt; pure False &gt;&gt;= \\success -&gt; if success then go (i+1) else pure i</code>.  This makes it look like <code>go</code> is still not in the tail call position, since it is used in an argument to the bind operator.  How does this end up working?"}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "reply_to_user": {"reputation": 3128, "user_id": 3040129, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TcwLC.png?s=128&g=1", "display_name": "illabout", "link": "https://stackoverflow.com/users/3040129/illabout"}, "edited": false, "score": 1, "creation_date": 1490797118, "post_id": 43094097, "comment_id": 73273538, "body": "I am not sure about the details, but I guess the rough idea is that <code>&lt;|&gt;</code> attaches a continuation <code>pure i</code> which somehow doesn&#39;t get discarded as soon as the left operand consumes some input, whereas with <code>&gt;&gt;=</code>, when the right operand is applied to a boolean, it immediately gets reduced to either <code>go (i+1)</code> or <code>pure i</code>."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 4, "last_activity_date": 1490791975, "creation_date": 1490791975, "answer_id": 43094097, "question_id": 43092461, "link": "https://stackoverflow.com/questions/43092461/heap-usage-for-cps-vs-non-cps-parsers-in-haskells-parsec/43094097#43094097", "title": "heap usage for CPS vs non-CPS parsers in Haskell&#39;s parsec", "body": "<p>This runs in constant heap space. The idea is to first try <code>p</code>, and explicitly perform case analysis on the result of its success to decide whether to run <code>go</code> or not, so that <code>go</code> ends up in tail call position.</p>\n\n<pre><code>manyLength\n  :: Monad m\n  =&gt; ParsecT s u m a -&gt; ParsecT s u m Int\nmanyLength p = go 0\n  where\n    go :: Int -&gt; ParsecT s u m Int\n    go !i = do\n      success &lt;- (p *&gt; pure True) &lt;|&gt; pure False\n      if success then go (i+1) else pure i\n</code></pre>\n"}], "owner": {"reputation": 3128, "user_id": 3040129, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TcwLC.png?s=128&g=1", "display_name": "illabout", "link": "https://stackoverflow.com/users/3040129/illabout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 43094097, "answer_count": 1, "score": 2, "last_activity_date": 1490791975, "creation_date": 1490787651, "question_id": 43092461, "link": "https://stackoverflow.com/questions/43092461/heap-usage-for-cps-vs-non-cps-parsers-in-haskells-parsec", "title": "heap usage for CPS vs non-CPS parsers in Haskell&#39;s parsec", "body": "<p>I'm trying to write the following parser using <a href=\"https://hackage.haskell.org/package/parsec\" rel=\"nofollow noreferrer\">parsec</a>:</p>\n\n<pre><code>manyLength\n  :: forall s u m a.\n     Monad m\n  =&gt; ParsecT s u m a -&gt; ParsecT s u m Int\nmanyLength p = go 0\n  where\n    go :: Int -&gt; ParsecT s u m Int\n    go !i = (p *&gt; go (i + 1)) &lt;|&gt; pure i\n</code></pre>\n\n<p>This is like the <a href=\"https://hackage.haskell.org/package/parsec-3.1.11/docs/Text-Parsec.html#v:many\" rel=\"nofollow noreferrer\"><code>many</code></a> function, but instead of returning <code>[a]</code>, it\nreturns the number of times <code>Parser a</code> succeeds.</p>\n\n<p>This works, but I can't seem to make it run in constant heap space. This makes\nsense, since the recursive call to <code>go</code> is not in the tail-call position.</p>\n\n<p>If parsec would export the constructor to <a href=\"https://hackage.haskell.org/package/parsec-3.1.11/docs/src/Text.Parsec.Prim.html#ParsecT\" rel=\"nofollow noreferrer\"><code>ParsecT</code></a>, it would be possible to\nrewrite <code>manyLength</code> in CPS'ed form. This is very similar to the <a href=\"https://hackage.haskell.org/package/parsec-3.1.11/docs/src/Text.Parsec.Prim.html#manyAccum\" rel=\"nofollow noreferrer\"><code>manyAccum</code></a>\nfunction:</p>\n\n<pre><code>manyLengthCPS :: forall s u m a. ParsecT s u m a -&gt; ParsecT s u m Int\nmanyLengthCPS p = ParsecT f\n  where\n    f\n      :: forall b.\n         State s u\n      -&gt; (Int -&gt; State s u -&gt; ParseError -&gt; m b) -- consumed ok\n      -&gt; (ParseError -&gt; m b)                     -- consumed err\n      -&gt; (Int -&gt; State s u -&gt; ParseError -&gt; m b) -- empty ok\n      -&gt; (ParseError -&gt; m b)                     -- empty err\n      -&gt; m b\n    f s cok cerr eok _ =\n      let walk :: Int -&gt; a -&gt; State s u -&gt; ParseError -&gt; m b\n          walk !i _ s' _ =\n            unParser p s'\n              (walk $ i + 1)            -- consumed-ok\n              cerr                      -- consumed-err\n              manyLengthCPSErr          -- empty-ok\n              (\\e -&gt; cok (i + 1) s' e)  -- empty-err\n      in unParser p s (walk 0) cerr manyLengthCPSErr (\\e -&gt; eok 0 s e)\n    {-# INLINE f #-}\n\nmanyLengthCPSErr :: Monad m =&gt; m a\nmanyLengthCPSErr =\n  fail \"manyLengthCPS can't be used on parser that accepts empty input\"\n</code></pre>\n\n<p>This <code>manyLengthCPS</code> function <em>does</em> run in constant heap space.</p>\n\n<p>Here is the <code>ParsecT</code> constructor just for completeness:</p>\n\n<pre><code>newtype ParsecT s u m a = ParsecT\n  { unParser\n      :: forall b .\n         State s u\n      -&gt; (a -&gt; State s u -&gt; ParseError -&gt; m b) -- consumed ok\n      -&gt; (ParseError -&gt; m b)                   -- consumed err\n      -&gt; (a -&gt; State s u -&gt; ParseError -&gt; m b) -- empty ok\n      -&gt; (ParseError -&gt; m b)                   -- empty err\n      -&gt; m b\n  }\n</code></pre>\n\n<p>I also tried to turn <code>manyLengthCPS</code> directly into a non-CPS'ed function using\nthe low-level <a href=\"https://hackage.haskell.org/package/parsec-3.1.11/docs/Text-Parsec-Prim.html#v:mkPT\" rel=\"nofollow noreferrer\"><code>mkPT</code></a> function:</p>\n\n<pre><code>manyLengthLowLevel\n  :: forall s u m a.\n     Monad m\n  =&gt; ParsecT s u m a -&gt; ParsecT s u m Int\nmanyLengthLowLevel p = mkPT f\n  where\n    f :: State s u -&gt; m (Consumed (m (Reply s u Int)))\n    f parseState = do\n      consumed &lt;- runParsecT p parseState\n      case consumed of\n        Empty mReply -&gt; do\n          reply &lt;- mReply\n          case reply of\n            Ok _ _ _ -&gt; manyLengthErr\n            Error parseErr -&gt; pure . Empty . pure $ Ok 0 parseState parseErr\n        Consumed mReply -&gt; do\n          reply &lt;- mReply\n          case reply of\n            Ok a newState parseErr -&gt; walk 0 a newState parseErr\n            Error parseErr -&gt; pure . Consumed . pure $ Error parseErr\n      where\n        walk\n          :: Int\n          -&gt; a\n          -&gt; State s u\n          -&gt; ParseError\n          -&gt; m (Consumed (m (Reply s u Int)))\n        walk !i _ parseState' _ = do\n          consumed &lt;- runParsecT p parseState'\n          case consumed of\n            Empty mReply -&gt; do\n              reply &lt;- mReply\n              case reply of\n                Ok _ _ _ -&gt; manyLengthErr\n                Error parseErr -&gt;\n                  pure . Consumed . pure $ Ok (i + 1) parseState' parseErr\n            Consumed mReply -&gt; do\n              reply &lt;- mReply\n              case reply of\n                Ok a newState parseErr -&gt; walk (i + 1) a newState parseErr\n                Error parseErr -&gt; pure . Consumed . pure $ Error parseErr\n\nmanyLengthErr :: Monad m =&gt; m a\nmanyLengthErr =\n  fail \"manyLengthLowLevel can't be used on parser that accepts empty input\"\n</code></pre>\n\n<p>Just like <code>manyLength</code>, <code>manyLengthLowLevel</code> doesn't run in constant heap space.</p>\n\n<hr>\n\n<p>Is it possible to write <code>manyLength</code> so it runs in constant heap space even\nwithout writing it in CPS-style? If not, why not? Is there some fundamental\nreason that it is possible in CPS-style but not in non-CPS-style?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1490787811, "post_id": 43091885, "comment_id": 73266155, "body": "On integers, <code>lub</code> is <code>Data.Unamb.unamb</code>, whose precise semantics escapes me."}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 2, "creation_date": 1490798553, "post_id": 43091885, "comment_id": 73274840, "body": "This looks like a bug in <code>unamb</code>. It may be overusing <code>mask_</code>, so that infinite computations are not being killed (I could reproduce this with a finite list containing infinite loops)."}], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 1, "last_activity_date": 1490818214, "creation_date": 1490818214, "answer_id": 43103210, "question_id": 43091885, "link": "https://stackoverflow.com/questions/43091885/least-upper-bound-of-an-infinite-chain-of-values-in-a-flat-domain/43103210#43103210", "title": "least upper bound of an infinite chain of values in a flat domain", "body": "<p>After taking a closer look it is indeed a bug in unamb. <a href=\"https://github.com/conal/unamb/pull/1\" rel=\"nofollow noreferrer\">Here is a PR to fix it</a>.</p>\n"}], "owner": {"reputation": 56, "user_id": 456625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8718c93e9149c0cb537d7a0d5c1095?s=128&d=identicon&r=PG", "display_name": "stefk0", "link": "https://stackoverflow.com/users/456625/stefk0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490818214, "creation_date": 1490785857, "last_edit_date": 1490799570, "question_id": 43091885, "link": "https://stackoverflow.com/questions/43091885/least-upper-bound-of-an-infinite-chain-of-values-in-a-flat-domain", "title": "least upper bound of an infinite chain of values in a flat domain", "body": "<p>Suppose we have an infinite list of the form </p>\n\n<pre><code>let l = [undefined,undefined] ++ [1,1..]\n</code></pre>\n\n<p>The key property here is that the list forms a chain in the flat domain Integer. Is there a way in haskell to find the least upper bound of the list l? My naive approach was the following:</p>\n\n<pre><code>Prelude&gt; import Data.Lub\nPrelude Data.Lub&gt; foldr (\\x y -&gt; x `lub` y) undefined l\n1\n</code></pre>\n\n<p>The problem is that a ghc process continues to use 100% of one of my CPU cores. I am using ghc version 7.10.3.</p>\n"}, {"tags": ["parsing", "haskell", "monads"], "comments": [{"owner": {"reputation": 139, "user_id": 6053118, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y9Y01.jpg?s=128&g=1", "display_name": "Quentin Liu", "link": "https://stackoverflow.com/users/6053118/quentin-liu"}, "edited": false, "score": 0, "creation_date": 1490788376, "post_id": 43091795, "comment_id": 73266545, "body": "is it like the functions defined here are actually the functions in different syntax of the paper &quot;How to replace failure by a list of success&quot;? I was reading that paper and realized the great similarity between the two."}], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 3, "last_activity_date": 1490786479, "creation_date": 1490786479, "answer_id": 43092087, "question_id": 43091795, "link": "https://stackoverflow.com/questions/43091795/examples-in-the-paper-monadic-parse-in-haskell/43092087#43092087", "title": "examples in the paper Monadic Parse in Haskell", "body": "<p>In <code>chainl1</code> you replaced a recursive call to <code>rest</code> by <code>return</code>.</p>\n\n<pre><code>rest a = do f &lt;- q\n            b &lt;- p\n            rest (f a b)\n         +++ return a\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6053118, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y9Y01.jpg?s=128&g=1", "display_name": "Quentin Liu", "link": "https://stackoverflow.com/users/6053118/quentin-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 43092087, "answer_count": 1, "score": 2, "last_activity_date": 1490786479, "creation_date": 1490785618, "question_id": 43091795, "link": "https://stackoverflow.com/questions/43091795/examples-in-the-paper-monadic-parse-in-haskell", "title": "examples in the paper Monadic Parse in Haskell", "body": "<p>In the paper <a href=\"http://www.cs.nott.ac.uk/~pszgmh/pearl.pdf\" rel=\"nofollow noreferrer\">Monadic Parse in Haskell</a>, the author gives an example about parsing string of simple arithmetics. I tried to expand the <code>term</code>, applied it to <code>\"1 + 2\"</code>, but I'm still confused about the recursive nature of the parsers. That is, the <code>term</code> would be expanded into the following form if I did it correct</p>\n\n<pre><code>expr = ((digit +++ do {symb \"(\"; n &lt;- expr; symb \")\"; return n}) \n           `chianl1` mulop) `chainl1` addop\n</code></pre>\n\n<p>But after first parsing the digit <code>\"1\"</code> in the string <code>\"1 + 2\"</code> by <code>digit</code> and the <code>\"+\"</code> by <code>addop</code>, why could the parser <code>expr</code> continue to parse following <code>\"2\"</code>?</p>\n\n<p>Moreover, when I applied <code>term</code> to <code>\"1 - 2 * 3 + 4\"</code>, which is the example given in the paper, I got <code>[(-5,\"+ 4\")]</code> instead of <code>[(-1, \"\")]</code>. Is it the the problem with my code? Yet I have checked my code against that in the paper and found no deviation. </p>\n\n<p>Below is my code</p>\n\n<pre><code>module Parser where \n\nimport Prelude hiding (filter)\nimport Data.Char (isDigit, isSpace, toUpper, ord)\n\nnewtype Parser a = Parser {\nrunParser :: (String -&gt; [(a, String)])\n}\n\ninstance Monad Parser where \n    return a = Parser $ \\s -&gt; [(a, s)]\n    p &gt;&gt;= f = Parser $ \\s -&gt;\n        concat [runParser (f a) s' | (a, s') &lt;- runParser p s]\n\ninstance Applicative Parser where \n    pure a = Parser $ \\s -&gt; [(a, s)] \n    k &lt;*&gt; m = Parser $ \\s -&gt; \n         [(f a, s'') |\n           (f, s') &lt;- runParser k s,\n           (a, s'') &lt;- runParser m s']\n\ninstance Functor Parser where \n   fmap f p = Parser $ \\s -&gt; \n            [(f a, s')  | (a, s') &lt;- runParser p s]\n\napplyP :: Parser a -&gt; String -&gt; [(a, String)]\napplyP p s = runParser p s\n\nemptyP :: Parser a\nemptyP = Parser $ \\s -&gt; [] \n\nappendP :: Parser a-&gt; Parser a-&gt; Parser a \nappendP p q = Parser $ \\s -&gt; \n   let xs = runParser p s \n       ys = runParser q s \n    in xs ++ ys\n\n(+++) :: Parser a -&gt; Parser a -&gt; Parser a\np +++ q = Parser $ \\s -&gt; \n        case (runParser (p `appendP` q) s) of \n        []     -&gt; []\n        (x:xs) -&gt; return x\n\nitem :: Parser Char \nitem = Parser $ \\cs -&gt; \n        case cs of \n            []     -&gt; [] \n            (c:cs) -&gt; [(c, cs)]         \n\n-- since the function tiem is of type \"Parser Char\"\n-- it can only produce char as a result of computation\nfilterP :: (Char -&gt; Bool) -&gt; Parser Char\nfilterP f = item &gt;&gt;= \\c -&gt; if f c \n          then return c \n          else emptyP \n\n-- returns ak result if the prefix char matches\nchar :: Char -&gt; Parser Char \nchar c = filterP (\\x -&gt; x == c)\n\n-- parses a specific string \nstring :: String -&gt; Parser String\nstring [] = return \"\"  -- why it will be an empty list if \"emptyP\" is used? \nstring (x:xs) = do c &lt;- char x\n                   cs &lt;- string xs \n                   return (c:cs)\n\nmany :: Parser a -&gt; Parser [a]\nmany p = many1 p +++  (return []) \n\nmany1 :: Parser a -&gt; Parser [a]\nmany1 p = do c &lt;- p \n             cs &lt;- many p \n         return (c:cs)\n\nsepby :: Parser a -&gt; Parser b -&gt; Parser [a] \nsepby p sep = sepby1 p sep +++ (return [])\n\nsepby1 :: Parser a -&gt; Parser b -&gt; Parser [a] \nsepby1 p sep = do c &lt;- p \n                  cs &lt;- many (sep &gt;&gt; p)\n               return (c:cs)\n\nchainl :: Parser a -&gt; Parser (a -&gt; a -&gt; a) -&gt; a -&gt; Parser a \nchainl p q a = (p `chainl1` q) +++ return a \n\nchainl1 :: Parser a -&gt; Parser (a -&gt; a -&gt; a) -&gt; Parser a \np `chainl1` q = do {a &lt;- p; rest a} \n            where rest a = (do  f &lt;- q\n                                b &lt;- p\n                            return (f a b))\n                           +++ return a \n\nspace :: Parser String \nspace = many (filterP isSpace)  \n\n-- parse a given value, throw away trailing space\ntoken :: Parser a -&gt; Parser a \ntoken p = do {a &lt;- p; space; return a} \n\n-- parses a given token, throws away trailing space\nsymb :: String -&gt; Parser String \nsymb s = token (string s)\n\n-- throw away any prefix space, apply parser \napply :: Parser a -&gt; String -&gt; [(a, String)]\napply p = runParser (do {space; p})\n\naddop :: Parser (Int -&gt; Int -&gt; Int) \naddop = do {symb \"+\"; return (+)} +++ do {symb \"-\"; return (-)}\n\nmulop :: Parser (Int -&gt; Int -&gt; Int)\nmulop = do {symb \"*\"; return (*)} +++ do {symb \"/\"; return (div)}\n\ndigit = do {x &lt;- token (filterP isDigit); return (ord x - ord '0')}\nfactor = digit +++ do {symb \"(\"; n &lt;- expr; symb \")\"; return n}\nterm = factor `chainl1` mulop\nexpr = term `chainl1` addop\n</code></pre>\n\n<p>Thanks a lot!! </p>\n"}, {"tags": ["haskell", "authorization", "yesod"], "answers": [{"tags": [], "owner": {"reputation": 3185, "user_id": 241899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/56dfa400a964081e78a0be24978e7cdf?s=128&d=identicon&r=PG", "display_name": "Vitaly Olegovitch", "link": "https://stackoverflow.com/users/241899/vitaly-olegovitch"}, "is_accepted": true, "score": 6, "last_activity_date": 1490781050, "creation_date": 1490781050, "answer_id": 43090074, "question_id": 43090033, "link": "https://stackoverflow.com/questions/43090033/yesod-non-exhaustive-patterns-in-function-isauthorized/43090074#43090074", "title": "Yesod: Non-exhaustive patterns in function isAuthorized", "body": "<p>It is necessary to modify the Foundation.hs file, adding the new route to authorizations:</p>\n\n<pre><code>-- Routes not requiring authentication.\nisAuthorized (AuthR _) _ = return Authorized\nisAuthorized CommentR _ = return Authorized\nisAuthorized HomeR _ = return Authorized\nisAuthorized FaviconR _ = return Authorized\nisAuthorized RobotsR _ = return Authorized\nisAuthorized (StaticR _) _ = return Authorized\nisAuthorized TestR _ = return Authorized\n\nisAuthorized ProfileR _ = isAuthenticated\n</code></pre>\n"}], "owner": {"reputation": 3185, "user_id": 241899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/56dfa400a964081e78a0be24978e7cdf?s=128&d=identicon&r=PG", "display_name": "Vitaly Olegovitch", "link": "https://stackoverflow.com/users/241899/vitaly-olegovitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 43090074, "answer_count": 1, "score": 3, "last_activity_date": 1490781050, "creation_date": 1490780929, "question_id": 43090033, "link": "https://stackoverflow.com/questions/43090033/yesod-non-exhaustive-patterns-in-function-isauthorized", "title": "Yesod: Non-exhaustive patterns in function isAuthorized", "body": "<p>In a Yesod scaffolding project, I have added a new route and a new handler.</p>\n\n<p>My error is the following:</p>\n\n<pre><code>29/Mar/2017:11:25:22 +0200 [Error#yesod-core] Foundation.hs:(137,5)-(144,45): Non-exhaustive patterns in function isAuthorized\n @(yesod-core-1.4.32-6HthMZNCl0sEMRz6GJ4QO1:Yesod.Core.Class.Yesod ./Yesod/Core/Class/Yesod.hs:693:5)\n29/Mar/2017:11:25:22 +0200 [Debug#SQL] SELECT `ident`,`password` FROM `user` WHERE `id`=? ; [PersistInt64 1]\n</code></pre>\n\n<p>How can I solve it?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1490787922, "post_id": 43084327, "comment_id": 73266227, "body": "I don&#39;t think you can make a rule fire conditionally to the existence of an instance, because as the page you linked to indicates, rules apply after dictionaries are expanded, and then become simple syntactic checks."}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1490787954, "post_id": 43084327, "comment_id": 73266247, "body": "Can you explain what you are trying to do?"}, {"owner": {"reputation": 20310, "user_id": 525980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8dafe66793ee2f32192e9fcefb389a12?s=128&d=identicon&r=PG", "display_name": "Clinton", "link": "https://stackoverflow.com/users/525980/clinton"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1490788082, "post_id": 43084327, "comment_id": 73266341, "body": "Show variables for debugging purposes (ie in &#39;error&#39; calls) without requiring a show constraint."}], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 0, "last_activity_date": 1490790343, "creation_date": 1490790343, "answer_id": 43093469, "question_id": 43084327, "link": "https://stackoverflow.com/questions/43084327/fire-rewrite-rule-on-class-constraint/43093469#43093469", "title": "Fire rewrite rule on class constraint", "body": "<p>The requirements are still unclear to me, but I can't think of other solutions than the following two, e.g., to debug a library of polymorphic functions by tracing trace values of parametric types, but adding a <code>Show</code> constraint would break code downstream.</p>\n\n<hr>\n\n<p>Use rewrite rules on monomorphic types. I assume that for debugging purposes, you need only a few types. However this may be rather unreliable, and you might need to specialise/inline functions explicitly.</p>\n\n<hr>\n\n<p>Perhaps you can get by with another type class with a blanket overlappable instance.</p>\n\n<pre><code>class MaybeShow a where\n  maybeShow :: a -&gt; Maybe String\n\ninstance {-# OVERLAPPABLE #-} MaybeShow a where\n  maybeShow _ = Nothing\n</code></pre>\n\n<p>You then specialize it selectively to the few types you are using to debug.</p>\n\n<pre><code>instance MaybeShow Int where\n  maybeShow n = Just (show n)\n</code></pre>\n\n<p>However you still need to add a <code>MaybeShow</code> constraint to every function that uses it.</p>\n\n<p>Here you can often use <code>PartialTypeSignatures</code> to write more concise toplevel signatures</p>\n\n<pre><code>myFun :: _ =&gt; a -&gt; w a\nconstrainedFun :: (_, RealConstraint a) =&gt; a -&gt; b a\n</code></pre>\n\n<p>This method however has the advantage of having much more predictable behavior.</p>\n"}], "owner": {"reputation": 20310, "user_id": 525980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8dafe66793ee2f32192e9fcefb389a12?s=128&d=identicon&r=PG", "display_name": "Clinton", "link": "https://stackoverflow.com/users/525980/clinton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490790343, "creation_date": 1490761576, "last_edit_date": 1490764066, "question_id": 43084327, "link": "https://stackoverflow.com/questions/43084327/fire-rewrite-rule-on-class-constraint", "title": "Fire rewrite rule on class constraint", "body": "<p>I'm trying to write a <code>maybeShow</code> function which is <code>show</code> but without a <code>Show</code> class constraint. Here's my attempt:</p>\n\n<pre><code>{-# INLINE [1] maybeShow #-}\nmaybeShow :: a -&gt; Maybe String\nmaybeShow _ = Nothing\n\ncanShow :: Show a =&gt; a -&gt; Maybe String\ncanShow = Just . show\n\ndata CantShow = CantShow\n\nmain = do\n  print (maybeShow (42 :: Int))\n  print (maybeShow CantShow)\n\n{-# RULES\n\"maybeShow\" forall (x :: (Show a =&gt; a)). maybeShow x = canShow x\n#-}\n</code></pre>\n\n<p>But in this code, the rewrite rule never seems to fire.</p>\n\n<p>I know this will sometimes return <code>Nothing</code> for showable types. For example, I entirely expect uses of <code>maybeShow</code> in non-inlined functions which are not specialised to a particular type to return <code>Nothing</code>. But as I'm using <code>maybeShow</code> as something to add to the output of <code>error</code>, it doesn't really matter if it doesn't always work.</p>\n\n<p>But I'd like it to sometimes work (for example, when it's been inlined into the calling function) rather than never as seems to be currently the case.</p>\n\n<p>Any ideas on how to get the rewrite rule to fire? This on <a href=\"https://wiki.haskell.org/GHC/Using_rules#Rules_and_sections\" rel=\"nofollow noreferrer\">wiki.haskell.org</a> suggests it can be done, but the advice dates back to GHC 6.6 so I'm not sure it's still valid.</p>\n"}, {"tags": ["haskell", "io"], "comments": [{"owner": {"reputation": 81794, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "edited": false, "score": 2, "creation_date": 1490747814, "post_id": 43081598, "comment_id": 73247429, "body": "try using <code>show :: Show a =&gt; a -&gt; String</code> to convert from <code>[(Code, Name, Price)]</code> to <code>String</code> and <code>read :: Read a =&gt; String -&gt; a</code> to convert from <code>String</code> to <code>[(Code, Name, Price)]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1490772782, "creation_date": 1490772782, "answer_id": 43087160, "question_id": 43081598, "link": "https://stackoverflow.com/questions/43081598/how-to-convert-an-io-string-to-a-algebraic-type-of-data-products-of-a-txt-file/43087160#43087160", "title": "How to convert an IO String to a algebraic Type of data &quot;Products&quot; of a txt file?", "body": "<p>You probably need to <em>return</em> the input data from <code>adicionaProd</code>. So, its type must become</p>\n\n<pre><code>type Products   = [(Code, Name, Price)]\nadicionaProd :: IO Products\n</code></pre>\n\n<p>Then, you adjust the code itself</p>\n\n<pre><code> adicionaProd = do\n    putStr \"Product's Code:\"\n    cod&lt;-getLine\n    putStr \"Product's Name:\"\n    nom&lt;-getLine\n    putStr \"Product's Price:\"\n    pre&lt;-getLine\n    let prod :: (Code, Name, Price)\n        prod = (read cod, nom, read pre)\n    putStr \"Do you want to add some other product?\"\n    resp &lt;- getLine\n    if resp == \"y\" then do\n       rest &lt;- adicionaProd \n       return (prod : rest)\n    else \n       return [prod]\n</code></pre>\n\n<p>The idea is: if the response is \"yes\", then you recursively ask for a list of products, and bind it to <code>rest</code>. Then, you return a list comprising your product and following with the rest. If the response is \"no\", you return a list containing the first product, only.</p>\n"}], "owner": {"reputation": 67, "user_id": 5831174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-9ZPl9P7x9y8/AAAAAAAAAAI/AAAAAAAAAGg/Xfw4TrmdWAw/photo.jpg?sz=128", "display_name": "Mar Oli", "link": "https://stackoverflow.com/users/5831174/mar-oli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490772782, "creation_date": 1490743219, "last_edit_date": 1490758544, "question_id": 43081598, "link": "https://stackoverflow.com/questions/43081598/how-to-convert-an-io-string-to-a-algebraic-type-of-data-products-of-a-txt-file", "title": "How to convert an IO String to a algebraic Type of data &quot;Products&quot; of a txt file?", "body": "<p>I have to ask the user to enter the code, the name, and the price of a product in Products.txt.</p>\n\n<pre><code>produtoPath::FilePath\nprodutoPath = \"Products.txt\"\n\n adicionaProd::IO()\n adicionaProd = do\n    putStr \"Product's Code:\"\n    cod&lt;-getLine\n    putStr \"Product's Name:\"\n    nom&lt;-getLine\n    putStr \"Product's Price:\"\n    pre&lt;-getLine\n--  appendFile produtoPath\n    putStr \"Do you want to add some other product?\"\n    resp &lt;- getLine\n    if ((resp == \"y\")) then adicionaProd else return()\n</code></pre>\n\n<p>So, after the products have been added, I have to create another function that will read the contents of Products.txt, and return Products ... type Products = [(Code, Name, Price)], and I do not know how to do this ...\nI've tried, but I could not.</p>\n\n<pre><code> generateList:: [[String]]-&gt; Produtos\n generateList [] = []\n --generateList [[cod,nom,pre]:[]] = [(read:cod)::]\n</code></pre>\n\n<p>After that, I have to load the products with the function loadProducts ... That reads the files of the previous function, and returns the type IO Products, in order that the user can visualize what is in the file in the format of the type Products .</p>\n\n<pre><code>loadTable:: IO Produtos\nloadTable = do\n         s&lt;-readFile produtoPath\n    --   return generateList (map words)\n</code></pre>\n\n<p>In summary: I do not know the way I should be saving the data in the \"addProd\" function, to read the file and generate Products cpm the generateList function, and load them to the user with the loadTable function.Can you help me?\nComplete code of what I did: <a href=\"https://ideone.com/Al9ZLf\" rel=\"nofollow noreferrer\">https://ideone.com/Al9ZLf</a></p>\n"}, {"tags": ["haskell", "database-migration", "yesod"], "answers": [{"comments": [{"owner": {"reputation": 3185, "user_id": 241899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/56dfa400a964081e78a0be24978e7cdf?s=128&d=identicon&r=PG", "display_name": "Vitaly Olegovitch", "link": "https://stackoverflow.com/users/241899/vitaly-olegovitch"}, "edited": false, "score": 0, "creation_date": 1490772548, "post_id": 43087010, "comment_id": 73256085, "body": "Thank you! Solved it using: <code>alter table user modify column password varchar(255) default &#39; &#39;;</code>"}], "tags": [], "owner": {"reputation": 4676, "user_id": 4206, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd40128e044f39d7063b5cfdeace80f6?s=128&d=identicon&r=PG", "display_name": "Luca Molteni", "link": "https://stackoverflow.com/users/4206/luca-molteni"}, "is_accepted": false, "score": 2, "last_activity_date": 1490772312, "creation_date": 1490772312, "answer_id": 43087010, "question_id": 43080647, "link": "https://stackoverflow.com/questions/43080647/yesod-database-migration-loop/43087010#43087010", "title": "Yesod database migration loop", "body": "<p>It seems like <a href=\"https://github.com/yesodweb/persistent/issues/563\" rel=\"nofollow noreferrer\">this bug</a> related to migration and default values. </p>\n\n<p>You can try <a href=\"https://gistpages.com/posts/blob_text_column_can_t_have_a_default_value_create_table_from_mysql\" rel=\"nofollow noreferrer\">this workaround</a> to change the behaviour of MySQL In default values or maybe try changing the type of the column from <code>text</code> to <code>varchar</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 69847, "user_id": 3853934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GtQuz.jpg?s=128&g=1", "display_name": "Micha\u0142 Per\u0142akowski", "link": "https://stackoverflow.com/users/3853934/micha%c5%82-per%c5%82akowski"}, "is_accepted": true, "score": 2, "last_activity_date": 1492002457, "last_edit_date": 1492002457, "creation_date": 1491745393, "answer_id": 43307390, "question_id": 43080647, "link": "https://stackoverflow.com/questions/43080647/yesod-database-migration-loop/43307390#43307390", "title": "Yesod database migration loop", "body": "<p>Adding <code>default=NULL</code> to each <code>Text Maybe</code> column fixes this problem. In some MySQL versions you also need to change the column type by adding <code>sqltype=varchar(255)</code>. In your case the model should look like this:</p>\n\n<pre><code>User\n    ident Text\n    password Text Maybe sqltype=varchar(255) default=NULL\n    UniqueUser ident\n    deriving Typeable\nEmail\n    email Text\n    userId UserId Maybe\n    verkey Text Maybe sqltype=varchar(255) default=NULL\n    UniqueEmail email\nComment json -- Adding \"json\" causes ToJSON and FromJSON instances to be derived.\n    message Text\n    userId UserId Maybe\n    deriving Eq\n    deriving Show\n\n -- By default this file is used in Model.hs (which is imported by Foundation.hs)\n</code></pre>\n"}], "owner": {"reputation": 3185, "user_id": 241899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/56dfa400a964081e78a0be24978e7cdf?s=128&d=identicon&r=PG", "display_name": "Vitaly Olegovitch", "link": "https://stackoverflow.com/users/241899/vitaly-olegovitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 43307390, "answer_count": 2, "score": 4, "last_activity_date": 1492002457, "creation_date": 1490738136, "last_edit_date": 1490771980, "question_id": 43080647, "link": "https://stackoverflow.com/questions/43080647/yesod-database-migration-loop", "title": "Yesod database migration loop", "body": "<p>I am running Yesod and accessing a MySQL database.</p>\n\n<p>My model is:</p>\n\n<pre><code>User\n    ident Text\n    password Text Maybe\n    UniqueUser ident\n    deriving Typeable\nEmail\n    email Text\n    userId UserId Maybe\n    verkey Text Maybe\n    UniqueEmail email\nComment json -- Adding \"json\" causes ToJSON and FromJSON instances to be derived.\n    message Text\n    userId UserId Maybe\n    deriving Eq\n    deriving Show\n\n -- By default this file is used in Model.hs (which is imported by Foundation.hs)\n</code></pre>\n\n<p>When I run the Yesod application, it repeats the following:</p>\n\n<pre><code>Starting devel application\nMigrating: ALTER TABLE `user` ALTER COLUMN `password` DROP DEFAULT\n28/Mar/2017:23:46:44 +0200 [Debug#SQL] ALTER TABLE `user` ALTER COLUMN `password` DROP DEFAULT; []\ndevel.hs: ConnectionError {errFunction = \"query\", errNumber = 1101, errMessage = \"BLOB/TEXT column 'password' can't have a default value\"}\nUnexpected: child process exited with ExitFailure 1\nTrying again\nStarting devel application\nMigrating: ALTER TABLE `user` ALTER COLUMN `password` DROP DEFAULT\n28/Mar/2017:23:46:46 +0200 [Debug#SQL] ALTER TABLE `user` ALTER COLUMN `password` DROP DEFAULT; []\ndevel.hs: ConnectionError {errFunction = \"query\", errNumber = 1101, errMessage = \"BLOB/TEXT column 'password' can't have a default value\"}\nUnexpected: child process exited with ExitFailure 1\nTrying again\n</code></pre>\n\n<p>It goes in a never ending loop.</p>\n\n<p>A workaround is commenting the following line from <code>Application.hs</code> which means disabling database migration:</p>\n\n<pre><code>runLoggingT (runSqlPool (runMigration migrateAll) pool) logFunc\n</code></pre>\n\n<p>But if I use the workaround, I get another error:</p>\n\n<pre><code>28/Mar/2017:23:56:28 +0200 [Error#yesod-core] Foundation.hs:(137,5)-(144,45): Non-exhaustive patterns in function isAuthorized\n @(yesod-core-1.4.32-6HthMZNCl0sEMRz6GJ4QO1:Yesod.Core.Class.Yesod ./Yesod/Core/Class/Yesod.hs:693:5)\n28/Mar/2017:23:56:28 +0200 [Debug#SQL] SELECT `ident`,`password` FROM `user` WHERE `id`=? ; [PersistInt64 1]\nGET /test\n  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\n  Status: 500 Internal Server Error 0.006514s\n</code></pre>\n"}, {"tags": ["haskell", "cabal"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1490730362, "post_id": 43078070, "comment_id": 73240399, "body": "That says it was installed into a sandbox. Are you compiling with cabal in that sandbox?"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490734481, "creation_date": 1490734481, "answer_id": 43079763, "question_id": 43078070, "link": "https://stackoverflow.com/questions/43078070/module-can-not-be-imported-after-installing-via-cabal/43079763#43079763", "title": "Module can not be imported after installing via cabal", "body": "<p>Because you are installing the primes package to a sandbox, you will need to run the compiler with awareness of the sandbox. <code>cabal</code> offers the <code>exec</code> command for this, so e.g.</p>\n\n<pre><code>echo import Data.Numbers.Primes &gt;foo.hs\ncabal exec ghci foo.hs\n</code></pre>\n\n<p>from within the sandbox should work.</p>\n"}], "owner": {"reputation": 670, "user_id": 7781818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f5392f913a0f47fab3e6719bda4b08?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7781818/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43079763, "answer_count": 1, "score": 0, "last_activity_date": 1490757002, "creation_date": 1490728503, "last_edit_date": 1495540450, "question_id": 43078070, "link": "https://stackoverflow.com/questions/43078070/module-can-not-be-imported-after-installing-via-cabal", "title": "Module can not be imported after installing via cabal", "body": "<p>I tried using the primes module in Haskell and after running </p>\n\n<pre><code>$ cabal install primes \n\nResolving dependencies...\nNotice: installing into a sandbox located at /home/christoph/.cabal-sandbox\nDownloading primes-0.2.1.0...\nConfiguring primes-0.2.1.0...\nBuilding primes-0.2.1.0...\nInstalled primes-0.2.1.0\n</code></pre>\n\n<p>I tried making a file with </p>\n\n<pre><code>import Data.Numbers.Primes\n</code></pre>\n\n<p>at the top, but every attempt to load it failed with the error message:</p>\n\n<pre><code>Could not find module \u2018Data.Numbers.Primes\u2019\nUse -v to see a list of the files searched for.\n</code></pre>\n\n<p>The question: what am I missing here? there must be something wrong with this way of using it right? </p>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/36424064/haskell-where-is-data-numbers-primes-library\">Haskell: where is Data.Numbers.Primes library?</a> I also tried:</p>\n\n<pre><code>import Data.Primes\nimport primes\nimport Primes\n</code></pre>\n\n<p>but none of them worked.</p>\n\n<p>Thank you in advance, any help is most welcome</p>\n"}, {"tags": ["haskell", "asynchronous", "concurrency"], "answers": [{"comments": [{"owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "edited": false, "score": 0, "creation_date": 1490730092, "post_id": 43078406, "comment_id": 73240274, "body": "I&#39;m using async 2.1.1."}, {"owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "edited": false, "score": 1, "creation_date": 1490730155, "post_id": 43078406, "comment_id": 73240301, "body": "Yes, adding a delay at the end does fix it."}, {"owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "reply_to_user": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "edited": false, "score": 0, "creation_date": 1490730490, "post_id": 43078406, "comment_id": 73240471, "body": "Then it is probably a bug. Documentation says nothing, but I think <code>forConcurrently</code> in <code>2.1.1</code> should wait for all children to actually exit. IMO you should at report it."}], "tags": [], "owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "is_accepted": false, "score": 2, "last_activity_date": 1490733196, "last_edit_date": 1490733196, "creation_date": 1490729773, "answer_id": 43078406, "question_id": 43077803, "link": "https://stackoverflow.com/questions/43077803/how-can-a-haskell-async-reliably-run-a-cleanup-action-after-an-interrupt/43078406#43078406", "title": "How can a Haskell Async reliably run a cleanup action after an interrupt?", "body": "<p>What version of <code>async</code> are you using? The behavior of <code>cancel</code> changed in <code>2.1.1</code> to wait for the thread to actually exit. In earlier versions it just throws an asynchronous exceptions and exits. In your case, all threads received an exception, but not all had a chance to handle it (print the upper char) because <code>main</code> already exited. Try to add e.g. <code>delay 10</code> after <code>cancel</code>. If you are using <code>2.1.1</code>, then it may (or may not) indicate a bug in <code>async</code>.</p>\n\n<p>ADDED: It indeed looks like a bug: <a href=\"https://github.com/simonmar/async/issues/59#issuecomment-289894612\" rel=\"nofollow noreferrer\">https://github.com/simonmar/async/issues/59#issuecomment-289894612</a></p>\n"}], "owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490733196, "creation_date": 1490727653, "last_edit_date": 1490727956, "question_id": 43077803, "link": "https://stackoverflow.com/questions/43077803/how-can-a-haskell-async-reliably-run-a-cleanup-action-after-an-interrupt", "title": "How can a Haskell Async reliably run a cleanup action after an interrupt?", "body": "<p>For the sake of discussion, here's a brief example. It spawns an <a href=\"https://hackage.haskell.org/package/async-2.1.1/docs/Control-Concurrent-Async.html#t:Async\" rel=\"nofollow noreferrer\"><code>Async</code></a> with 26 concurrent child <code>Async</code>s.</p>\n\n<pre><code>import Control.Concurrent (threadDelay)\nimport Control.Concurrent.Async (async, cancel, forConcurrently_)\nimport Control.Exception (finally)\nimport Data.Char (toUpper)\nimport Prelude ((*), (*&gt;), ($))\nimport System.IO (IO, hPutStr, stderr)\n\nmain :: IO ()\nmain = do\n    a &lt;- async $ forConcurrently_ ['a'..'z'] $ \\c -&gt;\n        (print c *&gt; delay 2) `finally` print (toUpper c)\n    delay 1\n    cancel a\n  where\n    delay sec = threadDelay (sec * 1000000)\n    print c = hPutStr stderr [c]\n</code></pre>\n\n<p>Each child</p>\n\n<ol>\n<li>Prints a letter (indicating that the process has begun)</li>\n<li>Pauses</li>\n<li>Using <code>finally</code>, should always end by printing the capital version of that letter (representing the \"cleanup\" action).</li>\n</ol>\n\n<p>We then pause long enough for all of the <code>Async</code>s to start but not long enough for any of them to complete, and then call <code>cancel</code> on the parent, thus throwing an exception to each of the <code>Async</code>s.</p>\n\n<p>I expected each <code>finally</code> action to run, producing the output</p>\n\n<pre><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\n</code></pre>\n\n<p>but instead I get</p>\n\n<pre><code>abcdefghijklmnopqrstuvwxyzABC\n</code></pre>\n\n<p>How can I reason about what's going on in this example, and what's the correct way to get the sort of reliable cleanup behavior I'm looking for?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1490727746, "post_id": 43077658, "comment_id": 73238912, "body": "You are looking for the <code>map</code> function."}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 1, "creation_date": 1490736059, "post_id": 43077658, "comment_id": 73243521, "body": "This isn&#39;t an answer, but I want to point out that it is impossible to make a type that starts with a lowercase letter. Type names that start with a lowercase letter are reserved for type variables."}], "answers": [{"tags": [], "owner": {"reputation": 1218, "user_id": 6042307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6ebc7609bac3a4ddf6c7920c2c083a?s=128&d=identicon&r=PG", "display_name": "gabesoft", "link": "https://stackoverflow.com/users/6042307/gabesoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1490727749, "creation_date": 1490727749, "answer_id": 43077835, "question_id": 43077658, "link": "https://stackoverflow.com/questions/43077658/operations-with-a-list-made-up-of-custom-types/43077835#43077835", "title": "Operations with a list made up of custom types", "body": "<p>Create a function <code>process</code> that does the calculation for a single pair</p>\n\n<pre><code>process (a, b) = (10-(sqrt(a^2+b^2)))\n</code></pre>\n\n<p>then map that function over your list of tuples</p>\n\n<pre><code>fmap process [(1,2),(3,4),(45,55)]\n</code></pre>\n\n<p>which will yield</p>\n\n<pre><code>[7.76393202250021,5.0,-61.06335201775947]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7781760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e4954e6a176d260314c622e450068?s=128&d=identicon&r=PG&f=1", "display_name": "trakk", "link": "https://stackoverflow.com/users/7781760/trakk"}, "edited": false, "score": 0, "creation_date": 1490729384, "post_id": 43077842, "comment_id": 73239879, "body": "This definitely works, but is there any way to integrate mapping into the already existing function somehow? So when I have the file loaded, I can just use something like <code>value [(2.4,6.1)(6.3,1.2)]</code> for example, and get the proper list somehow?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 3, "user_id": 7781760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e4954e6a176d260314c622e450068?s=128&d=identicon&r=PG&f=1", "display_name": "trakk", "link": "https://stackoverflow.com/users/7781760/trakk"}, "edited": false, "score": 0, "creation_date": 1490730809, "post_id": 43077842, "comment_id": 73240655, "body": "added inner function version"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 1, "last_activity_date": 1490730761, "last_edit_date": 1490730761, "creation_date": 1490727774, "answer_id": 43077842, "question_id": 43077658, "link": "https://stackoverflow.com/questions/43077658/operations-with-a-list-made-up-of-custom-types/43077842#43077842", "title": "Operations with a list made up of custom types", "body": "<p>you may want to learn the building blocks as well.  For example you can write your function for a pair and then <code>map</code> it to a list of pairs.</p>\n\n<pre><code>f (a,b) = 10 - sqrt(a^2 + b^2)\n\n&gt; map f [(3,4),(5,12)]\n[5.0,-3.0]\n</code></pre>\n\n<p>or defined within the context of your function</p>\n\n<pre><code>value = map f\n   where f (a,b) = 10 - sqrt(a^2 + b^2)\n</code></pre>\n\n<p>where GHC can infer the type</p>\n\n<pre><code>&gt; :t value\nvalue :: Floating b =&gt; [(b, b)] -&gt; [b]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7781760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e4954e6a176d260314c622e450068?s=128&d=identicon&r=PG&f=1", "display_name": "trakk", "link": "https://stackoverflow.com/users/7781760/trakk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43077842, "answer_count": 2, "score": 0, "last_activity_date": 1490730761, "creation_date": 1490727206, "question_id": 43077658, "link": "https://stackoverflow.com/questions/43077658/operations-with-a-list-made-up-of-custom-types", "title": "Operations with a list made up of custom types", "body": "<p>I'm pretty new to Haskell, and I'm struggling with something specific. Namely, having a list that contains a series of custom types. So far, this is where I'm at:</p>\n\n<pre><code>type shots = [(Float,Float)]\n\nvalue :: shots -&gt; [Float]\nvalue [(a,b)] = [(10-(sqrt(a^2+b^2)))]\n</code></pre>\n\n<p>Now, this seems to be working, but only for one pair of float values. What I'm trying to do here is, put in a series of float pairs, calculate with the equation, then return the result in a list of floats. I understand why it doesn't take any more in its current form (because of <code>a</code> and <code>b</code>), but no matter how I try to work it into a head-tail loop, it ceases to function. Tried using <code>fst</code> and <code>snd</code> as well, with no success.</p>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 2, "creation_date": 1490733887, "post_id": 43077652, "comment_id": 73242435, "body": "This is because of things like <code>Any :: Temp</code>."}, {"owner": {"reputation": 9504, "user_id": 470844, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8354544a22bb5a0ac8005ca008f94ad1?s=128&d=identicon&r=PG", "display_name": "ntc2", "link": "https://stackoverflow.com/users/470844/ntc2"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490736155, "post_id": 43077652, "comment_id": 73243579, "body": "@Alec, thanks, I didn&#39;t know about <code>Any</code>. I updated the question with an example of what I think you&#39;re getting at."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1490736461, "post_id": 43077652, "comment_id": 73243739, "body": "Your comment about constraints is spot on. I encourage you to check out <code>singletons</code>. It also uses constraints to sidestep this sort of problem. Also, that is exactly the answer you were given below. :)"}], "answers": [{"comments": [{"owner": {"reputation": 9504, "user_id": 470844, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8354544a22bb5a0ac8005ca008f94ad1?s=128&d=identicon&r=PG", "display_name": "ntc2", "link": "https://stackoverflow.com/users/470844/ntc2"}, "edited": false, "score": 1, "creation_date": 1490736299, "post_id": 43078092, "comment_id": 73243652, "body": "I updated the question to make it clear that I don&#39;t care how the solution is implemented. My code was just an example of what didn&#39;t work; using <code>eqT</code> is not required. So, you are suggesting I put a <code>IsTemp t</code> constraint on all <code>t :: Temp</code> that I want to case on? That might be workable ..."}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "reply_to_user": {"reputation": 9504, "user_id": 470844, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8354544a22bb5a0ac8005ca008f94ad1?s=128&d=identicon&r=PG", "display_name": "ntc2", "link": "https://stackoverflow.com/users/470844/ntc2"}, "edited": false, "score": 0, "creation_date": 1490753455, "post_id": 43078092, "comment_id": 73248887, "body": "Indeed, type classes are the standard way of making values depend on types."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 2, "last_activity_date": 1490728572, "creation_date": 1490728572, "answer_id": 43078092, "question_id": 43077652, "link": "https://stackoverflow.com/questions/43077652/how-to-safely-case-on-kind-constrained-type-variable-in-haskell/43078092#43078092", "title": "How to safely case on kind-constrained type variable in Haskell?", "body": "<p>There isn't a direct way, because when <code>eqT</code> returns <code>Nothing</code> it doesn't come with a disequality proof.</p>\n\n<p>How about using a type class?</p>\n\n<pre><code>class IsTemp (b :: Temp) where\n  caseTemp :: CaseTemp b\n</code></pre>\n"}], "owner": {"reputation": 9504, "user_id": 470844, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8354544a22bb5a0ac8005ca008f94ad1?s=128&d=identicon&r=PG", "display_name": "ntc2", "link": "https://stackoverflow.com/users/470844/ntc2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490736113, "creation_date": 1490727179, "last_edit_date": 1490736113, "question_id": 43077652, "link": "https://stackoverflow.com/questions/43077652/how-to-safely-case-on-kind-constrained-type-variable-in-haskell", "title": "How to safely case on kind-constrained type variable in Haskell?", "body": "<h1>Question</h1>\n\n<p>I want to case on a type variable that is restricted to finitely many possibilities due to a kind constraint. And I want to know statically that casing will always discover one of these finitely many possibilities. I can't figure out how to write this case without an unreachable catch-all.</p>\n\n<p>As a concrete example, suppose I have a data kind</p>\n\n<pre><code>data{-kind-} Temp = Hot | Cold\n</code></pre>\n\n<p>Then my goal is write a function like <code>caseTemp</code> below that determines the <code>Temp</code> a given <code>Temp</code>-kinded type. Something like</p>\n\n<pre><code>data CaseTemp (t :: Temp) where\n  IsHot :: CaseTemp 'Hot\n  IsCold :: CaseTemp 'Cold\n\ncaseTemp :: forall (t :: Temp). CaseTemp t\ncaseTemp = ???\n</code></pre>\n\n<p>I'm OK with having some extra constraints on <code>caseTemp</code>, like the <code>Typeable t</code> in my failed attempt below. Or even with an entirely different approach.</p>\n\n<h1>Failed Solution Attempt</h1>\n\n<p>Here is my best attempt, but it includes a branch that I think should be unreachable, and that would allow <code>caseTemp</code> to break silently if I added another constructor to <code>Temp</code> (tested in GHC 8.0.2):</p>\n\n<pre><code>{-# OPTIONS_GHC -Wall #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE StandaloneDeriving #-}\nmodule SOQuestion where\n\nimport Data.Typeable ( (:~:)(..), Typeable, eqT )\n\ndata{-kind-} Temp = Hot | Cold\n\ndata CaseTemp (t :: Temp) where\n  IsHot :: CaseTemp 'Hot\n  IsCold :: CaseTemp 'Cold\nderiving instance Show (CaseTemp t)\n\ncaseTemp :: forall (t :: Temp). Typeable t =&gt; CaseTemp t\ncaseTemp =\n  case eqT :: Maybe (t :~: 'Hot) of\n    Just Refl -&gt; IsHot\n    Nothing -&gt; case eqT :: Maybe (t :~: 'Cold) of\n                 -- (GHC says this \"pattern match is redundant\" ???\n                 -- Sounds like a bug!)\n                 Just Refl -&gt; IsCold\n                 -- MY QUESTION: is there a way to eliminate the\n                 -- unreachable branch here?\n                 Nothing -&gt; error \"Unreachable!\"\n</code></pre>\n\n<p>The problem with this attempt is that GHC believes the <code>Nothing -&gt; error \"Unreachable!\"</code> branch is reachable.</p>\n\n<h1>Updates</h1>\n\n<p>User @Alec mentions that <code>Any :: Temp</code> is a fundamental reason that it's impossible to do what I want, since e.g.</p>\n\n<pre><code>import GHC.Prim ( Any )\n[...]\nbadCase :: CaseTemp Any\nbadCase = undefined :: CaseTemp Any\n</code></pre>\n\n<p>is accepted by GHC. However, <code>Any</code> is not <code>Typeable</code>, so it's not clear to me that putting constraints on <code>caseTemp</code> couldn't work around this.</p>\n"}, {"tags": ["haskell", "multidimensional-array", "functional-programming"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1490724148, "post_id": 43076731, "comment_id": 73236756, "body": "In general, the <a href=\"https://hackage.haskell.org/package/array-0.5.1.1\" rel=\"nofollow noreferrer\"><code>array</code></a> package is what you want. As a beginner, just stick to nested lists."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1490725170, "post_id": 43076731, "comment_id": 73237379, "body": "Welcome to StackOverflow. This is a worthwhile question, but we generally expect that some own effort to solve the problem is shown."}], "answers": [{"tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": false, "score": 4, "last_activity_date": 1506552854, "last_edit_date": 1506552854, "creation_date": 1490725493, "answer_id": 43077180, "question_id": 43076731, "link": "https://stackoverflow.com/questions/43076731/how-do-i-create-an-2-d-array-in-haskell/43077180#43077180", "title": "How do I create an 2-D array in Haskell?", "body": "<p>Rather than <em>creating a new board the same size but with different content</em>, it may be helpful to think of this operation as <em>replacing the content of an existing board</em>. Of course, because Haskell is an immutable language, it amounts to the same thing - the only way to change something is to produce a new version of it - but it should help you to see that this is fundamentally a <em>mapping</em> operation.</p>\n\n<pre><code>replaceWithA :: [[a]] -&gt; [[Char]]\nreplaceWithA xss = map (map (const 'a')) xss\n-- or, point-free:\nreplaceWithA = map (map (const 'a'))\n-- or, as a list comprehension:\nreplaceValues xss = [['a' | x &lt;- xs] | xs &lt;- xss]\n</code></pre>\n\n<hr>\n\n<p>If you wanna go deep you can get the compiler to write this code for you. The <code>Functor</code> type class generalises <code>map</code> to structures that aren't simple lists:</p>\n\n<pre><code>class Functor f where\n    fmap :: (a -&gt; b) -&gt; f a -&gt; f b\n</code></pre>\n\n<p>In what sense does this generalise <code>map</code>? If you replace <code>f</code> with <code>[]</code> you can see that <code>fmap</code> has the same signature as <code>map</code>:</p>\n\n<pre><code>fmap :: (a -&gt; b) -&gt; [a] -&gt; [b]\n</code></pre>\n\n<p>Indeed, this is how <code>[]</code>'s <code>Functor</code> instance is implemented:</p>\n\n<pre><code>instance Functor [] where\n    fmap = map\n</code></pre>\n\n<p>Anyway, GHC knows how to write <code>Functor</code> instances all by itself. I'm going to define a <code>newtype</code> wrapper for 2D lists and utter the magic words <em><code>deriving Functor</code>!</em></p>\n\n<pre><code>{-# LANGUAGE DeriveFunctor #-}\nimport Data.Functor\n\nnewtype TwoDimensional a = TwoDimensional { getTwoDimensional :: [[a]] } deriving Functor\n</code></pre>\n\n<p>The generated <code>fmap</code> will have the following signature:</p>\n\n<pre><code>fmap :: (a -&gt; b) -&gt; TwoDimensional a -&gt; TwoDimensional b\n</code></pre>\n\n<p>Now you can use a standard bit of machinery for replacing elements with a fixed value:</p>\n\n<pre><code>replaceWithA :: TwoDimensional a -&gt; TwoDimensional Char\nreplaceWithA = ('a' &lt;$)\n</code></pre>\n\n<p>As you gain experience with Haskell and its standard abstractions like <code>Functor</code> you'll get better at spotting when a given operation is an instance of a more general pattern. Setting up your types carefully allows you to delegate lots of boilerplate to the compiler, allowing you to tersely and declaratively solve the interesting part of your problem.</p>\n"}], "owner": {"reputation": 47, "user_id": 7712218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211022010460333/picture?type=large", "display_name": "Annie Hua", "link": "https://stackoverflow.com/users/7712218/annie-hua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1506552854, "creation_date": 1490723976, "question_id": 43076731, "link": "https://stackoverflow.com/questions/43076731/how-do-i-create-an-2-d-array-in-haskell", "title": "How do I create an 2-D array in Haskell?", "body": "<p>I'm trying to learn Haskell by creating a board game. I currently have a game that is [[Char]] and I'm trying to create another board of the same columns and rows filled with the character \"a\". How do I go about doing so? Also can you explain how storing a value and accessing would work?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490717532, "post_id": 43074338, "comment_id": 73232851, "body": "I think you could use something like a functional dependency in your hospital class. But right now I don&#39;t have time to write a full answer"}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1490719096, "post_id": 43074338, "comment_id": 73233868, "body": "Why does <code>Hospital</code> need to be a class?"}, {"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1490719635, "post_id": 43074338, "comment_id": 73234198, "body": "@BenjaminHodgson I need the functions within to be able take multiple data types.. <code>Injury a</code>, <code>Complication a</code>, etc..."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 3, "creation_date": 1490719952, "post_id": 43074338, "comment_id": 73234375, "body": "I think you&#39;ve overcomplicated your design. I don&#39;t think you need all those type parameters, or the <code>Hospital</code> class. Keep it simple. What&#39;s wrong with something like <code>data Patient = Patient { name :: String, injuries :: [Injury], complications :: [Complication] }</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1490717363, "creation_date": 1490717363, "answer_id": 43074613, "question_id": 43074338, "link": "https://stackoverflow.com/questions/43074338/lifting-into-data-constructor-using-record-syntax/43074613#43074613", "title": "Lifting into data constructor using record syntax?", "body": "<p>You could solve this with multi-parameter type classes, which would allow you to place constraints on both the type of the <code>Person</code> and the type of the <code>Injury</code>:</p>\n\n<pre><code>{-# LANGUAGE MultiParamTypeClasses #-}\n{-# LANGUAGE FlexibleInstances #-}\n\nclass Hospital i p where\n    admit :: Person p -&gt; i -&gt; Person p\n\ninstance Hospital (Injury a) a where\n    admit person inj = liftInjury person inj\n</code></pre>\n\n<p>Adding the type parameter of <code>Person</code> to the class definition lets you place constraints on it within the <code>instance</code> declaration, which allows you to make sure the type parameter of the <code>Person</code> and the <code>Injury</code> are the same.</p>\n\n<p>A simpler option would be to change <code>Hospital</code> to take the type parameter of the injury instead of the injury type itself:</p>\n\n<pre><code>class Hospital a where\n    admit :: Person a -&gt; Injury a -&gt; Person a\n</code></pre>\n\n<p>...but I imagine the rest of your system precludes that option.</p>\n"}], "owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 43074613, "answer_count": 1, "score": 0, "last_activity_date": 1490717363, "creation_date": 1490716513, "question_id": 43074338, "link": "https://stackoverflow.com/questions/43074338/lifting-into-data-constructor-using-record-syntax", "title": "Lifting into data constructor using record syntax?", "body": "<p>I have the following type:</p>\n\n<pre><code>data Person a = {name :: String, age :: Int, injury :: Injury a}\n\ndata Injury a = Physical a | Mental a\n</code></pre>\n\n<p>I'm trying to create a function that lifts an injury into a instance of a person:</p>\n\n<pre><code>liftInjury :: Person a -&gt; Injury a -&gt; Person a\nliftInjury person inj = person {injury = int}\n\nclass Hospital i where\n  admit :: Person a  -&gt; i -&gt; Person a\n\ninstance Hospital (Injury a) where\n  admin person inj = liftInjury person inj -- ERROR\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>Couldn't match type \u2018a\u2019 with \u2018a1\u2019\n  \u2018a\u2019 is a rigid type variable bound by\n    the instance declaration\n</code></pre>\n\n<p>Is this being caused because the compiler doesn't know that <code>a</code> denied in <code>liftInjury</code> is the same as the <code>a</code> in <code>instance Hospital (Injury a) ...</code> ?</p>\n\n<p>What's the best solution for this? </p>\n"}, {"tags": ["list", "haskell", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "edited": false, "score": 0, "creation_date": 1490709968, "post_id": 43071297, "comment_id": 73226983, "body": "Thank you for answer! But I have a little problem...I was receiving the message &quot;Not in scope: <code>result</code>&#39;&quot;, so I put the last line inside <code>else do</code> but now appears this message &quot;The last statement in a &#39;do&#39; block must be an expression       result &lt;- main &quot;"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "edited": false, "score": 1, "creation_date": 1490711018, "post_id": 43071297, "comment_id": 73227867, "body": "Yeah, right after I hit &quot;submit&quot; I realized there was at least one problem, so I took a moment to actually run the code to fix it up."}, {"owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "edited": false, "score": 0, "creation_date": 1490714179, "post_id": 43071297, "comment_id": 73230379, "body": "I have a doubt, exists any way to convert the <code>IO [Integer]</code> to <code>Integer</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "edited": false, "score": 1, "creation_date": 1490715053, "post_id": 43071297, "comment_id": 73231032, "body": "There is a way, but you almost certainly don&#39;t want to use it. Take <code>length</code> as an example. Instead of extracting the list from the <code>IO</code> value to pass to <code>length</code>, use <code>fmap</code> to create a function that works in the <code>IO</code> monad. <code>fmap length :: IO [Integer] -&gt; IO Int</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "edited": false, "score": 1, "creation_date": 1490717757, "post_id": 43071297, "comment_id": 73233001, "body": "@Marcio Converting <code>IO  [Integer]</code> to <code>[Integer]</code> means to convert a program which can ask the user for a list of integers, into a program which does not ask the user producing the same list. It is impossible without completely breaking the type system. The good news is that that conversion is practically never needed, thanks to the functor/applicative/monad stuff. Use <code>fmap</code> or use <code>do ... ; x &lt;- myIOInt ; ....</code> to run the IO action and get the integer list."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 7, "last_activity_date": 1490708717, "creation_date": 1490708717, "answer_id": 43071297, "question_id": 43071045, "link": "https://stackoverflow.com/questions/43071045/how-can-i-concatenate-user-input-in-a-list/43071297#43071297", "title": "How can I concatenate user input in a list", "body": "<p>First of all, your type signature is wrong. <code>insertCode</code> uses the <code>IO</code> monad, so the type must be <code>IO [Integer]</code>. You are also missing the conversion of <code>code</code> from a <code>String</code> to an <code>Integer</code> (I use <code>readLn</code> to accomplish that; you were trying to convert <code>code</code> into a <em>function</em>, not an <code>Integer</code>) and you are missing a <code>getLine</code> to get the Y/N response from the user.</p>\n\n<p>Once that is fixed, you might write something like the following:</p>\n\n<pre><code>insertCode :: IO [Integer]\ninsertCode = do\n    putStrLn \"Code:\"\n    code &lt;- readLn\n    putStrLn \"Another? (Y/N)\"\n    response &lt;- getLine\n    result &lt;- if (response == \"Y\" || response == \"y\")\n              then insertCode\n              else return []\n    return (code : result)\n</code></pre>\n\n<p>This is a little verbose, but tries to be explicit about how the monad is used. Whether the user enters Y or N, <code>code</code> must be appended to a list extracted from a monad: either a list extracted from a recursive use of <code>insertCode</code>, or an explicit empty list.</p>\n"}], "owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 43071297, "answer_count": 1, "score": 2, "last_activity_date": 1490708717, "creation_date": 1490707977, "question_id": 43071045, "link": "https://stackoverflow.com/questions/43071045/how-can-i-concatenate-user-input-in-a-list", "title": "How can I concatenate user input in a list", "body": "<p>I would like to get codes from the user and insert it in a list, but the problem is when the user say that don't wanna insert more codes. I don't saved a list with the numbers because I'm using recursion to call the method again, so when I should return the list I don't have it.</p>\n\n<pre><code>insertCode :: [Integer]\ninsertCode = do\n    putStrLn \"Code:\"\n    code &lt;- getLine\n    putStrLn \"Another? (Y/N)\"\n    if(resp == \"Y\" || resp == \"y\") then (read code::String-&gt;Integer):insertCode else --I don't know\n</code></pre>\n\n<p>I'm sorry for my stupids questions, I imagine that is obvious but I have a problem with functional programming</p>\n"}, {"tags": ["list", "haskell", "count", "tail-recursion"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490696212, "post_id": 43066658, "comment_id": 73217100, "body": "You better use <i>guards</i> than <code>if-then-else</code>."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1490703533, "post_id": 43067041, "comment_id": 73221992, "body": "Just a side note, since <code>if-then-else</code> is an expression, you can use it to specify the correct argument without using a guard: <code>amountCard n k (x:xs) = amountCard (if k == x then n + 1 else n) k xs</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1490703706, "post_id": 43067041, "comment_id": 73222121, "body": "@chepner: that is indeed a nice argument. I updated the answer with your node. Thanks."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1490703687, "last_edit_date": 1495542329, "creation_date": 1490696694, "answer_id": 43067041, "question_id": 43066658, "link": "https://stackoverflow.com/questions/43066658/haskell-count-elements-in-a-list-tail-recursion/43067041#43067041", "title": "Haskell count elements in a list tail recursion", "body": "<p>Well this <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\"><em>Wikipedia</em> article</a> says:</p>\n\n<blockquote>\n  <p>[A] tail call is a <strong>subroutine call</strong> performed as the <strong>final action\n  of a procedure</strong>. If a tail call might lead to the <strong>same subroutine</strong>\n  being called again later in the call chain, the subroutine is said to\n  be <strong>tail-recursive</strong>, which is a special case of recursion. Tail\n  recursion (or tail-end recursion) is particularly useful, and often\n  easy to handle in implementations.</p>\n</blockquote>\n\n<p>(formatting added)</p>\n\n<p>Now if you use an <code>if</code>-<code>then</code>-<code>else</code> and nothing after that, you know that the body of the <code>then</code> and <code>else</code> clause will be the <strong>last things the \"procedure\" will do</strong>. Since in the body of these <code>then</code> and <code>else</code> clauses are simple <em>calls</em> (there is <strong>no \"post processing\"</strong> like <code>1 + (amountCard n k xs)</code>), <strong>yes</strong> this is indeed tail-recursion.</p>\n\n<p>I would however say that it is more elegant to use <em>guards</em> than an <code>if</code>-<code>then</code>-<code>else</code> structure:</p>\n\n<pre><code>amountCard n c [] = n\namountCard n k (x:xs) <b>|</b> k == x <b>=</b> amountCard (n+1) k xs\n                      <b>| otherwise =</b> amountCard n k xs</code></pre>\n\n<p>Furthermore in Haskell usually the <em>wildcard pattern</em> is used if a variable is of no importance, like:</p>\n\n<pre><code>amountCard n <b>_</b> [] = n\namountCard n k (x:xs) | k == x = amountCard (n+1) k xs\n                      | otherwise = amountCard n k xs</code></pre>\n\n<p>Furthermore as is noted by <a href=\"https://stackoverflow.com/questions/43066658/haskell-count-elements-in-a-list-tail-recursion/43067041?noredirect=1#comment73221992_43067041\">@chepner</a>, you can easily convert your code to:</p>\n\n<pre><code>amountCard n c [] = n\namountCard n k (x:xs) = amountCard <b>(if k == x then n + 1 else n)</b> k xs</code></pre>\n\n<p>And now it obviously is <em>tail recursive</em>, since the body of the second clause contains only one call to the same function (with different arguments).</p>\n"}], "owner": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1076, "favorite_count": 0, "accepted_answer_id": 43067041, "answer_count": 1, "score": 1, "last_activity_date": 1490703687, "creation_date": 1490695728, "last_edit_date": 1490703374, "question_id": 43066658, "link": "https://stackoverflow.com/questions/43066658/haskell-count-elements-in-a-list-tail-recursion", "title": "Haskell count elements in a list tail recursion", "body": "<p>I have to get the amount of a <code>Card</code> in a list of cards through tail recursion. I was given the following code:</p>\n\n<pre><code>amountCard :: Int -&gt; Card -&gt; [Card] -&gt; Int\n</code></pre>\n\n<p>My attempt so far:</p>\n\n<pre><code>amountCard n c [] = n\namountCard n k (x:xs) = if k == x then amountCard (n+1) k xs else amountCard n k xs\n</code></pre>\n\n<p>Did I use tail recursion here?</p>\n"}, {"tags": ["haskell", "typeclass"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1490706251, "post_id": 43065872, "comment_id": 73223996, "body": "Maybe they simply forgot. There are already instances for the standard classes, except <code>Enum</code>. (I wonder if all those instances are actually useful in practice, though.)"}], "answers": [{"comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1490719781, "post_id": 43070761, "comment_id": 73234287, "body": "If that is indeed the argument then why does <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Monoid.html#t:Alt\" rel=\"nofollow noreferrer\"><code>Alt</code></a> have an <code>Enum</code> instance?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1490760594, "post_id": 43070761, "comment_id": 73250901, "body": "You write that &quot;<code>Enum</code> is a rather low-level, specific, set-ish class&quot;. I think you praise it too highly. <code>Enum</code> is a <i>completely broken</i> class."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 2, "last_activity_date": 1490707272, "creation_date": 1490707272, "answer_id": 43070761, "question_id": 43065872, "link": "https://stackoverflow.com/questions/43065872/why-isnt-there-an-enum-instance-for-sum-and-product/43070761#43070761", "title": "Why isn&#39;t there an Enum instance for Sum and Product?", "body": "<p>Wouldn't it make sense to provide these instances? Not really a lot. The purpose of those newtypes is that you can use a concrete number type in a function that wants to deal with a generic <code>Monoid</code> instance. The idea is, you wrap the arguments in the newtype constructor, apply the <code>Monoid</code>-polymorphic function (which doesn't know it's merely dealing with wrapped numbers), and immediately unwrap the result again. You don't do anything else with <code>Sum</code>, <code>Product</code>, <code>Any</code> etc. values, thus you also should't need an <code>Enum</code> instance.</p>\n\n<p>The only reason you <em>could</em> need it is if a function had the constraint <code>(Monoid a, Enum a) =&gt; ...</code>. But that's an unlikely combination \u00ad\u2013 <code>Monoid</code> is a general, high-level, \u201calgebraic\u201d class, whereas <code>Enum</code> is a rather low-level, specific, set-ish class. If you require <code>Enum</code> it means you'll deal more or less just with a range of <code>Int</code>s, and will ascribe your own meaning to \u201czero element\u201d and \u201celement combination\u201d, so why would you also require <code>Monoid</code>?</p>\n\n<p>But should you ever find yourself in that situation, you can just locally define a newtype and give it precisely the instances you need. At some point this ad-hoc approach is more efficient than preemptively defining standard instances for <em>every conceivable combination</em> of constraints to types, which in most cases nobody will ever need.</p>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1490724644, "post_id": 43074405, "comment_id": 73237063, "body": "The main reason against it is YAGNI, and build times. If everything new is always cross-instantiated with everything else, we get a quadratic increase in the number of instances. And while I agree that it can make sense to pre-emptively add instances for important types that actually turn up in module interfaces, this does not apply for <code>Sum</code> etc. because these are pure \u201clocal dictionary proxy\u201d types. Instead of defining orphan instances, people can (and should!) just define their own newtypes for the rare circumstances when the standard ones with their existing instances don&#39;t do the trick."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490730077, "post_id": 43074405, "comment_id": 73240269, "body": "&quot;because these are pure \u201clocal dictionary proxy\u201d types&quot; I disagree that there&#39;s really a meaningful distinction between newtype wrapper types like <code>Product</code> and other more &quot;respectable&quot; types for which you might define a <code>Monoid</code> instance say"}], "tags": [], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "is_accepted": false, "score": 1, "last_activity_date": 1490716677, "creation_date": 1490716677, "answer_id": 43074405, "question_id": 43065872, "link": "https://stackoverflow.com/questions/43065872/why-isnt-there-an-enum-instance-for-sum-and-product/43074405#43074405", "title": "Why isn&#39;t there an Enum instance for Sum and Product?", "body": "<p>I agree with @chi that somebody just forgot. I can't think of a good reason it shouldn't be there, which is reason enough (people are likely defining orphan instances in their application code, which leads to sadness).</p>\n"}], "owner": {"reputation": 15620, "user_id": 596361, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b7219254970581e53d3b2b162f7f50f8?s=128&d=identicon&r=PG", "display_name": "Mirzhan Irkegulov", "link": "https://stackoverflow.com/users/596361/mirzhan-irkegulov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1490716677, "creation_date": 1490693649, "question_id": 43065872, "link": "https://stackoverflow.com/questions/43065872/why-isnt-there-an-enum-instance-for-sum-and-product", "title": "Why isn&#39;t there an Enum instance for Sum and Product?", "body": "<p>If you import <a href=\"https://hackage.haskell.org/package/base/docs/Data-Monoid.html\" rel=\"nofollow noreferrer\"><code>Data.Monoid</code></a>, you'll find that <a href=\"https://hackage.haskell.org/package/base/docs/Data-Monoid.html#t:Sum\" rel=\"nofollow noreferrer\"><code>Sum</code></a>, <a href=\"https://hackage.haskell.org/package/base/docs/Data-Monoid.html#t:Product\" rel=\"nofollow noreferrer\"><code>Product</code></a>, <a href=\"https://hackage.haskell.org/package/base/docs/Data-Monoid.html#t:All\" rel=\"nofollow noreferrer\"><code>All</code></a>, <a href=\"https://hackage.haskell.org/package/base/docs/Data-Monoid.html#t:Any\" rel=\"nofollow noreferrer\"><code>Any</code></a> don't have <code>Enum</code> instances, even though <code>Bool</code> and instances of <code>Integral</code> do. Wouldn't it make sense to provide an instance, say, <code>Enum a =&gt; Enum (Sum a)</code>? Is there any theoretical reason for not doing that? I would also appreciate links that go deep into theory behind this.</p>\n"}, {"tags": ["haskell", "monads", "elm", "monad-transformers"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1490693524, "post_id": 43065473, "comment_id": 73215178, "body": "Monad transformers are kind of a pain when you mix the same type of transformer. I typically use monad typeclasses, but those fail when the type appears multiple times. A solution for that is newtyping the particular contexts you need."}, {"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1490704834, "post_id": 43065473, "comment_id": 73222961, "body": "I don&#39;t really need to have the same monad multiple times. The code snippet that I included is one case of <code>generateConstraints</code>, which returns <code>Result String (State Int (Type, List Constraint))</code>. Recursion works fine, but there is something different with the constraint generation for let bindings that messes up the monads."}, {"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1490771287, "post_id": 43065473, "comment_id": 73255271, "body": "I still don&#39;t know how to combine having state and possibly being erroneous, but the particular example I gave miraculously solved itself because I was able to move all exceptional results out of it."}], "answers": [{"comments": [{"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 1, "creation_date": 1490784900, "post_id": 43091024, "comment_id": 73264152, "body": "You were a bit too slow; I already solved the issue myself. Would EitherT State work in my case? At least the way I wrote it, it only works the other way round."}, {"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 0, "creation_date": 1490785098, "post_id": 43091024, "comment_id": 73264308, "body": "<code>join</code> comes for free because it is pretty much the same as <code>&gt;&gt;=</code>, right? Also, in my andThen there is the very ugly <code>Err e -&gt; State.state &lt;| Err e</code>. I think at least in Elm it has to be done that way because <code>Err e -&gt; x</code> does not typecheck."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 1, "creation_date": 1490785289, "post_id": 43091024, "comment_id": 73264440, "body": "@Joonazan I saw your comment, but figured I might answer anyway. I think it would work in your case; the order of those transformers shouldn&#39;t matter. And yes, <code>join</code> is simply <code>join x = x &gt;&gt;= id</code>. The &quot;ugliness&quot; of your implementation comes mostly from the fact that you have to unwrap both layers at the same time, while transformers can split it up and allow composition later."}, {"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 0, "creation_date": 1490790141, "post_id": 43091024, "comment_id": 73267800, "body": "Can you elaborate? My interpretation is that if I have a Result State, then the value of the Result can not depend on State. Yet it has to, because to implement type inference for <code>let</code>, I have to extend the environment with the type of the declared value before inferring the body of the let."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 1, "creation_date": 1490791830, "post_id": 43091024, "comment_id": 73269029, "body": "@Joonazan when you have a <code>ResultT State</code> or <code>StateT Result</code>, you can effectively write in <i>both</i> at the same time. The core idea is that you only produce the value once, the only difference is how you access the context functions (<code>lift</code>, <code>liftIO</code>, mtl typeclasses...)"}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 3, "last_activity_date": 1490784232, "last_edit_date": 1490784232, "creation_date": 1490783432, "answer_id": 43091024, "question_id": 43065473, "link": "https://stackoverflow.com/questions/43065473/how-do-i-combine-result-and-state-in-elm/43091024#43091024", "title": "How do I combine Result and State in Elm?", "body": "<blockquote>\n  <p>Can someone who is familiar with Haskell monad transformers explain how they solve this kind of problem or suggest an alternative solution?</p>\n</blockquote>\n\n<p>Well, I can at least try. This is how your type looks directly translated to Haskell:</p>\n\n<pre><code>type EffM a s x = Either a (State s x)\n</code></pre>\n\n<p>A rather obvious observation is that it's not a monad transformer.<sup>2</sup> That's how a transformer would look like:</p>\n\n<pre><code>type TransM a s x = EitherT a (State s) x\n</code></pre>\n\n<p>As you can see, the only change is the <code>T</code> and the fact that <code>x</code> is outside the parens. The latter part is essential in understanding the transformer approach. </p>\n\n<p>The core idea is that the <code>State</code> is a part of the result production regardless of whether the <code>Either</code> results in \"success\" or \"fail\", whereas in your case producing \"fail\" means the state operation is never touched. I'd need to think harder what that means in practice, but intuitively the transformer approach is what you're gonna have in mind when working with typical, imperative code.</p>\n\n<p>Now, when you use such a transformer, <code>join</code> is actually provided for free, as a consequence of fitting into the Monad interface.</p>\n\n<pre><code>import Control.Monad.State\nimport Control.Monad.Trans.Either\nimport Control.Monad\n\ntype Eff e s a = EitherT e (State s) a\n\n-- type the following in REPL\n\n\u03bb :t join\njoin :: Monad m =&gt; m (m a) -&gt; m a\n\n\u03bb :t join :: Eff e s (Eff e s a) -&gt; Eff e s a\njoin :: Eff e s (Eff e s a) -&gt; Eff e s a\n     :: Eff e s (Eff e s a) -&gt; Eff e s a\n\n-- the slightly cryptic output above means that it typechecks correctly\n</code></pre>\n\n<p>So this is how Haskell<sup>1</sup> solves it. Now, it's obviously possible to write a specialized <code>EitherState</code> type this way (altough I'd personally flip those two in all of the examples to <code>StateEither</code> - feels more natural), mirroring what the implementation of <code>join</code> for respective transformers would do. I don't know if writing <code>EitherT</code> specifically is possible in Elm.</p>\n\n<hr>\n\n<p><sup>1</sup> One possible approach. There are other, recursion schemes/Free probably being the one to watch in the upcoming years. The inherent ordering of effects stacking turns out to be more problematic than it initially seems.</p>\n\n<p><sup>2</sup> It's also not a <code>Monad</code>, at least in the sense that the <code>x</code> can't be the direct type in the Monad instance (because <code>Either</code> can obviously act as one in the specialized case).</p>\n"}, {"tags": [], "owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "is_accepted": true, "score": 2, "last_activity_date": 1490784717, "creation_date": 1490784717, "answer_id": 43091464, "question_id": 43065473, "link": "https://stackoverflow.com/questions/43065473/how-do-i-combine-result-and-state-in-elm/43091464#43091464", "title": "How do I combine Result and State in Elm?", "body": "<p>I ended up writing a monad that is both. I had to sacrifice the ability to fail before State is touched, because I need to be able to fail after.</p>\n\n<pre><code>type alias Infer a = State Int (Result String a)\n\ninfer : a -&gt; Infer a\ninfer x =\n  State.state (Ok x)\n\nmap : (a -&gt; value) -&gt; Infer a -&gt; Infer value\nmap f x =\n  State.map (Result.map f) x\n\nandThen : (a -&gt; Infer b) -&gt; Infer a -&gt; Infer b\nandThen f x =\n  State.andThen\n    (\\r -&gt; case r of\n      Ok v -&gt; f v\n      Err e -&gt; State.state &lt;| Err e\n    )\n    x\n\nandMap : Infer y -&gt; Infer (y -&gt; z) -&gt; Infer z\nandMap y =\n  andThen (\\g -&gt; map g y)\n\nmap2 : (a -&gt; b -&gt; c) -&gt; Infer a -&gt; Infer b -&gt; Infer c\nmap2 f x y =\n  map f x\n  |&gt; andMap y\n\nmap3 : (a -&gt; b -&gt; c -&gt; d) -&gt; Infer a -&gt; Infer b -&gt; Infer c -&gt; Infer d\nmap3 f a b c =\n  map2 f a b\n  |&gt; andMap c\n\nmap4 : (a -&gt; b -&gt; c -&gt; d -&gt; e) -&gt; Infer a -&gt; Infer b -&gt; Infer c -&gt; Infer d -&gt; Infer e\nmap4 f a b c d =\n  map3 f a b c\n  |&gt; andMap d\n</code></pre>\n"}], "owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 2, "accepted_answer_id": 43091464, "answer_count": 2, "score": 6, "last_activity_date": 1490784717, "creation_date": 1490692596, "question_id": 43065473, "link": "https://stackoverflow.com/questions/43065473/how-do-i-combine-result-and-state-in-elm", "title": "How do I combine Result and State in Elm?", "body": "<p>I am struggling with Elm's lack of monads. A library implementing the state monad for Elm (<a href=\"http://package.elm-lang.org/packages/folkertdev/elm-state/latest/State\" rel=\"noreferrer\">http://package.elm-lang.org/packages/folkertdev/elm-state/latest/State</a>) has helped me quite a bit.</p>\n\n<p>The problem is that I have now run into a situation where I have alternately nested Result and State types, when I only want to have one of each.</p>\n\n<p>I tried to write a function with the following signature, but it seems impossible, because the inner Result is only known once the outer State is evaluated.</p>\n\n<pre><code>join : Result a (State s (Result a (State s x))) -&gt; Result a (State s x)\n</code></pre>\n\n<p>Maybe it would work if I put the Result inside the State in the return value, but that would generate a dummy State in case the outer Result is <code>Err</code>.</p>\n\n<p>I think the right idea would be to make something that is both Result and State. Can someone who is familiar with Haskell monad transformers explain how they solve this kind of problem or suggest an alternative solution?</p>\n\n<p>Here is a rough version of one place where the problem arises:</p>\n\n<pre><code>  generateConstraints environment value\n  |&gt; Result.map (State.map (\\(value, valueC) -&gt;\n    Result.map\n      (State.map2 (\\this (body, bodyC) -&gt;\n        ( this\n        , valueC ++ bodyC ++ [(this, body)]\n        ))\n      freshTypevar)\n      (generateConstraints (extend environment name value) body))\n  )\n</code></pre>\n"}, {"tags": ["haskell", "operators", "ghci"], "comments": [{"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "edited": false, "score": 0, "creation_date": 1490691736, "post_id": 43064716, "comment_id": 73213946, "body": "Maybe this <code>:i (-&gt;)</code>?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 5, "creation_date": 1490692537, "post_id": 43064716, "comment_id": 73214468, "body": "No, application is not an actual operator. Otherwise you would need to <i>apply</i> it to its arguments, going in circles. There&#39;s <code>($)</code> which does the same thing and is an actual operator, though."}, {"owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "reply_to_user": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "edited": false, "score": 0, "creation_date": 1490707750, "post_id": 43064716, "comment_id": 73225233, "body": "@FrankSimon While <code>:i (-&gt;)</code> has nothing to do with function application, the result is interesting to read. For beginners. Like me. I interpret it as &quot;<code>-&gt;</code> is the <code>function</code> type&quot;."}, {"owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1490707834, "post_id": 43064716, "comment_id": 73225305, "body": "@chi Accepted as an answer. ;-)"}], "owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1490691126, "creation_date": 1490690580, "last_edit_date": 1490691126, "question_id": 43064716, "link": "https://stackoverflow.com/questions/43064716/get-info-about-function-application-operator", "title": "Get info about function application operator", "body": "<p>In <code>GHCI</code> you can get info about all kinds of stuff like</p>\n\n<pre><code>Prelude&gt; :i map\nmap :: (a -&gt; b) -&gt; [a] -&gt; [b]   -- Defined in `GHC.Base'\nPrelude&gt; :i (+)\nclass Num a where\n  (+) :: a -&gt; a -&gt; a\n  ...\n        -- Defined in `GHC.Num'\ninfixl 6 +\nPrelude&gt; :i :\ndata [] a = ... | a : [a]       -- Defined in `GHC.Types'\ninfixr 5 :\n</code></pre>\n\n<p>I read something like \"function application has the highest precedence\" which means</p>\n\n<pre><code>f \"hello\" * g 'w'\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>(f \"hello\") * (g 'w')\n</code></pre>\n\n<p>Can I get info about function application? Is it a actual operator?</p>\n\n<p>The following does <em>not</em> work</p>\n\n<pre><code>Prelude&gt; :i ( )\n\n&lt;interactive&gt;:1:2: error:\n    parse error (possibly incorrect indentation or mismatched brackets)\nPrelude&gt;\n</code></pre>\n"}, {"tags": ["list", "haskell", "indexing", "list-comprehension", "difference"], "comments": [{"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 1, "creation_date": 1490687109, "post_id": 43063357, "comment_id": 73210914, "body": "you mean difference for each consecutive pair of elements in a list right?"}, {"owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "edited": false, "score": 0, "creation_date": 1490690637, "post_id": 43063357, "comment_id": 73213165, "body": "I remember reading somewhere (sorry can&#39;t find the source now). For a <code>list</code> processing, if you use <code>length</code> and <code>!!</code>,  you probably are doing it wrong."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "reply_to_user": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "edited": false, "score": 0, "creation_date": 1490690722, "post_id": 43063357, "comment_id": 73213226, "body": "@FrankSimon no it does not - try the empty list as a test case!"}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "edited": false, "score": 0, "creation_date": 1490690788, "post_id": 43063357, "comment_id": 73213280, "body": "Thx. Forgot about the empty list. :-)"}, {"owner": {"reputation": 325, "user_id": 7778287, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/87cafd6f0a91772ff3a9c1c568195f33?s=128&d=identicon&r=PG&f=1", "display_name": "user7778287", "link": "https://stackoverflow.com/users/7778287/user7778287"}, "edited": false, "score": 0, "creation_date": 1490725383, "post_id": 43063357, "comment_id": 73237519, "body": "Although this isn&#39;t a working method I feel obliged to state that I had the order reversed in the question, the indices belong after &quot;!!&quot;.         ([1 .. (length [x .. y])] !! [x .. y])                  Should be:         ([x .. y] !! [1 .. (length [x .. y]) ] )"}], "answers": [{"comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490690658, "post_id": 43063463, "comment_id": 73213178, "body": "I really like this solution, though is hiding some complexity - I think you should mention that the more commonly written <code>difflist x = zipWith (-) x (tail x)</code> fails on empty lists, where your version (due to lazyness) works!"}, {"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490690859, "post_id": 43063463, "comment_id": 73213331, "body": "@epsilonhalbe, the flip is due to the ordered list, otherwise the result would be negative, but you have a point also. Thanks"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490694399, "post_id": 43063463, "comment_id": 73215820, "body": "This is cool but flip and tail is not that necessary. <code>diffs (x:xs) = zipWith (-) xs (x:xs)</code> should be sufficient."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490694688, "post_id": 43063463, "comment_id": 73216025, "body": "@Redu and can you tell me how your solution works for empty lists? The remarkable fact about daniel Sanchez&#39; solution is that it does without multiple cases, though that is not obvious. And the <code>flip (-)</code> is a bit confusing for beginners, i guess."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490695390, "post_id": 43063463, "comment_id": 73216554, "body": "@epsilonhalbe Well may be, but I suppose just adding a line <code>diffs [] = []</code> wouldn&#39;t make no harm as well."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490696150, "post_id": 43063463, "comment_id": 73217058, "body": "@Redu Yes that would be a perfectly valid solution - you can add this as another answer!"}], "tags": [], "owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "is_accepted": true, "score": 10, "last_activity_date": 1490697704, "last_edit_date": 1490697704, "creation_date": 1490686883, "answer_id": 43063463, "question_id": 43063357, "link": "https://stackoverflow.com/questions/43063357/generating-a-list-of-the-gaps-in-other-lists-type-error-holding-me-back/43063463#43063463", "title": "Generating a list of the gaps in other lists. Type error holding me back,", "body": "<p>How about <code>zipWith</code>:</p>\n\n<pre><code>Prelude&gt; let diffList = \\x -&gt; zipWith (flip (-)) x (tail x)\nPrelude&gt; diffList [1,3,7,11]\n[2,4,4]\n</code></pre>\n\n<p>Edit (due to comments below):</p>\n\n<p>A more specific function declaration could be as follows:</p>\n\n<pre><code>diffList :: Num a =&gt; [a] -&gt; [a]\ndiffList [] = []\ndiffList l@(_:xs) = zipWith (-) xs l\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 2, "last_activity_date": 1490696852, "creation_date": 1490696852, "answer_id": 43067090, "question_id": 43063357, "link": "https://stackoverflow.com/questions/43063357/generating-a-list-of-the-gaps-in-other-lists-type-error-holding-me-back/43067090#43067090", "title": "Generating a list of the gaps in other lists. Type error holding me back,", "body": "<p>I guess @Daniel Sanchez's <code>zipWith</code> idea is perfectly fine. I could just do like</p>\n\n<pre><code>diffs :: Num a =&gt; [a] -&gt; [a]\ndiffs []     = []\ndiffs (x:xs) = zipWith (-) xs (x:xs)\n</code></pre>\n\n<p>However i guess there is another good option which is the <code>mapAccumL</code>. We can implement it as follows;</p>\n\n<pre><code>diffs :: Num a =&gt; [a] -&gt; [a]\n\ndiffs [] = []\ndiffs    = tail.snd.mapAccumL (\\a x -&gt; (x,x-a)) 0\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 7778287, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/87cafd6f0a91772ff3a9c1c568195f33?s=128&d=identicon&r=PG&f=1", "display_name": "user7778287", "link": "https://stackoverflow.com/users/7778287/user7778287"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43063463, "answer_count": 2, "score": 4, "last_activity_date": 1490697704, "creation_date": 1490686613, "question_id": 43063357, "link": "https://stackoverflow.com/questions/43063357/generating-a-list-of-the-gaps-in-other-lists-type-error-holding-me-back", "title": "Generating a list of the gaps in other lists. Type error holding me back,", "body": "<p>I'm trying to make a function that lists out the differences of another list. So for [1,3,7,11] it would return [2,4,4]. I'm trying to use list comprehension but I'm running into trouble with the types the functions I wanted to use take. Is it possible to keep this format by converting a [t] to an [int] and back to a [t] again?</p>\n\n<pre><code>{ difflist x y = [ p - q | p&lt;- [x..y],\n\n                           q&lt;- [ ( [1..(length [x..y]) ] !! [x..y] ): []]] }\n\n\n\n&lt;interactive&gt;:200:70: error:\n    \u2022 Couldn't match expected type \u2018Int\u2019 with actual type \u2018[[Int]]\u2019\n    \u2022 In the second argument of \u2018(!!)\u2019, namely \u2018[x .. y]\u2019\n      In the first argument of \u2018(:)\u2019, namely\n        \u2018([1 .. (length [x .. y])] !! [x .. y])\u2019\n      In the expression: ([1 .. (length [x .. y])] !! [x .. y]) : []\n</code></pre>\n"}, {"tags": ["function", "haskell", "function-call"], "answers": [{"tags": [], "owner": {"reputation": 3350, "user_id": 6112457, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZRj0Z.jpg?s=128&g=1", "display_name": "Zoey Hewll", "link": "https://stackoverflow.com/users/6112457/zoey-hewll"}, "is_accepted": false, "score": 1, "last_activity_date": 1490759046, "last_edit_date": 1490759046, "creation_date": 1490683835, "answer_id": 43062518, "question_id": 43062517, "link": "https://stackoverflow.com/questions/43062517/brackets-in-haskell-function-call/43062518#43062518", "title": "Brackets in Haskell function call", "body": "<p>If you're used to c-style function call syntax, then for a c-style function, e.g.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// defining the function\nint plus(int a, int b)\n{\n    return a + b;\n}\n\n// elsewhere, calling the function\nplus(a, b); // brackets surrounding only the arguments, comma separated\n</code></pre>\n\n<p>Then the equivalent Haskell code will be</p>\n\n<pre><code>-- defining the function\nplus :: Int -&gt; Int -&gt; Int\nplus a b = a + b\n\n-- elsewhere, calling the function:\n(plus a b) -- brackets surrounding the function and the arguments, no commas\n</code></pre>\n\n<p>To use the example in your question, </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>f(comma, separated, args);\n</code></pre>\n\n<p>This would be equivalent to</p>\n\n<pre><code>(f comma separated args)\n</code></pre>\n\n<p>But these brackets aren't necessary except sometimes, when the function call is embedded in another expression.\nIn haskell, this is also equivalent to</p>\n\n<pre><code>((((f) comma) separated) args)\n</code></pre>\n\n<p>but these extra brackets are not necessary either, they just highlight the way Haskell treats function application (where each function <em>technically</em> only takes one argument); so this final case would be similar to the following c function call:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>f(comma)(separated)(args);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": true, "score": 5, "last_activity_date": 1490698711, "creation_date": 1490698711, "answer_id": 43067747, "question_id": 43062517, "link": "https://stackoverflow.com/questions/43062517/brackets-in-haskell-function-call/43067747#43067747", "title": "Brackets in Haskell function call", "body": "<p>It's easy to remember the rules regarding parentheses and function calls in Haskell: there aren't any, because parentheses have <strong><em>nothing</em></strong> to do with function calls!</p>\n\n<p>The basic syntax for function calls in Haskell is to just write terms next to each other: <code>function argument</code> is calling <code>function</code>, passing it <code>argument</code>. In C-like syntax you'd write that as <code>function(argument)</code>. Your C example <code>f(comma, separated, args)</code> would be written in Haskell as <code>f comma separated args</code>.</p>\n\n<p>Haskell uses parentheses only in the way they are used in high school mathematics: for grouping sub-expressions so that you get a different call structure. For example, in maths <code>1 + 2 * 3</code> would call <code>*</code>  on 2 and 3, and call <code>+</code> on 1 and the result of the <code>*</code> call. <code>(1 + 2) * 3</code> changes the grouping so that <code>+</code> is called on 1 and 2, and <code>*</code> called on that result and 3. The same is valid Haskell (and C), with the same meaning, but parentheses with grouping like this can also be useful to group expressions with ordinary functions rather than infix operators. For example <code>f comma separated args</code> calls <code>f</code> on the arguments <code>comma</code>, <code>separated</code>, and <code>args</code>, while <code>f comma (separated args)</code> means to call <code>separated</code> passing it <code>args</code>, and call <code>f</code> passing it <code>comma</code> and the result of the call to <code>separated</code>.</p>\n\n<p>There is no need for <code>((((f) comma) separated) args)</code>; in fact you would have seen that as an explanation of how <code>f comma separated args</code> is recognised by the language when you use <strong>no</strong> parentheses. It's wrapping every sub-expression in explicit parentheses so there's no ambiguity to show you what the default is, not saying you actually need all those parentheses.</p>\n"}], "owner": {"reputation": 3350, "user_id": 6112457, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZRj0Z.jpg?s=128&g=1", "display_name": "Zoey Hewll", "link": "https://stackoverflow.com/users/6112457/zoey-hewll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 0, "accepted_answer_id": 43067747, "answer_count": 2, "score": 3, "last_activity_date": 1490773160, "creation_date": 1490683835, "last_edit_date": 1490773160, "question_id": 43062517, "link": "https://stackoverflow.com/questions/43062517/brackets-in-haskell-function-call", "title": "Brackets in Haskell function call", "body": "<p>I'm struggling to remember how to use brackets when calling Haskell functions. I come from a C-style background and I'm used to <code>f(comma,  separated, args)</code> syntax for calling functions. Apparently this is the same as (in Haskell) <code>((((f) comma) separated) args)</code> but this is just confusing. </p>\n\n<p>Why do I need all these brackets?</p>\n"}, {"tags": ["json", "haskell", "service", "types", "microservices"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1490658816, "post_id": 43056426, "comment_id": 73200984, "body": "I would use the same interface for both initially, separating them sounds a bit like premature optimization (at least from the information you gave). Also I think reworking the interface later on should not be a big problem due to haskells type safety, if you do have the need to separate them later on."}], "answers": [{"comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1490694536, "post_id": 43062261, "comment_id": 73215924, "body": "Situation OP laid out is not two services providing the same or a similar API, but one service being the input of another and using the same datatypes for the service and client. That doesn&#39;t seem unreasonable at all to me."}], "tags": [], "owner": {"reputation": 2834, "user_id": 2863995, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5849adb4fc2edbb284fa2566ce8c6d73?s=128&d=identicon&r=PG&f=1", "display_name": "galovics", "link": "https://stackoverflow.com/users/2863995/galovics"}, "is_accepted": false, "score": 0, "last_activity_date": 1490683025, "creation_date": 1490683025, "answer_id": 43062261, "question_id": 43056426, "link": "https://stackoverflow.com/questions/43056426/microservices-using-strict-types-to-enforce-the-api/43062261#43062261", "title": "Microservices - using strict types to enforce the API?", "body": "<p>If you really wanna follow the microservices way then I'd say don't use the shared library.</p>\n\n<p>The whole point of this concept is decoupling the services. If you make a shared library which contains some classes which are \"the same\" for multiple services then each time when a service want to enhance these classes, it has to be done within the shared library, forcing the other services to adapt.</p>\n\n<p>Decoupling the services makes possible for each of them to evolve individually.</p>\n"}], "owner": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490683025, "creation_date": 1490648505, "question_id": 43056426, "link": "https://stackoverflow.com/questions/43056426/microservices-using-strict-types-to-enforce-the-api", "title": "Microservices - using strict types to enforce the API?", "body": "<p>I am writing two separate services. The output of the first service feeds into the second. Should I use a shared library so the type checker can make sure the interfaces match?</p>\n\n<p>The \"products\" service takes an <code>Application</code> and produces <code>Products</code>. </p>\n\n<p>The \"scores\" service takes <code>Application</code> and <code>Products</code> and produces a <code>Score</code>. It uses less than half of the information available. </p>\n\n<p>Should I have the interface for \"scores\" exactly match the output of \"products\", even though it doesn't use all the information? Both will be used by the same client, and it would be convenient for it not to have to do any transformation. I can use a shared library containing only types and json serialization code that can enforce this. The build system can depend on old versions of the shared lib, so as long as I keep it forward compatible, I shouldn't need to update \"scores\" when fields are added to the output of \"products\". </p>\n\n<p>Or should I have \"scores\" reinvent its own concept of the interface, with only the fields it needs? The field names might not match, making it more difficult for the client to connect them. The advantage is the interfaces are completely de-coupled.</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 3476740, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14a5d37197d6231c545fa5d8c81f3b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Chamberlain", "link": "https://stackoverflow.com/users/3476740/tony-chamberlain"}, "edited": false, "score": 0, "creation_date": 1490650900, "post_id": 43056753, "comment_id": 73198251, "body": "Thanks that helped a lot. So when i was doing the [[a]]-&gt;[[a]]  it was just removing two levels of indices to figure out what type a should be when i passed in  [[[[a]]]].  (Which could lead to odd and unintuitive results)"}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": true, "score": 3, "last_activity_date": 1490649924, "creation_date": 1490649924, "answer_id": 43056753, "question_id": 43056128, "link": "https://stackoverflow.com/questions/43056128/syntax-for-list-patterns-in-function-declaration/43056753#43056753", "title": "Syntax for List Patterns in Function Declaration", "body": "<p>It sounds like you have a pretty good understanding of what's surprising you here: <code>[a]</code> is a list of any type of thing at all, including a list of lists. You can work out by hand what the type inferencer does automatically. Suppose that, using your first definition, we write:</p>\n\n<pre><code>let xs = [[[1,2], [3,4]], [[5]]]\nin doubleOneOrTail xs\n</code></pre>\n\n<p>At this point GHC has to make sure the types match up for us.</p>\n\n<pre><code>xs :: [[[Integer]]] -- really could be any Num type, but assume Integer\n</code></pre>\n\n<p>Now since we're calling <code>doubleOneOrTail</code> with an <code>[[[Integer]]]</code> as argument, GHC must <em>unify</em> the types <code>[a]</code> and <code>[[[Integer]]]</code>, which means finding some concrete type to substitute for <code>a</code> that makes the two types match up. There is only one correct answer:</p>\n\n<pre><code>[a] ~ [[[Integer]]]\na ~ [[Integer]]\n</code></pre>\n\n<p>Therefore, we are doubling or tailing a list of things, where each thing is a list of list of numbers. And since the types do indeed unify, GHC gives the all-clear, the function call compiles, and as a result we get <code>[[[5]]]</code>.</p>\n\n<p>As to your second question, whether you could or should restrict to a particular depth  of lists: usually you should not. This kind of function is called <em>parametrically polymorphic</em>, meaning it works for any kind of <code>a</code> at all, no matter what it is; this is a useful property that it's good to preserve when possible. If your function doesn't need to look at values of its <code>a</code> type in order to perform correctly, it should allow them to be of any type.</p>\n\n<p>Suppose that you still wanted to restrict its type? I don't know of a way to restrict it to depth-one lists without also adding some other incidental restriction. For example, you could say that it must be a list of numbers (and hope that nobody defines a <code>Num</code> instance for lists!):</p>\n\n<pre><code>doubleOneOrTail :: Num a =&gt; [a] -&gt; [a]\n</code></pre>\n\n<p>Or you could limit it to a very specific type, such as <code>[Int]</code>. This would guarantee it can only ever be called with that type.</p>\n\n<pre><code>doubleOneOrTail :: [Int] -&gt; [Int]\n</code></pre>\n\n<p>But as discussed above, all of these approaches unnecessarily restrict the type of your function. Better to define it as generally as possible, and find some other way to satisfy whatever other concerns make you want to restrict its type.</p>\n"}, {"tags": [], "owner": {"reputation": 3165, "user_id": 1181103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99bcd4d7172ef6e5ece5e0af27f7381c?s=128&d=identicon&r=PG", "display_name": "Sergey Romanovsky", "link": "https://stackoverflow.com/users/1181103/sergey-romanovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1490834397, "last_edit_date": 1490834397, "creation_date": 1490652553, "answer_id": 43057295, "question_id": 43056128, "link": "https://stackoverflow.com/questions/43056128/syntax-for-list-patterns-in-function-declaration/43057295#43057295", "title": "Syntax for List Patterns in Function Declaration", "body": "<p>Little addition to @amalloy answer. Most probably you'll be fine with Enum class constraint:</p>\n\n<pre><code>doupbleOneOrTrail :: (Enum t) =&gt; [t] -&gt; [t]\n</code></pre>\n\n<p>So your function accepts list of chars, numbers, booleans, etc</p>\n\n<pre><code>\u03bb: doubleOneOrTail \"foo\"\n\"oo\"\n\u03bb: doubleOneOrTail [False]\n[False,False]\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3476740, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14a5d37197d6231c545fa5d8c81f3b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Chamberlain", "link": "https://stackoverflow.com/users/3476740/tony-chamberlain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43056753, "answer_count": 2, "score": 1, "last_activity_date": 1490834397, "creation_date": 1490647329, "question_id": 43056128, "link": "https://stackoverflow.com/questions/43056128/syntax-for-list-patterns-in-function-declaration", "title": "Syntax for List Patterns in Function Declaration", "body": "<p>I'm learning haskell and have been writing various fairly trivial functions to get a handle on the language.  I wrote this function:</p>\n\n<pre><code>doubleOneOrTail :: [t]-&gt;[t]\ndoubleOneOrTail [x] = [x,x]\ndoubleOneOrTail (x:xs)  = xs\n</code></pre>\n\n<p>Which does exactly what is says.  Doubles the list of 1 element, or returns the tail of a list of multiple elements. This generic syntax will work for a list of single elements or list of lists, etc.  I can rewrite this function to the following:</p>\n\n<pre><code>doubleOneOrTail :: [[t]]-&gt;[[t]]\ndoubleOneOrTail [[x]] = [[x,x]]\ndoubleOneOrTail (x:xs)  = xs\n</code></pre>\n\n<p>This will throw an error if I type the following:</p>\n\n<p>doubleOneOrTail [1,2,3]</p>\n\n<p>but it does accept this:</p>\n\n<p>doubleOneOrTail [[[[1,2,3],[2]]]]</p>\n\n<p>Treats it as a list with a single element (that element being a list of lists) and doubles it.</p>\n\n<p>Clearly the pattern [a]->[a]  isn't matching a list of single elements but in some way matching any order of lists.   Whlie [[a]]->[[a]] is also matching multiple orders of lists (though not lists of just single elements).  If anyone could explain how this is working it would be greatly appreciated.</p>\n\n<p>A secondary question is it possible (or even desirable) to have a function declaration that specifically takes a particular order of a list. Say only lists of lists?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 1, "creation_date": 1490643291, "post_id": 43054932, "comment_id": 73194484, "body": "Can you show your attempt with foldr? :)"}, {"owner": {"reputation": 190, "user_id": 4342400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ddff88c52dfbad00e5372a78e9356417?s=128&d=identicon&r=PG&f=1", "display_name": "leo_bouts", "link": "https://stackoverflow.com/users/4342400/leo-bouts"}, "reply_to_user": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490644219, "post_id": 43054932, "comment_id": 73195001, "body": "@user54264611634646244 of course, i just edited it in"}], "answers": [{"tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": true, "score": 3, "last_activity_date": 1490668013, "last_edit_date": 1490668013, "creation_date": 1490646243, "answer_id": 43055813, "question_id": 43054932, "link": "https://stackoverflow.com/questions/43054932/high-order-function-thats-has-for-input-a-list-of-functions-and-a-list-of-elemen/43055813#43055813", "title": "High order function thats has for input a list of functions and a list of elements and applies the functions to the elements", "body": "<pre><code>apply :: [a -&gt; b] -&gt; [a] -&gt; [b]\n</code></pre>\n\n<p>First of all, this signature matches that of the standard <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Applicative.html#v:-60--42--62-\" rel=\"nofollow noreferrer\"><code>&lt;*&gt;</code></a> function, which is part of the <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Applicative.html#t:Applicative\" rel=\"nofollow noreferrer\"><code>Applicative</code></a> class.</p>\n\n<pre><code>class Applicative f where\n    pure :: a -&gt; f a\n    (&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b\n</code></pre>\n\n<p>Setting <code>f ~ []</code> we have <code>&lt;*&gt; :: [a -&gt; b] -&gt; [a] -&gt; [b]</code>.</p>\n\n<p>There are at least two sensible ways of writing an <code>Applicative</code> instance for lists. The first one takes the Cartesian product of its inputs, pairing every function with every value. If <code>&lt;*&gt;</code>'s input lists have length <em>N</em> and <em>M</em>, the output list will have length <em>N*M</em>. <code>pure</code> for this specification would put an element in a singleton list, so that <code>pure id &lt;*&gt; xs = xs</code>.</p>\n\n<pre><code>instance Applicative [] where\n    pure x = [x]\n    (f:fs) &lt;*&gt; xs = map f xs ++ (fs &lt;*&gt; xs)\n</code></pre>\n\n<p>This is equivalent to <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/src/GHC.Base.html#line-739\" rel=\"nofollow noreferrer\">the standard <code>Applicative</code> instance for <code>[]</code></a>.</p>\n\n<p>The other sensible way of implementing <code>Applicative</code> zips the two lists together by applying functions to elements pointwise. If <code>&lt;*&gt;</code>'s input lists have length <em>N</em> and <em>M</em>, the output list will have length <em>min(N, M)</em>. <code>pure</code> creates an infinite list, so once again <code>pure id &lt;*&gt; xs = xs</code>.</p>\n\n<pre><code>instance Applicative [] where\n    pure x = let xs = x:xs in xs\n    [] &lt;*&gt; _ = []\n    _ &lt;*&gt; [] = []\n    (f:fs) &lt;*&gt; (x:xs) = f x : (fs &lt;*&gt; xs)\n</code></pre>\n\n<p>This instance is available in <code>base</code> under <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Applicative.html#t:ZipList\" rel=\"nofollow noreferrer\">the <code>ZipList</code> newtype</a>.</p>\n"}], "owner": {"reputation": 190, "user_id": 4342400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ddff88c52dfbad00e5372a78e9356417?s=128&d=identicon&r=PG&f=1", "display_name": "leo_bouts", "link": "https://stackoverflow.com/users/4342400/leo-bouts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 43055813, "answer_count": 1, "score": 0, "last_activity_date": 1490668013, "creation_date": 1490643147, "last_edit_date": 1490644195, "question_id": 43054932, "link": "https://stackoverflow.com/questions/43054932/high-order-function-thats-has-for-input-a-list-of-functions-and-a-list-of-elemen", "title": "High order function thats has for input a list of functions and a list of elements and applies the functions to the elements", "body": "<p>As the title suggests i am trying to implement a high order function declared as</p>\n\n<pre><code>Ord u =&gt; [v-&gt;u]-&gt;[v]-&gt;[u]\n</code></pre>\n\n<p>that has inputs a) a list of functions of any type and a range of values of any type and b) a list of elements of the same type and then it will return a list that is the result of all elements that occured from applying a function from the given list to an element from the given list in ascending order without repetitive values.</p>\n\n<p>i was trying to implement it with the foldr function with no luck.\ni thought that i can index with zip the functions as a pair so they will be applied one by one with the foldr function. bellow that i created a insertion sort so i can sort the final list</p>\n\n<pre><code>apply :: Ord u =&gt; [v-&gt;u]-&gt;[v]-&gt;[u]             \napply f y = insSort (foldr(\\(i, x) y -&gt; x:y ) (zip [1..] f))\n\ninsSort :: Ord u =&gt; [u] -&gt; [u]\ninsSort (h:t) = insert h (insSort t)\ninsSort [] = []\n\ninsert :: Ord u =&gt; u -&gt; [u] -&gt; [u]\ninsert n (h:t)\n            | n &lt;= h = n : h : t\n            | otherwise = h : insert n t\ninsert n [] = [n]\n</code></pre>\n\n<p>for example some inputs with the output:</p>\n\n<pre><code>&gt;apply [abs] [-1]\n[1]\n\n&gt;apply [(^2)] [1..5]\n[1,4,9,16,25]\n\n&gt;apply [(^0),(0^),(\\x-&gt;div x x),(\\x-&gt;mod x x)] [1..1000]\n[0,1]\n\n&gt;apply [head.tail,last.init] [\"abc\",\"aaaa\",\"cbbc\",\"cbbca\"]\n\"abc\"\n\n&gt; apply [(^2),(^3),(^4),(2^)] [10]\n[100,1000,1024,10000]\n\n&gt;apply [(*5)] (apply [(\u2018div\u20185)] [1..100])\n[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]\n</code></pre>\n"}, {"tags": ["function", "haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 4, "creation_date": 1490640311, "post_id": 43054124, "comment_id": 73192740, "body": "What is <code>Int b</code> supposed to be? And why do you have two constraint-arrows <code>=&gt;</code>?"}, {"owner": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490640516, "post_id": 43054124, "comment_id": 73192858, "body": "I actually don&#39;t really know 100% how constraint arrows work. a is supposed to be Num and b Int."}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "edited": false, "score": 0, "creation_date": 1490641859, "post_id": 43054354, "comment_id": 73193636, "body": "Thank you very much, you&#39;ve helped me a lot to understand."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "edited": false, "score": 0, "creation_date": 1490641997, "post_id": 43054354, "comment_id": 73193709, "body": "@Marcus No problem. Just a suggestion: since types are such a prominent feature in Haskell, and understanding the type system is crucial for understanding error messages, Id go back over and review type signatures if I were you. It&#39;s well worth the investment of time."}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 2, "last_activity_date": 1490641051, "creation_date": 1490641051, "answer_id": 43054354, "question_id": 43054124, "link": "https://stackoverflow.com/questions/43054124/haskell-functions-with-parameters-different-types/43054354#43054354", "title": "Haskell functions with parameters different types", "body": "<p>The signature for a function that takes list of <code>Num</code>s and 2 int, and returns an int is:</p>\n\n<pre><code>_sum_divide :: (Num a) =&gt; [a] -&gt; Int -&gt; Int -&gt; Int\n</code></pre>\n\n<p>The part before the thick arrow specifies the constraints. The part after it is where you use the constraints. </p>\n\n<p>You had 2 main issues:</p>\n\n<ul>\n<li><p>There should only 1 list of constraints in a signature. </p></li>\n<li><p><code>Int</code> isn't a Typeclass. <code>(Num a)</code> means <code>a</code> can be any type that supports the <code>Num</code> Typeclass. <code>Int</code> however is a concrete type, not a Typeclass, so <code>(Int b)</code> doesn't make sense.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 4, "last_activity_date": 1506552893, "last_edit_date": 1506552893, "creation_date": 1490642146, "answer_id": 43054643, "question_id": 43054124, "link": "https://stackoverflow.com/questions/43054124/haskell-functions-with-parameters-different-types/43054643#43054643", "title": "Haskell functions with parameters different types", "body": "<p>This seems to be a basic confusion between the concepts of <em>type classes</em> and of <em>types</em>. OO languages throw these all together, but in Haskell they are fundamentally different things.</p>\n\n<ul>\n<li><p>A type is a <em>set<sup>\u2020</sup> of values</em>. For example, the type <code>Bool</code> contains the values <code>False</code> and <code>True</code>. The type <code>Int</code> contains the values <code>0</code>, <code>1</code> ... <code>9223372036854775807</code> and their negatives.</p></li>\n<li><p>A type class is a <em>set of types</em>. For example, the class <code>Num</code> contains the type <code>Int</code>, the type <code>Double</code>, the type <code>Rational</code>... and whatever type <code>T</code> of your own, if you just define an <code>instance Num T</code>.</p></li>\n</ul>\n\n<p>Generally, <em>types</em> are used in function signatures just by naming them. For instance,</p>\n\n<pre><code>foo :: [Int] -&gt; [Int]\nfoo = map (*3)\n</code></pre>\n\n<p>is a function accepting a list of <code>Int</code> numbers (i.e. values of type <code>Int</code>), and gives another such list as the result (wherein each entry is tripled).</p>\n\n<p>There is no constraint at all in the signature of <code>foo</code>. I could actually add one, like</p>\n\n<pre><code>foo :: Num Int =&gt; [Int] -&gt; [Int]\n</code></pre>\n\n<p>This would express that the function needs <code>Int</code> to be an instance of the <code>Num</code> class to work. Well, it does need that in order to be able to calculate <code>*3</code>, but the constraint is superfluous, because we <em>know</em> that <code>Int</code> is a <code>Num</code> instance, the compiler doesn't just forget about that.</p>\n\n<p>Where constraints are really useful is in <em>polymorphic</em> functions. For example, the following function triples every entry in a list of numbers, and <em>doesn't care what particular type the numbers have</em>:</p>\n\n<pre><code>foo :: Num n =&gt; [n] -&gt; [n]\nfoo = map (*3)\n</code></pre>\n\n<p>This notation with <em>type variables</em> like <code>a</code> is actually shorthand for</p>\n\n<pre><code>foo :: \u2200 n . Num n =&gt; [n] -&gt; [n]\n</code></pre>\n\n<p>meaning, <em>for all numerical types <code>n</code></em>, the function <code>foo</code> maps lists of <code>n</code>-values to lists of <code>n</code>-values.</p>\n\n<p>It's important that constraints are completely separate<sup>\u2021</sup> from the actual type specification in a signature. For instance, to specify for a polymorphic function <code>[a] -&gt; b -&gt; b -&gt; b</code> that <code>a</code> should be a <code>Num</code> instance and <code>b</code> an <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Integral\" rel=\"nofollow noreferrer\"><code>Integral</code></a> instance (the class of whole-number types, containing amongst other <code>Int</code>), you'd write</p>\n\n<pre><code>sum_divide :: (Num a, Integral b) =&gt; [a] -&gt; b -&gt; b -&gt; b\n</code></pre>\n\n<p>Alternatively, if you really mean <code>Int</code> \u2013 that's just a single type, no reason to introduce a <em>type variable</em> for it.</p>\n\n<pre><code>sum_divide :: Num a =&gt; [a] -&gt; Int -&gt; Int -&gt; Int\n</code></pre>\n\n<p>...although, you <em>can</em> still introduce the <code>b</code> variable if you like. You'll need an <em>equational constraint</em> (those are basically ad-hoc type classes containing only a single type)</p>\n\n<pre><code>{-# LANGUAGE TypeFamilies #-}\n\nsum_divide :: (Num a, b ~ Int) =&gt; [a] -&gt; b -&gt; b -&gt; b\n</code></pre>\n\n<hr>\n\n<p><sup>\u2020</sup><sub>Mathematicians would object about several levels of differences between <em>types</em>, <em>sets</em> and <em>classes</em>. Read my notion of \u201cset\u201d as just \u201ccollection of things\u201d.</sub></p>\n\n<p><sup>\u2021</sup><sub>In more complicated settings you can actually mix constraints and types, but that's advanced stuff.</sub></p>\n"}], "owner": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1999, "favorite_count": 0, "accepted_answer_id": 43054354, "answer_count": 2, "score": 0, "last_activity_date": 1506552893, "creation_date": 1490640191, "question_id": 43054124, "link": "https://stackoverflow.com/questions/43054124/haskell-functions-with-parameters-different-types", "title": "Haskell functions with parameters different types", "body": "<p>As the questions states, I am having a little trouble with defining a function with parameters different types. (array of Num, two parameters Int and returning Int).</p>\n\n<p>This is function title:</p>\n\n<pre><code>_sum_divide :: (Num a) =&gt; [a] -&gt; (Int b) =&gt; b -&gt; b -&gt; b\n</code></pre>\n\n<p>And I get this error I cannot figure out</p>\n\n<pre><code>`Int' is applied to too many type arguments\nIn the type signature for `_sum_divide':\n  _sum_divide :: Num a =&gt; [a] -&gt; Int b =&gt; b -&gt; b -&gt; b\n</code></pre>\n\n<p>Sorry for the silly error, I am a noob with Haskell.</p>\n\n<p>Thanks, have a good day/evening.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 7, "creation_date": 1490632879, "post_id": 43051926, "comment_id": 73188159, "body": "Er, <code>demo = id</code>?"}, {"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "edited": false, "score": 0, "creation_date": 1490632881, "post_id": 43051926, "comment_id": 73188162, "body": "Not sure you mean what you write. But in the case you mean it, the simplest answer would be <code>id</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1490666871, "post_id": 43051926, "comment_id": 73203258, "body": "Or <code>demo a = a</code> in case the asker isn&#39;t comfortable with first class functions (although they should be soon)"}], "answers": [{"tags": [], "owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1490636617, "creation_date": 1490636617, "answer_id": 43053131, "question_id": 43051926, "link": "https://stackoverflow.com/questions/43051926/haskell-about-isdigit/43053131#43053131", "title": "Haskell about isDigit", "body": "<p>As written, your specification can be met by:</p>\n\n<pre><code>demo = id\n</code></pre>\n\n<p>and</p>\n\n<pre><code>demo \"6\" = \"6\"\ndemo \"Aris\" = \"Aris\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6803768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cea024da94ffe0fd392c54e95d54b25?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/6803768/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "closed_date": 1490681625, "answer_count": 1, "score": 0, "last_activity_date": 1490636617, "creation_date": 1490632724, "question_id": 43051926, "link": "https://stackoverflow.com/questions/43051926/haskell-about-isdigit", "closed_reason": "Needs details or clarity", "title": "Haskell about isDigit", "body": "<p>My function is \"demo :: String -> String\", I want to use isDigit to solve it. If my input is \"6\", my output should be \"6\". If my input is \"Aris\", my output is \"Aris\". How can I do That. Thank you for reading my question.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1490633585, "post_id": 43051769, "comment_id": 73188639, "body": "Haskell has a <code>sum</code> function. If you have the even numbers (and not the string representation of those numbers) in a list, just sum the list. I fail to see why this is a problem. Surely you have seen how to sum lists. Typically, one of the very first examples you will see of a recursive function definition in Haskell is one which sums lists (if you don&#39;t want to use the built-in <code>sum</code>)."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1490634424, "post_id": 43051769, "comment_id": 73189185, "body": "You are also reimplementing the <code>filter</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 2925, "user_id": 660675, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8qJ6x.jpg?s=128&g=1", "display_name": "resilva87", "link": "https://stackoverflow.com/users/660675/resilva87"}, "is_accepted": false, "score": 2, "last_activity_date": 1490633866, "last_edit_date": 1490633866, "creation_date": 1490633498, "answer_id": 43052183, "question_id": 43051769, "link": "https://stackoverflow.com/questions/43051769/get-even-numbers-from-string-and-sum/43052183#43052183", "title": "Get even numbers from string and sum", "body": "<p>You're already pretty there. <code>(ord l - 48)</code> extracts the integer value from the string, so you have to accumulate this value. Or sum up the resulting result (which is basically a function)</p>\n\n<p>The basic recursive loop would be:</p>\n\n<pre><code>numbers :: String -&gt; Int -&gt; Int\nGiven an empty string and accumulated value -&gt; return accumulated value\nGiven string (l:ls) not empty and accumulated value -&gt;\n    if l matches your criteria\n           numbers ls (accumulated value + (ord l - 48))\n    else \n           numbers ls (solely the accumulated value, as `l` doesn't match criteria)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1490638643, "creation_date": 1490638643, "answer_id": 43053692, "question_id": 43051769, "link": "https://stackoverflow.com/questions/43051769/get-even-numbers-from-string-and-sum/43053692#43053692", "title": "Get even numbers from string and sum", "body": "<p>another alternative to write the same</p>\n\n<pre><code>import Data.Char(digitToInt)\n\nsumEvens = sum . map digitToInt . filter (`elem` \"2468\")\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 1935172, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RVnmf.jpg?s=128&g=1", "display_name": "Taurib", "link": "https://stackoverflow.com/users/1935172/taurib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1490638643, "creation_date": 1490632218, "last_edit_date": 1490632916, "question_id": 43051769, "link": "https://stackoverflow.com/questions/43051769/get-even-numbers-from-string-and-sum", "title": "Get even numbers from string and sum", "body": "<p>I need to find all even numbers from <code>String</code> input.</p>\n\n<p>I managed to get all even numbers to list, but I don't understand excactly how can I get sum of those even numbers afterwards.</p>\n\n<pre><code>numbers :: String -&gt; [Int]\nnumbers [] = []\nnumbers (l:ls) = if ord l == 48 || ord l == 50 || ord l == 52 || ord l == 54 || ord l == 56\n    then (ord l - 48): (numbers ls)\n    else (numbers ls)\n</code></pre>\n\n<p>So the result would be something like: \"abc1234\" => 6</p>\n"}, {"tags": ["haskell", "pattern-matching"], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1490633287, "post_id": 43051464, "comment_id": 73188422, "body": "The <code>case</code> looks better for me as well."}, {"owner": {"reputation": 493, "user_id": 7707798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8056a055e82f9853610180340cc32?s=128&d=identicon&r=PG", "display_name": "Rafael", "link": "https://stackoverflow.com/users/7707798/rafael"}, "edited": false, "score": 0, "creation_date": 1490634846, "post_id": 43051464, "comment_id": 73189434, "body": "I agree, cramming a whole function block between after the guard was a bit misleading, I thought it was a completely novel feature from Haskell."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 6, "last_activity_date": 1490631946, "last_edit_date": 1490631946, "creation_date": 1490631212, "answer_id": 43051464, "question_id": 43051172, "link": "https://stackoverflow.com/questions/43051172/haskell-constraining-function-pattern-variables-with/43051464#43051464", "title": "Haskell: Constraining function pattern variables with |", "body": "<p>Yes, it means precisely \u201c<em>such that</em>\u201d. These are <a href=\"http://learnyouahaskell.com/syntax-in-functions\" rel=\"noreferrer\">guards</a>, very common in Haskell (generally preferred to the equivalent <code>if</code> <code>then</code> <code>else</code> expression).</p>\n\n<pre><code>f x\n | x &gt; 2      = a\n | x &lt; -4     = b\n | otherwise  = x\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>f x = if x &gt; 2 then a\n               else if x &lt; -4 then b\n                              else x\n</code></pre>\n\n<p>IMO that specific example would actually have better been written with neither <code>if</code> nor guards, but</p>\n\n<pre><code>    takeConstraint' = case n of\n        \"Unique\"  -&gt; (Nothing, Nothing, Just $ takeUniq ps tableName defs rest, Nothing)\n        \"Foreign\" -&gt; (Nothing, Nothing, Nothing, Just $ takeForeign ps tableName defs rest)\n        \"Primary\" -&gt; (Nothing, Just $ takeComposite defs rest, Nothing, Nothing)\n        \"Id\"      -&gt; (Just $ takeId ps tableName (n:rest), Nothing, Nothing, Nothing)\n        _         -&gt; (Nothing, Nothing, Just $ takeUniq ps \"\" defs (n:rest), Nothing)\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 7707798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8056a055e82f9853610180340cc32?s=128&d=identicon&r=PG", "display_name": "Rafael", "link": "https://stackoverflow.com/users/7707798/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43051464, "answer_count": 1, "score": 3, "last_activity_date": 1490631946, "creation_date": 1490630377, "question_id": 43051172, "link": "https://stackoverflow.com/questions/43051172/haskell-constraining-function-pattern-variables-with", "title": "Haskell: Constraining function pattern variables with |", "body": "<p>While I was browsing Persistent source code, I came across this function below in file <a href=\"https://github.com/yesodweb/persistent/blob/v2.5.1.4/persistent/Database/Persist/Quasi.hs\" rel=\"nofollow noreferrer\">Quasi.hs</a> (I referred to a tag with the relevant code equal to the one in the present state in master branch, since the tag's code is more unlikely to change).\nIn the line <code>takeConstraint ps tableName defs (n:rest) | not (T.null n) &amp;&amp; isUpper (T.head n) = takeConstraint'</code> there is this pipe (|) character following the argument pattern.\nIs the expression between <code>|</code> and <code>=</code> like a constraint to arguments in the pattern? So do I interpret this <code>|</code> as the same symbol in Math, i.e. <em>\"such that\"</em>?</p>\n\n<pre><code>takeConstraint :: PersistSettings\n          -&gt; Text\n          -&gt; [FieldDef]\n          -&gt; [Text]\n          -&gt; (Maybe FieldDef, Maybe CompositeDef, Maybe UniqueDef, Maybe UnboundForeignDef)\ntakeConstraint ps tableName defs (n:rest) | not (T.null n) &amp;&amp; isUpper (T.head n) = takeConstraint' --- &lt;&lt;&lt;&lt;&lt; This line\n    where\n      takeConstraint' \n            | n == \"Unique\"  = (Nothing, Nothing, Just $ takeUniq ps tableName defs rest, Nothing)\n            | n == \"Foreign\" = (Nothing, Nothing, Nothing, Just $ takeForeign ps tableName defs rest)\n            | n == \"Primary\" = (Nothing, Just $ takeComposite defs rest, Nothing, Nothing)\n            | n == \"Id\"      = (Just $ takeId ps tableName (n:rest), Nothing, Nothing, Nothing)\n            | otherwise      = (Nothing, Nothing, Just $ takeUniq ps \"\" defs (n:rest), Nothing) -- retain compatibility with original unique constraint\ntakeConstraint _ _ _ _ = (Nothing, Nothing, Nothing, Nothing)\n</code></pre>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1490627810, "post_id": 43049205, "comment_id": 73184753, "body": "I guess <code>map (splitOn &quot;\\n&quot;) &quot;001\\n002\\n&quot;</code> would yield the same type error. Are you sure you need the <code>map</code>? Check the type of <code>splitOn</code>."}, {"owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1490642294, "post_id": 43049205, "comment_id": 73193881, "body": "You&#39;re right. I needn&#39;t map. But in the second argument of <code>splitOn</code> I need a [[Char]] but the file is IO String. I tried the suggestions but I ever receive the same error"}, {"owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1490644004, "post_id": 43049205, "comment_id": 73194894, "body": "I got it! Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 7323, "user_id": 343957, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FAVPm.jpg?s=128&g=1", "display_name": "mathk", "link": "https://stackoverflow.com/users/343957/mathk"}, "is_accepted": false, "score": 1, "last_activity_date": 1490628196, "creation_date": 1490628196, "answer_id": 43050412, "question_id": 43049205, "link": "https://stackoverflow.com/questions/43049205/how-can-i-read-a-file-and-convert-the-content-in-char-io-string-to-strin/43050412#43050412", "title": "How can I read a file and convert the content in [[Char]],? - IO String to String", "body": "<p>You can use <code>lines</code>:</p>\n\n<pre><code>fileContents  &lt;- lines &lt;$&gt; readFile \"file.txt\"\n</code></pre>\n\n<p>It use the fact that <code>IO</code> is a <code>Functor</code>.</p>\n"}], "owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490628196, "creation_date": 1490624977, "last_edit_date": 1490627353, "question_id": 43049205, "link": "https://stackoverflow.com/questions/43049205/how-can-i-read-a-file-and-convert-the-content-in-char-io-string-to-strin", "title": "How can I read a file and convert the content in [[Char]],? - IO String to String", "body": "<p>I have a file like this:</p>\n\n<pre><code>001\n002\n003\n004\n</code></pre>\n\n<p>and I need construct a list [\"001\",\"002\",\"003\",\"004\"]</p>\n\n<p>I tried this</p>\n\n<pre><code>map (splitOn \"\\n\") (readFile \"file.txt\")\n</code></pre>\n\n<p>but I'm receiving the message:</p>\n\n<pre><code>Couldn't match expected type `[[Char]]'\n            with actual type `IO String'\nIn the return type of a call of `readFile'\nIn the second argument of `map', namely `(readFile \"file.txt\")'\nIn the expression: map (splitOn \"\") (readFile \"file.txt\")\n</code></pre>\n\n<p>I understand the reason, I need a [[Char]] in the second argument of map and the readFile returns an IOString, but I don't know how make the conversion</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I did what was suggested but I continues receiving a error message:</p>\n\n<p>code:</p>\n\n<pre><code>main = do\n    fileContents &lt;- readFile \"file.txt\"\n    let modified = map (splitOn \"\\n\") fileContents\n    putStrLn modified\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>Couldn't match type `Char' with `[Char]'\nExpected type: [[Char]]\n  Actual type: String\nIn the second argument of `map', namely `fileContents'\nIn the expression: map (splitOn \"\") fileContents\nIn an equation for `string': string = map (splitOn \"\") fileContents\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 4, "creation_date": 1490627869, "post_id": 43048942, "comment_id": 73184787, "body": "how do you define comparison of Int values with any arbitrary type?"}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1490637241, "post_id": 43048942, "comment_id": 73190880, "body": "You can&#39;t write a function of that type that does this, so you&#39;ll have to change it somehow. Perhaps by constraining <code>u</code> with a typeclass that provides the comparison methods."}, {"owner": {"reputation": 2179, "user_id": 412549, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a194a155579e30bda0926705aeb9d165?s=128&d=identicon&r=PG&f=1", "display_name": "Franky", "link": "https://stackoverflow.com/users/412549/franky"}, "edited": false, "score": 0, "creation_date": 1490687130, "post_id": 43048942, "comment_id": 73210924, "body": "Did you mean: list given only the numbers,... that <b>have an index</b> greater or equal <code>i</code>...?"}], "answers": [{"tags": [], "owner": {"reputation": 1218, "user_id": 6042307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6ebc7609bac3a4ddf6c7920c2c083a?s=128&d=identicon&r=PG", "display_name": "gabesoft", "link": "https://stackoverflow.com/users/6042307/gabesoft"}, "is_accepted": true, "score": 1, "last_activity_date": 1490669256, "creation_date": 1490669256, "answer_id": 43059811, "question_id": 43048942, "link": "https://stackoverflow.com/questions/43048942/keep-elements-of-a-list-with-certain-conditions-inferred-type-is-not-general-en/43059811#43059811", "title": "keep elements of a list with certain conditions, Inferred type is not general enough", "body": "<p>The problem is that you're using <code>Int</code> to compare, so the <code>u</code> must also be <code>Int</code> in that case. Or you could make <code>i</code> and <code>j</code> more generic. Also you don't need two calls to <code>filter</code>. You could implement <code>fromTo</code> as follows</p>\n\n<pre><code>fromTo :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\nfromTo i j = filter (\\x -&gt; i &lt;= x &amp;&amp; x &lt;= j)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>fromTo (-4) 50 [0, 25..100]\n[0,25,50]\n\nfromTo 'c' 'x' ['a'..'z']\n\"cdefghijklmnopqrstuvwx\"\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 4342400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ddff88c52dfbad00e5372a78e9356417?s=128&d=identicon&r=PG&f=1", "display_name": "leo_bouts", "link": "https://stackoverflow.com/users/4342400/leo-bouts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 43059811, "answer_count": 1, "score": 0, "last_activity_date": 1490669256, "creation_date": 1490624363, "question_id": 43048942, "link": "https://stackoverflow.com/questions/43048942/keep-elements-of-a-list-with-certain-conditions-inferred-type-is-not-general-en", "title": "keep elements of a list with certain conditions, Inferred type is not general enough", "body": "<p>i am trying to keep from a list given only the numbers,chars, strings, bools etc that are greater or equal of i and less or equal of j. I also dont want to change my initial definition of Int->Int->[u]->[u] , some examples :</p>\n\n<pre><code>  &gt;fromTo 3 7 [1..10]\n   [3,4,5,6,7]\n   &gt;fromTo 1600 1600 [0..]\n   [1599]\n   &gt; fromTo (-4) (-3) [False,True]\n   []\n   &gt;fromTo 12 20 \"Haskell\"\n   \"\"\n   &gt;fromTo (-4) 6 [0, 25..]\n   [0,25,50,75,100,125]\n</code></pre>\n\n<p>here is with what i came up</p>\n\n<pre><code>fromTo :: Int-&gt;Int-&gt;[u]-&gt;[u]                         \nfromTo i j list = filter2 i j (filter (\\e1 -&gt; e1&gt;= i) list)     \n\nfilter2::Int-&gt;Int-&gt;[u]-&gt;[u]\nfilter2 y x filteredI = (filter (\\e2 -&gt; e2&lt;= x) filteredI)\n</code></pre>\n\n<p>the error message is :</p>\n\n<pre><code>- Inferred type is not general enough\n*** Expression    : filter2\n*** Expected type : Int -&gt; Int -&gt; [a] -&gt; [a]\n*** Inferred type : Int -&gt; Int -&gt; [Int] -&gt; [Int]\n</code></pre>\n"}, {"tags": ["haskell", "exception", "conduit"], "comments": [{"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 1, "creation_date": 1490650099, "post_id": 43047707, "comment_id": 73197914, "body": "<code>callProcess</code> throws an exception if the exitcode is non-zero. Either use a different function that returns the exit code and handle it yourself, or catch the error."}, {"owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "reply_to_user": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1490678800, "post_id": 43047707, "comment_id": 73206630, "body": "Just found out that I should have used <code>SomeException</code> instead of <code>MyException</code>"}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 1, "creation_date": 1490689908, "post_id": 43047707, "comment_id": 73212710, "body": "I&#39;d recommend reading <a href=\"https://haskell-lang.org/library/safe-exceptions\" rel=\"nofollow noreferrer\">the documentation for safe-exceptions</a> and <a href=\"https://haskell-lang.org/library/typed-process\" rel=\"nofollow noreferrer\">typed-process</a>, which may help explain how to do these kinds of things."}], "owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1490621023, "creation_date": 1490621023, "question_id": 43047707, "link": "https://stackoverflow.com/questions/43047707/recover-from-exceptions-in-callprocess", "title": "Recover from Exceptions in callProcess", "body": "<p>In my following code, I use callProcess to run external <code>git pull</code>. What I want is that if <code>git pull</code> fails in one directory, the program will skip it and try the next directory. But with my code, the program stops with the error messages from git:</p>\n\n<p><strong>Error message:</strong></p>\n\n<blockquote>\n  <p>We are at:/home/nut/dev/haskell/haskellnews You are not currently on a\n  branch. Please specify which branch you want to merge with. See\n  git-pull(1) for details.</p>\n\n<pre><code>git pull &lt;remote&gt; &lt;branch&gt;\n</code></pre>\n  \n  <p>scripts-exe: callProcess: git \"pull\" (exit 1): failed</p>\n</blockquote>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>src = sourceDirectory \"/home/haskell\" `catchC` (\\(e :: MyException)-&gt; liftIO $ throwIO $ MyException (show e))\n\n    .| C.mapM_ (\\f -&gt;\n              do\n                 b &lt;- liftIO . doesDirectoryExist $ f\n                 case b of\n                   True -&gt; do liftIO . setCurrentDirectory $ f\n                              bb &lt;- liftIO . doesDirectoryExist $ \".git\"\n                              case bb of\n                                True -&gt; liftIO $ do\n                                  res &lt;- try (callProcess \"git\" [\"pull\"]) :: IO (Either MyException ())\n                                  case res of\n                                                    Right a -&gt; putStrLn \"we are good\"\n                                                    Left e -&gt; putStrLn \"bad git\"\n                                False -&gt; liftIO . putStrLn $ \"Not a git directory\"\n                   False -&gt; do liftIO . putStrLn $ \"Not a directory\"\n             )\n\nmain :: IO ()\nmain = runConduitRes $ src\n</code></pre>\n"}, {"tags": ["haskell", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 2231, "user_id": 1027321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KkFZC.jpg?s=128&g=1", "display_name": "jakubdaniel", "link": "https://stackoverflow.com/users/1027321/jakubdaniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1490619295, "creation_date": 1490619295, "answer_id": 43047079, "question_id": 43046668, "link": "https://stackoverflow.com/questions/43046668/redundancy-regarding-product-types-and-tuples-in-haskell/43047079#43047079", "title": "Redundancy regarding product types and tuples in Haskell", "body": "<p>I would not expect the pattern used in <code>Foo</code> to be frequent. There is slight difference in what the constructor acts like: <code>Foo :: (String, Int, Char) -&gt; Foo</code> as opposed to <code>Bar :: String -&gt; Int -&gt; Char -&gt; Bar</code>. Then <code>Foo undefined</code> and <code>Foo (undefined, ..., ...)</code> are strictly speaking different things, whereas you miss one level of undefinedness in <code>Bar</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1490619297, "creation_date": 1490619297, "answer_id": 43047080, "question_id": 43046668, "link": "https://stackoverflow.com/questions/43046668/redundancy-regarding-product-types-and-tuples-in-haskell/43047080#43047080", "title": "Redundancy regarding product types and tuples in Haskell", "body": "<p>The type </p>\n\n<pre><code>data Foo = Foo (String, Int, Char)\n</code></pre>\n\n<p>represents a double-lifted tuple. It values comprise</p>\n\n<pre><code>undefined\nFoo undefined\nFoo (undefined, undefined, undefined)\netc.\n</code></pre>\n\n<p>This is usually troublesome. Because of this, it's rare to see such definitions in actual code. We either have plain data types</p>\n\n<pre><code>data Foo = Foo String Int Char\n</code></pre>\n\n<p>or <code>newtype</code>s</p>\n\n<pre><code>newtype Foo = Foo (String, Int, Char)\n</code></pre>\n\n<p>The <code>newtype</code> can be just as inconvenient to use, but at least it \ndoes not double-lift the tuple: <code>undefined</code> and <code>Foo undefined</code> are now equal values. </p>\n\n<p>The <code>newtype</code> also provides zero-cost conversion between a plain tuple and <code>Foo</code>, in both directions. </p>\n\n<p>You can see such <code>newtype</code>s in use e.g. when the programmer needs a different instance for some type class, than the one already associated with the tuple. Or, perhaps, it is used in a \"smart constructor\" idiom. </p>\n"}, {"tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": false, "score": 7, "last_activity_date": 1490645028, "last_edit_date": 1495535409, "creation_date": 1490619860, "answer_id": 43047278, "question_id": 43046668, "link": "https://stackoverflow.com/questions/43046668/redundancy-regarding-product-types-and-tuples-in-haskell/43047278#43047278", "title": "Redundancy regarding product types and tuples in Haskell", "body": "<p><a href=\"https://stackoverflow.com/a/43047080/1523776\">@chi's answer</a> is about the technical differences in terms of Haskell's evaluation model. I hope to give you some insight into the philosophy of this sort of typed programming.</p>\n\n<p>In category theory we generally work with objects \"up to isomorphism\". Your <code>Bar</code> is of course isomorphic to <code>(String, Int, Char)</code>, so from a categorical perspective they're the same thing.</p>\n\n<pre><code>bar_tuple :: Iso' Bar (String, Int, Char)\nbar_tuple = iso to from\n    where to (Bar s i c) = (s, i, c)\n          from (s, i, c) = Bar s i c\n</code></pre>\n\n<p>In some sense tuples are a Platonic form of product type, in that they have no meaning beyond being a collection of disparate values. All the other product types can be mapped to and from a plain old tuple.</p>\n\n<p>So why not use tuples everywhere, when all Haskell types ultimately boil down to a sum of products? It's about communication. As Martin Fowler says,</p>\n\n<blockquote>\n  <p>Any fool can write code that a computer can understand. Good programmers write code that humans can understand.</p>\n</blockquote>\n\n<p>Names are important! Writing down a custom product type like</p>\n\n<pre><code>data Customer = Customer { name :: String, address :: String }\n</code></pre>\n\n<p>imbues the type <code>Customer</code> with <em>meaning</em> to the person reading the code, unlike <code>(String, String)</code> which just means \"two strings\".</p>\n\n<p>Custom types are particularly useful when you want to enforce invariants by hiding the representation of your data and using <em>smart constructors</em>:</p>\n\n<pre><code>newtype NonEmpty a = NonEmpty [a]\n\nnonEmpty :: [a] -&gt; Maybe (NonEmpty a)\nnonEmpty [] = Nothing\nnonEmpty xs = Just (NonEmpty xs)\n</code></pre>\n\n<p>Now, if you don't export the <code>NonEmpty</code> constructor, you can force people to go through the <code>nonEmpty</code> smart constructor. If someone hands you a <code>NonEmpty</code> value you may safely assume that it has at least one element.</p>\n\n<p>You can of course represent <code>Customer</code> as a tuple under the hood and expose evocatively-named field accessors,</p>\n\n<pre><code>newtype Customer = Bar (String, String)\nname, address :: Customer -&gt; String\nname (Customer (n, a)) = n\naddress (Customer (n, a)) = a\n</code></pre>\n\n<p>but this doesn't really buy you much, except that it's now cheaper to convert <code>Customer</code> to a tuple (if, say, you're writing performance-sensitive code that works with a tuple-oriented API).</p>\n\n<p>If your code is intended to solve a particular problem - which of course is the whole point of writing code - it pays to not just solve the problem, but make it look like you've solved it too. Someone - maybe you in a couple of years - is going to have to read this code and understand it with no <em>a priori</em> knowledge of how it works. Custom types are a very important communication tool in this regard.</p>\n"}], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1490645028, "creation_date": 1490618198, "question_id": 43046668, "link": "https://stackoverflow.com/questions/43046668/redundancy-regarding-product-types-and-tuples-in-haskell", "title": "Redundancy regarding product types and tuples in Haskell", "body": "<p>In Haskell you have product types and you have tuples.</p>\n\n<p>You use tuples if you don't want to associate a dedicated type with the value, and you can use product types if you wish to do so.</p>\n\n<p>However I feel there is redundancy in the notation of product types</p>\n\n<pre><code>data Foo = Foo (String, Int, Char)\ndata Bar = Bar String Int Char\n</code></pre>\n\n<p>Why are there both kinds of notations? Is there any case where you would prefer one the other? </p>\n\n<p>I guess you can't use record notation when using tuples, but that's just a convenience problem. Another thing might be the notion of order in tuples, as opposed to product types, but I think that's just due to the naming of the functions <code>fst</code> and <code>snd</code>.</p>\n"}, {"tags": ["loops", "haskell"], "comments": [{"owner": {"reputation": 2733, "user_id": 608425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/foir6.jpg?s=128&g=1", "display_name": "Matt Hogan-Jones", "link": "https://stackoverflow.com/users/608425/matt-hogan-jones"}, "edited": false, "score": 0, "creation_date": 1490611826, "post_id": 43044250, "comment_id": 73172865, "body": "<code>I was unable to implement a working solution</code> What was your specific issue that prevented your solution from working? What actual code did you try?"}, {"owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "reply_to_user": {"reputation": 2733, "user_id": 608425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/foir6.jpg?s=128&g=1", "display_name": "Matt Hogan-Jones", "link": "https://stackoverflow.com/users/608425/matt-hogan-jones"}, "edited": false, "score": 0, "creation_date": 1490612064, "post_id": 43044250, "comment_id": 73172995, "body": "Just examples I tried: <code>fpow f n x = iterate f x !! n</code>  <code>repeatFun :: Char -&gt; Int -&gt; Char -&gt; String repeatFun func count arg repeatFun = (count-1)*((func)+(arg)) repeatFun = func (repeatFun func (count-1) arg)</code>  I am new to haskell so my implementation skills are seriously lacking"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1490612245, "post_id": 43044250, "comment_id": 73173131, "body": "Your post as it stands is missing a question, which is essential for a Q&amp;A site. Please <a href=\"https://stackoverflow.com/posts/43044250/edit\">edit</a> your post. If you&#39;ve encountered any problems, add the &quot;wrong&quot; code and any error message you&#39;ve got, or, if the behaviour was not what you expected, both the expected and actual behaviour."}, {"owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "edited": false, "score": 0, "creation_date": 1490612621, "post_id": 43044250, "comment_id": 73173411, "body": "Thank you for fixing the layout, in regards to a question, using the link I mentioned how can I implement a higher order function given my specific input. I should just be able to pass number of times to the loop, pass the argument to the function which is also take as an input parameter, but I struggle to convert that into actual haskell code. the solutions I tried as in my previous comment would not even compile and my limited knowledge of haskell doesnt help me finding a solution unfortunately."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1490618062, "post_id": 43044250, "comment_id": 73177207, "body": "<i>&quot;The solutions I did try to implement I could get compiling correctly, I am still very inexperienced with haskell and would appreciate an explanation on how to create a higher order function using my parameters.&quot;</i> That sounds like you want your solution reviewed. For a review, head over to <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 6496011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5da204ac4ee7e380ab27daa05996a2a?s=128&d=identicon&r=PG&f=1", "display_name": "Antisthenes", "link": "https://stackoverflow.com/users/6496011/antisthenes"}, "edited": false, "score": 1, "creation_date": 1490614326, "post_id": 43045119, "comment_id": 73174597, "body": "It can be also implemented with simple if instead of guards. For more functional approach and codegolf it may also defined as: <code>applyRecursively f n arg = foldr (.) id (replicate n f) $ arg</code>  For more codegolfing there is also point free version: <code>applyRecursively = (foldr (.) id .). flip replicate</code>"}, {"owner": {"reputation": 2733, "user_id": 608425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/foir6.jpg?s=128&g=1", "display_name": "Matt Hogan-Jones", "link": "https://stackoverflow.com/users/608425/matt-hogan-jones"}, "reply_to_user": {"reputation": 420, "user_id": 6496011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5da204ac4ee7e380ab27daa05996a2a?s=128&d=identicon&r=PG&f=1", "display_name": "Antisthenes", "link": "https://stackoverflow.com/users/6496011/antisthenes"}, "edited": false, "score": 0, "creation_date": 1490614965, "post_id": 43045119, "comment_id": 73175047, "body": "@Antisthenes I think my mind just melted! Functional programming still seems like magic sometimes when I&#39;m trying to follow it, but many thanks for your code, that&#39;s really helpful."}, {"owner": {"reputation": 6500, "user_id": 57879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/419a88bdf20aeaa3fb2de53ca0f4d836?s=128&d=identicon&r=PG", "display_name": "yatima2975", "link": "https://stackoverflow.com/users/57879/yatima2975"}, "reply_to_user": {"reputation": 420, "user_id": 6496011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5da204ac4ee7e380ab27daa05996a2a?s=128&d=identicon&r=PG&f=1", "display_name": "Antisthenes", "link": "https://stackoverflow.com/users/6496011/antisthenes"}, "edited": false, "score": 0, "creation_date": 1490618818, "post_id": 43045119, "comment_id": 73177776, "body": "@Antisthenes: how about <code>applyRecursively f n arg = iterate f arg !! n</code>?"}, {"owner": {"reputation": 420, "user_id": 6496011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5da204ac4ee7e380ab27daa05996a2a?s=128&d=identicon&r=PG&f=1", "display_name": "Antisthenes", "link": "https://stackoverflow.com/users/6496011/antisthenes"}, "reply_to_user": {"reputation": 6500, "user_id": 57879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/419a88bdf20aeaa3fb2de53ca0f4d836?s=128&d=identicon&r=PG", "display_name": "yatima2975", "link": "https://stackoverflow.com/users/57879/yatima2975"}, "edited": false, "score": 0, "creation_date": 1490629992, "post_id": 43045119, "comment_id": 73186222, "body": "@yatima2975: Yeah, it&#39;s also good idea. From the beginning i was thinking about writing point-free, which is why i&#39;ve written it that way."}], "tags": [], "owner": {"reputation": 2733, "user_id": 608425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/foir6.jpg?s=128&g=1", "display_name": "Matt Hogan-Jones", "link": "https://stackoverflow.com/users/608425/matt-hogan-jones"}, "is_accepted": false, "score": 2, "last_activity_date": 1490613992, "creation_date": 1490613992, "answer_id": 43045119, "question_id": 43044250, "link": "https://stackoverflow.com/questions/43044250/function-recursion-within-itself-haskell/43045119#43045119", "title": "Function Recursion within itself - haskell", "body": "<p>I am admittedly only a beginner at Haskell, so this may be a naive implementation, but I think this does what you are looking for:</p>\n\n<pre><code>applyRecursively f x y\n    | x == 1 = f y\n    | otherwise = f (applyRecursively f (x-1) y)\n</code></pre>\n\n<p>The <code>applyRecursively</code> function takes a function and two numbers as arguments.</p>\n\n<p>If the middle argument (the <strong>count</strong>) is 1 then we apply the parameter function to the argument y. This is the edge case that stops the recursion.</p>\n\n<p>The <code>otherwise</code> guard clause then calls recursively with the <code>x</code> parameter decremented, and applies function <code>f</code> to the result.</p>\n\n<p>I have tested it using a lambda like this:</p>\n\n<pre><code>applyRecursively (\\x -&gt; x + 1) 3 3\n</code></pre>\n\n<p>It should add 1 to the values of 3 three times - it returns a value of <code>6</code> so it looks like it works.</p>\n\n<p>As I say, I'm a beginner but I think this does what you're looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 2733, "user_id": 608425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/foir6.jpg?s=128&g=1", "display_name": "Matt Hogan-Jones", "link": "https://stackoverflow.com/users/608425/matt-hogan-jones"}, "edited": false, "score": 0, "creation_date": 1490628977, "post_id": 43048536, "comment_id": 73185499, "body": "+1 from me as this is a much more functional approach than my effort, I&#39;ve learned quite a bit from this!"}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 4, "last_activity_date": 1490632249, "last_edit_date": 1490632249, "creation_date": 1490623274, "answer_id": 43048536, "question_id": 43044250, "link": "https://stackoverflow.com/questions/43044250/function-recursion-within-itself-haskell/43048536#43048536", "title": "Function Recursion within itself - haskell", "body": "<p>Spinning off from @Antisthenes' comment, One other way to do this is using the <code>foldl1</code> with no base case.</p>\n\n<pre><code>pipeNTimes :: (a -&gt; a) -&gt; Int -&gt; (a -&gt; a)\npipeNTimes f n = foldl1 (.) $ replicate n f\n\npipeNTimes (*2) 3 2 -- returns 16\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1490632249, "creation_date": 1490611509, "last_edit_date": 1490613510, "question_id": 43044250, "link": "https://stackoverflow.com/questions/43044250/function-recursion-within-itself-haskell", "title": "Function Recursion within itself - haskell", "body": "<p>I was trying to recursively pass a function to itself a given number of times. So given the input in form of Function | RepeatNumber(Count) |\u00a0Argument. So as an example if given the input: <code>f 3 2</code> it would return <code>f(f(f 2)</code> This should then also work if the Function value where \"square\" it would Square the argument.</p>\n\n<p>In terms of the logic I approached it as follows:</p>\n\n<pre><code>def repeatnew func count arg\n    if count == 1 then (func arg)\n    else (func (repeatnew func (count -1) arg))\n</code></pre>\n\n<p>I've been trying to research a solution to this for a while and I came across using Iterate and some other functions. Finally I came across this: <a href=\"https://wiki.haskell.org/Higher_order_function\" rel=\"nofollow noreferrer\">https://wiki.haskell.org/Higher_order_function</a> However I was unable to implement a working solution.</p>\n\n<p>Edit: The solutions I did try to implement I could get compiling correctly, I am still very inexperienced with haskell and would appreciate an explanation on how to create a higher order function using my parameters.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1490569887, "post_id": 43035652, "comment_id": 73156546, "body": "The type of <code>func</code> is not a <code>Tree</code>, it is <code>Float -&gt; Tree</code>..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1490569960, "post_id": 43035652, "comment_id": 73156561, "body": "Furthermore it is not clear to me what you mean by &quot;<i>in code</i>&quot;. Are you talking about <i>reflection</i>?"}, {"owner": {"reputation": 37, "user_id": 6301280, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8ef7990511929b37293f8bb51ff1192?s=128&d=identicon&r=PG&f=1", "display_name": "naber2", "link": "https://stackoverflow.com/users/6301280/naber2"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490570092, "post_id": 43035652, "comment_id": 73156590, "body": "thanks but how do i check it? i want to write something like if (func == Tree) 0 else 1 @WillemVanOnsem"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 3, "creation_date": 1490571049, "post_id": 43035652, "comment_id": 73156830, "body": "@naber2 Reading your question literally, it seems you want to check if e.g. <code>func 3.7</code> is really a <code>Tree</code>. In that case, there is no need to check: given that <code>func :: Float -&gt; Tree</code>, as Willem Van Onsen points out, there is no way <code>func 3.7</code> could be anything other than a <code>Tree</code>. I suspect that is not what you have in mind, though. You will likely get better suggestions if you explain what the purpose of your test is."}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 1, "creation_date": 1490574096, "post_id": 43035652, "comment_id": 73157480, "body": "Is your actual question &quot;How do I tell if it&#39;s a recursive tree as opposed to being a leaf?&quot;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1490585994, "post_id": 43035652, "comment_id": 73160294, "body": "You can run <code>ghci nameOfYourFile.hs</code> and then type <code>:t func</code> in ghci"}], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": false, "score": 2, "last_activity_date": 1490576083, "creation_date": 1490576083, "answer_id": 43036349, "question_id": 43035652, "link": "https://stackoverflow.com/questions/43035652/haskell-type-checking-in-code/43036349#43036349", "title": "Haskell type checking in code", "body": "<p>Well, there are a few answers, which zigzag in their answers to \"is this possible\". </p>\n\n<ol>\n<li><p>You could ask <code>ghci</code></p>\n\n<pre><code>ghci&gt; :t func\nfunc :: Float -&gt; Tree\n</code></pre>\n\n<p>which tells you the type.</p></li>\n<li><p>But you said in your comment that you are wanting to write</p>\n\n<pre><code>if func == Tree then 0 else 1\n</code></pre>\n\n<p>which is not possible.  In particular, you can't write any function like</p>\n\n<pre><code>isTree :: a -&gt; Bool\nisTree x = if x :: Tree then True else False\n</code></pre>\n\n<p>because it would violate <em>parametericity</em>, which is a neat property that all polymorphic functions in Haskell have, which is explored in the paper <a href=\"http://ecee.colorado.edu/ecen5533/fall11/reading/free.pdf\" rel=\"nofollow noreferrer\">Theorems for Free</a>.  </p></li>\n<li><p>But you <em>can</em> write such a function with some simple generic mechanisms that have popped up; essentially, if you want to know the type of something at runtime, it needs to have a <code>Typeable</code> constraint (from the module <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Typeable.html\" rel=\"nofollow noreferrer\"><code>Data.Typeable</code></a>).  Almost every type is <code>Typeable</code> -- we just use the constraint to indicate the violation of parametericity and to indicate to the compiler that it needs to pass runtime type information.</p>\n\n<pre><code>import Data.Typeable\nimport Data.Maybe (isJust)\n\ndata Tree = Leaf Float | ...\n    deriving (Typeable) -- we need Trees to be typeable for this to work\n\nisTree :: (Typeable a) =&gt; a -&gt; Bool\nisTree x = isJust (cast x :: Maybe Tree)\n</code></pre></li>\n<li><p>But from my experience, you probably don't actually need to ask this question.  In Haskell this question is a lot less necessary than in other languages.  But I can't be sure unless I know what you are trying to accomplish by asking.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "is_accepted": false, "score": 0, "last_activity_date": 1490576433, "creation_date": 1490576433, "answer_id": 43036393, "question_id": 43035652, "link": "https://stackoverflow.com/questions/43035652/haskell-type-checking-in-code/43036393#43036393", "title": "Haskell type checking in code", "body": "<p>Here's how to determine what the type of a binding is in Haskell: take something like <code>f a1 a2 a3 ... an = someExpression</code> and turn it into <code>f = \\a1 -&gt; \\a2 -&gt; \\a3 -&gt; ... \\an -&gt; someExpression</code>. Then find the type of the expression on the right hand side.</p>\n\n<p>To find the type of an expression, simply add a <code>SomeType -&gt;</code> for each lambda, where <code>SomeType</code> is whatever the appropriate type of the bound variable is. Then use the known types in the remaining (lambda-less) expression to find its actual type.</p>\n\n<p>For your example: <code>func a = Leaf a</code> turns into <code>func = \\a -&gt; Leaf a</code>. Now to find the type of <code>\\a -&gt; Leaf a</code>, we add a <code>SomeType -&gt;</code> for the lambda, where <code>SomeType</code> is <code>Float</code> in this case. (because <code>Leaf :: Float -&gt; Tree</code>, so if <code>Leaf</code> is applied to <code>a</code>, then <code>a :: Float</code>) This gives us <code>Float -&gt; ???</code></p>\n\n<p>Now we find the type of the lambda-less expression <code>Leaf (a :: Float)</code>, which is <code>Tree</code> because <code>Leaf :: Float -&gt; Tree</code>. Now we can add substitute <code>Tree</code> for <code>???</code> to get <code>Float -&gt; Tree</code>, the actual type of <code>func</code>.</p>\n\n<p>As you can see, we did that all by just looking at the source code. This means that no matter what, <code>func</code> will always have that type, so there is no need to check whether or not it does. In fact, the compiler will throw out all information about the type of <code>func</code> when it compiles your code, and your code will still work properly because of type-checking. (The caveat to this (<code>Typeable</code>) is pointed out in the other answer)</p>\n\n<p><strong>TL;DR</strong>: Haskell is statically typed, so <code>func</code> <em>always</em> has the type <code>Float -&gt; Tree</code>, so asking how to check whether that is true doesn't make sense.</p>\n"}], "owner": {"reputation": 37, "user_id": 6301280, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8ef7990511929b37293f8bb51ff1192?s=128&d=identicon&r=PG&f=1", "display_name": "naber2", "link": "https://stackoverflow.com/users/6301280/naber2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1490576433, "creation_date": 1490569788, "last_edit_date": 1490569909, "question_id": 43035652, "link": "https://stackoverflow.com/questions/43035652/haskell-type-checking-in-code", "title": "Haskell type checking in code", "body": "<p>Could you please show me how can I check if type of <code>func</code> is <code>Tree</code> or not, in code not in command page?</p>\n\n<pre><code>data Tree = Leaf Float | Gate [Char] Tree Tree deriving (Show, Eq, Ord)\nfunc a = Leaf a\n</code></pre>\n"}, {"tags": ["haskell", "recursion", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "edited": false, "score": 0, "creation_date": 1490574643, "post_id": 43035693, "comment_id": 73157608, "body": "I will find you, and I will hug you (&#39;queue Liam Neeson voice&#39;)."}], "tags": [], "owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "is_accepted": true, "score": 7, "last_activity_date": 1490571136, "last_edit_date": 1490571136, "creation_date": 1490570071, "answer_id": 43035693, "question_id": 43035575, "link": "https://stackoverflow.com/questions/43035575/how-can-i-execute-multiple-statements-in-a-single-function/43035693#43035693", "title": "How can I execute multiple statements in a single function?", "body": "<p>I think the cleanest way is to create the board without doing any <code>IO</code> and then at the end only to print it out using <code>IO</code>.</p>\n\n<p>You can use <code>concat</code> and <code>replicate</code> to achieve this:</p>\n\n<pre><code>board :: Int -&gt; Int -&gt; String\nboard x y = concat (replicate y (aRow x))\n</code></pre>\n\n<p>You are probably missing a line at the bottom but I'll let you figure this out!</p>\n\n<p>By the way, <code>take (4*n) (intercalate \"\" (repeat \"---+\"))</code> is the same as <code>concat (replicate n \"---+\")</code> so you could write <code>aRow</code> as:</p>\n\n<pre><code>aRow :: Int -&gt; String\naRow n = '+' : concat (replicate n \"---+\")\n      ++ \"\\n|\" ++ concat (replicate n \"   |\")\n      ++ \"\\n\"\n</code></pre>\n\n<p><strong>Edit</strong>: I would use <code>unlines :: [String] -&gt; String</code> to concatenate several <code>String</code>s on multiple lines:</p>\n\n<pre><code>aRow :: Int -&gt; String\naRow n = unlines\n  [ '+' : concat (replicate n \"---+\")\n  , '|' : concat (replicate n \"   |\")\n  ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 2, "last_activity_date": 1490570721, "last_edit_date": 1490570721, "creation_date": 1490570116, "answer_id": 43035702, "question_id": 43035575, "link": "https://stackoverflow.com/questions/43035575/how-can-i-execute-multiple-statements-in-a-single-function/43035702#43035702", "title": "How can I execute multiple statements in a single function?", "body": "<p>So you want to execute an <code>IO ()</code>, and then yet another <code>IO ()</code> action. Together they should be an <code>IO ()</code> as well. So you're looking for a combinator with signature <code>IO () -&gt; IO () -&gt; IO ()</code>. You can <a href=\"https://www.haskell.org/hoogle/?hoogle=IO+%28%29+-%3E+IO+%28%29+-%3E+IO+%28%29\" rel=\"nofollow noreferrer\">ask Hoogle about this</a>... oh dear, that gives quite a lot of irrelevant results. But also <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#v:-62--62-\" rel=\"nofollow noreferrer\">the right one, namely</a></p>\n\n<pre><code>(&gt;&gt;) :: Monad m =&gt; m a -&gt; m b -&gt; m b\n</code></pre>\n\n<p>Your <code>IO () -&gt; IO () -&gt; IO ()</code> is a special case of this signature, obtained by setting <code>m ~ IO</code> and <code>a ~ b ~ ()</code>. So, you can write</p>\n\n<pre><code>board x y = putStrLn (aRow y)\n         &gt;&gt; board (x-1) y\n</code></pre>\n\n<p>Because these <em>monadic sequencing operators</em> are quite often used in Haskell, it has special syntactic-sugar syntax for them, namely</p>\n\n<pre><code>board x y = do\n    putStrLn (aRow y)\n    board (x-1) y\n</code></pre>\n\n<p>Ok so this works, but it's not really idiomatic. Manual recursion \u201cloops\u201d with a \u201ccounter variable\u201d <code>x</code> are awkward and rather error-prone (you need to get the initial, termination and stepping conditions right). Really, all you're doing there is <em>execute the same action <code>x</code> times in a row</em>. So really you're interested in <code>Int -&gt; IO () -&gt; IO ()</code>. Again <a href=\"https://www.haskell.org/hoogle/?hoogle=Int+-%3E+IO+%28%29+-%3E+IO+%28%29\" rel=\"nofollow noreferrer\">ask Hoogle</a>; this time <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#v:replicateM\" rel=\"nofollow noreferrer\">the right result</a> comes up a bit earlier...</p>\n\n<pre><code>replicateM_ :: Applicative m =&gt; Int -&gt; m a -&gt; m ()\n</code></pre>\n\n<p>so</p>\n\n<pre><code>board :: Int -&gt; Int -&gt; IO ()\nboard x y = replicateM_ x $ putStrLn (aRow y)\n</code></pre>\n\n<p>Even better, as Boomerang remarks, is to avoid IO looping altogether.</p>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1490615771, "last_edit_date": 1490615771, "creation_date": 1490570124, "answer_id": 43035705, "question_id": 43035575, "link": "https://stackoverflow.com/questions/43035575/how-can-i-execute-multiple-statements-in-a-single-function/43035705#43035705", "title": "How can I execute multiple statements in a single function?", "body": "<p>You just need to sequence the two monadic functions:</p>\n\n<pre><code>board x y = putStrLn (aRow y) &gt;&gt; board (x - 1) y\n</code></pre>\n\n<p>or with <code>do</code> notation</p>\n\n<pre><code>board x y = do\n    putStrLn (aRow y)\n    board (x - 1) y\n</code></pre>\n\n<p>Note that <code>x == 0</code> makes a more natural base case:</p>\n\n<pre><code>board 0 y = return ()\nboard x y = do\n   putStrLn (aRow y)\n   board (x - 1) (aRow y)\n</code></pre>\n\n<p>See Boomerang's answer for a more idiomatic way of writing the function, though.</p>\n"}], "owner": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 0, "accepted_answer_id": 43035693, "answer_count": 3, "score": 1, "last_activity_date": 1490615771, "creation_date": 1490569220, "question_id": 43035575, "link": "https://stackoverflow.com/questions/43035575/how-can-i-execute-multiple-statements-in-a-single-function", "title": "How can I execute multiple statements in a single function?", "body": "<p>I am learning Haskell and for an assignment I have to print a Snakes and Ladders game.  Starting out, I am trying to print the board and this is what I've done.</p>\n\n<pre><code>import Data.List\naRow :: Int -&gt; String\naRow n = \"+\" ++ take (4*n) (intercalate \"\" (repeat \"---+\")) ++ \"\\n|\" ++      take (4*n) (intercalate \"\" (repeat \"   |\")) ++ \"\\n\"\n\nboard :: Int -&gt; Int -&gt; IO()\nboard 1 y = putStrLn (aRow y)\n</code></pre>\n\n<p>I would like another instance of board such that it takes arguments x and y  </p>\n\n<pre><code>board x y = putStrLn (aRow y)\n            board (x-1) y\n</code></pre>\n\n<p>I know that I can't just call multiple statements like this, but can anyone provide some insight about how I can go along with this? I want to call aRow with argument 'y' and do that 'x' times.  </p>\n\n<p>Thanks.</p>\n\n<p>Also: when I call board 1 y I get this as output:\n    board 1 5<br>\n    +---+---+---+---+---+<br>\n    |&emsp;&nbsp;&nbsp;|&emsp;&nbsp;|&emsp;&nbsp;|&emsp;&nbsp;&nbsp;|&emsp;&nbsp;|</p>\n"}, {"tags": ["haskell", "conduit"], "comments": [{"owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "edited": false, "score": 0, "creation_date": 1490569452, "post_id": 43035185, "comment_id": 73156443, "body": "What is module is <code>C</code> in <code>C.print</code>?"}, {"owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "reply_to_user": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "edited": false, "score": 0, "creation_date": 1490598253, "post_id": 43035185, "comment_id": 73164400, "body": "<code>Data.Conduit.Combinators</code>"}], "answers": [{"tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": true, "score": 2, "last_activity_date": 1490603321, "creation_date": 1490603321, "answer_id": 43041399, "question_id": 43035185, "link": "https://stackoverflow.com/questions/43035185/conduit-exception/43041399#43041399", "title": "Conduit Exception", "body": "<p>The <code>catchC</code> function works on individual components of a pipeline, like <code>sourceDirectory \"somedir\"</code> (in other words, things of type <code>ConduitM</code>). You've applied it to a <em>completely run</em> pipeline, which is just a normal action, and therefore <code>catchC</code> won't work. Your choices are:</p>\n\n<ul>\n<li>Apply <code>catchC</code> to the individual component, e.g. <code>(sourceDirectory \"foo\" `catchC` handler) $$ printC</code></li>\n<li>Use a non-conduit-specific <code>catch</code> function (such as from <a href=\"https://haskell-lang.org/library/safe-exceptions\" rel=\"nofollow noreferrer\">safe-exceptions</a>), e.g. <code>(sourceDirectory \"foo\" $$ printC) `catch` handler</code>.</li>\n</ul>\n\n<p>Also, a recommendation for the future: it's a good idea to include the compiler error when some code won't build.</p>\n"}], "owner": {"reputation": 5139, "user_id": 705510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7xrNQ.png?s=128&g=1", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/705510/mcbear-holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 1, "accepted_answer_id": 43041399, "answer_count": 1, "score": 2, "last_activity_date": 1490603321, "creation_date": 1490566248, "question_id": 43035185, "link": "https://stackoverflow.com/questions/43035185/conduit-exception", "title": "Conduit Exception", "body": "<p>I couldn't figure out how to make <code>sourceDirectory</code> and <code>catchC</code> work.</p>\n\n<pre><code>src = (sourceDirectory \"/does/not/exist/input.txt\" $$ C.print) `catchC` \\e -&gt;\n    yield (pack $ \"Could not read input file: \" ++ show (e :: IOException))\n</code></pre>\n\n<p>The idea is that I use sourceDirectory to walk a directory tree and in case of failure I want the program to continue and not stop.</p>\n"}, {"tags": ["list", "haskell", "dictionary"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490567017, "post_id": 43035176, "comment_id": 73155837, "body": "Is <code>b</code> guaranteed to be sorted?"}], "answers": [{"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490567760, "post_id": 43035337, "comment_id": 73156031, "body": "Note that it is easy to work with one-based indices by using <code>i-1</code>. But +1 :)"}], "tags": [], "owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "is_accepted": false, "score": 2, "last_activity_date": 1490567544, "last_edit_date": 1490567544, "creation_date": 1490567236, "answer_id": 43035337, "question_id": 43035176, "link": "https://stackoverflow.com/questions/43035176/selecting-string-elements-in-a-list-using-integer-elements-from-another-list/43035337#43035337", "title": "Selecting string elements in a list using integer elements from another list", "body": "<p>I am going to assume you're using <code>b = [0, 2]</code> instead (lists are 0 indexed in Haskell).</p>\n\n<p>You can use a fold to build the new list:</p>\n\n<pre><code>selectIndices :: [a] -&gt; [Int] -&gt; [a]\nselectIndices as is = foldr (\\i bs -&gt; as !! i : bs) [] is\n</code></pre>\n\n<p>This starts with an empty list and adds new elements by selecting them from the list of <code>as</code> using an index <code>i</code> from the list of indices <code>is</code>.</p>\n\n<p>More advanced: if you prefer a <em>point-free</em> style, the same function can be written:</p>\n\n<pre><code>selectIndices :: [a] -&gt; [Int] -&gt; [a]\nselectIndices as = foldr ((:) . (as !!)) []\n</code></pre>\n\n<p>Another approach which could be more efficient if the indices are sorted would be to go through the list one element at a time while keeping track of the current index:</p>\n\n<pre><code>selectIndices :: [a] -&gt; [Int] -&gt; [a]\nselectIndices as is = go as 0 (sort is)\n  where\n    go :: [a] -&gt; Int -&gt; [Int] -&gt; [a]\n    go [] _ _  = []\n    go _  _ [] = []\n    go (a:as) n (i:is)\n      | n == i    = a : go as (n + 1) is\n      | otherwise = go as (n + 1) (i:is)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "edited": false, "score": 0, "creation_date": 1490568181, "post_id": 43035374, "comment_id": 73156131, "body": "In your last example, are you using a guard to avoid a nested where clause?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "edited": false, "score": 0, "creation_date": 1490568331, "post_id": 43035374, "comment_id": 73156166, "body": "Well that was not the intend, but it is indeed a nice side effect: it is a pattern guard. Such that if somehow the drop results in an empty list <code>[]</code> we know something is wrong."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1490568305, "last_edit_date": 1490568305, "creation_date": 1490567466, "answer_id": 43035374, "question_id": 43035176, "link": "https://stackoverflow.com/questions/43035176/selecting-string-elements-in-a-list-using-integer-elements-from-another-list/43035374#43035374", "title": "Selecting string elements in a list using integer elements from another list", "body": "<p>The <em>straightfoward</em> way to do this is using the <a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:-33--33-\" rel=\"nofollow noreferrer\"><code>(!!) :: [a] -&gt; Int -&gt; a</code></a> operator that, for a given list and <strong>zero-based</strong> index, gives the <em>i</em>-th element.</p>\n\n<p>So you could do this with the following list comprehension:</p>\n\n<pre><code>filterIndex :: [a] -&gt; [Int] -&gt; [a]\nfilterIndex a b = [a!!(i-1) | i &lt;- b]\n</code></pre>\n\n<p>However this is <strong>not efficient</strong> since <code>(!!)</code> runs in <em>O(k)</em> with <em>k</em> the index. Usually if you work with <strong>lists</strong> you try to prevent looking up the <em>i</em>-th index.</p>\n\n<hr>\n\n<p>In case it is <strong>guaranteed that <code>b</code> is sorted</strong>, you can make it more efficient with:</p>\n\n<pre><code>-- Only if b is guaranteed to be sorted\nfilterIndex = filterIndex' 1\n    where filterIndex' _ _     [] = []\n          filterIndex' i a:as2 js@(j:js2)  | i == j = a : tl js2\n                                           | otherwise = tl js\n                                           where tl = filterIndex' (i+1) as2\n</code></pre>\n\n<p>Or even more efficient:</p>\n\n<pre><code>-- Only if b is guaranteed to be sorted\nfilterIndex = filterIndex' 1\n    where filterIndex' i l (j:js) | (a:as) &lt;- drop (j-i) l = a : filterIndex' (j+1) as (js)\n          filterIndex' _ _ [] = []\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 1, "last_activity_date": 1491193605, "last_edit_date": 1495535449, "creation_date": 1490570457, "answer_id": 43035750, "question_id": 43035176, "link": "https://stackoverflow.com/questions/43035176/selecting-string-elements-in-a-list-using-integer-elements-from-another-list/43035750#43035750", "title": "Selecting string elements in a list using integer elements from another list", "body": "<p>A simple approach is tagging the values in <code>a</code> with the indices and then filtering according to the indices:</p>\n\n<pre><code>filterIndex :: [Int] -&gt; [a] -&gt; [a]\nfilterIndex b = fmap snd . filter (\\(i, _) -&gt; i `elem` b) . zip [1..]\n-- non-point-free version:\n-- filterIndex b a = fmap snd (filter (\\(i, _) -&gt; i `elem` b) (zip [1..] a))\n</code></pre>\n\n<p>(If you want zero-based rather than one-based indexing, just change the infinite list to <code>[0..]</code>. You can even parameterise it with something like <code>[initial..]</code>.)</p>\n\n<p>If you need to make this more efficient, you might consider, among other things, a filtering algorithm that exploits ordering in <code>b</code> (cf. the answers by <a href=\"https://stackoverflow.com/a/43035337/2751851\">Boomerang</a> and <a href=\"https://stackoverflow.com/a/43035374/2751851\">Willem Van Onsem</a>), and building a <a href=\"https://hackage.haskell.org/package/containers-0.5.10.1/docs/Data-Map-Strict.html\" rel=\"nofollow noreferrer\">dictionary</a> from the <code>zip [1..] a</code> list of pairs.</p>\n"}], "owner": {"reputation": 85, "user_id": 4615106, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-Y5vmaLhXszI/AAAAAAAAAAI/AAAAAAAAAFg/IQHz1tBNRiw/photo.jpg?sz=128", "display_name": "George Burslem", "link": "https://stackoverflow.com/users/4615106/george-burslem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 43035374, "answer_count": 3, "score": 2, "last_activity_date": 1491193605, "creation_date": 1490566200, "last_edit_date": 1490566663, "question_id": 43035176, "link": "https://stackoverflow.com/questions/43035176/selecting-string-elements-in-a-list-using-integer-elements-from-another-list", "title": "Selecting string elements in a list using integer elements from another list", "body": "<p>I'm going to use an example to explain my question because I'm not sure the best way to put it into words.</p>\n\n<p>Lets say I have two lists <code>a</code> and <code>b</code>:</p>\n\n<p><code>a = [\"car\", \"bike\", \"train\"]</code> and <code>b = [1, 3]</code></p>\n\n<p>And I want to create a new list <code>c</code> by selecting the items in <code>a</code> whose positions correspond to the integers in <code>b</code>, so list <code>c = [\"car\", \"train\"]</code></p>\n\n<p>How would I do this in Haskell? I think I have to use list comprehension but am unsure how. Cheers. </p>\n"}, {"tags": ["performance", "haskell", "functional-programming", "fold"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1490554484, "post_id": 43033099, "comment_id": 73151641, "body": "Well you use <code>++</code> which runs in <i>O(n)</i> where <i>n</i> is the size of the left list... So you usually want to avoid that (since you are going to define a concat on a concat on a concat...)"}, {"owner": {"reputation": 3618, "user_id": 2621216, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/51uHg.jpg?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2621216/gavin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490554645, "post_id": 43033099, "comment_id": 73151701, "body": "@Willem Thank you for your timely response. For a <code>concatMap</code>, how can I avoid the <code>++</code>? Moreover, <code>f x</code> is of size 1 for the test case."}, {"owner": {"reputation": 2831, "user_id": 183792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ddcfbc6c31012fd25384f6301363347?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/183792/michael"}, "edited": false, "score": 4, "creation_date": 1490556662, "post_id": 43033099, "comment_id": 73152364, "body": "<code>foldl&#39;</code> is good if you are building something in a nice strict data type from a seed using a strict function to update - like an<code>Int</code> starting with an <code>Int</code> seed using <code>(+)</code> to take the simplest example. If you are constructing a list or other lazy structure from a list, <code>foldr</code> will be much more natural."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490557092, "post_id": 43033099, "comment_id": 73152530, "body": "Note your function is also incorrect - you should be reversing <code>f x</code> (try <code>concatMap (\\x -&gt; [-x,x]) [1,2,3]</code> and <code>concatMap&#39; (\\x -&gt; [-x,x]) [1,2,3]</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 3618, "user_id": 2621216, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/51uHg.jpg?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2621216/gavin"}, "edited": false, "score": 0, "creation_date": 1491189638, "post_id": 43034288, "comment_id": 73425782, "body": "Thanks for you explanation. I have one more follow-up question. How can I avoid stack overflow when I <code>foldr</code> lazy structures?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 3618, "user_id": 2621216, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/51uHg.jpg?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2621216/gavin"}, "edited": false, "score": 1, "creation_date": 1491210887, "post_id": 43034288, "comment_id": 73434219, "body": "@Gavin <code>foldr</code> works well when the function is not strict, otherwise it can result in a huge amount of thunks being created. So, foldr (\\x y -&gt; K e1 e2 .. en)` is OK, where <code>K</code> is a constructor. In the <code>map</code> example above, <code>K</code> was the list constructor <code>(:)</code>."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 6, "last_activity_date": 1490560832, "creation_date": 1490560832, "answer_id": 43034288, "question_id": 43033099, "link": "https://stackoverflow.com/questions/43033099/performance-gain-implementing-concatmap-with-foldl-for-finite-list/43034288#43034288", "title": "Performance gain implementing concatMap with foldl&#39; for finite list?", "body": "<blockquote>\n  <p>Are there any black magic in concatMap to make it so efficient?</p>\n</blockquote>\n\n<p>No, not really.</p>\n\n<blockquote>\n  <p>Is it true that <code>foldl'</code> is more efficient for long finite list?</p>\n</blockquote>\n\n<p>Not always. It depends on the folding function.</p>\n\n<p>The point is, <code>foldl</code> and <code>foldl'</code> always have to scan the whole input list before producing the output. Instead, <code>foldr</code> does not always have to.</p>\n\n<p>As an extreme case, consider</p>\n\n<pre><code>foldr (\\x xs -&gt; x) 0 [10..10000000]\n</code></pre>\n\n<p>which evaluates to <code>10</code> instantly -- only the first element of the list is evaluated. The reduction goes something like</p>\n\n<pre><code>foldr (\\x xs -&gt; x) 0 [10..10000000]\n= foldr (\\x xs -&gt; x) 0 (10 : [11..10000000])\n= (\\x xs -&gt; x) 10 (foldr (\\x xs -&gt; x) 0 [11..10000000])\n= (\\xs -&gt; 10) (foldr (\\x xs -&gt; x) 0 [11..10000000])\n= 10\n</code></pre>\n\n<p>and the recursive call is not evaluated thanks to laziness.</p>\n\n<p>In general, when computing <code>foldr f a xs</code>, it is important to check whether <code>f y ys</code> is able to construct a part of the output <em>before</em> evaluating <code>ys</code>. For instance</p>\n\n<pre><code>foldr f [] xs\nwhere f y ys = (2*y) : ys\n</code></pre>\n\n<p>produces a list cell <code>_ : _</code> before evaluating <code>2*y</code> and <code>ys</code>. This makes it an excellent candidate for <code>foldr</code>.</p>\n\n<p>Again, we can define</p>\n\n<pre><code>map f xs = foldr (\\y ys -&gt; f y : ys) [] xs\n</code></pre>\n\n<p>which runs just fine. It consumes one element from <code>xs</code> and outputs the first output cell. Then it consumes the next element, outputs the next element, and so on. Using <code>foldl'</code> would not output anything until the whole list is processed, making the code quite inefficient.</p>\n\n<p>Instead, if we wrote</p>\n\n<pre><code>sum xs = foldr (\\y ys -&gt; y+ys) 0 xs\n</code></pre>\n\n<p>then we do not output anything after the first element of <code>xs</code> is consumed. \nWe build a long chain of thunks, wasting a lot of memory.\nHere, <code>foldl'</code> would instead work in constant space.</p>\n\n<blockquote>\n  <p>Is it true that using <code>foldr</code> with long finite lists will build up a long unreduced chain and impact the performance?</p>\n</blockquote>\n\n<p>Not always. It strongly depends on how the output is consumed by the caller.</p>\n\n<p>As a thumb rule, if the output is \"atomic\", meaning that the output consumer can not observe only a part of it (e.g. <code>Bool, Int, ...</code>) then it's better to use <code>foldl'</code>. If the output is \"composed\" of many independent values (list, trees, ...) probably <code>foldr</code> is a better choice, if <code>f</code> can produce its output step-by-step, in a \"streaming\" fashion.</p>\n"}], "owner": {"reputation": 3618, "user_id": 2621216, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/51uHg.jpg?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2621216/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 43034288, "answer_count": 1, "score": 2, "last_activity_date": 1490560832, "creation_date": 1490554249, "last_edit_date": 1490554487, "question_id": 43033099, "link": "https://stackoverflow.com/questions/43033099/performance-gain-implementing-concatmap-with-foldl-for-finite-list", "title": "Performance gain implementing concatMap with foldl&#39; for finite list?", "body": "<p>I read from <a href=\"https://wiki.haskell.org/Foldr_Foldl_Foldl&#39;\" rel=\"nofollow noreferrer\">Foldr Foldl Foldl'</a> that <code>foldl'</code> is more efficient for long finite lists because of the strictness property. I am aware that it is not suitable for infinite list.</p>\n\n<p>Thus, I am limiting the comparison only for long finite lists.</p>\n\n<hr>\n\n<h1>concatMap</h1>\n\n<p><a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/src/Data.Foldable.html#concatMap\" rel=\"nofollow noreferrer\"><code>concatMap</code></a> is implemented using <code>foldr</code>, which gives it laziness. However, using it with long finite lists will build up a long unreduced chain according to the article.</p>\n\n<pre><code>concatMap :: Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]\nconcatMap f xs = build (\\c n -&gt; foldr (\\x b -&gt; foldr c b (f x)) n xs)\n</code></pre>\n\n<p>Thus I come up with the following implementation with use of <code>foldl'</code>.</p>\n\n<pre><code>concatMap' :: Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]\nconcatMap' f = reverse . foldl' (\\acc x -&gt; f x ++ acc) []\n</code></pre>\n\n<hr>\n\n<h1>Test it out</h1>\n\n<p>I have build the following two functions to test out the performance.</p>\n\n<pre><code>lastA = last . concatMap (: []) $ [1..10000]\nlastB = last . concatMap' (: []) $ [1..10000]\n</code></pre>\n\n<p>However, I was shocked by the results.</p>\n\n<pre><code>lastA:\n(0.23 secs, 184,071,944 bytes)\n(0.24 secs, 184,074,376 bytes)\n(0.24 secs, 184,071,048 bytes)\n(0.24 secs, 184,074,376 bytes)\n(0.25 secs, 184,075,216 bytes)\n\nlastB:   \n(0.81 secs, 224,075,080 bytes)\n(0.76 secs, 224,074,504 bytes)\n(0.78 secs, 224,072,888 bytes)\n(0.84 secs, 224,073,736 bytes)\n(0.79 secs, 224,074,064 bytes)\n</code></pre>\n\n<hr>\n\n<h1>Follow-up Questions</h1>\n\n<p><code>concatMap</code> outcompetes my <code>concatMap'</code> in both time and memory. I wonder there are mistakes I made in my <code>concatMap'</code> implementation.</p>\n\n<p>Thus, I doubt the articles for stating the goodness of <code>foldl'</code>.</p>\n\n<ol>\n<li><p>Are there any black magic in <code>concatMap</code> to make it so efficient?</p></li>\n<li><p>Is it true that <code>foldl'</code> is more efficient for long finite list?</p></li>\n<li><p>Is it true that using <code>foldr</code> with long finite lists will build up a long unreduced chain and impact the performance?</p></li>\n</ol>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 3, "creation_date": 1490553123, "post_id": 43032842, "comment_id": 73151138, "body": "<code>sequenceonces = Data.List.isInfixOf [1,1]</code>"}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490553154, "post_id": 43032842, "comment_id": 73151149, "body": "Could you elaborate? What&#39;s the second &quot;Int&quot; parameter you&#39;re passing?"}, {"owner": {"reputation": 186, "user_id": 5021993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206351893774300/picture?type=large", "display_name": "Benjamin Diaz", "link": "https://stackoverflow.com/users/5021993/benjamin-diaz"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490566006, "post_id": 43032842, "comment_id": 73155571, "body": "@AlexisKing <code>sequenceonces = Data.List.isInfixOf  [1,1] [1,0,1,1,0]</code>"}], "owner": {"reputation": 1, "user_id": 7770487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316b9d0f9c7ead6a9b1520a1db7fa540?s=128&d=identicon&r=PG&f=1", "display_name": "Beckit", "link": "https://stackoverflow.com/users/7770487/beckit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1490559331, "answer_count": 0, "score": 0, "last_activity_date": 1490552972, "creation_date": 1490552868, "last_edit_date": 1490552972, "question_id": 43032842, "link": "https://stackoverflow.com/questions/43032842/return-true-if-and-only-if-ls-contains-the-string-11", "closed_reason": "Duplicate", "title": "Return True if and only if ls contains the string 11", "body": "<p>Apologies but i'm a complete beginner at Haskell I'm working on a function in Haskell that returns True if an only if a list of integers returns exactly 11 eg.</p>\n\n<pre><code>Main&gt; sequenceones  [1,0,1,1,0] \nTrue    \nMain&gt; sequenceones  [1,0,0,1,0,1]   \nFalse   \nMain&gt;   \n</code></pre>\n\n<p>this is what I have so far:</p>\n\n<pre><code>sequenceones :: [Int] -&gt; Int -&gt; Bool\nsequenceones ls n = (count ls n) == 1\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming", "newline"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "edited": false, "score": 0, "creation_date": 1490550006, "post_id": 43032266, "comment_id": 73149963, "body": "Haha, I&#39;ve actually tried that but being new to the language I couldn&#39;t quite get the type signature down.. could you help me out with that? Thanks."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "edited": false, "score": 1, "creation_date": 1490550100, "post_id": 43032266, "comment_id": 73149997, "body": "@Cameron What type signature? <code>putStrLn (aRow 1)</code>"}, {"owner": {"reputation": 1184, "user_id": 1133626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43a0439a260464652eb0d502eada677?s=128&d=identicon&r=PG", "display_name": "jakeehoffmann", "link": "https://stackoverflow.com/users/1133626/jakeehoffmann"}, "reply_to_user": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "edited": false, "score": 1, "creation_date": 1490550464, "post_id": 43032266, "comment_id": 73150135, "body": "@Cameron I&#39;ve included your code in my answer along with how you&#39;d call that function using putStrLn appropriately, as melpomene suggested. Is it clear now?"}, {"owner": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "edited": false, "score": 0, "creation_date": 1490550584, "post_id": 43032266, "comment_id": 73150176, "body": "And now I feel really stupid.  Functional programming is increasingly difficult to wrap my head around after spending countless hours on Python and C++.  Thank you @jakeehoffmann"}, {"owner": {"reputation": 1184, "user_id": 1133626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43a0439a260464652eb0d502eada677?s=128&d=identicon&r=PG", "display_name": "jakeehoffmann", "link": "https://stackoverflow.com/users/1133626/jakeehoffmann"}, "edited": false, "score": 0, "creation_date": 1490550831, "post_id": 43032266, "comment_id": 73150271, "body": "No problem, chaining functions together to accomplish a task is the name of the game in functional programming. You generated this string using your function, then you want it to print nicely. You could add a third, intermediate function to the chain that adds &quot;begin string&quot; to the front and &quot;end string&quot; to the end. So on and so forth."}], "tags": [], "owner": {"reputation": 1184, "user_id": 1133626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43a0439a260464652eb0d502eada677?s=128&d=identicon&r=PG", "display_name": "jakeehoffmann", "link": "https://stackoverflow.com/users/1133626/jakeehoffmann"}, "is_accepted": true, "score": 5, "last_activity_date": 1490550344, "last_edit_date": 1495542747, "creation_date": 1490549927, "answer_id": 43032266, "question_id": 43032227, "link": "https://stackoverflow.com/questions/43032227/new-line-in-haskell/43032266#43032266", "title": "New line in Haskell", "body": "<p><a href=\"https://stackoverflow.com/a/5944062/1848654\">https://stackoverflow.com/a/5944062/1848654</a>:</p>\n\n<blockquote>\n  <p>If you just evaluate a string expression in ghci without using <code>putStr</code> or <code>putStrLn</code>, it will just call show on it, so for example the string <code>\"foo\\n\"</code> will display as <code>\"foo\\n\"</code> in ghci, but that does not change the fact that it's a string containing a newline and it will print that way, once you output it using <code>putStr</code>.</p>\n</blockquote>\n\n<p>Long story short, you may want to use <code>putStr</code> as Haskell will default to using <code>show</code> on that string and that will display the <code>\\n</code> plainly as it has done for you here.  </p>\n\n<p>Example:</p>\n\n<pre><code>import Data.List\n\nmain = putStrLn(aRow 4) \n\naRow :: Int -&gt; String\naRow n = \"+\" ++ take (4*n) (intercalate \"\" (repeat \"---+\")) ++ \"\\n|\" ++      take (4*n) (intercalate \"\" (repeat \"   |\"))\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3149139, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/588150594/picture?type=large", "display_name": "Cameron", "link": "https://stackoverflow.com/users/3149139/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 0, "accepted_answer_id": 43032266, "answer_count": 1, "score": 4, "last_activity_date": 1490550344, "creation_date": 1490549738, "last_edit_date": 1490549898, "question_id": 43032227, "link": "https://stackoverflow.com/questions/43032227/new-line-in-haskell", "title": "New line in Haskell", "body": "<p>I've been looking through previously asked questions and I can't find an answer that solves my problem, although I thought at least one of them would.  I'm simply trying to have a newline character added between my strings inside of a function.  Whenever I add a \"\\n\" to a string, it simply prints the \"\\n\"</p>\n\n<pre><code>import Data.List\n-- aRow takes number of columns as argument\n-- The idea is to use this function with the number of columns as argument.\n-- Example, if we want 3 columns, we'd say aRow 3, and get \"+---+---+---+\"\n\naRow :: Int -&gt; String\naRow n = \"+\" ++ take (4*n) (intercalate \"\" (repeat \"---+\")) ++ \"\\n|\" ++ take (4*n) (intercalate \"\" (repeat \"   |\"))\n</code></pre>\n\n<p>This is the output I'm getting</p>\n\n<pre><code>\"+---+---+---+---+\\n|   |   |   |   |\"\n</code></pre>\n\n<p>and I'd prefer </p>\n\n<pre><code>\"+---+---+---+---+\" \n\"|   |   |   |   |\"\n</code></pre>\n\n<p>Where the lines are on separate lines (Also there's supposed to be 3 spaces between the vertical bars, ignore my formatting.  I'm mainly trying to get the newline character working).  Thank you.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 4733, "user_id": 728407, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/26b3f058ce75a05fd2ccc561f1cfa501?s=128&d=identicon&r=PG", "display_name": "Ashish Negi", "link": "https://stackoverflow.com/users/728407/ashish-negi"}, "edited": false, "score": 0, "creation_date": 1490546657, "post_id": 43031495, "comment_id": 73148673, "body": "what have you written ? and what errors you got ?"}, {"owner": {"reputation": 2831, "user_id": 183792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ddcfbc6c31012fd25384f6301363347?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/183792/michael"}, "edited": false, "score": 1, "creation_date": 1490546661, "post_id": 43031495, "comment_id": 73148676, "body": "What does the data type <code>Tree</code> look like? It seems clear it should be <code>Tree a</code> so that it can store things of any type <code>a</code> in the leaves."}, {"owner": {"reputation": 41, "user_id": 7770168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1343752269019449/picture?type=large", "display_name": "Seba", "link": "https://stackoverflow.com/users/7770168/seba"}, "edited": false, "score": 0, "creation_date": 1490547475, "post_id": 43031495, "comment_id": 73148983, "body": "That&#39;s what I did"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1490552113, "post_id": 43032200, "comment_id": 73150762, "body": "Nice answer. Yet, I consider the last <code>Data.Foldable</code> suggestion misleading. The folding of <code>Data.Foldable</code> is the one obtained by flattening the data type to a list, and then folding there. It is not the general catamorphism like the above <code>fold :: (a -&gt; a -&gt; a) -&gt; Tree a -&gt; a</code>, so it can easily cause confusion."}], "tags": [], "owner": {"reputation": 497, "user_id": 3979725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj52I.jpg?s=128&g=1", "display_name": "David Lilue", "link": "https://stackoverflow.com/users/3979725/david-lilue"}, "is_accepted": false, "score": 4, "last_activity_date": 1490550316, "last_edit_date": 1490550316, "creation_date": 1490549622, "answer_id": 43032200, "question_id": 43031495, "link": "https://stackoverflow.com/questions/43031495/haskell-fold-function-on-tree/43032200#43032200", "title": "Haskell fold function on tree", "body": "<p>One thing, in the signature of your function <code>fold</code>, you're saying that it'll receive 2 arguments, a binary function (could be an operator), a Tree and returns an <code>a</code>. Now, in the defintion you have 3 arguments, <code>f</code>, some <code>v</code> and a constructor of <code>Tree</code>.</p>\n\n<p>The solution could be this one:</p>\n\n<pre><code>fold :: (Int -&gt; Int -&gt; Int) -&gt; Tree -&gt; Int\nfold f (Leaf n) = n\nfold f (Fork l n r) = f n m\n    where\n        m = f (fold f l) (fold f r)\n</code></pre>\n\n<p>You need to say that you are returning a <code>Int</code> because your <code>Tree</code> holds <code>Int</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Furthermore, you can redefine your data with a rigid type variable. </p>\n\n<pre><code>data Tree a = Leaf a\n            | Fork (Tree a) a (Tree a)\n     deriving Show\n\n\nfold :: (a -&gt; a -&gt; a) -&gt; Tree a -&gt; a\nfold f (Leaf n) = n\nfold f (Fork l n r) = f n m\n    where\n        m = f (fold f l) (fold f r)\n</code></pre>\n\n<p>I suggest you to read the documentation of <a href=\"https://hackage.haskell.org/package/base-4.5.0.0/docs/Data-Foldable.html\" rel=\"nofollow noreferrer\">Data.Foldable</a>. They have an example with a <code>Tree</code> data type.</p>\n"}, {"tags": [], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "is_accepted": false, "score": 3, "last_activity_date": 1490550529, "creation_date": 1490550529, "answer_id": 43032389, "question_id": 43031495, "link": "https://stackoverflow.com/questions/43031495/haskell-fold-function-on-tree/43032389#43032389", "title": "Haskell fold function on tree", "body": "<p>Folds can be somewhat mechanically derived from any type. Here's <code>foldMaybe</code>:</p>\n\n<pre><code>data Maybe a = Nothing | Just a\n\nfoldMaybe :: r -&gt; (a -&gt; r) -&gt; Maybe a -&gt; r\nfoldMaybe _ k (Just a) = k a\nfoldMaybe d _ Nothing  = d\n</code></pre>\n\n<p>To \"fold\" a data type means that we are going to provide a way of combining each of the possible constructors for that type into a final type <code>r</code>. Here, <code>Maybe</code> has two constructors: one with 0 values, and one with a single value of type <code>a</code>. So, to fold it, we need to provide a value for the <code>Nothing</code> case, and a function to convert the <code>Just a</code> into an <code>r</code>. </p>\n\n<p>Let's look at <code>list</code>, and see how <code>foldr</code> is derived from it.</p>\n\n<pre><code>data List a = Nil | Cons a (List a)\n\n           [1]   [2    3    4]             [4]\nfoldList :: r -&gt; (a -&gt; r -&gt; r) -&gt; List a -&gt; r\n</code></pre>\n\n<ol>\n<li>This is the value to use when replacing the <code>Nil</code> in the list.</li>\n<li>This is the function to use for combining the <code>Cons</code> case. Since <code>Cons</code> has an <code>a</code> as it's first value, the function must take an <code>a</code>.</li>\n<li>The second value that <code>Cons</code> takes is a <code>(List a)</code>, so why are we taking an <code>r</code>? Well! We're defining a function that can take a <code>List a</code> and return an <code>r</code>, so we'll process the rest of the list before combining with the current node.</li>\n<li>The fold function returns <code>r</code>.</li>\n</ol>\n\n<p>What does the implementation look like?</p>\n\n<pre><code>foldList nil cons list = case list of\n    Nil -&gt; nil\n    Cons a as -&gt; cons a (foldList nil cons list)\n</code></pre>\n\n<p>So we replace all of the constructors with their \"destructor\" counterparts, recursing where necessary.</p>\n\n<p>For trees:</p>\n\n<pre><code>data Tree = Leaf Int | Fork Tree Int Tree\n</code></pre>\n\n<p>We have two constructors: one takes an <code>Int</code>, and the other takes three parameters <code>Tree</code>, <code>Int</code>, and <code>Tree</code>.</p>\n\n<p>Let us write the type signature!</p>\n\n<pre><code>treeFold :: LeafCase r -&gt; ForkCase r -&gt; r\n</code></pre>\n\n<p>Ah, but we have to define <code>LeafCase</code>:</p>\n\n<pre><code>type LeafCase r = Int -&gt; r\n</code></pre>\n\n<p>Since <code>Leaf</code> takes a single Int as parameter, that's what the type of this function must be.</p>\n\n<pre><code>type ForkCase r = r -&gt; Int -&gt; r -&gt; r\n</code></pre>\n\n<p>Likewise, we replace all the recursive uses of <code>Tree</code> in <code>Fork</code> with the <code>r</code> type parameter. So our full function looks like:</p>\n\n<pre><code>foldTree :: (Int -&gt; r) -&gt; (r -&gt; Int -&gt; r -&gt; r) -&gt; Tree -&gt; r\n</code></pre>\n\n<p>The implementation might start like:</p>\n\n<pre><code>foldTree leaf fork tree = case tree of\n    Leaf i -&gt; error \"halp\"\n    Fork l i r -&gt; error \"complete me?\"\n</code></pre>\n\n<p>and I feel confident that you can fill in those holes :)</p>\n"}], "owner": {"reputation": 41, "user_id": 7770168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1343752269019449/picture?type=large", "display_name": "Seba", "link": "https://stackoverflow.com/users/7770168/seba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1668, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490551178, "creation_date": 1490546235, "last_edit_date": 1490551178, "question_id": 43031495, "link": "https://stackoverflow.com/questions/43031495/haskell-fold-function-on-tree", "title": "Haskell fold function on tree", "body": "<p>I'm struggling with this example:</p>\n\n<blockquote>\n  <p>Write a fold function that folds a function over a tree. (Thus, for\n  example, <code>fold min t</code> would find the smallest element in tree.)</p>\n\n<pre><code>fold :: (a -&gt; a -&gt; a) -&gt; Tree -&gt; a\n</code></pre>\n</blockquote>\n\n<p>*That's my script </p>\n\n<pre><code>data Tree = Leaf Int\n          | Fork Tree Int Tree\n     deriving Show\n\n\nt0 = Leaf 0\nt1 = Fork (Fork (Leaf 1) 2 (Leaf 3)) 4 (Fork (Leaf 5) 6 (Leaf 7))\nt2 = Fork (Fork (Fork (Leaf 1) 2 (Leaf 3)) 4 (Leaf 5)) 6 (Leaf 7)\n\nfold :: (a -&gt; a -&gt; a) -&gt; Tree -&gt; a\nfold f v (Leaf n) = v\nfold f v (Fork l n r) = f (Folk l) (fold f v (Fork r))\n</code></pre>\n\n<p>Thanks for any advice </p>\n"}, {"tags": ["list", "haskell", "max"], "comments": [{"owner": {"reputation": 67, "user_id": 5831174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-9ZPl9P7x9y8/AAAAAAAAAAI/AAAAAAAAAGg/Xfw4TrmdWAw/photo.jpg?sz=128", "display_name": "Mar Oli", "link": "https://stackoverflow.com/users/5831174/mar-oli"}, "edited": false, "score": 0, "creation_date": 1490544435, "post_id": 43031129, "comment_id": 73147737, "body": "It&#39;s like func4 [[2,4],[4,7],[7,9]] -&gt; [4,7,9]"}], "answers": [{"comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490554174, "post_id": 43031206, "comment_id": 73151532, "body": "Do you really need a <code>Foldable t</code> type definition or just <code>[[b]]</code> would suffice like <code>Ord b =&gt; [[b]] -&gt; [b]</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490554231, "post_id": 43031206, "comment_id": 73151550, "body": "@Redu: Well the most generic type signature is <code>Foldable t</code>, but I guess it is indeed better to use <code>[[b]]</code> here, since <code>Foldable</code> is a bit harder to understand than a list I guess."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490554579, "post_id": 43031206, "comment_id": 73151677, "body": "Well... i was just being curious about what other types than a list would benefit. It&#39;s my limitation :)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1490554670, "post_id": 43031206, "comment_id": 73151709, "body": "@Redu: well the advantage of <code>Foldable</code> is that one can use for instance a binary tree, make it foldable, and then we can calculate the maximum of binary trees as well. Usually it is a good idea to use type classes (although that is only my own experience)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1490554256, "last_edit_date": 1490554256, "creation_date": 1490544746, "answer_id": 43031206, "question_id": 43031129, "link": "https://stackoverflow.com/questions/43031129/calculate-maximum-of-every-list-for-a-list-of-lists/43031206#43031206", "title": "Calculate maximum of every list for a list of lists", "body": "<p>The reason it does not work is because <code>func4</code> expects - as you say yourself - a list of lists. So <code>[[x,y]]</code> is a list of lists. Now that means that <code>[x,y]</code> is a list of <em>items</em>. You cannot know for sure that <code>x</code> and <code>y</code> are lists themselves where you can calculate the <code>maximum</code> from (and even if that works, it is not correct).</p>\n\n<p>you can simply omit the <code>[[x,y]]</code> pattern and use <code>l</code> (the list of lists), like:</p>\n\n<pre><code>func4 :: Ord b =&gt; [[b]] -> [b]\nfunc4 <b>l</b> = map maximum <b>l</b></code></pre>\n\n<p>Or even better, use <em>eta-reduction</em>:</p>\n\n<pre><code>-- with eta-reduction\n\nfunc4 :: Ord b =&gt; [[b]] -> [b]\nfunc4 = map maximum -- look mom... no variables</code></pre>\n\n<p>If it is a <strong>requirement that every list contains exactly two elements</strong>, you can also use:</p>\n\n<pre><code>func4 :: Ord b => [[b]] -> [b]\nfunc4 = map (<b>\\[x,y] -> max x y</b>)</code></pre>\n\n<p>Here you do pattern matching on the item, and it must be a list with two elements <code>x</code> and <code>y</code> you then <code>map</code> on the <code>max x y</code>. This function will error if it has to map a list not containing <strong>exactly two elements</strong>. The <code>\\[x,y] -&gt; max x y</code> is called a <em>lambda expression</em>.</p>\n"}], "owner": {"reputation": 67, "user_id": 5831174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-9ZPl9P7x9y8/AAAAAAAAAAI/AAAAAAAAAGg/Xfw4TrmdWAw/photo.jpg?sz=128", "display_name": "Mar Oli", "link": "https://stackoverflow.com/users/5831174/mar-oli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 43031206, "answer_count": 1, "score": 1, "last_activity_date": 1490554256, "creation_date": 1490544387, "last_edit_date": 1490544836, "question_id": 43031129, "link": "https://stackoverflow.com/questions/43031129/calculate-maximum-of-every-list-for-a-list-of-lists", "title": "Calculate maximum of every list for a list of lists", "body": "<p>How can I define a function in Haskell, which gets a list of lists of doubles, and return the highest value of each list using <code>map</code>?</p>\n\n<p>Like this: <code>func4 [[2,4],[4,7],[7,9]] = [4,7,9]</code>.</p>\n\n<p>I tried to do it in many ways, but it goes wrong. Is it possible to perform this operation?</p>\n\n<pre><code>func4 [[x,y]] = map maximum [x,y]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>func4 [[x,y]] = [xs| xs &lt;- map maximum [x,y]]\n</code></pre>\n"}, {"tags": ["class", "haskell"], "comments": [{"owner": {"reputation": 1404, "user_id": 5559663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sQiE2.gif?s=128&g=1", "display_name": "baxbaxwalanuksiwe", "link": "https://stackoverflow.com/users/5559663/baxbaxwalanuksiwe"}, "edited": false, "score": 3, "creation_date": 1490533680, "post_id": 43029076, "comment_id": 73143977, "body": "What you&#39;re looking for is the <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Bounded\" rel=\"nofollow noreferrer\"><code>Bounded</code></a> typeclass."}], "answers": [{"comments": [{"owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 0, "creation_date": 1490533826, "post_id": 43029124, "comment_id": 73144018, "body": "Thanks (will accept when able)! I see this Type Class has functions: <code>minBound</code> and <code>maxBound</code>. Is there a <code>step</code> function, i.e. how to increment one element from <code>minBound</code> to <code>maxBound</code>, available in another type class?"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 4, "creation_date": 1490533923, "post_id": 43029124, "comment_id": 73144046, "body": "@KevinMeredith that&#39;s part of <code>Enum</code> and called <code>succ</code>(essor)"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 3, "creation_date": 1490559439, "post_id": 43029124, "comment_id": 73153418, "body": "@KevinMeredith But beware that <code>iterate succ minBound</code> is not guaranteed to hit every possible value of a given type. See also the <a href=\"http://hackage.haskell.org/package/universe\" rel=\"nofollow noreferrer\">universe</a> package, which is specifically for iterating over all of a given type&#39;s possible values."}, {"owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1490574269, "post_id": 43029124, "comment_id": 73157523, "body": "Thanks, @DanielWagner. Could you please point me to an explanation of why it&#39;s &quot;not guaranteed to hit every possible value of a given type?&quot;"}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 0, "creation_date": 1490584149, "post_id": 43029124, "comment_id": 73159863, "body": "@KevinMeredith <code>succ (1.4 :: Double)</code> gives <code>2.4</code>. Now <code>Double</code> isn&#39;t a member of <code>Bounded</code>, so there&#39;s no <code>minBound</code>. But if we accept the behaviour of <code>Enum Double</code> as a valid <code>Enum</code> instance (I&#39;m a bit dubious about that, to be honest), then it&#39;s &quot;allowed&quot; for <code>succ</code> to &quot;skip over&quot; possible values, so there&#39;s no reason to expect that <code>iterate succ minBound</code> will hit everything for an arbitrary type in <code>Enum</code> and <code>Bounded</code>. That said, the only instances of <code>Bounded</code> in the Prelude are Word, Ordering, Int, Char, Bool, and (), (and tuples thereof), which should behave sensibly."}, {"owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "reply_to_user": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "edited": false, "score": 0, "creation_date": 1490624496, "post_id": 43029124, "comment_id": 73182243, "body": "Thanks, @Ben. Does <code>Bounded</code> have any Type Class Laws? I didn&#39;t see any in <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Bounded\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.9.1.0/docs/&hellip;</a>."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 0, "creation_date": 1490891660, "post_id": 43029124, "comment_id": 73326210, "body": "@KevinMeredith I don&#39;t know that there are any laws, but I would expect <code>minBound &lt;= x</code> and <code>maxBound &gt;= x</code> to hold whenever a type is both <code>Bounded</code> and <code>Ord</code>."}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 0, "creation_date": 1491377672, "post_id": 43029124, "comment_id": 73519507, "body": "@KevinMeredith The description &quot;The Bounded class is used to name the upper and lower limits of a type. Ord is not a superclass of Bounded since types that are not totally ordered may also have upper and lower bounds.&quot; from the docs you linked reads to me like an informal specification of the law from Daniel&#39;s comment, but it&#39;s not really explicit that that&#39;s intended as a prerequisite for writing a Bounded instance. Some of the early classes weren&#39;t really designed based on the idea of classes having laws; we&#39;d probably design them differently today (<code>Enum</code> itself is one I certainly would)."}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": true, "score": 12, "last_activity_date": 1490533707, "creation_date": 1490533707, "answer_id": 43029124, "question_id": 43029076, "link": "https://stackoverflow.com/questions/43029076/type-class-w-min/43029124#43029124", "title": "Type Class w/ `min`?", "body": "<p>You're looking for <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Bounded\" rel=\"noreferrer\"><code>Bounded</code></a>, which contains <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#v:minBound\" rel=\"noreferrer\"><code>minBound</code></a>.</p>\n"}], "owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 43029124, "answer_count": 1, "score": 3, "last_activity_date": 1548789245, "creation_date": 1490533403, "last_edit_date": 1548789245, "question_id": 43029076, "link": "https://stackoverflow.com/questions/43029076/type-class-w-min", "title": "Type Class w/ `min`?", "body": "<p>Given the <code>Ord</code> Type Class:</p>\n\n<pre><code>Prelude&gt; :i Ord\nclass Eq a =&gt; Ord a where\n  compare :: a -&gt; a -&gt; Ordering\n  (&lt;) :: a -&gt; a -&gt; Bool\n  (&lt;=) :: a -&gt; a -&gt; Bool\n  (&gt;) :: a -&gt; a -&gt; Bool\n  (&gt;=) :: a -&gt; a -&gt; Bool\n  max :: a -&gt; a -&gt; a\n  min :: a -&gt; a -&gt; a\n</code></pre>\n\n<p>Is there a type class that provides a <code>min : a</code> field/function for a given type?</p>\n\n<p>Example:</p>\n\n<p><code>min :: Int</code> would output the minimum <code>Int</code> value.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1490527376, "post_id": 43027681, "comment_id": 73142034, "body": "<code>in</code> cannot be used without <code>let</code>. Add <code>result = show x ++ y</code> or similar."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1534946068, "post_id": 43027681, "comment_id": 90887238, "body": "<code>let x = 3; y = &quot;!&quot; in show x ++ y</code> is actually <code>let { x = 3; y = &quot;!&quot; } in show x ++ y</code>. You can write that with whichever line-breaks you want, but you can&#39;t omit the <code>let</code>."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490532440, "creation_date": 1490532440, "answer_id": 43028906, "question_id": 43027681, "link": "https://stackoverflow.com/questions/43027681/parse-error-on-input-in-haskell/43028906#43028906", "title": "parse error on input `in&#39; Haskell", "body": "<p>The semicolon does not separate two independent assignments as you might expect from other languages; it serves as a replacement for a newline <em>and</em> the following indentation. </p>\n\n<pre><code>let x = 3; y = \"!\" in show x ++ y\n</code></pre>\n\n<p>is the layout-free version of</p>\n\n<pre><code>let x = 3\n    y = \"!\"\nin show x ++ y\n</code></pre>\n\n<p>where the indentation of <code>y = \"!\"</code> is significant.</p>\n"}], "owner": {"reputation": 309, "user_id": 2372684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AW7Sa.jpg?s=128&g=1", "display_name": "bling5630", "link": "https://stackoverflow.com/users/2372684/bling5630"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "accepted_answer_id": 43028906, "answer_count": 1, "score": -2, "last_activity_date": 1534925666, "creation_date": 1490524747, "last_edit_date": 1534925666, "question_id": 43027681, "link": "https://stackoverflow.com/questions/43027681/parse-error-on-input-in-haskell", "title": "parse error on input `in&#39; Haskell", "body": "<p>I would like to type Haskell source file this code from ghci</p>\n\n<pre><code>ghci&gt; let x = 3; y = \"!\" in show x ++ y  \n</code></pre>\n\n<p>and transform my code to this</p>\n\n<pre><code>x = 3\ny = \"!\" in show x ++ y \n</code></pre>\n\n<p>but got an error message like</p>\n\n<blockquote>\n  <p>parse error on input `in'</p>\n</blockquote>\n\n<p>How can I avoid the error and fix my code?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1490492191, "post_id": 43023930, "comment_id": 73135023, "body": "There seem to be some fundamental misconceptions here. It is important to realize that <code>count</code> is just a function of a variable that happens to be called <code>n</code> (this is unrelated to the other <code>n</code>). As written here, it just calls itself with its argument+1, until it reaches <code>1000000</code>. So, <code>count x</code>, for any value <code>x</code> less than or equal to <code>1000000</code>, will just equal <code>1000000</code>."}, {"owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1490492431, "post_id": 43023930, "comment_id": 73135072, "body": "@DavidYoung Yes I understand that, I see why it is wrong, but I dont see how to &quot;fix&quot; that, I cant think of a way to implement this problem"}, {"owner": {"reputation": 651, "user_id": 492465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bae7b4a1c41762e6cc252ee5198fff?s=128&d=identicon&r=PG", "display_name": "novemberkilo", "link": "https://stackoverflow.com/users/492465/novemberkilo"}, "edited": false, "score": 0, "creation_date": 1490494229, "post_id": 43023930, "comment_id": 73135377, "body": "Do you mean the minumum <code>n</code> that satisfies the inequality <code>(n+a)^k &lt; m^n</code> (for some given integers <code>a</code>,<code>k</code> and <code>m</code>)? Your expression above says <code>(n+a)^k &lt; m^n = n</code>"}], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 492465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bae7b4a1c41762e6cc252ee5198fff?s=128&d=identicon&r=PG", "display_name": "novemberkilo", "link": "https://stackoverflow.com/users/492465/novemberkilo"}, "edited": false, "score": 0, "creation_date": 1490581104, "post_id": 43024228, "comment_id": 73159198, "body": "Suggest that it is worth noting that if there are no <code>n</code> (in the range 1 .. 10000) that satisfy <code>(n+a)^k &lt; m^n</code> then this function will return 10000."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 651, "user_id": 492465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bae7b4a1c41762e6cc252ee5198fff?s=128&d=identicon&r=PG", "display_name": "novemberkilo", "link": "https://stackoverflow.com/users/492465/novemberkilo"}, "edited": false, "score": 0, "creation_date": 1490581190, "post_id": 43024228, "comment_id": 73159220, "body": "yes it&#39;s given as the roof value in the question.  I think I dropped couple zeros..."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1490494557, "creation_date": 1490494557, "answer_id": 43024228, "question_id": 43023930, "link": "https://stackoverflow.com/questions/43023930/calculating-min-number-that-satisfies-a-comparison-using-recursion-in-haskell/43024228#43024228", "title": "Calculating min number that satisfies a comparison using recursion in Haskell", "body": "<p>I would write is slightly different</p>\n\n<pre><code>search a k m = go 1\n      where go 10000 = 10000\n            go n     = if ((n+a)^k &lt; m^n) then n else go (n+1)\n</code></pre>\n\n<p>testing with </p>\n\n<pre><code>search 2 3 4\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490510350, "post_id": 43024240, "comment_id": 73138215, "body": "That&#39;s nice and clear, though since we&#39;re testing in sequence, <code>head</code> will work just as well as <code>minimum</code> (and faster)."}, {"owner": {"reputation": 651, "user_id": 492465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bae7b4a1c41762e6cc252ee5198fff?s=128&d=identicon&r=PG", "display_name": "novemberkilo", "link": "https://stackoverflow.com/users/492465/novemberkilo"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490511643, "post_id": 43024240, "comment_id": 73138458, "body": "@luqui fair enough although in general, head is unsafe - if the filter yields an empty list, head will throw an exception."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1490514689, "post_id": 43024240, "comment_id": 73139071, "body": "@novemberkilo <code>minimum []</code> is equivalent to <code>head []</code> -- both raise an exception."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1490532617, "post_id": 43024240, "comment_id": 73143583, "body": "The explicit import of <code>Data.List</code> isn&#39;t necessary."}], "tags": [], "owner": {"reputation": 651, "user_id": 492465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bae7b4a1c41762e6cc252ee5198fff?s=128&d=identicon&r=PG", "display_name": "novemberkilo", "link": "https://stackoverflow.com/users/492465/novemberkilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1490582155, "last_edit_date": 1490582155, "creation_date": 1490494666, "answer_id": 43024240, "question_id": 43023930, "link": "https://stackoverflow.com/questions/43023930/calculating-min-number-that-satisfies-a-comparison-using-recursion-in-haskell/43024240#43024240", "title": "Calculating min number that satisfies a comparison using recursion in Haskell", "body": "<p>I'd use the <code>filter</code> and <code>minimum</code> combinators from <code>Data.List</code> like so:</p>\n\n<pre><code>import Data.List\n\nsearch :: Int -&gt; Int -&gt; Int -&gt; Int\nsearch a k m =\n  minimum $ filter (\\n -&gt; (n+a)^k &lt; m^n) [1 .. 1000000]\n  -- filter picks out the n that satisfy the inequality and minimum gives you the minimum\n</code></pre>\n\n<p>---- Update based on comments received:</p>\n\n<p>The problem with <code>search</code> as defined above is that it will throw an exception if there are no solutions in the range <code>1 .. 1000000</code>.\nA safer way of writing search (i.e without throwing exceptions) would be to use <code>Maybe</code> to encode the possibility of there being no solutions in the given range. Something like:</p>\n\n<pre><code>safeSearch :: Int -&gt; Int -&gt; Int -&gt; Int -&gt; Maybe Int\nsafeSearch a k m roof =\n  let\n    solutions = filter (\\n -&gt; (n+a)^k &lt; m^n) [1 .. roof]\n  in\n    case solutions of \n      [] -&gt; Nothing\n      _  -&gt; Just $ head solutions\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490582155, "creation_date": 1490491426, "question_id": 43023930, "link": "https://stackoverflow.com/questions/43023930/calculating-min-number-that-satisfies-a-comparison-using-recursion-in-haskell", "title": "Calculating min number that satisfies a comparison using recursion in Haskell", "body": "<p>I want to calculate the minimum \"n\" that satisfies the following expression: (n+a)^k &lt; m^n = n where a,k,m are 3 Integers in Haskell. So far I have done this but it seems to be incorect. What am I doing wrong? </p>\n\n<pre><code>search a k m\n|(n+a)^k &lt; m^n = n\nwhere \n    n = count 1\n        where\n            count :: Integer -&gt; Integer\n            count 1000000 = 1000000\n            count n = count (n+1)\n</code></pre>\n\n<p>My train of thought is that count will increase by one each time, and the expression will be checked, but apparently it goes all the way up to 1000000 (which is just a roof value)</p>\n"}, {"tags": ["haskell", "io"], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "edited": false, "score": 0, "creation_date": 1490487178, "post_id": 43023467, "comment_id": 73134063, "body": "Oh okay, thanks. Do you know if it&#39;s possible to get the name of the home directory from Haskell? I want my program to work on other peoples&#39; computers, too."}, {"owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "edited": false, "score": 0, "creation_date": 1490487357, "post_id": 43023467, "comment_id": 73134097, "body": "Actually - nevermind, I found it :) I&#39;ll accept your answer when I can"}], "tags": [], "owner": {"reputation": 354, "user_id": 5171223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2tnBmDS5aKE/AAAAAAAAAAI/AAAAAAAAAIc/pSJM395Fu0s/photo.jpg?sz=128", "display_name": "Steve Harris", "link": "https://stackoverflow.com/users/5171223/steve-harris"}, "is_accepted": true, "score": 4, "last_activity_date": 1490487063, "creation_date": 1490487063, "answer_id": 43023467, "question_id": 43023445, "link": "https://stackoverflow.com/questions/43023445/haskell-does-not-interpret-users-home-directory-correctly/43023467#43023467", "title": "Haskell does not interpret user&#39;s home directory (`~`) correctly", "body": "<p>The ~ is a short cut to your home directory and is generally only recognized by shells.  For applications you will want to use the absolute path to your home directory.  It will be something like: /home/jqtester</p>\n\n<p>You can find it by:</p>\n\n<pre><code>$ cd ~\n$ pwd\n</code></pre>\n\n<p>Or some shells, just by looking at the prompt itself which might reflect your current directory.</p>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 8, "last_activity_date": 1490487415, "last_edit_date": 1495541843, "creation_date": 1490487415, "answer_id": 43023507, "question_id": 43023445, "link": "https://stackoverflow.com/questions/43023445/haskell-does-not-interpret-users-home-directory-correctly/43023507#43023507", "title": "Haskell does not interpret user&#39;s home directory (`~`) correctly", "body": "<p>Re: your comment to <a href=\"https://stackoverflow.com/a/43023467/2751851\">Steve Harris' answer</a>:</p>\n\n<blockquote>\n  <p>Do you know if it's possible to get the name of the home directory from Haskell?</p>\n</blockquote>\n\n<p>You can use <a href=\"https://hackage.haskell.org/package/directory-1.3.0.2/docs/System-Directory.html#v:getHomeDirectory\" rel=\"nofollow noreferrer\"><code>getHomeDirectory</code> from <code>System.Directory</code></a>.</p>\n"}], "owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 43023467, "answer_count": 2, "score": 0, "last_activity_date": 1575751230, "creation_date": 1490486889, "last_edit_date": 1575751230, "question_id": 43023445, "link": "https://stackoverflow.com/questions/43023445/haskell-does-not-interpret-users-home-directory-correctly", "title": "Haskell does not interpret user&#39;s home directory (`~`) correctly", "body": "<p>I have the following code:</p>\n\n<pre><code>main = do\n    contents &lt;- readFile \"~/.todos\"\n</code></pre>\n\n<p>However, it tells me that <em>~/.todos</em> doesn't exist, even though I just created it. This Haskell program is saved to my Desktop (which is directly inside the root directory) so I can use <em>../.todos</em>, and this works fine - except from the fact that I want the program to be able to be run from anywhere on the computer.</p>\n\n<p><strong>TL; DR</strong></p>\n\n<p>I bascially just need a way of reading the contents of a file which is in home directory.</p>\n"}, {"tags": ["variables", "haskell", "recursion"], "answers": [{"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 5, "last_activity_date": 1490534839, "last_edit_date": 1490534839, "creation_date": 1490486309, "answer_id": 43023373, "question_id": 43023319, "link": "https://stackoverflow.com/questions/43023319/maintaining-a-variable-throughout-recursive-calls-in-haskell/43023373#43023373", "title": "Maintaining a variable throughout recursive calls in Haskell", "body": "<p>You can stuff the actual recursion in a local function, keeping the <code>c</code> binding outside:</p>\n\n<pre><code>sum2017 m = go m\n where go \u03bc n\n        | \u03bc &gt; n     = 0\n        | otherwise = (c + \u03bc)^n + go (\u03bc+1) n\n       c = m\n</code></pre>\n\n<p>...of course, you may then omit the <code>c = m</code> entirely and just use <code>(m + \u03bc)^n</code> in the recursion.</p>\n\n<p>This specific example can also easily be done without any manual recursion at all, like</p>\n\n<pre><code>sum2017 m n = sum [(m+\u03bc)^n | \u03bc&lt;-[m..n]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490535069, "post_id": 43023933, "comment_id": 73144426, "body": "Welcome to Stackoverflow. Good advice, but this answer would frankly have been better posted as a comment or edit to mine (once you have enough reputation, you can comment on other people&#39;s posts). It would be more worthwhile as a standalone answer if you elaborated on what this applicative-style mapping does. (BTW, you don&#39;t need the parens around <code>(^ n) . (+ m)</code>.)"}, {"owner": {"reputation": 33, "user_id": 7676564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523f124b1ccb5538fcc03e8fb68d2b50?s=128&d=identicon&r=PG", "display_name": "snow_lemurian_snow", "link": "https://stackoverflow.com/users/7676564/snow-lemurian-snow"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490597926, "post_id": 43023933, "comment_id": 73164251, "body": "I understand, should I delete this post and comment on yours instead? Or add information about mapping and local-bound recursion? (I didn&#39;t have access to comment at the time of my post, I guess I should have just refrained)"}], "tags": [], "owner": {"reputation": 33, "user_id": 7676564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523f124b1ccb5538fcc03e8fb68d2b50?s=128&d=identicon&r=PG", "display_name": "snow_lemurian_snow", "link": "https://stackoverflow.com/users/7676564/snow-lemurian-snow"}, "is_accepted": false, "score": 1, "last_activity_date": 1490491497, "creation_date": 1490491497, "answer_id": 43023933, "question_id": 43023319, "link": "https://stackoverflow.com/questions/43023319/maintaining-a-variable-throughout-recursive-calls-in-haskell/43023933#43023933", "title": "Maintaining a variable throughout recursive calls in Haskell", "body": "<p>In Haskell, you want to avoid explicit recursions as much as possible.</p>\n\n<p>So what do you do instead? You use looping function that does it for you ;)</p>\n\n<pre><code>sum2017 m n = sum $ ((^ n) . (+ m)) &lt;$&gt; [m .. n]\n</code></pre>\n\n<p>Or you could use lambda functions instead of this pointfree: (\\x -> (c + x) ^ n)</p>\n\n<p>If you decide to have a local function as leftaroundabout suggested, makes it recurse on itself, not on the global function:</p>\n\n<pre><code>sum2017 m = go m\n  where go \u03bc n\n    | \u03bc &gt; n     = 0\n    | otherwise = (c + \u03bc)^n + go (\u03bc+1) n\n    c = m\n</code></pre>\n\n<p>Because otherwise, it can get out of control/memory pretty fast</p>\n"}], "owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490534839, "creation_date": 1490485928, "question_id": 43023319, "link": "https://stackoverflow.com/questions/43023319/maintaining-a-variable-throughout-recursive-calls-in-haskell", "title": "Maintaining a variable throughout recursive calls in Haskell", "body": "<p>I want to calculate the following sum in Haskell: (m + i)^n from i = m to n. So far I have thought of this: </p>\n\n<pre><code>sum2017 m n \n|m &gt; n = 0\n|otherwise = (c + m)^n + sum2017 (m+1) n\nwhere c = m\n</code></pre>\n\n<p>but the problem is that c changes every time due to getting assigned a new value from recursive calls</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 2, "creation_date": 1490480814, "post_id": 43022660, "comment_id": 73132642, "body": "Please add the relevant definitions in those links to the question."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1490481797, "post_id": 43022660, "comment_id": 73132870, "body": "What is this for? Is it homework?"}, {"owner": {"reputation": 3042, "user_id": 4393898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JvZg5.jpg?s=128&g=1", "display_name": "yusuf", "link": "https://stackoverflow.com/users/4393898/yusuf"}, "edited": false, "score": 0, "creation_date": 1490481983, "post_id": 43022660, "comment_id": 73132919, "body": "It is just a very small part of a homework. Not the whole one."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1490482576, "post_id": 43022660, "comment_id": 73133078, "body": "@yusuf What have you tried then?"}, {"owner": {"reputation": 3042, "user_id": 4393898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JvZg5.jpg?s=128&g=1", "display_name": "yusuf", "link": "https://stackoverflow.com/users/4393898/yusuf"}, "edited": false, "score": 1, "creation_date": 1490482649, "post_id": 43022660, "comment_id": 73133099, "body": "Honestly, my brain stopped working at this task. I need a small fire for start :) Forgive me"}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 1, "creation_date": 1490554202, "post_id": 43022660, "comment_id": 73151541, "body": "Your types must start with upper-case characters"}], "answers": [{"comments": [{"owner": {"reputation": 3042, "user_id": 4393898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JvZg5.jpg?s=128&g=1", "display_name": "yusuf", "link": "https://stackoverflow.com/users/4393898/yusuf"}, "edited": false, "score": 0, "creation_date": 1491299253, "post_id": 43033444, "comment_id": 73479154, "body": "Hi @pat, I did. what might be next? :)"}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "reply_to_user": {"reputation": 3042, "user_id": 4393898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JvZg5.jpg?s=128&g=1", "display_name": "yusuf", "link": "https://stackoverflow.com/users/4393898/yusuf"}, "edited": false, "score": 0, "creation_date": 1491317589, "post_id": 43033444, "comment_id": 73493001, "body": "Write a <code>main</code> function <code>main = putStrLn $ pretty 40 $ pFunc fun</code> where <code>pFunc</code> is the pretty printer you wrote for functions.  Then run it..."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": true, "score": 1, "last_activity_date": 1490556279, "creation_date": 1490556279, "answer_id": 43033444, "question_id": 43022660, "link": "https://stackoverflow.com/questions/43022660/pretty-printing-in-haskell-with-data-structure/43033444#43033444", "title": "pretty printing in haskell with data structure", "body": "<p>Write a pretty-printer function for each of the types in the abstract-syntax-tree.  Each function will have type:</p>\n\n<pre><code>pretty&lt;Foo&gt; :: &lt;Foo&gt; -&gt; Document\n</code></pre>\n\n<p>where you replace <code>&lt;Foo&gt;</code> with the type name.  Work bottom up, so you can test each function as you write it.  i.e. implement the pretty-printer for <code>Type</code> first, since it is needed by the pretty-printer for <code>Stmt</code> and <code>f</code> (which should be called <code>Func</code> or something).</p>\n\n<p>For instance:</p>\n\n<pre><code>prettyType :: Type -&gt; Document\nprettyType TVoid     = text \"void\"\nprettyType TInt      = text \"int\"\nprettyType TFloat    = text \"float\"\nprettyType TChar     = text \"char\"\nprettyType TPtr t    = prettyType t &lt;&gt; text \"*\"\nprettyType TStruct s = text \"struct\" &lt;+&gt; text s\n</code></pre>\n\n<p>Follow the same pattern for each of <code>Exp</code>, <code>Stmt</code>, <code>Case</code>, and <code>Func</code>.</p>\n"}], "owner": {"reputation": 3042, "user_id": 4393898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JvZg5.jpg?s=128&g=1", "display_name": "yusuf", "link": "https://stackoverflow.com/users/4393898/yusuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 43033444, "answer_count": 1, "score": 0, "last_activity_date": 1490556279, "creation_date": 1490480731, "last_edit_date": 1490481023, "question_id": 43022660, "link": "https://stackoverflow.com/questions/43022660/pretty-printing-in-haskell-with-data-structure", "title": "pretty printing in haskell with data structure", "body": "<p>I am the beginner of Haskell, and I want to make a pretty printing with data structures in Haskell.</p>\n\n<p>I have the following data structure:</p>\n\n<p><a href=\"https://codeshare.io/5zl9WD\" rel=\"nofollow noreferrer\">https://codeshare.io/5zl9WD</a></p>\n\n<p>I want to print the following value:</p>\n\n<pre><code>int a(int b, int* c){\n   return b + *c;\n}\n</code></pre>\n\n<p>by using the following function types:</p>\n\n<pre><code>pFunc :: f -&gt; document\n\nputStrLn $ pretty 40 $ pFunc fun\n\nfun =(\"a\", TInt, [(TInt, \"b\"),(TPtr TInt, \"c\")]\n      , [SReturn (EBinOp \"+\" (EIdent \"b\") (EUnOpPre \"*\" (EIdent \"c\")))])\n</code></pre>\n\n<p><code>document</code> data structure is as the following:</p>\n\n<p><a href=\"https://codeshare.io/G64gyg\" rel=\"nofollow noreferrer\">https://codeshare.io/G64gyg</a></p>\n\n<p>But honestly I don't have any idea. I have many similar simple printings. If I can have an idea about this printing, the remaining one won't be a problem.</p>\n\n<p>But might be the shortest way to print the value above by using <code>document</code> data type?</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 2226, "user_id": 2246434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTuEI.jpg?s=128&g=1", "display_name": "Julia Path", "link": "https://stackoverflow.com/users/2246434/julia-path"}, "is_accepted": false, "score": 2, "last_activity_date": 1490481239, "last_edit_date": 1490481239, "creation_date": 1490480653, "answer_id": 43022638, "question_id": 43022461, "link": "https://stackoverflow.com/questions/43022461/how-to-create-an-instance-for-floating-only/43022638#43022638", "title": "How to create an instance for Floating only?", "body": "<p>There is no way of restricting <code>b</code> for that one instance. <code>TestClass</code> says that <code>funcOne</code> works for any <code>Real b</code>. If that is not the case for <code>MyValue</code>, then <code>MyValue</code> is not an instance of <code>TestClass</code>. Furthermore there is no way to cast from a <code>Floating</code> to <code>Real</code> without always loosing accuracy. The only way to get to the <code>Real</code> type would be <code>fromInteger</code>, but if you cast your type first to <code>Integer</code> you will always loose the fractional part.</p>\n\n<p>The only thing you could do (that I am aware of) is using a different <code>MyValue</code> type that restricts <code>b</code> to always have a <code>Floating</code> constraint by using <code>GADTs</code>:</p>\n\n<pre><code>{-# LANGUAGE GADTs #-}\n\ndata MyValue' = Floating a =&gt; MyValue' a\n\ninstance TestClass MyValue' where\n  -- Pattern matching on MyValue' brings the 'Floating' constraint into scope.\n  funcOne (MyValue' x) = MyValue' $ x * pi\n  ...\n</code></pre>\n\n<p>Now every time you have a value of type <code>MyValue' a</code> pattern matching on that value is proof that <code>a</code> is an instance of <code>Floating</code>.</p>\n\n<p>Note that this approach fails if <code>TestClass</code> has a function that does not take a value of type <code>a</code>:</p>\n\n<pre><code>class TestClass a where\n   ...\n   pureTest :: Real b =&gt; b -&gt; a b\n</code></pre>\n\n<p>Now in <code>pureTest</code> <code>b</code> does not have to be <code>Floating</code> and therefore <code>pureTest b = MyValue' b</code> would be a type error.</p>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 6, "last_activity_date": 1490482689, "last_edit_date": 1490482689, "creation_date": 1490480665, "answer_id": 43022642, "question_id": 43022461, "link": "https://stackoverflow.com/questions/43022461/how-to-create-an-instance-for-floating-only/43022642#43022642", "title": "How to create an instance for Floating only?", "body": "<p>You can achieve this, but you'll need to modify either that data type or the class.</p>\n\n<ul>\n<li><p>If <code>MyValue</code> in particular makes sense with Floating only then it makes perhaps sense to bake that constraint into its constructor.</p>\n\n<pre><code>{-# LANGUAGE GADTs #-}\n\ndata MyValue :: * -&gt; * where\n  MyValue :: Floating a =&gt; a -&gt; MyValue a\n</code></pre>\n\n<p>This guarantees to any function accepting a <code>MyValue a</code> that <code>a</code> is actually a <code>Floating</code> instance, hence</p>\n\n<pre><code>  funcOne (MyValue x) = MyValue $ x*pi\n</code></pre>\n\n<p>will then work.</p></li>\n<li><p>If this is a common theme, requiring a particular constraint on the contained type, then you can, instead of always requiring <code>Real</code>, make the constraint dependent on the instance:</p>\n\n<pre><code>{-# LANGUAGE TypeFamilies, ConstraintKinds #-}\nimport GHC.Exts (Constraint)\n\nclass TestClass a where\n  type Testable a b :: Constraint\n  type Testable a b = Real b  -- default constraint\n  funcOne:: Testable b =&gt; a b -&gt; a b\n  funcTwo:: Testable b =&gt; a b -&gt; a b -&gt; a b\n\ninstance TestClass MyValue where\n  type Testable MyValue b = Floating b\n  funcOne (MyValue x) = MyValue $ x*pi\n  ...\n</code></pre></li>\n<li><p>But perhaps it's not the right decision to let <code>TestClass</code> deal with parameterised (<code>* -&gt; *</code>) types in the first place, if you then need to artificially constrain the parametricity again. Why not instead do simply</p>\n\n<pre><code>class TestClass q where\n  funcOne :: q -&gt; q\n  funcTwo :: q -&gt; q -&gt; q\n\ninstance Floating a =&gt; TestClass (MyValue a) where\n  funcOne (MyValue x) = MyValue $ x*pi\n  funcTwo (MyValue x) (MyValue y) = MyValue $ x*y\n</code></pre>\n\n<p>That would seem cleaner to me anyway. If some of the methods do require access to the contained type, that's also possible with this approach, using an associated type family:</p>\n\n<pre><code>class TestClass q where\n  type ToTest q :: *\n  ...\n\ninstance Floating a =&gt; TestClass (MyValue a) where\n  type ToTest (MyValue a) = a\n  ...\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 43022642, "answer_count": 2, "score": 2, "last_activity_date": 1490482689, "creation_date": 1490479396, "question_id": 43022461, "link": "https://stackoverflow.com/questions/43022461/how-to-create-an-instance-for-floating-only", "title": "How to create an instance for Floating only?", "body": "<p>There is a class, for which I would like to define an instance.\nIt looks like this:</p>\n\n<pre><code>data MyValue a = MyValue a\n\nclass TestClass a where\n    funcOne:: (Real b) =&gt; a b -&gt; a b\n    funcTwo:: (Real b) =&gt; a b -&gt; a b -&gt; a b\n\n\ninstance TestClass MyValue where\n    funcOne (MyValue x) = MyValue (x*pi)\n    funcTwo (MyValue x) (MyValue y) = MyValue (x*y)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Could not deduce (Floating b) arising from a use of `pi'\n      from the context: Real b\n</code></pre>\n\n<p>I understand the error, but I don't know how should I solve it.</p>\n\n<p>I can't change the <code>(Real b)</code> to <code>(Floating b)</code> because other instances should work with Integral types too. But <code>MyValue</code> makes sense with <code>Floating</code> only. Is it possible to tell the compiler, that the <code>instance TestClass MyValue</code> works only with <code>Floating</code>?</p>\n\n<p>If it is not, then how is it possible to cast the result <code>x*pi</code> back to the same <code>Real</code> as the <code>x</code> parameter? It does not matter what happens if the type is for example Integral, because the <code>MyValue</code> does not make sense in that case</p>\n"}, {"tags": ["function", "haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1490478161, "post_id": 43022221, "comment_id": 73131927, "body": "You are trying to compare a function named <code>equal</code> to a variety of <code>Int</code> values. Did you perhaps intend to compare the return value of <code>equal x y</code> to those values?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1490478446, "post_id": 43022221, "comment_id": 73132008, "body": "Your two cases for <code>equal</code> appear to be identical, by the way: <code>1 + equal (div a 10) (div b 10)</code> in either case."}, {"owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1490481081, "post_id": 43022221, "comment_id": 73132711, "body": "@chepner Yes the value of equal is exactly what I want to  return. But I thought haskell has no return like other OOP languages like java? Thanks for the correction in the identical code also!"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490486799, "post_id": 43022221, "comment_id": 73133993, "body": "Note that this can easier be written with <code>case equal x y of</code>."}], "owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490482208, "creation_date": 1490477710, "last_edit_date": 1490482208, "question_id": 43022221, "link": "https://stackoverflow.com/questions/43022221/haskell-instances-required-for-definition", "title": "Haskell Instances required for definition", "body": "<p>I have the following Haskell code, a function that checks how many digits are the same in a number and based on how many of them were the same takes a value. I keep getting the error:</p>\n\n<blockquote>\n  <p>Instances of (Ord (Int -> Int -> Int), Num (Int -> Int -> Int)) required for definition of digits</p>\n</blockquote>\n\n<pre><code>digits :: Int-&gt;Int-&gt;Int \n\ndigits x y\n    |(equal &lt; 2) = 0\n    |(equal == 2) = 1\n    |(equal == 3) = 5\n    |(equal == 4) = 20\n    |(equal == 5) = 300\n    |(equal == 6) = 8000\n    |(equal == 7) = 10000\n    |otherwise = 100000\n    where\n        equal :: Int -&gt; Int -&gt; Int\n\n        equal 0 0 = 0\n        equal a b\n            |(a `mod` 10 == b `mod` 10) = 1 + equal (a `div` 10) (b `div` 10)\n            |otherwise = 1 + equal (a `div` 10) (b `div` 10)\n</code></pre>\n\n<p>What am I doing wrong? Also what does the error mean exactly?</p>\n\n<p><em>EDIT</em>: Did it like this and it works like a charm!</p>\n\n<pre><code>digits :: Int-&gt;Int-&gt;Int \n\ndigits x y\n    |(c &lt; 2) = 0\n    |(c == 2) = 1\n    |(c == 3) = 5\n    |(c == 4) = 20\n    |(c == 5) = 300\n    |(c == 6) = 8000\n    |(c == 7) = 10000\n    |otherwise = 100000\n    where c = equal x y\n\n        where\n            equal :: Int -&gt; Int -&gt; Int\n\n            equal 0 0 = 0\n            equal a b\n                |(a `mod` 10 == b `mod` 10) = 1 + equal (a `div` 10) (b `div` 10)\n                |otherwise = 0 + equal (a `div` 10) (b `div` 10)\n</code></pre>\n"}, {"tags": ["list", "loops", "haskell"], "comments": [{"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "edited": false, "score": 0, "creation_date": 1490473426, "post_id": 43021548, "comment_id": 73130554, "body": "Have you tried anything yet?"}, {"owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "reply_to_user": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "edited": false, "score": 0, "creation_date": 1490474190, "post_id": 43021548, "comment_id": 73130788, "body": "In regards to the logic:   Check for empty list or singleton and return false, if first element is 0 check the rest of the list for sequences, if the first element is 1 check the second element for 1 and return true else check the list from the third element.  <code>def sequeceones list \tif list == [] then false; \telse if (tail list) == [] then false; \telse if (head list) == 0 then (sequeceones (tail list)) \telse if (head list) == 1 then if (head (tail list)) == 1 then true else (sequeceones (tail (tail list))) </code> My issue is im not sure how to write that in haskell"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "edited": false, "score": 0, "creation_date": 1490474899, "post_id": 43021723, "comment_id": 73130996, "body": "Awesome, definitely a lot neater than my approach would have been, thanks a million."}, {"owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "reply_to_user": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "edited": false, "score": 0, "creation_date": 1490474960, "post_id": 43021723, "comment_id": 73131015, "body": "I just added a new one thats way neater, but check the Data.List methods <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-List.html\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.9.1.0/docs/Data-List.html</a> since there are maaaaany ways you could get this done"}], "tags": [], "owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "is_accepted": false, "score": 2, "last_activity_date": 1490474902, "last_edit_date": 1592644375, "creation_date": 1490474395, "answer_id": 43021723, "question_id": 43021548, "link": "https://stackoverflow.com/questions/43021548/sequential-numbers-in-a-list-haskell/43021723#43021723", "title": "Sequential numbers in a list haskell", "body": "<p>This is a solution:</p>\n<pre><code>consecutiveOnes :: [Int] -&gt; Bool\nconsecutiveOnes xs = auxOnes False xs\n\nauxOnes :: Bool -&gt; [Int] -&gt; Bool\nauxOnes b [] = False\nauxOnes b (x:xs) = case (x==1 &amp;&amp; b) of {\n    True -&gt; True;\n    False -&gt; auxOnes (x==1) xs;\n};\n</code></pre>\n<p>Another way would be using the <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-List.html#v:isInfixOf\" rel=\"nofollow noreferrer\">isInfixOf method</a> and asking if [1,1] appears anywhere on your list:</p>\n<pre><code>consecutiveOnes :: [Int] -&gt; Bool\nconsecutiveOnes xs = isInfixOf [1,1] xs\n</code></pre>\n<blockquote>\n<p>The isInfixOf function takes two lists and returns True iff the first\nlist is contained, wholly and intact, anywhere within the second.</p>\n</blockquote>\n<p>But I'm sure there are many other ways of doing it.</p>\n"}, {"tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": false, "score": 5, "last_activity_date": 1490553882, "last_edit_date": 1490553882, "creation_date": 1490475698, "answer_id": 43021904, "question_id": 43021548, "link": "https://stackoverflow.com/questions/43021548/sequential-numbers-in-a-list-haskell/43021904#43021904", "title": "Sequential numbers in a list haskell", "body": "<p>One way would be to use pattern matching to look for consecutive ones at the head of the list, and advance down the list until you find them, or you run out of elements to look at.</p>\n\n<pre><code>consecutiveOnes [] = False\nconsecutiveOnes (1:1:_) = True\nconsecutiveOnes (_:xs) = consecutiveOnes xs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4681, "user_id": 1264328, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/786f8275d9fa334bc27630e0fc7f0d22?s=128&d=identicon&r=PG", "display_name": "bwroga", "link": "https://stackoverflow.com/users/1264328/bwroga"}, "is_accepted": false, "score": 1, "last_activity_date": 1490529038, "last_edit_date": 1490529038, "creation_date": 1490488943, "answer_id": 43023661, "question_id": 43021548, "link": "https://stackoverflow.com/questions/43021548/sequential-numbers-in-a-list-haskell/43023661#43023661", "title": "Sequential numbers in a list haskell", "body": "<p>You could also do it this way:</p>\n\n<pre><code>consecutiveOnes [] = False\nconsecutiveOnes xs = any (== (1,1)) $ zip xs (tail xs)\n</code></pre>\n\n<p>If </p>\n\n<pre><code> xs == [0,1,1,2,3,4]\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>tail xs == [1,1,2,3,4]\n</code></pre>\n\n<p>Zipping them together you get a list of pairs, where each pair is an element of the list and the element after it.</p>\n\n<pre><code>zip xs (tail xs) == [(0,1),(1,1),(1,2),(2,3),(3,4)]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7767365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aztgN0teYJ8/AAAAAAAAAAI/AAAAAAAAAH0/yUGEQZr6smc/photo.jpg?sz=128", "display_name": "Max Dude2014", "link": "https://stackoverflow.com/users/7767365/max-dude2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490553882, "creation_date": 1490473359, "question_id": 43021548, "link": "https://stackoverflow.com/questions/43021548/sequential-numbers-in-a-list-haskell", "title": "Sequential numbers in a list haskell", "body": "<p>I am new to haskell and I was attempting a few coding problems that I previously completed for java, however the following problem has me stumped.</p>\n\n<p>Basically the idea is to write a function that takes in a list of integers ([Int]) establishes whether a list of integers has consecutive 1's within it. For example the output of the following would be:\nInput: func [0,0,1,1,0]\nOutput: True</p>\n\n<p>A sample solution for this problem in haskell would be greatly appreciated,\nThanks</p>\n"}, {"tags": ["haskell", "list-comprehension"], "comments": [{"owner": {"reputation": 4337, "user_id": 649727, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1cb3b3d7e0ccce5f039c37f9bd85de11?s=128&d=identicon&r=PG", "display_name": "phynfo", "link": "https://stackoverflow.com/users/649727/phynfo"}, "edited": false, "score": 0, "creation_date": 1490470192, "post_id": 43020898, "comment_id": 73129605, "body": "What do you want to do? All 3-tuples in a list of 3-tuples with a sum greater than 100?"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1490470765, "post_id": 43021057, "comment_id": 73129762, "body": "In general, in list comprehensions it is common to use <code>let x=e, ...</code> instead of <code>let x=e in ...</code> since the former makes <code>x</code> available for all the rest of the comprehension, while the latter only lasts until the comma. In this specific case it does not matter, of course, since the comprehension ends right there."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1490471149, "post_id": 43021057, "comment_id": 73129880, "body": "@chi It does matter because if we don&#39;t use <code>in</code>, we can use <code>sumT</code> on the left side of the <code>|</code> as well. So your comment is the actual answer to OP&#39;s question."}], "tags": [], "owner": {"reputation": 4337, "user_id": 649727, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1cb3b3d7e0ccce5f039c37f9bd85de11?s=128&d=identicon&r=PG", "display_name": "phynfo", "link": "https://stackoverflow.com/users/649727/phynfo"}, "is_accepted": false, "score": 3, "last_activity_date": 1490471520, "last_edit_date": 1490471520, "creation_date": 1490470570, "answer_id": 43021057, "question_id": 43020898, "link": "https://stackoverflow.com/questions/43020898/variable-not-in-scope-list-comprehesion/43021057#43021057", "title": "variable not in scope - list comprehesion", "body": "<p>I assume you want to get all 3-tuples in a list of 3-tuples where the sum of the components is greater than 100 and you want somehow to use let inside the listcomprehension.</p>\n\n<p>First of all: the type of your expression is not correct, it should probably be: </p>\n\n<pre><code>resultSum :: [(Integer,Integer,Integer)] -&gt; [Integer]\n</code></pre>\n\n<p>Try the following solution: </p>\n\n<pre><code>resultsum xs3 = [x+y+z | (x,y,z) &lt;- xs3, let sumT=x+y+z in sumT&gt;100]\n</code></pre>\n\n<p>BTW: The <code>let in</code> right of the <code>|</code> is local to the right part of <code>|</code>, you cannot use it left of <code>|</code>. However, you can use <code>let</code> as a standalone clause on the right side of <code>|</code> (thank chi) and then you can use it on the left side of <code>|</code> like</p>\n\n<pre><code>resultsum xs3 = [sumT | (x,y,z) &lt;- xs3, let sumT=x+y+z, sumT&gt;100]\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 6776800, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/47d3e8dc018d553c442354c3afd1a8da?s=128&d=identicon&r=PG&f=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/6776800/marcio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490471520, "creation_date": 1490469795, "question_id": 43020898, "link": "https://stackoverflow.com/questions/43020898/variable-not-in-scope-list-comprehesion", "title": "variable not in scope - list comprehesion", "body": "<p>I'm trying construct a function that return a list with the sum of tuples elements when is higher than 100.</p>\n\n<pre><code>resultSum :: [(Integer)] -&gt; [Integer]\nresultSum (x:xs) = [ sumT | let sumT = fst x + snd x in sumT + trd x, sumT &gt; 100 ]\n\ntrd (_,_,x) = x\n</code></pre>\n\n<p>I'm receiving the message:</p>\n\n<blockquote>\n  <p>Not in scope: `sumT'</p>\n</blockquote>\n\n<p>I figured that when I use the <code>let</code> I'm specifying who is my variable</p>\n\n<p>PS: I need to user <code>let</code>and list comprehesion</p>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 5, "creation_date": 1490469843, "post_id": 43020826, "comment_id": 73129493, "body": "This is a typo: you put an extra <code>c</code> before the <code>where</code>, which makes the value in your <code>otherwise</code> clause <code>c c</code>, rather than <code>c</code>."}, {"owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "reply_to_user": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1490470254, "post_id": 43020826, "comment_id": 73129623, "body": "@duplode Oh I see! Thank you!"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1490476769, "post_id": 43020826, "comment_id": 73131561, "body": "If you are using <code>-1</code> simply as a marker to indicate invalid inputs, then you should consider changing your type to <code>Int -&gt; Int -&gt; Maybe Int</code> and returning <code>Nothing</code> in the first case (and <code>Just 47</code>, <code>Just 50</code>, <code>Just c</code> in the others)."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8956987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04afa3be2686089a43990f066c3c303b?s=128&d=identicon&r=PG&f=1", "display_name": "cupcake", "link": "https://stackoverflow.com/users/8956987/cupcake"}, "is_accepted": false, "score": 1, "last_activity_date": 1520355335, "creation_date": 1520355335, "answer_id": 49136143, "question_id": 43020826, "link": "https://stackoverflow.com/questions/43020826/haskel-type-error/49136143#49136143", "title": "Haskel type error", "body": "<p>I tried your code using ghci and once i removed the c right before the where it worked fine.</p>\n\n<pre><code>grade :: Int-&gt;Int-&gt;Int                           \ngrade a b \n |((a &lt; 0) || (a &gt; 100) || (b &lt; 0) || (b &gt; 0)) = -1\n |(c &gt; 47) &amp;&amp; (a &lt;= 47) = 47\n |(c &gt; 47) &amp;&amp; (a &gt; 47) &amp;&amp; (c &lt;50) = 50\n |otherwise = c\n where\n c = ((8 * a) `div` 10) + b\n</code></pre>\n\n<p>Also if you intend to only go into the first case if b is not zero i would suggest to write the first condition like this</p>\n\n<pre><code>|((a &lt; 0) || (a &gt; 100) || (not (b==0))) = -1\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6198129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1012878735426388/picture?type=large", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6198129/stelios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520355335, "creation_date": 1490469337, "last_edit_date": 1490475774, "question_id": 43020826, "link": "https://stackoverflow.com/questions/43020826/haskel-type-error", "title": "Haskel type error", "body": "<p>Hello I am new to Haskel, and I am trying to write some code for a project I have, but I keep getting the following error:</p>\n\n<pre><code>ERROR file:.\\Lab1.hs:12 - Type error in application\n*** Expression     : c c\n*** Term           : c\n*** Type           : Int\n*** Does not match : a -&gt; b\n</code></pre>\n\n<hr>\n\n<p>My code looks like this. What am I doing wrong?</p>\n\n<pre><code>grade :: Int-&gt;Int-&gt;Int                           \ngrade a b \n    |((a &lt; 0) || (a &gt; 100) || (b &lt; 0) || (b &gt; 0)) = -1\n    |(c &gt; 47) &amp;&amp; (a &lt;= 47) = 47\n    |(c &gt; 47) &amp;&amp; (a &gt; 47) &amp;&amp; (c &lt;50) = 50\n    |otherwise = c\n    c where\n    c = ((8 * a) `div` 10) + b\n</code></pre>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 3, "creation_date": 1490469637, "post_id": 43020783, "comment_id": 73129428, "body": "Your mistake is in your recursive call to <code>get_index</code>. In the last line of <code>get_index</code>, you meant <code>get_index (index + 1) char str</code>, <i>not</i> <code>get_index(index + 1 char str)</code>. And then the function works as expected!"}, {"owner": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490469800, "post_id": 43020783, "comment_id": 73129485, "body": "Yes, it worked. Than you very much!"}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1490705634, "post_id": 43061206, "comment_id": 73223525, "body": "I&#39;d add that the outer parens are not required and should be omitted (this isn&#39;t Lisp!), unless <code>plus a b</code> is the argument to another function call."}, {"owner": {"reputation": 3350, "user_id": 6112457, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZRj0Z.jpg?s=128&g=1", "display_name": "Zoey Hewll", "link": "https://stackoverflow.com/users/6112457/zoey-hewll"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490771362, "post_id": 43061206, "comment_id": 73255314, "body": "I&#39;ll mention that they aren&#39;t necessary, but if this function is embedded in another function call then it is required for disambiguation, whereas no <i>additional</i> brackets are needed in this case in a c function call. Eg <code>f(x, g(y))</code> =&gt; <code>(f x (g y))</code> == <code>f x (g y)</code>, but not <code>f x g y</code>"}], "tags": [], "owner": {"reputation": 3350, "user_id": 6112457, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZRj0Z.jpg?s=128&g=1", "display_name": "Zoey Hewll", "link": "https://stackoverflow.com/users/6112457/zoey-hewll"}, "is_accepted": true, "score": 2, "last_activity_date": 1490772735, "last_edit_date": 1490772735, "creation_date": 1490678666, "answer_id": 43061206, "question_id": 43020783, "link": "https://stackoverflow.com/questions/43020783/recursion-with-more-parameters/43061206#43061206", "title": "Recursion with more parameters", "body": "<p>it seems you're trying to use c-style function call syntax.\nfor a c-style function, e.g. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// defining the function\nint plus(int a, int b)\n{\n    return a + b;\n}\n\n// elsewhere, calling the function\nplus(a, b); // brackets surrounding only the arguments, comma separated\n</code></pre>\n\n<p>the equivalent Haskell code will be</p>\n\n<pre><code>-- defining the function\nplus :: Int -&gt; Int -&gt; Int\nplus a b = a + b\n\n-- elsewhere, calling the function:\n(plus a b) -- brackets surrounding the function and the arguments, no commas\n-- note, plus (a b) would be equivalent to c: plus(a(b));\n</code></pre>\n\n<p>Note, these brackets are only ever needed for disambiguation, and in this case they can be removed, leaving <code>plus a b</code>.<br>\nIn the following case, they would be needed:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>plus(a, times(b, c));\n</code></pre>\n\n<p>This becomes:</p>\n\n<pre><code>(plus a (times b c))\n</code></pre>\n\n<p>Which is the same as:</p>\n\n<pre><code>plus a (times b c)\n</code></pre>\n\n<p>However it is not the same as:</p>\n\n<pre><code>plus a times b c\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 5736833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-hI7bQ9xAMBI/AAAAAAAAAAI/AAAAAAAAABk/Y4nLl5SgtLg/photo.jpg?sz=128", "display_name": "Marcus", "link": "https://stackoverflow.com/users/5736833/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 43061206, "answer_count": 1, "score": 1, "last_activity_date": 1517657327, "creation_date": 1490469133, "last_edit_date": 1517657327, "question_id": 43020783, "link": "https://stackoverflow.com/questions/43020783/recursion-with-more-parameters", "title": "Recursion with more parameters", "body": "<p>I am trying to write an equivalent function to Javascript's \"indexOf\".(getting the index of a character in a string), but I am having problems when calling the recursive function.</p>\n\n<p>This is the error:</p>\n\n<pre><code>    Couldn't match expected type `Int'\n            with actual type `a0 -&gt; [a0] -&gt; Int'\nIn the return type of a call of `get_index'\nProbable cause: `get_index' is applied to too few arguments\nIn the expression: get_index (index + 1 char str)\nIn an equation for `get_index':\n    get_index index char str\n      | index &lt; 0 || index &gt;= (length str) = - 1\n      | (str !! index) == char = index\n      | otherwise = get_index (index + 1 char str)\nFailed, modules loaded: none.\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>index_of char str =\n  get_index 0 char str\n\nget_index index char str\n  | index &lt; 0 || index &gt;= (length str) = -1\n  | (str !! index) == char = index\n  | otherwise = get_index(index + 1 char str)\n</code></pre>\n\n<p>First function's purpose is solely to call the recursion with the index parameter, nothing more, the problem I have is in the second function, the recursion.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490467842, "post_id": 43020482, "comment_id": 73128891, "body": "<code>add (a,b) = a+b</code>?"}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490468003, "post_id": 43020482, "comment_id": 73128940, "body": "Already tried, says this  ERROR - Type error in application *** Expression     : addS 2.0 3.0 *** Term           : addS *** Type           : Complex -&gt; Float *** Does not match : a -&gt; b -&gt; c"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490468281, "post_id": 43020482, "comment_id": 73129014, "body": "Sounds like you tried to call <code>add</code> with its old signature <code>add :: Float -&gt; Float -&gt; Float</code>. If you are calling the new <code>add</code>, it should be something like <code>add (2.0,3.0)</code>, <i>not</i> <code>add 2.0 3.0</code>."}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490469450, "post_id": 43020482, "comment_id": 73129359, "body": "Oh really :D if you leave an answer i will vote it up. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 4681, "user_id": 1264328, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/786f8275d9fa334bc27630e0fc7f0d22?s=128&d=identicon&r=PG", "display_name": "bwroga", "link": "https://stackoverflow.com/users/1264328/bwroga"}, "is_accepted": true, "score": 1, "last_activity_date": 1490490064, "creation_date": 1490490064, "answer_id": 43023799, "question_id": 43020482, "link": "https://stackoverflow.com/questions/43020482/how-to-sum-a-float-float-type-elements-in-haskell/43023799#43023799", "title": "How to sum a (float,float) type elements in Haskell?", "body": "<p>If you defined <code>add</code> like this:</p>\n\n<pre><code>add :: Float -&gt; Float -&gt; Float\nadd a b = a+b\n</code></pre>\n\n<p>You could apply <code>add</code> to <code>Complex</code> objects like this:</p>\n\n<pre><code>uncurry add (2.0, 3.0)\n</code></pre>\n\n<p>uncurry \"converts\" a function of type <code>(a -&gt; b -&gt; c)</code> to a function of type <code>((a, b) -&gt; c)</code></p>\n"}], "owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 43023799, "answer_count": 1, "score": 0, "last_activity_date": 1490490064, "creation_date": 1490467640, "question_id": 43020482, "link": "https://stackoverflow.com/questions/43020482/how-to-sum-a-float-float-type-elements-in-haskell", "title": "How to sum a (float,float) type elements in Haskell?", "body": "<p>Here is my code <br>\nNow it works with Float -> Float -> Float but i can't make it work with my defined \"Complex\" type.  <br><br>\nI would like to make it look and work like this. <br></p>\n\n<pre><code>   add :: Complex -&gt; Float\n</code></pre>\n\n<p><br> I think it's like chaning only a few words but i can't figure it out. Thanks for your patience.</p>\n\n<p>Here is my code</p>\n\n<pre><code>type Complex = (Float,Float)\n\nadd :: Float -&gt; Float -&gt; Float\nadd a b = a+b\n\n\nxor :: Float -&gt; Float -&gt; Float\nxor a b = a*b\n</code></pre>\n"}, {"tags": ["haskell", "numbers"], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 3, "last_activity_date": 1490469012, "creation_date": 1490469012, "answer_id": 43020754, "question_id": 43020384, "link": "https://stackoverflow.com/questions/43020384/how-to-convert-any-num-value-to-a-floating-value-in-haskell/43020754#43020754", "title": "How to convert any Num value to a Floating value in Haskell?", "body": "<p>You cannot.  The following is a valid specialization</p>\n\n<pre><code>numToFloating :: Complex Float -&gt; Float\n</code></pre>\n\n<p>since <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Complex.html#t:Complex\" rel=\"nofollow noreferrer\"><code>Complex</code></a><code>Float</code> is an <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/src/Data.Complex.html#line-118\" rel=\"nofollow noreferrer\">instance of <code>Num</code></a>.  What are we supposed to do with the imaginary part?</p>\n\n<p>So what you really want to say is that the input is any <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Real\" rel=\"nofollow noreferrer\"><code>Real</code></a> type, giving the signature</p>\n\n<pre><code>:: (Real a, Floating b) =&gt; a -&gt; b\n</code></pre>\n\n<p>which turns out to be a little stronger than necessary.  There is already <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#v:realToFrac\" rel=\"nofollow noreferrer\"><code>realToFrac</code></a></p>\n\n<pre><code>realToFrac :: (Real a, Fractional b) =&gt; a -&gt; b\n</code></pre>\n\n<p>which will do what you need, since any <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Floating\" rel=\"nofollow noreferrer\"><code>Floating</code></a> type is already <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Prelude.html#t:Fractional\" rel=\"nofollow noreferrer\"><code>Fractional</code></a>.</p>\n"}], "owner": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 43020754, "answer_count": 1, "score": 1, "last_activity_date": 1490469012, "creation_date": 1490467098, "question_id": 43020384, "link": "https://stackoverflow.com/questions/43020384/how-to-convert-any-num-value-to-a-floating-value-in-haskell", "title": "How to convert any Num value to a Floating value in Haskell?", "body": "<p>I would like to use functions (for example exponential functions), which only works on Floating types. My input can be any type of Num: Integer, Float, Fractional ...</p>\n\n<p>How is it possible to convert all of them to a Floating?</p>\n\n<pre><code>numToFloating :: (Num a, Floating b) =&gt; a -&gt; b\n...\n</code></pre>\n\n<p>I have no idea, where to start</p>\n"}, {"tags": ["haskell", "types", "functional-programming", "maybe"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1490456619, "post_id": 43018227, "comment_id": 73124837, "body": "A <code>Maybe</code> is a parameterized type. And now you know as much as you did before."}, {"owner": {"reputation": 3137, "user_id": 1862339, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e1fdbdf79034c63bd0fb1b51e48695f?s=128&d=identicon&r=PG", "display_name": "stholzm", "link": "https://stackoverflow.com/users/1862339/stholzm"}, "edited": false, "score": 6, "creation_date": 1490456650, "post_id": 43018227, "comment_id": 73124849, "body": "<code>sqrt :: Float -&gt; Maybe Float</code> sounds more reasonable. There may or may not be a valid result. That&#39;s what the <code>Maybe</code> type is about."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1490456675, "post_id": 43018227, "comment_id": 73124858, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18808258/what-does-the-just-syntax-mean-in-haskell\">What does the &quot;Just&quot; syntax mean in Haskell?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1490457756, "creation_date": 1490457756, "answer_id": 43018614, "question_id": 43018227, "link": "https://stackoverflow.com/questions/43018227/understanding-maybe-in-haskell/43018614#43018614", "title": "Understanding &#39;maybe&#39; in haskell", "body": "<p>I have retracted my close vote, although the top answer on the other question more or less answers this one its not really a dupe per se.</p>\n\n<p>First, lets talk about parameterized types.</p>\n\n<p>If I say (language agnostic)</p>\n\n<pre><code>Array&lt;String&gt;\n</code></pre>\n\n<p>we have a array of strings. And an array of strings <code>[\"foo\", \"bar\"]</code> <em>has the type</em> <code>Array&lt;String&gt;</code>. 'Array' by itself isn't really a complete type*, we have an array <em>of</em> something. In other words, we will parameterize <code>Array</code> with the type <code>String</code>.</p>\n\n<p><code>Maybe</code> works like this too, you have a (in this case) a <code>Maybe Float</code> which can be either <code>Just Float</code> or <code>Nothing</code>. Now, just like the compiler won't let you pass a list of ints to a function that takes an int, it won't let you pass a <code>Maybe T</code> to a function that takes type <code>T</code>. You have to deal with the <code>Nothing</code> case, the type system prevents omitting handling the failure case. So you're sqrt function should have signature</p>\n\n<pre><code>sqrt :: Float -&gt; Maybe Float\n</code></pre>\n\n<p>To reflect the fact that although you can pass in any float, the result might not be there if the argument is negative.</p>\n\n<p>* For the purposes of this discussion.</p>\n"}, {"tags": [], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "is_accepted": false, "score": 7, "last_activity_date": 1490479483, "last_edit_date": 1490479483, "creation_date": 1490457947, "answer_id": 43018660, "question_id": 43018227, "link": "https://stackoverflow.com/questions/43018227/understanding-maybe-in-haskell/43018660#43018660", "title": "Understanding &#39;maybe&#39; in haskell", "body": "<p><code>Maybe</code> is a type constructor with a simple definition:</p>\n\n<pre><code>data Maybe a \n    = Just a  \n    | Nothing\n</code></pre>\n\n<p>This syntax reads as \"Create a new type constructor called <code>Maybe</code> which accepts one type parameter. It has two value constructors: <code>Just</code> which takes a single argument of type <code>a</code>, or <code>Nothing</code>.\"</p>\n\n<p>When we are writing functions which accept a <code>Maybe</code> argument, then we can pattern match on that to handle both cases.</p>\n\n<pre><code>foo :: Maybe String -&gt; String\nfoo (Just str) = str\nfoo Nothing = \"There was nothing!\"\n</code></pre>\n\n<p>If a function doesn't have a meaningful definition for all inputs, then we can use <code>Maybe</code> to say that. For example, <code>sqrt</code> in the Prelude returns <code>NaN</code> for negative values. We could write a different version that returned <code>Maybe</code>:</p>\n\n<pre><code>import qualified Prelude\nimport Prelude hiding (sqrt)\n\nsqrt :: Float -&gt; Maybe Float\nsqrt x\n    | x &lt; 0     = Nothing\n    | otherwise = Just (Prelude.sqrt x)  \n</code></pre>\n\n<p>We might read that type as \"If you give me a float, then I may be able to return a float.\"</p>\n"}], "owner": {"reputation": 89, "user_id": 7500874, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2a505759aeda973b2072d25e64b885e1?s=128&d=identicon&r=PG&f=1", "display_name": "sgman", "link": "https://stackoverflow.com/users/7500874/sgman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2281, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490479483, "creation_date": 1490455743, "question_id": 43018227, "link": "https://stackoverflow.com/questions/43018227/understanding-maybe-in-haskell", "title": "Understanding &#39;maybe&#39; in haskell", "body": "<p>So say we have an example of a function sqrt that gives us the square root of a floating point number but does not abort on negative inputs. So what will be the type of sqrt.</p>\n\n<p>I was told the answer is:</p>\n\n<pre><code>sqrt :: Maybe Float -&gt; Float\n</code></pre>\n\n<p>however i do not understand what the Maybe does, does it simply mean that we can give anything as input or does it mean something else.</p>\n"}, {"tags": ["haskell", "type-theory"], "answers": [{"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1490463345, "post_id": 43018581, "comment_id": 73127354, "body": "I remember seeing some threads on Haskell-cafe some time ago describing how to work with these types computationally, and that the most compelling reason for not including them is error messages become impossible, getting pushed out a level, so you can&#39;t find your mistake anymore."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 5, "last_activity_date": 1490457609, "creation_date": 1490457609, "answer_id": 43018581, "question_id": 43018103, "link": "https://stackoverflow.com/questions/43018103/what-are-infinite-types/43018581#43018581", "title": "What are infinite types?", "body": "<blockquote>\n  <p>Apparently, there is something called an infinite type in Haskell.</p>\n</blockquote>\n\n<p>Since the Haskell type checker raises a type error every time an infinite type would arise, I would say there are <em>no</em> infinite types in Haskell.</p>\n\n<p>Anyway, \"infinite\" types refer to how many type constructors appear in the type itself. For instance <code>[[Int]] -&gt; Bool</code> mentions <code>[], Bool, Int, (-&gt;)</code>, so it is finite. If we could write <code>type L = [[[[...]]]]</code> with infinitely many nestings, we would have an infinite type: a type whose values are lists of lists of lists ... forever.</p>\n\n<p>Infinite types might arise through unification during type inference. If I write</p>\n\n<pre><code>let x = [x] in ...\n</code></pre>\n\n<p>then if <code>T</code> is the type of <code>x</code>, it must also be the type of <code>[x]</code> by definition. However, the latter clearly has type <code>[T]</code>. Hence, we must solve the equation <code>T = [T]</code>, whose solution would lead to the infinite type <code>L</code> discussed above.</p>\n\n<p>Haskell, like virtually all programming languages, rejects infinite types since they are often symptoms of a programmer mistake. Further, I guess that adding infinite (regular) types can make type checking much harder. I can't recall any theoretical result about infinite types, but I wouldn't be surprised if type checking would become undecidable.</p>\n"}, {"comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1490459874, "post_id": 43018584, "comment_id": 73126044, "body": "<a href=\"https://dl.acm.org/citation.cfm?id=871905\" rel=\"nofollow noreferrer\">According to Fax&#233;n</a> Haskell does not have the principal type property anyway... although that article is from 2003 and maybe the two issues pointed out there were fixed."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1490460415, "post_id": 43018584, "comment_id": 73126244, "body": "@Bakuriu Neat! Although that doesn&#39;t change the fact that equirecursive types would prevent us from having cheap (in the computational sense) equality over types."}], "tags": [], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "is_accepted": false, "score": 2, "last_activity_date": 1490457634, "creation_date": 1490457634, "answer_id": 43018584, "question_id": 43018103, "link": "https://stackoverflow.com/questions/43018103/what-are-infinite-types/43018584#43018584", "title": "What are infinite types?", "body": "<p>\"Infinite\" types aren't really part of type theory. In general, Math stays away from dealing with things that \"go on forever\". Formally, you are looking for the notion of recursive types. Most programming languages <em>do</em> support recursive types, but only when guarded by an additional constructor. In Haskell, for example, the following is allowed (in fact, at runtime, it would be equivalent to an infinitely nested list in its representation):</p>\n\n<pre><code>newtype InfinitelyNestedList a = Nest [InfinitelyNestedList a]\n</code></pre>\n\n<p>However, there <em>is</em> a formalization of this sort of thing that is pretty much exactly what you were talking about: <a href=\"https://en.wikipedia.org/wiki/Recursive_data_type#Equirecursive_types\" rel=\"nofollow noreferrer\">equirecursive \"mu\" types</a> (that should give you a good googling starting point). Mixing the list type constructor in, you could think of the infinitely nested list type as</p>\n\n<pre><code>\u00b5 x. [x]\n</code></pre>\n\n<p>No large popular language that I know of uses equirecursive types and for good reason - it means you no longer have a principal type. In Haskell, every type can be normalized, so if you want to check if two types are equal (in the compiler), normalize them and compare. Here however, you lose that. For example, the following types are all completely equal!</p>\n\n<pre><code>\u00b5 x. [x]\n[[\u00b5 x. [x]]]\n[[[[[[[\u00b5 x. [x]]]]]]]]\n</code></pre>\n\n<p>In this case, the compiler could additionally normalize to the \"simplest\" first case - but in general there is no notion of \"simplest\".</p>\n"}, {"tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": false, "score": 1, "last_activity_date": 1490481716, "creation_date": 1490481716, "answer_id": 43022796, "question_id": 43018103, "link": "https://stackoverflow.com/questions/43018103/what-are-infinite-types/43022796#43022796", "title": "What are infinite types?", "body": "<p>\"Infinite types\" aren't really a special thing as far as I'm aware. I read this line of the error message:</p>\n\n<pre><code>Occurs check: cannot construct the infinite type: a ~ [a]\n</code></pre>\n\n<p>as just using \"infinite\" as an adjective to describe a type, not using \"infinite type\" as a name for a special class of type. The compiler realised that it would need a type satisfying <code>a ~ [a]</code> to give a type to your code, and it can't handle such a type.</p>\n\n<p>The error message would be completely correct if it was just:</p>\n\n<pre><code>Occurs check: cannot construct the type: a ~ [a]\n</code></pre>\n\n<p>The word infinite is added just to highlight what the problem is. If the type <code>a</code> unifies with <code>[a]</code>, then it also unifies with <code>[[a]]</code>, <code>[[[a]]]</code>, etc. It will never unify with any list type nested a finite number of times, since it can always expand <code>a ~ [a]</code> one more time.</p>\n"}], "owner": {"reputation": 1818, "user_id": 1955231, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100002848311925/picture?type=large", "display_name": "Agnishom Chattopadhyay", "link": "https://stackoverflow.com/users/1955231/agnishom-chattopadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1490481716, "creation_date": 1490455093, "last_edit_date": 1490455520, "question_id": 43018103, "link": "https://stackoverflow.com/questions/43018103/what-are-infinite-types", "title": "What are infinite types?", "body": "<p>Apparently, there is something called an <em>infinite type</em> in Haskell.</p>\n\n<p>For example, when I try <code>iterate concat</code> on GHCi, I get this:</p>\n\n<pre><code>*Main&gt; iterate concat\n\n&lt;interactive&gt;:24:9: error:\n    \u2022 Occurs check: cannot construct the infinite type: a ~ [a]\n      Expected type: [a] -&gt; [a]\n        Actual type: [[a]] -&gt; [a]\n    \u2022 In the first argument of \u2018iterate\u2019, namely \u2018concat\u2019\n      In the expression: iterate concat\n      In an equation for \u2018it\u2019: it = iterate concat\n    \u2022 Relevant bindings include\n        it :: [a] -&gt; [[a]] (bound at &lt;interactive&gt;:24:1)\n</code></pre>\n\n<p>My question is, what exactly are infinite types? How do they fit into type theory and from what resources can I learn about them? Are there any programming languages which allow infinite types?</p>\n"}, {"tags": ["haskell", "graph", "functional-programming", "ghci"], "answers": [{"comments": [{"owner": {"reputation": 2106, "user_id": 588959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a95696a0bc1b7e3c9e7c0fc6778dcaf?s=128&d=identicon&r=PG", "display_name": "Jack H", "link": "https://stackoverflow.com/users/588959/jack-h"}, "edited": false, "score": 0, "creation_date": 1490453031, "post_id": 43017558, "comment_id": 73123596, "body": "What a fantastic answer; thank you! That has cleared a few things up for me. I did have some doubts about the knot tying and inadvertantly creating an infinite structure. The other way(keeping adjacency matrixes, etc) just seemed, inelegant."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 2, "last_activity_date": 1490452638, "last_edit_date": 1490452638, "creation_date": 1490451905, "answer_id": 43017558, "question_id": 43017384, "link": "https://stackoverflow.com/questions/43017384/haskell-data-type-for-hmatrix-vector-and-matrix/43017558#43017558", "title": "Haskell data type for hmatrix Vector and Matrix", "body": "<p><code>Vector</code> and <code>Matrix</code> are parameterised on the scalar type (so you can not only have matrices of floating-point \u201creal numbers\u201d, but also matrices of integers, complex numbers etc.). This is what GHC tells you by <code>\u2018Vector\u2019 has kind \u2018* -&gt; *\u2019</code>: by itself, <code>Vector</code> is not a type (types have kind <code>*</code>, aka <code>Type</code>). Rather it is a <em>type function</em> mapping types of kind <code>*</code> to types of kind <code>*</code>. Scalars like <code>Double</code> are already plain types, so you can just apply <code>Vector</code> to them.</p>\n\n<pre><code>GHCi&gt; :kind Vector\nVector :: * -&gt; *\nGHCi&gt; :k Double\nDouble :: *\nGHCi&gt; :k Vector Double\nVector Double :: *\n</code></pre>\n\n<p>Thus you need</p>\n\n<pre><code>newtype Mean = Mean (Vector Double)\nnewtype Covariance = Covariance (Matrix Double)\n</code></pre>\n\n<p>(<code>newtype</code> does the same thing as <code>data</code> here, but it's a bit more efficient because no extra box/pointer is needed).</p>\n\n<p>Alternatively, you may use more meaningfully-typed vector spaces, e.g.</p>\n\n<pre><code>import Math.LinearMap.Category\n\nnewtype Mean v = Mean v\nnewtype Covariance v = Covariance (v +&gt; DualVector v)\n</code></pre>\n\n<p>The advantage of this is that dimensions are checked at compile time, which prevents nasty runtime errors (and can in principle also improve performance, though frankly the <code>linearmap-category</code> library is not optimised at all yet).</p>\n\n<p>You'd then also parameterise the other types over the vector space:</p>\n\n<pre><code>data Gau\u00dfian v = Gau\u00dfian (Mean v) (Covariance v)\ndata Node v = Node [Node v] (Gaussian v)\ndata Graph v = Graph [Node v]\n</code></pre>\n\n<p>Somewhat unrelated to your question: this knot-tying sure feels elegant, but it's not really a suitable way to represent a graph, because nodes can't be identity-checked. Any cycles in the graph lead to, for all distinguishable means, an infinite structure. In practice, you won't get around giving your nodes e.g. <code>Int</code> labels and keeping a separate structure for the edges.</p>\n"}], "owner": {"reputation": 2106, "user_id": 588959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a95696a0bc1b7e3c9e7c0fc6778dcaf?s=128&d=identicon&r=PG", "display_name": "Jack H", "link": "https://stackoverflow.com/users/588959/jack-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 43017558, "answer_count": 1, "score": 1, "last_activity_date": 1490452638, "creation_date": 1490450930, "last_edit_date": 1490451636, "question_id": 43017384, "link": "https://stackoverflow.com/questions/43017384/haskell-data-type-for-hmatrix-vector-and-matrix", "title": "Haskell data type for hmatrix Vector and Matrix", "body": "<p>I am just starting out with Haskell, I have read up to the defining data types section of LYAH and am attempting to implement the Sum-Product algorithm for Belief Propagation. One of the rudimentary tasks is to define the Probabilistic Graphical Model. </p>\n\n<p>As shown below, I have attempted to create a graph by tying the knot to represent the graph where each node represents a Gaussian distribution and has constant weight links(for now) to it's neighbours. However, when trying to define the Mean and Covariance types I am having some difficulty in specifying the types of the Matrix and Vector types, i.e. Float or Double.</p>\n\n<pre><code>module Graph(Graph) where\n\nimport Numeric.LinearAlgebra\n\ndata Mean = Mean Vector\ndata Covariance = Covariance Matrix\ndata Gaussian = Gaussian Mean Covariance\n\ndata Node = Node [Node] Gaussian\ndata Graph = Graph [Node]\n</code></pre>\n\n<p>In this simple example, what is the syntax to define Mean as a Vector of type Double and Covariance as a Matrix of type Double. Additionally, how would one generalise so that <code>Mean</code> and <code>Covariance</code> can be of type Float or Double?</p>\n\n<p>I currently get the following from GHCi</p>\n\n<pre><code>Graph.hs:5:18: error:\n    \u2022 Expecting one more argument to \u2018Vector\u2019\n      Expected a type, but \u2018Vector\u2019 has kind \u2018* -&gt; *\u2019\n    \u2022 In the type \u2018Vector\u2019\n      In the definition of data constructor \u2018Mean\u2019\n      In the data declaration for \u2018Mean\u2019\nFailed, modules loaded: none.\n</code></pre>\n\n<p>I am using the hmatrix package as described <a href=\"https://hackage.haskell.org/package/hmatrix\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["parsing", "haskell", "compiler-construction", "happy", "alex"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1490454488, "post_id": 43014966, "comment_id": 73124088, "body": "How do you know where a block starts? I presume that <code>localDefs</code> is not self-terminating, so there must be some lexical feature that you can use to know where the block starts. Could you possibly elucidate a bit?"}, {"owner": {"reputation": 305, "user_id": 7581653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e2da68e74c8b7b89b6c98095e3292a?s=128&d=identicon&r=PG", "display_name": "Liarokapis Alexandros", "link": "https://stackoverflow.com/users/7581653/liarokapis-alexandros"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1490457257, "post_id": 43014966, "comment_id": 73125043, "body": "@rici The block is either surrounded by begin/end keywords or otherwise is indentation based. It is basically defined as either begin stmts+ end or stmts autoend. The lexer needs to be notified that a begin is missing in order to produce an autoend when it detecteds an identation change. The whole approach feels very hacky there has to be a better way."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490457719, "post_id": 43014966, "comment_id": 73125209, "body": "I just solved this <i>exact</i> problem two weeks ago. Didn&#39;t think anyone else would run across it."}, {"owner": {"reputation": 305, "user_id": 7581653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e2da68e74c8b7b89b6c98095e3292a?s=128&d=identicon&r=PG", "display_name": "Liarokapis Alexandros", "link": "https://stackoverflow.com/users/7581653/liarokapis-alexandros"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490458288, "post_id": 43014966, "comment_id": 73125408, "body": "@Alec eagerly waiting for details!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490460397, "post_id": 43014966, "comment_id": 73126235, "body": "I&#39;ll wait to see what @alec writes, but my approach would be either to make the newline visible to the parser, in which case the lexer change can be done <i>before</i> the trigger token, or to handle it all in the lexer. Both are a bit hacky but so is the syntax :) Contrast python&#39;s use of colon."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1490460554, "post_id": 43014966, "comment_id": 73126293, "body": "@rici Please do post your solution - I would be very interested to see what else is possible. In my case, I was stuck with a lexer that I couldn&#39;t really change (I wanted it to behave like the reference implementation), so I instead ended up doing backflips in the parser."}], "answers": [{"tags": [], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "is_accepted": true, "score": 1, "last_activity_date": 1490460207, "creation_date": 1490460207, "answer_id": 43019078, "question_id": 43014966, "link": "https://stackoverflow.com/questions/43014966/happy-alex-preventing-the-lookahead-from-affecting-parser-lexer-communicatio/43019078#43019078", "title": "Happy &amp; Alex - Preventing the lookahead from affecting parser-lexer communication", "body": "<p>I am assuming you are using a threaded lexer (so Happy and Alex are running in the same monad). The trick I used when faced with a similar problem is to make an empty production rule that you slip into your rule.</p>\n\n<pre><code>changeAlexState :: { () }\n  : {- empty -} {%% \\tok -&gt; changeAlexState *&gt; pushTok tok }\n\nfuncDef : header localDefs changeAlexState block\n</code></pre>\n\n<p>Then, you need to add to your monad some state to support <code>pushTok :: Token -&gt; P ()</code> (where <code>P</code> is your lexing/parsing monad) and make sure you always pop that token when when you are lexing. What <code>%%</code> does is <a href=\"https://www.haskell.org/happy/doc/html/sec-monads.html#sec-lexers\" rel=\"nofollow noreferrer\">documented here</a>. </p>\n\n<blockquote>\n  <p><code>n  :  t_1 ... t_n          {%% &lt;expr&gt; }</code></p>\n  \n  <p>... The type of <code>&lt;expr&gt;</code> is the same [still <code>Token -&gt; P a</code>], but in this case the lookahead token is actually discarded and a new token is read from the input. This can be useful when you want to change the next token and continue parsing. </p>\n</blockquote>\n\n<p>I mentioned I did something similar not long ago. <a href=\"https://github.com/harpocrates/language-rust/blob/dbd63a6961bd609973b4ac075b11bff96d4b3cea/src/Language/Rust/Parser/Internal.y#L288-L299\" rel=\"nofollow noreferrer\">Here is my \"empty\" rule</a>, <a href=\"https://github.com/harpocrates/language-rust/blob/dbd63a6961bd609973b4ac075b11bff96d4b3cea/src/Language/Rust/Parser/Internal.y#L446\" rel=\"nofollow noreferrer\">here is an example use of it</a>, <a href=\"https://github.com/harpocrates/language-rust/blob/master/src/Language/Rust/Parser/ParseMonad.hs#L123-L127\" rel=\"nofollow noreferrer\">here is where my pushing function is defined</a> and <a href=\"https://github.com/harpocrates/language-rust/blob/master/src/Language/Rust/Parser/Lexer.x#L1223\" rel=\"nofollow noreferrer\">here is where I \"pop\" tokens</a>. Let me know how it goes!</p>\n"}], "owner": {"reputation": 305, "user_id": 7581653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e2da68e74c8b7b89b6c98095e3292a?s=128&d=identicon&r=PG", "display_name": "Liarokapis Alexandros", "link": "https://stackoverflow.com/users/7581653/liarokapis-alexandros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 43019078, "answer_count": 1, "score": 1, "last_activity_date": 1490460207, "creation_date": 1490435825, "question_id": 43014966, "link": "https://stackoverflow.com/questions/43014966/happy-alex-preventing-the-lookahead-from-affecting-parser-lexer-communicatio", "title": "Happy &amp; Alex - Preventing the lookahead from affecting parser-lexer communication", "body": "<p>I am currently writing the parser for a compiler of a toy language \nusing Happy &amp; Alex. Since some form of optional layout is required I have to change\nAlex's state before matching the <code>block</code> non-terminal. Unfortunately\nit seems that the lookahead token required by Happy is read before\nI have the chance to change Alex's state.</p>\n\n<p>Here is a small snippet demonstrating the problem:</p>\n\n<pre><code>funcDef : header localDefs block\n                          ^ I have to change alex's state \n                            before the underlying lexer\n                            starts reading the block tokens.\n</code></pre>\n\n<p>Is there a common approach to this problem ?</p>\n"}, {"tags": ["haskell", "parse-error"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1490435281, "post_id": 43014122, "comment_id": 73118444, "body": "<code>head xs</code> is an expression, not a pattern. In a pattern you can only use constructors like <code>[]</code> and <code>:</code>, and variables."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1490435423, "post_id": 43014122, "comment_id": 73118484, "body": "Right now it is vvery unclear what you are trying to achieve, please show some 8n and output\u200b. If you want to find out about the error ghc is giving, take each line of your definition put it in ghci and ask its signature with <code>:t</code>, after you have fixed the error @chi mentioned"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490438860, "post_id": 43014931, "comment_id": 73119363, "body": "I understand the idea except &quot;use&quot; thing. is there any way to keep track of indexes while recursion going on ? I mean what if I want to make even/odd checks on previous elemtns in if condition ?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490443392, "post_id": 43014931, "comment_id": 73120681, "body": "If you need even/odd index information, you can pass an additional boolean telling whether we are at an even index. Then, every time we recurse, we negate that boolean, so that it continuously flips between true and false, as we want."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1490435562, "creation_date": 1490435562, "answer_id": 43014931, "question_id": 43014122, "link": "https://stackoverflow.com/questions/43014122/parse-error-in-pattern-in-my-little-program/43014931#43014931", "title": "Parse error in pattern in my little program", "body": "<p>To have access to the \"previous\" list element, you have to use a different recursion. E.g.</p>\n\n<pre><code>foo []  = baseCase\nfoo [x] = onlyOneElement x\nfoo (x1:x2:xs) = use x1 x2 (foo (x2:xs))\n</code></pre>\n\n<p>When calling <code>foo [1,2,3,4,5]</code>, you get access to <code>x1=1, x2=2</code>. When you recurse, you will get access to <code>x1=2, x2=3</code>, and so on. So, you can consider <code>x2</code> to be the \"current\" element, and <code>x1</code> to be the previous one.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490443257, "post_id": 43015383, "comment_id": 73120642, "body": "its really nice answer, thank you very much 1st. I wonder 1 more advance stage in same question : What if i have same characters in same elements in my input such as [[&quot;C&quot;,&quot;C&quot;,&quot;C&quot;],[&quot;D&quot;,&quot;D&quot;,&quot;D&quot;]] . Does algorithm above fails in both questions?"}, {"owner": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490446924, "post_id": 43015383, "comment_id": 73121726, "body": "In addition I get those errors for 2nd code:   ex.hs:5:17: error: Variable not in scope: elemIndex :: Char -&gt; String -&gt; Maybe Int ex.hs:5:35: error:     \u2022 Couldn&#39;t match expected type \u2018Maybe Char\u2019 with actual type \u2018Char\u2019     \u2022 In the expression: (x1 !! (i - 1))       In an equation for \u2018f\u2019:           f (x1 : x2 : xs) c             | Just i &lt;- elemIndex c x2 = (x1 !! (i - 1))             | otherwise = f (x2 : xs) c"}, {"owner": {"reputation": 326, "user_id": 5136460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d725dc4604aa0d643342ae782892f7?s=128&d=identicon&r=PG&f=1", "display_name": "Drestin", "link": "https://stackoverflow.com/users/5136460/drestin"}, "reply_to_user": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490450620, "post_id": 43015383, "comment_id": 73122852, "body": "Oh yeah this must be fixed now (I added a <code>Just</code> constructor and an import for <code>elemIndex</code>). You can look for Haskell terms with <a href=\"https://www.haskell.org/hoogle/\" rel=\"nofollow noreferrer\">Hoogle</a> when you don&#39;t remember the signature of a function or the package containing it."}, {"owner": {"reputation": 326, "user_id": 5136460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d725dc4604aa0d643342ae782892f7?s=128&d=identicon&r=PG&f=1", "display_name": "Drestin", "link": "https://stackoverflow.com/users/5136460/drestin"}, "reply_to_user": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "edited": false, "score": 0, "creation_date": 1490450957, "post_id": 43015383, "comment_id": 73122936, "body": "For your first question, I guess yes, it will fail. we can think of more clever approach with things like <code>zip</code>. Hoogle for the doc :). It takes two lists and create a list of tuples. <code>zip [&#39;a&#39;, &#39;b&#39;] [1, 2, 3] == [(&#39;a&#39;, 1), (&#39;b&#39;, 2)]. In your case, you could use </code>zip list (tail list)`. I will add this to my answer."}], "tags": [], "owner": {"reputation": 326, "user_id": 5136460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d725dc4604aa0d643342ae782892f7?s=128&d=identicon&r=PG&f=1", "display_name": "Drestin", "link": "https://stackoverflow.com/users/5136460/drestin"}, "is_accepted": true, "score": 2, "last_activity_date": 1490452573, "last_edit_date": 1490452573, "creation_date": 1490438565, "answer_id": 43015383, "question_id": 43014122, "link": "https://stackoverflow.com/questions/43014122/parse-error-in-pattern-in-my-little-program/43015383#43015383", "title": "Parse error in pattern in my little program", "body": "<p>If I understood you well, you need a function which find a character in a list of <code>String</code>, and return the character of the preceding string at the preceding index.</p>\n\n<p>Something like:</p>\n\n<pre><code>f [\"JOHN\", \"ALICE\"] 'C' == 'H'\n</code></pre>\n\n<p>First you need to know that <code>Char</code> literals are delimited with simple quotes in Haskell (<code>'A'</code>), and <code>String</code> literals with double quotes (<code>\"ABC\"</code>).</p>\n\n<p>Since in Haskell <code>String</code> is an alias for <code>[Char]</code>, <code>\"ABC\"</code> is equivalent to <code>['A', 'B', 'C']</code>.</p>\n\n<p>This said, in Haskell you can't define a function like this: <code>f a a = stuff</code>. GHC will complain that <code>a</code> is defined multiple times.\nSo to check if two arguments have some property, you need <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#pattern-guards\" rel=\"nofollow noreferrer\">guard patterns</a>.</p>\n\n<p>So I would write your first function like this:</p>\n\n<pre><code>left :: [String] -&gt; String -&gt; String\nleft [] _ = \"\"\nleft [x] _ = \"\"\nleft (x1:x2:xs) str\n    | x2 == str = x1\n    | otherwise = left (x2:xs) str\n</code></pre>\n\n<p>For your second question:</p>\n\n<pre><code>import Data.List\n\nf :: [String] -&gt; Char -&gt; Maybe Char\nf [] _ = Nothing\nf [a] _ = Nothing\nf (x1:x2:xs) c\n    | Just i &lt;- elemIndex c x2 = Just $ x1 !! (i-1)\n    | otherwise = f (x2:xs) c\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><code>left</code> should also return a <code>Maybe String</code> in case <code>str</code> isn't found or is first.</li>\n<li><code>f</code> doesn't check if <code>x1</code> is actually long enough</li>\n<li>Usually in Haskell, the list parameter is last, to permit <a href=\"https://wiki.haskell.org/Currying\" rel=\"nofollow noreferrer\">currying</a>.</li>\n</ul>\n\n<p>EDIT:</p>\n\n<p>A somewhat more clever approach with <code>zip</code> (in module <code>Data.List</code>).</p>\n\n<pre><code>f :: [String] -&gt; Char -&gt; Maybe Char\nf [] _ = Nothing\nf [_] _ = Nothing\nf (x1:\"\":xs) c = f xs c\nf (x1:x2:xs) c = f' (zip x1 (tail x2))\n    where f' [] = f (x2:xs) c\n          f' ((a,b):l) = if b == c then a else f' l\n</code></pre>\n\n<p>This version won't crash. It will return the first character which satisfies \"being mth character in nth string, while the (m+1)th character in (n+1)th string\" is <code>c</code>. The result will be wrapped in a <code>Maybe</code> (<code>Just 'H'</code>). Otherwise, it returns <code>Nothing</code> (<code>Maybe</code> is roughly the nullable type for Haskell).</p>\n\n<p><code>zip</code> is a function which merges two lists in one list of pairs:</p>\n\n<pre><code>zip ['a', 'b', 'c'] [1, 2] == [('a', 1), ('b', 2)]\n</code></pre>\n\n<p>The size of the resulting list is the one of the smallest. So in the example, what happens is:</p>\n\n<pre><code>zip \"JOHN\" (tail \"ALICE\") == [('J','L'), ('O', 'I'), ('H', 'C'), ('N', 'E')]\n</code></pre>\n\n<p>You then just have to check is the second character is the searched one, and then return the first character of the pair.</p>\n"}], "owner": {"reputation": 3, "user_id": 7765626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f0a2c57f485f16843062dba810ac79?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7765626/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 43015383, "answer_count": 2, "score": 0, "last_activity_date": 1490452573, "creation_date": 1490429955, "last_edit_date": 1490434841, "question_id": 43014122, "link": "https://stackoverflow.com/questions/43014122/parse-error-in-pattern-in-my-little-program", "title": "Parse error in pattern in my little program", "body": "<pre><code>left :: [String]-&gt;[Char]-&gt;Char\nleft [] _ = []\nleft (x:xs) (head xs) = x    -- it says error at head\n</code></pre>\n\n<p>I used proper parenthesis but still taking parse error.By the way, I m trying to get previous element in list such as <code>[[\"A\"],[\"B\"],[\"C\"],[\"D\"],[\"E\"]]</code> . Maybe I have some other mistakes. Pls correct me . </p>\n\n<p>2nd question is how can pick previous elements previous indexed character. Such as giving function this list [[\"J\",\"O\",\"H\",\"N\"],[\"A\",\"L\",\"I\",\"C\",\"E\"]] and \"C\" , I want to expect to get \"H\". I mean \"C\" is 2nd element 4th index and \"H\" is previous elements 3rd index. Thnx in advance</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1490432924, "post_id": 43014048, "comment_id": 73117904, "body": "Cf. &quot;dependent types&quot;, which Haskell supports a tiny bit but cumbersomely.  I think you could do it with a type family indexed over a type-level natural.  For more, see Agda, which has an expressive enough type system to do this in the &quot;obvious&quot; way."}], "answers": [{"comments": [{"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 1, "creation_date": 1490471271, "post_id": 43014643, "comment_id": 73129916, "body": "The family is not injective: <code>F 0 a (a -&gt; a)</code> and <code>F 1 a a</code> have the same image."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1490477294, "post_id": 43014643, "comment_id": 73131698, "body": "@gallais Indeed! And because of that, the type is ambiguous and there seems to be no way to bring the right <code>c</code> in scope. This makes <code>AllowAmbiguousTypes</code> a bit less useful than I thought."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 2, "last_activity_date": 1490434902, "last_edit_date": 1490434902, "creation_date": 1490433564, "answer_id": 43014643, "question_id": 43014048, "link": "https://stackoverflow.com/questions/43014048/how-can-data-functions-on-function-be-generalized-to-work-with-n-ary-function/43014643#43014643", "title": "How can Data.Function&#39;s `on` function be generalized to work with n-ary functions?", "body": "<p>Here's a possible approach. We start by defining type level naturals.</p>\n\n<pre><code>{-# LANGUAGE ScopedTypeVariables, TypeFamilies, DataKinds, TypeApplications, \n             AllowAmbiguousTypes, MultiParamTypeClasses, FlexibleInstances #-}\n{-# OPTIONS -Wall #-}\n\ndata Nat = O | S Nat\n</code></pre>\n\n<p>We define <code>a -&gt; a -&gt; ... a -&gt; b</code> with <code>n</code> arguments.</p>\n\n<pre><code>type family F (n :: Nat) a b where\n   F 'O a b = b\n   F ('S n) a b = a -&gt; F n a b\n</code></pre>\n\n<p>Then we introduce a custom class over these naturals for our <code>on</code>, and implement it for every natiral in an inductive way.</p>\n\n<pre><code>class On (n :: Nat) c where\n   on :: forall a b. F n b c -&gt; (a -&gt; b) -&gt; F n a c\n\ninstance On 'O c where\n   on f _g = f\n\ninstance On n c =&gt; On ('S n) c where\n   on f g = \\aVal -&gt; on @n @c (f (g aVal)) g\n</code></pre>\n\n<p>Finally, some examples.</p>\n\n<pre><code>fun2 :: String -&gt; String -&gt; String\nfun2 x y = \"(\" ++ x ++ \", \" ++ y ++ \")\" \n\nfun3 :: String -&gt; String -&gt; String -&gt; String\nfun3 x y z = \"(\" ++ x ++ \", \" ++ y ++ \", \" ++ z ++ \")\" \n\nfunG :: Int -&gt; String\nfunG n = replicate n '#'\n\ntest2 :: String\ntest2 = on @('S ('S 'O)) fun2 funG 1 2\n\ntest3 :: String\ntest3 = on @('S ('S ('S 'O))) fun3 funG 1 2 3\n</code></pre>\n\n<hr>\n\n<p>A relatively off topic note:</p>\n\n<p>I can't find a way to remove the <code>c</code> argument from the type class. Since <code>c</code> is not determined from the type, it is ambiguous, hence I have to pass it explicitly (either via type application -- as done above -- or a <code>Proxy</code>). However, to pass it, I need <code>c</code> to be in scope. If I remove <code>c</code> from the class it goes out of scope. If I use an instance signature, I can bring <code>c</code> back in scope, but GHC does not recognize it as the same <code>c</code> due to type ambiguity.</p>\n\n<pre><code>OnGeneralization2.hs:18:10: error:\n    \u2022 Couldn't match type \u2018F n a c0\u2019 with \u2018F n a c\u2019\n      Expected type: F ('S n) b c -&gt; (a -&gt; b) -&gt; F ('S n) a c\n        Actual type: F ('S n) b c0 -&gt; (a -&gt; b) -&gt; F ('S n) a c0\n      NB: \u2018F\u2019 is a type function, and may not be injective\n      The type variable \u2018c0\u2019 is ambiguous\n    \u2022 When checking that:\n          forall a b c. F ('S n) b c -&gt; (a -&gt; b) -&gt; F ('S n) a c\n        is more polymorphic than:\n          forall a b c. F ('S n) b c -&gt; (a -&gt; b) -&gt; F ('S n) a c\n      When checking that instance signature for \u2018on\u2019\n        is more general than its signature in the class\n        Instance sig: forall a b c.\n                      F ('S n) b c -&gt; (a -&gt; b) -&gt; F ('S n) a c\n           Class sig: forall a b c.\n                      F ('S n) b c -&gt; (a -&gt; b) -&gt; F ('S n) a c\n      In the instance declaration for \u2018On ('S n)\u2019\n</code></pre>\n\n<p>Note the last line: they are exactly the same types, but in order to check them for subtyping, GHC still uses fresh Skolem type constants <code>c0</code> and that makes it fail.</p>\n\n<p>I also tried to make the family injective, but failed.</p>\n"}], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 43014643, "answer_count": 1, "score": 3, "last_activity_date": 1490434902, "creation_date": 1490429473, "question_id": 43014048, "link": "https://stackoverflow.com/questions/43014048/how-can-data-functions-on-function-be-generalized-to-work-with-n-ary-function", "title": "How can Data.Function&#39;s `on` function be generalized to work with n-ary functions?", "body": "<p><a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Function.html\" rel=\"nofollow noreferrer\">Data.Function</a> in the base package contains a function <code>on :: (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c</code>, which is similar to <code>(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c</code> for unary functions, so I tried to write a function <code>on' :: Int -&gt; ...</code> as a generalization, so that I could write <code>on' 1 length negate</code>, <code>on' 2 length compare</code>, etc., however such a function would not type-check, because the type of the function result of <code>on'</code>'s third argument depends on the first argument. </p>\n\n<p>How can I go about writing such a function? Maybe I'd have to wrap functions in a custom data type so that the composed functions' types only depend on the type of the first parameter and the type of the final result?</p>\n"}, {"tags": ["haskell", "cabal-install"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490439945, "post_id": 43013667, "comment_id": 73119662, "body": "With an error message like this it would be really helpful to know what os compiler and so on you use"}, {"owner": {"reputation": 409, "user_id": 1897830, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4bb6f01afcee8d6fd59ccb93499732d6?s=128&d=identicon&r=PG", "display_name": "user1897830", "link": "https://stackoverflow.com/users/1897830/user1897830"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1490443472, "post_id": 43013667, "comment_id": 73120707, "body": "os is Windows 7 32 bit. Compiler is GHC ver 8.0.1"}], "answers": [{"tags": [], "owner": {"reputation": 3231, "user_id": 1013393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bca51e5ae3eb8dc24a98616b4e5d6fd?s=128&d=identicon&r=PG", "display_name": "sjakobi", "link": "https://stackoverflow.com/users/1013393/sjakobi"}, "is_accepted": false, "score": 1, "last_activity_date": 1490536666, "creation_date": 1490536666, "answer_id": 43029661, "question_id": 43013667, "link": "https://stackoverflow.com/questions/43013667/unable-to-install-criterion-package/43029661#43029661", "title": "Unable to install criterion package", "body": "<p>As I can tell from <a href=\"http://hackage.haskell.org/package/criterion-1.1.4.0/src/cbits/cycles.c\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/criterion-1.1.4.0/src/cbits/cycles.c</a>, v1.1.4.0 includes the fix you linked to.</p>\n\n<p>To use that version or a later one, add a lower bound to your dependency on <code>criterion</code>:</p>\n\n<pre><code>build-depends:\n  ...\n  , criterion &gt;= 1.1.4.0\n  ...\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 1897830, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4bb6f01afcee8d6fd59ccb93499732d6?s=128&d=identicon&r=PG", "display_name": "user1897830", "link": "https://stackoverflow.com/users/1897830/user1897830"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490536666, "creation_date": 1490426311, "question_id": 43013667, "link": "https://stackoverflow.com/questions/43013667/unable-to-install-criterion-package", "title": "Unable to install criterion package", "body": "<p>When I attempt to install the criterion package I get the following error message: <em>error: #error Unsupported OS/architecture/compiler!</em>. I believe the fix is here: <a href=\"https://github.com/bos/criterion/pull/105/commits/fb794484bcf7c88b1b3d5f7fb33c356742f4d31f\" rel=\"nofollow noreferrer\">Restore support for 32 bit Intel CPUs</a> . However how do I install that fix?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1490969667, "post_id": 43011292, "comment_id": 73362922, "body": "This question has been open for a while. If there is an answer that satisfies your question, please accept it by clicking the green check mark next to it."}], "answers": [{"comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1490447794, "post_id": 43011945, "comment_id": 73121975, "body": "Could you add some explanation as to how the function you&#39;ve described works?"}, {"owner": {"reputation": 1218, "user_id": 6042307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6ebc7609bac3a4ddf6c7920c2c083a?s=128&d=identicon&r=PG", "display_name": "gabesoft", "link": "https://stackoverflow.com/users/6042307/gabesoft"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1490451301, "post_id": 43011945, "comment_id": 73123053, "body": "Added more details"}], "tags": [], "owner": {"reputation": 1218, "user_id": 6042307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6ebc7609bac3a4ddf6c7920c2c083a?s=128&d=identicon&r=PG", "display_name": "gabesoft", "link": "https://stackoverflow.com/users/6042307/gabesoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1490451190, "last_edit_date": 1490451190, "creation_date": 1490409739, "answer_id": 43011945, "question_id": 43011292, "link": "https://stackoverflow.com/questions/43011292/determining-min-and-max-x-and-y-from-a-list-of-points/43011945#43011945", "title": "Determining min and max x and y from a list of points", "body": "<p>You can use <code>minimum</code> and <code>maximum</code> from prelude which compute the minimum and maximum of a list of numbers. Before calling those we need to map the list of tuples into a list of numbers using fst which gets the first item of a tuple or snd which gets the second item of a tuple.  </p>\n\n<p>To get the maximum of <code>x</code></p>\n\n<pre><code>maximum $ fst &lt;$&gt; [(1,0),(2,3),(4,6)]\n</code></pre>\n\n<p>Same thing for minimum, for <code>y</code> use <code>snd</code> instead of <code>fst</code></p>\n"}, {"tags": [], "owner": {"reputation": 1757, "user_id": 1029144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50a0de51a2cd13566ea4fc651e6ebd3?s=128&d=identicon&r=PG", "display_name": "gvd", "link": "https://stackoverflow.com/users/1029144/gvd"}, "is_accepted": false, "score": 1, "last_activity_date": 1490494291, "creation_date": 1490494291, "answer_id": 43024209, "question_id": 43011292, "link": "https://stackoverflow.com/questions/43011292/determining-min-and-max-x-and-y-from-a-list-of-points/43024209#43024209", "title": "Determining min and max x and y from a list of points", "body": "<p>@gabesoft solution is one way of doing it. The following will calculate the min and max in a single pass per axis.\nLet's define a function that takes a tuple of a that represents the current result (accumulator or min and max values), a value of a, and returns the new result as a tuple.</p>\n\n<pre><code>minMax :: (Ord a) =&gt; (a, a) -&gt; a -&gt; (a, a)\nminMax (minAcc, maxAcc) val = (min minAcc val, max maxAcc val)\n</code></pre>\n\n<p>We can now use this function in a fold:</p>\n\n<pre><code>points = [(1,2), (3, 4), (-1, -3)] :: [(Int, Int)]\nfoldl minMax (maxBound, minBound) points\n</code></pre>\n\n<p>We use maxBound/minBound to get the smallest/largest bounds for Int as a starting value.\nHowever, that doesn't work on a list of tuples. To make it work on tuples you could do the following:</p>\n\n<pre><code>foldl minMax (maxBound::Int, minBound::Int) $ fst &lt;$&gt; points\nfoldl minMax (maxBound::Int, minBound::Int) $ snd &lt;$&gt; points\n</code></pre>\n\n<p>The <code>&lt;$&gt;</code> operator is <code>fmap</code>. So we first run <code>fst</code> over points to extract the first tuple values and apply the <code>minMax</code> function over this using a fold.</p>\n"}, {"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": true, "score": 2, "last_activity_date": 1490512280, "last_edit_date": 1490512280, "creation_date": 1490499792, "answer_id": 43024749, "question_id": 43011292, "link": "https://stackoverflow.com/questions/43011292/determining-min-and-max-x-and-y-from-a-list-of-points/43024749#43024749", "title": "Determining min and max x and y from a list of points", "body": "<p>You can partition the list of points into lists of <code>x</code> and <code>y</code> coordinates using the <code>unzip</code> function, which converts a list of pairs into a pair of lists:</p>\n\n<pre><code>unzip :: [(a, b)] -&gt; ([a], [b])\npoints = [(1,0),(2,3),(4,6)]\nunzip points = ([1,2,4],[0,3,6])\n</code></pre>\n\n<p>Then you can calculate the minimum and maximum of each of these lists straightforwardly with the <code>minimum</code> and <code>maximum</code> functions:</p>\n\n<pre><code>bounds :: [Point Int] -&gt; ((Int, Int), (Int, Int))\nbounds points = ((minimum xs, maximum xs), (minimum ys, maximum ys))\n  where (xs, ys) = unzip points\n</code></pre>\n\n<hr>\n\n<p>Just for fun, here\u2019s a more advanced solution that makes only a single pass over the coordinates:</p>\n\n<pre><code>import Control.Arrow\nimport Data.Semigroup\n\nbounds = unzip &gt;&gt;&gt; minmax *** minmax\n  where minmax = foldMap (Min &amp;&amp;&amp; Max) &gt;&gt;&gt; getMin *** getMax\n</code></pre>\n\n<p>It uses a few handy operators from <code>Control.Arrow</code>:</p>\n\n<pre><code>-- Apply two functions to a single value, returning both results.\n(f &amp;&amp;&amp; g) x = (f x, g x)\n\n-- Apply two functions to the elements of a pair.\n(f *** g) (x, y) = (f x, g y)\n\n-- Left-to-right function composition.\n(f &gt;&gt;&gt; g) x = g (f x)\n</code></pre>\n\n<p>As well as the <code>Min</code> and <code>Max</code> monoids from <code>Data.Semigroup</code>:</p>\n\n<pre><code>getMin (Min 1 &lt;&gt; Min 2) == 1\ngetMax (Max 1 &lt;&gt; Max 2) == 2\n\ngetMin (foldMap Min [1, 3, 5]) == 1\ngetMax (foldMap Max [1, 3, 5]) == 5\n\ngetMin *** getMax $ foldMap (Min &amp;&amp;&amp; Max) [1, 3, 5]\n==\n(1, 5)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7729455, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/07cf84ae46be014b0f8f2cfee63f6cd9?s=128&d=identicon&r=PG&f=1", "display_name": "jochs02", "link": "https://stackoverflow.com/users/7729455/jochs02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 43024749, "answer_count": 3, "score": 2, "last_activity_date": 1490512280, "creation_date": 1490402947, "last_edit_date": 1490447834, "question_id": 43011292, "link": "https://stackoverflow.com/questions/43011292/determining-min-and-max-x-and-y-from-a-list-of-points", "title": "Determining min and max x and y from a list of points", "body": "<p>I'm still very new to this language so I'm having a tough time figuring out the best way to solve my problem.  I want to take a list of <code>Point</code>s such as <code>[(1,0),(2,3),(4,6)]</code> and determine the min and max <code>x</code> and <code>y</code> values, as I need to build a grid with them.  </p>\n\n<p>Here is my code:</p>\n\n<pre><code>type Point a = (a,a)\n\n-- The main program: read points from stdin, write an SVG file to stdout. \nmain :: IO ()\nmain = do\n  str &lt;- getContents\n  let points = toPoints str\n  let minXY = [(x,y) | x &lt;- points, y &lt;- points, x1 &lt;- points, y1 &lt;- points, x &lt; x1, y &lt; y1]\n  mapM_ (mapM_ print) minXY\n</code></pre>\n"}, {"tags": ["haskell", "servant"], "comments": [{"owner": {"reputation": 19084, "user_id": 1482749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9982206dde8c2bbb151a7305c00f3?s=128&d=identicon&r=PG", "display_name": "kosmikus", "link": "https://stackoverflow.com/users/1482749/kosmikus"}, "edited": false, "score": 2, "creation_date": 1490425467, "post_id": 43010941, "comment_id": 73116104, "body": "I&#39;d say the version with <code>next</code> is great and perfectly idiomatic (or at least much more than your other attempt). You don&#39;t need <code>Reassoc</code>. I&#39;d also argue that something like <code>(QueryParam ... :&gt; QueryParam ...) :&gt; Get ...</code> shouldn&#39;t even be kind-correct. The fact that it currently is is an accident / compromise."}], "answers": [{"tags": [], "owner": {"reputation": 11487, "user_id": 1308058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2be2ab74793559ea1c1dbdf55ccdf90b?s=128&d=identicon&r=PG", "display_name": "phadej", "link": "https://stackoverflow.com/users/1308058/phadej"}, "is_accepted": false, "score": 0, "last_activity_date": 1551202837, "creation_date": 1551202837, "answer_id": 54891252, "question_id": 43010941, "link": "https://stackoverflow.com/questions/43010941/haskell-servant-empty-route-combinator/54891252#54891252", "title": "Haskell Servant empty route combinator", "body": "<p>if you really insist on writing</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>type API = QueryParams '[ '(\"id\", Int) ] :&gt; Get '[JSON] Bool\n</code></pre>\n\n<p>you combining your <code>foldr</code> like idea/solution (which is completely fine) with a new combinator:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data QueryParams (ps :: [(Symbol, *)])\n\ninstance HasServer api ctx\n  =&gt; HasServer (QueryParams '[] :&gt; api) ctx where\n    type ServerT (QueryParams '[] api) m = ServerT api m\n\n    route = ...\n\ninstance HasServer (QueryParam sym ty :&gt; MakeQueryParams ('(sym, ty) ': ps) api) ctx\n  =&gt; HasServer (QueryParams ('(sym, ty) ': ps) api) ctx where\n    type ServerT (QueryParams ('(sym, ty) ': ps) api) m = ...\n\n    route = ...\n</code></pre>\n\n<p>Writing separate instance for nil and cons cases will make implementation of instances more direct.</p>\n\n<p>One can think that we <em>have to</em> introduce new combinator, as otherwise we cannot plug type family in the right place. A bit like we sometimes need to write <code>newtype</code>s to write different instances.</p>\n"}], "owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1551202837, "creation_date": 1490399569, "question_id": 43010941, "link": "https://stackoverflow.com/questions/43010941/haskell-servant-empty-route-combinator", "title": "Haskell Servant empty route combinator", "body": "<p>I'm writing up some CRUD helpers for fun and profit, and I'm finding myself needing an empty or noop route. The <code>mempty</code> to <code>:&gt;</code>, if you will.</p>\n\n<p>This is what I'd like to write:</p>\n\n<pre><code>type Index model =\n  Reassoc (QueryParams model :&gt; Get '[JSON] (Collection model))\n\ntype family Reassoc xs where\n  Reassoc ((x :&gt; y) :&gt; z) = Reassoc (x :&gt; Reassoc (y :&gt; z))\n  Reassoc (x :&gt; y) = x :&gt; y\n\ntype family QueryParams model\n\ntype instance QueryParams User =\n  MakeQueryParams '[ '(\"organizationId\", Int) ]\n</code></pre>\n\n<p>That all of course builds up to this guy:</p>\n\n<pre><code>type family MakeQueryParams xs where\n  MakeQueryParams ( '(sym, ty) ': xs ) \n    = QueryParam sym ty :&gt; MakeQueryParams xs\n  MakeQueryParams '[] \n    = ... :(\n</code></pre>\n\n<h1>Is there an empty route combinator?</h1>\n\n<p>I've worked around this thus far by using a <code>next</code> parameter in those families, but it's a lot less idiomatic for Servant.</p>\n\n<pre><code>type family MakeQueryParams xs next where\n    MakeQueryParams '[] next =\n        next\n    MakeQueryParams ('(sym, ty) ': xs) next =\n        QueryParam sym ty :&gt; MakeQueryParams xs next\n\ntype Index model = QueryParams model (Get '[JSON] (Collection model))\n\ntype family QueryParams model next\n\ntype instance QueryParams User next =\n    MakeQueryParams '[ '(\"organizationId\", Int) ] next\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 7729455, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/07cf84ae46be014b0f8f2cfee63f6cd9?s=128&d=identicon&r=PG&f=1", "display_name": "jochs02", "link": "https://stackoverflow.com/users/7729455/jochs02"}, "is_accepted": false, "score": 0, "last_activity_date": 1490398199, "creation_date": 1490398199, "answer_id": 43010750, "question_id": 43010618, "link": "https://stackoverflow.com/questions/43010618/io-error-when-executing-runhaskell/43010750#43010750", "title": "IO error when executing runhaskell", "body": "<p>Was able to figure out that I needed to be compiling the file outside of ghci and then running the executable. I was trying to execute the file from within ghci  which was not working.</p>\n\n<p>Ran ghc --make mod12PA.hs</p>\n\n<p>Then mod12PA.exe</p>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 0, "last_activity_date": 1490402224, "last_edit_date": 1490402224, "creation_date": 1490400542, "answer_id": 43011049, "question_id": 43010618, "link": "https://stackoverflow.com/questions/43010618/io-error-when-executing-runhaskell/43011049#43011049", "title": "IO error when executing runhaskell", "body": "<p>While you do need to run the command outside of GHCi, <code>runhaskell mod12PA.hs</code> should work. (<code>runhaskell</code> serves a different purpose than <code>ghc --make</code>: it runs the code without compiling it.)</p>\n"}], "owner": {"reputation": 37, "user_id": 7729455, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/07cf84ae46be014b0f8f2cfee63f6cd9?s=128&d=identicon&r=PG&f=1", "display_name": "jochs02", "link": "https://stackoverflow.com/users/7729455/jochs02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490402224, "creation_date": 1490397316, "last_edit_date": 1490400564, "question_id": 43010618, "link": "https://stackoverflow.com/questions/43010618/io-error-when-executing-runhaskell", "title": "IO error when executing runhaskell", "body": "<p>I'm trying to execute a main method within one of my classes in haskell.  When I run the command <code>runhaskell mod12PA.hs</code> I get an error and I can't figure out why.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>-- The main program: read points from stdin, write an SVG file to stdout. \nmain :: IO ()\nmain = do\n  putStrLn \"Enter points: \"\n  points &lt;- getLine\n  putStrLn (\"Points: \" ++ points)\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>&lt;interactive&gt;:41:1: error:\n    Variable not in scope: runhaskell :: t0 -&gt; b0 -&gt; c\n\n&lt;interactive&gt;:41:12: error: Variable not in scope: mod12PA\n\n&lt;interactive&gt;:41:20: error: Variable not in scope: hs :: a -&gt; b0\n</code></pre>\n"}, {"tags": ["haskell", "traversal", "lenses"], "answers": [{"tags": [], "owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "is_accepted": true, "score": 2, "last_activity_date": 1490398285, "creation_date": 1490398285, "answer_id": 43010760, "question_id": 43010545, "link": "https://stackoverflow.com/questions/43010545/renfield-how-do-i-get-this-traversal-to-work/43010760#43010760", "title": "Renfield: How Do I Get This Traversal To Work?", "body": "<p>From glguy on freenode:</p>\n\n<pre><code>getScore :: GameS -&gt; [(Text,GhoulCount)]\ngetScore gs = \n    itoListOf (game_data_gs . players_gd . p_map . ifolded &lt;. score) gs\n</code></pre>\n"}], "owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43010760, "answer_count": 1, "score": 2, "last_activity_date": 1490398285, "creation_date": 1490396893, "question_id": 43010545, "link": "https://stackoverflow.com/questions/43010545/renfield-how-do-i-get-this-traversal-to-work", "title": "Renfield: How Do I Get This Traversal To Work?", "body": "<p>I have a some nested records (reduced to relevant fields).</p>\n\n<pre><code>data GameS     = GameS { _game_data_gs :: GameData }\ndata GameData  = GameData { _players_gd :: PlayerMap }\ndata PlayerMap = PlayerMap { _p_map :: Map PlayerName Player }\ndata Player    = Player { _score  :: GhoulCount }\n</code></pre>\n\n<p>I'm trying to create a function with this type</p>\n\n<pre><code>playerScores :: GameS -&gt; [(PlayerName, GhoulCount)]\n</code></pre>\n\n<p>here is one attempt, gives me a function of type</p>\n\n<pre><code>playerScores :: GameS -&gt; [GhoulCount]\nplayerScores gs =\n    toListOf (game_data_gs . players_gd . p_map . traverse . score ) gs\n</code></pre>\n\n<p>This version does what I want, but not the way I want. I'd like to use <code>Lenses</code> and <code>Traversals</code>.</p>\n\n<pre><code>playerScores :: GameS -&gt; [(PlayerName,GhoulCount)] \nplayerScores gs = \n    Data.Map.Strict.toList                        $\n    Data.Map.Strict mapWithKey (\\_ v -&gt; _score v) $\n    view (game_data_gs . players_gd . p_map) gs \n</code></pre>\n\n<p>So how do I make this traversal work?</p>\n"}, {"tags": ["haskell", "haskell-diagrams"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 2, "creation_date": 1490393618, "post_id": 43009707, "comment_id": 73109525, "body": "You are probably looking for <code>rectEnvelope</code>. Cf. the <a href=\"http://projects.haskell.org/diagrams/doc/manual.html#clipping\" rel=\"nofollow noreferrer\">section of the manual about clipping</a>."}], "owner": {"reputation": 1655, "user_id": 604955, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dee8e0c8c4b36334c2379c62b3e12054?s=128&d=identicon&r=PG", "display_name": "Charles Durham", "link": "https://stackoverflow.com/users/604955/charles-durham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1490392343, "creation_date": 1490392170, "last_edit_date": 1490392343, "question_id": 43009707, "link": "https://stackoverflow.com/questions/43009707/haskell-diagrams-crop-image", "title": "Haskell Diagrams crop image", "body": "<p>I'd like to be able to draw a bunch of shapes in Diagrams and crop the picture to a fixed size, leaving parts of the shapes in view (i.e. not completely occluding the shape)</p>\n\n<p>I can't seem to find a way to do this. I found bounding boxes, but it seems they only do intersection/containment checks.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1490392477, "post_id": 43009635, "comment_id": 73109099, "body": "<code>toPoints = map read . words</code>. Note this will fail badly if your input is malformed and it needs a type signature."}, {"owner": {"reputation": 37, "user_id": 7729455, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/07cf84ae46be014b0f8f2cfee63f6cd9?s=128&d=identicon&r=PG&f=1", "display_name": "jochs02", "link": "https://stackoverflow.com/users/7729455/jochs02"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1490392930, "post_id": 43009635, "comment_id": 73109280, "body": "That worked perfectly thank you. Gave me exactly what I need."}], "owner": {"reputation": 37, "user_id": 7729455, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/07cf84ae46be014b0f8f2cfee63f6cd9?s=128&d=identicon&r=PG&f=1", "display_name": "jochs02", "link": "https://stackoverflow.com/users/7729455/jochs02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490391802, "creation_date": 1490391802, "question_id": 43009635, "link": "https://stackoverflow.com/questions/43009635/converting-a-string-with-2-point-types-to-a-list-of-points", "title": "Converting a string with 2 point types to a list of points", "body": "<p>I am writing a method that will take a string that that has 2 Point types in it.\nPoint types read (x,y) and the string that this method takes in will have 2 points separated by a single white space. I need to take these 2 points and separate them into a list.  I've been trying to get it to work with splitOn with no success.  Should I being using splitOn or is there a better way to do this?</p>\n\n<p>exm. \"(2,0) (2,3)\"</p>\n\n<p>list = [(2,0),(2,3)]</p>\n\n<pre><code>type Point a = (a,a)\n\n-- Convert a String with points separated by spaces to a list of Points.\ntoPoints :: String -&gt; [(Float,Float)]\ntoPoints s = splitOn \" \" s\n</code></pre>\n"}, {"tags": ["haskell", "let"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1490385863, "post_id": 43008176, "comment_id": 73106009, "body": "Do I see a homework question copied verbatim?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490386032, "post_id": 43008176, "comment_id": 73106100, "body": "Homework or not (well, it <i>evidently</i> is homework, but anyway...), it&#39;s unclear what you&#39;re actually trying to achieve."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1490386386, "post_id": 43008176, "comment_id": 73106269, "body": "I also don&#39;t see why you want to construct this with <code>let</code> expressions anyway. What is wrong with <code>dw = Weizen [Tomate,Fleisch,Fleisch] (Mayo (Ketchup Keine))</code> in the first place? There are no duplicates in the construction, so you cannot save on memory either."}], "answers": [{"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": true, "score": 5, "last_activity_date": 1490386400, "creation_date": 1490386400, "answer_id": 43008364, "question_id": 43008176, "link": "https://stackoverflow.com/questions/43008176/haskell-let-in-let-in-let/43008364#43008364", "title": "Haskell let ..... in let ..... in let", "body": "<p>You can just insert those expressions into the <code>let</code> expressions:</p>\n\n<pre><code>let zt = [Tomate, Fleisch, Fleisch] in\n  let so = Mayo (Ketchup Keine) in\n    let dw = Burger Weizen zt so in\n      ...\n</code></pre>\n\n<p>Or use a single <code>let</code> expression:</p>\n\n<pre><code>let\n  zt = [Tomate, Fleisch, Fleisch]\n  so = Mayo (Ketchup Keine)\n  dw = Burger Weizen zt so\nin ...\n</code></pre>\n\n<p>Complete example:</p>\n\n<pre><code>data Zutat = Tomate | Fleisch | Salat\n  deriving (Show)\n\ndata Bun = Weizen | Roggen\n  deriving (Show)\n\ndata Sosse = Ketchup Sosse | Mayo Sosse | Keine\n  deriving (Show)\n\ndata Burger = Burger Bun [Zutat] Sosse\n  deriving (Show)\n\nmain :: IO ()\nmain = let\n  zt = [Tomate, Fleisch, Fleisch]\n  so = Mayo (Ketchup Keine)\n  dw = Burger Weizen zt so\n  in print dw\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Burger Weizen [Tomate,Fleisch,Fleisch] (Mayo (Ketchup Keine))\n</code></pre>\n\n<p>It sounds like you need to consult a reference on basic Haskell syntax.</p>\n"}], "owner": {"reputation": 37, "user_id": 5701689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/804ae8047206db7f992ba739cfe48442?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict K.", "link": "https://stackoverflow.com/users/5701689/benedict-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "accepted_answer_id": 43008364, "answer_count": 1, "score": 0, "last_activity_date": 1490386400, "creation_date": 1490385684, "last_edit_date": 1490385829, "question_id": 43008176, "link": "https://stackoverflow.com/questions/43008176/haskell-let-in-let-in-let", "title": "Haskell let ..... in let ..... in let", "body": "<p>got some code to complete. But I don't know how to  handle the nasted let in expression. Thats the code:</p>\n\n<pre><code>data Zutat = Tomate | Fleisch | Salat\ndata Bun = Weizen | Roggen\ndata Sosse = Ketchup Sosse | Mayo Sosse | Keine\ndata Burger = Burger Bun [Zutat] Sosse\n</code></pre>\n\n<p>and I need to complete the code:</p>\n\n<pre><code>let zt =               in -- Zutat\n  let so =               in -- Sosse\n    let dw =\n</code></pre>\n\n<p><code>dw</code> has to be like <code>dw = Weizen [Tomate,Fleisch,Fleisch] (Mayo (Ketchup Keine))</code></p>\n\n<p>got this:</p>\n\n<pre><code>zt = [Tomate,Fleisch,Fleisch]\nso = Mayo (Ketchup Keine)\ndw = Burger Weizen zt so\n</code></pre>\n\n<p>but how can I build it into the let in expression?</p>\n"}, {"tags": ["haskell", "monads", "monad-transformers", "state-monad"], "comments": [{"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1490382847, "post_id": 43007103, "comment_id": 73104419, "body": "Are you actually using <code>Effect2</code> in <code>runEffect2</code>? The signature says <code>Effect</code>."}, {"owner": {"reputation": 1083, "user_id": 3433802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GB6bE.jpg?s=128&g=1", "display_name": "mmachenry", "link": "https://stackoverflow.com/users/3433802/mmachenry"}, "reply_to_user": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1490385134, "post_id": 43007103, "comment_id": 73105622, "body": "That was just an error in copying it over. In the file I have, I have both versions together with different names. I&#39;ve updated the post."}], "answers": [{"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": true, "score": 3, "last_activity_date": 1490389287, "last_edit_date": 1490389287, "creation_date": 1490388919, "answer_id": 43008994, "question_id": 43007103, "link": "https://stackoverflow.com/questions/43007103/how-do-i-add-lists-or-listt-to-this-monad-transformer/43008994#43008994", "title": "How do I add lists or ListT to this monad transformer?", "body": "<p>Firstly, the immediate cause of the error is that the type of <code>runListT</code> is...</p>\n\n<pre><code>GHCi&gt; :t runListT\nrunListT :: ListT m a -&gt; m [a]\n</code></pre>\n\n<p>... but you are using it as if it produced a <code>[m a]</code>, rather than a <code>m [a]</code>. In other words, the <code>map</code> in the definition of <code>result</code> shouldn't be there.</p>\n\n<p>Secondly, in a monadic stack the inner monads rule over the outer ones. Wrapping, for instance, <code>StateT</code> with <code>ListT</code> results in a garden-variety stateful computation that happens to produce multiple results. We can see that by specialising the type of <code>runListT</code>:</p>\n\n<pre><code>GHCi&gt; :set -XTypeApplications\nGHCi&gt; :t runListT @(StateT _ _)\nrunListT @(StateT _ _) :: ListT (StateT t t1) a -&gt; StateT t t1 [a]\n</code></pre>\n\n<p>Wrapping <code>ListT</code> with <code>StateT</code>, on the other hand, gives us a computation that produces multiple states as well as results:</p>\n\n<pre><code>GHCi&gt; :t runStateT @_ @(ListT _)\nrunStateT @_ @(ListT _)\n  :: StateT t (ListT t1) a -&gt; t -&gt; ListT t1 (a, t)\n</code></pre>\n\n<p>That being so, you want to swap the transformers in your stack. If you want to have multiple effects for everything, as you describe, and you don't need <code>IO</code> as your base monad, you don't need <code>ListT</code> at all -- simply put <code>[]</code> at the bottom of the stack.</p>\n\n<p>Thirdly, on a tangential note, avoid the <code>ListT</code> from <em>transformers</em>. It is known to be unlawful, and it has been deprecated <a href=\"https://hackage.haskell.org/package/transformers-0.5.4.0/docs/Control-Monad-Trans-List.html\" rel=\"nofollow noreferrer\">in the latest version of <em>transformers</em></a>. A simple replacement for it is provided by the <a href=\"http://hackage.haskell.org/package/list-t-1/docs/ListT.html\" rel=\"nofollow noreferrer\"><em>list-t</em> package</a>. (If, at some point further down the road, you get to make use of the <em>pipes</em> streaming library, you might also find <a href=\"https://hackage.haskell.org/package/pipes-4.3.2/docs/Pipes-Tutorial.html#g:6\" rel=\"nofollow noreferrer\">its own version of <code>ListT</code></a> useful.) </p>\n"}], "owner": {"reputation": 1083, "user_id": 3433802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GB6bE.jpg?s=128&g=1", "display_name": "mmachenry", "link": "https://stackoverflow.com/users/3433802/mmachenry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 43008994, "answer_count": 1, "score": 3, "last_activity_date": 1490389287, "creation_date": 1490381447, "last_edit_date": 1490386461, "question_id": 43007103, "link": "https://stackoverflow.com/questions/43007103/how-do-i-add-lists-or-listt-to-this-monad-transformer", "title": "How do I add lists or ListT to this monad transformer?", "body": "<p>I have a game record that represents the current state of a game.</p>\n\n<pre><code>data Game = Game { score :: Int, turn :: Int }\n</code></pre>\n\n<p>I want to be able to create a bunch of functions to change the game state, and also use a random number generator as well as keep a log of what happened to get from one state to another. So I created a <code>GameState</code> record that contains the additional information.</p>\n\n<pre><code>type History = [String]\ndata GameState = GameState Game StdGen History\n</code></pre>\n\n<p>Now I want to create a data type for the functions that are going to be acting on this <code>GameState</code>. They'll be modeled imperatively as updates to the game as well as rolling dice and logging what's happening. So I created a monad transformer of all the effects I want.</p>\n\n<pre><code>type Effect = WriterT History (RandT StdGen (State Game))\n</code></pre>\n\n<p>Writing the function to run an <code>Effect</code> on a given <code>GameState</code> is pretty simple.</p>\n\n<pre><code>runEffect :: GameState -&gt; Effect () -&gt; GameState\nrunEffect (GameState game stdGen history) effect =\n  let ((((), newHist), newGen), newGame) =\n        runState (runRandT (runWriterT effect) stdGen) game\n  in GameState newGame newGen newHist\n</code></pre>\n\n<p>Perfect. Now I want to model one additional thing. Some <code>Effects</code> can have multiple different resulting <code>GameStates</code>. So my <code>runEffect</code> should actually return a <code>[GameState]</code>. I need to add <code>ListT</code> to this monad transformer, probably. And then all of my <code>Effects</code> will have the option of producing more than one result if need be. But also if they are just a one-to-one mapping then then can act like that too.</p>\n\n<p>I tried to make the following changes:</p>\n\n<pre><code>type Effect2 = ListT (WriterT [String] (RandT StdGen (State Game)))\n\nrunEffect2 :: GameState -&gt; Effect2 a -&gt; [GameState]\nrunEffect2 (GameState game stdGen history) effect =\n  let l = runListT effect\n      result = map (\\e-&gt;runState (runRandT (runWriterT e) stdGen) game) l\n  in map (\\((((), newHist), newGen), newGame)-&gt;\n           GameState newGame newGen newHist)\n         result\n</code></pre>\n\n<p>What I'm trying to do is add <code>ListT</code> to the transformer, outside of the <code>Writer</code> and <code>Random</code> and <code>State</code> because I want for the different branches of the computation to have different histories and independent states and random generators. But this doesn't work. I get the following type error.</p>\n\n<pre><code>Prelude \u03bb: :reload [1 of 1] Compiling Main             ( redux.hs, interpreted )\n\nredux.hs:31:73: error:\n    \u2022 Couldn't match expected type \u2018[WriterT\n                                       w\n                                       (RandT StdGen (StateT Game Data.Functor.Identity.Identity))\n                                       a1]\u2019\n                  with actual type \u2018WriterT [String] (RandT StdGen (State Game)) [a]\u2019\n    \u2022 In the second argument of \u2018map\u2019, namely \u2018l\u2019\n      In the expression:\n        map (\\ e -&gt; runState (runRandT (runWriterT e) stdGen) game) l\n      In an equation for \u2018result\u2019:\n          result\n            = map (\\ e -&gt; runState (runRandT (runWriterT e) stdGen) game) l\n    \u2022 Relevant bindings include\n        result :: [(((a1, w), StdGen), Game)] (bound at redux.hs:31:7)\n        l :: WriterT [String] (RandT StdGen (State Game)) [a]\n          (bound at redux.hs:30:7)\n        effect :: Effect2 a (bound at redux.hs:29:44)\n        runEffect2 :: GameState -&gt; Effect2 a -&gt; [GameState]\n          (bound at redux.hs:29:1) \nFailed, modules loaded: none.\n</code></pre>\n\n<p>Does anyone know what I'm doing wrong? I effectively want to be able to expand one <code>GameState</code> into multiple <code>GameStates</code>. Each with an independent <code>StdGen</code> and <code>History</code> for that branch. I have done this by putting everything into the <code>Game</code> record and just using non-monadic functions for the effects. This works and it's pretty straight forward. However, composition of these functions is really annoying because they're acting like state and I need to need to handle it myself. This is what monads are great at so I figured reusing that here would be wise. Sadly the list aspect of it has me really confused.</p>\n"}, {"tags": ["list", "haskell", "sum", "modulo"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1490381169, "post_id": 43006987, "comment_id": 73103479, "body": "What is the purpose of <code>oddS</code> and <code>evenS</code>? I don&#39;t see why you multiply with <code>3</code> and <code>7</code> if you want to calculate the sum?"}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490382941, "post_id": 43006987, "comment_id": 73104463, "body": "@WillemVanOnsem  it&#39;s a validation algorithm. It works like that.  The input list is valid if the first 8 elements&#39;s  (the sum of odd indexed elements*3 and even indexed elements*7)   mod 10 equals to the last element."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490382969, "post_id": 43006987, "comment_id": 73104480, "body": "@Georg321: and where is that stated in the question?"}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490383323, "post_id": 43006987, "comment_id": 73104677, "body": "@WillemVanOnsem you are right, i thought it is obvious if you see evenS and oddS, sorry my fault."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 0, "creation_date": 1490383174, "post_id": 43007088, "comment_id": 73104599, "body": "It&#39;s clear but my problem is i don&#39;t know how to check if (oddS a + evenS b + oddS c + evenS d + oddS e + evenS f + oddS g + evenS h) <code>mod</code> 10) equals to the last element. That&#39;s what i don&#39;t understand honestly. As i tried to explain you above."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 0, "creation_date": 1490383429, "post_id": 43007088, "comment_id": 73104732, "body": "@George312: I updated the answer, now it works with the <code>evenS</code>/<code>oddS</code> sequence."}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 0, "creation_date": 1490384811, "post_id": 43007088, "comment_id": 73105454, "body": "i really appreciate your help but somehow it gives false for a valid input (0,2,3,1,5,8,3,0,0). I just don&#39;t understand why."}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 0, "creation_date": 1490385076, "post_id": 43007088, "comment_id": 73105580, "body": "I found a valid solution with your help. Thanks"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 0, "creation_date": 1490385151, "post_id": 43007088, "comment_id": 73105630, "body": "@George312: I found the mistake, it should be <code>n-2</code> instead of <code>n-1</code>."}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "edited": false, "score": 1, "creation_date": 1490385227, "post_id": 43007088, "comment_id": 73105672, "body": "Yes it is working now but i could figure out my own solution with you help. Thanks a lot mate."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1490385366, "last_edit_date": 1490385366, "creation_date": 1490381405, "answer_id": 43007088, "question_id": 43006987, "link": "https://stackoverflow.com/questions/43006987/how-to-check-if-sum-of-list-elements-are-equal-to-the-last-element-in-haskell/43007088#43007088", "title": "How to check if sum of list elements are equal to the last element in Haskell?", "body": "<blockquote>\n  <p>I would like to check if the first 8 elements's sum/10's remainder is equal to the last (9th) element.</p>\n  \n  <p>it's a validation algorithm. It works like that. The input list is valid if the first 8 elements's (the sum of odd indexed elements*3 and even indexed elements*7) mod 10 equals to the last element. - comment</p>\n</blockquote>\n\n<p>You can also use <em>recursion</em> to check the condition by using an <em>accumulator</em> (or perhaps two to check the length) that accumulates the <em>running sum</em> and checks it when it reaches the last element. So something like:</p>\n\n<pre><code>check9 :: [Int] -> Bool\ncheck9 = check9' 8 0\n    where check9' n s [xn] = n == 0 && s `mod` 10 == xn\n          check9' n s (x:x2:xs) = check9' (n-2) (s+3*x+7*x2) xs\n          check9' _ _ _ = False</code></pre>\n\n<p>A more elegant way to solve this however is using builtins like <code>sum :: Num a =&gt; [a] -&gt; a</code>, <code>zipWith :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</code>, <code>cycle :: [a] -&gt; [a]</code> and <code>splitAt :: [a] -&gt; a</code>:</p>\n\n<pre><code><b>-- alternative version</b>\n\ncheck9 :: [Int] -> Bool\ncheck9 xs | (xi,[xn]) &lt;- splitAt 8 xs = xn == mod (sum (zipWith (*) xi $ cycle [3,7])) 10\n          | otherwise = False</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 43007088, "answer_count": 1, "score": 1, "last_activity_date": 1490385601, "creation_date": 1490381031, "last_edit_date": 1490385601, "question_id": 43006987, "link": "https://stackoverflow.com/questions/43006987/how-to-check-if-sum-of-list-elements-are-equal-to-the-last-element-in-haskell", "title": "How to check if sum of list elements are equal to the last element in Haskell?", "body": "<p>Input is a list with 9 elements. <br>\n    <br>\nI would like to check if the first 8 elements's sum/10's remainder (with the algorithm below, taj's second line) is equal to the last (9th) element.</p>\n\n<p>At the moment my program counts the remainder but i can't figure out how to check it. I have tried several ways.</p>\n\n<pre><code>oddS :: Int-&gt; Int\noddS x = x*3\n\nevenS :: Int -&gt; Int\nevenS y = y*7\n\n\ntaj :: [Int] -&gt; Int\ntaj (a:b:c:d:e:f:g:h:w) = (oddS a + evenS b + oddS c + evenS d + oddS e + evenS f + oddS g + evenS h) `mod` 10\n</code></pre>\n\n<p>I know it is not the best solution but it does the job.</p>\n\n<p>An alternative solution with the help of  Willem.</p>\n\n<pre><code>  check :: [Int] -&gt; Bool\n  check xs = xn == taj xs\n      where xn = last xs\n</code></pre>\n"}, {"tags": ["list", "haskell", "optimization", "infinite"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490370244, "post_id": 43003686, "comment_id": 73096687, "body": "Never concatenate lists if you can use <code>:</code>: <code>++</code> works in <i>O(n)</i> (with <i>n</i> the size of the first list) whereas <code>:</code> works in <i>O(1)</i>."}, {"owner": {"reputation": 2226, "user_id": 2246434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTuEI.jpg?s=128&g=1", "display_name": "Julia Path", "link": "https://stackoverflow.com/users/2246434/julia-path"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1490370689, "post_id": 43003686, "comment_id": 73097015, "body": "@WillemVanOnsem But if the size of the first list is <i>O(1)</i> as in any case were you can easily replace <code>(++)</code> with <code>(:)</code> then <code>(++)</code> is also <i>O(1)</i>. So while <code>(:)</code> may be a constant factor faster than <code>(++)</code> asymptotically they are the same."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1490371828, "post_id": 43003686, "comment_id": 73097793, "body": "You didn&#39;t state a question."}], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1490380293, "post_id": 43003726, "comment_id": 73102953, "body": "Did you test this assertion? In my tests, GHC emits the exact same core for both implementations."}, {"owner": {"reputation": 34669, "user_id": 34409, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4dfdadcd9bb62300eb1a54f02fe5dc18?s=128&d=identicon&r=PG", "display_name": "Chad Gilbert", "link": "https://stackoverflow.com/users/34409/chad-gilbert"}, "edited": false, "score": 0, "creation_date": 1490382849, "post_id": 43003726, "comment_id": 73104422, "body": "I have not tested the compiled GHC. If it is able to optimize in this specific case, that&#39;s pretty cool and I can update my answer, but I think the general rule holds and we shouldn&#39;t code <code>++</code> when <code>:</code> will suffice and is, at least theoretically, more performant."}], "tags": [], "owner": {"reputation": 34669, "user_id": 34409, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4dfdadcd9bb62300eb1a54f02fe5dc18?s=128&d=identicon&r=PG", "display_name": "Chad Gilbert", "link": "https://stackoverflow.com/users/34409/chad-gilbert"}, "is_accepted": true, "score": 1, "last_activity_date": 1490370572, "last_edit_date": 1490370572, "creation_date": 1490370122, "answer_id": 43003726, "question_id": 43003686, "link": "https://stackoverflow.com/questions/43003686/haskell-optimizing-infinite-list-implementation/43003726#43003726", "title": "Haskell optimizing infinite list implementation", "body": "<p>Using the cons operator <code>:</code> will be much more performant than concatenating lists:</p>\n\n\n\n<pre class=\"lang-hs prettyprint-override\"><code>pair :: [a] -&gt; [[a]]\npair (x:y:xs) = [x, y] : pair xs\n</code></pre>\n\n<p>The reasoning is that lists in Haskell are linked lists where each item points to the next until the end of the list. Pushes and Pops are cheap when done at the head of the list because you are only pointing the head at the head of an existing list.</p>\n\n<p>When you concatenate two linked list, you are essentially rebuilding the complete first list so that its last element can point at the first element of the second list.</p>\n\n<p>The performance gain is minor in your example since you only have two elements in your list, but as a general rule, if you're dealing with operations on the head of the list, it's almost always going to be more performant to use cons.</p>\n"}], "owner": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 43003726, "answer_count": 1, "score": 0, "last_activity_date": 1550843830, "creation_date": 1490370001, "last_edit_date": 1550843830, "question_id": 43003686, "link": "https://stackoverflow.com/questions/43003686/haskell-optimizing-infinite-list-implementation", "title": "Haskell optimizing infinite list implementation", "body": "<p>My code gives the wanted result but I wonder if there is a better way to code this. This is the given example:</p>\n\n<pre><code>pair [ 1 , 2 , 3 , 4 , 5 , 6 , ... ]\n[ [ 1 , 2 ] , [ 3 , 4 ] , [ 5 , 6 ] , ... ]\n</code></pre>\n\n<p>and the given code:</p>\n\n<pre><code>pair::[a] -&gt; [[a]]\npair =\n</code></pre>\n\n<p>My solution: </p>\n\n<pre><code>pair :: [a] -&gt; [[a]]\npair (x:y:xs) = ((x:y:[]):[]) ++ pair xs\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1490365445, "post_id": 43001913, "comment_id": 73093244, "body": "I would turn both numbers into <code>[Char]</code> and then happily compared the lists, smth like <code>common l1 l2 = [e1 | e1 &lt;- l1, elem e1 l2]</code>, though it has O(n^2) performance. Comparing the lists is especially efficient if you only care about the set of the common elements and not the order; you can sort the both lists."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1490365752, "post_id": 43001913, "comment_id": 73093466, "body": "What&#39;s <code>digits</code>? And why are you using hugs?"}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "is_accepted": false, "score": 1, "last_activity_date": 1490368190, "last_edit_date": 1490368190, "creation_date": 1490366702, "answer_id": 43002459, "question_id": 43001913, "link": "https://stackoverflow.com/questions/43001913/haskell-compare-issue/43002459#43002459", "title": "Haskell compare issue", "body": "<p>To find how many digits two <code>Int</code> have in common, using the string representation <strike>isn't too bad</strike> (It's actually terrible, <strong>see update below</strong>).</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>commonDigits :: Int -&gt; Int -&gt; Int\ncommonDigits a b = length . filter id $ zipWith (==) (reverse $ show a) (reverse $ show b)\n</code></pre>\n\n<p><code>reverse</code> is needed to make sure the digits align properly.</p>\n\n<p>If you're into point-free style:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import Data.Function\n\ncommonDigits :: Int -&gt; Int -&gt; Int\ncommonDigits = fmap (length . filter id) . zipWith (==) `on` reverse . show\n</code></pre>\n\n<p>Then if you want to return a special <code>Int</code> depending on the result of <code>commonDigits</code> you can use a separate function:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>specialResult :: Int -&gt; Int -&gt; Int\nspecialResult a b =\n  case commonDigits a b of\n    2 -&gt; 23\n    3 -&gt; 48\n    _ -&gt; 256\n</code></pre>\n\n<p><strong>Update</strong>: For negative integers this method is not good. If only one of the argument is negative this function should behave like your <em>mod 10</em> version. If both are negative there is the possibility that the '-' sign is counted as a digit.</p>\n\n<p>Let's use a <code>digits</code> function that will give a list of digits for both positive and negative numbers from the least significant to the most significant digits. What happens if the number <code>0</code> is given as input, should we return an empty list or <code>[0]</code>? Your call on that one, but I'm going to assume you want <code>[0]</code>.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>digits :: Int -&gt; [Int]\ndigits 0 = [0]\ndigits n = digits' (abs n)\n  where\n    digits' 0 = []\n    digits' n = n `mod` 10 : digits' (n `div` 10)\n</code></pre>\n\n<p>With this new <code>digits</code> function we can rewrite <code>commonDigits</code> to:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>commonDigits :: Int -&gt; Int -&gt; Int\ncommonDigits = fmap (length . filter id) . zipWith (==) `on` digits\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7649927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490368190, "creation_date": 1490365256, "question_id": 43001913, "link": "https://stackoverflow.com/questions/43001913/haskell-compare-issue", "title": "Haskell compare issue", "body": "<p>I use recursion to compare two numbers(ex 123 is the same with 123) and store how many digits they have in common(ex 123 compared to 123 has 3 and with 124 has 2).</p>\n\n<p>While my program does find that number i want to put conditions for every situation (ex if they have 2 digits in common output value 44 or if they have 3 do something else etc.) but no comparison is done. Can someone please explain to me what and why that happens. Here my code :</p>\n\n<pre><code>dg :: Int-&gt;Int-&gt;Int  \ndg 0 0 = 0\ndg x y = if (c==2) then 23 else 24 -- c = common digits\n    where c = digits (x `div` 10) (y `div` 10) + if (x `mod` 10 == y `mod` 10) then 1 else 0        \n</code></pre>\n\n<p>I run hugs deleting the \"if\" condition, giving input 10 10 the output is 2 but when i leave it on and rerun it, it goes to 24 (while 23 is correct). I'm really confused.</p>\n"}, {"tags": ["class", "haskell", "instance", "where", "typeclass"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "edited": false, "score": 0, "creation_date": 1490364278, "post_id": 43001489, "comment_id": 73092493, "body": "thats what i thought aswell but they already wrote instance Eq Egg where (==) and I need to complete the code. The (==) confuses me so much"}, {"owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "reply_to_user": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "edited": false, "score": 0, "creation_date": 1490364377, "post_id": 43001489, "comment_id": 73092552, "body": "Are you confused about the operator (==) ? I&#39;ll edit my solution to show a prefix version"}, {"owner": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "edited": false, "score": 0, "creation_date": 1490364860, "post_id": 43001489, "comment_id": 73092848, "body": "I&#39;m so dumb, thanks for your answer! Totally forgot that that is a prefix"}], "tags": [], "owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "is_accepted": true, "score": 4, "last_activity_date": 1490364757, "last_edit_date": 1490364757, "creation_date": 1490364080, "answer_id": 43001489, "question_id": 43001347, "link": "https://stackoverflow.com/questions/43001347/haskell-own-instance-typeclass/43001489#43001489", "title": "Haskell own instance typeclass", "body": "<p>The easy way to have an instance of <code>Eq</code> is:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Egg = Soft | Hard deriving Eq\n</code></pre>\n\n<p>The hard way (with more control):</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Egg = Soft | Hard\n\ninstance Eq Egg where\n  Soft == Soft = True\n  Hard == Hard = True\n  _    == _    = False\n</code></pre>\n\n<p><strong>UPD</strong>: Since the equality function (==) as an operator seem to be the confusing bit, here is the same instance written with a prefix notation:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Egg = Soft | Hard\n\ninstance Eq Egg where\n  (==) Soft Soft = True\n  (==) Hard Hard = True\n  (==) _    _    = False\n</code></pre>\n\n<p>As a quick reminder: operator are infix (in between terms) by default, and functions are prefix (before terms) by default. To make an operator prefix it is surrounded by <code>()</code>, to make a function infix it is surrounded by <code>``</code>. <a href=\"https://stackoverflow.com/questions/10548170/what-characters-are-permitted-for-haskell-operators\">Here</a> is a thread talking about which characters are used for operator vs functions.</p>\n"}, {"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": false, "score": 1, "last_activity_date": 1490364836, "last_edit_date": 1490364836, "creation_date": 1490364508, "answer_id": 43001635, "question_id": 43001347, "link": "https://stackoverflow.com/questions/43001347/haskell-own-instance-typeclass/43001635#43001635", "title": "Haskell own instance typeclass", "body": "<p>I assume you\u2019re trying to make an <em>instance</em> of the standard typeclass <code>Eq</code> for your custom datatype. The <code>Eq</code> class is defined as:</p>\n\n<pre><code>class Eq a where\n\n  (==) :: a -&gt; a -&gt; Bool\n  a == b = not (a /= b)\n\n  (/=) :: a -&gt; a -&gt; Bool\n  a /= b = not (a == b)\n</code></pre>\n\n<p>That is, it defines two methods <code>==</code> and <code>/=</code> (which happen to be operators), and provides default implementations of each one in terms of the other. So to make an instance of <code>Eq</code> for your own type, you need to provide an implementation of one or both of these functions (<code>==</code> or <code>/=</code>) for your type. Note that the body of the <code>instance</code> must be indented.</p>\n\n<pre><code>instance Eq Egg where\n  Soft == Soft = True\n  Hard == Hard = True\n  _ == _ = False\n</code></pre>\n\n<p>Just as you can <em>use</em> a Haskell operator in prefix form by wrapping it in parentheses, e.g., <code>(==) 1 1</code>, you can also <em>implement</em> an operator definition in prefix form:</p>\n\n<pre><code>instance Eq Egg where\n  (==) Soft Soft = True\n  (==) Hard Hard = True\n  (==) _ _ = False\n</code></pre>\n\n<p>You could even use a <code>case</code> if you so desired:</p>\n\n<pre><code>instance Eq Egg where\n  (==) a b = case (a, b) of\n    (Soft, Soft) -&gt; True\n    (Hard, Hard) -&gt; True\n    _ -&gt; False\n</code></pre>\n\n<p>Note that these are all the same as the instance that would be generated for you automatically with <code>deriving</code>:</p>\n\n<pre><code>data Egg = Soft | Hard\n  deriving (Eq)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4420883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d6563871654366f2851150e311bf3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/4420883/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 43001489, "answer_count": 2, "score": 1, "last_activity_date": 1490364836, "creation_date": 1490363732, "question_id": 43001347, "link": "https://stackoverflow.com/questions/43001347/haskell-own-instance-typeclass", "title": "Haskell own instance typeclass", "body": "<p>I need to declare my own typeclass but I dont understand why there is the (==).</p>\n\n<pre><code>data Egg = Soft | Hard\n\ninstance Eq Egg where\n(==)\n</code></pre>\n\n<p>I did not find anything where the (==) is used in an instance, only in a class </p>\n"}, {"tags": ["haskell", "ghci", "lambdabot"], "comments": [{"owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "edited": false, "score": 1, "creation_date": 1490358274, "post_id": 42999199, "comment_id": 73088521, "body": "If you only want to know functional types, there&#39;s <a href=\"https://hackage.haskell.org/package/data-aviary-0.4.0/docs/Data-Aviary-Functional.html\" rel=\"nofollow noreferrer\"><code>Data.Aviary.Functional</code></a>. As for your question, you could try using TypeApplications to pass in a specific <code>m</code> tyvar."}], "answers": [{"tags": [], "owner": {"reputation": 2231, "user_id": 1027321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KkFZC.jpg?s=128&g=1", "display_name": "jakubdaniel", "link": "https://stackoverflow.com/users/1027321/jakubdaniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1545328836, "last_edit_date": 1545328836, "creation_date": 1490358369, "answer_id": 42999465, "question_id": 42999199, "link": "https://stackoverflow.com/questions/42999199/how-can-i-get-the-type-of-a-polymorphic-function-for-a-specific-type-class-insta/42999465#42999465", "title": "How can i get the type of a polymorphic function for a specific type class instance?", "body": "<p>This is just a hack, but you could always do something like:</p>\n\n<pre><code>:t ap . (id :: ((-&gt;) r a) -&gt; ((-&gt;) r a))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>:t \\x y -&gt; (id :: ...) (ap x y)\n</code></pre>\n\n<p>interestingly</p>\n\n<pre><code>Prelude Control.Monad&gt; type Reader = (-&gt;) r\nPrelude Control.Monad&gt; :t ap . (id :: Reader r a -&gt; Reader r a)\nap . (id :: Reader r a -&gt; Reader r a)\n  :: Reader r (a -&gt; b) -&gt; (r -&gt; a) -&gt; r -&gt; b\n</code></pre>\n\n<p>differs from</p>\n\n<pre><code>Prelude Control.Monad&gt; :t \\x y -&gt; (id :: Reader r a -&gt; Reader r a) (ap x y)\n\\x y -&gt; (id :: Reader r a -&gt; Reader r a) (ap x y)\n  :: (r -&gt; a1 -&gt; a) -&gt; (r -&gt; a1) -&gt; Reader r a\n</code></pre>\n\n<p>in what ghc recognizes as the synonym <code>Reader r a</code></p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "is_accepted": false, "score": 12, "last_activity_date": 1490361612, "last_edit_date": 1490361612, "creation_date": 1490360774, "answer_id": 43000286, "question_id": 42999199, "link": "https://stackoverflow.com/questions/42999199/how-can-i-get-the-type-of-a-polymorphic-function-for-a-specific-type-class-insta/43000286#43000286", "title": "How can i get the type of a polymorphic function for a specific type class instance?", "body": "<p>As <a href=\"https://stackoverflow.com/users/2892792/lazersmoke\">Lazersmoke</a> said as a comment you can use the <a href=\"https://ghc.haskell.org/trac/ghc/wiki/TypeApplication\" rel=\"noreferrer\">TypeApplications</a> extension that was introduced in GHC 8.0.</p>\n\n<p>In GHCi:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>\u03bb &gt; :set -XTypeApplications\n\u03bb &gt; import Control.Monad\n\u03bb &gt; :t ap @((-&gt;) _)\nap @((-&gt;) _) :: (t -&gt; a -&gt; b) -&gt; (t -&gt; a) -&gt; t -&gt; b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "is_accepted": true, "score": 11, "last_activity_date": 1490361089, "last_edit_date": 1495540931, "creation_date": 1490361089, "answer_id": 43000393, "question_id": 42999199, "link": "https://stackoverflow.com/questions/42999199/how-can-i-get-the-type-of-a-polymorphic-function-for-a-specific-type-class-insta/43000393#43000393", "title": "How can i get the type of a polymorphic function for a specific type class instance?", "body": "<p>You can use <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#visible-type-application\" rel=\"nofollow noreferrer\">visible type application</a> feature to specify parametric types. You can look at functions in more creative way: functions in <em>Haskell</em> can be applied to not only values of some types, but also to types of that values. But to pass type you should somehow specify (with prepending <code>@</code>) that you're passing types (because types are not first-class objects in <em>Haskell</em> yet).</p>\n\n<p>So here how it works:</p>\n\n<pre><code>\u03bb: :set -XTypeApplications\n\u03bb: :t ap @((-&gt;) Int)\nap @((-&gt;) Int) :: (Int -&gt; a -&gt; b) -&gt; (Int -&gt; a) -&gt; Int -&gt; b\n</code></pre>\n\n<p>The only limitation of such approach is that you can't use type variables in <code>ghci</code>, you should use specific types (<code>Int</code> instead of <code>r</code>) but this is not big deal.</p>\n\n<p><strong>ADVANCED SECTION</strong></p>\n\n<p>Well, actually you can, but it's tricky:</p>\n\n<pre><code>\u03bb: :set -XExplicitForAll \n\u03bb: :set -XPartialTypeSignatures \n\u03bb: :set -XScopedTypeVariables \n\u03bb: :{\n\u03bb| foo :: forall r . _\n\u03bb| foo = ap @((-&gt;) r)\n\u03bb| :}\n&lt;interactive&gt;:28:19: warning: [-Wpartial-type-signatures]\n    \u2022 Found type wildcard \u2018_\u2019\n        standing for \u2018(r -&gt; a -&gt; b) -&gt; (r -&gt; a) -&gt; r -&gt; b\u2019\n\u03bb: :t foo\nfoo :: (r -&gt; a -&gt; b) -&gt; (r -&gt; a) -&gt; r -&gt; b\n</code></pre>\n\n<p><strong>UPD:</strong> You can actually use placeholders instead of type variables (see <a href=\"https://stackoverflow.com/questions/42999199/how-can-i-get-the-type-of-a-polymorphic-function-for-a-specific-type-class-insta/43000286#43000286\">another answer</a>). But if you want to specify exact names use approach from above.</p>\n\n<pre><code>\u03bb: :t ap @((-&gt;) _)\nap @((-&gt;) _) :: (t -&gt; a -&gt; b) -&gt; (t -&gt; a) -&gt; t -&gt; b\n</code></pre>\n\n<p><strong>/ADVANCED SECTION</strong></p>\n\n<p>One more thing to say about this approach: you should do something more if your functions have several type parameters and you want to specify exact one. Types are passed one by one from left to right just as simple arguments in some function like <code>bar :: Int -&gt; String -&gt; Double</code>. If you want to fix first argument of <code>bar</code> you should write <code>bar 5</code> and if you want to fix second, then, well, you can write something like <code>\\n -&gt; bar n \"baz\"</code> but this doesn't work with type application. You need to know two things:</p>\n\n<ol>\n<li>Order of types.</li>\n<li>How to specify desired type.</li>\n</ol>\n\n<p>Consider next function:</p>\n\n<pre><code>\u03bb: :t lift\nlift :: (Monad m, MonadTrans t) =&gt; m a -&gt; t m a\n</code></pre>\n\n<p>We want be able to specify <code>m</code> and <code>t</code> type variables. Because <em>Haskell</em> has no named type variables (yet) you <strong>can't</strong> write <code>:t lift {t=MaybeT}</code> or <code>:t lift {m=IO}</code> unfortunately. So go back to two things.</p>\n\n<p>To see order of types you should use some compiler options. Order of type arguments is specified by <code>forall</code> and you can do it manually. Otherwise type parameters will be sorted somehow by the compiler. Mere mortals can't see order of types for <code>lift</code> function but if you're aware of some high-level magic you can:</p>\n\n<pre><code>\u03bb: :set -fprint-explicit-foralls\n\u03bb: :t lift\nlift\n  :: forall {t :: (* -&gt; *) -&gt; * -&gt; *} {a} {m :: * -&gt; *}.\n     (Monad m, MonadTrans t) =&gt;\n     m a -&gt; t m a\n</code></pre>\n\n<p>And then you should use <code>@_</code> to skip some types:</p>\n\n<pre><code>\u03bb: :t lift @MaybeT\nlift @MaybeT\n  :: forall {a} {m :: * -&gt; *}. Monad m =&gt; m a -&gt; MaybeT m a\n\u03bb: :t lift @_ @IO\nlift @_ @IO\n  :: forall {t :: (* -&gt; *) -&gt; * -&gt; *} {a}.\n     MonadTrans t =&gt;\n     IO a -&gt; t IO a\n\u03bb: :t lift @_ @_ @Int\nlift @_ @_ @Int\n  :: forall {t :: (* -&gt; *) -&gt; * -&gt; *} {t1 :: * -&gt; *}.\n     (Monad t1, MonadTrans t) =&gt;\n     t1 Int -&gt; t t1 Int\n</code></pre>\n\n<p>Well, this is really mystery for me why <code>m</code> is shown as <em>third</em> argument in <code>forall</code> but should be passed as <em>second</em> but I'm still not aware of all magic.</p>\n"}], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 43000393, "answer_count": 3, "score": 7, "last_activity_date": 1545328836, "creation_date": 1490357526, "question_id": 42999199, "link": "https://stackoverflow.com/questions/42999199/how-can-i-get-the-type-of-a-polymorphic-function-for-a-specific-type-class-insta", "title": "How can i get the type of a polymorphic function for a specific type class instance?", "body": "<p>For example, typing <code>:t ap</code> in GHCi gives the result</p>\n\n<pre><code>ap :: Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b\n</code></pre>\n\n<p>If I already know the Monad instance I'm going to use is <code>((-&gt;) r)</code>, how can I query for the type of <code>ap</code> for that specific instance?</p>\n"}, {"tags": ["haskell", "tex", "literate-programming"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1490354954, "post_id": 42998088, "comment_id": 73086350, "body": "Maybe it should not, but it seems to. If you want help here, I suggest 1) figuring out which part of your <code>lhs</code> file causes the problem, then 2) creating a minimal <code>lhs</code> file from that information that reproduces the problem and post it here."}, {"owner": {"reputation": 19084, "user_id": 1482749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9982206dde8c2bbb151a7305c00f3?s=128&d=identicon&r=PG", "display_name": "kosmikus", "link": "https://stackoverflow.com/users/1482749/kosmikus"}, "edited": false, "score": 0, "creation_date": 1490423139, "post_id": 42998088, "comment_id": 73115641, "body": "The assumption is wrong. lhs2tex is a preprocessor that interprets and rewrites certain aspects of the file and does not touch the rest. The validity of the output does very much depend on the input."}], "owner": {"reputation": 4029, "user_id": 3224967, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/963b108f3bcde98ac96d09b04abbf63f?s=128&d=identicon&r=PG&f=1", "display_name": "mherzl", "link": "https://stackoverflow.com/users/3224967/mherzl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1490585554, "creation_date": 1490354069, "last_edit_date": 1490585554, "question_id": 42998088, "link": "https://stackoverflow.com/questions/42998088/lhs2tex-produces-invalid-tex-file", "title": "lhs2Tex produces invalid .tex file", "body": "<p>I ran lhs2Tex on my f.lhs file (<code>$ lhs2Tex f.lhs &gt; f.tex</code>). It completed successfully, creating f.tex and producing no errors.</p>\n\n<p>However, when I then run <code>$ pdflatex f.tex</code>, I get (some output followed by) the following error:</p>\n\n<pre><code>Runaway argument?\n\\ignorespaces \\SaveRestoreHook \\column {B}{@{}&gt;{\\hspre }l&lt;{\\hspost }@\\ETC.\n! File ended while scanning use of \\PT@scantoend.\n&lt;inserted text&gt; \n                \\par \n&lt;*&gt; core.tex\n\n?   \n</code></pre>\n\n<p>Why is the output of lhs2Tex failing to compile to valid tex? It seems that lhs2Tex should not generate invalid tex, even with invalid input.</p>\n\n<p>I am not sure of the best way to debug this; the error message that I have points to f.tex, but that is a long generated output, not my written code. In my code (f.lhs), I am not sure where to start since lhs2Tex sends it to f.tex with no errors or output at all.</p>\n\n<p>Any suggestions on how to approach debugging this?</p>\n\n<hr>\n\n<p>Edit:\nI removed a bunch of the generated code while checking to ensure that what remained still caused the same error.\nHere is what remains; this minimized version of f.tex causes the same error.</p>\n\n<pre><code>\\documentclass{article}\n%% ODER: format ==         = \"\\mathrel{==}\"\n%% ODER: format /=         = \"\\neq \"\n%\n%\n\\makeatletter\n\\@ifundefined{lhs2tex.lhs2tex.sty.read}%\n  {\\@namedef{lhs2tex.lhs2tex.sty.read}{}%\n   \\newcommand\\SkipToFmtEnd{}%\n   \\newcommand\\EndFmtInput{}%\n   \\long\\def\\SkipToFmtEnd#1\\EndFmtInput{}%\n  }\\SkipToFmtEnd\n\n\\newcommand\\ReadOnlyOnce[1]{\\@ifundefined{#1}{\\@namedef{#1}{}}\\SkipToFmtEnd}\n\\usepackage{amstext}\n\\usepackage{amssymb}\n\\usepackage{stmaryrd}\n\\newcommand{\\tex}[1]{\\text{\\texfamily#1}}   % NEU\n\n\\newcommand{\\Sp}{\\hskip.33334em\\relax}\n\n\n\\usepackage{polytable}\n\n%mathindent has to be defined\n\\@ifundefined{mathindent}%\n  {\\newdimen\\mathindent\\mathindent\\leftmargini}%\n  {}%\n\n\\def\\resethooks{%\n  \\global\\let\\SaveRestoreHook\\empty\n  \\global\\let\\ColumnHook\\empty}\n\\newcommand*{\\savecolumns}[1][default]%\n  {\\g@addto@macro\\SaveRestoreHook{\\savecolumns[#1]}}\n\\newcommand*{\\restorecolumns}[1][default]%\n  {\\g@addto@macro\\SaveRestoreHook{\\restorecolumns[#1]}}\n\\newcommand*{\\aligncolumn}[2]%\n  {\\g@addto@macro\\ColumnHook{\\column{#1}{#2}}}\n\n\\resethooks\n\n\\newcommand{\\visiblecomments}{%\n  \\let\\onelinecomment=\\onelinecommentchars\n  \\let\\commentbegin=\\commentbeginchars\n  \\let\\commentend=\\commentendchars}\n\n\\visiblecomments\n\n\\newlength{\\blanklineskip}\n\\setlength{\\blanklineskip}{0.66084ex}\n\n\\EndFmtInput\n\\makeatother\n%\n%\n%\n%\n%\n%\n% This package provides two environments suitable to take the place\n% of hscode, called \"plainhscode\" and \"arrayhscode\". \n%\n% The plain environment surrounds each code block by vertical space,\n% and it uses \\abovedisplayskip and \\belowdisplayskip to get spacing\n% similar to formulas. Note that if these dimensions are changed,\n% the spacing around displayed math formulas changes as well.\n% All code is indented using \\leftskip.\n%\n% Changed 19.08.2004 to reflect changes in colorcode. Should work with\n% CodeGroup.sty.\n%\n\\ReadOnlyOnce{polycode.fmt}%\n\\makeatletter\n\n\\newcommand{\\hsnewpar}[1]%\n  {{\\parskip=0pt\\parindent=0pt\\par\\vskip #1\\noindent}}\n\n% can be used, for instance, to redefine the code size, by setting the\n% command to \\small or something alike\n\\newcommand{\\hscodestyle}{}\n\n% The command \\sethscode can be used to switch the code formatting\n% behaviour by mapping the hscode environment in the subst directive\n% to a new LaTeX environment.\n\n\\newcommand{\\sethscode}[1]%\n  {\\expandafter\\let\\expandafter\\hscode\\csname #1\\endcsname\n   \\expandafter\\let\\expandafter\\endhscode\\csname end#1\\endcsname}\n\n\n% \"plain\" mode is the proposed default.\n% It should now work with \\centering.\n% This required some changes. The old version\n% is still available for reference as oldplainhscode.\n\n\\newenvironment{plainhscode}%\n  {\\hsnewpar\\abovedisplayskip\n   \\advance\\leftskip\\mathindent\n   \\hscodestyle\n   \\let\\hspre\\(\\let\\hspost\\)%\n   \\pboxed}%\n  {\\endpboxed%\n   \\hsnewpar\\belowdisplayskip\n   \\ignorespacesafterend}\n\n% Here, we make plainhscode the default environment.\n\n\\newcommand{\\plainhs}{\\sethscode{plainhscode}}\n\\newcommand{\\oldplainhs}{\\sethscode{oldplainhscode}}\n\\plainhs\n\n\n%\n\\begin{document}\n\\begin{hscode}\\SaveRestoreHook\n\n\\ColumnHook\n\\end{hscode}\\resethooks\n\\end{document}\n\\end{document}\n</code></pre>\n"}, {"tags": ["list", "haskell", "split"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490352619, "post_id": 42997539, "comment_id": 73084812, "body": "I do not really get why you first split on <code>even</code> and <code>odd</code>?"}, {"owner": {"reputation": 147, "user_id": 7349353, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e669d9936ff64e5e0f40d4fb31f90ebd?s=128&d=identicon&r=PG&f=1", "display_name": "MRMKR", "link": "https://stackoverflow.com/users/7349353/mrmkr"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490352899, "post_id": 42997539, "comment_id": 73084973, "body": "@WillemVanOnsem sorry, it&#39;s probably non important information, it was the problem that I solved eralier but now I need to solve probelm that I stated in question. I removed non important information."}], "answers": [{"comments": [{"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 0, "creation_date": 1490353164, "post_id": 42997650, "comment_id": 73085151, "body": "cool solution, I was writting the same just with <code>take</code> and <code>drop</code> wich is basically worst than yours"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 1, "creation_date": 1490353248, "post_id": 42997650, "comment_id": 73085202, "body": "@DanielSanchez: well of course it depends on how <code>splitAt</code> is implemented, but usually they aim to save some work like <a href=\"http://hackage.haskell.org/package/base-4.9.1.0/docs/src/GHC.List.html#splitAt\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1490372016, "last_edit_date": 1490372016, "creation_date": 1490352866, "answer_id": 42997650, "question_id": 42997539, "link": "https://stackoverflow.com/questions/42997539/split-list-in-tuple-with-lists-of-length-20-21-2n-using-haskell/42997650#42997650", "title": "Split list in tuple with lists of length 2^0, 2^1, ... , 2^N using Haskell", "body": "<p>You can use the function: <a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:splitAt\" rel=\"nofollow noreferrer\"><code>splitAt :: Int -&gt; [a] -&gt; ([a],[a])</code></a>, and then use recursion:</p>\n\n<pre><code>blocks :: Int -&gt; [a] -&gt; [[a]]\nblocks _ [] = []\nblocks n ls = la : blocks (2*n) lb\n    where ~(la,lb) = splitAt n ls\n</code></pre>\n\n<p>So in the case we have a <code>blocks 1 [1,2,3,4,5,6]</code> we will obtain <code>[[1],[2,3],[4,5,6]]</code>. In the first case, we look if the list we give to blocks is empty, in which case, there is nothing to split, so we return the empty list. In the recursive case, we <code>splitAt</code> the <code>ls</code> list into <code>la</code> and <code>lb</code>. The <code>la</code> is our first list, and the <code>lb</code> we need to split further. We do the recursion with <code>n*2</code> as new split length to ensure that the length of the lists will increase like powers of two.</p>\n"}, {"tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": false, "score": 1, "last_activity_date": 1490354709, "creation_date": 1490354709, "answer_id": 42998298, "question_id": 42997539, "link": "https://stackoverflow.com/questions/42997539/split-list-in-tuple-with-lists-of-length-20-21-2n-using-haskell/42998298#42998298", "title": "Split list in tuple with lists of length 2^0, 2^1, ... , 2^N using Haskell", "body": "<p>Maybe you can also use <code>zip</code> and <code>groupBy</code>. Seems to be working, but is not so straightforward.</p>\n\n<pre><code>import Data.List\na=\"Hello World!\"\np=[2^n| n&lt;-[0..]]\npa=take (length a) p\nb=[elem n pa| n&lt;-[1..length a]]\nc=zip a b\nd=groupBy (\\x y-&gt;snd y==False) c\ne=map (map (\\x-&gt;fst x)) d\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7349353, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e669d9936ff64e5e0f40d4fb31f90ebd?s=128&d=identicon&r=PG&f=1", "display_name": "MRMKR", "link": "https://stackoverflow.com/users/7349353/mrmkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42997650, "answer_count": 2, "score": 2, "last_activity_date": 1490372133, "creation_date": 1490352556, "last_edit_date": 1490372133, "question_id": 42997539, "link": "https://stackoverflow.com/questions/42997539/split-list-in-tuple-with-lists-of-length-20-21-2n-using-haskell", "title": "Split list in tuple with lists of length 2^0, 2^1, ... , 2^N using Haskell", "body": "<p>I'm trying to solve Haskell problem, but I don't have any clue where to start.\nI need to split list in lists with length of 2^0, 2^1, 2^3 .. elements. \nSo if we have list <code>[1,2,3,4,5,6,7,8,9,10,11,12,13]</code> after using our function we should have result <code>[[1],[2,3],[4,5,6,7],[8,9,10,11,12,13]]</code></p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1354, "user_id": 3027554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a52e97f946b17d363caca57df2692b0?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Hegemann", "link": "https://stackoverflow.com/users/3027554/christoph-hegemann"}, "edited": false, "score": 1, "creation_date": 1490348817, "post_id": 42995960, "comment_id": 73082256, "body": "Sounds an awful lot like homework, maybe add a few lines about what you did so far to understand what&#39;s going on in that snippet."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7761414"}, "reply_to_user": {"reputation": 1354, "user_id": 3027554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a52e97f946b17d363caca57df2692b0?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Hegemann", "link": "https://stackoverflow.com/users/3027554/christoph-hegemann"}, "edited": false, "score": 0, "creation_date": 1490470516, "post_id": 42995960, "comment_id": 73129692, "body": "The problem is the following: By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13, we can see that the 6th prime is 13. What is the 10 001st prime number?"}], "answers": [{"tags": [], "owner": {"reputation": 1307, "user_id": 5823050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/I2MUl.png?s=128&g=1", "display_name": "CaptainTrunky", "link": "https://stackoverflow.com/users/5823050/captaintrunky"}, "is_accepted": false, "score": 1, "last_activity_date": 1490348690, "creation_date": 1490348690, "answer_id": 42996072, "question_id": 42995960, "link": "https://stackoverflow.com/questions/42995960/haskell-p-not-takewhile/42996072#42996072", "title": "Haskell \\p -&gt; not takeWhile", "body": "<pre><code>\\p -&gt; square p &lt;= n\n</code></pre>\n\n<p>It's an unnamed (anonymous) function that accepts variable <em>p</em>, squares it and compares result with <em>n</em>.</p>\n\n<pre><code>all (\\p -&gt; not $ divideBy p n) testingSlice\n</code></pre>\n\n<p>checks that anonymous function returns <strong>true</strong> value for each element in <em>testingSlice</em>.</p>\n\n<p>Read about <a href=\"https://en.wikipedia.org/wiki/Anonymous_function\" rel=\"nofollow noreferrer\">lambdas</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7761414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1490348690, "creation_date": 1490348346, "question_id": 42995960, "link": "https://stackoverflow.com/questions/42995960/haskell-p-not-takewhile", "title": "Haskell \\p -&gt; not takeWhile", "body": "<p>Let the following code in Haskell:</p>\n\n<pre><code>isPrime n\n\n| n &lt;= 1 = False\n| n == 2 = True\n| n == 3 = True\n| even n = False\n| otherwise = all (\\p -&gt; not $ divideBy p n) testingSlice\n\nwhere\n\n  testingNumbers = iterate (+ 2) 3\n\n  testingSlice = takeWhile (\\p -&gt; square p &lt;= n) testingNumbers\n</code></pre>\n\n<p>What does \"\\p -> square p &lt;= n?\"\n          \"all (\\p -> not $ divideBy p n) testingSlice\" mean?</p>\n\n<p>What does \"\\p -> square p &lt;= n?\" mean?</p>\n\n<p>How to translate in pseudo code?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 39, "user_id": 4380216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/388a5b64622a9c813a63b9db8ed98d42?s=128&d=identicon&r=PG&f=1", "display_name": "reetyn", "link": "https://stackoverflow.com/users/4380216/reetyn"}, "reply_to_user": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 0, "creation_date": 1490337597, "post_id": 42992656, "comment_id": 73076620, "body": "@kennytm oh whoops that was a mistake i made while writing the question. the actual code doesn&#39;t have a new line"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1490337794, "post_id": 42992656, "comment_id": 73076705, "body": "So there&#39;s no actual error? Or is there? By the way, your <code>badQuick</code> is really bad, it loses all values that are equal to <code>x</code>, e.g. <code>badQuick [1,1,1,1,1,1,1]</code> will be <code>[1]</code>."}, {"owner": {"reputation": 39, "user_id": 4380216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/388a5b64622a9c813a63b9db8ed98d42?s=128&d=identicon&r=PG&f=1", "display_name": "reetyn", "link": "https://stackoverflow.com/users/4380216/reetyn"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1490338860, "post_id": 42992656, "comment_id": 73077161, "body": "@Zeta no there is an error! i just accidentally added that new line when writing the code into the question. and yes haha, that&#39;s the purpose of the badQuick -- it deletes all duplicates, and that&#39;s why i pad the beginning with 0s so it&#39;s the same length as the original list... It&#39;s meant to feel a quickCheck that tests the property that length(xs) = length(dodgySort4(x)"}], "answers": [{"comments": [{"owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "edited": false, "score": 0, "creation_date": 1490358431, "post_id": 42993450, "comment_id": 73088606, "body": "To avoid these problems in the future, you can remove the parens around each of your <code>length</code> functions, since function application binds tighter than <code>-</code>."}], "tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": true, "score": 2, "last_activity_date": 1490339369, "creation_date": 1490339369, "answer_id": 42993450, "question_id": 42992656, "link": "https://stackoverflow.com/questions/42992656/parse-error-on-input-where-in-haskell/42993450#42993450", "title": "Parse error on input \u2018where\u2019 in Haskell", "body": "<p>This is not about <code>where</code>, <code>)</code> is not matched in <code>replicate</code>. The type is also mismatched, change <code>:</code> to <code>++</code> fix the issue.</p>\n\n<pre><code>dodgySort4 :: (Ord a, Num a) =&gt; [a] -&gt; [a]\ndodgySort4 xs = (replicate ((length xs) - (length (badQuick xs))) 0) ++ badQuick xs\n  where ...\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4380216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/388a5b64622a9c813a63b9db8ed98d42?s=128&d=identicon&r=PG&f=1", "display_name": "reetyn", "link": "https://stackoverflow.com/users/4380216/reetyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "accepted_answer_id": 42993450, "answer_count": 1, "score": 0, "last_activity_date": 1490339369, "creation_date": 1490336269, "last_edit_date": 1490337636, "question_id": 42992656, "link": "https://stackoverflow.com/questions/42992656/parse-error-on-input-where-in-haskell", "title": "Parse error on input \u2018where\u2019 in Haskell", "body": "<p>So I'm trying to create a bad sort function which, given a list, sorts it while deleting duplicates, and then pads the beginning of the list with \"0s\" to make sure the length of the badly sorted new list is the same as the size of the original list.</p>\n\n<p>This is my code: </p>\n\n<pre><code>dodgySort4 xs = (replicate ((length xs) - (length (badQuick xs)) 0) : badQuick xs\n  where\n    badQuick  [] = []\n    badQuick (x:xs) = (badQuick lesser) ++ [x] ++ (badQuick greater)\n      where\n          lesser  = filter (&lt; x) xs\n          greater = filter (&gt; x) xs\n</code></pre>\n\n<p>However, I keep getting the \"parse error on input \u2018where\u2019\" error at the beginning of the first where and I'm not quite sure what the problem is? </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1490336994, "post_id": 42992623, "comment_id": 73076374, "body": "You might also like <code>sequence :: [Maybe a] -&gt; Maybe [a]</code>, which returns <code>Just xs</code> exactly when all the elements of its input are <code>Just</code>s. Then you can wrap your <code>all isJust</code> check and <code>catMaybes</code> operation into a single <code>case</code> operation."}], "answers": [{"comments": [{"owner": {"reputation": 1106, "user_id": 4197293, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd3542179c9735316f934724992b7ce?s=128&d=identicon&r=PG", "display_name": "jeiea", "link": "https://stackoverflow.com/users/4197293/jeiea"}, "edited": false, "score": 0, "creation_date": 1490341501, "post_id": 42992808, "comment_id": 73078397, "body": "Thanks for answer and your comment. You are right and I have a question. If it was C code then I could use pause while debugging. Is there any correspondent to this?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 1106, "user_id": 4197293, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd3542179c9735316f934724992b7ce?s=128&d=identicon&r=PG", "display_name": "jeiea", "link": "https://stackoverflow.com/users/4197293/jeiea"}, "edited": false, "score": 0, "creation_date": 1490372609, "post_id": 42992808, "comment_id": 73098351, "body": "@jeiea ghci has a debugger built in. The manual has a decent introduction to using it that I encourage you to check out. In regards to your precise question, there is <code>threadDelay</code>, though it is in <code>IO</code> and therefore cannot be used in pure code."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490336855, "creation_date": 1490336855, "answer_id": 42992808, "question_id": 42992623, "link": "https://stackoverflow.com/questions/42992623/whats-preventing-io-flush-in-my-code/42992808#42992808", "title": "What&#39;s preventing IO flush in my code?", "body": "<p>You <em>are</em> seeing the results in real time. It's just that the computation of <code>all isJust . map getNDivisor</code> takes a long time for the third element of <code>eachBaseReps 14</code>.</p>\n"}], "owner": {"reputation": 1106, "user_id": 4197293, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd3542179c9735316f934724992b7ce?s=128&d=identicon&r=PG", "display_name": "jeiea", "link": "https://stackoverflow.com/users/4197293/jeiea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 42992808, "answer_count": 1, "score": 0, "last_activity_date": 1490336855, "creation_date": 1490336103, "question_id": 42992623, "link": "https://stackoverflow.com/questions/42992623/whats-preventing-io-flush-in-my-code", "title": "What&#39;s preventing IO flush in my code?", "body": "<p>I tried solving <a href=\"https://code.google.com/codejam/contest/6254486/dashboard#s=p2\" rel=\"nofollow noreferrer\">this</a>, and the following is trial stuff.</p>\n\n<p>When I test this in ghci with <code>hSetBuffering stdout NoBuffering</code>, <code>solveAct 1</code>, <code>15 10</code>, ghci showed few lines of results and blocked much time, and showed rest result at once.</p>\n\n<p>How can I see the intermediate results in real time?</p>\n\n<pre><code>import Control.Monad\nimport Data.List\nimport Data.Maybe\nimport System.IO\n\nreadInts = fmap read . words &lt;$&gt; getLine :: IO [Int]\n\nmain = do\n  t &lt;- readLn :: IO Int\n  hSetBuffering stdout NoBuffering\n  sequence_ $ solveAct &lt;$&gt; [1..t]\n\nshowTable x = intercalate \"\\n\" $ intercalate \" \" . fmap show &lt;$&gt; x\n\nsolveAct i = do\n  [j, n] &lt;- readInts\n  putStrLn $ \"Case #\" ++ show i ++ \":\"\n  putStrLn $ showTable (take n $ solve (j-1))\n\ndigits n = [[x ^ y | y &lt;- [1..n-1]] | x &lt;- [2..10]]\n\nprimes = 2 : [x | x &lt;- [3,5..], all (\\y -&gt; x `rem` y /= 0) $ takeWhile (&lt;= intSqrt x) primes]\n\nintSqrt = floor . sqrt . fromIntegral\ngetNDivisor n = listToMaybe [x | x &lt;- takeWhile (&lt;= intSqrt n) primes, n `rem` x == 0]\n\ncasesOfMat = subsequences . transpose . digits\ncasesOfJam n = fmap ([1 + x^n | x &lt;- [2..10]]:) $ casesOfMat n\neachBaseReps n = fmap sum . transpose &lt;$&gt; casesOfJam n\n\nsolve :: Int -&gt; [[Int]]\nsolve n = do\n  decimals &lt;- eachBaseReps n\n  let divs = getNDivisor &lt;$&gt; decimals\n  guard $ all isJust divs\n  return $ last decimals : catMaybes divs\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1490331904, "post_id": 42991682, "comment_id": 73074603, "body": "Ah, I misread your question at first.  It looks like you do understand the problem.  The trick to solving this is that it&#39;s ok to have <i>two</i> base cases."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7760350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284748558269839/picture?type=large", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/7760350/jo%c3%a3o-ferreira"}, "edited": false, "score": 0, "creation_date": 1490361836, "post_id": 42991906, "comment_id": 73090795, "body": "Thank you for the answear! I have already tried dat base case actualy! And trying it again i made it! Thank you so much."}], "tags": [], "owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "is_accepted": false, "score": 2, "last_activity_date": 1490332671, "creation_date": 1490332671, "answer_id": 42991906, "question_id": 42991682, "link": "https://stackoverflow.com/questions/42991682/base-case-for-not-going-out-of-the-list/42991906#42991906", "title": "Base case for not going out of the list?", "body": "<p>If your function is passed a list with one element, it will match <code>(x:xs)</code>, with <code>xs</code> matching <code>[]</code>. Then you end up with <code>head []</code> and thus your error. To avoid this, add an additional base case <code>maiores (x:[]) = ...</code> between your two existing cases, and fill it in appropriately.</p>\n\n<p>Also: you can write <code>[x] ++ maiores xs</code> as <code>x : maiores xs</code>, which is more natural because you deconstruct a <code>:</code> and then immediately reconstruct it with the modified value, as opposed to indirectly using <code>++</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "edited": false, "score": 0, "creation_date": 1490357374, "post_id": 42994817, "comment_id": 73087955, "body": "Yes, this is the more idiomatic way to write this, over garunteeing a non-empty list is passed to <code>head</code>."}, {"owner": {"reputation": 1, "user_id": 7760350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284748558269839/picture?type=large", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/7760350/jo%c3%a3o-ferreira"}, "edited": false, "score": 0, "creation_date": 1490361916, "post_id": 42994817, "comment_id": 73090860, "body": "Im realy trying not to use commands in haskell since i gota write this myself in sheet later on. But than you for the answear anyways! One thing dat i did not understand is the foo[] = 4?"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 2, "last_activity_date": 1490344643, "creation_date": 1490344643, "answer_id": 42994817, "question_id": 42991682, "link": "https://stackoverflow.com/questions/42991682/base-case-for-not-going-out-of-the-list/42994817#42994817", "title": "Base case for not going out of the list?", "body": "<p>Never use <code>head</code> or <code>tail</code> in your code, unless you can't avoid it. These are partial functions, which will crash when their input is empty.</p>\n\n<p>Instead, prefer pattern matching: instead of</p>\n\n<pre><code>foo [] = 4\nfoo (x:xs) = x + head xs + foo (tail xs)\n</code></pre>\n\n<p>write</p>\n\n<pre><code>foo [] = 4\nfoo (x1:x2:xs) = x1 + x2 + foo xs\n</code></pre>\n\n<p>Now, if we turn on warnings with <code>-Wall</code>, GHC will suggest that the match in not exhaustive: we forgot to handle the <code>[_]</code> case. So, we can fix the program accordingly</p>\n\n<pre><code>foo [] = 4\nfoo [x] = x\nfoo (x1:x2:xs) = x1 + x2 + foo xs\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7760350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284748558269839/picture?type=large", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/7760350/jo%c3%a3o-ferreira"}, "edited": false, "score": 0, "creation_date": 1490361217, "post_id": 42999667, "comment_id": 73090403, "body": "So technicly what you have done is, if theres a number dat we can compare with, the program choses  maiores (x:y:xs) and if it dosent it goes for maiores(_ : xs) ? But what if x is samller than y ? Does the program chose maiores(_ : xs) ?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 1, "user_id": 7760350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284748558269839/picture?type=large", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/7760350/jo%c3%a3o-ferreira"}, "edited": false, "score": 0, "creation_date": 1490362873, "post_id": 42999667, "comment_id": 73091546, "body": "@Jo&#227;oFerreira Patterns are tried in order. If there is only a single element in the list, the first and second pattern fail, and the third is taken (with <code>xs=[]</code>). If there are &gt;=2 elements, the first pattern fails; the second pattern matches, but then <code>x&gt;y</code> is checked. If it is true, the pattern succeeds, otherwise the pattern fails and the third one is tried. (So, yes, the program chooses <code>maiores (_:xs)</code> when x is smaller than y)"}], "tags": [], "owner": {"reputation": 6460, "user_id": 1178265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sgir6.jpg?s=128&g=1", "display_name": "Gabriel Riba", "link": "https://stackoverflow.com/users/1178265/gabriel-riba"}, "is_accepted": false, "score": 1, "last_activity_date": 1490358896, "creation_date": 1490358896, "answer_id": 42999667, "question_id": 42991682, "link": "https://stackoverflow.com/questions/42991682/base-case-for-not-going-out-of-the-list/42999667#42999667", "title": "Base case for not going out of the list?", "body": "<p>Just make pattern matching more specific. Since (:) is right associative:</p>\n\n<pre><code>maiores:: [Int]-&gt;[Int]\nmaiores [] = []\nmaiores (x : y : xs) | x &gt; y = [x] ++ maiores (y:xs)\nmaiores (_ : xs) = maiores xs\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7760350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284748558269839/picture?type=large", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/7760350/jo%c3%a3o-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490358896, "creation_date": 1490331321, "last_edit_date": 1490331690, "question_id": 42991682, "link": "https://stackoverflow.com/questions/42991682/base-case-for-not-going-out-of-the-list", "title": "Base case for not going out of the list?", "body": "<p>Im very new to haskell and would like to know if theres a basic case for not going out of the list when going threw it! </p>\n\n<p>For example in this code im trying to make a list where it compares the number on the right, and it if its bigger it stays on the list, otherwise we remove it, but it keeps giving me Prelude.head:empty list, since its comparing to nothing in the end im assuming. I've tried every base case i could think off... can anyone help me?</p>\n\n<pre><code>maiores:: [Int]-&gt;[Int]\nmaiores [] = []\nmaiores (x:xs) | x &gt; (head xs) = [x] ++ [maiores xs)\n               | otherwise = maiores xs\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 279749, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1490323230, "post_id": 42990244, "comment_id": 73072265, "body": "&quot;Efficient bubble sort&quot; : - there&#39;s no such thing!! it&#39;s O(N^2) (as you know)"}, {"owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "reply_to_user": {"reputation": 279749, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1490323399, "post_id": 42990244, "comment_id": 73072310, "body": "@MitchWheat Yes, I meant in the narrow sense of avoiding extra iterations. I just randomly ended up with this silly example."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1490324131, "post_id": 42990244, "comment_id": 73072521, "body": "O(N^2) would be quite efficient indeed, compared to the exponential time spent by the implementation posted in this question!"}], "answers": [{"comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 3, "creation_date": 1490323509, "post_id": 42990446, "comment_id": 73072336, "body": "If I had to make a guess, I would say GHC won&#39;t deduplicate the <code>bubble (y:ys)</code> in the question, for the reasons I mention in my answer. (But then again, I didn&#39;t actually look at what Core comes out of the OP&#39;s code...)"}], "tags": [], "owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "is_accepted": true, "score": 3, "last_activity_date": 1490322983, "creation_date": 1490322983, "answer_id": 42990446, "question_id": 42990244, "link": "https://stackoverflow.com/questions/42990244/efficient-bubble-sort/42990446#42990446", "title": "Efficient bubble sort", "body": "<p>Use a <code>where</code> clause:</p>\n\n<pre><code>bubble (x:y:ys)\n  | x &gt; y = (y : fst (bubble (x:ys)), True)\n  | otherwise = (x : fst yys, snd yys)\n  where\n    yys = bubble (y:ys)\nbubble x = (x, False)\nbubblesort xs\n  | snd bxs = bubblesort (fst bxs)\n  | otherwise = fst bxs\n  where\n    bxs = bubble xs\n</code></pre>\n\n<p>GHC will <em>probably</em> figure out how to optimize it to this anyway, but this makes it much more likely since it gives an explicit binding to memoize, rather than having to find duplicated code.</p>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 6, "last_activity_date": 1490323551, "last_edit_date": 1495542325, "creation_date": 1490323086, "answer_id": 42990458, "question_id": 42990244, "link": "https://stackoverflow.com/questions/42990244/efficient-bubble-sort/42990458#42990458", "title": "Efficient bubble sort", "body": "<blockquote>\n  <p>In languages I'm familiar with, it would be horribly inefficient because <code>bubble (y:ys)</code> and <code>bubble xs</code> would be recomputed twice without explicit memoization. But given that Haskell functions don't have side effects, can I assume that the compiler will optimize the duplicate calls away, making my code efficient?</p>\n</blockquote>\n\n<p>No, you can't assume that. This optimisation, called <em>common subexpression elimination</em>, can be a rather tricky trade-off, as you are exchanging time for space. For instance, if the duplicated expression is something that would eat up a lot of memory, it might be preferrable to compute it twice so that you can consume it immediately, rather than computing it just once and leaving it around in memory. For that reason, GHC is pretty conservative when it comes to applying common subexpression elimination. See <a href=\"https://stackoverflow.com/q/39208877/2751851\">this question</a> about an example rather similar to yours, and <a href=\"https://stackoverflow.com/q/40694437/2751851\">this one</a> for in-depth discussion.</p>\n\n<p>(In your case, of course, not wanting to compute <code>bubble (y:ys)</code> twice is entirely reasonable. You can sidestep the whole issue by adding an auxiliary definition, as <a href=\"https://stackoverflow.com/a/42990446/2751851\">Lazersmoke's answer</a> illustrates.)</p>\n"}], "owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 42990446, "answer_count": 2, "score": 2, "last_activity_date": 1490323551, "creation_date": 1490321597, "question_id": 42990244, "link": "https://stackoverflow.com/questions/42990244/efficient-bubble-sort", "title": "Efficient bubble sort", "body": "<p>Obviously, this is just an example I'm using to understand Haskell. I'm not planning to use bubble sort for sorting, nor would I normally care to optimize away a single iteration through a list in a quadratic algorithm.</p>\n\n<p>I was hoping to stop bubble sort when the list is already sorted. I wrote this code where <code>bubble</code> returns, as a second item in the tuple, the boolean status that tells the caller whether any swaps were made:</p>\n\n<pre><code>bubble (x:y:ys)\n    | x &gt; y = (y : fst (bubble (x:ys)), True)\n    | otherwise = (x : fst (bubble (y:ys)), snd (bubble (y:ys)))\nbubble x = (x, False)\nbubblesort xs\n    | snd (bubble xs) = bubblesort (fst (bubble xs))\n    | otherwise = fst (bubble xs)\n</code></pre>\n\n<p>In languages I'm familiar with, it would be horribly inefficient because <code>bubble (y:ys)</code> and <code>bubble xs</code> would be recomputed twice without explicit memoization. But given that Haskell functions don't have side effects, can I assume that the compiler will optimize the duplicate calls away, making my code efficient?</p>\n\n<p>If not, what's a good way to write efficient bubble sort?</p>\n\n<p>I have seen <a href=\"http://www.kovach.me/posts/2012-04-03-sorting.html\" rel=\"nofollow noreferrer\">the approach</a> which checks if the list is sorted:</p>\n\n<pre><code>bubbleSort (x:y:xs) = if sorted thisSort then thisSort else bubbleSort thisSort\n    where thisSort = (min x y) : bubbleSort ((max x y):xs)\nbubbleSort x = x\nsorted (x:y:xs) = if x &lt;= y then sorted (y:xs) else False\nsorted x = x\n</code></pre>\n\n<p>But I am trying to avoid the one additional iteration through the list (once <code>bubbleSort</code> performed no swaps, one more list traversal to verify that the list is sorted is unnecessary).</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 6, "creation_date": 1490318835, "post_id": 42989648, "comment_id": 73071182, "body": "I think you should go back to basics, forget everything you know about other languages, and learn haskell. This question shows immense confusion over everything about how haskell works. It really is actually different from what you&#39;re used to. The patterns you are attempting to leverage here are actively harmful."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490319166, "post_id": 42989648, "comment_id": 73071267, "body": "Do you actually <i>want</i> <code>k</code> to be <code>Integer</code>, or would you also make it <code>Int</code>?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 2, "creation_date": 1490319260, "post_id": 42989648, "comment_id": 73071283, "body": "@Carl, if only that&#39;s how learning worked.  Let&#39;s let him/her know specifically which ideas need to be corrected"}], "answers": [{"comments": [{"owner": {"reputation": 10216, "user_id": 854207, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/R6DhK.jpg?s=128&g=1", "display_name": "paul", "link": "https://stackoverflow.com/users/854207/paul"}, "edited": false, "score": 1, "creation_date": 1540032472, "post_id": 42990658, "comment_id": 92720539, "body": "But what happens if in a program I need to keep for instance the incremental number of errors to know when I have to activate a Circuit breaker. Where can I store that number?."}, {"owner": {"reputation": 99, "user_id": 7151170, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106084696105464/picture?type=large", "display_name": "Orestes Kappa", "link": "https://stackoverflow.com/users/7151170/orestes-kappa"}, "reply_to_user": {"reputation": 10216, "user_id": 854207, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/R6DhK.jpg?s=128&g=1", "display_name": "paul", "link": "https://stackoverflow.com/users/854207/paul"}, "edited": false, "score": 1, "creation_date": 1567604187, "post_id": 42990658, "comment_id": 102012403, "body": "@paul You can either simply carry the number along with you or use something like a State monad (which is more advanced)."}], "tags": [], "owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "is_accepted": true, "score": 6, "last_activity_date": 1490324375, "creation_date": 1490324375, "answer_id": 42990658, "question_id": 42989648, "link": "https://stackoverflow.com/questions/42989648/set-counter-in-haskell-and-increment-it/42990658#42990658", "title": "Set counter in haskell and increment it", "body": "<p>I can't say I understand what you are trying to do in your code, but I think I can address a fundamental misunderstanding arising from your title question (\"Set counter in haskell and increment it\")</p>\n\n<p>All values in Haskell are immutable, which means they can't be changed after they are set. When you write <code>k = 0 + 1</code>, that means that for the rest of eternity, whenever someone sees <code>k</code> they know for certain that it really means <code>0 + 1</code>, which is of course equal to <code>1</code>. Because of this, you can't make the value of <code>k</code> change for each iteration of your function.</p>\n\n<p>Here is an example of using recursion to simulate iteration in Haskell. This function will take a number and add up all the numbers less than or equal to that number all the way down to 0:</p>\n\n<pre><code>sumLessThan :: Int -&gt; Int\nsumLessThan 0 = 0\nsumLessThan k = k + sumLessThan (k - 1)\n</code></pre>\n\n<p>Now if I evaluate <code>sumLessThan 3</code>, we can see use the second function definition and substitute <code>3</code> for <code>k</code> to get <code>sumLessThan 3 = 3 + sumLessThan (3 - 1)</code>. If we keep going, we eventually find the actual result:</p>\n\n<pre><code>sumLessThan 3\n3 + sumLessThan (3 - 1)\n3 + sumLessThan 2\n3 + (2 + sumLessThan (2 - 1))\n3 + (2 + sumLessThan 1)\n3 + (2 + (1 + sumLessThan 0))\n3 + (2 + (1 + 0))\n3 + (2 + 1)\n3 + 3\n6\n</code></pre>\n\n<p>As you can see, we aren't keeping track of a separate value and computing the result based on that, we are computing the result <em>in terms of smaller results</em>, getting smaller and smaller until we reach our <em>base case</em>, which is a trivial case that is easy to calculate. Our base case was <code>sumLessThan 0 = 0</code></p>\n\n<p>This is the correct pattern to follow when writing \"loops\" in Haskell. You should not attempt to use a separate \"iterator\" value.</p>\n"}], "owner": {"reputation": 23, "user_id": 7759779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18682f1b0f3c32c602ba892b45e26345?s=128&d=identicon&r=PG&f=1", "display_name": "shargath", "link": "https://stackoverflow.com/users/7759779/shargath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6951, "favorite_count": 0, "accepted_answer_id": 42990658, "answer_count": 1, "score": 2, "last_activity_date": 1490344164, "creation_date": 1490317268, "last_edit_date": 1490344164, "question_id": 42989648, "link": "https://stackoverflow.com/questions/42989648/set-counter-in-haskell-and-increment-it", "title": "Set counter in haskell and increment it", "body": "<pre><code>digits :: Int-&gt;Int-&gt;Int\ndigits x y\n     |x`mod`10 == y`mod`10 = count x y \n     |otherwise = digits (x`div`10) (y`div`10)\n\ncount :: Int -&gt; Int -&gt; Int\nk = 0 + 1\ncount x y \n    |x &lt; 1 = getprize k\n    |otherwise = digits (x`div`10) (y`div`10) \n\ngetprize :: Int -&gt; Int\ngetprize k\n      |k == 8 = 1000000\n      |k == 7 = 100000\n      |k == 6 = 8000\n      |k == 5 = 300       \n      |k == 4 = 20\n      |k == 3 = 5\n      |k == 2 = 1\n      |k &lt; 2 = k\n      |otherwise = 43 \n</code></pre>\n\n<p>So I wrote this code in Haskell and the goal is to search how many digits in the input numbers x, y are equal and when I try to set a counter (in my code k) I can't call getprize with k cause it is registered as an integer how can I set the counter to be int so I can count how many digits are the same?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1490312645, "post_id": 42988950, "comment_id": 73069466, "body": "Which version of GHCi? Mine doesn&#39;t accept <code>f x = x + 1</code> as a input (parse error)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 4, "creation_date": 1490312745, "post_id": 42988950, "comment_id": 73069500, "body": "@Mephy It&#39;s new in GHC 8."}, {"owner": {"reputation": 936, "user_id": 4884579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fca1fac3b94fed8f0291116e9b4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/4884579/erik"}, "edited": false, "score": 0, "creation_date": 1490312755, "post_id": 42988950, "comment_id": 73069502, "body": "As I understand it, having to use <code>let</code> to bind names in GHCi is an effect of how it is implemented. You can imagine you&#39;re entering commands into a &quot;do-block&quot; in the IO monad."}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 936, "user_id": 4884579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fca1fac3b94fed8f0291116e9b4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/4884579/erik"}, "edited": false, "score": 0, "creation_date": 1490346225, "post_id": 42988950, "comment_id": 73080805, "body": "@Erik I&#39;m not she that that is how it&#39;s actually implemented (I believe you&#39;re not directly entering statements in an IO do block, rather there&#39;s an IO action in GHCi&#39;s code that is interpreting your statements). But it&#39;s certainly deliberate that the syntax is based on do block syntax."}, {"owner": {"reputation": 28488, "user_id": 402884, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35583fe46c2cde92467710cc7ceff266?s=128&d=identicon&r=PG", "display_name": "Chris Martin", "link": "https://stackoverflow.com/users/402884/chris-martin"}, "edited": false, "score": 0, "creation_date": 1513411313, "post_id": 42988950, "comment_id": 82651403, "body": "The manual discusses this: <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ghci.html\" rel=\"nofollow noreferrer\">downloads.haskell.org/~ghc/latest/docs/html/users_guide/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 14, "last_activity_date": 1490313209, "last_edit_date": 1490313209, "creation_date": 1490312894, "answer_id": 42988998, "question_id": 42988950, "link": "https://stackoverflow.com/questions/42988950/let-vs-regular-assignment-in-ghci/42988998#42988998", "title": "let vs regular assignment in GHCi", "body": "<p>No, there's no difference.</p>\n\n<p>It used to be that ghci was essentially an open-ended IO do block. But the inability to define new types in this syntax form, and the need to write <code>let</code> for every definition, were seen as annoying restrictions that often got in the way of everyday interactive use, and so the syntax of ghci has slowly become more permissive. But it is just a syntax change -- nothing deep.</p>\n\n<p>However, there is one thing to be aware of: if you want to start a block, you must do that explicitly. For example,</p>\n\n<pre><code>&gt; f [] = 3\n&gt; f (x:xs) = 4\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>&gt; let f [] = 3\n&gt; let f (x:xs) = 4\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>&gt; :{\n| let f [] = 3\n|     f (x:xs) = 4\n| :}\n</code></pre>\n\n<p>hence will be a <em>new</em> definition of <code>f</code> that shadows the old one and is only defined on non-empty lists, whereas you probably meant to give two equations for a single <code>f</code>. With automatic block mode (<code>:set +m</code>), ghci can notice that <code>let</code> started a block and automatically give you the latter when you type <code>let</code>, thus:</p>\n\n<pre><code>&gt; let f [] = 3\n|     f (x:xs) = 4\n|\n</code></pre>\n\n<p>It will not do this for short-form (non-<code>let</code>) definitions.</p>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 3966456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1677e4fdd3c56cfca9d2711064876394?s=128&d=identicon&r=PG&f=1", "display_name": "Weijun Zhou", "link": "https://stackoverflow.com/users/3966456/weijun-zhou"}, "is_accepted": false, "score": 2, "last_activity_date": 1513407652, "creation_date": 1513407652, "answer_id": 47843383, "question_id": 42988950, "link": "https://stackoverflow.com/questions/42988950/let-vs-regular-assignment-in-ghci/47843383#47843383", "title": "let vs regular assignment in GHCi", "body": "<p>Although this question was asked months ago, I do notice some more difference when I start to learn Haskell recently.</p>\n\n<pre><code>&gt; :set -Wall\n&gt; a = 2\n&gt; let a = 3\n</code></pre>\n\n<p>results in a warning about <strong>name shadowing</strong> (<em>-Wname-shadowing</em>), while</p>\n\n<pre><code>&gt; :set -Wall\n&gt; a = 2\n&gt; a = 3\n</code></pre>\n\n<p>does not. It seems that the warning only checks for explicitly written <code>let</code> statements.</p>\n"}, {"tags": [], "owner": {"reputation": 31724, "user_id": 6264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbb17eeeecd3d9d06f4db310ab630a12?s=128&d=identicon&r=PG", "display_name": "Michiel Borkent", "link": "https://stackoverflow.com/users/6264/michiel-borkent"}, "is_accepted": false, "score": 2, "last_activity_date": 1536221452, "creation_date": 1536221452, "answer_id": 52199440, "question_id": 42988950, "link": "https://stackoverflow.com/questions/42988950/let-vs-regular-assignment-in-ghci/52199440#52199440", "title": "let vs regular assignment in GHCi", "body": "<p>Another difference:</p>\n\n<pre><code>\u03bb&gt; x = 1 :: Int\n\u03bb&gt; :sprint x\nx = _\n\u03bb&gt; let x = 1 :: Int\n\u03bb&gt; :sprint x\nx = 1\n</code></pre>\n"}], "owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1099, "favorite_count": 2, "accepted_answer_id": 42988998, "answer_count": 3, "score": 5, "last_activity_date": 1536221452, "creation_date": 1490312527, "last_edit_date": 1490312940, "question_id": 42988950, "link": "https://stackoverflow.com/questions/42988950/let-vs-regular-assignment-in-ghci", "title": "let vs regular assignment in GHCi", "body": "<p>Is there any difference between</p>\n\n<pre><code>f x = x + 1\n</code></pre>\n\n<p>and</p>\n\n<pre><code>let f x = x + 1\n</code></pre>\n\n<p>when typed into GHCi? IIUC, there's a special rule that <code>let</code> without <code>in</code> inside <code>GHCi</code> effectively applies to the entire scope of the interpreter. But if the presence of <code>let</code> makes no difference, what's the point of this rule?</p>\n\n<p>Edit: using GHCi version 8.0.2.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1490323530, "post_id": 42988658, "comment_id": 73072342, "body": "It&#39;s also <code>Bounded</code>, so <code>[minBound..maxBound]</code> works."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 3, "creation_date": 1490317350, "post_id": 42989386, "comment_id": 73070799, "body": "I don&#39;t think that is the policy, official or otherwise (I certainly wouldn&#39;t agree with it). Else we&#39;d also have <code>instance Monoid Int where {mempty = 0; mappend = (+)}</code>. I&#39;d rather say the policy is, \u201cmake it an instance if there is exactly one law-abiding, non-pathological way to do it\u201d. The \u201cnon-pathological\u201d bit is of course a bit vague, but in case of <code>Enum ()</code> it&#39;s utterly obvious what the instance must do."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1490317805, "post_id": 42989386, "comment_id": 73070924, "body": "@leftaroundabout Thanks for the nuance; I agree that&#39;s an important part of the policy."}, {"owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "edited": false, "score": 0, "creation_date": 1490324672, "post_id": 42989386, "comment_id": 73072665, "body": "To expand on the <code>Foldable</code>/<code>Traversable</code> point, consider this code: <code>maximum (1,0)</code>. This looks like it should obviously be <code>1</code>, but it is actually <code>0</code> because the instance for <code>Foldable</code> for tuples considers the second element to be the thing it is &quot;folding over,&quot; as in <code>foldMap f (_, y) = f y</code>."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 4, "last_activity_date": 1490315537, "creation_date": 1490315537, "answer_id": 42989386, "question_id": 42988658, "link": "https://stackoverflow.com/questions/42988658/why-is-unit-type-a-member-of-enum-typeclass/42989386#42989386", "title": "Why is unit type a member of Enum typeclass?", "body": "<p>The unofficial policy for these kinds of things is \"make it an instance unless it can't be (in a law-abiding way)\". This policy has caused some surprises in the past (the <code>Foldable</code>/<code>Traversable</code> instances for tuples spring to mind), but for the most part is a positive one. It is common to come across some function that you'd like to use that's polymorphic over a variety of classes, and be delighted to find that it works for the concrete type you happen to need in your current code because your concrete type has the appropriate instances in place.</p>\n"}], "owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 42989386, "answer_count": 1, "score": 2, "last_activity_date": 1490315537, "creation_date": 1490310760, "question_id": 42988658, "link": "https://stackoverflow.com/questions/42988658/why-is-unit-type-a-member-of-enum-typeclass", "title": "Why is unit type a member of Enum typeclass?", "body": "<p><a href=\"http://learnyouahaskell.com/types-and-typeclasses\" rel=\"nofollow noreferrer\">LYAH</a> says:</p>\n\n<blockquote>\n  <p><code>Enum</code> members are sequentially ordered types \u2014 they can be enumerated. The main advantage of the <code>Enum</code> typeclass is that we can use its types in list ranges. They also have defined successors and predecessors, which you can get with the <code>succ</code> and <code>pred</code> functions. Types in this class: <code>()</code>, <code>Bool</code>, <code>Char</code>, <code>Ordering</code>, <code>Int</code>, <code>Integer</code>, <code>Float</code> and <code>Double</code>.</p>\n</blockquote>\n\n<p>Why is <code>()</code> a member of this typeclass? While it supports all the required functionality, it doesn't seem useful, in the sense that <code>succ</code> and <code>pred</code> will always fail, and using it in a list range would yield just <code>()</code> itself.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1490311898, "post_id": 42988226, "comment_id": 73069212, "body": "If you <i>only</i> want the check -- and don&#39;t care about the bindings -- there is also <code>null . drop 3</code>."}], "answers": [{"tags": [], "owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "is_accepted": true, "score": 9, "last_activity_date": 1490308784, "creation_date": 1490308784, "answer_id": 42988293, "question_id": 42988226, "link": "https://stackoverflow.com/questions/42988226/haskell-test-if-list-length-4/42988293#42988293", "title": "Haskell: test if list length &lt; 4", "body": "<pre><code>  stringToMove :: String -&gt; Maybe Move\n  stringToMove (l1:n1:l2:n2:rest) = Just (stringToCoords l1 n1, stringToCoords l2 n2)\n  stringToMove _ = Nothing\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "edited": false, "score": 0, "creation_date": 1490309666, "post_id": 42988410, "comment_id": 73068483, "body": "Your solution is awesome, I&#39;m going to use it, but I have to accept the other answer since this is the way to go in the general case"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 2, "creation_date": 1490309798, "post_id": 42988410, "comment_id": 73068551, "body": "I really dislike the implicit use of <code>fail</code> here in an intentionally-inexhaustive pattern match. The <code>foo &lt;- return bar</code> <i>looks</i> like it is redundant and should be replaced with a <code>let</code>, but actually there is error checking hidden in there."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1490309987, "post_id": 42988410, "comment_id": 73068616, "body": "@amalloy well, that&#39;s what&#39;s clever about this answer, isn&#39;t it? But I agree that it would probably be clearer to write explicit <code>&lt;- Just s</code> instead of <code>&lt;- return s</code>. To still stay polymorphic, <code>&lt;- pure s</code> would also be an option \u2013 it&#39;s completely equivalent to <code>return</code>, but hints that there&#39;s <i>not</i> a forgotten monad-law reduction here."}], "tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": false, "score": 4, "last_activity_date": 1490309398, "creation_date": 1490309398, "answer_id": 42988410, "question_id": 42988226, "link": "https://stackoverflow.com/questions/42988226/haskell-test-if-list-length-4/42988410#42988410", "title": "Haskell: test if list length &lt; 4", "body": "<p>I just feel like chiming in, if you have a lot of checks like this and you want to return a <code>Maybe</code>, you can use <code>do</code> notation:</p>\n\n<pre><code>stringToMove :: String -&gt; Maybe Move\nstringToMove s = do\n    l1:n1:l2:n2:_ &lt;- return s\n    return (stringToCoords l1 n1, stringToCoords l2 n2)\n</code></pre>\n\n<p>You can do failable bindings as many times as you like, and if any of them fails, the function will return <code>Nothing</code>.</p>\n"}], "owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42988293, "answer_count": 2, "score": 1, "last_activity_date": 1490309398, "creation_date": 1490308479, "question_id": 42988226, "link": "https://stackoverflow.com/questions/42988226/haskell-test-if-list-length-4", "title": "Haskell: test if list length &lt; 4", "body": "<p>I have the following haskell function that returns <code>Nothing</code> if the <code>String</code> is shorter than 4 characters: </p>\n\n<pre><code>  stringToMove :: String -&gt; Maybe Move\n  stringToMove [] = Nothing\n  stringToMove [a] = Nothing\n  stringToMove [a, b] = Nothing\n  stringToMove [a, b, c] = Nothing\n  stringToMove (l1:n1:l2:n2:rest) = Just (stringToCoords l1 n1, stringToCoords l2 n2)\n</code></pre>\n\n<p>I could test on <code>length string</code>, but as far as I read, this is not the haskell way of writing this, since if <code>String</code> is long, all of it will be evaluated.</p>\n\n<p>Is there an elegant way of writing this without having to repeat <code>Nothing</code> in each line? </p>\n"}, {"tags": ["haskell", "documentation", "haddock", "reflex"], "answers": [{"comments": [{"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490322047, "post_id": 42988338, "comment_id": 73071975, "body": "I obtained my file via <code>git clone</code> and my ghc is 7.10.3"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490337738, "post_id": 42988338, "comment_id": 73076684, "body": "If you&#39;ve cloned all files, the project should include a <code>.cabal</code> file. Use <code>cabal haddock</code>."}, {"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490369481, "post_id": 42988338, "comment_id": 73096135, "body": "Like this?  <code>cabal haddock --html -o docs</code> my terminal says <code>cabal: unrecognized &#39;haddock&#39; option </code>-o&#39;`"}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": true, "score": 3, "last_activity_date": 1490309025, "last_edit_date": 1592644375, "creation_date": 1490309025, "answer_id": 42988338, "question_id": 42987302, "link": "https://stackoverflow.com/questions/42987302/haddock-breaks-down-on-if-else-endif-clauses/42988338#42988338", "title": "Haddock breaks down on #if #else #endif clauses", "body": "<p>That code uses <code>-cpp</code>. Preprocessor directives are not part of the usual Haskell language. In order to correctly parse that code, you need to <a href=\"https://www.haskell.org/haddock/doc/html/invoking.html#cpp\" rel=\"nofollow noreferrer\">specify additional options to Haddock</a>:</p>\n<blockquote>\n<h2>2.1. Using literate or pre-processed source</h2>\n<p>Since Haddock uses GHC internally, both plain and literate Haskell sources are accepted without the need for the user to do anything. <strong>To use the C pre-processor, however, the user must pass the the <code>-cpp</code> option to GHC using <code>--optghc</code>.</strong> [emphasis mine]</p>\n</blockquote>\n<p>There are two problems, though. C preprocessor macro expansion you've posted will only work with <a href=\"https://downloads.haskell.org/%7Eghc/8.0-latest/docs/html/users_guide/phases.html#options-affecting-the-c-pre-processor\" rel=\"nofollow noreferrer\">GHC 8.0 (or later)</a> if the package is exposed. It should, however, work with <code>cabal haddock</code> or <code>stack haddock</code> regardless of GHC's version. The latter variants are recommended if you try to build the documentation of a cabal/stack package, by the way.</p>\n<p>If you still know  what you're doing, use <code>haddock --optghc=-cpp</code>.</p>\n"}], "owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 42988338, "answer_count": 1, "score": 1, "last_activity_date": 1490309025, "creation_date": 1490304345, "last_edit_date": 1490305097, "question_id": 42987302, "link": "https://stackoverflow.com/questions/42987302/haddock-breaks-down-on-if-else-endif-clauses", "title": "Haddock breaks down on #if #else #endif clauses", "body": "<p>I am trying to generate documentations for a github library using haddock.  Here's the code I entered:</p>\n\n<pre><code>$ find -name '*.hs' | xargs haddock --html -o docs\nsrc/Reflex/Dom/Xhr.hs:154:0:\n     error: missing binary operator before token \"(\"\n     #if MIN_VERSION_aeson(1,0,0)\n     ^\n</code></pre>\n\n<p>Then I looked up the relevant section of my source code <code>Xhr.hs</code> line 154:</p>\n\n<pre><code>import Data.Aeson\n#if MIN_VERSION_aeson(1,0,0)\nimport Data.Aeson.Text\n#else\nimport Data.Aeson.Encode\n#endif\n</code></pre>\n\n<p>I didn't know <code>#if</code>, <code>#else</code> and <code>#endif</code> were part of Haskell but I could guess the meaning.  Depending on the version, the code should import either <code>Aeson.Text</code> or <code>Aeson.Encode</code>.  Just in case, I looked up the version:</p>\n\n<pre><code>$ ghc-pkg list | grep aeson\n    aeson-0.11.3.0\n</code></pre>\n\n<p>This was enough to give haddock difficulty.  The info pages get sent to a folder called <code>docs</code> which contains a few empty html files waiting to be populated with the details of the <code>Reflex.Dom</code> library.</p>\n"}, {"tags": ["list", "haskell", "recursion"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1490304110, "post_id": 42987216, "comment_id": 73066062, "body": "You can use <code>filter</code>."}, {"owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "edited": false, "score": 2, "creation_date": 1490304771, "post_id": 42987216, "comment_id": 73066459, "body": "FWIW, you can write that as <code>chessboard = [(x,y) | x &lt;- [0..8], y &lt;- [0..8]]</code>, or better yet, use a <a href=\"https://hackage.haskell.org/package/containers-0.5.10.1/docs/Data-Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a>."}, {"owner": {"reputation": 1247, "user_id": 3485629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640b2583577ec470ac273b27f78025d5?s=128&d=identicon&r=PG", "display_name": "basile-henry", "link": "https://stackoverflow.com/users/3485629/basile-henry"}, "edited": false, "score": 0, "creation_date": 1490363775, "post_id": 42987216, "comment_id": 73092142, "body": "Btw for an 8x8 board the biggest index in a 0 indexed board is (7, 7), not (8, 8)"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1490304465, "creation_date": 1490304465, "answer_id": 42987338, "question_id": 42987216, "link": "https://stackoverflow.com/questions/42987216/how-do-i-remove-items-from-a-list-with-specific-rules-in-haskell/42987338#42987338", "title": "How do i remove items from a list with specific rules in haskell?", "body": "<p>You can use <a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:filter\" rel=\"nofollow noreferrer\"><code>filter :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></a>. Note that the the first argument - the predicate - actually decides <strong>what to keep</strong>. Not what to remove (so if it says <code>True</code> that means it puts the element in the resulting list):</p>\n\n<p>So in order to remove all values with <code>x = 0</code>, you can use</p>\n\n<pre><code>filter (\\(x,_) -&gt; x /= 0) chessboard\n</code></pre>\n\n<p>Or filter out all elements with <code>y</code> equal to <code>k</code>:</p>\n\n<pre><code>filtery k = filter (\\(_,y) -&gt; y /= k)\n</code></pre>\n\n<p>You can filter out all elements that attack a queen positioned at <code>(xq,yq)</code> with:</p>\n\n<pre><code>filterqueen :: (Int,Int) -&gt; [(Int,Int)] -&gt; [(Int,Int)]\nfilterqueen (xq,yq) = filter noattack\n    where noattack (x,y) = xq /= x &amp;&amp; yq /= y &amp;&amp; dx /= dy &amp;&amp; dx /= -dy\n              where dx = x-xq\n                    dy = y-yq\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 6860348, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ed7e687b609c4ab8f9b25a490d2ec67?s=128&d=identicon&r=PG&f=1", "display_name": "boss revs", "link": "https://stackoverflow.com/users/6860348/boss-revs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490304465, "creation_date": 1490304047, "last_edit_date": 1490304150, "question_id": 42987216, "link": "https://stackoverflow.com/questions/42987216/how-do-i-remove-items-from-a-list-with-specific-rules-in-haskell", "title": "How do i remove items from a list with specific rules in haskell?", "body": "<p>Basically i have a tupple of positions from an 8 x 8 chess board like so</p>\n\n<pre><code>chessboard = [(0,0),(0,1),(0,2),(0,3),(0,4),(0,5),(0,6),(0,7),(0,8),(1,0),\n(1,1),(1,2),(1,3),(1,4),(1,5),(1,6),(1,7),(1,8),(2,0),(2,1),(2,2),(2,3),   \n(2,4),(2,5),(2,6),(2,7),(2,8),(3,0),(3,1),(3,2),(3,3),(3,4),(3,5),(3,6),\n(3,7),(3,8),(4,0),(4,1),(4,2),(4,3),(4,4),(4,5),(4,6),(4,7),(4,8),(5,0),\n(5,1),(5,2),(5,3),(5,4),(5,5),(5,6),(5,7),(5,8),(6,0),(6,1),(6,2),(6,3),\n(6,4),(6,5),(6,6),(6,7),(6,8),(7,0),(7,1),(7,2),(7,3),(7,4),(7,5),(7,6),\n(7,7),(7,8),(8,0),(8,1),(8,2),(8,3),(8,4),(8,5),(8,6),(8,7),(8,8)]\n</code></pre>\n\n<p>I need to be able to place 8 queens on the chess board without each one being able to kill another one. I figured out a method to do this: if a queen is, for example, on (0,0) then no positions containing the same row or column is allowed, so I can remove (0,1), (0,2), (0,3) ... (x,y+1)  and (1,0) , (2,0), (3,0) ... (x+1,y) from the chessboard list. So if my queen is on (0,0), how can i remove all the tupples that are (x, y+1) , (x+1,y) , (x+1, y+1), (x-1,y-1) ? I'm leaning towards recursion, but cannot figure it out. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1490301528, "post_id": 42986436, "comment_id": 73064696, "body": "Do you mean that you want to sum the digits that are odd or the odd indexed digits?"}, {"owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "reply_to_user": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1490301606, "post_id": 42986436, "comment_id": 73064742, "body": "@GabrieleB-David odd indexed, thanks edited."}, {"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1490301645, "post_id": 42986436, "comment_id": 73064762, "body": "Have you tried taking the modulus of the index?"}], "answers": [{"tags": [], "owner": {"reputation": 1218, "user_id": 6042307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6ebc7609bac3a4ddf6c7920c2c083a?s=128&d=identicon&r=PG", "display_name": "gabesoft", "link": "https://stackoverflow.com/users/6042307/gabesoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1490303094, "last_edit_date": 1490303094, "creation_date": 1490302190, "answer_id": 42986703, "question_id": 42986436, "link": "https://stackoverflow.com/questions/42986436/how-to-sum-only-the-odd-indexed-digits-in-haskell/42986703#42986703", "title": "How to sum only the odd indexed digits in Haskell?", "body": "<p>You could add the indexes, filter only the ones you need, and then sum. </p>\n\n<pre><code>lsum xs = sum $ map fst $ filter (odd . snd) $ zip xs [1..]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2231, "user_id": 1027321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KkFZC.jpg?s=128&g=1", "display_name": "jakubdaniel", "link": "https://stackoverflow.com/users/1027321/jakubdaniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1490302673, "last_edit_date": 1490302673, "creation_date": 1490302372, "answer_id": 42986768, "question_id": 42986436, "link": "https://stackoverflow.com/questions/42986436/how-to-sum-only-the-odd-indexed-digits-in-haskell/42986768#42986768", "title": "How to sum only the odd indexed digits in Haskell?", "body": "<p>First, the problem with what you try, is that you simply call <code>sum</code> on the rest of the digits, this is not your <code>lsum</code> so how do you expect it to skip elements? So you probably wanted to put <code>lsum</code> there instead and make a recursive call.</p>\n\n<p>Now you would like to take control over your recursion.</p>\n\n<p>If you insist on walking over a list of digits, you could <code>reverse</code> it, and then make your recursion skip elements (alternatively, you would have to recurse to the end of the list and start eating it from there, in which case it would get messier to recognize which elements to include in the sum):</p>\n\n<pre><code>lsum = lsum' . reverse where\n    lsum' :: Num a =&gt; [a] -&gt; a\n    lsum' [] = 0\n    lsum' [_] = 0\n    lsum' (_ : odd : tail) = odd + lsum' tail\n</code></pre>\n\n<p>or you could alternate between two consumers of the list</p>\n\n<pre><code>    lsum' :: Num a =&gt; [a] -&gt; a\n    lsum' [] = 0\n    lsum' (_ : tail) = lsum'' tail\n\n    lsum'' :: Num a =&gt; [a] -&gt; a\n    lsum'' [] = 0\n    lsum'' (odd : tail) = odd + lsum' tail\n</code></pre>\n\n<p>of course there are many other ways, but I guess this might inspire you to search for a better solution yourself, as it seems like a school assignment.</p>\n"}], "owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490305141, "creation_date": 1490301196, "last_edit_date": 1490301619, "question_id": 42986436, "link": "https://stackoverflow.com/questions/42986436/how-to-sum-only-the-odd-indexed-digits-in-haskell", "title": "How to sum only the odd indexed digits in Haskell?", "body": "<p>I have an input integer: 23415423 <br></p>\n\n<p>My program can split it into an array and sum them, but i only need the odd ones. <br>\nI have tried ?^ element but not working. <br></p>\n\n<pre><code>lsum :: Num a =&gt; [a] -&gt; a\nlsum [] = 0\nlsum (h:t) = h + sum t\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming", "monads", "syntactic-sugar", "comonad"], "comments": [{"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1490299432, "post_id": 42985892, "comment_id": 73063524, "body": "Further, despite my referring to it as <code>(&lt;-)</code> throughout the question; you can&#39;t actually use it as a prefix operator like that..."}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 6, "creation_date": 1490300058, "post_id": 42985892, "comment_id": 73063874, "body": "<code>&lt;-</code> is not a function at all, it is a part of Haskell\u2019s <i>syntax</i>. Specifically, it is specially recognized by the parser as part of <code>do</code> blocks."}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1490300125, "post_id": 42985892, "comment_id": 73063915, "body": "As Alexis King says <code>(&lt;-)</code> is not a function; it is just syntax sugar. In <code>do { x &lt;- m; f x }</code>, you can&#39;t meaningfully separate the <code>&lt;-</code> from the <code>;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1490300340, "post_id": 42986158, "comment_id": 73064033, "body": "Indeed, so if I want to do without that symbol, is <code>Comonad</code> the only/best way or are there other/better ways?"}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 4, "creation_date": 1490300497, "post_id": 42986158, "comment_id": 73064108, "body": "@Tshimanga <code>do</code> notation is <i>just sugar</i>. You can rewrite <i>any</i> <code>do</code> block using <code>&gt;&gt;=</code>, <code>&gt;&gt;</code>, lambdas, and <code>let</code>. You could use the unsugared syntax if you\u2019d like."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490301078, "post_id": 42986158, "comment_id": 73064451, "body": "@AlexisKing, then what does <code>x &lt;- a</code> desugar to? I&#39;m inclined to believe @jberryman and @duplode in that, on it&#39;s own, it doesn&#39;t actually represent a proper expression outside of the GHCi execution enviornment. I have tried <code>(connect $ def {creds}) &gt;&gt;= (\\pipe -&gt;return pipe)</code> and the line runs in GHCi without error, but it tosses the resulting <code>m Pipe</code> (which isn&#39;t what I want anyways) out into the ether without a handle haha"}, {"owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "edited": false, "score": 0, "creation_date": 1490301710, "post_id": 42986158, "comment_id": 73064793, "body": "GHCi operates in IO, which is why you can do stuff like <code>print 123</code> and it prints 123. So you can use <code>str &lt;- getLine</code>, and it&#39;ll wait for you to put in a line, and then it&#39;ll bind <code>str</code> to the result."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 2, "creation_date": 1490302447, "post_id": 42986158, "comment_id": 73065165, "body": "@Tshimanga and <code>Comonad</code> has nothing to do with this. You&#39;d be better off forgetting comonads are even a thing until long after you&#39;ve completely understood monads (and applicatives, and transformers, and lenses, and categories, and...)"}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 1, "creation_date": 1490303076, "post_id": 42986158, "comment_id": 73065479, "body": "@BenjaminHodgson I only suggested that <code>extract</code> would be an alternative method of unpackaging monads that doesn&#39;t really on the syntactic sugar of <code>do</code>-notation. I&#39;m by no means married to the idea of making heavy use of <code>Comonad</code>, nor am I suggesting a deeper connection than &quot;this also does the job&quot;. If you have a third alternative (that is, neither sugar nor <code>Comonad</code>) to offer, I&#39;m always open to learning something new"}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 2, "creation_date": 1490303302, "post_id": 42986158, "comment_id": 73065619, "body": "@Tshimanga <code>x &lt;- a</code> cannot desugar to anything in isolation because <code>x &lt;- a</code> is only valid inside a larger <code>do</code> block. It would be like asking what <code>(3 +</code> means\u2014it is not a valid expression. However, <i>any</i> valid <code>do</code> block <b>can</b> be converted to code without <code>do</code> notation. For example, <code>do { x &lt;- a; return x }</code> is desugared to <code>a &gt;&gt;= (\\x -&gt; return x)</code> (though that is redundant, since it\u2019s precisely equivalent to <code>a</code> by the monad laws)."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490303773, "post_id": 42986158, "comment_id": 73065872, "body": "@AlexisKing indeed, and happens to be my point in the last comment I directed to you. All that said, while saying that it &quot;desugars&quot; to it certainly seems a touch too strong a statement, <code>extract</code> would seem to offer a suitable alternative in accomplishing the same task. What do you think?"}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 1, "creation_date": 1490304711, "post_id": 42986158, "comment_id": 73066419, "body": "@Tshimanga But it <b><i>does</i></b> desugar to that. What you seem to be misunderstanding is that is <b>literally</b> how GHC compiles <code>do</code> blocks. They get converted to uses of <code>&gt;&gt;=</code> and <code>&gt;&gt;</code> as a compilation step, I believe before GHC generates core. <code>do</code> blocks are macros, they are syntactic sugar, they are shorthand syntax, and they specifically work with monads (<code>RebindableSyntax</code> aside). Saying \u201cdesugars\u201d is too strong is not true, since it <b><i>literally does</i></b> desugar."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490305451, "post_id": 42986158, "comment_id": 73066791, "body": "@AlexisKing, i meant too strong to say it desugars to <code>extract</code>. I&#39;m aware of how <code>do</code> blocks are translated into the natural transformations by the compiler. Initially, my curiosity was about what I should probably call an incomplete segment of a <code>do</code> block (GHCi was completing it for me). Now I just want to explore other ways of unpacking monads"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 3, "creation_date": 1490305460, "post_id": 42986158, "comment_id": 73066794, "body": "@Tshimanga I think we all misinterpreted your question a little. What might be helpful is to observe that <code>a &lt;- x</code> doesn&#39;t actually &quot;extract&quot; a value. What <code>Monad</code> gives you is <i>composition</i> (<code>(&gt;&gt;=) :: Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code>); we can never pull a value of type <code>a</code> or <code>b</code> out of one of those <code>m a</code> or <code>m b</code> (except for certain <i>concrete</i> <code>m</code>); indeed this &quot;limitation&quot; is what allows haskell to use monads to accomplish <code>IO</code> while maintaining purity. All this is what I think @BenjaminHodgson is getting at when he suggests you have more studying to do to fully grok Monad"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1490305621, "post_id": 42986158, "comment_id": 73066870, "body": "More concretely, most things that are instances of <code>Monad</code> have no possible law-abiding <code>Comonad</code> instance, so you can&#39;t expect to use <code>extract</code> on them."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 2, "creation_date": 1490305951, "post_id": 42986158, "comment_id": 73067021, "body": "@jberryman yeah I think my initial confusion stemmed from that when I typed <code>a &lt;- x</code> in GHCi, it actually returned to me an unpacked pipe. This made me think that in general <code>a &lt;- x</code> did some unpacking, despite knowing that the natural transformations of a monad can&#39;t actually do that. Maybe I thought there was some caveat in Haskell that made things not quite like the category theoretic concepts I&#39;m familiar with."}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1490307231, "post_id": 42986158, "comment_id": 73067558, "body": "@Tshimanga Everything entered into GHCi is effectively inside one big <code>IO</code> <code>do</code> block, which is why that syntax works in the REPL. When you used <code>a &lt;- x</code> in the REPL, you are using the <code>&gt;&gt;=</code> operation of <code>IO</code>. The type of <code>connect</code> has a <code>MonadIO</code> constraint. Comonads and <code>extract</code> are not being used anywhere."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490307792, "post_id": 42986158, "comment_id": 73067799, "body": "@AlexisKing I wasn&#39;t making the claim that <code>Comonad</code>s or <code>extract</code> were lurking under anywhere the hood. Just saying that since <code>a &lt;- x</code> <i>as typed into the REPL</i> isn&#39;t a valid expression, I might be better disciplined to use another approach that doesn&#39;t depend on GHCi covering the rest. The type signature of <code>extract</code> suggested the possibility that I might use that instead to write something that not only executed as desired in the REPL but also represent valid code on it&#39;s own <i>as written</i>."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1490307991, "post_id": 42986158, "comment_id": 73067865, "body": "@AlexisKing again, I never was making the claim that there was a fundamental link between <code>do</code> and <code>Comonad</code>. Merely entertaining the idea of whether or not there could be an opportunistic way to implement <code>extract</code> to do the same process in this specific situation."}], "tags": [], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "is_accepted": true, "score": 9, "last_activity_date": 1490300147, "creation_date": 1490300147, "answer_id": 42986158, "question_id": 42985892, "link": "https://stackoverflow.com/questions/42985892/haskells-in-terms-of-the-natural-transformations-of-monad/42986158#42986158", "title": "Haskell&#39;s (&lt;-) in Terms of the Natural Transformations of Monad", "body": "<blockquote>\n  <p>I'm wondering what the type of the (&lt;-) operator is ...</p>\n</blockquote>\n\n<p><code>&lt;-</code> doesn't have a type, it's part of the syntax of <code>do</code> notation, which as you know is converted to sequences of <code>&gt;&gt;=</code> and <code>return</code> during a process called desugaring.</p>\n\n<blockquote>\n  <p>but what about just the line x &lt;- a ...?</p>\n</blockquote>\n\n<p>That's a syntax error in normal haskell code and the compiler would complain. The reason the line:</p>\n\n<pre><code>ghci&gt; pipe &lt;- connect $ def {credentials}\n</code></pre>\n\n<p>works in ghci is that the repl is a sort of <code>do</code> block; you can think of each entry as a line in your <code>main</code> function (it's a bit more hairy than that, but that's a good approximation). That's why you need (until recently) to say <code>let foo = bar</code> in ghci to declare a binding as well.</p>\n"}, {"comments": [{"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1490308397, "post_id": 42987648, "comment_id": 73068039, "body": "yes, i know. im not trying to create <code>comonad</code> instances for <code>monad</code>s in general. that&#39;d be a silly short-lived endeavour. i was entertaining whether there it was possible to create a <code>comonad</code> instance to leverage for this specific scenario in particular. to my knowledge, while it&#39;s true that <b>most</b> <code>monad</code>s don&#39;t support a <code>comonad</code>, I have not encountered the statement that <b>no</b> <code>monad</code>s can implement <code>comonad</code> instances"}], "tags": [], "owner": {"reputation": 1735, "user_id": 2892792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5DNyi.jpg?s=128&g=1", "display_name": "Lazersmoke", "link": "https://stackoverflow.com/users/2892792/lazersmoke"}, "is_accepted": false, "score": 4, "last_activity_date": 1490305770, "creation_date": 1490305770, "answer_id": 42987648, "question_id": 42985892, "link": "https://stackoverflow.com/questions/42985892/haskells-in-terms-of-the-natural-transformations-of-monad/42987648#42987648", "title": "Haskell&#39;s (&lt;-) in Terms of the Natural Transformations of Monad", "body": "<blockquote>\n  <p>Ideally it seems like it'd be best to just make a Comonad instance to enable using extract :: Monad m => m a -> a as pipe = extract $ connect $ def {creds} but it bugs me that I don't understand (&lt;-).</p>\n</blockquote>\n\n<p>Comonad has nothing to do with Monads. In fact, most Monads don't have any valid Comonad instance. Consider the <code>[]</code> Monad:</p>\n\n<pre><code>instance Monad [a] where\n  return x = [x]\n  xs &gt;&gt;= f = concat (map f xs)\n</code></pre>\n\n<p>If we try to write a Comonad instance, we can't define <code>extract :: m a -&gt; a</code></p>\n\n<pre><code>instance Comonad [a] where\n  extract (x:_) = x\n  extract [] = ???\n</code></pre>\n\n<p>This tells us something interesting about Monads, namely that we can't write a general function with the type <code>Monad m =&gt; m a -&gt; a</code>. In other words, we can't \"extract\" a value from a Monad without additional knowledge about it.</p>\n\n<p>So how does the do-notation syntax <code>do {x &lt;- [1,2,3]; return [x,x]}</code> work?</p>\n\n<p>Since <code>&lt;-</code> is actually just syntax sugar, just like how <code>[1,2,3]</code> actually means <code>1 : 2 : 3 : []</code>, the above expression actually means <code>[1,2,3] &gt;&gt;= (\\x -&gt; return [x,x])</code>, which in turn evaluates to <code>concat (map (\\x -&gt; [[x,x]]) [1,2,3]))</code>, which comes out to <code>[1,1,2,2,3,3]</code>. </p>\n\n<p>Notice how the arrow transformed into a <code>&gt;&gt;=</code> and a lambda. This uses only built-in (in the typeclass) Monad functions, so it works for any Monad in general. </p>\n\n<p>We can pretend to extract a value by using <code>(&gt;&gt;=) :: Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code> and working with the \"extracted\" <code>a</code> inside the function we provide, like in the lambda in the list example above. However, it is impossible to actually get a value out of a Monad in a generic way, which is why the return type of <code>&gt;&gt;=</code> is <code>m b</code> (in the Monad)</p>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 2, "last_activity_date": 1490330415, "last_edit_date": 1495541853, "creation_date": 1490329083, "answer_id": 42991339, "question_id": 42985892, "link": "https://stackoverflow.com/questions/42985892/haskells-in-terms-of-the-natural-transformations-of-monad/42991339#42991339", "title": "Haskell&#39;s (&lt;-) in Terms of the Natural Transformations of Monad", "body": "<blockquote>\n  <p>So what is <code>(&lt;-)</code> exactly? Can it be replaced entirely by using <code>extract</code>? Is that the best way to desugar/circumvent it?</p>\n</blockquote>\n\n<p>Note that the do-block <code>&lt;-</code> and <code>extract</code> mean very different things even for types that have both <code>Monad</code> and <code>Comonad</code> instances. For instance, consider <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-List-NonEmpty.html\" rel=\"nofollow noreferrer\">non-empty lists</a>. They have instances of both <code>Monad</code> (which is very much like the usual one for lists) and <code>Comonad</code> (with <code>extend</code>/<code>=&gt;&gt;</code> applying a function to all suffixes of the list). If we write a do-block such as...</p>\n\n<pre><code>import qualified Data.List.NonEmpty as N\nimport Data.List.NonEmpty (NonEmpty(..))\nimport Data.Function ((&amp;))\n\nalternating :: NonEmpty Integer\nalternating = do\n    x &lt;- N.fromList [1..6]\n    -x :| [x]\n</code></pre>\n\n<p>... the <code>x</code> in <code>x &lt;- N.fromList [1..6]</code> stands for the elements of the non-empty list; however, this <code>x</code> <em>must</em> be used to build a new list (or, more generally, to set up a new monadic computation). That, as others have explained, reflects how do-notation is desugared. It becomes easier to see if we make the desugared code look like the original one:</p>\n\n<pre><code>alternating :: NonEmpty Integer\nalternating =\n    N.fromList [1..6] &gt;&gt;= \\x -&gt;\n    -x :| [x]\n</code></pre>\n\n\n\n<pre><code>GHCi&gt; alternating\n-1 :| [1,-2,2,-3,3,-4,4,-5,5,-6,6]\n</code></pre>\n\n<p>The lines below <code>x &lt;- N.fromList [1..6]</code> in the do-block amount to the body of a lambda. <code>x &lt;-</code> in isolation is therefore akin to a lambda without body, which is not a meaningful thing.</p>\n\n<p>Another important thing to note is that <code>x</code> in the do-block above does not correspond to any one single <code>Integer</code>, but rather to <em>all</em> <code>Integer</code>s in the list. That already gives away that <code>&lt;-</code> does not correspond to an extraction function. (With other monads, the <code>x</code> might even correspond to no values at all, as in <code>x &lt;- Nothing</code> or <code>x &lt;- []</code>. See also <a href=\"https://stackoverflow.com/a/42987648/2751851\">Lazersmoke's answer</a>.)</p>\n\n<p>On the other hand, <code>extract</code> does extract a single value, with no ifs or buts...</p>\n\n<pre><code>GHCi&gt; extract (N.fromList [1..6])\n1\n</code></pre>\n\n<p>... however, it is really a <em>single</em> value: the tail of the list is discarded. If we want to use the suffixes of the list, we need <code>extend</code>/<code>(=&gt;&gt;)</code>...</p>\n\n<pre><code>GHCi&gt; N.fromList [1..6] =&gt;&gt; product =&gt;&gt; sum\n1956 :| [1236,516,156,36,6]\n</code></pre>\n\n<p>If we had a co-do-notation for comonads (cf. <a href=\"https://hackage.haskell.org/package/codo-notation\" rel=\"nofollow noreferrer\">this package</a> and the links therein), the example above might get rewritten as something in the vein of:</p>\n\n<pre><code>-- codo introduces a function: x &amp; f = f x\nN.fromList [1..6] &amp; codo xs -&gt; do\n    ys &lt;- product xs\n    sum ys\n</code></pre>\n\n<p>The statements would correspond to plain values; the bound variables (<code>xs</code> and <code>ys</code>), to comonadic values (in this case, to list suffixes). That is exactly the opposite of what we have with monadic do-blocks. All in all, as far as your question is concerned, switching to comonads just swaps which things we can't refer to outside of the context of a computation.</p>\n"}], "owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 42986158, "answer_count": 3, "score": 2, "last_activity_date": 1490330415, "creation_date": 1490299206, "question_id": 42985892, "link": "https://stackoverflow.com/questions/42985892/haskells-in-terms-of-the-natural-transformations-of-monad", "title": "Haskell&#39;s (&lt;-) in Terms of the Natural Transformations of Monad", "body": "<p>So I'm playing around with the hasbolt module in GHCi and I had a curiosity about some desugaring. I've been connecting to a Neo4j database by creating a pipe as follows</p>\n\n<pre><code>ghci&gt; pipe &lt;- connect $ def {credentials}\n</code></pre>\n\n<p>and that works just fine. However, I'm wondering what the type of the <code>(&lt;-)</code> operator is (GHCi won't tell me). Most desugaring explanations describe that</p>\n\n<pre><code>do x &lt;- a\n   return x\n</code></pre>\n\n<p>desugars to</p>\n\n<pre><code>a &gt;&gt;= (\\x -&gt; return x)\n</code></pre>\n\n<p>but what about just the line <code>x &lt;- a</code>?\nIt doesn't help me to add in the <code>return</code> because I want <code>pipe :: Pipe</code> not <code>pipe :: Control.Monad.IO.Class.MonadIO m =&gt; m Pipe</code>, but <code>(&gt;&gt;=) :: Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code> so trying to desugar using <code>bind</code> and <code>return</code>/<code>pure</code> doesn't work without it. </p>\n\n<p>Ideally it seems like it'd be best to just make a <code>Comonad</code> instance to enable using <code>extract :: Monad m =&gt; m a -&gt; a</code> as <code>pipe = extract $ connect $ def {creds}</code> but it bugs me that I don't understand <code>(&lt;-)</code>.</p>\n\n<p>Another oddity is that, treating <code>(&lt;-)</code> as haskell function, it's first argument is an out-of-scope variable, but that wouldn't mean that</p>\n\n<pre><code>(&lt;-) :: a -&gt; m b -&gt; b\n</code></pre>\n\n<p>because not just anything can be used as a free variable. For instance, you couldn't bind the pipe to a <code>Num</code> type or a <code>Bool</code>. The variable has to be a \"String\"ish thing, except it never is actually a <code>String</code>; and you definitely can't try actually binding to a <code>String</code>. So it seems as if it isn't a haskell function in the usual sense (unless there is a class of functions that take values from the free variable namespace... unlikely). So what is <code>(&lt;-)</code> exactly? Can it be replaced entirely by using <code>extract</code>? Is that the best way to desugar/circumvent it?</p>\n"}, {"tags": ["haskell", "documentation", "haddock"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490296251, "post_id": 42984660, "comment_id": 73061620, "body": "It&#39;s not entirely clear what the problem is. You do not know how to generate the documentation as webpages? Or you have a question how to install it? Or you have a question about a specific feature in haddock?"}, {"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490296844, "post_id": 42984660, "comment_id": 73061951, "body": "@WillemVanOnsem after I <code>git clone</code> what do I type into the shell to generate documentation?"}], "answers": [{"comments": [{"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490296728, "post_id": 42984898, "comment_id": 73061893, "body": "where are the documentations saved?"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 1, "creation_date": 1490298367, "post_id": 42984898, "comment_id": 73062880, "body": "@johnmangual At least for <code>stack haddock</code>, stack will tell you where the documentation is saved after you run <code>stack haddock</code>."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 1, "last_activity_date": 1490296069, "creation_date": 1490296069, "answer_id": 42984898, "question_id": 42984660, "link": "https://stackoverflow.com/questions/42984660/how-to-generate-documentations-with-haddock/42984898#42984898", "title": "how to generate documentations with haddock?", "body": "<p><code>cabal haddock</code> or <code>stack haddock</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490297583, "post_id": 42985219, "comment_id": 73062422, "body": "yes I was about to say... how my Haskell files are buried in <code>*.hs</code> files at various depths. <code>find . -name &quot;*.hs&quot;</code> oh you got tat!"}, {"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490297669, "post_id": 42985219, "comment_id": 73062474, "body": "can you tell <code>haddock</code> to skip files where haddock doesn&#39;t work?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1490299242, "post_id": 42985219, "comment_id": 73063401, "body": "@johnmangual: I never encountered this error before. It looks like haddock is having problems with a &quot;macro&quot;."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 1, "creation_date": 1490299375, "post_id": 42985219, "comment_id": 73063477, "body": "@johnmangual: does adding <code>--optghc=&#39;-cpp&#39;</code> solves the issue?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1490297750, "last_edit_date": 1490297750, "creation_date": 1490297038, "answer_id": 42985219, "question_id": 42984660, "link": "https://stackoverflow.com/questions/42984660/how-to-generate-documentations-with-haddock/42985219#42985219", "title": "how to generate documentations with haddock?", "body": "<p>Once you have installed <code>haddock</code>, you can run it as follows:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>haddock --html -o &lt;haddock-folder&gt; &lt;list-of-haskell-files&gt;\n</code></pre>\n\n<p>So for instance:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>haddock --html -o the_documentation *.hs\n</code></pre>\n\n<p>will generate the documentation of all the Haskell files in that directory (not any subdirectories) in a directory named <code>the_documentation</code>.</p>\n\n<p>Some shells allow <code>**.hs</code> to look for <strong>all</strong> <code>.hs</code> files (subdirectories included). So you might try:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>haddock --html -o the_documentation **.hs\n</code></pre>\n\n<p>If the shell does not suport that, you can of course use a combination of <code>find</code> and <code>xargs</code>, like:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>find -iname '*.hs' | xargs haddock --html -o the_documentation\n</code></pre>\n\n<p>Here <code>find</code> will generate a list of all files that end with <code>.hs</code>, and <code>xargs</code> will write all these files as parameters to <code>haddock --html ...</code>.</p>\n"}], "owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 42985219, "answer_count": 2, "score": 0, "last_activity_date": 1490298213, "creation_date": 1490295199, "last_edit_date": 1490298213, "question_id": 42984660, "link": "https://stackoverflow.com/questions/42984660/how-to-generate-documentations-with-haddock", "title": "how to generate documentations with haddock?", "body": "<p>The project I am using does not have docs on Stackage (they're out of date). Here is the original one which is on verson 0.3</p>\n\n<p><a href=\"https://hackage.haskell.org/package/reflex-dom-0.3/docs/Reflex-Dom-Widget-Basic.html\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/reflex-dom-0.3/docs/Reflex-Dom-Widget-Basic.html</a></p>\n\n<p>I was told I could generate docs with haddock.  I have the source code on my computer (using <code>git clone</code>) version 0.4</p>\n\n<p>The <a href=\"https://www.haskell.org/haddock/doc/html/index.html\" rel=\"nofollow noreferrer\">haddock</a> web page was way too advanced.  </p>\n\n<p>For the beginner, once I am in my directory, how do I generate docs?</p>\n\n<hr>\n\n<p>Thanks to one of the answer I made come progress, but here is an error message:</p>\n\n<pre><code>src/Reflex/Dom/Xhr.hs:154:0:\n     error: missing binary operator before token \"(\"\n     #if MIN_VERSION_aeson(1,0,0)\n     ^\n</code></pre>\n"}, {"tags": ["algorithm", "haskell", "number-theory"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490292920, "post_id": 42983879, "comment_id": 73059779, "body": "But the formula itself shows that it can only generate multiples of four..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490293869, "post_id": 42983879, "comment_id": 73060354, "body": "you have to take into account: (a) we count <b>tuples</b>, so <b>order matters</b> and (b) <b>the domain is Z</b> so negative numbers are valid as well."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1490298027, "post_id": 42983879, "comment_id": 73062699, "body": "Please don&#39;t post formulas or other text as images."}], "answers": [{"comments": [{"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1490294731, "post_id": 42984199, "comment_id": 73060834, "body": "divisors 10 == []. hmm"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1490294795, "post_id": 42984199, "comment_id": 73060866, "body": "@MichaelLitchard: fixed; swapped <code>k</code> and <code>i</code>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1490294738, "last_edit_date": 1490294738, "creation_date": 1490293819, "answer_id": 42984199, "question_id": 42983879, "link": "https://stackoverflow.com/questions/42983879/sum-of-two-squares-wheres-my-error/42984199#42984199", "title": "Sum Of Two Squares: Where&#39;s My Error?", "body": "<p>I think you misread the semantics of the formula. The <a href=\"https://en.wikipedia.org/wiki/Sum_of_squares_function\" rel=\"nofollow noreferrer\"><em>Wikipedia article</em></a> states the following equation:</p>\n\n<p><img src=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/b06ef40117ca8a2f5355cbbc887864745655e2d2\" alt=\"cardinality of sum of powers\"></p>\n\n<p>There are two important remarks here:</p>\n\n<ul>\n<li>the domain is <strong>Z</strong>, not <strong>N</strong>, therefore (-1), (-3), 0, etc. are also valid elements for the squares; and</li>\n<li>we count the number of <strong>tuples</strong>, not <strong>sets</strong> so the <strong>order is important</strong> (and (1,2,2) is not equal to (1,2)): if (1,3) is a solution, so is (3,1) and we count these as two separate ones.</li>\n</ul>\n\n<p>Now 10 has the following divisors: <strong>1</strong>, 2, 5, <strong>10</strong> (your program forgot about 1 and 10). Two are congruent with 1 modulo 4: 1 and 5. Furthermore there are no divisors congruent with 3 modulo 4. So <code>d1 = 2</code> and <code>d3 = 0</code>. Therefore there are eight (4&times;(2-0) = 8) possibilities:</p>\n\n<ol>\n<li>(1,3): 1<sup>2</sup>+3<sup>2</sup>=10</li>\n<li>(3,1): 3<sup>2</sup>+1<sup>2</sup>=10</li>\n<li>(1,-3): 1<sup>2</sup>+(-3)<sup>2</sup>=10</li>\n<li>(3,-1): 3<sup>2</sup>+(-1)<sup>2</sup>=10</li>\n<li>(-1,3): (-1)<sup>2</sup>+3<sup>2</sup>=10</li>\n<li>(-3,1): (-3)<sup>2</sup>+1<sup>2</sup>=10</li>\n<li>(-1,-3): (-1)<sup>2</sup>+(-3)<sup>2</sup>=10</li>\n<li>(-3,-1): (-3)<sup>2</sup>+(-1)<sup>2</sup>=10</li>\n</ol>\n\n<p>Now we only have to resolve the issue with your program. You simply need to start counting from <code>1</code> instead of <code>2</code>:</p>\n\n<pre><code>divisors :: Integer -> [Integer]\ndivisors k = divisors' <b>1</b>\n  where\n    divisors' i | i2 &gt; k = <b>[]</b>\n                | i2 == k = <b>[i]</b>\n                | k `mod` i == 0 = (i:(k `div` i):result)\n                | otherwise = result\n      where i2 = i*i\n            result = divisors' (i+1)</code></pre>\n\n<p>I also simplified the program a bit and solved some other semantical errors. Now it should at least be sound with <em>r<sub>k</sub>(n)</em>.</p>\n"}], "owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 42984199, "answer_count": 1, "score": 1, "last_activity_date": 1490294830, "creation_date": 1490292802, "last_edit_date": 1490294830, "question_id": 42983879, "link": "https://stackoverflow.com/questions/42983879/sum-of-two-squares-wheres-my-error", "title": "Sum Of Two Squares: Where&#39;s My Error?", "body": "<p>I'm trying to calculate the number of ways to write a natural number as the sum of two squares. I'm working from the <a href=\"https://en.wikipedia.org/wiki/Sum_of_squares_function\" rel=\"nofollow noreferrer\">definition</a>:</p>\n\n<p><img src=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/31fc7309e3251ce8dbb8176830a376357484420f\" alt=\"specifically\"></p>\n\n<p>So, here is my code. Below where I test it, I find what I think is an error in the result.</p>\n\n<pre><code>sumOfSquares :: Integer -&gt; Int\nsumOfSquares k = 4 * (d1 - d3)\n  where\n    divs = divisors k\n    d1 = congruents d1_test divs\n    d3 = congruents d3_test divs\n    d1_test n = (n - 1) `mod` 4 == 0\n    d3_test n = (n - 3) `mod` 4 == 0\n\ncongruents :: (Integer -&gt; Bool) -&gt; [Integer] -&gt; Int\ncongruents f divs = length $ filter f divs\n\ndivisors :: Integer -&gt; [Integer]\ndivisors k = divisors' 2 k\n  where\n    divisors' n k' | n*n &gt; k' = [k']\n                   | n*n == k' = [n, k']\n                   | k' `mod` n == 0 = (n:(k' `div` n):result)\n                   | otherwise = result\n      where result = divisors' (n+1) k'\n</code></pre>\n\n<p>And when I run it, it generates:</p>\n\n<pre><code>*Main Numbers.SumOfSquares&gt; sumOfSquares 10\n4\n</code></pre>\n\n<p>I calculated that there is only one way to express 10 as a sum of two squares\n1^2 + 3^2. Note that the intermediate result <code>(d1 - d3)</code> equals 1.</p>\n\n<p>I'm missing something important but don't know what.</p>\n"}, {"tags": ["sql", "haskell", "persistent"], "comments": [{"owner": {"reputation": 464, "user_id": 3435730, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6b4cad01be7d94b2182896e7e9d241d3?s=128&d=identicon&r=PG&f=1", "display_name": "asg0451", "link": "https://stackoverflow.com/users/3435730/asg0451"}, "edited": false, "score": 1, "creation_date": 1490289836, "post_id": 42982746, "comment_id": 73057893, "body": "does it work without the default=5.0 bit?"}, {"owner": {"reputation": 2567, "user_id": 3780203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3f3f9ab585dc56fa27e203ce4eb27fd?s=128&d=identicon&r=PG&f=1", "display_name": "ephrion", "link": "https://stackoverflow.com/users/3780203/ephrion"}, "edited": false, "score": 0, "creation_date": 1490301368, "post_id": 42982746, "comment_id": 73064611, "body": "The error generally means that you have a column that already exists that has the wrong value. Can you post the output of <code>SHOW CREATE TABLE face_dimensions;</code>?"}, {"owner": {"reputation": 71, "user_id": 5194247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347471cf1c40e8ddd10600f6ae145eaf?s=128&d=identicon&r=PG", "display_name": "Heath Weiss", "link": "https://stackoverflow.com/users/5194247/heath-weiss"}, "edited": false, "score": 0, "creation_date": 1490387883, "post_id": 42982746, "comment_id": 73106975, "body": "I will reproduce the error on another table."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5194247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347471cf1c40e8ddd10600f6ae145eaf?s=128&d=identicon&r=PG", "display_name": "Heath Weiss", "link": "https://stackoverflow.com/users/5194247/heath-weiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1490444510, "last_edit_date": 1490444510, "creation_date": 1490388547, "answer_id": 43008900, "question_id": 42982746, "link": "https://stackoverflow.com/questions/42982746/haskell-persistent-how-to-add-a-field-to-an-existing-table-of-a-sql-database/43008900#43008900", "title": "Haskell Persistent How to add a field to an existing table of a sql database", "body": "<p>Alec:</p>\n\n<p>No it did not work without the default. The problem was in adding a new field, where there are existing rows which do not contain any value for the new field. That is why I tried the default, to see if the pre-existing rows would get the default value when the new field(column) was inserted. I reproduced a similar error here.                                         </p>\n\n<pre><code>share\n [mkPersist sqlSettings, mkMigrate \"migrateAll\"] [persistLowerCase|\n  WristDimensions\n   name String\n   UniqueWristDimensionName name\n   desc String\n   squaredOffRiserHeight Double \n   radius Double \n   power Double  \n  deriving Show\n  |]                                                                                                              \n</code></pre>\n\n<p>Now I add in some data to populate a row so there is pre-existing data in the table. Then trying adding a new field (newField Double).</p>\n\n<pre><code>  share \n   [mkPersist sqlSettings, mkMigrate \"migrateAll\"] [persistLowerCase|\n   WristDimensions\n   name String\n   UniqueWristDimensionName name\n   desc String\n   squaredOffRiserHeight Double \n   radius Double \n   power Double  \n   newField Double\n   deriving Show\n  |] \n</code></pre>\n\n<p>Now when I run migration:\nGiving the following error.</p>\n\n<pre><code>Migrating: CREATE TEMP TABLE \n\"wrist_dimensions_backup\"(\"id\" INTEGER    PRIMARY KEY,\"name\" \n VARCHAR NOT NULL,\"desc\" VARCHAR NOT  NULL,\n \"squared_off_riser_height\" REAL NOT NULL,\n \"radius\" REAL NOT NULL,\"power\" REAL NOT NULL,\"new_field\" REAL NOT    \n NULL,CONSTRAINT \"unique_wrist_dimension_name\" UNIQUE (\"name\"))\n Migrating: INSERT INTO \"wrist_dimensions_backup\"   \n (\"id\",\"name\",\"desc\",\"squared_off_riser_height\",\"radius\",\"power\") SELECT \n \"id\",\"name\",\"desc\",\"squared_off_riser_height\",\"radius\",\"power\" FROM  \n \"wrist_dimensions\"\n  ChampCad-exe: SQLite3 returned ErrorConstraint while attempting to perform step.\n</code></pre>\n\n<p>Maybe instead of: runMigration migrateAll there is a way of updating that gets around this constraint.</p>\n"}], "owner": {"reputation": 71, "user_id": 5194247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/347471cf1c40e8ddd10600f6ae145eaf?s=128&d=identicon&r=PG", "display_name": "Heath Weiss", "link": "https://stackoverflow.com/users/5194247/heath-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490444510, "creation_date": 1490289302, "last_edit_date": 1490289416, "question_id": 42982746, "link": "https://stackoverflow.com/questions/42982746/haskell-persistent-how-to-add-a-field-to-an-existing-table-of-a-sql-database", "title": "Haskell Persistent How to add a field to an existing table of a sql database", "body": "<p>Given the following Persistent database definition:</p>\n\n<pre><code>share [mkPersist sqlSettings, mkMigrate \"migrateAll\"] [persistLowerCase|\nMount\n   name String\n   UniqueName name\n   desc String\n  deriving Show\n\nFaceSlope\n  slope Double\n  mountId MountId\n  MountIdForFaceSlope mountId\n deriving Show\n\nFaceDimensions\n  zTop Double\n  zBtm Double\n  zHeight Double default=5.0\n  leftx Double\n  lefty Double\n  rightx Double\n  righty Double\n  mountId MountId\n  MountIdForFaceDimensions mountId\n deriving Show\n\nCurrentMount\n  mountId MountId\n deriving Show\n|]\n</code></pre>\n\n<p>I need to add <code>zHeight</code> to the <code>FaceDimensions</code> table. I gave it a default value for any existing rows already in the db. </p>\n\n<p>When I <code>runMigration migrateAll</code> I get the following error.</p>\n\n<blockquote>\n  <p>PersistMarshalError \"field zHeight: Expected Double, received:\n  PersistText \\\"z_height\\\"\"</p>\n</blockquote>\n\n<p>To get this to work, I had to manually add the field to the sqlite database.\nIs there a way I could have done this directly through Persistent?</p>\n"}]